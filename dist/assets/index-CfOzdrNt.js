var WF=Object.defineProperty;var KF=(t,e,n)=>e in t?WF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $i=(t,e,n)=>KF(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var XD={exports:{}},v0={},QD={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm=Symbol.for("react.element"),qF=Symbol.for("react.portal"),HF=Symbol.for("react.fragment"),GF=Symbol.for("react.strict_mode"),YF=Symbol.for("react.profiler"),XF=Symbol.for("react.provider"),QF=Symbol.for("react.context"),ZF=Symbol.for("react.forward_ref"),JF=Symbol.for("react.suspense"),e8=Symbol.for("react.memo"),t8=Symbol.for("react.lazy"),$T=Symbol.iterator;function n8(t){return t===null||typeof t!="object"?null:(t=$T&&t[$T]||t["@@iterator"],typeof t=="function"?t:null)}var ZD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JD=Object.assign,eM={};function qf(t,e,n){this.props=t,this.context=e,this.refs=eM,this.updater=n||ZD}qf.prototype.isReactComponent={};qf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tM(){}tM.prototype=qf.prototype;function YS(t,e,n){this.props=t,this.context=e,this.refs=eM,this.updater=n||ZD}var XS=YS.prototype=new tM;XS.constructor=YS;JD(XS,qf.prototype);XS.isPureReactComponent=!0;var LT=Array.isArray,nM=Object.prototype.hasOwnProperty,QS={current:null},rM={key:!0,ref:!0,__self:!0,__source:!0};function iM(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)nM.call(e,r)&&!rM.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:nm,type:t,key:s,ref:a,props:i,_owner:QS.current}}function r8(t,e){return{$$typeof:nm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ZS(t){return typeof t=="object"&&t!==null&&t.$$typeof===nm}function i8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zT=/\/+/g;function sx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?i8(""+t.key):e.toString(36)}function qg(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case nm:case qF:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+sx(a,0):r,LT(i)?(n="",t!=null&&(n=t.replace(zT,"$&/")+"/"),qg(i,e,n,"",function(c){return c})):i!=null&&(ZS(i)&&(i=r8(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(zT,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",LT(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+sx(s,o);a+=qg(s,e,n,l,i)}else if(l=n8(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+sx(s,o++),a+=qg(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function tg(t,e,n){if(t==null)return t;var r=[],i=0;return qg(t,r,"","",function(s){return e.call(n,s,i++)}),r}function s8(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fr={current:null},Hg={transition:null},a8={ReactCurrentDispatcher:Fr,ReactCurrentBatchConfig:Hg,ReactCurrentOwner:QS};function sM(){throw Error("act(...) is not supported in production builds of React.")}vt.Children={map:tg,forEach:function(t,e,n){tg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tg(t,function(){e++}),e},toArray:function(t){return tg(t,function(e){return e})||[]},only:function(t){if(!ZS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};vt.Component=qf;vt.Fragment=HF;vt.Profiler=YF;vt.PureComponent=YS;vt.StrictMode=GF;vt.Suspense=JF;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a8;vt.act=sM;vt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=JD({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=QS.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)nM.call(e,l)&&!rM.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:nm,type:t.type,key:i,ref:s,props:r,_owner:a}};vt.createContext=function(t){return t={$$typeof:QF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XF,_context:t},t.Consumer=t};vt.createElement=iM;vt.createFactory=function(t){var e=iM.bind(null,t);return e.type=t,e};vt.createRef=function(){return{current:null}};vt.forwardRef=function(t){return{$$typeof:ZF,render:t}};vt.isValidElement=ZS;vt.lazy=function(t){return{$$typeof:t8,_payload:{_status:-1,_result:t},_init:s8}};vt.memo=function(t,e){return{$$typeof:e8,type:t,compare:e===void 0?null:e}};vt.startTransition=function(t){var e=Hg.transition;Hg.transition={};try{t()}finally{Hg.transition=e}};vt.unstable_act=sM;vt.useCallback=function(t,e){return Fr.current.useCallback(t,e)};vt.useContext=function(t){return Fr.current.useContext(t)};vt.useDebugValue=function(){};vt.useDeferredValue=function(t){return Fr.current.useDeferredValue(t)};vt.useEffect=function(t,e){return Fr.current.useEffect(t,e)};vt.useId=function(){return Fr.current.useId()};vt.useImperativeHandle=function(t,e,n){return Fr.current.useImperativeHandle(t,e,n)};vt.useInsertionEffect=function(t,e){return Fr.current.useInsertionEffect(t,e)};vt.useLayoutEffect=function(t,e){return Fr.current.useLayoutEffect(t,e)};vt.useMemo=function(t,e){return Fr.current.useMemo(t,e)};vt.useReducer=function(t,e,n){return Fr.current.useReducer(t,e,n)};vt.useRef=function(t){return Fr.current.useRef(t)};vt.useState=function(t){return Fr.current.useState(t)};vt.useSyncExternalStore=function(t,e,n){return Fr.current.useSyncExternalStore(t,e,n)};vt.useTransition=function(){return Fr.current.useTransition()};vt.version="18.3.1";QD.exports=vt;var L=QD.exports;const B=Wt(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o8=L,l8=Symbol.for("react.element"),c8=Symbol.for("react.fragment"),u8=Object.prototype.hasOwnProperty,f8=o8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d8={key:!0,ref:!0,__self:!0,__source:!0};function aM(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)u8.call(e,r)&&!d8.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:l8,type:t,key:s,ref:a,props:i,_owner:f8.current}}v0.Fragment=c8;v0.jsx=aM;v0.jsxs=aM;XD.exports=v0;var u=XD.exports,zw={},oM={exports:{}},Ci={},lM={exports:{}},cM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,G){var he=Q.length;Q.push(G);e:for(;0<he;){var ce=he-1>>>1,we=Q[ce];if(0<i(we,G))Q[ce]=G,Q[he]=we,he=ce;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var G=Q[0],he=Q.pop();if(he!==G){Q[0]=he;e:for(var ce=0,we=Q.length,ke=we>>>1;ce<ke;){var Ue=2*(ce+1)-1,ct=Q[Ue],ot=Ue+1,Ce=Q[ot];if(0>i(ct,he))ot<we&&0>i(Ce,ct)?(Q[ce]=Ce,Q[ot]=he,ce=ot):(Q[ce]=ct,Q[Ue]=he,ce=Ue);else if(ot<we&&0>i(Ce,he))Q[ce]=Ce,Q[ot]=he,ce=ot;else break e}}return G}function i(Q,G){var he=Q.sortIndex-G.sortIndex;return he!==0?he:Q.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],f=1,d=null,h=3,g=!1,b=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Q){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=Q)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function O(Q){if(y=!1,E(Q),!b)if(n(l)!==null)b=!0,ie(A);else{var G=n(c);G!==null&&le(O,G.startTime-Q)}}function A(Q,G){b=!1,y&&(y=!1,w(T),T=-1),g=!0;var he=h;try{for(E(G),d=n(l);d!==null&&(!(d.expirationTime>G)||Q&&!N());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,h=d.priorityLevel;var we=ce(d.expirationTime<=G);G=t.unstable_now(),typeof we=="function"?d.callback=we:d===n(l)&&r(l),E(G)}else r(l);d=n(l)}if(d!==null)var ke=!0;else{var Ue=n(c);Ue!==null&&le(O,Ue.startTime-G),ke=!1}return ke}finally{d=null,h=he,g=!1}}var P=!1,S=null,T=-1,k=5,z=-1;function N(){return!(t.unstable_now()-z<k)}function $(){if(S!==null){var Q=t.unstable_now();z=Q;var G=!0;try{G=S(!0,Q)}finally{G?M():(P=!1,S=null)}}else P=!1}var M;if(typeof _=="function")M=function(){_($)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,q=Y.port2;Y.port1.onmessage=$,M=function(){q.postMessage(null)}}else M=function(){x($,0)};function ie(Q){S=Q,P||(P=!0,M())}function le(Q,G){T=x(function(){Q(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){b||g||(b=!0,ie(A))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Q){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var he=h;h=G;try{return Q()}finally{h=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,G){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var he=h;h=Q;try{return G()}finally{h=he}},t.unstable_scheduleCallback=function(Q,G,he){var ce=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ce+he:ce):he=ce,Q){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=he+we,Q={id:f++,callback:G,priorityLevel:Q,startTime:he,expirationTime:we,sortIndex:-1},he>ce?(Q.sortIndex=he,e(c,Q),n(l)===null&&Q===n(c)&&(y?(w(T),T=-1):y=!0,le(O,he-ce))):(Q.sortIndex=we,e(l,Q),b||g||(b=!0,ie(A))),Q},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(Q){var G=h;return function(){var he=h;h=G;try{return Q.apply(this,arguments)}finally{h=he}}}})(cM);lM.exports=cM;var h8=lM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p8=L,Ai=h8;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uM=new Set,Fh={};function Pc(t,e){Ju(t,e),Ju(t+"Capture",e)}function Ju(t,e){for(Fh[t]=e,t=0;t<e.length;t++)uM.add(e[t])}var Ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vw=Object.prototype.hasOwnProperty,m8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VT={},FT={};function g8(t){return Vw.call(FT,t)?!0:Vw.call(VT,t)?!1:m8.test(t)?FT[t]=!0:(VT[t]=!0,!1)}function y8(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function v8(t,e,n,r){if(e===null||typeof e>"u"||y8(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Br(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pr[t]=new Br(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pr[e]=new Br(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pr[t]=new Br(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pr[t]=new Br(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pr[t]=new Br(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pr[t]=new Br(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pr[t]=new Br(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pr[t]=new Br(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pr[t]=new Br(t,5,!1,t.toLowerCase(),null,!1,!1)});var JS=/[\-:]([a-z])/g;function e2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(JS,e2);pr[e]=new Br(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(JS,e2);pr[e]=new Br(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(JS,e2);pr[e]=new Br(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pr[t]=new Br(t,1,!1,t.toLowerCase(),null,!1,!1)});pr.xlinkHref=new Br("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pr[t]=new Br(t,1,!1,t.toLowerCase(),null,!0,!0)});function t2(t,e,n,r){var i=pr.hasOwnProperty(e)?pr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(v8(e,n,i,r)&&(n=null),r||i===null?g8(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var no=p8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ng=Symbol.for("react.element"),bu=Symbol.for("react.portal"),xu=Symbol.for("react.fragment"),n2=Symbol.for("react.strict_mode"),Fw=Symbol.for("react.profiler"),fM=Symbol.for("react.provider"),dM=Symbol.for("react.context"),r2=Symbol.for("react.forward_ref"),Bw=Symbol.for("react.suspense"),Uw=Symbol.for("react.suspense_list"),i2=Symbol.for("react.memo"),So=Symbol.for("react.lazy"),hM=Symbol.for("react.offscreen"),BT=Symbol.iterator;function Dd(t){return t===null||typeof t!="object"?null:(t=BT&&t[BT]||t["@@iterator"],typeof t=="function"?t:null)}var yn=Object.assign,ax;function th(t){if(ax===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ax=e&&e[1]||""}return`
`+ax+t}var ox=!1;function lx(t,e){if(!t||ox)return"";ox=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{ox=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?th(t):""}function b8(t){switch(t.tag){case 5:return th(t.type);case 16:return th("Lazy");case 13:return th("Suspense");case 19:return th("SuspenseList");case 0:case 2:case 15:return t=lx(t.type,!1),t;case 11:return t=lx(t.type.render,!1),t;case 1:return t=lx(t.type,!0),t;default:return""}}function Ww(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xu:return"Fragment";case bu:return"Portal";case Fw:return"Profiler";case n2:return"StrictMode";case Bw:return"Suspense";case Uw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dM:return(t.displayName||"Context")+".Consumer";case fM:return(t._context.displayName||"Context")+".Provider";case r2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case i2:return e=t.displayName||null,e!==null?e:Ww(t.type)||"Memo";case So:e=t._payload,t=t._init;try{return Ww(t(e))}catch{}}return null}function x8(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ww(e);case 8:return e===n2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pM(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function w8(t){var e=pM(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rg(t){t._valueTracker||(t._valueTracker=w8(t))}function mM(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pM(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function my(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Kw(t,e){var n=e.checked;return yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function UT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gM(t,e){e=e.checked,e!=null&&t2(t,"checked",e,!1)}function qw(t,e){gM(t,e);var n=Xo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hw(t,e.type,Xo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function WT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hw(t,e,n){(e!=="number"||my(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nh=Array.isArray;function zu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Gw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return yn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(nh(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xo(n)}}function yM(t,e){var n=Xo(e.value),r=Xo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function qT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vM(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vM(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ig,bM=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ig=ig||document.createElement("div"),ig.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ig.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_8=["Webkit","ms","Moz","O"];Object.keys(gh).forEach(function(t){_8.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gh[e]=gh[t]})});function xM(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gh.hasOwnProperty(t)&&gh[t]?(""+e).trim():e+"px"}function wM(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xM(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var S8=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xw(t,e){if(e){if(S8[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function Qw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zw=null;function s2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jw=null,Vu=null,Fu=null;function HT(t){if(t=sm(t)){if(typeof Jw!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=S0(e),Jw(t.stateNode,t.type,e))}}function _M(t){Vu?Fu?Fu.push(t):Fu=[t]:Vu=t}function SM(){if(Vu){var t=Vu,e=Fu;if(Fu=Vu=null,HT(t),e)for(t=0;t<e.length;t++)HT(e[t])}}function EM(t,e){return t(e)}function AM(){}var cx=!1;function TM(t,e,n){if(cx)return t(e,n);cx=!0;try{return EM(t,e,n)}finally{cx=!1,(Vu!==null||Fu!==null)&&(AM(),SM())}}function Uh(t,e){var n=t.stateNode;if(n===null)return null;var r=S0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var e1=!1;if(Ua)try{var Md={};Object.defineProperty(Md,"passive",{get:function(){e1=!0}}),window.addEventListener("test",Md,Md),window.removeEventListener("test",Md,Md)}catch{e1=!1}function E8(t,e,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var yh=!1,gy=null,yy=!1,t1=null,A8={onError:function(t){yh=!0,gy=t}};function T8(t,e,n,r,i,s,a,o,l){yh=!1,gy=null,E8.apply(A8,arguments)}function P8(t,e,n,r,i,s,a,o,l){if(T8.apply(this,arguments),yh){if(yh){var c=gy;yh=!1,gy=null}else throw Error(Ee(198));yy||(yy=!0,t1=c)}}function Cc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PM(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function GT(t){if(Cc(t)!==t)throw Error(Ee(188))}function C8(t){var e=t.alternate;if(!e){if(e=Cc(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return GT(i),t;if(s===r)return GT(i),e;s=s.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function CM(t){return t=C8(t),t!==null?jM(t):null}function jM(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jM(t);if(e!==null)return e;t=t.sibling}return null}var OM=Ai.unstable_scheduleCallback,YT=Ai.unstable_cancelCallback,j8=Ai.unstable_shouldYield,O8=Ai.unstable_requestPaint,Cn=Ai.unstable_now,k8=Ai.unstable_getCurrentPriorityLevel,a2=Ai.unstable_ImmediatePriority,kM=Ai.unstable_UserBlockingPriority,vy=Ai.unstable_NormalPriority,I8=Ai.unstable_LowPriority,IM=Ai.unstable_IdlePriority,b0=null,Zs=null;function N8(t){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(b0,t,void 0,(t.current.flags&128)===128)}catch{}}var Cs=Math.clz32?Math.clz32:R8,D8=Math.log,M8=Math.LN2;function R8(t){return t>>>=0,t===0?32:31-(D8(t)/M8|0)|0}var sg=64,ag=4194304;function rh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function by(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=rh(o):(s&=a,s!==0&&(r=rh(s)))}else a=n&~i,a!==0?r=rh(a):s!==0&&(r=rh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cs(e),i=1<<n,r|=t[n],e&=~i;return r}function $8(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L8(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Cs(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=$8(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function n1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function NM(){var t=sg;return sg<<=1,!(sg&4194240)&&(sg=64),t}function ux(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cs(e),t[e]=n}function z8(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Cs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function o2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Vt=0;function DM(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var MM,l2,RM,$M,LM,r1=!1,og=[],Do=null,Mo=null,Ro=null,Wh=new Map,Kh=new Map,To=[],V8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function XT(t,e){switch(t){case"focusin":case"focusout":Do=null;break;case"dragenter":case"dragleave":Mo=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":Wh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kh.delete(e.pointerId)}}function Rd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sm(e),e!==null&&l2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function F8(t,e,n,r,i){switch(e){case"focusin":return Do=Rd(Do,t,e,n,r,i),!0;case"dragenter":return Mo=Rd(Mo,t,e,n,r,i),!0;case"mouseover":return Ro=Rd(Ro,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Wh.set(s,Rd(Wh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Kh.set(s,Rd(Kh.get(s)||null,t,e,n,r,i)),!0}return!1}function zM(t){var e=Kl(t.target);if(e!==null){var n=Cc(e);if(n!==null){if(e=n.tag,e===13){if(e=PM(n),e!==null){t.blockedOn=e,LM(t.priority,function(){RM(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=i1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zw=r,n.target.dispatchEvent(r),Zw=null}else return e=sm(n),e!==null&&l2(e),t.blockedOn=n,!1;e.shift()}return!0}function QT(t,e,n){Gg(t)&&n.delete(e)}function B8(){r1=!1,Do!==null&&Gg(Do)&&(Do=null),Mo!==null&&Gg(Mo)&&(Mo=null),Ro!==null&&Gg(Ro)&&(Ro=null),Wh.forEach(QT),Kh.forEach(QT)}function $d(t,e){t.blockedOn===e&&(t.blockedOn=null,r1||(r1=!0,Ai.unstable_scheduleCallback(Ai.unstable_NormalPriority,B8)))}function qh(t){function e(i){return $d(i,t)}if(0<og.length){$d(og[0],t);for(var n=1;n<og.length;n++){var r=og[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Do!==null&&$d(Do,t),Mo!==null&&$d(Mo,t),Ro!==null&&$d(Ro,t),Wh.forEach(e),Kh.forEach(e),n=0;n<To.length;n++)r=To[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<To.length&&(n=To[0],n.blockedOn===null);)zM(n),n.blockedOn===null&&To.shift()}var Bu=no.ReactCurrentBatchConfig,xy=!0;function U8(t,e,n,r){var i=Vt,s=Bu.transition;Bu.transition=null;try{Vt=1,c2(t,e,n,r)}finally{Vt=i,Bu.transition=s}}function W8(t,e,n,r){var i=Vt,s=Bu.transition;Bu.transition=null;try{Vt=4,c2(t,e,n,r)}finally{Vt=i,Bu.transition=s}}function c2(t,e,n,r){if(xy){var i=i1(t,e,n,r);if(i===null)xx(t,e,r,wy,n),XT(t,r);else if(F8(i,t,e,n,r))r.stopPropagation();else if(XT(t,r),e&4&&-1<V8.indexOf(t)){for(;i!==null;){var s=sm(i);if(s!==null&&MM(s),s=i1(t,e,n,r),s===null&&xx(t,e,r,wy,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else xx(t,e,r,null,n)}}var wy=null;function i1(t,e,n,r){if(wy=null,t=s2(r),t=Kl(t),t!==null)if(e=Cc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PM(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wy=t,null}function VM(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(k8()){case a2:return 1;case kM:return 4;case vy:case I8:return 16;case IM:return 536870912;default:return 16}default:return 16}}var jo=null,u2=null,Yg=null;function FM(){if(Yg)return Yg;var t,e=u2,n=e.length,r,i="value"in jo?jo.value:jo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Yg=i.slice(t,1<r?1-r:void 0)}function Xg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lg(){return!0}function ZT(){return!1}function ji(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lg:ZT,this.isPropagationStopped=ZT,this}return yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lg)},persist:function(){},isPersistent:lg}),e}var Hf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},f2=ji(Hf),im=yn({},Hf,{view:0,detail:0}),K8=ji(im),fx,dx,Ld,x0=yn({},im,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ld&&(Ld&&t.type==="mousemove"?(fx=t.screenX-Ld.screenX,dx=t.screenY-Ld.screenY):dx=fx=0,Ld=t),fx)},movementY:function(t){return"movementY"in t?t.movementY:dx}}),JT=ji(x0),q8=yn({},x0,{dataTransfer:0}),H8=ji(q8),G8=yn({},im,{relatedTarget:0}),hx=ji(G8),Y8=yn({},Hf,{animationName:0,elapsedTime:0,pseudoElement:0}),X8=ji(Y8),Q8=yn({},Hf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Z8=ji(Q8),J8=yn({},Hf,{data:0}),eP=ji(J8),e9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n9[t])?!!e[t]:!1}function d2(){return r9}var i9=yn({},im,{key:function(t){if(t.key){var e=e9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d2,charCode:function(t){return t.type==="keypress"?Xg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s9=ji(i9),a9=yn({},x0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tP=ji(a9),o9=yn({},im,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d2}),l9=ji(o9),c9=yn({},Hf,{propertyName:0,elapsedTime:0,pseudoElement:0}),u9=ji(c9),f9=yn({},x0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d9=ji(f9),h9=[9,13,27,32],h2=Ua&&"CompositionEvent"in window,vh=null;Ua&&"documentMode"in document&&(vh=document.documentMode);var p9=Ua&&"TextEvent"in window&&!vh,BM=Ua&&(!h2||vh&&8<vh&&11>=vh),nP=" ",rP=!1;function UM(t,e){switch(t){case"keyup":return h9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WM(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wu=!1;function m9(t,e){switch(t){case"compositionend":return WM(e);case"keypress":return e.which!==32?null:(rP=!0,nP);case"textInput":return t=e.data,t===nP&&rP?null:t;default:return null}}function g9(t,e){if(wu)return t==="compositionend"||!h2&&UM(t,e)?(t=FM(),Yg=u2=jo=null,wu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BM&&e.locale!=="ko"?null:e.data;default:return null}}var y9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!y9[t.type]:e==="textarea"}function KM(t,e,n,r){_M(r),e=_y(e,"onChange"),0<e.length&&(n=new f2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bh=null,Hh=null;function v9(t){nR(t,0)}function w0(t){var e=Eu(t);if(mM(e))return t}function b9(t,e){if(t==="change")return e}var qM=!1;if(Ua){var px;if(Ua){var mx="oninput"in document;if(!mx){var sP=document.createElement("div");sP.setAttribute("oninput","return;"),mx=typeof sP.oninput=="function"}px=mx}else px=!1;qM=px&&(!document.documentMode||9<document.documentMode)}function aP(){bh&&(bh.detachEvent("onpropertychange",HM),Hh=bh=null)}function HM(t){if(t.propertyName==="value"&&w0(Hh)){var e=[];KM(e,Hh,t,s2(t)),TM(v9,e)}}function x9(t,e,n){t==="focusin"?(aP(),bh=e,Hh=n,bh.attachEvent("onpropertychange",HM)):t==="focusout"&&aP()}function w9(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return w0(Hh)}function _9(t,e){if(t==="click")return w0(e)}function S9(t,e){if(t==="input"||t==="change")return w0(e)}function E9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Os=typeof Object.is=="function"?Object.is:E9;function Gh(t,e){if(Os(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Vw.call(e,i)||!Os(t[i],e[i]))return!1}return!0}function oP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lP(t,e){var n=oP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oP(n)}}function GM(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?GM(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function YM(){for(var t=window,e=my();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=my(t.document)}return e}function p2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function A9(t){var e=YM(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&GM(n.ownerDocument.documentElement,n)){if(r!==null&&p2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=lP(n,s);var a=lP(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var T9=Ua&&"documentMode"in document&&11>=document.documentMode,_u=null,s1=null,xh=null,a1=!1;function cP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;a1||_u==null||_u!==my(r)||(r=_u,"selectionStart"in r&&p2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xh&&Gh(xh,r)||(xh=r,r=_y(s1,"onSelect"),0<r.length&&(e=new f2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_u)))}function cg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Su={animationend:cg("Animation","AnimationEnd"),animationiteration:cg("Animation","AnimationIteration"),animationstart:cg("Animation","AnimationStart"),transitionend:cg("Transition","TransitionEnd")},gx={},XM={};Ua&&(XM=document.createElement("div").style,"AnimationEvent"in window||(delete Su.animationend.animation,delete Su.animationiteration.animation,delete Su.animationstart.animation),"TransitionEvent"in window||delete Su.transitionend.transition);function _0(t){if(gx[t])return gx[t];if(!Su[t])return t;var e=Su[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XM)return gx[t]=e[n];return t}var QM=_0("animationend"),ZM=_0("animationiteration"),JM=_0("animationstart"),eR=_0("transitionend"),tR=new Map,uP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sl(t,e){tR.set(t,e),Pc(e,[t])}for(var yx=0;yx<uP.length;yx++){var vx=uP[yx],P9=vx.toLowerCase(),C9=vx[0].toUpperCase()+vx.slice(1);sl(P9,"on"+C9)}sl(QM,"onAnimationEnd");sl(ZM,"onAnimationIteration");sl(JM,"onAnimationStart");sl("dblclick","onDoubleClick");sl("focusin","onFocus");sl("focusout","onBlur");sl(eR,"onTransitionEnd");Ju("onMouseEnter",["mouseout","mouseover"]);Ju("onMouseLeave",["mouseout","mouseover"]);Ju("onPointerEnter",["pointerout","pointerover"]);Ju("onPointerLeave",["pointerout","pointerover"]);Pc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j9=new Set("cancel close invalid load scroll toggle".split(" ").concat(ih));function fP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,P8(r,e,void 0,t),t.currentTarget=null}function nR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;fP(i,o,c),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;fP(i,o,c),s=l}}}if(yy)throw t=t1,yy=!1,t1=null,t}function tn(t,e){var n=e[f1];n===void 0&&(n=e[f1]=new Set);var r=t+"__bubble";n.has(r)||(rR(e,t,2,!1),n.add(r))}function bx(t,e,n){var r=0;e&&(r|=4),rR(n,t,r,e)}var ug="_reactListening"+Math.random().toString(36).slice(2);function Yh(t){if(!t[ug]){t[ug]=!0,uM.forEach(function(n){n!=="selectionchange"&&(j9.has(n)||bx(n,!1,t),bx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ug]||(e[ug]=!0,bx("selectionchange",!1,e))}}function rR(t,e,n,r){switch(VM(e)){case 1:var i=U8;break;case 4:i=W8;break;default:i=c2}n=i.bind(null,e,n,t),i=void 0,!e1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function xx(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Kl(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}TM(function(){var c=s,f=s2(n),d=[];e:{var h=tR.get(t);if(h!==void 0){var g=f2,b=t;switch(t){case"keypress":if(Xg(n)===0)break e;case"keydown":case"keyup":g=s9;break;case"focusin":b="focus",g=hx;break;case"focusout":b="blur",g=hx;break;case"beforeblur":case"afterblur":g=hx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=JT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=H8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=l9;break;case QM:case ZM:case JM:g=X8;break;case eR:g=u9;break;case"scroll":g=K8;break;case"wheel":g=d9;break;case"copy":case"cut":case"paste":g=Z8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=tP}var y=(e&4)!==0,x=!y&&t==="scroll",w=y?h!==null?h+"Capture":null:h;y=[];for(var _=c,E;_!==null;){E=_;var O=E.stateNode;if(E.tag===5&&O!==null&&(E=O,w!==null&&(O=Uh(_,w),O!=null&&y.push(Xh(_,O,E)))),x)break;_=_.return}0<y.length&&(h=new g(h,b,null,n,f),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==Zw&&(b=n.relatedTarget||n.fromElement)&&(Kl(b)||b[Wa]))break e;if((g||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,g?(b=n.relatedTarget||n.toElement,g=c,b=b?Kl(b):null,b!==null&&(x=Cc(b),b!==x||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=c),g!==b)){if(y=JT,O="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=tP,O="onPointerLeave",w="onPointerEnter",_="pointer"),x=g==null?h:Eu(g),E=b==null?h:Eu(b),h=new y(O,_+"leave",g,n,f),h.target=x,h.relatedTarget=E,O=null,Kl(f)===c&&(y=new y(w,_+"enter",b,n,f),y.target=E,y.relatedTarget=x,O=y),x=O,g&&b)t:{for(y=g,w=b,_=0,E=y;E;E=au(E))_++;for(E=0,O=w;O;O=au(O))E++;for(;0<_-E;)y=au(y),_--;for(;0<E-_;)w=au(w),E--;for(;_--;){if(y===w||w!==null&&y===w.alternate)break t;y=au(y),w=au(w)}y=null}else y=null;g!==null&&dP(d,h,g,y,!1),b!==null&&x!==null&&dP(d,x,b,y,!0)}}e:{if(h=c?Eu(c):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var A=b9;else if(iP(h))if(qM)A=S9;else{A=w9;var P=x9}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=_9);if(A&&(A=A(t,c))){KM(d,A,n,f);break e}P&&P(t,h,c),t==="focusout"&&(P=h._wrapperState)&&P.controlled&&h.type==="number"&&Hw(h,"number",h.value)}switch(P=c?Eu(c):window,t){case"focusin":(iP(P)||P.contentEditable==="true")&&(_u=P,s1=c,xh=null);break;case"focusout":xh=s1=_u=null;break;case"mousedown":a1=!0;break;case"contextmenu":case"mouseup":case"dragend":a1=!1,cP(d,n,f);break;case"selectionchange":if(T9)break;case"keydown":case"keyup":cP(d,n,f)}var S;if(h2)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else wu?UM(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(BM&&n.locale!=="ko"&&(wu||T!=="onCompositionStart"?T==="onCompositionEnd"&&wu&&(S=FM()):(jo=f,u2="value"in jo?jo.value:jo.textContent,wu=!0)),P=_y(c,T),0<P.length&&(T=new eP(T,t,null,n,f),d.push({event:T,listeners:P}),S?T.data=S:(S=WM(n),S!==null&&(T.data=S)))),(S=p9?m9(t,n):g9(t,n))&&(c=_y(c,"onBeforeInput"),0<c.length&&(f=new eP("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=S))}nR(d,e)})}function Xh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _y(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Uh(t,n),s!=null&&r.unshift(Xh(t,s,i)),s=Uh(t,e),s!=null&&r.push(Xh(t,s,i))),t=t.return}return r}function au(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dP(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=Uh(n,s),l!=null&&a.unshift(Xh(n,l,o))):i||(l=Uh(n,s),l!=null&&a.push(Xh(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var O9=/\r\n?/g,k9=/\u0000|\uFFFD/g;function hP(t){return(typeof t=="string"?t:""+t).replace(O9,`
`).replace(k9,"")}function fg(t,e,n){if(e=hP(e),hP(t)!==e&&n)throw Error(Ee(425))}function Sy(){}var o1=null,l1=null;function c1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var u1=typeof setTimeout=="function"?setTimeout:void 0,I9=typeof clearTimeout=="function"?clearTimeout:void 0,pP=typeof Promise=="function"?Promise:void 0,N9=typeof queueMicrotask=="function"?queueMicrotask:typeof pP<"u"?function(t){return pP.resolve(null).then(t).catch(D9)}:u1;function D9(t){setTimeout(function(){throw t})}function wx(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),qh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);qh(e)}function $o(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gf=Math.random().toString(36).slice(2),Hs="__reactFiber$"+Gf,Qh="__reactProps$"+Gf,Wa="__reactContainer$"+Gf,f1="__reactEvents$"+Gf,M9="__reactListeners$"+Gf,R9="__reactHandles$"+Gf;function Kl(t){var e=t[Hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wa]||n[Hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mP(t);t!==null;){if(n=t[Hs])return n;t=mP(t)}return e}t=n,n=t.parentNode}return null}function sm(t){return t=t[Hs]||t[Wa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Eu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function S0(t){return t[Qh]||null}var d1=[],Au=-1;function al(t){return{current:t}}function an(t){0>Au||(t.current=d1[Au],d1[Au]=null,Au--)}function Qt(t,e){Au++,d1[Au]=t.current,t.current=e}var Qo={},Or=al(Qo),ii=al(!1),fc=Qo;function ef(t,e){var n=t.type.contextTypes;if(!n)return Qo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function si(t){return t=t.childContextTypes,t!=null}function Ey(){an(ii),an(Or)}function gP(t,e,n){if(Or.current!==Qo)throw Error(Ee(168));Qt(Or,e),Qt(ii,n)}function iR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ee(108,x8(t)||"Unknown",i));return yn({},n,r)}function Ay(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qo,fc=Or.current,Qt(Or,t),Qt(ii,ii.current),!0}function yP(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=iR(t,e,fc),r.__reactInternalMemoizedMergedChildContext=t,an(ii),an(Or),Qt(Or,t)):an(ii),Qt(ii,n)}var Ca=null,E0=!1,_x=!1;function sR(t){Ca===null?Ca=[t]:Ca.push(t)}function $9(t){E0=!0,sR(t)}function ol(){if(!_x&&Ca!==null){_x=!0;var t=0,e=Vt;try{var n=Ca;for(Vt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ca=null,E0=!1}catch(i){throw Ca!==null&&(Ca=Ca.slice(t+1)),OM(a2,ol),i}finally{Vt=e,_x=!1}}return null}var Tu=[],Pu=0,Ty=null,Py=0,Ui=[],Wi=0,dc=null,ja=1,Oa="";function Rl(t,e){Tu[Pu++]=Py,Tu[Pu++]=Ty,Ty=t,Py=e}function aR(t,e,n){Ui[Wi++]=ja,Ui[Wi++]=Oa,Ui[Wi++]=dc,dc=t;var r=ja;t=Oa;var i=32-Cs(r)-1;r&=~(1<<i),n+=1;var s=32-Cs(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ja=1<<32-Cs(e)+i|n<<i|r,Oa=s+t}else ja=1<<s|n<<i|r,Oa=t}function m2(t){t.return!==null&&(Rl(t,1),aR(t,1,0))}function g2(t){for(;t===Ty;)Ty=Tu[--Pu],Tu[Pu]=null,Py=Tu[--Pu],Tu[Pu]=null;for(;t===dc;)dc=Ui[--Wi],Ui[Wi]=null,Oa=Ui[--Wi],Ui[Wi]=null,ja=Ui[--Wi],Ui[Wi]=null}var _i=null,xi=null,cn=!1,Ss=null;function oR(t,e){var n=qi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_i=t,xi=$o(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_i=t,xi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=dc!==null?{id:ja,overflow:Oa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_i=t,xi=null,!0):!1;default:return!1}}function h1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function p1(t){if(cn){var e=xi;if(e){var n=e;if(!vP(t,e)){if(h1(t))throw Error(Ee(418));e=$o(n.nextSibling);var r=_i;e&&vP(t,e)?oR(r,n):(t.flags=t.flags&-4097|2,cn=!1,_i=t)}}else{if(h1(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,cn=!1,_i=t}}}function bP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_i=t}function dg(t){if(t!==_i)return!1;if(!cn)return bP(t),cn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!c1(t.type,t.memoizedProps)),e&&(e=xi)){if(h1(t))throw lR(),Error(Ee(418));for(;e;)oR(t,e),e=$o(e.nextSibling)}if(bP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xi=$o(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xi=null}}else xi=_i?$o(t.stateNode.nextSibling):null;return!0}function lR(){for(var t=xi;t;)t=$o(t.nextSibling)}function tf(){xi=_i=null,cn=!1}function y2(t){Ss===null?Ss=[t]:Ss.push(t)}var L9=no.ReactCurrentBatchConfig;function zd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function hg(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xP(t){var e=t._init;return e(t._payload)}function cR(t){function e(w,_){if(t){var E=w.deletions;E===null?(w.deletions=[_],w.flags|=16):E.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=Fo(w,_),w.index=0,w.sibling=null,w}function s(w,_,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<_?(w.flags|=2,_):E):(w.flags|=2,_)):(w.flags|=1048576,_)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,_,E,O){return _===null||_.tag!==6?(_=jx(E,w.mode,O),_.return=w,_):(_=i(_,E),_.return=w,_)}function l(w,_,E,O){var A=E.type;return A===xu?f(w,_,E.props.children,O,E.key):_!==null&&(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===So&&xP(A)===_.type)?(O=i(_,E.props),O.ref=zd(w,_,E),O.return=w,O):(O=ry(E.type,E.key,E.props,null,w.mode,O),O.ref=zd(w,_,E),O.return=w,O)}function c(w,_,E,O){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=Ox(E,w.mode,O),_.return=w,_):(_=i(_,E.children||[]),_.return=w,_)}function f(w,_,E,O,A){return _===null||_.tag!==7?(_=ic(E,w.mode,O,A),_.return=w,_):(_=i(_,E),_.return=w,_)}function d(w,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=jx(""+_,w.mode,E),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ng:return E=ry(_.type,_.key,_.props,null,w.mode,E),E.ref=zd(w,null,_),E.return=w,E;case bu:return _=Ox(_,w.mode,E),_.return=w,_;case So:var O=_._init;return d(w,O(_._payload),E)}if(nh(_)||Dd(_))return _=ic(_,w.mode,E,null),_.return=w,_;hg(w,_)}return null}function h(w,_,E,O){var A=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return A!==null?null:o(w,_,""+E,O);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ng:return E.key===A?l(w,_,E,O):null;case bu:return E.key===A?c(w,_,E,O):null;case So:return A=E._init,h(w,_,A(E._payload),O)}if(nh(E)||Dd(E))return A!==null?null:f(w,_,E,O,null);hg(w,E)}return null}function g(w,_,E,O,A){if(typeof O=="string"&&O!==""||typeof O=="number")return w=w.get(E)||null,o(_,w,""+O,A);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ng:return w=w.get(O.key===null?E:O.key)||null,l(_,w,O,A);case bu:return w=w.get(O.key===null?E:O.key)||null,c(_,w,O,A);case So:var P=O._init;return g(w,_,E,P(O._payload),A)}if(nh(O)||Dd(O))return w=w.get(E)||null,f(_,w,O,A,null);hg(_,O)}return null}function b(w,_,E,O){for(var A=null,P=null,S=_,T=_=0,k=null;S!==null&&T<E.length;T++){S.index>T?(k=S,S=null):k=S.sibling;var z=h(w,S,E[T],O);if(z===null){S===null&&(S=k);break}t&&S&&z.alternate===null&&e(w,S),_=s(z,_,T),P===null?A=z:P.sibling=z,P=z,S=k}if(T===E.length)return n(w,S),cn&&Rl(w,T),A;if(S===null){for(;T<E.length;T++)S=d(w,E[T],O),S!==null&&(_=s(S,_,T),P===null?A=S:P.sibling=S,P=S);return cn&&Rl(w,T),A}for(S=r(w,S);T<E.length;T++)k=g(S,w,T,E[T],O),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?T:k.key),_=s(k,_,T),P===null?A=k:P.sibling=k,P=k);return t&&S.forEach(function(N){return e(w,N)}),cn&&Rl(w,T),A}function y(w,_,E,O){var A=Dd(E);if(typeof A!="function")throw Error(Ee(150));if(E=A.call(E),E==null)throw Error(Ee(151));for(var P=A=null,S=_,T=_=0,k=null,z=E.next();S!==null&&!z.done;T++,z=E.next()){S.index>T?(k=S,S=null):k=S.sibling;var N=h(w,S,z.value,O);if(N===null){S===null&&(S=k);break}t&&S&&N.alternate===null&&e(w,S),_=s(N,_,T),P===null?A=N:P.sibling=N,P=N,S=k}if(z.done)return n(w,S),cn&&Rl(w,T),A;if(S===null){for(;!z.done;T++,z=E.next())z=d(w,z.value,O),z!==null&&(_=s(z,_,T),P===null?A=z:P.sibling=z,P=z);return cn&&Rl(w,T),A}for(S=r(w,S);!z.done;T++,z=E.next())z=g(S,w,T,z.value,O),z!==null&&(t&&z.alternate!==null&&S.delete(z.key===null?T:z.key),_=s(z,_,T),P===null?A=z:P.sibling=z,P=z);return t&&S.forEach(function($){return e(w,$)}),cn&&Rl(w,T),A}function x(w,_,E,O){if(typeof E=="object"&&E!==null&&E.type===xu&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ng:e:{for(var A=E.key,P=_;P!==null;){if(P.key===A){if(A=E.type,A===xu){if(P.tag===7){n(w,P.sibling),_=i(P,E.props.children),_.return=w,w=_;break e}}else if(P.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===So&&xP(A)===P.type){n(w,P.sibling),_=i(P,E.props),_.ref=zd(w,P,E),_.return=w,w=_;break e}n(w,P);break}else e(w,P);P=P.sibling}E.type===xu?(_=ic(E.props.children,w.mode,O,E.key),_.return=w,w=_):(O=ry(E.type,E.key,E.props,null,w.mode,O),O.ref=zd(w,_,E),O.return=w,w=O)}return a(w);case bu:e:{for(P=E.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(w,_.sibling),_=i(_,E.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=Ox(E,w.mode,O),_.return=w,w=_}return a(w);case So:return P=E._init,x(w,_,P(E._payload),O)}if(nh(E))return b(w,_,E,O);if(Dd(E))return y(w,_,E,O);hg(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,E),_.return=w,w=_):(n(w,_),_=jx(E,w.mode,O),_.return=w,w=_),a(w)):n(w,_)}return x}var nf=cR(!0),uR=cR(!1),Cy=al(null),jy=null,Cu=null,v2=null;function b2(){v2=Cu=jy=null}function x2(t){var e=Cy.current;an(Cy),t._currentValue=e}function m1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Uu(t,e){jy=t,v2=Cu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ni=!0),t.firstContext=null)}function Ji(t){var e=t._currentValue;if(v2!==t)if(t={context:t,memoizedValue:e,next:null},Cu===null){if(jy===null)throw Error(Ee(308));Cu=t,jy.dependencies={lanes:0,firstContext:t}}else Cu=Cu.next=t;return e}var ql=null;function w2(t){ql===null?ql=[t]:ql.push(t)}function fR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,w2(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ka(t,r)}function Ka(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Eo=!1;function _2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $a(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,kt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ka(t,n)}return i=r.interleaved,i===null?(e.next=e,w2(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ka(t,n)}function Qg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o2(t,n)}}function wP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oy(t,e,n,r){var i=t.updateQueue;Eo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var f=t.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==a&&(o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,f=c=l=null,o=s;do{var h=o.lane,g=o.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=t,y=o;switch(h=e,g=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){d=b.call(g,d,h);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,h=typeof b=="function"?b.call(g,d,h):b,h==null)break e;d=yn({},d,h);break e;case 2:Eo=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else g={eventTime:g,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(c=f=g,l=d):f=f.next=g,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);pc|=a,t.lanes=a,t.memoizedState=d}}function _P(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ee(191,i));i.call(r)}}}var am={},Js=al(am),Zh=al(am),Jh=al(am);function Hl(t){if(t===am)throw Error(Ee(174));return t}function S2(t,e){switch(Qt(Jh,e),Qt(Zh,t),Qt(Js,am),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yw(e,t)}an(Js),Qt(Js,e)}function rf(){an(Js),an(Zh),an(Jh)}function hR(t){Hl(Jh.current);var e=Hl(Js.current),n=Yw(e,t.type);e!==n&&(Qt(Zh,t),Qt(Js,n))}function E2(t){Zh.current===t&&(an(Js),an(Zh))}var mn=al(0);function ky(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sx=[];function A2(){for(var t=0;t<Sx.length;t++)Sx[t]._workInProgressVersionPrimary=null;Sx.length=0}var Zg=no.ReactCurrentDispatcher,Ex=no.ReactCurrentBatchConfig,hc=0,gn=null,Wn=null,Jn=null,Iy=!1,wh=!1,ep=0,z9=0;function br(){throw Error(Ee(321))}function T2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Os(t[n],e[n]))return!1;return!0}function P2(t,e,n,r,i,s){if(hc=s,gn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zg.current=t===null||t.memoizedState===null?U9:W9,t=n(r,i),wh){s=0;do{if(wh=!1,ep=0,25<=s)throw Error(Ee(301));s+=1,Jn=Wn=null,e.updateQueue=null,Zg.current=K9,t=n(r,i)}while(wh)}if(Zg.current=Ny,e=Wn!==null&&Wn.next!==null,hc=0,Jn=Wn=gn=null,Iy=!1,e)throw Error(Ee(300));return t}function C2(){var t=ep!==0;return ep=0,t}function Ws(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?gn.memoizedState=Jn=t:Jn=Jn.next=t,Jn}function es(){if(Wn===null){var t=gn.alternate;t=t!==null?t.memoizedState:null}else t=Wn.next;var e=Jn===null?gn.memoizedState:Jn.next;if(e!==null)Jn=e,Wn=t;else{if(t===null)throw Error(Ee(310));Wn=t,t={memoizedState:Wn.memoizedState,baseState:Wn.baseState,baseQueue:Wn.baseQueue,queue:Wn.queue,next:null},Jn===null?gn.memoizedState=Jn=t:Jn=Jn.next=t}return Jn}function tp(t,e){return typeof e=="function"?e(t):e}function Ax(t){var e=es(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=Wn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var f=c.lane;if((hc&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,gn.lanes|=f,pc|=f}c=c.next}while(c!==null&&c!==s);l===null?a=r:l.next=o,Os(r,e.memoizedState)||(ni=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,gn.lanes|=s,pc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tx(t){var e=es(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Os(s,e.memoizedState)||(ni=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function pR(){}function mR(t,e){var n=gn,r=es(),i=e(),s=!Os(r.memoizedState,i);if(s&&(r.memoizedState=i,ni=!0),r=r.queue,j2(vR.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Jn!==null&&Jn.memoizedState.tag&1){if(n.flags|=2048,np(9,yR.bind(null,n,r,i,e),void 0,null),tr===null)throw Error(Ee(349));hc&30||gR(n,e,i)}return i}function gR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yR(t,e,n,r){e.value=n,e.getSnapshot=r,bR(e)&&xR(t)}function vR(t,e,n){return n(function(){bR(e)&&xR(t)})}function bR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Os(t,n)}catch{return!0}}function xR(t){var e=Ka(t,1);e!==null&&js(e,t,1,-1)}function SP(t){var e=Ws();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tp,lastRenderedState:t},e.queue=t,t=t.dispatch=B9.bind(null,gn,t),[e.memoizedState,t]}function np(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wR(){return es().memoizedState}function Jg(t,e,n,r){var i=Ws();gn.flags|=t,i.memoizedState=np(1|e,n,void 0,r===void 0?null:r)}function A0(t,e,n,r){var i=es();r=r===void 0?null:r;var s=void 0;if(Wn!==null){var a=Wn.memoizedState;if(s=a.destroy,r!==null&&T2(r,a.deps)){i.memoizedState=np(e,n,s,r);return}}gn.flags|=t,i.memoizedState=np(1|e,n,s,r)}function EP(t,e){return Jg(8390656,8,t,e)}function j2(t,e){return A0(2048,8,t,e)}function _R(t,e){return A0(4,2,t,e)}function SR(t,e){return A0(4,4,t,e)}function ER(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AR(t,e,n){return n=n!=null?n.concat([t]):null,A0(4,4,ER.bind(null,e,t),n)}function O2(){}function TR(t,e){var n=es();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&T2(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PR(t,e){var n=es();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&T2(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function CR(t,e,n){return hc&21?(Os(n,e)||(n=NM(),gn.lanes|=n,pc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ni=!0),t.memoizedState=n)}function V9(t,e){var n=Vt;Vt=n!==0&&4>n?n:4,t(!0);var r=Ex.transition;Ex.transition={};try{t(!1),e()}finally{Vt=n,Ex.transition=r}}function jR(){return es().memoizedState}function F9(t,e,n){var r=Vo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OR(t))kR(e,n);else if(n=fR(t,e,n,r),n!==null){var i=$r();js(n,t,r,i),IR(n,e,r)}}function B9(t,e,n){var r=Vo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OR(t))kR(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Os(o,a)){var l=e.interleaved;l===null?(i.next=i,w2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=fR(t,e,i,r),n!==null&&(i=$r(),js(n,t,r,i),IR(n,e,r))}}function OR(t){var e=t.alternate;return t===gn||e!==null&&e===gn}function kR(t,e){wh=Iy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function IR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o2(t,n)}}var Ny={readContext:Ji,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useInsertionEffect:br,useLayoutEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useMutableSource:br,useSyncExternalStore:br,useId:br,unstable_isNewReconciler:!1},U9={readContext:Ji,useCallback:function(t,e){return Ws().memoizedState=[t,e===void 0?null:e],t},useContext:Ji,useEffect:EP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jg(4194308,4,ER.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jg(4,2,t,e)},useMemo:function(t,e){var n=Ws();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ws();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=F9.bind(null,gn,t),[r.memoizedState,t]},useRef:function(t){var e=Ws();return t={current:t},e.memoizedState=t},useState:SP,useDebugValue:O2,useDeferredValue:function(t){return Ws().memoizedState=t},useTransition:function(){var t=SP(!1),e=t[0];return t=V9.bind(null,t[1]),Ws().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gn,i=Ws();if(cn){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),tr===null)throw Error(Ee(349));hc&30||gR(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,EP(vR.bind(null,r,s,t),[t]),r.flags|=2048,np(9,yR.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ws(),e=tr.identifierPrefix;if(cn){var n=Oa,r=ja;n=(r&~(1<<32-Cs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ep++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=z9++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},W9={readContext:Ji,useCallback:TR,useContext:Ji,useEffect:j2,useImperativeHandle:AR,useInsertionEffect:_R,useLayoutEffect:SR,useMemo:PR,useReducer:Ax,useRef:wR,useState:function(){return Ax(tp)},useDebugValue:O2,useDeferredValue:function(t){var e=es();return CR(e,Wn.memoizedState,t)},useTransition:function(){var t=Ax(tp)[0],e=es().memoizedState;return[t,e]},useMutableSource:pR,useSyncExternalStore:mR,useId:jR,unstable_isNewReconciler:!1},K9={readContext:Ji,useCallback:TR,useContext:Ji,useEffect:j2,useImperativeHandle:AR,useInsertionEffect:_R,useLayoutEffect:SR,useMemo:PR,useReducer:Tx,useRef:wR,useState:function(){return Tx(tp)},useDebugValue:O2,useDeferredValue:function(t){var e=es();return Wn===null?e.memoizedState=t:CR(e,Wn.memoizedState,t)},useTransition:function(){var t=Tx(tp)[0],e=es().memoizedState;return[t,e]},useMutableSource:pR,useSyncExternalStore:mR,useId:jR,unstable_isNewReconciler:!1};function vs(t,e){if(t&&t.defaultProps){e=yn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function g1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var T0={isMounted:function(t){return(t=t._reactInternals)?Cc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$r(),i=Vo(t),s=$a(r,i);s.payload=e,n!=null&&(s.callback=n),e=Lo(t,s,i),e!==null&&(js(e,t,i,r),Qg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$r(),i=Vo(t),s=$a(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lo(t,s,i),e!==null&&(js(e,t,i,r),Qg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$r(),r=Vo(t),i=$a(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lo(t,i,r),e!==null&&(js(e,t,r,n),Qg(e,t,r))}};function AP(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Gh(n,r)||!Gh(i,s):!0}function NR(t,e,n){var r=!1,i=Qo,s=e.contextType;return typeof s=="object"&&s!==null?s=Ji(s):(i=si(e)?fc:Or.current,r=e.contextTypes,s=(r=r!=null)?ef(t,i):Qo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=T0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function TP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&T0.enqueueReplaceState(e,e.state,null)}function y1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},_2(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ji(s):(s=si(e)?fc:Or.current,i.context=ef(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(g1(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&T0.enqueueReplaceState(i,i.state,null),Oy(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function sf(t,e){try{var n="",r=e;do n+=b8(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Px(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function v1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q9=typeof WeakMap=="function"?WeakMap:Map;function DR(t,e,n){n=$a(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){My||(My=!0,C1=r),v1(t,e)},n}function MR(t,e,n){n=$a(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){v1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){v1(t,e),typeof r!="function"&&(zo===null?zo=new Set([this]):zo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function PP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new q9;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=aB.bind(null,t,e,n),e.then(t,t))}function CP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jP(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$a(-1,1),e.tag=2,Lo(n,e,1))),n.lanes|=1),t)}var H9=no.ReactCurrentOwner,ni=!1;function Dr(t,e,n,r){e.child=t===null?uR(e,null,n,r):nf(e,t.child,n,r)}function OP(t,e,n,r,i){n=n.render;var s=e.ref;return Uu(e,i),r=P2(t,e,n,r,s,i),n=C2(),t!==null&&!ni?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qa(t,e,i)):(cn&&n&&m2(e),e.flags|=1,Dr(t,e,r,i),e.child)}function kP(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!L2(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,RR(t,e,s,r,i)):(t=ry(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Gh,n(a,r)&&t.ref===e.ref)return qa(t,e,i)}return e.flags|=1,t=Fo(s,r),t.ref=e.ref,t.return=e,e.child=t}function RR(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Gh(s,r)&&t.ref===e.ref)if(ni=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ni=!0);else return e.lanes=t.lanes,qa(t,e,i)}return b1(t,e,n,r,i)}function $R(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Ou,gi),gi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qt(Ou,gi),gi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Qt(Ou,gi),gi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Qt(Ou,gi),gi|=r;return Dr(t,e,i,n),e.child}function LR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function b1(t,e,n,r,i){var s=si(n)?fc:Or.current;return s=ef(e,s),Uu(e,i),n=P2(t,e,n,r,s,i),r=C2(),t!==null&&!ni?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qa(t,e,i)):(cn&&r&&m2(e),e.flags|=1,Dr(t,e,n,i),e.child)}function IP(t,e,n,r,i){if(si(n)){var s=!0;Ay(e)}else s=!1;if(Uu(e,i),e.stateNode===null)ey(t,e),NR(e,n,r),y1(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ji(c):(c=si(n)?fc:Or.current,c=ef(e,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&TP(e,a,r,c),Eo=!1;var h=e.memoizedState;a.state=h,Oy(e,r,a,i),l=e.memoizedState,o!==r||h!==l||ii.current||Eo?(typeof f=="function"&&(g1(e,n,f,r),l=e.memoizedState),(o=Eo||AP(e,n,o,r,h,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,dR(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:vs(e.type,o),a.props=c,d=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ji(l):(l=si(n)?fc:Or.current,l=ef(e,l));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&TP(e,a,r,l),Eo=!1,h=e.memoizedState,a.state=h,Oy(e,r,a,i);var b=e.memoizedState;o!==d||h!==b||ii.current||Eo?(typeof g=="function"&&(g1(e,n,g,r),b=e.memoizedState),(c=Eo||AP(e,n,c,r,h,b,l)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return x1(t,e,n,r,s,i)}function x1(t,e,n,r,i,s){LR(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&yP(e,n,!1),qa(t,e,s);r=e.stateNode,H9.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=nf(e,t.child,null,s),e.child=nf(e,null,o,s)):Dr(t,e,o,s),e.memoizedState=r.state,i&&yP(e,n,!0),e.child}function zR(t){var e=t.stateNode;e.pendingContext?gP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gP(t,e.context,!1),S2(t,e.containerInfo)}function NP(t,e,n,r,i){return tf(),y2(i),e.flags|=256,Dr(t,e,n,r),e.child}var w1={dehydrated:null,treeContext:null,retryLane:0};function _1(t){return{baseLanes:t,cachePool:null,transitions:null}}function VR(t,e,n){var r=e.pendingProps,i=mn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Qt(mn,i&1),t===null)return p1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=j0(a,r,0,null),t=ic(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=_1(n),e.memoizedState=w1,t):k2(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return G9(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Fo(o,s):(s=ic(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?_1(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=w1,r}return s=t.child,t=s.sibling,r=Fo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function k2(t,e){return e=j0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pg(t,e,n,r){return r!==null&&y2(r),nf(e,t.child,null,n),t=k2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function G9(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Px(Error(Ee(422))),pg(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=j0({mode:"visible",children:r.children},i,0,null),s=ic(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&nf(e,t.child,null,a),e.child.memoizedState=_1(a),e.memoizedState=w1,s);if(!(e.mode&1))return pg(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Ee(419)),r=Px(s,r,void 0),pg(t,e,a,r)}if(o=(a&t.childLanes)!==0,ni||o){if(r=tr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ka(t,i),js(r,t,i,-1))}return $2(),r=Px(Error(Ee(421))),pg(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=oB.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,xi=$o(i.nextSibling),_i=e,cn=!0,Ss=null,t!==null&&(Ui[Wi++]=ja,Ui[Wi++]=Oa,Ui[Wi++]=dc,ja=t.id,Oa=t.overflow,dc=e),e=k2(e,r.children),e.flags|=4096,e)}function DP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),m1(t.return,e,n)}function Cx(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function FR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Dr(t,e,r.children,n),r=mn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&DP(t,n,e);else if(t.tag===19)DP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qt(mn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ky(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cx(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ky(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cx(e,!0,n,null,s);break;case"together":Cx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ey(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=Fo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Y9(t,e,n){switch(e.tag){case 3:zR(e),tf();break;case 5:hR(e);break;case 1:si(e.type)&&Ay(e);break;case 4:S2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Qt(Cy,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qt(mn,mn.current&1),e.flags|=128,null):n&e.child.childLanes?VR(t,e,n):(Qt(mn,mn.current&1),t=qa(t,e,n),t!==null?t.sibling:null);Qt(mn,mn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return FR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Qt(mn,mn.current),r)break;return null;case 22:case 23:return e.lanes=0,$R(t,e,n)}return qa(t,e,n)}var BR,S1,UR,WR;BR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};S1=function(){};UR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Hl(Js.current);var s=null;switch(n){case"input":i=Kw(t,i),r=Kw(t,r),s=[];break;case"select":i=yn({},i,{value:void 0}),r=yn({},r,{value:void 0}),s=[];break;case"textarea":i=Gw(t,i),r=Gw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sy)}Xw(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tn("scroll",t),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};WR=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vd(t,e){if(!cn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function X9(t,e,n){var r=e.pendingProps;switch(g2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(e),null;case 1:return si(e.type)&&Ey(),xr(e),null;case 3:return r=e.stateNode,rf(),an(ii),an(Or),A2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ss!==null&&(k1(Ss),Ss=null))),S1(t,e),xr(e),null;case 5:E2(e);var i=Hl(Jh.current);if(n=e.type,t!==null&&e.stateNode!=null)UR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return xr(e),null}if(t=Hl(Js.current),dg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Hs]=e,r[Qh]=s,t=(e.mode&1)!==0,n){case"dialog":tn("cancel",r),tn("close",r);break;case"iframe":case"object":case"embed":tn("load",r);break;case"video":case"audio":for(i=0;i<ih.length;i++)tn(ih[i],r);break;case"source":tn("error",r);break;case"img":case"image":case"link":tn("error",r),tn("load",r);break;case"details":tn("toggle",r);break;case"input":UT(r,s),tn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tn("invalid",r);break;case"textarea":KT(r,s),tn("invalid",r)}Xw(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&fg(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&fg(r.textContent,o,t),i=["children",""+o]):Fh.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&tn("scroll",r)}switch(n){case"input":rg(r),WT(r,s,!0);break;case"textarea":rg(r),qT(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Sy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vM(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Hs]=e,t[Qh]=r,BR(t,e,!1,!1),e.stateNode=t;e:{switch(a=Qw(n,r),n){case"dialog":tn("cancel",t),tn("close",t),i=r;break;case"iframe":case"object":case"embed":tn("load",t),i=r;break;case"video":case"audio":for(i=0;i<ih.length;i++)tn(ih[i],t);i=r;break;case"source":tn("error",t),i=r;break;case"img":case"image":case"link":tn("error",t),tn("load",t),i=r;break;case"details":tn("toggle",t),i=r;break;case"input":UT(t,r),i=Kw(t,r),tn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=yn({},r,{value:void 0}),tn("invalid",t);break;case"textarea":KT(t,r),i=Gw(t,r),tn("invalid",t);break;default:i=r}Xw(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?wM(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bM(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Bh(t,l):typeof l=="number"&&Bh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&tn("scroll",t):l!=null&&t2(t,s,l,a))}switch(n){case"input":rg(t),WT(t,r,!1);break;case"textarea":rg(t),qT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?zu(t,!!r.multiple,s,!1):r.defaultValue!=null&&zu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Sy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xr(e),null;case 6:if(t&&e.stateNode!=null)WR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=Hl(Jh.current),Hl(Js.current),dg(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hs]=e,(s=r.nodeValue!==n)&&(t=_i,t!==null))switch(t.tag){case 3:fg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fg(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hs]=e,e.stateNode=r}return xr(e),null;case 13:if(an(mn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(cn&&xi!==null&&e.mode&1&&!(e.flags&128))lR(),tf(),e.flags|=98560,s=!1;else if(s=dg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ee(317));s[Hs]=e}else tf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xr(e),s=!1}else Ss!==null&&(k1(Ss),Ss=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mn.current&1?Kn===0&&(Kn=3):$2())),e.updateQueue!==null&&(e.flags|=4),xr(e),null);case 4:return rf(),S1(t,e),t===null&&Yh(e.stateNode.containerInfo),xr(e),null;case 10:return x2(e.type._context),xr(e),null;case 17:return si(e.type)&&Ey(),xr(e),null;case 19:if(an(mn),s=e.memoizedState,s===null)return xr(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Vd(s,!1);else{if(Kn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ky(t),a!==null){for(e.flags|=128,Vd(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qt(mn,mn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Cn()>af&&(e.flags|=128,r=!0,Vd(s,!1),e.lanes=4194304)}else{if(!r)if(t=ky(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!cn)return xr(e),null}else 2*Cn()-s.renderingStartTime>af&&n!==1073741824&&(e.flags|=128,r=!0,Vd(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Cn(),e.sibling=null,n=mn.current,Qt(mn,r?n&1|2:n&1),e):(xr(e),null);case 22:case 23:return R2(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gi&1073741824&&(xr(e),e.subtreeFlags&6&&(e.flags|=8192)):xr(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function Q9(t,e){switch(g2(e),e.tag){case 1:return si(e.type)&&Ey(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rf(),an(ii),an(Or),A2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return E2(e),null;case 13:if(an(mn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));tf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return an(mn),null;case 4:return rf(),null;case 10:return x2(e.type._context),null;case 22:case 23:return R2(),null;case 24:return null;default:return null}}var mg=!1,Tr=!1,Z9=typeof WeakSet=="function"?WeakSet:Set,ze=null;function ju(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wn(t,e,r)}else n.current=null}function E1(t,e,n){try{n()}catch(r){wn(t,e,r)}}var MP=!1;function J9(t,e){if(o1=xy,t=YM(),p2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,f=0,d=t,h=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==s||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(g=d.firstChild)!==null;)h=d,d=g;for(;;){if(d===t)break t;if(h===n&&++c===i&&(o=a),h===s&&++f===r&&(l=a),(g=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=g}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(l1={focusedElem:t,selectionRange:n},xy=!1,ze=e;ze!==null;)if(e=ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ze=t;else for(;ze!==null;){e=ze;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,x=b.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?y:vs(e.type,y),x);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(O){wn(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,ze=t;break}ze=e.return}return b=MP,MP=!1,b}function _h(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&E1(e,n,s)}i=i.next}while(i!==r)}}function P0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function A1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KR(t){var e=t.alternate;e!==null&&(t.alternate=null,KR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hs],delete e[Qh],delete e[f1],delete e[M9],delete e[R9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qR(t){return t.tag===5||t.tag===3||t.tag===4}function RP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function T1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sy));else if(r!==4&&(t=t.child,t!==null))for(T1(t,e,n),t=t.sibling;t!==null;)T1(t,e,n),t=t.sibling}function P1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(P1(t,e,n),t=t.sibling;t!==null;)P1(t,e,n),t=t.sibling}var ar=null,xs=!1;function vo(t,e,n){for(n=n.child;n!==null;)HR(t,e,n),n=n.sibling}function HR(t,e,n){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(b0,n)}catch{}switch(n.tag){case 5:Tr||ju(n,e);case 6:var r=ar,i=xs;ar=null,vo(t,e,n),ar=r,xs=i,ar!==null&&(xs?(t=ar,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ar.removeChild(n.stateNode));break;case 18:ar!==null&&(xs?(t=ar,n=n.stateNode,t.nodeType===8?wx(t.parentNode,n):t.nodeType===1&&wx(t,n),qh(t)):wx(ar,n.stateNode));break;case 4:r=ar,i=xs,ar=n.stateNode.containerInfo,xs=!0,vo(t,e,n),ar=r,xs=i;break;case 0:case 11:case 14:case 15:if(!Tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&E1(n,e,a),i=i.next}while(i!==r)}vo(t,e,n);break;case 1:if(!Tr&&(ju(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){wn(n,e,o)}vo(t,e,n);break;case 21:vo(t,e,n);break;case 22:n.mode&1?(Tr=(r=Tr)||n.memoizedState!==null,vo(t,e,n),Tr=r):vo(t,e,n);break;default:vo(t,e,n)}}function $P(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Z9),e.forEach(function(r){var i=lB.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ms(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ar=o.stateNode,xs=!1;break e;case 3:ar=o.stateNode.containerInfo,xs=!0;break e;case 4:ar=o.stateNode.containerInfo,xs=!0;break e}o=o.return}if(ar===null)throw Error(Ee(160));HR(s,a,i),ar=null,xs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){wn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GR(e,t),e=e.sibling}function GR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ms(e,t),Us(t),r&4){try{_h(3,t,t.return),P0(3,t)}catch(y){wn(t,t.return,y)}try{_h(5,t,t.return)}catch(y){wn(t,t.return,y)}}break;case 1:ms(e,t),Us(t),r&512&&n!==null&&ju(n,n.return);break;case 5:if(ms(e,t),Us(t),r&512&&n!==null&&ju(n,n.return),t.flags&32){var i=t.stateNode;try{Bh(i,"")}catch(y){wn(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&gM(i,s),Qw(o,a);var c=Qw(o,s);for(a=0;a<l.length;a+=2){var f=l[a],d=l[a+1];f==="style"?wM(i,d):f==="dangerouslySetInnerHTML"?bM(i,d):f==="children"?Bh(i,d):t2(i,f,d,c)}switch(o){case"input":qw(i,s);break;case"textarea":yM(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?zu(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?zu(i,!!s.multiple,s.defaultValue,!0):zu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qh]=s}catch(y){wn(t,t.return,y)}}break;case 6:if(ms(e,t),Us(t),r&4){if(t.stateNode===null)throw Error(Ee(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){wn(t,t.return,y)}}break;case 3:if(ms(e,t),Us(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qh(e.containerInfo)}catch(y){wn(t,t.return,y)}break;case 4:ms(e,t),Us(t);break;case 13:ms(e,t),Us(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(D2=Cn())),r&4&&$P(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Tr=(c=Tr)||f,ms(e,t),Tr=c):ms(e,t),Us(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(ze=t,f=t.child;f!==null;){for(d=ze=f;ze!==null;){switch(h=ze,g=h.child,h.tag){case 0:case 11:case 14:case 15:_h(4,h,h.return);break;case 1:ju(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(y){wn(r,n,y)}}break;case 5:ju(h,h.return);break;case 22:if(h.memoizedState!==null){zP(d);continue}}g!==null?(g.return=h,ze=g):zP(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=xM("display",a))}catch(y){wn(t,t.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){wn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ms(e,t),Us(t),r&4&&$P(t);break;case 21:break;default:ms(e,t),Us(t)}}function Us(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qR(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Bh(i,""),r.flags&=-33);var s=RP(t);P1(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=RP(t);T1(t,o,a);break;default:throw Error(Ee(161))}}catch(l){wn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eB(t,e,n){ze=t,YR(t)}function YR(t,e,n){for(var r=(t.mode&1)!==0;ze!==null;){var i=ze,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||mg;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Tr;o=mg;var c=Tr;if(mg=a,(Tr=l)&&!c)for(ze=i;ze!==null;)a=ze,l=a.child,a.tag===22&&a.memoizedState!==null?VP(i):l!==null?(l.return=a,ze=l):VP(i);for(;s!==null;)ze=s,YR(s),s=s.sibling;ze=i,mg=o,Tr=c}LP(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ze=s):LP(t)}}function LP(t){for(;ze!==null;){var e=ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tr||P0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_P(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_P(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&qh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}Tr||e.flags&512&&A1(e)}catch(h){wn(e,e.return,h)}}if(e===t){ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,ze=n;break}ze=e.return}}function zP(t){for(;ze!==null;){var e=ze;if(e===t){ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ze=n;break}ze=e.return}}function VP(t){for(;ze!==null;){var e=ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{P0(4,e)}catch(l){wn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){wn(e,i,l)}}var s=e.return;try{A1(e)}catch(l){wn(e,s,l)}break;case 5:var a=e.return;try{A1(e)}catch(l){wn(e,a,l)}}}catch(l){wn(e,e.return,l)}if(e===t){ze=null;break}var o=e.sibling;if(o!==null){o.return=e.return,ze=o;break}ze=e.return}}var tB=Math.ceil,Dy=no.ReactCurrentDispatcher,I2=no.ReactCurrentOwner,Yi=no.ReactCurrentBatchConfig,kt=0,tr=null,Dn=null,hr=0,gi=0,Ou=al(0),Kn=0,rp=null,pc=0,C0=0,N2=0,Sh=null,ei=null,D2=0,af=1/0,Pa=null,My=!1,C1=null,zo=null,gg=!1,Oo=null,Ry=0,Eh=0,j1=null,ty=-1,ny=0;function $r(){return kt&6?Cn():ty!==-1?ty:ty=Cn()}function Vo(t){return t.mode&1?kt&2&&hr!==0?hr&-hr:L9.transition!==null?(ny===0&&(ny=NM()),ny):(t=Vt,t!==0||(t=window.event,t=t===void 0?16:VM(t.type)),t):1}function js(t,e,n,r){if(50<Eh)throw Eh=0,j1=null,Error(Ee(185));rm(t,n,r),(!(kt&2)||t!==tr)&&(t===tr&&(!(kt&2)&&(C0|=n),Kn===4&&Po(t,hr)),ai(t,r),n===1&&kt===0&&!(e.mode&1)&&(af=Cn()+500,E0&&ol()))}function ai(t,e){var n=t.callbackNode;L8(t,e);var r=by(t,t===tr?hr:0);if(r===0)n!==null&&YT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&YT(n),e===1)t.tag===0?$9(FP.bind(null,t)):sR(FP.bind(null,t)),N9(function(){!(kt&6)&&ol()}),n=null;else{switch(DM(r)){case 1:n=a2;break;case 4:n=kM;break;case 16:n=vy;break;case 536870912:n=IM;break;default:n=vy}n=r4(n,XR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function XR(t,e){if(ty=-1,ny=0,kt&6)throw Error(Ee(327));var n=t.callbackNode;if(Wu()&&t.callbackNode!==n)return null;var r=by(t,t===tr?hr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$y(t,r);else{e=r;var i=kt;kt|=2;var s=ZR();(tr!==t||hr!==e)&&(Pa=null,af=Cn()+500,rc(t,e));do try{iB();break}catch(o){QR(t,o)}while(!0);b2(),Dy.current=s,kt=i,Dn!==null?e=0:(tr=null,hr=0,e=Kn)}if(e!==0){if(e===2&&(i=n1(t),i!==0&&(r=i,e=O1(t,i))),e===1)throw n=rp,rc(t,0),Po(t,r),ai(t,Cn()),n;if(e===6)Po(t,r);else{if(i=t.current.alternate,!(r&30)&&!nB(i)&&(e=$y(t,r),e===2&&(s=n1(t),s!==0&&(r=s,e=O1(t,s))),e===1))throw n=rp,rc(t,0),Po(t,r),ai(t,Cn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:$l(t,ei,Pa);break;case 3:if(Po(t,r),(r&130023424)===r&&(e=D2+500-Cn(),10<e)){if(by(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$r(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=u1($l.bind(null,t,ei,Pa),e);break}$l(t,ei,Pa);break;case 4:if(Po(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Cs(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tB(r/1960))-r,10<r){t.timeoutHandle=u1($l.bind(null,t,ei,Pa),r);break}$l(t,ei,Pa);break;case 5:$l(t,ei,Pa);break;default:throw Error(Ee(329))}}}return ai(t,Cn()),t.callbackNode===n?XR.bind(null,t):null}function O1(t,e){var n=Sh;return t.current.memoizedState.isDehydrated&&(rc(t,e).flags|=256),t=$y(t,e),t!==2&&(e=ei,ei=n,e!==null&&k1(e)),t}function k1(t){ei===null?ei=t:ei.push.apply(ei,t)}function nB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Os(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Po(t,e){for(e&=~N2,e&=~C0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cs(e),r=1<<n;t[n]=-1,e&=~r}}function FP(t){if(kt&6)throw Error(Ee(327));Wu();var e=by(t,0);if(!(e&1))return ai(t,Cn()),null;var n=$y(t,e);if(t.tag!==0&&n===2){var r=n1(t);r!==0&&(e=r,n=O1(t,r))}if(n===1)throw n=rp,rc(t,0),Po(t,e),ai(t,Cn()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$l(t,ei,Pa),ai(t,Cn()),null}function M2(t,e){var n=kt;kt|=1;try{return t(e)}finally{kt=n,kt===0&&(af=Cn()+500,E0&&ol())}}function mc(t){Oo!==null&&Oo.tag===0&&!(kt&6)&&Wu();var e=kt;kt|=1;var n=Yi.transition,r=Vt;try{if(Yi.transition=null,Vt=1,t)return t()}finally{Vt=r,Yi.transition=n,kt=e,!(kt&6)&&ol()}}function R2(){gi=Ou.current,an(Ou)}function rc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,I9(n)),Dn!==null)for(n=Dn.return;n!==null;){var r=n;switch(g2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ey();break;case 3:rf(),an(ii),an(Or),A2();break;case 5:E2(r);break;case 4:rf();break;case 13:an(mn);break;case 19:an(mn);break;case 10:x2(r.type._context);break;case 22:case 23:R2()}n=n.return}if(tr=t,Dn=t=Fo(t.current,null),hr=gi=e,Kn=0,rp=null,N2=C0=pc=0,ei=Sh=null,ql!==null){for(e=0;e<ql.length;e++)if(n=ql[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}ql=null}return t}function QR(t,e){do{var n=Dn;try{if(b2(),Zg.current=Ny,Iy){for(var r=gn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Iy=!1}if(hc=0,Jn=Wn=gn=null,wh=!1,ep=0,I2.current=null,n===null||n.return===null){Kn=1,rp=e,Dn=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=hr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=o,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=CP(a);if(g!==null){g.flags&=-257,jP(g,a,o,s,e),g.mode&1&&PP(s,c,e),e=g,l=c;var b=e.updateQueue;if(b===null){var y=new Set;y.add(l),e.updateQueue=y}else b.add(l);break e}else{if(!(e&1)){PP(s,c,e),$2();break e}l=Error(Ee(426))}}else if(cn&&o.mode&1){var x=CP(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),jP(x,a,o,s,e),y2(sf(l,o));break e}}s=l=sf(l,o),Kn!==4&&(Kn=2),Sh===null?Sh=[s]:Sh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=DR(s,l,e);wP(s,w);break e;case 1:o=l;var _=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(zo===null||!zo.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=MR(s,o,e);wP(s,O);break e}}s=s.return}while(s!==null)}e4(n)}catch(A){e=A,Dn===n&&n!==null&&(Dn=n=n.return);continue}break}while(!0)}function ZR(){var t=Dy.current;return Dy.current=Ny,t===null?Ny:t}function $2(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),tr===null||!(pc&268435455)&&!(C0&268435455)||Po(tr,hr)}function $y(t,e){var n=kt;kt|=2;var r=ZR();(tr!==t||hr!==e)&&(Pa=null,rc(t,e));do try{rB();break}catch(i){QR(t,i)}while(!0);if(b2(),kt=n,Dy.current=r,Dn!==null)throw Error(Ee(261));return tr=null,hr=0,Kn}function rB(){for(;Dn!==null;)JR(Dn)}function iB(){for(;Dn!==null&&!j8();)JR(Dn)}function JR(t){var e=n4(t.alternate,t,gi);t.memoizedProps=t.pendingProps,e===null?e4(t):Dn=e,I2.current=null}function e4(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Q9(n,e),n!==null){n.flags&=32767,Dn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Kn=6,Dn=null;return}}else if(n=X9(n,e,gi),n!==null){Dn=n;return}if(e=e.sibling,e!==null){Dn=e;return}Dn=e=t}while(e!==null);Kn===0&&(Kn=5)}function $l(t,e,n){var r=Vt,i=Yi.transition;try{Yi.transition=null,Vt=1,sB(t,e,n,r)}finally{Yi.transition=i,Vt=r}return null}function sB(t,e,n,r){do Wu();while(Oo!==null);if(kt&6)throw Error(Ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(z8(t,s),t===tr&&(Dn=tr=null,hr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gg||(gg=!0,r4(vy,function(){return Wu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Yi.transition,Yi.transition=null;var a=Vt;Vt=1;var o=kt;kt|=4,I2.current=null,J9(t,n),GR(n,t),A9(l1),xy=!!o1,l1=o1=null,t.current=n,eB(n),O8(),kt=o,Vt=a,Yi.transition=s}else t.current=n;if(gg&&(gg=!1,Oo=t,Ry=i),s=t.pendingLanes,s===0&&(zo=null),N8(n.stateNode),ai(t,Cn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(My)throw My=!1,t=C1,C1=null,t;return Ry&1&&t.tag!==0&&Wu(),s=t.pendingLanes,s&1?t===j1?Eh++:(Eh=0,j1=t):Eh=0,ol(),null}function Wu(){if(Oo!==null){var t=DM(Ry),e=Yi.transition,n=Vt;try{if(Yi.transition=null,Vt=16>t?16:t,Oo===null)var r=!1;else{if(t=Oo,Oo=null,Ry=0,kt&6)throw Error(Ee(331));var i=kt;for(kt|=4,ze=t.current;ze!==null;){var s=ze,a=s.child;if(ze.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(ze=c;ze!==null;){var f=ze;switch(f.tag){case 0:case 11:case 15:_h(8,f,s)}var d=f.child;if(d!==null)d.return=f,ze=d;else for(;ze!==null;){f=ze;var h=f.sibling,g=f.return;if(KR(f),f===c){ze=null;break}if(h!==null){h.return=g,ze=h;break}ze=g}}}var b=s.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}ze=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,ze=a;else e:for(;ze!==null;){if(s=ze,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_h(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ze=w;break e}ze=s.return}}var _=t.current;for(ze=_;ze!==null;){a=ze;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,ze=E;else e:for(a=_;ze!==null;){if(o=ze,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:P0(9,o)}}catch(A){wn(o,o.return,A)}if(o===a){ze=null;break e}var O=o.sibling;if(O!==null){O.return=o.return,ze=O;break e}ze=o.return}}if(kt=i,ol(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(b0,t)}catch{}r=!0}return r}finally{Vt=n,Yi.transition=e}}return!1}function BP(t,e,n){e=sf(n,e),e=DR(t,e,1),t=Lo(t,e,1),e=$r(),t!==null&&(rm(t,1,e),ai(t,e))}function wn(t,e,n){if(t.tag===3)BP(t,t,n);else for(;e!==null;){if(e.tag===3){BP(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zo===null||!zo.has(r))){t=sf(n,t),t=MR(e,t,1),e=Lo(e,t,1),t=$r(),e!==null&&(rm(e,1,t),ai(e,t));break}}e=e.return}}function aB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$r(),t.pingedLanes|=t.suspendedLanes&n,tr===t&&(hr&n)===n&&(Kn===4||Kn===3&&(hr&130023424)===hr&&500>Cn()-D2?rc(t,0):N2|=n),ai(t,e)}function t4(t,e){e===0&&(t.mode&1?(e=ag,ag<<=1,!(ag&130023424)&&(ag=4194304)):e=1);var n=$r();t=Ka(t,e),t!==null&&(rm(t,e,n),ai(t,n))}function oB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),t4(t,n)}function lB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),t4(t,n)}var n4;n4=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ii.current)ni=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ni=!1,Y9(t,e,n);ni=!!(t.flags&131072)}else ni=!1,cn&&e.flags&1048576&&aR(e,Py,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ey(t,e),t=e.pendingProps;var i=ef(e,Or.current);Uu(e,n),i=P2(null,e,r,t,i,n);var s=C2();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,si(r)?(s=!0,Ay(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_2(e),i.updater=T0,e.stateNode=i,i._reactInternals=e,y1(e,r,t,n),e=x1(null,e,r,!0,s,n)):(e.tag=0,cn&&s&&m2(e),Dr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ey(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=uB(r),t=vs(r,t),i){case 0:e=b1(null,e,r,t,n);break e;case 1:e=IP(null,e,r,t,n);break e;case 11:e=OP(null,e,r,t,n);break e;case 14:e=kP(null,e,r,vs(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vs(r,i),b1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vs(r,i),IP(t,e,r,i,n);case 3:e:{if(zR(e),t===null)throw Error(Ee(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dR(t,e),Oy(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=sf(Error(Ee(423)),e),e=NP(t,e,r,n,i);break e}else if(r!==i){i=sf(Error(Ee(424)),e),e=NP(t,e,r,n,i);break e}else for(xi=$o(e.stateNode.containerInfo.firstChild),_i=e,cn=!0,Ss=null,n=uR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tf(),r===i){e=qa(t,e,n);break e}Dr(t,e,r,n)}e=e.child}return e;case 5:return hR(e),t===null&&p1(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,c1(r,i)?a=null:s!==null&&c1(r,s)&&(e.flags|=32),LR(t,e),Dr(t,e,a,n),e.child;case 6:return t===null&&p1(e),null;case 13:return VR(t,e,n);case 4:return S2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=nf(e,null,r,n):Dr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vs(r,i),OP(t,e,r,i,n);case 7:return Dr(t,e,e.pendingProps,n),e.child;case 8:return Dr(t,e,e.pendingProps.children,n),e.child;case 12:return Dr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Qt(Cy,r._currentValue),r._currentValue=a,s!==null)if(Os(s.value,a)){if(s.children===i.children&&!ii.current){e=qa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=$a(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),m1(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ee(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),m1(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Dr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Uu(e,n),i=Ji(i),r=r(i),e.flags|=1,Dr(t,e,r,n),e.child;case 14:return r=e.type,i=vs(r,e.pendingProps),i=vs(r.type,i),kP(t,e,r,i,n);case 15:return RR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vs(r,i),ey(t,e),e.tag=1,si(r)?(t=!0,Ay(e)):t=!1,Uu(e,n),NR(e,r,i),y1(e,r,i,n),x1(null,e,r,!0,t,n);case 19:return FR(t,e,n);case 22:return $R(t,e,n)}throw Error(Ee(156,e.tag))};function r4(t,e){return OM(t,e)}function cB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(t,e,n,r){return new cB(t,e,n,r)}function L2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uB(t){if(typeof t=="function")return L2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===r2)return 11;if(t===i2)return 14}return 2}function Fo(t,e){var n=t.alternate;return n===null?(n=qi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ry(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")L2(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case xu:return ic(n.children,i,s,e);case n2:a=8,i|=8;break;case Fw:return t=qi(12,n,e,i|2),t.elementType=Fw,t.lanes=s,t;case Bw:return t=qi(13,n,e,i),t.elementType=Bw,t.lanes=s,t;case Uw:return t=qi(19,n,e,i),t.elementType=Uw,t.lanes=s,t;case hM:return j0(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fM:a=10;break e;case dM:a=9;break e;case r2:a=11;break e;case i2:a=14;break e;case So:a=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=qi(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ic(t,e,n,r){return t=qi(7,t,r,e),t.lanes=n,t}function j0(t,e,n,r){return t=qi(22,t,r,e),t.elementType=hM,t.lanes=n,t.stateNode={isHidden:!1},t}function jx(t,e,n){return t=qi(6,t,null,e),t.lanes=n,t}function Ox(t,e,n){return e=qi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fB(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ux(0),this.expirationTimes=ux(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ux(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function z2(t,e,n,r,i,s,a,o,l){return t=new fB(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_2(s),t}function dB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function i4(t){if(!t)return Qo;t=t._reactInternals;e:{if(Cc(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(si(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(si(n))return iR(t,n,e)}return e}function s4(t,e,n,r,i,s,a,o,l){return t=z2(n,r,!0,t,i,s,a,o,l),t.context=i4(null),n=t.current,r=$r(),i=Vo(n),s=$a(r,i),s.callback=e??null,Lo(n,s,i),t.current.lanes=i,rm(t,i,r),ai(t,r),t}function O0(t,e,n,r){var i=e.current,s=$r(),a=Vo(i);return n=i4(n),e.context===null?e.context=n:e.pendingContext=n,e=$a(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lo(i,e,a),t!==null&&(js(t,i,a,s),Qg(t,i,a)),a}function Ly(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function UP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function V2(t,e){UP(t,e),(t=t.alternate)&&UP(t,e)}function hB(){return null}var a4=typeof reportError=="function"?reportError:function(t){console.error(t)};function F2(t){this._internalRoot=t}k0.prototype.render=F2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));O0(t,e,null,null)};k0.prototype.unmount=F2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mc(function(){O0(null,t,null,null)}),e[Wa]=null}};function k0(t){this._internalRoot=t}k0.prototype.unstable_scheduleHydration=function(t){if(t){var e=$M();t={blockedOn:null,target:t,priority:e};for(var n=0;n<To.length&&e!==0&&e<To[n].priority;n++);To.splice(n,0,t),n===0&&zM(t)}};function B2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function I0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function WP(){}function pB(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ly(a);s.call(c)}}var a=s4(e,r,t,0,null,!1,!1,"",WP);return t._reactRootContainer=a,t[Wa]=a.current,Yh(t.nodeType===8?t.parentNode:t),mc(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=Ly(l);o.call(c)}}var l=z2(t,0,!1,null,null,!1,!1,"",WP);return t._reactRootContainer=l,t[Wa]=l.current,Yh(t.nodeType===8?t.parentNode:t),mc(function(){O0(e,l,n,r)}),l}function N0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Ly(a);o.call(l)}}O0(e,a,t,i)}else a=pB(n,e,t,i,r);return Ly(a)}MM=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=rh(e.pendingLanes);n!==0&&(o2(e,n|1),ai(e,Cn()),!(kt&6)&&(af=Cn()+500,ol()))}break;case 13:mc(function(){var r=Ka(t,1);if(r!==null){var i=$r();js(r,t,1,i)}}),V2(t,1)}};l2=function(t){if(t.tag===13){var e=Ka(t,134217728);if(e!==null){var n=$r();js(e,t,134217728,n)}V2(t,134217728)}};RM=function(t){if(t.tag===13){var e=Vo(t),n=Ka(t,e);if(n!==null){var r=$r();js(n,t,e,r)}V2(t,e)}};$M=function(){return Vt};LM=function(t,e){var n=Vt;try{return Vt=t,e()}finally{Vt=n}};Jw=function(t,e,n){switch(e){case"input":if(qw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=S0(r);if(!i)throw Error(Ee(90));mM(r),qw(r,i)}}}break;case"textarea":yM(t,n);break;case"select":e=n.value,e!=null&&zu(t,!!n.multiple,e,!1)}};EM=M2;AM=mc;var mB={usingClientEntryPoint:!1,Events:[sm,Eu,S0,_M,SM,M2]},Fd={findFiberByHostInstance:Kl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gB={bundleType:Fd.bundleType,version:Fd.version,rendererPackageName:Fd.rendererPackageName,rendererConfig:Fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:no.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CM(t),t===null?null:t.stateNode},findFiberByHostInstance:Fd.findFiberByHostInstance||hB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yg.isDisabled&&yg.supportsFiber)try{b0=yg.inject(gB),Zs=yg}catch{}}Ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mB;Ci.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B2(e))throw Error(Ee(200));return dB(t,e,null,n)};Ci.createRoot=function(t,e){if(!B2(t))throw Error(Ee(299));var n=!1,r="",i=a4;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=z2(t,1,!1,null,null,n,!1,r,i),t[Wa]=e.current,Yh(t.nodeType===8?t.parentNode:t),new F2(e)};Ci.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=CM(e),t=t===null?null:t.stateNode,t};Ci.flushSync=function(t){return mc(t)};Ci.hydrate=function(t,e,n){if(!I0(e))throw Error(Ee(200));return N0(null,t,e,!0,n)};Ci.hydrateRoot=function(t,e,n){if(!B2(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=a4;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=s4(e,null,t,1,n??null,i,!1,s,a),t[Wa]=e.current,Yh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new k0(e)};Ci.render=function(t,e,n){if(!I0(e))throw Error(Ee(200));return N0(null,t,e,!1,n)};Ci.unmountComponentAtNode=function(t){if(!I0(t))throw Error(Ee(40));return t._reactRootContainer?(mc(function(){N0(null,null,t,!1,function(){t._reactRootContainer=null,t[Wa]=null})}),!0):!1};Ci.unstable_batchedUpdates=M2;Ci.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!I0(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return N0(t,e,n,!1,r)};Ci.version="18.3.1-next-f1338f8080-20240426";function o4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o4)}catch(t){console.error(t)}}o4(),oM.exports=Ci;var l4=oM.exports,KP=l4;zw.createRoot=KP.createRoot,zw.hydrateRoot=KP.hydrateRoot;const yB=()=>{};var qP={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},vB=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},u4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,f=s>>2,d=(s&3)<<4|o>>4;let h=(o&15)<<2|c>>6,g=c&63;l||(g=64,a||(h=64)),r.push(n[f],n[d],n[h],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(c4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||c==null||d==null)throw new bB;const h=s<<2|o>>4;if(r.push(h),c!==64){const g=o<<4&240|c>>2;if(r.push(g),d!==64){const b=c<<6&192|d;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xB=function(t){const e=c4(t);return u4.encodeByteArray(e,!0)},f4=function(t){return xB(t).replace(/\./g,"")},d4=function(t){try{return u4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=()=>wB().__FIREBASE_DEFAULTS__,SB=()=>{if(typeof process>"u"||typeof qP>"u")return;const t=qP.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&d4(t[1]);return e&&JSON.parse(e)},U2=()=>{try{return yB()||_B()||SB()||EB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AB=()=>{var t;return(t=U2())==null?void 0:t.config},TB=t=>{var e;return(e=U2())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CB(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jB(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oi())}function OB(){var e;const t=(e=U2())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IB(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function NB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DB(){const t=oi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function MB(){return!OB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RB(){try{return typeof indexedDB=="object"}catch{return!1}}function $B(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB="FirebaseError";class ro extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LB,Object.setPrototypeOf(this,ro.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,om.prototype.create)}}class om{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?zB(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new ro(i,o,r)}}function zB(t,e){return t.replace(VB,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VB=/\{\$([^}]+)}/g;function ip(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(HP(s)&&HP(a)){if(!ip(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function HP(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function sh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ah(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FB(t,e){const n=new BB(t,e);return n.subscribe.bind(n)}class BB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=kx),i.error===void 0&&(i.error=kx),i.complete===void 0&&(i.complete=kx);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t){return t&&t._delegate?t._delegate:t}class gc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new PB;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qB(e))try{this.getOrInitializeService({instanceIdentifier:Ll})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ll){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ll){return this.instances.has(e)}getOptions(e=Ll){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ll){return this.component?this.component.multipleInstances?e:Ll:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KB(t){return t===Ll?void 0:t}function qB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(bt||(bt={}));const GB={debug:bt.DEBUG,verbose:bt.VERBOSE,info:bt.INFO,warn:bt.WARN,error:bt.ERROR,silent:bt.SILENT},YB=bt.INFO,XB={[bt.DEBUG]:"log",[bt.VERBOSE]:"log",[bt.INFO]:"info",[bt.WARN]:"warn",[bt.ERROR]:"error"},QB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=XB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class W2{constructor(e){this.name=e,this._logLevel=YB,this._logHandler=QB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,bt.DEBUG,...e),this._logHandler(this,bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,bt.VERBOSE,...e),this._logHandler(this,bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,bt.INFO,...e),this._logHandler(this,bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,bt.WARN,...e),this._logHandler(this,bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,bt.ERROR,...e),this._logHandler(this,bt.ERROR,...e)}}const ZB=(t,e)=>e.some(n=>t instanceof n);let GP,YP;function JB(){return GP||(GP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e7(){return YP||(YP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p4=new WeakMap,I1=new WeakMap,m4=new WeakMap,Ix=new WeakMap,K2=new WeakMap;function t7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Bo(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&p4.set(n,t)}).catch(()=>{}),K2.set(e,t),e}function n7(t){if(I1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});I1.set(t,e)}let N1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return I1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||m4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function r7(t){N1=t(N1)}function i7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nx(this),e,...n);return m4.set(r,e.sort?e.sort():[e]),Bo(r)}:e7().includes(t)?function(...e){return t.apply(Nx(this),e),Bo(p4.get(this))}:function(...e){return Bo(t.apply(Nx(this),e))}}function s7(t){return typeof t=="function"?i7(t):(t instanceof IDBTransaction&&n7(t),ZB(t,JB())?new Proxy(t,N1):t)}function Bo(t){if(t instanceof IDBRequest)return t7(t);if(Ix.has(t))return Ix.get(t);const e=s7(t);return e!==t&&(Ix.set(t,e),K2.set(e,t)),e}const Nx=t=>K2.get(t);function a7(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Bo(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Bo(a.result),l.oldVersion,l.newVersion,Bo(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const o7=["get","getKey","getAll","getAllKeys","count"],l7=["put","add","delete","clear"],Dx=new Map;function XP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dx.get(e))return Dx.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=l7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||o7.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),i&&l.done]))[0]};return Dx.set(e,s),s}r7(t=>({...t,get:(e,n,r)=>XP(e,n)||t.get(e,n,r),has:(e,n)=>!!XP(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u7(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function u7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const D1="@firebase/app",QP="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=new W2("@firebase/app"),f7="@firebase/app-compat",d7="@firebase/analytics-compat",h7="@firebase/analytics",p7="@firebase/app-check-compat",m7="@firebase/app-check",g7="@firebase/auth",y7="@firebase/auth-compat",v7="@firebase/database",b7="@firebase/data-connect",x7="@firebase/database-compat",w7="@firebase/functions",_7="@firebase/functions-compat",S7="@firebase/installations",E7="@firebase/installations-compat",A7="@firebase/messaging",T7="@firebase/messaging-compat",P7="@firebase/performance",C7="@firebase/performance-compat",j7="@firebase/remote-config",O7="@firebase/remote-config-compat",k7="@firebase/storage",I7="@firebase/storage-compat",N7="@firebase/firestore",D7="@firebase/ai",M7="@firebase/firestore-compat",R7="firebase",$7="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7="[DEFAULT]",z7={[D1]:"fire-core",[f7]:"fire-core-compat",[h7]:"fire-analytics",[d7]:"fire-analytics-compat",[m7]:"fire-app-check",[p7]:"fire-app-check-compat",[g7]:"fire-auth",[y7]:"fire-auth-compat",[v7]:"fire-rtdb",[b7]:"fire-data-connect",[x7]:"fire-rtdb-compat",[w7]:"fire-fn",[_7]:"fire-fn-compat",[S7]:"fire-iid",[E7]:"fire-iid-compat",[A7]:"fire-fcm",[T7]:"fire-fcm-compat",[P7]:"fire-perf",[C7]:"fire-perf-compat",[j7]:"fire-rc",[O7]:"fire-rc-compat",[k7]:"fire-gcs",[I7]:"fire-gcs-compat",[N7]:"fire-fst",[M7]:"fire-fst-compat",[D7]:"fire-vertex","fire-js":"fire-js",[R7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=new Map,V7=new Map,R1=new Map;function ZP(t,e){try{t.container.addComponent(e)}catch(n){Ha.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function of(t){const e=t.name;if(R1.has(e))return Ha.debug(`There were multiple attempts to register component ${e}.`),!1;R1.set(e,t);for(const n of M1.values())ZP(n,t);for(const n of V7.values())ZP(n,t);return!0}function g4(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Gs(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sc=new om("app","Firebase",F7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=$7;function U7(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:L7,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw sc.create("bad-app-name",{appName:String(i)});if(n||(n=AB()),!n)throw sc.create("no-options");const s=M1.get(i);if(s){if(ip(n,s.options)&&ip(r,s.config))return s;throw sc.create("duplicate-app",{appName:i})}const a=new HB(i);for(const l of R1.values())a.addComponent(l);const o=new B7(n,r,a);return M1.set(i,o),o}function Uo(t,e,n){let r=z7[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ha.warn(a.join(" "));return}of(new gc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7="firebase-heartbeat-database",K7=1,sp="firebase-heartbeat-store";let Mx=null;function y4(){return Mx||(Mx=a7(W7,K7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sp)}catch(n){console.warn(n)}}}}).catch(t=>{throw sc.create("idb-open",{originalErrorMessage:t.message})})),Mx}async function q7(t){try{const n=(await y4()).transaction(sp),r=await n.objectStore(sp).get(v4(t));return await n.done,r}catch(e){if(e instanceof ro)Ha.warn(e.message);else{const n=sc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ha.warn(n.message)}}}async function JP(t,e){try{const r=(await y4()).transaction(sp,"readwrite");await r.objectStore(sp).put(e,v4(t)),await r.done}catch(n){if(n instanceof ro)Ha.warn(n.message);else{const r=sc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ha.warn(r.message)}}}function v4(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7=1024,G7=30;class Y7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Q7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=eC();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>G7){const a=Z7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ha.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=eC(),{heartbeatsToSend:r,unsentEntries:i}=X7(this._heartbeatsCache.heartbeats),s=f4(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ha.warn(n),""}}}function eC(){return new Date().toISOString().substring(0,10)}function X7(t,e=H7){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),tC(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Q7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RB()?$B().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await q7(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return JP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return JP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tC(t){return f4(JSON.stringify({version:2,heartbeats:t})).length}function Z7(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7(t){of(new gc("platform-logger",e=>new c7(e),"PRIVATE")),of(new gc("heartbeat",e=>new Y7(e),"PRIVATE")),Uo(D1,QP,t),Uo(D1,QP,"esm2020"),Uo("fire-js","")}J7("");function b4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eU=b4,x4=new om("auth","Firebase",b4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=new W2("@firebase/auth");function tU(t,...e){zy.logLevel<=bt.WARN&&zy.warn(`Auth (${M0}): ${t}`,...e)}function iy(t,...e){zy.logLevel<=bt.ERROR&&zy.error(`Auth (${M0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(t,...e){throw H2(t,...e)}function q2(t,...e){return H2(t,...e)}function w4(t,e,n){const r={...eU(),[e]:n};return new om("auth","Firebase",r).create(e,{appName:t.name})}function ac(t){return w4(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return x4.create(t,...e)}function Ot(t,e,...n){if(!t)throw H2(e,...n)}function ka(t){const e="INTERNAL ASSERTION FAILED: "+t;throw iy(e),new Error(e)}function Vy(t,e){t||ka(e)}function nU(){return nC()==="http:"||nC()==="https:"}function nC(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nU()||IB()||"connection"in navigator)?navigator.onLine:!0}function iU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vy(n>e,"Short delay should be less than long delay!"),this.isMobile=jB()||NB()}get(){return rU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t,e){Vy(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ka("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ka("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ka("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lU=new lm(3e4,6e4);function jc(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Oc(t,e,n,r,i={}){return S4(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=h4({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return kB()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&D0(t.emulatorConfig.host)&&(c.credentials="include"),_4.fetch()(await E4(t,t.config.apiHost,n,o),c)})}async function S4(t,e,n){t._canInitEmulator=!1;const r={...aU,...e};try{const i=new uU(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw vg(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vg(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw vg(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw vg(t,"user-disabled",a);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw w4(t,f,c);lf(t,f)}}catch(i){if(i instanceof ro)throw i;lf(t,"network-request-failed",{message:String(i)})}}async function R0(t,e,n,r,i={}){const s=await Oc(t,e,n,r,i);return"mfaPendingCredential"in s&&lf(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function E4(t,e,n,r){const i=`${e}${n}?${r}`,s=t,a=s.config.emulator?sU(t.config,i):`${t.config.apiScheme}://${i}`;return oU.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function cU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(q2(this.auth,"network-request-failed")),lU.get())})}}function vg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=q2(t,e,r);return i.customData._tokenResponse=n,i}function rC(t){return t!==void 0&&t.enterprise!==void 0}class fU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dU(t,e){return Oc(t,"GET","/v2/recaptchaConfig",jc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(t,e){return Oc(t,"POST","/v1/accounts:delete",e)}async function Fy(t,e){return Oc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pU(t,e=!1){const n=nr(t),r=await n.getIdToken(e),i=A4(r);Ot(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ah(Rx(i.auth_time)),issuedAtTime:Ah(Rx(i.iat)),expirationTime:Ah(Rx(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Rx(t){return Number(t)*1e3}function A4(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return iy("JWT malformed, contained fewer than 3 sections"),null;try{const i=d4(n);return i?JSON.parse(i):(iy("Failed to decode base64 JWT payload"),null)}catch(i){return iy("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iC(t){const e=A4(t);return Ot(e,"internal-error"),Ot(typeof e.exp<"u","internal-error"),Ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $1(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ro&&mU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ah(this.lastLoginAt),this.creationTime=Ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function By(t){var d;const e=t.auth,n=await t.getIdToken(),r=await $1(t,Fy(e,{idToken:n}));Ot(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?T4(i.providerUserInfo):[],a=vU(t.providerData,s),o=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new L1(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,f)}async function yU(t){const e=nr(t);await By(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function T4(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bU(t,e){const n=await S4(t,{},async()=>{const r=h4({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await E4(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&D0(t.emulatorConfig.host)&&(l.credentials="include"),_4.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xU(t,e){return Oc(t,"POST","/v2/accounts:revokeToken",jc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ot(e.idToken,"internal-error"),Ot(typeof e.idToken<"u","internal-error"),Ot(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ot(e.length!==0,"internal-error");const n=iC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await bU(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Ku;return r&&(Ot(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Ot(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ot(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ku,this.toJSON())}_performRefresh(){return ka("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t,e){Ot(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class As{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new gU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new L1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $1(this,this.stsTokenManager.getToken(this.auth,e));return Ot(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pU(this,e)}reload(){return yU(this)}_assign(e){this!==e&&(Ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new As({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await By(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gs(this.auth.app))return Promise.reject(ac(this.auth));const e=await this.getIdToken();return await $1(this,hU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:g,providerData:b,stsTokenManager:y}=n;Ot(d&&y,e,"internal-error");const x=Ku.fromJSON(this.name,y);Ot(typeof d=="string",e,"internal-error"),bo(r,e.name),bo(i,e.name),Ot(typeof h=="boolean",e,"internal-error"),Ot(typeof g=="boolean",e,"internal-error"),bo(s,e.name),bo(a,e.name),bo(o,e.name),bo(l,e.name),bo(c,e.name),bo(f,e.name);const w=new As({uid:d,auth:e,email:i,emailVerified:h,displayName:r,isAnonymous:g,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:x,createdAt:c,lastLoginAt:f});return b&&Array.isArray(b)&&(w.providerData=b.map(_=>({..._}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ku;i.updateFromServerResponse(n);const s=new As({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await By(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ot(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?T4(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Ku;o.updateFromIdToken(r);const l=new As({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new L1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=new Map;function Gl(t){Vy(t instanceof Function,"Expected a class definition");let e=sC.get(t);return e?(Vy(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}P4.type="NONE";const aC=P4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t,e,n){return`firebase:${t}:${e}:${n}`}class qu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$x(this.userKey,i.apiKey,s),this.fullPersistenceKey=$x("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fy(this.auth,{idToken:e}).catch(()=>{});return n?As._fromGetAccountInfoResponse(this.auth,n,e):null}return As._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qu(Gl(aC),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Gl(aC);const a=$x(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const f=await c._get(a);if(f){let d;if(typeof f=="string"){const h=await Fy(e,{idToken:f}).catch(()=>{});if(!h)break;d=await As._fromGetAccountInfoResponse(e,h,f)}else d=As._fromJSON(e,f);c!==s&&(o=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new qu(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new qu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(O4(e))return"Blackberry";if(k4(e))return"Webos";if(_U(e))return"Safari";if((e.includes("chrome/")||SU(e))&&!e.includes("edge/"))return"Chrome";if(j4(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wU(t=oi()){return/firefox\//i.test(t)}function _U(t=oi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SU(t=oi()){return/crios\//i.test(t)}function C4(t=oi()){return/iemobile/i.test(t)}function j4(t=oi()){return/android/i.test(t)}function O4(t=oi()){return/blackberry/i.test(t)}function k4(t=oi()){return/webos/i.test(t)}function EU(t=oi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function AU(){return DB()&&document.documentMode===10}function TU(t=oi()){return EU(t)||j4(t)||k4(t)||O4(t)||/windows phone/i.test(t)||C4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t,e=[]){let n;switch(t){case"Browser":n=oC(oi());break;case"Worker":n=`${oC(oi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${M0}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CU(t,e={}){return Oc(t,"GET","/v2/passwordPolicy",jc(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=6;class OU{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??jU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lC(this),this.idTokenSubscription=new lC(this),this.beforeStateQueue=new PU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gl(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await qu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fy(this,{idToken:e}),r=await As._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Gs(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await By(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gs(this.app))return Promise.reject(ac(this));const n=e?nr(e):null;return n&&Ot(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gs(this.app)?Promise.reject(ac(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gs(this.app)?Promise.reject(ac(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CU(this),n=new OU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new om("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gl(e)||this._popupRedirectResolver;Ot(n,this,"argument-error"),this.redirectPersistenceManager=await qu.create(this,[Gl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ot(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&tU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function cm(t){return nr(t)}class lC{constructor(e){this.auth=e,this.observer=null,this.addObserver=FB(n=>this.observer=n)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G2={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IU(t){G2=t}function NU(t){return G2.loadJS(t)}function DU(){return G2.recaptchaEnterpriseScript}class MU{constructor(){this.enterprise=new RU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class RU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const $U="recaptcha-enterprise",N4="NO_RECAPTCHA";class LU{constructor(e){this.type=$U,this.auth=cm(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{dU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new fU(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;rC(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(N4)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MU().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(o=>{if(!n&&rC(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=DU();l.length!==0&&(l+=o),NU(l).then(()=>{i(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function cC(t,e,n,r=!1,i=!1){const s=new LU(t);let a;if(i)a=N4;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function z1(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await cC(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await cC(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t,e){const n=g4(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ip(s,e??{}))return i;lf(i,"already-initialized")}return n.initialize({options:e})}function VU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ka("not implemented")}_getIdTokenResponse(e){return ka("not implemented")}_linkToIdToken(e,n){return ka("not implemented")}_getReauthenticationResolver(e){return ka("not implemented")}}async function BU(t,e){return Oc(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(t,e){return R0(t,"POST","/v1/accounts:signInWithPassword",jc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WU(t,e){return R0(t,"POST","/v1/accounts:signInWithEmailLink",jc(t,e))}async function KU(t,e){return R0(t,"POST","/v1/accounts:signInWithEmailLink",jc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends FU{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ap(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ap(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return z1(e,n,"signInWithPassword",UU);case"emailLink":return WU(e,{email:this._email,oobCode:this._password});default:lf(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return z1(e,r,"signUpPassword",BU);case"emailLink":return KU(e,{idToken:n,email:this._email,oobCode:this._password});default:lf(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HU(t){const e=sh(ah(t)).link,n=e?sh(ah(e)).deep_link_id:null,r=sh(ah(t)).deep_link_id;return(r?sh(ah(r)).link:null)||r||n||e||t}class Y2{constructor(e){const n=sh(ah(e)),r=n.apiKey??null,i=n.oobCode??null,s=qU(n.mode??null);Ot(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=HU(e);try{return new Y2(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this.providerId=Yf.PROVIDER_ID}static credential(e,n){return ap._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Y2.parseLink(n);return Ot(r,"argument-error"),ap._fromEmailAndCode(e,r.code,r.tenantId)}}Yf.PROVIDER_ID="password";Yf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GU(t,e){return R0(t,"POST","/v1/accounts:signUp",jc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await As._fromIdTokenResponse(e,r,i),a=uC(r);return new op({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=uC(r);return new op({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function uC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy extends ro{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Uy.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Uy(e,n,r,i)}}function YU(t,e,n,r){return n._getIdTokenResponse(t).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Uy._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(t,e,n=!1){if(Gs(t.app))return Promise.reject(ac(t));const r="signIn",i=await YU(t,r,e),s=await op._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function QU(t,e){return XU(cm(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(t){const e=cm(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZU(t,e,n){if(Gs(t.app))return Promise.reject(ac(t));const r=cm(t),a=await z1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GU).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&D4(t),l}),o=await op._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function JU(t,e,n){return Gs(t.app)?Promise.reject(ac(t)):QU(nr(t),Yf.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&D4(t),r})}function eW(t,e,n,r){return nr(t).onAuthStateChanged(e,n,r)}const fC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fC,"1"),this.storage.removeItem(fC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tW=1e3,nW=10;class R4 extends M4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TU(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);AU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,nW):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},tW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}R4.type="LOCAL";const rW=R4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW extends M4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iW.type="SESSION";new lm(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new lm(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new lm(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new lm(5e3,15e3);var dC="@firebase/auth",hC="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oW(t){of(new gc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Ot(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I4(t)},c=new kU(r,i,s,l);return VU(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),of(new gc("auth-internal",e=>{const n=cm(e.getProvider("auth").getImmediate());return(r=>new sW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Uo(dC,hC,aW(t)),Uo(dC,hC,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW=5*60;TB("authIdTokenMaxAge");function cW(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}IU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=q2("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",cW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oW("Browser");var uW="firebase",fW="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uo(uW,fW,"app");var pC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wo,$4;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function k(){}k.prototype=T.prototype,S.F=T.prototype,S.prototype=new k,S.prototype.constructor=S,S.D=function(z,N,$){for(var M=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)M[Y-2]=arguments[Y];return T.prototype[N].apply(z,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,k){k||(k=0);const z=Array(16);if(typeof T=="string")for(var N=0;N<16;++N)z[N]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(N=0;N<16;++N)z[N]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=S.g[0],k=S.g[1],N=S.g[2];let $=S.g[3],M;M=T+($^k&(N^$))+z[0]+3614090360&4294967295,T=k+(M<<7&4294967295|M>>>25),M=$+(N^T&(k^N))+z[1]+3905402710&4294967295,$=T+(M<<12&4294967295|M>>>20),M=N+(k^$&(T^k))+z[2]+606105819&4294967295,N=$+(M<<17&4294967295|M>>>15),M=k+(T^N&($^T))+z[3]+3250441966&4294967295,k=N+(M<<22&4294967295|M>>>10),M=T+($^k&(N^$))+z[4]+4118548399&4294967295,T=k+(M<<7&4294967295|M>>>25),M=$+(N^T&(k^N))+z[5]+1200080426&4294967295,$=T+(M<<12&4294967295|M>>>20),M=N+(k^$&(T^k))+z[6]+2821735955&4294967295,N=$+(M<<17&4294967295|M>>>15),M=k+(T^N&($^T))+z[7]+4249261313&4294967295,k=N+(M<<22&4294967295|M>>>10),M=T+($^k&(N^$))+z[8]+1770035416&4294967295,T=k+(M<<7&4294967295|M>>>25),M=$+(N^T&(k^N))+z[9]+2336552879&4294967295,$=T+(M<<12&4294967295|M>>>20),M=N+(k^$&(T^k))+z[10]+4294925233&4294967295,N=$+(M<<17&4294967295|M>>>15),M=k+(T^N&($^T))+z[11]+2304563134&4294967295,k=N+(M<<22&4294967295|M>>>10),M=T+($^k&(N^$))+z[12]+1804603682&4294967295,T=k+(M<<7&4294967295|M>>>25),M=$+(N^T&(k^N))+z[13]+4254626195&4294967295,$=T+(M<<12&4294967295|M>>>20),M=N+(k^$&(T^k))+z[14]+2792965006&4294967295,N=$+(M<<17&4294967295|M>>>15),M=k+(T^N&($^T))+z[15]+1236535329&4294967295,k=N+(M<<22&4294967295|M>>>10),M=T+(N^$&(k^N))+z[1]+4129170786&4294967295,T=k+(M<<5&4294967295|M>>>27),M=$+(k^N&(T^k))+z[6]+3225465664&4294967295,$=T+(M<<9&4294967295|M>>>23),M=N+(T^k&($^T))+z[11]+643717713&4294967295,N=$+(M<<14&4294967295|M>>>18),M=k+($^T&(N^$))+z[0]+3921069994&4294967295,k=N+(M<<20&4294967295|M>>>12),M=T+(N^$&(k^N))+z[5]+3593408605&4294967295,T=k+(M<<5&4294967295|M>>>27),M=$+(k^N&(T^k))+z[10]+38016083&4294967295,$=T+(M<<9&4294967295|M>>>23),M=N+(T^k&($^T))+z[15]+3634488961&4294967295,N=$+(M<<14&4294967295|M>>>18),M=k+($^T&(N^$))+z[4]+3889429448&4294967295,k=N+(M<<20&4294967295|M>>>12),M=T+(N^$&(k^N))+z[9]+568446438&4294967295,T=k+(M<<5&4294967295|M>>>27),M=$+(k^N&(T^k))+z[14]+3275163606&4294967295,$=T+(M<<9&4294967295|M>>>23),M=N+(T^k&($^T))+z[3]+4107603335&4294967295,N=$+(M<<14&4294967295|M>>>18),M=k+($^T&(N^$))+z[8]+1163531501&4294967295,k=N+(M<<20&4294967295|M>>>12),M=T+(N^$&(k^N))+z[13]+2850285829&4294967295,T=k+(M<<5&4294967295|M>>>27),M=$+(k^N&(T^k))+z[2]+4243563512&4294967295,$=T+(M<<9&4294967295|M>>>23),M=N+(T^k&($^T))+z[7]+1735328473&4294967295,N=$+(M<<14&4294967295|M>>>18),M=k+($^T&(N^$))+z[12]+2368359562&4294967295,k=N+(M<<20&4294967295|M>>>12),M=T+(k^N^$)+z[5]+4294588738&4294967295,T=k+(M<<4&4294967295|M>>>28),M=$+(T^k^N)+z[8]+2272392833&4294967295,$=T+(M<<11&4294967295|M>>>21),M=N+($^T^k)+z[11]+1839030562&4294967295,N=$+(M<<16&4294967295|M>>>16),M=k+(N^$^T)+z[14]+4259657740&4294967295,k=N+(M<<23&4294967295|M>>>9),M=T+(k^N^$)+z[1]+2763975236&4294967295,T=k+(M<<4&4294967295|M>>>28),M=$+(T^k^N)+z[4]+1272893353&4294967295,$=T+(M<<11&4294967295|M>>>21),M=N+($^T^k)+z[7]+4139469664&4294967295,N=$+(M<<16&4294967295|M>>>16),M=k+(N^$^T)+z[10]+3200236656&4294967295,k=N+(M<<23&4294967295|M>>>9),M=T+(k^N^$)+z[13]+681279174&4294967295,T=k+(M<<4&4294967295|M>>>28),M=$+(T^k^N)+z[0]+3936430074&4294967295,$=T+(M<<11&4294967295|M>>>21),M=N+($^T^k)+z[3]+3572445317&4294967295,N=$+(M<<16&4294967295|M>>>16),M=k+(N^$^T)+z[6]+76029189&4294967295,k=N+(M<<23&4294967295|M>>>9),M=T+(k^N^$)+z[9]+3654602809&4294967295,T=k+(M<<4&4294967295|M>>>28),M=$+(T^k^N)+z[12]+3873151461&4294967295,$=T+(M<<11&4294967295|M>>>21),M=N+($^T^k)+z[15]+530742520&4294967295,N=$+(M<<16&4294967295|M>>>16),M=k+(N^$^T)+z[2]+3299628645&4294967295,k=N+(M<<23&4294967295|M>>>9),M=T+(N^(k|~$))+z[0]+4096336452&4294967295,T=k+(M<<6&4294967295|M>>>26),M=$+(k^(T|~N))+z[7]+1126891415&4294967295,$=T+(M<<10&4294967295|M>>>22),M=N+(T^($|~k))+z[14]+2878612391&4294967295,N=$+(M<<15&4294967295|M>>>17),M=k+($^(N|~T))+z[5]+4237533241&4294967295,k=N+(M<<21&4294967295|M>>>11),M=T+(N^(k|~$))+z[12]+1700485571&4294967295,T=k+(M<<6&4294967295|M>>>26),M=$+(k^(T|~N))+z[3]+2399980690&4294967295,$=T+(M<<10&4294967295|M>>>22),M=N+(T^($|~k))+z[10]+4293915773&4294967295,N=$+(M<<15&4294967295|M>>>17),M=k+($^(N|~T))+z[1]+2240044497&4294967295,k=N+(M<<21&4294967295|M>>>11),M=T+(N^(k|~$))+z[8]+1873313359&4294967295,T=k+(M<<6&4294967295|M>>>26),M=$+(k^(T|~N))+z[15]+4264355552&4294967295,$=T+(M<<10&4294967295|M>>>22),M=N+(T^($|~k))+z[6]+2734768916&4294967295,N=$+(M<<15&4294967295|M>>>17),M=k+($^(N|~T))+z[13]+1309151649&4294967295,k=N+(M<<21&4294967295|M>>>11),M=T+(N^(k|~$))+z[4]+4149444226&4294967295,T=k+(M<<6&4294967295|M>>>26),M=$+(k^(T|~N))+z[11]+3174756917&4294967295,$=T+(M<<10&4294967295|M>>>22),M=N+(T^($|~k))+z[2]+718787259&4294967295,N=$+(M<<15&4294967295|M>>>17),M=k+($^(N|~T))+z[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(N+(M<<21&4294967295|M>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+$&4294967295}r.prototype.v=function(S,T){T===void 0&&(T=S.length);const k=T-this.blockSize,z=this.C;let N=this.h,$=0;for(;$<T;){if(N==0)for(;$<=k;)i(this,S,$),$+=this.blockSize;if(typeof S=="string"){for(;$<T;)if(z[N++]=S.charCodeAt($++),N==this.blockSize){i(this,z),N=0;break}}else for(;$<T;)if(z[N++]=S[$++],N==this.blockSize){i(this,z),N=0;break}}this.h=N,this.o+=T},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var k=S.length-8;k<S.length;++k)S[k]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,k=0;k<4;++k)for(let z=0;z<32;z+=8)S[T++]=this.g[k]>>>z&255;return S};function s(S,T){var k=o;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=T(S)}function a(S,T){this.h=T;const k=[];let z=!0;for(let N=S.length-1;N>=0;N--){const $=S[N]|0;z&&$==T||(k[N]=$,z=!1)}this.g=k}var o={};function l(S){return-128<=S&&S<128?s(S,function(T){return new a([T|0],T<0?-1:0)}):new a([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(S<0)return x(c(-S));const T=[];let k=1;for(let z=0;S>=k;z++)T[z]=S/k|0,k*=4294967296;return new a(T,0)}function f(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return x(f(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=c(Math.pow(T,8));let z=d;for(let $=0;$<S.length;$+=8){var N=Math.min(8,S.length-$);const M=parseInt(S.substring($,$+N),T);N<8?(N=c(Math.pow(T,N)),z=z.j(N).add(c(M))):(z=z.j(k),z=z.add(c(M)))}return z}var d=l(0),h=l(1),g=l(16777216);t=a.prototype,t.m=function(){if(y(this))return-x(this).m();let S=0,T=1;for(let k=0;k<this.g.length;k++){const z=this.i(k);S+=(z>=0?z:4294967296+z)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(b(this))return"0";if(y(this))return"-"+x(this).toString(S);const T=c(Math.pow(S,6));var k=this;let z="";for(;;){const N=O(k,T).g;k=w(k,N.j(T));let $=((k.g.length>0?k.g[0]:k.h)>>>0).toString(S);if(k=N,b(k))return $+z;for(;$.length<6;)$="0"+$;z=$+z}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function b(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function y(S){return S.h==-1}t.l=function(S){return S=w(this,S),y(S)?-1:b(S)?0:1};function x(S){const T=S.g.length,k=[];for(let z=0;z<T;z++)k[z]=~S.g[z];return new a(k,~S.h).add(h)}t.abs=function(){return y(this)?x(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),k=[];let z=0;for(let N=0;N<=T;N++){let $=z+(this.i(N)&65535)+(S.i(N)&65535),M=($>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);z=M>>>16,$&=65535,M&=65535,k[N]=M<<16|$}return new a(k,k[k.length-1]&-2147483648?-1:0)};function w(S,T){return S.add(x(T))}t.j=function(S){if(b(this)||b(S))return d;if(y(this))return y(S)?x(this).j(x(S)):x(x(this).j(S));if(y(S))return x(this.j(x(S)));if(this.l(g)<0&&S.l(g)<0)return c(this.m()*S.m());const T=this.g.length+S.g.length,k=[];for(var z=0;z<2*T;z++)k[z]=0;for(z=0;z<this.g.length;z++)for(let N=0;N<S.g.length;N++){const $=this.i(z)>>>16,M=this.i(z)&65535,Y=S.i(N)>>>16,q=S.i(N)&65535;k[2*z+2*N]+=M*q,_(k,2*z+2*N),k[2*z+2*N+1]+=$*q,_(k,2*z+2*N+1),k[2*z+2*N+1]+=M*Y,_(k,2*z+2*N+1),k[2*z+2*N+2]+=$*Y,_(k,2*z+2*N+2)}for(S=0;S<T;S++)k[S]=k[2*S+1]<<16|k[2*S];for(S=T;S<2*T;S++)k[S]=0;return new a(k,0)};function _(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function E(S,T){this.g=S,this.h=T}function O(S,T){if(b(T))throw Error("division by zero");if(b(S))return new E(d,d);if(y(S))return T=O(x(S),T),new E(x(T.g),x(T.h));if(y(T))return T=O(S,x(T)),new E(x(T.g),T.h);if(S.g.length>30){if(y(S)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var k=h,z=T;z.l(S)<=0;)k=A(k),z=A(z);var N=P(k,1),$=P(z,1);for(z=P(z,2),k=P(k,2);!b(z);){var M=$.add(z);M.l(S)<=0&&(N=N.add(k),$=M),z=P(z,1),k=P(k,1)}return T=w(S,N.j(T)),new E(N,T)}for(N=d;S.l(T)>=0;){for(k=Math.max(1,Math.floor(S.m()/T.m())),z=Math.ceil(Math.log(k)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),$=c(k),M=$.j(T);y(M)||M.l(S)>0;)k-=z,$=c(k),M=$.j(T);b($)&&($=h),N=N.add($),S=w(S,M)}return new E(N,S)}t.B=function(S){return O(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),k=[];for(let z=0;z<T;z++)k[z]=this.i(z)&S.i(z);return new a(k,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),k=[];for(let z=0;z<T;z++)k[z]=this.i(z)|S.i(z);return new a(k,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),k=[];for(let z=0;z<T;z++)k[z]=this.i(z)^S.i(z);return new a(k,this.h^S.h)};function A(S){const T=S.g.length+1,k=[];for(let z=0;z<T;z++)k[z]=S.i(z)<<1|S.i(z-1)>>>31;return new a(k,S.h)}function P(S,T){const k=T>>5;T%=32;const z=S.g.length-k,N=[];for(let $=0;$<z;$++)N[$]=T>0?S.i($+k)>>>T|S.i($+k+1)<<32-T:S.i($+k);return new a(N,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$4=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=f,Wo=a}).apply(typeof pC<"u"?pC:typeof self<"u"?self:typeof window<"u"?window:{});var bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L4,oh,z4,sy,V1,V4,F4,B4;(function(){var t,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof bg=="object"&&bg];for(var j=0;j<p.length;++j){var D=p[j];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function i(p,j){if(j)e:{var D=r;p=p.split(".");for(var F=0;F<p.length-1;F++){var ae=p[F];if(!(ae in D))break e;D=D[ae]}p=p[p.length-1],F=D[p],j=j(F),j!=F&&j!=null&&e(D,p,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(j){var D=[],F;for(F in j)Object.prototype.hasOwnProperty.call(j,F)&&D.push([F,j[F]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(p){var j=typeof p;return j=="object"&&p!=null||j=="function"}function l(p,j,D){return p.call.apply(p.bind,arguments)}function c(p,j,D){return c=l,c.apply(null,arguments)}function f(p,j){var D=Array.prototype.slice.call(arguments,1);return function(){var F=D.slice();return F.push.apply(F,arguments),p.apply(this,F)}}function d(p,j){function D(){}D.prototype=j.prototype,p.Z=j.prototype,p.prototype=new D,p.prototype.constructor=p,p.Ob=function(F,ae,fe){for(var je=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)je[ut-2]=arguments[ut];return j.prototype[ae].apply(F,je)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function g(p){const j=p.length;if(j>0){const D=Array(j);for(let F=0;F<j;F++)D[F]=p[F];return D}return[]}function b(p,j){for(let F=1;F<arguments.length;F++){const ae=arguments[F];var D=typeof ae;if(D=D!="object"?D:ae?Array.isArray(ae)?"array":D:"null",D=="array"||D=="object"&&typeof ae.length=="number"){D=p.length||0;const fe=ae.length||0;p.length=D+fe;for(let je=0;je<fe;je++)p[D+je]=ae[je]}else p.push(ae)}}class y{constructor(j,D){this.i=j,this.j=D,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function x(p){a.setTimeout(()=>{throw p},0)}function w(){var p=S;let j=null;return p.g&&(j=p.g,p.g=p.g.next,p.g||(p.h=null),j.next=null),j}class _{constructor(){this.h=this.g=null}add(j,D){const F=E.get();F.set(j,D),this.h?this.h.next=F:this.g=F,this.h=F}}var E=new y(()=>new O,p=>p.reset());class O{constructor(){this.next=this.g=this.h=null}set(j,D){this.h=j,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let A,P=!1,S=new _,T=()=>{const p=Promise.resolve(void 0);A=()=>{p.then(k)}};function k(){for(var p;p=w();){try{p.h.call(p.g)}catch(D){x(D)}var j=E;j.j(p),j.h<100&&(j.h++,p.next=j.g,j.g=p)}P=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(p,j){this.type=p,this.g=this.target=j,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,j=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const D=()=>{};a.addEventListener("test",D,j),a.removeEventListener("test",D,j)}catch{}return p}();function M(p){return/^[\s\xa0]*$/.test(p)}function Y(p,j){N.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,j)}d(Y,N),Y.prototype.init=function(p,j){const D=this.type=p.type,F=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=j,j=p.relatedTarget,j||(D=="mouseover"?j=p.fromElement:D=="mouseout"&&(j=p.toElement)),this.relatedTarget=j,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Y.Z.h.call(this)},Y.prototype.h=function(){Y.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var q="closure_listenable_"+(Math.random()*1e6|0),ie=0;function le(p,j,D,F,ae){this.listener=p,this.proxy=null,this.src=j,this.type=D,this.capture=!!F,this.ha=ae,this.key=++ie,this.da=this.fa=!1}function Q(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function G(p,j,D){for(const F in p)j.call(D,p[F],F,p)}function he(p,j){for(const D in p)j.call(void 0,p[D],D,p)}function ce(p){const j={};for(const D in p)j[D]=p[D];return j}const we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ke(p,j){let D,F;for(let ae=1;ae<arguments.length;ae++){F=arguments[ae];for(D in F)p[D]=F[D];for(let fe=0;fe<we.length;fe++)D=we[fe],Object.prototype.hasOwnProperty.call(F,D)&&(p[D]=F[D])}}function Ue(p){this.src=p,this.g={},this.h=0}Ue.prototype.add=function(p,j,D,F,ae){const fe=p.toString();p=this.g[fe],p||(p=this.g[fe]=[],this.h++);const je=ot(p,j,F,ae);return je>-1?(j=p[je],D||(j.fa=!1)):(j=new le(j,this.src,fe,!!F,ae),j.fa=D,p.push(j)),j};function ct(p,j){const D=j.type;if(D in p.g){var F=p.g[D],ae=Array.prototype.indexOf.call(F,j,void 0),fe;(fe=ae>=0)&&Array.prototype.splice.call(F,ae,1),fe&&(Q(j),p.g[D].length==0&&(delete p.g[D],p.h--))}}function ot(p,j,D,F){for(let ae=0;ae<p.length;++ae){const fe=p[ae];if(!fe.da&&fe.listener==j&&fe.capture==!!D&&fe.ha==F)return ae}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),Ye={};function oe(p,j,D,F,ae){if(Array.isArray(j)){for(let fe=0;fe<j.length;fe++)oe(p,j[fe],D,F,ae);return null}return D=et(D),p&&p[q]?p.J(j,D,o(F)?!!F.capture:!1,ae):Be(p,j,D,!1,F,ae)}function Be(p,j,D,F,ae,fe){if(!j)throw Error("Invalid event type");const je=o(ae)?!!ae.capture:!!ae;let ut=Fe(p);if(ut||(p[Ce]=ut=new Ue(p)),D=ut.add(j,D,F,je,fe),D.proxy)return D;if(F=We(),D.proxy=F,F.src=p,F.listener=D,p.addEventListener)$||(ae=je),ae===void 0&&(ae=!1),p.addEventListener(j.toString(),F,ae);else if(p.attachEvent)p.attachEvent(ye(j.toString()),F);else if(p.addListener&&p.removeListener)p.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return D}function We(){function p(D){return j.call(p.src,p.listener,D)}const j=xe;return p}function ue(p,j,D,F,ae){if(Array.isArray(j))for(var fe=0;fe<j.length;fe++)ue(p,j[fe],D,F,ae);else F=o(F)?!!F.capture:!!F,D=et(D),p&&p[q]?(p=p.i,fe=String(j).toString(),fe in p.g&&(j=p.g[fe],D=ot(j,D,F,ae),D>-1&&(Q(j[D]),Array.prototype.splice.call(j,D,1),j.length==0&&(delete p.g[fe],p.h--)))):p&&(p=Fe(p))&&(j=p.g[j.toString()],p=-1,j&&(p=ot(j,D,F,ae)),(D=p>-1?j[p]:null)&&ht(D))}function ht(p){if(typeof p!="number"&&p&&!p.da){var j=p.src;if(j&&j[q])ct(j.i,p);else{var D=p.type,F=p.proxy;j.removeEventListener?j.removeEventListener(D,F,p.capture):j.detachEvent?j.detachEvent(ye(D),F):j.addListener&&j.removeListener&&j.removeListener(F),(D=Fe(j))?(ct(D,p),D.h==0&&(D.src=null,j[Ce]=null)):Q(p)}}}function ye(p){return p in Ye?Ye[p]:Ye[p]="on"+p}function xe(p,j){if(p.da)p=!0;else{j=new Y(j,this);const D=p.listener,F=p.ha||p.src;p.fa&&ht(p),p=D.call(F,j)}return p}function Fe(p){return p=p[Ce],p instanceof Ue?p:null}var Tt="__closure_events_fn_"+(Math.random()*1e9>>>0);function et(p){return typeof p=="function"?p:(p[Tt]||(p[Tt]=function(j){return p.handleEvent(j)}),p[Tt])}function lt(){z.call(this),this.i=new Ue(this),this.M=this,this.G=null}d(lt,z),lt.prototype[q]=!0,lt.prototype.removeEventListener=function(p,j,D,F){ue(this,p,j,D,F)};function Ge(p,j){var D,F=p.G;if(F)for(D=[];F;F=F.G)D.push(F);if(p=p.M,F=j.type||j,typeof j=="string")j=new N(j,p);else if(j instanceof N)j.target=j.target||p;else{var ae=j;j=new N(F,p),ke(j,ae)}ae=!0;let fe,je;if(D)for(je=D.length-1;je>=0;je--)fe=j.g=D[je],ae=He(fe,F,!0,j)&&ae;if(fe=j.g=p,ae=He(fe,F,!0,j)&&ae,ae=He(fe,F,!1,j)&&ae,D)for(je=0;je<D.length;je++)fe=j.g=D[je],ae=He(fe,F,!1,j)&&ae}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var p=this.i;for(const j in p.g){const D=p.g[j];for(let F=0;F<D.length;F++)Q(D[F]);delete p.g[j],p.h--}}this.G=null},lt.prototype.J=function(p,j,D,F){return this.i.add(String(p),j,!1,D,F)},lt.prototype.K=function(p,j,D,F){return this.i.add(String(p),j,!0,D,F)};function He(p,j,D,F){if(j=p.i.g[String(j)],!j)return!0;j=j.concat();let ae=!0;for(let fe=0;fe<j.length;++fe){const je=j[fe];if(je&&!je.da&&je.capture==D){const ut=je.listener,hn=je.ha||je.src;je.fa&&ct(p.i,je),ae=ut.call(hn,F)!==!1&&ae}}return ae&&!F.defaultPrevented}function Pt(p,j){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=c(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:a.setTimeout(p,j||0)}function on(p){p.g=Pt(()=>{p.g=null,p.i&&(p.i=!1,on(p))},p.l);const j=p.h;p.h=null,p.m.apply(null,j)}class dn extends z{constructor(j,D){super(),this.m=j,this.l=D,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:on(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function en(p){z.call(this),this.h=p,this.g={}}d(en,z);var Vn=[];function Ur(p){G(p.g,function(j,D){this.g.hasOwnProperty(D)&&ht(j)},p),p.g={}}en.prototype.N=function(){en.Z.N.call(this),Ur(this)},en.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pa=a.JSON.stringify,ma=a.JSON.parse,bl=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function ga(){}function Oi(){}var ki={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ya(){N.call(this,"d")}d(ya,N);function Wr(){N.call(this,"c")}d(Wr,N);var $e={},Ds=null;function kr(){return Ds=Ds||new lt}$e.Ia="serverreachability";function tt(p){N.call(this,$e.Ia,p)}d(tt,N);function _e(p){const j=kr();Ge(j,new tt(j))}$e.STAT_EVENT="statevent";function Ze(p,j){N.call(this,$e.STAT_EVENT,p),this.stat=j}d(Ze,N);function nt(p){const j=kr();Ge(j,new Ze(j,p))}$e.Ja="timingevent";function jn(p,j){N.call(this,$e.Ja,p),this.size=j}d(jn,N);function mt(p,j){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},j)}function is(){this.g=!0}is.prototype.ua=function(){this.g=!1};function xd(p,j,D,F,ae,fe){p.info(function(){if(p.g)if(fe){var je="",ut=fe.split("&");for(let It=0;It<ut.length;It++){var hn=ut[It].split("=");if(hn.length>1){const kn=hn[0];hn=hn[1];const Yr=kn.split("_");je=Yr.length>=2&&Yr[1]=="type"?je+(kn+"="+hn+"&"):je+(kn+"=redacted&")}}}else je=null;else je=fe;return"XMLHTTP REQ ("+F+") [attempt "+ae+"]: "+j+`
`+D+`
`+je})}function wd(p,j,D,F,ae,fe,je){p.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ae+"]: "+j+`
`+D+`
`+fe+" "+je})}function ir(p,j,D,F){p.info(function(){return"XMLHTTP TEXT ("+j+"): "+_d(p,D)+(F?" "+F:"")})}function Ii(p,j){p.info(function(){return"TIMEOUT: "+j})}is.prototype.info=function(){};function _d(p,j){if(!p.g)return j;if(!j)return null;try{const fe=JSON.parse(j);if(fe){for(p=0;p<fe.length;p++)if(Array.isArray(fe[p])){var D=fe[p];if(!(D.length<2)){var F=D[1];if(Array.isArray(F)&&!(F.length<1)){var ae=F[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let je=1;je<F.length;je++)F[je]=""}}}}return pa(fe)}catch{return j}}var va={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},En;function Sd(){}d(Sd,ga),Sd.prototype.g=function(){return new XMLHttpRequest},En=new Sd;function Ms(p){return encodeURIComponent(String(p))}function Wc(p){var j=1;p=p.split(":");const D=[];for(;j>0&&p.length;)D.push(p.shift()),j--;return p.length&&D.push(p.join(":")),D}function ui(p,j,D,F){this.j=p,this.i=j,this.l=D,this.S=F||1,this.V=new en(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zm}function zm(){this.i=null,this.g="",this.h=!1}var ss={},Rs={};function Ni(p,j,D){p.M=1,p.A=Ls(di(j)),p.u=D,p.R=!0,xl(p,null)}function xl(p,j){p.F=Date.now(),Di(p),p.B=di(p.A);var D=p.B,F=p.S;Array.isArray(F)||(F=[String(F)]),Km(D.i,"t",F),p.C=0,D=p.j.L,p.h=new zm,p.g=mo(p.j,D?j:null,!p.u),p.P>0&&(p.O=new dn(c(p.Y,p,p.g),p.P)),j=p.V,D=p.g,F=p.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(Vn[0]=ae.toString()),ae=Vn);for(let fe=0;fe<ae.length;fe++){const je=oe(D,ae[fe],F||j.handleEvent,!1,j.h||j);if(!je)break;j.g[je.key]=je}j=p.J?ce(p.J):{},p.u?(p.v||(p.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,j)):(p.v="GET",p.g.ea(p.B,p.v,null,j)),_e(),xd(p.i,p.v,p.B,p.l,p.S,p.u)}ui.prototype.ba=function(p){p=p.target;const j=this.O;j&&Gr(p)==3?j.j():this.Y(p)},ui.prototype.Y=function(p){try{if(p==this.g)e:{const ut=Gr(this.g),hn=this.g.ya(),It=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||Ym(this.g)))){this.K||ut!=4||hn==7||(hn==8||It<=0?_e(3):_e(2)),wl(this);var j=this.g.ca();this.X=j;var D=Jb(this);if(this.o=j==200,wd(this.i,this.v,this.B,this.l,this.S,ut,j),this.o){if(this.U&&!this.L){t:{if(this.g){var F,ae=this.g;if((F=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(F)){var fe=F;break t}}fe=null}if(p=fe)ir(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fi(this,p);else{this.o=!1,this.m=3,nt(12),Ir(this),qt(this);break e}}if(this.R){p=!0;let kn;for(;!this.K&&this.C<D.length;)if(kn=Vm(this,D),kn==Rs){ut==4&&(this.m=4,nt(14),p=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==ss){this.m=4,nt(15),ir(this.i,this.l,D,"[Invalid Chunk]"),p=!1;break}else ir(this.i,this.l,kn,null),fi(this,kn);if(as(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||D.length!=0||this.h.h||(this.m=1,nt(16),p=!1),this.o=this.o&&p,!p)ir(this.i,this.l,D,"[Invalid Chunked Response]"),Ir(this),qt(this);else if(D.length>0&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.aa&&!je.P&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),Jc(je),je.P=!0,nt(11))}}else ir(this.i,this.l,D,null),fi(this,D);ut==4&&Ir(this),this.o&&!this.K&&(ut==4?eu(this.j,this):(this.o=!1,Di(this)))}else ex(this.g),j==400&&D.indexOf("Unknown SID")>0?(this.m=3,nt(12)):(this.m=0,nt(13)),Ir(this),qt(this)}}}catch{}finally{}};function Jb(p){if(!as(p))return p.g.la();const j=Ym(p.g);if(j==="")return"";let D="";const F=j.length,ae=Gr(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Ir(p),qt(p),"";p.h.i=new a.TextDecoder}for(let fe=0;fe<F;fe++)p.h.h=!0,D+=p.h.i.decode(j[fe],{stream:!(ae&&fe==F-1)});return j.length=0,p.h.g+=D,p.C=0,p.h.g}function as(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Vm(p,j){var D=p.C,F=j.indexOf(`
`,D);return F==-1?Rs:(D=Number(j.substring(D,F)),isNaN(D)?ss:(F+=1,F+D>j.length?Rs:(j=j.slice(F,F+D),p.C=F+D,j)))}ui.prototype.cancel=function(){this.K=!0,Ir(this)};function Di(p){p.T=Date.now()+p.H,Ed(p,p.H)}function Ed(p,j){if(p.D!=null)throw Error("WatchDog timer not null");p.D=mt(c(p.aa,p),j)}function wl(p){p.D&&(a.clearTimeout(p.D),p.D=null)}ui.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Ii(this.i,this.B),this.M!=2&&(_e(),nt(17)),Ir(this),this.m=2,qt(this)):Ed(this,this.T-p)};function qt(p){p.j.I==0||p.K||eu(p.j,p)}function Ir(p){wl(p);var j=p.O;j&&typeof j.dispose=="function"&&j.dispose(),p.O=null,Ur(p.V),p.g&&(j=p.g,p.g=null,j.abort(),j.dispose())}function fi(p,j){try{var D=p.j;if(D.I!=0&&(D.g==p||Sl(D.h,p))){if(!p.L&&Sl(D.h,p)&&D.I==3){try{var F=D.Ba.g.parse(j)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ae=F;if(ae[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<p.F)us(D),Xc(D);else break e;po(D),nt(18)}}else D.xa=ae[1],0<D.xa-D.K&&ae[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=mt(c(D.Va,D),6e3));Kc(D.h)<=1&&D.ta&&(D.ta=void 0)}else fs(D,11)}else if((p.L||D.g==p)&&us(D),!M(j))for(ae=D.Ba.g.parse(j),j=0;j<ae.length;j++){let It=ae[j];const kn=It[0];if(!(kn<=D.K))if(D.K=kn,It=It[1],D.I==2)if(It[0]=="c"){D.M=It[1],D.ba=It[2];const Yr=It[3];Yr!=null&&(D.ka=Yr,D.j.info("VER="+D.ka));const hs=It[4];hs!=null&&(D.za=hs,D.j.info("SVER="+D.za));const Bs=It[5];Bs!=null&&typeof Bs=="number"&&Bs>0&&(F=1.5*Bs,D.O=F,D.j.info("backChannelRequestTimeoutMs_="+F)),F=D;const ps=p.g;if(ps){const ru=ps.g?ps.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ru){var fe=F.h;fe.g||ru.indexOf("spdy")==-1&&ru.indexOf("quic")==-1&&ru.indexOf("h2")==-1||(fe.j=fe.l,fe.g=new Set,fe.h&&(os(fe,fe.h),fe.h=null))}if(F.G){const iu=ps.g?ps.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(F.wa=iu,Dt(F.J,F.G,iu))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-p.F,D.j.info("Handshake RTT: "+D.T+"ms")),F=D;var je=p;if(F.na=Fn(F,F.L?F.ba:null,F.W),je.L){Ad(F.h,je);var ut=je,hn=F.O;hn&&(ut.H=hn),ut.D&&(wl(ut),Di(ut)),F.g=je}else Ol(F);D.i.length>0&&Qc(D)}else It[0]!="stop"&&It[0]!="close"||fs(D,7);else D.I==3&&(It[0]=="stop"||It[0]=="close"?It[0]=="stop"?fs(D,7):Cl(D):It[0]!="noop"&&D.l&&D.l.qa(It),D.A=0)}}_e(4)}catch{}}var Fm=class{constructor(p,j){this.g=p,this.map=j}};function ba(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _l(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Kc(p){return p.h?1:p.g?p.g.size:0}function Sl(p,j){return p.h?p.h==j:p.g?p.g.has(j):!1}function os(p,j){p.g?p.g.add(j):p.h=j}function Ad(p,j){p.h&&p.h==j?p.h=null:p.g&&p.g.has(j)&&p.g.delete(j)}ba.prototype.cancel=function(){if(this.i=El(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function El(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let j=p.i;for(const D of p.g.values())j=j.concat(D.G);return j}return g(p.i)}var Td=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yt(p,j){if(p){p=p.split("&");for(let D=0;D<p.length;D++){const F=p[D].indexOf("=");let ae,fe=null;F>=0?(ae=p[D].substring(0,F),fe=p[D].substring(F+1)):ae=p[D],j(ae,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function ls(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;p instanceof ls?(this.l=p.l,$s(this,p.j),this.o=p.o,this.g=p.g,lo(this,p.u),this.h=p.h,$t(this,gr(p.i)),this.m=p.m):p&&(j=String(p).match(Td))?(this.l=!1,$s(this,j[1]||"",!0),this.o=Mi(j[2]||""),this.g=Mi(j[3]||"",!0),lo(this,j[4]),this.h=Mi(j[5]||"",!0),$t(this,j[6]||"",!0),this.m=Mi(j[7]||"")):(this.l=!1,this.i=new co(null,this.l))}ls.prototype.toString=function(){const p=[];var j=this.j;j&&p.push(xa(j,Al,!0),":");var D=this.g;return(D||j=="file")&&(p.push("//"),(j=this.o)&&p.push(xa(j,Al,!0),"@"),p.push(Ms(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&p.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&p.push("/"),p.push(xa(D,D.charAt(0)=="/"?qc:Bm,!0))),(D=this.i.toString())&&p.push("?",D),(D=this.m)&&p.push("#",xa(D,Tl)),p.join("")},ls.prototype.resolve=function(p){const j=di(this);let D=!!p.j;D?$s(j,p.j):D=!!p.o,D?j.o=p.o:D=!!p.g,D?j.g=p.g:D=p.u!=null;var F=p.h;if(D)lo(j,p.u);else if(D=!!p.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var ae=j.h.lastIndexOf("/");ae!=-1&&(F=j.h.slice(0,ae+1)+F)}if(ae=F,ae==".."||ae==".")F="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){F=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const fe=[];for(let je=0;je<ae.length;){const ut=ae[je++];ut=="."?F&&je==ae.length&&fe.push(""):ut==".."?((fe.length>1||fe.length==1&&fe[0]!="")&&fe.pop(),F&&je==ae.length&&fe.push("")):(fe.push(ut),F=!0)}F=fe.join("/")}else F=ae}return D?j.h=F:D=p.i.toString()!=="",D?$t(j,gr(p.i)):D=!!p.m,D&&(j.m=p.m),j};function di(p){return new ls(p)}function $s(p,j,D){p.j=D?Mi(j,!0):j,p.j&&(p.j=p.j.replace(/:$/,""))}function lo(p,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);p.u=j}else p.u=null}function $t(p,j,D){j instanceof co?(p.i=j,Hc(p.i,p.l)):(D||(j=xa(j,Um)),p.i=new co(j,p.l))}function Dt(p,j,D){p.i.set(j,D)}function Ls(p){return Dt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Mi(p,j){return p?j?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function xa(p,j,D){return typeof p=="string"?(p=encodeURI(p).replace(j,Pd),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Pd(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Al=/[#\/\?@]/g,Bm=/[#\?:]/g,qc=/[#\?]/g,Um=/[#\?@]/g,Tl=/#/g;function co(p,j){this.h=this.g=null,this.i=p||null,this.j=!!j}function wa(p){p.g||(p.g=new Map,p.h=0,p.i&&yt(p.i,function(j,D){p.add(decodeURIComponent(j.replace(/\+/g," ")),D)}))}t=co.prototype,t.add=function(p,j){wa(this),this.i=null,p=hi(this,p);let D=this.g.get(p);return D||this.g.set(p,D=[]),D.push(j),this.h+=1,this};function _t(p,j){wa(p),j=hi(p,j),p.g.has(j)&&(p.i=null,p.h-=p.g.get(j).length,p.g.delete(j))}function Cd(p,j){return wa(p),j=hi(p,j),p.g.has(j)}t.forEach=function(p,j){wa(this),this.g.forEach(function(D,F){D.forEach(function(ae){p.call(j,ae,F,this)},this)},this)};function Wm(p,j){wa(p);let D=[];if(typeof j=="string")Cd(p,j)&&(D=D.concat(p.g.get(hi(p,j))));else for(p=Array.from(p.g.values()),j=0;j<p.length;j++)D=D.concat(p[j]);return D}t.set=function(p,j){return wa(this),this.i=null,p=hi(this,p),Cd(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[j]),this.h+=1,this},t.get=function(p,j){return p?(p=Wm(this,p),p.length>0?String(p[0]):j):j};function Km(p,j,D){_t(p,j),D.length>0&&(p.i=null,p.g.set(hi(p,j),g(D)),p.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],j=Array.from(this.g.keys());for(let F=0;F<j.length;F++){var D=j[F];const ae=Ms(D);D=Wm(this,D);for(let fe=0;fe<D.length;fe++){let je=ae;D[fe]!==""&&(je+="="+Ms(D[fe])),p.push(je)}}return this.i=p.join("&")};function gr(p){const j=new co;return j.i=p.i,p.g&&(j.g=new Map(p.g),j.h=p.h),j}function hi(p,j){return j=String(j),p.j&&(j=j.toLowerCase()),j}function Hc(p,j){j&&!p.j&&(wa(p),p.i=null,p.g.forEach(function(D,F){const ae=F.toLowerCase();F!=ae&&(_t(this,F),Km(this,ae,D))},p)),p.j=j}function zs(p,j){const D=new is;if(a.Image){const F=new Image;F.onload=f(cs,D,"TestLoadImage: loaded",!0,j,F),F.onerror=f(cs,D,"TestLoadImage: error",!1,j,F),F.onabort=f(cs,D,"TestLoadImage: abort",!1,j,F),F.ontimeout=f(cs,D,"TestLoadImage: timeout",!1,j,F),a.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=p}else j(!1)}function qm(p,j){const D=new is,F=new AbortController,ae=setTimeout(()=>{F.abort(),cs(D,"TestPingServer: timeout",!1,j)},1e4);fetch(p,{signal:F.signal}).then(fe=>{clearTimeout(ae),fe.ok?cs(D,"TestPingServer: ok",!0,j):cs(D,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(ae),cs(D,"TestPingServer: error",!1,j)})}function cs(p,j,D,F,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),F(D)}catch{}}function On(){this.g=new bl}function Kr(p){this.i=p.Sb||null,this.h=p.ab||!1}d(Kr,ga),Kr.prototype.g=function(){return new Vs(this.i,this.h)};function Vs(p,j){lt.call(this),this.H=p,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Vs,lt),t=Vs.prototype,t.open=function(p,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=j,this.readyState=1,qr(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(j.body=p),(this.H||a).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_a(this)),this.readyState=0},t.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;uo(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function uo(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}t.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var j=p.value?p.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!p.done}))&&(this.response=this.responseText+=j)}p.done?_a(this):qr(this),this.readyState==3&&uo(this)}},t.Oa=function(p){this.g&&(this.response=this.responseText=p,_a(this))},t.Na=function(p){this.g&&(this.response=p,_a(this))},t.ga=function(){this.g&&_a(this)};function _a(p){p.readyState=4,p.l=null,p.j=null,p.B=null,qr(p)}t.setRequestHeader=function(p,j){this.A.append(p,j)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],j=this.h.entries();for(var D=j.next();!D.done;)D=D.value,p.push(D[0]+": "+D[1]),D=j.next();return p.join(`\r
`)};function qr(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Hm(p){let j="";return G(p,function(D,F){j+=F,j+=":",j+=D,j+=`\r
`}),j}function Hr(p,j,D){e:{for(F in D){var F=!1;break e}F=!0}F||(D=Hm(D),typeof p=="string"?D!=null&&Ms(D):Dt(p,j,D))}function Gt(p){lt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Gt,lt);var Gm=/^https?$/i,jd=["POST","PUT"];t=Gt.prototype,t.Fa=function(p){this.H=p},t.ea=function(p,j,D,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);j=j?j.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():En.g(),this.g.onreadystatechange=h(c(this.Ca,this));try{this.B=!0,this.g.open(j,String(p),!0),this.B=!1}catch(fe){fo(this,fe);return}if(p=D||"",D=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ae in F)D.set(ae,F[ae]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const fe of F.keys())D.set(fe,F.get(fe));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(D.keys()).find(fe=>fe.toLowerCase()=="content-type"),ae=a.FormData&&p instanceof a.FormData,!(Array.prototype.indexOf.call(jd,j,void 0)>=0)||F||ae||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[fe,je]of D)this.g.setRequestHeader(fe,je);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(fe){fo(this,fe)}};function fo(p,j){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=j,p.o=5,Gc(p),Yc(p)}function Gc(p){p.A||(p.A=!0,Ge(p,"complete"),Ge(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Ge(this,"complete"),Ge(this,"abort"),Yc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yc(this,!0)),Gt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Od(this):this.Xa())},t.Xa=function(){Od(this)};function Od(p){if(p.h&&typeof s<"u"){if(p.v&&Gr(p)==4)setTimeout(p.Ca.bind(p),0);else if(Ge(p,"readystatechange"),Gr(p)==4){p.h=!1;try{const fe=p.ca();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var D;if(!(D=j)){var F;if(F=fe===0){let je=String(p.D).match(Td)[1]||null;!je&&a.self&&a.self.location&&(je=a.self.location.protocol.slice(0,-1)),F=!Gm.test(je?je.toLowerCase():"")}D=F}if(D)Ge(p,"complete"),Ge(p,"success");else{p.o=6;try{var ae=Gr(p)>2?p.g.statusText:""}catch{ae=""}p.l=ae+" ["+p.ca()+"]",Gc(p)}}finally{Yc(p)}}}}function Yc(p,j){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const D=p.g;p.g=null,j||Ge(p,"ready");try{D.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Gr(p){return p.g?p.g.readyState:0}t.ca=function(){try{return Gr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(p){if(this.g){var j=this.g.responseText;return p&&j.indexOf(p)==0&&(j=j.substring(p.length)),ma(j)}};function Ym(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function ex(p){const j={};p=(p.g&&Gr(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<p.length;F++){if(M(p[F]))continue;var D=Wc(p[F]);const ae=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const fe=j[ae]||[];j[ae]=fe,fe.push(D)}he(j,function(F){return F.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(p,j,D){return D&&D.internalChannelParams&&D.internalChannelParams[p]||j}function Pl(p){this.za=0,this.i=[],this.j=new is,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fs("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fs("baseRetryDelayMs",5e3,p),this.Za=Fs("retryDelaySeedMs",1e4,p),this.Ta=Fs("forwardChannelMaxRetries",2,p),this.va=Fs("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new ba(p&&p.concurrentRequestLimit),this.Ba=new On,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Pl.prototype,t.ka=8,t.I=1,t.connect=function(p,j,D,F){nt(0),this.W=p,this.H=j||{},D&&F!==void 0&&(this.H.OSID=D,this.H.OAID=F),this.F=this.X,this.J=Fn(this,null,this.W),Qc(this)};function Cl(p){if(Xm(p),p.I==3){var j=p.V++,D=di(p.J);if(Dt(D,"SID",p.M),Dt(D,"RID",j),Dt(D,"TYPE","terminate"),ho(p,D),j=new ui(p,p.j,j),j.M=2,j.A=Ls(di(D)),D=!1,a.navigator&&a.navigator.sendBeacon)try{D=a.navigator.sendBeacon(j.A.toString(),"")}catch{}!D&&a.Image&&(new Image().src=j.A,D=!0),D||(j.g=mo(j.j,null),j.g.ea(j.A)),j.F=Date.now(),Di(j)}nu(p)}function Xc(p){p.g&&(Jc(p),p.g.cancel(),p.g=null)}function Xm(p){Xc(p),p.v&&(a.clearTimeout(p.v),p.v=null),us(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&a.clearTimeout(p.m),p.m=null)}function Qc(p){if(!_l(p.h)&&!p.m){p.m=!0;var j=p.Ea;A||T(),P||(A(),P=!0),S.add(j,p),p.D=0}}function kd(p,j){return Kc(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=j.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=mt(c(p.Ea,p,j),tu(p,p.D)),p.D++,!0)}t.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ae=new ui(this,this.j,p);let fe=this.o;if(this.U&&(fe?(fe=ce(fe),ke(fe,this.U)):fe=this.U),this.u!==null||this.R||(ae.J=fe,fe=null),this.S)e:{for(var j=0,D=0;D<this.i.length;D++){t:{var F=this.i[D];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(j+=F,j>4096){j=D;break e}if(j===4096||D===this.i.length-1){j=D+1;break e}}j=1e3}else j=1e3;j=jl(this,ae,j),D=di(this.J),Dt(D,"RID",p),Dt(D,"CVER",22),this.G&&Dt(D,"X-HTTP-Session-Id",this.G),ho(this,D),fe&&(this.R?j="headers="+Ms(Hm(fe))+"&"+j:this.u&&Hr(D,this.u,fe)),os(this.h,ae),this.Ra&&Dt(D,"TYPE","init"),this.S?(Dt(D,"$req",j),Dt(D,"SID","null"),ae.U=!0,Ni(ae,D,null)):Ni(ae,D,j),this.I=2}}else this.I==3&&(p?Zc(this,p):this.i.length==0||_l(this.h)||Zc(this))};function Zc(p,j){var D;j?D=j.l:D=p.V++;const F=di(p.J);Dt(F,"SID",p.M),Dt(F,"RID",D),Dt(F,"AID",p.K),ho(p,F),p.u&&p.o&&Hr(F,p.u,p.o),D=new ui(p,p.j,D,p.D+1),p.u===null&&(D.J=p.o),j&&(p.i=j.G.concat(p.i)),j=jl(p,D,1e3),D.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),os(p.h,D),Ni(D,F,j)}function ho(p,j){p.H&&G(p.H,function(D,F){Dt(j,F,D)}),p.l&&G({},function(D,F){Dt(j,F,D)})}function jl(p,j,D){D=Math.min(p.i.length,D);const F=p.l?c(p.l.Ka,p.l,p):null;e:{var ae=p.i;let ut=-1;for(;;){const hn=["count="+D];ut==-1?D>0?(ut=ae[0].g,hn.push("ofs="+ut)):ut=0:hn.push("ofs="+ut);let It=!0;for(let kn=0;kn<D;kn++){var fe=ae[kn].g;const Yr=ae[kn].map;if(fe-=ut,fe<0)ut=Math.max(0,ae[kn].g-100),It=!1;else try{fe="req"+fe+"_"||"";try{var je=Yr instanceof Map?Yr:Object.entries(Yr);for(const[hs,Bs]of je){let ps=Bs;o(Bs)&&(ps=pa(Bs)),hn.push(fe+hs+"="+encodeURIComponent(ps))}}catch(hs){throw hn.push(fe+"type="+encodeURIComponent("_badmap")),hs}}catch{F&&F(Yr)}}if(It){je=hn.join("&");break e}}je=void 0}return p=p.i.splice(0,D),j.G=p,je}function Ol(p){if(!p.g&&!p.v){p.Y=1;var j=p.Da;A||T(),P||(A(),P=!0),S.add(j,p),p.A=0}}function po(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=mt(c(p.Da,p),tu(p,p.A)),p.A++,!0)}t.Da=function(){if(this.v=null,Qm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=mt(c(this.Wa,this),p)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,nt(10),Xc(this),Qm(this))};function Jc(p){p.B!=null&&(a.clearTimeout(p.B),p.B=null)}function Qm(p){p.g=new ui(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var j=di(p.na);Dt(j,"RID","rpc"),Dt(j,"SID",p.M),Dt(j,"AID",p.K),Dt(j,"CI",p.F?"0":"1"),!p.F&&p.ia&&Dt(j,"TO",p.ia),Dt(j,"TYPE","xmlhttp"),ho(p,j),p.u&&p.o&&Hr(j,p.u,p.o),p.O&&(p.g.H=p.O);var D=p.g;p=p.ba,D.M=1,D.A=Ls(di(j)),D.u=null,D.R=!0,xl(D,p)}t.Va=function(){this.C!=null&&(this.C=null,Xc(this),po(this),nt(19))};function us(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function eu(p,j){var D=null;if(p.g==j){us(p),Jc(p),p.g=null;var F=2}else if(Sl(p.h,j))D=j.G,Ad(p.h,j),F=1;else return;if(p.I!=0){if(j.o)if(F==1){D=j.u?j.u.length:0,j=Date.now()-j.F;var ae=p.D;F=kr(),Ge(F,new jn(F,D)),Qc(p)}else Ol(p);else if(ae=j.m,ae==3||ae==0&&j.X>0||!(F==1&&kd(p,j)||F==2&&po(p)))switch(D&&D.length>0&&(j=p.h,j.i=j.i.concat(D)),ae){case 1:fs(p,5);break;case 4:fs(p,10);break;case 3:fs(p,6);break;default:fs(p,2)}}}function tu(p,j){let D=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(D*=2),D*j}function fs(p,j){if(p.j.info("Error code "+j),j==2){var D=c(p.bb,p),F=p.Ua;const ae=!F;F=new ls(F||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||$s(F,"https"),Ls(F),ae?zs(F.toString(),D):qm(F.toString(),D)}else nt(2);p.I=0,p.l&&p.l.pa(j),nu(p),Xm(p)}t.bb=function(p){p?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function nu(p){if(p.I=0,p.ja=[],p.l){const j=El(p.h);(j.length!=0||p.i.length!=0)&&(b(p.ja,j),b(p.ja,p.i),p.h.i.length=0,g(p.i),p.i.length=0),p.l.oa()}}function Fn(p,j,D){var F=D instanceof ls?di(D):new ls(D);if(F.g!="")j&&(F.g=j+"."+F.g),lo(F,F.u);else{var ae=a.location;F=ae.protocol,j=j?j+"."+ae.hostname:ae.hostname,ae=+ae.port;const fe=new ls(null);F&&$s(fe,F),j&&(fe.g=j),ae&&lo(fe,ae),D&&(fe.h=D),F=fe}return D=p.G,j=p.wa,D&&j&&Dt(F,D,j),Dt(F,"VER",p.ka),ho(p,F),F}function mo(p,j,D){if(j&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=p.Aa&&!p.ma?new Gt(new Kr({ab:D})):new Gt(p.ma),j.Fa(p.L),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function go(){}t=go.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function kl(){}kl.prototype.g=function(p,j){return new Xn(p,j)};function Xn(p,j){lt.call(this),this.g=new Pl(j),this.l=p,this.h=j&&j.messageUrlParams||null,p=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(p?p["X-WebChannel-Content-Type"]=j.messageContentType:p={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(p?p["X-WebChannel-Client-Profile"]=j.sa:p={"X-WebChannel-Client-Profile":j.sa}),this.g.U=p,(p=j&&j.Qb)&&!M(p)&&(this.g.u=p),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!M(j)&&(this.g.G=j,p=this.h,p!==null&&j in p&&(p=this.h,j in p&&delete p[j])),this.j=new ds(this)}d(Xn,lt),Xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){Cl(this.g)},Xn.prototype.o=function(p){var j=this.g;if(typeof p=="string"){var D={};D.__data__=p,p=D}else this.v&&(D={},D.__data__=pa(p),p=D);j.i.push(new Fm(j.Ya++,p)),j.I==3&&Qc(j)},Xn.prototype.N=function(){this.g.l=null,delete this.j,Cl(this.g),delete this.g,Xn.Z.N.call(this)};function Id(p){ya.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var j=p.__sm__;if(j){e:{for(const D in j){p=D;break e}p=void 0}(this.i=p)&&(p=this.i,j=j!==null&&p in j?j[p]:void 0),this.data=j}else this.data=p}d(Id,ya);function Nd(){Wr.call(this),this.status=1}d(Nd,Wr);function ds(p){this.g=p}d(ds,go),ds.prototype.ra=function(){Ge(this.g,"a")},ds.prototype.qa=function(p){Ge(this.g,new Id(p))},ds.prototype.pa=function(p){Ge(this.g,new Nd)},ds.prototype.oa=function(){Ge(this.g,"b")},kl.prototype.createWebChannel=kl.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,B4=function(){return new kl},F4=function(){return kr()},V4=$e,V1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},va.NO_ERROR=0,va.TIMEOUT=8,va.HTTP_ERROR=6,sy=va,Kt.COMPLETE="complete",z4=Kt,Oi.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",lt.prototype.listen=lt.prototype.J,oh=Oi,Gt.prototype.listenOnce=Gt.prototype.K,Gt.prototype.getLastError=Gt.prototype.Ha,Gt.prototype.getLastErrorCode=Gt.prototype.ya,Gt.prototype.getStatus=Gt.prototype.ca,Gt.prototype.getResponseJson=Gt.prototype.La,Gt.prototype.getResponseText=Gt.prototype.la,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Fa,L4=Gt}).apply(typeof bg<"u"?bg:typeof self<"u"?self:typeof window<"u"?window:{});const mC="@firebase/firestore",gC="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xf="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new W2("@firebase/firestore");function pu(){return yc.logLevel}function Le(t,...e){if(yc.logLevel<=bt.DEBUG){const n=e.map(X2);yc.debug(`Firestore (${Xf}): ${t}`,...n)}}function Ga(t,...e){if(yc.logLevel<=bt.ERROR){const n=e.map(X2);yc.error(`Firestore (${Xf}): ${t}`,...n)}}function lp(t,...e){if(yc.logLevel<=bt.WARN){const n=e.map(X2);yc.warn(`Firestore (${Xf}): ${t}`,...n)}}function X2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,U4(t,r,n)}function U4(t,e,n){let r=`FIRESTORE (${Xf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ga(r),new Error(r)}function Rt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||U4(e,i,r)}function at(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends ro{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zr.UNAUTHENTICATED))}shutdown(){}}class pW{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Rt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ko;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ko,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ko)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt(typeof r.accessToken=="string",31837,{l:r}),new dW(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rt(e===null||typeof e=="string",2055,{h:e}),new Zr(e)}}class mW{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gW{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new mW(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yW{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Rt(this.o===void 0,3512);const r=s=>{s.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Le("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=vW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function xt(t,e){return t<e?-1:t>e?1:0}function F1(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Lx(i)===Lx(s)?xt(i,s):Lx(i)?1:-1}return xt(t.length,e.length)}const bW=55296,xW=57343;function Lx(t){const e=t.charCodeAt(0);return e>=bW&&e<=xW}function cf(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="__name__";class qs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Je(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Je(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=qs.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return xt(e.length,n.length)}static compareSegments(e,n){const r=qs.isNumericId(e),i=qs.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?qs.extractNumericId(e).compare(qs.extractNumericId(n)):F1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wo.fromString(e.substring(4,e.length-2))}}class Xt extends qs{construct(e,n,r){return new Xt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Xt(n)}static emptyPath(){return new Xt([])}}const wW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ur extends qs{construct(e,n,r){return new ur(e,n,r)}static isValidIdentifier(e){return wW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vC}static keyField(){return new ur([vC])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Me(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Me(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Me(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new Me(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ur(n)}static emptyPath(){return new ur([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Xt.fromString(e))}static fromName(e){return new qe(Xt.fromString(e).popFirst(5))}static empty(){return new qe(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Xt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t,e,n){if(!n)throw new Me(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _W(t,e,n,r){if(e===!0&&r===!0)throw new Me(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bC(t){if(!qe.isDocumentKey(t))throw new Me(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xC(t){if(qe.isDocumentKey(t))throw new Me(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function K4(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Je(12329,{type:typeof t})}function Xi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Me(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$0(t);throw new Me(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,e){const n={typeString:t};return e&&(n.value=e),n}function um(t,e){if(!K4(t))throw new Me(ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Me(ve.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=-62135596800,_C=1e6;class sn{static now(){return sn.fromMillis(Date.now())}static fromDate(e){return sn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*_C);return new sn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Me(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Me(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wC)throw new Me(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_C}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:sn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(um(e,sn._jsonSchema))return new sn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}sn._jsonSchemaVersion="firestore/timestamp/1.0",sn._jsonSchema={type:Ln("string",sn._jsonSchemaVersion),seconds:Ln("number"),nanoseconds:Ln("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{static fromTimestamp(e){return new it(e)}static min(){return new it(new sn(0,0))}static max(){return new it(new sn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=-1;function SW(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=it.fromTimestamp(r===1e9?new sn(n+1,0):new sn(n,r));return new Zo(i,qe.empty(),e)}function EW(t){return new Zo(t.readTime,t.key,cp)}class Zo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zo(it.min(),qe.empty(),cp)}static max(){return new Zo(it.max(),qe.empty(),cp)}}function AW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=qe.comparator(t.documentKey,e.documentKey),n!==0?n:xt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qf(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==TW)throw t;Le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new be((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof be?n:be.resolve(n)}catch(n){return be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):be.reject(n)}static resolve(e){return new be((n,r)=>{n(e)})}static reject(e){return new be((n,r)=>{r(e)})}static waitFor(e){return new be((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},l=>r(l))}),a=!0,s===i&&n()})}static or(e){let n=be.resolve(!1);for(const r of e)n=n.next(i=>i?be.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new be((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(f=>{a[c]=f,++o,o===s&&r(a)},f=>i(f))}})}static doWhile(e,n){return new be((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function CW(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}L0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=-1;function z0(t){return t==null}function Wy(t){return t===0&&1/t==-1/0}function jW(t){return typeof t=="number"&&Number.isInteger(t)&&!Wy(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="";function OW(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=SC(e)),e=kW(t.get(n),e);return SC(e)}function kW(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case q4:n+="";break;default:n+=s}}return n}function SC(t){return t+q4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ll(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function H4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){this.comparator=e,this.root=n||lr.EMPTY}insert(e,n){return new vn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lr.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xg(this.root,e,this.comparator,!1)}getReverseIterator(){return new xg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xg(this.root,e,this.comparator,!0)}}class xg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??lr.RED,this.left=i??lr.EMPTY,this.right=s??lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new lr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return lr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Je(27949);return e+(this.isRed()?0:1)}}lr.EMPTY=null,lr.RED=!0,lr.BLACK=!1;lr.EMPTY=new class{constructor(){this.size=0}get key(){throw Je(57766)}get value(){throw Je(16141)}get color(){throw Je(16727)}get left(){throw Je(29726)}get right(){throw Je(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new lr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new AC(this.data.getIterator())}getIteratorFrom(e){return new AC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Hn(this.comparator);return n.data=e,n}}class AC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.fields=e,e.sort(ur.comparator)}static empty(){return new wi([])}unionWith(e){let n=new Hn(ur.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new G4("Invalid base64 string: "+s):s}}(e);return new mr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new mr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const IW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(t){if(Rt(!!t,39018),typeof t=="string"){let e=0;const n=IW.exec(t);if(Rt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pn(t.seconds),nanos:Pn(t.nanos)}}function Pn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function el(t){return typeof t=="string"?mr.fromBase64String(t):mr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="server_timestamp",X4="__type__",Q4="__previous_value__",Z4="__local_write_time__";function J2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[X4])==null?void 0:r.stringValue)===Y4}function V0(t){const e=t.mapValue.fields[Q4];return J2(e)?V0(e):e}function up(t){const e=Jo(t.mapValue.fields[Z4].timestampValue);return new sn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(e,n,r,i,s,a,o,l,c,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=f}}const Ky="(default)";class fp{constructor(e,n){this.projectId=e,this.database=n||Ky}static empty(){return new fp("","")}get isDefaultDatabase(){return this.database===Ky}isEqual(e){return e instanceof fp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="__type__",DW="__max__",wg={mapValue:{}},e5="__vector__",qy="value";function tl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?J2(t)?4:RW(t)?9007199254740991:MW(t)?10:11:Je(28295,{value:t})}function la(t,e){if(t===e)return!0;const n=tl(t);if(n!==tl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return up(t).isEqual(up(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Jo(i.timestampValue),o=Jo(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return el(i.bytesValue).isEqual(el(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Pn(i.geoPointValue.latitude)===Pn(s.geoPointValue.latitude)&&Pn(i.geoPointValue.longitude)===Pn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Pn(i.integerValue)===Pn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Pn(i.doubleValue),o=Pn(s.doubleValue);return a===o?Wy(a)===Wy(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return cf(t.arrayValue.values||[],e.arrayValue.values||[],la);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(EC(a)!==EC(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!la(a[l],o[l])))return!1;return!0}(t,e);default:return Je(52216,{left:t})}}function dp(t,e){return(t.values||[]).find(n=>la(n,e))!==void 0}function uf(t,e){if(t===e)return 0;const n=tl(t),r=tl(e);if(n!==r)return xt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xt(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Pn(s.integerValue||s.doubleValue),l=Pn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return TC(t.timestampValue,e.timestampValue);case 4:return TC(up(t),up(e));case 5:return F1(t.stringValue,e.stringValue);case 6:return function(s,a){const o=el(s),l=el(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const f=xt(o[c],l[c]);if(f!==0)return f}return xt(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=xt(Pn(s.latitude),Pn(a.latitude));return o!==0?o:xt(Pn(s.longitude),Pn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return PC(t.arrayValue,e.arrayValue);case 10:return function(s,a){var h,g,b,y;const o=s.fields||{},l=a.fields||{},c=(h=o[qy])==null?void 0:h.arrayValue,f=(g=l[qy])==null?void 0:g.arrayValue,d=xt(((b=c==null?void 0:c.values)==null?void 0:b.length)||0,((y=f==null?void 0:f.values)==null?void 0:y.length)||0);return d!==0?d:PC(c,f)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===wg.mapValue&&a===wg.mapValue)return 0;if(s===wg.mapValue)return 1;if(a===wg.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},f=Object.keys(c);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const h=F1(l[d],f[d]);if(h!==0)return h;const g=uf(o[l[d]],c[f[d]]);if(g!==0)return g}return xt(l.length,f.length)}(t.mapValue,e.mapValue);default:throw Je(23264,{he:n})}}function TC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xt(t,e);const n=Jo(t),r=Jo(e),i=xt(n.seconds,r.seconds);return i!==0?i:xt(n.nanos,r.nanos)}function PC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=uf(n[i],r[i]);if(s)return s}return xt(n.length,r.length)}function ff(t){return B1(t)}function B1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return el(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return qe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=B1(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${B1(n.fields[a])}`;return i+"}"}(t.mapValue):Je(61005,{value:t})}function ay(t){switch(tl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=V0(t);return e?16+ay(e):16;case 5:return 2*t.stringValue.length;case 6:return el(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ay(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ll(r.fields,(s,a)=>{i+=s.length+ay(a)}),i}(t.mapValue);default:throw Je(13486,{value:t})}}function CC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function U1(t){return!!t&&"integerValue"in t}function eE(t){return!!t&&"arrayValue"in t}function jC(t){return!!t&&"nullValue"in t}function OC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oy(t){return!!t&&"mapValue"in t}function MW(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[J4])==null?void 0:r.stringValue)===e5}function Th(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ll(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Th(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Th(t.arrayValue.values[n]);return e}return{...t}}function RW(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===DW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.value=e}static empty(){return new ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!oy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Th(n)}setAll(e){let n=ur.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=Th(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());oy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return la(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];oy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ll(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ti(Th(this.value))}}function t5(t){const e=[];return ll(t.fields,(n,r)=>{const i=new ur([n]);if(oy(r)){const s=t5(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new wi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Pr(e,0,it.min(),it.min(),it.min(),ti.empty(),0)}static newFoundDocument(e,n,r,i){return new Pr(e,1,n,it.min(),r,i,0)}static newNoDocument(e,n){return new Pr(e,2,n,it.min(),it.min(),ti.empty(),0)}static newUnknownDocument(e,n){return new Pr(e,3,n,it.min(),it.min(),ti.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n){this.position=e,this.inclusive=n}}function kC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=qe.comparator(qe.fromName(a.referenceValue),n.key):r=uf(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function IC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!la(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n="asc"){this.field=e,this.dir=n}}function $W(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{}class Mn extends n5{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zW(e,n,r):n==="array-contains"?new BW(e,r):n==="in"?new UW(e,r):n==="not-in"?new WW(e,r):n==="array-contains-any"?new KW(e,r):new Mn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new VW(e,r):new FW(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(uf(n,this.value)):n!==null&&tl(this.value)===tl(n)&&this.matchesComparison(uf(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ks extends n5{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ks(e,n)}matches(e){return r5(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function r5(t){return t.op==="and"}function i5(t){return LW(t)&&r5(t)}function LW(t){for(const e of t.filters)if(e instanceof ks)return!1;return!0}function W1(t){if(t instanceof Mn)return t.field.canonicalString()+t.op.toString()+ff(t.value);if(i5(t))return t.filters.map(e=>W1(e)).join(",");{const e=t.filters.map(n=>W1(n)).join(",");return`${t.op}(${e})`}}function s5(t,e){return t instanceof Mn?function(r,i){return i instanceof Mn&&r.op===i.op&&r.field.isEqual(i.field)&&la(r.value,i.value)}(t,e):t instanceof ks?function(r,i){return i instanceof ks&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&s5(a,i.filters[o]),!0):!1}(t,e):void Je(19439)}function a5(t){return t instanceof Mn?function(n){return`${n.field.canonicalString()} ${n.op} ${ff(n.value)}`}(t):t instanceof ks?function(n){return n.op.toString()+" {"+n.getFilters().map(a5).join(" ,")+"}"}(t):"Filter"}class zW extends Mn{constructor(e,n,r){super(e,n,r),this.key=qe.fromName(r.referenceValue)}matches(e){const n=qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class VW extends Mn{constructor(e,n){super(e,"in",n),this.keys=o5("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FW extends Mn{constructor(e,n){super(e,"not-in",n),this.keys=o5("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function o5(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>qe.fromName(r.referenceValue))}class BW extends Mn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eE(n)&&dp(n.arrayValue,this.value)}}class UW extends Mn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dp(this.value.arrayValue,n)}}class WW extends Mn{constructor(e,n){super(e,"not-in",n)}matches(e){if(dp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!dp(this.value.arrayValue,n)}}class KW extends Mn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>dp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function NC(t,e=null,n=[],r=[],i=null,s=null,a=null){return new qW(t,e,n,r,i,s,a)}function tE(t){const e=at(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>W1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),z0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ff(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ff(r)).join(",")),e.Te=n}return e.Te}function nE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$W(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!s5(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IC(t.startAt,e.startAt)&&IC(t.endAt,e.endAt)}function K1(t){return qe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HW(t,e,n,r,i,s,a,o){return new fm(t,e,n,r,i,s,a,o)}function F0(t){return new fm(t)}function DC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function l5(t){return t.collectionGroup!==null}function Ph(t){const e=at(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Hn(ur.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Gy(s,r))}),n.has(ur.keyField().canonicalString())||e.Ie.push(new Gy(ur.keyField(),r))}return e.Ie}function ea(t){const e=at(t);return e.Ee||(e.Ee=GW(e,Ph(t))),e.Ee}function GW(t,e){if(t.limitType==="F")return NC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Gy(i.field,s)});const n=t.endAt?new Hy(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hy(t.startAt.position,t.startAt.inclusive):null;return NC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function q1(t,e){const n=t.filters.concat([e]);return new fm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function H1(t,e,n){return new fm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function B0(t,e){return nE(ea(t),ea(e))&&t.limitType===e.limitType}function c5(t){return`${tE(ea(t))}|lt:${t.limitType}`}function mu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>a5(i)).join(", ")}]`),z0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ff(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ff(i)).join(",")),`Target(${r})`}(ea(t))}; limitType=${t.limitType})`}function U0(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):qe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ph(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,l){const c=kC(a,o,l);return a.inclusive?c<=0:c<0}(r.startAt,Ph(r),i)||r.endAt&&!function(a,o,l){const c=kC(a,o,l);return a.inclusive?c>=0:c>0}(r.endAt,Ph(r),i))}(t,e)}function YW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function u5(t){return(e,n)=>{let r=!1;for(const i of Ph(t)){const s=XW(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function XW(t,e,n){const r=t.field.isKeyField()?qe.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?uf(l,c):Je(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Je(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ll(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return H4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QW=new vn(qe.comparator);function Ya(){return QW}const f5=new vn(qe.comparator);function lh(...t){let e=f5;for(const n of t)e=e.insert(n.key,n);return e}function d5(t){let e=f5;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yl(){return Ch()}function h5(){return Ch()}function Ch(){return new kc(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZW=new vn(qe.comparator),JW=new Hn(qe.comparator);function wt(...t){let e=JW;for(const n of t)e=e.add(n);return e}const eK=new Hn(xt);function tK(){return eK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wy(e)?"-0":e}}function p5(t){return{integerValue:""+t}}function nK(t,e){return jW(e)?p5(e):rE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this._=void 0}}function rK(t,e,n){return t instanceof Yy?function(i,s){const a={fields:{[X4]:{stringValue:Y4},[Z4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&J2(s)&&(s=V0(s)),s&&(a.fields[Q4]=s),{mapValue:a}}(n,e):t instanceof hp?g5(t,e):t instanceof pp?y5(t,e):function(i,s){const a=m5(i,s),o=MC(a)+MC(i.Ae);return U1(a)&&U1(i.Ae)?p5(o):rE(i.serializer,o)}(t,e)}function iK(t,e,n){return t instanceof hp?g5(t,e):t instanceof pp?y5(t,e):n}function m5(t,e){return t instanceof Xy?function(r){return U1(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Yy extends W0{}class hp extends W0{constructor(e){super(),this.elements=e}}function g5(t,e){const n=v5(e);for(const r of t.elements)n.some(i=>la(i,r))||n.push(r);return{arrayValue:{values:n}}}class pp extends W0{constructor(e){super(),this.elements=e}}function y5(t,e){let n=v5(e);for(const r of t.elements)n=n.filter(i=>!la(i,r));return{arrayValue:{values:n}}}class Xy extends W0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function MC(t){return Pn(t.integerValue||t.doubleValue)}function v5(t){return eE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function sK(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof hp&&i instanceof hp||r instanceof pp&&i instanceof pp?cf(r.elements,i.elements,la):r instanceof Xy&&i instanceof Xy?la(r.Ae,i.Ae):r instanceof Yy&&i instanceof Yy}(t.transform,e.transform)}class aK{constructor(e,n){this.version=e,this.transformResults=n}}class Lr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Lr}static exists(e){return new Lr(void 0,e)}static updateTime(e){return new Lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ly(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class K0{}function b5(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new q0(t.key,Lr.none()):new dm(t.key,t.data,Lr.none());{const n=t.data,r=ti.empty();let i=new Hn(ur.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new cl(t.key,r,new wi(i.toArray()),Lr.none())}}function oK(t,e,n){t instanceof dm?function(i,s,a){const o=i.value.clone(),l=$C(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof cl?function(i,s,a){if(!ly(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=$C(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(x5(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function jh(t,e,n,r){return t instanceof dm?function(s,a,o,l){if(!ly(s.precondition,a))return o;const c=s.value.clone(),f=LC(s.fieldTransforms,l,a);return c.setAll(f),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof cl?function(s,a,o,l){if(!ly(s.precondition,a))return o;const c=LC(s.fieldTransforms,l,a),f=a.data;return f.setAll(x5(s)),f.setAll(c),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,a,o){return ly(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function lK(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=m5(r.transform,i||null);s!=null&&(n===null&&(n=ti.empty()),n.set(r.field,s))}return n||null}function RC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cf(r,i,(s,a)=>sK(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dm extends K0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cl extends K0{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function x5(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $C(t,e,n){const r=new Map;Rt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,iK(a,o,n[i]))}return r}function LC(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,rK(s,a,e))}return r}class q0 extends K0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cK extends K0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&oK(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=h5();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const l=b5(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(it.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),wt())}isEqual(e){return this.batchId===e.batchId&&cf(this.mutations,e.mutations,(n,r)=>RC(n,r))&&cf(this.baseMutations,e.baseMutations,(n,r)=>RC(n,r))}}class iE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return ZW}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new iE(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var In,jt;function hK(t){switch(t){case ve.OK:return Je(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Je(15467,{code:t})}}function w5(t){if(t===void 0)return Ga("GRPC error has no .code"),ve.UNKNOWN;switch(t){case In.OK:return ve.OK;case In.CANCELLED:return ve.CANCELLED;case In.UNKNOWN:return ve.UNKNOWN;case In.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case In.INTERNAL:return ve.INTERNAL;case In.UNAVAILABLE:return ve.UNAVAILABLE;case In.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case In.NOT_FOUND:return ve.NOT_FOUND;case In.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case In.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case In.ABORTED:return ve.ABORTED;case In.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case In.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case In.DATA_LOSS:return ve.DATA_LOSS;default:return Je(39323,{code:t})}}(jt=In||(In={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=new Wo([4294967295,4294967295],0);function zC(t){const e=pK().encode(t),n=new $4;return n.update(e),new Uint8Array(n.digest())}function VC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Wo([n,r],0),new Wo([i,s],0)]}class sE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ch(`Invalid padding: ${n}`);if(r<0)throw new ch(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ch(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ch(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Wo.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Wo.fromNumber(r)));return i.compare(mK)===1&&(i=new Wo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=zC(e),[r,i]=VC(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new sE(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=zC(e),[r,i]=VC(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ch extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,hm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new H0(it.min(),i,new vn(xt),Ya(),wt())}}class hm{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hm(r,n,wt(),wt(),wt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class _5{constructor(e,n){this.targetId=e,this.Ce=n}}class S5{constructor(e,n,r=mr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class FC{constructor(){this.ve=0,this.Fe=BC(),this.Me=mr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=wt(),n=wt(),r=wt();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Je(38017,{changeType:s})}}),new hm(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=BC()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gK{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ya(),this.Je=_g(),this.He=_g(),this.Ye=new vn(xt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Je(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(K1(s))if(r===0){const a=new qe(s.path);this.et(n,a,Pr.newNoDocument(a,it.min()))}else Rt(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=el(r).toUint8Array()}catch(l){if(l instanceof G4)return lp("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new sE(a,i,s)}catch(l){return lp(l instanceof ch?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&K1(o.target)){const l=new qe(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Pr.newNoDocument(l,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let r=wt();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new H0(e,n,this.Ye,this.je,r);return this.je=Ya(),this.Je=_g(),this.He=_g(),this.Ye=new vn(xt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new FC,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Hn(xt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Hn(xt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new FC),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _g(){return new vn(qe.comparator)}function BC(){return new vn(qe.comparator)}const yK={asc:"ASCENDING",desc:"DESCENDING"},vK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bK={and:"AND",or:"OR"};class xK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function G1(t,e){return t.useProto3Json||z0(e)?e:{value:e}}function Qy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E5(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wK(t,e){return Qy(t,e.toTimestamp())}function ta(t){return Rt(!!t,49232),it.fromTimestamp(function(n){const r=Jo(n);return new sn(r.seconds,r.nanos)}(t))}function aE(t,e){return Y1(t,e).canonicalString()}function Y1(t,e){const n=function(i){return new Xt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function A5(t){const e=Xt.fromString(t);return Rt(O5(e),10190,{key:e.toString()}),e}function X1(t,e){return aE(t.databaseId,e.path)}function zx(t,e){const n=A5(e);if(n.get(1)!==t.databaseId.projectId)throw new Me(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Me(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new qe(P5(n))}function T5(t,e){return aE(t.databaseId,e)}function _K(t){const e=A5(t);return e.length===4?Xt.emptyPath():P5(e)}function Q1(t){return new Xt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function P5(t){return Rt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function UC(t,e,n){return{name:X1(t,e),fields:n.value.mapValue.fields}}function SK(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Je(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(Rt(f===void 0||typeof f=="string",58123),mr.fromBase64String(f||"")):(Rt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),mr.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const f=c.code===void 0?ve.UNKNOWN:w5(c.code);return new Me(f,c.message||"")}(a);n=new S5(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zx(t,r.document.name),s=ta(r.document.updateTime),a=r.document.createTime?ta(r.document.createTime):it.min(),o=new ti({mapValue:{fields:r.document.fields}}),l=Pr.newFoundDocument(i,s,a,o),c=r.targetIds||[],f=r.removedTargetIds||[];n=new cy(c,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zx(t,r.document),s=r.readTime?ta(r.readTime):it.min(),a=Pr.newNoDocument(i,s),o=r.removedTargetIds||[];n=new cy([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zx(t,r.document),s=r.removedTargetIds||[];n=new cy([],s,i,null)}else{if(!("filter"in e))return Je(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new dK(i,s),o=r.targetId;n=new _5(o,a)}}return n}function EK(t,e){let n;if(e instanceof dm)n={update:UC(t,e.key,e.value)};else if(e instanceof q0)n={delete:X1(t,e.key)};else if(e instanceof cl)n={update:UC(t,e.key,e.data),updateMask:NK(e.fieldMask)};else{if(!(e instanceof cK))return Je(16599,{Vt:e.type});n={verify:X1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof Yy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof hp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof pp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Xy)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw Je(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:wK(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Je(27497)}(t,e.precondition)),n}function AK(t,e){return t&&t.length>0?(Rt(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?ta(i.updateTime):ta(s);return a.isEqual(it.min())&&(a=ta(s)),new aK(a,i.transformResults||[])}(n,e))):[]}function TK(t,e){return{documents:[T5(t,e.path)]}}function PK(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=T5(t,i);const s=function(c){if(c.length!==0)return j5(ks.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(f=>function(h){return{field:gu(h.field),direction:OK(h.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=G1(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function CK(t){let e=_K(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Rt(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(d){const h=C5(d);return h instanceof ks&&i5(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(h=>function(b){return new Gy(yu(b.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(h))}(n.orderBy));let o=null;n.limit&&(o=function(d){let h;return h=typeof d=="object"?d.value:d,z0(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,g=d.values||[];return new Hy(g,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const h=!d.before,g=d.values||[];return new Hy(g,h)}(n.endAt)),HW(e,i,a,s,o,"F",l,c)}function jK(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Je(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function C5(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yu(n.unaryFilter.field);return Mn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=yu(n.unaryFilter.field);return Mn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=yu(n.unaryFilter.field);return Mn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=yu(n.unaryFilter.field);return Mn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Je(61313);default:return Je(60726)}}(t):t.fieldFilter!==void 0?function(n){return Mn.create(yu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Je(58110);default:return Je(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ks.create(n.compositeFilter.filters.map(r=>C5(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Je(1026)}}(n.compositeFilter.op))}(t):Je(30097,{filter:t})}function OK(t){return yK[t]}function kK(t){return vK[t]}function IK(t){return bK[t]}function gu(t){return{fieldPath:t.canonicalString()}}function yu(t){return ur.fromServerFormat(t.fieldPath)}function j5(t){return t instanceof Mn?function(n){if(n.op==="=="){if(OC(n.value))return{unaryFilter:{field:gu(n.field),op:"IS_NAN"}};if(jC(n.value))return{unaryFilter:{field:gu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OC(n.value))return{unaryFilter:{field:gu(n.field),op:"IS_NOT_NAN"}};if(jC(n.value))return{unaryFilter:{field:gu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gu(n.field),op:kK(n.op),value:n.value}}}(t):t instanceof ks?function(n){const r=n.getFilters().map(i=>j5(i));return r.length===1?r[0]:{compositeFilter:{op:IK(n.op),filters:r}}}(t):Je(54877,{filter:t})}function NK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function O5(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,r,i,s=it.min(),a=it.min(),o=mr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK{constructor(e){this.yt=e}}function MK(t){const e=CK({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?H1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{constructor(){this.Cn=new $K}addToCollectionParentIndex(e,n){return this.Cn.add(n),be.resolve()}getCollectionParents(e,n){return be.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return be.resolve()}deleteFieldIndex(e,n){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,n){return be.resolve()}getDocumentsMatchingTarget(e,n){return be.resolve(null)}getIndexType(e,n){return be.resolve(0)}getFieldIndexes(e,n){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,n){return be.resolve(Zo.min())}getMinOffsetFromCollectionGroup(e,n){return be.resolve(Zo.min())}updateCollectionGroup(e,n,r){return be.resolve()}updateIndexEntries(e,n){return be.resolve()}}class $K{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Hn(Xt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hn(Xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},k5=41943040;class Jr{static withCacheSize(e){return new Jr(e,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr.DEFAULT_COLLECTION_PERCENTILE=10,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jr.DEFAULT=new Jr(k5,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jr.DISABLED=new Jr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new df(0)}static cr(){return new df(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="LruGarbageCollector",I5=1048576;function qC([t,e],[n,r]){const i=xt(t,n);return i===0?xt(e,r):i}class LK{constructor(e){this.Ir=e,this.buffer=new Hn(qC),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();qC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zK{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Le(KC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zf(n)?Le(KC,"Ignoring IndexedDB error during garbage collection: ",n):await Qf(n)}await this.Vr(3e5)})}}class VK{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return be.resolve(L0.ce);const r=new LK(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(WC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WC):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,a,o,l,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,o=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),pu()<=bt.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-f}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function FK(t,e){return new VK(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BK{constructor(){this.changes=new kc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?be.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&jh(r.mutation,i,wi.empty(),sn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,wt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=wt()){const i=Yl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=lh();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Yl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,wt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=Ya();const a=Ch(),o=function(){return Ch()}();return n.forEach((l,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof cl)?s=s.insert(c.key,c):f!==void 0?(a.set(c.key,f.mutation.getFieldMask()),jh(f.mutation,c,f.mutation.getFieldMask(),sn.now())):a.set(c.key,wi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,f)=>a.set(c,f)),n.forEach((c,f)=>o.set(c,new UK(f,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const r=Ch();let i=new vn((a,o)=>a-o),s=wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let f=r.get(l)||wi.empty();f=o.applyToLocalView(c,f),r.set(l,f);const d=(i.get(o.batchId)||wt()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,f=l.value,d=h5();f.forEach(h=>{if(!s.has(h)){const g=b5(n.get(h),r.get(h));g!==null&&d.set(h,g),s=s.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return be.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return qe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):l5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):be.resolve(Yl());let o=cp,l=s;return a.next(c=>be.forEach(c,(f,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(f)?be.resolve():this.remoteDocumentCache.getEntry(e,f).next(h=>{l=l.insert(f,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,wt())).next(f=>({batchId:o,changes:d5(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new qe(n)).next(r=>{let i=lh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=lh();return this.indexManager.getCollectionParents(e,s).next(o=>be.forEach(o,l=>{const c=function(d,h){return new fm(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(f=>{f.forEach((d,h)=>{a=a.insert(d,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((l,c)=>{const f=c.getKey();a.get(f)===null&&(a=a.insert(f,Pr.newInvalidDocument(f)))});let o=lh();return a.forEach((l,c)=>{const f=s.get(l);f!==void 0&&jh(f.mutation,c,wi.empty(),sn.now()),U0(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return be.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ta(i.createTime)}}(n)),be.resolve()}getNamedQuery(e,n){return be.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:MK(i.bundledQuery),readTime:ta(i.readTime)}}(n)),be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(){this.overlays=new vn(qe.comparator),this.qr=new Map}getOverlay(e,n){return be.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yl();return be.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),be.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),be.resolve()}getOverlaysForCollection(e,n,r){const i=Yl(),s=n.length+1,a=new qe(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return be.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new vn((c,f)=>c-f);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=Yl(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const o=Yl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,f)=>o.set(c,f)),!(o.size()>=i)););return be.resolve(o)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new fK(n,r));let s=this.qr.get(n);s===void 0&&(s=wt(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.Qr=new Hn(Qn.$r),this.Ur=new Hn(Qn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Qn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Qn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new qe(new Xt([])),r=new Qn(n,e),i=new Qn(n,e+1),s=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new qe(new Xt([])),r=new Qn(n,e),i=new Qn(n,e+1);let s=wt();return this.Ur.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Qn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return qe.comparator(e.key,n.key)||xt(e.Yr,n.Yr)}static Kr(e,n){return xt(e.Yr,n.Yr)||qe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Hn(Qn.$r)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new uK(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new Qn(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return be.resolve(a)}lookupMutationBatch(e,n){return be.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return be.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?Z2:this.tr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qn(n,0),i=new Qn(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),be.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hn(xt);return n.forEach(i=>{const s=new Qn(i,0),a=new Qn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{r=r.add(o.Yr)})}),be.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;qe.isDocumentKey(s)||(s=s.child(""));const a=new Qn(new qe(s),0);let o=new Hn(xt);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(o=o.add(l.Yr)),!0)},a),be.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Rt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return be.forEach(n.mutations,i=>{const s=new Qn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Qn(n,0),i=this.Zr.firstAfterOrEqual(r);return be.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YK{constructor(e){this.ri=e,this.docs=function(){return new vn(qe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return be.resolve(r?r.document.mutableCopy():Pr.newInvalidDocument(n))}getEntries(e,n){let r=Ya();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pr.newInvalidDocument(i))}),be.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ya();const a=n.path,o=new qe(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:f}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||AW(EW(f),r)<=0||(i.has(f.key)||U0(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return be.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Je(9500)}ii(e,n){return be.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new XK(this)}getSize(e){return be.resolve(this.size)}}class XK extends BK{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),be.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(e){this.persistence=e,this.si=new kc(n=>tE(n),nE),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.oi=0,this._i=new oE,this.targetCount=0,this.ai=df.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),be.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new df(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,be.resolve()}updateTargetData(e,n){return this.Pr(n),be.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),be.waitFor(s).next(()=>i)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return be.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),be.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),be.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),be.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return be.resolve(r)}containsKey(e,n){return be.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n){this.ui={},this.overlays={},this.ci=new L0(0),this.li=!1,this.li=!0,this.hi=new HK,this.referenceDelegate=e(this),this.Pi=new QK(this),this.indexManager=new RK,this.remoteDocumentCache=function(i){return new YK(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new DK(n),this.Ii=new KK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new GK(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Le("MemoryPersistence","Starting transaction:",e);const i=new ZK(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return be.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class ZK extends PW{constructor(e){super(),this.currentSequenceNumber=e}}class lE{constructor(e){this.persistence=e,this.Ri=new oE,this.Vi=null}static mi(e){return new lE(e)}get fi(){if(this.Vi)return this.Vi;throw Je(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),be.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),be.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),be.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.fi,r=>{const i=qe.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,it.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return be.or([()=>be.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Zy{constructor(e,n){this.persistence=e,this.pi=new kc(r=>OW(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=FK(this,n)}static mi(e,n){return new Zy(e,n)}Ei(){}di(e){return be.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return be.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?be.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,n).next(o=>{o||(r++,s.removeEntry(a,it.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ay(e.data.value)),n}br(e,n,r){return be.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return be.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=wt(),i=wt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cE(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return MB()?8:CW(oi())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new JK;return this.Ss(e,n,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(pu()<=bt.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",mu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),be.resolve()):(pu()<=bt.DEBUG&&Le("QueryEngine","Query:",mu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(pu()<=bt.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",mu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ea(n))):be.resolve())}ys(e,n){if(DC(n))return be.resolve(null);let r=ea(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=H1(n,null,"F"),r=ea(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=wt(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,o);return this.Cs(n,c,a,l.readTime)?this.ys(e,H1(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,i){return DC(n)||i.isEqual(it.min())?be.resolve(null):this.ps.getDocuments(e,r).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,r,i)?be.resolve(null):(pu()<=bt.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mu(n)),this.vs(e,a,n,SW(i,cp)).next(o=>o))})}Ds(e,n){let r=new Hn(u5(e));return n.forEach((i,s)=>{U0(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return pu()<=bt.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",mu(n)),this.ps.getDocumentsMatchingQuery(e,n,Zo.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="LocalStore",tq=3e8;class nq{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new vn(xt),this.xs=new kc(s=>tE(s),nE),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WK(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function rq(t,e,n,r){return new nq(t,e,n,r)}async function D5(t,e){const n=at(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=wt();for(const c of i){a.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}for(const c of s){o.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:o}))})})}function iq(t,e){const n=at(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,f){const d=c.batch,h=d.keys();let g=be.resolve();return h.forEach(b=>{g=g.next(()=>f.getEntry(l,b)).next(y=>{const x=c.docVersions.get(b);Rt(x!==null,48541),y.version.compareTo(x)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),f.addEntry(y)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=wt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function M5(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function sq(t,e){const n=at(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];e.targetChanges.forEach((f,d)=>{const h=i.get(d);if(!h)return;o.push(n.Pi.removeMatchingKeys(s,f.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,f.addedDocuments,d)));let g=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(mr.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):f.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(f.resumeToken,r)),i=i.insert(d,g),function(y,x,w){return y.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=tq?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,g,f)&&o.push(n.Pi.updateTargetData(s,g))});let l=Ya(),c=wt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),o.push(aq(s,a,e.documentUpdates).next(f=>{l=f.ks,c=f.qs})),!r.isEqual(it.min())){const f=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(f)}return be.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ms=i,s))}function aq(t,e,n){let r=wt(),i=wt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Ya();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(it.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Le(uE,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:a,qs:i}})}function oq(t,e){const n=at(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Z2),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lq(t,e){const n=at(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,be.resolve(i)):n.Pi.allocateTargetId(r).next(a=>(i=new ko(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Z1(t,e,n){const r=at(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Zf(a))throw a;Le(uE,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function HC(t,e,n){const r=at(t);let i=it.min(),s=wt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,f){const d=at(l),h=d.xs.get(f);return h!==void 0?be.resolve(d.Ms.get(h)):d.Pi.getTargetData(c,f)}(r,a,ea(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?i:it.min(),n?s:wt())).next(o=>(cq(r,YW(e),o),{documents:o,Qs:s})))}function cq(t,e,n){let r=t.Os.get(e)||it.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class GC{constructor(){this.activeTargetIds=tK()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uq{constructor(){this.Mo=new GC,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new GC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="ConnectivityMonitor";class XC{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Le(YC,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Le(YC,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sg=null;function J1(){return Sg===null?Sg=function(){return 268435456+Math.round(2147483648*Math.random())}():Sg++,"0x"+Sg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="RestConnection",dq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ky?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const a=J1(),o=this.zo(e,n.toUriEncodedString());Le(Vx,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(o),f=D0(c);return this.Jo(e,o,l,r,f).then(d=>(Le(Vx,`Received RPC '${e}' ${a}: `,d),d),d=>{throw lp(Vx,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",r),d})}Ho(e,n,r,i,s,a){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=dq[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="WebChannelConnection";class mq extends hq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const a=J1();return new Promise((o,l)=>{const c=new L4;c.setWithCredentials(!0),c.listenOnce(z4.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case sy.NO_ERROR:const d=c.getResponseJson();Le(wr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case sy.TIMEOUT:Le(wr,`RPC '${e}' ${a} timed out`),l(new Me(ve.DEADLINE_EXCEEDED,"Request time out"));break;case sy.HTTP_ERROR:const h=c.getStatus();if(Le(wr,`RPC '${e}' ${a} failed with status:`,h,"response text:",c.getResponseText()),h>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const y=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(_)>=0?_:ve.UNKNOWN}(b.status);l(new Me(y,b.message))}else l(new Me(ve.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Me(ve.UNAVAILABLE,"Connection failed."));break;default:Je(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Le(wr,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(i);Le(wr,`RPC '${e}' ${a} sending request:`,i),c.send(n,"POST",f,r,15)})}T_(e,n,r){const i=J1(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=B4(),o=F4(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=s.join("");Le(wr,`Creating RPC '${e}' stream ${i}: ${f}`,l);const d=a.createWebChannel(f,l);this.I_(d);let h=!1,g=!1;const b=new pq({Yo:x=>{g?Le(wr,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(h||(Le(wr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),Le(wr,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},Zo:()=>d.close()}),y=(x,w,_)=>{x.listen(w,E=>{try{_(E)}catch(O){setTimeout(()=>{throw O},0)}})};return y(d,oh.EventType.OPEN,()=>{g||(Le(wr,`RPC '${e}' stream ${i} transport opened.`),b.o_())}),y(d,oh.EventType.CLOSE,()=>{g||(g=!0,Le(wr,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(d))}),y(d,oh.EventType.ERROR,x=>{g||(g=!0,lp(wr,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),b.a_(new Me(ve.UNAVAILABLE,"The operation could not be completed")))}),y(d,oh.EventType.MESSAGE,x=>{var w;if(!g){const _=x.data[0];Rt(!!_,16349);const E=_,O=(E==null?void 0:E.error)||((w=E[0])==null?void 0:w.error);if(O){Le(wr,`RPC '${e}' stream ${i} received error:`,O);const A=O.status;let P=function(k){const z=In[k];if(z!==void 0)return w5(z)}(A),S=O.message;P===void 0&&(P=ve.INTERNAL,S="Unknown error status: "+A+" with message "+O.message),g=!0,b.a_(new Me(P,S)),d.close()}else Le(wr,`RPC '${e}' stream ${i} received:`,_),b.u_(_)}}),y(o,V4.STAT_EVENT,x=>{x.stat===V1.PROXY?Le(wr,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===V1.NOPROXY&&Le(wr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Fx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){return new xK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="PersistentStream";class $5{constructor(e,n,r,i,s,a,o,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R5(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Ga(n.toString()),Ga("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Me(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Le(QC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Le(QC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gq extends $5{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=SK(this.serializer,e),r=function(s){if(!("targetChange"in s))return it.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?it.min():a.readTime?ta(a.readTime):it.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Q1(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=K1(l)?{documents:TK(s,l)}:{query:PK(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=E5(s,a.resumeToken);const c=G1(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(it.min())>0){o.readTime=Qy(s,a.snapshotVersion.toTimestamp());const c=G1(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=jK(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Q1(this.serializer),n.removeTarget=e,this.q_(n)}}class yq extends $5{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=AK(e.writeResults,e.commitTime),r=ta(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Q1(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>EK(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{}class bq extends vq{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Me(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,Y1(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Me(ve.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,Y1(n,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(ve.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class xq{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ga(n),this.aa=!1):Le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc="RemoteStore";class wq{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Ic(this)&&(Le(vc,"Restarting streams for network reachability change."),await async function(l){const c=at(l);c.Ea.add(4),await pm(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Y0(c)}(this))})}),this.Ra=new xq(r,i)}}async function Y0(t){if(Ic(t))for(const e of t.da)await e(!0)}async function pm(t){for(const e of t.da)await e(!1)}function L5(t,e){const n=at(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),pE(n)?hE(n):Jf(n).O_()&&dE(n,e))}function fE(t,e){const n=at(t),r=Jf(n);n.Ia.delete(e),r.O_()&&z5(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ic(n)&&n.Ra.set("Unknown"))}function dE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Jf(t).Y_(e)}function z5(t,e){t.Va.Ue(e),Jf(t).Z_(e)}function hE(t){t.Va=new gK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Jf(t).start(),t.Ra.ua()}function pE(t){return Ic(t)&&!Jf(t).x_()&&t.Ia.size>0}function Ic(t){return at(t).Ea.size===0}function V5(t){t.Va=void 0}async function _q(t){t.Ra.set("Online")}async function Sq(t){t.Ia.forEach((e,n)=>{dE(t,e)})}async function Eq(t,e){V5(t),pE(t)?(t.Ra.ha(e),hE(t)):t.Ra.set("Unknown")}async function Aq(t,e,n){if(t.Ra.set("Online"),e instanceof S5&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(t,e)}catch(r){Le(vc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jy(t,r)}else if(e instanceof cy?t.Va.Ze(e):e instanceof _5?t.Va.st(e):t.Va.tt(e),!n.isEqual(it.min()))try{const r=await M5(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.Ia.get(c);f&&s.Ia.set(c,f.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const f=s.Ia.get(l);if(!f)return;s.Ia.set(l,f.withResumeToken(mr.EMPTY_BYTE_STRING,f.snapshotVersion)),z5(s,l);const d=new ko(f.target,l,c,f.sequenceNumber);dE(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Le(vc,"Failed to raise snapshot:",r),await Jy(t,r)}}async function Jy(t,e,n){if(!Zf(e))throw e;t.Ea.add(1),await pm(t),t.Ra.set("Offline"),n||(n=()=>M5(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Le(vc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Y0(t)})}function F5(t,e){return e().catch(n=>Jy(t,n,e))}async function X0(t){const e=at(t),n=nl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Z2;for(;Tq(e);)try{const i=await oq(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Pq(e,i)}catch(i){await Jy(e,i)}B5(e)&&U5(e)}function Tq(t){return Ic(t)&&t.Ta.length<10}function Pq(t,e){t.Ta.push(e);const n=nl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function B5(t){return Ic(t)&&!nl(t).x_()&&t.Ta.length>0}function U5(t){nl(t).start()}async function Cq(t){nl(t).ra()}async function jq(t){const e=nl(t);for(const n of t.Ta)e.ea(n.mutations)}async function Oq(t,e,n){const r=t.Ta.shift(),i=iE.from(r,e,n);await F5(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await X0(t)}async function kq(t,e){e&&nl(t).X_&&await async function(r,i){if(function(a){return hK(a)&&a!==ve.ABORTED}(i.code)){const s=r.Ta.shift();nl(r).B_(),await F5(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await X0(r)}}(t,e),B5(t)&&U5(t)}async function ZC(t,e){const n=at(t);n.asyncQueue.verifyOperationInProgress(),Le(vc,"RemoteStore received new credentials");const r=Ic(n);n.Ea.add(3),await pm(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Y0(n)}async function Iq(t,e){const n=at(t);e?(n.Ea.delete(2),await Y0(n)):e||(n.Ea.add(2),await pm(n),n.Ra.set("Unknown"))}function Jf(t){return t.ma||(t.ma=function(n,r,i){const s=at(n);return s.sa(),new gq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:_q.bind(null,t),t_:Sq.bind(null,t),r_:Eq.bind(null,t),H_:Aq.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),pE(t)?hE(t):t.Ra.set("Unknown")):(await t.ma.stop(),V5(t))})),t.ma}function nl(t){return t.fa||(t.fa=function(n,r,i){const s=at(n);return s.sa(),new yq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Cq.bind(null,t),r_:kq.bind(null,t),ta:jq.bind(null,t),na:Oq.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await X0(t)):(await t.fa.stop(),t.Ta.length>0&&(Le(vc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new mE(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Me(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gE(t,e){if(Ga("AsyncQueue",`${e}: ${t}`),Zf(t))return new Me(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{static emptySet(e){return new Hu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||qe.comparator(n.key,r.key):(n,r)=>qe.comparator(n.key,r.key),this.keyedMap=lh(),this.sortedSet=new vn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Hu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.ga=new vn(qe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Je(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class hf{constructor(e,n,r,i,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new hf(e,n,Hu.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&B0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Dq{constructor(){this.queries=ej(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=at(n),s=i.queries;i.queries=ej(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new Me(ve.ABORTED,"Firestore shutting down"))}}function ej(){return new kc(t=>c5(t),B0)}async function W5(t,e){const n=at(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Nq,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const o=gE(a,`Initialization of query '${mu(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&yE(n)}async function K5(t,e){const n=at(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Mq(t,e){const n=at(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&yE(n)}function Rq(t,e,n){const r=at(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function yE(t){t.Ca.forEach(e=>{e.next()})}var e_,tj;(tj=e_||(e_={})).Ma="default",tj.Cache="cache";class q5{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=hf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==e_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.key=e}}class G5{constructor(e){this.key=e}}class $q{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=wt(),this.mutatedKeys=wt(),this.eu=u5(e),this.tu=new Hu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new JC,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,d)=>{const h=i.get(f),g=U0(this.query,d)?d:null,b=!!h&&this.mutatedKeys.has(h.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;h&&g?h.data.isEqual(g.data)?b!==y&&(r.track({type:3,doc:g}),x=!0):this.su(h,g)||(r.track({type:2,doc:g}),x=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(o=!0)):!h&&g?(r.track({type:0,doc:g}),x=!0):h&&!g&&(r.track({type:1,doc:h}),x=!0,(l||c)&&(o=!0)),x&&(g?(a=a.add(g),s=y?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((f,d)=>function(g,b){const y=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je(20277,{Rt:x})}};return y(g)-y(b)}(f.type,d.type)||this.eu(f.doc,d.doc)),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new hf(this.query,e.tu,s,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new JC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=wt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new G5(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new H5(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=wt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return hf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vE="SyncEngine";class Lq{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zq{constructor(e){this.key=e,this.hu=!1}}class Vq{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new kc(o=>c5(o),B0),this.Iu=new Map,this.Eu=new Set,this.du=new vn(qe.comparator),this.Au=new Map,this.Ru=new oE,this.Vu={},this.mu=new Map,this.fu=df.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Fq(t,e,n=!0){const r=e3(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Y5(r,e,n,!0),i}async function Bq(t,e){const n=e3(t);await Y5(n,e,!0,!1)}async function Y5(t,e,n,r){const i=await lq(t.localStore,ea(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Uq(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&L5(t.remoteStore,i),o}async function Uq(t,e,n,r,i){t.pu=(d,h,g)=>async function(y,x,w,_){let E=x.view.ru(w);E.Cs&&(E=await HC(y.localStore,x.query,!1).then(({documents:S})=>x.view.ru(S,E)));const O=_&&_.targetChanges.get(x.targetId),A=_&&_.targetMismatches.get(x.targetId)!=null,P=x.view.applyChanges(E,y.isPrimaryClient,O,A);return rj(y,x.targetId,P.au),P.snapshot}(t,d,h,g);const s=await HC(t.localStore,e,!0),a=new $q(e,s.Qs),o=a.ru(s.documents),l=hm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=a.applyChanges(o,t.isPrimaryClient,l);rj(t,n,c.au);const f=new Lq(e,n,a);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function Wq(t,e,n){const r=at(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!B0(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Z1(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fE(r.remoteStore,i.targetId),t_(r,i.targetId)}).catch(Qf)):(t_(r,i.targetId),await Z1(r.localStore,i.targetId,!0))}async function Kq(t,e){const n=at(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fE(n.remoteStore,r.targetId))}async function qq(t,e,n){const r=Jq(t);try{const i=await function(a,o){const l=at(a),c=sn.now(),f=o.reduce((g,b)=>g.add(b.key),wt());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=Ya(),y=wt();return l.Ns.getEntries(g,f).next(x=>{b=x,b.forEach((w,_)=>{_.isValidDocument()||(y=y.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(x=>{d=x;const w=[];for(const _ of o){const E=lK(_,d.get(_.key).overlayedDocument);E!=null&&w.push(new cl(_.key,E,t5(E.value.mapValue),Lr.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,o)}).next(x=>{h=x;const w=x.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(g,x.batchId,w)})}).then(()=>({batchId:h.batchId,changes:d5(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let c=a.Vu[a.currentUser.toKey()];c||(c=new vn(xt)),c=c.insert(o,l),a.Vu[a.currentUser.toKey()]=c}(r,i.batchId,n),await mm(r,i.changes),await X0(r.remoteStore)}catch(i){const s=gE(i,"Failed to persist write");n.reject(s)}}async function X5(t,e){const n=at(t);try{const r=await sq(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Au.get(s);a&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Rt(a.hu,14607):i.removedDocuments.size>0&&(Rt(a.hu,42227),a.hu=!1))}),await mm(n,r,e)}catch(r){await Qf(r)}}function nj(t,e,n){const r=at(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=at(a);l.onlineState=o;let c=!1;l.queries.forEach((f,d)=>{for(const h of d.Sa)h.va(o)&&(c=!0)}),c&&yE(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Hq(t,e,n){const r=at(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new vn(qe.comparator);a=a.insert(s,Pr.newNoDocument(s,it.min()));const o=wt().add(s),l=new H0(it.min(),new Map,new vn(xt),a,o);await X5(r,l),r.du=r.du.remove(s),r.Au.delete(e),bE(r)}else await Z1(r.localStore,e,!1).then(()=>t_(r,e,n)).catch(Qf)}async function Gq(t,e){const n=at(t),r=e.batch.batchId;try{const i=await iq(n.localStore,e);Z5(n,r,null),Q5(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mm(n,i)}catch(i){await Qf(i)}}async function Yq(t,e,n){const r=at(t);try{const i=await function(a,o){const l=at(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(Rt(d!==null,37113),f=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,f,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>l.localDocuments.getDocuments(c,f))})}(r.localStore,e);Z5(r,e,n),Q5(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mm(r,i)}catch(i){await Qf(i)}}function Q5(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Z5(t,e,n){const r=at(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function t_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||J5(t,r)})}function J5(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fE(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),bE(t))}function rj(t,e,n){for(const r of n)r instanceof H5?(t.Ru.addReference(r.key,e),Xq(t,r)):r instanceof G5?(Le(vE,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||J5(t,r.key)):Je(19791,{wu:r})}function Xq(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Le(vE,"New document in limbo: "+n),t.Eu.add(r),bE(t))}function bE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new qe(Xt.fromString(e)),r=t.fu.next();t.Au.set(r,new zq(n)),t.du=t.du.insert(n,r),L5(t.remoteStore,new ko(ea(F0(n.path)),r,"TargetPurposeLimboResolution",L0.ce))}}async function mm(t,e,n){const r=at(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{a.push(r.pu(l,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=cE.As(l.targetId,c);s.push(d)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(l,c){const f=at(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>be.forEach(c,h=>be.forEach(h.Es,g=>f.persistence.referenceDelegate.addReference(d,h.targetId,g)).next(()=>be.forEach(h.ds,g=>f.persistence.referenceDelegate.removeReference(d,h.targetId,g)))))}catch(d){if(!Zf(d))throw d;Le(uE,"Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const g=f.Ms.get(h),b=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(b);f.Ms=f.Ms.insert(h,y)}}}(r.localStore,s))}async function Qq(t,e){const n=at(t);if(!n.currentUser.isEqual(e)){Le(vE,"User change. New user:",e.toKey());const r=await D5(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new Me(ve.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mm(n,r.Ls)}}function Zq(t,e){const n=at(t),r=n.Au.get(e);if(r&&r.hu)return wt().add(r.key);{let i=wt();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const o=n.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function e3(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=X5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hq.bind(null,e),e.Pu.H_=Mq.bind(null,e.eventManager),e.Pu.yu=Rq.bind(null,e.eventManager),e}function Jq(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Yq.bind(null,e),e}class ev{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=G0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return rq(this.persistence,new eq,e.initialUser,this.serializer)}Cu(e){return new N5(lE.mi,this.serializer)}Du(e){return new uq}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ev.provider={build:()=>new ev};class t3 extends ev{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Rt(this.persistence.referenceDelegate instanceof Zy,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new zK(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Jr.withCacheSize(this.cacheSizeBytes):Jr.DEFAULT;return new N5(r=>Zy.mi(r,n),this.serializer)}}class tv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nj(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qq.bind(null,this.syncEngine),await Iq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Dq}()}createDatastore(e){const n=G0(e.databaseInfo.databaseId),r=function(s){return new mq(s)}(e.databaseInfo);return function(s,a,o,l){return new bq(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new wq(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>nj(this.syncEngine,n,0),function(){return XC.v()?new XC:new fq}())}createSyncEngine(e,n){return function(i,s,a,o,l,c,f){const d=new Vq(i,s,a,o,l,c);return f&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=at(i);Le(vc,"RemoteStore shutting down."),s.Ea.add(5),await pm(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}tv.provider={build:()=>new tv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ga("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl="FirestoreClient";class eH{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zr.UNAUTHENTICATED,this.clientId=Q2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Le(rl,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Le(rl,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=gE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bx(t,e){t.asyncQueue.verifyOperationInProgress(),Le(rl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await D5(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ij(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tH(t);Le(rl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ZC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ZC(e.remoteStore,i)),t._onlineComponents=e}async function tH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Le(rl,"Using user provided OfflineComponentProvider");try{await Bx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;lp("Error using user provided cache. Falling back to memory cache: "+n),await Bx(t,new ev)}}else Le(rl,"Using default OfflineComponentProvider"),await Bx(t,new t3(void 0));return t._offlineComponents}async function r3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Le(rl,"Using user provided OnlineComponentProvider"),await ij(t,t._uninitializedComponentsProvider._online)):(Le(rl,"Using default OnlineComponentProvider"),await ij(t,new tv))),t._onlineComponents}function nH(t){return r3(t).then(e=>e.syncEngine)}async function n_(t){const e=await r3(t),n=e.eventManager;return n.onListen=Fq.bind(null,e.syncEngine),n.onUnlisten=Wq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Bq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Kq.bind(null,e.syncEngine),n}function rH(t,e,n={}){const r=new Ko;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const f=new n3({next:h=>{f.Nu(),a.enqueueAndForget(()=>K5(s,d));const g=h.docs.has(o);!g&&h.fromCache?c.reject(new Me(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&h.fromCache&&l&&l.source==="server"?c.reject(new Me(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new q5(F0(o.path),f,{includeMetadataChanges:!0,qa:!0});return W5(s,d)}(await n_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH="firestore.googleapis.com",aj=!0;class oj{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Me(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iH,this.ssl=aj}else this.host=e.host,this.ssl=e.ssl??aj;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=k5;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I5)throw new Me(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_W("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i3(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Me(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Me(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Me(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xE{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oj({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Me(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Me(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oj(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hW;switch(r.type){case"firstParty":return new gW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Me(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sj.get(n);r&&(Le("ComponentProvider","Removing Datastore"),sj.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ed(this.firestore,e,this._query)}}class Sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}toJSON(){return{type:Sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(um(n,Sn._jsonSchema))return new Sn(e,r||null,new qe(Xt.fromString(n.referencePath)))}}Sn._jsonSchemaVersion="firestore/documentReference/1.0",Sn._jsonSchema={type:Ln("string",Sn._jsonSchemaVersion),referencePath:Ln("string")};class qo extends ed{constructor(e,n,r){super(e,n,F0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new qe(e))}withConverter(e){return new qo(this.firestore,e,this._path)}}function Qr(t,e,...n){if(t=nr(t),W4("collection","path",e),t instanceof xE){const r=Xt.fromString(e,...n);return xC(r),new qo(t,null,r)}{if(!(t instanceof Sn||t instanceof qo))throw new Me(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xt.fromString(e,...n));return xC(r),new qo(t.firestore,null,r)}}function _r(t,e,...n){if(t=nr(t),arguments.length===1&&(e=Q2.newId()),W4("doc","path",e),t instanceof xE){const r=Xt.fromString(e,...n);return bC(r),new Sn(t,null,new qe(r))}{if(!(t instanceof Sn||t instanceof qo))throw new Me(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xt.fromString(e,...n));return bC(r),new Sn(t.firestore,t instanceof qo?t.converter:null,new qe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj="AsyncQueue";class cj{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R5(this,"async_queue_retry"),this._c=()=>{const r=Fx();r&&Le(lj,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Fx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Fx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ko;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zf(e))throw e;Le(lj,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ga("INTERNAL UNHANDLED ERROR: ",uj(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=mE.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Je(47125,{Pc:uj(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function uj(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Xa extends xE{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new cj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cj(e),this._firestoreClient=void 0,await e}}}function sH(t,e,n){n||(n=Ky);const r=g4(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(ip(s,e))return i;throw new Me(ve.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Me(ve.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I5)throw new Me(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&D0(e.host)&&CB(e.host),r.initialize({options:e,instanceIdentifier:n})}function Q0(t){if(t._terminated)throw new Me(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aH(t),t._firestoreClient}function aH(t){var r,i,s;const e=t._freezeSettings(),n=function(o,l,c,f){return new NW(o,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,i3(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new eH(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ki(mr.fromBase64String(e))}catch(n){throw new Me(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ki(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ki._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(um(e,Ki._jsonSchema))return Ki.fromBase64String(e.bytes)}}Ki._jsonSchemaVersion="firestore/bytes/1.0",Ki._jsonSchema={type:Ln("string",Ki._jsonSchemaVersion),bytes:Ln("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Me(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Me(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Me(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:na._jsonSchemaVersion}}static fromJSON(e){if(um(e,na._jsonSchema))return new na(e.latitude,e.longitude)}}na._jsonSchemaVersion="firestore/geoPoint/1.0",na._jsonSchema={type:Ln("string",na._jsonSchemaVersion),latitude:Ln("number"),longitude:Ln("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ra._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(um(e,ra._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ra(e.vectorValues);throw new Me(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ra._jsonSchemaVersion="firestore/vectorValue/1.0",ra._jsonSchema={type:Ln("string",ra._jsonSchemaVersion),vectorValues:Ln("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oH=/^__.*__$/;class lH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cl(e,this.data,this.fieldMask,n,this.fieldTransforms):new dm(e,this.data,n,this.fieldTransforms)}}class s3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function a3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je(40011,{Ac:t})}}class _E{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _E({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nv(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(a3(this.Ac)&&oH.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||G0(e)}Cc(e,n,r,i=!1){return new _E({Ac:e,methodName:n,Dc:r,path:ur.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ym(t){const e=t._freezeSettings(),n=G0(t._databaseId);return new cH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SE(t,e,n,r,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);EE("Data must be an object, but it was:",a,r);const o=c3(r,a);let l,c;if(s.merge)l=new wi(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const d of s.mergeFields){const h=r_(e,d,n);if(!a.contains(h))throw new Me(ve.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);f3(f,h)||f.push(h)}l=new wi(f),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new lH(new ti(o),l,c)}class Z0 extends wE{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Z0}}function o3(t,e,n,r){const i=t.Cc(1,e,n);EE("Data must be an object, but it was:",i,r);const s=[],a=ti.empty();ll(r,(l,c)=>{const f=AE(e,l,n);c=nr(c);const d=i.yc(f);if(c instanceof Z0)s.push(f);else{const h=vm(c,d);h!=null&&(s.push(f),a.set(f,h))}});const o=new wi(s);return new s3(a,o,i.fieldTransforms)}function l3(t,e,n,r,i,s){const a=t.Cc(1,e,n),o=[r_(e,r,n)],l=[i];if(s.length%2!=0)throw new Me(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(r_(e,s[h])),l.push(s[h+1]);const c=[],f=ti.empty();for(let h=o.length-1;h>=0;--h)if(!f3(c,o[h])){const g=o[h];let b=l[h];b=nr(b);const y=a.yc(g);if(b instanceof Z0)c.push(g);else{const x=vm(b,y);x!=null&&(c.push(g),f.set(g,x))}}const d=new wi(c);return new s3(f,d,a.fieldTransforms)}function uH(t,e,n,r=!1){return vm(n,t.Cc(r?4:3,e))}function vm(t,e){if(u3(t=nr(t)))return EE("Unsupported field value:",e,t),c3(t,e);if(t instanceof wE)return function(r,i){if(!a3(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=vm(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=nr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=sn.fromDate(r);return{timestampValue:Qy(i.serializer,s)}}if(r instanceof sn){const s=new sn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qy(i.serializer,s)}}if(r instanceof na)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ki)return{bytesValue:E5(i.serializer,r._byteString)};if(r instanceof Sn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:aE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ra)return function(a,o){return{mapValue:{fields:{[J4]:{stringValue:e5},[qy]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return rE(o.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${$0(r)}`)}(t,e)}function c3(t,e){const n={};return H4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ll(t,(r,i)=>{const s=vm(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function u3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof sn||t instanceof na||t instanceof Ki||t instanceof Sn||t instanceof wE||t instanceof ra)}function EE(t,e,n){if(!u3(n)||!K4(n)){const r=$0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function r_(t,e,n){if((e=nr(e))instanceof gm)return e._internalPath;if(typeof e=="string")return AE(t,e);throw nv("Field path arguments must be of type string or ",t,!1,void 0,n)}const fH=new RegExp("[~\\*/\\[\\]]");function AE(t,e,n){if(e.search(fH)>=0)throw nv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gm(...e.split("."))._internalPath}catch{throw nv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nv(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Me(ve.INVALID_ARGUMENT,o+t+l)}function f3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(TE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dH extends d3{data(){return super.data()}}function TE(t,e){return typeof e=="string"?AE(t,e):e instanceof gm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Me(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PE{}class pH extends PE{}function mH(t,e,...n){let r=[];e instanceof PE&&r.push(e),r=r.concat(n),function(s){const a=s.filter(l=>l instanceof CE).length,o=s.filter(l=>l instanceof J0).length;if(a>1||a>0&&o>0)throw new Me(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class J0 extends pH{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new J0(e,n,r)}_apply(e){const n=this._parse(e);return h3(e._query,n),new ed(e.firestore,e.converter,q1(e._query,n))}_parse(e){const n=ym(e.firestore);return function(s,a,o,l,c,f,d){let h;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Me(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){hj(d,f);const b=[];for(const y of d)b.push(dj(l,s,y));h={arrayValue:{values:b}}}else h=dj(l,s,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||hj(d,f),h=uH(o,a,d,f==="in"||f==="not-in");return Mn.create(c,f,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function gH(t,e,n){const r=e,i=TE("where",t);return J0._create(i,r,n)}class CE extends PE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new CE(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ks.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)h3(a,l),a=q1(a,l)}(e._query,n),new ed(e.firestore,e.converter,q1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function dj(t,e,n){if(typeof(n=nr(n))=="string"){if(n==="")throw new Me(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!l5(e)&&n.indexOf("/")!==-1)throw new Me(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Xt.fromString(n));if(!qe.isDocumentKey(r))throw new Me(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CC(t,new qe(r))}if(n instanceof Sn)return CC(t,n._key);throw new Me(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$0(n)}.`)}function hj(t,e){if(!Array.isArray(t)||t.length===0)throw new Me(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h3(t,e){const n=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Me(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Me(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yH{convertValue(e,n="none"){switch(tl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(el(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Je(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ll(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[qy].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>Pn(a.doubleValue));return new ra(n)}convertGeoPoint(e){return new na(Pn(e.latitude),Pn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=V0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(up(e));default:return null}}convertTimestamp(e){const n=Jo(e);return new sn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Xt.fromString(e);Rt(O5(r),9688,{name:e});const i=new fp(r.get(1),r.get(3)),s=new qe(r.popFirst(5));return i.isEqual(n)||Ga(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class uh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oc extends d3{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(TE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=oc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}oc._jsonSchemaVersion="firestore/documentSnapshot/1.0",oc._jsonSchema={type:Ln("string",oc._jsonSchemaVersion),bundleSource:Ln("string","DocumentSnapshot"),bundleName:Ln("string"),bundle:Ln("string")};class uy extends oc{data(e={}){return super.data(e)}}class Gu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new uy(this._firestore,this._userDataWriter,r.key,r,new uh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Me(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new uy(i._firestore,i._userDataWriter,o.doc.key,o.doc,new uh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new uy(i._firestore,i._userDataWriter,o.doc.key,o.doc,new uh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),f=a.indexOf(o.doc.key)),{type:vH(o.type),doc:l,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Q2.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(t){t=Xi(t,Sn);const e=Xi(t.firestore,Xa);return rH(Q0(e),t._key).then(n=>m3(e,t,n))}Gu._jsonSchemaVersion="firestore/querySnapshot/1.0",Gu._jsonSchema={type:Ln("string",Gu._jsonSchemaVersion),bundleSource:Ln("string","QuerySnapshot"),bundleName:Ln("string"),bundle:Ln("string")};class p3 extends yH{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,n)}}function xH(t,e,n){t=Xi(t,Sn);const r=Xi(t.firestore,Xa),i=jE(t.converter,e,n);return bm(r,[SE(ym(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Lr.none())])}function Eg(t,e,n,...r){t=Xi(t,Sn);const i=Xi(t.firestore,Xa),s=ym(i);let a;return a=typeof(e=nr(e))=="string"||e instanceof gm?l3(s,"updateDoc",t._key,e,n,r):o3(s,"updateDoc",t._key,e),bm(i,[a.toMutation(t._key,Lr.exists(!0))])}function Ag(t){return bm(Xi(t.firestore,Xa),[new q0(t._key,Lr.none())])}function Ea(t,e){const n=Xi(t.firestore,Xa),r=_r(t),i=jE(t.converter,e);return bm(n,[SE(ym(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Lr.exists(!1))]).then(()=>r)}function wH(t,...e){var l,c,f;t=nr(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||fj(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(fj(e[r])){const d=e[r];e[r]=(l=d.next)==null?void 0:l.bind(d),e[r+1]=(c=d.error)==null?void 0:c.bind(d),e[r+2]=(f=d.complete)==null?void 0:f.bind(d)}let s,a,o;if(t instanceof Sn)a=Xi(t.firestore,Xa),o=F0(t._key.path),s={next:d=>{e[r]&&e[r](m3(a,t,d))},error:e[r+1],complete:e[r+2]};else{const d=Xi(t,ed);a=Xi(d.firestore,Xa),o=d._query;const h=new p3(a);s={next:g=>{e[r]&&e[r](new Gu(a,h,d,g))},error:e[r+1],complete:e[r+2]},hH(t._query)}return function(h,g,b,y){const x=new n3(y),w=new q5(g,x,b);return h.asyncQueue.enqueueAndForget(async()=>W5(await n_(h),w)),()=>{x.Nu(),h.asyncQueue.enqueueAndForget(async()=>K5(await n_(h),w))}}(Q0(a),o,i,s)}function bm(t,e){return function(r,i){const s=new Ko;return r.asyncQueue.enqueueAndForget(async()=>qq(await nH(r),i,s)),s.promise}(Q0(t),e)}function m3(t,e,n){const r=n.docs.get(e._key),i=new p3(t);return new oc(t,i,e._key,r,new uh(n.hasPendingWrites,n.fromCache),e.converter)}class _H{constructor(e){this.kind="memory",this._onlineComponentProvider=tv.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new t3(void 0)}}toJSON(){return{kind:this.kind}}}function SH(t){return new _H(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ym(e)}set(e,n,r){this._verifyNotCommitted();const i=Ux(e,this._firestore),s=jE(i.converter,n,r),a=SE(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Lr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ux(e,this._firestore);let a;return a=typeof(n=nr(n))=="string"||n instanceof gm?l3(this._dataReader,"WriteBatch.update",s._key,n,r,i):o3(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ux(e,this._firestore);return this._mutations=this._mutations.concat(new q0(n._key,Lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ux(t,e){if((t=nr(t)).firestore!==e)throw new Me(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t){return Q0(t=Xi(t,Xa)),new EH(t,e=>bm(t,e))}(function(e,n=!0){(function(i){Xf=i})(M0),of(new gc("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new Xa(new pW(r.getProvider("auth-internal")),new yW(a,r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Me(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fp(c.options.projectId,f)}(a,i),a);return s={useFetchStreams:n,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Uo(mC,gC,e),Uo(mC,gC,"esm2020")})();const AH={apiKey:"AIzaSyCq3MZURc1tNUbpK7BDzKZKQoh8C3twzmA",authDomain:"lactokeeper.firebaseapp.com",projectId:"lactokeeper",storageBucket:"https://www.google.com/search?q=lactokeeper.appspot.com",messagingSenderId:"437430613715",appId:"1:437430613715:web:b4e56c7a0698c719ae8626"},g3=U7(AH),pf=zU(g3,{persistence:rW}),Lt=sH(g3,{localCache:SH()}),y3=L.createContext({currentUser:null,isLoading:!0}),v3=()=>L.useContext(y3),TH=({children:t})=>{const[e,n]=L.useState(null),[r,i]=L.useState(!0);L.useEffect(()=>eW(pf,o=>{n(o),setTimeout(()=>i(!1),200)}),[]);const s={currentUser:e,isLoading:r};return u.jsx(y3.Provider,{value:s,children:t})};var b3={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(vu,function(){var n=function(m,v){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,I){C.__proto__=I}||function(C,I){for(var R in I)Object.prototype.hasOwnProperty.call(I,R)&&(C[R]=I[R])})(m,v)},r=function(){return(r=Object.assign||function(m){for(var v,C=1,I=arguments.length;C<I;C++)for(var R in v=arguments[C])Object.prototype.hasOwnProperty.call(v,R)&&(m[R]=v[R]);return m}).apply(this,arguments)};function i(m,v,C){for(var I,R=0,V=v.length;R<V;R++)!I&&R in v||((I=I||Array.prototype.slice.call(v,0,R))[R]=v[R]);return m.concat(I||Array.prototype.slice.call(v))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:vu,a=Object.keys,o=Array.isArray;function l(m,v){return typeof v!="object"||a(v).forEach(function(C){m[C]=v[C]}),m}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var c=Object.getPrototypeOf,f={}.hasOwnProperty;function d(m,v){return f.call(m,v)}function h(m,v){typeof v=="function"&&(v=v(c(m))),(typeof Reflect>"u"?a:Reflect.ownKeys)(v).forEach(function(C){b(m,C,v[C])})}var g=Object.defineProperty;function b(m,v,C,I){g(m,v,l(C&&d(C,"get")&&typeof C.get=="function"?{get:C.get,set:C.set,configurable:!0}:{value:C,configurable:!0,writable:!0},I))}function y(m){return{from:function(v){return m.prototype=Object.create(v.prototype),b(m.prototype,"constructor",m),{extend:h.bind(null,m.prototype)}}}}var x=Object.getOwnPropertyDescriptor,w=[].slice;function _(m,v,C){return w.call(m,v,C)}function E(m,v){return v(m)}function O(m){if(!m)throw new Error("Assertion Failed")}function A(m){s.setImmediate?setImmediate(m):setTimeout(m,0)}function P(m,v){if(typeof v=="string"&&d(m,v))return m[v];if(!v)return m;if(typeof v!="string"){for(var C=[],I=0,R=v.length;I<R;++I){var V=P(m,v[I]);C.push(V)}return C}var U=v.indexOf(".");if(U!==-1){var W=m[v.substr(0,U)];return W==null?void 0:P(W,v.substr(U+1))}}function S(m,v,C){if(m&&v!==void 0&&!("isFrozen"in Object&&Object.isFrozen(m)))if(typeof v!="string"&&"length"in v){O(typeof C!="string"&&"length"in C);for(var I=0,R=v.length;I<R;++I)S(m,v[I],C[I])}else{var V,U,W=v.indexOf(".");W!==-1?(V=v.substr(0,W),(U=v.substr(W+1))===""?C===void 0?o(m)&&!isNaN(parseInt(V))?m.splice(V,1):delete m[V]:m[V]=C:S(W=!(W=m[V])||!d(m,V)?m[V]={}:W,U,C)):C===void 0?o(m)&&!isNaN(parseInt(v))?m.splice(v,1):delete m[v]:m[v]=C}}function T(m){var v,C={};for(v in m)d(m,v)&&(C[v]=m[v]);return C}var k=[].concat;function z(m){return k.apply([],m)}var Vn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(z([8,16,32,64].map(function(m){return["Int","Uint","Float"].map(function(v){return v+m+"Array"})}))).filter(function(m){return s[m]}),N=new Set(Vn.map(function(m){return s[m]})),$=null;function M(m){return $=new WeakMap,m=function v(C){if(!C||typeof C!="object")return C;var I=$.get(C);if(I)return I;if(o(C)){I=[],$.set(C,I);for(var R=0,V=C.length;R<V;++R)I.push(v(C[R]))}else if(N.has(C.constructor))I=C;else{var U,W=c(C);for(U in I=W===Object.prototype?{}:Object.create(W),$.set(C,I),C)d(C,U)&&(I[U]=v(C[U]))}return I}(m),$=null,m}var Y={}.toString;function q(m){return Y.call(m).slice(8,-1)}var ie=typeof Symbol<"u"?Symbol.iterator:"@@iterator",le=typeof ie=="symbol"?function(m){var v;return m!=null&&(v=m[ie])&&v.apply(m)}:function(){return null};function Q(m,v){return v=m.indexOf(v),0<=v&&m.splice(v,1),0<=v}var G={};function he(m){var v,C,I,R;if(arguments.length===1){if(o(m))return m.slice();if(this===G&&typeof m=="string")return[m];if(R=le(m)){for(C=[];!(I=R.next()).done;)C.push(I.value);return C}if(m==null)return[m];if(typeof(v=m.length)!="number")return[m];for(C=new Array(v);v--;)C[v]=m[v];return C}for(v=arguments.length,C=new Array(v);v--;)C[v]=arguments[v];return C}var ce=typeof Symbol<"u"?function(m){return m[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},en=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ri=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(en),we={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ke(m,v){this.name=m,this.message=v}function Ue(m,v){return m+". Errors: "+Object.keys(v).map(function(C){return v[C].toString()}).filter(function(C,I,R){return R.indexOf(C)===I}).join(`
`)}function ct(m,v,C,I){this.failures=v,this.failedKeys=I,this.successCount=C,this.message=Ue(m,v)}function ot(m,v){this.name="BulkError",this.failures=Object.keys(v).map(function(C){return v[C]}),this.failuresByPos=v,this.message=Ue(m,this.failures)}y(ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),y(ct).from(ke),y(ot).from(ke);var Ce=Ri.reduce(function(m,v){return m[v]=v+"Error",m},{}),Ye=ke,oe=Ri.reduce(function(m,v){var C=v+"Error";function I(R,V){this.name=C,R?typeof R=="string"?(this.message="".concat(R).concat(V?`
 `+V:""),this.inner=V||null):typeof R=="object"&&(this.message="".concat(R.name," ").concat(R.message),this.inner=R):(this.message=we[v]||C,this.inner=null)}return y(I).from(Ye),m[v]=I,m},{});oe.Syntax=SyntaxError,oe.Type=TypeError,oe.Range=RangeError;var Be=en.reduce(function(m,v){return m[v+"Error"]=oe[v],m},{}),We=Ri.reduce(function(m,v){return["Syntax","Type","Range"].indexOf(v)===-1&&(m[v+"Error"]=oe[v]),m},{});function ue(){}function ht(m){return m}function ye(m,v){return m==null||m===ht?v:function(C){return v(m(C))}}function xe(m,v){return function(){m.apply(this,arguments),v.apply(this,arguments)}}function Fe(m,v){return m===ue?v:function(){var C=m.apply(this,arguments);C!==void 0&&(arguments[0]=C);var I=this.onsuccess,R=this.onerror;this.onsuccess=null,this.onerror=null;var V=v.apply(this,arguments);return I&&(this.onsuccess=this.onsuccess?xe(I,this.onsuccess):I),R&&(this.onerror=this.onerror?xe(R,this.onerror):R),V!==void 0?V:C}}function Tt(m,v){return m===ue?v:function(){m.apply(this,arguments);var C=this.onsuccess,I=this.onerror;this.onsuccess=this.onerror=null,v.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?xe(C,this.onsuccess):C),I&&(this.onerror=this.onerror?xe(I,this.onerror):I)}}function et(m,v){return m===ue?v:function(C){var I=m.apply(this,arguments);l(C,I);var R=this.onsuccess,V=this.onerror;return this.onsuccess=null,this.onerror=null,C=v.apply(this,arguments),R&&(this.onsuccess=this.onsuccess?xe(R,this.onsuccess):R),V&&(this.onerror=this.onerror?xe(V,this.onerror):V),I===void 0?C===void 0?void 0:C:l(I,C)}}function lt(m,v){return m===ue?v:function(){return v.apply(this,arguments)!==!1&&m.apply(this,arguments)}}function Ge(m,v){return m===ue?v:function(){var C=m.apply(this,arguments);if(C&&typeof C.then=="function"){for(var I=this,R=arguments.length,V=new Array(R);R--;)V[R]=arguments[R];return C.then(function(){return v.apply(I,V)})}return v.apply(this,arguments)}}We.ModifyError=ct,We.DexieError=ke,We.BulkError=ot;var He=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Pt(m){He=m}var on={},dn=100,Vn=typeof Promise>"u"?[]:function(){var m=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[m,c(m),m];var v=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[v,c(v),m]}(),en=Vn[0],Ri=Vn[1],Vn=Vn[2],Ri=Ri&&Ri.then,Ur=en&&en.constructor,pa=!!Vn,ma=function(m,v){Ds.push([m,v]),ga&&(queueMicrotask(wd),ga=!1)},bl=!0,ga=!0,Oi=[],ki=[],ya=ht,Wr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ue,pgp:!1,env:{},finalize:ue},$e=Wr,Ds=[],kr=0,tt=[];function _e(m){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var v=this._PSD=$e;if(typeof m!="function"){if(m!==on)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&jn(this,this._value))}this._state=null,this._value=null,++v.ref,function C(I,R){try{R(function(V){if(I._state===null){if(V===I)throw new TypeError("A promise cannot be resolved with itself.");var U=I._lib&&ir();V&&typeof V.then=="function"?C(I,function(W,H){V instanceof _e?V._then(W,H):V.then(W,H)}):(I._state=!0,I._value=V,mt(I)),U&&Ii()}},jn.bind(null,I))}catch(V){jn(I,V)}}(this,m)}var Ze={get:function(){var m=$e,v=ui;function C(I,R){var V=this,U=!m.global&&(m!==$e||v!==ui),W=U&&!Ni(),H=new _e(function(Z,ee){is(V,new nt(Ed(I,m,U,W),Ed(R,m,U,W),Z,ee,m))});return this._consoleTask&&(H._consoleTask=this._consoleTask),H}return C.prototype=on,C},set:function(m){b(this,"then",m&&m.prototype===on?Ze:{get:function(){return m},set:Ze.set})}};function nt(m,v,C,I,R){this.onFulfilled=typeof m=="function"?m:null,this.onRejected=typeof v=="function"?v:null,this.resolve=C,this.reject=I,this.psd=R}function jn(m,v){var C,I;ki.push(v),m._state===null&&(C=m._lib&&ir(),v=ya(v),m._state=!1,m._value=v,I=m,Oi.some(function(R){return R._value===I._value})||Oi.push(I),mt(m),C&&Ii())}function mt(m){var v=m._listeners;m._listeners=[];for(var C=0,I=v.length;C<I;++C)is(m,v[C]);var R=m._PSD;--R.ref||R.finalize(),kr===0&&(++kr,ma(function(){--kr==0&&_d()},[]))}function is(m,v){if(m._state!==null){var C=m._state?v.onFulfilled:v.onRejected;if(C===null)return(m._state?v.resolve:v.reject)(m._value);++v.psd.ref,++kr,ma(xd,[C,m,v])}else m._listeners.push(v)}function xd(m,v,C){try{var I,R=v._value;!v._state&&ki.length&&(ki=[]),I=He&&v._consoleTask?v._consoleTask.run(function(){return m(R)}):m(R),v._state||ki.indexOf(R)!==-1||function(V){for(var U=Oi.length;U;)if(Oi[--U]._value===V._value)return Oi.splice(U,1)}(v),C.resolve(I)}catch(V){C.reject(V)}finally{--kr==0&&_d(),--C.psd.ref||C.psd.finalize()}}function wd(){Di(Wr,function(){ir()&&Ii()})}function ir(){var m=bl;return ga=bl=!1,m}function Ii(){var m,v,C;do for(;0<Ds.length;)for(m=Ds,Ds=[],C=m.length,v=0;v<C;++v){var I=m[v];I[0].apply(null,I[1])}while(0<Ds.length);ga=bl=!0}function _d(){var m=Oi;Oi=[],m.forEach(function(I){I._PSD.onunhandled.call(null,I._value,I)});for(var v=tt.slice(0),C=v.length;C;)v[--C]()}function va(m){return new _e(on,!1,m)}function Kt(m,v){var C=$e;return function(){var I=ir(),R=$e;try{return as(C,!0),m.apply(this,arguments)}catch(V){v&&v(V)}finally{as(R,!1),I&&Ii()}}}h(_e.prototype,{then:Ze,_then:function(m,v){is(this,new nt(null,null,m,v,$e))},catch:function(m){if(arguments.length===1)return this.then(null,m);var v=m,C=arguments[1];return typeof v=="function"?this.then(null,function(I){return(I instanceof v?C:va)(I)}):this.then(null,function(I){return(I&&I.name===v?C:va)(I)})},finally:function(m){return this.then(function(v){return _e.resolve(m()).then(function(){return v})},function(v){return _e.resolve(m()).then(function(){return va(v)})})},timeout:function(m,v){var C=this;return m<1/0?new _e(function(I,R){var V=setTimeout(function(){return R(new oe.Timeout(v))},m);C.then(I,R).finally(clearTimeout.bind(null,V))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&b(_e.prototype,Symbol.toStringTag,"Dexie.Promise"),Wr.env=Vm(),h(_e,{all:function(){var m=he.apply(null,arguments).map(xl);return new _e(function(v,C){m.length===0&&v([]);var I=m.length;m.forEach(function(R,V){return _e.resolve(R).then(function(U){m[V]=U,--I||v(m)},C)})})},resolve:function(m){return m instanceof _e?m:m&&typeof m.then=="function"?new _e(function(v,C){m.then(v,C)}):new _e(on,!0,m)},reject:va,race:function(){var m=he.apply(null,arguments).map(xl);return new _e(function(v,C){m.map(function(I){return _e.resolve(I).then(v,C)})})},PSD:{get:function(){return $e},set:function(m){return $e=m}},totalEchoes:{get:function(){return ui}},newPSD:ss,usePSD:Di,scheduler:{get:function(){return ma},set:function(m){ma=m}},rejectionMapper:{get:function(){return ya},set:function(m){ya=m}},follow:function(m,v){return new _e(function(C,I){return ss(function(R,V){var U=$e;U.unhandleds=[],U.onunhandled=V,U.finalize=xe(function(){var W,H=this;W=function(){H.unhandleds.length===0?R():V(H.unhandleds[0])},tt.push(function Z(){W(),tt.splice(tt.indexOf(Z),1)}),++kr,ma(function(){--kr==0&&_d()},[])},U.finalize),m()},v,C,I)})}}),Ur&&(Ur.allSettled&&b(_e,"allSettled",function(){var m=he.apply(null,arguments).map(xl);return new _e(function(v){m.length===0&&v([]);var C=m.length,I=new Array(C);m.forEach(function(R,V){return _e.resolve(R).then(function(U){return I[V]={status:"fulfilled",value:U}},function(U){return I[V]={status:"rejected",reason:U}}).then(function(){return--C||v(I)})})})}),Ur.any&&typeof AggregateError<"u"&&b(_e,"any",function(){var m=he.apply(null,arguments).map(xl);return new _e(function(v,C){m.length===0&&C(new AggregateError([]));var I=m.length,R=new Array(I);m.forEach(function(V,U){return _e.resolve(V).then(function(W){return v(W)},function(W){R[U]=W,--I||C(new AggregateError(R))})})})}),Ur.withResolvers&&(_e.withResolvers=Ur.withResolvers));var En={awaits:0,echoes:0,id:0},Sd=0,Ms=[],Wc=0,ui=0,zm=0;function ss(m,v,C,I){var R=$e,V=Object.create(R);return V.parent=R,V.ref=0,V.global=!1,V.id=++zm,Wr.env,V.env=pa?{Promise:_e,PromiseProp:{value:_e,configurable:!0,writable:!0},all:_e.all,race:_e.race,allSettled:_e.allSettled,any:_e.any,resolve:_e.resolve,reject:_e.reject}:{},v&&l(V,v),++R.ref,V.finalize=function(){--this.parent.ref||this.parent.finalize()},I=Di(V,m,C,I),V.ref===0&&V.finalize(),I}function Rs(){return En.id||(En.id=++Sd),++En.awaits,En.echoes+=dn,En.id}function Ni(){return!!En.awaits&&(--En.awaits==0&&(En.id=0),En.echoes=En.awaits*dn,!0)}function xl(m){return En.echoes&&m&&m.constructor===Ur?(Rs(),m.then(function(v){return Ni(),v},function(v){return Ni(),qt(v)})):m}function Jb(){var m=Ms[Ms.length-1];Ms.pop(),as(m,!1)}function as(m,v){var C,I=$e;(v?!En.echoes||Wc++&&m===$e:!Wc||--Wc&&m===$e)||queueMicrotask(v?(function(R){++ui,En.echoes&&--En.echoes!=0||(En.echoes=En.awaits=En.id=0),Ms.push($e),as(R,!0)}).bind(null,m):Jb),m!==$e&&($e=m,I===Wr&&(Wr.env=Vm()),pa&&(C=Wr.env.Promise,v=m.env,(I.global||m.global)&&(Object.defineProperty(s,"Promise",v.PromiseProp),C.all=v.all,C.race=v.race,C.resolve=v.resolve,C.reject=v.reject,v.allSettled&&(C.allSettled=v.allSettled),v.any&&(C.any=v.any))))}function Vm(){var m=s.Promise;return pa?{Promise:m,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:m.all,race:m.race,allSettled:m.allSettled,any:m.any,resolve:m.resolve,reject:m.reject}:{}}function Di(m,v,C,I,R){var V=$e;try{return as(m,!0),v(C,I,R)}finally{as(V,!1)}}function Ed(m,v,C,I){return typeof m!="function"?m:function(){var R=$e;C&&Rs(),as(v,!0);try{return m.apply(this,arguments)}finally{as(R,!1),I&&queueMicrotask(Ni)}}}function wl(m){Promise===Ur&&En.echoes===0?Wc===0?m():enqueueNativeMicroTask(m):setTimeout(m,0)}(""+Ri).indexOf("[native code]")===-1&&(Rs=Ni=ue);var qt=_e.reject,Ir="￿",fi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Fm="String expected.",ba=[],_l="__dbnames",Kc="readonly",Sl="readwrite";function os(m,v){return m?v?function(){return m.apply(this,arguments)&&v.apply(this,arguments)}:m:v}var Ad={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function El(m){return typeof m!="string"||/\./.test(m)?function(v){return v}:function(v){return v[m]===void 0&&m in v&&delete(v=M(v))[m],v}}function Td(){throw oe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function yt(m,v){try{var C=ls(m),I=ls(v);if(C!==I)return C==="Array"?1:I==="Array"?-1:C==="binary"?1:I==="binary"?-1:C==="string"?1:I==="string"?-1:C==="Date"?1:I!=="Date"?NaN:-1;switch(C){case"number":case"Date":case"string":return v<m?1:m<v?-1:0;case"binary":return function(R,V){for(var U=R.length,W=V.length,H=U<W?U:W,Z=0;Z<H;++Z)if(R[Z]!==V[Z])return R[Z]<V[Z]?-1:1;return U===W?0:U<W?-1:1}(di(m),di(v));case"Array":return function(R,V){for(var U=R.length,W=V.length,H=U<W?U:W,Z=0;Z<H;++Z){var ee=yt(R[Z],V[Z]);if(ee!==0)return ee}return U===W?0:U<W?-1:1}(m,v)}}catch{}return NaN}function ls(m){var v=typeof m;return v!="object"?v:ArrayBuffer.isView(m)?"binary":(m=q(m),m==="ArrayBuffer"?"binary":m)}function di(m){return m instanceof Uint8Array?m:ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength):new Uint8Array(m)}function $s(m,v,C){var I=m.schema.yProps;return I?(v&&0<C.numFailures&&(v=v.filter(function(R,V){return!C.failures[V]})),Promise.all(I.map(function(R){return R=R.updatesTable,v?m.db.table(R).where("k").anyOf(v).delete():m.db.table(R).clear()})).then(function(){return C})):C}var lo=($t.prototype._trans=function(m,v,C){var I=this._tx||$e.trans,R=this.name,V=He&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(m==="readonly"?"read":"write"," ").concat(this.name));function U(Z,ee,K){if(!K.schema[R])throw new oe.NotFound("Table "+R+" not part of transaction");return v(K.idbtrans,K)}var W=ir();try{var H=I&&I.db._novip===this.db._novip?I===$e.trans?I._promise(m,U,C):ss(function(){return I._promise(m,U,C)},{trans:I,transless:$e.transless||$e}):function Z(ee,K,re,X){if(ee.idbdb&&(ee._state.openComplete||$e.letThrough||ee._vip)){var J=ee._createTransaction(K,re,ee._dbSchema);try{J.create(),ee._state.PR1398_maxLoop=3}catch(ne){return ne.name===Ce.InvalidState&&ee.isOpen()&&0<--ee._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ee.close({disableAutoOpen:!1}),ee.open().then(function(){return Z(ee,K,re,X)})):qt(ne)}return J._promise(K,function(ne,te){return ss(function(){return $e.trans=J,X(ne,te,J)})}).then(function(ne){if(K==="readwrite")try{J.idbtrans.commit()}catch{}return K==="readonly"?ne:J._completion.then(function(){return ne})})}if(ee._state.openComplete)return qt(new oe.DatabaseClosed(ee._state.dbOpenError));if(!ee._state.isBeingOpened){if(!ee._state.autoOpen)return qt(new oe.DatabaseClosed);ee.open().catch(ue)}return ee._state.dbReadyPromise.then(function(){return Z(ee,K,re,X)})}(this.db,m,[this.name],U);return V&&(H._consoleTask=V,H=H.catch(function(Z){return console.trace(Z),qt(Z)})),H}finally{W&&Ii()}},$t.prototype.get=function(m,v){var C=this;return m&&m.constructor===Object?this.where(m).first(v):m==null?qt(new oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(I){return C.core.get({trans:I,key:m}).then(function(R){return C.hook.reading.fire(R)})}).then(v)},$t.prototype.where=function(m){if(typeof m=="string")return new this.db.WhereClause(this,m);if(o(m))return new this.db.WhereClause(this,"[".concat(m.join("+"),"]"));var v=a(m);if(v.length===1)return this.where(v[0]).equals(m[v[0]]);var C=this.schema.indexes.concat(this.schema.primKey).filter(function(W){if(W.compound&&v.every(function(Z){return 0<=W.keyPath.indexOf(Z)})){for(var H=0;H<v.length;++H)if(v.indexOf(W.keyPath[H])===-1)return!1;return!0}return!1}).sort(function(W,H){return W.keyPath.length-H.keyPath.length})[0];if(C&&this.db._maxKey!==Ir){var V=C.keyPath.slice(0,v.length);return this.where(V).equals(V.map(function(H){return m[H]}))}!C&&He&&console.warn("The query ".concat(JSON.stringify(m)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(v.join("+"),"]"));var I=this.schema.idxByName;function R(W,H){return yt(W,H)===0}var U=v.reduce(function(K,H){var Z=K[0],ee=K[1],K=I[H],re=m[H];return[Z||K,Z||!K?os(ee,K&&K.multi?function(X){return X=P(X,H),o(X)&&X.some(function(J){return R(re,J)})}:function(X){return R(re,P(X,H))}):ee]},[null,null]),V=U[0],U=U[1];return V?this.where(V.name).equals(m[V.keyPath]).filter(U):C?this.filter(U):this.where(v).equals("")},$t.prototype.filter=function(m){return this.toCollection().and(m)},$t.prototype.count=function(m){return this.toCollection().count(m)},$t.prototype.offset=function(m){return this.toCollection().offset(m)},$t.prototype.limit=function(m){return this.toCollection().limit(m)},$t.prototype.each=function(m){return this.toCollection().each(m)},$t.prototype.toArray=function(m){return this.toCollection().toArray(m)},$t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},$t.prototype.orderBy=function(m){return new this.db.Collection(new this.db.WhereClause(this,o(m)?"[".concat(m.join("+"),"]"):m))},$t.prototype.reverse=function(){return this.toCollection().reverse()},$t.prototype.mapToClass=function(m){var v,C=this.db,I=this.name;function R(){return v!==null&&v.apply(this,arguments)||this}(this.schema.mappedClass=m).prototype instanceof Td&&(function(H,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");function ee(){this.constructor=H}n(H,Z),H.prototype=Z===null?Object.create(Z):(ee.prototype=Z.prototype,new ee)}(R,v=m),Object.defineProperty(R.prototype,"db",{get:function(){return C},enumerable:!1,configurable:!0}),R.prototype.table=function(){return I},m=R);for(var V=new Set,U=m.prototype;U;U=c(U))Object.getOwnPropertyNames(U).forEach(function(H){return V.add(H)});function W(H){if(!H)return H;var Z,ee=Object.create(m.prototype);for(Z in H)if(!V.has(Z))try{ee[Z]=H[Z]}catch{}return ee}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=W,this.hook("reading",W),m},$t.prototype.defineClass=function(){return this.mapToClass(function(m){l(this,m)})},$t.prototype.add=function(m,v){var C=this,I=this.schema.primKey,R=I.auto,V=I.keyPath,U=m;return V&&R&&(U=El(V)(m)),this._trans("readwrite",function(W){return C.core.mutate({trans:W,type:"add",keys:v!=null?[v]:null,values:[U]})}).then(function(W){return W.numFailures?_e.reject(W.failures[0]):W.lastResult}).then(function(W){if(V)try{S(m,V,W)}catch{}return W})},$t.prototype.update=function(m,v){return typeof m!="object"||o(m)?this.where(":id").equals(m).modify(v):(m=P(m,this.schema.primKey.keyPath),m===void 0?qt(new oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(m).modify(v))},$t.prototype.put=function(m,v){var C=this,I=this.schema.primKey,R=I.auto,V=I.keyPath,U=m;return V&&R&&(U=El(V)(m)),this._trans("readwrite",function(W){return C.core.mutate({trans:W,type:"put",values:[U],keys:v!=null?[v]:null})}).then(function(W){return W.numFailures?_e.reject(W.failures[0]):W.lastResult}).then(function(W){if(V)try{S(m,V,W)}catch{}return W})},$t.prototype.delete=function(m){var v=this;return this._trans("readwrite",function(C){return v.core.mutate({trans:C,type:"delete",keys:[m]}).then(function(I){return $s(v,[m],I)}).then(function(I){return I.numFailures?_e.reject(I.failures[0]):void 0})})},$t.prototype.clear=function(){var m=this;return this._trans("readwrite",function(v){return m.core.mutate({trans:v,type:"deleteRange",range:Ad}).then(function(C){return $s(m,null,C)})}).then(function(v){return v.numFailures?_e.reject(v.failures[0]):void 0})},$t.prototype.bulkGet=function(m){var v=this;return this._trans("readonly",function(C){return v.core.getMany({keys:m,trans:C}).then(function(I){return I.map(function(R){return v.hook.reading.fire(R)})})})},$t.prototype.bulkAdd=function(m,v,C){var I=this,R=Array.isArray(v)?v:void 0,V=(C=C||(R?void 0:v))?C.allKeys:void 0;return this._trans("readwrite",function(U){var Z=I.schema.primKey,W=Z.auto,Z=Z.keyPath;if(Z&&R)throw new oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(R&&R.length!==m.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var H=m.length,Z=Z&&W?m.map(El(Z)):m;return I.core.mutate({trans:U,type:"add",keys:R,values:Z,wantResults:V}).then(function(J){var K=J.numFailures,re=J.results,X=J.lastResult,J=J.failures;if(K===0)return V?re:X;throw new ot("".concat(I.name,".bulkAdd(): ").concat(K," of ").concat(H," operations failed"),J)})})},$t.prototype.bulkPut=function(m,v,C){var I=this,R=Array.isArray(v)?v:void 0,V=(C=C||(R?void 0:v))?C.allKeys:void 0;return this._trans("readwrite",function(U){var Z=I.schema.primKey,W=Z.auto,Z=Z.keyPath;if(Z&&R)throw new oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(R&&R.length!==m.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var H=m.length,Z=Z&&W?m.map(El(Z)):m;return I.core.mutate({trans:U,type:"put",keys:R,values:Z,wantResults:V}).then(function(J){var K=J.numFailures,re=J.results,X=J.lastResult,J=J.failures;if(K===0)return V?re:X;throw new ot("".concat(I.name,".bulkPut(): ").concat(K," of ").concat(H," operations failed"),J)})})},$t.prototype.bulkUpdate=function(m){var v=this,C=this.core,I=m.map(function(U){return U.key}),R=m.map(function(U){return U.changes}),V=[];return this._trans("readwrite",function(U){return C.getMany({trans:U,keys:I,cache:"clone"}).then(function(W){var H=[],Z=[];m.forEach(function(K,re){var X=K.key,J=K.changes,ne=W[re];if(ne){for(var te=0,se=Object.keys(J);te<se.length;te++){var de=se[te],pe=J[de];if(de===v.schema.primKey.keyPath){if(yt(pe,X)!==0)throw new oe.Constraint("Cannot update primary key in bulkUpdate()")}else S(ne,de,pe)}V.push(re),H.push(X),Z.push(ne)}});var ee=H.length;return C.mutate({trans:U,type:"put",keys:H,values:Z,updates:{keys:I,changeSpecs:R}}).then(function(K){var re=K.numFailures,X=K.failures;if(re===0)return ee;for(var J=0,ne=Object.keys(X);J<ne.length;J++){var te,se=ne[J],de=V[Number(se)];de!=null&&(te=X[se],delete X[se],X[de]=te)}throw new ot("".concat(v.name,".bulkUpdate(): ").concat(re," of ").concat(ee," operations failed"),X)})})})},$t.prototype.bulkDelete=function(m){var v=this,C=m.length;return this._trans("readwrite",function(I){return v.core.mutate({trans:I,type:"delete",keys:m}).then(function(R){return $s(v,m,R)})}).then(function(U){var R=U.numFailures,V=U.lastResult,U=U.failures;if(R===0)return V;throw new ot("".concat(v.name,".bulkDelete(): ").concat(R," of ").concat(C," operations failed"),U)})},$t);function $t(){}function Dt(m){function v(U,W){if(W){for(var H=arguments.length,Z=new Array(H-1);--H;)Z[H-1]=arguments[H];return C[U].subscribe.apply(null,Z),m}if(typeof U=="string")return C[U]}var C={};v.addEventType=V;for(var I=1,R=arguments.length;I<R;++I)V(arguments[I]);return v;function V(U,W,H){if(typeof U!="object"){var Z;W=W||lt;var ee={subscribers:[],fire:H=H||ue,subscribe:function(K){ee.subscribers.indexOf(K)===-1&&(ee.subscribers.push(K),ee.fire=W(ee.fire,K))},unsubscribe:function(K){ee.subscribers=ee.subscribers.filter(function(re){return re!==K}),ee.fire=ee.subscribers.reduce(W,H)}};return C[U]=v[U]=ee}a(Z=U).forEach(function(K){var re=Z[K];if(o(re))V(K,Z[K][0],Z[K][1]);else{if(re!=="asap")throw new oe.InvalidArgument("Invalid event config");var X=V(K,ht,function(){for(var J=arguments.length,ne=new Array(J);J--;)ne[J]=arguments[J];X.subscribers.forEach(function(te){A(function(){te.apply(null,ne)})})})}})}}function Ls(m,v){return y(v).from({prototype:m}),v}function Mi(m,v){return!(m.filter||m.algorithm||m.or)&&(v?m.justLimit:!m.replayFilter)}function xa(m,v){m.filter=os(m.filter,v)}function Pd(m,v,C){var I=m.replayFilter;m.replayFilter=I?function(){return os(I(),v())}:v,m.justLimit=C&&!I}function Al(m,v){if(m.isPrimKey)return v.primaryKey;var C=v.getIndexByKeyPath(m.index);if(!C)throw new oe.Schema("KeyPath "+m.index+" on object store "+v.name+" is not indexed");return C}function Bm(m,v,C){var I=Al(m,v.schema);return v.openCursor({trans:C,values:!m.keysOnly,reverse:m.dir==="prev",unique:!!m.unique,query:{index:I,range:m.range}})}function qc(m,v,C,I){var R=m.replayFilter?os(m.filter,m.replayFilter()):m.filter;if(m.or){var V={},U=function(W,H,Z){var ee,K;R&&!R(H,Z,function(re){return H.stop(re)},function(re){return H.fail(re)})||((K=""+(ee=H.primaryKey))=="[object ArrayBuffer]"&&(K=""+new Uint8Array(ee)),d(V,K)||(V[K]=!0,v(W,H,Z)))};return Promise.all([m.or._iterate(U,C),Um(Bm(m,I,C),m.algorithm,U,!m.keysOnly&&m.valueMapper)])}return Um(Bm(m,I,C),os(m.algorithm,R),v,!m.keysOnly&&m.valueMapper)}function Um(m,v,C,I){var R=Kt(I?function(V,U,W){return C(I(V),U,W)}:C);return m.then(function(V){if(V)return V.start(function(){var U=function(){return V.continue()};v&&!v(V,function(W){return U=W},function(W){V.stop(W),U=ue},function(W){V.fail(W),U=ue})||R(V.value,V,function(W){return U=W}),U()})})}var Tl=(co.prototype.execute=function(m){var v=this["@@propmod"];if(v.add!==void 0){var C=v.add;if(o(C))return i(i([],o(m)?m:[],!0),C).sort();if(typeof C=="number")return(Number(m)||0)+C;if(typeof C=="bigint")try{return BigInt(m)+C}catch{return BigInt(0)+C}throw new TypeError("Invalid term ".concat(C))}if(v.remove!==void 0){var I=v.remove;if(o(I))return o(m)?m.filter(function(R){return!I.includes(R)}).sort():[];if(typeof I=="number")return Number(m)-I;if(typeof I=="bigint")try{return BigInt(m)-I}catch{return BigInt(0)-I}throw new TypeError("Invalid subtrahend ".concat(I))}return C=(C=v.replacePrefix)===null||C===void 0?void 0:C[0],C&&typeof m=="string"&&m.startsWith(C)?v.replacePrefix[1]+m.substring(C.length):m},co);function co(m){this["@@propmod"]=m}var wa=(_t.prototype._read=function(m,v){var C=this._ctx;return C.error?C.table._trans(null,qt.bind(null,C.error)):C.table._trans("readonly",m).then(v)},_t.prototype._write=function(m){var v=this._ctx;return v.error?v.table._trans(null,qt.bind(null,v.error)):v.table._trans("readwrite",m,"locked")},_t.prototype._addAlgorithm=function(m){var v=this._ctx;v.algorithm=os(v.algorithm,m)},_t.prototype._iterate=function(m,v){return qc(this._ctx,m,v,this._ctx.table.core)},_t.prototype.clone=function(m){var v=Object.create(this.constructor.prototype),C=Object.create(this._ctx);return m&&l(C,m),v._ctx=C,v},_t.prototype.raw=function(){return this._ctx.valueMapper=null,this},_t.prototype.each=function(m){var v=this._ctx;return this._read(function(C){return qc(v,m,C,v.table.core)})},_t.prototype.count=function(m){var v=this;return this._read(function(C){var I=v._ctx,R=I.table.core;if(Mi(I,!0))return R.count({trans:C,query:{index:Al(I,R.schema),range:I.range}}).then(function(U){return Math.min(U,I.limit)});var V=0;return qc(I,function(){return++V,!1},C,R).then(function(){return V})}).then(m)},_t.prototype.sortBy=function(m,v){var C=m.split(".").reverse(),I=C[0],R=C.length-1;function V(H,Z){return Z?V(H[C[Z]],Z-1):H[I]}var U=this._ctx.dir==="next"?1:-1;function W(H,Z){return yt(V(H,R),V(Z,R))*U}return this.toArray(function(H){return H.sort(W)}).then(v)},_t.prototype.toArray=function(m){var v=this;return this._read(function(C){var I=v._ctx;if(I.dir==="next"&&Mi(I,!0)&&0<I.limit){var R=I.valueMapper,V=Al(I,I.table.core.schema);return I.table.core.query({trans:C,limit:I.limit,values:!0,query:{index:V,range:I.range}}).then(function(W){return W=W.result,R?W.map(R):W})}var U=[];return qc(I,function(W){return U.push(W)},C,I.table.core).then(function(){return U})},m)},_t.prototype.offset=function(m){var v=this._ctx;return m<=0||(v.offset+=m,Mi(v)?Pd(v,function(){var C=m;return function(I,R){return C===0||(C===1?--C:R(function(){I.advance(C),C=0}),!1)}}):Pd(v,function(){var C=m;return function(){return--C<0}})),this},_t.prototype.limit=function(m){return this._ctx.limit=Math.min(this._ctx.limit,m),Pd(this._ctx,function(){var v=m;return function(C,I,R){return--v<=0&&I(R),0<=v}},!0),this},_t.prototype.until=function(m,v){return xa(this._ctx,function(C,I,R){return!m(C.value)||(I(R),v)}),this},_t.prototype.first=function(m){return this.limit(1).toArray(function(v){return v[0]}).then(m)},_t.prototype.last=function(m){return this.reverse().first(m)},_t.prototype.filter=function(m){var v;return xa(this._ctx,function(C){return m(C.value)}),(v=this._ctx).isMatch=os(v.isMatch,m),this},_t.prototype.and=function(m){return this.filter(m)},_t.prototype.or=function(m){return new this.db.WhereClause(this._ctx.table,m,this)},_t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},_t.prototype.desc=function(){return this.reverse()},_t.prototype.eachKey=function(m){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(C,I){m(I.key,I)})},_t.prototype.eachUniqueKey=function(m){return this._ctx.unique="unique",this.eachKey(m)},_t.prototype.eachPrimaryKey=function(m){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(C,I){m(I.primaryKey,I)})},_t.prototype.keys=function(m){var v=this._ctx;v.keysOnly=!v.isMatch;var C=[];return this.each(function(I,R){C.push(R.key)}).then(function(){return C}).then(m)},_t.prototype.primaryKeys=function(m){var v=this._ctx;if(v.dir==="next"&&Mi(v,!0)&&0<v.limit)return this._read(function(I){var R=Al(v,v.table.core.schema);return v.table.core.query({trans:I,values:!1,limit:v.limit,query:{index:R,range:v.range}})}).then(function(I){return I.result}).then(m);v.keysOnly=!v.isMatch;var C=[];return this.each(function(I,R){C.push(R.primaryKey)}).then(function(){return C}).then(m)},_t.prototype.uniqueKeys=function(m){return this._ctx.unique="unique",this.keys(m)},_t.prototype.firstKey=function(m){return this.limit(1).keys(function(v){return v[0]}).then(m)},_t.prototype.lastKey=function(m){return this.reverse().firstKey(m)},_t.prototype.distinct=function(){var m=this._ctx,m=m.index&&m.table.schema.idxByName[m.index];if(!m||!m.multi)return this;var v={};return xa(this._ctx,function(R){var I=R.primaryKey.toString(),R=d(v,I);return v[I]=!0,!R}),this},_t.prototype.modify=function(m){var v=this,C=this._ctx;return this._write(function(I){var R,V,U;U=typeof m=="function"?m:(R=a(m),V=R.length,function(se){for(var de=!1,pe=0;pe<V;++pe){var me=R[pe],Se=m[me],Oe=P(se,me);Se instanceof Tl?(S(se,me,Se.execute(Oe)),de=!0):Oe!==Se&&(S(se,me,Se),de=!0)}return de});var W=C.table.core,K=W.schema.primaryKey,H=K.outbound,Z=K.extractKey,ee=200,K=v.db._options.modifyChunkSize;K&&(ee=typeof K=="object"?K[W.name]||K["*"]||200:K);function re(se,me){var pe=me.failures,me=me.numFailures;J+=se-me;for(var Se=0,Oe=a(pe);Se<Oe.length;Se++){var Ae=Oe[Se];X.push(pe[Ae])}}var X=[],J=0,ne=[],te=m===Cd;return v.clone().primaryKeys().then(function(se){function de(me){var Se=Math.min(ee,se.length-me),Oe=se.slice(me,me+Se);return(te?Promise.resolve([]):W.getMany({trans:I,keys:Oe,cache:"immutable"})).then(function(Ae){var Te=[],De=[],Ne=H?[]:null,Re=te?Oe:[];if(!te)for(var ft=0;ft<Se;++ft){var Ct=Ae[ft],st={value:M(Ct),primKey:se[me+ft]};U.call(st,st.value,st)!==!1&&(st.value==null?Re.push(se[me+ft]):H||yt(Z(Ct),Z(st.value))===0?(De.push(st.value),H&&Ne.push(se[me+ft])):(Re.push(se[me+ft]),Te.push(st.value)))}return Promise.resolve(0<Te.length&&W.mutate({trans:I,type:"add",values:Te}).then(function(bn){for(var rt in bn.failures)Re.splice(parseInt(rt),1);re(Te.length,bn)})).then(function(){return(0<De.length||pe&&typeof m=="object")&&W.mutate({trans:I,type:"put",keys:Ne,values:De,criteria:pe,changeSpec:typeof m!="function"&&m,isAdditionalChunk:0<me}).then(function(bn){return re(De.length,bn)})}).then(function(){return(0<Re.length||pe&&te)&&W.mutate({trans:I,type:"delete",keys:Re,criteria:pe,isAdditionalChunk:0<me}).then(function(bn){return $s(C.table,Re,bn)}).then(function(bn){return re(Re.length,bn)})}).then(function(){return se.length>me+Se&&de(me+ee)})})}var pe=Mi(C)&&C.limit===1/0&&(typeof m!="function"||te)&&{index:C.index,range:C.range};return de(0).then(function(){if(0<X.length)throw new ct("Error modifying one or more objects",X,J,ne);return se.length})})})},_t.prototype.delete=function(){var m=this._ctx,v=m.range;return!Mi(m)||m.table.schema.yProps||!m.isPrimKey&&v.type!==3?this.modify(Cd):this._write(function(C){var I=m.table.core.schema.primaryKey,R=v;return m.table.core.count({trans:C,query:{index:I,range:R}}).then(function(V){return m.table.core.mutate({trans:C,type:"deleteRange",range:R}).then(function(H){var W=H.failures,H=H.numFailures;if(H)throw new ct("Could not delete some values",Object.keys(W).map(function(Z){return W[Z]}),V-H);return V-H})})})},_t);function _t(){}var Cd=function(m,v){return v.value=null};function Wm(m,v){return m<v?-1:m===v?0:1}function Km(m,v){return v<m?-1:m===v?0:1}function gr(m,v,C){return m=m instanceof cs?new m.Collection(m):m,m._ctx.error=new(C||TypeError)(v),m}function hi(m){return new m.Collection(m,function(){return qm("")}).limit(0)}function Hc(m,v,C,I){var R,V,U,W,H,Z,ee,K=C.length;if(!C.every(function(J){return typeof J=="string"}))return gr(m,Fm);function re(J){R=J==="next"?function(te){return te.toUpperCase()}:function(te){return te.toLowerCase()},V=J==="next"?function(te){return te.toLowerCase()}:function(te){return te.toUpperCase()},U=J==="next"?Wm:Km;var ne=C.map(function(te){return{lower:V(te),upper:R(te)}}).sort(function(te,se){return U(te.lower,se.lower)});W=ne.map(function(te){return te.upper}),H=ne.map(function(te){return te.lower}),ee=(Z=J)==="next"?"":I}re("next"),m=new m.Collection(m,function(){return zs(W[0],H[K-1]+I)}),m._ondirectionchange=function(J){re(J)};var X=0;return m._addAlgorithm(function(J,ne,te){var se=J.key;if(typeof se!="string")return!1;var de=V(se);if(v(de,H,X))return!0;for(var pe=null,me=X;me<K;++me){var Se=function(Oe,Ae,Te,De,Ne,Re){for(var ft=Math.min(Oe.length,De.length),Ct=-1,st=0;st<ft;++st){var bn=Ae[st];if(bn!==De[st])return Ne(Oe[st],Te[st])<0?Oe.substr(0,st)+Te[st]+Te.substr(st+1):Ne(Oe[st],De[st])<0?Oe.substr(0,st)+De[st]+Te.substr(st+1):0<=Ct?Oe.substr(0,Ct)+Ae[Ct]+Te.substr(Ct+1):null;Ne(Oe[st],bn)<0&&(Ct=st)}return ft<De.length&&Re==="next"?Oe+Te.substr(Oe.length):ft<Oe.length&&Re==="prev"?Oe.substr(0,Te.length):Ct<0?null:Oe.substr(0,Ct)+De[Ct]+Te.substr(Ct+1)}(se,de,W[me],H[me],U,Z);Se===null&&pe===null?X=me+1:(pe===null||0<U(pe,Se))&&(pe=Se)}return ne(pe!==null?function(){J.continue(pe+ee)}:te),!1}),m}function zs(m,v,C,I){return{type:2,lower:m,upper:v,lowerOpen:C,upperOpen:I}}function qm(m){return{type:1,lower:m,upper:m}}var cs=(Object.defineProperty(On.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),On.prototype.between=function(m,v,C,I){C=C!==!1,I=I===!0;try{return 0<this._cmp(m,v)||this._cmp(m,v)===0&&(C||I)&&(!C||!I)?hi(this):new this.Collection(this,function(){return zs(m,v,!C,!I)})}catch{return gr(this,fi)}},On.prototype.equals=function(m){return m==null?gr(this,fi):new this.Collection(this,function(){return qm(m)})},On.prototype.above=function(m){return m==null?gr(this,fi):new this.Collection(this,function(){return zs(m,void 0,!0)})},On.prototype.aboveOrEqual=function(m){return m==null?gr(this,fi):new this.Collection(this,function(){return zs(m,void 0,!1)})},On.prototype.below=function(m){return m==null?gr(this,fi):new this.Collection(this,function(){return zs(void 0,m,!1,!0)})},On.prototype.belowOrEqual=function(m){return m==null?gr(this,fi):new this.Collection(this,function(){return zs(void 0,m)})},On.prototype.startsWith=function(m){return typeof m!="string"?gr(this,Fm):this.between(m,m+Ir,!0,!0)},On.prototype.startsWithIgnoreCase=function(m){return m===""?this.startsWith(m):Hc(this,function(v,C){return v.indexOf(C[0])===0},[m],Ir)},On.prototype.equalsIgnoreCase=function(m){return Hc(this,function(v,C){return v===C[0]},[m],"")},On.prototype.anyOfIgnoreCase=function(){var m=he.apply(G,arguments);return m.length===0?hi(this):Hc(this,function(v,C){return C.indexOf(v)!==-1},m,"")},On.prototype.startsWithAnyOfIgnoreCase=function(){var m=he.apply(G,arguments);return m.length===0?hi(this):Hc(this,function(v,C){return C.some(function(I){return v.indexOf(I)===0})},m,Ir)},On.prototype.anyOf=function(){var m=this,v=he.apply(G,arguments),C=this._cmp;try{v.sort(C)}catch{return gr(this,fi)}if(v.length===0)return hi(this);var I=new this.Collection(this,function(){return zs(v[0],v[v.length-1])});I._ondirectionchange=function(V){C=V==="next"?m._ascending:m._descending,v.sort(C)};var R=0;return I._addAlgorithm(function(V,U,W){for(var H=V.key;0<C(H,v[R]);)if(++R===v.length)return U(W),!1;return C(H,v[R])===0||(U(function(){V.continue(v[R])}),!1)}),I},On.prototype.notEqual=function(m){return this.inAnyRange([[-1/0,m],[m,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},On.prototype.noneOf=function(){var m=he.apply(G,arguments);if(m.length===0)return new this.Collection(this);try{m.sort(this._ascending)}catch{return gr(this,fi)}var v=m.reduce(function(C,I){return C?C.concat([[C[C.length-1][1],I]]):[[-1/0,I]]},null);return v.push([m[m.length-1],this.db._maxKey]),this.inAnyRange(v,{includeLowers:!1,includeUppers:!1})},On.prototype.inAnyRange=function(se,v){var C=this,I=this._cmp,R=this._ascending,V=this._descending,U=this._min,W=this._max;if(se.length===0)return hi(this);if(!se.every(function(de){return de[0]!==void 0&&de[1]!==void 0&&R(de[0],de[1])<=0}))return gr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",oe.InvalidArgument);var H=!v||v.includeLowers!==!1,Z=v&&v.includeUppers===!0,ee,K=R;function re(de,pe){return K(de[0],pe[0])}try{(ee=se.reduce(function(de,pe){for(var me=0,Se=de.length;me<Se;++me){var Oe=de[me];if(I(pe[0],Oe[1])<0&&0<I(pe[1],Oe[0])){Oe[0]=U(Oe[0],pe[0]),Oe[1]=W(Oe[1],pe[1]);break}}return me===Se&&de.push(pe),de},[])).sort(re)}catch{return gr(this,fi)}var X=0,J=Z?function(de){return 0<R(de,ee[X][1])}:function(de){return 0<=R(de,ee[X][1])},ne=H?function(de){return 0<V(de,ee[X][0])}:function(de){return 0<=V(de,ee[X][0])},te=J,se=new this.Collection(this,function(){return zs(ee[0][0],ee[ee.length-1][1],!H,!Z)});return se._ondirectionchange=function(de){K=de==="next"?(te=J,R):(te=ne,V),ee.sort(re)},se._addAlgorithm(function(de,pe,me){for(var Se,Oe=de.key;te(Oe);)if(++X===ee.length)return pe(me),!1;return!J(Se=Oe)&&!ne(Se)||(C._cmp(Oe,ee[X][1])===0||C._cmp(Oe,ee[X][0])===0||pe(function(){K===R?de.continue(ee[X][0]):de.continue(ee[X][1])}),!1)}),se},On.prototype.startsWithAnyOf=function(){var m=he.apply(G,arguments);return m.every(function(v){return typeof v=="string"})?m.length===0?hi(this):this.inAnyRange(m.map(function(v){return[v,v+Ir]})):gr(this,"startsWithAnyOf() only works with strings")},On);function On(){}function Kr(m){return Kt(function(v){return Vs(v),m(v.target.error),!1})}function Vs(m){m.stopPropagation&&m.stopPropagation(),m.preventDefault&&m.preventDefault()}var uo="storagemutated",_a="x-storagemutated-1",qr=Dt(null,uo),Hm=(Hr.prototype._lock=function(){return O(!$e.global),++this._reculock,this._reculock!==1||$e.global||($e.lockOwnerFor=this),this},Hr.prototype._unlock=function(){if(O(!$e.global),--this._reculock==0)for($e.global||($e.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var m=this._blockedFuncs.shift();try{Di(m[1],m[0])}catch{}}return this},Hr.prototype._locked=function(){return this._reculock&&$e.lockOwnerFor!==this},Hr.prototype.create=function(m){var v=this;if(!this.mode)return this;var C=this.db.idbdb,I=this.db._state.dbOpenError;if(O(!this.idbtrans),!m&&!C)switch(I&&I.name){case"DatabaseClosedError":throw new oe.DatabaseClosed(I);case"MissingAPIError":throw new oe.MissingAPI(I.message,I);default:throw new oe.OpenFailed(I)}if(!this.active)throw new oe.TransactionInactive;return O(this._completion._state===null),(m=this.idbtrans=m||(this.db.core||C).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Kt(function(R){Vs(R),v._reject(m.error)}),m.onabort=Kt(function(R){Vs(R),v.active&&v._reject(new oe.Abort(m.error)),v.active=!1,v.on("abort").fire(R)}),m.oncomplete=Kt(function(){v.active=!1,v._resolve(),"mutatedParts"in m&&qr.storagemutated.fire(m.mutatedParts)}),this},Hr.prototype._promise=function(m,v,C){var I=this;if(m==="readwrite"&&this.mode!=="readwrite")return qt(new oe.ReadOnly("Transaction is readonly"));if(!this.active)return qt(new oe.TransactionInactive);if(this._locked())return new _e(function(V,U){I._blockedFuncs.push([function(){I._promise(m,v,C).then(V,U)},$e])});if(C)return ss(function(){var V=new _e(function(U,W){I._lock();var H=v(U,W,I);H&&H.then&&H.then(U,W)});return V.finally(function(){return I._unlock()}),V._lib=!0,V});var R=new _e(function(V,U){var W=v(V,U,I);W&&W.then&&W.then(V,U)});return R._lib=!0,R},Hr.prototype._root=function(){return this.parent?this.parent._root():this},Hr.prototype.waitFor=function(m){var v,C=this._root(),I=_e.resolve(m);C._waitingFor?C._waitingFor=C._waitingFor.then(function(){return I}):(C._waitingFor=I,C._waitingQueue=[],v=C.idbtrans.objectStore(C.storeNames[0]),function V(){for(++C._spinCount;C._waitingQueue.length;)C._waitingQueue.shift()();C._waitingFor&&(v.get(-1/0).onsuccess=V)}());var R=C._waitingFor;return new _e(function(V,U){I.then(function(W){return C._waitingQueue.push(Kt(V.bind(null,W)))},function(W){return C._waitingQueue.push(Kt(U.bind(null,W)))}).finally(function(){C._waitingFor===R&&(C._waitingFor=null)})})},Hr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new oe.Abort))},Hr.prototype.table=function(m){var v=this._memoizedTables||(this._memoizedTables={});if(d(v,m))return v[m];var C=this.schema[m];if(!C)throw new oe.NotFound("Table "+m+" not part of transaction");return C=new this.db.Table(m,C,this),C.core=this.db.core.table(m),v[m]=C},Hr);function Hr(){}function Gt(m,v,C,I,R,V,U,W){return{name:m,keyPath:v,unique:C,multi:I,auto:R,compound:V,src:(C&&!U?"&":"")+(I?"*":"")+(R?"++":"")+Gm(v),type:W}}function Gm(m){return typeof m=="string"?m:m?"["+[].join.call(m,"+")+"]":""}function jd(m,v,C){return{name:m,primKey:v,indexes:C,mappedClass:null,idxByName:(I=function(R){return[R.name,R]},C.reduce(function(R,V,U){return U=I(V,U),U&&(R[U[0]]=U[1]),R},{}))};var I}var fo=function(m){try{return m.only([[]]),fo=function(){return[[]]},[[]]}catch{return fo=function(){return Ir},Ir}};function Gc(m){return m==null?function(){}:typeof m=="string"?(v=m).split(".").length===1?function(C){return C[v]}:function(C){return P(C,v)}:function(C){return P(C,m)};var v}function Od(m){return[].slice.call(m)}var Yc=0;function Gr(m){return m==null?":id":typeof m=="string"?m:"[".concat(m.join("+"),"]")}function Ym(m,v,H){function I(te){if(te.type===3)return null;if(te.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var X=te.lower,J=te.upper,ne=te.lowerOpen,te=te.upperOpen;return X===void 0?J===void 0?null:v.upperBound(J,!!te):J===void 0?v.lowerBound(X,!!ne):v.bound(X,J,!!ne,!!te)}function R(re){var X,J=re.name;return{name:J,schema:re,mutate:function(ne){var te=ne.trans,se=ne.type,de=ne.keys,pe=ne.values,me=ne.range;return new Promise(function(Se,Oe){Se=Kt(Se);var Ae=te.objectStore(J),Te=Ae.keyPath==null,De=se==="put"||se==="add";if(!De&&se!=="delete"&&se!=="deleteRange")throw new Error("Invalid operation type: "+se);var Ne,Re=(de||pe||{length:1}).length;if(de&&pe&&de.length!==pe.length)throw new Error("Given keys array must have same length as given values array.");if(Re===0)return Se({numFailures:0,failures:{},results:[],lastResult:void 0});function ft(Nr){++bn,Vs(Nr)}var Ct=[],st=[],bn=0;if(se==="deleteRange"){if(me.type===4)return Se({numFailures:bn,failures:st,results:[],lastResult:void 0});me.type===3?Ct.push(Ne=Ae.clear()):Ct.push(Ne=Ae.delete(I(me)))}else{var Te=De?Te?[pe,de]:[pe,null]:[de,null],rt=Te[0],yr=Te[1];if(De)for(var vr=0;vr<Re;++vr)Ct.push(Ne=yr&&yr[vr]!==void 0?Ae[se](rt[vr],yr[vr]):Ae[se](rt[vr])),Ne.onerror=ft;else for(vr=0;vr<Re;++vr)Ct.push(Ne=Ae[se](rt[vr])),Ne.onerror=ft}function eg(Nr){Nr=Nr.target.result,Ct.forEach(function(Nl,ix){return Nl.error!=null&&(st[ix]=Nl.error)}),Se({numFailures:bn,failures:st,results:se==="delete"?de:Ct.map(function(Nl){return Nl.result}),lastResult:Nr})}Ne.onerror=function(Nr){ft(Nr),eg(Nr)},Ne.onsuccess=eg})},getMany:function(ne){var te=ne.trans,se=ne.keys;return new Promise(function(de,pe){de=Kt(de);for(var me,Se=te.objectStore(J),Oe=se.length,Ae=new Array(Oe),Te=0,De=0,Ne=function(Ct){Ct=Ct.target,Ae[Ct._pos]=Ct.result,++De===Te&&de(Ae)},Re=Kr(pe),ft=0;ft<Oe;++ft)se[ft]!=null&&((me=Se.get(se[ft]))._pos=ft,me.onsuccess=Ne,me.onerror=Re,++Te);Te===0&&de(Ae)})},get:function(ne){var te=ne.trans,se=ne.key;return new Promise(function(de,pe){de=Kt(de);var me=te.objectStore(J).get(se);me.onsuccess=function(Se){return de(Se.target.result)},me.onerror=Kr(pe)})},query:(X=Z,function(ne){return new Promise(function(te,se){te=Kt(te);var de,pe,me,Te=ne.trans,Se=ne.values,Oe=ne.limit,Ne=ne.query,Ae=Oe===1/0?void 0:Oe,De=Ne.index,Ne=Ne.range,Te=Te.objectStore(J),De=De.isPrimaryKey?Te:Te.index(De.name),Ne=I(Ne);if(Oe===0)return te({result:[]});X?((Ae=Se?De.getAll(Ne,Ae):De.getAllKeys(Ne,Ae)).onsuccess=function(Re){return te({result:Re.target.result})},Ae.onerror=Kr(se)):(de=0,pe=!Se&&"openKeyCursor"in De?De.openKeyCursor(Ne):De.openCursor(Ne),me=[],pe.onsuccess=function(Re){var ft=pe.result;return ft?(me.push(Se?ft.value:ft.primaryKey),++de===Oe?te({result:me}):void ft.continue()):te({result:me})},pe.onerror=Kr(se))})}),openCursor:function(ne){var te=ne.trans,se=ne.values,de=ne.query,pe=ne.reverse,me=ne.unique;return new Promise(function(Se,Oe){Se=Kt(Se);var De=de.index,Ae=de.range,Te=te.objectStore(J),Te=De.isPrimaryKey?Te:Te.index(De.name),De=pe?me?"prevunique":"prev":me?"nextunique":"next",Ne=!se&&"openKeyCursor"in Te?Te.openKeyCursor(I(Ae),De):Te.openCursor(I(Ae),De);Ne.onerror=Kr(Oe),Ne.onsuccess=Kt(function(Re){var ft,Ct,st,bn,rt=Ne.result;rt?(rt.___id=++Yc,rt.done=!1,ft=rt.continue.bind(rt),Ct=(Ct=rt.continuePrimaryKey)&&Ct.bind(rt),st=rt.advance.bind(rt),bn=function(){throw new Error("Cursor not stopped")},rt.trans=te,rt.stop=rt.continue=rt.continuePrimaryKey=rt.advance=function(){throw new Error("Cursor not started")},rt.fail=Kt(Oe),rt.next=function(){var yr=this,vr=1;return this.start(function(){return vr--?yr.continue():yr.stop()}).then(function(){return yr})},rt.start=function(yr){function vr(){if(Ne.result)try{yr()}catch(Nr){rt.fail(Nr)}else rt.done=!0,rt.start=function(){throw new Error("Cursor behind last entry")},rt.stop()}var eg=new Promise(function(Nr,Nl){Nr=Kt(Nr),Ne.onerror=Kr(Nl),rt.fail=Nl,rt.stop=function(ix){rt.stop=rt.continue=rt.continuePrimaryKey=rt.advance=bn,Nr(ix)}});return Ne.onsuccess=Kt(function(Nr){Ne.onsuccess=vr,vr()}),rt.continue=ft,rt.continuePrimaryKey=Ct,rt.advance=st,vr(),eg},Se(rt)):Se(null)},Oe)})},count:function(ne){var te=ne.query,se=ne.trans,de=te.index,pe=te.range;return new Promise(function(me,Se){var Oe=se.objectStore(J),Ae=de.isPrimaryKey?Oe:Oe.index(de.name),Oe=I(pe),Ae=Oe?Ae.count(Oe):Ae.count();Ae.onsuccess=Kt(function(Te){return me(Te.target.result)}),Ae.onerror=Kr(Se)})}}}var V,U,W,ee=(U=H,W=Od((V=m).objectStoreNames),{schema:{name:V.name,tables:W.map(function(re){return U.objectStore(re)}).map(function(re){var X=re.keyPath,te=re.autoIncrement,J=o(X),ne={},te={name:re.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:X==null,compound:J,keyPath:X,autoIncrement:te,unique:!0,extractKey:Gc(X)},indexes:Od(re.indexNames).map(function(se){return re.index(se)}).map(function(me){var de=me.name,pe=me.unique,Se=me.multiEntry,me=me.keyPath,Se={name:de,compound:o(me),keyPath:me,unique:pe,multiEntry:Se,extractKey:Gc(me)};return ne[Gr(me)]=Se}),getIndexByKeyPath:function(se){return ne[Gr(se)]}};return ne[":id"]=te.primaryKey,X!=null&&(ne[Gr(X)]=te.primaryKey),te})},hasGetAll:0<W.length&&"getAll"in U.objectStore(W[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),H=ee.schema,Z=ee.hasGetAll,ee=H.tables.map(R),K={};return ee.forEach(function(re){return K[re.name]=re}),{stack:"dbcore",transaction:m.transaction.bind(m),table:function(re){if(!K[re])throw new Error("Table '".concat(re,"' not found"));return K[re]},MIN_KEY:-1/0,MAX_KEY:fo(v),schema:H}}function ex(m,v,C,I){var R=C.IDBKeyRange;return C.indexedDB,{dbcore:(I=Ym(v,R,I),m.dbcore.reduce(function(V,U){return U=U.create,r(r({},V),U(V))},I))}}function Fs(m,I){var C=I.db,I=ex(m._middlewares,C,m._deps,I);m.core=I.dbcore,m.tables.forEach(function(R){var V=R.name;m.core.schema.tables.some(function(U){return U.name===V})&&(R.core=m.core.table(V),m[V]instanceof m.Table&&(m[V].core=R.core))})}function Pl(m,v,C,I){C.forEach(function(R){var V=I[R];v.forEach(function(U){var W=function H(Z,ee){return x(Z,ee)||(Z=c(Z))&&H(Z,ee)}(U,R);(!W||"value"in W&&W.value===void 0)&&(U===m.Transaction.prototype||U instanceof m.Transaction?b(U,R,{get:function(){return this.table(R)},set:function(H){g(this,R,{value:H,writable:!0,configurable:!0,enumerable:!0})}}):U[R]=new m.Table(R,V))})})}function Cl(m,v){v.forEach(function(C){for(var I in C)C[I]instanceof m.Table&&delete C[I]})}function Xc(m,v){return m._cfg.version-v._cfg.version}function Xm(m,v,C,I){var R=m._dbSchema;C.objectStoreNames.contains("$meta")&&!R.$meta&&(R.$meta=jd("$meta",Jc("")[0],[]),m._storeNames.push("$meta"));var V=m._createTransaction("readwrite",m._storeNames,R);V.create(C),V._completion.catch(I);var U=V._reject.bind(V),W=$e.transless||$e;ss(function(){return $e.trans=V,$e.transless=W,v!==0?(Fs(m,C),Z=v,((H=V).storeNames.includes("$meta")?H.table("$meta").get("version").then(function(ee){return ee??Z}):_e.resolve(Z)).then(function(ee){return re=ee,X=V,J=C,ne=[],ee=(K=m)._versions,te=K._dbSchema=Ol(0,K.idbdb,J),(ee=ee.filter(function(se){return se._cfg.version>=re})).length!==0?(ee.forEach(function(se){ne.push(function(){var de=te,pe=se._cfg.dbschema;po(K,de,J),po(K,pe,J),te=K._dbSchema=pe;var me=kd(de,pe);me.add.forEach(function(De){Zc(J,De[0],De[1].primKey,De[1].indexes)}),me.change.forEach(function(De){if(De.recreate)throw new oe.Upgrade("Not yet support for changing primary key");var Ne=J.objectStore(De.name);De.add.forEach(function(Re){return jl(Ne,Re)}),De.change.forEach(function(Re){Ne.deleteIndex(Re.name),jl(Ne,Re)}),De.del.forEach(function(Re){return Ne.deleteIndex(Re)})});var Se=se._cfg.contentUpgrade;if(Se&&se._cfg.version>re){Fs(K,J),X._memoizedTables={};var Oe=T(pe);me.del.forEach(function(De){Oe[De]=de[De]}),Cl(K,[K.Transaction.prototype]),Pl(K,[K.Transaction.prototype],a(Oe),Oe),X.schema=Oe;var Ae,Te=ce(Se);return Te&&Rs(),me=_e.follow(function(){var De;(Ae=Se(X))&&Te&&(De=Ni.bind(null,null),Ae.then(De,De))}),Ae&&typeof Ae.then=="function"?_e.resolve(Ae):me.then(function(){return Ae})}}),ne.push(function(de){var pe,me,Se=se._cfg.dbschema;pe=Se,me=de,[].slice.call(me.db.objectStoreNames).forEach(function(Oe){return pe[Oe]==null&&me.db.deleteObjectStore(Oe)}),Cl(K,[K.Transaction.prototype]),Pl(K,[K.Transaction.prototype],K._storeNames,K._dbSchema),X.schema=K._dbSchema}),ne.push(function(de){K.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(K.idbdb.version/10)===se._cfg.version?(K.idbdb.deleteObjectStore("$meta"),delete K._dbSchema.$meta,K._storeNames=K._storeNames.filter(function(pe){return pe!=="$meta"})):de.objectStore("$meta").put(se._cfg.version,"version"))})}),function se(){return ne.length?_e.resolve(ne.shift()(X.idbtrans)).then(se):_e.resolve()}().then(function(){ho(te,J)})):_e.resolve();var K,re,X,J,ne,te}).catch(U)):(a(R).forEach(function(ee){Zc(C,ee,R[ee].primKey,R[ee].indexes)}),Fs(m,C),void _e.follow(function(){return m.on.populate.fire(V)}).catch(U));var H,Z})}function Qc(m,v){ho(m._dbSchema,v),v.db.version%10!=0||v.objectStoreNames.contains("$meta")||v.db.createObjectStore("$meta").add(Math.ceil(v.db.version/10-1),"version");var C=Ol(0,m.idbdb,v);po(m,m._dbSchema,v);for(var I=0,R=kd(C,m._dbSchema).change;I<R.length;I++){var V=function(U){if(U.change.length||U.recreate)return console.warn("Unable to patch indexes of table ".concat(U.name," because it has changes on the type of index or primary key.")),{value:void 0};var W=v.objectStore(U.name);U.add.forEach(function(H){He&&console.debug("Dexie upgrade patch: Creating missing index ".concat(U.name,".").concat(H.src)),jl(W,H)})}(R[I]);if(typeof V=="object")return V.value}}function kd(m,v){var C,I={del:[],add:[],change:[]};for(C in m)v[C]||I.del.push(C);for(C in v){var R=m[C],V=v[C];if(R){var U={name:C,def:V,recreate:!1,del:[],add:[],change:[]};if(""+(R.primKey.keyPath||"")!=""+(V.primKey.keyPath||"")||R.primKey.auto!==V.primKey.auto)U.recreate=!0,I.change.push(U);else{var W=R.idxByName,H=V.idxByName,Z=void 0;for(Z in W)H[Z]||U.del.push(Z);for(Z in H){var ee=W[Z],K=H[Z];ee?ee.src!==K.src&&U.change.push(K):U.add.push(K)}(0<U.del.length||0<U.add.length||0<U.change.length)&&I.change.push(U)}}else I.add.push([C,V])}return I}function Zc(m,v,C,I){var R=m.db.createObjectStore(v,C.keyPath?{keyPath:C.keyPath,autoIncrement:C.auto}:{autoIncrement:C.auto});return I.forEach(function(V){return jl(R,V)}),R}function ho(m,v){a(m).forEach(function(C){v.db.objectStoreNames.contains(C)||(He&&console.debug("Dexie: Creating missing table",C),Zc(v,C,m[C].primKey,m[C].indexes))})}function jl(m,v){m.createIndex(v.name,v.keyPath,{unique:v.unique,multiEntry:v.multi})}function Ol(m,v,C){var I={};return _(v.objectStoreNames,0).forEach(function(R){for(var V=C.objectStore(R),U=Gt(Gm(Z=V.keyPath),Z||"",!0,!1,!!V.autoIncrement,Z&&typeof Z!="string",!0),W=[],H=0;H<V.indexNames.length;++H){var ee=V.index(V.indexNames[H]),Z=ee.keyPath,ee=Gt(ee.name,Z,!!ee.unique,!!ee.multiEntry,!1,Z&&typeof Z!="string",!1);W.push(ee)}I[R]=jd(R,U,W)}),I}function po(m,v,C){for(var I=C.db.objectStoreNames,R=0;R<I.length;++R){var V=I[R],U=C.objectStore(V);m._hasGetAll="getAll"in U;for(var W=0;W<U.indexNames.length;++W){var H=U.indexNames[W],Z=U.index(H).keyPath,ee=typeof Z=="string"?Z:"["+_(Z).join("+")+"]";!v[V]||(Z=v[V].idxByName[ee])&&(Z.name=H,delete v[V].idxByName[ee],v[V].idxByName[H]=Z)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(m._hasGetAll=!1)}function Jc(m){return m.split(",").map(function(v,C){var V=v.split(":"),I=(R=V[1])===null||R===void 0?void 0:R.trim(),R=(v=V[0].trim()).replace(/([&*]|\+\+)/g,""),V=/^\[/.test(R)?R.match(/^\[(.*)\]$/)[1].split("+"):R;return Gt(R,V||null,/\&/.test(v),/\*/.test(v),/\+\+/.test(v),o(V),C===0,I)})}var Qm=(us.prototype._createTableSchema=jd,us.prototype._parseIndexSyntax=Jc,us.prototype._parseStoresSpec=function(m,v){var C=this;a(m).forEach(function(I){if(m[I]!==null){var R=C._parseIndexSyntax(m[I]),V=R.shift();if(!V)throw new oe.Schema("Invalid schema for table "+I+": "+m[I]);if(V.unique=!0,V.multi)throw new oe.Schema("Primary key cannot be multiEntry*");R.forEach(function(U){if(U.auto)throw new oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!U.keyPath)throw new oe.Schema("Index must have a name and cannot be an empty string")}),R=C._createTableSchema(I,V,R),v[I]=R}})},us.prototype.stores=function(C){var v=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,C):C;var C=v._versions,I={},R={};return C.forEach(function(V){l(I,V._cfg.storesSource),R=V._cfg.dbschema={},V._parseStoresSpec(I,R)}),v._dbSchema=R,Cl(v,[v._allTables,v,v.Transaction.prototype]),Pl(v,[v._allTables,v,v.Transaction.prototype,this._cfg.tables],a(R),R),v._storeNames=a(R),this},us.prototype.upgrade=function(m){return this._cfg.contentUpgrade=Ge(this._cfg.contentUpgrade||ue,m),this},us);function us(){}function eu(m,v){var C=m._dbNamesDB;return C||(C=m._dbNamesDB=new Sa(_l,{addons:[],indexedDB:m,IDBKeyRange:v})).version(1).stores({dbnames:"name"}),C.table("dbnames")}function tu(m){return m&&typeof m.databases=="function"}function fs(m){return ss(function(){return $e.letThrough=!0,m()})}function nu(m){return!("from"in m)}var Fn=function(m,v){if(!this){var C=new Fn;return m&&"d"in m&&l(C,m),C}l(this,arguments.length?{d:1,from:m,to:1<arguments.length?v:m}:{d:0})};function mo(m,v,C){var I=yt(v,C);if(!isNaN(I)){if(0<I)throw RangeError();if(nu(m))return l(m,{from:v,to:C,d:1});var R=m.l,I=m.r;if(yt(C,m.from)<0)return R?mo(R,v,C):m.l={from:v,to:C,d:1,l:null,r:null},Id(m);if(0<yt(v,m.to))return I?mo(I,v,C):m.r={from:v,to:C,d:1,l:null,r:null},Id(m);yt(v,m.from)<0&&(m.from=v,m.l=null,m.d=I?I.d+1:1),0<yt(C,m.to)&&(m.to=C,m.r=null,m.d=m.l?m.l.d+1:1),C=!m.r,R&&!m.l&&go(m,R),I&&C&&go(m,I)}}function go(m,v){nu(v)||function C(I,H){var V=H.from,U=H.to,W=H.l,H=H.r;mo(I,V,U),W&&C(I,W),H&&C(I,H)}(m,v)}function kl(m,v){var C=Xn(v),I=C.next();if(I.done)return!1;for(var R=I.value,V=Xn(m),U=V.next(R.from),W=U.value;!I.done&&!U.done;){if(yt(W.from,R.to)<=0&&0<=yt(W.to,R.from))return!0;yt(R.from,W.from)<0?R=(I=C.next(W.from)).value:W=(U=V.next(R.from)).value}return!1}function Xn(m){var v=nu(m)?null:{s:0,n:m};return{next:function(C){for(var I=0<arguments.length;v;)switch(v.s){case 0:if(v.s=1,I)for(;v.n.l&&yt(C,v.n.from)<0;)v={up:v,n:v.n.l,s:1};else for(;v.n.l;)v={up:v,n:v.n.l,s:1};case 1:if(v.s=2,!I||yt(C,v.n.to)<=0)return{value:v.n,done:!1};case 2:if(v.n.r){v.s=3,v={up:v,n:v.n.r,s:0};continue}case 3:v=v.up}return{done:!0}}}}function Id(m){var v,C,I=(((v=m.r)===null||v===void 0?void 0:v.d)||0)-(((C=m.l)===null||C===void 0?void 0:C.d)||0),R=1<I?"r":I<-1?"l":"";R&&(v=R=="r"?"l":"r",C=r({},m),I=m[R],m.from=I.from,m.to=I.to,m[R]=I[R],C[R]=I[v],(m[v]=C).d=Nd(C)),m.d=Nd(m)}function Nd(C){var v=C.r,C=C.l;return(v?C?Math.max(v.d,C.d):v.d:C?C.d:0)+1}function ds(m,v){return a(v).forEach(function(C){m[C]?go(m[C],v[C]):m[C]=function I(R){var V,U,W={};for(V in R)d(R,V)&&(U=R[V],W[V]=!U||typeof U!="object"||N.has(U.constructor)?U:I(U));return W}(v[C])}),m}function p(m,v){return m.all||v.all||Object.keys(m).some(function(C){return v[C]&&kl(v[C],m[C])})}h(Fn.prototype,((Ri={add:function(m){return go(this,m),this},addKey:function(m){return mo(this,m,m),this},addKeys:function(m){var v=this;return m.forEach(function(C){return mo(v,C,C)}),this},hasKey:function(m){var v=Xn(this).next(m).value;return v&&yt(v.from,m)<=0&&0<=yt(v.to,m)}})[ie]=function(){return Xn(this)},Ri));var j={},D={},F=!1;function ae(m){ds(D,m),F||(F=!0,setTimeout(function(){F=!1,fe(D,!(D={}))},0))}function fe(m,v){v===void 0&&(v=!1);var C=new Set;if(m.all)for(var I=0,R=Object.values(j);I<R.length;I++)je(U=R[I],m,C,v);else for(var V in m){var U,W=/^idb\:\/\/(.*)\/(.*)\//.exec(V);W&&(V=W[1],W=W[2],(U=j["idb://".concat(V,"/").concat(W)])&&je(U,m,C,v))}C.forEach(function(H){return H()})}function je(m,v,C,I){for(var R=[],V=0,U=Object.entries(m.queries.query);V<U.length;V++){for(var W=U[V],H=W[0],Z=[],ee=0,K=W[1];ee<K.length;ee++){var re=K[ee];p(v,re.obsSet)?re.subscribers.forEach(function(te){return C.add(te)}):I&&Z.push(re)}I&&R.push([H,Z])}if(I)for(var X=0,J=R;X<J.length;X++){var ne=J[X],H=ne[0],Z=ne[1];m.queries.query[H]=Z}}function ut(m){var v=m._state,C=m._deps.indexedDB;if(v.isBeingOpened||m.idbdb)return v.dbReadyPromise.then(function(){return v.dbOpenError?qt(v.dbOpenError):m});v.isBeingOpened=!0,v.dbOpenError=null,v.openComplete=!1;var I=v.openCanceller,R=Math.round(10*m.verno),V=!1;function U(){if(v.openCanceller!==I)throw new oe.DatabaseClosed("db.open() was cancelled")}function W(){return new _e(function(re,X){if(U(),!C)throw new oe.MissingAPI;var J=m.name,ne=v.autoSchema||!R?C.open(J):C.open(J,R);if(!ne)throw new oe.MissingAPI;ne.onerror=Kr(X),ne.onblocked=Kt(m._fireOnBlocked),ne.onupgradeneeded=Kt(function(te){var se;ee=ne.transaction,v.autoSchema&&!m._options.allowEmptyDB?(ne.onerror=Vs,ee.abort(),ne.result.close(),(se=C.deleteDatabase(J)).onsuccess=se.onerror=Kt(function(){X(new oe.NoSuchDatabase("Database ".concat(J," doesnt exist")))})):(ee.onerror=Kr(X),te=te.oldVersion>Math.pow(2,62)?0:te.oldVersion,K=te<1,m.idbdb=ne.result,V&&Qc(m,ee),Xm(m,te/10,ee,X))},X),ne.onsuccess=Kt(function(){ee=null;var te,se,de,pe,me,Se=m.idbdb=ne.result,Oe=_(Se.objectStoreNames);if(0<Oe.length)try{var Ae=Se.transaction((pe=Oe).length===1?pe[0]:pe,"readonly");if(v.autoSchema)se=Se,de=Ae,(te=m).verno=se.version/10,de=te._dbSchema=Ol(0,se,de),te._storeNames=_(se.objectStoreNames,0),Pl(te,[te._allTables],a(de),de);else if(po(m,m._dbSchema,Ae),((me=kd(Ol(0,(me=m).idbdb,Ae),me._dbSchema)).add.length||me.change.some(function(Te){return Te.add.length||Te.change.length}))&&!V)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Se.close(),R=Se.version+1,V=!0,re(W());Fs(m,Ae)}catch{}ba.push(m),Se.onversionchange=Kt(function(Te){v.vcFired=!0,m.on("versionchange").fire(Te)}),Se.onclose=Kt(function(Te){m.on("close").fire(Te)}),K&&(me=m._deps,Ae=J,Se=me.indexedDB,me=me.IDBKeyRange,tu(Se)||Ae===_l||eu(Se,me).put({name:Ae}).catch(ue)),re()},X)}).catch(function(re){switch(re==null?void 0:re.name){case"UnknownError":if(0<v.PR1398_maxLoop)return v.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),W();break;case"VersionError":if(0<R)return R=0,W()}return _e.reject(re)})}var H,Z=v.dbReadyResolve,ee=null,K=!1;return _e.race([I,(typeof navigator>"u"?_e.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(re){function X(){return indexedDB.databases().finally(re)}H=setInterval(X,100),X()}).finally(function(){return clearInterval(H)}):Promise.resolve()).then(W)]).then(function(){return U(),v.onReadyBeingFired=[],_e.resolve(fs(function(){return m.on.ready.fire(m.vip)})).then(function re(){if(0<v.onReadyBeingFired.length){var X=v.onReadyBeingFired.reduce(Ge,ue);return v.onReadyBeingFired=[],_e.resolve(fs(function(){return X(m.vip)})).then(re)}})}).finally(function(){v.openCanceller===I&&(v.onReadyBeingFired=null,v.isBeingOpened=!1)}).catch(function(re){v.dbOpenError=re;try{ee&&ee.abort()}catch{}return I===v.openCanceller&&m._close(),qt(re)}).finally(function(){v.openComplete=!0,Z()}).then(function(){var re;return K&&(re={},m.tables.forEach(function(X){X.schema.indexes.forEach(function(J){J.name&&(re["idb://".concat(m.name,"/").concat(X.name,"/").concat(J.name)]=new Fn(-1/0,[[[]]]))}),re["idb://".concat(m.name,"/").concat(X.name,"/")]=re["idb://".concat(m.name,"/").concat(X.name,"/:dels")]=new Fn(-1/0,[[[]]])}),qr(uo).fire(re),fe(re,!0)),m})}function hn(m){function v(V){return m.next(V)}var C=R(v),I=R(function(V){return m.throw(V)});function R(V){return function(H){var W=V(H),H=W.value;return W.done?H:H&&typeof H.then=="function"?H.then(C,I):o(H)?Promise.all(H).then(C,I):C(H)}}return R(v)()}function It(m,v,C){for(var I=o(m)?m.slice():[m],R=0;R<C;++R)I.push(v);return I}var kn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(m){return r(r({},m),{table:function(v){var C=m.table(v),I=C.schema,R={},V=[];function U(K,re,X){var J=Gr(K),ne=R[J]=R[J]||[],te=K==null?0:typeof K=="string"?1:K.length,se=0<re,se=r(r({},X),{name:se?"".concat(J,"(virtual-from:").concat(X.name,")"):X.name,lowLevelIndex:X,isVirtual:se,keyTail:re,keyLength:te,extractKey:Gc(K),unique:!se&&X.unique});return ne.push(se),se.isPrimaryKey||V.push(se),1<te&&U(te===2?K[0]:K.slice(0,te-1),re+1,X),ne.sort(function(de,pe){return de.keyTail-pe.keyTail}),se}v=U(I.primaryKey.keyPath,0,I.primaryKey),R[":id"]=[v];for(var W=0,H=I.indexes;W<H.length;W++){var Z=H[W];U(Z.keyPath,0,Z)}function ee(K){var re,X=K.query.index;return X.isVirtual?r(r({},K),{query:{index:X.lowLevelIndex,range:(re=K.query.range,X=X.keyTail,{type:re.type===1?2:re.type,lower:It(re.lower,re.lowerOpen?m.MAX_KEY:m.MIN_KEY,X),lowerOpen:!0,upper:It(re.upper,re.upperOpen?m.MIN_KEY:m.MAX_KEY,X),upperOpen:!0})}}):K}return r(r({},C),{schema:r(r({},I),{primaryKey:v,indexes:V,getIndexByKeyPath:function(K){return(K=R[Gr(K)])&&K[0]}}),count:function(K){return C.count(ee(K))},query:function(K){return C.query(ee(K))},openCursor:function(K){var re=K.query.index,X=re.keyTail,J=re.isVirtual,ne=re.keyLength;return J?C.openCursor(ee(K)).then(function(se){return se&&te(se)}):C.openCursor(K);function te(se){return Object.create(se,{continue:{value:function(de){de!=null?se.continue(It(de,K.reverse?m.MAX_KEY:m.MIN_KEY,X)):K.unique?se.continue(se.key.slice(0,ne).concat(K.reverse?m.MIN_KEY:m.MAX_KEY,X)):se.continue()}},continuePrimaryKey:{value:function(de,pe){se.continuePrimaryKey(It(de,m.MAX_KEY,X),pe)}},primaryKey:{get:function(){return se.primaryKey}},key:{get:function(){var de=se.key;return ne===1?de[0]:de.slice(0,ne)}},value:{get:function(){return se.value}}})}}})}})}};function Yr(m,v,C,I){return C=C||{},I=I||"",a(m).forEach(function(R){var V,U,W;d(v,R)?(V=m[R],U=v[R],typeof V=="object"&&typeof U=="object"&&V&&U?(W=q(V))!==q(U)?C[I+R]=v[R]:W==="Object"?Yr(V,U,C,I+R+"."):V!==U&&(C[I+R]=v[R]):V!==U&&(C[I+R]=v[R])):C[I+R]=void 0}),a(v).forEach(function(R){d(m,R)||(C[I+R]=v[R])}),C}function hs(m,v){return v.type==="delete"?v.keys:v.keys||v.values.map(m.extractKey)}var Bs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(m){return r(r({},m),{table:function(v){var C=m.table(v),I=C.schema.primaryKey;return r(r({},C),{mutate:function(R){var V=$e.trans,U=V.table(v).hook,W=U.deleting,H=U.creating,Z=U.updating;switch(R.type){case"add":if(H.fire===ue)break;return V._promise("readwrite",function(){return ee(R)},!0);case"put":if(H.fire===ue&&Z.fire===ue)break;return V._promise("readwrite",function(){return ee(R)},!0);case"delete":if(W.fire===ue)break;return V._promise("readwrite",function(){return ee(R)},!0);case"deleteRange":if(W.fire===ue)break;return V._promise("readwrite",function(){return function K(re,X,J){return C.query({trans:re,values:!1,query:{index:I,range:X},limit:J}).then(function(ne){var te=ne.result;return ee({type:"delete",keys:te,trans:re}).then(function(se){return 0<se.numFailures?Promise.reject(se.failures[0]):te.length<J?{failures:[],numFailures:0,lastResult:void 0}:K(re,r(r({},X),{lower:te[te.length-1],lowerOpen:!0}),J)})})}(R.trans,R.range,1e4)},!0)}return C.mutate(R);function ee(K){var re,X,J,ne=$e.trans,te=K.keys||hs(I,K);if(!te)throw new Error("Keys missing");return(K=K.type==="add"||K.type==="put"?r(r({},K),{keys:te}):r({},K)).type!=="delete"&&(K.values=i([],K.values)),K.keys&&(K.keys=i([],K.keys)),re=C,J=te,((X=K).type==="add"?Promise.resolve([]):re.getMany({trans:X.trans,keys:J,cache:"immutable"})).then(function(se){var de=te.map(function(pe,me){var Se,Oe,Ae,Te=se[me],De={onerror:null,onsuccess:null};return K.type==="delete"?W.fire.call(De,pe,Te,ne):K.type==="add"||Te===void 0?(Se=H.fire.call(De,pe,K.values[me],ne),pe==null&&Se!=null&&(K.keys[me]=pe=Se,I.outbound||S(K.values[me],I.keyPath,pe))):(Se=Yr(Te,K.values[me]),(Oe=Z.fire.call(De,Se,pe,Te,ne))&&(Ae=K.values[me],Object.keys(Oe).forEach(function(Ne){d(Ae,Ne)?Ae[Ne]=Oe[Ne]:S(Ae,Ne,Oe[Ne])}))),De});return C.mutate(K).then(function(pe){for(var me=pe.failures,Se=pe.results,Oe=pe.numFailures,pe=pe.lastResult,Ae=0;Ae<te.length;++Ae){var Te=(Se||te)[Ae],De=de[Ae];Te==null?De.onerror&&De.onerror(me[Ae]):De.onsuccess&&De.onsuccess(K.type==="put"&&se[Ae]?K.values[Ae]:Te)}return{failures:me,results:Se,numFailures:Oe,lastResult:pe}}).catch(function(pe){return de.forEach(function(me){return me.onerror&&me.onerror(pe)}),Promise.reject(pe)})})}}})}})}};function ps(m,v,C){try{if(!v||v.keys.length<m.length)return null;for(var I=[],R=0,V=0;R<v.keys.length&&V<m.length;++R)yt(v.keys[R],m[V])===0&&(I.push(C?M(v.values[R]):v.values[R]),++V);return I.length===m.length?I:null}catch{return null}}var ru={stack:"dbcore",level:-1,create:function(m){return{table:function(v){var C=m.table(v);return r(r({},C),{getMany:function(I){if(!I.cache)return C.getMany(I);var R=ps(I.keys,I.trans._cache,I.cache==="clone");return R?_e.resolve(R):C.getMany(I).then(function(V){return I.trans._cache={keys:I.keys,values:I.cache==="clone"?M(V):V},V})},mutate:function(I){return I.type!=="add"&&(I.trans._cache=null),C.mutate(I)}})}}}};function iu(m,v){return m.trans.mode==="readonly"&&!!m.subscr&&!m.trans.explicit&&m.trans.db._options.cache!=="disabled"&&!v.schema.primaryKey.outbound}function kT(m,v){switch(m){case"query":return v.values&&!v.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var zF={stack:"dbcore",level:0,name:"Observability",create:function(m){var v=m.schema.name,C=new Fn(m.MIN_KEY,m.MAX_KEY);return r(r({},m),{transaction:function(I,R,V){if($e.subscr&&R!=="readonly")throw new oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($e.querier));return m.transaction(I,R,V)},table:function(I){var R=m.table(I),V=R.schema,U=V.primaryKey,K=V.indexes,W=U.extractKey,H=U.outbound,Z=U.autoIncrement&&K.filter(function(X){return X.compound&&X.keyPath.includes(U.keyPath)}),ee=r(r({},R),{mutate:function(X){function J(Ne){return Ne="idb://".concat(v,"/").concat(I,"/").concat(Ne),pe[Ne]||(pe[Ne]=new Fn)}var ne,te,se,de=X.trans,pe=X.mutatedParts||(X.mutatedParts={}),me=J(""),Se=J(":dels"),Oe=X.type,De=X.type==="deleteRange"?[X.range]:X.type==="delete"?[X.keys]:X.values.length<50?[hs(U,X).filter(function(Ne){return Ne}),X.values]:[],Ae=De[0],Te=De[1],De=X.trans._cache;return o(Ae)?(me.addKeys(Ae),(De=Oe==="delete"||Ae.length===Te.length?ps(Ae,De):null)||Se.addKeys(Ae),(De||Te)&&(ne=J,te=De,se=Te,V.indexes.forEach(function(Ne){var Re=ne(Ne.name||"");function ft(st){return st!=null?Ne.extractKey(st):null}function Ct(st){return Ne.multiEntry&&o(st)?st.forEach(function(bn){return Re.addKey(bn)}):Re.addKey(st)}(te||se).forEach(function(st,yr){var rt=te&&ft(te[yr]),yr=se&&ft(se[yr]);yt(rt,yr)!==0&&(rt!=null&&Ct(rt),yr!=null&&Ct(yr))})}))):Ae?(Te={from:(Te=Ae.lower)!==null&&Te!==void 0?Te:m.MIN_KEY,to:(Te=Ae.upper)!==null&&Te!==void 0?Te:m.MAX_KEY},Se.add(Te),me.add(Te)):(me.add(C),Se.add(C),V.indexes.forEach(function(Ne){return J(Ne.name).add(C)})),R.mutate(X).then(function(Ne){return!Ae||X.type!=="add"&&X.type!=="put"||(me.addKeys(Ne.results),Z&&Z.forEach(function(Re){for(var ft=X.values.map(function(rt){return Re.extractKey(rt)}),Ct=Re.keyPath.findIndex(function(rt){return rt===U.keyPath}),st=0,bn=Ne.results.length;st<bn;++st)ft[st][Ct]=Ne.results[st];J(Re.name).addKeys(ft)})),de.mutatedParts=ds(de.mutatedParts||{},pe),Ne})}}),K=function(J){var ne=J.query,J=ne.index,ne=ne.range;return[J,new Fn((J=ne.lower)!==null&&J!==void 0?J:m.MIN_KEY,(ne=ne.upper)!==null&&ne!==void 0?ne:m.MAX_KEY)]},re={get:function(X){return[U,new Fn(X.key)]},getMany:function(X){return[U,new Fn().addKeys(X.keys)]},count:K,query:K,openCursor:K};return a(re).forEach(function(X){ee[X]=function(J){var ne=$e.subscr,te=!!ne,se=iu($e,R)&&kT(X,J)?J.obsSet={}:ne;if(te){var de=function(Te){return Te="idb://".concat(v,"/").concat(I,"/").concat(Te),se[Te]||(se[Te]=new Fn)},pe=de(""),me=de(":dels"),ne=re[X](J),te=ne[0],ne=ne[1];if((X==="query"&&te.isPrimaryKey&&!J.values?me:de(te.name||"")).add(ne),!te.isPrimaryKey){if(X!=="count"){var Se=X==="query"&&H&&J.values&&R.query(r(r({},J),{values:!1}));return R[X].apply(this,arguments).then(function(Te){if(X==="query"){if(H&&J.values)return Se.then(function(ft){return ft=ft.result,pe.addKeys(ft),Te});var De=J.values?Te.result.map(W):Te.result;(J.values?pe:me).addKeys(De)}else if(X==="openCursor"){var Ne=Te,Re=J.values;return Ne&&Object.create(Ne,{key:{get:function(){return me.addKey(Ne.primaryKey),Ne.key}},primaryKey:{get:function(){var ft=Ne.primaryKey;return me.addKey(ft),ft}},value:{get:function(){return Re&&pe.addKey(Ne.primaryKey),Ne.value}}})}return Te})}me.add(C)}}return R[X].apply(this,arguments)}}),ee}})}};function IT(m,v,C){if(C.numFailures===0)return v;if(v.type==="deleteRange")return null;var I=v.keys?v.keys.length:"values"in v&&v.values?v.values.length:1;return C.numFailures===I?null:(v=r({},v),o(v.keys)&&(v.keys=v.keys.filter(function(R,V){return!(V in C.failures)})),"values"in v&&o(v.values)&&(v.values=v.values.filter(function(R,V){return!(V in C.failures)})),v)}function tx(m,v){return C=m,((I=v).lower===void 0||(I.lowerOpen?0<yt(C,I.lower):0<=yt(C,I.lower)))&&(m=m,(v=v).upper===void 0||(v.upperOpen?yt(m,v.upper)<0:yt(m,v.upper)<=0));var C,I}function NT(m,v,re,I,R,V){if(!re||re.length===0)return m;var U=v.query.index,W=U.multiEntry,H=v.query.range,Z=I.schema.primaryKey.extractKey,ee=U.extractKey,K=(U.lowLevelIndex||U).extractKey,re=re.reduce(function(X,J){var ne=X,te=[];if(J.type==="add"||J.type==="put")for(var se=new Fn,de=J.values.length-1;0<=de;--de){var pe,me=J.values[de],Se=Z(me);se.hasKey(Se)||(pe=ee(me),(W&&o(pe)?pe.some(function(Ne){return tx(Ne,H)}):tx(pe,H))&&(se.addKey(Se),te.push(me)))}switch(J.type){case"add":var Oe=new Fn().addKeys(v.values?X.map(function(Re){return Z(Re)}):X),ne=X.concat(v.values?te.filter(function(Re){return Re=Z(Re),!Oe.hasKey(Re)&&(Oe.addKey(Re),!0)}):te.map(function(Re){return Z(Re)}).filter(function(Re){return!Oe.hasKey(Re)&&(Oe.addKey(Re),!0)}));break;case"put":var Ae=new Fn().addKeys(J.values.map(function(Re){return Z(Re)}));ne=X.filter(function(Re){return!Ae.hasKey(v.values?Z(Re):Re)}).concat(v.values?te:te.map(function(Re){return Z(Re)}));break;case"delete":var Te=new Fn().addKeys(J.keys);ne=X.filter(function(Re){return!Te.hasKey(v.values?Z(Re):Re)});break;case"deleteRange":var De=J.range;ne=X.filter(function(Re){return!tx(Z(Re),De)})}return ne},m);return re===m?m:(re.sort(function(X,J){return yt(K(X),K(J))||yt(Z(X),Z(J))}),v.limit&&v.limit<1/0&&(re.length>v.limit?re.length=v.limit:m.length===v.limit&&re.length<v.limit&&(R.dirty=!0)),V?Object.freeze(re):re)}function DT(m,v){return yt(m.lower,v.lower)===0&&yt(m.upper,v.upper)===0&&!!m.lowerOpen==!!v.lowerOpen&&!!m.upperOpen==!!v.upperOpen}function VF(m,v){return function(C,I,R,V){if(C===void 0)return I!==void 0?-1:0;if(I===void 0)return 1;if((I=yt(C,I))===0){if(R&&V)return 0;if(R)return 1;if(V)return-1}return I}(m.lower,v.lower,m.lowerOpen,v.lowerOpen)<=0&&0<=function(C,I,R,V){if(C===void 0)return I!==void 0?1:0;if(I===void 0)return-1;if((I=yt(C,I))===0){if(R&&V)return 0;if(R)return-1;if(V)return 1}return I}(m.upper,v.upper,m.upperOpen,v.upperOpen)}function FF(m,v,C,I){m.subscribers.add(C),I.addEventListener("abort",function(){var R,V;m.subscribers.delete(C),m.subscribers.size===0&&(R=m,V=v,setTimeout(function(){R.subscribers.size===0&&Q(V,R)},3e3))})}var BF={stack:"dbcore",level:0,name:"Cache",create:function(m){var v=m.schema.name;return r(r({},m),{transaction:function(C,I,R){var V,U,W=m.transaction(C,I,R);return I==="readwrite"&&(U=(V=new AbortController).signal,R=function(H){return function(){if(V.abort(),I==="readwrite"){for(var Z=new Set,ee=0,K=C;ee<K.length;ee++){var re=K[ee],X=j["idb://".concat(v,"/").concat(re)];if(X){var J=m.table(re),ne=X.optimisticOps.filter(function(Re){return Re.trans===W});if(W._explicit&&H&&W.mutatedParts)for(var te=0,se=Object.values(X.queries.query);te<se.length;te++)for(var de=0,pe=(Oe=se[te]).slice();de<pe.length;de++)p((Ae=pe[de]).obsSet,W.mutatedParts)&&(Q(Oe,Ae),Ae.subscribers.forEach(function(Re){return Z.add(Re)}));else if(0<ne.length){X.optimisticOps=X.optimisticOps.filter(function(Re){return Re.trans!==W});for(var me=0,Se=Object.values(X.queries.query);me<Se.length;me++)for(var Oe,Ae,Te,De=0,Ne=(Oe=Se[me]).slice();De<Ne.length;De++)(Ae=Ne[De]).res!=null&&W.mutatedParts&&(H&&!Ae.dirty?(Te=Object.isFrozen(Ae.res),Te=NT(Ae.res,Ae.req,ne,J,Ae,Te),Ae.dirty?(Q(Oe,Ae),Ae.subscribers.forEach(function(Re){return Z.add(Re)})):Te!==Ae.res&&(Ae.res=Te,Ae.promise=_e.resolve({result:Te}))):(Ae.dirty&&Q(Oe,Ae),Ae.subscribers.forEach(function(Re){return Z.add(Re)})))}}}Z.forEach(function(Re){return Re()})}}},W.addEventListener("abort",R(!1),{signal:U}),W.addEventListener("error",R(!1),{signal:U}),W.addEventListener("complete",R(!0),{signal:U})),W},table:function(C){var I=m.table(C),R=I.schema.primaryKey;return r(r({},I),{mutate:function(V){var U=$e.trans;if(R.outbound||U.db._options.cache==="disabled"||U.explicit||U.idbtrans.mode!=="readwrite")return I.mutate(V);var W=j["idb://".concat(v,"/").concat(C)];return W?(U=I.mutate(V),V.type!=="add"&&V.type!=="put"||!(50<=V.values.length||hs(R,V).some(function(H){return H==null}))?(W.optimisticOps.push(V),V.mutatedParts&&ae(V.mutatedParts),U.then(function(H){0<H.numFailures&&(Q(W.optimisticOps,V),(H=IT(0,V,H))&&W.optimisticOps.push(H),V.mutatedParts&&ae(V.mutatedParts))}),U.catch(function(){Q(W.optimisticOps,V),V.mutatedParts&&ae(V.mutatedParts)})):U.then(function(H){var Z=IT(0,r(r({},V),{values:V.values.map(function(ee,K){var re;return H.failures[K]?ee:(ee=(re=R.keyPath)!==null&&re!==void 0&&re.includes(".")?M(ee):r({},ee),S(ee,R.keyPath,H.results[K]),ee)})}),H);W.optimisticOps.push(Z),queueMicrotask(function(){return V.mutatedParts&&ae(V.mutatedParts)})}),U):I.mutate(V)},query:function(V){if(!iu($e,I)||!kT("query",V))return I.query(V);var U=((Z=$e.trans)===null||Z===void 0?void 0:Z.db._options.cache)==="immutable",K=$e,W=K.requery,H=K.signal,Z=function(J,ne,te,se){var de=j["idb://".concat(J,"/").concat(ne)];if(!de)return[];if(!(ne=de.queries[te]))return[null,!1,de,null];var pe=ne[(se.query?se.query.index.name:null)||""];if(!pe)return[null,!1,de,null];switch(te){case"query":var me=pe.find(function(Se){return Se.req.limit===se.limit&&Se.req.values===se.values&&DT(Se.req.query.range,se.query.range)});return me?[me,!0,de,pe]:[pe.find(function(Se){return("limit"in Se.req?Se.req.limit:1/0)>=se.limit&&(!se.values||Se.req.values)&&VF(Se.req.query.range,se.query.range)}),!1,de,pe];case"count":return me=pe.find(function(Se){return DT(Se.req.query.range,se.query.range)}),[me,!!me,de,pe]}}(v,C,"query",V),ee=Z[0],K=Z[1],re=Z[2],X=Z[3];return ee&&K?ee.obsSet=V.obsSet:(K=I.query(V).then(function(J){var ne=J.result;if(ee&&(ee.res=ne),U){for(var te=0,se=ne.length;te<se;++te)Object.freeze(ne[te]);Object.freeze(ne)}else J.result=M(ne);return J}).catch(function(J){return X&&ee&&Q(X,ee),Promise.reject(J)}),ee={obsSet:V.obsSet,promise:K,subscribers:new Set,type:"query",req:V,dirty:!1},X?X.push(ee):(X=[ee],(re=re||(j["idb://".concat(v,"/").concat(C)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[V.query.index.name||""]=X)),FF(ee,X,W,H),ee.promise.then(function(J){return{result:NT(J.result,V,re==null?void 0:re.optimisticOps,I,ee,U)}})}})}})}};function Zm(m,v){return new Proxy(m,{get:function(C,I,R){return I==="db"?v:Reflect.get(C,I,R)}})}var Sa=(An.prototype.version=function(m){if(isNaN(m)||m<.1)throw new oe.Type("Given version is not a positive number");if(m=Math.round(10*m)/10,this.idbdb||this._state.isBeingOpened)throw new oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,m);var v=this._versions,C=v.filter(function(I){return I._cfg.version===m})[0];return C||(C=new this.Version(m),v.push(C),v.sort(Xc),C.stores({}),this._state.autoSchema=!1,C)},An.prototype._whenReady=function(m){var v=this;return this.idbdb&&(this._state.openComplete||$e.letThrough||this._vip)?m():new _e(function(C,I){if(v._state.openComplete)return I(new oe.DatabaseClosed(v._state.dbOpenError));if(!v._state.isBeingOpened){if(!v._state.autoOpen)return void I(new oe.DatabaseClosed);v.open().catch(ue)}v._state.dbReadyPromise.then(C,I)}).then(m)},An.prototype.use=function(m){var v=m.stack,C=m.create,I=m.level,R=m.name;return R&&this.unuse({stack:v,name:R}),m=this._middlewares[v]||(this._middlewares[v]=[]),m.push({stack:v,create:C,level:I??10,name:R}),m.sort(function(V,U){return V.level-U.level}),this},An.prototype.unuse=function(m){var v=m.stack,C=m.name,I=m.create;return v&&this._middlewares[v]&&(this._middlewares[v]=this._middlewares[v].filter(function(R){return I?R.create!==I:!!C&&R.name!==C})),this},An.prototype.open=function(){var m=this;return Di(Wr,function(){return ut(m)})},An.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var m=this._state,v=ba.indexOf(this);if(0<=v&&ba.splice(v,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}m.isBeingOpened||(m.dbReadyPromise=new _e(function(C){m.dbReadyResolve=C}),m.openCanceller=new _e(function(C,I){m.cancelOpen=I}))},An.prototype.close=function(C){var v=(C===void 0?{disableAutoOpen:!0}:C).disableAutoOpen,C=this._state;v?(C.isBeingOpened&&C.cancelOpen(new oe.DatabaseClosed),this._close(),C.autoOpen=!1,C.dbOpenError=new oe.DatabaseClosed):(this._close(),C.autoOpen=this._options.autoOpen||C.isBeingOpened,C.openComplete=!1,C.dbOpenError=null)},An.prototype.delete=function(m){var v=this;m===void 0&&(m={disableAutoOpen:!0});var C=0<arguments.length&&typeof arguments[0]!="object",I=this._state;return new _e(function(R,V){function U(){v.close(m);var W=v._deps.indexedDB.deleteDatabase(v.name);W.onsuccess=Kt(function(){var H,Z,ee;H=v._deps,Z=v.name,ee=H.indexedDB,H=H.IDBKeyRange,tu(ee)||Z===_l||eu(ee,H).delete(Z).catch(ue),R()}),W.onerror=Kr(V),W.onblocked=v._fireOnBlocked}if(C)throw new oe.InvalidArgument("Invalid closeOptions argument to db.delete()");I.isBeingOpened?I.dbReadyPromise.then(U):U()})},An.prototype.backendDB=function(){return this.idbdb},An.prototype.isOpen=function(){return this.idbdb!==null},An.prototype.hasBeenClosed=function(){var m=this._state.dbOpenError;return m&&m.name==="DatabaseClosed"},An.prototype.hasFailed=function(){return this._state.dbOpenError!==null},An.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(An.prototype,"tables",{get:function(){var m=this;return a(this._allTables).map(function(v){return m._allTables[v]})},enumerable:!1,configurable:!0}),An.prototype.transaction=function(){var m=(function(v,C,I){var R=arguments.length;if(R<2)throw new oe.InvalidArgument("Too few arguments");for(var V=new Array(R-1);--R;)V[R-1]=arguments[R];return I=V.pop(),[v,z(V),I]}).apply(this,arguments);return this._transaction.apply(this,m)},An.prototype._transaction=function(m,v,C){var I=this,R=$e.trans;R&&R.db===this&&m.indexOf("!")===-1||(R=null);var V,U,W=m.indexOf("?")!==-1;m=m.replace("!","").replace("?","");try{if(U=v.map(function(Z){if(Z=Z instanceof I.Table?Z.name:Z,typeof Z!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Z}),m=="r"||m===Kc)V=Kc;else{if(m!="rw"&&m!=Sl)throw new oe.InvalidArgument("Invalid transaction mode: "+m);V=Sl}if(R){if(R.mode===Kc&&V===Sl){if(!W)throw new oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");R=null}R&&U.forEach(function(Z){if(R&&R.storeNames.indexOf(Z)===-1){if(!W)throw new oe.SubTransaction("Table "+Z+" not included in parent transaction.");R=null}}),W&&R&&!R.active&&(R=null)}}catch(Z){return R?R._promise(null,function(ee,K){K(Z)}):qt(Z)}var H=(function Z(ee,K,re,X,J){return _e.resolve().then(function(){var ne=$e.transless||$e,te=ee._createTransaction(K,re,ee._dbSchema,X);if(te.explicit=!0,ne={trans:te,transless:ne},X)te.idbtrans=X.idbtrans;else try{te.create(),te.idbtrans._explicit=!0,ee._state.PR1398_maxLoop=3}catch(pe){return pe.name===Ce.InvalidState&&ee.isOpen()&&0<--ee._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ee.close({disableAutoOpen:!1}),ee.open().then(function(){return Z(ee,K,re,null,J)})):qt(pe)}var se,de=ce(J);return de&&Rs(),ne=_e.follow(function(){var pe;(se=J.call(te,te))&&(de?(pe=Ni.bind(null,null),se.then(pe,pe)):typeof se.next=="function"&&typeof se.throw=="function"&&(se=hn(se)))},ne),(se&&typeof se.then=="function"?_e.resolve(se).then(function(pe){return te.active?pe:qt(new oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ne.then(function(){return se})).then(function(pe){return X&&te._resolve(),te._completion.then(function(){return pe})}).catch(function(pe){return te._reject(pe),qt(pe)})})}).bind(null,this,V,U,R,C);return R?R._promise(V,H,"lock"):$e.trans?Di($e.transless,function(){return I._whenReady(H)}):this._whenReady(H)},An.prototype.table=function(m){if(!d(this._allTables,m))throw new oe.InvalidTable("Table ".concat(m," does not exist"));return this._allTables[m]},An);function An(m,v){var C=this;this._middlewares={},this.verno=0;var I=An.dependencies;this._options=v=r({addons:An.addons,autoOpen:!0,indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange,cache:"cloned"},v),this._deps={indexedDB:v.indexedDB,IDBKeyRange:v.IDBKeyRange},I=v.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var R,V,U,W,H,Z={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ue,dbReadyPromise:null,cancelOpen:ue,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:v.autoOpen};Z.dbReadyPromise=new _e(function(K){Z.dbReadyResolve=K}),Z.openCanceller=new _e(function(K,re){Z.cancelOpen=re}),this._state=Z,this.name=m,this.on=Dt(this,"populate","blocked","versionchange","close",{ready:[Ge,ue]}),this.once=function(K,re){var X=function(){for(var J=[],ne=0;ne<arguments.length;ne++)J[ne]=arguments[ne];C.on(K).unsubscribe(X),re.apply(C,J)};return C.on(K,X)},this.on.ready.subscribe=E(this.on.ready.subscribe,function(K){return function(re,X){An.vip(function(){var J,ne=C._state;ne.openComplete?(ne.dbOpenError||_e.resolve().then(re),X&&K(re)):ne.onReadyBeingFired?(ne.onReadyBeingFired.push(re),X&&K(re)):(K(re),J=C,X||K(function te(){J.on.ready.unsubscribe(re),J.on.ready.unsubscribe(te)}))})}}),this.Collection=(R=this,Ls(wa.prototype,function(se,te){this.db=R;var X=Ad,J=null;if(te)try{X=te()}catch(de){J=de}var ne=se._ctx,te=ne.table,se=te.hook.reading.fire;this._ctx={table:te,index:ne.index,isPrimKey:!ne.index||te.schema.primKey.keyPath&&ne.index===te.schema.primKey.name,range:X,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:J,or:ne.or,valueMapper:se!==ht?se:null}})),this.Table=(V=this,Ls(lo.prototype,function(K,re,X){this.db=V,this._tx=X,this.name=K,this.schema=re,this.hook=V._allTables[K]?V._allTables[K].hook:Dt(null,{creating:[Fe,ue],reading:[ye,ht],updating:[et,ue],deleting:[Tt,ue]})})),this.Transaction=(U=this,Ls(Hm.prototype,function(K,re,X,J,ne){var te=this;K!=="readonly"&&re.forEach(function(se){se=(se=X[se])===null||se===void 0?void 0:se.yProps,se&&(re=re.concat(se.map(function(de){return de.updatesTable})))}),this.db=U,this.mode=K,this.storeNames=re,this.schema=X,this.chromeTransactionDurability=J,this.idbtrans=null,this.on=Dt(this,"complete","error","abort"),this.parent=ne||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _e(function(se,de){te._resolve=se,te._reject=de}),this._completion.then(function(){te.active=!1,te.on.complete.fire()},function(se){var de=te.active;return te.active=!1,te.on.error.fire(se),te.parent?te.parent._reject(se):de&&te.idbtrans&&te.idbtrans.abort(),qt(se)})})),this.Version=(W=this,Ls(Qm.prototype,function(K){this.db=W,this._cfg={version:K,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(H=this,Ls(cs.prototype,function(K,re,X){if(this.db=H,this._ctx={table:K,index:re===":id"?null:re,or:X},this._cmp=this._ascending=yt,this._descending=function(J,ne){return yt(ne,J)},this._max=function(J,ne){return 0<yt(J,ne)?J:ne},this._min=function(J,ne){return yt(J,ne)<0?J:ne},this._IDBKeyRange=H._deps.IDBKeyRange,!this._IDBKeyRange)throw new oe.MissingAPI})),this.on("versionchange",function(K){0<K.newVersion?console.warn("Another connection wants to upgrade database '".concat(C.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(C.name,"'. Closing db now to resume the delete request.")),C.close({disableAutoOpen:!1})}),this.on("blocked",function(K){!K.newVersion||K.newVersion<K.oldVersion?console.warn("Dexie.delete('".concat(C.name,"') was blocked")):console.warn("Upgrade '".concat(C.name,"' blocked by other connection holding version ").concat(K.oldVersion/10))}),this._maxKey=fo(v.IDBKeyRange),this._createTransaction=function(K,re,X,J){return new C.Transaction(K,re,X,C._options.chromeTransactionDurability,J)},this._fireOnBlocked=function(K){C.on("blocked").fire(K),ba.filter(function(re){return re.name===C.name&&re!==C&&!re._state.vcFired}).map(function(re){return re.on("versionchange").fire(K)})},this.use(ru),this.use(BF),this.use(zF),this.use(kn),this.use(Bs);var ee=new Proxy(this,{get:function(K,re,X){if(re==="_vip")return!0;if(re==="table")return function(ne){return Zm(C.table(ne),ee)};var J=Reflect.get(K,re,X);return J instanceof lo?Zm(J,ee):re==="tables"?J.map(function(ne){return Zm(ne,ee)}):re==="_createTransaction"?function(){return Zm(J.apply(this,arguments),ee)}:J}});this.vip=ee,I.forEach(function(K){return K(C)})}var Jm,Ri=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",UF=(nx.prototype.subscribe=function(m,v,C){return this._subscribe(m&&typeof m!="function"?m:{next:m,error:v,complete:C})},nx.prototype[Ri]=function(){return this},nx);function nx(m){this._subscribe=m}try{Jm={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Jm={indexedDB:null,IDBKeyRange:null}}function MT(m){var v,C=!1,I=new UF(function(R){var V=ce(m),U,W=!1,H={},Z={},ee={get closed(){return W},unsubscribe:function(){W||(W=!0,U&&U.abort(),K&&qr.storagemutated.unsubscribe(X))}};R.start&&R.start(ee);var K=!1,re=function(){return wl(J)},X=function(ne){ds(H,ne),p(Z,H)&&re()},J=function(){var ne,te,se;!W&&Jm.indexedDB&&(H={},ne={},U&&U.abort(),U=new AbortController,se=function(de){var pe=ir();try{V&&Rs();var me=ss(m,de);return me=V?me.finally(Ni):me}finally{pe&&Ii()}}(te={subscr:ne,signal:U.signal,requery:re,querier:m,trans:null}),Promise.resolve(se).then(function(de){C=!0,v=de,W||te.signal.aborted||(H={},function(pe){for(var me in pe)if(d(pe,me))return;return 1}(Z=ne)||K||(qr(uo,X),K=!0),wl(function(){return!W&&R.next&&R.next(de)}))},function(de){C=!1,["DatabaseClosedError","AbortError"].includes(de==null?void 0:de.name)||W||wl(function(){W||R.error&&R.error(de)})}))};return setTimeout(re,0),ee});return I.hasValue=function(){return C},I.getValue=function(){return v},I}var Il=Sa;function rx(m){var v=yo;try{yo=!0,qr.storagemutated.fire(m),fe(m,!0)}finally{yo=v}}h(Il,r(r({},We),{delete:function(m){return new Il(m,{addons:[]}).delete()},exists:function(m){return new Il(m,{addons:[]}).open().then(function(v){return v.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(m){try{return v=Il.dependencies,C=v.indexedDB,v=v.IDBKeyRange,(tu(C)?Promise.resolve(C.databases()).then(function(I){return I.map(function(R){return R.name}).filter(function(R){return R!==_l})}):eu(C,v).toCollection().primaryKeys()).then(m)}catch{return qt(new oe.MissingAPI)}var v,C},defineClass:function(){return function(m){l(this,m)}},ignoreTransaction:function(m){return $e.trans?Di($e.transless,m):m()},vip:fs,async:function(m){return function(){try{var v=hn(m.apply(this,arguments));return v&&typeof v.then=="function"?v:_e.resolve(v)}catch(C){return qt(C)}}},spawn:function(m,v,C){try{var I=hn(m.apply(C,v||[]));return I&&typeof I.then=="function"?I:_e.resolve(I)}catch(R){return qt(R)}},currentTransaction:{get:function(){return $e.trans||null}},waitFor:function(m,v){return v=_e.resolve(typeof m=="function"?Il.ignoreTransaction(m):m).timeout(v||6e4),$e.trans?$e.trans.waitFor(v):v},Promise:_e,debug:{get:function(){return He},set:function(m){Pt(m)}},derive:y,extend:l,props:h,override:E,Events:Dt,on:qr,liveQuery:MT,extendObservabilitySet:ds,getByKeyPath:P,setByKeyPath:S,delByKeyPath:function(m,v){typeof v=="string"?S(m,v,void 0):"length"in v&&[].map.call(v,function(C){S(m,C,void 0)})},shallowClone:T,deepClone:M,getObjectDiff:Yr,cmp:yt,asap:A,minKey:-1/0,addons:[],connections:ba,errnames:Ce,dependencies:Jm,cache:j,semVer:"4.2.0",version:"4.2.0".split(".").map(function(m){return parseInt(m)}).reduce(function(m,v,C){return m+v/Math.pow(10,2*C)})})),Il.maxKey=fo(Il.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(qr(uo,function(m){yo||(m=new CustomEvent(_a,{detail:m}),yo=!0,dispatchEvent(m),yo=!1)}),addEventListener(_a,function(m){m=m.detail,yo||rx(m)}));var su,yo=!1,RT=function(){};return typeof BroadcastChannel<"u"&&((RT=function(){(su=new BroadcastChannel(_a)).onmessage=function(m){return m.data&&rx(m.data)}})(),typeof su.unref=="function"&&su.unref(),qr(uo,function(m){yo||su.postMessage(m)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(m){if(!Sa.disableBfCache&&m.persisted){He&&console.debug("Dexie: handling persisted pagehide"),su!=null&&su.close();for(var v=0,C=ba;v<C.length;v++)C[v].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(m){!Sa.disableBfCache&&m.persisted&&(He&&console.debug("Dexie: handling persisted pageshow"),RT(),rx({all:new Fn(-1/0,[[]])}))})),_e.rejectionMapper=function(m,v){return!m||m instanceof ke||m instanceof TypeError||m instanceof SyntaxError||!m.name||!Be[m.name]?m:(v=new Be[m.name](v||m.message,m),"stack"in m&&b(v,"stack",{get:function(){return this.inner.stack}}),v)},Pt(He),r(Sa,Object.freeze({__proto__:null,Dexie:Sa,liveQuery:MT,Entity:Td,cmp:yt,PropModification:Tl,replacePrefix:function(m,v){return new Tl({replacePrefix:[m,v]})},add:function(m){return new Tl({add:m})},remove:function(m){return new Tl({remove:m})},default:Sa,RangeSet:Fn,mergeRanges:go,rangesOverlap:kl}),{default:Sa}),Sa})})(b3);var PH=b3.exports;const i_=Wt(PH),pj=Symbol.for("Dexie"),mf=globalThis[pj]||(globalThis[pj]=i_);if(i_.semVer!==mf.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${i_.semVer} and ${mf.semVer}`);const{liveQuery:uje,mergeRanges:fje,rangesOverlap:dje,RangeSet:hje,cmp:pje,Entity:mje,PropModification:gje,replacePrefix:yje,add:vje,remove:bje,DexieYProvider:xje}=mf,x3="LactoKeeperDB",CH=1;class jH extends mf{constructor(){super(x3);$i(this,"animals");$i(this,"fathers");$i(this,"parturitions");$i(this,"weighings");$i(this,"lots");$i(this,"origins");$i(this,"breedingGroups");$i(this,"serviceRecords");$i(this,"events");$i(this,"feedingPlans");$i(this,"bodyWeighings");this.version(CH).stores({animals:"&id, createdAt, status, isReference, location",fathers:"&id",parturitions:"++id, goatId, sireId, status",weighings:"++id, goatId, date",lots:"++id, &name",origins:"++id, &name",breedingGroups:"++id, sireId, status",serviceRecords:"++id, breedingGroupId, femaleId",events:"++id, animalId, date, type",feedingPlans:"++id, lotName",bodyWeighings:"++id, animalId, date"})}}let Oh=null;const OH=async()=>{if(Oh)return Oh;const t=new jH;try{return await t.open(),console.log("Base de datos local abierta con éxito."),Oh=t,t}catch(e){return console.error("Error al abrir la base de datos local. Podría ser un problema de migración.",e),confirm("LactoKeeper ha sido actualizado y necesita reiniciar la base de datos local. Tus datos en la nube están a salvo. ¿Deseas continuar? La aplicación se recargará.")?(await mf.delete(x3),window.location.reload()):alert("La aplicación no puede continuar sin una base de datos funcional. Por favor, recarga la página e intenta de nuevo."),new Promise(()=>{})}},w3=()=>{if(!Oh)throw new Error("La base de datos no ha sido inicializada. Llama a initDB() primero.");return Oh},_3=L.createContext({animals:[],fathers:[],weighings:[],parturitions:[],lots:[],origins:[],breedingGroups:[],serviceRecords:[],events:[],feedingPlans:[],bodyWeighings:[],isLoading:!0,syncStatus:"idle",addAnimal:async()=>{},updateAnimal:async()=>{},deleteAnimalPermanently:async()=>{},startDryingProcess:async()=>{},setLactationAsDry:async()=>{},addLot:async()=>{},deleteLot:async()=>{},addOrigin:async()=>{},deleteOrigin:async()=>{},addBreedingGroup:async()=>"",updateBreedingGroup:async()=>{},deleteBreedingGroup:async()=>{},addServiceRecord:async()=>{},addFeedingPlan:async()=>{},addBatchEvent:async()=>{},addWeighing:async()=>{},addBodyWeighing:async()=>{},addParturition:async()=>{},fetchData:async()=>{},addFather:async()=>{}}),At=()=>L.useContext(_3),kH=({children:t})=>{const{currentUser:e}=v3(),[n,r]=L.useState([]),[i,s]=L.useState([]),[a,o]=L.useState([]),[l,c]=L.useState([]),[f,d]=L.useState([]),[h,g]=L.useState([]),[b,y]=L.useState([]),[x,w]=L.useState([]),[_,E]=L.useState([]),[O,A]=L.useState([]),[P,S]=L.useState([]),[T,k]=L.useState(!0),[z,N]=L.useState(navigator.onLine?"idle":"offline"),$=L.useRef(null),M=L.useCallback(async()=>{try{const ye=w3(),[xe,Fe,Tt,et,lt,Ge,He,Pt,on,dn,en]=await Promise.all([ye.animals.toArray(),ye.fathers.toArray(),ye.weighings.toArray(),ye.parturitions.toArray(),ye.lots.toArray(),ye.origins.toArray(),ye.breedingGroups.toArray(),ye.serviceRecords.toArray(),ye.events.toArray(),ye.feedingPlans.toArray(),ye.bodyWeighings.toArray()]);r(xe),s(Fe),o(Tt),c(et),d(lt),g(Ge),y(He),w(Pt),E(on),A(dn),S(en)}catch(ye){console.error("Error al cargar datos locales:",ye)}finally{k(!1)}},[]);L.useEffect(()=>{let ye=[];const xe=()=>N("idle"),Fe=()=>N("offline");return window.addEventListener("online",xe),window.addEventListener("offline",Fe),(async()=>{if(!e){k(!1),r([]),s([]),o([]),c([]),d([]),g([]),y([]),w([]),E([]),A([]),S([]);return}k(!0);try{const et=await OH();await M();const lt=He=>mH(Qr(Lt,He),gH("userId","==",e.uid)),Ge=(He,Pt)=>{const on=wH(lt(He),async dn=>{if(dn.docChanges().length>0&&(console.log(`[Sync] Recibidos ${dn.docChanges().length} cambios para '${He}'. Actualizando DB local.`),navigator.onLine&&(N("syncing"),$.current&&clearTimeout($.current),$.current=setTimeout(()=>{N("idle")},2e3))),dn.metadata.hasPendingWrites)return;const en=[];for(const Vn of dn.docChanges()){const Ur={...Vn.doc.data(),id:Vn.doc.id};(Vn.type==="added"||Vn.type==="modified")&&en.push(Pt.put(Ur)),Vn.type==="removed"&&en.push(Pt.delete(Vn.doc.id))}en.length>0&&(await Promise.all(en),M())},dn=>{dn.code!=="permission-denied"&&console.error(`Error sincronizando ${He}:`,dn)});ye.push(on)};Ge("animals",et.animals),Ge("fathers",et.fathers),Ge("parturitions",et.parturitions),Ge("weighings",et.weighings),Ge("lots",et.lots),Ge("origins",et.origins),Ge("breedingGroups",et.breedingGroups),Ge("serviceRecords",et.serviceRecords),Ge("events",et.events),Ge("feedingPlans",et.feedingPlans),Ge("bodyWeighings",et.bodyWeighings)}catch(et){console.error("Fallo crítico en la inicialización de DataProvider:",et)}})(),()=>{ye.forEach(et=>et()),window.removeEventListener("online",xe),window.removeEventListener("offline",Fe),$.current&&clearTimeout($.current)}},[e,M]);const Y=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ea(Qr(Lt,"events"),{...ye,userId:e.uid})},q=async ye=>{if(!e)throw new Error("Usuario no autenticado");const xe=_r(Lt,"animals",ye.id.toUpperCase());await xH(xe,{...ye,id:ye.id.toUpperCase(),userId:e.uid,createdAt:Date.now()})},ie=async(ye,xe)=>{if(!e)throw new Error("Usuario no autenticado");const Fe=_r(Lt,"animals",ye),Tt=await bH(Fe);if(!Tt.exists())throw new Error("El animal no existe.");const et=Tt.data(),lt=new Date().toISOString().split("T")[0];if(xe.location!==void 0&&xe.location!==et.location&&await Y({animalId:ye,date:lt,type:"Movimiento",details:`Movido del lote '${et.location||"N/A"}' al lote '${xe.location||"Sin Asignar"}'`}),xe.status&&xe.status!==et.status){let Ge=`Estado cambiado de '${et.status}' a '${xe.status}'`;xe.status==="Venta"&&(Ge=`Vendido por ${xe.salePrice||"precio no especificado"}. Comprador: ${xe.saleBuyer||"N/A"}. Fin: ${xe.salePurpose||"N/A"}.`),xe.status==="Muerte"&&(Ge=`Muerte. Causa: ${xe.deathReason||"No especificada"}.`),xe.status==="Descarte"&&(Ge=`Descarte. Causa: ${xe.cullReason||"No especificada"}. ${xe.cullReasonDetails||""}`),await Y({animalId:ye,date:xe.endDate||lt,type:"Cambio de Estado",details:Ge})}await Eg(Fe,xe)},le=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ag(_r(Lt,"animals",ye))},Q=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Eg(_r(Lt,"parturitions",ye),{status:"en-secado",dryingStartDate:new Date().toISOString().split("T")[0]})},G=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Eg(_r(Lt,"parturitions",ye),{status:"seca"})},he=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ea(Qr(Lt,"lots"),{name:ye,userId:e.uid})},ce=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ag(_r(Lt,"lots",ye))},we=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ea(Qr(Lt,"origins"),{name:ye,userId:e.uid})},ke=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ag(_r(Lt,"origins",ye))},Ue=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ea(Qr(Lt,"weighings"),{...ye,userId:e.uid})},ct=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ea(Qr(Lt,"bodyWeighings"),{...ye,userId:e.uid})},ot=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ea(Qr(Lt,"fathers"),{...ye,userId:e.uid})},Ce=async ye=>{if(!e)throw new Error("Usuario no autenticado");const xe=rv(Lt),Fe=ye.motherId.toUpperCase(),Tt=_r(Lt,"animals",Fe);xe.set(Tt,{id:Fe,sex:"Hembra",status:"Activo",birthDate:"N/A",userId:e.uid},{merge:!0});const et=_r(Qr(Lt,"parturitions"));xe.set(et,{goatId:Fe,parturitionDate:ye.parturitionDate,sireId:ye.sireId,offspringCount:ye.offspring.length,parturitionType:ye.parturitionType,status:"activa",userId:e.uid}),ye.offspring.forEach(lt=>{const Ge=lt.id.toUpperCase(),He=_r(Lt,"animals",Ge),Pt={id:Ge,sex:lt.sex,status:lt.sex==="Macho"?"Descartado":"Activo",birthDate:ye.parturitionDate,motherId:Fe,fatherId:ye.sireId,birthWeight:parseFloat(lt.birthWeight),userId:e.uid,createdAt:Date.now()};xe.set(He,Pt,{merge:!0})}),await xe.commit()},Ye=async ye=>{if(!e)throw new Error("Usuario no autenticado");return(await Ea(Qr(Lt,"breedingGroups"),{...ye,userId:e.uid})).id},oe=async(ye,xe)=>{if(!e)throw new Error("Usuario no autenticado");const Fe=_r(Lt,"breedingGroups",ye);await Eg(Fe,xe)},Be=async ye=>{if(!e)throw new Error("Usuario no autenticado");const xe=_r(Lt,"breedingGroups",ye);await Ag(xe)},We=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ea(Qr(Lt,"serviceRecords"),{...ye,userId:e.uid})},ue=async ye=>{if(!e)throw new Error("Usuario no autenticado");const xe=n.filter(et=>et.location===ye.lotName);if(xe.length===0){console.warn(`No se encontraron animales en el lote "${ye.lotName}" para registrar el evento.`);return}const Fe=rv(Lt),Tt=Qr(Lt,"events");xe.forEach(et=>{const lt=_r(Tt),Ge={animalId:et.id,date:ye.date,type:ye.type,details:ye.details,lotName:ye.lotName,notes:`Evento aplicado a todo el lote: ${ye.lotName}`};Fe.set(lt,{...Ge,userId:e.uid})}),await Fe.commit()},ht=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ea(Qr(Lt,"feedingPlans"),{...ye,userId:e.uid})};return u.jsx(_3.Provider,{value:{animals:n,fathers:i,weighings:a,parturitions:l,lots:f,origins:h,breedingGroups:b,serviceRecords:x,events:_,feedingPlans:O,bodyWeighings:P,isLoading:T,syncStatus:z,addAnimal:q,updateAnimal:ie,deleteAnimalPermanently:le,startDryingProcess:Q,setLactationAsDry:G,addLot:he,deleteLot:ce,addOrigin:we,deleteOrigin:ke,addBreedingGroup:Ye,updateBreedingGroup:oe,deleteBreedingGroup:Be,addServiceRecord:We,addFeedingPlan:ht,addBatchEvent:ue,addWeighing:Ue,addBodyWeighing:ct,addParturition:Ce,fetchData:M,addFather:ot},children:t})};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S3=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>L.createElement("svg",{ref:l,...NH,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:S3("lucide",i),...o},[...a.map(([c,f])=>L.createElement(c,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(t,e)=>{const n=L.forwardRef(({className:r,...i},s)=>L.createElement(DH,{ref:s,iconNode:e,className:S3(`lucide-${IH(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=Ie("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=Ie("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=Ie("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=Ie("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=Ie("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=Ie("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=Ie("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=Ie("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=Ie("CalendarCheck2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=Ie("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=Ie("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=Ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=Ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=Ie("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=Ie("CircleOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.35 2.69A10 10 0 0 1 21.3 15.65",key:"1pfsoa"}],["path",{d:"M19.08 19.08A10 10 0 1 1 4.92 4.92",key:"1ablyi"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=Ie("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=Ie("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=Ie("CloudCog",[["circle",{cx:"12",cy:"17",r:"3",key:"1spfwm"}],["path",{d:"M4.2 15.1A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.2",key:"zaobp"}],["path",{d:"m15.7 18.4-.9-.3",key:"4qxpbn"}],["path",{d:"m9.2 15.9-.9-.3",key:"17q7o2"}],["path",{d:"m10.6 20.7.3-.9",key:"1pf4s2"}],["path",{d:"m13.1 14.2.3-.9",key:"1mnuqm"}],["path",{d:"m13.6 20.7-.4-1",key:"1jpd1m"}],["path",{d:"m10.8 14.3-.4-1",key:"17ugyy"}],["path",{d:"m8.3 18.6 1-.4",key:"s42vdx"}],["path",{d:"m14.7 15.8 1-.4",key:"2wizun"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=Ie("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=Ie("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=Ie("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=Ie("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=Ie("Feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=Ie("FileArchive",[["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v18",key:"1oywqq"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=Ie("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=Ie("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=Ie("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=Ie("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=Ie("HeartCrack",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"m12 13-1-1 2-2-3-3 2-2",key:"xjdxli"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=Ie("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=Ie("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=Ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=Ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=Ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=Ie("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=Ie("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nG=Ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rG=Ie("Milk",[["path",{d:"M8 2h8",key:"1ssgc1"}],["path",{d:"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2",key:"qtp12x"}],["path",{d:"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"ygeh44"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=Ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iG=Ie("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=Ie("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sG=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=Ie("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oG=Ie("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=Ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=Ie("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=Ie("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lG=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=Ie("Sigma",[["path",{d:"M18 7V4H6l6 8-6 8h12v-3",key:"zis8ev"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=Ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cG=Ie("SquareActivity",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=Ie("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Ie("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=Ie("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uG=Ie("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fG=Ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=Ie("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dG=Ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hG=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pG=Ie("Waypoints",[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=Ie("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=Ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),mG=()=>{const[t,e]=L.useState(!0),[n,r]=L.useState(""),[i,s]=L.useState(""),[a,o]=L.useState(null),[l,c]=L.useState(!1),f=async()=>{if(window.confirm("¿Estás seguro de que quieres forzar la eliminación de la base de datos local? Esto no afectará tus datos en la nube."))try{await mf.delete("LactoKeeperDB_v6"),alert("Base de datos local eliminada con éxito. La página se recargará."),window.location.reload()}catch(g){alert("Error al eliminar la base de datos."),console.error(g)}},d=g=>{if(g.code==="auth/network-request-failed")return"No hay conexión a internet. Se requiere conexión para iniciar sesión.";switch(g.code){case"auth/invalid-email":return"El formato del correo electrónico no es válido.";case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Correo electrónico o contraseña incorrectos.";case"auth/email-already-in-use":return"Este correo electrónico ya está registrado.";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres.";default:return console.error("Firebase Auth Error:",g),"Ocurrió un error inesperado. Por favor, intenta de nuevo."}},h=async g=>{g.preventDefault(),o(null),c(!0);try{t?await JU(pf,n,i):await ZU(pf,n,i)}catch(b){o(d(b))}finally{c(!1)}};return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 font-sans",children:u.jsxs("div",{className:"w-full max-w-sm",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[u.jsx(xm,{className:"w-10 h-10 text-brand-orange"}),u.jsx("h1",{className:"text-4xl font-bold text-white",children:"LactoKeeper"})]}),u.jsx("p",{className:"text-zinc-400",children:"Tu gestión de rebaño, en la nube."})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-6 border border-brand-border",children:[u.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full mb-6",children:[u.jsx("button",{onClick:()=>e(!0),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"bg-zinc-700 text-white":"text-zinc-400 hover:bg-zinc-800/50"}`,children:"Iniciar Sesión"}),u.jsx("button",{onClick:()=>e(!1),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"text-zinc-400 hover:bg-zinc-800/50":"bg-zinc-700 text-white"}`,children:"Registrarse"})]}),u.jsxs("form",{onSubmit:h,className:"space-y-4",children:[u.jsx("input",{type:"email",value:n,onChange:g=>r(g.target.value),placeholder:"Correo electrónico",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),u.jsx("input",{type:"password",value:i,onChange:g=>s(g.target.value),placeholder:"Contraseña",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),a&&u.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[u.jsx(zr,{size:18}),u.jsx("span",{children:a})]}),u.jsx("button",{type:"submit",disabled:l,className:"w-full bg-brand-orange text-white font-bold py-3 rounded-xl transition-colors hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Procesando...":t?"Iniciar Sesión":"Crear Cuenta"})]})]}),u.jsxs("div",{className:"mt-6 text-center",children:[u.jsxs("button",{onClick:f,className:"flex items-center justify-center gap-2 mx-auto bg-brand-red/20 text-brand-red font-semibold py-2 px-4 rounded-lg border border-brand-red/50 hover:bg-brand-red/30 transition-colors",children:[u.jsx(td,{size:16}),"Forzar Reinicio de DB Local"]}),u.jsx("p",{className:"text-xs text-zinc-600 mt-2",children:"Si la app no carga, usa este botón."})]})]})})},St=({isOpen:t,onClose:e,title:n,children:r,size:i="default"})=>{if(!t)return null;const s=i==="fullscreen"?"items-end":"items-center",a={default:"max-w-md m-4 rounded-2xl",large:"max-w-xl m-4 rounded-2xl",fullscreen:"w-full h-[95vh] rounded-t-2xl flex flex-col"};return u.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center z-50 animate-fade-in ${s}`,onClick:e,children:u.jsxs("div",{className:`bg-ios-modal-bg border border-zinc-700/80 shadow-2xl text-white transform transition-all animate-slide-up ${a[i]}`,onClick:o=>o.stopPropagation(),children:[u.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-zinc-800/80",children:[u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:n}),u.jsx("button",{onClick:e,className:"p-1 rounded-full text-zinc-500 hover:text-white hover:bg-zinc-700/50 transition-colors",children:u.jsx(Mc,{size:20})})]}),u.jsx("div",{className:i==="fullscreen"?"flex-1 overflow-y-auto p-4":"p-6",children:r})]})})},z3=({isOpen:t,onClose:e})=>{const{addLot:n}=At(),[r,i]=L.useState(""),[s,a]=L.useState(""),o=async()=>{if(r.trim()===""){a("El nombre del lote no puede estar vacío.");return}try{await n(r),i(""),a(""),e()}catch(c){a("No se pudo guardar el lote."),console.error(c)}},l=()=>{i(""),a(""),e()};return u.jsx(St,{isOpen:t,onClose:l,title:"Crear Nuevo Lote",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la nueva ubicación o lote en tu finca."}),u.jsx("div",{children:u.jsx("input",{type:"text",value:r,onChange:c=>i(c.target.value),placeholder:"Ej: Cabritonas Servicio",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})}),s&&u.jsx("p",{className:"text-sm text-brand-red",children:s}),u.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[u.jsx("button",{onClick:l,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),u.jsx("button",{onClick:o,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Lote"})]})]})})},V3=L.createContext({});function Rc(t){const e=L.useRef(null);return e.current===null&&(e.current=t()),e.current}const $E=L.createContext(null),LE=L.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function gG(t=!0){const e=L.useContext($E);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=L.useId();L.useEffect(()=>{t&&i(s)},[t]);const a=L.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const zE=typeof window<"u",VE=zE?L.useLayoutEffect:L.useEffect,Si=t=>t;let F3=Si;function FE(t){let e;return()=>(e===void 0&&(e=t()),e)}const gf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},La=t=>t*1e3,za=t=>t/1e3,yG={useManualTiming:!1};function vG(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(c){s.has(c)&&(l.schedule(c),t()),c(a)}const l={schedule:(c,f=!1,d=!1)=>{const g=d&&r?e:n;return f&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(a=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const Tg=["read","resolveKeyframes","update","preRender","render","postRender"],bG=40;function B3(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Tg.reduce((w,_)=>(w[_]=vG(s),w),{}),{read:o,resolveKeyframes:l,update:c,preRender:f,render:d,postRender:h}=a,g=()=>{const w=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,bG),1),i.timestamp=w,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),f.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(g))},b=()=>{n=!0,r=!0,i.isProcessing||t(g)};return{schedule:Tg.reduce((w,_)=>{const E=a[_];return w[_]=(O,A=!1,P=!1)=>(n||b(),E.schedule(O,A,P)),w},{}),cancel:w=>{for(let _=0;_<Tg.length;_++)a[Tg[_]].cancel(w)},state:i,steps:a}}const{schedule:Jt,cancel:Qa,state:or,steps:Kx}=B3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Si,!0),U3=L.createContext({strict:!1}),gj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yf={};for(const t in gj)yf[t]={isEnabled:e=>gj[t].some(n=>!!e[n])};function xG(t){for(const e in t)yf[e]={...yf[e],...t[e]}}const wG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function av(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||wG.has(t)}let W3=t=>!av(t);function _G(t){t&&(W3=e=>e.startsWith("on")?!av(e):t(e))}try{_G(require("@emotion/is-prop-valid").default)}catch{}function SG(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(W3(i)||n===!0&&av(i)||!e&&!av(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function EG(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const ib=L.createContext({});function mp(t){return typeof t=="string"||Array.isArray(t)}function sb(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const BE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],UE=["initial",...BE];function ab(t){return sb(t.animate)||UE.some(e=>mp(t[e]))}function K3(t){return!!(ab(t)||t.variants)}function AG(t,e){if(ab(t)){const{initial:n,animate:r}=t;return{initial:n===!1||mp(n)?n:void 0,animate:mp(r)?r:void 0}}return t.inherit!==!1?e:{}}function TG(t){const{initial:e,animate:n}=AG(t,L.useContext(ib));return L.useMemo(()=>({initial:e,animate:n}),[yj(e),yj(n)])}function yj(t){return Array.isArray(t)?t.join(" "):t}const PG=Symbol.for("motionComponentSymbol");function ku(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function CG(t,e,n){return L.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ku(n)&&(n.current=r))},[e])}const WE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),jG="framerAppearId",q3="data-"+WE(jG),{schedule:KE}=B3(queueMicrotask,!1),H3=L.createContext({});function OG(t,e,n,r,i){var s,a;const{visualElement:o}=L.useContext(ib),l=L.useContext(U3),c=L.useContext($E),f=L.useContext(LE).reducedMotion,d=L.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const h=d.current,g=L.useContext(H3);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&kG(d.current,n,i,g);const b=L.useRef(!1);L.useInsertionEffect(()=>{h&&b.current&&h.update(n,c)});const y=n[q3],x=L.useRef(!!y&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,y))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,y)));return VE(()=>{h&&(b.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),KE.render(h.render),x.current&&h.animationState&&h.animationState.animateChanges())}),L.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,y)}),x.current=!1))}),h}function kG(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:G3(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&ku(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function G3(t){if(t)return t.options.allowProjection!==!1?t.projection:G3(t.parent)}function IG({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,a;t&&xG(t);function o(c,f){let d;const h={...L.useContext(LE),...c,layoutId:NG(c)},{isStatic:g}=h,b=TG(c),y=r(c,g);if(!g&&zE){DG();const x=MG(h);d=x.MeasureLayout,b.visualElement=OG(i,y,h,e,x.ProjectionNode)}return u.jsxs(ib.Provider,{value:b,children:[d&&b.visualElement?u.jsx(d,{visualElement:b.visualElement,...h}):null,n(i,c,CG(y,b.visualElement,f),y,g,b.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=L.forwardRef(o);return l[PG]=i,l}function NG({layoutId:t}){const e=L.useContext(V3).id;return e&&t!==void 0?e+"-"+t:t}function DG(t,e){L.useContext(U3).strict}function MG(t){const{drag:e,layout:n}=yf;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const RG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qE(t){return typeof t!="string"||t.includes("-")?!1:!!(RG.indexOf(t)>-1||/[A-Z]/u.test(t))}function vj(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function HE(t,e,n,r){if(typeof e=="function"){const[i,s]=vj(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=vj(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const s_=t=>Array.isArray(t),$G=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),LG=t=>s_(t)?t[t.length-1]||0:t,fr=t=>!!(t&&t.getVelocity);function fy(t){const e=fr(t)?t.get():t;return $G(e)?e.toValue():e}function zG({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const a={latestValues:VG(r,i,s,t),renderState:e()};return n&&(a.onMount=o=>n({props:r,current:o,...a}),a.onUpdate=o=>n(o)),a}const Y3=t=>(e,n)=>{const r=L.useContext(ib),i=L.useContext($E),s=()=>zG(t,e,r,i);return n?s():Rc(s)};function VG(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=fy(s[h]);let{initial:a,animate:o}=t;const l=ab(t),c=K3(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||a===!1;const d=f?o:a;if(d&&typeof d!="boolean"&&!sb(d)){const h=Array.isArray(d)?d:[d];for(let g=0;g<h.length;g++){const b=HE(t,h[g]);if(b){const{transitionEnd:y,transition:x,...w}=b;for(const _ in w){let E=w[_];if(Array.isArray(E)){const O=f?E.length-1:0;E=E[O]}E!==null&&(i[_]=E)}for(const _ in y)i[_]=y[_]}}}return i}const rd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$c=new Set(rd),X3=t=>e=>typeof e=="string"&&e.startsWith(t),Q3=X3("--"),FG=X3("var(--"),GE=t=>FG(t)?BG.test(t.split("/*")[0].trim()):!1,BG=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Z3=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Za=(t,e,n)=>n>e?e:n<t?t:n,id={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gp={...id,transform:t=>Za(0,1,t)},Pg={...id,default:1},_m=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wo=_m("deg"),ia=_m("%"),Qe=_m("px"),UG=_m("vh"),WG=_m("vw"),bj={...ia,parse:t=>ia.parse(t)/100,transform:t=>ia.transform(t*100)},KG={borderWidth:Qe,borderTopWidth:Qe,borderRightWidth:Qe,borderBottomWidth:Qe,borderLeftWidth:Qe,borderRadius:Qe,radius:Qe,borderTopLeftRadius:Qe,borderTopRightRadius:Qe,borderBottomRightRadius:Qe,borderBottomLeftRadius:Qe,width:Qe,maxWidth:Qe,height:Qe,maxHeight:Qe,top:Qe,right:Qe,bottom:Qe,left:Qe,padding:Qe,paddingTop:Qe,paddingRight:Qe,paddingBottom:Qe,paddingLeft:Qe,margin:Qe,marginTop:Qe,marginRight:Qe,marginBottom:Qe,marginLeft:Qe,backgroundPositionX:Qe,backgroundPositionY:Qe},qG={rotate:wo,rotateX:wo,rotateY:wo,rotateZ:wo,scale:Pg,scaleX:Pg,scaleY:Pg,scaleZ:Pg,skew:wo,skewX:wo,skewY:wo,distance:Qe,translateX:Qe,translateY:Qe,translateZ:Qe,x:Qe,y:Qe,z:Qe,perspective:Qe,transformPerspective:Qe,opacity:gp,originX:bj,originY:bj,originZ:Qe},xj={...id,transform:Math.round},YE={...KG,...qG,zIndex:xj,size:Qe,fillOpacity:gp,strokeOpacity:gp,numOctaves:xj},HG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},GG=rd.length;function YG(t,e,n){let r="",i=!0;for(let s=0;s<GG;s++){const a=rd[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=Z3(o,YE[a]);if(!l){i=!1;const f=HG[a]||a;r+=`${f}(${c}) `}n&&(e[a]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function XE(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if($c.has(l)){a=!0;continue}else if(Q3(l)){i[l]=c;continue}else{const f=Z3(c,YE[l]);l.startsWith("origin")?(o=!0,s[l]=f):r[l]=f}}if(e.transform||(a||n?r.transform=YG(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:f=0}=s;r.transformOrigin=`${l} ${c} ${f}`}}const XG={offset:"stroke-dashoffset",array:"stroke-dasharray"},QG={offset:"strokeDashoffset",array:"strokeDasharray"};function ZG(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?XG:QG;t[s.offset]=Qe.transform(-r);const a=Qe.transform(e),o=Qe.transform(n);t[s.array]=`${a} ${o}`}function wj(t,e,n){return typeof t=="string"?t:Qe.transform(e+n*t)}function JG(t,e,n){const r=wj(e,t.x,t.width),i=wj(n,t.y,t.height);return`${r} ${i}`}function QE(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},f,d){if(XE(t,c,d),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g,dimensions:b}=t;h.transform&&(b&&(g.transform=h.transform),delete h.transform),b&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=JG(b,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&ZG(h,a,o,l,!1)}const ZE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),J3=()=>({...ZE(),attrs:{}}),JE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function e$(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const t$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function n$(t,e,n,r){e$(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(t$.has(i)?i:WE(i),e.attrs[i])}const ov={};function eY(t){Object.assign(ov,t)}function r$(t,{layout:e,layoutId:n}){return $c.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ov[t]||t==="opacity")}function eA(t,e,n){var r;const{style:i}=t,s={};for(const a in i)(fr(i[a])||e.style&&fr(e.style[a])||r$(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function i$(t,e,n){const r=eA(t,e,n);for(const i in t)if(fr(t[i])||fr(e[i])){const s=rd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function tY(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const _j=["x","y","width","height","cx","cy","r"],nY={useVisualState:Y3({scrapeMotionValuesFromProps:i$,createRenderState:J3,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const o in i)if($c.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<_j.length;o++){const l=_j[o];t[l]!==e[l]&&(a=!0)}a&&Jt.read(()=>{tY(n,r),Jt.render(()=>{QE(r,i,JE(n.tagName),t.transformTemplate),n$(n,r)})})}})},rY={useVisualState:Y3({scrapeMotionValuesFromProps:eA,createRenderState:ZE})};function s$(t,e,n){for(const r in e)!fr(e[r])&&!r$(r,n)&&(t[r]=e[r])}function iY({transformTemplate:t},e){return L.useMemo(()=>{const n=ZE();return XE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function sY(t,e){const n=t.style||{},r={};return s$(r,n,t),Object.assign(r,iY(t,e)),r}function aY(t,e){const n={},r=sY(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function oY(t,e,n,r){const i=L.useMemo(()=>{const s=J3();return QE(s,e,JE(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};s$(s,t.style,t),i.style={...s,...i.style}}return i}function lY(t=!1){return(n,r,i,{latestValues:s},a)=>{const l=(qE(n)?oY:aY)(r,s,a,n),c=SG(r,typeof n=="string",t),f=n!==L.Fragment?{...c,...l,ref:i}:{},{children:d}=r,h=L.useMemo(()=>fr(d)?d.get():d,[d]);return L.createElement(n,{...f,children:h})}}function cY(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...qE(r)?nY:rY,preloadedFeatures:t,useRender:lY(i),createVisualElement:e,Component:r};return IG(a)}}function a$(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function ob(t,e,n){const r=t.getProps();return HE(r,e,n!==void 0?n:r.custom,t)}const uY=FE(()=>window.ScrollTimeline!==void 0);class fY{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(uY()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class dY extends fY{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function tA(t,e){return t?t[e]||t.default||t:void 0}const a_=2e4;function o$(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<a_;)e+=n,r=t.next(e);return e>=a_?1/0:e}function nA(t){return typeof t=="function"}function Sj(t,e){t.timeline=e,t.onfinish=null}const rA=t=>Array.isArray(t)&&typeof t[0]=="number",hY={linearEasing:void 0};function pY(t,e){const n=FE(t);return()=>{var r;return(r=hY[e])!==null&&r!==void 0?r:n()}}const lv=pY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),l$=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(gf(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function c$(t){return!!(typeof t=="function"&&lv()||!t||typeof t=="string"&&(t in o_||lv())||rA(t)||Array.isArray(t)&&t.every(c$))}const fh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,o_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fh([0,.65,.55,1]),circOut:fh([.55,0,1,.45]),backIn:fh([.31,.01,.66,-.59]),backOut:fh([.33,1.53,.69,.99])};function u$(t,e){if(t)return typeof t=="function"&&lv()?l$(t,e):rA(t)?fh(t):Array.isArray(t)?t.map(n=>u$(n,e)||o_.easeOut):o_[t]}const ys={x:!1,y:!1};function f$(){return ys.x||ys.y}function mY(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function d$(t,e){const n=mY(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Ej(t){return e=>{e.pointerType==="touch"||f$()||t(e)}}function gY(t,e,n={}){const[r,i,s]=d$(t,n),a=Ej(o=>{const{target:l}=o,c=e(o);if(typeof c!="function"||!l)return;const f=Ej(d=>{c(d),l.removeEventListener("pointerleave",f)});l.addEventListener("pointerleave",f,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const h$=(t,e)=>e?t===e?!0:h$(t,e.parentElement):!1,iA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,yY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vY(t){return yY.has(t.tagName)||t.tabIndex!==-1}const dh=new WeakSet;function Aj(t){return e=>{e.key==="Enter"&&t(e)}}function qx(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const bY=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Aj(()=>{if(dh.has(n))return;qx(n,"down");const i=Aj(()=>{qx(n,"up")}),s=()=>qx(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Tj(t){return iA(t)&&!f$()}function xY(t,e,n={}){const[r,i,s]=d$(t,n),a=o=>{const l=o.currentTarget;if(!Tj(o)||dh.has(l))return;dh.add(l);const c=e(o),f=(g,b)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!Tj(g)||!dh.has(l))&&(dh.delete(l),typeof c=="function"&&c(g,{success:b}))},d=g=>{f(g,n.useGlobalTarget||h$(l,g.target))},h=g=>{f(g,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{!vY(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",c=>bY(c,i),i)}),s}function wY(t){return t==="x"||t==="y"?ys[t]?null:(ys[t]=!0,()=>{ys[t]=!1}):ys.x||ys.y?null:(ys.x=ys.y=!0,()=>{ys.x=ys.y=!1})}const p$=new Set(["width","height","top","left","right","bottom",...rd]);let dy;function _Y(){dy=void 0}const sa={now:()=>(dy===void 0&&sa.set(or.isProcessing||yG.useManualTiming?or.timestamp:performance.now()),dy),set:t=>{dy=t,queueMicrotask(_Y)}};function sA(t,e){t.indexOf(e)===-1&&t.push(e)}function aA(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function SY([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[s]=t.splice(e,1);t.splice(i,0,s)}return t}class oA{constructor(){this.subscriptions=[]}add(e){return sA(this.subscriptions,e),()=>aA(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function m$(t,e){return e?t*(1e3/e):0}const Pj=30,EY=t=>!isNaN(parseFloat(t)),kh={current:void 0};class AY{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=sa.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=sa.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=EY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new oA);const r=this.events[e].add(n);return e==="change"?()=>{r(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return kh.current&&kh.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=sa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Pj)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Pj);return m$(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vf(t,e){return new AY(t,e)}function TY(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,vf(n))}function lA(t,e){const n=ob(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=LG(s[a]);TY(t,a,o)}}function PY(t){return!!(fr(t)&&t.add)}function l_(t,e){const n=t.getValue("willChange");if(PY(n))return n.add(e)}function g$(t){return t.props[q3]}const y$=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,CY=1e-7,jY=12;function OY(t,e,n,r,i){let s,a,o=0;do a=e+(n-e)/2,s=y$(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>CY&&++o<jY);return a}function Sm(t,e,n,r){if(t===e&&n===r)return Si;const i=s=>OY(s,0,1,t,n);return s=>s===0||s===1?s:y$(i(s),e,r)}const v$=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,b$=t=>e=>1-t(1-e),x$=Sm(.33,1.53,.69,.99),cA=b$(x$),w$=v$(cA),_$=t=>(t*=2)<1?.5*cA(t):.5*(2-Math.pow(2,-10*(t-1))),uA=t=>1-Math.sin(Math.acos(t)),S$=b$(uA),E$=v$(uA),A$=t=>/^0[^.\s]+$/u.test(t);function kY(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||A$(t):!0}const Ih=t=>Math.round(t*1e5)/1e5,fA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function IY(t){return t==null}const NY=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dA=(t,e)=>n=>!!(typeof n=="string"&&NY.test(n)&&n.startsWith(t)||e&&!IY(n)&&Object.prototype.hasOwnProperty.call(n,e)),T$=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(fA);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},DY=t=>Za(0,255,t),Hx={...id,transform:t=>Math.round(DY(t))},Xl={test:dA("rgb","red"),parse:T$("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Hx.transform(t)+", "+Hx.transform(e)+", "+Hx.transform(n)+", "+Ih(gp.transform(r))+")"};function MY(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const c_={test:dA("#"),parse:MY,transform:Xl.transform},Iu={test:dA("hsl","hue"),parse:T$("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ia.transform(Ih(e))+", "+ia.transform(Ih(n))+", "+Ih(gp.transform(r))+")"},Sr={test:t=>Xl.test(t)||c_.test(t)||Iu.test(t),parse:t=>Xl.test(t)?Xl.parse(t):Iu.test(t)?Iu.parse(t):c_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xl.transform(t):Iu.transform(t)},RY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $Y(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(fA))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(RY))===null||n===void 0?void 0:n.length)||0)>0}const P$="number",C$="color",LY="var",zY="var(",Cj="${}",VY=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yp(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(VY,l=>(Sr.test(l)?(r.color.push(s),i.push(C$),n.push(Sr.parse(l))):l.startsWith(zY)?(r.var.push(s),i.push(LY),n.push(l)):(r.number.push(s),i.push(P$),n.push(parseFloat(l))),++s,Cj)).split(Cj);return{values:n,split:o,indexes:r,types:i}}function j$(t){return yp(t).values}function O$(t){const{split:e,types:n}=yp(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=n[a];o===P$?s+=Ih(i[a]):o===C$?s+=Sr.transform(i[a]):s+=i[a]}return s}}const FY=t=>typeof t=="number"?0:t;function BY(t){const e=j$(t);return O$(t)(e.map(FY))}const il={test:$Y,parse:j$,createTransformer:O$,getAnimatableNone:BY},UY=new Set(["brightness","contrast","saturate","opacity"]);function WY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(fA)||[];if(!r)return t;const i=n.replace(r,"");let s=UY.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const KY=/\b([a-z-]*)\(.*?\)/gu,u_={...il,getAnimatableNone:t=>{const e=t.match(KY);return e?e.map(WY).join(" "):t}},qY={...YE,color:Sr,backgroundColor:Sr,outlineColor:Sr,fill:Sr,stroke:Sr,borderColor:Sr,borderTopColor:Sr,borderRightColor:Sr,borderBottomColor:Sr,borderLeftColor:Sr,filter:u_,WebkitFilter:u_},hA=t=>qY[t];function k$(t,e){let n=hA(t);return n!==u_&&(n=il),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const HY=new Set(["auto","none","0"]);function GY(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!HY.has(s)&&yp(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=k$(n,i)}const jj=t=>t===id||t===Qe,Oj=(t,e)=>parseFloat(t.split(", ")[e]),kj=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Oj(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?Oj(s[1],t):0}},YY=new Set(["x","y","z"]),XY=rd.filter(t=>!YY.has(t));function QY(t){const e=[];return XY.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const bf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:kj(4,13),y:kj(5,14)};bf.translateX=bf.x;bf.translateY=bf.y;const lc=new Set;let f_=!1,d_=!1;function I$(){if(d_){const t=Array.from(lc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=QY(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}d_=!1,f_=!1,lc.forEach(t=>t.complete()),lc.clear()}function N$(){lc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(d_=!0)})}function ZY(){N$(),I$()}class pA{constructor(e,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(lc.add(this),f_||(f_=!0,Jt.read(N$),Jt.resolveKeyframes(I$))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),lc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,lc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const D$=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),JY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eX(t){const e=JY.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function M$(t,e,n=1){const[r,i]=eX(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return D$(a)?parseFloat(a):a}return GE(i)?M$(i,e,n+1):i}const R$=t=>e=>e.test(t),tX={test:t=>t==="auto",parse:t=>t},$$=[id,Qe,ia,wo,WG,UG,tX],Ij=t=>$$.find(R$(t));class L$ extends pA{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),GE(c))){const f=M$(c,n.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!p$.has(r)||e.length!==2)return;const[i,s]=e,a=Ij(i),o=Ij(s);if(a!==o)if(jj(a)&&jj(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)kY(e[i])&&r.push(i);r.length&&GY(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=bf[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Nj=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(il.test(t)||t==="0")&&!t.startsWith("url("));function nX(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function rX(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=Nj(i,e),o=Nj(s,e);return!a||!o?!1:nX(t)||(n==="spring"||nA(n))&&r}const iX=t=>t!==null;function lb(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(iX),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const sX=40;class z${constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=sa.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>sX?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&ZY(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=sa.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!rX(e,r,i,s))if(a)this.options.duration=0;else{l&&l(lb(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,n);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...f},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const un=(t,e,n)=>t+(e-t)*n;function Gx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function aX({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=Gx(l,o,t+1/3),s=Gx(l,o,t),a=Gx(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function cv(t,e){return n=>n>0?e:t}const Yx=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},oX=[c_,Xl,Iu],lX=t=>oX.find(e=>e.test(t));function Dj(t){const e=lX(t);if(!e)return!1;let n=e.parse(t);return e===Iu&&(n=aX(n)),n}const Mj=(t,e)=>{const n=Dj(t),r=Dj(e);if(!n||!r)return cv(t,e);const i={...n};return s=>(i.red=Yx(n.red,r.red,s),i.green=Yx(n.green,r.green,s),i.blue=Yx(n.blue,r.blue,s),i.alpha=un(n.alpha,r.alpha,s),Xl.transform(i))},cX=(t,e)=>n=>e(t(n)),Em=(...t)=>t.reduce(cX),h_=new Set(["none","hidden"]);function uX(t,e){return h_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function fX(t,e){return n=>un(t,e,n)}function mA(t){return typeof t=="number"?fX:typeof t=="string"?GE(t)?cv:Sr.test(t)?Mj:pX:Array.isArray(t)?V$:typeof t=="object"?Sr.test(t)?Mj:dX:cv}function V$(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>mA(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function dX(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=mA(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function hX(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][i[a]],l=(n=t.values[o])!==null&&n!==void 0?n:0;r[s]=l,i[a]++}return r}const pX=(t,e)=>{const n=il.createTransformer(e),r=yp(t),i=yp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?h_.has(t)&&!i.values.length||h_.has(e)&&!r.values.length?uX(t,e):Em(V$(hX(r,i),i.values),n):cv(t,e)};function F$(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?un(t,e,n):mA(t)(t,e)}const mX=5;function B$(t,e,n){const r=Math.max(e-mX,0);return m$(n-t(r),e-r)}const xn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xx=.001;function gX({duration:t=xn.duration,bounce:e=xn.bounce,velocity:n=xn.velocity,mass:r=xn.mass}){let i,s,a=1-e;a=Za(xn.minDamping,xn.maxDamping,a),t=Za(xn.minDuration,xn.maxDuration,za(t)),a<1?(i=c=>{const f=c*a,d=f*t,h=f-n,g=p_(c,a),b=Math.exp(-d);return Xx-h/g*b},s=c=>{const d=c*a*t,h=d*n+n,g=Math.pow(a,2)*Math.pow(c,2)*t,b=Math.exp(-d),y=p_(Math.pow(c,2),a);return(-i(c)+Xx>0?-1:1)*((h-g)*b)/y}):(i=c=>{const f=Math.exp(-c*t),d=(c-n)*t+1;return-Xx+f*d},s=c=>{const f=Math.exp(-c*t),d=(n-c)*(t*t);return f*d});const o=5/t,l=vX(i,s,o);if(t=La(t),isNaN(l))return{stiffness:xn.stiffness,damping:xn.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:t}}}const yX=12;function vX(t,e,n){let r=n;for(let i=1;i<yX;i++)r=r-t(r)/e(r);return r}function p_(t,e){return t*Math.sqrt(1-e*e)}const bX=["duration","bounce"],xX=["stiffness","damping","mass"];function Rj(t,e){return e.some(n=>t[n]!==void 0)}function wX(t){let e={velocity:xn.velocity,stiffness:xn.stiffness,damping:xn.damping,mass:xn.mass,isResolvedFromDuration:!1,...t};if(!Rj(t,xX)&&Rj(t,bX))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Za(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:xn.mass,stiffness:i,damping:s}}else{const n=gX(t);e={...e,...n,mass:xn.mass},e.isResolvedFromDuration=!0}return e}function U$(t=xn.visualDuration,e=xn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:f,duration:d,velocity:h,isResolvedFromDuration:g}=wX({...n,velocity:-za(n.velocity||0)}),b=h||0,y=c/(2*Math.sqrt(l*f)),x=a-s,w=za(Math.sqrt(l/f)),_=Math.abs(x)<5;r||(r=_?xn.restSpeed.granular:xn.restSpeed.default),i||(i=_?xn.restDelta.granular:xn.restDelta.default);let E;if(y<1){const A=p_(w,y);E=P=>{const S=Math.exp(-y*w*P);return a-S*((b+y*w*x)/A*Math.sin(A*P)+x*Math.cos(A*P))}}else if(y===1)E=A=>a-Math.exp(-w*A)*(x+(b+w*x)*A);else{const A=w*Math.sqrt(y*y-1);E=P=>{const S=Math.exp(-y*w*P),T=Math.min(A*P,300);return a-S*((b+y*w*x)*Math.sinh(T)+A*x*Math.cosh(T))/A}}const O={calculatedDuration:g&&d||null,next:A=>{const P=E(A);if(g)o.done=A>=d;else{let S=0;y<1&&(S=A===0?La(b):B$(E,A,P));const T=Math.abs(S)<=r,k=Math.abs(a-P)<=i;o.done=T&&k}return o.value=o.done?a:P,o},toString:()=>{const A=Math.min(o$(O),a_),P=l$(S=>O.next(A*S).value,A,30);return A+"ms "+P}};return O}function $j({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:f}){const d=t[0],h={done:!1,value:d},g=T=>o!==void 0&&T<o||l!==void 0&&T>l,b=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let y=n*e;const x=d+y,w=a===void 0?x:a(x);w!==x&&(y=w-d);const _=T=>-y*Math.exp(-T/r),E=T=>w+_(T),O=T=>{const k=_(T),z=E(T);h.done=Math.abs(k)<=c,h.value=h.done?w:z};let A,P;const S=T=>{g(h.value)&&(A=T,P=U$({keyframes:[h.value,b(h.value)],velocity:B$(E,T,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:f}))};return S(0),{calculatedDuration:null,next:T=>{let k=!1;return!P&&A===void 0&&(k=!0,O(T),S(T)),A!==void 0&&T>=A?P.next(T-A):(!k&&O(T),h)}}}const _X=Sm(.42,0,1,1),SX=Sm(0,0,.58,1),W$=Sm(.42,0,.58,1),EX=t=>Array.isArray(t)&&typeof t[0]!="number",AX={linear:Si,easeIn:_X,easeInOut:W$,easeOut:SX,circIn:uA,circInOut:E$,circOut:S$,backIn:cA,backInOut:w$,backOut:x$,anticipate:_$},Lj=t=>{if(rA(t)){F3(t.length===4);const[e,n,r,i]=t;return Sm(e,n,r,i)}else if(typeof t=="string")return AX[t];return t};function TX(t,e,n){const r=[],i=n||F$,s=t.length-1;for(let a=0;a<s;a++){let o=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Si:e;o=Em(l,o)}r.push(o)}return r}function K$(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(F3(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=TX(e,r,i),l=o.length,c=f=>{if(a&&f<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(f<t[d+1]);d++);const h=gf(t[d],t[d+1],f);return o[d](h)};return n?f=>c(Za(t[0],t[s-1],f)):c}function PX(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=gf(0,e,r);t.push(un(n,1,i))}}function CX(t){const e=[0];return PX(e,t.length-1),e}function jX(t,e){return t.map(n=>n*e)}function OX(t,e){return t.map(()=>e||W$).splice(0,t.length-1)}function uv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=EX(r)?r.map(Lj):Lj(r),s={done:!1,value:e[0]},a=jX(n&&n.length===e.length?n:CX(e),t),o=K$(a,e,{ease:Array.isArray(i)?i:OX(e,i)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const kX=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Jt.update(e,!0),stop:()=>Qa(e),now:()=>or.isProcessing?or.timestamp:sa.now()}},IX={decay:$j,inertia:$j,tween:uv,keyframes:uv,spring:U$},NX=t=>t/100;class gA extends z${constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||pA,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=nA(n)?n:IX[n]||uv;let l,c;o!==uv&&typeof e[0]!="number"&&(l=Em(NX,F$(e[0],e[1])),e=[0,100]);const f=o({...this.options,keyframes:e});s==="mirror"&&(c=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=o$(f));const{calculatedDuration:d}=f,h=d+i,g=h*(r+1)-i;return{generator:f,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:f,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:g,repeatType:b,repeatDelay:y,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const w=this.currentTime-h*(this.speed>=0?1:-1),_=this.speed>=0?w<0:w>f;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let E=this.currentTime,O=s;if(g){const T=Math.min(this.currentTime,f)/d;let k=Math.floor(T),z=T%1;!z&&T>=1&&(z=1),z===1&&k--,k=Math.min(k,g+1),!!(k%2)&&(b==="reverse"?(z=1-z,y&&(z-=y/d)):b==="mirror"&&(O=a)),E=Za(0,1,z)*d}const A=_?{done:!1,value:l[0]}:O.next(E);o&&(A.value=o(A.value));let{done:P}=A;!_&&c!==null&&(P=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return S&&i!==void 0&&(A.value=lb(l,this.options,i)),x&&x(A.value),S&&this.finish(),A}get duration(){const{resolved:e}=this;return e?za(e.calculatedDuration):0}get time(){return za(this.currentTime)}set time(e){e=La(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=za(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=kX,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const DX=new Set(["opacity","clipPath","filter","transform"]);function MX(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const f=u$(o,i);return Array.isArray(f)&&(c.easing=f),t.animate(c,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const RX=FE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),fv=10,$X=2e4;function LX(t){return nA(t.type)||t.type==="spring"||!c$(t.ease)}function zX(t,e){const n=new gA({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<$X;)r=n.sample(s),i.push(r.value),s+=fv;return{times:void 0,keyframes:i,duration:s-fv,ease:"linear"}}const q$={anticipate:_$,backInOut:w$,circInOut:E$};function VX(t){return t in q$}class zj extends z${constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new L$(s,(a,o)=>this.onKeyframesResolved(a,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&lv()&&VX(s)&&(s=q$[s]),LX(this.options)){const{onComplete:d,onUpdate:h,motionValue:g,element:b,...y}=this.options,x=zX(e,y);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,i=x.times,s=x.ease,a="keyframes"}const f=MX(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return f.startTime=c??this.calcStartTime(),this.pendingTimeline?(Sj(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:d}=this.options;o.set(lb(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return za(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return za(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=La(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Si;const{animation:r}=n;Sj(r,e)}return Si}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:f,onComplete:d,element:h,...g}=this.options,b=new gA({...g,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),y=La(this.time);c.setWithVelocity(b.sample(y-fv).value,b.sample(y).value,fv)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return RX()&&r&&DX.has(r)&&!l&&!c&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const FX={type:"spring",stiffness:500,damping:25,restSpeed:10},BX=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),UX={type:"keyframes",duration:.8},WX={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},KX=(t,{keyframes:e})=>e.length>2?UX:$c.has(t)?t.startsWith("scale")?BX(e[1]):FX:WX;function qX({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...f}){return!!Object.keys(f).length}const yA=(t,e,n,r={},i,s)=>a=>{const o=tA(r,t)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-La(l);let f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:i};qX(o)||(f={...f,...KX(t,f)}),f.duration&&(f.duration=La(f.duration)),f.repeatDelay&&(f.repeatDelay=La(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const h=lb(f.keyframes,o);if(h!==void 0)return Jt.update(()=>{f.onUpdate(h),f.onComplete()}),new dY([])}return!s&&zj.supports(f)?new zj(f):new gA(f)};function HX({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function H$(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const c=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const h=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),g=l[d];if(g===void 0||f&&HX(f,d))continue;const b={delay:n,...tA(a||{},d)};let y=!1;if(window.MotionHandoffAnimation){const w=g$(t);if(w){const _=window.MotionHandoffAnimation(w,d,Jt);_!==null&&(b.startTime=_,y=!0)}}l_(t,d),h.start(yA(d,h,g,t.shouldReduceMotion&&p$.has(d)?{type:!1}:b,t,y));const x=h.animation;x&&c.push(x)}return o&&Promise.all(c).then(()=>{Jt.update(()=>{o&&lA(t,o)})}),c}function m_(t,e,n={}){var r;const i=ob(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(H$(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:h}=s;return GX(t,e,f+c,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,f]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>f())}else return Promise.all([a(),o(n.delay)])}function GX(t,e,n=0,r=0,i=1,s){const a=[],o=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(t.variantChildren).sort(YX).forEach((c,f)=>{c.notify("AnimationStart",e),a.push(m_(c,e,{...s,delay:n+l(f)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function YX(t,e){return t.sortNodePosition(e)}function G$(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>m_(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=m_(t,e,n);else{const i=typeof e=="function"?ob(t,e,n.custom):e;r=Promise.all(H$(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const XX=UE.length;function Y$(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Y$(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<XX;n++){const r=UE[n],i=t.props[r];(mp(i)||i===!1)&&(e[r]=i)}return e}const QX=[...BE].reverse(),ZX=BE.length;function JX(t){return e=>Promise.all(e.map(({animation:n,options:r})=>G$(t,n,r)))}function eQ(t){let e=JX(t),n=Vj(),r=!0;const i=l=>(c,f)=>{var d;const h=ob(t,f,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:g,transitionEnd:b,...y}=h;c={...c,...y,...b}}return c};function s(l){e=l(t)}function a(l){const{props:c}=t,f=Y$(t.parent)||{},d=[],h=new Set;let g={},b=1/0;for(let x=0;x<ZX;x++){const w=QX[x],_=n[w],E=c[w]!==void 0?c[w]:f[w],O=mp(E),A=w===l?_.isActive:null;A===!1&&(b=x);let P=E===f[w]&&E!==c[w]&&O;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),_.protectedKeys={...g},!_.isActive&&A===null||!E&&!_.prevProp||sb(E)||typeof E=="boolean")continue;const S=tQ(_.prevProp,E);let T=S||w===l&&_.isActive&&!P&&O||x>b&&O,k=!1;const z=Array.isArray(E)?E:[E];let N=z.reduce(i(w),{});A===!1&&(N={});const{prevResolvedValues:$={}}=_,M={...$,...N},Y=le=>{T=!0,h.has(le)&&(k=!0,h.delete(le)),_.needsAnimating[le]=!0;const Q=t.getValue(le);Q&&(Q.liveStyle=!1)};for(const le in M){const Q=N[le],G=$[le];if(g.hasOwnProperty(le))continue;let he=!1;s_(Q)&&s_(G)?he=!a$(Q,G):he=Q!==G,he?Q!=null?Y(le):h.add(le):Q!==void 0&&h.has(le)?Y(le):_.protectedKeys[le]=!0}_.prevProp=E,_.prevResolvedValues=N,_.isActive&&(g={...g,...N}),r&&t.blockInitialAnimation&&(T=!1),T&&(!(P&&S)||k)&&d.push(...z.map(le=>({animation:le,options:{type:w}})))}if(h.size){const x={};h.forEach(w=>{const _=t.getBaseTarget(w),E=t.getValue(w);E&&(E.liveStyle=!0),x[w]=_??null}),d.push({animation:x})}let y=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(d):Promise.resolve()}function o(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(h=>{var g;return(g=h.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const d=a(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Vj(),r=!0}}}function tQ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!a$(e,t):!1}function Dl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vj(){return{animate:Dl(!0),whileInView:Dl(),whileHover:Dl(),whileTap:Dl(),whileDrag:Dl(),whileFocus:Dl(),exit:Dl()}}class fl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class nQ extends fl{constructor(e){super(e),e.animationState||(e.animationState=eQ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();sb(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let rQ=0;class iQ extends fl{constructor(){super(...arguments),this.id=rQ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const sQ={animation:{Feature:nQ},exit:{Feature:iQ}};function vp(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Am(t){return{point:{x:t.pageX,y:t.pageY}}}const aQ=t=>e=>iA(e)&&t(e,Am(e));function Nh(t,e,n,r){return vp(t,e,aQ(n),r)}const Fj=(t,e)=>Math.abs(t-e);function oQ(t,e){const n=Fj(t.x,e.x),r=Fj(t.y,e.y);return Math.sqrt(n**2+r**2)}class X${constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Zx(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,g=oQ(d.offset,{x:0,y:0})>=3;if(!h&&!g)return;const{point:b}=d,{timestamp:y}=or;this.history.push({...b,timestamp:y});const{onStart:x,onMove:w}=this.handlers;h||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Qx(h,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:g,onSessionEnd:b,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Zx(d.type==="pointercancel"?this.lastMoveEventInfo:Qx(h,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,x),b&&b(d,x)},!iA(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=Am(e),o=Qx(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=or;this.history=[{...l,timestamp:c}];const{onSessionStart:f}=n;f&&f(e,Zx(o,this.history)),this.removeListeners=Em(Nh(this.contextWindow,"pointermove",this.handlePointerMove),Nh(this.contextWindow,"pointerup",this.handlePointerUp),Nh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qa(this.updatePoint)}}function Qx(t,e){return e?{point:e(t.point)}:t}function Bj(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Zx({point:t},e){return{point:t,delta:Bj(t,Q$(e)),offset:Bj(t,lQ(e)),velocity:cQ(e,.1)}}function lQ(t){return t[0]}function Q$(t){return t[t.length-1]}function cQ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Q$(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>La(e)));)n--;if(!r)return{x:0,y:0};const s=za(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const Z$=1e-4,uQ=1-Z$,fQ=1+Z$,J$=.01,dQ=0-J$,hQ=0+J$;function Ti(t){return t.max-t.min}function pQ(t,e,n){return Math.abs(t-e)<=n}function Uj(t,e,n,r=.5){t.origin=r,t.originPoint=un(e.min,e.max,t.origin),t.scale=Ti(n)/Ti(e),t.translate=un(n.min,n.max,t.origin)-t.originPoint,(t.scale>=uQ&&t.scale<=fQ||isNaN(t.scale))&&(t.scale=1),(t.translate>=dQ&&t.translate<=hQ||isNaN(t.translate))&&(t.translate=0)}function Dh(t,e,n,r){Uj(t.x,e.x,n.x,r?r.originX:void 0),Uj(t.y,e.y,n.y,r?r.originY:void 0)}function Wj(t,e,n){t.min=n.min+e.min,t.max=t.min+Ti(e)}function mQ(t,e,n){Wj(t.x,e.x,n.x),Wj(t.y,e.y,n.y)}function Kj(t,e,n){t.min=e.min-n.min,t.max=t.min+Ti(e)}function Mh(t,e,n){Kj(t.x,e.x,n.x),Kj(t.y,e.y,n.y)}function gQ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?un(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?un(n,t,r.max):Math.min(t,n)),t}function qj(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function yQ(t,{top:e,left:n,bottom:r,right:i}){return{x:qj(t.x,n,i),y:qj(t.y,e,r)}}function Hj(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function vQ(t,e){return{x:Hj(t.x,e.x),y:Hj(t.y,e.y)}}function bQ(t,e){let n=.5;const r=Ti(t),i=Ti(e);return i>r?n=gf(e.min,e.max-r,t.min):r>i&&(n=gf(t.min,t.max-i,e.min)),Za(0,1,n)}function xQ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const g_=.35;function wQ(t=g_){return t===!1?t=0:t===!0&&(t=g_),{x:Gj(t,"left","right"),y:Gj(t,"top","bottom")}}function Gj(t,e,n){return{min:Yj(t,e),max:Yj(t,n)}}function Yj(t,e){return typeof t=="number"?t:t[e]||0}const Xj=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nu=()=>({x:Xj(),y:Xj()}),Qj=()=>({min:0,max:0}),Tn=()=>({x:Qj(),y:Qj()});function Bi(t){return[t("x"),t("y")]}function eL({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function _Q({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function SQ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Jx(t){return t===void 0||t===1}function y_({scale:t,scaleX:e,scaleY:n}){return!Jx(t)||!Jx(e)||!Jx(n)}function zl(t){return y_(t)||tL(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function tL(t){return Zj(t.x)||Zj(t.y)}function Zj(t){return t&&t!=="0%"}function dv(t,e,n){const r=t-n,i=e*r;return n+i}function Jj(t,e,n,r,i){return i!==void 0&&(t=dv(t,i,r)),dv(t,n,r)+e}function v_(t,e=0,n=1,r,i){t.min=Jj(t.min,e,n,r,i),t.max=Jj(t.max,e,n,r,i)}function nL(t,{x:e,y:n}){v_(t.x,e.translate,e.scale,e.originPoint),v_(t.y,n.translate,n.scale,n.originPoint)}const eO=.999999999999,tO=1.0000000000001;function EQ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Mu(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,nL(t,a)),r&&zl(s.latestValues)&&Mu(t,s.latestValues))}e.x<tO&&e.x>eO&&(e.x=1),e.y<tO&&e.y>eO&&(e.y=1)}function Du(t,e){t.min=t.min+e,t.max=t.max+e}function nO(t,e,n,r,i=.5){const s=un(t.min,t.max,i);v_(t,e,n,s,r)}function Mu(t,e){nO(t.x,e.x,e.scaleX,e.scale,e.originX),nO(t.y,e.y,e.scaleY,e.scale,e.originY)}function rL(t,e){return eL(SQ(t.getBoundingClientRect(),e))}function AQ(t,e,n){const r=rL(t,n),{scroll:i}=e;return i&&(Du(r.x,i.offset.x),Du(r.y,i.offset.y)),r}const iL=({current:t})=>t?t.ownerDocument.defaultView:null,TQ=new WeakMap;class PQ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Am(f).point)},s=(f,d)=>{const{drag:h,dragPropagation:g,onDragStart:b}=this.getProps();if(h&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wY(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bi(x=>{let w=this.getAxisMotionValue(x).get()||0;if(ia.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const E=_.layout.layoutBox[x];E&&(w=Ti(E)*(parseFloat(w)/100))}}this.originPoint[x]=w}),b&&Jt.postRender(()=>b(f,d)),l_(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(f,d)=>{const{dragPropagation:h,dragDirectionLock:g,onDirectionLock:b,onDrag:y}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:x}=d;if(g&&this.currentDirection===null){this.currentDirection=CQ(x),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),y&&y(f,d)},o=(f,d)=>this.stop(f,d),l=()=>Bi(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new X$(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:iL(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Jt.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Cg(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=gQ(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&ku(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=yQ(i.layoutBox,n):this.constraints=!1,this.elastic=wQ(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Bi(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=xQ(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ku(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=AQ(r,i.root,this.visualElement.getTransformPagePoint());let a=vQ(i.layout.layoutBox,s);if(n){const o=n(_Q(a));this.hasMutatedConstraints=!!o,o&&(a=eL(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Bi(f=>{if(!Cg(f,n,this.currentDirection))return;let d=l&&l[f]||{};a&&(d={min:0,max:0});const h=i?200:1e6,g=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:h,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,b)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return l_(this.visualElement,e),r.start(yA(e,r,0,n,this.visualElement,!1))}stopAnimation(){Bi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Bi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Bi(n=>{const{drag:r}=this.getProps();if(!Cg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(e[n]-un(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ku(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Bi(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=bQ({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Bi(a=>{if(!Cg(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(un(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;TQ.set(this.visualElement,this);const e=this.visualElement.current,n=Nh(e,"pointerdown",l=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ku(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Jt.read(r);const a=vp(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Bi(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=g_,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Cg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function CQ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class jQ extends fl{constructor(e){super(e),this.removeGroupControls=Si,this.removeListeners=Si,this.controls=new PQ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Si}unmount(){this.removeGroupControls(),this.removeListeners()}}const rO=t=>(e,n)=>{t&&Jt.postRender(()=>t(e,n))};class OQ extends fl{constructor(){super(...arguments),this.removePointerDownListener=Si}onPointerDown(e){this.session=new X$(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:iL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:rO(e),onStart:rO(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Jt.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Nh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iO(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Bd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Qe.test(t))t=parseFloat(t);else return t;const n=iO(t,e.target.x),r=iO(t,e.target.y);return`${n}% ${r}%`}},kQ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=il.parse(t);if(i.length>5)return r;const s=il.createTransformer(t),a=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const c=un(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}};class IQ extends L.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;eY(NQ),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),hy.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Jt.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),KE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sL(t){const[e,n]=gG(),r=L.useContext(V3);return u.jsx(IQ,{...t,layoutGroup:r,switchLayoutGroup:L.useContext(H3),isPresent:e,safeToRemove:n})}const NQ={borderRadius:{...Bd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bd,borderTopRightRadius:Bd,borderBottomLeftRadius:Bd,borderBottomRightRadius:Bd,boxShadow:kQ};function DQ(t,e,n){const r=fr(t)?t:vf(t);return r.start(yA("",r,e,n)),r.animation}function MQ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const RQ=(t,e)=>t.depth-e.depth;class $Q{constructor(){this.children=[],this.isDirty=!1}add(e){sA(this.children,e),this.isDirty=!0}remove(e){aA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(RQ),this.isDirty=!1,this.children.forEach(e)}}function LQ(t,e){const n=sa.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Qa(r),t(s-e))};return Jt.read(r,!0),()=>Qa(r)}const aL=["TopLeft","TopRight","BottomLeft","BottomRight"],zQ=aL.length,sO=t=>typeof t=="string"?parseFloat(t):t,aO=t=>typeof t=="number"||Qe.test(t);function VQ(t,e,n,r,i,s){i?(t.opacity=un(0,n.opacity!==void 0?n.opacity:1,FQ(r)),t.opacityExit=un(e.opacity!==void 0?e.opacity:1,0,BQ(r))):s&&(t.opacity=un(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<zQ;a++){const o=`border${aL[a]}Radius`;let l=oO(e,o),c=oO(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||aO(l)===aO(c)?(t[o]=Math.max(un(sO(l),sO(c),r),0),(ia.test(c)||ia.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=un(e.rotate||0,n.rotate||0,r))}function oO(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const FQ=oL(0,.5,S$),BQ=oL(.5,.95,Si);function oL(t,e,n){return r=>r<t?0:r>e?1:n(gf(t,e,r))}function lO(t,e){t.min=e.min,t.max=e.max}function Li(t,e){lO(t.x,e.x),lO(t.y,e.y)}function cO(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function uO(t,e,n,r,i){return t-=e,t=dv(t,1/n,r),i!==void 0&&(t=dv(t,1/i,r)),t}function UQ(t,e=0,n=1,r=.5,i,s=t,a=t){if(ia.test(e)&&(e=parseFloat(e),e=un(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=un(s.min,s.max,r);t===s&&(o-=e),t.min=uO(t.min,e,n,o,i),t.max=uO(t.max,e,n,o,i)}function fO(t,e,[n,r,i],s,a){UQ(t,e[n],e[r],e[i],e.scale,s,a)}const WQ=["x","scaleX","originX"],KQ=["y","scaleY","originY"];function dO(t,e,n,r){fO(t.x,e,WQ,n?n.x:void 0,r?r.x:void 0),fO(t.y,e,KQ,n?n.y:void 0,r?r.y:void 0)}function hO(t){return t.translate===0&&t.scale===1}function lL(t){return hO(t.x)&&hO(t.y)}function pO(t,e){return t.min===e.min&&t.max===e.max}function qQ(t,e){return pO(t.x,e.x)&&pO(t.y,e.y)}function mO(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function cL(t,e){return mO(t.x,e.x)&&mO(t.y,e.y)}function gO(t){return Ti(t.x)/Ti(t.y)}function yO(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class HQ{constructor(){this.members=[]}add(e){sA(this.members,e),e.scheduleRender()}remove(e){if(aA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GQ(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:f,rotateX:d,rotateY:h,skewX:g,skewY:b}=n;c&&(r=`perspective(${c}px) ${r}`),f&&(r+=`rotate(${f}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),g&&(r+=`skewX(${g}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Vl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},hh=typeof window<"u"&&window.MotionDebug!==void 0,ew=["","X","Y","Z"],YQ={visibility:"hidden"},vO=1e3;let XQ=0;function tw(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function uL(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=g$(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Jt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&uL(r)}function fL({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=XQ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,hh&&(Vl.totalNodes=Vl.resolvedTargetDeltas=Vl.recalculatedProjection=0),this.nodes.forEach(JQ),this.nodes.forEach(iZ),this.nodes.forEach(sZ),this.nodes.forEach(eZ),hh&&window.MotionDebug.record(Vl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new $Q)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new oA),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=MQ(a),this.instance=a;const{layoutId:l,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=LQ(h,250),hy.hasAnimatedSinceResize&&(hy.hasAnimatedSinceResize=!1,this.nodes.forEach(xO))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:g,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||f.getDefaultTransition()||uZ,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=f.getProps(),_=!this.targetLayout||!cL(this.targetLayout,b)||g,E=!h&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||h&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,E);const O={...tA(y,"layout"),onPlay:x,onComplete:w};(f.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O)}else h||xO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aZ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bO);return}this.isUpdating||this.nodes.forEach(nZ),this.isUpdating=!1,this.nodes.forEach(rZ),this.nodes.forEach(QQ),this.nodes.forEach(ZQ),this.clearAllSnapshots();const o=sa.now();or.delta=Za(0,1e3/60,o-or.timestamp),or.timestamp=o,or.isProcessing=!0,Kx.update.process(or),Kx.preRender.process(or),Kx.render.process(or),or.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,KE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tZ),this.sharedNodes.forEach(oZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!lL(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;a&&(o||zl(this.latestValues)||f)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),fZ(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Tn();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(dZ))){const{scroll:f}=this.root;f&&(Du(l.x,f.offset.x),Du(l.y,f.offset.y))}return l}removeElementScroll(a){var o;const l=Tn();if(Li(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:d,options:h}=f;f!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Li(l,a),Du(l.x,d.offset.x),Du(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=Tn();Li(l,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Mu(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),zl(f.latestValues)&&Mu(l,f.latestValues)}return zl(this.latestValues)&&Mu(l,this.latestValues),l}removeTransform(a){const o=Tn();Li(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!zl(c.latestValues))continue;y_(c.latestValues)&&c.updateSnapshot();const f=Tn(),d=c.measurePageBox();Li(f,d),dO(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return zl(this.latestValues)&&dO(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==or.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=or.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tn(),this.relativeTargetOrigin=Tn(),Mh(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tn(),this.targetWithTransforms=Tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mQ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Li(this.target,this.layout.layoutBox),nL(this.target,this.targetDelta)):Li(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tn(),this.relativeTargetOrigin=Tn(),Mh(this.relativeTargetOrigin,this.target,g.target),Li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}hh&&Vl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||y_(this.parent.latestValues)||tL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===or.timestamp&&(c=!1),c)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Li(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;EQ(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Tn());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cO(this.prevProjectionDelta.x,this.projectionDelta.x),cO(this.prevProjectionDelta.y,this.projectionDelta.y)),Dh(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!yO(this.projectionDelta.x,this.prevProjectionDelta.x)||!yO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),hh&&Vl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Nu(),this.projectionDelta=Nu(),this.projectionDeltaWithTransform=Nu()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},f={...this.latestValues},d=Nu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Tn(),g=l?l.source:void 0,b=this.layout?this.layout.source:void 0,y=g!==b,x=this.getStack(),w=!x||x.members.length<=1,_=!!(y&&!w&&this.options.crossfade===!0&&!this.path.some(cZ));this.animationProgress=0;let E;this.mixTargetDelta=O=>{const A=O/1e3;wO(d.x,a.x,A),wO(d.y,a.y,A),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mh(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lZ(this.relativeTarget,this.relativeTargetOrigin,h,A),E&&qQ(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Tn()),Li(E,this.relativeTarget)),y&&(this.animationValues=f,VQ(f,c,this.latestValues,A,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{hy.hasAnimatedSinceResize=!0,this.currentAnimation=DQ(0,vO,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:f}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&dL(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Tn();const d=Ti(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const h=Ti(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}Li(o,l),Mu(o,f),Dh(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new HQ),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&tw("z",a,c,this.animationValues);for(let f=0;f<ew.length;f++)tw(`rotate${ew[f]}`,a,c,this.animationValues),tw(`skew${ew[f]}`,a,c,this.animationValues);a.render();for(const f in c)a.setStaticValue(f,c[f]),this.animationValues&&(this.animationValues[f]=c[f]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return YQ;const c={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=fy(a==null?void 0:a.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=fy(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!zl(this.latestValues)&&(y.transform=f?f({},""):"none",this.hasProjected=!1),y}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=GQ(this.projectionDeltaWithTransform,this.treeScale,h),f&&(c.transform=f(h,c.transform));const{x:g,y:b}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${b.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in ov){if(h[y]===void 0)continue;const{correct:x,applyTo:w}=ov[y],_=c.transform==="none"?h[y]:x(h[y],d);if(w){const E=w.length;for(let O=0;O<E;O++)c[w[O]]=_}else c[y]=_}return this.options.layoutId&&(c.pointerEvents=d===this?fy(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(bO),this.root.sharedNodes.clear()}}}function QQ(t){t.updateLayout()}function ZQ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?Bi(d=>{const h=a?n.measuredBox[d]:n.layoutBox[d],g=Ti(h);h.min=r[d].min,h.max=h.min+g}):dL(s,n.layoutBox,r)&&Bi(d=>{const h=a?n.measuredBox[d]:n.layoutBox[d],g=Ti(r[d]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const o=Nu();Dh(o,r,n.layoutBox);const l=Nu();a?Dh(l,t.applyTransform(i,!0),n.measuredBox):Dh(l,r,n.layoutBox);const c=!lL(o);let f=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:g}=d;if(h&&g){const b=Tn();Mh(b,n.layoutBox,h.layoutBox);const y=Tn();Mh(y,r,g.layoutBox),cL(b,y)||(f=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=b,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function JQ(t){hh&&Vl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function eZ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tZ(t){t.clearSnapshot()}function bO(t){t.clearMeasurements()}function nZ(t){t.isLayoutDirty=!1}function rZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function xO(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function iZ(t){t.resolveTargetDelta()}function sZ(t){t.calcProjection()}function aZ(t){t.resetSkewAndRotation()}function oZ(t){t.removeLeadSnapshot()}function wO(t,e,n){t.translate=un(e.translate,0,n),t.scale=un(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function _O(t,e,n,r){t.min=un(e.min,n.min,r),t.max=un(e.max,n.max,r)}function lZ(t,e,n,r){_O(t.x,e.x,n.x,r),_O(t.y,e.y,n.y,r)}function cZ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uZ={duration:.45,ease:[.4,0,.1,1]},SO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),EO=SO("applewebkit/")&&!SO("chrome/")?Math.round:Si;function AO(t){t.min=EO(t.min),t.max=EO(t.max)}function fZ(t){AO(t.x),AO(t.y)}function dL(t,e,n){return t==="position"||t==="preserve-aspect"&&!pQ(gO(e),gO(n),.2)}function dZ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const hZ=fL({attachResizeListener:(t,e)=>vp(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nw={current:void 0},hL=fL({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!nw.current){const t=new hZ({});t.mount(window),t.setOptions({layoutScroll:!0}),nw.current=t}return nw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),pZ={pan:{Feature:OQ},drag:{Feature:jQ,ProjectionNode:hL,MeasureLayout:sL}};function TO(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Jt.postRender(()=>s(e,Am(e)))}class mZ extends fl{mount(){const{current:e}=this.node;e&&(this.unmount=gY(e,n=>(TO(this.node,n,"Start"),r=>TO(this.node,r,"End"))))}unmount(){}}class gZ extends fl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Em(vp(this.node.current,"focus",()=>this.onFocus()),vp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function PO(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Jt.postRender(()=>s(e,Am(e)))}class yZ extends fl{mount(){const{current:e}=this.node;e&&(this.unmount=xY(e,n=>(PO(this.node,n,"Start"),(r,{success:i})=>PO(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const b_=new WeakMap,rw=new WeakMap,vZ=t=>{const e=b_.get(t.target);e&&e(t)},bZ=t=>{t.forEach(vZ)};function xZ({root:t,...e}){const n=t||document;rw.has(n)||rw.set(n,{});const r=rw.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(bZ,{root:t,...e})),r[i]}function wZ(t,e,n){const r=xZ(e);return b_.set(t,n),r.observe(t),()=>{b_.delete(t),r.unobserve(t)}}const _Z={some:0,all:1};class SZ extends fl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:_Z[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),h=c?f:d;h&&h(l)};return wZ(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(EZ(e,n))&&this.startObserver()}unmount(){}}function EZ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const AZ={inView:{Feature:SZ},tap:{Feature:yZ},focus:{Feature:gZ},hover:{Feature:mZ}},TZ={layout:{ProjectionNode:hL,MeasureLayout:sL}},x_={current:null},pL={current:!1};function PZ(){if(pL.current=!0,!!zE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>x_.current=t.matches;t.addListener(e),e()}else x_.current=!1}const CZ=[...$$,Sr,il],jZ=t=>CZ.find(R$(t)),CO=new WeakMap;function OZ(t,e,n){for(const r in e){const i=e[r],s=n[r];if(fr(i))t.addValue(r,i);else if(fr(s))t.addValue(r,vf(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,vf(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const jO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kZ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=sa.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Jt.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:f}=a;this.onUpdate=f,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=ab(n),this.isVariantNode=K3(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in h){const b=h[g];l[g]!==void 0&&fr(b)&&b.set(l[g],!1)}}mount(e){this.current=e,CO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),pL.current||PZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:x_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){CO.delete(this.current),this.projection&&this.projection.unmount(),Qa(this.notifyUpdate),Qa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=$c.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Jt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yf){const n=yf[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<jO.length;r++){const i=jO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=OZ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=vf(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(D$(i)||A$(i))?i=parseFloat(i):!jZ(i)&&il.test(n)&&(i=k$(e,n)),this.setBaseTarget(e,fr(i)?i.get():i)),fr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=HE(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!fr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new oA),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class mL extends kZ{constructor(){super(...arguments),this.KeyframeResolver=L$}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function IZ(t){return window.getComputedStyle(t)}class NZ extends mL{constructor(){super(...arguments),this.type="html",this.renderInstance=e$}readValueFromInstance(e,n){if($c.has(n)){const r=hA(n);return r&&r.default||0}else{const r=IZ(e),i=(Q3(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rL(e,n)}build(e,n,r){XE(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return eA(e,n,r)}}class DZ extends mL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if($c.has(n)){const r=hA(n);return r&&r.default||0}return n=t$.has(n)?n:WE(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return i$(e,n,r)}build(e,n,r){QE(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){n$(e,n,r,i)}mount(e){this.isSVGTag=JE(e.tagName),super.mount(e)}}const MZ=(t,e)=>qE(t)?new DZ(e):new NZ(e,{allowProjection:t!==L.Fragment}),RZ=cY({...sQ,...AZ,...pZ,...TZ},MZ),cb=EG(RZ);function gL(t){const e=Rc(()=>vf(t)),{isStatic:n}=L.useContext(LE);if(n){const[,r]=L.useState(t);L.useEffect(()=>e.on("change",r),[])}return e}function yL(t,e){const n=gL(e()),r=()=>n.set(e());return r(),VE(()=>{const i=()=>Jt.preRender(r,!1,!0),s=t.map(a=>a.on("change",i));return()=>{s.forEach(a=>a()),Qa(r)}}),n}const $Z=t=>t&&typeof t=="object"&&t.mix,LZ=t=>$Z(t)?t.mix:void 0;function zZ(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],s=t[2+n],a=t[3+n],o=K$(i,s,{mixer:LZ(s[0]),...a});return e?o(r):o}function VZ(t){kh.current=[],t();const e=yL(kh.current,t);return kh.current=void 0,e}function FZ(t,e,n,r){if(typeof t=="function")return VZ(t);const i=typeof e=="function"?e:zZ(e,n,r);return Array.isArray(t)?OO(t,i):OO([t],([s])=>i(s))}function OO(t,e){const n=Rc(()=>[]);return yL(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function BZ(t){t.values.forEach(e=>e.stop())}function w_(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&lA(t,i),t.variantChildren&&t.variantChildren.forEach(s=>{w_(s,e)})})}function UZ(t,e){if(Array.isArray(e))return w_(t,e);if(typeof e=="string")return w_(t,[e]);lA(t,e)}function WZ(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(s=>{i.push(G$(s,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{UZ(r,n)})},stop(){t.forEach(n=>{BZ(n)})},mount(){return()=>{e.stop()}}};return e}function KZ(){const t=Rc(WZ);return VE(t.mount,[]),t}const vL=KZ;class qZ{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}}const HZ=()=>new qZ;function bL(){return Rc(HZ)}const xL=L.createContext(null);function GZ(t,e,n,r){if(!r)return t;const i=t.findIndex(f=>f.value===e);if(i===-1)return t;const s=r>0?1:-1,a=t[i+s];if(!a)return t;const o=t[i],l=a.layout,c=un(l.min,l.max,.5);return s===1&&o.layout.max+n>c||s===-1&&o.layout.min+n<c?SY(t,i,i+s):t}function YZ({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...s},a){const o=Rc(()=>cb[e]),l=[],c=L.useRef(!1),f={axis:n,registerItem:(d,h)=>{const g=l.findIndex(b=>d===b.value);g!==-1?l[g].layout=h[n]:l.push({value:d,layout:h[n]}),l.sort(QZ)},updateOrder:(d,h,g)=>{if(c.current)return;const b=GZ(l,d,h,g);l!==b&&(c.current=!0,r(b.map(XZ).filter(y=>i.indexOf(y)!==-1)))}};return L.useEffect(()=>{c.current=!1}),u.jsx(o,{...s,ref:a,ignoreStrict:!0,children:u.jsx(xL.Provider,{value:f,children:t})})}const wL=L.forwardRef(YZ);function XZ(t){return t.value}function QZ(t,e){return t.layout.min-e.layout.min}function kO(t,e=0){return fr(t)?t:gL(e)}function ZZ({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:s=!0,...a},o){const l=Rc(()=>cb[r]),c=L.useContext(xL),f={x:kO(e.x),y:kO(e.y)},d=FZ([f.x,f.y],([y,x])=>y||x?1:"unset"),{axis:h,registerItem:g,updateOrder:b}=c;return u.jsx(l,{drag:h,...a,dragSnapToOrigin:!0,style:{...e,x:f.x,y:f.y,zIndex:d},layout:s,onDrag:(y,x)=>{const{velocity:w}=x;w[h]&&b(n,f[h].get(),w[h]),i&&i(y,x)},onLayoutMeasure:y=>g(n,y),ref:o,ignoreStrict:!0,children:t})}const _L=L.forwardRef(ZZ),hv=({isOpen:t,onClose:e,title:n,actions:r})=>t?u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-end sm:items-center z-50 animate-fade-in",onClick:e,children:u.jsxs("div",{className:"w-full max-w-sm bg-ios-modal-bg rounded-t-2xl sm:rounded-2xl shadow-2xl text-white animate-slide-up",onClick:i=>i.stopPropagation(),children:[u.jsx("div",{className:"p-2",children:u.jsx("header",{className:"text-center p-2 rounded-lg bg-zinc-800/50",children:u.jsx("h2",{className:"text-sm font-semibold text-brand-light-gray",children:n})})}),u.jsx("div",{className:"p-2",children:u.jsx("div",{className:"bg-zinc-800/50 rounded-lg",children:r.map((i,s)=>u.jsxs("button",{onClick:()=>{i.onClick(),e()},className:`w-full flex items-center p-3 text-left transition-colors hover:bg-white/10 ${i.color||"text-brand-blue"} ${s>0?"border-t border-zinc-700/80":""}`,children:[u.jsx(i.icon,{size:22,className:"mr-4"}),u.jsx("span",{className:"text-lg font-medium text-white",children:i.label})]},s))})}),u.jsx("div",{className:"p-2 mt-1",children:u.jsx("button",{onClick:e,className:"w-full bg-zinc-700 p-3 text-lg font-bold text-white rounded-xl hover:bg-zinc-600 transition-colors",children:"Cancelar"})})]})}):null,JZ=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?u.jsxs(St,{isOpen:t,onClose:e,title:r,children:[" ",u.jsxs("div",{className:"space-y-6",children:[" ",u.jsx("p",{className:"text-zinc-300",children:i})," ",u.jsxs("div",{className:"flex justify-end gap-4",children:[u.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),u.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})," "]})," "]}):null,eJ=({lotName:t,count:e,dragControls:n})=>u.jsxs("div",{className:"w-full p-4 flex items-center",children:[u.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:r=>n.start(r),children:u.jsx(T3,{className:"text-zinc-500"})}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"font-bold text-lg text-white",children:t}),u.jsxs("p",{className:"text-sm text-zinc-400",children:[u.jsx("span",{className:"font-semibold text-brand-orange",children:e})," ",e===1?"animal":"animales"]})]})]}),tJ=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i})=>{const s=vL(),a=L.useRef(!1),o=t.count>0,l=t.name!=="Sin Asignar",c=(o?80:0)+(l?80:0),f=(d,h)=>{const g=h.offset.x,b=h.velocity.x;if(Math.abs(g)<2){r();return}g<-c/2||b<-500?s.start({x:-c}):s.start({x:0}),setTimeout(()=>{a.current=!1},100)};return u.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[u.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[o&&u.jsxs("button",{onClick:e,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-orange text-white",children:[u.jsx(nb,{size:22}),u.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),l&&u.jsxs("button",{onClick:n,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[u.jsx(td,{size:22}),u.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Borrar"})]})]}),u.jsx(cb.div,{drag:"x",dragConstraints:{left:-c,right:0},dragElastic:.1,onDragStart:()=>{a.current=!0},onDragEnd:f,onTap:()=>{a.current||r()},animate:s,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:u.jsx(eJ,{lotName:t.name,count:t.count,dragControls:i})})]})},nJ=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=bL();return u.jsxs(_L,{value:t,dragListener:!1,dragControls:i,children:[" ",u.jsx(tJ,{lot:t,dragControls:i,onClick:()=>e({name:"lot-detail",lotName:t.name}),onEdit:()=>n(t),onDelete:()=>r(t)})," "]},t.id)};function rJ({navigateTo:t}){const{animals:e,lots:n,deleteLot:r}=At(),[i,s]=L.useState(!1),[a,o]=L.useState(null),[l,c]=L.useState(null),f=L.useMemo(()=>{const y=new Map;return n.forEach(w=>y.set(w.name,0)),(e||[]).forEach(w=>{const _=w.location||"Sin Asignar";y.set(_,(y.get(_)||0)+1)}),Array.from(new Set([...n.map(w=>w.name),...e.map(w=>w.location||"Sin Asignar")])).map(w=>{const _=n.find(E=>E.name===w);return{id:(_==null?void 0:_.id)||w,name:w,count:y.get(w)||0}}).sort((w,_)=>w.name.localeCompare(_.name))},[e,n]),[d,h]=L.useState(f);L.useEffect(()=>{h(f)},[f]);const g=[{label:"Mover Animales",icon:I3,onClick:()=>t({name:"lot-detail",lotName:(a==null?void 0:a.name)||""})},{label:"Asignar Alimentación",icon:E3,onClick:()=>t({name:"feeding-plan",lotName:(a==null?void 0:a.name)||""})},{label:"Asignar Tratamiento",icon:L3,onClick:()=>t({name:"batch-treatment",lotName:(a==null?void 0:a.name)||""})},{label:"Convertir en Lote de Monta",icon:rb,onClick:()=>alert(`FUNCIONALIDAD FUTURA: Convertir ${a==null?void 0:a.name} en Lote de Monta`)}],b=()=>{l&&r(l.id)};return u.jsxs(u.Fragment,{children:[u.jsx(wL,{as:"div",axis:"y",values:d,onReorder:h,className:"space-y-3",children:d.map(y=>u.jsx(nJ,{lot:y,navigateTo:t,onEdit:x=>{o(x),s(!0)},onDelete:x=>c(x)},y.id))}),u.jsx(hv,{isOpen:i,onClose:()=>s(!1),title:`Acciones para "${a==null?void 0:a.name}"`,actions:g}),u.jsx(JZ,{isOpen:!!l,onClose:()=>c(null),onConfirm:b,title:"Eliminar Lote",message:`¿Estás seguro de que quieres eliminar el lote "${l==null?void 0:l.name}"? Esta acción no se puede deshacer.`})]})}const Ho=t=>{if(!t||t==="N/A")return-1;const e=new Date(t+"T00:00:00Z"),n=new Date,r=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));if(isNaN(e.getTime()))return-1;const i=r.getTime()-e.getTime(),s=Math.floor(i/(1e3*60*60*24));return Math.max(0,s)},Is=t=>{const e=Ho(t);if(e<0)return"N/A";if(e<=60)return`${e} día${e!==1?"s":""}`;const n=30.4375,r=Math.floor(e/n);if(r<12){const a=Math.round(e%n);return`${r} mes${r!==1?"es":""}${a>0?` y ${a} día${a!==1?"s":""}`:""}`}const i=Math.floor(r/12),s=Math.round(r%12);return`${i} año${i!==1?"s":""}${s>0?` y ${s} mes${s!==1?"es":""}`:""}`},Tm=(t,e)=>{const n=Ho(t.birthDate);return n<0?"Indefinido":t.sex==="Hembra"?t.weaningDate||n>60?e.some(i=>i.goatId===t.id)?"Cabra":"Cabritona":"Cabrita":n>=365?"Macho Cabrío":t.weaningDate||n>60?"Macho de Levante":"Cabrito"},Pm=(t,e)=>{const n=new Date(t+"T00:00:00Z"),r=new Date(e+"T00:00:00Z");if(isNaN(n.getTime())||isNaN(r.getTime()))return 0;const i=r.getTime()-n.getTime(),s=Math.floor(i/(1e3*60*60*24));return Math.max(0,s)},iJ=(t,e)=>{const r=1+(e-50)/(e+50),i=t*Math.max(.5,r);return parseFloat(i.toFixed(2))},vA=(t,e)=>{if(e.length===0)return{overall:null,recent:null};const n=[...e].sort((a,o)=>new Date(a.date).getTime()-new Date(o.date).getTime()),r=n[n.length-1];let i=null;if(t&&t>0){const a=Ho(r.date)-Ho(new Date().toISOString().split("T")[0])+Ho(new Date(r.date).toISOString().split("T")[0]);a>0&&(i=(r.kg-t)/a)}let s=null;if(n.length>=2){const a=r,o=n[n.length-2],l=(new Date(a.date).getTime()-new Date(o.date).getTime())/(1e3*60*60*24);l>0&&(s=(a.kg-o.kg)/l)}return{overall:i,recent:s}},SL=(t,e,n)=>{const r=t.map(f=>({age:(new Date(f.date).getTime()-new Date(e).getTime())/864e5,kg:f.kg})).sort((f,d)=>f.age-d.age);if(r.length<1)return null;const i=r.filter(f=>f.age<=n).pop(),s=r.find(f=>f.age>=n);if(i&&i.age===n)return i.kg;if(s&&s.age===n)return s.kg;if(!i||!s)return null;if(i.age===s.age)return i.kg;const a=s.age-i.age;if(a===0)return i.kg;const o=s.kg-i.kg,l=n-i.age,c=i.kg+l/a*o;return parseFloat(c.toFixed(2))},sJ=(t,e,n)=>{if(e===0)return 100;const r=t/e*100,i=1+(180-Math.min(n,180))/180*.1;return Math.round(r*i)},aJ=t=>{if(!t.weaningWeight||!t.weaningDate||!t.birthWeight||!t.birthDate)return null;const e=(new Date(t.weaningDate).getTime()-new Date(t.birthDate).getTime())/(1e3*60*60*24);if(e<=0)return null;const n=(t.weaningWeight-t.birthWeight)/e,r=t.birthWeight+n*60;return parseFloat(r.toFixed(2))},oJ=(t,e)=>{const n=e.filter(r=>r.animalId===t.id);return SL(n,t.birthDate,210)},lJ=({activeFilter:t,setActiveFilter:e})=>u.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[u.jsx("button",{onClick:()=>e("Activo"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Activo"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Activos"}),u.jsx("button",{onClick:()=>e("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"De Referencia"})]}),cJ=({activeFilter:t,setFilter:e})=>{const n=[{key:"all",label:"Todos"},{key:"Venta",label:"Vendidos"},{key:"Muerte",label:"Muertos"},{key:"Descarte",label:"Descartados"}];return u.jsxs("div",{className:"p-3 bg-black/20 rounded-lg",children:[u.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"Filtrar por estado:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(r=>u.jsx("button",{onClick:()=>e(r.key),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${t===r.key?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:r.label},r.key))})]})},__=({isOpen:t,onClose:e,onSelect:n,animals:r,title:i,filterSex:s})=>{const[a,o]=L.useState(""),[l,c]=L.useState("Activo"),[f,d]=L.useState("all"),h=y=>{c(y),d("all")},g=L.useMemo(()=>r.filter(y=>{if(s&&y.sex!==s)return!1;const x=y.isReference||!1;return l==="Referencia"?x?f!=="all"?y.status===f:!0:!1:!x}).filter(y=>a?y.id.toLowerCase().includes(a.toLowerCase()):!0),[r,a,l,f,s]),b=y=>{n(y),o("")};return u.jsx(St,{isOpen:t,onClose:e,title:i,children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(xc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),u.jsx("input",{type:"search",placeholder:"Buscar por ID...",value:a,onChange:y=>o(y.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-orange"})]}),u.jsx(lJ,{activeFilter:l,setActiveFilter:h}),l==="Referencia"&&u.jsx("div",{className:"animate-fade-in",children:u.jsx(cJ,{activeFilter:f,setFilter:d})}),u.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:g.length>0?g.map(y=>u.jsxs("button",{onClick:()=>b(y.id),className:"w-full text-left p-3 bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:[u.jsx("p",{className:"font-bold text-white",children:y.id}),u.jsxs("p",{className:"text-xs text-zinc-400",children:[y.sex," | ",Is(y.birthDate)," | Lote: ",y.location||"Sin Asignar"]})]},y.id)):u.jsx("p",{className:"text-center text-zinc-500 py-8",children:"No se encontraron animales con estos filtros."})})]})})};function uJ(t,e,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:n}).format(e).split(/\s/g).slice(2).join(" ")}const iw={},ph={};function Ql(t,e){try{const r=(iw[t]||(iw[t]=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format))(e).split("GMT")[1];return r in ph?ph[r]:IO(r,r.split(":"))}catch{if(t in ph)return ph[t];const n=t==null?void 0:t.match(fJ);return n?IO(t,n.slice(1)):NaN}}const fJ=/([+-]\d\d):?(\d\d)?/;function IO(t,e){const n=+(e[0]||0),r=+(e[1]||0),i=+(e[2]||0)/60;return ph[t]=n*60+r>0?n*60+r+i:n*60-r-i}class Ys extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(Ql(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),EL(this),S_(this)):this.setTime(Date.now())}static tz(e,...n){return n.length?new Ys(...n,e):new Ys(Date.now(),e)}withTimeZone(e){return new Ys(+this,e)}getTimezoneOffset(){const e=-Ql(this.timeZone,this);return e>0?Math.floor(e):Math.ceil(e)}setTime(e){return Date.prototype.setTime.apply(this,arguments),S_(this),+this}[Symbol.for("constructDateFrom")](e){return new Ys(+new Date(e),this.timeZone)}}const NO=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!NO.test(t))return;const e=t.replace(NO,"$1UTC");Ys.prototype[e]&&(t.startsWith("get")?Ys.prototype[t]=function(){return this.internal[e]()}:(Ys.prototype[t]=function(){return Date.prototype[e].apply(this.internal,arguments),dJ(this),+this},Ys.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),S_(this),+this}))});function S_(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-Ql(t.timeZone,t)*60))}function dJ(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),EL(t)}function EL(t){const e=Ql(t.timeZone,t),n=e>0?Math.floor(e):Math.ceil(e),r=new Date(+t);r.setUTCHours(r.getUTCHours()-1);const i=-new Date(+t).getTimezoneOffset(),s=-new Date(+r).getTimezoneOffset(),a=i-s,o=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();a&&o&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+a);const l=i-n;l&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+l);const c=new Date(+t);c.setUTCSeconds(0);const f=i>0?c.getSeconds():(c.getSeconds()-60)%60,d=Math.round(-(Ql(t.timeZone,t)*60))%60;(d||f)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+d),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+d+f));const h=Ql(t.timeZone,t),g=h>0?Math.floor(h):Math.ceil(h),y=-new Date(+t).getTimezoneOffset()-g,x=g!==n,w=y-l;if(x&&w){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+w);const _=Ql(t.timeZone,t),E=_>0?Math.floor(_):Math.ceil(_),O=g-E;O&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+O),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+O))}}class Ar extends Ys{static tz(e,...n){return n.length?new Ar(...n,e):new Ar(Date.now(),e)}toISOString(){const[e,n,r]=this.tzComponents(),i=`${e}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,n,r,i]=this.internal.toUTCString().split(" ");return`${e==null?void 0:e.slice(0,-1)} ${r} ${n} ${i}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[n,r,i]=this.tzComponents();return`${e} GMT${n}${r}${i} (${uJ(this.timeZone,this)})`}toLocaleString(e,n){return Date.prototype.toLocaleString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleDateString(e,n){return Date.prototype.toLocaleDateString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleTimeString(e,n){return Date.prototype.toLocaleTimeString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset(),n=e>0?"-":"+",r=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),i=String(Math.abs(e)%60).padStart(2,"0");return[n,r,i]}withTimeZone(e){return new Ar(+this,e)}[Symbol.for("constructDateFrom")](e){return new Ar(+new Date(e),this.timeZone)}}const AL=6048e5,hJ=864e5,DO=Symbol.for("constructDateFrom");function Gn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&DO in t?t[DO](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ut(t,e){return Gn(e||t,t)}function TL(t,e,n){const r=Ut(t,n==null?void 0:n.in);return isNaN(e)?Gn(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function PL(t,e,n){const r=Ut(t,n==null?void 0:n.in);if(isNaN(e))return Gn(t,NaN);if(!e)return r;const i=r.getDate(),s=Gn(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const a=s.getDate();return i>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}let pJ={};function Cm(){return pJ}function xf(t,e){var o,l,c,f;const n=Cm(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,i=Ut(t,e==null?void 0:e.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function bp(t,e){return xf(t,{...e,weekStartsOn:1})}function CL(t,e){const n=Ut(t,e==null?void 0:e.in),r=n.getFullYear(),i=Gn(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=bp(i),a=Gn(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=bp(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function MO(t){const e=Ut(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function sd(t,...e){const n=Gn.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function xp(t,e){const n=Ut(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function jL(t,e,n){const[r,i]=sd(n==null?void 0:n.in,t,e),s=xp(r),a=xp(i),o=+s-MO(s),l=+a-MO(a);return Math.round((o-l)/hJ)}function mJ(t,e){const n=CL(t,e),r=Gn(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),bp(r)}function gJ(t,e,n){return TL(t,e*7,n)}function yJ(t,e,n){return PL(t,e*12,n)}function vJ(t,e){let n,r=e==null?void 0:e.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=Gn.bind(null,i));const s=Ut(i,r);(!n||n<s||isNaN(+s))&&(n=s)}),Gn(r,n||NaN)}function bJ(t,e){let n,r=e==null?void 0:e.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=Gn.bind(null,i));const s=Ut(i,r);(!n||n>s||isNaN(+s))&&(n=s)}),Gn(r,n||NaN)}function xJ(t,e,n){const[r,i]=sd(n==null?void 0:n.in,t,e);return+xp(r)==+xp(i)}function OL(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function wJ(t){return!(!OL(t)&&typeof t!="number"||isNaN(+Ut(t)))}function _J(t,e,n){const[r,i]=sd(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function SJ(t,e){const n=Ut(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function EJ(t,e){const[n,r]=sd(t,e.start,e.end);return{start:n,end:r}}function AJ(t,e){const{start:n,end:r}=EJ(e==null?void 0:e.in,t);let i=+n>+r;const s=i?+n:+r,a=i?r:n;a.setHours(0,0,0,0),a.setDate(1);let o=1;const l=[];for(;+a<=s;)l.push(Gn(n,a)),a.setMonth(a.getMonth()+o);return i?l.reverse():l}function TJ(t,e){const n=Ut(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function PJ(t,e){const n=Ut(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function kL(t,e){const n=Ut(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function IL(t,e){var o,l,c,f;const n=Cm(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,i=Ut(t,e==null?void 0:e.in),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function CJ(t,e){return IL(t,{...e,weekStartsOn:1})}const jJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},OJ=(t,e,n)=>{let r;const i=jJ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function sw(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const kJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},IJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},NJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},DJ={date:sw({formats:kJ,defaultWidth:"full"}),time:sw({formats:IJ,defaultWidth:"full"}),dateTime:sw({formats:NJ,defaultWidth:"full"})},MJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},RJ=(t,e,n,r)=>MJ[t];function Ud(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const $J={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},LJ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zJ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},VJ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},FJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},BJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},UJ=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},WJ={ordinalNumber:UJ,era:Ud({values:$J,defaultWidth:"wide"}),quarter:Ud({values:LJ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ud({values:zJ,defaultWidth:"wide"}),day:Ud({values:VJ,defaultWidth:"wide"}),dayPeriod:Ud({values:FJ,defaultWidth:"wide",formattingValues:BJ,defaultFormattingWidth:"wide"})};function Wd(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?qJ(o,d=>d.test(a)):KJ(o,d=>d.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const f=e.slice(a.length);return{value:c,rest:f}}}function KJ(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function qJ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function HJ(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const GJ=/^(\d+)(th|st|nd|rd)?/i,YJ=/\d+/i,XJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},QJ={any:[/^b/i,/^(a|c)/i]},ZJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},JJ={any:[/1/i,/2/i,/3/i,/4/i]},eee={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ree={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},iee={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},see={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aee={ordinalNumber:HJ({matchPattern:GJ,parsePattern:YJ,valueCallback:t=>parseInt(t,10)}),era:Wd({matchPatterns:XJ,defaultMatchWidth:"wide",parsePatterns:QJ,defaultParseWidth:"any"}),quarter:Wd({matchPatterns:ZJ,defaultMatchWidth:"wide",parsePatterns:JJ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Wd({matchPatterns:eee,defaultMatchWidth:"wide",parsePatterns:tee,defaultParseWidth:"any"}),day:Wd({matchPatterns:nee,defaultMatchWidth:"wide",parsePatterns:ree,defaultParseWidth:"any"}),dayPeriod:Wd({matchPatterns:iee,defaultMatchWidth:"any",parsePatterns:see,defaultParseWidth:"any"})},bA={code:"en-US",formatDistance:OJ,formatLong:DJ,formatRelative:RJ,localize:WJ,match:aee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function oee(t,e){const n=Ut(t,e==null?void 0:e.in);return jL(n,kL(n))+1}function NL(t,e){const n=Ut(t,e==null?void 0:e.in),r=+bp(n)-+mJ(n);return Math.round(r/AL)+1}function DL(t,e){var f,d,h,g;const n=Ut(t,e==null?void 0:e.in),r=n.getFullYear(),i=Cm(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(h=i.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,a=Gn((e==null?void 0:e.in)||t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=xf(a,e),l=Gn((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=xf(l,e);return+n>=+o?r+1:+n>=+c?r:r-1}function lee(t,e){var o,l,c,f;const n=Cm(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,i=DL(t,e),s=Gn((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),xf(s,e)}function ML(t,e){const n=Ut(t,e==null?void 0:e.in),r=+xf(n,e)-+lee(n,e);return Math.round(r/AL)+1}function zt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const xo={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return zt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):zt(n+1,2)},d(t,e){return zt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return zt(t.getHours()%12||12,e.length)},H(t,e){return zt(t.getHours(),e.length)},m(t,e){return zt(t.getMinutes(),e.length)},s(t,e){return zt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return zt(i,e.length)}},ou={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},RO={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return xo.y(t,e)},Y:function(t,e,n,r){const i=DL(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return zt(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):zt(s,e.length)},R:function(t,e){const n=CL(t);return zt(n,e.length)},u:function(t,e){const n=t.getFullYear();return zt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return zt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return zt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return xo.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return zt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=ML(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):zt(i,e.length)},I:function(t,e,n){const r=NL(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):zt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):xo.d(t,e)},D:function(t,e,n){const r=oee(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):zt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return zt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return zt(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return zt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=ou.noon:r===0?i=ou.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=ou.evening:r>=12?i=ou.afternoon:r>=4?i=ou.morning:i=ou.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return xo.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):xo.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):zt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):zt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):xo.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):xo.s(t,e)},S:function(t,e){return xo.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return LO(r);case"XXXX":case"XX":return Fl(r);case"XXXXX":case"XXX":default:return Fl(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return LO(r);case"xxxx":case"xx":return Fl(r);case"xxxxx":case"xxx":default:return Fl(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+$O(r,":");case"OOOO":default:return"GMT"+Fl(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+$O(r,":");case"zzzz":default:return"GMT"+Fl(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return zt(r,e.length)},T:function(t,e,n){return zt(+t,e.length)}};function $O(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+zt(s,2)}function LO(t,e){return t%60===0?(t>0?"-":"+")+zt(Math.abs(t)/60,2):Fl(t,e)}function Fl(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=zt(Math.trunc(r/60),2),s=zt(r%60,2);return n+i+e+s}const zO=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},RL=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},cee=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return zO(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",zO(r,e)).replace("{{time}}",RL(i,e))},uee={p:RL,P:cee},fee=/^D+$/,dee=/^Y+$/,hee=["D","DD","YY","YYYY"];function pee(t){return fee.test(t)}function mee(t){return dee.test(t)}function gee(t,e,n){const r=yee(t,e,n);if(console.warn(r),hee.includes(t))throw new RangeError(r)}function yee(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const vee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xee=/^'([^]*?)'?$/,wee=/''/g,_ee=/[a-zA-Z]/;function See(t,e,n){var f,d,h,g,b,y,x,w;const r=Cm(),i=(n==null?void 0:n.locale)??r.locale??bA,s=(n==null?void 0:n.firstWeekContainsDate)??((d=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(h=r.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((y=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((w=(x=r.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??0,o=Ut(t,n==null?void 0:n.in);if(!wJ(o))throw new RangeError("Invalid time value");let l=e.match(bee).map(_=>{const E=_[0];if(E==="p"||E==="P"){const O=uee[E];return O(_,i.formatLong)}return _}).join("").match(vee).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const E=_[0];if(E==="'")return{isToken:!1,value:Eee(_)};if(RO[E])return{isToken:!0,value:_};if(E.match(_ee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:_}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(_=>{if(!_.isToken)return _.value;const E=_.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&mee(E)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&pee(E))&&gee(E,e,String(t));const O=RO[E[0]];return O(o,E,i.localize,c)}).join("")}function Eee(t){const e=t.match(xee);return e?e[1].replace(wee,"'"):t}function Aee(t,e){const n=Ut(t,e==null?void 0:e.in),r=n.getFullYear(),i=n.getMonth(),s=Gn(n,0);return s.setFullYear(r,i+1,0),s.setHours(0,0,0,0),s.getDate()}function Tee(t,e){return Ut(t,e==null?void 0:e.in).getMonth()}function Pee(t,e){return Ut(t,e==null?void 0:e.in).getFullYear()}function Cee(t,e){return+Ut(t)>+Ut(e)}function jee(t,e){return+Ut(t)<+Ut(e)}function Oee(t,e,n){const[r,i]=sd(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function kee(t,e,n){const[r,i]=sd(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()}function Iee(t,e,n){const r=Ut(t,n==null?void 0:n.in),i=r.getFullYear(),s=r.getDate(),a=Gn(t,0);a.setFullYear(i,e,15),a.setHours(0,0,0,0);const o=Aee(a);return r.setMonth(e,Math.min(s,o)),r}function Nee(t,e,n){const r=Ut(t,n==null?void 0:n.in);return isNaN(+r)?Gn(t,NaN):(r.setFullYear(e),r)}const VO=5,Dee=4;function Mee(t,e){const n=e.startOfMonth(t),r=n.getDay()>0?n.getDay():7,i=e.addDays(t,-r+1),s=e.addDays(i,VO*7-1);return e.getMonth(t)===e.getMonth(s)?VO:Dee}function $L(t,e){const n=e.startOfMonth(t),r=n.getDay();return r===1?n:r===0?e.addDays(n,-1*6):e.addDays(n,-1*(r-1))}function Ree(t,e){const n=$L(t,e),r=Mee(t,e);return e.addDays(n,r*7-1)}class Pi{constructor(e,n){this.Date=Date,this.today=()=>{var r;return(r=this.overrides)!=null&&r.today?this.overrides.today():this.options.timeZone?Ar.tz(this.options.timeZone):new this.Date},this.newDate=(r,i,s)=>{var a;return(a=this.overrides)!=null&&a.newDate?this.overrides.newDate(r,i,s):this.options.timeZone?new Ar(r,i,s,this.options.timeZone):new Date(r,i,s)},this.addDays=(r,i)=>{var s;return(s=this.overrides)!=null&&s.addDays?this.overrides.addDays(r,i):TL(r,i)},this.addMonths=(r,i)=>{var s;return(s=this.overrides)!=null&&s.addMonths?this.overrides.addMonths(r,i):PL(r,i)},this.addWeeks=(r,i)=>{var s;return(s=this.overrides)!=null&&s.addWeeks?this.overrides.addWeeks(r,i):gJ(r,i)},this.addYears=(r,i)=>{var s;return(s=this.overrides)!=null&&s.addYears?this.overrides.addYears(r,i):yJ(r,i)},this.differenceInCalendarDays=(r,i)=>{var s;return(s=this.overrides)!=null&&s.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,i):jL(r,i)},this.differenceInCalendarMonths=(r,i)=>{var s;return(s=this.overrides)!=null&&s.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,i):_J(r,i)},this.eachMonthOfInterval=r=>{var i;return(i=this.overrides)!=null&&i.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):AJ(r)},this.endOfBroadcastWeek=r=>{var i;return(i=this.overrides)!=null&&i.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):Ree(r,this)},this.endOfISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.endOfISOWeek?this.overrides.endOfISOWeek(r):CJ(r)},this.endOfMonth=r=>{var i;return(i=this.overrides)!=null&&i.endOfMonth?this.overrides.endOfMonth(r):SJ(r)},this.endOfWeek=(r,i)=>{var s;return(s=this.overrides)!=null&&s.endOfWeek?this.overrides.endOfWeek(r,i):IL(r,this.options)},this.endOfYear=r=>{var i;return(i=this.overrides)!=null&&i.endOfYear?this.overrides.endOfYear(r):PJ(r)},this.format=(r,i,s)=>{var o;const a=(o=this.overrides)!=null&&o.format?this.overrides.format(r,i,this.options):See(r,i,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(a):a},this.getISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.getISOWeek?this.overrides.getISOWeek(r):NL(r)},this.getMonth=(r,i)=>{var s;return(s=this.overrides)!=null&&s.getMonth?this.overrides.getMonth(r,this.options):Tee(r,this.options)},this.getYear=(r,i)=>{var s;return(s=this.overrides)!=null&&s.getYear?this.overrides.getYear(r,this.options):Pee(r,this.options)},this.getWeek=(r,i)=>{var s;return(s=this.overrides)!=null&&s.getWeek?this.overrides.getWeek(r,this.options):ML(r,this.options)},this.isAfter=(r,i)=>{var s;return(s=this.overrides)!=null&&s.isAfter?this.overrides.isAfter(r,i):Cee(r,i)},this.isBefore=(r,i)=>{var s;return(s=this.overrides)!=null&&s.isBefore?this.overrides.isBefore(r,i):jee(r,i)},this.isDate=r=>{var i;return(i=this.overrides)!=null&&i.isDate?this.overrides.isDate(r):OL(r)},this.isSameDay=(r,i)=>{var s;return(s=this.overrides)!=null&&s.isSameDay?this.overrides.isSameDay(r,i):xJ(r,i)},this.isSameMonth=(r,i)=>{var s;return(s=this.overrides)!=null&&s.isSameMonth?this.overrides.isSameMonth(r,i):Oee(r,i)},this.isSameYear=(r,i)=>{var s;return(s=this.overrides)!=null&&s.isSameYear?this.overrides.isSameYear(r,i):kee(r,i)},this.max=r=>{var i;return(i=this.overrides)!=null&&i.max?this.overrides.max(r):vJ(r)},this.min=r=>{var i;return(i=this.overrides)!=null&&i.min?this.overrides.min(r):bJ(r)},this.setMonth=(r,i)=>{var s;return(s=this.overrides)!=null&&s.setMonth?this.overrides.setMonth(r,i):Iee(r,i)},this.setYear=(r,i)=>{var s;return(s=this.overrides)!=null&&s.setYear?this.overrides.setYear(r,i):Nee(r,i)},this.startOfBroadcastWeek=(r,i)=>{var s;return(s=this.overrides)!=null&&s.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):$L(r,this)},this.startOfDay=r=>{var i;return(i=this.overrides)!=null&&i.startOfDay?this.overrides.startOfDay(r):xp(r)},this.startOfISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.startOfISOWeek?this.overrides.startOfISOWeek(r):bp(r)},this.startOfMonth=r=>{var i;return(i=this.overrides)!=null&&i.startOfMonth?this.overrides.startOfMonth(r):TJ(r)},this.startOfWeek=(r,i)=>{var s;return(s=this.overrides)!=null&&s.startOfWeek?this.overrides.startOfWeek(r,this.options):xf(r,this.options)},this.startOfYear=r=>{var i;return(i=this.overrides)!=null&&i.startOfYear?this.overrides.startOfYear(r):kL(r)},this.options={locale:bA,...e},this.overrides=n}getDigitMap(){const{numerals:e="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:e}),r={};for(let i=0;i<10;i++)r[i.toString()]=n.format(i);return r}replaceDigits(e){const n=this.getDigitMap();return e.replace(/\d/g,r=>n[r]||r)}formatNumber(e){return this.replaceDigits(e.toString())}getMonthYearOrder(){var n;const e=(n=this.options.locale)==null?void 0:n.code;return e&&Pi.yearFirstLocales.has(e)?"year-first":"month-first"}formatMonthYear(e){const{locale:n,timeZone:r,numerals:i}=this.options,s=n==null?void 0:n.code;if(s&&Pi.yearFirstLocales.has(s))try{return new Intl.DateTimeFormat(s,{month:"long",year:"numeric",timeZone:r,numberingSystem:i}).format(e)}catch{}const a=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(e,a)}}Pi.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const da=new Pi;class LL{constructor(e,n,r=da){this.date=e,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(e,n)),this.dateLib=r}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class $ee{constructor(e,n){this.date=e,this.weeks=n}}class Lee{constructor(e,n){this.days=n,this.weekNumber=e}}function zee(t){return B.createElement("button",{...t})}function Vee(t){return B.createElement("span",{...t})}function Fee(t){const{size:e=24,orientation:n="left",className:r}=t;return B.createElement("svg",{className:r,width:e,height:e,viewBox:"0 0 24 24"},n==="up"&&B.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&B.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&B.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&B.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Bee(t){const{day:e,modifiers:n,...r}=t;return B.createElement("td",{...r})}function Uee(t){const{day:e,modifiers:n,...r}=t,i=B.useRef(null);return B.useEffect(()=>{var s;n.focused&&((s=i.current)==null||s.focus())},[n.focused]),B.createElement("button",{ref:i,...r})}var Ke;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(Ke||(Ke={}));var pn;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(pn||(pn={}));var Ts;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(Ts||(Ts={}));var yi;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(yi||(yi={}));function Wee(t){const{options:e,className:n,components:r,classNames:i,...s}=t,a=[i[Ke.Dropdown],n].join(" "),o=e==null?void 0:e.find(({value:l})=>l===s.value);return B.createElement("span",{"data-disabled":s.disabled,className:i[Ke.DropdownRoot]},B.createElement(r.Select,{className:a,...s},e==null?void 0:e.map(({value:l,label:c,disabled:f})=>B.createElement(r.Option,{key:l,value:l,disabled:f},c))),B.createElement("span",{className:i[Ke.CaptionLabel],"aria-hidden":!0},o==null?void 0:o.label,B.createElement(r.Chevron,{orientation:"down",size:18,className:i[Ke.Chevron]})))}function Kee(t){return B.createElement("div",{...t})}function qee(t){return B.createElement("div",{...t})}function Hee(t){const{calendarMonth:e,displayIndex:n,...r}=t;return B.createElement("div",{...r},t.children)}function Gee(t){const{calendarMonth:e,displayIndex:n,...r}=t;return B.createElement("div",{...r})}function Yee(t){return B.createElement("table",{...t})}function Xee(t){return B.createElement("div",{...t})}const zL=L.createContext(void 0);function jm(){const t=L.useContext(zL);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function Qee(t){const{components:e}=jm();return B.createElement(e.Dropdown,{...t})}function Zee(t){const{onPreviousClick:e,onNextClick:n,previousMonth:r,nextMonth:i,...s}=t,{components:a,classNames:o,labels:{labelPrevious:l,labelNext:c}}=jm(),f=L.useCallback(h=>{i&&(n==null||n(h))},[i,n]),d=L.useCallback(h=>{r&&(e==null||e(h))},[r,e]);return B.createElement("nav",{...s},B.createElement(a.PreviousMonthButton,{type:"button",className:o[Ke.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":l(r),onClick:d},B.createElement(a.Chevron,{disabled:r?void 0:!0,className:o[Ke.Chevron],orientation:"left"})),B.createElement(a.NextMonthButton,{type:"button",className:o[Ke.NextMonthButton],tabIndex:i?void 0:-1,"aria-disabled":i?void 0:!0,"aria-label":c(i),onClick:f},B.createElement(a.Chevron,{disabled:i?void 0:!0,orientation:"right",className:o[Ke.Chevron]})))}function Jee(t){const{components:e}=jm();return B.createElement(e.Button,{...t})}function ete(t){return B.createElement("option",{...t})}function tte(t){const{components:e}=jm();return B.createElement(e.Button,{...t})}function nte(t){const{rootRef:e,...n}=t;return B.createElement("div",{...n,ref:e})}function rte(t){return B.createElement("select",{...t})}function ite(t){const{week:e,...n}=t;return B.createElement("tr",{...n})}function ste(t){return B.createElement("th",{...t})}function ate(t){return B.createElement("thead",{"aria-hidden":!0},B.createElement("tr",{...t}))}function ote(t){const{week:e,...n}=t;return B.createElement("th",{...n})}function lte(t){return B.createElement("th",{...t})}function cte(t){return B.createElement("tbody",{...t})}function ute(t){const{components:e}=jm();return B.createElement(e.Dropdown,{...t})}const fte=Object.freeze(Object.defineProperty({__proto__:null,Button:zee,CaptionLabel:Vee,Chevron:Fee,Day:Bee,DayButton:Uee,Dropdown:Wee,DropdownNav:Kee,Footer:qee,Month:Hee,MonthCaption:Gee,MonthGrid:Yee,Months:Xee,MonthsDropdown:Qee,Nav:Zee,NextMonthButton:Jee,Option:ete,PreviousMonthButton:tte,Root:nte,Select:rte,Week:ite,WeekNumber:ote,WeekNumberHeader:lte,Weekday:ste,Weekdays:ate,Weeks:cte,YearsDropdown:ute},Symbol.toStringTag,{value:"Module"}));function Ia(t,e,n=!1,r=da){let{from:i,to:s}=t;const{differenceInCalendarDays:a,isSameDay:o}=r;return i&&s?(a(s,i)<0&&([i,s]=[s,i]),a(e,i)>=(n?1:0)&&a(s,e)>=(n?1:0)):!n&&s?o(s,e):!n&&i?o(i,e):!1}function VL(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function xA(t){return!!(t&&typeof t=="object"&&"from"in t)}function FL(t){return!!(t&&typeof t=="object"&&"after"in t)}function BL(t){return!!(t&&typeof t=="object"&&"before"in t)}function UL(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function WL(t,e){return Array.isArray(t)&&t.every(e.isDate)}function Na(t,e,n=da){const r=Array.isArray(e)?e:[e],{isSameDay:i,differenceInCalendarDays:s,isAfter:a}=n;return r.some(o=>{if(typeof o=="boolean")return o;if(n.isDate(o))return i(t,o);if(WL(o,n))return o.includes(t);if(xA(o))return Ia(o,t,!1,n);if(UL(o))return Array.isArray(o.dayOfWeek)?o.dayOfWeek.includes(t.getDay()):o.dayOfWeek===t.getDay();if(VL(o)){const l=s(o.before,t),c=s(o.after,t),f=l>0,d=c<0;return a(o.before,o.after)?d&&f:f||d}return FL(o)?s(t,o.after)>0:BL(o)?s(o.before,t)>0:typeof o=="function"?o(t):!1})}function dte(t,e,n,r,i){const{disabled:s,hidden:a,modifiers:o,showOutsideDays:l,broadcastCalendar:c,today:f}=e,{isSameDay:d,isSameMonth:h,startOfMonth:g,isBefore:b,endOfMonth:y,isAfter:x}=i,w=n&&g(n),_=r&&y(r),E={[pn.focused]:[],[pn.outside]:[],[pn.disabled]:[],[pn.hidden]:[],[pn.today]:[]},O={};for(const A of t){const{date:P,displayMonth:S}=A,T=!!(S&&!h(P,S)),k=!!(w&&b(P,w)),z=!!(_&&x(P,_)),N=!!(s&&Na(P,s,i)),$=!!(a&&Na(P,a,i))||k||z||!c&&!l&&T||c&&l===!1&&T,M=d(P,f??i.today());T&&E.outside.push(A),N&&E.disabled.push(A),$&&E.hidden.push(A),M&&E.today.push(A),o&&Object.keys(o).forEach(Y=>{const q=o==null?void 0:o[Y];q&&Na(P,q,i)&&(O[Y]?O[Y].push(A):O[Y]=[A])})}return A=>{const P={[pn.focused]:!1,[pn.disabled]:!1,[pn.hidden]:!1,[pn.outside]:!1,[pn.today]:!1},S={};for(const T in E){const k=E[T];P[T]=k.some(z=>z===A)}for(const T in O)S[T]=O[T].some(k=>k===A);return{...P,...S}}}function hte(t,e,n={}){return Object.entries(t).filter(([,i])=>i===!0).reduce((i,[s])=>(n[s]?i.push(n[s]):e[pn[s]]?i.push(e[pn[s]]):e[Ts[s]]&&i.push(e[Ts[s]]),i),[e[Ke.Day]])}function pte(t){return{...fte,...t}}function mte(t){const e={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([n,r])=>{n.startsWith("data-")&&(e[n]=r)}),e}function gte(){const t={};for(const e in Ke)t[Ke[e]]=`rdp-${Ke[e]}`;for(const e in pn)t[pn[e]]=`rdp-${pn[e]}`;for(const e in Ts)t[Ts[e]]=`rdp-${Ts[e]}`;for(const e in yi)t[yi[e]]=`rdp-${yi[e]}`;return t}function KL(t,e,n){return(n??new Pi(e)).formatMonthYear(t)}const yte=KL;function vte(t,e,n){return(n??new Pi(e)).format(t,"d")}function bte(t,e=da){return e.format(t,"LLLL")}function xte(t,e,n){return(n??new Pi(e)).format(t,"cccccc")}function wte(t,e=da){return t<10?e.formatNumber(`0${t.toLocaleString()}`):e.formatNumber(`${t.toLocaleString()}`)}function _te(){return""}function qL(t,e=da){return e.format(t,"yyyy")}const Ste=qL,Ete=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:KL,formatDay:vte,formatMonthCaption:yte,formatMonthDropdown:bte,formatWeekNumber:wte,formatWeekNumberHeader:_te,formatWeekdayName:xte,formatYearCaption:Ste,formatYearDropdown:qL},Symbol.toStringTag,{value:"Module"}));function Ate(t){return t!=null&&t.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t!=null&&t.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...Ete,...t}}function Tte(t,e,n,r,i){const{startOfMonth:s,startOfYear:a,endOfYear:o,eachMonthOfInterval:l,getMonth:c}=i;return l({start:a(t),end:o(t)}).map(h=>{const g=r.formatMonthDropdown(h,i),b=c(h),y=e&&h<s(e)||n&&h>s(n)||!1;return{value:b,label:g,disabled:y}})}function Pte(t,e={},n={}){let r={...e==null?void 0:e[Ke.Day]};return Object.entries(t).filter(([,i])=>i===!0).forEach(([i])=>{r={...r,...n==null?void 0:n[i]}}),r}function Cte(t,e,n){const r=t.today(),i=e?t.startOfISOWeek(r):t.startOfWeek(r),s=[];for(let a=0;a<7;a++){const o=t.addDays(i,a);s.push(o)}return s}function jte(t,e,n,r,i=!1){if(!t||!e)return;const{startOfYear:s,endOfYear:a,addYears:o,getYear:l,isBefore:c,isSameYear:f}=r,d=s(t),h=a(e),g=[];let b=d;for(;c(b,h)||f(b,h);)g.push(b),b=o(b,1);return i&&g.reverse(),g.map(y=>{const x=n.formatYearDropdown(y,r);return{value:l(y),label:x,disabled:!1}})}function HL(t,e,n,r){let i=(r??new Pi(n)).format(t,"PPPP");return e.today&&(i=`Today, ${i}`),e.selected&&(i=`${i}, selected`),i}const Ote=HL;function GL(t,e,n){return(n??new Pi(e)).formatMonthYear(t)}const kte=GL;function Ite(t,e,n,r){let i=(r??new Pi(n)).format(t,"PPPP");return e!=null&&e.today&&(i=`Today, ${i}`),i}function Nte(t){return"Choose the Month"}function Dte(){return""}function Mte(t){return"Go to the Next Month"}function Rte(t){return"Go to the Previous Month"}function $te(t,e,n){return(n??new Pi(e)).format(t,"cccc")}function Lte(t,e){return`Week ${t}`}function zte(t){return"Week Number"}function Vte(t){return"Choose the Year"}const Fte=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:kte,labelDay:Ote,labelDayButton:HL,labelGrid:GL,labelGridcell:Ite,labelMonthDropdown:Nte,labelNav:Dte,labelNext:Mte,labelPrevious:Rte,labelWeekNumber:Lte,labelWeekNumberHeader:zte,labelWeekday:$te,labelYearDropdown:Vte},Symbol.toStringTag,{value:"Module"})),Om=t=>t instanceof HTMLElement?t:null,aw=t=>[...t.querySelectorAll("[data-animated-month]")??[]],Bte=t=>Om(t.querySelector("[data-animated-month]")),ow=t=>Om(t.querySelector("[data-animated-caption]")),lw=t=>Om(t.querySelector("[data-animated-weeks]")),Ute=t=>Om(t.querySelector("[data-animated-nav]")),Wte=t=>Om(t.querySelector("[data-animated-weekdays]"));function Kte(t,e,{classNames:n,months:r,focused:i,dateLib:s}){const a=L.useRef(null),o=L.useRef(r),l=L.useRef(!1);L.useLayoutEffect(()=>{const c=o.current;if(o.current=r,!e||!t.current||!(t.current instanceof HTMLElement)||r.length===0||c.length===0||r.length!==c.length)return;const f=s.isSameMonth(r[0].date,c[0].date),d=s.isAfter(r[0].date,c[0].date),h=d?n[yi.caption_after_enter]:n[yi.caption_before_enter],g=d?n[yi.weeks_after_enter]:n[yi.weeks_before_enter],b=a.current,y=t.current.cloneNode(!0);if(y instanceof HTMLElement?(aw(y).forEach(E=>{if(!(E instanceof HTMLElement))return;const O=Bte(E);O&&E.contains(O)&&E.removeChild(O);const A=ow(E);A&&A.classList.remove(h);const P=lw(E);P&&P.classList.remove(g)}),a.current=y):a.current=null,l.current||f||i)return;const x=b instanceof HTMLElement?aw(b):[],w=aw(t.current);if(w!=null&&w.every(_=>_ instanceof HTMLElement)&&x&&x.every(_=>_ instanceof HTMLElement)){l.current=!0,t.current.style.isolation="isolate";const _=Ute(t.current);_&&(_.style.zIndex="1"),w.forEach((E,O)=>{const A=x[O];if(!A)return;E.style.position="relative",E.style.overflow="hidden";const P=ow(E);P&&P.classList.add(h);const S=lw(E);S&&S.classList.add(g);const T=()=>{l.current=!1,t.current&&(t.current.style.isolation=""),_&&(_.style.zIndex=""),P&&P.classList.remove(h),S&&S.classList.remove(g),E.style.position="",E.style.overflow="",E.contains(A)&&E.removeChild(A)};A.style.pointerEvents="none",A.style.position="absolute",A.style.overflow="hidden",A.setAttribute("aria-hidden","true");const k=Wte(A);k&&(k.style.opacity="0");const z=ow(A);z&&(z.classList.add(d?n[yi.caption_before_exit]:n[yi.caption_after_exit]),z.addEventListener("animationend",T));const N=lw(A);N&&N.classList.add(d?n[yi.weeks_before_exit]:n[yi.weeks_after_exit]),E.insertBefore(A,E.firstChild)})}})}function qte(t,e,n,r){const i=t[0],s=t[t.length-1],{ISOWeek:a,fixedWeeks:o,broadcastCalendar:l}=n??{},{addDays:c,differenceInCalendarDays:f,differenceInCalendarMonths:d,endOfBroadcastWeek:h,endOfISOWeek:g,endOfMonth:b,endOfWeek:y,isAfter:x,startOfBroadcastWeek:w,startOfISOWeek:_,startOfWeek:E}=r,O=l?w(i,r):a?_(i):E(i),A=l?h(s):a?g(b(s)):y(b(s)),P=f(A,O),S=d(s,i)+1,T=[];for(let N=0;N<=P;N++){const $=c(O,N);if(e&&x($,e))break;T.push($)}const z=(l?35:42)*S;if(o&&T.length<z){const N=z-T.length;for(let $=0;$<N;$++){const M=c(T[T.length-1],1);T.push(M)}}return T}function Hte(t){const e=[];return t.reduce((n,r)=>{const i=r.weeks.reduce((s,a)=>s.concat(a.days.slice()),e.slice());return n.concat(i.slice())},e.slice())}function Gte(t,e,n,r){const{numberOfMonths:i=1}=n,s=[];for(let a=0;a<i;a++){const o=r.addMonths(t,a);if(e&&o>e)break;s.push(o)}return s}function FO(t,e,n,r){const{month:i,defaultMonth:s,today:a=r.today(),numberOfMonths:o=1}=t;let l=i||s||a;const{differenceInCalendarMonths:c,addMonths:f,startOfMonth:d}=r;if(n&&c(n,l)<o-1){const h=-1*(o-1);l=f(n,h)}return e&&c(l,e)<0&&(l=e),d(l)}function Yte(t,e,n,r){const{addDays:i,endOfBroadcastWeek:s,endOfISOWeek:a,endOfMonth:o,endOfWeek:l,getISOWeek:c,getWeek:f,startOfBroadcastWeek:d,startOfISOWeek:h,startOfWeek:g}=r,b=t.reduce((y,x)=>{const w=n.broadcastCalendar?d(x,r):n.ISOWeek?h(x):g(x),_=n.broadcastCalendar?s(x):n.ISOWeek?a(o(x)):l(o(x)),E=e.filter(S=>S>=w&&S<=_),O=n.broadcastCalendar?35:42;if(n.fixedWeeks&&E.length<O){const S=e.filter(T=>{const k=O-E.length;return T>_&&T<=i(_,k)});E.push(...S)}const A=E.reduce((S,T)=>{const k=n.ISOWeek?c(T):f(T),z=S.find($=>$.weekNumber===k),N=new LL(T,x,r);return z?z.days.push(N):S.push(new Lee(k,[N])),S},[]),P=new $ee(x,A);return y.push(P),y},[]);return n.reverseMonths?b.reverse():b}function Xte(t,e){let{startMonth:n,endMonth:r}=t;const{startOfYear:i,startOfDay:s,startOfMonth:a,endOfMonth:o,addYears:l,endOfYear:c,newDate:f,today:d}=e,{fromYear:h,toYear:g,fromMonth:b,toMonth:y}=t;!n&&b&&(n=b),!n&&h&&(n=e.newDate(h,0,1)),!r&&y&&(r=y),!r&&g&&(r=f(g,11,31));const x=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return n?n=a(n):h?n=f(h,0,1):!n&&x&&(n=i(l(t.today??d(),-100))),r?r=o(r):g?r=f(g,11,31):!r&&x&&(r=c(t.today??d())),[n&&s(n),r&&s(r)]}function Qte(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:s=1}=n,{startOfMonth:a,addMonths:o,differenceInCalendarMonths:l}=r,c=i?s:1,f=a(t);if(!e)return o(f,c);if(!(l(e,t)<s))return o(f,c)}function Zte(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:s}=n,{startOfMonth:a,addMonths:o,differenceInCalendarMonths:l}=r,c=i?s??1:1,f=a(t);if(!e)return o(f,-c);if(!(l(f,e)<=0))return o(f,-c)}function Jte(t){const e=[];return t.reduce((n,r)=>n.concat(r.weeks.slice()),e.slice())}function ub(t,e){const[n,r]=L.useState(t);return[e===void 0?n:e,r]}function ene(t,e){const[n,r]=Xte(t,e),{startOfMonth:i,endOfMonth:s}=e,a=FO(t,n,r,e),[o,l]=ub(a,t.month?a:void 0);L.useEffect(()=>{const P=FO(t,n,r,e);l(P)},[t.timeZone]);const c=Gte(o,r,t,e),f=qte(c,t.endMonth?s(t.endMonth):void 0,t,e),d=Yte(c,f,t,e),h=Jte(d),g=Hte(d),b=Zte(o,n,t,e),y=Qte(o,r,t,e),{disableNavigation:x,onMonthChange:w}=t,_=P=>h.some(S=>S.days.some(T=>T.isEqualTo(P))),E=P=>{if(x)return;let S=i(P);n&&S<i(n)&&(S=i(n)),r&&S>i(r)&&(S=i(r)),l(S),w==null||w(S)};return{months:d,weeks:h,days:g,navStart:n,navEnd:r,previousMonth:b,nextMonth:y,goToMonth:E,goToDay:P=>{_(P)||E(P.date)}}}var Ks;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(Ks||(Ks={}));function BO(t){return!t[pn.disabled]&&!t[pn.hidden]&&!t[pn.outside]}function tne(t,e,n,r){let i,s=-1;for(const a of t){const o=e(a);BO(o)&&(o[pn.focused]&&s<Ks.FocusedModifier?(i=a,s=Ks.FocusedModifier):r!=null&&r.isEqualTo(a)&&s<Ks.LastFocused?(i=a,s=Ks.LastFocused):n(a.date)&&s<Ks.Selected?(i=a,s=Ks.Selected):o[pn.today]&&s<Ks.Today&&(i=a,s=Ks.Today))}return i||(i=t.find(a=>BO(e(a)))),i}function nne(t,e,n,r,i,s,a){const{ISOWeek:o,broadcastCalendar:l}=s,{addDays:c,addMonths:f,addWeeks:d,addYears:h,endOfBroadcastWeek:g,endOfISOWeek:b,endOfWeek:y,max:x,min:w,startOfBroadcastWeek:_,startOfISOWeek:E,startOfWeek:O}=a;let P={day:c,week:d,month:f,year:h,startOfWeek:S=>l?_(S,a):o?E(S):O(S),endOfWeek:S=>l?g(S):o?b(S):y(S)}[t](n,e==="after"?1:-1);return e==="before"&&r?P=x([r,P]):e==="after"&&i&&(P=w([i,P])),P}function YL(t,e,n,r,i,s,a,o=0){if(o>365)return;const l=nne(t,e,n.date,r,i,s,a),c=!!(s.disabled&&Na(l,s.disabled,a)),f=!!(s.hidden&&Na(l,s.hidden,a)),d=l,h=new LL(l,d,a);return!c&&!f?h:YL(t,e,h,r,i,s,a,o+1)}function rne(t,e,n,r,i){const{autoFocus:s}=t,[a,o]=L.useState(),l=tne(e.days,n,r||(()=>!1),a),[c,f]=L.useState(s?l:void 0);return{isFocusTarget:y=>!!(l!=null&&l.isEqualTo(y)),setFocused:f,focused:c,blur:()=>{o(c),f(void 0)},moveFocus:(y,x)=>{if(!c)return;const w=YL(y,x,c,e.navStart,e.navEnd,t,i);w&&(e.goToDay(w),f(w))}}}function ine(t,e){const{selected:n,required:r,onSelect:i}=t,[s,a]=ub(n,i?n:void 0),o=i?n:s,{isSameDay:l}=e,c=g=>(o==null?void 0:o.some(b=>l(b,g)))??!1,{min:f,max:d}=t;return{selected:o,select:(g,b,y)=>{let x=[...o??[]];if(c(g)){if((o==null?void 0:o.length)===f||r&&(o==null?void 0:o.length)===1)return;x=o==null?void 0:o.filter(w=>!l(w,g))}else(o==null?void 0:o.length)===d?x=[g]:x=[...x,g];return i||a(x),i==null||i(x,g,b,y),x},isSelected:c}}function sne(t,e,n=0,r=0,i=!1,s=da){const{from:a,to:o}=e||{},{isSameDay:l,isAfter:c,isBefore:f}=s;let d;if(!a&&!o)d={from:t,to:n>0?void 0:t};else if(a&&!o)l(a,t)?n===0?d={from:a,to:t}:i?d={from:a,to:void 0}:d=void 0:f(t,a)?d={from:t,to:a}:d={from:a,to:t};else if(a&&o)if(l(a,t)&&l(o,t))i?d={from:a,to:o}:d=void 0;else if(l(a,t))d={from:a,to:n>0?void 0:t};else if(l(o,t))d={from:t,to:n>0?void 0:t};else if(f(t,a))d={from:t,to:o};else if(c(t,a))d={from:a,to:t};else if(c(t,o))d={from:a,to:t};else throw new Error("Invalid range");if(d!=null&&d.from&&(d!=null&&d.to)){const h=s.differenceInCalendarDays(d.to,d.from);r>0&&h>r?d={from:t,to:void 0}:n>1&&h<n&&(d={from:t,to:void 0})}return d}function ane(t,e,n=da){const r=Array.isArray(e)?e:[e];let i=t.from;const s=n.differenceInCalendarDays(t.to,t.from),a=Math.min(s,6);for(let o=0;o<=a;o++){if(r.includes(i.getDay()))return!0;i=n.addDays(i,1)}return!1}function UO(t,e,n=da){return Ia(t,e.from,!1,n)||Ia(t,e.to,!1,n)||Ia(e,t.from,!1,n)||Ia(e,t.to,!1,n)}function one(t,e,n=da){const r=Array.isArray(e)?e:[e];if(r.filter(o=>typeof o!="function").some(o=>typeof o=="boolean"?o:n.isDate(o)?Ia(t,o,!1,n):WL(o,n)?o.some(l=>Ia(t,l,!1,n)):xA(o)?o.from&&o.to?UO(t,{from:o.from,to:o.to},n):!1:UL(o)?ane(t,o.dayOfWeek,n):VL(o)?n.isAfter(o.before,o.after)?UO(t,{from:n.addDays(o.after,1),to:n.addDays(o.before,-1)},n):Na(t.from,o,n)||Na(t.to,o,n):FL(o)||BL(o)?Na(t.from,o,n)||Na(t.to,o,n):!1))return!0;const a=r.filter(o=>typeof o=="function");if(a.length){let o=t.from;const l=n.differenceInCalendarDays(t.to,t.from);for(let c=0;c<=l;c++){if(a.some(f=>f(o)))return!0;o=n.addDays(o,1)}}return!1}function lne(t,e){const{disabled:n,excludeDisabled:r,selected:i,required:s,onSelect:a}=t,[o,l]=ub(i,a?i:void 0),c=a?i:o;return{selected:c,select:(h,g,b)=>{const{min:y,max:x}=t,w=h?sne(h,c,y,x,s,e):void 0;return r&&n&&(w!=null&&w.from)&&w.to&&one({from:w.from,to:w.to},n,e)&&(w.from=h,w.to=void 0),a||l(w),a==null||a(w,h,g,b),w},isSelected:h=>c&&Ia(c,h,!1,e)}}function cne(t,e){const{selected:n,required:r,onSelect:i}=t,[s,a]=ub(n,i?n:void 0),o=i?n:s,{isSameDay:l}=e;return{selected:o,select:(d,h,g)=>{let b=d;return!r&&o&&o&&l(d,o)&&(b=void 0),i||a(b),i==null||i(b,d,h,g),b},isSelected:d=>o?l(o,d):!1}}function une(t,e){const n=cne(t,e),r=ine(t,e),i=lne(t,e);switch(t.mode){case"single":return n;case"multiple":return r;case"range":return i;default:return}}function fb(t){var kr;let e=t;e.timeZone&&(e={...t},e.today&&(e.today=new Ar(e.today,e.timeZone)),e.month&&(e.month=new Ar(e.month,e.timeZone)),e.defaultMonth&&(e.defaultMonth=new Ar(e.defaultMonth,e.timeZone)),e.startMonth&&(e.startMonth=new Ar(e.startMonth,e.timeZone)),e.endMonth&&(e.endMonth=new Ar(e.endMonth,e.timeZone)),e.mode==="single"&&e.selected?e.selected=new Ar(e.selected,e.timeZone):e.mode==="multiple"&&e.selected?e.selected=(kr=e.selected)==null?void 0:kr.map(tt=>new Ar(tt,e.timeZone)):e.mode==="range"&&e.selected&&(e.selected={from:e.selected.from?new Ar(e.selected.from,e.timeZone):void 0,to:e.selected.to?new Ar(e.selected.to,e.timeZone):void 0}));const{components:n,formatters:r,labels:i,dateLib:s,locale:a,classNames:o}=L.useMemo(()=>{const tt={...bA,...e.locale};return{dateLib:new Pi({locale:tt,weekStartsOn:e.broadcastCalendar?1:e.weekStartsOn,firstWeekContainsDate:e.firstWeekContainsDate,useAdditionalWeekYearTokens:e.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:e.useAdditionalDayOfYearTokens,timeZone:e.timeZone,numerals:e.numerals},e.dateLib),components:pte(e.components),formatters:Ate(e.formatters),labels:{...Fte,...e.labels},locale:tt,classNames:{...gte(),...e.classNames}}},[e.locale,e.broadcastCalendar,e.weekStartsOn,e.firstWeekContainsDate,e.useAdditionalWeekYearTokens,e.useAdditionalDayOfYearTokens,e.timeZone,e.numerals,e.dateLib,e.components,e.formatters,e.labels,e.classNames]),{captionLayout:l,mode:c,navLayout:f,numberOfMonths:d=1,onDayBlur:h,onDayClick:g,onDayFocus:b,onDayKeyDown:y,onDayMouseEnter:x,onDayMouseLeave:w,onNextClick:_,onPrevClick:E,showWeekNumber:O,styles:A}=e,{formatCaption:P,formatDay:S,formatMonthDropdown:T,formatWeekNumber:k,formatWeekNumberHeader:z,formatWeekdayName:N,formatYearDropdown:$}=r,M=ene(e,s),{days:Y,months:q,navStart:ie,navEnd:le,previousMonth:Q,nextMonth:G,goToMonth:he}=M,ce=dte(Y,e,ie,le,s),{isSelected:we,select:ke,selected:Ue}=une(e,s)??{},{blur:ct,focused:ot,isFocusTarget:Ce,moveFocus:Ye,setFocused:oe}=rne(e,M,ce,we??(()=>!1),s),{labelDayButton:Be,labelGridcell:We,labelGrid:ue,labelMonthDropdown:ht,labelNav:ye,labelPrevious:xe,labelNext:Fe,labelWeekday:Tt,labelWeekNumber:et,labelWeekNumberHeader:lt,labelYearDropdown:Ge}=i,He=L.useMemo(()=>Cte(s,e.ISOWeek),[s,e.ISOWeek]),Pt=c!==void 0||g!==void 0,on=L.useCallback(()=>{Q&&(he(Q),E==null||E(Q))},[Q,he,E]),dn=L.useCallback(()=>{G&&(he(G),_==null||_(G))},[he,G,_]),en=L.useCallback((tt,_e)=>Ze=>{Ze.preventDefault(),Ze.stopPropagation(),oe(tt),ke==null||ke(tt.date,_e,Ze),g==null||g(tt.date,_e,Ze)},[ke,g,oe]),Vn=L.useCallback((tt,_e)=>Ze=>{oe(tt),b==null||b(tt.date,_e,Ze)},[b,oe]),Ur=L.useCallback((tt,_e)=>Ze=>{ct(),h==null||h(tt.date,_e,Ze)},[ct,h]),pa=L.useCallback((tt,_e)=>Ze=>{const nt={ArrowLeft:[Ze.shiftKey?"month":"day",e.dir==="rtl"?"after":"before"],ArrowRight:[Ze.shiftKey?"month":"day",e.dir==="rtl"?"before":"after"],ArrowDown:[Ze.shiftKey?"year":"week","after"],ArrowUp:[Ze.shiftKey?"year":"week","before"],PageUp:[Ze.shiftKey?"year":"month","before"],PageDown:[Ze.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(nt[Ze.key]){Ze.preventDefault(),Ze.stopPropagation();const[jn,mt]=nt[Ze.key];Ye(jn,mt)}y==null||y(tt.date,_e,Ze)},[Ye,y,e.dir]),ma=L.useCallback((tt,_e)=>Ze=>{x==null||x(tt.date,_e,Ze)},[x]),bl=L.useCallback((tt,_e)=>Ze=>{w==null||w(tt.date,_e,Ze)},[w]),ga=L.useCallback(tt=>_e=>{const Ze=Number(_e.target.value),nt=s.setMonth(s.startOfMonth(tt),Ze);he(nt)},[s,he]),Oi=L.useCallback(tt=>_e=>{const Ze=Number(_e.target.value),nt=s.setYear(s.startOfMonth(tt),Ze);he(nt)},[s,he]),{className:ki,style:ya}=L.useMemo(()=>({className:[o[Ke.Root],e.className].filter(Boolean).join(" "),style:{...A==null?void 0:A[Ke.Root],...e.style}}),[o,e.className,e.style,A]),Wr=mte(e),$e=L.useRef(null);Kte($e,!!e.animate,{classNames:o,months:q,focused:ot,dateLib:s});const Ds={dayPickerProps:e,selected:Ue,select:ke,isSelected:we,months:q,nextMonth:G,previousMonth:Q,goToMonth:he,getModifiers:ce,components:n,classNames:o,styles:A,labels:i,formatters:r};return B.createElement(zL.Provider,{value:Ds},B.createElement(n.Root,{rootRef:e.animate?$e:void 0,className:ki,style:ya,dir:e.dir,id:e.id,lang:e.lang,nonce:e.nonce,title:e.title,role:e.role,"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"],...Wr},B.createElement(n.Months,{className:o[Ke.Months],style:A==null?void 0:A[Ke.Months]},!e.hideNavigation&&!f&&B.createElement(n.Nav,{"data-animated-nav":e.animate?"true":void 0,className:o[Ke.Nav],style:A==null?void 0:A[Ke.Nav],"aria-label":ye(),onPreviousClick:on,onNextClick:dn,previousMonth:Q,nextMonth:G}),q.map((tt,_e)=>B.createElement(n.Month,{"data-animated-month":e.animate?"true":void 0,className:o[Ke.Month],style:A==null?void 0:A[Ke.Month],key:_e,displayIndex:_e,calendarMonth:tt},f==="around"&&!e.hideNavigation&&_e===0&&B.createElement(n.PreviousMonthButton,{type:"button",className:o[Ke.PreviousMonthButton],tabIndex:Q?void 0:-1,"aria-disabled":Q?void 0:!0,"aria-label":xe(Q),onClick:on,"data-animated-button":e.animate?"true":void 0},B.createElement(n.Chevron,{disabled:Q?void 0:!0,className:o[Ke.Chevron],orientation:e.dir==="rtl"?"right":"left"})),B.createElement(n.MonthCaption,{"data-animated-caption":e.animate?"true":void 0,className:o[Ke.MonthCaption],style:A==null?void 0:A[Ke.MonthCaption],calendarMonth:tt,displayIndex:_e},l!=null&&l.startsWith("dropdown")?B.createElement(n.DropdownNav,{className:o[Ke.Dropdowns],style:A==null?void 0:A[Ke.Dropdowns]},(()=>{const Ze=l==="dropdown"||l==="dropdown-months"?B.createElement(n.MonthsDropdown,{key:"month",className:o[Ke.MonthsDropdown],"aria-label":ht(),classNames:o,components:n,disabled:!!e.disableNavigation,onChange:ga(tt.date),options:Tte(tt.date,ie,le,r,s),style:A==null?void 0:A[Ke.Dropdown],value:s.getMonth(tt.date)}):B.createElement("span",{key:"month"},T(tt.date,s)),nt=l==="dropdown"||l==="dropdown-years"?B.createElement(n.YearsDropdown,{key:"year",className:o[Ke.YearsDropdown],"aria-label":Ge(s.options),classNames:o,components:n,disabled:!!e.disableNavigation,onChange:Oi(tt.date),options:jte(ie,le,r,s,!!e.reverseYears),style:A==null?void 0:A[Ke.Dropdown],value:s.getYear(tt.date)}):B.createElement("span",{key:"year"},$(tt.date,s));return s.getMonthYearOrder()==="year-first"?[nt,Ze]:[Ze,nt]})(),B.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},P(tt.date,s.options,s))):B.createElement(n.CaptionLabel,{className:o[Ke.CaptionLabel],role:"status","aria-live":"polite"},P(tt.date,s.options,s))),f==="around"&&!e.hideNavigation&&_e===d-1&&B.createElement(n.NextMonthButton,{type:"button",className:o[Ke.NextMonthButton],tabIndex:G?void 0:-1,"aria-disabled":G?void 0:!0,"aria-label":Fe(G),onClick:dn,"data-animated-button":e.animate?"true":void 0},B.createElement(n.Chevron,{disabled:G?void 0:!0,className:o[Ke.Chevron],orientation:e.dir==="rtl"?"left":"right"})),_e===d-1&&f==="after"&&!e.hideNavigation&&B.createElement(n.Nav,{"data-animated-nav":e.animate?"true":void 0,className:o[Ke.Nav],style:A==null?void 0:A[Ke.Nav],"aria-label":ye(),onPreviousClick:on,onNextClick:dn,previousMonth:Q,nextMonth:G}),B.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":c==="multiple"||c==="range","aria-label":ue(tt.date,s.options,s)||void 0,className:o[Ke.MonthGrid],style:A==null?void 0:A[Ke.MonthGrid]},!e.hideWeekdays&&B.createElement(n.Weekdays,{"data-animated-weekdays":e.animate?"true":void 0,className:o[Ke.Weekdays],style:A==null?void 0:A[Ke.Weekdays]},O&&B.createElement(n.WeekNumberHeader,{"aria-label":lt(s.options),className:o[Ke.WeekNumberHeader],style:A==null?void 0:A[Ke.WeekNumberHeader],scope:"col"},z()),He.map(Ze=>B.createElement(n.Weekday,{"aria-label":Tt(Ze,s.options,s),className:o[Ke.Weekday],key:String(Ze),style:A==null?void 0:A[Ke.Weekday],scope:"col"},N(Ze,s.options,s)))),B.createElement(n.Weeks,{"data-animated-weeks":e.animate?"true":void 0,className:o[Ke.Weeks],style:A==null?void 0:A[Ke.Weeks]},tt.weeks.map(Ze=>B.createElement(n.Week,{className:o[Ke.Week],key:Ze.weekNumber,style:A==null?void 0:A[Ke.Week],week:Ze},O&&B.createElement(n.WeekNumber,{week:Ze,style:A==null?void 0:A[Ke.WeekNumber],"aria-label":et(Ze.weekNumber,{locale:a}),className:o[Ke.WeekNumber],scope:"row",role:"rowheader"},k(Ze.weekNumber,s)),Ze.days.map(nt=>{const{date:jn}=nt,mt=ce(nt);if(mt[pn.focused]=!mt.hidden&&!!(ot!=null&&ot.isEqualTo(nt)),mt[Ts.selected]=(we==null?void 0:we(jn))||mt.selected,xA(Ue)){const{from:ir,to:Ii}=Ue;mt[Ts.range_start]=!!(ir&&Ii&&s.isSameDay(jn,ir)),mt[Ts.range_end]=!!(ir&&Ii&&s.isSameDay(jn,Ii)),mt[Ts.range_middle]=Ia(Ue,jn,!0,s)}const is=Pte(mt,A,e.modifiersStyles),xd=hte(mt,o,e.modifiersClassNames),wd=!Pt&&!mt.hidden?We(jn,mt,s.options,s):void 0;return B.createElement(n.Day,{key:`${s.format(jn,"yyyy-MM-dd")}_${s.format(nt.displayMonth,"yyyy-MM")}`,day:nt,modifiers:mt,className:xd.join(" "),style:is,role:"gridcell","aria-selected":mt.selected||void 0,"aria-label":wd,"data-day":s.format(jn,"yyyy-MM-dd"),"data-month":nt.outside?s.format(jn,"yyyy-MM"):void 0,"data-selected":mt.selected||void 0,"data-disabled":mt.disabled||void 0,"data-hidden":mt.hidden||void 0,"data-outside":nt.outside||void 0,"data-focused":mt.focused||void 0,"data-today":mt.today||void 0},!mt.hidden&&Pt?B.createElement(n.DayButton,{className:o[Ke.DayButton],style:A==null?void 0:A[Ke.DayButton],type:"button",day:nt,modifiers:mt,disabled:mt.disabled||void 0,tabIndex:Ce(nt)?0:-1,"aria-label":Be(jn,mt,s.options,s),onClick:en(nt,mt),onBlur:Ur(nt,mt),onFocus:Vn(nt,mt),onKeyDown:pa(nt,mt),onMouseEnter:ma(nt,mt),onMouseLeave:bl(nt,mt)},S(jn,s.options,s)):!mt.hidden&&S(nt.date,s.options,s))})))))))),e.footer&&B.createElement(n.Footer,{className:o[Ke.Footer],style:A==null?void 0:A[Ke.Footer],role:"status","aria-live":"polite"},e.footer)))}const fne=(t,e)=>{if(!t||!e)return"Indefinido";const n=new Date,r=new Date(t);if(isNaN(r.getTime()))return"Indefinido";const i=(n.getTime()-r.getTime())/(1e3*60*60*24);return e==="Hembra"?i<=60?"Cabrita":i<=365?"Cabritona":"Cabra Primípara":i<=60?"Cabrito":i<=365?"Macho de Levante":"Macho Cabrío (Reproductor)"},jg=({legend:t,children:e})=>u.jsxs("fieldset",{className:"bg-black/20 rounded-2xl p-4 border border-zinc-800/50 space-y-4",children:[u.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-400",children:t}),e]}),WO=({labelOn:t,labelOff:e,value:n,onChange:r})=>u.jsxs("div",{onClick:()=>r(!n),className:"w-full bg-zinc-800/80 rounded-xl p-1 flex cursor-pointer",children:[u.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"bg-zinc-600 text-white":"text-zinc-400"}`,children:t}),u.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"text-zinc-400":"bg-zinc-600 text-white"}`,children:e})]}),XL=({onSaveSuccess:t,onCancel:e})=>{const{addAnimal:n,animals:r,lots:i}=At(),[s,a]=L.useState("Hembra"),[o,l]=L.useState(!1),[c,f]=L.useState(""),[d,h]=L.useState(""),[g,b]=L.useState(""),[y,x]=L.useState(""),[w,_]=L.useState(""),[E,O]=L.useState(""),[A,P]=L.useState(""),[S,T]=L.useState(""),[k,z]=L.useState(null),[N,$]=L.useState(!1),[M,Y]=L.useState(!1),[q,ie]=L.useState(!1),le=L.useMemo(()=>fne(d,s),[d,s]),Q=async G=>{if(G.preventDefault(),z(null),!c||!d){z({type:"error",text:"El ID y la Fecha de Nacimiento son obligatorios."});return}const he={sex:s,isReference:o,birthDate:d,lifecycleStage:le,conceptionMethod:g,birthWeight:y?parseFloat(y):void 0,fatherId:w||void 0,motherId:E||void 0,racialComposition:A||void 0,location:S||"",status:"Activo",reproductiveStatus:"No Aplica"};try{await n({id:c.toUpperCase(),...he}),z({type:"success",text:`Animal ${c.toUpperCase()} agregado con éxito.`}),setTimeout(t,1500)}catch(ce){z({type:"error",text:ce.message||"No se pudo guardar el animal."}),console.error("Error al guardar animal:",ce)}};return u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:Q,className:"w-full space-y-6",children:[u.jsxs(jg,{legend:"Categoría",children:[u.jsx(WO,{labelOn:"Hembra",labelOff:"Macho",value:s==="Hembra",onChange:G=>a(G?"Hembra":"Macho")}),u.jsx(WO,{labelOn:"Activo",labelOff:"Referencia",value:!o,onChange:G=>l(!G)})]}),u.jsxs(jg,{legend:"Identificación",children:[u.jsx("input",{autoFocus:!0,value:c,onChange:G=>f(G.target.value),placeholder:"Identificación del Animal (ID)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0}),u.jsxs("button",{type:"button",onClick:()=>$(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[u.jsx("span",{className:d?"text-white":"text-zinc-500",children:d?new Date(d+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Fecha de Nacimiento"}),u.jsx(bc,{className:"text-zinc-400",size:20})]}),u.jsxs("div",{className:"bg-zinc-800/80 p-3 rounded-xl text-lg flex justify-between items-center",children:[u.jsx("span",{className:"text-zinc-400",children:"Estado:"}),u.jsx("span",{className:"font-semibold text-white",children:le})]})]}),u.jsxs(jg,{legend:"Genética y Nacimiento",children:[u.jsxs("select",{value:g,onChange:G=>b(G.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[u.jsx("option",{value:"",children:"Origen / Concepción..."}),u.jsx("option",{value:"MN",children:"Monta Natural (MN)"}),u.jsx("option",{value:"IA",children:"Inseminación Artificial (IA)"}),u.jsx("option",{value:"TE",children:"Transferencia de Embriones (TE)"})]}),u.jsx("input",{type:"number",step:"0.1",value:y,onChange:G=>x(G.target.value),placeholder:"Peso al Nacer (Kg)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),u.jsxs("button",{type:"button",onClick:()=>ie(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[u.jsx("span",{className:w?"text-white":"text-zinc-500",children:w||"Padre (Semental)"}),u.jsx(xc,{className:"text-zinc-400",size:20})]}),u.jsxs("button",{type:"button",onClick:()=>Y(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[u.jsx("span",{className:E?"text-white":"text-zinc-500",children:E||"Madre"}),u.jsx(xc,{className:"text-zinc-400",size:20})]}),u.jsx("input",{value:A,onChange:G=>P(G.target.value),placeholder:"Composición Racial (Ej: 50%A 50%S)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),u.jsxs(jg,{legend:"Manejo",children:[u.jsxs("select",{value:S,onChange:G=>T(G.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[u.jsx("option",{value:"",children:"Ubicación / Lote (Opcional)..."}),i.map(G=>u.jsx("option",{value:G.name,children:G.name},G.id))]}),u.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Si no se asigna un lote, se podrá encontrar en el filtro "Última Carga".'})]}),u.jsxs("div",{className:"space-y-3 pt-4",children:[k&&u.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${k.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",k.type==="success"?u.jsx(ul,{size:18}):u.jsx(zr,{size:18})," ",u.jsx("span",{children:k.text})," "]}),u.jsx("button",{type:"submit",className:"w-full bg-brand-green hover:bg-green-600 text-white font-bold py-4 rounded-xl text-lg",children:"Guardar Animal"}),u.jsx("button",{type:"button",onClick:e,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-3 rounded-xl text-lg",children:"Cancelar"})]})]}),u.jsx(St,{isOpen:N,onClose:()=>$(!1),title:"Seleccionar Fecha de Nacimiento",children:u.jsx("div",{className:"flex justify-center",children:u.jsx(fb,{mode:"single",selected:d?new Date(d+"T00:00:00"):void 0,onSelect:G=>{G&&h(G.toISOString().split("T")[0]),$(!1)},captionLayout:"dropdown",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear()})})}),u.jsx(__,{isOpen:M,onClose:()=>Y(!1),onSelect:G=>{O(G),Y(!1)},animals:r,title:"Seleccionar Madre",filterSex:"Hembra"}),u.jsx(__,{isOpen:q,onClose:()=>ie(!1),onSelect:G=>{_(G),ie(!1)},animals:r,title:"Seleccionar Padre",filterSex:"Macho"})]})},dne=({isOpen:t,onClose:e})=>{const{addBreedingGroup:n,animals:r}=At(),[i,s]=L.useState(""),[a,o]=L.useState(""),[l,c]=L.useState(new Date().toISOString().split("T")[0]),[f,d]=L.useState("45"),[h,g]=L.useState(!1),[b,y]=L.useState(!1),[x,w]=L.useState(""),_=async()=>{if(!i||!a||!l||!f){w("Todos los campos son obligatorios.");return}try{const A=new Date(l+"T00:00:00");A.setDate(A.getDate()+parseInt(f,10));const P=A.toISOString().split("T")[0];await n({name:i,sireId:a,startDate:l,endDate:P,status:"Activo"}),E()}catch(A){w("No se pudo guardar el lote de monta."),console.error(A)}},E=()=>{s(""),o(""),c(new Date().toISOString().split("T")[0]),d("45"),w(""),e()},O=L.useMemo(()=>{const A=r.find(P=>P.id===a);return A?`${a} (${A.race||"Mestizo"})`:a},[a,r]);return u.jsxs(u.Fragment,{children:[u.jsx(St,{isOpen:t,onClose:E,title:"Activar Nuevo Lote de Monta",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Lote de Monta"}),u.jsx("input",{type:"text",value:i,onChange:A=>s(A.target.value),placeholder:"Ej: Monta Otoño 2025",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Reproductor"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>g(!0),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[u.jsx("span",{className:a?"text-white":"text-zinc-500",children:O||"Seleccionar..."}),u.jsx(xc,{className:"text-zinc-400",size:20})]}),u.jsx("button",{type:"button",onClick:()=>y(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:u.jsx(fa,{size:24})})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),u.jsx("input",{type:"date",value:l,onChange:A=>c(A.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Duración (días)"}),u.jsx("input",{type:"number",value:f,onChange:A=>d(A.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]})]}),x&&u.jsx("p",{className:"text-sm text-red-400",children:x}),u.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[u.jsx("button",{onClick:E,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),u.jsx("button",{onClick:_,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Lote"})]})]})}),u.jsx(__,{isOpen:h,onClose:()=>g(!1),onSelect:A=>{o(A),g(!1)},animals:r,title:"Seleccionar Reproductor",filterSex:"Macho"}),u.jsx(St,{isOpen:b,onClose:()=>y(!1),title:"Registrar Nuevo Reproductor",children:u.jsx(XL,{onSaveSuccess:()=>{y(!1)},onCancel:()=>y(!1)})})]})},hne=152,pne=21,mne=hne+pne,gne=()=>{const{breedingGroups:t,serviceRecords:e,parturitions:n,animals:r,updateAnimal:i}=At(),s=L.useMemo(()=>{const a=new Date;a.setHours(0,0,0,0);const o=t.filter(d=>d.status==="Activo"),l=[],c=new Set,f=[];for(const d of o){const h=new Date(d.startDate),g=new Set(e.filter(y=>y.breedingGroupId===d.id).map(y=>y.femaleId));if(g.size===0)continue;let b=!0;for(const y of g){if(n.some(_=>_.goatId===y&&new Date(_.parturitionDate)>=h))continue;b=!1;const w=e.filter(_=>_.femaleId===y&&_.breedingGroupId===d.id).sort((_,E)=>new Date(E.serviceDate).getTime()-new Date(_.serviceDate).getTime())[0];if(w){const _=new Date(w.serviceDate);_.setDate(_.getDate()+mne),a>_&&(c.add(d.id),f.push({femaleId:y,groupId:d.id}))}}b&&l.push(d)}return{concludedGroups:l,groupsWithAlerts:c,femalesToFlag:f}},[t,e,n]);return L.useEffect(()=>{s.femalesToFlag.length>0&&(console.log("Detectadas hembras con posible fallo reproductivo:",s.femalesToFlag),(async()=>{for(const{femaleId:a}of s.femalesToFlag){const o=r.find(l=>l.id===a);if(o){const l=o.breedingFailures||0;console.log(`Incrementando fallo para ${a}. Total anterior: ${l}. Nuevo total: ${l+1}`),await i(a,{breedingFailures:l+1})}}})())},[s.femalesToFlag,r,i]),{concludedGroups:s.concludedGroups,groupsWithAlerts:s.groupsWithAlerts}},yne=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?u.jsxs(St,{isOpen:t,onClose:e,title:r,children:[" ",u.jsxs("div",{className:"space-y-6",children:[" ",u.jsx("p",{className:"text-zinc-300",children:i})," ",u.jsxs("div",{className:"flex justify-end gap-4",children:[u.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),u.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})," "]})," "]}):null,vne=({group:t,dragControls:e})=>u.jsxs("div",{className:"w-full p-4 flex items-center",children:[u.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:n=>e.start(n),children:u.jsx(T3,{className:"text-zinc-500"})}),u.jsxs("div",{className:"flex-grow",children:[u.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[" ",t.name," ",t.hasAlert&&u.jsx(zr,{className:"text-brand-red",size:16})," "]}),u.jsxs("p",{className:"text-sm text-zinc-400",children:["Semental: ",t.sireId," | ",u.jsx("span",{className:"font-semibold text-brand-orange",children:t.animalCount})," ",t.animalCount===1?"hembra":"hembras"]})]}),u.jsx(io,{className:"text-zinc-600"})]}),bne=({group:t,onEdit:e,onDelete:n,onClick:r,dragControls:i})=>{const s=vL(),a=L.useRef(!1),o=(l,c)=>{const f=c.offset.x,d=c.velocity.x;if(Math.abs(f)<2){r();return}f<-160/2||d<-500?s.start({x:-160}):s.start({x:0}),setTimeout(()=>{a.current=!1},100)};return u.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[u.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[u.jsxs("button",{onClick:e,onPointerDown:l=>l.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-orange text-white",children:[u.jsx(nb,{size:22}),u.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Opciones"})]}),u.jsxs("button",{onClick:n,onPointerDown:l=>l.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[u.jsx(td,{size:22}),u.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),u.jsx(cb.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{a.current=!0},onDragEnd:o,onTap:()=>{a.current||r()},animate:s,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:u.jsx(vne,{group:t,dragControls:i})})]})},KO=({group:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=bL();return u.jsxs(_L,{value:t,dragListener:!1,dragControls:i,children:[" ",u.jsx(bne,{group:t,dragControls:i,onClick:()=>e({name:"breeding-group-detail",groupId:t.id}),onEdit:()=>n(t),onDelete:()=>r(t)})," "]},t.id)};function xne({navigateTo:t}){const{breedingGroups:e,animals:n,updateBreedingGroup:r,deleteBreedingGroup:i}=At(),[s,a]=L.useState(!1),{concludedGroups:o,groupsWithAlerts:l}=gne(),[c,f]=L.useState(!1),[d,h]=L.useState(null),[g,b]=L.useState(null),y=L.useMemo(()=>{const O=S=>({...S,animalCount:n.filter(T=>T.breedingGroupId===S.id).length,hasAlert:l.has(S.id)}),A=e.filter(S=>S.status==="Activo"&&!o.some(T=>T.id===S.id)).map(O).sort((S,T)=>new Date(T.startDate).getTime()-new Date(S.startDate).getTime()),P=o.map(O);return{active:A,concluded:P}},[e,n,o,l]),[x,w]=L.useState(y.active);L.useEffect(()=>{w(y.active)},[y.active]);const _=()=>{g&&i(g.id)},E=[{label:"Cerrar Temporada",icon:eb,onClick:()=>{d&&r(d.id,{status:"Cerrado"})}}];return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>a(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-lg",children:[u.jsx(fa,{size:20})," Activar Temporada de Monta"]}),u.jsxs("div",{className:"space-y-2 pt-2",children:[u.jsx("h3",{className:"text-lg font-semibold text-zinc-300",children:"Temporadas Activas"}),x.length>0?u.jsx(wL,{as:"div",axis:"y",values:x,onReorder:w,className:"space-y-3",children:x.map(O=>u.jsx(KO,{group:O,navigateTo:t,onEdit:A=>{h(A),f(!0)},onDelete:A=>b(A)},O.id))}):u.jsxs("div",{className:"text-center py-6 bg-brand-glass rounded-2xl",children:[" ",u.jsx("p",{className:"text-zinc-500",children:"No hay temporadas de monta activas."})," "]})]}),u.jsxs("div",{className:"space-y-2 pt-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-zinc-300",children:"Temporadas Concluidas"}),y.concluded.length>0?y.concluded.map(O=>u.jsx(KO,{group:{...O,hasAlert:!1},navigateTo:t,onEdit:A=>{h(A),f(!0)},onDelete:A=>alert(`El lote concluido '${A.name}' no se puede eliminar permanentemente.`)},O.id)):u.jsxs("div",{className:"text-center py-6 bg-brand-glass rounded-2xl",children:[" ",u.jsx("p",{className:"text-zinc-500",children:"Aún no hay temporadas concluidas."})," "]})]}),u.jsx(dne,{isOpen:s,onClose:()=>a(!1)}),u.jsx(hv,{isOpen:c,onClose:()=>f(!1),title:`Opciones para "${d==null?void 0:d.name}"`,actions:E}),u.jsx(yne,{isOpen:!!g,onClose:()=>b(null),onConfirm:_,title:"Eliminar Lote de Monta",message:`¿Estás seguro de que quieres ELIMINAR PERMANENTEMENTE el lote "${g==null?void 0:g.name}"? Esta acción no se puede deshacer.`})]})}function qO({navigateTo:t}){const[e,n]=L.useState("physical"),[r,i]=L.useState(!1);return u.jsxs("div",{className:"w-full max-w-lg mx-auto space-y-4 pb-24",children:[u.jsxs("header",{className:"text-center pt-8 pb-4 px-0",children:[u.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Lotes"}),u.jsx("p",{className:"text-xl text-zinc-400",children:"Gestión de Grupos"})]}),u.jsx("div",{className:"px-4",children:u.jsxs("div",{className:"relative bg-brand-glass rounded-xl p-1 border border-brand-border flex items-center",children:[u.jsxs("button",{onClick:()=>n("physical"),className:`w-1/2 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="physical"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[u.jsx(nd,{size:16})," ",u.jsx("span",{className:"text-sm font-semibold",children:"Lotes Físicos"}),u.jsx("span",{onClick:s=>{s.stopPropagation(),i(!0)},className:"ml-2 p-1 rounded-full hover:bg-brand-orange/50",children:u.jsx(fa,{size:18})})]}),u.jsxs("button",{onClick:()=>n("breeding"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="breeding"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[u.jsx(rb,{size:16})," Lotes de Monta"]})]})}),u.jsx("div",{className:"pt-0",children:u.jsxs("div",{className:"px-0",children:[e==="physical"&&u.jsx(rJ,{navigateTo:t}),e==="breeding"&&u.jsx(xne,{navigateTo:t})]})}),u.jsx(z3,{isOpen:r,onClose:()=>i(!1)})]})}const wne=()=>({isRelated:L.useCallback((e,n,r)=>{if(!e||!n)return!1;const i=r.find(s=>s.id===e);if(!i)return!1;if(i.fatherId===n)return!0;if(i.motherId){const s=r.find(a=>a.id===i.motherId);if(s&&s.fatherId===n)return!0}return!1},[])});var QL={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},HO=B.createContext&&B.createContext(QL),_ne=["attr","size","title"];function Sne(t,e){if(t==null)return{};var n=Ene(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ene(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pv.apply(this,arguments)}function GO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GO(Object(n),!0).forEach(function(r){Ane(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ane(t,e,n){return e=Tne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tne(t){var e=Pne(t,"string");return typeof e=="symbol"?e:e+""}function Pne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZL(t){return t&&t.map((e,n)=>B.createElement(e.tag,mv({key:n},e.attr),ZL(e.child)))}function dl(t){return e=>B.createElement(Cne,pv({attr:mv({},t.attr)},e),ZL(t.child))}function Cne(t){var e=n=>{var{attr:r,size:i,title:s}=t,a=Sne(t,_ne),o=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),B.createElement("svg",pv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:l,style:mv(mv({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&B.createElement("title",null,s),t.children)};return HO!==void 0?B.createElement(HO.Consumer,null,n=>e(n)):e(QL)}function jne(t){return dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 23.38L89.844 89.845l-64.9 162.254 14.85 5.943c20.312-50.766 40.62-101.535 60.93-152.304l1.432-3.58L256 40.616l153.844 61.54 1.43 3.58 60.93 152.305 14.853-5.942-64.9-162.254C366.77 67.69 311.386 45.534 256 23.38zm0 36.624l-139.996 55.998L72.8 224h.2v263h78V329h-39v-18h297v176h30V224h.2c-14.402-36-28.802-72-43.204-107.998L256 60.004zM151 135h210v114H151V135zm23.563 18L199 201.873V153h-24.438zM313 153v48.873L337.438 153H313zm-144 29.127V231h24.438L169 182.127zm174 0L318.562 231H343v-48.873zm-98.73 18.69c-1.207-.02-2.31.02-3.288.128-2.823.31-10.76 3.708-16.86 7.3-2.796 1.645-5.23 3.22-7.122 4.484V231h78v-16.97c-4.193-1.675-10.334-4.02-17.578-6.368-11.206-3.63-24.71-6.71-33.152-6.846zM160 263h192v18H160v-18zm15.16 66L208 389.205 240.84 329h-65.68zm144 0L352 389.205 384.84 329h-65.68zM169 355.295v105.41L197.748 408 169 355.295zm78 0L218.252 408 247 460.705v-105.41zm66 0v105.41L341.748 408 313 355.295zm78 0L362.252 408 391 460.705v-105.41zm-183 71.5L175.16 487h65.68L208 426.795zm144 0L319.16 487h65.68L352 426.795z"},child:[]}]})(t)}function One(t){return dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M23 23v466h466v-18H41v-82.184l85.854-57.234 70.023 70.022 65.133-260.536L387.28 203.7 455.07 95.73l19.317 11.858 6.102-71.1-60.644 37.616 19.884 12.207-59.01 93.99-130.732-65.366-62.865 251.462-57.98-57.978L41 367.184V23H23z"},child:[]}]})(t)}function kne(t){return dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M44.62 106a26 26 0 0 0-25.69 29.3c16 124 16 117.4 0 241.4A26 26 0 0 0 54.72 404l138.68-57.7c-1.2 9.5-2.4 18.9-3.9 30.4-2.5 19.8 17.3 35 35.8 27.3l252-124c9.7-4 16-13.5 16-24s-6.3-20-16-24l-252-124c-3.2-1.3-6.6-2-10.1-2-15.6.1-27.7 13.8-25.7 29.3 1.5 11.5 2.7 20.9 3.9 30.4L54.72 108a26 26 0 0 0-10.1-2z"},child:[]}]})(t)}function JL(t){return dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M273 459l7.79-20 6.21 20 5.79-23.33-4.25-48c-7.76 7.94-17.54 17.85-29.74 30.27zm38.5-380.86a115.06 115.06 0 0 0-21.13-19.6c-17.315-11.88-35.418-18.913-55.08-22.14-18.751-3.067-37.99-2.743-56.33.12A203.86 203.86 0 0 0 133 49.42a184.2 184.2 0 0 0-29.62 15.36c-12.304 8.597-10.431 6.828.95 1.82a179.6 179.6 0 0 1 30.9-10c50.427-4.832 98.41-7.579 134.17 27.17a80 80 0 0 1 12.28 16c4.714 8.06 7.805 16.877 9.66 25.59l45.69 2.84c-5.032-17.752-15.256-37.574-25.53-50.06zm50.05 26.63c-8.531-13.217-18.495-25.428-29.66-34.88a78.24 78.24 0 0 0-15.79-10.38c2.67 2.68 5.22 5.45 7.61 8.32a138.13 138.13 0 0 1 9.13 12.11l.1.14.09.14c9.772 15.14 17.164 33.862 20.78 49.15l22.19 1.3a253.49 253.49 0 0 0-14.43-25.91zm29.89 43l70 179.4-11.82 28.37-65.77-37.94-8 13.86 67.56 39-4.327 5.754L394.12 372l-65.33-31.47a42.41 42.41 0 0 0-9.29-1.43c-5.71 0-9.52 2.06-12.71 6.62-2.53 3.61-78.5 80.52-147.64 150.28H16V243.73l92.85 3.85 96.61-33.26 10.13-11a214.71 214.71 0 0 1 38 24.27 18.57 18.57 0 0 0 11.61 3.93c13.792-1.574 22.025-9.12 32.83-17.83-3.267-21.244-6.724-43.71-9.56-62.1-6.463-2.155-12.926-4.308-19.39-6.46l4.39-4.78zm-37.25 65.02c-4.024-14.705-20.114-19.427-30.58-18.14-3.073.432-6.167 1.427-8.77 2.68.868 3.09 2.17 7.87 3.79 10.35 6.527 9.211 17.348 13.898 27.64 12.51 3.967-.672 8.94-3.676 7.92-7.4zm61.63 105.47l19 20 11.6-11-19-20zM475 172.99s-40.54-27.8-57-1.2l11.25 28.83zM294 382.05l13.4 22.28-.4-35.64c-3.29 3.45-7.53 7.82-12.95 13.36zm-30.6-167c5.858 1.872 17.61-6.048 17.33-8.01l-6.67-43.33-28-9.31c-17.65-2.861-58.224-4.989-67.27 9.28 39.596 39.732 39.526 16.87 84.61 51.37zm127.08 172.89c-15.313-7.704-30.838-14.996-46.28-22.44 5.153 29.387 10.895 58.672 15.75 88.11l25.26 37.33-2.6-34L400 469.61v-28.67l10.19-41.95 6.67-11.05z"},child:[]}]})(t)}function Ine(t){return dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M302.958 20.019l-93.916 46.564v35.404c31.305-15.522 62.61-31.047 93.916-46.568zm6.53 52.252l-95.4 47.3 63.036 78.137 95.397-47.303zm-111.915 55.492l-33.732 16.724h47.224zm-22.119 34.722l71.615 26.633-21.484-26.633zm-41.021 3.948v276.752l131.22 48.796v-276.75zm243.134 1.56c-31.306 15.521-62.61 31.044-93.916 46.567v275.863l93.916-46.567zM176.501 272.466s-15.3 15.085-9.889 24.203c4.167 7.02 21.889 5.418 21.889 5.418l15.549 3.848s17.72 10.374 21.887 5.416c5.41-6.44-9.887-29.098-9.887-29.098s35.91 33.492 29.662 47.318c-3.143 6.955-24.719-2.117-24.719-2.117s5.495 7.21 4.944 10.549c-1.001 6.062-13.774 9.916-13.774 9.916s1.111 21.24-6 25.168c-5.147 2.843-14.628.497-19.775-4.895-7.111-7.448-6-28.136-6-28.136s-12.775-10.177-13.776-16.735c-.55-3.611 4.944-8.103 4.944-8.103s-21.575-1.607-24.717-10.117c-6.247-16.919 29.662-32.635 29.662-32.635z"},child:[]}]})(t)}function Nne(t){return dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M90.52 390.06h38.497v16.583H65.443V390.06l31.933-28.182c2.852-2.578 4.96-5.098 6.328-7.56 1.368-2.46 2.05-5.018 2.05-7.675 0-4.1-1.386-7.402-4.16-9.902-2.733-2.5-6.386-3.75-10.956-3.75-3.516 0-7.363.763-11.543 2.286-4.18 1.485-8.652 3.71-13.418 6.68v-19.22c5.078-1.678 10.098-2.948 15.06-3.807 4.96-.9 9.823-1.35 14.588-1.35 10.47 0 18.594 2.306 24.375 6.915 5.82 4.61 8.73 11.035 8.73 19.277 0 4.766-1.23 9.22-3.69 13.36-2.46 4.1-7.637 9.61-15.528 16.523l-18.69 16.406m349.377 32.915c5.897 1.524 10.37 4.18 13.417 7.97 3.086 3.75 4.63 8.534 4.63 14.355 0 8.672-3.322 15.273-9.962 19.804-6.64 4.493-16.328 6.74-29.063 6.74-4.492 0-9.004-.372-13.535-1.115-4.492-.704-8.945-1.778-13.36-3.223v-17.403c4.22 2.11 8.4 3.71 12.54 4.805 4.18 1.054 8.28 1.58 12.304 1.58 5.978 0 10.548-1.034 13.712-3.104 3.203-2.07 4.805-5.04 4.805-8.907 0-3.985-1.64-6.993-4.922-9.024-3.242-2.07-8.047-3.105-14.414-3.106h-9.022v-14.53h9.492c5.664 0 9.883-.88 12.656-2.638 2.773-1.796 4.16-4.51 4.16-8.144 0-3.36-1.347-5.957-4.043-7.793-2.695-1.836-6.504-2.754-11.426-2.754-3.632 0-7.304.41-11.015 1.232-3.71.82-7.403 2.03-11.074 3.632V384.83c4.453-1.25 8.867-2.186 13.242-2.812 4.375-.624 8.672-.937 12.89-.937 11.368 0 19.864 1.876 25.49 5.626 5.663 3.71 8.495 9.316 8.495 16.816 0 5.118-1.348 9.317-4.043 12.598-2.696 3.242-6.68 5.527-11.953 6.856M236.062 230.74h19.922v-56.544l-20.45 4.22v-15.352l20.333-4.22h21.445v71.895h19.922v15.585h-61.172V230.74M496 496V352H352V128H176v160H16v208"},child:[]}]})(t)}function Dne(t){return dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M24.844 25.563c1.333 77.685 25.778 141.568 63.283 187.955 4.367-4.937 8.77-9.796 13.13-14.553a9.5 9.5 0 0 1 7.348-3.178 9.5 9.5 0 0 1 6.66 16.016c-22.957 25.048-46.51 52.82-58.777 76.95-6.132 12.067-9.31 23.07-9.037 31.874.17 5.474 1.374 10.174 4.26 14.562l16.552-22.684a9.5 9.5 0 0 1 7.898-4.008 9.5 9.5 0 0 1 7.45 15.207l-16.635 22.797c2.973.316 6.316-.284 10.474-1.75 8.174-2.882 18.38-9.868 28.734-19.672 20.704-19.608 42.15-50.057 56.953-77.644a9.5 9.5 0 0 1 9.9-4.885c6.228 1.017 22.147 2.215 35.78.573 6.816-.82 13.107-2.395 17.232-4.432 4.124-2.035 5.597-3.84 6.12-5.934a9.5 9.5 0 1 1 18.434 4.603c-2.193 8.78-8.967 14.825-16.145 18.37-7.18 3.542-15.245 5.277-23.372 6.256-12.798 1.542-25.47 1.082-34.522.143-2.816 5.038-5.806 10.122-8.937 15.192 29.03 14.058 60.48 21.354 92.34 21.115 22.055-.164 43.82-4.29 64.64-11.937-6.014-8.637-11.297-17.378-15.596-25.96A9.5 9.5 0 1 1 326 252.03c13.688 27.32 40.692 59.164 67.537 79.982 13.423 10.41 26.846 18.047 37.842 21.363 5.988 1.806 10.902 2.378 14.983 1.854l-10.996-13.093a9.5 9.5 0 0 1 7.06-15.715 9.5 9.5 0 0 1 7.49 3.494l12.054 14.352c3.226-4.725 4.71-9.948 5.042-16.102.513-9.534-2.39-21.344-8.18-34.158-11.578-25.63-34.297-54.796-57.053-79.625a9.5 9.5 0 0 1 7.322-16.01 9.5 9.5 0 0 1 6.685 3.172c3.1 3.384 6.205 6.848 9.29 10.37 37.514-47.34 61.834-111.574 62.892-186.352H24.843zm138.664 270.68c-4.952 14.607-8.863 29.266-11.043 42.61-2.476 15.154-2.608 28.608-.29 37.745 2.32 9.137 5.71 13.32 12.514 15.22 10.31 2.88 17.56 1.32 24.884-3.572 7.325-4.893 14.436-13.87 20.696-25.87 6.813-13.064 12.555-29.486 17.517-47.09-22.16-3.106-43.775-9.54-64.28-19.044zm173.04 6.083c-9.938 3.936-20.108 7.144-30.456 9.57.512.913 1.02 1.844 1.54 2.733 7.736 13.262 16.197 23.722 23.802 29.292 7.604 5.57 12.882 6.638 19.34 3.77 7.937-3.52 12.458-8.014 15.236-14.087-10.454-9.556-20.457-20.185-29.46-31.28z"},child:[]}]})(t)}const bs={PREGNANT:{key:"PREGNANT",Icon:RH,color:"text-pink-400",label:"Preñada"},IN_SERVICE_CONFIRMED:{key:"IN_SERVICE_CONFIRMED",Icon:ZH,color:"text-pink-500",label:"Servicio Visto"},IN_SERVICE:{key:"IN_SERVICE",Icon:P3,color:"text-red-400",label:"En Monta"},EMPTY:{key:"EMPTY",Icon:UH,color:"text-zinc-500",label:"Vacía"},SIRE_IN_SERVICE:{key:"SIRE_IN_SERVICE",Icon:pG,color:"text-blue-400",label:"Reproductor Activo"},MILKING:{key:"MILKING",Icon:Dne,color:"text-blue-300",label:"En Ordeño"},DRYING_OFF:{key:"DRYING_OFF",Icon:RE,color:"text-yellow-400",label:"Secando"},DRY:{key:"DRY",Icon:eb,color:"text-zinc-400",label:"Seca"}},Mne=(t,e,n,r)=>{const i=[];if(!t)return[];if(t.sex==="Hembra"){const s=e.filter(a=>a.goatId===t.id&&a.status!=="finalizada").sort((a,o)=>new Date(o.parturitionDate).getTime()-new Date(a.parturitionDate).getTime())[0];s&&(s.status==="activa"?i.push("MILKING"):s.status==="en-secado"?i.push("DRYING_OFF"):s.status==="seca"&&i.push("DRY"))}return t.reproductiveStatus==="Preñada"?i.push("PREGNANT"):t.reproductiveStatus==="En Servicio"?n.some(s=>s.femaleId===t.id&&s.breedingGroupId===t.breedingGroupId)?i.push("IN_SERVICE_CONFIRMED"):i.push("IN_SERVICE"):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&i.push("EMPTY"),t.sex==="Macho"&&r.some(s=>s.sireId===t.id&&s.status==="Activo")&&i.push("SIRE_IN_SERVICE"),Array.from(new Set(i))},Rne=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],YO=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-semibold text-zinc-400 mb-2",children:t}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("button",{type:"button",onClick:()=>r("ALL"),className:`px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const{Icon:s,label:a}=bs[i];return u.jsxs("button",{type:"button",onClick:()=>r(i),className:`flex items-center gap-1.5 px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n===i?"bg-brand-blue text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[u.jsx(s,{size:14}),a]},i)})]})]}),wA=({isOpen:t,onClose:e,onSelect:n,animals:r,parturitions:i,serviceRecords:s,breedingGroups:a,title:o,sireIdForInbreedingCheck:l})=>{const[c,f]=L.useState(""),[d,h]=L.useState(new Set),{isRelated:g}=wne(),[b,y]=L.useState(!1),[x,w]=L.useState("Todos"),[_,E]=L.useState(!1),[O,A]=L.useState("ALL"),[P,S]=L.useState("ALL"),T=L.useMemo(()=>r.map(M=>({...M,statuses:Mne(M,i,s,a),formattedAge:Is(M.birthDate),zootecnicCategory:Tm(M,i)})),[r,i,s,a]),k=L.useMemo(()=>{let M=T;return _?M.sort((Y,q)=>(q.createdAt||0)-(Y.createdAt||0)).slice(0,25):(x!=="Todos"&&(M=M.filter(Y=>Y.zootecnicCategory===x)),O!=="ALL"&&(M=M.filter(Y=>Y.statuses.includes(O))),P!=="ALL"&&(M=M.filter(Y=>Y.statuses.includes(P))),c&&(M=M.filter(Y=>Y.id.toLowerCase().includes(c.toLowerCase()))),M)},[T,x,_,O,P,c]),z=()=>{k.every(M=>d.has(M.id))?h(new Set):h(new Set(k.map(M=>M.id)))},N=()=>{n(Array.from(d)),e()},$=()=>{w("Todos"),E(!1),A("ALL"),S("ALL"),f("")};return u.jsx(St,{isOpen:t,onClose:e,title:o,size:"fullscreen",children:u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(xc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),u.jsx("input",{type:"search",placeholder:"Buscar por ID...",value:c,onChange:M=>f(M.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-2.5 text-white focus:ring-2 focus:ring-brand-orange"})]}),u.jsxs("button",{onClick:()=>y(!b),className:"w-full flex justify-between items-center text-zinc-400 hover:text-white",children:[u.jsx("span",{className:"text-sm font-semibold",children:"Filtros Avanzados"}),u.jsx(iv,{className:`transition-transform ${b?"rotate-180":""}`})]}),b&&u.jsxs("div",{className:"space-y-4 p-4 bg-black/20 rounded-2xl animate-fade-in",children:[u.jsx(YO,{title:"Filtros Productivos",filters:["MILKING","DRYING_OFF","DRY"],activeFilter:O,onFilterChange:A}),u.jsx(YO,{title:"Filtros Reproductivos",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"],activeFilter:P,onFilterChange:S}),u.jsxs("div",{className:"flex gap-2 pt-2 border-t border-brand-border",children:[u.jsxs("select",{value:x,onChange:M=>w(M.target.value),className:"w-full bg-zinc-800 p-2 rounded-xl text-white border border-zinc-700 text-sm",children:[u.jsx("option",{value:"Todos",children:"Categoría Zootécnica..."}),Rne.map(M=>u.jsx("option",{value:M,children:M},M))]}),u.jsxs("button",{onClick:()=>E(!_),className:`flex-shrink-0 flex items-center gap-2 p-2 rounded-xl border text-sm transition-colors ${_?"bg-brand-orange border-brand-orange text-white":"border-zinc-700 bg-zinc-800 text-zinc-300"}`,children:[u.jsx(C3,{size:16})," Última Carga"]}),u.jsx("button",{onClick:$,className:"flex-shrink-0 p-2 rounded-xl border border-zinc-700 bg-zinc-800 text-zinc-300",children:u.jsx(DE,{size:16})})]})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 py-4 min-h-[10rem]",children:k.length>0?k.map(M=>{const Y=l?g(M.id,l,r):!1;return u.jsxs("div",{onClick:()=>h(q=>{const ie=new Set(q);return ie.has(M.id)?ie.delete(M.id):ie.add(M.id),ie}),className:`w-full text-left p-3 flex items-center gap-4 rounded-lg cursor-pointer transition-colors ${Y?"bg-yellow-900/50 border border-yellow-500/60 hover:bg-yellow-800/50":"bg-zinc-800/50 hover:bg-zinc-700"}`,children:[d.has(M.id)?u.jsx(M3,{className:"text-brand-orange flex-shrink-0"}):u.jsx(R3,{className:"text-zinc-500 flex-shrink-0"}),u.jsxs("div",{className:"flex-grow",children:[u.jsxs("p",{className:"font-bold text-white flex items-center gap-2",children:[M.id," ",Y&&u.jsx(zr,{className:"text-yellow-400",size:16})]}),u.jsxs("p",{className:"text-xs text-zinc-400",children:[M.sex," | ",M.formattedAge," | Lote: ",M.location||"Sin Asignar"]})]})]},M.id)}):u.jsx("div",{className:"flex-grow flex items-center justify-center",children:u.jsx("p",{className:"text-zinc-500 text-center",children:"No se encontraron animales."})})}),u.jsxs("div",{className:"flex-shrink-0 grid grid-cols-3 items-center pt-4 border-t border-brand-border gap-2",children:[u.jsx("button",{type:"button",onClick:z,disabled:k.length===0,className:"bg-zinc-700 hover:bg-zinc-600 text-white font-bold py-3 px-2 rounded-lg disabled:opacity-50 text-sm",children:k.every(M=>d.has(M.id))?"Deseleccionar":"Sel. Todos"}),u.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-3 px-2 rounded-lg text-sm",children:"Cancelar"}),u.jsxs("button",{onClick:N,className:"bg-brand-green hover:bg-green-600 text-white font-bold py-3 px-2 rounded-lg disabled:opacity-50 text-sm",children:["Seleccionar (",d.size,")"]})]})]})})},$ne=({isOpen:t,onClose:e,animalsToTransfer:n,fromLot:r})=>{const{lots:i,updateAnimal:s}=At(),[a,o]=L.useState(""),l=L.useMemo(()=>i.filter(f=>f.name!==r),[i,r]),c=async()=>{if(!a||n.length===0)return;const f=n.map(d=>s(d,{location:a}));try{await Promise.all(f),e()}catch(d){console.error("Error al transferir animales:",d)}};return u.jsx(St,{isOpen:t,onClose:e,title:`Transferir ${n.length} animales`,children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:["Transferir desde: ",u.jsx("span",{className:"font-semibold text-white",children:r})]}),u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1 mt-4",children:"Hacia el lote:"}),u.jsxs("select",{value:a,onChange:f=>o(f.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[u.jsx("option",{value:"",children:"Seleccionar lote de destino..."}),l.map(f=>u.jsx("option",{value:f.name,children:f.name},f.id))]})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[u.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),u.jsx("button",{onClick:c,disabled:!a,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:"Confirmar Transferencia"})]})]})})};function lu(t,e,n){let r=n.initialDeps??[],i;function s(){var a,o,l,c;let f;n.key&&((a=n.debug)!=null&&a.call(n))&&(f=Date.now());const d=t();if(!(d.length!==r.length||d.some((b,y)=>r[y]!==b)))return i;r=d;let g;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(g=Date.now()),i=e(...d),n.key&&((l=n.debug)!=null&&l.call(n))){const b=Math.round((Date.now()-f)*100)/100,y=Math.round((Date.now()-g)*100)/100,x=y/16,w=(_,E)=>{for(_=String(_);_.length<E;)_=" "+_;return _};console.info(`%c⏱ ${w(y,5)} /${w(b,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*x,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(c=n==null?void 0:n.onChange)==null||c.call(n,i),i}return s.updateDeps=a=>{r=a},s}function XO(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const Lne=(t,e)=>Math.abs(t-e)<1.01,zne=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},QO=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},Vne=t=>t,Fne=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},Bne=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=a=>{const{width:o,height:l}=a;e({width:Math.round(o),height:Math.round(l)})};if(i(QO(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(a=>{const o=()=>{const l=a[0];if(l!=null&&l.borderBoxSize){const c=l.borderBoxSize[0];if(c){i({width:c.inlineSize,height:c.blockSize});return}}i(QO(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},ZO={passive:!0},JO=typeof window>"u"?!0:"onscrollend"in window,Une=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const s=t.options.useScrollendEvent&&JO?()=>{}:zne(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),a=f=>()=>{const{horizontal:d,isRtl:h}=t.options;i=d?n.scrollLeft*(h&&-1||1):n.scrollTop,s(),e(i,f)},o=a(!0),l=a(!1);l(),n.addEventListener("scroll",o,ZO);const c=t.options.useScrollendEvent&&JO;return c&&n.addEventListener("scrollend",l,ZO),()=>{n.removeEventListener("scroll",o),c&&n.removeEventListener("scrollend",l)}},Wne=(t,e,n)=>{if(e!=null&&e.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},Kne=(t,{adjustments:e=0,behavior:n},r)=>{var i,s;const a=t+e;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class qne{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Vne,rangeExtractor:Fne,onChange:()=>{},measureElement:Wne,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=lu(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(i.has(o.lane))continue;const l=s.get(o.lane);if(l==null||o.end>l.end?s.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=lu(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=lu(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(f=>{this.itemSizeCache.set(f.key,f.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let f=l;f<n;f++){const d=s(f),h=this.options.lanes===1?c[f-1]:this.getFurthestMeasurement(c,f),g=h?h.end+this.options.gap:r+i,b=o.get(d),y=typeof b=="number"?b:this.options.estimateSize(f),x=g+y,w=h?h.lane:f%this.options.lanes;c[f]={index:f,start:g,size:y,end:x,key:d,lane:w}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=lu(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?Hne({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=lu(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,a)=>s===null||a===null?[]:n({startIndex:s,endIndex:a,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const a=s.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=r-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=lu(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,a=n.length;s<a;s++){const o=n[s],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return XO(r[e6(0,r.length-1,i=>XO(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const o=this.getTotalSize()+this.options.scrollMargin-s;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let s=0;const a=10,o=c=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,c);if(!f){console.warn("Failed to get offset for index:",n);return}const[d,h]=f;this._scrollToOffset(d,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const g=this.getScrollOffset(),b=this.getOffsetForIndex(n,h);if(!b){console.warn("Failed to get offset for index:",n);return}Lne(b[0],g)||l(h)})},l=c=>{this.targetWindow&&(s++,s<a?this.targetWindow.requestAnimationFrame(()=>o(c)):console.warn(`Failed to scroll to index ${n} after ${a} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(o=>o===null);){const o=r[a];s[o.lane]===null&&(s[o.lane]=o.end),a--}i=Math.max(...s.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const e6=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,s=n(i);if(s<r)t=i+1;else if(s>r)e=i-1;else return i}return t>0?t-1:0};function Hne({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,s=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:i};let a=e6(0,i,s,n),o=a;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(f=>f<n+e);){const f=t[o];l[f.lane]=f.end,o++}const c=Array(r).fill(n+e);for(;a>=0&&c.some(f=>f>=n);){const f=t[a];c[f.lane]=f.start,a--}a=Math.max(0,a-a%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}const ek=typeof document<"u"?L.useLayoutEffect:L.useEffect;function Gne(t){const e=L.useReducer(()=>({}),{})[1],n={...t,onChange:(i,s)=>{var a;s?l4.flushSync(e):e(),(a=t.onChange)==null||a.call(t,i,s)}},[r]=L.useState(()=>new qne(n));return r.setOptions(n),ek(()=>r._didMount(),[]),ek(()=>r._willUpdate()),r}function t6(t){return Gne({observeElementRect:Bne,observeElementOffset:Une,scrollToFn:Kne,...t})}const Yne=({animal:t,onSelect:e,isEditing:n,isSelected:r})=>{const i=Is(t.birthDate);return u.jsx("div",{onClick:()=>e(t.id),className:`w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border flex justify-between items-center transition-all ${n?"cursor-pointer border-transparent":"hover:border-brand-orange"}`,children:u.jsxs("div",{className:"flex items-center gap-4",children:[n&&(r?u.jsx(M3,{className:"text-brand-orange flex-shrink-0",size:24}):u.jsx(R3,{className:"text-zinc-500 flex-shrink-0",size:24})),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),u.jsxs("p",{className:"text-sm text-zinc-400",children:[t.sex," | ",i," | Lote: ",t.location||"Sin Asignar"]})]})]})})};function Xne({lotName:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,serviceRecords:s,breedingGroups:a,updateAnimal:o}=At(),[l,c]=L.useState(!1),[f,d]=L.useState(!1),[h,g]=L.useState(new Set),[b,y]=L.useState(!1),x=L.useMemo(()=>r.filter(P=>(P.location||"Sin Asignar")===t).sort((P,S)=>P.id.localeCompare(S.id)),[r,t]),w=L.useRef(null),_=t6({count:x.length,getScrollElement:()=>w.current,estimateSize:()=>92,overscan:5}),E=P=>{g(S=>{const T=new Set(S);return T.has(P)?T.delete(P):T.add(P),T})},O=async()=>{const P=Array.from(h).map(S=>o(S,{location:""}));try{await Promise.all(P),d(!1),g(new Set)}catch(S){console.error("Error al quitar animales del lote:",S)}},A=async P=>{const S=P.map(T=>o(T,{location:t}));await Promise.all(S)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-24 animate-fade-in",children:[u.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4",children:[u.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:t}),u.jsxs("p",{className:"text-lg text-zinc-400",children:[x.length," ",x.length===1?"animal":"animales"]})]}),f?u.jsx("button",{onClick:()=>{d(!1),g(new Set)},className:"text-brand-orange font-semibold px-2 py-1",children:"Listo"}):u.jsx("button",{onClick:()=>d(!0),className:"p-2 -mr-2 text-zinc-400 hover:text-white",children:u.jsx(nb,{size:20})})]}),!f&&u.jsx("div",{className:"px-4",children:u.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[u.jsx(fa,{size:20})," Añadir Animales"]})}),u.jsx("div",{ref:w,className:"pt-4",style:{height:"calc(100vh - 250px)",overflowY:"auto"},children:x.length>0?u.jsx("div",{style:{height:`${_.getTotalSize()}px`,width:"100%",position:"relative"},children:_.getVirtualItems().map(P=>{const S=x[P.index];return u.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${P.size}px`,transform:`translateY(${P.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:u.jsx(Yne,{animal:S,isEditing:f,isSelected:h.has(S.id),onSelect:T=>f?E(T):n({name:"rebano-profile",animalId:T})})},P.key)})}):u.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:u.jsx("p",{className:"text-zinc-500",children:"Este lote está vacío."})})})]}),f&&h.size>0&&u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black/50 backdrop-blur-md p-4 border-t border-brand-border animate-slide-up z-20",children:u.jsxs("div",{className:"max-w-2xl mx-auto flex gap-4",children:[u.jsxs("button",{onClick:O,className:"flex-1 flex items-center justify-center gap-2 bg-brand-red text-white font-bold py-3 rounded-xl",children:[u.jsx(td,{size:18})," Quitar del Lote"]}),u.jsxs("button",{onClick:()=>y(!0),className:"flex-1 flex items-center justify-center gap-2 bg-brand-blue text-white font-bold py-3 rounded-xl",children:[u.jsx(iG,{size:18})," Transferir"]})]})}),u.jsx(wA,{isOpen:l,onClose:()=>c(!1),onSelect:A,animals:r,parturitions:i,serviceRecords:s,breedingGroups:a,title:`Añadir animales a: ${t}`}),u.jsx($ne,{isOpen:b,onClose:()=>{y(!1),d(!1),g(new Set)},animalsToTransfer:Array.from(h),fromLot:t})]})}function Qne({onBack:t}){return u.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex flex-col justify-end animate-fade-in",onClick:t,children:u.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-4xl mx-auto h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:e=>e.stopPropagation(),children:[u.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[u.jsx("div",{className:"w-10"})," ",u.jsx("h1",{className:"text-xl font-bold tracking-tight text-white",children:"Ingresar Nuevo Animal"}),u.jsx("button",{onClick:t,className:"p-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50 transition-colors","aria-label":"Cerrar",children:u.jsx(Mc,{size:24})})]}),u.jsx("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsx(XL,{onSaveSuccess:t,onCancel:t})})})]})})}const n6=(t,e)=>{const[n,r]=L.useState(""),i=L.useMemo(()=>n?t.filter(s=>e.some(a=>{const o=s[a];return typeof o=="string"||typeof o=="number"?o.toString().toLowerCase().includes(n.toLowerCase()):!1})):t,[t,n,e]);return{searchTerm:n,setSearchTerm:r,filteredItems:i}},r6=({title:t,subtitle:e,searchTerm:n,setSearchTerm:r})=>{const[i,s]=L.useState(!1),a=L.useRef(null);L.useEffect(()=>{var l;i&&((l=a.current)==null||l.focus())},[i]);const o=()=>{r(""),s(!1)};return u.jsxs("header",{className:"text-center pt-4 pb-4 relative overflow-hidden",children:[u.jsxs("div",{className:`transition-transform duration-300 ${i?"-translate-y-20":"translate-y-0"}`,children:[u.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:t}),u.jsx("p",{className:"text-md text-zinc-400",children:e})]}),u.jsx("div",{className:`absolute inset-0 transition-transform duration-300 flex items-center pt-2 ${i?"translate-y-0":"translate-y-20"}`,children:u.jsx("input",{ref:a,type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"Buscar por ID...",className:"w-full bg-zinc-800 text-white text-lg placeholder-zinc-500 p-3 rounded-xl border-2 border-transparent focus:border-amber-500 focus:ring-0 focus:outline-none"})}),u.jsx("div",{className:"absolute top-4 right-0 pt-1",children:u.jsx("button",{onClick:i?o:()=>s(!0),className:"p-2 text-zinc-400 hover:text-white transition-colors",children:i?u.jsx(Mc,{size:22}):u.jsx(xc,{size:22})})})]})},Zne=({statuses:t})=>{if(!t||t.length===0)return null;const e=[...t].sort((n,r)=>{const i=["MILKING","DRYING_OFF","DRY","PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"];return i.indexOf(n.key)-i.indexOf(r.key)});return u.jsx("div",{className:"flex items-center space-x-1.5",children:e.map(({key:n,Icon:r,color:i,label:s})=>u.jsx("span",{title:s,children:u.jsx(r,{className:i,size:16,strokeWidth:2.5})},n))})},Jne=(t,e,n,r)=>{const i=[];if(!t)return[];if(t.sex==="Hembra"){const s=e.filter(a=>a.goatId===t.id&&a.status!=="finalizada").sort((a,o)=>new Date(o.parturitionDate).getTime()-new Date(a.parturitionDate).getTime())[0];s&&(s.status==="activa"?i.push(bs.MILKING):s.status==="en-secado"?i.push(bs.DRYING_OFF):s.status==="seca"&&i.push(bs.DRY))}return t.reproductiveStatus==="Preñada"?i.push(bs.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(a=>a.femaleId===t.id&&a.breedingGroupId===t.breedingGroupId)?i.push(bs.IN_SERVICE_CONFIRMED):i.push(bs.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&i.push(bs.EMPTY),t.sex==="Macho"&&r.some(a=>a.sireId===t.id&&a.status==="Activo")&&i.push(bs.SIRE_IN_SERVICE),i},ere=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],tre=({animal:t,onSelect:e})=>u.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),u.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"Sin Asignar"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Zne,{statuses:t.statusObjects}),u.jsx(io,{className:"text-zinc-600"})]})]}),cw=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>u.jsxs("div",{children:[t&&u.jsx("label",{className:"block text-sm font-semibold text-zinc-400 mb-2",children:t}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("button",{onClick:()=>r("all"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n==="all"||n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const s=i.Icon||null;return u.jsxs("button",{onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[s&&u.jsx(s,{size:14}),i.label]},i.key)})]})]});function nre({navigateTo:t,locationFilter:e}){const{animals:n,parturitions:r,serviceRecords:i,breedingGroups:s,isLoading:a}=At(),[o,l]=L.useState("Activos"),[c,f]=L.useState("all"),[d,h]=L.useState("Todos"),[g,b]=L.useState(!1),[y,x]=L.useState("ALL"),[w,_]=L.useState("ALL"),[E,O]=L.useState(!1),[A,P]=L.useState(!1),S=L.useMemo(()=>n.map(q=>({...q,statusObjects:Jne(q,r,i,s),formattedAge:Is(q.birthDate),zootecnicCategory:Tm(q,r)})),[n,r,i,s]),T=L.useMemo(()=>{let q=o==="Activos"?S.filter(ie=>!ie.isReference):S.filter(ie=>ie.isReference);return g?q.sort((ie,le)=>(le.endDate?new Date(le.endDate).getTime():le.createdAt||0)-(ie.endDate?new Date(ie.endDate).getTime():ie.createdAt||0)).slice(0,25):(e&&(q=q.filter(ie=>(ie.location||"Sin Asignar")===e)),o==="Activos"?(y!=="ALL"&&(q=q.filter(ie=>ie.statusObjects.some(le=>le.key===y))),w!=="ALL"&&(q=q.filter(ie=>ie.statusObjects.some(le=>le.key===w)))):c!=="all"&&(q=q.filter(ie=>ie.status===c)),d!=="Todos"&&(q=q.filter(ie=>ie.zootecnicCategory===d)),q)},[S,o,g,e,d,y,w,c]),{searchTerm:k,setSearchTerm:z,filteredItems:N}=n6(T,["id"]),$=()=>{h("Todos"),b(!1),x("ALL"),_("ALL"),f("all"),z("")},M=L.useRef(null),Y=t6({count:N.length,getScrollElement:()=>M.current,estimateSize:()=>104,overscan:5});return a?u.jsx("div",{className:"text-center p-10",children:u.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando rebaño..."})}):u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[u.jsx(r6,{title:e||"Mi Rebaño",subtitle:`${N.length} animales en la vista`,searchTerm:k,setSearchTerm:z}),u.jsxs("div",{className:"space-y-4 px-4",children:[u.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[u.jsxs("button",{onClick:()=>l("Activos"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${o==="Activos"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[u.jsx(nd,{size:16})," Activos"]}),u.jsxs("button",{onClick:()=>l("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${o==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[u.jsx(GH,{size:16})," Referencia"]})]}),o==="Activos"?u.jsxs("div",{className:"space-y-4 animate-fade-in",children:[u.jsxs("button",{onClick:()=>t({name:"add-animal"}),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[u.jsx(fa,{size:18})," Ingresar Nuevo Animal"]}),u.jsxs("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:()=>O(!E),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[u.jsx("span",{children:"Filtros Productivos"}),u.jsx(iv,{className:`transition-transform ${E?"rotate-180":""}`,size:18})]}),E&&u.jsx("div",{className:"animate-fade-in",children:u.jsx(cw,{title:"",filters:["MILKING","DRYING_OFF","DRY"].map(q=>bs[q]),activeFilter:y,onFilterChange:x})})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:()=>P(!A),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[u.jsx("span",{children:"Filtros Reproductivos"}),u.jsx(iv,{className:`transition-transform ${A?"rotate-180":""}`,size:18})]}),A&&u.jsx("div",{className:"animate-fade-in",children:u.jsx(cw,{title:"",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map(q=>bs[q]),activeFilter:w,onFilterChange:_})})]})]})]}):u.jsx("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:u.jsx(cw,{title:"Filtrar por Causa de Baja",filters:[{key:"Venta",label:"Venta"},{key:"Muerte",label:"Muerte"},{key:"Descarte",label:"Descarte"}],activeFilter:c,onFilterChange:f})}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("button",{onClick:()=>b(!0),title:"Última Carga",className:`flex items-center gap-2 py-1 px-3 text-sm font-semibold rounded-lg transition-colors ${g?"text-brand-orange":"text-zinc-400 hover:text-brand-orange"}`,children:[u.jsx(C3,{size:16})," Última Carga"]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:()=>t({name:"manage-lots"}),className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[u.jsx(lG,{size:14})," Gestionar Lotes"]}),u.jsxs("button",{onClick:$,className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[u.jsx(DE,{size:14})," Limpiar"]})]})]}),u.jsxs("select",{value:d,onChange:q=>h(q.target.value),className:"w-full bg-brand-glass p-3 rounded-xl text-white border border-brand-border focus:border-brand-orange focus:ring-0",children:[u.jsx("option",{value:"Todos",children:"Todas las Categorías Zootécnicas"}),ere.map(q=>u.jsx("option",{value:q,children:q},q))]})]}),u.jsx("div",{ref:M,className:"pt-4",style:{height:"600px",overflowY:"auto"},children:N.length>0?u.jsx("div",{style:{height:`${Y.getTotalSize()}px`,width:"100%",position:"relative"},children:Y.getVirtualItems().map(q=>{const ie=N[q.index];return u.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${q.size}px`,transform:`translateY(${q.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:u.jsx(tre,{animal:ie,onSelect:()=>t({name:"rebano-profile",animalId:ie.id})})},q.key)})}):u.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:u.jsx("p",{className:"text-zinc-400",children:k?`No se encontraron resultados para "${k}"`:"No hay animales que coincidan con los filtros."})})})]})}const rre=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=L.useState(""),[s,a]=L.useState(""),[o,l]=L.useState(""),{fathers:c}=At(),f=()=>{l("");const d=r.trim().toUpperCase(),h=s.trim();if(!d||!h){l("Ambos campos son obligatorios.");return}if(c.some(g=>g.id===d)){l("Este ID ya está en uso. Por favor, elige otro.");return}n({id:d,name:h}),i(""),a("")};return u.jsx(St,{isOpen:t,onClose:e,title:"Añadir Nuevo Padre",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce un ID único y el nombre del nuevo semental."}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),placeholder:"ID del Padre (ej. P002)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"}),u.jsx("input",{type:"text",value:s,onChange:d=>a(d.target.value),placeholder:"Nombre del Padre (ej. Sansón)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),o&&u.jsx("p",{className:"text-sm text-brand-red",children:o}),u.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[u.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 rounded-lg hover:bg-zinc-500 font-semibold",children:"Cancelar"}),u.jsx("button",{onClick:f,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Padre"})]})]})})},tk=[{count:1,name:"Simple"},{count:2,name:"Doble"},{count:3,name:"Triple"},{count:4,name:"Cuádruple"},{count:5,name:"Quíntuple"}],ire=({value:t,onChange:e})=>u.jsxs("div",{className:"flex bg-zinc-800/80 rounded-xl p-1 w-full",children:[u.jsx("button",{type:"button",onClick:()=>e("Hembra"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Hembra"?"bg-zinc-600 text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Hembra"}),u.jsx("button",{type:"button",onClick:()=>e("Macho"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Macho"?"bg-zinc-600 text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Macho"})]}),Og=t=>u.jsx("input",{...t,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),sre=t=>u.jsx("select",{...t,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none"}),_A=({motherId:t,onSaveSuccess:e,onCancel:n})=>{const{fathers:r,addParturition:i,addFather:s}=At(),[a,o]=L.useState(t||""),[l,c]=L.useState(new Date().toISOString().split("T")[0]),[f,d]=L.useState(""),[h,g]=L.useState(1),[b,y]=L.useState([]),[x,w]=L.useState(null),[_,E]=L.useState(!1),[O,A]=L.useState(!1);L.useEffect(()=>{y($=>{const M=[...$];for(;M.length<h;)M.push({sex:"Hembra",correlative:"",birthWeight:""});return M.slice(0,h)})},[h]);const P=($,M,Y)=>{const q=[...b];q[$]={...q[$],[M]:Y},y(q)},S=async $=>{var Y;$.preventDefault(),w(null);const M=b.every(q=>q.correlative&&q.birthWeight);if(!a||!l||!f||!M){w({type:"error",text:"Por favor, completa todos los campos requeridos."});return}try{const q=r.find(le=>le.id===f),ie=b.map(le=>{const Q=le.sex==="Macho"?"X":q.name.charAt(0).toUpperCase();return{...le,id:`${Q}${le.correlative}`}});await i({motherId:a.toUpperCase(),parturitionDate:l,sireId:f,parturitionType:(Y=tk.find(le=>le.count===h))==null?void 0:Y.name,offspring:ie}),w({type:"success",text:"Parto y crías registrados con éxito."}),setTimeout(()=>{e()},1500)}catch(q){w({type:"error",text:"Error al registrar el parto."}),console.error(q)}},T=$=>{const M=r.find(q=>q.id===f);return!$.correlative||!M?"ID se genera aquí":`${$.sex==="Macho"?"X":M.name.charAt(0).toUpperCase()}${$.correlative}`},k=async $=>{await s($),d($.id),E(!1)},z=L.useMemo(()=>{var $;return($=r.find(M=>M.id===f))==null?void 0:$.name},[f,r]),N=$=>{d($),A(!1)};return u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:S,className:"space-y-6",children:[u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[u.jsxs("h2",{className:"text-lg font-semibold text-zinc-300 tracking-tight flex items-center gap-2",children:[u.jsx(hG,{size:20})," Datos del Parto"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx(Og,{type:"text",value:a,onChange:$=>o($.target.value),placeholder:"ID de la Madre",required:!0,disabled:!0}),u.jsx(Og,{type:"date",value:l,onChange:$=>c($.target.value),required:!0}),u.jsxs("div",{className:"relative md:col-span-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>A(!O),className:"w-full flex justify-between items-center text-left bg-zinc-800/80 text-white p-3 rounded-xl",children:[u.jsx("span",{className:z?"text-white":"text-zinc-400",children:z||"Seleccione el Padre"}),u.jsx(iv,{className:`transition-transform ${O?"rotate-180":""}`,size:20})]}),u.jsx("button",{type:"button",onClick:()=>E(!0),className:"h-full aspect-square flex-shrink-0 bg-brand-orange/80 text-white rounded-xl flex items-center justify-center hover:bg-brand-orange","aria-label":"Añadir nuevo padre",children:u.jsx(fa,{size:20})})]}),O&&u.jsx("div",{className:"absolute z-20 top-full mt-2 w-full bg-zinc-800 border border-zinc-700 rounded-xl max-h-48 overflow-y-auto",children:r.map($=>u.jsx("button",{type:"button",onClick:()=>N($.id),className:"w-full text-left p-3 hover:bg-zinc-700",children:$.name},$.id))})]}),u.jsx(sre,{value:h,onChange:$=>g(Number($.target.value)),required:!0,children:tk.map($=>u.jsxs("option",{value:$.count,children:["Parto ",$.name," (",$.count,")"]},$.count))})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h2",{className:"text-lg font-semibold text-zinc-300 tracking-tight flex items-center gap-2 ml-1",children:[u.jsx(nd,{size:20})," Registro de Crías"]}),b.map(($,M)=>u.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-zinc-800/50 space-y-4",children:[u.jsxs("p",{className:"font-semibold text-brand-orange",children:["Cría ",M+1]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[u.jsx(ire,{value:$.sex,onChange:Y=>P(M,"sex",Y)}),u.jsx(Og,{type:"text",value:$.correlative,onChange:Y=>P(M,"correlative",Y.target.value),placeholder:"Nº Correlativo",required:!0}),u.jsxs("div",{className:"bg-zinc-800/80 p-3 rounded-xl h-full flex items-center",children:[u.jsx("span",{className:"text-sm font-semibold text-zinc-400 mr-2",children:"ID:"}),u.jsx("span",{className:"font-mono text-indigo-300 font-bold",children:T($)})]}),u.jsx(Og,{type:"number",step:"0.1",value:$.birthWeight,onChange:Y=>P(M,"birthWeight",Y.target.value),placeholder:"Peso al Nacer (Kg)",required:!0})]})]},M))]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{type:"submit",className:"w-full bg-brand-green hover:bg-green-600 text-white font-bold py-3 rounded-xl text-lg",children:"Guardar Registro"}),n&&u.jsx("button",{type:"button",onClick:n,className:"w-full bg-zinc-600 text-white font-bold py-3 rounded-xl text-lg",children:"Cancelar"}),x&&u.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${x.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[x.type==="success"?u.jsx(ul,{size:18}):u.jsx(zr,{size:18}),u.jsx("span",{children:x.text})]})]})]}),u.jsx(rre,{isOpen:_,onClose:()=>E(!1),onSave:k})]})},are=({isOpen:t,onClose:e})=>{const{addOrigin:n}=At(),[r,i]=L.useState(""),[s,a]=L.useState(""),o=async()=>{if(r.trim()===""){a("El nombre del origen no puede estar vacío.");return}try{await n(r),i(""),a(""),e()}catch(c){a("No se pudo guardar el origen."),console.error(c)}},l=()=>{i(""),a(""),e()};return u.jsx(St,{isOpen:t,onClose:l,title:"Crear Nuevo Origen",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la ganadería o finca de origen."}),u.jsx("div",{children:u.jsx("input",{type:"text",value:r,onChange:c=>i(c.target.value),placeholder:"Ej: Agropecuaria La Bendición",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})}),s&&u.jsx("p",{className:"text-sm text-brand-red",children:s}),u.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[u.jsx("button",{onClick:l,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),u.jsx("button",{onClick:o,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Origen"})]})]})})},ore=t=>{const{events:e}=At();return L.useMemo(()=>t?e.filter(s=>s.animalId===t).sort((s,a)=>new Date(a.date).getTime()-new Date(s.date).getTime()):[],[e,t])},lre=t=>{const{animals:e}=At(),n=L.useMemo(()=>{const i=new Map;return e.forEach(s=>i.set(s.id,s)),i},[e]);return L.useMemo(()=>{const i=(a,o)=>{if(!a||o>3)return;const l=n.get(a);if(!l)return;const c=i(l.fatherId,o+1),f=i(l.motherId,o+1);return{animal:l,sire:c,dam:f}};return i(t,0)||null},[t,n])},Xr=({animal:t,onClick:e})=>{const n="bg-zinc-800/80 p-2 rounded-lg border border-zinc-700/80 w-32 text-center shadow-md transition-colors text-xs";if(!t)return u.jsx("div",{className:`${n} bg-zinc-900/50 border-dashed`,children:u.jsx("p",{className:"font-semibold text-zinc-500",children:"Desconocido"})});const r=t.sex==="Hembra"?"text-pink-400":"text-blue-400";return u.jsxs("button",{onClick:()=>e(t.id),className:`${n} hover:border-brand-orange`,children:[u.jsx("p",{className:`font-bold truncate ${r}`,children:t.id}),u.jsx("p",{className:"text-zinc-400",children:t.sex})]})},cre=({rootNode:t,onAncestorClick:e})=>{var i,s,a,o,l,c,f,d,h,g,b,y,x,w,_,E,O,A,P,S,T,k,z,N,$,M,Y,q,ie,le,Q,G,he,ce;if(!t)return u.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay datos de genealogía suficientes para mostrar el pedigrí."});const n="border-zinc-600",r=u.jsx("div",{className:`w-4 border-t-2 ${n}`});return u.jsxs("div",{className:"flex items-center justify-center p-4 overflow-x-auto",children:[u.jsx("div",{className:"flex flex-col items-center justify-center",children:u.jsxs("div",{className:"bg-zinc-800/80 p-2 rounded-lg border border-zinc-700/80 w-32 text-center shadow-md text-xs",children:[u.jsx("p",{className:`font-bold truncate ${t.animal.sex==="Hembra"?"text-pink-400":"text-blue-400"}`,children:t.animal.id}),u.jsx("p",{className:"text-zinc-400",children:t.animal.sex})]})}),u.jsxs("div",{className:"flex flex-col items-center",children:[r,u.jsx("div",{className:`h-20 border-r-2 ${n}`}),r]}),u.jsxs("div",{className:"flex flex-col items-center justify-around",children:[u.jsx(Xr,{animal:(i=t.sire)==null?void 0:i.animal,onClick:e}),u.jsx(Xr,{animal:(s=t.dam)==null?void 0:s.animal,onClick:e})]}),u.jsxs("div",{className:"flex flex-col items-center justify-around",children:[u.jsxs("div",{className:"flex items-center",children:[r,u.jsx("div",{className:`h-10 border-r-2 ${n}`}),r]}),u.jsxs("div",{className:"flex items-center",children:[r,u.jsx("div",{className:`h-10 border-r-2 ${n}`}),r]})]}),u.jsxs("div",{className:"flex flex-col items-center justify-around gap-[24px]",children:[u.jsx(Xr,{animal:(o=(a=t.sire)==null?void 0:a.sire)==null?void 0:o.animal,onClick:e}),u.jsx(Xr,{animal:(c=(l=t.sire)==null?void 0:l.dam)==null?void 0:c.animal,onClick:e}),u.jsx(Xr,{animal:(d=(f=t.dam)==null?void 0:f.sire)==null?void 0:d.animal,onClick:e}),u.jsx(Xr,{animal:(g=(h=t.dam)==null?void 0:h.dam)==null?void 0:g.animal,onClick:e})]}),u.jsxs("div",{className:"flex flex-col items-center justify-around gap-[24px]",children:[u.jsxs("div",{className:"flex items-center",children:[" ",r," ",u.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),u.jsxs("div",{className:"flex items-center",children:[" ",r," ",u.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),u.jsxs("div",{className:"flex items-center",children:[" ",r," ",u.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),u.jsxs("div",{className:"flex items-center",children:[" ",r," ",u.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]})]}),u.jsxs("div",{className:"flex flex-col items-center justify-around gap-[8px]",children:[u.jsx(Xr,{animal:(x=(y=(b=t.sire)==null?void 0:b.sire)==null?void 0:y.sire)==null?void 0:x.animal,onClick:e}),u.jsx(Xr,{animal:(E=(_=(w=t.sire)==null?void 0:w.sire)==null?void 0:_.dam)==null?void 0:E.animal,onClick:e}),u.jsx(Xr,{animal:(P=(A=(O=t.sire)==null?void 0:O.dam)==null?void 0:A.sire)==null?void 0:P.animal,onClick:e}),u.jsx(Xr,{animal:(k=(T=(S=t.sire)==null?void 0:S.dam)==null?void 0:T.dam)==null?void 0:k.animal,onClick:e}),u.jsx(Xr,{animal:($=(N=(z=t.dam)==null?void 0:z.sire)==null?void 0:N.sire)==null?void 0:$.animal,onClick:e}),u.jsx(Xr,{animal:(q=(Y=(M=t.dam)==null?void 0:M.sire)==null?void 0:Y.dam)==null?void 0:q.animal,onClick:e}),u.jsx(Xr,{animal:(Q=(le=(ie=t.dam)==null?void 0:ie.dam)==null?void 0:le.sire)==null?void 0:Q.animal,onClick:e}),u.jsx(Xr,{animal:(ce=(he=(G=t.dam)==null?void 0:G.dam)==null?void 0:he.dam)==null?void 0:ce.animal,onClick:e})]})]})},ure=({animalId:t,birthDate:e,onSave:n,onCancel:r})=>{const[i,s]=L.useState(new Date().toISOString().split("T")[0]),[a,o]=L.useState(""),[l,c]=L.useState(null),[f,d]=L.useState(!1),h=async g=>{g.preventDefault(),c(null),d(!0);const b=parseFloat(a);if(!i||!a||isNaN(b)||b<=0){c("Por favor, introduce una fecha y un peso válidos."),d(!1);return}if(new Date(i)<new Date(e)){c("La fecha de destete no puede ser anterior a la fecha de nacimiento."),d(!1);return}try{await n({weaningDate:i,weaningWeight:b})}catch(y){c("No se pudo guardar el registro de destete."),console.error(y)}finally{d(!1)}};return u.jsxs("form",{onSubmit:h,className:"space-y-4",children:[u.jsxs("p",{className:"text-sm text-zinc-400",children:["Registra la fecha y el peso al momento de separar a ",u.jsx("span",{className:"font-bold text-white",children:t})," de su madre."]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"weaningDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Destete"}),u.jsx("input",{id:"weaningDate",type:"date",value:i,onChange:g=>s(g.target.value),className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"weaningWeight",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso al Destete (Kg)"}),u.jsx("input",{id:"weaningWeight",type:"number",step:"0.1",value:a,onChange:g=>o(g.target.value),placeholder:"Ej: 15.5",className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),l&&u.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[u.jsx(zr,{size:18}),u.jsx("span",{children:l})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[u.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),u.jsx("button",{type:"submit",disabled:f,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:f?"Guardando...":"Guardar Destete"})]})]})},Aa=({label:t,value:e,isEditing:n,children:r})=>u.jsxs("div",{children:[u.jsx("dt",{className:"text-sm font-medium text-zinc-400",children:t}),n&&r?r:u.jsx("dd",{className:"mt-1 text-lg font-semibold text-white",children:e||"N/A"})]}),fre=({animalId:t,navigateTo:e})=>{const n=lre(t);return u.jsx(cre,{rootNode:n,onAncestorClick:r=>e({name:"rebano-profile",animalId:r})})},dre={Nacimiento:{icon:NE,color:"bg-green-500/20 text-brand-green"},Movimiento:{icon:I3,color:"bg-blue-500/20 text-brand-blue"},"Cambio de Estado":{icon:uG,color:"bg-yellow-500/20 text-amber-400"},"Pesaje Lechero":{icon:rG,color:"bg-gray-500/20 text-gray-300"},"Pesaje Corporal":{icon:wm,color:"bg-purple-500/20 text-purple-300"},Servicio:{icon:JH,color:"bg-pink-500/20 text-pink-300"},Tratamiento:{icon:$3,color:"bg-red-500/20 text-brand-red"},Diagnóstico:{icon:ul,color:"bg-teal-500/20 text-teal-300"}},hre=({animalId:t})=>{const e=ore(t);return e.length===0?u.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene eventos registrados."}):u.jsx("div",{className:"space-y-3",children:e.map(n=>{const r=dre[n.type]||{icon:A3,color:"bg-gray-500/20 text-gray-300"},i=r.icon;return u.jsxs("div",{className:"flex items-start gap-4 p-3 bg-black/20 rounded-lg",children:[u.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${r.color}`,children:u.jsx(i,{size:20})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-white",children:n.type}),u.jsx("p",{className:"text-sm text-zinc-300",children:n.details}),u.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:new Date(n.date+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})})]})]},n.id)})})},pre=({offspring:t,navigateTo:e})=>t.length===0?u.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene descendencia registrada."}):u.jsx("div",{className:"space-y-2",children:t.map(n=>u.jsxs("button",{onClick:()=>e({name:"rebano-profile",animalId:n.id}),className:"w-full text-left p-3 bg-black/20 hover:bg-zinc-800/60 rounded-lg transition-colors flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-white",children:n.id}),u.jsxs("p",{className:"text-sm text-zinc-400",children:[n.sex," | ",Is(n.birthDate)," | Lote: ",n.location||"Sin Asignar"]})]}),u.jsx(io,{className:"text-zinc-600"})]},n.id))}),mre=({animal:t,parturitions:e,isEditing:n,editedData:r,setEditedData:i,origins:s,onAddOriginClick:a,onLocationClick:o})=>{const l=(d,h)=>{i(g=>({...g,[d]:h}))},c=Is(t.birthDate),f=Tm(t,e);return u.jsxs("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-6",children:[u.jsx(Aa,{label:"ID",value:t.id}),u.jsx(Aa,{label:"Sexo",value:t.sex}),u.jsx(Aa,{label:"Fecha Nacimiento",value:t.birthDate,isEditing:n,children:u.jsx("input",{type:"date",value:r.birthDate||"",onChange:d=>l("birthDate",d.target.value),className:"w-full bg-zinc-700 p-2 rounded-md mt-1"})}),u.jsx(Aa,{label:"Edad",value:c}),u.jsx(Aa,{label:"Ubicación / Lote",children:!n&&u.jsx("dd",{className:"mt-1 text-lg",children:u.jsx("button",{onClick:o,className:"font-semibold text-brand-orange hover:underline text-left",children:t.location||"Sin Asignar"})})}),u.jsx(Aa,{label:"Estado Fisiológico",value:f}),u.jsx(Aa,{label:"Origen",value:t.origin,isEditing:n,children:u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsxs("select",{value:r.origin||"",onChange:d=>l("origin",d.target.value),className:"w-full bg-zinc-700 p-2 rounded-md",children:[u.jsx("option",{value:"Finca Masparrito",children:"Finca Masparrito"}),s.map(d=>u.jsx("option",{value:d.name,children:d.name},d.id))]}),u.jsx("button",{type:"button",onClick:a,className:"p-2 bg-brand-orange hover:bg-orange-600 text-white rounded-md",children:u.jsx(Nc,{size:20})})]})}),t.weaningDate&&u.jsx(Aa,{label:"Fecha de Destete",value:new Date(t.weaningDate+"T00:00:00").toLocaleDateString("es-VE")}),t.weaningWeight&&u.jsx(Aa,{label:"Peso al Destete",value:`${t.weaningWeight} Kg`})]})},gre=({isOpen:t,onClose:e,onConfirm:n,reason:r})=>{const[i,s]=L.useState(new Date().toISOString().split("T")[0]),[a,o]=L.useState(""),[l,c]=L.useState(""),[f,d]=L.useState("Cría"),[h,g]=L.useState(""),[b,y]=L.useState(),[x,w]=L.useState("");if(!t||!r)return null;const _=["Baja producción","Bajo índice de crecimiento","Inflamación articular","Linfadenitis caseosa","Sospecha de otras enfermedades"],E=()=>{n({date:i,price:parseFloat(a)||void 0,buyer:l||void 0,purpose:f,reason:h||void 0,cullReason:b||void 0,cullDetails:b==="Sospecha de otras enfermedades"?x:void 0})};return u.jsx(St,{isOpen:t,onClose:e,title:`Dar de baja por ${r}`,children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),u.jsx("input",{type:"date",value:i,onChange:O=>s(O.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),r==="Venta"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Precio de Venta (Opcional)"}),u.jsx("input",{type:"number",value:a,onChange:O=>o(O.target.value),placeholder:"0.00",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Comprador (Opcional)"}),u.jsx("input",{type:"text",value:l,onChange:O=>c(O.target.value),placeholder:"Nombre del comprador",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fin de la Venta"}),u.jsxs("select",{value:f,onChange:O=>d(O.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[u.jsx("option",{value:"Cría",children:"Cría"}),u.jsx("option",{value:"Carne",children:"Carne"})]})]})]}),r==="Muerte"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Causa / Descripción de la Muerte"}),u.jsx("textarea",{value:h,onChange:O=>g(O.target.value),placeholder:"Ej: Infección, ataque de depredador...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",rows:3})]}),r==="Descarte"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Causa del Descarte"}),u.jsxs("select",{value:b||"",onChange:O=>y(O.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[u.jsx("option",{value:"",children:"Seleccione una causa..."}),_.map(O=>u.jsx("option",{value:O,children:O},O))]})]}),b==="Sospecha de otras enfermedades"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Especificar Sospecha / Síntomas"}),u.jsx("input",{type:"text",value:x,onChange:O=>w(O.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]})]}),u.jsx("p",{className:"text-sm text-zinc-400",children:'El animal será movido a la lista de "Referencia". Esta acción no se puede deshacer.'}),u.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[u.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),u.jsx("button",{onClick:E,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg",children:"Confirmar Baja"})]})]})})},yre=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?u.jsx(St,{isOpen:t,onClose:e,title:r,children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("p",{className:"text-zinc-300",children:i}),u.jsxs("div",{className:"flex justify-end gap-4",children:[u.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),u.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})]})}):null;function vre({animalId:t,onBack:e,navigateTo:n}){const{animals:r,lots:i,origins:s,parturitions:a,updateAnimal:o,deleteAnimalPermanently:l}=At(),[c,f]=L.useState("main"),[d,h]=L.useState(!1),[g,b]=L.useState({}),[y,x]=L.useState("idle"),[w,_]=L.useState(!1),[E,O]=L.useState(!1),[A,P]=L.useState(!1),[S,T]=L.useState(!1),[k,z]=L.useState(""),[N,$]=L.useState(!1),[M,Y]=L.useState(null),[q,ie]=L.useState(!1),[le,Q]=L.useState(!1),[G,he]=L.useState(!1),ce=L.useMemo(()=>r.find(xe=>xe.id===t),[r,t]),we=L.useMemo(()=>ce?ce.sex==="Hembra"?r.filter(xe=>xe.motherId===ce.id).sort((xe,Fe)=>new Date(Fe.birthDate).getTime()-new Date(xe.birthDate).getTime()):ce.sex==="Macho"?r.filter(xe=>xe.fatherId===ce.id).sort((xe,Fe)=>new Date(Fe.birthDate).getTime()-new Date(xe.birthDate).getTime()):[]:[],[r,ce]),ke=L.useMemo(()=>ce?Tm(ce,a):"",[ce,a]),Ue=(ce==null?void 0:ce.breedingFailures)||0,ct=Ue>=2?"border-brand-red ring-2 ring-brand-red/80":"border-brand-border";L.useEffect(()=>{ce&&(d&&b({birthDate:ce.birthDate,origin:ce.origin}),z(ce.location||""))},[ce,d]);const ot=async()=>{if(ce){x("saving");try{await o(ce.id,g),x("success"),setTimeout(()=>{h(!1),x("idle")},1500)}catch(xe){console.error("Error al actualizar el animal:",xe),x("idle")}}},Ce=()=>{h(!1)},Ye=async()=>{if(ce)try{await o(ce.id,{location:k}),T(!1)}catch(xe){console.error("Error al actualizar la ubicación:",xe)}},oe=async xe=>{if(!ce||!M)return;const Fe={status:M,isReference:!0,endDate:xe.date};M==="Venta"&&(xe.price&&(Fe.salePrice=xe.price),xe.buyer&&(Fe.saleBuyer=xe.buyer),xe.purpose&&(Fe.salePurpose=xe.purpose)),M==="Muerte"&&xe.reason&&(Fe.deathReason=xe.reason),M==="Descarte"&&(xe.cullReason&&(Fe.cullReason=xe.cullReason),xe.cullDetails&&(Fe.cullReasonDetails=xe.cullDetails)),await o(ce.id,Fe),Y(null),e()},Be=async()=>{ce&&await o(ce.id,{isReference:!1,status:"Activo"})},We=async()=>{ce&&(await l(ce.id),e())},ue=async xe=>{ce&&(await o(ce.id,{weaningDate:xe.weaningDate,weaningWeight:xe.weaningWeight}),he(!1))},ht=[{label:"Por Venta",icon:HH,onClick:()=>Y("Venta")},{label:"Por Muerte",icon:QH,onClick:()=>Y("Muerte"),color:"text-brand-red"},{label:"Por Descarte",icon:$H,onClick:()=>Y("Descarte"),color:"text-brand-red"}],ye=[{label:"Reintegrar a Activos",icon:sG,onClick:Be},{label:"Eliminar Permanentemente",icon:td,onClick:()=>Q(!0),color:"text-brand-red"}];return ce?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[u.jsxs("header",{className:`bg-brand-glass backdrop-blur-xl rounded-b-2xl p-4 border-b border-x sticky top-0 z-10 transition-all ${ct}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-white flex items-center gap-2",children:[ce.id," ",Ue===1&&u.jsx("span",{title:"1 fallo reproductivo reportado",children:u.jsx(zr,{className:"text-yellow-400",size:20})})," ",Ue>=2&&u.jsx("span",{title:`${Ue} fallos reproductivos reportados`,children:u.jsx(zr,{className:"text-brand-red",size:20})})]}),u.jsx("div",{className:"w-8"})]}),u.jsx("p",{className:"text-center text-brand-orange font-semibold text-sm -mt-1 mb-3 uppercase tracking-wider",children:ce.isReference?"Referencia":ce.location||"Sin Asignar"}),u.jsxs("div",{className:"flex justify-around bg-black/20 rounded-xl p-1",children:[ce.sex==="Hembra"&&u.jsxs(u.Fragment,{children:[" ",u.jsxs("button",{onClick:()=>n({name:"lactation-profile",animalId:ce.id}),className:"flex flex-col items-center p-2 text-blue-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[u.jsx(IE,{size:22}),u.jsx("span",{className:"text-xs mt-1",children:"Leche"})]})," ",u.jsxs("button",{onClick:()=>P(!0),disabled:ce.isReference,className:"flex flex-col items-center p-2 text-pink-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[u.jsx(NE,{size:22}),u.jsx("span",{className:"text-xs mt-1",children:"Parto"})]})," "]}),(ke==="Cabrita"||ke==="Cabrito")&&!ce.weaningDate&&!ce.isReference&&u.jsxs("button",{onClick:()=>he(!0),className:"flex flex-col items-center p-2 text-yellow-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[u.jsx(MH,{size:22}),u.jsx("span",{className:"text-xs mt-1",children:"Destetar"})]}),u.jsxs("button",{onClick:()=>n({name:"growth-profile",animalId:ce.id}),className:"flex flex-col items-center p-2 text-brand-green hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[u.jsx(wm,{size:22}),u.jsx("span",{className:"text-xs mt-1",children:"Peso"})]}),u.jsxs("button",{onClick:()=>alert("Función en desarrollo"),disabled:ce.isReference,className:"flex flex-col items-center p-2 text-teal-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[u.jsx($3,{size:22}),u.jsx("span",{className:"text-xs mt-1",children:"Sanidad"})]}),u.jsxs("button",{onClick:()=>ce.isReference?ie(!0):T(!0),className:"flex flex-col items-center p-2 text-brand-blue hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[u.jsx(oG,{size:22}),u.jsx("span",{className:"text-xs mt-1",children:"Mover"})]}),!ce.isReference&&u.jsxs("button",{onClick:()=>$(!0),className:"flex flex-col items-center p-2 text-amber-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[u.jsx(eb,{size:22}),u.jsx("span",{className:"text-xs mt-1",children:"Dar de baja"})]}),u.jsxs("button",{onClick:()=>h(!d),disabled:ce.isReference,className:`flex flex-col items-center p-2 w-full rounded-lg transition-colors ${d?"text-green-400":"text-brand-orange"} hover:bg-zinc-700/50 disabled:opacity-40 disabled:cursor-not-allowed`,children:[u.jsx(nb,{size:22}),u.jsx("span",{className:"text-xs mt-1",children:"Editar"})]})]})]}),u.jsxs("main",{className:"p-4 space-y-4",children:[u.jsxs("div",{className:"flex bg-brand-glass rounded-xl p-1 border border-brand-border",children:[u.jsx("button",{onClick:()=>f("main"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${c==="main"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Ficha"}),u.jsx("button",{onClick:()=>f("genetics"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${c==="genetics"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Genealogía"}),u.jsx("button",{onClick:()=>f("progeny"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${c==="progeny"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Progenie"}),u.jsx("button",{onClick:()=>f("events"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${c==="events"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Eventos"})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c==="main"&&u.jsxs("div",{className:"space-y-6",children:[" ",u.jsx(mre,{animal:ce,parturitions:a,isEditing:d,editedData:g,setEditedData:b,origins:s,onAddOriginClick:()=>O(!0),onLocationClick:()=>T(!0)})," ",d&&u.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-zinc-700",children:[" ",u.jsxs("button",{onClick:Ce,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2",children:[u.jsx(Mc,{size:18})," Cancelar"]})," ",u.jsxs("button",{onClick:ot,disabled:y!=="idle",className:"bg-brand-green hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:opacity-50 min-w-[130px] justify-center",children:[" ",y==="saving"&&u.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"})," ",y==="success"&&u.jsx(ul,{size:18})," ",y==="idle"&&u.jsx(ME,{size:18})," ",u.jsx("span",{className:"ml-2",children:y==="success"?"Guardado":"Guardar"})," "]})," "]})," "]}),c==="genetics"&&u.jsx(fre,{animalId:ce.id,navigateTo:n}),c==="progeny"&&u.jsx(pre,{offspring:we,navigateTo:n}),c==="events"&&u.jsx(hre,{animalId:ce.id})]})]})]}),u.jsx(St,{isOpen:S,onClose:()=>T(!1),title:`Cambiar Lote para ${ce.id}`,children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar nuevo lote"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("select",{value:k,onChange:xe=>z(xe.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[u.jsx("option",{value:"",children:"Sin Asignar"}),i.map(xe=>u.jsx("option",{value:xe.name,children:xe.name},xe.id))]}),u.jsx("button",{type:"button",onClick:()=>{T(!1),_(!0)},className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:u.jsx(Nc,{size:24})})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[u.jsx("button",{onClick:()=>T(!1),className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),u.jsx("button",{onClick:Ye,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Cambio"})]})]})}),u.jsx(hv,{isOpen:N,onClose:()=>$(!1),title:"Causa de la Baja",actions:ht}),u.jsx(gre,{isOpen:!!M,onClose:()=>Y(null),onConfirm:oe,reason:M}),u.jsx(hv,{isOpen:q,onClose:()=>ie(!1),title:"Acciones de Referencia",actions:ye}),u.jsx(yre,{isOpen:le,onClose:()=>Q(!1),onConfirm:We,title:`¿Eliminar ${ce.id} Permanentemente?`,message:"Esta acción borrará el registro del animal de la base de datos para siempre y no se puede deshacer."}),u.jsx(z3,{isOpen:w,onClose:()=>_(!1)}),u.jsx(are,{isOpen:E,onClose:()=>O(!1)}),u.jsx(St,{isOpen:A,onClose:()=>P(!1),title:`Registrar Parto para ${ce.id}`,children:u.jsx(_A,{motherId:ce.id,onSaveSuccess:()=>P(!1),onCancel:()=>P(!1)})}),u.jsx(St,{isOpen:G,onClose:()=>he(!1),title:`Registrar Destete de ${ce.id}`,children:u.jsx(ure,{animalId:ce.id,birthDate:ce.birthDate,onSave:ue,onCancel:()=>he(!1)})})]}):u.jsxs("div",{className:"text-center p-10",children:[u.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."}),u.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const bre=({animal:t,parturition:e,onSelectAnimal:n})=>u.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),u.jsxs("p",{className:"text-sm text-zinc-400",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate).toLocaleDateString()}`,e.status==="seca"&&"Lactancia finalizada"]})]}),u.jsx(io,{className:"text-zinc-600"})]});function i6({onSelectAnimal:t,defaultView:e="drying"}){const{animals:n,parturitions:r,isLoading:i}=At(),[s,a]=L.useState(e);L.useEffect(()=>{a(e)},[e]);const o=L.useMemo(()=>{const c=h=>n.find(g=>g.id===h),f=r.filter(h=>h.status==="en-secado").map(h=>({animal:c(h.goatId),parturition:h})).filter(h=>h.animal),d=r.filter(h=>h.status==="seca").map(h=>({animal:c(h.goatId),parturition:h})).filter(h=>h.animal);return{drying:f,dry:d}},[n,r]),l=o[s]||[];return i?u.jsx("div",{className:"text-center p-10",children:u.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[u.jsxs("header",{className:"text-center pt-8 pb-4",children:[u.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Gestión de Rebaño"}),u.jsx("p",{className:"text-xl text-zinc-400",children:"Animales por Estado de Lactancia"})]}),u.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border flex justify-between items-center",children:u.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[u.jsxs("button",{onClick:()=>a("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${s==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",o.drying.length,")"]}),u.jsxs("button",{onClick:()=>a("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${s==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",o.dry.length,")"]})]})}),u.jsx("div",{className:"space-y-2",children:l.length>0?l.map(({animal:c,parturition:f})=>u.jsx(bre,{animal:c,parturition:f,onSelectAnimal:t},f.id)):u.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:u.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function xre({onBack:t}){const{lots:e,animals:n,parturitions:r,serviceRecords:i,breedingGroups:s,addLot:a,deleteLot:o,updateAnimal:l}=At(),[c,f]=L.useState(""),[d,h]=L.useState(!1),[g,b]=L.useState(null),y=async()=>{c.trim()!==""&&(await a(c),f(""))},x=_=>{b(_),h(!0)},w=async _=>{if(!g)return;const E=_.map(O=>l(O,{location:g}));await Promise.all(E),h(!1),b(null)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[u.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"text-center flex-grow",children:[u.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestionar Lotes"}),u.jsx("p",{className:"text-md text-zinc-400",children:"Crea ubicaciones y asigna animales"})]}),u.jsx("div",{className:"w-8"})]}),u.jsx("div",{className:"px-4",children:u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-white",children:"Añadir Nuevo Lote"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"text",value:c,onChange:_=>f(_.target.value),placeholder:"Nombre del lote...",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),u.jsx("button",{onClick:y,className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:u.jsx(fa,{size:24})})]})]})}),u.jsxs("div",{className:"space-y-2 pt-4 px-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-2",children:"Lotes Existentes"}),e.length>0?e.map(_=>u.jsxs("div",{className:"w-full text-left bg-brand-glass rounded-2xl p-4 flex justify-between items-center",children:[u.jsx("p",{className:"font-semibold text-white",children:_.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>x(_.name),className:"flex items-center gap-2 bg-zinc-700/80 text-white font-semibold py-2 px-3 rounded-lg hover:bg-zinc-600/80 transition-colors",children:[u.jsx(nd,{size:16})," Asignar"]}),u.jsx("button",{onClick:()=>o(_.id),className:"p-2 text-zinc-500 hover:text-brand-red transition-colors",children:u.jsx(td,{size:18})})]})]},_.id)):u.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:u.jsx("p",{className:"text-zinc-500",children:"Aún no has creado ningún lote."})})]})]}),u.jsx(wA,{isOpen:d,onClose:()=>h(!1),onSelect:w,animals:n,parturitions:r,serviceRecords:i,breedingGroups:s,title:`Asignar animales a: ${g}`})]})}const wre=" .rdp { --rdp-cell-size: 40px; --rdp-accent-color: #FBBF24; --rdp-background-color: #3a3a3c; --rdp-accent-color-dark: #FBBF24; --rdp-background-color-dark: #3a3a3c; --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-outline-selected: 3px solid var(--rdp-accent-color); --rdp-border-radius: 6px; color: #FFF; margin: 1em; } .rdp-caption_label, .rdp-nav_button { color: #FBBF24; } .rdp-head_cell { color: #8e8e93; } .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; } ",_re=({animal:t,services:e,onDeclareService:n,onDeclareParturition:r,onSelect:i})=>{const s=e.length,a=s>0?new Date(e[e.length-1].serviceDate+"T00:00:00").toLocaleDateString("es-VE"):null;return u.jsxs("div",{className:"w-full text-left bg-zinc-800/50 rounded-2xl p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[u.jsxs("button",{onClick:()=>i(t.id),className:"w-full sm:w-auto text-left",children:[u.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),u.jsxs("p",{className:"text-sm text-zinc-400",children:[t.sex," | ",Is(t.birthDate)," | Lote: ",t.location||"Sin Asignar"]}),u.jsx("div",{className:"flex items-center gap-2 text-sm text-zinc-400 mt-1",children:s>0?u.jsxs("div",{className:"flex items-center gap-1 text-pink-400 font-semibold",children:[u.jsx(P3,{size:14,fill:"currentColor"}),u.jsxs("span",{children:[s," ",s>1?"Servicios":"Servicio"," (",a,")"]})]}):u.jsx("span",{children:"Sin servicios reportados"})})]}),u.jsxs("div",{className:"w-full sm:w-auto flex flex-shrink-0 gap-2",children:[u.jsx("button",{onClick:()=>n(t.id),className:"flex-1 sm:flex-initial bg-indigo-600/80 hover:bg-indigo-500/100 text-white font-semibold py-2 px-3 rounded-lg transition-colors text-sm",children:"Servicio"}),u.jsxs("button",{onClick:()=>r(t.id),className:"flex-1 sm:flex-initial flex items-center justify-center gap-2 bg-green-600/80 hover:bg-green-500/100 text-white font-semibold py-2 px-3 rounded-lg transition-colors text-sm",children:[u.jsx(NE,{size:14})," Parto"]})]})]})};function Sre({groupId:t,navigateTo:e,onBack:n}){const{breedingGroups:r,animals:i,parturitions:s,serviceRecords:a,updateAnimal:o,addServiceRecord:l}=At(),[c,f]=L.useState(!1),[d,h]=L.useState(""),[g,b]=L.useState({isOpen:!1,femaleId:null}),[y,x]=L.useState({isOpen:!1,femaleId:null}),w=L.useMemo(()=>r.find(P=>P.id===t),[r,t]),_=L.useMemo(()=>w?i.filter(P=>P.breedingGroupId===w.id).sort((P,S)=>P.id.localeCompare(S.id)):[],[i,w]),E=L.useMemo(()=>d?_.filter(P=>P.id.toLowerCase().includes(d.toLowerCase())):_,[_,d]),O=async P=>{if(!w)return;const S=P.map(T=>o(T,{breedingGroupId:w.id,reproductiveStatus:"En Servicio"}));await Promise.all(S)},A=async P=>{!P||!g.femaleId||!w||(await l({breedingGroupId:w.id,femaleId:g.femaleId,serviceDate:P.toISOString().split("T")[0]}),b({isOpen:!1,femaleId:null}))};return w?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[u.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[u.jsx("button",{onClick:n,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"text-center flex-grow",children:[u.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:w.name}),u.jsxs("p",{className:"text-md text-zinc-400",children:["Reproductor: ",w.sireId]})]}),u.jsx("div",{className:"w-8"})]}),u.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[u.jsx(fa,{size:20})," Asignar Hembras"]}),u.jsxs("div",{className:"space-y-4 pt-4",children:[u.jsxs("div",{className:"flex justify-between items-center px-2",children:[u.jsxs("h3",{className:"text-lg font-semibold text-zinc-300",children:["Hembras Asignadas (",E.length,")"]}),u.jsxs("div",{className:"relative",children:[u.jsx(xc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),u.jsx("input",{type:"search",value:d,onChange:P=>h(P.target.value),placeholder:"Buscar...",className:"w-full bg-zinc-800/80 rounded-lg pl-10 pr-4 py-2 text-white border-transparent focus:border-brand-amber focus:ring-0"})]})]}),u.jsx("div",{className:"space-y-2",children:E.length>0?E.map(P=>{const S=a.filter(T=>T.femaleId===P.id&&T.breedingGroupId===w.id).sort((T,k)=>new Date(T.serviceDate).getTime()-new Date(k.serviceDate).getTime());return u.jsx(_re,{animal:P,services:S,onDeclareService:T=>b({isOpen:!0,femaleId:T}),onDeclareParturition:T=>x({isOpen:!0,femaleId:T}),onSelect:T=>e({name:"rebano-profile",animalId:T})},P.id)}):u.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:u.jsx("p",{className:"text-zinc-500",children:d?"No se encontraron coincidencias.":"Aún no has asignado hembras a este lote."})})})]})]}),u.jsx(wA,{isOpen:c,onClose:()=>f(!1),onSelect:O,animals:i,parturitions:s,serviceRecords:a,breedingGroups:r,title:`Asignar Hembras a: ${w.name}`,sireIdForInbreedingCheck:w.sireId}),u.jsxs(St,{isOpen:g.isOpen,onClose:()=>b({isOpen:!1,femaleId:null}),title:`Declarar Servicio para ${g.femaleId}`,children:[u.jsx("style",{children:wre}),u.jsx("div",{className:"flex justify-center",children:u.jsx(fb,{mode:"single",onSelect:A})})]}),u.jsx(St,{isOpen:y.isOpen,onClose:()=>x({isOpen:!1,femaleId:null}),title:`Registrar Parto para ${y.femaleId}`,children:u.jsx(_A,{motherId:y.femaleId||"",onSaveSuccess:()=>x({isOpen:!1,femaleId:null}),onCancel:()=>x({isOpen:!1,femaleId:null})})})]}):u.jsxs("div",{className:"text-center p-10",children:[u.jsx("h1",{className:"text-2xl text-zinc-400",children:"Lote de Monta no encontrado."}),u.jsx("button",{onClick:n,className:"mt-4 text-brand-amber",children:"Volver"})]})}function s6(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=s6(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Et(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=s6(t))&&(r&&(r+=" "),r+=e);return r}var Ere=Array.isArray,ci=Ere,Are=typeof vu=="object"&&vu&&vu.Object===Object&&vu,a6=Are,Tre=a6,Pre=typeof self=="object"&&self&&self.Object===Object&&self,Cre=Tre||Pre||Function("return this")(),ha=Cre,jre=ha,Ore=jre.Symbol,km=Ore,nk=km,o6=Object.prototype,kre=o6.hasOwnProperty,Ire=o6.toString,Kd=nk?nk.toStringTag:void 0;function Nre(t){var e=kre.call(t,Kd),n=t[Kd];try{t[Kd]=void 0;var r=!0}catch{}var i=Ire.call(t);return r&&(e?t[Kd]=n:delete t[Kd]),i}var Dre=Nre,Mre=Object.prototype,Rre=Mre.toString;function $re(t){return Rre.call(t)}var Lre=$re,rk=km,zre=Dre,Vre=Lre,Fre="[object Null]",Bre="[object Undefined]",ik=rk?rk.toStringTag:void 0;function Ure(t){return t==null?t===void 0?Bre:Fre:ik&&ik in Object(t)?zre(t):Vre(t)}var so=Ure;function Wre(t){return t!=null&&typeof t=="object"}var ao=Wre,Kre=so,qre=ao,Hre="[object Symbol]";function Gre(t){return typeof t=="symbol"||qre(t)&&Kre(t)==Hre}var ad=Gre,Yre=ci,Xre=ad,Qre=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zre=/^\w*$/;function Jre(t,e){if(Yre(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Xre(t)?!0:Zre.test(t)||!Qre.test(t)||e!=null&&t in Object(e)}var SA=Jre;function eie(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var hl=eie;const od=Wt(hl);var tie=so,nie=hl,rie="[object AsyncFunction]",iie="[object Function]",sie="[object GeneratorFunction]",aie="[object Proxy]";function oie(t){if(!nie(t))return!1;var e=tie(t);return e==iie||e==sie||e==rie||e==aie}var EA=oie;const dt=Wt(EA);var lie=ha,cie=lie["__core-js_shared__"],uie=cie,uw=uie,sk=function(){var t=/[^.]+$/.exec(uw&&uw.keys&&uw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function fie(t){return!!sk&&sk in t}var die=fie,hie=Function.prototype,pie=hie.toString;function mie(t){if(t!=null){try{return pie.call(t)}catch{}try{return t+""}catch{}}return""}var l6=mie,gie=EA,yie=die,vie=hl,bie=l6,xie=/[\\^$.*+?()[\]{}|]/g,wie=/^\[object .+?Constructor\]$/,_ie=Function.prototype,Sie=Object.prototype,Eie=_ie.toString,Aie=Sie.hasOwnProperty,Tie=RegExp("^"+Eie.call(Aie).replace(xie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pie(t){if(!vie(t)||yie(t))return!1;var e=gie(t)?Tie:wie;return e.test(bie(t))}var Cie=Pie;function jie(t,e){return t==null?void 0:t[e]}var Oie=jie,kie=Cie,Iie=Oie;function Nie(t,e){var n=Iie(t,e);return kie(n)?n:void 0}var Lc=Nie,Die=Lc,Mie=Die(Object,"create"),db=Mie,ak=db;function Rie(){this.__data__=ak?ak(null):{},this.size=0}var $ie=Rie;function Lie(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var zie=Lie,Vie=db,Fie="__lodash_hash_undefined__",Bie=Object.prototype,Uie=Bie.hasOwnProperty;function Wie(t){var e=this.__data__;if(Vie){var n=e[t];return n===Fie?void 0:n}return Uie.call(e,t)?e[t]:void 0}var Kie=Wie,qie=db,Hie=Object.prototype,Gie=Hie.hasOwnProperty;function Yie(t){var e=this.__data__;return qie?e[t]!==void 0:Gie.call(e,t)}var Xie=Yie,Qie=db,Zie="__lodash_hash_undefined__";function Jie(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Qie&&e===void 0?Zie:e,this}var ese=Jie,tse=$ie,nse=zie,rse=Kie,ise=Xie,sse=ese;function ld(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ld.prototype.clear=tse;ld.prototype.delete=nse;ld.prototype.get=rse;ld.prototype.has=ise;ld.prototype.set=sse;var ase=ld;function ose(){this.__data__=[],this.size=0}var lse=ose;function cse(t,e){return t===e||t!==t&&e!==e}var AA=cse,use=AA;function fse(t,e){for(var n=t.length;n--;)if(use(t[n][0],e))return n;return-1}var hb=fse,dse=hb,hse=Array.prototype,pse=hse.splice;function mse(t){var e=this.__data__,n=dse(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():pse.call(e,n,1),--this.size,!0}var gse=mse,yse=hb;function vse(t){var e=this.__data__,n=yse(e,t);return n<0?void 0:e[n][1]}var bse=vse,xse=hb;function wse(t){return xse(this.__data__,t)>-1}var _se=wse,Sse=hb;function Ese(t,e){var n=this.__data__,r=Sse(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var Ase=Ese,Tse=lse,Pse=gse,Cse=bse,jse=_se,Ose=Ase;function cd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}cd.prototype.clear=Tse;cd.prototype.delete=Pse;cd.prototype.get=Cse;cd.prototype.has=jse;cd.prototype.set=Ose;var pb=cd,kse=Lc,Ise=ha,Nse=kse(Ise,"Map"),TA=Nse,ok=ase,Dse=pb,Mse=TA;function Rse(){this.size=0,this.__data__={hash:new ok,map:new(Mse||Dse),string:new ok}}var $se=Rse;function Lse(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var zse=Lse,Vse=zse;function Fse(t,e){var n=t.__data__;return Vse(e)?n[typeof e=="string"?"string":"hash"]:n.map}var mb=Fse,Bse=mb;function Use(t){var e=Bse(this,t).delete(t);return this.size-=e?1:0,e}var Wse=Use,Kse=mb;function qse(t){return Kse(this,t).get(t)}var Hse=qse,Gse=mb;function Yse(t){return Gse(this,t).has(t)}var Xse=Yse,Qse=mb;function Zse(t,e){var n=Qse(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Jse=Zse,eae=$se,tae=Wse,nae=Hse,rae=Xse,iae=Jse;function ud(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ud.prototype.clear=eae;ud.prototype.delete=tae;ud.prototype.get=nae;ud.prototype.has=rae;ud.prototype.set=iae;var PA=ud,c6=PA,sae="Expected a function";function CA(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(sae);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(CA.Cache||c6),n}CA.Cache=c6;var u6=CA;const aae=Wt(u6);var oae=u6,lae=500;function cae(t){var e=oae(t,function(r){return n.size===lae&&n.clear(),r}),n=e.cache;return e}var uae=cae,fae=uae,dae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hae=/\\(\\)?/g,pae=fae(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(dae,function(n,r,i,s){e.push(i?s.replace(hae,"$1"):r||n)}),e}),mae=pae;function gae(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var jA=gae,lk=km,yae=jA,vae=ci,bae=ad,ck=lk?lk.prototype:void 0,uk=ck?ck.toString:void 0;function f6(t){if(typeof t=="string")return t;if(vae(t))return yae(t,f6)+"";if(bae(t))return uk?uk.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var xae=f6,wae=xae;function _ae(t){return t==null?"":wae(t)}var d6=_ae,Sae=ci,Eae=SA,Aae=mae,Tae=d6;function Pae(t,e){return Sae(t)?t:Eae(t,e)?[t]:Aae(Tae(t))}var h6=Pae,Cae=ad;function jae(t){if(typeof t=="string"||Cae(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var gb=jae,Oae=h6,kae=gb;function Iae(t,e){e=Oae(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[kae(e[n++])];return n&&n==r?t:void 0}var OA=Iae,Nae=OA;function Dae(t,e,n){var r=t==null?void 0:Nae(t,e);return r===void 0?n:r}var p6=Dae;const Qi=Wt(p6);function Mae(t){return t==null}var Rae=Mae;const gt=Wt(Rae);var $ae=so,Lae=ci,zae=ao,Vae="[object String]";function Fae(t){return typeof t=="string"||!Lae(t)&&zae(t)&&$ae(t)==Vae}var Bae=Fae;const wc=Wt(Bae);var m6={exports:{}},Ft={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA=Symbol.for("react.element"),IA=Symbol.for("react.portal"),yb=Symbol.for("react.fragment"),vb=Symbol.for("react.strict_mode"),bb=Symbol.for("react.profiler"),xb=Symbol.for("react.provider"),wb=Symbol.for("react.context"),Uae=Symbol.for("react.server_context"),_b=Symbol.for("react.forward_ref"),Sb=Symbol.for("react.suspense"),Eb=Symbol.for("react.suspense_list"),Ab=Symbol.for("react.memo"),Tb=Symbol.for("react.lazy"),Wae=Symbol.for("react.offscreen"),g6;g6=Symbol.for("react.module.reference");function ns(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case kA:switch(t=t.type,t){case yb:case bb:case vb:case Sb:case Eb:return t;default:switch(t=t&&t.$$typeof,t){case Uae:case wb:case _b:case Tb:case Ab:case xb:return t;default:return e}}case IA:return e}}}Ft.ContextConsumer=wb;Ft.ContextProvider=xb;Ft.Element=kA;Ft.ForwardRef=_b;Ft.Fragment=yb;Ft.Lazy=Tb;Ft.Memo=Ab;Ft.Portal=IA;Ft.Profiler=bb;Ft.StrictMode=vb;Ft.Suspense=Sb;Ft.SuspenseList=Eb;Ft.isAsyncMode=function(){return!1};Ft.isConcurrentMode=function(){return!1};Ft.isContextConsumer=function(t){return ns(t)===wb};Ft.isContextProvider=function(t){return ns(t)===xb};Ft.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===kA};Ft.isForwardRef=function(t){return ns(t)===_b};Ft.isFragment=function(t){return ns(t)===yb};Ft.isLazy=function(t){return ns(t)===Tb};Ft.isMemo=function(t){return ns(t)===Ab};Ft.isPortal=function(t){return ns(t)===IA};Ft.isProfiler=function(t){return ns(t)===bb};Ft.isStrictMode=function(t){return ns(t)===vb};Ft.isSuspense=function(t){return ns(t)===Sb};Ft.isSuspenseList=function(t){return ns(t)===Eb};Ft.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===yb||t===bb||t===vb||t===Sb||t===Eb||t===Wae||typeof t=="object"&&t!==null&&(t.$$typeof===Tb||t.$$typeof===Ab||t.$$typeof===xb||t.$$typeof===wb||t.$$typeof===_b||t.$$typeof===g6||t.getModuleId!==void 0)};Ft.typeOf=ns;m6.exports=Ft;var Kae=m6.exports,qae=so,Hae=ao,Gae="[object Number]";function Yae(t){return typeof t=="number"||Hae(t)&&qae(t)==Gae}var y6=Yae;const Xae=Wt(y6);var Qae=y6;function Zae(t){return Qae(t)&&t!=+t}var Jae=Zae;const fd=Wt(Jae);var Ps=function(e){return e===0?0:e>0?1:-1},Zl=function(e){return wc(e)&&e.indexOf("%")===e.length-1},Pe=function(e){return Xae(e)&&!fd(e)},eoe=function(e){return gt(e)},qn=function(e){return Pe(e)||wc(e)},toe=0,dd=function(e){var n=++toe;return"".concat(e||"").concat(n)},_c=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pe(e)&&!wc(e))return r;var s;if(Zl(e)){var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return fd(s)&&(s=r),i&&s>n&&(s=n),s},Co=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},noe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},cr=function(e,n){return Pe(e)&&Pe(n)?function(r){return e+r*(n-e)}:function(){return n}};function gv(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Qi(r,e))===n})}var roe=function(e,n){return Pe(e)&&Pe(n)?e-n:wc(e)&&wc(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Yu(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function E_(t){"@babel/helpers - typeof";return E_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E_(t)}var ioe=["viewBox","children"],soe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],fk=["points","pathLength"],fw={svg:ioe,polygon:fk,polyline:fk},NA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],yv=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(L.isValidElement(e)&&(r=e.props),!od(r))return null;var i={};return Object.keys(r).forEach(function(s){NA.includes(s)&&(i[s]=n||function(a){return r[s](r,a)})}),i},aoe=function(e,n,r){return function(i){return e(n,r,i),null}},vv=function(e,n,r){if(!od(e)||E_(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var a=e[s];NA.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=aoe(a,n,r))}),i},ooe=["children"],loe=["children"];function dk(t,e){if(t==null)return{};var n=coe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function coe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function A_(t){"@babel/helpers - typeof";return A_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A_(t)}var hk={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Va=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},pk=null,dw=null,DA=function t(e){if(e===pk&&Array.isArray(dw))return dw;var n=[];return L.Children.forEach(e,function(r){gt(r)||(Kae.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),dw=n,pk=e,n};function Zi(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Va(i)}):r=[Va(e)],DA(t).forEach(function(i){var s=Qi(i,"type.displayName")||Qi(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function vi(t,e){var n=Zi(t,e);return n&&n[0]}var mk=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Pe(r)||r<=0||!Pe(i)||i<=0)},uoe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],foe=function(e){return e&&e.type&&wc(e.type)&&uoe.indexOf(e.type)>=0},v6=function(e){return e&&A_(e)==="object"&&"clipDot"in e},doe=function(e,n,r,i){var s,a=(s=fw==null?void 0:fw[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!dt(e)&&(i&&a.includes(n)||soe.includes(n))||r&&NA.includes(n)},pt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(L.isValidElement(e)&&(i=e.props),!od(i))return null;var s={};return Object.keys(i).forEach(function(a){var o;doe((o=i)===null||o===void 0?void 0:o[a],a,n,r)&&(s[a]=i[a])}),s},T_=function t(e,n){if(e===n)return!0;var r=L.Children.count(e);if(r!==L.Children.count(n))return!1;if(r===0)return!0;if(r===1)return gk(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],a=n[i];if(Array.isArray(s)||Array.isArray(a)){if(!t(s,a))return!1}else if(!gk(s,a))return!1}return!0},gk=function(e,n){if(gt(e)&&gt(n))return!0;if(!gt(e)&&!gt(n)){var r=e.props||{},i=r.children,s=dk(r,ooe),a=n.props||{},o=a.children,l=dk(a,loe);return i&&o?Yu(s,l)&&T_(i,o):!i&&!o?Yu(s,l):!1}return!1},yk=function(e,n){var r=[],i={};return DA(e).forEach(function(s,a){if(foe(s))r.push(s);else if(s){var o=Va(s.type),l=n[o]||{},c=l.handler,f=l.once;if(c&&(!f||!i[o])){var d=c(s,o,a);r.push(d),i[o]=!0}}}),r},hoe=function(e){var n=e&&e.type;return n&&hk[n]?hk[n]:null},poe=function(e,n){return DA(n).indexOf(e)},moe=["children","width","height","viewBox","className","style","title","desc"];function P_(){return P_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P_.apply(this,arguments)}function goe(t,e){if(t==null)return{};var n=yoe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yoe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function C_(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,a=t.style,o=t.title,l=t.desc,c=goe(t,moe),f=i||{width:n,height:r,x:0,y:0},d=Et("recharts-surface",s);return B.createElement("svg",P_({},pt(c,!0,"svg"),{className:d,width:n,height:r,style:a,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),B.createElement("title",null,o),B.createElement("desc",null,l),e)}var voe=["children","className"];function j_(){return j_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j_.apply(this,arguments)}function boe(t,e){if(t==null)return{};var n=xoe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xoe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Zt=B.forwardRef(function(t,e){var n=t.children,r=t.className,i=boe(t,voe),s=Et("recharts-layer",r);return B.createElement("g",j_({className:s},pt(i,!0),{ref:e}),n)}),Fa=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function woe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var _oe=woe,Soe=_oe;function Eoe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:Soe(t,e,n)}var Aoe=Eoe,Toe="\\ud800-\\udfff",Poe="\\u0300-\\u036f",Coe="\\ufe20-\\ufe2f",joe="\\u20d0-\\u20ff",Ooe=Poe+Coe+joe,koe="\\ufe0e\\ufe0f",Ioe="\\u200d",Noe=RegExp("["+Ioe+Toe+Ooe+koe+"]");function Doe(t){return Noe.test(t)}var b6=Doe;function Moe(t){return t.split("")}var Roe=Moe,x6="\\ud800-\\udfff",$oe="\\u0300-\\u036f",Loe="\\ufe20-\\ufe2f",zoe="\\u20d0-\\u20ff",Voe=$oe+Loe+zoe,Foe="\\ufe0e\\ufe0f",Boe="["+x6+"]",O_="["+Voe+"]",k_="\\ud83c[\\udffb-\\udfff]",Uoe="(?:"+O_+"|"+k_+")",w6="[^"+x6+"]",_6="(?:\\ud83c[\\udde6-\\uddff]){2}",S6="[\\ud800-\\udbff][\\udc00-\\udfff]",Woe="\\u200d",E6=Uoe+"?",A6="["+Foe+"]?",Koe="(?:"+Woe+"(?:"+[w6,_6,S6].join("|")+")"+A6+E6+")*",qoe=A6+E6+Koe,Hoe="(?:"+[w6+O_+"?",O_,_6,S6,Boe].join("|")+")",Goe=RegExp(k_+"(?="+k_+")|"+Hoe+qoe,"g");function Yoe(t){return t.match(Goe)||[]}var Xoe=Yoe,Qoe=Roe,Zoe=b6,Joe=Xoe;function ele(t){return Zoe(t)?Joe(t):Qoe(t)}var tle=ele,nle=Aoe,rle=b6,ile=tle,sle=d6;function ale(t){return function(e){e=sle(e);var n=rle(e)?ile(e):void 0,r=n?n[0]:e.charAt(0),i=n?nle(n,1).join(""):e.slice(1);return r[t]()+i}}var ole=ale,lle=ole,cle=lle("toUpperCase"),ule=cle;const Pb=Wt(ule);function Yt(t){return function(){return t}}const T6=Math.cos,bv=Math.sin,Ns=Math.sqrt,xv=Math.PI,Cb=2*xv,I_=Math.PI,N_=2*I_,Bl=1e-6,fle=N_-Bl;function P6(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function dle(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return P6;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class hle{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?P6:dle(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-n,f=a-e,d=o-n,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Bl)if(!(Math.abs(d*l-c*f)>Bl)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-a,b=i-o,y=l*l+c*c,x=g*g+b*b,w=Math.sqrt(y),_=Math.sqrt(h),E=s*Math.tan((I_-Math.acos((y+h-x)/(2*w*_)))/2),O=E/_,A=E/w;Math.abs(O-1)>Bl&&this._append`L${e+O*f},${n+O*d}`,this._append`A${s},${s},0,0,${+(d*g>f*b)},${this._x1=e+A*l},${this._y1=n+A*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,f=n+l,d=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>Bl||Math.abs(this._y1-f)>Bl)&&this._append`L${c},${f}`,r&&(h<0&&(h=h%N_+N_),h>fle?this._append`A${r},${r},0,1,${d},${e-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=f}`:h>Bl&&this._append`A${r},${r},0,${+(h>=I_)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function MA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new hle(e)}function RA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function C6(t){this._context=t}C6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function jb(t){return new C6(t)}function j6(t){return t[0]}function O6(t){return t[1]}function k6(t,e){var n=Yt(!0),r=null,i=jb,s=null,a=MA(o);t=typeof t=="function"?t:t===void 0?j6:Yt(t),e=typeof e=="function"?e:e===void 0?O6:Yt(e);function o(l){var c,f=(l=RA(l)).length,d,h=!1,g;for(r==null&&(s=i(g=a())),c=0;c<=f;++c)!(c<f&&n(d=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(d,c,l),+e(d,c,l));if(g)return s=null,g+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Yt(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Yt(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Yt(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function kg(t,e,n){var r=null,i=Yt(!0),s=null,a=jb,o=null,l=MA(c);t=typeof t=="function"?t:t===void 0?j6:Yt(+t),e=typeof e=="function"?e:Yt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?O6:Yt(+n);function c(d){var h,g,b,y=(d=RA(d)).length,x,w=!1,_,E=new Array(y),O=new Array(y);for(s==null&&(o=a(_=l())),h=0;h<=y;++h){if(!(h<y&&i(x=d[h],h,d))===w)if(w=!w)g=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=h-1;b>=g;--b)o.point(E[b],O[b]);o.lineEnd(),o.areaEnd()}w&&(E[h]=+t(x,h,d),O[h]=+e(x,h,d),o.point(r?+r(x,h,d):E[h],n?+n(x,h,d):O[h]))}if(_)return o=null,_+""||null}function f(){return k6().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Yt(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Yt(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Yt(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Yt(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Yt(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Yt(+d),c):n},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(n)},c.lineX1=function(){return f().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Yt(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(o=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=o=null:o=a(s=d),c):s},c}class I6{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function ple(t){return new I6(t,!0)}function mle(t){return new I6(t,!1)}const $A={draw(t,e){const n=Ns(e/xv);t.moveTo(n,0),t.arc(0,0,n,0,Cb)}},gle={draw(t,e){const n=Ns(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},N6=Ns(1/3),yle=N6*2,vle={draw(t,e){const n=Ns(e/yle),r=n*N6;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},ble={draw(t,e){const n=Ns(e),r=-n/2;t.rect(r,r,n,n)}},xle=.8908130915292852,D6=bv(xv/10)/bv(7*xv/10),wle=bv(Cb/10)*D6,_le=-T6(Cb/10)*D6,Sle={draw(t,e){const n=Ns(e*xle),r=wle*n,i=_le*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=Cb*s/5,o=T6(a),l=bv(a);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},hw=Ns(3),Ele={draw(t,e){const n=-Ns(e/(hw*3));t.moveTo(0,n*2),t.lineTo(-hw*n,-n),t.lineTo(hw*n,-n),t.closePath()}},zi=-.5,Vi=Ns(3)/2,D_=1/Ns(12),Ale=(D_/2+1)*3,Tle={draw(t,e){const n=Ns(e/Ale),r=n/2,i=n*D_,s=r,a=n*D_+n,o=-s,l=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(o,l),t.lineTo(zi*r-Vi*i,Vi*r+zi*i),t.lineTo(zi*s-Vi*a,Vi*s+zi*a),t.lineTo(zi*o-Vi*l,Vi*o+zi*l),t.lineTo(zi*r+Vi*i,zi*i-Vi*r),t.lineTo(zi*s+Vi*a,zi*a-Vi*s),t.lineTo(zi*o+Vi*l,zi*l-Vi*o),t.closePath()}};function Ple(t,e){let n=null,r=MA(i);t=typeof t=="function"?t:Yt(t||$A),e=typeof e=="function"?e:Yt(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Yt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Yt(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function wv(){}function _v(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function M6(t){this._context=t}M6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_v(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_v(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Cle(t){return new M6(t)}function R6(t){this._context=t}R6.prototype={areaStart:wv,areaEnd:wv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:_v(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jle(t){return new R6(t)}function $6(t){this._context=t}$6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:_v(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ole(t){return new $6(t)}function L6(t){this._context=t}L6.prototype={areaStart:wv,areaEnd:wv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function kle(t){return new L6(t)}function vk(t){return t<0?-1:1}function bk(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(vk(s)+vk(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function xk(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function pw(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function Sv(t){this._context=t}Sv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pw(this,this._t0,xk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,pw(this,xk(this,n=bk(this,t,e)),n);break;default:pw(this,this._t0,n=bk(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function z6(t){this._context=new V6(t)}(z6.prototype=Object.create(Sv.prototype)).point=function(t,e){Sv.prototype.point.call(this,e,t)};function V6(t){this._context=t}V6.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function Ile(t){return new Sv(t)}function Nle(t){return new z6(t)}function F6(t){this._context=t}F6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=wk(t),i=wk(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function wk(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Dle(t){return new F6(t)}function Ob(t,e){this._context=t,this._t=e}Ob.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Mle(t){return new Ob(t,.5)}function Rle(t){return new Ob(t,0)}function $le(t){return new Ob(t,1)}function wf(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function M_(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Lle(t,e){return t[e]}function zle(t){const e=[];return e.key=t,e}function Vle(){var t=Yt([]),e=M_,n=wf,r=Lle;function i(s){var a=Array.from(t.apply(this,arguments),zle),o,l=a.length,c=-1,f;for(const d of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(d,a[o].key,c,s)]).data=d;for(o=0,f=RA(e(a));o<l;++o)a[f[o]].index=o;return n(a,f),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Yt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Yt(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?M_:typeof s=="function"?s:Yt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??wf,i):n},i}function Fle(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}wf(t,e)}}function Ble(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}wf(t,e)}}function Ule(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,l=0,c=0;o<a;++o){for(var f=t[e[o]],d=f[r][1]||0,h=f[r-1][1]||0,g=(d-h)/2,b=0;b<o;++b){var y=t[e[b]],x=y[r][1]||0,w=y[r-1][1]||0;g+=x-w}l+=d,c+=g*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,wf(t,e)}}function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}var Wle=["type","size","sizeType"];function R_(){return R_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R_.apply(this,arguments)}function _k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_k(Object(n),!0).forEach(function(r){Kle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kle(t,e,n){return e=qle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qle(t){var e=Hle(t,"string");return wp(e)=="symbol"?e:e+""}function Hle(t,e){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gle(t,e){if(t==null)return{};var n=Yle(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var B6={symbolCircle:$A,symbolCross:gle,symbolDiamond:vle,symbolSquare:ble,symbolStar:Sle,symbolTriangle:Ele,symbolWye:Tle},Xle=Math.PI/180,Qle=function(e){var n="symbol".concat(Pb(e));return B6[n]||$A},Zle=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Xle;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Jle=function(e,n){B6["symbol".concat(Pb(e))]=n},LA=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,a=e.sizeType,o=a===void 0?"area":a,l=Gle(e,Wle),c=Sk(Sk({},l),{},{type:r,size:s,sizeType:o}),f=function(){var x=Qle(r),w=Ple().type(x).size(Zle(s,o,r));return w()},d=c.className,h=c.cx,g=c.cy,b=pt(c,!0);return h===+h&&g===+g&&s===+s?B.createElement("path",R_({},b,{className:Et("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(g,")"),d:f()})):null};LA.registerSymbol=Jle;function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function $_(){return $_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$_.apply(this,arguments)}function Ek(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ece(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ek(Object(n),!0).forEach(function(r){_p(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ek(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W6(r.key),r)}}function rce(t,e,n){return e&&nce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ice(t,e,n){return e=Ev(e),sce(t,U6()?Reflect.construct(e,n||[],Ev(t).constructor):e.apply(t,n))}function sce(t,e){if(e&&(_f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ace(t)}function ace(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U6=function(){return!!t})()}function Ev(t){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ev(t)}function oce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L_(t,e)}function L_(t,e){return L_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},L_(t,e)}function _p(t,e,n){return e=W6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W6(t){var e=lce(t,"string");return _f(e)=="symbol"?e:e+""}function lce(t,e){if(_f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fi=32,zA=function(t){function e(){return tce(this,e),ice(this,e,arguments)}return oce(e,t),rce(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=Fi/2,a=Fi/6,o=Fi/3,l=r.inactive?i:r.color;if(r.type==="plainline")return B.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:Fi,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return B.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(Fi,"M").concat(2*o,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return B.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Fi/8,"h").concat(Fi,"v").concat(Fi*3/4,"h").concat(-Fi,"z"),className:"recharts-legend-icon"});if(B.isValidElement(r.legendIcon)){var c=ece({},r);return delete c.legendIcon,B.cloneElement(r.legendIcon,c)}return B.createElement(LA,{fill:l,cx:s,cy:s,size:Fi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,a=i.iconSize,o=i.layout,l=i.formatter,c=i.inactiveColor,f={x:0,y:0,width:Fi,height:Fi},d={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(g,b){var y=g.formatter||l,x=Et(_p(_p({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",g.inactive));if(g.type==="none")return null;var w=dt(g.value)?null:g.value;Fa(!dt(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=g.inactive?c:g.color;return B.createElement("li",$_({className:x,style:d,key:"legend-item-".concat(b)},vv(r.props,g,b)),B.createElement(C_,{width:a,height:a,viewBox:f,style:h},r.renderIcon(g)),B.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},y?y(w,g,b):w))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,a=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return B.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(L.PureComponent);_p(zA,"displayName","Legend");_p(zA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var cce=pb;function uce(){this.__data__=new cce,this.size=0}var fce=uce;function dce(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var hce=dce;function pce(t){return this.__data__.get(t)}var mce=pce;function gce(t){return this.__data__.has(t)}var yce=gce,vce=pb,bce=TA,xce=PA,wce=200;function _ce(t,e){var n=this.__data__;if(n instanceof vce){var r=n.__data__;if(!bce||r.length<wce-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new xce(r)}return n.set(t,e),this.size=n.size,this}var Sce=_ce,Ece=pb,Ace=fce,Tce=hce,Pce=mce,Cce=yce,jce=Sce;function hd(t){var e=this.__data__=new Ece(t);this.size=e.size}hd.prototype.clear=Ace;hd.prototype.delete=Tce;hd.prototype.get=Pce;hd.prototype.has=Cce;hd.prototype.set=jce;var K6=hd,Oce="__lodash_hash_undefined__";function kce(t){return this.__data__.set(t,Oce),this}var Ice=kce;function Nce(t){return this.__data__.has(t)}var Dce=Nce,Mce=PA,Rce=Ice,$ce=Dce;function Av(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Mce;++e<n;)this.add(t[e])}Av.prototype.add=Av.prototype.push=Rce;Av.prototype.has=$ce;var q6=Av;function Lce(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var H6=Lce;function zce(t,e){return t.has(e)}var G6=zce,Vce=q6,Fce=H6,Bce=G6,Uce=1,Wce=2;function Kce(t,e,n,r,i,s){var a=n&Uce,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(t),f=s.get(e);if(c&&f)return c==e&&f==t;var d=-1,h=!0,g=n&Wce?new Vce:void 0;for(s.set(t,e),s.set(e,t);++d<o;){var b=t[d],y=e[d];if(r)var x=a?r(y,b,d,e,t,s):r(b,y,d,t,e,s);if(x!==void 0){if(x)continue;h=!1;break}if(g){if(!Fce(e,function(w,_){if(!Bce(g,_)&&(b===w||i(b,w,n,r,s)))return g.push(_)})){h=!1;break}}else if(!(b===y||i(b,y,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var Y6=Kce,qce=ha,Hce=qce.Uint8Array,Gce=Hce;function Yce(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Xce=Yce;function Qce(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var VA=Qce,Ak=km,Tk=Gce,Zce=AA,Jce=Y6,eue=Xce,tue=VA,nue=1,rue=2,iue="[object Boolean]",sue="[object Date]",aue="[object Error]",oue="[object Map]",lue="[object Number]",cue="[object RegExp]",uue="[object Set]",fue="[object String]",due="[object Symbol]",hue="[object ArrayBuffer]",pue="[object DataView]",Pk=Ak?Ak.prototype:void 0,mw=Pk?Pk.valueOf:void 0;function mue(t,e,n,r,i,s,a){switch(n){case pue:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case hue:return!(t.byteLength!=e.byteLength||!s(new Tk(t),new Tk(e)));case iue:case sue:case lue:return Zce(+t,+e);case aue:return t.name==e.name&&t.message==e.message;case cue:case fue:return t==e+"";case oue:var o=eue;case uue:var l=r&nue;if(o||(o=tue),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=rue,a.set(t,e);var f=Jce(o(t),o(e),r,i,s,a);return a.delete(t),f;case due:if(mw)return mw.call(t)==mw.call(e)}return!1}var gue=mue;function yue(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var X6=yue,vue=X6,bue=ci;function xue(t,e,n){var r=e(t);return bue(t)?r:vue(r,n(t))}var wue=xue;function _ue(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}var Sue=_ue;function Eue(){return[]}var Aue=Eue,Tue=Sue,Pue=Aue,Cue=Object.prototype,jue=Cue.propertyIsEnumerable,Ck=Object.getOwnPropertySymbols,Oue=Ck?function(t){return t==null?[]:(t=Object(t),Tue(Ck(t),function(e){return jue.call(t,e)}))}:Pue,kue=Oue;function Iue(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Nue=Iue,Due=so,Mue=ao,Rue="[object Arguments]";function $ue(t){return Mue(t)&&Due(t)==Rue}var Lue=$ue,jk=Lue,zue=ao,Q6=Object.prototype,Vue=Q6.hasOwnProperty,Fue=Q6.propertyIsEnumerable,Bue=jk(function(){return arguments}())?jk:function(t){return zue(t)&&Vue.call(t,"callee")&&!Fue.call(t,"callee")},FA=Bue,Tv={exports:{}};function Uue(){return!1}var Wue=Uue;Tv.exports;(function(t,e){var n=ha,r=Wue,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||r;t.exports=c})(Tv,Tv.exports);var Z6=Tv.exports,Kue=9007199254740991,que=/^(?:0|[1-9]\d*)$/;function Hue(t,e){var n=typeof t;return e=e??Kue,!!e&&(n=="number"||n!="symbol"&&que.test(t))&&t>-1&&t%1==0&&t<e}var BA=Hue,Gue=9007199254740991;function Yue(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Gue}var UA=Yue,Xue=so,Que=UA,Zue=ao,Jue="[object Arguments]",efe="[object Array]",tfe="[object Boolean]",nfe="[object Date]",rfe="[object Error]",ife="[object Function]",sfe="[object Map]",afe="[object Number]",ofe="[object Object]",lfe="[object RegExp]",cfe="[object Set]",ufe="[object String]",ffe="[object WeakMap]",dfe="[object ArrayBuffer]",hfe="[object DataView]",pfe="[object Float32Array]",mfe="[object Float64Array]",gfe="[object Int8Array]",yfe="[object Int16Array]",vfe="[object Int32Array]",bfe="[object Uint8Array]",xfe="[object Uint8ClampedArray]",wfe="[object Uint16Array]",_fe="[object Uint32Array]",nn={};nn[pfe]=nn[mfe]=nn[gfe]=nn[yfe]=nn[vfe]=nn[bfe]=nn[xfe]=nn[wfe]=nn[_fe]=!0;nn[Jue]=nn[efe]=nn[dfe]=nn[tfe]=nn[hfe]=nn[nfe]=nn[rfe]=nn[ife]=nn[sfe]=nn[afe]=nn[ofe]=nn[lfe]=nn[cfe]=nn[ufe]=nn[ffe]=!1;function Sfe(t){return Zue(t)&&Que(t.length)&&!!nn[Xue(t)]}var Efe=Sfe;function Afe(t){return function(e){return t(e)}}var J6=Afe,Pv={exports:{}};Pv.exports;(function(t,e){var n=a6,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(Pv,Pv.exports);var Tfe=Pv.exports,Pfe=Efe,Cfe=J6,Ok=Tfe,kk=Ok&&Ok.isTypedArray,jfe=kk?Cfe(kk):Pfe,ez=jfe,Ofe=Nue,kfe=FA,Ife=ci,Nfe=Z6,Dfe=BA,Mfe=ez,Rfe=Object.prototype,$fe=Rfe.hasOwnProperty;function Lfe(t,e){var n=Ife(t),r=!n&&kfe(t),i=!n&&!r&&Nfe(t),s=!n&&!r&&!i&&Mfe(t),a=n||r||i||s,o=a?Ofe(t.length,String):[],l=o.length;for(var c in t)(e||$fe.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Dfe(c,l)))&&o.push(c);return o}var zfe=Lfe,Vfe=Object.prototype;function Ffe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Vfe;return t===n}var Bfe=Ffe;function Ufe(t,e){return function(n){return t(e(n))}}var tz=Ufe,Wfe=tz,Kfe=Wfe(Object.keys,Object),qfe=Kfe,Hfe=Bfe,Gfe=qfe,Yfe=Object.prototype,Xfe=Yfe.hasOwnProperty;function Qfe(t){if(!Hfe(t))return Gfe(t);var e=[];for(var n in Object(t))Xfe.call(t,n)&&n!="constructor"&&e.push(n);return e}var Zfe=Qfe,Jfe=EA,ede=UA;function tde(t){return t!=null&&ede(t.length)&&!Jfe(t)}var Im=tde,nde=zfe,rde=Zfe,ide=Im;function sde(t){return ide(t)?nde(t):rde(t)}var kb=sde,ade=wue,ode=kue,lde=kb;function cde(t){return ade(t,lde,ode)}var ude=cde,Ik=ude,fde=1,dde=Object.prototype,hde=dde.hasOwnProperty;function pde(t,e,n,r,i,s){var a=n&fde,o=Ik(t),l=o.length,c=Ik(e),f=c.length;if(l!=f&&!a)return!1;for(var d=l;d--;){var h=o[d];if(!(a?h in e:hde.call(e,h)))return!1}var g=s.get(t),b=s.get(e);if(g&&b)return g==e&&b==t;var y=!0;s.set(t,e),s.set(e,t);for(var x=a;++d<l;){h=o[d];var w=t[h],_=e[h];if(r)var E=a?r(_,w,h,e,t,s):r(w,_,h,t,e,s);if(!(E===void 0?w===_||i(w,_,n,r,s):E)){y=!1;break}x||(x=h=="constructor")}if(y&&!x){var O=t.constructor,A=e.constructor;O!=A&&"constructor"in t&&"constructor"in e&&!(typeof O=="function"&&O instanceof O&&typeof A=="function"&&A instanceof A)&&(y=!1)}return s.delete(t),s.delete(e),y}var mde=pde,gde=Lc,yde=ha,vde=gde(yde,"DataView"),bde=vde,xde=Lc,wde=ha,_de=xde(wde,"Promise"),Sde=_de,Ede=Lc,Ade=ha,Tde=Ede(Ade,"Set"),nz=Tde,Pde=Lc,Cde=ha,jde=Pde(Cde,"WeakMap"),Ode=jde,z_=bde,V_=TA,F_=Sde,B_=nz,U_=Ode,rz=so,pd=l6,Nk="[object Map]",kde="[object Object]",Dk="[object Promise]",Mk="[object Set]",Rk="[object WeakMap]",$k="[object DataView]",Ide=pd(z_),Nde=pd(V_),Dde=pd(F_),Mde=pd(B_),Rde=pd(U_),Ul=rz;(z_&&Ul(new z_(new ArrayBuffer(1)))!=$k||V_&&Ul(new V_)!=Nk||F_&&Ul(F_.resolve())!=Dk||B_&&Ul(new B_)!=Mk||U_&&Ul(new U_)!=Rk)&&(Ul=function(t){var e=rz(t),n=e==kde?t.constructor:void 0,r=n?pd(n):"";if(r)switch(r){case Ide:return $k;case Nde:return Nk;case Dde:return Dk;case Mde:return Mk;case Rde:return Rk}return e});var $de=Ul,gw=K6,Lde=Y6,zde=gue,Vde=mde,Lk=$de,zk=ci,Vk=Z6,Fde=ez,Bde=1,Fk="[object Arguments]",Bk="[object Array]",Ig="[object Object]",Ude=Object.prototype,Uk=Ude.hasOwnProperty;function Wde(t,e,n,r,i,s){var a=zk(t),o=zk(e),l=a?Bk:Lk(t),c=o?Bk:Lk(e);l=l==Fk?Ig:l,c=c==Fk?Ig:c;var f=l==Ig,d=c==Ig,h=l==c;if(h&&Vk(t)){if(!Vk(e))return!1;a=!0,f=!1}if(h&&!f)return s||(s=new gw),a||Fde(t)?Lde(t,e,n,r,i,s):zde(t,e,l,n,r,i,s);if(!(n&Bde)){var g=f&&Uk.call(t,"__wrapped__"),b=d&&Uk.call(e,"__wrapped__");if(g||b){var y=g?t.value():t,x=b?e.value():e;return s||(s=new gw),i(y,x,n,r,s)}}return h?(s||(s=new gw),Vde(t,e,n,r,i,s)):!1}var Kde=Wde,qde=Kde,Wk=ao;function iz(t,e,n,r,i){return t===e?!0:t==null||e==null||!Wk(t)&&!Wk(e)?t!==t&&e!==e:qde(t,e,n,r,iz,i)}var WA=iz,Hde=K6,Gde=WA,Yde=1,Xde=2;function Qde(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var l=o[0],c=t[l],f=o[1];if(a&&o[2]){if(c===void 0&&!(l in t))return!1}else{var d=new Hde;if(r)var h=r(c,f,l,t,e,d);if(!(h===void 0?Gde(f,c,Yde|Xde,r,d):h))return!1}}return!0}var Zde=Qde,Jde=hl;function ehe(t){return t===t&&!Jde(t)}var sz=ehe,the=sz,nhe=kb;function rhe(t){for(var e=nhe(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,the(i)]}return e}var ihe=rhe;function she(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var az=she,ahe=Zde,ohe=ihe,lhe=az;function che(t){var e=ohe(t);return e.length==1&&e[0][2]?lhe(e[0][0],e[0][1]):function(n){return n===t||ahe(n,t,e)}}var uhe=che;function fhe(t,e){return t!=null&&e in Object(t)}var dhe=fhe,hhe=h6,phe=FA,mhe=ci,ghe=BA,yhe=UA,vhe=gb;function bhe(t,e,n){e=hhe(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=vhe(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&yhe(i)&&ghe(a,i)&&(mhe(t)||phe(t)))}var xhe=bhe,whe=dhe,_he=xhe;function She(t,e){return t!=null&&_he(t,e,whe)}var Ehe=She,Ahe=WA,The=p6,Phe=Ehe,Che=SA,jhe=sz,Ohe=az,khe=gb,Ihe=1,Nhe=2;function Dhe(t,e){return Che(t)&&jhe(e)?Ohe(khe(t),e):function(n){var r=The(n,t);return r===void 0&&r===e?Phe(n,t):Ahe(e,r,Ihe|Nhe)}}var Mhe=Dhe;function Rhe(t){return t}var md=Rhe;function $he(t){return function(e){return e==null?void 0:e[t]}}var Lhe=$he,zhe=OA;function Vhe(t){return function(e){return zhe(e,t)}}var Fhe=Vhe,Bhe=Lhe,Uhe=Fhe,Whe=SA,Khe=gb;function qhe(t){return Whe(t)?Bhe(Khe(t)):Uhe(t)}var Hhe=qhe,Ghe=uhe,Yhe=Mhe,Xhe=md,Qhe=ci,Zhe=Hhe;function Jhe(t){return typeof t=="function"?t:t==null?Xhe:typeof t=="object"?Qhe(t)?Yhe(t[0],t[1]):Ghe(t):Zhe(t)}var pl=Jhe;function epe(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var oz=epe;function tpe(t){return t!==t}var npe=tpe;function rpe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var ipe=rpe,spe=oz,ape=npe,ope=ipe;function lpe(t,e,n){return e===e?ope(t,e,n):spe(t,ape,n)}var cpe=lpe,upe=cpe;function fpe(t,e){var n=t==null?0:t.length;return!!n&&upe(t,e,0)>-1}var dpe=fpe;function hpe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var ppe=hpe;function mpe(){}var gpe=mpe,yw=nz,ype=gpe,vpe=VA,bpe=1/0,xpe=yw&&1/vpe(new yw([,-0]))[1]==bpe?function(t){return new yw(t)}:ype,wpe=xpe,_pe=q6,Spe=dpe,Epe=ppe,Ape=G6,Tpe=wpe,Ppe=VA,Cpe=200;function jpe(t,e,n){var r=-1,i=Spe,s=t.length,a=!0,o=[],l=o;if(n)a=!1,i=Epe;else if(s>=Cpe){var c=e?null:Tpe(t);if(c)return Ppe(c);a=!1,i=Ape,l=new _pe}else l=e?[]:o;e:for(;++r<s;){var f=t[r],d=e?e(f):f;if(f=n||f!==0?f:0,a&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),o.push(f)}else i(l,d,n)||(l!==o&&l.push(d),o.push(f))}return o}var Ope=jpe,kpe=pl,Ipe=Ope;function Npe(t,e){return t&&t.length?Ipe(t,kpe(e)):[]}var Dpe=Npe;const Kk=Wt(Dpe);function lz(t,e,n){return e===!0?Kk(t,n):dt(e)?Kk(t,e):t}function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}var Mpe=["ref"];function qk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qk(Object(n),!0).forEach(function(r){Ib(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uz(r.key),r)}}function $pe(t,e,n){return e&&Hk(t.prototype,e),n&&Hk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lpe(t,e,n){return e=Cv(e),zpe(t,cz()?Reflect.construct(e,n||[],Cv(t).constructor):e.apply(t,n))}function zpe(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vpe(t)}function Vpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cz=function(){return!!t})()}function Cv(t){return Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cv(t)}function Fpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W_(t,e)}function W_(t,e){return W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},W_(t,e)}function Ib(t,e,n){return e=uz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uz(t){var e=Bpe(t,"string");return Sf(e)=="symbol"?e:e+""}function Bpe(t,e){if(Sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Upe(t,e){if(t==null)return{};var n=Wpe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Kpe(t){return t.value}function qpe(t,e){if(B.isValidElement(t))return B.cloneElement(t,e);if(typeof t=="function")return B.createElement(t,e);e.ref;var n=Upe(e,Mpe);return B.createElement(zA,n)}var Gk=1,Go=function(t){function e(){var n;Rpe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Lpe(this,e,[].concat(i)),Ib(n,"lastBoundingBox",{width:-1,height:-1}),n}return Fpe(e,t),$pe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Gk||Math.abs(i.height-this.lastBoundingBox.height)>Gk)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ta({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,a=i.align,o=i.verticalAlign,l=i.margin,c=i.chartWidth,f=i.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&s==="vertical"){var g=this.getBBoxSnapshot();d={left:((c||0)-g.width)/2}}else d=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var b=this.getBBoxSnapshot();h={top:((f||0)-b.height)/2}}else h=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Ta(Ta({},d),h)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,a=i.width,o=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,f=i.payload,d=Ta(Ta({position:"absolute",width:a||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return B.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(g){r.wrapperNode=g}},qpe(s,Ta(Ta({},this.props),{},{payload:lz(f,c,Kpe)})))}}],[{key:"getWithHeight",value:function(r,i){var s=Ta(Ta({},this.defaultProps),r.props),a=s.layout;return a==="vertical"&&Pe(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(L.PureComponent);Ib(Go,"displayName","Legend");Ib(Go,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Yk=km,Hpe=FA,Gpe=ci,Xk=Yk?Yk.isConcatSpreadable:void 0;function Ype(t){return Gpe(t)||Hpe(t)||!!(Xk&&t&&t[Xk])}var Xpe=Ype,Qpe=X6,Zpe=Xpe;function fz(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=Zpe),i||(i=[]);++s<a;){var o=t[s];e>0&&n(o)?e>1?fz(o,e-1,n,r,i):Qpe(i,o):r||(i[i.length]=o)}return i}var dz=fz;function Jpe(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var l=a[t?o:++i];if(n(s[l],l,s)===!1)break}return e}}var eme=Jpe,tme=eme,nme=tme(),rme=nme,ime=rme,sme=kb;function ame(t,e){return t&&ime(t,e,sme)}var hz=ame,ome=Im;function lme(t,e){return function(n,r){if(n==null)return n;if(!ome(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var cme=lme,ume=hz,fme=cme,dme=fme(ume),KA=dme,hme=KA,pme=Im;function mme(t,e){var n=-1,r=pme(t)?Array(t.length):[];return hme(t,function(i,s,a){r[++n]=e(i,s,a)}),r}var pz=mme;function gme(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var yme=gme,Qk=ad;function vme(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=Qk(t),a=e!==void 0,o=e===null,l=e===e,c=Qk(e);if(!o&&!c&&!s&&t>e||s&&a&&l&&!o&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!s&&!c&&t<e||c&&n&&i&&!r&&!s||o&&n&&i||!a&&i||!l)return-1}return 0}var bme=vme,xme=bme;function wme(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,a=i.length,o=n.length;++r<a;){var l=xme(i[r],s[r]);if(l){if(r>=o)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var _me=wme,vw=jA,Sme=OA,Eme=pl,Ame=pz,Tme=yme,Pme=J6,Cme=_me,jme=md,Ome=ci;function kme(t,e,n){e.length?e=vw(e,function(s){return Ome(s)?function(a){return Sme(a,s.length===1?s[0]:s)}:s}):e=[jme];var r=-1;e=vw(e,Pme(Eme));var i=Ame(t,function(s,a,o){var l=vw(e,function(c){return c(s)});return{criteria:l,index:++r,value:s}});return Tme(i,function(s,a){return Cme(s,a,n)})}var Ime=kme;function Nme(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Dme=Nme,Mme=Dme,Zk=Math.max;function Rme(t,e,n){return e=Zk(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=Zk(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),Mme(t,this,o)}}var $me=Rme;function Lme(t){return function(){return t}}var zme=Lme,Vme=Lc,Fme=function(){try{var t=Vme(Object,"defineProperty");return t({},"",{}),t}catch{}}(),mz=Fme,Bme=zme,Jk=mz,Ume=md,Wme=Jk?function(t,e){return Jk(t,"toString",{configurable:!0,enumerable:!1,value:Bme(e),writable:!0})}:Ume,Kme=Wme,qme=800,Hme=16,Gme=Date.now;function Yme(t){var e=0,n=0;return function(){var r=Gme(),i=Hme-(r-n);if(n=r,i>0){if(++e>=qme)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Xme=Yme,Qme=Kme,Zme=Xme,Jme=Zme(Qme),ege=Jme,tge=md,nge=$me,rge=ege;function ige(t,e){return rge(nge(t,e,tge),t+"")}var sge=ige,age=AA,oge=Im,lge=BA,cge=hl;function uge(t,e,n){if(!cge(n))return!1;var r=typeof e;return(r=="number"?oge(n)&&lge(e,n.length):r=="string"&&e in n)?age(n[e],t):!1}var Nb=uge,fge=dz,dge=Ime,hge=sge,eI=Nb,pge=hge(function(t,e){if(t==null)return[];var n=e.length;return n>1&&eI(t,e[0],e[1])?e=[]:n>2&&eI(e[0],e[1],e[2])&&(e=[e[0]]),dge(t,fge(e,1),[])}),mge=pge;const qA=Wt(mge);function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function K_(){return K_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K_.apply(this,arguments)}function gge(t,e){return xge(t)||bge(t,e)||vge(t,e)||yge()}function yge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vge(t,e){if(t){if(typeof t=="string")return tI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tI(t,e)}}function tI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function xge(t){if(Array.isArray(t))return t}function nI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nI(Object(n),!0).forEach(function(r){wge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wge(t,e,n){return e=_ge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ge(t){var e=Sge(t,"string");return Sp(e)=="symbol"?e:e+""}function Sge(t,e){if(Sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ege(t){return Array.isArray(t)&&qn(t[0])&&qn(t[1])?t.join(" ~ "):t}var Age=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,a=e.itemStyle,o=a===void 0?{}:a,l=e.labelStyle,c=l===void 0?{}:l,f=e.payload,d=e.formatter,h=e.itemSorter,g=e.wrapperClassName,b=e.labelClassName,y=e.label,x=e.labelFormatter,w=e.accessibilityLayer,_=w===void 0?!1:w,E=function(){if(f&&f.length){var $={padding:0,margin:0},M=(h?qA(f,h):f).map(function(Y,q){if(Y.type==="none")return null;var ie=bw({display:"block",paddingTop:4,paddingBottom:4,color:Y.color||"#000"},o),le=Y.formatter||d||Ege,Q=Y.value,G=Y.name,he=Q,ce=G;if(le&&he!=null&&ce!=null){var we=le(Q,G,Y,q,f);if(Array.isArray(we)){var ke=gge(we,2);he=ke[0],ce=ke[1]}else he=we}return B.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(q),style:ie},qn(ce)?B.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,qn(ce)?B.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,B.createElement("span",{className:"recharts-tooltip-item-value"},he),B.createElement("span",{className:"recharts-tooltip-item-unit"},Y.unit||""))});return B.createElement("ul",{className:"recharts-tooltip-item-list",style:$},M)}return null},O=bw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),A=bw({margin:0},c),P=!gt(y),S=P?y:"",T=Et("recharts-default-tooltip",g),k=Et("recharts-tooltip-label",b);P&&x&&f!==void 0&&f!==null&&(S=x(y,f));var z=_?{role:"status","aria-live":"assertive"}:{};return B.createElement("div",K_({className:T,style:O},z),B.createElement("p",{className:k,style:A},B.isValidElement(S)?S:"".concat(S)),E())};function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function Ng(t,e,n){return e=Tge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tge(t){var e=Pge(t,"string");return Ep(e)=="symbol"?e:e+""}function Pge(t,e){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qd="recharts-tooltip-wrapper",Cge={visibility:"hidden"};function jge(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Et(qd,Ng(Ng(Ng(Ng({},"".concat(qd,"-right"),Pe(n)&&e&&Pe(e.x)&&n>=e.x),"".concat(qd,"-left"),Pe(n)&&e&&Pe(e.x)&&n<e.x),"".concat(qd,"-bottom"),Pe(r)&&e&&Pe(e.y)&&r>=e.y),"".concat(qd,"-top"),Pe(r)&&e&&Pe(e.y)&&r<e.y))}function rI(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(s&&Pe(s[r]))return s[r];var f=n[r]-o-i,d=n[r]+i;if(e[r])return a[r]?f:d;if(a[r]){var h=f,g=l[r];return h<g?Math.max(d,l[r]):Math.max(f,l[r])}var b=d+o,y=l[r]+c;return b>y?Math.max(f,l[r]):Math.max(d,l[r])}function Oge(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function kge(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,c,f,d;return a.height>0&&a.width>0&&n?(f=rI({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),d=rI({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=Oge({translateX:f,translateY:d,useTranslate3d:o})):c=Cge,{cssProperties:c,cssClasses:jge({translateX:f,translateY:d,coordinate:n})}}function Ef(t){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(t)}function iI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iI(Object(n),!0).forEach(function(r){H_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ige(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yz(r.key),r)}}function Dge(t,e,n){return e&&Nge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mge(t,e,n){return e=jv(e),Rge(t,gz()?Reflect.construct(e,n||[],jv(t).constructor):e.apply(t,n))}function Rge(t,e){if(e&&(Ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ge(t)}function $ge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gz=function(){return!!t})()}function jv(t){return jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jv(t)}function Lge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q_(t,e)}function q_(t,e){return q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},q_(t,e)}function H_(t,e,n){return e=yz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yz(t){var e=zge(t,"string");return Ef(e)=="symbol"?e:e+""}function zge(t,e){if(Ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var aI=1,Vge=function(t){function e(){var n;Ige(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Mge(this,e,[].concat(i)),H_(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),H_(n,"handleKeyDown",function(a){if(a.key==="Escape"){var o,l,c,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&c!==void 0?c:0}})}}),n}return Lge(e,t),Dge(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>aI||Math.abs(r.height-this.state.lastBoundingBox.height)>aI)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.children,f=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,g=i.offset,b=i.position,y=i.reverseDirection,x=i.useTranslate3d,w=i.viewBox,_=i.wrapperStyle,E=kge({allowEscapeViewBox:a,coordinate:f,offsetTopLeft:g,position:b,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:w}),O=E.cssClasses,A=E.cssProperties,P=sI(sI({transition:h&&s?"transform ".concat(o,"ms ").concat(l):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},_);return B.createElement("div",{tabIndex:-1,className:O,style:P,ref:function(T){r.wrapperNode=T}},c)}}])}(L.PureComponent),Fge=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},zc={isSsr:Fge()};function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function oI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oI(Object(n),!0).forEach(function(r){HA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bz(r.key),r)}}function Wge(t,e,n){return e&&Uge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kge(t,e,n){return e=Ov(e),qge(t,vz()?Reflect.construct(e,n||[],Ov(t).constructor):e.apply(t,n))}function qge(t,e){if(e&&(Af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hge(t)}function Hge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vz=function(){return!!t})()}function Ov(t){return Ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ov(t)}function Gge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G_(t,e)}function G_(t,e){return G_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},G_(t,e)}function HA(t,e,n){return e=bz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bz(t){var e=Yge(t,"string");return Af(e)=="symbol"?e:e+""}function Yge(t,e){if(Af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Xge(t){return t.dataKey}function Qge(t,e){return B.isValidElement(t)?B.cloneElement(t,e):typeof t=="function"?B.createElement(t,e):B.createElement(Age,e)}var ln=function(t){function e(){return Bge(this,e),Kge(this,e,arguments)}return Gge(e,t),Wge(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.content,f=i.coordinate,d=i.filterNull,h=i.isAnimationActive,g=i.offset,b=i.payload,y=i.payloadUniqBy,x=i.position,w=i.reverseDirection,_=i.useTranslate3d,E=i.viewBox,O=i.wrapperStyle,A=b??[];d&&A.length&&(A=lz(b.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),y,Xge));var P=A.length>0;return B.createElement(Vge,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:h,active:s,coordinate:f,hasPayload:P,offset:g,position:x,reverseDirection:w,useTranslate3d:_,viewBox:E,wrapperStyle:O},Qge(c,lI(lI({},this.props),{},{payload:A})))}}])}(L.PureComponent);HA(ln,"displayName","Tooltip");HA(ln,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!zc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Zge=ha,Jge=function(){return Zge.Date.now()},eye=Jge,tye=/\s/;function nye(t){for(var e=t.length;e--&&tye.test(t.charAt(e)););return e}var rye=nye,iye=rye,sye=/^\s+/;function aye(t){return t&&t.slice(0,iye(t)+1).replace(sye,"")}var oye=aye,lye=oye,cI=hl,cye=ad,uI=NaN,uye=/^[-+]0x[0-9a-f]+$/i,fye=/^0b[01]+$/i,dye=/^0o[0-7]+$/i,hye=parseInt;function pye(t){if(typeof t=="number")return t;if(cye(t))return uI;if(cI(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=cI(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=lye(t);var n=fye.test(t);return n||dye.test(t)?hye(t.slice(2),n?2:8):uye.test(t)?uI:+t}var xz=pye,mye=hl,xw=eye,fI=xz,gye="Expected a function",yye=Math.max,vye=Math.min;function bye(t,e,n){var r,i,s,a,o,l,c=0,f=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(gye);e=fI(e)||0,mye(n)&&(f=!!n.leading,d="maxWait"in n,s=d?yye(fI(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function g(P){var S=r,T=i;return r=i=void 0,c=P,a=t.apply(T,S),a}function b(P){return c=P,o=setTimeout(w,e),f?g(P):a}function y(P){var S=P-l,T=P-c,k=e-S;return d?vye(k,s-T):k}function x(P){var S=P-l,T=P-c;return l===void 0||S>=e||S<0||d&&T>=s}function w(){var P=xw();if(x(P))return _(P);o=setTimeout(w,y(P))}function _(P){return o=void 0,h&&r?g(P):(r=i=void 0,a)}function E(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function O(){return o===void 0?a:_(xw())}function A(){var P=xw(),S=x(P);if(r=arguments,i=this,l=P,S){if(o===void 0)return b(l);if(d)return clearTimeout(o),o=setTimeout(w,e),g(l)}return o===void 0&&(o=setTimeout(w,e)),a}return A.cancel=E,A.flush=O,A}var xye=bye,wye=xye,_ye=hl,Sye="Expected a function";function Eye(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(Sye);return _ye(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),wye(t,e,{leading:r,maxWait:e,trailing:i})}var Aye=Eye;const wz=Wt(Aye);function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}function dI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dI(Object(n),!0).forEach(function(r){Tye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tye(t,e,n){return e=Pye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pye(t){var e=Cye(t,"string");return Ap(e)=="symbol"?e:e+""}function Cye(t,e){if(Ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jye(t,e){return Nye(t)||Iye(t,e)||kye(t,e)||Oye()}function Oye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kye(t,e){if(t){if(typeof t=="string")return hI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hI(t,e)}}function hI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Iye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Nye(t){if(Array.isArray(t))return t}var Mr=L.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,a=s===void 0?"100%":s,o=t.height,l=o===void 0?"100%":o,c=t.minWidth,f=c===void 0?0:c,d=t.minHeight,h=t.maxHeight,g=t.children,b=t.debounce,y=b===void 0?0:b,x=t.id,w=t.className,_=t.onResize,E=t.style,O=E===void 0?{}:E,A=L.useRef(null),P=L.useRef();P.current=_,L.useImperativeHandle(e,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var S=L.useState({containerWidth:i.width,containerHeight:i.height}),T=jye(S,2),k=T[0],z=T[1],N=L.useCallback(function(M,Y){z(function(q){var ie=Math.round(M),le=Math.round(Y);return q.containerWidth===ie&&q.containerHeight===le?q:{containerWidth:ie,containerHeight:le}})},[]);L.useEffect(function(){var M=function(G){var he,ce=G[0].contentRect,we=ce.width,ke=ce.height;N(we,ke),(he=P.current)===null||he===void 0||he.call(P,we,ke)};y>0&&(M=wz(M,y,{trailing:!0,leading:!1}));var Y=new ResizeObserver(M),q=A.current.getBoundingClientRect(),ie=q.width,le=q.height;return N(ie,le),Y.observe(A.current),function(){Y.disconnect()}},[N,y]);var $=L.useMemo(function(){var M=k.containerWidth,Y=k.containerHeight;if(M<0||Y<0)return null;Fa(Zl(a)||Zl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),Fa(!n||n>0,"The aspect(%s) must be greater than zero.",n);var q=Zl(a)?M:a,ie=Zl(l)?Y:l;n&&n>0&&(q?ie=q/n:ie&&(q=ie*n),h&&ie>h&&(ie=h)),Fa(q>0||ie>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,q,ie,a,l,f,d,n);var le=!Array.isArray(g)&&Va(g.type).endsWith("Chart");return B.Children.map(g,function(Q){return B.isValidElement(Q)?L.cloneElement(Q,Dg({width:q,height:ie},le?{style:Dg({height:"100%",width:"100%",maxHeight:ie,maxWidth:q},Q.props.style)}:{})):Q})},[n,g,l,h,d,f,k,a]);return B.createElement("div",{id:x?"".concat(x):void 0,className:Et("recharts-responsive-container",w),style:Dg(Dg({},O),{},{width:a,height:l,minWidth:f,minHeight:d,maxHeight:h}),ref:A},$)}),Vc=function(e){return null};Vc.displayName="Cell";function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function pI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Y_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pI(Object(n),!0).forEach(function(r){Dye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dye(t,e,n){return e=Mye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mye(t){var e=Rye(t,"string");return Tp(e)=="symbol"?e:e+""}function Rye(t,e){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cu={widthCache:{},cacheCount:0},$ye=2e3,Lye={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},mI="recharts_measurement_span";function zye(t){var e=Y_({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Rh=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||zc.isSsr)return{width:0,height:0};var r=zye(n),i=JSON.stringify({text:e,copyStyle:r});if(cu.widthCache[i])return cu.widthCache[i];try{var s=document.getElementById(mI);s||(s=document.createElement("span"),s.setAttribute("id",mI),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=Y_(Y_({},Lye),r);Object.assign(s.style,a),s.textContent="".concat(e);var o=s.getBoundingClientRect(),l={width:o.width,height:o.height};return cu.widthCache[i]=l,++cu.cacheCount>$ye&&(cu.cacheCount=0,cu.widthCache={}),l}catch{return{width:0,height:0}}},Vye=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function kv(t,e){return Wye(t)||Uye(t,e)||Bye(t,e)||Fye()}function Fye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bye(t,e){if(t){if(typeof t=="string")return gI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gI(t,e)}}function gI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Wye(t){if(Array.isArray(t))return t}function Kye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hye(r.key),r)}}function qye(t,e,n){return e&&yI(t.prototype,e),n&&yI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hye(t){var e=Gye(t,"string");return Pp(e)=="symbol"?e:e+""}function Gye(t,e){if(Pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Yye=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Xye=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_z={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Qye=Object.keys(_z),Ru="NaN";function Zye(t,e){return t*_z[e]}var Mg=function(){function t(e,n){Kye(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Yye.test(n)&&(this.num=NaN,this.unit=""),Qye.includes(n)&&(this.num=Zye(e,n),this.unit="px")}return qye(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Xye.exec(n))!==null&&r!==void 0?r:[],s=kv(i,3),a=s[1],o=s[2];return new t(parseFloat(a),o??"")}}])}();function Sz(t){if(t.includes(Ru))return Ru;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=vI.exec(e))!==null&&n!==void 0?n:[],i=kv(r,4),s=i[1],a=i[2],o=i[3],l=Mg.parse(s??""),c=Mg.parse(o??""),f=a==="*"?l.multiply(c):l.divide(c);if(f.isNaN())return Ru;e=e.replace(vI,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=bI.exec(e))!==null&&d!==void 0?d:[],g=kv(h,4),b=g[1],y=g[2],x=g[3],w=Mg.parse(b??""),_=Mg.parse(x??""),E=y==="+"?w.add(_):w.subtract(_);if(E.isNaN())return Ru;e=e.replace(bI,E.toString())}return e}var xI=/\(([^()]*)\)/;function Jye(t){for(var e=t;e.includes("(");){var n=xI.exec(e),r=kv(n,2),i=r[1];e=e.replace(xI,Sz(i))}return e}function eve(t){var e=t.replace(/\s+/g,"");return e=Jye(e),e=Sz(e),e}function tve(t){try{return eve(t)}catch{return Ru}}function ww(t){var e=tve(t.slice(5,-1));return e===Ru?"":e}var nve=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],rve=["dx","dy","angle","className","breakAll"];function X_(){return X_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X_.apply(this,arguments)}function wI(t,e){if(t==null)return{};var n=ive(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ive(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function _I(t,e){return lve(t)||ove(t,e)||ave(t,e)||sve()}function sve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ave(t,e){if(t){if(typeof t=="string")return SI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SI(t,e)}}function SI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ove(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function lve(t){if(Array.isArray(t))return t}var Ez=/[ \f\n\r\t\v\u2028\u2029]+/,Az=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];gt(n)||(r?s=n.toString().split(""):s=n.toString().split(Ez));var a=s.map(function(l){return{word:l,width:Rh(l,i).width}}),o=r?0:Rh(" ",i).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},cve=function(e,n,r,i,s){var a=e.maxLines,o=e.children,l=e.style,c=e.breakAll,f=Pe(a),d=o,h=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return q.reduce(function(ie,le){var Q=le.word,G=le.width,he=ie[ie.length-1];if(he&&(i==null||s||he.width+G+r<Number(i)))he.words.push(Q),he.width+=G+r;else{var ce={words:[Q],width:G};ie.push(ce)}return ie},[])},g=h(n),b=function(q){return q.reduce(function(ie,le){return ie.width>le.width?ie:le})};if(!f)return g;for(var y="…",x=function(q){var ie=d.slice(0,q),le=Az({breakAll:c,style:l,children:ie+y}).wordsWithComputedWidth,Q=h(le),G=Q.length>a||b(Q).width>Number(i);return[G,Q]},w=0,_=d.length-1,E=0,O;w<=_&&E<=d.length-1;){var A=Math.floor((w+_)/2),P=A-1,S=x(P),T=_I(S,2),k=T[0],z=T[1],N=x(A),$=_I(N,1),M=$[0];if(!k&&!M&&(w=A+1),k&&M&&(_=A-1),!k&&M){O=z;break}E++}return O||g},EI=function(e){var n=gt(e)?[]:e.toString().split(Ez);return[{words:n}]},uve=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,a=e.breakAll,o=e.maxLines;if((n||r)&&!zc.isSsr){var l,c,f=Az({breakAll:a,children:i,style:s});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;l=d,c=h}else return EI(i);return cve({breakAll:a,children:i,maxLines:o,style:s},l,c,n,r)}return EI(i)},AI="#808080",Iv=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.lineHeight,o=a===void 0?"1em":a,l=e.capHeight,c=l===void 0?"0.71em":l,f=e.scaleToFit,d=f===void 0?!1:f,h=e.textAnchor,g=h===void 0?"start":h,b=e.verticalAnchor,y=b===void 0?"end":b,x=e.fill,w=x===void 0?AI:x,_=wI(e,nve),E=L.useMemo(function(){return uve({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:d,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,d,_.style,_.width]),O=_.dx,A=_.dy,P=_.angle,S=_.className,T=_.breakAll,k=wI(_,rve);if(!qn(r)||!qn(s))return null;var z=r+(Pe(O)?O:0),N=s+(Pe(A)?A:0),$;switch(y){case"start":$=ww("calc(".concat(c,")"));break;case"middle":$=ww("calc(".concat((E.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:$=ww("calc(".concat(E.length-1," * -").concat(o,")"));break}var M=[];if(d){var Y=E[0].width,q=_.width;M.push("scale(".concat((Pe(q)?q/Y:1)/Y,")"))}return P&&M.push("rotate(".concat(P,", ").concat(z,", ").concat(N,")")),M.length&&(k.transform=M.join(" ")),B.createElement("text",X_({},pt(k,!0),{x:z,y:N,className:Et("recharts-text",S),textAnchor:g,fill:w.includes("url")?AI:w}),E.map(function(ie,le){var Q=ie.words.join(T?"":" ");return B.createElement("tspan",{x:z,dy:le===0?$:o,key:"".concat(Q,"-").concat(le)},Q)}))};function Yo(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function fve(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function GA(t){let e,n,r;t.length!==2?(e=Yo,n=(o,l)=>Yo(t(o),l),r=(o,l)=>t(o)-l):(e=t===Yo||t===fve?t:dve,n=t,r=t);function i(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const d=c+f>>>1;n(o[d],l)<0?c=d+1:f=d}while(c<f)}return c}function s(o,l,c=0,f=o.length){if(c<f){if(e(l,l)!==0)return f;do{const d=c+f>>>1;n(o[d],l)<=0?c=d+1:f=d}while(c<f)}return c}function a(o,l,c=0,f=o.length){const d=i(o,l,c,f-1);return d>c&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:i,center:a,right:s}}function dve(){return 0}function Tz(t){return t===null?NaN:+t}function*hve(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const pve=GA(Yo),Nm=pve.right;GA(Tz).center;class TI extends Map{constructor(e,n=yve){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(PI(this,e))}has(e){return super.has(PI(this,e))}set(e,n){return super.set(mve(this,e),n)}delete(e){return super.delete(gve(this,e))}}function PI({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function mve({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function gve({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function yve(t){return t!==null&&typeof t=="object"?t.valueOf():t}function vve(t=Yo){if(t===Yo)return Pz;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Pz(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const bve=Math.sqrt(50),xve=Math.sqrt(10),wve=Math.sqrt(2);function Nv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=bve?10:s>=xve?5:s>=wve?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?Nv(t,e,n*2):[o,l,c]}function Q_(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?Nv(e,t,n):Nv(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function Z_(t,e,n){return e=+e,t=+t,n=+n,Nv(t,e,n)[2]}function J_(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Z_(e,t,n):Z_(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function CI(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function jI(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Cz(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Pz:vve(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,f=Math.log(l),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(l-d)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*d/l+h)),b=Math.min(r,Math.floor(e+(l-c)*d/l+h));Cz(t,e,g,b,i)}const s=t[e];let a=n,o=r;for(Hd(t,n,e),i(t[r],s)>0&&Hd(t,n,r);a<o;){for(Hd(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?Hd(t,n,o):(++o,Hd(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Hd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function _ve(t,e,n){if(t=Float64Array.from(hve(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return jI(t);if(e>=1)return CI(t);var r,i=(r-1)*e,s=Math.floor(i),a=CI(Cz(t,s).subarray(0,s+1)),o=jI(t.subarray(s+1));return a+(o-a)*(i-s)}}function Sve(t,e,n=Tz){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function Eve(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function rs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function oo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const eS=Symbol("implicit");function YA(){var t=new TI,e=[],n=[],r=eS;function i(s){let a=t.get(s);if(a===void 0){if(r!==eS)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new TI;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return YA(e,n).unknown(r)},rs.apply(i,arguments),i}function Cp(){var t=YA().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,c=0,f=.5;delete t.unknown;function d(){var h=e().length,g=i<r,b=g?i:r,y=g?r:i;s=(y-b)/Math.max(1,h-l+c*2),o&&(s=Math.floor(s)),b+=(y-b-s*(h-l))*f,a=s*(1-l),o&&(b=Math.round(b),a=Math.round(a));var x=Eve(h).map(function(w){return b+s*w});return n(g?x.reverse():x)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,d()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(h){return arguments.length?(o=!!h,d()):o},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},t.copy=function(){return Cp(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(f)},rs.apply(d(),arguments)}function jz(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return jz(e())},t}function $h(){return jz(Cp.apply(null,arguments).paddingInner(1))}function XA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Oz(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Dm(){}var jp=.7,Dv=1/jp,Xu="\\s*([+-]?\\d+)\\s*",Op="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",aa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ave=/^#([0-9a-f]{3,8})$/,Tve=new RegExp(`^rgb\\(${Xu},${Xu},${Xu}\\)$`),Pve=new RegExp(`^rgb\\(${aa},${aa},${aa}\\)$`),Cve=new RegExp(`^rgba\\(${Xu},${Xu},${Xu},${Op}\\)$`),jve=new RegExp(`^rgba\\(${aa},${aa},${aa},${Op}\\)$`),Ove=new RegExp(`^hsl\\(${Op},${aa},${aa}\\)$`),kve=new RegExp(`^hsla\\(${Op},${aa},${aa},${Op}\\)$`),OI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};XA(Dm,kp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:kI,formatHex:kI,formatHex8:Ive,formatHsl:Nve,formatRgb:II,toString:II});function kI(){return this.rgb().formatHex()}function Ive(){return this.rgb().formatHex8()}function Nve(){return kz(this).formatHsl()}function II(){return this.rgb().formatRgb()}function kp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ave.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?NI(e):n===3?new ri(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Rg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Rg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Tve.exec(t))?new ri(e[1],e[2],e[3],1):(e=Pve.exec(t))?new ri(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Cve.exec(t))?Rg(e[1],e[2],e[3],e[4]):(e=jve.exec(t))?Rg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ove.exec(t))?RI(e[1],e[2]/100,e[3]/100,1):(e=kve.exec(t))?RI(e[1],e[2]/100,e[3]/100,e[4]):OI.hasOwnProperty(t)?NI(OI[t]):t==="transparent"?new ri(NaN,NaN,NaN,0):null}function NI(t){return new ri(t>>16&255,t>>8&255,t&255,1)}function Rg(t,e,n,r){return r<=0&&(t=e=n=NaN),new ri(t,e,n,r)}function Dve(t){return t instanceof Dm||(t=kp(t)),t?(t=t.rgb(),new ri(t.r,t.g,t.b,t.opacity)):new ri}function tS(t,e,n,r){return arguments.length===1?Dve(t):new ri(t,e,n,r??1)}function ri(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}XA(ri,tS,Oz(Dm,{brighter(t){return t=t==null?Dv:Math.pow(Dv,t),new ri(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?jp:Math.pow(jp,t),new ri(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ri(cc(this.r),cc(this.g),cc(this.b),Mv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DI,formatHex:DI,formatHex8:Mve,formatRgb:MI,toString:MI}));function DI(){return`#${Jl(this.r)}${Jl(this.g)}${Jl(this.b)}`}function Mve(){return`#${Jl(this.r)}${Jl(this.g)}${Jl(this.b)}${Jl((isNaN(this.opacity)?1:this.opacity)*255)}`}function MI(){const t=Mv(this.opacity);return`${t===1?"rgb(":"rgba("}${cc(this.r)}, ${cc(this.g)}, ${cc(this.b)}${t===1?")":`, ${t})`}`}function Mv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function cc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jl(t){return t=cc(t),(t<16?"0":"")+t.toString(16)}function RI(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Es(t,e,n,r)}function kz(t){if(t instanceof Es)return new Es(t.h,t.s,t.l,t.opacity);if(t instanceof Dm||(t=kp(t)),!t)return new Es;if(t instanceof Es)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Es(a,o,l,t.opacity)}function Rve(t,e,n,r){return arguments.length===1?kz(t):new Es(t,e,n,r??1)}function Es(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}XA(Es,Rve,Oz(Dm,{brighter(t){return t=t==null?Dv:Math.pow(Dv,t),new Es(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?jp:Math.pow(jp,t),new Es(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ri(_w(t>=240?t-240:t+120,i,r),_w(t,i,r),_w(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Es($I(this.h),$g(this.s),$g(this.l),Mv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Mv(this.opacity);return`${t===1?"hsl(":"hsla("}${$I(this.h)}, ${$g(this.s)*100}%, ${$g(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $I(t){return t=(t||0)%360,t<0?t+360:t}function $g(t){return Math.max(0,Math.min(1,t||0))}function _w(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const QA=t=>()=>t;function $ve(t,e){return function(n){return t+n*e}}function Lve(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function zve(t){return(t=+t)==1?Iz:function(e,n){return n-e?Lve(e,n,t):QA(isNaN(e)?n:e)}}function Iz(t,e){var n=e-t;return n?$ve(t,n):QA(isNaN(t)?e:t)}const LI=function t(e){var n=zve(e);function r(i,s){var a=n((i=tS(i)).r,(s=tS(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=Iz(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=o(f),i.b=l(f),i.opacity=c(f),i+""}}return r.gamma=t,r}(1);function Vve(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Fve(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Bve(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=gd(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Uve(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Rv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Wve(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=gd(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var nS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sw=new RegExp(nS.source,"g");function Kve(t){return function(){return t}}function qve(t){return function(e){return t(e)+""}}function Hve(t,e){var n=nS.lastIndex=Sw.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=nS.exec(t))&&(i=Sw.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:Rv(r,i)})),n=Sw.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?qve(l[0].x):Kve(e):(e=l.length,function(c){for(var f=0,d;f<e;++f)o[(d=l[f]).i]=d.x(c);return o.join("")})}function gd(t,e){var n=typeof e,r;return e==null||n==="boolean"?QA(e):(n==="number"?Rv:n==="string"?(r=kp(e))?(e=r,LI):Hve:e instanceof kp?LI:e instanceof Date?Uve:Fve(e)?Vve:Array.isArray(e)?Bve:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Wve:Rv)(t,e)}function ZA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Gve(t,e){e===void 0&&(e=t,t=gd);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function Yve(t){return function(){return t}}function $v(t){return+t}var zI=[0,1];function Rr(t){return t}function rS(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Yve(isNaN(e)?NaN:.5)}function Xve(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Qve(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=rS(i,r),s=n(a,s)):(r=rS(r,i),s=n(s,a)),function(o){return s(r(o))}}function Zve(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=rS(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=Nm(t,o,1,r)-1;return s[l](i[l](o))}}function Mm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Db(){var t=zI,e=zI,n=gd,r,i,s,a=Rr,o,l,c;function f(){var h=Math.min(t.length,e.length);return a!==Rr&&(a=Xve(t[0],t[h-1])),o=h>2?Zve:Qve,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?s:(l||(l=o(t.map(r),e,n)))(r(a(h)))}return d.invert=function(h){return a(i((c||(c=o(e,t.map(r),Rv)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,$v),f()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),f()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=ZA,f()},d.clamp=function(h){return arguments.length?(a=h?!0:Rr,f()):a!==Rr},d.interpolate=function(h){return arguments.length?(n=h,f()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,g){return r=h,i=g,f()}}function JA(){return Db()(Rr,Rr)}function Jve(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Lv(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Tf(t){return t=Lv(Math.abs(t)),t?t[1]:NaN}function e0e(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function t0e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var n0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ip(t){if(!(e=n0e.exec(t)))throw new Error("invalid format: "+t);var e;return new eT({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ip.prototype=eT.prototype;function eT(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}eT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function r0e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Nz;function i0e(t,e){var n=Lv(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Nz=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Lv(t,Math.max(0,e+s-1))[0]}function VI(t,e){var n=Lv(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const FI={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Jve,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>VI(t*100,e),r:VI,s:i0e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function BI(t){return t}var UI=Array.prototype.map,WI=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function s0e(t){var e=t.grouping===void 0||t.thousands===void 0?BI:e0e(UI.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?BI:t0e(UI.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Ip(d);var h=d.fill,g=d.align,b=d.sign,y=d.symbol,x=d.zero,w=d.width,_=d.comma,E=d.precision,O=d.trim,A=d.type;A==="n"?(_=!0,A="g"):FI[A]||(E===void 0&&(E=12),O=!0,A="g"),(x||h==="0"&&g==="=")&&(x=!0,h="0",g="=");var P=y==="$"?n:y==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",S=y==="$"?r:/[%p]/.test(A)?a:"",T=FI[A],k=/[defgprs%]/.test(A);E=E===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function z(N){var $=P,M=S,Y,q,ie;if(A==="c")M=T(N)+M,N="";else{N=+N;var le=N<0||1/N<0;if(N=isNaN(N)?l:T(Math.abs(N),E),O&&(N=r0e(N)),le&&+N==0&&b!=="+"&&(le=!1),$=(le?b==="("?b:o:b==="-"||b==="("?"":b)+$,M=(A==="s"?WI[8+Nz/3]:"")+M+(le&&b==="("?")":""),k){for(Y=-1,q=N.length;++Y<q;)if(ie=N.charCodeAt(Y),48>ie||ie>57){M=(ie===46?i+N.slice(Y+1):N.slice(Y))+M,N=N.slice(0,Y);break}}}_&&!x&&(N=e(N,1/0));var Q=$.length+N.length+M.length,G=Q<w?new Array(w-Q+1).join(h):"";switch(_&&x&&(N=e(G+N,G.length?w-M.length:1/0),G=""),g){case"<":N=$+N+M+G;break;case"=":N=$+G+N+M;break;case"^":N=G.slice(0,Q=G.length>>1)+$+N+M+G.slice(Q);break;default:N=G+$+N+M;break}return s(N)}return z.toString=function(){return d+""},z}function f(d,h){var g=c((d=Ip(d),d.type="f",d)),b=Math.max(-8,Math.min(8,Math.floor(Tf(h)/3)))*3,y=Math.pow(10,-b),x=WI[8+b/3];return function(w){return g(y*w)+x}}return{format:c,formatPrefix:f}}var Lg,tT,Dz;a0e({thousands:",",grouping:[3],currency:["$",""]});function a0e(t){return Lg=s0e(t),tT=Lg.format,Dz=Lg.formatPrefix,Lg}function o0e(t){return Math.max(0,-Tf(Math.abs(t)))}function l0e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tf(e)/3)))*3-Tf(Math.abs(t)))}function c0e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Tf(e)-Tf(t))+1}function Mz(t,e,n,r){var i=J_(t,e,n),s;switch(r=Ip(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=l0e(i,a))&&(r.precision=s),Dz(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=c0e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=o0e(i))&&(r.precision=s-(r.type==="%")*2);break}}return tT(r)}function ml(t){var e=t.domain;return t.ticks=function(n){var r=e();return Q_(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Mz(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,f=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);f-- >0;){if(c=Z_(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function zv(){var t=JA();return t.copy=function(){return Mm(t,zv())},rs.apply(t,arguments),ml(t)}function Rz(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,$v),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Rz(t).unknown(e)},t=arguments.length?Array.from(t,$v):[0,1],ml(n)}function $z(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function KI(t){return Math.log(t)}function qI(t){return Math.exp(t)}function u0e(t){return-Math.log(-t)}function f0e(t){return-Math.exp(-t)}function d0e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function h0e(t){return t===10?d0e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function p0e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function HI(t){return(e,n)=>-t(-e,n)}function nT(t){const e=t(KI,qI),n=e.domain;let r=10,i,s;function a(){return i=p0e(r),s=h0e(r),n()[0]<0?(i=HI(i),s=HI(s),t(u0e,f0e)):t(KI,qI),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],f=l[l.length-1];const d=f<c;d&&([c,f]=[f,c]);let h=i(c),g=i(f),b,y;const x=o==null?10:+o;let w=[];if(!(r%1)&&g-h<x){if(h=Math.floor(h),g=Math.ceil(g),c>0){for(;h<=g;++h)for(b=1;b<r;++b)if(y=h<0?b/s(-h):b*s(h),!(y<c)){if(y>f)break;w.push(y)}}else for(;h<=g;++h)for(b=r-1;b>=1;--b)if(y=h>0?b/s(-h):b*s(h),!(y<c)){if(y>f)break;w.push(y)}w.length*2<x&&(w=Q_(c,f,x))}else w=Q_(h,g,Math.min(g-h,x)).map(s);return d?w.reverse():w},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Ip(l)).precision==null&&(l.trim=!0),l=tT(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*r<r-.5&&(d*=r),d<=c?l(f):""}},e.nice=()=>n($z(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function Lz(){const t=nT(Db()).domain([1,10]);return t.copy=()=>Mm(t,Lz()).base(t.base()),rs.apply(t,arguments),t}function GI(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function YI(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function rT(t){var e=1,n=t(GI(e),YI(e));return n.constant=function(r){return arguments.length?t(GI(e=+r),YI(e)):e},ml(n)}function zz(){var t=rT(Db());return t.copy=function(){return Mm(t,zz()).constant(t.constant())},rs.apply(t,arguments)}function XI(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function m0e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function g0e(t){return t<0?-t*t:t*t}function iT(t){var e=t(Rr,Rr),n=1;function r(){return n===1?t(Rr,Rr):n===.5?t(m0e,g0e):t(XI(n),XI(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},ml(e)}function sT(){var t=iT(Db());return t.copy=function(){return Mm(t,sT()).exponent(t.exponent())},rs.apply(t,arguments),t}function y0e(){return sT.apply(null,arguments).exponent(.5)}function QI(t){return Math.sign(t)*t*t}function v0e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Vz(){var t=JA(),e=[0,1],n=!1,r;function i(s){var a=v0e(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(QI(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,$v)).map(QI)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Vz(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},rs.apply(i,arguments),ml(i)}function Fz(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=Sve(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[Nm(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Yo),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Fz().domain(t).range(e).unknown(r)},rs.apply(s,arguments)}function Bz(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[Nm(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return Bz().domain([t,e]).range(i).unknown(s)},rs.apply(ml(a),arguments)}function Uz(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[Nm(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Uz().domain(t).range(e).unknown(n)},rs.apply(i,arguments)}const Ew=new Date,Aw=new Date;function Yn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=s=>Yn(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(Ew.setTime(+s),Aw.setTime(+a),t(Ew),t(Aw),Math.floor(n(Ew,Aw))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Vv=Yn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Vv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Yn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Vv);Vv.range;const Da=1e3,Hi=Da*60,Ma=Hi*60,Ja=Ma*24,aT=Ja*7,ZI=Ja*30,Tw=Ja*365,ec=Yn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Da)},(t,e)=>(e-t)/Da,t=>t.getUTCSeconds());ec.range;const oT=Yn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Da)},(t,e)=>{t.setTime(+t+e*Hi)},(t,e)=>(e-t)/Hi,t=>t.getMinutes());oT.range;const lT=Yn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Hi)},(t,e)=>(e-t)/Hi,t=>t.getUTCMinutes());lT.range;const cT=Yn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Da-t.getMinutes()*Hi)},(t,e)=>{t.setTime(+t+e*Ma)},(t,e)=>(e-t)/Ma,t=>t.getHours());cT.range;const uT=Yn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ma)},(t,e)=>(e-t)/Ma,t=>t.getUTCHours());uT.range;const Rm=Yn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Hi)/Ja,t=>t.getDate()-1);Rm.range;const Mb=Yn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ja,t=>t.getUTCDate()-1);Mb.range;const Wz=Yn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ja,t=>Math.floor(t/Ja));Wz.range;function Fc(t){return Yn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Hi)/aT)}const Rb=Fc(0),Fv=Fc(1),b0e=Fc(2),x0e=Fc(3),Pf=Fc(4),w0e=Fc(5),_0e=Fc(6);Rb.range;Fv.range;b0e.range;x0e.range;Pf.range;w0e.range;_0e.range;function Bc(t){return Yn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/aT)}const $b=Bc(0),Bv=Bc(1),S0e=Bc(2),E0e=Bc(3),Cf=Bc(4),A0e=Bc(5),T0e=Bc(6);$b.range;Bv.range;S0e.range;E0e.range;Cf.range;A0e.range;T0e.range;const fT=Yn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());fT.range;const dT=Yn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());dT.range;const eo=Yn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());eo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Yn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});eo.range;const to=Yn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());to.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Yn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});to.range;function Kz(t,e,n,r,i,s){const a=[[ec,1,Da],[ec,5,5*Da],[ec,15,15*Da],[ec,30,30*Da],[s,1,Hi],[s,5,5*Hi],[s,15,15*Hi],[s,30,30*Hi],[i,1,Ma],[i,3,3*Ma],[i,6,6*Ma],[i,12,12*Ma],[r,1,Ja],[r,2,2*Ja],[n,1,aT],[e,1,ZI],[e,3,3*ZI],[t,1,Tw]];function o(c,f,d){const h=f<c;h&&([c,f]=[f,c]);const g=d&&typeof d.range=="function"?d:l(c,f,d),b=g?g.range(c,+f+1):[];return h?b.reverse():b}function l(c,f,d){const h=Math.abs(f-c)/d,g=GA(([,,x])=>x).right(a,h);if(g===a.length)return t.every(J_(c/Tw,f/Tw,d));if(g===0)return Vv.every(Math.max(J_(c,f,d),1));const[b,y]=a[h/a[g-1][2]<a[g][2]/h?g-1:g];return b.every(y)}return[o,l]}const[P0e,C0e]=Kz(to,dT,$b,Wz,uT,lT),[j0e,O0e]=Kz(eo,fT,Rb,Rm,cT,oT);function Pw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Cw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Gd(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function k0e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=Yd(i),f=Xd(i),d=Yd(s),h=Xd(s),g=Yd(a),b=Xd(a),y=Yd(o),x=Xd(o),w=Yd(l),_=Xd(l),E={a:le,A:Q,b:G,B:he,c:null,d:iN,e:iN,f:ebe,g:ube,G:dbe,H:Q0e,I:Z0e,j:J0e,L:qz,m:tbe,M:nbe,p:ce,q:we,Q:oN,s:lN,S:rbe,u:ibe,U:sbe,V:abe,w:obe,W:lbe,x:null,X:null,y:cbe,Y:fbe,Z:hbe,"%":aN},O={a:ke,A:Ue,b:ct,B:ot,c:null,d:sN,e:sN,f:ybe,g:Pbe,G:jbe,H:pbe,I:mbe,j:gbe,L:Gz,m:vbe,M:bbe,p:Ce,q:Ye,Q:oN,s:lN,S:xbe,u:wbe,U:_be,V:Sbe,w:Ebe,W:Abe,x:null,X:null,y:Tbe,Y:Cbe,Z:Obe,"%":aN},A={a:z,A:N,b:$,B:M,c:Y,d:nN,e:nN,f:H0e,g:tN,G:eN,H:rN,I:rN,j:U0e,L:q0e,m:B0e,M:W0e,p:k,q:F0e,Q:Y0e,s:X0e,S:K0e,u:R0e,U:$0e,V:L0e,w:M0e,W:z0e,x:q,X:ie,y:tN,Y:eN,Z:V0e,"%":G0e};E.x=P(n,E),E.X=P(r,E),E.c=P(e,E),O.x=P(n,O),O.X=P(r,O),O.c=P(e,O);function P(oe,Be){return function(We){var ue=[],ht=-1,ye=0,xe=oe.length,Fe,Tt,et;for(We instanceof Date||(We=new Date(+We));++ht<xe;)oe.charCodeAt(ht)===37&&(ue.push(oe.slice(ye,ht)),(Tt=JI[Fe=oe.charAt(++ht)])!=null?Fe=oe.charAt(++ht):Tt=Fe==="e"?" ":"0",(et=Be[Fe])&&(Fe=et(We,Tt)),ue.push(Fe),ye=ht+1);return ue.push(oe.slice(ye,ht)),ue.join("")}}function S(oe,Be){return function(We){var ue=Gd(1900,void 0,1),ht=T(ue,oe,We+="",0),ye,xe;if(ht!=We.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(Be&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(ye=Cw(Gd(ue.y,0,1)),xe=ye.getUTCDay(),ye=xe>4||xe===0?Bv.ceil(ye):Bv(ye),ye=Mb.offset(ye,(ue.V-1)*7),ue.y=ye.getUTCFullYear(),ue.m=ye.getUTCMonth(),ue.d=ye.getUTCDate()+(ue.w+6)%7):(ye=Pw(Gd(ue.y,0,1)),xe=ye.getDay(),ye=xe>4||xe===0?Fv.ceil(ye):Fv(ye),ye=Rm.offset(ye,(ue.V-1)*7),ue.y=ye.getFullYear(),ue.m=ye.getMonth(),ue.d=ye.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),xe="Z"in ue?Cw(Gd(ue.y,0,1)).getUTCDay():Pw(Gd(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(xe+5)%7:ue.w+ue.U*7-(xe+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,Cw(ue)):Pw(ue)}}function T(oe,Be,We,ue){for(var ht=0,ye=Be.length,xe=We.length,Fe,Tt;ht<ye;){if(ue>=xe)return-1;if(Fe=Be.charCodeAt(ht++),Fe===37){if(Fe=Be.charAt(ht++),Tt=A[Fe in JI?Be.charAt(ht++):Fe],!Tt||(ue=Tt(oe,We,ue))<0)return-1}else if(Fe!=We.charCodeAt(ue++))return-1}return ue}function k(oe,Be,We){var ue=c.exec(Be.slice(We));return ue?(oe.p=f.get(ue[0].toLowerCase()),We+ue[0].length):-1}function z(oe,Be,We){var ue=g.exec(Be.slice(We));return ue?(oe.w=b.get(ue[0].toLowerCase()),We+ue[0].length):-1}function N(oe,Be,We){var ue=d.exec(Be.slice(We));return ue?(oe.w=h.get(ue[0].toLowerCase()),We+ue[0].length):-1}function $(oe,Be,We){var ue=w.exec(Be.slice(We));return ue?(oe.m=_.get(ue[0].toLowerCase()),We+ue[0].length):-1}function M(oe,Be,We){var ue=y.exec(Be.slice(We));return ue?(oe.m=x.get(ue[0].toLowerCase()),We+ue[0].length):-1}function Y(oe,Be,We){return T(oe,e,Be,We)}function q(oe,Be,We){return T(oe,n,Be,We)}function ie(oe,Be,We){return T(oe,r,Be,We)}function le(oe){return a[oe.getDay()]}function Q(oe){return s[oe.getDay()]}function G(oe){return l[oe.getMonth()]}function he(oe){return o[oe.getMonth()]}function ce(oe){return i[+(oe.getHours()>=12)]}function we(oe){return 1+~~(oe.getMonth()/3)}function ke(oe){return a[oe.getUTCDay()]}function Ue(oe){return s[oe.getUTCDay()]}function ct(oe){return l[oe.getUTCMonth()]}function ot(oe){return o[oe.getUTCMonth()]}function Ce(oe){return i[+(oe.getUTCHours()>=12)]}function Ye(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var Be=P(oe+="",E);return Be.toString=function(){return oe},Be},parse:function(oe){var Be=S(oe+="",!1);return Be.toString=function(){return oe},Be},utcFormat:function(oe){var Be=P(oe+="",O);return Be.toString=function(){return oe},Be},utcParse:function(oe){var Be=S(oe+="",!0);return Be.toString=function(){return oe},Be}}}var JI={"-":"",_:" ",0:"0"},rr=/^\s*\d+/,I0e=/^%/,N0e=/[\\^$*+?|[\]().{}]/g;function Nt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function D0e(t){return t.replace(N0e,"\\$&")}function Yd(t){return new RegExp("^(?:"+t.map(D0e).join("|")+")","i")}function Xd(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function M0e(t,e,n){var r=rr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function R0e(t,e,n){var r=rr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function $0e(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function L0e(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function z0e(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function eN(t,e,n){var r=rr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function tN(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function V0e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function F0e(t,e,n){var r=rr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function B0e(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function nN(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function U0e(t,e,n){var r=rr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function rN(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function W0e(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function K0e(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function q0e(t,e,n){var r=rr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function H0e(t,e,n){var r=rr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function G0e(t,e,n){var r=I0e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Y0e(t,e,n){var r=rr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function X0e(t,e,n){var r=rr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function iN(t,e){return Nt(t.getDate(),e,2)}function Q0e(t,e){return Nt(t.getHours(),e,2)}function Z0e(t,e){return Nt(t.getHours()%12||12,e,2)}function J0e(t,e){return Nt(1+Rm.count(eo(t),t),e,3)}function qz(t,e){return Nt(t.getMilliseconds(),e,3)}function ebe(t,e){return qz(t,e)+"000"}function tbe(t,e){return Nt(t.getMonth()+1,e,2)}function nbe(t,e){return Nt(t.getMinutes(),e,2)}function rbe(t,e){return Nt(t.getSeconds(),e,2)}function ibe(t){var e=t.getDay();return e===0?7:e}function sbe(t,e){return Nt(Rb.count(eo(t)-1,t),e,2)}function Hz(t){var e=t.getDay();return e>=4||e===0?Pf(t):Pf.ceil(t)}function abe(t,e){return t=Hz(t),Nt(Pf.count(eo(t),t)+(eo(t).getDay()===4),e,2)}function obe(t){return t.getDay()}function lbe(t,e){return Nt(Fv.count(eo(t)-1,t),e,2)}function cbe(t,e){return Nt(t.getFullYear()%100,e,2)}function ube(t,e){return t=Hz(t),Nt(t.getFullYear()%100,e,2)}function fbe(t,e){return Nt(t.getFullYear()%1e4,e,4)}function dbe(t,e){var n=t.getDay();return t=n>=4||n===0?Pf(t):Pf.ceil(t),Nt(t.getFullYear()%1e4,e,4)}function hbe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Nt(e/60|0,"0",2)+Nt(e%60,"0",2)}function sN(t,e){return Nt(t.getUTCDate(),e,2)}function pbe(t,e){return Nt(t.getUTCHours(),e,2)}function mbe(t,e){return Nt(t.getUTCHours()%12||12,e,2)}function gbe(t,e){return Nt(1+Mb.count(to(t),t),e,3)}function Gz(t,e){return Nt(t.getUTCMilliseconds(),e,3)}function ybe(t,e){return Gz(t,e)+"000"}function vbe(t,e){return Nt(t.getUTCMonth()+1,e,2)}function bbe(t,e){return Nt(t.getUTCMinutes(),e,2)}function xbe(t,e){return Nt(t.getUTCSeconds(),e,2)}function wbe(t){var e=t.getUTCDay();return e===0?7:e}function _be(t,e){return Nt($b.count(to(t)-1,t),e,2)}function Yz(t){var e=t.getUTCDay();return e>=4||e===0?Cf(t):Cf.ceil(t)}function Sbe(t,e){return t=Yz(t),Nt(Cf.count(to(t),t)+(to(t).getUTCDay()===4),e,2)}function Ebe(t){return t.getUTCDay()}function Abe(t,e){return Nt(Bv.count(to(t)-1,t),e,2)}function Tbe(t,e){return Nt(t.getUTCFullYear()%100,e,2)}function Pbe(t,e){return t=Yz(t),Nt(t.getUTCFullYear()%100,e,2)}function Cbe(t,e){return Nt(t.getUTCFullYear()%1e4,e,4)}function jbe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Cf(t):Cf.ceil(t),Nt(t.getUTCFullYear()%1e4,e,4)}function Obe(){return"+0000"}function aN(){return"%"}function oN(t){return+t}function lN(t){return Math.floor(+t/1e3)}var uu,Xz,Qz;kbe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function kbe(t){return uu=k0e(t),Xz=uu.format,uu.parse,Qz=uu.utcFormat,uu.utcParse,uu}function Ibe(t){return new Date(t)}function Nbe(t){return t instanceof Date?+t:+new Date(+t)}function hT(t,e,n,r,i,s,a,o,l,c){var f=JA(),d=f.invert,h=f.domain,g=c(".%L"),b=c(":%S"),y=c("%I:%M"),x=c("%I %p"),w=c("%a %d"),_=c("%b %d"),E=c("%B"),O=c("%Y");function A(P){return(l(P)<P?g:o(P)<P?b:a(P)<P?y:s(P)<P?x:r(P)<P?i(P)<P?w:_:n(P)<P?E:O)(P)}return f.invert=function(P){return new Date(d(P))},f.domain=function(P){return arguments.length?h(Array.from(P,Nbe)):h().map(Ibe)},f.ticks=function(P){var S=h();return t(S[0],S[S.length-1],P??10)},f.tickFormat=function(P,S){return S==null?A:c(S)},f.nice=function(P){var S=h();return(!P||typeof P.range!="function")&&(P=e(S[0],S[S.length-1],P??10)),P?h($z(S,P)):f},f.copy=function(){return Mm(f,hT(t,e,n,r,i,s,a,o,l,c))},f}function Dbe(){return rs.apply(hT(j0e,O0e,eo,fT,Rb,Rm,cT,oT,ec,Xz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Mbe(){return rs.apply(hT(P0e,C0e,to,dT,$b,Mb,uT,lT,ec,Qz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Lb(){var t=0,e=1,n,r,i,s,a=Rr,o=!1,l;function c(d){return d==null||isNaN(d=+d)?l:a(i===0?.5:(d=(s(d)-n)*i,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(h){var g,b;return arguments.length?([g,b]=h,a=d(g,b),c):[a(0),a(1)]}}return c.range=f(gd),c.rangeRound=f(ZA),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function gl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Zz(){var t=ml(Lb()(Rr));return t.copy=function(){return gl(t,Zz())},oo.apply(t,arguments)}function Jz(){var t=nT(Lb()).domain([1,10]);return t.copy=function(){return gl(t,Jz()).base(t.base())},oo.apply(t,arguments)}function eV(){var t=rT(Lb());return t.copy=function(){return gl(t,eV()).constant(t.constant())},oo.apply(t,arguments)}function pT(){var t=iT(Lb());return t.copy=function(){return gl(t,pT()).exponent(t.exponent())},oo.apply(t,arguments)}function Rbe(){return pT.apply(null,arguments).exponent(.5)}function tV(){var t=[],e=Rr;function n(r){if(r!=null&&!isNaN(r=+r))return e((Nm(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Yo),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>_ve(t,s/r))},n.copy=function(){return tV(e).domain(t)},oo.apply(n,arguments)}function zb(){var t=0,e=.5,n=1,r=1,i,s,a,o,l,c=Rr,f,d=!1,h;function g(y){return isNaN(y=+y)?h:(y=.5+((y=+f(y))-s)*(r*y<r*s?o:l),c(d?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([t,e,n]=y,i=f(t=+t),s=f(e=+e),a=f(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,g):[t,e,n]},g.clamp=function(y){return arguments.length?(d=!!y,g):d},g.interpolator=function(y){return arguments.length?(c=y,g):c};function b(y){return function(x){var w,_,E;return arguments.length?([w,_,E]=x,c=Gve(y,[w,_,E]),g):[c(0),c(.5),c(1)]}}return g.range=b(gd),g.rangeRound=b(ZA),g.unknown=function(y){return arguments.length?(h=y,g):h},function(y){return f=y,i=y(t),s=y(e),a=y(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,g}}function nV(){var t=ml(zb()(Rr));return t.copy=function(){return gl(t,nV())},oo.apply(t,arguments)}function rV(){var t=nT(zb()).domain([.1,1,10]);return t.copy=function(){return gl(t,rV()).base(t.base())},oo.apply(t,arguments)}function iV(){var t=rT(zb());return t.copy=function(){return gl(t,iV()).constant(t.constant())},oo.apply(t,arguments)}function mT(){var t=iT(zb());return t.copy=function(){return gl(t,mT()).exponent(t.exponent())},oo.apply(t,arguments)}function $be(){return mT.apply(null,arguments).exponent(.5)}const cN=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Cp,scaleDiverging:nV,scaleDivergingLog:rV,scaleDivergingPow:mT,scaleDivergingSqrt:$be,scaleDivergingSymlog:iV,scaleIdentity:Rz,scaleImplicit:eS,scaleLinear:zv,scaleLog:Lz,scaleOrdinal:YA,scalePoint:$h,scalePow:sT,scaleQuantile:Fz,scaleQuantize:Bz,scaleRadial:Vz,scaleSequential:Zz,scaleSequentialLog:Jz,scaleSequentialPow:pT,scaleSequentialQuantile:tV,scaleSequentialSqrt:Rbe,scaleSequentialSymlog:eV,scaleSqrt:y0e,scaleSymlog:zz,scaleThreshold:Uz,scaleTime:Dbe,scaleUtc:Mbe,tickFormat:Mz},Symbol.toStringTag,{value:"Module"}));var Lbe=ad;function zbe(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],a=e(s);if(a!=null&&(o===void 0?a===a&&!Lbe(a):n(a,o)))var o=a,l=s}return l}var sV=zbe;function Vbe(t,e){return t>e}var Fbe=Vbe,Bbe=sV,Ube=Fbe,Wbe=md;function Kbe(t){return t&&t.length?Bbe(t,Wbe,Ube):void 0}var qbe=Kbe;const Io=Wt(qbe);function Hbe(t,e){return t<e}var Gbe=Hbe,Ybe=sV,Xbe=Gbe,Qbe=md;function Zbe(t){return t&&t.length?Ybe(t,Qbe,Xbe):void 0}var Jbe=Zbe;const Vb=Wt(Jbe);var exe=jA,txe=pl,nxe=pz,rxe=ci;function ixe(t,e){var n=rxe(t)?exe:nxe;return n(t,txe(e))}var sxe=ixe,axe=dz,oxe=sxe;function lxe(t,e){return axe(oxe(t,e),1)}var cxe=lxe;const uxe=Wt(cxe);var fxe=WA;function dxe(t,e){return fxe(t,e)}var hxe=dxe;const jf=Wt(hxe);var yd=1e9,pxe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},yT,fn=!0,ts="[DecimalError] ",uc=ts+"Invalid argument: ",gT=ts+"Exponent out of range: ",vd=Math.floor,Wl=Math.pow,mxe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,bi,Zn=1e7,rn=7,aV=9007199254740991,Uv=vd(aV/rn),Ve={};Ve.absoluteValue=Ve.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ve.comparedTo=Ve.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ve.decimalPlaces=Ve.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*rn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ve.dividedBy=Ve.div=function(t){return Ba(this,new this.constructor(t))};Ve.dividedToIntegerBy=Ve.idiv=function(t){var e=this,n=e.constructor;return Ht(Ba(e,new n(t),0,1),n.precision)};Ve.equals=Ve.eq=function(t){return!this.cmp(t)};Ve.exponent=function(){return zn(this)};Ve.greaterThan=Ve.gt=function(t){return this.cmp(t)>0};Ve.greaterThanOrEqualTo=Ve.gte=function(t){return this.cmp(t)>=0};Ve.isInteger=Ve.isint=function(){return this.e>this.d.length-2};Ve.isNegative=Ve.isneg=function(){return this.s<0};Ve.isPositive=Ve.ispos=function(){return this.s>0};Ve.isZero=function(){return this.s===0};Ve.lessThan=Ve.lt=function(t){return this.cmp(t)<0};Ve.lessThanOrEqualTo=Ve.lte=function(t){return this.cmp(t)<1};Ve.logarithm=Ve.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(bi))throw Error(ts+"NaN");if(n.s<1)throw Error(ts+(n.s?"NaN":"-Infinity"));return n.eq(bi)?new r(0):(fn=!1,e=Ba(Np(n,s),Np(t,s),s),fn=!0,Ht(e,i))};Ve.minus=Ve.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?cV(e,t):oV(e,(t.s=-t.s,t))};Ve.modulo=Ve.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(ts+"NaN");return n.s?(fn=!1,e=Ba(n,t,0,1).times(t),fn=!0,n.minus(e)):Ht(new r(n),i)};Ve.naturalExponential=Ve.exp=function(){return lV(this)};Ve.naturalLogarithm=Ve.ln=function(){return Np(this)};Ve.negated=Ve.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ve.plus=Ve.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?oV(e,t):cV(e,(t.s=-t.s,t))};Ve.precision=Ve.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(uc+t);if(e=zn(i)+1,r=i.d.length-1,n=r*rn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ve.squareRoot=Ve.sqrt=function(){var t,e,n,r,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(ts+"NaN")}for(t=zn(o),fn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Xs(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=vd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(s=r,r=s.plus(Ba(o,s,a+2)).times(.5),Xs(s.d).slice(0,a)===(e=Xs(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Ht(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(e!="9999")break;a+=4}return fn=!0,Ht(r,n)};Ve.times=Ve.mul=function(t){var e,n,r,i,s,a,o,l,c,f=this,d=f.constructor,h=f.d,g=(t=new d(t)).d;if(!f.s||!t.s)return new d(0);for(t.s*=f.s,n=f.e+t.e,l=h.length,c=g.length,l<c&&(s=h,h=g,g=s,a=l,l=c,c=a),s=[],a=l+c,r=a;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)o=s[i]+g[r]*h[i-r-1]+e,s[i--]=o%Zn|0,e=o/Zn|0;s[i]=(s[i]+e)%Zn|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,fn?Ht(t,d.precision):t};Ve.toDecimalPlaces=Ve.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ca(t,0,yd),e===void 0?e=r.rounding:ca(e,0,8),Ht(n,t+zn(n)+1,e))};Ve.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Sc(r,!0):(ca(t,0,yd),e===void 0?e=i.rounding:ca(e,0,8),r=Ht(new i(r),t+1,e),n=Sc(r,!0,t+1)),n};Ve.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Sc(i):(ca(t,0,yd),e===void 0?e=s.rounding:ca(e,0,8),r=Ht(new s(i),t+zn(i)+1,e),n=Sc(r.abs(),!1,t+zn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ve.toInteger=Ve.toint=function(){var t=this,e=t.constructor;return Ht(new e(t),zn(t)+1,e.rounding)};Ve.toNumber=function(){return+this};Ve.toPower=Ve.pow=function(t){var e,n,r,i,s,a,o=this,l=o.constructor,c=12,f=+(t=new l(t));if(!t.s)return new l(bi);if(o=new l(o),!o.s){if(t.s<1)throw Error(ts+"Infinity");return o}if(o.eq(bi))return o;if(r=l.precision,t.eq(bi))return Ht(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=o.s,a){if((n=f<0?-f:f)<=aV){for(i=new l(bi),e=Math.ceil(r/rn+4),fn=!1;n%2&&(i=i.times(o),fN(i.d,e)),n=vd(n/2),n!==0;)o=o.times(o),fN(o.d,e);return fn=!0,t.s<0?new l(bi).div(i):Ht(i,r)}}else if(s<0)throw Error(ts+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,fn=!1,i=t.times(Np(o,r+c)),fn=!0,i=lV(i),i.s=s,i};Ve.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=zn(i),r=Sc(i,n<=s.toExpNeg||n>=s.toExpPos)):(ca(t,1,yd),e===void 0?e=s.rounding:ca(e,0,8),i=Ht(new s(i),t,e),n=zn(i),r=Sc(i,t<=n||n<=s.toExpNeg,t)),r};Ve.toSignificantDigits=Ve.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ca(t,1,yd),e===void 0?e=r.rounding:ca(e,0,8)),Ht(new r(n),t,e)};Ve.toString=Ve.valueOf=Ve.val=Ve.toJSON=Ve[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=zn(t),n=t.constructor;return Sc(t,e<=n.toExpNeg||e>=n.toExpPos)};function oV(t,e){var n,r,i,s,a,o,l,c,f=t.constructor,d=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),fn?Ht(e,d):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),s=a-i,s){for(s<0?(r=l,s=-s,o=c.length):(r=c,i=a,o=l.length),a=Math.ceil(d/rn),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=l.length,s=c.length,o-s<0&&(s=o,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/Zn|0,l[s]%=Zn;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,fn?Ht(e,d):e}function ca(t,e,n){if(t!==~~t||t<e||t>n)throw Error(uc+t)}function Xs(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=rn-r.length,n&&(s+=Ao(n)),s+=r;a=t[e],r=a+"",n=rn-r.length,n&&(s+=Ao(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Ba=function(){function t(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%Zn|0,a=s/Zn|0;return a&&r.unshift(a),r}function e(r,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*Zn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,l,c,f,d,h,g,b,y,x,w,_,E,O,A,P,S,T,k=r.constructor,z=r.s==i.s?1:-1,N=r.d,$=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(ts+"Division by zero");for(l=r.e-i.e,S=$.length,A=N.length,g=new k(z),b=g.d=[],c=0;$[c]==(N[c]||0);)++c;if($[c]>(N[c]||0)&&--l,s==null?_=s=k.precision:a?_=s+(zn(r)-zn(i))+1:_=s,_<0)return new k(0);if(_=_/rn+2|0,c=0,S==1)for(f=0,$=$[0],_++;(c<A||f)&&_--;c++)E=f*Zn+(N[c]||0),b[c]=E/$|0,f=E%$|0;else{for(f=Zn/($[0]+1)|0,f>1&&($=t($,f),N=t(N,f),S=$.length,A=N.length),O=S,y=N.slice(0,S),x=y.length;x<S;)y[x++]=0;T=$.slice(),T.unshift(0),P=$[0],$[1]>=Zn/2&&++P;do f=0,o=e($,y,S,x),o<0?(w=y[0],S!=x&&(w=w*Zn+(y[1]||0)),f=w/P|0,f>1?(f>=Zn&&(f=Zn-1),d=t($,f),h=d.length,x=y.length,o=e(d,y,h,x),o==1&&(f--,n(d,S<h?T:$,h))):(f==0&&(o=f=1),d=$.slice()),h=d.length,h<x&&d.unshift(0),n(y,d,x),o==-1&&(x=y.length,o=e($,y,S,x),o<1&&(f++,n(y,S<x?T:$,x))),x=y.length):o===0&&(f++,y=[0]),b[c++]=f,o&&y[0]?y[x++]=N[O]||0:(y=[N[O]],x=1);while((O++<A||y[0]!==void 0)&&_--)}return b[0]||b.shift(),g.e=l,Ht(g,a?s+zn(g)+1:s)}}();function lV(t,e){var n,r,i,s,a,o,l=0,c=0,f=t.constructor,d=f.precision;if(zn(t)>16)throw Error(gT+zn(t));if(!t.s)return new f(bi);for(fn=!1,o=d,a=new f(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(Wl(2,c))/Math.LN10*2+5|0,o+=r,n=i=s=new f(bi),f.precision=o;;){if(i=Ht(i.times(t),o),n=n.times(++l),a=s.plus(Ba(i,n,o)),Xs(a.d).slice(0,o)===Xs(s.d).slice(0,o)){for(;c--;)s=Ht(s.times(s),o);return f.precision=d,e==null?(fn=!0,Ht(s,d)):s}s=a}}function zn(t){for(var e=t.e*rn,n=t.d[0];n>=10;n/=10)e++;return e}function jw(t,e,n){if(e>t.LN10.sd())throw fn=!0,n&&(t.precision=n),Error(ts+"LN10 precision limit exceeded");return Ht(new t(t.LN10),e)}function Ao(t){for(var e="";t--;)e+="0";return e}function Np(t,e){var n,r,i,s,a,o,l,c,f,d=1,h=10,g=t,b=g.d,y=g.constructor,x=y.precision;if(g.s<1)throw Error(ts+(g.s?"NaN":"-Infinity"));if(g.eq(bi))return new y(0);if(e==null?(fn=!1,c=x):c=e,g.eq(10))return e==null&&(fn=!0),jw(y,c);if(c+=h,y.precision=c,n=Xs(b),r=n.charAt(0),s=zn(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=Xs(g.d),r=n.charAt(0),d++;s=zn(g),r>1?(g=new y("0."+n),s++):g=new y(r+"."+n.slice(1))}else return l=jw(y,c+2,x).times(s+""),g=Np(new y(r+"."+n.slice(1)),c-h).plus(l),y.precision=x,e==null?(fn=!0,Ht(g,x)):g;for(o=a=g=Ba(g.minus(bi),g.plus(bi),c),f=Ht(g.times(g),c),i=3;;){if(a=Ht(a.times(f),c),l=o.plus(Ba(a,new y(i),c)),Xs(l.d).slice(0,c)===Xs(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(jw(y,c+2,x).times(s+""))),o=Ba(o,new y(d),c),y.precision=x,e==null?(fn=!0,Ht(o,x)):o;o=l,i+=2}}function uN(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=vd(n/rn),t.d=[],r=(n+1)%rn,n<0&&(r+=rn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=rn;r<i;)t.d.push(+e.slice(r,r+=rn));e=e.slice(r),r=rn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),fn&&(t.e>Uv||t.e<-Uv))throw Error(gT+n)}else t.s=0,t.e=0,t.d=[0];return t}function Ht(t,e,n){var r,i,s,a,o,l,c,f,d=t.d;for(a=1,s=d[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=rn,i=e,c=d[f=0];else{if(f=Math.ceil((r+1)/rn),s=d.length,f>=s)return t;for(c=s=d[f],a=1;s>=10;s/=10)a++;r%=rn,i=r-rn+a}if(n!==void 0&&(s=Wl(10,a-i-1),o=c/s%10|0,l=e<0||d[f+1]!==void 0||c%s,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?c/Wl(10,a-i):0:d[f-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=zn(t),d.length=1,e=e-s-1,d[0]=Wl(10,(rn-e%rn)%rn),t.e=vd(-e/rn)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=f,s=1,f--):(d.length=f+1,s=Wl(10,rn-r),d[f]=i>0?(c/Wl(10,a-i)%Wl(10,i)|0)*s:0),l)for(;;)if(f==0){(d[0]+=s)==Zn&&(d[0]=1,++t.e);break}else{if(d[f]+=s,d[f]!=Zn)break;d[f--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(fn&&(t.e>Uv||t.e<-Uv))throw Error(gT+zn(t));return t}function cV(t,e){var n,r,i,s,a,o,l,c,f,d,h=t.constructor,g=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),fn?Ht(e,g):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(f=a<0,f?(n=l,a=-a,o=d.length):(n=d,r=c,o=l.length),i=Math.max(Math.ceil(g/rn),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=d.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(l[i]!=d[i]){f=l[i]<d[i];break}a=0}for(f&&(n=l,l=d,d=n,e.s=-e.s),o=l.length,i=d.length-o;i>0;--i)l[o++]=0;for(i=d.length;i>a;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=Zn-1;--l[s],l[i]+=Zn}l[i]-=d[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,fn?Ht(e,g):e):new h(0)}function Sc(t,e,n){var r,i=zn(t),s=Xs(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+Ao(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ao(-i-1)+s,n&&(r=n-a)>0&&(s+=Ao(r))):i>=a?(s+=Ao(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+Ao(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=Ao(r))),t.s<0?"-"+s:s}function fN(t,e){if(t.length>e)return t.length=e,!0}function uV(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(uc+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return uN(a,s.toString())}else if(typeof s!="string")throw Error(uc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,mxe.test(s))uN(a,s);else throw Error(uc+s)}if(i.prototype=Ve,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=uV,i.config=i.set=gxe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function gxe(t){if(!t||typeof t!="object")throw Error(ts+"Object expected");var e,n,r,i=["precision",1,yd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(vd(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(uc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(uc+n+": "+r);return this}var yT=uV(pxe);bi=new yT(1);const Bt=yT;function yxe(t){return wxe(t)||xxe(t)||bxe(t)||vxe()}function vxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bxe(t,e){if(t){if(typeof t=="string")return iS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iS(t,e)}}function xxe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function wxe(t){if(Array.isArray(t))return iS(t)}function iS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _xe=function(e){return e},fV={},dV=function(e){return e===fV},dN=function(e){return function n(){return arguments.length===0||arguments.length===1&&dV(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Sxe=function t(e,n){return e===1?n:dN(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.filter(function(o){return o!==fV}).length;return a>=e?n.apply(void 0,i):t(e-a,dN(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var f=i.map(function(d){return dV(d)?l.shift():d});return n.apply(void 0,yxe(f).concat(l))}))})},Fb=function(e){return Sxe(e.length,e)},sS=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Exe=Fb(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Axe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return _xe;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(o,l){return l(o)},s.apply(void 0,arguments))}},aS=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},hV=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n&&s.every(function(o,l){return o===n[l]})||(n=s,r=e.apply(void 0,s)),r}};function Txe(t){var e;return t===0?e=1:e=Math.floor(new Bt(t).abs().log(10).toNumber())+1,e}function Pxe(t,e,n){for(var r=new Bt(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Cxe=Fb(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),jxe=Fb(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Oxe=Fb(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Bb={rangeStep:Pxe,getDigitCount:Txe,interpolateNumber:Cxe,uninterpolateNumber:jxe,uninterpolateTruncation:Oxe};function oS(t){return Nxe(t)||Ixe(t)||pV(t)||kxe()}function kxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ixe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Nxe(t){if(Array.isArray(t))return lS(t)}function Dp(t,e){return Rxe(t)||Mxe(t,e)||pV(t,e)||Dxe()}function Dxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pV(t,e){if(t){if(typeof t=="string")return lS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lS(t,e)}}function lS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mxe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),o;!(r=(o=a.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw s}}return n}}function Rxe(t){if(Array.isArray(t))return t}function mV(t){var e=Dp(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function gV(t,e,n){if(t.lte(0))return new Bt(0);var r=Bb.getDigitCount(t.toNumber()),i=new Bt(10).pow(r),s=t.div(i),a=r!==1?.05:.1,o=new Bt(Math.ceil(s.div(a).toNumber())).add(n).mul(a),l=o.mul(i);return e?l:new Bt(Math.ceil(l))}function $xe(t,e,n){var r=1,i=new Bt(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new Bt(10).pow(Bb.getDigitCount(t)-1),i=new Bt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Bt(Math.floor(t)))}else t===0?i=new Bt(Math.floor((e-1)/2)):n||(i=new Bt(Math.floor(t)));var a=Math.floor((e-1)/2),o=Axe(Exe(function(l){return i.add(new Bt(l-a).mul(r)).toNumber()}),sS);return o(0,e)}function yV(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Bt(0),tickMin:new Bt(0),tickMax:new Bt(0)};var s=gV(new Bt(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new Bt(0):(a=new Bt(t).add(e).div(2),a=a.sub(new Bt(a).mod(s)));var o=Math.ceil(a.sub(t).div(s).toNumber()),l=Math.ceil(new Bt(e).sub(a).div(s).toNumber()),c=o+l+1;return c>n?yV(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,o=e>0?o:o+(n-c)),{step:s,tickMin:a.sub(new Bt(o).mul(s)),tickMax:a.add(new Bt(l).mul(s))})}function Lxe(t){var e=Dp(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),o=mV([n,r]),l=Dp(o,2),c=l[0],f=l[1];if(c===-1/0||f===1/0){var d=f===1/0?[c].concat(oS(sS(0,i-1).map(function(){return 1/0}))):[].concat(oS(sS(0,i-1).map(function(){return-1/0})),[f]);return n>r?aS(d):d}if(c===f)return $xe(c,i,s);var h=yV(c,f,a,s),g=h.step,b=h.tickMin,y=h.tickMax,x=Bb.rangeStep(b,y.add(new Bt(.1).mul(g)),g);return n>r?aS(x):x}function zxe(t,e){var n=Dp(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=mV([r,i]),o=Dp(a,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var f=Math.max(e,2),d=gV(new Bt(c).sub(l).div(f-1),s,0),h=[].concat(oS(Bb.rangeStep(new Bt(l),new Bt(c).sub(new Bt(.99).mul(d)),d)),[c]);return r>i?aS(h):h}var Vxe=hV(Lxe),Fxe=hV(zxe),Bxe="Invariant failed";function Ec(t,e){throw new Error(Bxe)}var Uxe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function Wv(){return Wv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wv.apply(this,arguments)}function Wxe(t,e){return Gxe(t)||Hxe(t,e)||qxe(t,e)||Kxe()}function Kxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qxe(t,e){if(t){if(typeof t=="string")return hN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hN(t,e)}}function hN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Gxe(t){if(Array.isArray(t))return t}function Yxe(t,e){if(t==null)return{};var n=Xxe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xV(r.key),r)}}function Jxe(t,e,n){return e&&Zxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ewe(t,e,n){return e=Kv(e),twe(t,vV()?Reflect.construct(e,n||[],Kv(t).constructor):e.apply(t,n))}function twe(t,e){if(e&&(Of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nwe(t)}function nwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vV=function(){return!!t})()}function Kv(t){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kv(t)}function rwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cS(t,e)}function cS(t,e){return cS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cS(t,e)}function bV(t,e,n){return e=xV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xV(t){var e=iwe(t,"string");return Of(e)=="symbol"?e:e+""}function iwe(t,e){if(Of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $m=function(t){function e(){return Qxe(this,e),ewe(this,e,arguments)}return rwe(e,t),Jxe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,a=r.width,o=r.dataKey,l=r.data,c=r.dataPointFormatter,f=r.xAxis,d=r.yAxis,h=Yxe(r,Uxe),g=pt(h,!1);this.props.direction==="x"&&f.type!=="number"&&Ec();var b=l.map(function(y){var x=c(y,o),w=x.x,_=x.y,E=x.value,O=x.errorVal;if(!O)return null;var A=[],P,S;if(Array.isArray(O)){var T=Wxe(O,2);P=T[0],S=T[1]}else P=S=O;if(s==="vertical"){var k=f.scale,z=_+i,N=z+a,$=z-a,M=k(E-P),Y=k(E+S);A.push({x1:Y,y1:N,x2:Y,y2:$}),A.push({x1:M,y1:z,x2:Y,y2:z}),A.push({x1:M,y1:N,x2:M,y2:$})}else if(s==="horizontal"){var q=d.scale,ie=w+i,le=ie-a,Q=ie+a,G=q(E-P),he=q(E+S);A.push({x1:le,y1:he,x2:Q,y2:he}),A.push({x1:ie,y1:G,x2:ie,y2:he}),A.push({x1:le,y1:G,x2:Q,y2:G})}return B.createElement(Zt,Wv({className:"recharts-errorBar",key:"bar-".concat(A.map(function(ce){return"".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))},g),A.map(function(ce){return B.createElement("line",Wv({},ce,{key:"line-".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))}))});return B.createElement(Zt,{className:"recharts-errorBars"},b)}}])}(B.Component);bV($m,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});bV($m,"displayName","ErrorBar");function Mp(t){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(t)}function pN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ml(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pN(Object(n),!0).forEach(function(r){swe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function swe(t,e,n){return e=awe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function awe(t){var e=owe(t,"string");return Mp(e)=="symbol"?e:e+""}function owe(t,e){if(Mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wV=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=vi(n,Go);if(!a)return null;var o=Go.defaultProps,l=o!==void 0?Ml(Ml({},o),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:s==="children"?c=(r||[]).reduce(function(f,d){var h=d.item,g=d.props,b=g.sectors||g.data||[];return f.concat(b.map(function(y){return{type:a.props.iconType||h.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):c=(r||[]).map(function(f){var d=f.item,h=d.type.defaultProps,g=h!==void 0?Ml(Ml({},h),d.props):{},b=g.dataKey,y=g.name,x=g.legendType,w=g.hide;return{inactive:w,dataKey:b,type:l.iconType||x||"square",color:vT(d),value:y||b,payload:g}}),Ml(Ml(Ml({},l),Go.getWithHeight(a,i)),{},{payload:c,item:a})};function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}function mN(t){return fwe(t)||uwe(t)||cwe(t)||lwe()}function lwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cwe(t,e){if(t){if(typeof t=="string")return uS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uS(t,e)}}function uwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fwe(t){if(Array.isArray(t))return uS(t)}function uS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gN(Object(n),!0).forEach(function(r){Qu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qu(t,e,n){return e=dwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dwe(t){var e=hwe(t,"string");return Rp(e)=="symbol"?e:e+""}function hwe(t,e){if(Rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vr(t,e,n){return gt(t)||gt(e)?n:qn(e)?Qi(t,e,n):dt(e)?e(t):n}function Lh(t,e,n,r){var i=uxe(t,function(o){return Vr(o,e)});if(n==="number"){var s=i.filter(function(o){return Pe(o)||parseFloat(o)});return s.length?[Vb(s),Io(s)]:[1/0,-1/0]}var a=r?i.filter(function(o){return!gt(o)}):i;return a.map(function(o){return qn(o)||o instanceof Date?o:""})}var pwe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,c=0;c<o;c++){var f=c>0?i[c-1].coordinate:i[o-1].coordinate,d=i[c].coordinate,h=c>=o-1?i[0].coordinate:i[c+1].coordinate,g=void 0;if(Ps(d-f)!==Ps(h-d)){var b=[];if(Ps(h-d)===Ps(l[1]-l[0])){g=h;var y=d+l[1]-l[0];b[0]=Math.min(y,(y+f)/2),b[1]=Math.max(y,(y+f)/2)}else{g=f;var x=h+l[1]-l[0];b[0]=Math.min(d,(x+d)/2),b[1]=Math.max(d,(x+d)/2)}var w=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(e>w[0]&&e<=w[1]||e>=b[0]&&e<=b[1]){a=i[c].index;break}}else{var _=Math.min(f,h),E=Math.max(f,h);if(e>(_+d)/2&&e<=(E+d)/2){a=i[c].index;break}}}else for(var O=0;O<o;O++)if(O===0&&e<=(r[O].coordinate+r[O+1].coordinate)/2||O>0&&O<o-1&&e>(r[O].coordinate+r[O-1].coordinate)/2&&e<=(r[O].coordinate+r[O+1].coordinate)/2||O===o-1&&e>(r[O].coordinate+r[O-1].coordinate)/2){a=r[O].index;break}return a},vT=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?_n(_n({},e.type.defaultProps),e.props):e.props,a=s.stroke,o=s.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:o;break;default:l=o;break}return l},mwe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},o=Object.keys(s),l=0,c=o.length;l<c;l++)for(var f=s[o[l]].stackGroups,d=Object.keys(f),h=0,g=d.length;h<g;h++){var b=f[d[h]],y=b.items,x=b.cateAxisId,w=y.filter(function(S){return Va(S.type).indexOf("Bar")>=0});if(w&&w.length){var _=w[0].type.defaultProps,E=_!==void 0?_n(_n({},_),w[0].props):w[0].props,O=E.barSize,A=E[x];a[A]||(a[A]=[]);var P=gt(O)?n:O;a[A].push({item:w[0],stackList:w.slice(1),barSize:gt(P)?void 0:_c(P,r,0)})}}return a},gwe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=s===void 0?[]:s,o=e.maxBarSize,l=a.length;if(l<1)return null;var c=_c(n,i,0,!0),f,d=[];if(a[0].barSize===+a[0].barSize){var h=!1,g=i/l,b=a.reduce(function(O,A){return O+A.barSize||0},0);b+=(l-1)*c,b>=i&&(b-=(l-1)*c,c=0),b>=i&&g>0&&(h=!0,g*=.9,b=l*g);var y=(i-b)/2>>0,x={offset:y-c,size:0};f=a.reduce(function(O,A){var P={item:A.item,position:{offset:x.offset+x.size+c,size:h?g:A.barSize}},S=[].concat(mN(O),[P]);return x=S[S.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(T){S.push({item:T,position:x})}),S},d)}else{var w=_c(r,i,0,!0);i-2*w-(l-1)*c<=0&&(c=0);var _=(i-2*w-(l-1)*c)/l;_>1&&(_>>=0);var E=o===+o?Math.min(_,o):_;f=a.reduce(function(O,A,P){var S=[].concat(mN(O),[{item:A.item,position:{offset:w+(_+c)*P+(_-E)/2,size:E}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(T){S.push({item:T,position:S[S.length-1].position})}),S},d)}return f},ywe=function(e,n,r,i){var s=r.children,a=r.width,o=r.margin,l=a-(o.left||0)-(o.right||0),c=wV({children:s,legendWidth:l});if(c){var f=i||{},d=f.width,h=f.height,g=c.align,b=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&b==="middle")&&g!=="center"&&Pe(e[g]))return _n(_n({},e),{},Qu({},g,e[g]+(d||0)));if((y==="horizontal"||y==="vertical"&&g==="center")&&b!=="middle"&&Pe(e[b]))return _n(_n({},e),{},Qu({},b,e[b]+(h||0)))}return e},vwe=function(e,n,r){return gt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},_V=function(e,n,r,i,s){var a=n.props.children,o=Zi(a,$m).filter(function(c){return vwe(i,s,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return e.reduce(function(c,f){var d=Vr(f,r);if(gt(d))return c;var h=Array.isArray(d)?[Vb(d),Io(d)]:[d,d],g=l.reduce(function(b,y){var x=Vr(f,y,0),w=h[0]-Math.abs(Array.isArray(x)?x[0]:x),_=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(w,b[0]),Math.max(_,b[1])]},[1/0,-1/0]);return[Math.min(g[0],c[0]),Math.max(g[1],c[1])]},[1/0,-1/0])}return null},bwe=function(e,n,r,i,s){var a=n.map(function(o){return _V(e,o,r,s,i)}).filter(function(o){return!gt(o)});return a&&a.length?a.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},SV=function(e,n,r,i,s){var a=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&_V(e,l,c,i)||Lh(e,c,r,s)});if(r==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return a.reduce(function(l,c){for(var f=0,d=c.length;f<d;f++)o[c[f]]||(o[c[f]]=!0,l.push(c[f]));return l},[])},EV=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},AV=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var s,a,o=e.map(function(l){return l.coordinate===n&&(s=!0),l.coordinate===r&&(a=!0),l.coordinate});return s||o.push(n),a||o.push(r),o},Ra=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,a=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Ps(o[0]-o[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(d){var h=s?s.indexOf(d):d;return{coordinate:i(h)+c,value:d,offset:c}});return f.filter(function(d){return!fd(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+c,value:d,index:h,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,h){return{coordinate:i(d)+c,value:s?s[d]:d,index:h,offset:c}})},Ow=new WeakMap,zg=function(e,n){if(typeof n!="function")return e;Ow.has(e)||Ow.set(e,new WeakMap);var r=Ow.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},xwe=function(e,n,r){var i=e.scale,s=e.type,a=e.layout,o=e.axisType;if(i==="auto")return a==="radial"&&o==="radiusAxis"?{scale:Cp(),realScaleType:"band"}:a==="radial"&&o==="angleAxis"?{scale:zv(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:$h(),realScaleType:"point"}:s==="category"?{scale:Cp(),realScaleType:"band"}:{scale:zv(),realScaleType:"linear"};if(wc(i)){var l="scale".concat(Pb(i));return{scale:(cN[l]||$h)(),realScaleType:cN[l]?l:"point"}}return dt(i)?{scale:i}:{scale:$h(),realScaleType:"point"}},yN=1e-4,wwe=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-yN,a=Math.max(i[0],i[1])+yN,o=e(n[0]),l=e(n[r-1]);(o<s||o>a||l<s||l>a)&&e.domain([n[0],n[r-1]])}},_we=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Swe=function(e,n){if(!n||n.length!==2||!Pe(n[0])||!Pe(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!Pe(e[0])||e[0]<r)&&(s[0]=r),(!Pe(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},Ewe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0,o=0;o<n;++o){var l=fd(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1])}},Awe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0;a<n;++a){var o=fd(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=s,e[a][r][1]=s+o,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},Twe={sign:Ewe,expand:Fle,none:wf,silhouette:Ble,wiggle:Ule,positive:Awe},Pwe=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),s=Twe[r],a=Vle().keys(i).value(function(o,l){return+Vr(o,l,0)}).order(M_).offset(s);return a(e)},Cwe=function(e,n,r,i,s,a){if(!e)return null;var o=a?n.reverse():n,l={},c=o.reduce(function(d,h){var g,b=(g=h.type)!==null&&g!==void 0&&g.defaultProps?_n(_n({},h.type.defaultProps),h.props):h.props,y=b.stackId,x=b.hide;if(x)return d;var w=b[r],_=d[w]||{hasStack:!1,stackGroups:{}};if(qn(y)){var E=_.stackGroups[y]||{numericAxisId:r,cateAxisId:i,items:[]};E.items.push(h),_.hasStack=!0,_.stackGroups[y]=E}else _.stackGroups[dd("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return _n(_n({},d),{},Qu({},w,_))},l),f={};return Object.keys(c).reduce(function(d,h){var g=c[h];if(g.hasStack){var b={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(y,x){var w=g.stackGroups[x];return _n(_n({},y),{},Qu({},x,{numericAxisId:r,cateAxisId:i,items:w.items,stackedData:Pwe(e,w.items,s)}))},b)}return _n(_n({},d),{},Qu({},h,g))},f)},jwe=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,a=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var f=Vxe(c,s,o);return e.domain([Vb(f),Io(f)]),{niceTicks:f}}if(s&&i==="number"){var d=e.domain(),h=Fxe(d,s,o);return{niceTicks:h}}return null};function qv(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!gt(i[e.dataKey])){var o=gv(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Vr(i,gt(a)?e.dataKey:a);return gt(l)?null:e.scale(l)}var vN=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,a=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=Vr(a,n.dataKey,n.domain[o]);return gt(l)?null:n.scale(l)-s/2+i},Owe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},kwe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?_n(_n({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(qn(s)){var a=n[s];if(a){var o=a.items.indexOf(e);return o>=0?a.stackedData[o]:null}}return null},Iwe=function(e){return e.reduce(function(n,r){return[Vb(r.concat([n[0]]).filter(Pe)),Io(r.concat([n[1]]).filter(Pe))]},[1/0,-1/0])},TV=function(e,n,r){return Object.keys(e).reduce(function(i,s){var a=e[s],o=a.stackedData,l=o.reduce(function(c,f){var d=Iwe(f.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},bN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fS=function(e,n,r){if(dt(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Pe(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(bN.test(e[0])){var s=+bN.exec(e[0])[1];i[0]=n[0]-s}else dt(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Pe(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(xN.test(e[1])){var a=+xN.exec(e[1])[1];i[1]=n[1]+a}else dt(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Hv=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=qA(n,function(d){return d.coordinate}),a=1/0,o=1,l=s.length;o<l;o++){var c=s[o],f=s[o-1];a=Math.min((c.coordinate||0)-(f.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},wN=function(e,n,r){return!e||!e.length||jf(e,Qi(r,"type.defaultProps.domain"))?n:e},PV=function(e,n){var r=e.type.defaultProps?_n(_n({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,a=r.unit,o=r.formatter,l=r.tooltipType,c=r.chartType,f=r.hide;return _n(_n({},pt(e,!1)),{},{dataKey:i,unit:a,formatter:o,name:s||i,color:vT(e),value:Vr(n,i),type:l,payload:n,chartType:c,hide:f})};function $p(t){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(t)}function _N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_N(Object(n),!0).forEach(function(r){Nwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_N(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nwe(t,e,n){return e=Dwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dwe(t){var e=Mwe(t,"string");return $p(e)=="symbol"?e:e+""}function Mwe(t,e){if($p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gv=Math.PI/180,Rwe=function(e){return e*180/Math.PI},dr=function(e,n,r,i){return{x:e+Math.cos(-Gv*i)*r,y:n+Math.sin(-Gv*i)*r}},$we=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-a,2))},Lwe=function(e,n){var r=e.x,i=e.y,s=n.cx,a=n.cy,o=$we({x:r,y:i},{x:s,y:a});if(o<=0)return{radius:o};var l=(r-s)/o,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:o,angle:Rwe(c),angleInRadian:c}},zwe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return{startAngle:n-a*360,endAngle:r-a*360}},Vwe=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),a=Math.floor(i/360),o=Math.min(s,a);return e+o*360},EN=function(e,n){var r=e.x,i=e.y,s=Lwe({x:r,y:i},n),a=s.radius,o=s.angle,l=n.innerRadius,c=n.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var f=zwe(n),d=f.startAngle,h=f.endAngle,g=o,b;if(d<=h){for(;g>h;)g-=360;for(;g<d;)g+=360;b=g>=d&&g<=h}else{for(;g>d;)g-=360;for(;g<h;)g+=360;b=g>=h&&g<=d}return b?SN(SN({},n),{},{radius:a,angle:Vwe(g,n)}):null};function Lp(t){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(t)}var Fwe=["offset"];function Bwe(t){return qwe(t)||Kwe(t)||Wwe(t)||Uwe()}function Uwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wwe(t,e){if(t){if(typeof t=="string")return dS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dS(t,e)}}function Kwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qwe(t){if(Array.isArray(t))return dS(t)}function dS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hwe(t,e){if(t==null)return{};var n=Gwe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Gwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function AN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AN(Object(n),!0).forEach(function(r){Ywe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ywe(t,e,n){return e=Xwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xwe(t){var e=Qwe(t,"string");return Lp(e)=="symbol"?e:e+""}function Qwe(t,e){if(Lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zp(){return zp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zp.apply(this,arguments)}var Zwe=function(e){var n=e.value,r=e.formatter,i=gt(e.children)?n:e.children;return dt(r)?r(i):i},Jwe=function(e,n){var r=Ps(n-e),i=Math.min(Math.abs(n-e),360);return r*i},e1e=function(e,n,r){var i=e.position,s=e.viewBox,a=e.offset,o=e.className,l=s,c=l.cx,f=l.cy,d=l.innerRadius,h=l.outerRadius,g=l.startAngle,b=l.endAngle,y=l.clockWise,x=(d+h)/2,w=Jwe(g,b),_=w>=0?1:-1,E,O;i==="insideStart"?(E=g+_*a,O=y):i==="insideEnd"?(E=b-_*a,O=!y):i==="end"&&(E=b+_*a,O=y),O=w<=0?O:!O;var A=dr(c,f,x,E),P=dr(c,f,x,E+(O?1:-1)*359),S="M".concat(A.x,",").concat(A.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(O?0:1,`,
    `).concat(P.x,",").concat(P.y),T=gt(e.id)?dd("recharts-radial-line-"):e.id;return B.createElement("text",zp({},r,{dominantBaseline:"central",className:Et("recharts-radial-bar-label",o)}),B.createElement("defs",null,B.createElement("path",{id:T,d:S})),B.createElement("textPath",{xlinkHref:"#".concat(T)},n))},t1e=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,a=s.cx,o=s.cy,l=s.innerRadius,c=s.outerRadius,f=s.startAngle,d=s.endAngle,h=(f+d)/2;if(i==="outside"){var g=dr(a,o,c+r,h),b=g.x,y=g.y;return{x:b,y,textAnchor:b>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var x=(l+c)/2,w=dr(a,o,x,h),_=w.x,E=w.y;return{x:_,y:E,textAnchor:"middle",verticalAnchor:"middle"}},n1e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,a=n,o=a.x,l=a.y,c=a.width,f=a.height,d=f>=0?1:-1,h=d*i,g=d>0?"end":"start",b=d>0?"start":"end",y=c>=0?1:-1,x=y*i,w=y>0?"end":"start",_=y>0?"start":"end";if(s==="top"){var E={x:o+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:g};return Un(Un({},E),r?{height:Math.max(l-r.y,0),width:c}:{})}if(s==="bottom"){var O={x:o+c/2,y:l+f+h,textAnchor:"middle",verticalAnchor:b};return Un(Un({},O),r?{height:Math.max(r.y+r.height-(l+f),0),width:c}:{})}if(s==="left"){var A={x:o-x,y:l+f/2,textAnchor:w,verticalAnchor:"middle"};return Un(Un({},A),r?{width:Math.max(A.x-r.x,0),height:f}:{})}if(s==="right"){var P={x:o+c+x,y:l+f/2,textAnchor:_,verticalAnchor:"middle"};return Un(Un({},P),r?{width:Math.max(r.x+r.width-P.x,0),height:f}:{})}var S=r?{width:c,height:f}:{};return s==="insideLeft"?Un({x:o+x,y:l+f/2,textAnchor:_,verticalAnchor:"middle"},S):s==="insideRight"?Un({x:o+c-x,y:l+f/2,textAnchor:w,verticalAnchor:"middle"},S):s==="insideTop"?Un({x:o+c/2,y:l+h,textAnchor:"middle",verticalAnchor:b},S):s==="insideBottom"?Un({x:o+c/2,y:l+f-h,textAnchor:"middle",verticalAnchor:g},S):s==="insideTopLeft"?Un({x:o+x,y:l+h,textAnchor:_,verticalAnchor:b},S):s==="insideTopRight"?Un({x:o+c-x,y:l+h,textAnchor:w,verticalAnchor:b},S):s==="insideBottomLeft"?Un({x:o+x,y:l+f-h,textAnchor:_,verticalAnchor:g},S):s==="insideBottomRight"?Un({x:o+c-x,y:l+f-h,textAnchor:w,verticalAnchor:g},S):od(s)&&(Pe(s.x)||Zl(s.x))&&(Pe(s.y)||Zl(s.y))?Un({x:o+_c(s.x,c),y:l+_c(s.y,f),textAnchor:"end",verticalAnchor:"end"},S):Un({x:o+c/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},S)},r1e=function(e){return"cx"in e&&Pe(e.cx)};function Cr(t){var e=t.offset,n=e===void 0?5:e,r=Hwe(t,Fwe),i=Un({offset:n},r),s=i.viewBox,a=i.position,o=i.value,l=i.children,c=i.content,f=i.className,d=f===void 0?"":f,h=i.textBreakAll;if(!s||gt(o)&&gt(l)&&!L.isValidElement(c)&&!dt(c))return null;if(L.isValidElement(c))return L.cloneElement(c,i);var g;if(dt(c)){if(g=L.createElement(c,i),L.isValidElement(g))return g}else g=Zwe(i);var b=r1e(s),y=pt(i,!0);if(b&&(a==="insideStart"||a==="insideEnd"||a==="end"))return e1e(i,g,y);var x=b?t1e(i):n1e(i);return B.createElement(Iv,zp({className:Et("recharts-label",d)},y,x,{breakAll:h}),g)}Cr.displayName="Label";var CV=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,a=e.endAngle,o=e.r,l=e.radius,c=e.innerRadius,f=e.outerRadius,d=e.x,h=e.y,g=e.top,b=e.left,y=e.width,x=e.height,w=e.clockWise,_=e.labelViewBox;if(_)return _;if(Pe(y)&&Pe(x)){if(Pe(d)&&Pe(h))return{x:d,y:h,width:y,height:x};if(Pe(g)&&Pe(b))return{x:g,y:b,width:y,height:x}}return Pe(d)&&Pe(h)?{x:d,y:h,width:0,height:0}:Pe(n)&&Pe(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:f||l||o||0,clockWise:w}:e.viewBox?e.viewBox:{}},i1e=function(e,n){return e?e===!0?B.createElement(Cr,{key:"label-implicit",viewBox:n}):qn(e)?B.createElement(Cr,{key:"label-implicit",viewBox:n,value:e}):L.isValidElement(e)?e.type===Cr?L.cloneElement(e,{key:"label-implicit",viewBox:n}):B.createElement(Cr,{key:"label-implicit",content:e,viewBox:n}):dt(e)?B.createElement(Cr,{key:"label-implicit",content:e,viewBox:n}):od(e)?B.createElement(Cr,zp({viewBox:n},e,{key:"label-implicit"})):null:null},s1e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=CV(e),a=Zi(i,Cr).map(function(l,c){return L.cloneElement(l,{viewBox:n||s,key:"label-".concat(c)})});if(!r)return a;var o=i1e(e.label,n||s);return[o].concat(Bwe(a))};Cr.parseViewBox=CV;Cr.renderCallByParent=s1e;function a1e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var o1e=a1e;const l1e=Wt(o1e);function Vp(t){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vp(t)}var c1e=["valueAccessor"],u1e=["data","dataKey","clockWise","id","textBreakAll"];function f1e(t){return m1e(t)||p1e(t)||h1e(t)||d1e()}function d1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h1e(t,e){if(t){if(typeof t=="string")return hS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hS(t,e)}}function p1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function m1e(t){if(Array.isArray(t))return hS(t)}function hS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yv(){return Yv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yv.apply(this,arguments)}function TN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TN(Object(n),!0).forEach(function(r){g1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g1e(t,e,n){return e=y1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y1e(t){var e=v1e(t,"string");return Vp(e)=="symbol"?e:e+""}function v1e(t,e){if(Vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CN(t,e){if(t==null)return{};var n=b1e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function b1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var x1e=function(e){return Array.isArray(e.value)?l1e(e.value):e.value};function Ei(t){var e=t.valueAccessor,n=e===void 0?x1e:e,r=CN(t,c1e),i=r.data,s=r.dataKey,a=r.clockWise,o=r.id,l=r.textBreakAll,c=CN(r,u1e);return!i||!i.length?null:B.createElement(Zt,{className:"recharts-label-list"},i.map(function(f,d){var h=gt(s)?n(f,d):Vr(f&&f.payload,s),g=gt(o)?{}:{id:"".concat(o,"-").concat(d)};return B.createElement(Cr,Yv({},pt(f,!0),c,g,{parentViewBox:f.parentViewBox,value:h,textBreakAll:l,viewBox:Cr.parseViewBox(gt(a)?f:PN(PN({},f),{},{clockWise:a})),key:"label-".concat(d),index:d}))}))}Ei.displayName="LabelList";function w1e(t,e){return t?t===!0?B.createElement(Ei,{key:"labelList-implicit",data:e}):B.isValidElement(t)||dt(t)?B.createElement(Ei,{key:"labelList-implicit",data:e,content:t}):od(t)?B.createElement(Ei,Yv({data:e},t,{key:"labelList-implicit"})):null:null}function _1e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Zi(r,Ei).map(function(a,o){return L.cloneElement(a,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var s=w1e(t.label,e);return[s].concat(f1e(i))}Ei.renderCallByParent=_1e;function Fp(t){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fp(t)}function pS(){return pS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pS.apply(this,arguments)}function jN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ON(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jN(Object(n),!0).forEach(function(r){S1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S1e(t,e,n){return e=E1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E1e(t){var e=A1e(t,"string");return Fp(e)=="symbol"?e:e+""}function A1e(t,e){if(Fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var T1e=function(e,n){var r=Ps(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Vg=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,a=e.sign,o=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,f=l*(o?1:-1)+i,d=Math.asin(l/f)/Gv,h=c?s:s+a*d,g=dr(n,r,f,h),b=dr(n,r,i,h),y=c?s-a*d:s,x=dr(n,r,f*Math.cos(d*Gv),y);return{center:g,circleTangency:b,lineTangency:x,theta:d}},jV=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.startAngle,o=e.endAngle,l=T1e(a,o),c=a+l,f=dr(n,r,s,a),d=dr(n,r,s,c),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var g=dr(n,r,i,a),b=dr(n,r,i,c);h+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(g.x,",").concat(g.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},P1e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,f=e.endAngle,d=Ps(f-c),h=Vg({cx:n,cy:r,radius:s,angle:c,sign:d,cornerRadius:a,cornerIsExternal:l}),g=h.circleTangency,b=h.lineTangency,y=h.theta,x=Vg({cx:n,cy:r,radius:s,angle:f,sign:-d,cornerRadius:a,cornerIsExternal:l}),w=x.circleTangency,_=x.lineTangency,E=x.theta,O=l?Math.abs(c-f):Math.abs(c-f)-y-E;if(O<0)return o?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):jV({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:f});var A="M ".concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(O>180),",").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var P=Vg({cx:n,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),S=P.circleTangency,T=P.lineTangency,k=P.theta,z=Vg({cx:n,cy:r,radius:i,angle:f,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),N=z.circleTangency,$=z.lineTangency,M=z.theta,Y=l?Math.abs(c-f):Math.abs(c-f)-k-M;if(Y<0&&a===0)return"".concat(A,"L").concat(n,",").concat(r,"Z");A+="L".concat($.x,",").concat($.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(Y>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else A+="L".concat(n,",").concat(r,"Z");return A},C1e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},OV=function(e){var n=ON(ON({},C1e),e),r=n.cx,i=n.cy,s=n.innerRadius,a=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,f=n.startAngle,d=n.endAngle,h=n.className;if(a<s||f===d)return null;var g=Et("recharts-sector",h),b=a-s,y=_c(o,b,0,!0),x;return y>0&&Math.abs(f-d)<360?x=P1e({cx:r,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(y,b/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:d}):x=jV({cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:f,endAngle:d}),B.createElement("path",pS({},pt(n,!0),{className:g,d:x,role:"img"}))};function Bp(t){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(t)}function mS(){return mS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mS.apply(this,arguments)}function kN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kN(Object(n),!0).forEach(function(r){j1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j1e(t,e,n){return e=O1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O1e(t){var e=k1e(t,"string");return Bp(e)=="symbol"?e:e+""}function k1e(t,e){if(Bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NN={curveBasisClosed:jle,curveBasisOpen:Ole,curveBasis:Cle,curveBumpX:ple,curveBumpY:mle,curveLinearClosed:kle,curveLinear:jb,curveMonotoneX:Ile,curveMonotoneY:Nle,curveNatural:Dle,curveStep:Mle,curveStepAfter:$le,curveStepBefore:Rle},Fg=function(e){return e.x===+e.x&&e.y===+e.y},Qd=function(e){return e.x},Zd=function(e){return e.y},I1e=function(e,n){if(dt(e))return e;var r="curve".concat(Pb(e));return(r==="curveMonotone"||r==="curveBump")&&n?NN["".concat(r).concat(n==="vertical"?"Y":"X")]:NN[r]||jb},N1e=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,a=e.baseLine,o=e.layout,l=e.connectNulls,c=l===void 0?!1:l,f=I1e(r,o),d=c?s.filter(function(y){return Fg(y)}):s,h;if(Array.isArray(a)){var g=c?a.filter(function(y){return Fg(y)}):a,b=d.map(function(y,x){return IN(IN({},y),{},{base:g[x]})});return o==="vertical"?h=kg().y(Zd).x1(Qd).x0(function(y){return y.base.x}):h=kg().x(Qd).y1(Zd).y0(function(y){return y.base.y}),h.defined(Fg).curve(f),h(b)}return o==="vertical"&&Pe(a)?h=kg().y(Zd).x1(Qd).x0(a):Pe(a)?h=kg().x(Qd).y1(Zd).y0(a):h=k6().x(Qd).y(Zd),h.defined(Fg).curve(f),h(d)},Zu=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?N1e(e):i;return L.createElement("path",mS({},pt(e,!1),yv(e),{className:Et("recharts-curve",n),d:a,ref:s}))},kV={exports:{}},D1e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",M1e=D1e,R1e=M1e;function IV(){}function NV(){}NV.resetWarningCache=IV;var $1e=function(){function t(r,i,s,a,o,l){if(l!==R1e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:NV,resetWarningCache:IV};return n.PropTypes=n,n};kV.exports=$1e();var L1e=kV.exports;const Mt=Wt(L1e);var z1e=Object.getOwnPropertyNames,V1e=Object.getOwnPropertySymbols,F1e=Object.prototype.hasOwnProperty;function DN(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function Bg(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var s=i.cache,a=s.get(n),o=s.get(r);if(a&&o)return a===r&&o===n;s.set(n,r),s.set(r,n);var l=t(n,r,i);return s.delete(n),s.delete(r),l}}function B1e(t){return t!=null?t[Symbol.toStringTag]:void 0}function MN(t){return z1e(t).concat(V1e(t))}var U1e=Object.hasOwn||function(t,e){return F1e.call(t,e)};function Uc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var W1e="__v",K1e="__o",q1e="_owner",RN=Object.getOwnPropertyDescriptor,$N=Object.keys;function H1e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function G1e(t,e){return Uc(t.getTime(),e.getTime())}function Y1e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function X1e(t,e){return t===e}function LN(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.entries(),a,o,l=0;(a=s.next())&&!a.done;){for(var c=e.entries(),f=!1,d=0;(o=c.next())&&!o.done;){if(i[d]){d++;continue}var h=a.value,g=o.value;if(n.equals(h[0],g[0],l,d,t,e,n)&&n.equals(h[1],g[1],h[0],g[0],t,e,n)){f=i[d]=!0;break}d++}if(!f)return!1;l++}return!0}var Q1e=Uc;function Z1e(t,e,n){var r=$N(t),i=r.length;if($N(e).length!==i)return!1;for(;i-- >0;)if(!DV(t,e,n,r[i]))return!1;return!0}function Jd(t,e,n){var r=MN(t),i=r.length;if(MN(e).length!==i)return!1;for(var s,a,o;i-- >0;)if(s=r[i],!DV(t,e,n,s)||(a=RN(t,s),o=RN(e,s),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function J1e(t,e){return Uc(t.valueOf(),e.valueOf())}function e_e(t,e){return t.source===e.source&&t.flags===e.flags}function zN(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.values(),a,o;(a=s.next())&&!a.done;){for(var l=e.values(),c=!1,f=0;(o=l.next())&&!o.done;){if(!i[f]&&n.equals(a.value,o.value,a.value,o.value,t,e,n)){c=i[f]=!0;break}f++}if(!c)return!1}return!0}function t_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function n_e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function DV(t,e,n,r){return(r===q1e||r===K1e||r===W1e)&&(t.$$typeof||e.$$typeof)?!0:U1e(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var r_e="[object Arguments]",i_e="[object Boolean]",s_e="[object Date]",a_e="[object Error]",o_e="[object Map]",l_e="[object Number]",c_e="[object Object]",u_e="[object RegExp]",f_e="[object Set]",d_e="[object String]",h_e="[object URL]",p_e=Array.isArray,VN=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,FN=Object.assign,m_e=Object.prototype.toString.call.bind(Object.prototype.toString);function g_e(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,a=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,f=t.areSetsEqual,d=t.areTypedArraysEqual,h=t.areUrlsEqual,g=t.unknownTagComparators;return function(y,x,w){if(y===x)return!0;if(y==null||x==null)return!1;var _=typeof y;if(_!==typeof x)return!1;if(_!=="object")return _==="number"?a(y,x,w):_==="function"?i(y,x,w):!1;var E=y.constructor;if(E!==x.constructor)return!1;if(E===Object)return o(y,x,w);if(p_e(y))return e(y,x,w);if(VN!=null&&VN(y))return d(y,x,w);if(E===Date)return n(y,x,w);if(E===RegExp)return c(y,x,w);if(E===Map)return s(y,x,w);if(E===Set)return f(y,x,w);var O=m_e(y);if(O===s_e)return n(y,x,w);if(O===u_e)return c(y,x,w);if(O===o_e)return s(y,x,w);if(O===f_e)return f(y,x,w);if(O===c_e)return typeof y.then!="function"&&typeof x.then!="function"&&o(y,x,w);if(O===h_e)return h(y,x,w);if(O===a_e)return r(y,x,w);if(O===r_e)return o(y,x,w);if(O===i_e||O===l_e||O===d_e)return l(y,x,w);if(g){var A=g[O];if(!A){var P=B1e(y);P&&(A=g[P])}if(A)return A(y,x,w)}return!1}}function y_e(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Jd:H1e,areDatesEqual:G1e,areErrorsEqual:Y1e,areFunctionsEqual:X1e,areMapsEqual:r?DN(LN,Jd):LN,areNumbersEqual:Q1e,areObjectsEqual:r?Jd:Z1e,arePrimitiveWrappersEqual:J1e,areRegExpsEqual:e_e,areSetsEqual:r?DN(zN,Jd):zN,areTypedArraysEqual:r?Jd:t_e,areUrlsEqual:n_e,unknownTagComparators:void 0};if(n&&(i=FN({},i,n(i))),e){var s=Bg(i.areArraysEqual),a=Bg(i.areMapsEqual),o=Bg(i.areObjectsEqual),l=Bg(i.areSetsEqual);i=FN({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return i}function v_e(t){return function(e,n,r,i,s,a,o){return t(e,n,o)}}function b_e(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,s=t.strict;if(r)return function(l,c){var f=r(),d=f.cache,h=d===void 0?e?new WeakMap:void 0:d,g=f.meta;return n(l,c,{cache:h,equals:i,meta:g,strict:s})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,c){return n(l,c,a)}}var x_e=yl();yl({strict:!0});yl({circular:!0});yl({circular:!0,strict:!0});yl({createInternalComparator:function(){return Uc}});yl({strict:!0,createInternalComparator:function(){return Uc}});yl({circular:!0,createInternalComparator:function(){return Uc}});yl({circular:!0,createInternalComparator:function(){return Uc},strict:!0});function yl(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,s=t.strict,a=s===void 0?!1:s,o=y_e(t),l=g_e(o),c=r?r(l):v_e(l);return b_e({circular:n,comparator:l,createState:i,equals:c,strict:a})}function w_e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function BN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):w_e(i)};requestAnimationFrame(r)}function gS(t){"@babel/helpers - typeof";return gS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gS(t)}function __e(t){return T_e(t)||A_e(t)||E_e(t)||S_e()}function S_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E_e(t,e){if(t){if(typeof t=="string")return UN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UN(t,e)}}function UN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function T_e(t){if(Array.isArray(t))return t}function P_e(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var a=s,o=__e(a),l=o[0],c=o.slice(1);if(typeof l=="number"){BN(i.bind(null,c),l);return}i(l),BN(i.bind(null,c));return}gS(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}function WN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WN(Object(n),!0).forEach(function(r){MV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MV(t,e,n){return e=C_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C_e(t){var e=j_e(t,"string");return Up(e)==="symbol"?e:String(e)}function j_e(t,e){if(Up(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Up(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O_e=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},k_e=function(e){return e},I_e=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},zh=function(e,n){return Object.keys(n).reduce(function(r,i){return KN(KN({},r),{},MV({},i,e(i,n[i])))},{})},qN=function(e,n,r){return e.map(function(i){return"".concat(I_e(i)," ").concat(n,"ms ").concat(r)}).join(",")};function N_e(t,e){return R_e(t)||M_e(t,e)||RV(t,e)||D_e()}function D_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function R_e(t){if(Array.isArray(t))return t}function $_e(t){return V_e(t)||z_e(t)||RV(t)||L_e()}function L_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RV(t,e){if(t){if(typeof t=="string")return yS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yS(t,e)}}function z_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function V_e(t){if(Array.isArray(t))return yS(t)}function yS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Xv=1e-4,$V=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},LV=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},HN=function(e,n){return function(r){var i=$V(e,n);return LV(i,r)}},F_e=function(e,n){return function(r){var i=$V(e,n),s=[].concat($_e(i.map(function(a,o){return a*o}).slice(1)),[0]);return LV(s,r)}},GN=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],a=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,a=1,o=1;break;case"ease":i=.25,s=.1,a=.25,o=1;break;case"ease-in":i=.42,s=0,a=1,o=1;break;case"ease-out":i=.42,s=0,a=.58,o=1;break;case"ease-in-out":i=0,s=0,a=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=N_e(c,4);i=f[0],s=f[1],a=f[2],o=f[3]}}}var d=HN(i,a),h=HN(s,o),g=F_e(i,a),b=function(w){return w>1?1:w<0?0:w},y=function(w){for(var _=w>1?1:w,E=_,O=0;O<8;++O){var A=d(E)-_,P=g(E);if(Math.abs(A-_)<Xv||P<Xv)return h(E);E=b(E-A/P)}return h(E)};return y.isStepper=!1,y},B_e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,a=e.dt,o=a===void 0?17:a,l=function(f,d,h){var g=-(f-d)*r,b=h*s,y=h+(g-b)*o/1e3,x=h*o/1e3+f;return Math.abs(x-d)<Xv&&Math.abs(y)<Xv?[d,0]:[x,y]};return l.isStepper=!0,l.dt=o,l},U_e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return GN(i);case"spring":return B_e();default:if(i.split("(")[0]==="cubic-bezier")return GN(i)}return typeof i=="function"?i:null};function Wp(t){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(t)}function YN(t){return q_e(t)||K_e(t)||zV(t)||W_e()}function W_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function q_e(t){if(Array.isArray(t))return bS(t)}function XN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XN(Object(n),!0).forEach(function(r){vS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vS(t,e,n){return e=H_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H_e(t){var e=G_e(t,"string");return Wp(e)==="symbol"?e:String(e)}function G_e(t,e){if(Wp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y_e(t,e){return Z_e(t)||Q_e(t,e)||zV(t,e)||X_e()}function X_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zV(t,e){if(t){if(typeof t=="string")return bS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bS(t,e)}}function bS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Z_e(t){if(Array.isArray(t))return t}var Qv=function(e,n,r){return e+(n-e)*r},xS=function(e){var n=e.from,r=e.to;return n!==r},J_e=function t(e,n,r){var i=zh(function(s,a){if(xS(a)){var o=e(a.from,a.to,a.velocity),l=Y_e(o,2),c=l[0],f=l[1];return sr(sr({},a),{},{from:c,velocity:f})}return a},n);return r<1?zh(function(s,a){return xS(a)?sr(sr({},a),{},{velocity:Qv(a.velocity,i[s].velocity,r),from:Qv(a.from,i[s].from,r)}):a},n):t(e,i,r-1)};const eSe=function(t,e,n,r,i){var s=O_e(t,e),a=s.reduce(function(x,w){return sr(sr({},x),{},vS({},w,[t[w],e[w]]))},{}),o=s.reduce(function(x,w){return sr(sr({},x),{},vS({},w,{from:t[w],velocity:0,to:e[w]}))},{}),l=-1,c,f,d=function(){return null},h=function(){return zh(function(w,_){return _.from},o)},g=function(){return!Object.values(o).filter(xS).length},b=function(w){c||(c=w);var _=w-c,E=_/n.dt;o=J_e(n,o,E),i(sr(sr(sr({},t),e),h())),c=w,g()||(l=requestAnimationFrame(d))},y=function(w){f||(f=w);var _=(w-f)/r,E=zh(function(A,P){return Qv.apply(void 0,YN(P).concat([n(_)]))},a);if(i(sr(sr(sr({},t),e),E)),_<1)l=requestAnimationFrame(d);else{var O=zh(function(A,P){return Qv.apply(void 0,YN(P).concat([n(1)]))},a);i(sr(sr(sr({},t),e),O))}};return d=n.isStepper?b:y,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}var tSe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function nSe(t,e){if(t==null)return{};var n=rSe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rSe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function kw(t){return oSe(t)||aSe(t)||sSe(t)||iSe()}function iSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sSe(t,e){if(t){if(typeof t=="string")return wS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wS(t,e)}}function aSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oSe(t){if(Array.isArray(t))return wS(t)}function wS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function QN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QN(Object(n),!0).forEach(function(r){mh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mh(t,e,n){return e=VV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VV(r.key),r)}}function uSe(t,e,n){return e&&cSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VV(t){var e=fSe(t,"string");return kf(e)==="symbol"?e:String(e)}function fSe(t,e){if(kf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_S(t,e)}function _S(t,e){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_S(t,e)}function hSe(t){var e=pSe();return function(){var r=Zv(t),i;if(e){var s=Zv(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return SS(this,i)}}function SS(t,e){if(e&&(kf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ES(t)}function ES(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pSe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zv(t){return Zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zv(t)}var ua=function(t){dSe(n,t);var e=hSe(n);function n(r,i){var s;lSe(this,n),s=e.call(this,r,i);var a=s.props,o=a.isActive,l=a.attributeName,c=a.from,f=a.to,d=a.steps,h=a.children,g=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(ES(s)),s.changeStyle=s.changeStyle.bind(ES(s)),!o||g<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:f}),SS(s);if(d&&d.length)s.state={style:d[0].style};else if(c){if(typeof h=="function")return s.state={style:c},SS(s);s.state={style:l?mh({},l,c):c}}else s.state={style:{}};return s}return uSe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,o=s.canBegin,l=s.attributeName,c=s.shouldReAnimate,f=s.to,d=s.from,h=this.state.style;if(o){if(!a){var g={style:l?mh({},l,f):f};this.state&&h&&(l&&h[l]!==f||!l&&h!==f)&&this.setState(g);return}if(!(x_e(i.to,f)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=b||c?d:i.to;if(this.state&&h){var x={style:l?mh({},l,y):y};(l&&h[l]!==y||!l&&h!==y)&&this.setState(x)}this.runAnimation(gs(gs({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,o=i.to,l=i.duration,c=i.easing,f=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,g=eSe(a,o,U_e(c),l,this.changeStyle),b=function(){s.stopJSAnimation=g()};this.manager.start([h,f,b,l,d])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,o=i.begin,l=i.onAnimationStart,c=a[0],f=c.style,d=c.duration,h=d===void 0?0:d,g=function(y,x,w){if(w===0)return y;var _=x.duration,E=x.easing,O=E===void 0?"ease":E,A=x.style,P=x.properties,S=x.onAnimationEnd,T=w>0?a[w-1]:x,k=P||Object.keys(A);if(typeof O=="function"||O==="spring")return[].concat(kw(y),[s.runJSAnimation.bind(s,{from:T.style,to:A,duration:_,easing:O}),_]);var z=qN(k,_,O),N=gs(gs(gs({},T.style),A),{},{transition:z});return[].concat(kw(y),[N,_,S]).filter(k_e)};return this.manager.start([l].concat(kw(a.reduce(g,[f,Math.max(h,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=P_e());var s=i.begin,a=i.duration,o=i.attributeName,l=i.to,c=i.easing,f=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,g=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof c=="function"||typeof g=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var y=o?mh({},o,l):l,x=qN(Object.keys(y),a,c);b.start([f,s,gs(gs({},y),{},{transition:x}),a,d])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=nSe(i,tSe),c=L.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!o||c===0||a<=0)return s;var d=function(g){var b=g.props,y=b.style,x=y===void 0?{}:y,w=b.className,_=L.cloneElement(g,gs(gs({},l),{},{style:gs(gs({},x),f),className:w}));return _};return c===1?d(L.Children.only(s)):B.createElement("div",null,L.Children.map(s,function(h){return d(h)}))}}]),n}(L.PureComponent);ua.displayName="Animate";ua.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ua.propTypes={from:Mt.oneOfType([Mt.object,Mt.string]),to:Mt.oneOfType([Mt.object,Mt.string]),attributeName:Mt.string,duration:Mt.number,begin:Mt.number,easing:Mt.oneOfType([Mt.string,Mt.func]),steps:Mt.arrayOf(Mt.shape({duration:Mt.number.isRequired,style:Mt.object.isRequired,easing:Mt.oneOfType([Mt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Mt.func]),properties:Mt.arrayOf("string"),onAnimationEnd:Mt.func})),children:Mt.oneOfType([Mt.node,Mt.func]),isActive:Mt.bool,canBegin:Mt.bool,onAnimationEnd:Mt.func,shouldReAnimate:Mt.bool,onAnimationStart:Mt.func,onAnimationReStart:Mt.func};function Kp(t){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(t)}function Jv(){return Jv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jv.apply(this,arguments)}function mSe(t,e){return bSe(t)||vSe(t,e)||ySe(t,e)||gSe()}function gSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ySe(t,e){if(t){if(typeof t=="string")return ZN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZN(t,e)}}function ZN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function bSe(t){if(Array.isArray(t))return t}function JN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JN(Object(n),!0).forEach(function(r){xSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xSe(t,e,n){return e=wSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wSe(t){var e=_Se(t,"string");return Kp(e)=="symbol"?e:e+""}function _Se(t,e){if(Kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tD=function(e,n,r,i,s){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,f;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],h=0,g=4;h<g;h++)d[h]=s[h]>a?a:s[h];f="M".concat(e,",").concat(n+o*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(n)),f+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+o*d[1])),f+="L ".concat(e+r,",").concat(n+i-o*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),f+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-o*d[3])),f+="Z"}else if(a>0&&s===+s&&s>0){var b=Math.min(a,s);f="M ".concat(e,",").concat(n+o*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e+l*b,",").concat(n,`
            L `).concat(e+r-l*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e+r,",").concat(n+o*b,`
            L `).concat(e+r,",").concat(n+i-o*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e+r-l*b,",").concat(n+i,`
            L `).concat(e+l*b,",").concat(n+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e,",").concat(n+i-o*b," Z")}else f="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return f},SSe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,a=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(s,s+o),f=Math.max(s,s+o),d=Math.min(a,a+l),h=Math.max(a,a+l);return r>=c&&r<=f&&i>=d&&i<=h}return!1},ESe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bT=function(e){var n=eD(eD({},ESe),e),r=L.useRef(),i=L.useState(-1),s=mSe(i,2),a=s[0],o=s[1];L.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var O=r.current.getTotalLength();O&&o(O)}catch{}},[]);var l=n.x,c=n.y,f=n.width,d=n.height,h=n.radius,g=n.className,b=n.animationEasing,y=n.animationDuration,x=n.animationBegin,w=n.isAnimationActive,_=n.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||d!==+d||f===0||d===0)return null;var E=Et("recharts-rectangle",g);return _?B.createElement(ua,{canBegin:a>0,from:{width:f,height:d,x:l,y:c},to:{width:f,height:d,x:l,y:c},duration:y,animationEasing:b,isActive:_},function(O){var A=O.width,P=O.height,S=O.x,T=O.y;return B.createElement(ua,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:y,isActive:w,easing:b},B.createElement("path",Jv({},pt(n,!0),{className:E,d:tD(S,T,A,P,h),ref:r})))}):B.createElement("path",Jv({},pt(n,!0),{className:E,d:tD(l,c,f,d,h)}))};function AS(){return AS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AS.apply(this,arguments)}var Ub=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,a=Et("recharts-dot",s);return n===+n&&r===+r&&i===+i?L.createElement("circle",AS({},pt(e,!1),yv(e),{className:a,cx:n,cy:r,r:i})):null};function qp(t){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qp(t)}var ASe=["x","y","top","left","width","height","className"];function TS(){return TS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TS.apply(this,arguments)}function nD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TSe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nD(Object(n),!0).forEach(function(r){PSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PSe(t,e,n){return e=CSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CSe(t){var e=jSe(t,"string");return qp(e)=="symbol"?e:e+""}function jSe(t,e){if(qp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OSe(t,e){if(t==null)return{};var n=kSe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var ISe=function(e,n,r,i,s,a){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},NSe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.top,o=a===void 0?0:a,l=e.left,c=l===void 0?0:l,f=e.width,d=f===void 0?0:f,h=e.height,g=h===void 0?0:h,b=e.className,y=OSe(e,ASe),x=TSe({x:r,y:s,top:o,left:c,width:d,height:g},y);return!Pe(r)||!Pe(s)||!Pe(d)||!Pe(g)||!Pe(o)||!Pe(c)?null:B.createElement("path",TS({},pt(x,!0),{className:Et("recharts-cross",b),d:ISe(r,s,d,g,o,c)}))},DSe=tz,MSe=DSe(Object.getPrototypeOf,Object),RSe=MSe,$Se=so,LSe=RSe,zSe=ao,VSe="[object Object]",FSe=Function.prototype,BSe=Object.prototype,FV=FSe.toString,USe=BSe.hasOwnProperty,WSe=FV.call(Object);function KSe(t){if(!zSe(t)||$Se(t)!=VSe)return!1;var e=LSe(t);if(e===null)return!0;var n=USe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&FV.call(n)==WSe}var qSe=KSe;const HSe=Wt(qSe);var GSe=so,YSe=ao,XSe="[object Boolean]";function QSe(t){return t===!0||t===!1||YSe(t)&&GSe(t)==XSe}var ZSe=QSe;const JSe=Wt(ZSe);function Hp(t){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hp(t)}function e0(){return e0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e0.apply(this,arguments)}function e2e(t,e){return i2e(t)||r2e(t,e)||n2e(t,e)||t2e()}function t2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n2e(t,e){if(t){if(typeof t=="string")return rD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rD(t,e)}}function rD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function i2e(t){if(Array.isArray(t))return t}function iD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iD(Object(n),!0).forEach(function(r){s2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s2e(t,e,n){return e=a2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a2e(t){var e=o2e(t,"string");return Hp(e)=="symbol"?e:e+""}function o2e(t,e){if(Hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aD=function(e,n,r,i,s){var a=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-a/2,",").concat(n+s),o+="L ".concat(e+r-a/2-i,",").concat(n+s),o+="L ".concat(e,",").concat(n," Z"),o},l2e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},c2e=function(e){var n=sD(sD({},l2e),e),r=L.useRef(),i=L.useState(-1),s=e2e(i,2),a=s[0],o=s[1];L.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var E=r.current.getTotalLength();E&&o(E)}catch{}},[]);var l=n.x,c=n.y,f=n.upperWidth,d=n.lowerWidth,h=n.height,g=n.className,b=n.animationEasing,y=n.animationDuration,x=n.animationBegin,w=n.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var _=Et("recharts-trapezoid",g);return w?B.createElement(ua,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:f,lowerWidth:d,height:h,x:l,y:c},duration:y,animationEasing:b,isActive:w},function(E){var O=E.upperWidth,A=E.lowerWidth,P=E.height,S=E.x,T=E.y;return B.createElement(ua,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:y,easing:b},B.createElement("path",e0({},pt(n,!0),{className:_,d:aD(S,T,O,A,P),ref:r})))}):B.createElement("g",null,B.createElement("path",e0({},pt(n,!0),{className:_,d:aD(l,c,f,d,h)})))},u2e=["option","shapeType","propTransformer","activeClassName","isActive"];function Gp(t){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(t)}function f2e(t,e){if(t==null)return{};var n=d2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function d2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){h2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h2e(t,e,n){return e=p2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p2e(t){var e=m2e(t,"string");return Gp(e)=="symbol"?e:e+""}function m2e(t,e){if(Gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function g2e(t,e){return t0(t0({},e),t)}function y2e(t,e){return t==="symbols"}function lD(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return B.createElement(bT,n);case"trapezoid":return B.createElement(c2e,n);case"sector":return B.createElement(OV,n);case"symbols":if(y2e(e))return B.createElement(LA,n);break;default:return null}}function v2e(t){return L.isValidElement(t)?t.props:t}function b2e(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?g2e:r,s=t.activeClassName,a=s===void 0?"recharts-active-shape":s,o=t.isActive,l=f2e(t,u2e),c;if(L.isValidElement(e))c=L.cloneElement(e,t0(t0({},l),v2e(e)));else if(dt(e))c=e(l);else if(HSe(e)&&!JSe(e)){var f=i(e,l);c=B.createElement(lD,{shapeType:n,elementProps:f})}else{var d=l;c=B.createElement(lD,{shapeType:n,elementProps:d})}return o?B.createElement(Zt,{className:a},c):c}function Wb(t,e){return e!=null&&"trapezoids"in t.props}function Kb(t,e){return e!=null&&"sectors"in t.props}function Yp(t,e){return e!=null&&"points"in t.props}function x2e(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function w2e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function _2e(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function S2e(t,e){var n;return Wb(t,e)?n=x2e:Kb(t,e)?n=w2e:Yp(t,e)&&(n=_2e),n}function E2e(t,e){var n;return Wb(t,e)?n="trapezoids":Kb(t,e)?n="sectors":Yp(t,e)&&(n="points"),n}function A2e(t,e){if(Wb(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Kb(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Yp(t,e)?e.payload:{}}function T2e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=E2e(n,e),s=A2e(n,e),a=r.filter(function(l,c){var f=jf(s,l),d=n.props[i].filter(function(b){var y=S2e(n,e);return y(b,e)}),h=n.props[i].indexOf(d[d.length-1]),g=c===h;return f&&g}),o=r.indexOf(a[a.length-1]);return o}var P2e=Math.ceil,C2e=Math.max;function j2e(t,e,n,r){for(var i=-1,s=C2e(P2e((e-t)/(n||1)),0),a=Array(s);s--;)a[r?s:++i]=t,t+=n;return a}var O2e=j2e,k2e=xz,cD=1/0,I2e=17976931348623157e292;function N2e(t){if(!t)return t===0?t:0;if(t=k2e(t),t===cD||t===-cD){var e=t<0?-1:1;return e*I2e}return t===t?t:0}var BV=N2e,D2e=O2e,M2e=Nb,Iw=BV;function R2e(t){return function(e,n,r){return r&&typeof r!="number"&&M2e(e,n,r)&&(n=r=void 0),e=Iw(e),n===void 0?(n=e,e=0):n=Iw(n),r=r===void 0?e<n?1:-1:Iw(r),D2e(e,n,r,t)}}var $2e=R2e,L2e=$2e,z2e=L2e(),V2e=z2e;const n0=Wt(V2e);function Xp(t){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(t)}function uD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uD(Object(n),!0).forEach(function(r){UV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UV(t,e,n){return e=F2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F2e(t){var e=B2e(t,"string");return Xp(e)=="symbol"?e:e+""}function B2e(t,e){if(Xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U2e=["Webkit","Moz","O","ms"],W2e=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=U2e.reduce(function(s,a){return fD(fD({},s),{},UV({},a+r,n))},{});return i[e]=n,i};function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function r0(){return r0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r0.apply(this,arguments)}function dD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dD(Object(n),!0).forEach(function(r){mi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KV(r.key),r)}}function q2e(t,e,n){return e&&hD(t.prototype,e),n&&hD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function H2e(t,e,n){return e=i0(e),G2e(t,WV()?Reflect.construct(e,n||[],i0(t).constructor):e.apply(t,n))}function G2e(t,e){if(e&&(If(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y2e(t)}function Y2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WV=function(){return!!t})()}function i0(t){return i0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},i0(t)}function X2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PS(t,e)}function PS(t,e){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PS(t,e)}function mi(t,e,n){return e=KV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KV(t){var e=Q2e(t,"string");return If(e)=="symbol"?e:e+""}function Q2e(t,e){if(If(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(If(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Z2e=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,a=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=$h().domain(n0(0,l)).range([s,s+a-o]),f=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:f}},pD=function(e){return e.changedTouches&&!!e.changedTouches.length},Nf=function(t){function e(n){var r;return K2e(this,e),r=H2e(this,e,[n]),mi(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),mi(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),mi(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,a=i.onDragEnd,o=i.startIndex;a==null||a({endIndex:s,startIndex:o})}),r.detachDragEndListener()}),mi(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),mi(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),mi(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),mi(r,"handleSlideDragStart",function(i){var s=pD(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return X2e(e,t),q2e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,a=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,f=c.length-1,d=Math.min(i,s),h=Math.max(i,s),g=e.getIndexInRange(a,d),b=e.getIndexInRange(a,h);return{startIndex:g-g%l,endIndex:b===f?f:b-b%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,a=i.tickFormatter,o=i.dataKey,l=Vr(s[r],o,r);return dt(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,a=i.startX,o=i.endX,l=this.props,c=l.x,f=l.width,d=l.travellerWidth,h=l.startIndex,g=l.endIndex,b=l.onChange,y=r.pageX-s;y>0?y=Math.min(y,c+f-d-o,c+f-d-a):y<0&&(y=Math.max(y,c-a,c-o));var x=this.getIndex({startX:a+y,endX:o+y});(x.startIndex!==h||x.endIndex!==g)&&b&&b(x),this.setState({startX:a+y,endX:o+y,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=pD(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,o=i.endX,l=i.startX,c=this.state[a],f=this.props,d=f.x,h=f.width,g=f.travellerWidth,b=f.onChange,y=f.gap,x=f.data,w={startX:this.state.startX,endX:this.state.endX},_=r.pageX-s;_>0?_=Math.min(_,d+h-g-c):_<0&&(_=Math.max(_,d-c)),w[a]=c+_;var E=this.getIndex(w),O=E.startIndex,A=E.endIndex,P=function(){var T=x.length-1;return a==="startX"&&(o>l?O%y===0:A%y===0)||o<l&&A===T||a==="endX"&&(o>l?A%y===0:O%y===0)||o>l&&A===T};this.setState(mi(mi({},a,c+_),"brushMoveStartX",r.pageX),function(){b&&P()&&b(E)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,a=this.state,o=a.scaleValues,l=a.startX,c=a.endX,f=this.state[i],d=o.indexOf(f);if(d!==-1){var h=d+r;if(!(h===-1||h>=o.length)){var g=o[h];i==="startX"&&g>=c||i==="endX"&&g<=l||this.setState(mi({},i,g),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.fill,c=r.stroke;return B.createElement("rect",{stroke:c,fill:l,x:i,y:s,width:a,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.data,c=r.children,f=r.padding,d=L.Children.only(c);return d?B.cloneElement(d,{x:i,y:s,width:a,height:o,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,a,o=this,l=this.props,c=l.y,f=l.travellerWidth,d=l.height,h=l.traveller,g=l.ariaLabel,b=l.data,y=l.startIndex,x=l.endIndex,w=Math.max(r,this.props.x),_=Nw(Nw({},pt(this.props,!1)),{},{x:w,y:c,width:f,height:d}),E=g||"Min value: ".concat((s=b[y])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=b[x])===null||a===void 0?void 0:a.name);return B.createElement(Zt,{tabIndex:0,role:"slider","aria-label":E,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),o.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,_))}},{key:"renderSlide",value:function(r,i){var s=this.props,a=s.y,o=s.height,l=s.stroke,c=s.travellerWidth,f=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return B.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:a,width:d,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,a=r.y,o=r.height,l=r.travellerWidth,c=r.stroke,f=this.state,d=f.startX,h=f.endX,g=5,b={pointerEvents:"none",fill:c};return B.createElement(Zt,{className:"recharts-brush-texts"},B.createElement(Iv,r0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-g,y:a+o/2},b),this.getTextOfTick(i)),B.createElement(Iv,r0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+g,y:a+o/2},b),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,a=r.children,o=r.x,l=r.y,c=r.width,f=r.height,d=r.alwaysShowText,h=this.state,g=h.startX,b=h.endX,y=h.isTextActive,x=h.isSlideMoving,w=h.isTravellerMoving,_=h.isTravellerFocused;if(!i||!i.length||!Pe(o)||!Pe(l)||!Pe(c)||!Pe(f)||c<=0||f<=0)return null;var E=Et("recharts-brush",s),O=B.Children.count(a)===1,A=W2e("userSelect","none");return B.createElement(Zt,{className:E,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),O&&this.renderPanorama(),this.renderSlide(g,b),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(b,"endX"),(y||x||w||_||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,a=r.width,o=r.height,l=r.stroke,c=Math.floor(s+o/2)-1;return B.createElement(B.Fragment,null,B.createElement("rect",{x:i,y:s,width:a,height:o,fill:l,stroke:"none"}),B.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),B.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return B.isValidElement(r)?s=B.cloneElement(r,i):dt(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,a=r.width,o=r.x,l=r.travellerWidth,c=r.updateId,f=r.startIndex,d=r.endIndex;if(s!==i.prevData||c!==i.prevUpdateId)return Nw({prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a},s&&s.length?Z2e({data:s,width:a,x:o,travellerWidth:l,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+a-l]);var h=i.scale.domain().map(function(g){return i.scale(g)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,a=0,o=s-1;o-a>1;){var l=Math.floor((a+o)/2);r[l]>i?o=l:a=l}return i>=r[o]?o:a}}])}(L.PureComponent);mi(Nf,"displayName","Brush");mi(Nf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var J2e=KA;function eEe(t,e){var n;return J2e(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}var tEe=eEe,nEe=H6,rEe=pl,iEe=tEe,sEe=ci,aEe=Nb;function oEe(t,e,n){var r=sEe(t)?nEe:iEe;return n&&aEe(t,e,n)&&(e=void 0),r(t,rEe(e))}var lEe=oEe;const cEe=Wt(lEe);var oa=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},mD=mz;function uEe(t,e,n){e=="__proto__"&&mD?mD(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var fEe=uEe,dEe=fEe,hEe=hz,pEe=pl;function mEe(t,e){var n={};return e=pEe(e),hEe(t,function(r,i,s){dEe(n,i,e(r,i,s))}),n}var gEe=mEe;const yEe=Wt(gEe);function vEe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var bEe=vEe,xEe=KA;function wEe(t,e){var n=!0;return xEe(t,function(r,i,s){return n=!!e(r,i,s),n}),n}var _Ee=wEe,SEe=bEe,EEe=_Ee,AEe=pl,TEe=ci,PEe=Nb;function CEe(t,e,n){var r=TEe(t)?SEe:EEe;return n&&PEe(t,e,n)&&(e=void 0),r(t,AEe(e))}var jEe=CEe;const qV=Wt(jEe);var OEe=["x","y"];function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(t)}function CS(){return CS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CS.apply(this,arguments)}function gD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(n),!0).forEach(function(r){kEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kEe(t,e,n){return e=IEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IEe(t){var e=NEe(t,"string");return Qp(e)=="symbol"?e:e+""}function NEe(t,e){if(Qp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DEe(t,e){if(t==null)return{};var n=MEe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function MEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function REe(t,e){var n=t.x,r=t.y,i=DEe(t,OEe),s="".concat(n),a=parseInt(s,10),o="".concat(r),l=parseInt(o,10),c="".concat(e.height||i.height),f=parseInt(c,10),d="".concat(e.width||i.width),h=parseInt(d,10);return eh(eh(eh(eh(eh({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:f,width:h,name:e.name,radius:e.radius})}function yD(t){return B.createElement(b2e,CS({shapeType:"rectangle",propTransformer:REe,activeClassName:"recharts-active-bar"},t))}var $Ee=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=Pe(r)||eoe(r);return s?e(r,i):(s||Ec(),n)}},LEe=["value","background"],HV;function Df(t){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Df(t)}function zEe(t,e){if(t==null)return{};var n=VEe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function s0(){return s0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s0.apply(this,arguments)}function vD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vD(Object(n),!0).forEach(function(r){No(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YV(r.key),r)}}function BEe(t,e,n){return e&&bD(t.prototype,e),n&&bD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function UEe(t,e,n){return e=a0(e),WEe(t,GV()?Reflect.construct(e,n||[],a0(t).constructor):e.apply(t,n))}function WEe(t,e){if(e&&(Df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KEe(t)}function KEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GV=function(){return!!t})()}function a0(t){return a0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a0(t)}function qEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jS(t,e)}function jS(t,e){return jS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jS(t,e)}function No(t,e,n){return e=YV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YV(t){var e=HEe(t,"string");return Df(e)=="symbol"?e:e+""}function HEe(t,e){if(Df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var er=function(t){function e(){var n;FEe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=UEe(this,e,[].concat(i)),No(n,"state",{isAnimationFinished:!1}),No(n,"id",dd("recharts-bar-")),No(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),No(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return qEe(e,t),BEe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,a=s.shape,o=s.dataKey,l=s.activeIndex,c=s.activeBar,f=pt(this.props,!1);return r&&r.map(function(d,h){var g=h===l,b=g?c:a,y=Nn(Nn(Nn({},f),d),{},{isActive:g,option:b,index:h,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return B.createElement(Zt,s0({className:"recharts-bar-rectangle"},vv(i.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),B.createElement(yD,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,a=i.layout,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,f=i.animationEasing,d=i.animationId,h=this.state.prevData;return B.createElement(ua,{begin:l,duration:c,isActive:o,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var b=g.t,y=s.map(function(x,w){var _=h&&h[w];if(_){var E=cr(_.x,x.x),O=cr(_.y,x.y),A=cr(_.width,x.width),P=cr(_.height,x.height);return Nn(Nn({},x),{},{x:E(b),y:O(b),width:A(b),height:P(b)})}if(a==="horizontal"){var S=cr(0,x.height),T=S(b);return Nn(Nn({},x),{},{y:x.y+x.height-T,height:T})}var k=cr(0,x.width),z=k(b);return Nn(Nn({},x),{},{width:z})});return B.createElement(Zt,null,r.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!jf(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,a=i.dataKey,o=i.activeIndex,l=pt(this.props.background,!1);return s.map(function(c,f){c.value;var d=c.background,h=zEe(c,LEe);if(!d)return null;var g=Nn(Nn(Nn(Nn(Nn({},h),{},{fill:"#eee"},d),l),vv(r.props,c,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:f,className:"recharts-bar-background-rectangle"});return B.createElement(yD,s0({key:"background-bar-".concat(f),option:r.props.background,isActive:f===o},g))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,o=s.xAxis,l=s.yAxis,c=s.layout,f=s.children,d=Zi(f,$m);if(!d)return null;var h=c==="vertical"?a[0].height/2:a[0].width/2,g=function(x,w){var _=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:_,errorVal:Vr(x,w)}},b={clipPath:r?"url(#clipPath-".concat(i,")"):null};return B.createElement(Zt,b,d.map(function(y){return B.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:a,xAxis:o,yAxis:l,layout:c,offset:h,dataPointFormatter:g})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,a=r.className,o=r.xAxis,l=r.yAxis,c=r.left,f=r.top,d=r.width,h=r.height,g=r.isAnimationActive,b=r.background,y=r.id;if(i||!s||!s.length)return null;var x=this.state.isAnimationFinished,w=Et("recharts-bar",a),_=o&&o.allowDataOverflow,E=l&&l.allowDataOverflow,O=_||E,A=gt(y)?this.id:y;return B.createElement(Zt,{className:w},_||E?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(A)},B.createElement("rect",{x:_?c:c-d/2,y:E?f:f-h/2,width:_?d:d*2,height:E?h:h*2}))):null,B.createElement(Zt,{className:"recharts-bar-rectangles",clipPath:O?"url(#clipPath-".concat(A,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(O,A),(!g||x)&&Ei.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(L.PureComponent);HV=er;No(er,"displayName","Bar");No(er,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!zc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});No(er,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,a=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,f=t.dataStartIndex,d=t.displayedData,h=t.offset,g=_we(r,n);if(!g)return null;var b=e.layout,y=n.type.defaultProps,x=y!==void 0?Nn(Nn({},y),n.props):n.props,w=x.dataKey,_=x.children,E=x.minPointSize,O=b==="horizontal"?a:s,A=c?O.scale.domain():null,P=Owe({numericAxis:O}),S=Zi(_,Vc),T=d.map(function(k,z){var N,$,M,Y,q,ie;c?N=Swe(c[f+z],A):(N=Vr(k,w),Array.isArray(N)||(N=[P,N]));var le=$Ee(E,HV.defaultProps.minPointSize)(N[1],z);if(b==="horizontal"){var Q,G=[a.scale(N[0]),a.scale(N[1])],he=G[0],ce=G[1];$=vN({axis:s,ticks:o,bandSize:i,offset:g.offset,entry:k,index:z}),M=(Q=ce??he)!==null&&Q!==void 0?Q:void 0,Y=g.size;var we=he-ce;if(q=Number.isNaN(we)?0:we,ie={x:$,y:a.y,width:Y,height:a.height},Math.abs(le)>0&&Math.abs(q)<Math.abs(le)){var ke=Ps(q||le)*(Math.abs(le)-Math.abs(q));M-=ke,q+=ke}}else{var Ue=[s.scale(N[0]),s.scale(N[1])],ct=Ue[0],ot=Ue[1];if($=ct,M=vN({axis:a,ticks:l,bandSize:i,offset:g.offset,entry:k,index:z}),Y=ot-ct,q=g.size,ie={x:s.x,y:M,width:s.width,height:q},Math.abs(le)>0&&Math.abs(Y)<Math.abs(le)){var Ce=Ps(Y||le)*(Math.abs(le)-Math.abs(Y));Y+=Ce}}return Nn(Nn(Nn({},k),{},{x:$,y:M,width:Y,height:q,value:c?N:N[1],payload:k,background:ie},S&&S[z]&&S[z].props),{},{tooltipPayload:[PV(n,k)],tooltipPosition:{x:$+Y/2,y:M+q/2}})});return Nn({data:T,layout:b},h)});function Zp(t){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(t)}function GEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,XV(r.key),r)}}function YEe(t,e,n){return e&&xD(t.prototype,e),n&&xD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ws(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wD(Object(n),!0).forEach(function(r){qb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qb(t,e,n){return e=XV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XV(t){var e=XEe(t,"string");return Zp(e)=="symbol"?e:e+""}function XEe(t,e){if(Zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xT=function(e,n,r,i,s){var a=e.width,o=e.height,l=e.layout,c=e.children,f=Object.keys(n),d={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},h=!!vi(c,er);return f.reduce(function(g,b){var y=n[b],x=y.orientation,w=y.domain,_=y.padding,E=_===void 0?{}:_,O=y.mirror,A=y.reversed,P="".concat(x).concat(O?"Mirror":""),S,T,k,z,N;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var $=w[1]-w[0],M=1/0,Y=y.categoricalDomain.sort(roe);if(Y.forEach(function(Ue,ct){ct>0&&(M=Math.min((Ue||0)-(Y[ct-1]||0),M))}),Number.isFinite(M)){var q=M/$,ie=y.layout==="vertical"?r.height:r.width;if(y.padding==="gap"&&(S=q*ie/2),y.padding==="no-gap"){var le=_c(e.barCategoryGap,q*ie),Q=q*ie/2;S=Q-le-(Q-le)/ie*le}}}i==="xAxis"?T=[r.left+(E.left||0)+(S||0),r.left+r.width-(E.right||0)-(S||0)]:i==="yAxis"?T=l==="horizontal"?[r.top+r.height-(E.bottom||0),r.top+(E.top||0)]:[r.top+(E.top||0)+(S||0),r.top+r.height-(E.bottom||0)-(S||0)]:T=y.range,A&&(T=[T[1],T[0]]);var G=xwe(y,s,h),he=G.scale,ce=G.realScaleType;he.domain(w).range(T),wwe(he);var we=jwe(he,ws(ws({},y),{},{realScaleType:ce}));i==="xAxis"?(N=x==="top"&&!O||x==="bottom"&&O,k=r.left,z=d[P]-N*y.height):i==="yAxis"&&(N=x==="left"&&!O||x==="right"&&O,k=d[P]-N*y.width,z=r.top);var ke=ws(ws(ws({},y),we),{},{realScaleType:ce,x:k,y:z,scale:he,width:i==="xAxis"?r.width:y.width,height:i==="yAxis"?r.height:y.height});return ke.bandSize=Hv(ke,we),!y.hide&&i==="xAxis"?d[P]+=(N?-1:1)*ke.height:y.hide||(d[P]+=(N?-1:1)*ke.width),ws(ws({},g),{},qb({},b,ke))},{})},QV=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return{x:Math.min(r,s),y:Math.min(i,a),width:Math.abs(s-r),height:Math.abs(a-i)}},QEe=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return QV({x:n,y:r},{x:i,y:s})},ZV=function(){function t(e){GEe(this,t),this.scale=e}return YEe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();qb(ZV,"EPS",1e-4);var wT=function(e){var n=Object.keys(e).reduce(function(r,i){return ws(ws({},r),{},qb({},i,ZV.create(e[i])))},{});return ws(ws({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;return yEe(i,function(l,c){return n[c].apply(l,{bandAware:a,position:o})})},isInRange:function(i){return qV(i,function(s,a){return n[a].isInRange(s)})}})};function ZEe(t){return(t%180+180)%180}var JEe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=ZEe(i),a=s*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},eAe=pl,tAe=Im,nAe=kb;function rAe(t){return function(e,n,r){var i=Object(e);if(!tAe(e)){var s=eAe(n);e=nAe(e),n=function(o){return s(i[o],o,i)}}var a=t(e,n,r);return a>-1?i[s?e[a]:a]:void 0}}var iAe=rAe,sAe=BV;function aAe(t){var e=sAe(t),n=e%1;return e===e?n?e-n:e:0}var oAe=aAe,lAe=oz,cAe=pl,uAe=oAe,fAe=Math.max;function dAe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:uAe(n);return i<0&&(i=fAe(r+i,0)),lAe(t,cAe(e),i)}var hAe=dAe,pAe=iAe,mAe=hAe,gAe=pAe(mAe),yAe=gAe;const vAe=Wt(yAe);var bAe=aae(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),_T=L.createContext(void 0),ST=L.createContext(void 0),JV=L.createContext(void 0),eF=L.createContext({}),tF=L.createContext(void 0),nF=L.createContext(0),rF=L.createContext(0),_D=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,a=e.clipPathId,o=e.children,l=e.width,c=e.height,f=bAe(s);return B.createElement(_T.Provider,{value:r},B.createElement(ST.Provider,{value:i},B.createElement(eF.Provider,{value:s},B.createElement(JV.Provider,{value:f},B.createElement(tF.Provider,{value:a},B.createElement(nF.Provider,{value:c},B.createElement(rF.Provider,{value:l},o)))))))},xAe=function(){return L.useContext(tF)},iF=function(e){var n=L.useContext(_T);n==null&&Ec();var r=n[e];return r==null&&Ec(),r},wAe=function(){var e=L.useContext(_T);return Co(e)},_Ae=function(){var e=L.useContext(ST),n=vAe(e,function(r){return qV(r.domain,Number.isFinite)});return n||Co(e)},sF=function(e){var n=L.useContext(ST);n==null&&Ec();var r=n[e];return r==null&&Ec(),r},SAe=function(){var e=L.useContext(JV);return e},EAe=function(){return L.useContext(eF)},ET=function(){return L.useContext(rF)},AT=function(){return L.useContext(nF)};function Mf(t){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mf(t)}function AAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oF(r.key),r)}}function PAe(t,e,n){return e&&TAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CAe(t,e,n){return e=o0(e),jAe(t,aF()?Reflect.construct(e,n||[],o0(t).constructor):e.apply(t,n))}function jAe(t,e){if(e&&(Mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OAe(t)}function OAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aF=function(){return!!t})()}function o0(t){return o0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},o0(t)}function kAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OS(t,e)}function OS(t,e){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OS(t,e)}function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ED(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){TT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TT(t,e,n){return e=oF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oF(t){var e=IAe(t,"string");return Mf(e)=="symbol"?e:e+""}function IAe(t,e){if(Mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function NAe(t,e){return $Ae(t)||RAe(t,e)||MAe(t,e)||DAe()}function DAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MAe(t,e){if(t){if(typeof t=="string")return AD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AD(t,e)}}function AD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function RAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function $Ae(t){if(Array.isArray(t))return t}function kS(){return kS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kS.apply(this,arguments)}var LAe=function(e,n){var r;return B.isValidElement(e)?r=B.cloneElement(e,n):dt(e)?r=e(n):r=B.createElement("line",kS({},n,{className:"recharts-reference-line-line"})),r},zAe=function(e,n,r,i,s,a,o,l,c){var f=s.x,d=s.y,h=s.width,g=s.height;if(r){var b=c.y,y=e.y.apply(b,{position:a});if(oa(c,"discard")&&!e.y.isInRange(y))return null;var x=[{x:f+h,y},{x:f,y}];return l==="left"?x.reverse():x}if(n){var w=c.x,_=e.x.apply(w,{position:a});if(oa(c,"discard")&&!e.x.isInRange(_))return null;var E=[{x:_,y:d+g},{x:_,y:d}];return o==="top"?E.reverse():E}if(i){var O=c.segment,A=O.map(function(P){return e.apply(P,{position:a})});return oa(c,"discard")&&cEe(A,function(P){return!e.isInRange(P)})?null:A}return null};function VAe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,a=t.shape,o=t.className,l=t.alwaysShow,c=xAe(),f=iF(i),d=sF(s),h=SAe();if(!c||!h)return null;Fa(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=wT({x:f.scale,y:d.scale}),b=qn(e),y=qn(n),x=r&&r.length===2,w=zAe(g,b,y,x,h,t.position,f.orientation,d.orientation,t);if(!w)return null;var _=NAe(w,2),E=_[0],O=E.x,A=E.y,P=_[1],S=P.x,T=P.y,k=oa(t,"hidden")?"url(#".concat(c,")"):void 0,z=ED(ED({clipPath:k},pt(t,!0)),{},{x1:O,y1:A,x2:S,y2:T});return B.createElement(Zt,{className:Et("recharts-reference-line",o)},LAe(a,z),Cr.renderCallByParent(t,QEe({x1:O,y1:A,x2:S,y2:T})))}var Hb=function(t){function e(){return AAe(this,e),CAe(this,e,arguments)}return kAe(e,t),PAe(e,[{key:"render",value:function(){return B.createElement(VAe,this.props)}}])}(B.Component);TT(Hb,"displayName","ReferenceLine");TT(Hb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function IS(){return IS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IS.apply(this,arguments)}function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function TD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TD(Object(n),!0).forEach(function(r){Gb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cF(r.key),r)}}function UAe(t,e,n){return e&&BAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function WAe(t,e,n){return e=l0(e),KAe(t,lF()?Reflect.construct(e,n||[],l0(t).constructor):e.apply(t,n))}function KAe(t,e){if(e&&(Rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qAe(t)}function qAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lF=function(){return!!t})()}function l0(t){return l0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},l0(t)}function HAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NS(t,e)}function NS(t,e){return NS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NS(t,e)}function Gb(t,e,n){return e=cF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cF(t){var e=GAe(t,"string");return Rf(e)=="symbol"?e:e+""}function GAe(t,e){if(Rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var YAe=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,a=wT({x:i.scale,y:s.scale}),o=a.apply({x:n,y:r},{bandAware:!0});return oa(e,"discard")&&!a.isInRange(o)?null:o},Yb=function(t){function e(){return FAe(this,e),WAe(this,e,arguments)}return HAe(e,t),UAe(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,a=r.r,o=r.alwaysShow,l=r.clipPathId,c=qn(i),f=qn(s);if(Fa(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!f)return null;var d=YAe(this.props);if(!d)return null;var h=d.x,g=d.y,b=this.props,y=b.shape,x=b.className,w=oa(this.props,"hidden")?"url(#".concat(l,")"):void 0,_=PD(PD({clipPath:w},pt(this.props,!0)),{},{cx:h,cy:g});return B.createElement(Zt,{className:Et("recharts-reference-dot",x)},e.renderDot(y,_),Cr.renderCallByParent(this.props,{x:h-a,y:g-a,width:2*a,height:2*a}))}}])}(B.Component);Gb(Yb,"displayName","ReferenceDot");Gb(Yb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Gb(Yb,"renderDot",function(t,e){var n;return B.isValidElement(t)?n=B.cloneElement(t,e):dt(t)?n=t(e):n=B.createElement(Ub,IS({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function DS(){return DS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DS.apply(this,arguments)}function $f(t){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$f(t)}function CD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CD(Object(n),!0).forEach(function(r){Xb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fF(r.key),r)}}function ZAe(t,e,n){return e&&QAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function JAe(t,e,n){return e=c0(e),eTe(t,uF()?Reflect.construct(e,n||[],c0(t).constructor):e.apply(t,n))}function eTe(t,e){if(e&&($f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tTe(t)}function tTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uF=function(){return!!t})()}function c0(t){return c0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},c0(t)}function nTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MS(t,e)}function MS(t,e){return MS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MS(t,e)}function Xb(t,e,n){return e=fF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fF(t){var e=rTe(t,"string");return $f(e)=="symbol"?e:e+""}function rTe(t,e){if($f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var iTe=function(e,n,r,i,s){var a=s.x1,o=s.x2,l=s.y1,c=s.y2,f=s.xAxis,d=s.yAxis;if(!f||!d)return null;var h=wT({x:f.scale,y:d.scale}),g={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},b={x:n?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return oa(s,"discard")&&(!h.isInRange(g)||!h.isInRange(b))?null:QV(g,b)},Qb=function(t){function e(){return XAe(this,e),JAe(this,e,arguments)}return nTe(e,t),ZAe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,a=r.y1,o=r.y2,l=r.className,c=r.alwaysShow,f=r.clipPathId;Fa(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=qn(i),h=qn(s),g=qn(a),b=qn(o),y=this.props.shape;if(!d&&!h&&!g&&!b&&!y)return null;var x=iTe(d,h,g,b,this.props);if(!x&&!y)return null;var w=oa(this.props,"hidden")?"url(#".concat(f,")"):void 0;return B.createElement(Zt,{className:Et("recharts-reference-area",l)},e.renderRect(y,jD(jD({clipPath:w},pt(this.props,!0)),x)),Cr.renderCallByParent(this.props,x))}}])}(B.Component);Xb(Qb,"displayName","ReferenceArea");Xb(Qb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Xb(Qb,"renderRect",function(t,e){var n;return B.isValidElement(t)?n=B.cloneElement(t,e):dt(t)?n=t(e):n=B.createElement(bT,DS({},e,{className:"recharts-reference-area-rect"})),n});function dF(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function sTe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return JEe(r,n)}function aTe(t,e,n){var r=n==="width",i=t.x,s=t.y,a=t.width,o=t.height;return e===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function u0(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function oTe(t,e){return dF(t,e+1)}function lTe(t,e,n,r,i){for(var s=(r||[]).slice(),a=e.start,o=e.end,l=0,c=1,f=a,d=function(){var b=r==null?void 0:r[l];if(b===void 0)return{v:dF(r,c)};var y=l,x,w=function(){return x===void 0&&(x=n(b,y)),x},_=b.coordinate,E=l===0||u0(t,_,w,f,o);E||(l=0,f=a,c+=1),E&&(f=_+t*(w()/2+i),l+=c)},h;c<=s.length;)if(h=d(),h)return h.v;return[]}function Jp(t){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(t)}function OD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(n),!0).forEach(function(r){cTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cTe(t,e,n){return e=uTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uTe(t){var e=fTe(t,"string");return Jp(e)=="symbol"?e:e+""}function fTe(t,e){if(Jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dTe(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,o=e.start,l=e.end,c=function(h){var g=s[h],b,y=function(){return b===void 0&&(b=n(g,h)),b};if(h===a-1){var x=t*(g.coordinate+t*y()/2-l);s[h]=g=Er(Er({},g),{},{tickCoord:x>0?g.coordinate-x*t:g.coordinate})}else s[h]=g=Er(Er({},g),{},{tickCoord:g.coordinate});var w=u0(t,g.tickCoord,y,o,l);w&&(l=g.tickCoord-t*(y()/2+i),s[h]=Er(Er({},g),{},{isShow:!0}))},f=a-1;f>=0;f--)c(f);return s}function hTe(t,e,n,r,i,s){var a=(r||[]).slice(),o=a.length,l=e.start,c=e.end;if(s){var f=r[o-1],d=n(f,o-1),h=t*(f.coordinate+t*d/2-c);a[o-1]=f=Er(Er({},f),{},{tickCoord:h>0?f.coordinate-h*t:f.coordinate});var g=u0(t,f.tickCoord,function(){return d},l,c);g&&(c=f.tickCoord-t*(d/2+i),a[o-1]=Er(Er({},f),{},{isShow:!0}))}for(var b=s?o-1:o,y=function(_){var E=a[_],O,A=function(){return O===void 0&&(O=n(E,_)),O};if(_===0){var P=t*(E.coordinate-t*A()/2-l);a[_]=E=Er(Er({},E),{},{tickCoord:P<0?E.coordinate-P*t:E.coordinate})}else a[_]=E=Er(Er({},E),{},{tickCoord:E.coordinate});var S=u0(t,E.tickCoord,A,l,c);S&&(l=E.tickCoord+t*(A()/2+i),a[_]=Er(Er({},E),{},{isShow:!0}))},x=0;x<b;x++)y(x);return a}function PT(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,a=t.minTickGap,o=t.orientation,l=t.interval,c=t.tickFormatter,f=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(Pe(l)||zc.isSsr)return oTe(i,typeof l=="number"&&Pe(l)?l:0);var h=[],g=o==="top"||o==="bottom"?"width":"height",b=f&&g==="width"?Rh(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},y=function(E,O){var A=dt(c)?c(E.value,O):E.value;return g==="width"?sTe(Rh(A,{fontSize:e,letterSpacing:n}),b,d):Rh(A,{fontSize:e,letterSpacing:n})[g]},x=i.length>=2?Ps(i[1].coordinate-i[0].coordinate):1,w=aTe(s,x,g);return l==="equidistantPreserveStart"?lTe(x,w,y,i,a):(l==="preserveStart"||l==="preserveStartEnd"?h=hTe(x,w,y,i,a,l==="preserveStartEnd"):h=dTe(x,w,y,i,a),h.filter(function(_){return _.isShow}))}var pTe=["viewBox"],mTe=["viewBox"],gTe=["ticks"];function Lf(t){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}function $u(){return $u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$u.apply(this,arguments)}function kD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kD(Object(n),!0).forEach(function(r){CT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dw(t,e){if(t==null)return{};var n=yTe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ID(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pF(r.key),r)}}function bTe(t,e,n){return e&&ID(t.prototype,e),n&&ID(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xTe(t,e,n){return e=f0(e),wTe(t,hF()?Reflect.construct(e,n||[],f0(t).constructor):e.apply(t,n))}function wTe(t,e){if(e&&(Lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Te(t)}function _Te(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hF=function(){return!!t})()}function f0(t){return f0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},f0(t)}function STe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RS(t,e)}function RS(t,e){return RS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RS(t,e)}function CT(t,e,n){return e=pF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pF(t){var e=ETe(t,"string");return Lf(e)=="symbol"?e:e+""}function ETe(t,e){if(Lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bd=function(t){function e(n){var r;return vTe(this,e),r=xTe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return STe(e,t),bTe(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,a=Dw(r,pTe),o=this.props,l=o.viewBox,c=Dw(o,mTe);return!Yu(s,l)||!Yu(a,c)||!Yu(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,a=i.y,o=i.width,l=i.height,c=i.orientation,f=i.tickSize,d=i.mirror,h=i.tickMargin,g,b,y,x,w,_,E=d?-1:1,O=r.tickSize||f,A=Pe(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":g=b=r.coordinate,x=a+ +!d*l,y=x-E*O,_=y-E*h,w=A;break;case"left":y=x=r.coordinate,b=s+ +!d*o,g=b-E*O,w=g-E*h,_=A;break;case"right":y=x=r.coordinate,b=s+ +d*o,g=b+E*O,w=g+E*h,_=A;break;default:g=b=r.coordinate,x=a+ +d*l,y=x+E*O,_=y+E*h,w=A;break}return{line:{x1:g,y1:y,x2:b,y2:x},tick:{x:w,y:_}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.orientation,c=r.mirror,f=r.axisLine,d=Bn(Bn(Bn({},pt(this.props,!1)),pt(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);d=Bn(Bn({},d),{},{x1:i,y1:s+h*o,x2:i+a,y2:s+h*o})}else{var g=+(l==="left"&&!c||l==="right"&&c);d=Bn(Bn({},d),{},{x1:i+g*a,y1:s,x2:i+g*a,y2:s+o})}return B.createElement("line",$u({},d,{className:Et("recharts-cartesian-axis-line",Qi(f,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var a=this,o=this.props,l=o.tickLine,c=o.stroke,f=o.tick,d=o.tickFormatter,h=o.unit,g=PT(Bn(Bn({},this.props),{},{ticks:r}),i,s),b=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),x=pt(this.props,!1),w=pt(f,!1),_=Bn(Bn({},x),{},{fill:"none"},pt(l,!1)),E=g.map(function(O,A){var P=a.getTickLineCoord(O),S=P.line,T=P.tick,k=Bn(Bn(Bn(Bn({textAnchor:b,verticalAnchor:y},x),{},{stroke:"none",fill:c},w),T),{},{index:A,payload:O,visibleTicksCount:g.length,tickFormatter:d});return B.createElement(Zt,$u({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},vv(a.props,O,A)),l&&B.createElement("line",$u({},_,S,{className:Et("recharts-cartesian-axis-tick-line",Qi(l,"className"))})),f&&e.renderTickItem(f,k,"".concat(dt(d)?d(O.value,A):O.value).concat(h||"")))});return B.createElement("g",{className:"recharts-cartesian-axis-ticks"},E)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,a=i.width,o=i.height,l=i.ticksGenerator,c=i.className,f=i.hide;if(f)return null;var d=this.props,h=d.ticks,g=Dw(d,gTe),b=h;return dt(l)&&(b=h&&h.length>0?l(this.props):l(g)),a<=0||o<=0||!b||!b.length?null:B.createElement(Zt,{className:Et("recharts-cartesian-axis",c),ref:function(x){r.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),Cr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var a,o=Et(i.className,"recharts-cartesian-axis-tick-value");return B.isValidElement(r)?a=B.cloneElement(r,Bn(Bn({},i),{},{className:o})):dt(r)?a=r(Bn(Bn({},i),{},{className:o})):a=B.createElement(Iv,$u({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(L.Component);CT(bd,"displayName","CartesianAxis");CT(bd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ATe=["x1","y1","x2","y2","key"],TTe=["offset"];function Ac(t){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(t)}function ND(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ND(Object(n),!0).forEach(function(r){PTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ND(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PTe(t,e,n){return e=CTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CTe(t){var e=jTe(t,"string");return Ac(e)=="symbol"?e:e+""}function jTe(t,e){if(Ac(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tc(){return tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tc.apply(this,arguments)}function DD(t,e){if(t==null)return{};var n=OTe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var kTe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,a=e.width,o=e.height,l=e.ry;return B.createElement("rect",{x:i,y:s,ry:l,width:a,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function mF(t,e){var n;if(B.isValidElement(t))n=B.cloneElement(t,e);else if(dt(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,a=e.y2,o=e.key,l=DD(e,ATe),c=pt(l,!1);c.offset;var f=DD(c,TTe);n=B.createElement("line",tc({},f,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:o}))}return n}function ITe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,l){var c=jr(jr({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return mF(i,c)});return B.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function NTe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,l){var c=jr(jr({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return mF(i,c)});return B.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function DTe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,a=t.height,o=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var f=o.map(function(h){return Math.round(h+i-i)}).sort(function(h,g){return h-g});i!==f[0]&&f.unshift(0);var d=f.map(function(h,g){var b=!f[g+1],y=b?i+a-h:f[g+1]-h;if(y<=0)return null;var x=g%e.length;return B.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:y,width:s,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function MTe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,a=t.y,o=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var f=c.map(function(h){return Math.round(h+s-s)}).sort(function(h,g){return h-g});s!==f[0]&&f.unshift(0);var d=f.map(function(h,g){var b=!f[g+1],y=b?s+o-h:f[g+1]-h;if(y<=0)return null;var x=g%r.length;return B.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:y,height:l,stroke:"none",fill:r[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var RTe=function(e,n){var r=e.xAxis,i=e.width,s=e.height,a=e.offset;return AV(PT(jr(jr(jr({},bd.defaultProps),r),{},{ticks:Ra(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.left,a.left+a.width,n)},$Te=function(e,n){var r=e.yAxis,i=e.width,s=e.height,a=e.offset;return AV(PT(jr(jr(jr({},bd.defaultProps),r),{},{ticks:Ra(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.top,a.top+a.height,n)},fu={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Lm(t){var e,n,r,i,s,a,o=ET(),l=AT(),c=EAe(),f=jr(jr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:fu.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:fu.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:fu.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:fu.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:fu.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:fu.verticalFill,x:Pe(t.x)?t.x:c.left,y:Pe(t.y)?t.y:c.top,width:Pe(t.width)?t.width:c.width,height:Pe(t.height)?t.height:c.height}),d=f.x,h=f.y,g=f.width,b=f.height,y=f.syncWithTicks,x=f.horizontalValues,w=f.verticalValues,_=wAe(),E=_Ae();if(!Pe(g)||g<=0||!Pe(b)||b<=0||!Pe(d)||d!==+d||!Pe(h)||h!==+h)return null;var O=f.verticalCoordinatesGenerator||RTe,A=f.horizontalCoordinatesGenerator||$Te,P=f.horizontalPoints,S=f.verticalPoints;if((!P||!P.length)&&dt(A)){var T=x&&x.length,k=A({yAxis:E?jr(jr({},E),{},{ticks:T?x:E.ticks}):void 0,width:o,height:l,offset:c},T?!0:y);Fa(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ac(k),"]")),Array.isArray(k)&&(P=k)}if((!S||!S.length)&&dt(O)){var z=w&&w.length,N=O({xAxis:_?jr(jr({},_),{},{ticks:z?w:_.ticks}):void 0,width:o,height:l,offset:c},z?!0:y);Fa(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ac(N),"]")),Array.isArray(N)&&(S=N)}return B.createElement("g",{className:"recharts-cartesian-grid"},B.createElement(kTe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),B.createElement(ITe,tc({},f,{offset:c,horizontalPoints:P,xAxis:_,yAxis:E})),B.createElement(NTe,tc({},f,{offset:c,verticalPoints:S,xAxis:_,yAxis:E})),B.createElement(DTe,tc({},f,{horizontalPoints:P})),B.createElement(MTe,tc({},f,{verticalPoints:S})))}Lm.displayName="CartesianGrid";var LTe=["type","layout","connectNulls","ref"],zTe=["key"];function zf(t){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(t)}function MD(t,e){if(t==null)return{};var n=VTe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Vh(){return Vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vh.apply(this,arguments)}function RD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RD(Object(n),!0).forEach(function(r){_s(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function du(t){return WTe(t)||UTe(t)||BTe(t)||FTe()}function FTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BTe(t,e){if(t){if(typeof t=="string")return $S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $S(t,e)}}function UTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WTe(t){if(Array.isArray(t))return $S(t)}function $S(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yF(r.key),r)}}function qTe(t,e,n){return e&&$D(t.prototype,e),n&&$D(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function HTe(t,e,n){return e=d0(e),GTe(t,gF()?Reflect.construct(e,n||[],d0(t).constructor):e.apply(t,n))}function GTe(t,e){if(e&&(zf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YTe(t)}function YTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gF=function(){return!!t})()}function d0(t){return d0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},d0(t)}function XTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LS(t,e)}function LS(t,e){return LS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LS(t,e)}function _s(t,e,n){return e=yF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yF(t){var e=QTe(t,"string");return zf(e)=="symbol"?e:e+""}function QTe(t,e){if(zf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tc=function(t){function e(){var n;KTe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=HTe(this,e,[].concat(i)),_s(n,"state",{isAnimationFinished:!0,totalLength:0}),_s(n,"generateSimpleStrokeDasharray",function(a,o){return"".concat(o,"px ").concat(a-o,"px")}),_s(n,"getStrokeDasharray",function(a,o,l){var c=l.reduce(function(w,_){return w+_});if(!c)return n.generateSimpleStrokeDasharray(o,a);for(var f=Math.floor(a/c),d=a%c,h=o-a,g=[],b=0,y=0;b<l.length;y+=l[b],++b)if(y+l[b]>d){g=[].concat(du(l.slice(0,b)),[d-y]);break}var x=g.length%2===0?[0,h]:[h];return[].concat(du(e.repeat(l,f)),du(g),x).map(function(w){return"".concat(w,"px")}).join(", ")}),_s(n,"id",dd("recharts-line-")),_s(n,"pathRef",function(a){n.mainCurve=a}),_s(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),_s(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return XTe(e,t),qTe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,o=s.xAxis,l=s.yAxis,c=s.layout,f=s.children,d=Zi(f,$m);if(!d)return null;var h=function(y,x){return{x:y.x,y:y.y,value:y.value,errorVal:Vr(y.payload,x)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return B.createElement(Zt,g,d.map(function(b){return B.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:a,xAxis:o,yAxis:l,layout:c,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,c=o.points,f=o.dataKey,d=pt(this.props,!1),h=pt(l,!0),g=c.map(function(y,x){var w=pi(pi(pi({key:"dot-".concat(x),r:3},d),h),{},{index:x,cx:y.x,cy:y.y,value:y.value,dataKey:f,payload:y.payload,points:c});return e.renderDotItem(l,w)}),b={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return B.createElement(Zt,Vh({className:"recharts-line-dots",key:"dots"},b),g)}},{key:"renderCurveStatically",value:function(r,i,s,a){var o=this.props,l=o.type,c=o.layout,f=o.connectNulls;o.ref;var d=MD(o,LTe),h=pi(pi(pi({},pt(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},a),{},{type:l,layout:c,connectNulls:f});return B.createElement(Zu,Vh({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,a=this.props,o=a.points,l=a.strokeDasharray,c=a.isAnimationActive,f=a.animationBegin,d=a.animationDuration,h=a.animationEasing,g=a.animationId,b=a.animateNewValues,y=a.width,x=a.height,w=this.state,_=w.prevPoints,E=w.totalLength;return B.createElement(ua,{begin:f,duration:d,isActive:c,easing:h,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(O){var A=O.t;if(_){var P=_.length/o.length,S=o.map(function($,M){var Y=Math.floor(M*P);if(_[Y]){var q=_[Y],ie=cr(q.x,$.x),le=cr(q.y,$.y);return pi(pi({},$),{},{x:ie(A),y:le(A)})}if(b){var Q=cr(y*2,$.x),G=cr(x/2,$.y);return pi(pi({},$),{},{x:Q(A),y:G(A)})}return pi(pi({},$),{},{x:$.x,y:$.y})});return s.renderCurveStatically(S,r,i)}var T=cr(0,E),k=T(A),z;if(l){var N="".concat(l).split(/[,\s]+/gim).map(function($){return parseFloat($)});z=s.getStrokeDasharray(k,E,N)}else z=s.generateSimpleStrokeDasharray(E,k);return s.renderCurveStatically(o,r,i,{strokeDasharray:z})})}},{key:"renderCurve",value:function(r,i){var s=this.props,a=s.points,o=s.isAnimationActive,l=this.state,c=l.prevPoints,f=l.totalLength;return o&&a&&a.length&&(!c&&f>0||!jf(c,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,o=i.points,l=i.className,c=i.xAxis,f=i.yAxis,d=i.top,h=i.left,g=i.width,b=i.height,y=i.isAnimationActive,x=i.id;if(s||!o||!o.length)return null;var w=this.state.isAnimationFinished,_=o.length===1,E=Et("recharts-line",l),O=c&&c.allowDataOverflow,A=f&&f.allowDataOverflow,P=O||A,S=gt(x)?this.id:x,T=(r=pt(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=T.r,z=k===void 0?3:k,N=T.strokeWidth,$=N===void 0?2:N,M=v6(a)?a:{},Y=M.clipDot,q=Y===void 0?!0:Y,ie=z*2+$;return B.createElement(Zt,{className:E},O||A?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(S)},B.createElement("rect",{x:O?h:h-g/2,y:A?d:d-b/2,width:O?g:g*2,height:A?b:b*2})),!q&&B.createElement("clipPath",{id:"clipPath-dots-".concat(S)},B.createElement("rect",{x:h-ie/2,y:d-ie/2,width:g+ie,height:b+ie}))):null,!_&&this.renderCurve(P,S),this.renderErrorBar(P,S),(_||a)&&this.renderDots(P,q,S),(!y||w)&&Ei.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(du(r),[0]):r,a=[],o=0;o<i;++o)a=[].concat(du(a),du(s));return a}},{key:"renderDotItem",value:function(r,i){var s;if(B.isValidElement(r))s=B.cloneElement(r,i);else if(dt(r))s=r(i);else{var a=i.key,o=MD(i,zTe),l=Et("recharts-line-dot",typeof r!="boolean"?r.className:"");s=B.createElement(Ub,Vh({key:a},o,{className:l}))}return s}}])}(L.PureComponent);_s(Tc,"displayName","Line");_s(Tc,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!zc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});_s(Tc,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,a=t.dataKey,o=t.bandSize,l=t.displayedData,c=t.offset,f=e.layout,d=l.map(function(h,g){var b=Vr(h,a);return f==="horizontal"?{x:qv({axis:n,ticks:i,bandSize:o,entry:h,index:g}),y:gt(b)?null:r.scale(b),value:b,payload:h}:{x:gt(b)?null:n.scale(b),y:qv({axis:r,ticks:s,bandSize:o,entry:h,index:g}),value:b,payload:h}});return pi({points:d,layout:f},c)});var ZTe=["layout","type","stroke","connectNulls","isRange","ref"],JTe=["key"],vF;function Vf(t){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vf(t)}function bF(t,e){if(t==null)return{};var n=ePe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ePe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nc.apply(this,arguments)}function LD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LD(Object(n),!0).forEach(function(r){Qs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wF(r.key),r)}}function nPe(t,e,n){return e&&zD(t.prototype,e),n&&zD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rPe(t,e,n){return e=h0(e),iPe(t,xF()?Reflect.construct(e,n||[],h0(t).constructor):e.apply(t,n))}function iPe(t,e){if(e&&(Vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sPe(t)}function sPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xF=function(){return!!t})()}function h0(t){return h0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},h0(t)}function aPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zS(t,e)}function zS(t,e){return zS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zS(t,e)}function Qs(t,e,n){return e=wF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wF(t){var e=oPe(t,"string");return Vf(e)=="symbol"?e:e+""}function oPe(t,e){if(Vf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vl=function(t){function e(){var n;tPe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=rPe(this,e,[].concat(i)),Qs(n,"state",{isAnimationFinished:!0}),Qs(n,"id",dd("recharts-area-")),Qs(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),dt(a)&&a()}),Qs(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),dt(a)&&a()}),n}return aPe(e,t),nPe(e,[{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(a&&!o)return null;var l=this.props,c=l.dot,f=l.points,d=l.dataKey,h=pt(this.props,!1),g=pt(c,!0),b=f.map(function(x,w){var _=_o(_o(_o({key:"dot-".concat(w),r:3},h),g),{},{index:w,cx:x.x,cy:x.y,dataKey:d,value:x.value,payload:x.payload,points:f});return e.renderDotItem(c,_)}),y={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return B.createElement(Zt,nc({className:"recharts-area-dots"},y),b)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].x,c=a[a.length-1].x,f=r*Math.abs(l-c),d=Io(a.map(function(h){return h.y||0}));return Pe(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Io(s.map(function(h){return h.y||0})),d)),Pe(d)?B.createElement("rect",{x:l<c?l:l-f,y:0,width:f,height:Math.floor(d+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].y,c=a[a.length-1].y,f=r*Math.abs(l-c),d=Io(a.map(function(h){return h.x||0}));return Pe(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Io(s.map(function(h){return h.x||0})),d)),Pe(d)?B.createElement("rect",{x:0,y:l<c?l:l-f,width:d+(o?parseInt("".concat(o),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,a){var o=this.props,l=o.layout,c=o.type,f=o.stroke,d=o.connectNulls,h=o.isRange;o.ref;var g=bF(o,ZTe);return B.createElement(Zt,{clipPath:s?"url(#clipPath-".concat(a,")"):null},B.createElement(Zu,nc({},pt(g,!0),{points:r,connectNulls:d,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&B.createElement(Zu,nc({},pt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),f!=="none"&&h&&B.createElement(Zu,nc({},pt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,f=a.animationBegin,d=a.animationDuration,h=a.animationEasing,g=a.animationId,b=this.state,y=b.prevPoints,x=b.prevBaseLine;return B.createElement(ua,{begin:f,duration:d,isActive:c,easing:h,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var _=w.t;if(y){var E=y.length/o.length,O=o.map(function(T,k){var z=Math.floor(k*E);if(y[z]){var N=y[z],$=cr(N.x,T.x),M=cr(N.y,T.y);return _o(_o({},T),{},{x:$(_),y:M(_)})}return T}),A;if(Pe(l)&&typeof l=="number"){var P=cr(x,l);A=P(_)}else if(gt(l)||fd(l)){var S=cr(x,0);A=S(_)}else A=l.map(function(T,k){var z=Math.floor(k*E);if(x[z]){var N=x[z],$=cr(N.x,T.x),M=cr(N.y,T.y);return _o(_o({},T),{},{x:$(_),y:M(_)})}return T});return s.renderAreaStatically(O,A,r,i)}return B.createElement(Zt,null,B.createElement("defs",null,B.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(_))),B.createElement(Zt,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(o,l,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,a=s.points,o=s.baseLine,l=s.isAnimationActive,c=this.state,f=c.prevPoints,d=c.prevBaseLine,h=c.totalLength;return l&&a&&a.length&&(!f&&h>0||!jf(f,a)||!jf(d,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,o=i.points,l=i.className,c=i.top,f=i.left,d=i.xAxis,h=i.yAxis,g=i.width,b=i.height,y=i.isAnimationActive,x=i.id;if(s||!o||!o.length)return null;var w=this.state.isAnimationFinished,_=o.length===1,E=Et("recharts-area",l),O=d&&d.allowDataOverflow,A=h&&h.allowDataOverflow,P=O||A,S=gt(x)?this.id:x,T=(r=pt(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=T.r,z=k===void 0?3:k,N=T.strokeWidth,$=N===void 0?2:N,M=v6(a)?a:{},Y=M.clipDot,q=Y===void 0?!0:Y,ie=z*2+$;return B.createElement(Zt,{className:E},O||A?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(S)},B.createElement("rect",{x:O?f:f-g/2,y:A?c:c-b/2,width:O?g:g*2,height:A?b:b*2})),!q&&B.createElement("clipPath",{id:"clipPath-dots-".concat(S)},B.createElement("rect",{x:f-ie/2,y:c-ie/2,width:g+ie,height:b+ie}))):null,_?null:this.renderArea(P,S),(a||_)&&this.renderDots(P,q,S),(!y||w)&&Ei.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(L.PureComponent);vF=vl;Qs(vl,"displayName","Area");Qs(vl,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!zc.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Qs(vl,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,a=e.props.baseValue,o=a??s;if(Pe(o)&&typeof o=="number")return o;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var f=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return o==="dataMin"?d:o==="dataMax"||f<0?f:Math.max(Math.min(c[0],c[1]),0)}return o==="dataMin"?c[0]:o==="dataMax"?c[1]:c[0]});Qs(vl,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,o=t.bandSize,l=t.dataKey,c=t.stackedData,f=t.dataStartIndex,d=t.displayedData,h=t.offset,g=e.layout,b=c&&c.length,y=vF.getBaseValue(e,n,r,i),x=g==="horizontal",w=!1,_=d.map(function(O,A){var P;b?P=c[f+A]:(P=Vr(O,l),Array.isArray(P)?w=!0:P=[y,P]);var S=P[1]==null||b&&Vr(O,l)==null;return x?{x:qv({axis:r,ticks:s,bandSize:o,entry:O,index:A}),y:S?null:i.scale(P[1]),value:P,payload:O}:{x:S?null:r.scale(P[1]),y:qv({axis:i,ticks:a,bandSize:o,entry:O,index:A}),value:P,payload:O}}),E;return b||w?E=_.map(function(O){var A=Array.isArray(O.value)?O.value[0]:null;return x?{x:O.x,y:A!=null&&O.y!=null?i.scale(A):null}:{x:A!=null?r.scale(A):null,y:O.y}}):E=x?i.scale(y):r.scale(y),_o({points:_,baseLine:E,layout:g,isRange:w},h)});Qs(vl,"renderDotItem",function(t,e){var n;if(B.isValidElement(t))n=B.cloneElement(t,e);else if(dt(t))n=t(e);else{var r=Et("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=bF(e,JTe);n=B.createElement(Ub,nc({},s,{key:i,className:r}))}return n});function Ff(t){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(t)}function lPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EF(r.key),r)}}function uPe(t,e,n){return e&&cPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fPe(t,e,n){return e=p0(e),dPe(t,_F()?Reflect.construct(e,n||[],p0(t).constructor):e.apply(t,n))}function dPe(t,e){if(e&&(Ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hPe(t)}function hPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_F=function(){return!!t})()}function p0(t){return p0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},p0(t)}function pPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VS(t,e)}function VS(t,e){return VS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},VS(t,e)}function SF(t,e,n){return e=EF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EF(t){var e=mPe(t,"string");return Ff(e)=="symbol"?e:e+""}function mPe(t,e){if(Ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function FS(){return FS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FS.apply(this,arguments)}function gPe(t){var e=t.xAxisId,n=ET(),r=AT(),i=iF(e);return i==null?null:L.createElement(bd,FS({},i,{className:Et("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Ra(a,!0)}}))}var Rn=function(t){function e(){return lPe(this,e),fPe(this,e,arguments)}return pPe(e,t),uPe(e,[{key:"render",value:function(){return L.createElement(gPe,this.props)}}])}(L.Component);SF(Rn,"displayName","XAxis");SF(Rn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Bf(t){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(t)}function yPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PF(r.key),r)}}function bPe(t,e,n){return e&&vPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xPe(t,e,n){return e=m0(e),wPe(t,AF()?Reflect.construct(e,n||[],m0(t).constructor):e.apply(t,n))}function wPe(t,e){if(e&&(Bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Pe(t)}function _Pe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AF=function(){return!!t})()}function m0(t){return m0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},m0(t)}function SPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BS(t,e)}function BS(t,e){return BS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},BS(t,e)}function TF(t,e,n){return e=PF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PF(t){var e=EPe(t,"string");return Bf(e)=="symbol"?e:e+""}function EPe(t,e){if(Bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function US(){return US=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},US.apply(this,arguments)}var APe=function(e){var n=e.yAxisId,r=ET(),i=AT(),s=sF(n);return s==null?null:L.createElement(bd,US({},s,{className:Et("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Ra(o,!0)}}))},$n=function(t){function e(){return yPe(this,e),xPe(this,e,arguments)}return SPe(e,t),bPe(e,[{key:"render",value:function(){return L.createElement(APe,this.props)}}])}(L.Component);TF($n,"displayName","YAxis");TF($n,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function VD(t){return jPe(t)||CPe(t)||PPe(t)||TPe()}function TPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PPe(t,e){if(t){if(typeof t=="string")return WS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WS(t,e)}}function CPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jPe(t){if(Array.isArray(t))return WS(t)}function WS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var KS=function(e,n,r,i,s){var a=Zi(e,Hb),o=Zi(e,Yb),l=[].concat(VD(a),VD(o)),c=Zi(e,Qb),f="".concat(i,"Id"),d=i[0],h=n;if(l.length&&(h=l.reduce(function(y,x){if(x.props[f]===r&&oa(x.props,"extendDomain")&&Pe(x.props[d])){var w=x.props[d];return[Math.min(y[0],w),Math.max(y[1],w)]}return y},h)),c.length){var g="".concat(d,"1"),b="".concat(d,"2");h=c.reduce(function(y,x){if(x.props[f]===r&&oa(x.props,"extendDomain")&&Pe(x.props[g])&&Pe(x.props[b])){var w=x.props[g],_=x.props[b];return[Math.min(y[0],w,_),Math.max(y[1],w,_)]}return y},h)}return s&&s.length&&(h=s.reduce(function(y,x){return Pe(x)?[Math.min(y[0],x),Math.max(y[1],x)]:y},h)),h},CF={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function s(l,c,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new i(f,d||l,h),b=n?n+c:c;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],g]:l._events[b].push(g):(l._events[b]=g,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,d;if(this._eventsCount===0)return c;for(d in f=this._events)e.call(f,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=n?n+c:c,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,g=d.length,b=new Array(g);h<g;h++)b[h]=d[h].fn;return b},o.prototype.listenerCount=function(c){var f=n?n+c:c,d=this._events[f];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,f,d,h,g,b){var y=n?n+c:c;if(!this._events[y])return!1;var x=this._events[y],w=arguments.length,_,E;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,d),!0;case 4:return x.fn.call(x.context,f,d,h),!0;case 5:return x.fn.call(x.context,f,d,h,g),!0;case 6:return x.fn.call(x.context,f,d,h,g,b),!0}for(E=1,_=new Array(w-1);E<w;E++)_[E-1]=arguments[E];x.fn.apply(x.context,_)}else{var O=x.length,A;for(E=0;E<O;E++)switch(x[E].once&&this.removeListener(c,x[E].fn,void 0,!0),w){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,f);break;case 3:x[E].fn.call(x[E].context,f,d);break;case 4:x[E].fn.call(x[E].context,f,d,h);break;default:if(!_)for(A=1,_=new Array(w-1);A<w;A++)_[A-1]=arguments[A];x[E].fn.apply(x[E].context,_)}}return!0},o.prototype.on=function(c,f,d){return s(this,c,f,d,!1)},o.prototype.once=function(c,f,d){return s(this,c,f,d,!0)},o.prototype.removeListener=function(c,f,d,h){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return a(this,g),this;var b=this._events[g];if(b.fn)b.fn===f&&(!h||b.once)&&(!d||b.context===d)&&a(this,g);else{for(var y=0,x=[],w=b.length;y<w;y++)(b[y].fn!==f||h&&!b[y].once||d&&b[y].context!==d)&&x.push(b[y]);x.length?this._events[g]=x.length===1?x[0]:x:a(this,g)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&a(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(CF);var OPe=CF.exports;const kPe=Wt(OPe);var Mw=new kPe,Rw="recharts.syncMouseEvents";function em(t){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},em(t)}function IPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jF(r.key),r)}}function DPe(t,e,n){return e&&NPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $w(t,e,n){return e=jF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jF(t){var e=MPe(t,"string");return em(e)=="symbol"?e:e+""}function MPe(t,e){if(em(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(em(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var RPe=function(){function t(){IPe(this,t),$w(this,"activeIndex",0),$w(this,"coordinateList",[]),$w(this,"layout","horizontal")}return DPe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,a=n.container,o=a===void 0?null:a,l=n.layout,c=l===void 0?null:l,f=n.offset,d=f===void 0?null:f,h=n.mouseHandlerCallback,g=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+l+c,h=a+this.offset.top+o/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function $Pe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Pe(r)&&Pe(i))return!0}return!1}function LPe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function OF(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,a=dr(e,n,r,i),o=dr(e,n,r,s);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function zPe(t,e,n){var r,i,s,a;if(t==="horizontal")r=e.x,s=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,c=e.innerRadius,f=e.outerRadius,d=e.angle,h=dr(o,l,c,d),g=dr(o,l,f,d);r=h.x,i=h.y,s=g.x,a=g.y}else return OF(e);return[{x:r,y:i},{x:s,y:a}]}function tm(t){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tm(t)}function FD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ug(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FD(Object(n),!0).forEach(function(r){VPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VPe(t,e,n){return e=FPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FPe(t){var e=BPe(t,"string");return tm(e)=="symbol"?e:e+""}function BPe(t,e){if(tm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UPe(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,a=t.activeCoordinate,o=t.activePayload,l=t.offset,c=t.activeTooltipIndex,f=t.tooltipAxisBandSize,d=t.layout,h=t.chartName,g=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!g||!s||!a||h!=="ScatterChart"&&i!=="axis")return null;var b,y=Zu;if(h==="ScatterChart")b=a,y=NSe;else if(h==="BarChart")b=LPe(d,a,l,f),y=bT;else if(d==="radial"){var x=OF(a),w=x.cx,_=x.cy,E=x.radius,O=x.startAngle,A=x.endAngle;b={cx:w,cy:_,startAngle:O,endAngle:A,innerRadius:E,outerRadius:E},y=OV}else b={points:zPe(d,a,l)},y=Zu;var P=Ug(Ug(Ug(Ug({stroke:"#ccc",pointerEvents:"none"},l),b),pt(g,!1)),{},{payload:o,payloadIndex:c,className:Et("recharts-tooltip-cursor",g.className)});return L.isValidElement(g)?L.cloneElement(g,P):L.createElement(y,P)}var WPe=["item"],KPe=["children","className","width","height","style","compact","title","desc"];function Uf(t){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(t)}function Lu(){return Lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lu.apply(this,arguments)}function BD(t,e){return GPe(t)||HPe(t,e)||IF(t,e)||qPe()}function qPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function GPe(t){if(Array.isArray(t))return t}function UD(t,e){if(t==null)return{};var n=YPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function YPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function XPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NF(r.key),r)}}function ZPe(t,e,n){return e&&QPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function JPe(t,e,n){return e=g0(e),eCe(t,kF()?Reflect.construct(e,n||[],g0(t).constructor):e.apply(t,n))}function eCe(t,e){if(e&&(Uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tCe(t)}function tCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kF=function(){return!!t})()}function g0(t){return g0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},g0(t)}function nCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qS(t,e)}function qS(t,e){return qS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qS(t,e)}function Wf(t){return sCe(t)||iCe(t)||IF(t)||rCe()}function rCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IF(t,e){if(t){if(typeof t=="string")return HS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HS(t,e)}}function iCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sCe(t){if(Array.isArray(t))return HS(t)}function HS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WD(Object(n),!0).forEach(function(r){Xe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xe(t,e,n){return e=NF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NF(t){var e=aCe(t,"string");return Uf(e)=="symbol"?e:e+""}function aCe(t,e){if(Uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oCe={xAxis:["bottom","top"],yAxis:["left","right"]},lCe={width:"100%",height:"100%"},DF={x:0,y:0};function Wg(t){return t}var cCe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},uCe=function(e,n,r,i){var s=n.find(function(f){return f&&f.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,o=i.radius;return ge(ge(ge({},i),dr(i.cx,i.cy,o,a)),{},{angle:a,radius:o})}var l=s.coordinate,c=i.angle;return ge(ge(ge({},i),dr(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return DF},Zb=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,a=(r??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat(Wf(o),Wf(c)):o},[]);return a.length>0?a:e&&e.length&&Pe(i)&&Pe(s)?e.slice(i,s+1):[]};function MF(t){return t==="number"?[0,"auto"]:void 0}var GS=function(e,n,r,i){var s=e.graphicalItems,a=e.tooltipAxis,o=Zb(n,e);return r<0||!s||!s.length||r>=o.length?null:s.reduce(function(l,c){var f,d=(f=c.props.data)!==null&&f!==void 0?f:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var g=d===void 0?o:d;h=gv(g,a.dataKey,i)}else h=d&&d[r]||o[r];return h?[].concat(Wf(l),[PV(c,h)]):l},[])},KD=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},a=cCe(s,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,f=pwe(a,o,c,l);if(f>=0&&c){var d=c[f]&&c[f].value,h=GS(e,n,f,d),g=uCe(r,o,f,s);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:g}}return null},fCe=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=e.layout,d=e.children,h=e.stackOffset,g=EV(f,s);return r.reduce(function(b,y){var x,w=y.type.defaultProps!==void 0?ge(ge({},y.type.defaultProps),y.props):y.props,_=w.type,E=w.dataKey,O=w.allowDataOverflow,A=w.allowDuplicatedCategory,P=w.scale,S=w.ticks,T=w.includeHidden,k=w[a];if(b[k])return b;var z=Zb(e.data,{graphicalItems:i.filter(function(we){var ke,Ue=a in we.props?we.props[a]:(ke=we.type.defaultProps)===null||ke===void 0?void 0:ke[a];return Ue===k}),dataStartIndex:l,dataEndIndex:c}),N=z.length,$,M,Y;$Pe(w.domain,O,_)&&($=fS(w.domain,null,O),g&&(_==="number"||P!=="auto")&&(Y=Lh(z,E,"category")));var q=MF(_);if(!$||$.length===0){var ie,le=(ie=w.domain)!==null&&ie!==void 0?ie:q;if(E){if($=Lh(z,E,_),_==="category"&&g){var Q=noe($);A&&Q?(M=$,$=n0(0,N)):A||($=wN(le,$,y).reduce(function(we,ke){return we.indexOf(ke)>=0?we:[].concat(Wf(we),[ke])},[]))}else if(_==="category")A?$=$.filter(function(we){return we!==""&&!gt(we)}):$=wN(le,$,y).reduce(function(we,ke){return we.indexOf(ke)>=0||ke===""||gt(ke)?we:[].concat(Wf(we),[ke])},[]);else if(_==="number"){var G=bwe(z,i.filter(function(we){var ke,Ue,ct=a in we.props?we.props[a]:(ke=we.type.defaultProps)===null||ke===void 0?void 0:ke[a],ot="hide"in we.props?we.props.hide:(Ue=we.type.defaultProps)===null||Ue===void 0?void 0:Ue.hide;return ct===k&&(T||!ot)}),E,s,f);G&&($=G)}g&&(_==="number"||P!=="auto")&&(Y=Lh(z,E,"category"))}else g?$=n0(0,N):o&&o[k]&&o[k].hasStack&&_==="number"?$=h==="expand"?[0,1]:TV(o[k].stackGroups,l,c):$=SV(z,i.filter(function(we){var ke=a in we.props?we.props[a]:we.type.defaultProps[a],Ue="hide"in we.props?we.props.hide:we.type.defaultProps.hide;return ke===k&&(T||!Ue)}),_,f,!0);if(_==="number")$=KS(d,$,k,s,S),le&&($=fS(le,$,O));else if(_==="category"&&le){var he=le,ce=$.every(function(we){return he.indexOf(we)>=0});ce&&($=he)}}return ge(ge({},b),{},Xe({},k,ge(ge({},w),{},{axisType:s,domain:$,categoricalDomain:Y,duplicateDomain:M,originalDomain:(x=w.domain)!==null&&x!==void 0?x:q,isCategorical:g,layout:f})))},{})},dCe=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=e.layout,d=e.children,h=Zb(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),g=h.length,b=EV(f,s),y=-1;return r.reduce(function(x,w){var _=w.type.defaultProps!==void 0?ge(ge({},w.type.defaultProps),w.props):w.props,E=_[a],O=MF("number");if(!x[E]){y++;var A;return b?A=n0(0,g):o&&o[E]&&o[E].hasStack?(A=TV(o[E].stackGroups,l,c),A=KS(d,A,E,s)):(A=fS(O,SV(h,r.filter(function(P){var S,T,k=a in P.props?P.props[a]:(S=P.type.defaultProps)===null||S===void 0?void 0:S[a],z="hide"in P.props?P.props.hide:(T=P.type.defaultProps)===null||T===void 0?void 0:T.hide;return k===E&&!z}),"number",f),i.defaultProps.allowDataOverflow),A=KS(d,A,E,s)),ge(ge({},x),{},Xe({},E,ge(ge({axisType:s},i.defaultProps),{},{hide:!0,orientation:Qi(oCe,"".concat(s,".").concat(y%2),null),domain:A,originalDomain:O,isCategorical:b,layout:f})))}return x},{})},hCe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,a=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=e.children,d="".concat(i,"Id"),h=Zi(f,s),g={};return h&&h.length?g=fCe(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(g=dCe(e,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),g},pCe=function(e){var n=Co(e),r=Ra(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:qA(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Hv(n,r)}},qD=function(e){var n=e.children,r=e.defaultShowTooltip,i=vi(n,Nf),s=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},mCe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Va(n&&n.type);return r&&r.indexOf("Bar")>=0})},HD=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},gCe=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,a=s===void 0?{}:s,o=e.yAxisMap,l=o===void 0?{}:o,c=r.width,f=r.height,d=r.children,h=r.margin||{},g=vi(d,Nf),b=vi(d,Go),y=Object.keys(l).reduce(function(A,P){var S=l[P],T=S.orientation;return!S.mirror&&!S.hide?ge(ge({},A),{},Xe({},T,A[T]+S.width)):A},{left:h.left||0,right:h.right||0}),x=Object.keys(a).reduce(function(A,P){var S=a[P],T=S.orientation;return!S.mirror&&!S.hide?ge(ge({},A),{},Xe({},T,Qi(A,"".concat(T))+S.height)):A},{top:h.top||0,bottom:h.bottom||0}),w=ge(ge({},x),y),_=w.bottom;g&&(w.bottom+=g.props.height||Nf.defaultProps.height),b&&n&&(w=ywe(w,i,r,n));var E=c-w.left-w.right,O=f-w.top-w.bottom;return ge(ge({brushBottom:_},w),{},{width:Math.max(E,0),height:Math.max(O,0)})},yCe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},jT=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,a=e.validateTooltipEventTypes,o=a===void 0?["axis"]:a,l=e.axisComponents,c=e.legendContent,f=e.formatAxisMap,d=e.defaultProps,h=function(w,_){var E=_.graphicalItems,O=_.stackGroups,A=_.offset,P=_.updateId,S=_.dataStartIndex,T=_.dataEndIndex,k=w.barSize,z=w.layout,N=w.barGap,$=w.barCategoryGap,M=w.maxBarSize,Y=HD(z),q=Y.numericAxisName,ie=Y.cateAxisName,le=mCe(E),Q=[];return E.forEach(function(G,he){var ce=Zb(w.data,{graphicalItems:[G],dataStartIndex:S,dataEndIndex:T}),we=G.type.defaultProps!==void 0?ge(ge({},G.type.defaultProps),G.props):G.props,ke=we.dataKey,Ue=we.maxBarSize,ct=we["".concat(q,"Id")],ot=we["".concat(ie,"Id")],Ce={},Ye=l.reduce(function(He,Pt){var on=_["".concat(Pt.axisType,"Map")],dn=we["".concat(Pt.axisType,"Id")];on&&on[dn]||Pt.axisType==="zAxis"||Ec();var en=on[dn];return ge(ge({},He),{},Xe(Xe({},Pt.axisType,en),"".concat(Pt.axisType,"Ticks"),Ra(en)))},Ce),oe=Ye[ie],Be=Ye["".concat(ie,"Ticks")],We=O&&O[ct]&&O[ct].hasStack&&kwe(G,O[ct].stackGroups),ue=Va(G.type).indexOf("Bar")>=0,ht=Hv(oe,Be),ye=[],xe=le&&mwe({barSize:k,stackGroups:O,totalSize:yCe(Ye,ie)});if(ue){var Fe,Tt,et=gt(Ue)?M:Ue,lt=(Fe=(Tt=Hv(oe,Be,!0))!==null&&Tt!==void 0?Tt:et)!==null&&Fe!==void 0?Fe:0;ye=gwe({barGap:N,barCategoryGap:$,bandSize:lt!==ht?lt:ht,sizeList:xe[ot],maxBarSize:et}),lt!==ht&&(ye=ye.map(function(He){return ge(ge({},He),{},{position:ge(ge({},He.position),{},{offset:He.position.offset-lt/2})})}))}var Ge=G&&G.type&&G.type.getComposedData;Ge&&Q.push({props:ge(ge({},Ge(ge(ge({},Ye),{},{displayedData:ce,props:w,dataKey:ke,item:G,bandSize:ht,barPosition:ye,offset:A,stackedData:We,layout:z,dataStartIndex:S,dataEndIndex:T}))),{},Xe(Xe(Xe({key:G.key||"item-".concat(he)},q,Ye[q]),ie,Ye[ie]),"animationId",P)),childIndex:poe(G,w.children),item:G})}),Q},g=function(w,_){var E=w.props,O=w.dataStartIndex,A=w.dataEndIndex,P=w.updateId;if(!mk({props:E}))return null;var S=E.children,T=E.layout,k=E.stackOffset,z=E.data,N=E.reverseStackOrder,$=HD(T),M=$.numericAxisName,Y=$.cateAxisName,q=Zi(S,r),ie=Cwe(z,q,"".concat(M,"Id"),"".concat(Y,"Id"),k,N),le=l.reduce(function(we,ke){var Ue="".concat(ke.axisType,"Map");return ge(ge({},we),{},Xe({},Ue,hCe(E,ge(ge({},ke),{},{graphicalItems:q,stackGroups:ke.axisType===M&&ie,dataStartIndex:O,dataEndIndex:A}))))},{}),Q=gCe(ge(ge({},le),{},{props:E,graphicalItems:q}),_==null?void 0:_.legendBBox);Object.keys(le).forEach(function(we){le[we]=f(E,le[we],Q,we.replace("Map",""),n)});var G=le["".concat(Y,"Map")],he=pCe(G),ce=h(E,ge(ge({},le),{},{dataStartIndex:O,dataEndIndex:A,updateId:P,graphicalItems:q,stackGroups:ie,offset:Q}));return ge(ge({formattedGraphicalItems:ce,graphicalItems:q,offset:Q,stackGroups:ie},he),le)},b=function(x){function w(_){var E,O,A;return XPe(this,w),A=JPe(this,w,[_]),Xe(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xe(A,"accessibilityManager",new RPe),Xe(A,"handleLegendBBoxUpdate",function(P){if(P){var S=A.state,T=S.dataStartIndex,k=S.dataEndIndex,z=S.updateId;A.setState(ge({legendBBox:P},g({props:A.props,dataStartIndex:T,dataEndIndex:k,updateId:z},ge(ge({},A.state),{},{legendBBox:P}))))}}),Xe(A,"handleReceiveSyncEvent",function(P,S,T){if(A.props.syncId===P){if(T===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(S)}}),Xe(A,"handleBrushChange",function(P){var S=P.startIndex,T=P.endIndex;if(S!==A.state.dataStartIndex||T!==A.state.dataEndIndex){var k=A.state.updateId;A.setState(function(){return ge({dataStartIndex:S,dataEndIndex:T},g({props:A.props,dataStartIndex:S,dataEndIndex:T,updateId:k},A.state))}),A.triggerSyncEvent({dataStartIndex:S,dataEndIndex:T})}}),Xe(A,"handleMouseEnter",function(P){var S=A.getMouseInfo(P);if(S){var T=ge(ge({},S),{},{isTooltipActive:!0});A.setState(T),A.triggerSyncEvent(T);var k=A.props.onMouseEnter;dt(k)&&k(T,P)}}),Xe(A,"triggeredAfterMouseMove",function(P){var S=A.getMouseInfo(P),T=S?ge(ge({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(T),A.triggerSyncEvent(T);var k=A.props.onMouseMove;dt(k)&&k(T,P)}),Xe(A,"handleItemMouseEnter",function(P){A.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),Xe(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),Xe(A,"handleMouseMove",function(P){P.persist(),A.throttleTriggeredAfterMouseMove(P)}),Xe(A,"handleMouseLeave",function(P){A.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};A.setState(S),A.triggerSyncEvent(S);var T=A.props.onMouseLeave;dt(T)&&T(S,P)}),Xe(A,"handleOuterEvent",function(P){var S=hoe(P),T=Qi(A.props,"".concat(S));if(S&&dt(T)){var k,z;/.*touch.*/i.test(S)?z=A.getMouseInfo(P.changedTouches[0]):z=A.getMouseInfo(P),T((k=z)!==null&&k!==void 0?k:{},P)}}),Xe(A,"handleClick",function(P){var S=A.getMouseInfo(P);if(S){var T=ge(ge({},S),{},{isTooltipActive:!0});A.setState(T),A.triggerSyncEvent(T);var k=A.props.onClick;dt(k)&&k(T,P)}}),Xe(A,"handleMouseDown",function(P){var S=A.props.onMouseDown;if(dt(S)){var T=A.getMouseInfo(P);S(T,P)}}),Xe(A,"handleMouseUp",function(P){var S=A.props.onMouseUp;if(dt(S)){var T=A.getMouseInfo(P);S(T,P)}}),Xe(A,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),Xe(A,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&A.handleMouseDown(P.changedTouches[0])}),Xe(A,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&A.handleMouseUp(P.changedTouches[0])}),Xe(A,"handleDoubleClick",function(P){var S=A.props.onDoubleClick;if(dt(S)){var T=A.getMouseInfo(P);S(T,P)}}),Xe(A,"handleContextMenu",function(P){var S=A.props.onContextMenu;if(dt(S)){var T=A.getMouseInfo(P);S(T,P)}}),Xe(A,"triggerSyncEvent",function(P){A.props.syncId!==void 0&&Mw.emit(Rw,A.props.syncId,P,A.eventEmitterSymbol)}),Xe(A,"applySyncEvent",function(P){var S=A.props,T=S.layout,k=S.syncMethod,z=A.state.updateId,N=P.dataStartIndex,$=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)A.setState(ge({dataStartIndex:N,dataEndIndex:$},g({props:A.props,dataStartIndex:N,dataEndIndex:$,updateId:z},A.state)));else if(P.activeTooltipIndex!==void 0){var M=P.chartX,Y=P.chartY,q=P.activeTooltipIndex,ie=A.state,le=ie.offset,Q=ie.tooltipTicks;if(!le)return;if(typeof k=="function")q=k(Q,P);else if(k==="value"){q=-1;for(var G=0;G<Q.length;G++)if(Q[G].value===P.activeLabel){q=G;break}}var he=ge(ge({},le),{},{x:le.left,y:le.top}),ce=Math.min(M,he.x+he.width),we=Math.min(Y,he.y+he.height),ke=Q[q]&&Q[q].value,Ue=GS(A.state,A.props.data,q),ct=Q[q]?{x:T==="horizontal"?Q[q].coordinate:ce,y:T==="horizontal"?we:Q[q].coordinate}:DF;A.setState(ge(ge({},P),{},{activeLabel:ke,activeCoordinate:ct,activePayload:Ue,activeTooltipIndex:q}))}else A.setState(P)}),Xe(A,"renderCursor",function(P){var S,T=A.state,k=T.isTooltipActive,z=T.activeCoordinate,N=T.activePayload,$=T.offset,M=T.activeTooltipIndex,Y=T.tooltipAxisBandSize,q=A.getTooltipEventType(),ie=(S=P.props.active)!==null&&S!==void 0?S:k,le=A.props.layout,Q=P.key||"_recharts-cursor";return B.createElement(UPe,{key:Q,activeCoordinate:z,activePayload:N,activeTooltipIndex:M,chartName:n,element:P,isActive:ie,layout:le,offset:$,tooltipAxisBandSize:Y,tooltipEventType:q})}),Xe(A,"renderPolarAxis",function(P,S,T){var k=Qi(P,"type.axisType"),z=Qi(A.state,"".concat(k,"Map")),N=P.type.defaultProps,$=N!==void 0?ge(ge({},N),P.props):P.props,M=z&&z[$["".concat(k,"Id")]];return L.cloneElement(P,ge(ge({},M),{},{className:Et(k,M.className),key:P.key||"".concat(S,"-").concat(T),ticks:Ra(M,!0)}))}),Xe(A,"renderPolarGrid",function(P){var S=P.props,T=S.radialLines,k=S.polarAngles,z=S.polarRadius,N=A.state,$=N.radiusAxisMap,M=N.angleAxisMap,Y=Co($),q=Co(M),ie=q.cx,le=q.cy,Q=q.innerRadius,G=q.outerRadius;return L.cloneElement(P,{polarAngles:Array.isArray(k)?k:Ra(q,!0).map(function(he){return he.coordinate}),polarRadius:Array.isArray(z)?z:Ra(Y,!0).map(function(he){return he.coordinate}),cx:ie,cy:le,innerRadius:Q,outerRadius:G,key:P.key||"polar-grid",radialLines:T})}),Xe(A,"renderLegend",function(){var P=A.state.formattedGraphicalItems,S=A.props,T=S.children,k=S.width,z=S.height,N=A.props.margin||{},$=k-(N.left||0)-(N.right||0),M=wV({children:T,formattedGraphicalItems:P,legendWidth:$,legendContent:c});if(!M)return null;var Y=M.item,q=UD(M,WPe);return L.cloneElement(Y,ge(ge({},q),{},{chartWidth:k,chartHeight:z,margin:N,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),Xe(A,"renderTooltip",function(){var P,S=A.props,T=S.children,k=S.accessibilityLayer,z=vi(T,ln);if(!z)return null;var N=A.state,$=N.isTooltipActive,M=N.activeCoordinate,Y=N.activePayload,q=N.activeLabel,ie=N.offset,le=(P=z.props.active)!==null&&P!==void 0?P:$;return L.cloneElement(z,{viewBox:ge(ge({},ie),{},{x:ie.left,y:ie.top}),active:le,label:q,payload:le?Y:[],coordinate:M,accessibilityLayer:k})}),Xe(A,"renderBrush",function(P){var S=A.props,T=S.margin,k=S.data,z=A.state,N=z.offset,$=z.dataStartIndex,M=z.dataEndIndex,Y=z.updateId;return L.cloneElement(P,{key:P.key||"_recharts-brush",onChange:zg(A.handleBrushChange,P.props.onChange),data:k,x:Pe(P.props.x)?P.props.x:N.left,y:Pe(P.props.y)?P.props.y:N.top+N.height+N.brushBottom-(T.bottom||0),width:Pe(P.props.width)?P.props.width:N.width,startIndex:$,endIndex:M,updateId:"brush-".concat(Y)})}),Xe(A,"renderReferenceElement",function(P,S,T){if(!P)return null;var k=A,z=k.clipPathId,N=A.state,$=N.xAxisMap,M=N.yAxisMap,Y=N.offset,q=P.type.defaultProps||{},ie=P.props,le=ie.xAxisId,Q=le===void 0?q.xAxisId:le,G=ie.yAxisId,he=G===void 0?q.yAxisId:G;return L.cloneElement(P,{key:P.key||"".concat(S,"-").concat(T),xAxis:$[Q],yAxis:M[he],viewBox:{x:Y.left,y:Y.top,width:Y.width,height:Y.height},clipPathId:z})}),Xe(A,"renderActivePoints",function(P){var S=P.item,T=P.activePoint,k=P.basePoint,z=P.childIndex,N=P.isRange,$=[],M=S.props.key,Y=S.item.type.defaultProps!==void 0?ge(ge({},S.item.type.defaultProps),S.item.props):S.item.props,q=Y.activeDot,ie=Y.dataKey,le=ge(ge({index:z,dataKey:ie,cx:T.x,cy:T.y,r:4,fill:vT(S.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},pt(q,!1)),yv(q));return $.push(w.renderActiveDot(q,le,"".concat(M,"-activePoint-").concat(z))),k?$.push(w.renderActiveDot(q,ge(ge({},le),{},{cx:k.x,cy:k.y}),"".concat(M,"-basePoint-").concat(z))):N&&$.push(null),$}),Xe(A,"renderGraphicChild",function(P,S,T){var k=A.filterFormatItem(P,S,T);if(!k)return null;var z=A.getTooltipEventType(),N=A.state,$=N.isTooltipActive,M=N.tooltipAxis,Y=N.activeTooltipIndex,q=N.activeLabel,ie=A.props.children,le=vi(ie,ln),Q=k.props,G=Q.points,he=Q.isRange,ce=Q.baseLine,we=k.item.type.defaultProps!==void 0?ge(ge({},k.item.type.defaultProps),k.item.props):k.item.props,ke=we.activeDot,Ue=we.hide,ct=we.activeBar,ot=we.activeShape,Ce=!!(!Ue&&$&&le&&(ke||ct||ot)),Ye={};z!=="axis"&&le&&le.props.trigger==="click"?Ye={onClick:zg(A.handleItemMouseEnter,P.props.onClick)}:z!=="axis"&&(Ye={onMouseLeave:zg(A.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:zg(A.handleItemMouseEnter,P.props.onMouseEnter)});var oe=L.cloneElement(P,ge(ge({},k.props),Ye));function Be(Pt){return typeof M.dataKey=="function"?M.dataKey(Pt.payload):null}if(Ce)if(Y>=0){var We,ue;if(M.dataKey&&!M.allowDuplicatedCategory){var ht=typeof M.dataKey=="function"?Be:"payload.".concat(M.dataKey.toString());We=gv(G,ht,q),ue=he&&ce&&gv(ce,ht,q)}else We=G==null?void 0:G[Y],ue=he&&ce&&ce[Y];if(ot||ct){var ye=P.props.activeIndex!==void 0?P.props.activeIndex:Y;return[L.cloneElement(P,ge(ge(ge({},k.props),Ye),{},{activeIndex:ye})),null,null]}if(!gt(We))return[oe].concat(Wf(A.renderActivePoints({item:k,activePoint:We,basePoint:ue,childIndex:Y,isRange:he})))}else{var xe,Fe=(xe=A.getItemByXY(A.state.activeCoordinate))!==null&&xe!==void 0?xe:{graphicalItem:oe},Tt=Fe.graphicalItem,et=Tt.item,lt=et===void 0?P:et,Ge=Tt.childIndex,He=ge(ge(ge({},k.props),Ye),{},{activeIndex:Ge});return[L.cloneElement(lt,He),null,null]}return he?[oe,null,null]:[oe,null]}),Xe(A,"renderCustomized",function(P,S,T){return L.cloneElement(P,ge(ge({key:"recharts-customized-".concat(T)},A.props),A.state))}),Xe(A,"renderMap",{CartesianGrid:{handler:Wg,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:Wg},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:Wg},YAxis:{handler:Wg},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((E=_.id)!==null&&E!==void 0?E:dd("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=wz(A.triggeredAfterMouseMove,(O=_.throttleDelay)!==null&&O!==void 0?O:1e3/60),A.state={},A}return nCe(w,x),ZPe(w,[{key:"componentDidMount",value:function(){var E,O;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var E=this.props,O=E.children,A=E.data,P=E.height,S=E.layout,T=vi(O,ln);if(T){var k=T.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var z=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,N=GS(this.state,A,k,z),$=this.state.tooltipTicks[k].coordinate,M=(this.state.offset.top+P)/2,Y=S==="horizontal",q=Y?{x:$,y:M}:{y:$,x:M},ie=this.state.formattedGraphicalItems.find(function(Q){var G=Q.item;return G.type.name==="Scatter"});ie&&(q=ge(ge({},q),ie.props.points[k].tooltipPosition),N=ie.props.points[k].tooltipPayload);var le={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:z,activePayload:N,activeCoordinate:q};this.setState(le),this.renderCursor(T),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(E,O){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==O.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==E.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==E.margin){var A,P;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(E){T_([vi(E.children,ln)],[vi(this.props.children,ln)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var E=vi(this.props.children,ln);if(E&&typeof E.props.shared=="boolean"){var O=E.props.shared?"axis":"item";return o.indexOf(O)>=0?O:s}return s}},{key:"getMouseInfo",value:function(E){if(!this.container)return null;var O=this.container,A=O.getBoundingClientRect(),P=Vye(A),S={chartX:Math.round(E.pageX-P.left),chartY:Math.round(E.pageY-P.top)},T=A.width/O.offsetWidth||1,k=this.inRange(S.chartX,S.chartY,T);if(!k)return null;var z=this.state,N=z.xAxisMap,$=z.yAxisMap,M=this.getTooltipEventType(),Y=KD(this.state,this.props.data,this.props.layout,k);if(M!=="axis"&&N&&$){var q=Co(N).scale,ie=Co($).scale,le=q&&q.invert?q.invert(S.chartX):null,Q=ie&&ie.invert?ie.invert(S.chartY):null;return ge(ge({},S),{},{xValue:le,yValue:Q},Y)}return Y?ge(ge({},S),Y):null}},{key:"inRange",value:function(E,O){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,S=E/A,T=O/A;if(P==="horizontal"||P==="vertical"){var k=this.state.offset,z=S>=k.left&&S<=k.left+k.width&&T>=k.top&&T<=k.top+k.height;return z?{x:S,y:T}:null}var N=this.state,$=N.angleAxisMap,M=N.radiusAxisMap;if($&&M){var Y=Co($);return EN({x:S,y:T},Y)}return null}},{key:"parseEventsOfWrapper",value:function(){var E=this.props.children,O=this.getTooltipEventType(),A=vi(E,ln),P={};A&&O==="axis"&&(A.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=yv(this.props,this.handleOuterEvent);return ge(ge({},S),P)}},{key:"addListener",value:function(){Mw.on(Rw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Mw.removeListener(Rw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(E,O,A){for(var P=this.state.formattedGraphicalItems,S=0,T=P.length;S<T;S++){var k=P[S];if(k.item===E||k.props.key===E.key||O===Va(k.item.type)&&A===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var E=this.clipPathId,O=this.state.offset,A=O.left,P=O.top,S=O.height,T=O.width;return B.createElement("defs",null,B.createElement("clipPath",{id:E},B.createElement("rect",{x:A,y:P,height:S,width:T})))}},{key:"getXScales",value:function(){var E=this.state.xAxisMap;return E?Object.entries(E).reduce(function(O,A){var P=BD(A,2),S=P[0],T=P[1];return ge(ge({},O),{},Xe({},S,T.scale))},{}):null}},{key:"getYScales",value:function(){var E=this.state.yAxisMap;return E?Object.entries(E).reduce(function(O,A){var P=BD(A,2),S=P[0],T=P[1];return ge(ge({},O),{},Xe({},S,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(E){var O;return(O=this.state.xAxisMap)===null||O===void 0||(O=O[E])===null||O===void 0?void 0:O.scale}},{key:"getYScaleByAxisId",value:function(E){var O;return(O=this.state.yAxisMap)===null||O===void 0||(O=O[E])===null||O===void 0?void 0:O.scale}},{key:"getItemByXY",value:function(E){var O=this.state,A=O.formattedGraphicalItems,P=O.activeItem;if(A&&A.length)for(var S=0,T=A.length;S<T;S++){var k=A[S],z=k.props,N=k.item,$=N.type.defaultProps!==void 0?ge(ge({},N.type.defaultProps),N.props):N.props,M=Va(N.type);if(M==="Bar"){var Y=(z.data||[]).find(function(Q){return SSe(E,Q)});if(Y)return{graphicalItem:k,payload:Y}}else if(M==="RadialBar"){var q=(z.data||[]).find(function(Q){return EN(E,Q)});if(q)return{graphicalItem:k,payload:q}}else if(Wb(k,P)||Kb(k,P)||Yp(k,P)){var ie=T2e({graphicalItem:k,activeTooltipItem:P,itemData:$.data}),le=$.activeIndex===void 0?ie:$.activeIndex;return{graphicalItem:ge(ge({},k),{},{childIndex:le}),payload:Yp(k,P)?$.data[ie]:k.props.data[ie]}}}return null}},{key:"render",value:function(){var E=this;if(!mk(this))return null;var O=this.props,A=O.children,P=O.className,S=O.width,T=O.height,k=O.style,z=O.compact,N=O.title,$=O.desc,M=UD(O,KPe),Y=pt(M,!1);if(z)return B.createElement(_D,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},B.createElement(C_,Lu({},Y,{width:S,height:T,title:N,desc:$}),this.renderClipPath(),yk(A,this.renderMap)));if(this.props.accessibilityLayer){var q,ie;Y.tabIndex=(q=this.props.tabIndex)!==null&&q!==void 0?q:0,Y.role=(ie=this.props.role)!==null&&ie!==void 0?ie:"application",Y.onKeyDown=function(Q){E.accessibilityManager.keyboardEvent(Q)},Y.onFocus=function(){E.accessibilityManager.focus()}}var le=this.parseEventsOfWrapper();return B.createElement(_D,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},B.createElement("div",Lu({className:Et("recharts-wrapper",P),style:ge({position:"relative",cursor:"default",width:S,height:T},k)},le,{ref:function(G){E.container=G}}),B.createElement(C_,Lu({},Y,{width:S,height:T,title:N,desc:$,style:lCe}),this.renderClipPath(),yk(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(L.Component);Xe(b,"displayName",n),Xe(b,"defaultProps",ge({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Xe(b,"getDerivedStateFromProps",function(x,w){var _=x.dataKey,E=x.data,O=x.children,A=x.width,P=x.height,S=x.layout,T=x.stackOffset,k=x.margin,z=w.dataStartIndex,N=w.dataEndIndex;if(w.updateId===void 0){var $=qD(x);return ge(ge(ge({},$),{},{updateId:0},g(ge(ge({props:x},$),{},{updateId:0}),w)),{},{prevDataKey:_,prevData:E,prevWidth:A,prevHeight:P,prevLayout:S,prevStackOffset:T,prevMargin:k,prevChildren:O})}if(_!==w.prevDataKey||E!==w.prevData||A!==w.prevWidth||P!==w.prevHeight||S!==w.prevLayout||T!==w.prevStackOffset||!Yu(k,w.prevMargin)){var M=qD(x),Y={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},q=ge(ge({},KD(w,E,S)),{},{updateId:w.updateId+1}),ie=ge(ge(ge({},M),Y),q);return ge(ge(ge({},ie),g(ge({props:x},ie),w)),{},{prevDataKey:_,prevData:E,prevWidth:A,prevHeight:P,prevLayout:S,prevStackOffset:T,prevMargin:k,prevChildren:O})}if(!T_(O,w.prevChildren)){var le,Q,G,he,ce=vi(O,Nf),we=ce&&(le=(Q=ce.props)===null||Q===void 0?void 0:Q.startIndex)!==null&&le!==void 0?le:z,ke=ce&&(G=(he=ce.props)===null||he===void 0?void 0:he.endIndex)!==null&&G!==void 0?G:N,Ue=we!==z||ke!==N,ct=!gt(E),ot=ct&&!Ue?w.updateId:w.updateId+1;return ge(ge({updateId:ot},g(ge(ge({props:x},w),{},{updateId:ot,dataStartIndex:we,dataEndIndex:ke}),w)),{},{prevChildren:O,dataStartIndex:we,dataEndIndex:ke})}return null}),Xe(b,"renderActiveDot",function(x,w,_){var E;return L.isValidElement(x)?E=L.cloneElement(x,w):dt(x)?E=x(w):E=B.createElement(Ub,w),B.createElement(Zt,{className:"recharts-active-dot",key:_},E)});var y=L.forwardRef(function(w,_){return B.createElement(b,Lu({},w,{ref:_}))});return y.displayName=b.displayName,y},RF=jT({chartName:"LineChart",GraphicalChild:Tc,axisComponents:[{axisType:"xAxis",AxisComp:Rn},{axisType:"yAxis",AxisComp:$n}],formatAxisMap:xT}),Gi=jT({chartName:"BarChart",GraphicalChild:er,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Rn},{axisType:"yAxis",AxisComp:$n}],formatAxisMap:xT}),vCe=jT({chartName:"AreaChart",GraphicalChild:vl,axisComponents:[{axisType:"xAxis",AxisComp:Rn},{axisType:"yAxis",AxisComp:$n}],formatAxisMap:xT});const bCe=t=>{const[e,n]=L.useState([]),[r,i]=L.useState([]),[s,a]=L.useState(!0);return L.useEffect(()=>{if(!t)return;(async()=>{a(!0);try{const c=w3(),[f,d]=await Promise.all([c.weighings.where("goatId").equals(t).toArray(),c.parturitions.where("goatId").equals(t).toArray()]);n(f),i(d.sort((h,g)=>new Date(h.parturitionDate).getTime()-new Date(g.parturitionDate).getTime()))}catch(c){console.error(`Error al cargar datos para ${t}:`,c)}finally{a(!1)}})()},[t]),{...L.useMemo(()=>{if(r.length===0)return{allLactations:[],parturitionIntervals:[],lastWeighingDate:null};const l=r.map((d,h)=>{const g=new Date(d.parturitionDate),b=h<r.length-1?new Date(r[h+1].parturitionDate):new Date(9999,11,31),y=e.filter(P=>{const S=new Date(P.date);return S>=g&&S<b}),x=y.map(P=>({del:Pm(d.parturitionDate,P.date),kg:P.kg})).sort((P,S)=>P.del-S.del),w=y.reduce((P,S)=>P+S.kg,0),_=y.length>0?w/y.length:0,E=x.reduce((P,S)=>S.kg>P.kg?S:P,{kg:0,del:0}),O=x[x.length-1],A=O?O.del:0;return{parturitionDate:d.parturitionDate,weighings:y,lactationCurve:x,averageProduction:_,peakProduction:E,totalDays:A}}),c=r.slice(1).map((d,h)=>{const g=r[h],b=new Date(d.parturitionDate).getTime()-new Date(g.parturitionDate).getTime();return{period:`${g.parturitionDate.substring(0,4)} - ${d.parturitionDate.substring(0,4)}`,days:Math.round(b/(1e3*60*60*24))}}),f=e.sort((d,h)=>new Date(h.date).getTime()-new Date(d.date).getTime())[0];return{allLactations:l,parturitionIntervals:c,lastWeighingDate:(f==null?void 0:f.date)||null}},[e,r]),isLoading:s}},xCe=(t,e,n,r)=>{const[i,s]=L.useState([]),[a,o]=L.useState(!1);return L.useEffect(()=>{if(!t||!e.length){s([]);return}(()=>{o(!0);let c=[];if(t==="PRIMIPARAS_HISTORICAL"){const g=n.reduce((b,y)=>(b[y.goatId]=(b[y.goatId]||0)+1,b),{});c=e.filter(b=>g[b.id]===1).map(b=>b.id)}else if(t==="MULTIPARAS_HISTORICAL"){const g=n.reduce((b,y)=>(b[y.goatId]=(b[y.goatId]||0)+1,b),{});c=e.filter(b=>g[b.id]>1).map(b=>b.id)}const f=r.filter(g=>c.includes(g.goatId)),d={};f.forEach(g=>{const b=n.filter(x=>x.goatId===g.goatId&&new Date(g.date)>=new Date(x.parturitionDate)).sort((x,w)=>new Date(w.parturitionDate).getTime()-new Date(x.parturitionDate).getTime())[0];if(!b)return;const y=Pm(b.parturitionDate,g.date);d[y]||(d[y]={totalKg:0,count:0}),d[y].totalKg+=g.kg,d[y].count++});const h=Object.entries(d).map(([g,b])=>({del:parseInt(g),kg:b.totalKg/b.count})).sort((g,b)=>g.del-b.del);s(h),o(!1)})()},[t,e,n,r]),{comparativeCurve:i,isLoading:a}},Kf=({active:t,payload:e,label:n})=>{if(t&&e&&e.length){const r=e[0].payload.name==="Promedio Rebaño";return"range"in e[0].payload?u.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[u.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Rango: ",e[0].payload.range," Kg"]}),u.jsxs("p",{className:"font-bold text-base",children:["Nº de Cabras: ",e[0].value]})]}):u.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[u.jsx("p",{className:"label text-brand-light-gray text-sm",children:r?`Días en Leche (DEL): ${n}`:`DEL: ${n}`}),u.jsx("p",{className:"font-bold text-base",children:r?`Promedio: ${e[0].value.toFixed(2)} Kg`:`Producción: ${e[0].value.toFixed(2)} Kg`})]})}return null},Kg=({active:t,payload:e,label:n,context:r})=>{if(t&&e&&e.length){let i="",s="";switch(r){case"average":i=`Lactancia del ${n}`,s=`Promedio: ${e[0].value.toFixed(2)} Kg`;break;case"peak":i=`Lactancia del ${n}`,s=`Pico: ${e[0].value.toFixed(2)} Kg`;break;case"del":i=`Lactancia del ${n}`,s=`Duración: ${e[0].value} días`;break;case"interval":i=`Período ${n}`,s=`Intervalo: ${e[0].value} días`;break}return u.jsxs("div",{className:"bg-black/60 backdrop-blur-xl p-3 rounded-lg border border-zinc-700 text-white",children:[u.jsx("p",{className:"label text-zinc-400 text-sm font-medium",children:i}),u.jsx("p",{className:"font-semibold text-base",children:s})]})}return null};function wCe({animalId:t,onBack:e}){const{animals:n,parturitions:r,weighings:i,startDryingProcess:s,setLactationAsDry:a}=At(),{allLactations:o,parturitionIntervals:l,lastWeighingDate:c,isLoading:f}=bCe(t),[d,h]=L.useState(null),[g,b]=L.useState(null),[y,x]=L.useState(!1),{comparativeCurve:w,isLoading:_}=xCe(g,n,r,i),E=L.useMemo(()=>{if(o.length===0)return null;const N=o[o.length-1],$=r.find(M=>M.parturitionDate===N.parturitionDate&&M.goatId===t);return{...N,id:$==null?void 0:$.id,status:$==null?void 0:$.status}},[o,r,t]),O=L.useMemo(()=>E?Pm(E.parturitionDate,new Date().toISOString().split("T")[0]):"N/A",[E]),A=L.useMemo(()=>({average:o.map(N=>({name:new Date(N.parturitionDate).getFullYear().toString(),value:N.averageProduction})),peak:o.map(N=>({name:new Date(N.parturitionDate).getFullYear().toString(),value:N.peakProduction.kg})),del:o.map(N=>({name:new Date(N.parturitionDate).getFullYear().toString(),value:N.totalDays})),interval:l.map(N=>({name:N.period,value:N.days}))}),[o,l]);if(f)return u.jsx("div",{className:"text-center p-10",children:u.jsxs("h1",{className:"text-2xl text-zinc-400",children:["Cargando perfil de lactancia de ",t,"..."]})});const P=o.length>0?o[o.length-1]:null,S=l.length>0?l[l.length-1].days:0,T=o.length===1,k=()=>{const N=!y;x(N),N||b(null)},z=N=>{b($=>$===N?null:N)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-4 animate-fade-in",children:[u.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[u.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"text-center flex-grow",children:[u.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:t}),u.jsx("p",{className:"text-xl text-zinc-400",children:"Perfil de Lactancia"})]}),u.jsx("div",{className:"w-8"})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[u.jsxs("button",{onClick:()=>h("average"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[u.jsx(xm,{size:14}),u.jsx("span",{children:"Promedio"})]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[(P==null?void 0:P.averageProduction.toFixed(2))||"N/A"," ",u.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),u.jsxs("button",{onClick:()=>h("peak"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[u.jsx(Dc,{size:14}),u.jsx("span",{children:"Pico Prod."})]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[(P==null?void 0:P.peakProduction.kg.toFixed(2))||"N/A"," ",u.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),u.jsxs("button",{onClick:()=>h("del"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[u.jsx(VH,{size:14}),u.jsx("span",{children:"DEL"})]}),u.jsx("p",{className:"text-2xl font-bold text-white",children:O})]}),u.jsxs("button",{onClick:()=>h("interval"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[u.jsx(aG,{size:14}),u.jsx("span",{children:"Int. Partos"})]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[S," ",u.jsx("span",{className:"text-lg text-zinc-400",children:"días"})]})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[u.jsx(LH,{size:14}),u.jsx("span",{children:"Últ. Pesaje"})]}),u.jsx("p",{className:"text-xl font-bold text-white",children:c?new Date(c).toLocaleDateString():"N/A"})]})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border relative",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center border-b border-brand-border pb-2 mb-4 gap-2",children:[u.jsxs("h3",{className:"text-zinc-400 font-semibold text-xs uppercase",children:["Curva de Lactancia Actual (Parto: ",(P==null?void 0:P.parturitionDate)||"N/A",")"]}),u.jsxs("div",{className:"flex items-center space-x-2 self-end sm:self-center",children:[u.jsx("span",{className:"text-xs font-semibold text-zinc-300",children:"Comparar:"}),u.jsx("button",{onClick:k,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${y?"bg-amber-500":"bg-zinc-700"}`,children:u.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${y?"translate-x-5":"translate-x-0"}`})}),y&&u.jsxs("div",{className:"flex items-center space-x-2 animate-fade-in",children:[u.jsx("button",{onClick:()=>z("PRIMIPARAS_HISTORICAL"),className:`px-2 py-1 text-xs rounded-md transition-colors ${g==="PRIMIPARAS_HISTORICAL"?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${T?"ring-2 ring-amber-400":""}`,children:"vs Primíparas"}),u.jsx("button",{onClick:()=>z("MULTIPARAS_HISTORICAL"),className:`px-2 py-1 text-xs rounded-md transition-colors ${g==="MULTIPARAS_HISTORICAL"?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${T?"":"ring-2 ring-amber-400"}`,children:"vs Multíparas"})]})]})]}),u.jsxs("div",{className:"w-full h-56 -ml-4",children:[u.jsx(Mr,{children:u.jsxs(RF,{margin:{top:5,right:20,left:-10,bottom:5},children:[u.jsx(Lm,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),u.jsx(Rn,{dataKey:"del",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx($n,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx(ln,{content:u.jsx(Kf,{})}),u.jsx(Go,{verticalAlign:"top",height:36,iconType:"plainline"}),u.jsx(Tc,{type:"monotone",data:P==null?void 0:P.lactationCurve,dataKey:"kg",name:t,stroke:"#FBBF24",strokeWidth:2.5,dot:!1}),g&&!_&&u.jsx(Tc,{type:"monotone",data:w,dataKey:"kg",name:"Promedio del Grupo",stroke:"#34d399",strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})}),_&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm rounded-xl text-white",children:"Calculando comparación..."})]})]}),(E==null?void 0:E.id)&&u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsx("h3",{className:"text-zinc-400 font-semibold text-xs uppercase mb-3",children:"Gestión de Lactancia Actual"}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[E.status==="activa"&&u.jsxs("button",{onClick:()=>s(E.id),className:"w-full flex items-center justify-center space-x-2 bg-blue-600/80 hover:bg-blue-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[u.jsx(RE,{size:20}),u.jsx("span",{children:"Iniciar Proceso de Secado"})]}),E.status==="en-secado"&&u.jsxs("button",{onClick:()=>a(E.id),className:"w-full flex items-center justify-center space-x-2 bg-gray-600/80 hover:bg-gray-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[u.jsx(eb,{size:20}),u.jsx("span",{children:"Declarar Lactancia como Seca"})]}),E.status==="seca"&&u.jsx("div",{className:"w-full text-center p-3 bg-black/20 rounded-xl",children:u.jsx("p",{className:"font-semibold text-green-400",children:"Esta lactancia ha finalizado."})})]}),E.status==="en-secado"&&u.jsx("p",{className:"text-center text-xs text-zinc-400 mt-2",children:"El animal está en su período de secado."})]})]}),u.jsx(St,{isOpen:d==="average",onClose:()=>h(null),title:"Historial de Promedios",children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-full h-48 -ml-4",children:u.jsx(Mr,{children:u.jsxs(Gi,{data:A.average,margin:{top:5,right:20,left:-20,bottom:0},children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"modalBarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#FBBF24",stopOpacity:.8}),u.jsx("stop",{offset:"100%",stopColor:"#FBBF24",stopOpacity:.2})]})}),u.jsx(Rn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),u.jsx($n,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),u.jsx(ln,{content:u.jsx(Kg,{context:"average"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),u.jsx(er,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradient)"})]})})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),u.jsx("ul",{className:"space-y-1",children:o.slice().reverse().map(N=>u.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[u.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",N.parturitionDate]}),u.jsxs("span",{className:"text-base font-semibold text-white",children:[N.averageProduction.toFixed(2)," Kg"]})]},N.parturitionDate))})]})]})}),u.jsx(St,{isOpen:d==="peak",onClose:()=>h(null),title:"Historial de Picos de Producción",children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-full h-48 -ml-4",children:u.jsx(Mr,{children:u.jsxs(Gi,{data:A.peak,margin:{top:5,right:20,left:-20,bottom:0},children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"modalBarGradientPeak",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#10B981",stopOpacity:.8}),u.jsx("stop",{offset:"100%",stopColor:"#10B981",stopOpacity:.2})]})}),u.jsx(Rn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),u.jsx($n,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),u.jsx(ln,{content:u.jsx(Kg,{context:"peak"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),u.jsx(er,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientPeak)"})]})})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),u.jsx("ul",{className:"space-y-1",children:o.slice().reverse().map(N=>u.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[u.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",N.parturitionDate]}),u.jsxs("span",{className:"text-base font-semibold text-white",children:[N.peakProduction.kg.toFixed(2)," Kg ",u.jsxs("span",{className:"font-normal text-zinc-400",children:["(Día ",N.peakProduction.del,")"]})]})]},N.parturitionDate))})]})]})}),u.jsx(St,{isOpen:d==="del",onClose:()=>h(null),title:"Historial de Duración de Lactancias",children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-full h-48 -ml-4",children:u.jsx(Mr,{children:u.jsxs(Gi,{data:A.del,margin:{top:5,right:20,left:-20,bottom:0},children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"modalBarGradientDel",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:.8}),u.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:.2})]})}),u.jsx(Rn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),u.jsx($n,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),u.jsx(ln,{content:u.jsx(Kg,{context:"del"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),u.jsx(er,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientDel)"})]})})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),u.jsx("ul",{className:"space-y-1",children:o.slice().reverse().map(N=>u.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[u.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",N.parturitionDate]}),u.jsxs("span",{className:"text-base font-semibold text-white",children:[N.totalDays," días"]})]},N.parturitionDate))})]})]})}),u.jsx(St,{isOpen:d==="interval",onClose:()=>h(null),title:"Historial de Intervalos entre Partos",children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-full h-48 -ml-4",children:u.jsx(Mr,{children:u.jsxs(Gi,{data:A.interval,margin:{top:5,right:20,left:-20,bottom:0},children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"modalBarGradientInt",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#8B5CF6",stopOpacity:.8}),u.jsx("stop",{offset:"100%",stopColor:"#8B5CF6",stopOpacity:.2})]})}),u.jsx(Rn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),u.jsx($n,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),u.jsx(ln,{content:u.jsx(Kg,{context:"interval"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),u.jsx(er,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientInt)"})]})})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles de Intervalos"}),u.jsx("ul",{className:"space-y-1",children:l.slice().reverse().map(N=>u.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[u.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Período ",N.period]}),u.jsxs("span",{className:"text-base font-semibold text-white",children:[N.days," días"]})]},N.period))})]})]})})]})}const _Ce=({plan:t})=>u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsx("p",{className:"font-semibold text-white",children:t.details}),u.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Iniciado el: ",new Date(t.startDate+"T00:00:00").toLocaleDateString("es-VE")]})]});function SCe({lotName:t,onBack:e}){const{feedingPlans:n,addFeedingPlan:r}=At(),[i,s]=L.useState(""),[a,o]=L.useState(new Date().toISOString().split("T")[0]),[l,c]=L.useState(null),f=L.useMemo(()=>n.filter(h=>h.lotName===t).sort((h,g)=>new Date(g.startDate).getTime()-new Date(h.startDate).getTime()),[n,t]),d=async h=>{if(h.preventDefault(),!i.trim()){c({type:"error",text:"Los detalles del plan no pueden estar vacíos."});return}try{await r({lotName:t,details:i,startDate:a}),c({type:"success",text:"Plan de alimentación guardado con éxito."}),s("")}catch(g){c({type:"error",text:"No se pudo guardar el plan."}),console.error(g)}};return u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[u.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[u.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"text-center flex-grow",children:[u.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Alimentación: ",t]}),u.jsx("p",{className:"text-lg text-zinc-400",children:"Planes de Nutrición del Lote"})]}),u.jsx("div",{className:"w-8"})]}),u.jsxs("form",{onSubmit:d,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[u.jsx(fa,{size:20})," Asignar Nuevo Plan"]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"planDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Plan (Ej: 2kg de concentrado/día)"}),u.jsx("textarea",{id:"planDetails",rows:3,value:i,onChange:h=>s(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"planStartDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),u.jsx("input",{id:"planStartDate",type:"date",value:a,onChange:h=>o(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),u.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Plan"}),l&&u.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${l.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[l.type==="success"?u.jsx(ul,{size:18}):u.jsx(zr,{size:18}),u.jsx("span",{children:l.text})]})]}),u.jsxs("div",{className:"space-y-4 pt-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[u.jsx(E3,{size:20})," Historial de Planes"]}),f.length>0?u.jsx("div",{className:"space-y-2",children:f.map(h=>u.jsx(_Ce,{plan:h},h.id))}):u.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:u.jsx("p",{className:"text-zinc-500",children:"No hay planes de alimentación registrados para este lote."})})]})]})}const ECe=({event:t})=>u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsx("p",{className:"font-semibold text-white",children:t.details}),u.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Aplicado el: ",new Date(t.date+"T00:00:00").toLocaleDateString("es-VE")]})]});function ACe({lotName:t,onBack:e}){const{events:n,addBatchEvent:r}=At(),[i,s]=L.useState(""),[a,o]=L.useState(new Date().toISOString().split("T")[0]),[l,c]=L.useState(null),f=L.useMemo(()=>{const h=n.filter(g=>g.lotName===t&&g.type==="Tratamiento").reduce((g,b)=>{const y=`${b.date}-${b.details}`;return g[y]||(g[y]=b),g},{});return Object.values(h).sort((g,b)=>new Date(b.date).getTime()-new Date(g.date).getTime())},[n,t]),d=async h=>{if(h.preventDefault(),c(null),!i.trim()){c({type:"error",text:"Los detalles del tratamiento no pueden estar vacíos."});return}try{await r({lotName:t,details:i,date:a,type:"Tratamiento"}),c({type:"success",text:"Tratamiento registrado con éxito para todo el lote."}),s("")}catch(g){c({type:"error",text:"No se pudo registrar el tratamiento."}),console.error(g)}};return u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[u.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[u.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"text-center flex-grow",children:[u.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Tratamientos: ",t]}),u.jsx("p",{className:"text-lg text-zinc-400",children:"Sanidad Colectiva del Lote"})]}),u.jsx("div",{className:"w-8"})]}),u.jsxs("form",{onSubmit:d,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[u.jsx(fa,{size:20})," Registrar Tratamiento al Lote"]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"treatmentDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Tratamiento (Ej: Vacuna Triple)"}),u.jsx("textarea",{id:"treatmentDetails",rows:3,value:i,onChange:h=>s(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"treatmentDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),u.jsx("input",{id:"treatmentDate",type:"date",value:a,onChange:h=>o(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),u.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Tratamiento"}),l&&u.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${l.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[l.type==="success"?u.jsx(ul,{size:18}):u.jsx(zr,{size:18}),u.jsx("span",{children:l.text})]})]}),u.jsxs("div",{className:"space-y-4 pt-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[u.jsx(L3,{size:20})," Historial de Tratamientos del Lote"]}),f.length>0?u.jsx("div",{className:"space-y-2",children:f.map(h=>u.jsx(ECe,{event:h},h.id))}):u.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:u.jsx("p",{className:"text-zinc-500",children:"No hay tratamientos registrados para este lote."})})]})]})}const hu=({icon:t,label:e,value:n,unit:r,colorClass:i})=>u.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border ${i||""}`,children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[u.jsx(t,{size:14}),u.jsx("span",{children:e})]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[n," ",u.jsx("span",{className:"text-lg text-zinc-400",children:r})]})]}),TCe=({active:t,payload:e,label:n})=>t&&e&&e.length?u.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[u.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Edad: ",n," días"]}),e.map(r=>u.jsxs("p",{style:{color:r.color},className:"font-bold text-base",children:[r.name,": ",r.value.toFixed(2)," Kg"]},r.name))]}):null;function PCe({animalId:t,onBack:e}){const{animals:n,bodyWeighings:r}=At(),i=L.useMemo(()=>{const g=n.find(S=>S.id===t);if(!g)return null;const b=r.filter(S=>S.animalId===g.id).sort((S,T)=>new Date(S.date).getTime()-new Date(T.date).getTime()),y=vA(g.birthWeight,b),x=Is(g.birthDate),w=b.length>0?b[b.length-1].kg:g.birthWeight||0,_=aJ(g),E=oJ(g,b),O=b.map(S=>({age:(new Date(S.date).getTime()-new Date(g.birthDate).getTime())/(1e3*60*60*24),[g.id]:S.kg}));g.birthWeight&&O.unshift({age:0,[g.id]:g.birthWeight});const P=[60,90,180,270].map(S=>({days:S,weight:SL(b,g.birthDate,S)}));return{animal:g,gdp:y,formattedAge:x,latestWeight:w,chartData:O,interpolatedWeights:P,weaningIndex:_,precocityIndex:E}},[t,n,r]);if(!i)return u.jsx("div",{className:"text-center p-10",children:u.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."})});const{animal:s,gdp:a,formattedAge:o,latestWeight:l,chartData:c,interpolatedWeights:f,weaningIndex:d,precocityIndex:h}=i;return u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[u.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[u.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"text-center flex-grow",children:[u.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:s.id}),u.jsx("p",{className:"text-lg text-zinc-400",children:"Perfil de Crecimiento"})]}),u.jsx("div",{className:"w-8"})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 px-4",children:[u.jsx(hu,{icon:wm,label:"Peso Actual",value:l.toFixed(2),unit:"Kg"}),u.jsx(hu,{icon:Dc,label:"GDP General",value:a.overall?(a.overall*1e3).toFixed(0):"N/A",unit:"g/día"}),u.jsx(hu,{icon:bc,label:"Edad Actual",value:o}),u.jsx(hu,{icon:XH,label:"Nº Pesajes",value:c.length})]}),(d||h)&&u.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4",children:[d&&u.jsx(hu,{icon:Nne,label:"Índice Destete (60d)",value:d.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"}),h&&u.jsx(hu,{icon:kne,label:"Índice Precocidad (7m)",value:h.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"})]}),u.jsx("div",{className:"px-4",children:u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Curva de Crecimiento"}),u.jsx("div",{className:"w-full h-64",children:u.jsx(Mr,{children:u.jsxs(RF,{data:c,margin:{top:5,right:20,left:-10,bottom:5},children:[u.jsx(Lm,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),u.jsx(Rn,{dataKey:"age",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Edad (días)",position:"insideBottom",offset:-5,fill:"rgba(255,255,255,0.5)"}}),u.jsx($n,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Peso (Kg)",angle:-90,position:"insideRight",fill:"rgba(255,255,255,0.5)"}}),u.jsx(ln,{content:u.jsx(TCe,{})}),u.jsx(Go,{verticalAlign:"top",height:36}),u.jsx(Tc,{type:"monotone",dataKey:s.id,stroke:"#34C759",strokeWidth:2.5,dot:{r:4},activeDot:{r:6}})]})})})]})}),u.jsx("div",{className:"px-4",children:u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Hitos de Crecimiento (Pesos Estimados)"}),u.jsx("div",{className:"grid grid-cols-2 gap-4",children:f.map(({days:g,weight:b})=>u.jsxs("div",{className:"bg-black/20 p-3 rounded-lg text-center",children:[u.jsxs("p",{className:"text-sm text-zinc-400",children:["Peso a los ",g," días"]}),u.jsx("p",{className:"text-xl font-bold text-white",children:b?`${b.toFixed(2)} Kg`:"---"})]},g))})]})})]})}const CCe=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result.split(",")[1]),r.onerror=i=>n(i)}),jCe=({onImageSelect:t})=>{const e=L.useRef(null),n=r=>{var i;(i=r.target.files)!=null&&i[0]&&t(r.target.files[0])};return u.jsxs("div",{className:"space-y-4 animate-fade-in",children:[u.jsx("input",{type:"file",ref:e,accept:"image/*",onChange:n,className:"hidden"}),u.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.setAttribute("capture","environment"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-blue-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[u.jsx(FH,{className:"w-12 h-12 mb-2 text-blue-400"}),u.jsx("span",{className:"text-lg font-semibold",children:"Tomar Foto"}),u.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Usa la cámara para escanear"})]}),u.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.removeAttribute("capture"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-green-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[u.jsx(YH,{className:"w-12 h-12 mb-2 text-green-400"}),u.jsx("span",{className:"text-lg font-semibold",children:"Seleccionar Archivo"}),u.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Elige una foto de tu galería"})]})]})};function OCe({onBack:t}){const[e,n]=L.useState("capture"),[r,i]=L.useState(""),[s,a]=L.useState(""),o=async l=>{var c,f;n("loading"),i(""),a("");try{const d=await CCe(l),y=await fetch("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAsHrxI8e8prsvYNvx992YyC26n592GfWk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:d},features:[{type:"TEXT_DETECTION"}]}]})});if(!y.ok){const _=await y.json();throw new Error(_.error.message||"Error en la API de Google Vision.")}const w=(f=(c=(await y.json()).responses[0])==null?void 0:c.fullTextAnnotation)==null?void 0:f.text;if(w)a(w),n("verification");else throw new Error("No se pudo detectar texto en la imagen. Intenta con una foto más clara.")}catch(d){i(d.message||"Ocurrió un error inesperado."),n("error")}};return u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4",children:[u.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"text-center flex-grow",children:[u.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Escanear Cuaderno"}),u.jsx("p",{className:"text-xl text-zinc-400",children:"Digitalización Asistida"})]}),u.jsx("div",{className:"w-8"})]}),e==="capture"&&u.jsx(jCe,{onImageSelect:o}),e==="loading"&&u.jsxs("div",{className:"text-center py-20 animate-fade-in",children:[u.jsx(j3,{className:"w-12 h-12 text-amber-400 mx-auto animate-spin"}),u.jsx("p",{className:"mt-4 text-zinc-400",children:"Analizando imagen con IA..."})]}),e==="verification"&&u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider border-b border-brand-border pb-2",children:[u.jsx(A3,{}),u.jsx("span",{children:"Texto Reconocido"})]}),u.jsx("textarea",{readOnly:!0,value:s,className:"w-full h-48 bg-black/20 text-white p-3 rounded-lg border border-zinc-700"}),u.jsx("p",{className:"text-xs text-zinc-500 text-center",children:"Funcionalidad de autocompletado de pesajes próximamente."}),u.jsx("button",{onClick:()=>n("capture"),className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Escanear Otra Imagen"})]}),e==="error"&&u.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-6 text-center animate-fade-in",children:[u.jsx(zr,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),u.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Ocurrió un Error"}),u.jsx("p",{className:"text-red-300",children:r}),u.jsx("button",{onClick:()=>n("capture"),className:"mt-6 bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Intentar de Nuevo"})]})]})}const kCe=[{id:"lactokeeper",name:"LactoKeeper",icon:IE,color:"bg-brand-blue"},{id:"kilos",name:"Kilos",icon:wm,color:"bg-brand-green"}],ICe=({onSwitchModule:t})=>{const[e,n]=L.useState(!1),r=i=>{n(!1),t(i)};return u.jsxs("div",{className:"fixed bottom-24 right-4 z-40 flex flex-col items-end gap-4 pointer-events-none",children:[u.jsx("div",{className:`flex flex-col items-end gap-4 transition-all duration-300 ease-in-out ${e?"opacity-100":"opacity-0 translate-y-4"}`,children:kCe.map(i=>u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"bg-black/60 backdrop-blur-md text-white text-sm font-semibold px-3 py-1 rounded-md shadow-lg",children:i.name}),u.jsx("button",{onClick:()=>r(i.id),className:`w-14 h-14 rounded-full flex items-center justify-center text-white shadow-lg ${i.color} transform transition-transform hover:scale-110 pointer-events-auto`,"aria-label":`Cambiar al módulo ${i.name}`,children:u.jsx(i.icon,{size:28})})]},i.id))}),u.jsx("button",{onClick:()=>n(!e),className:"w-16 h-16 rounded-full flex items-center justify-center text-black bg-brand-amber shadow-2xl shadow-black/50 transform transition-transform duration-200 hover:scale-110 pointer-events-auto","aria-label":"Seleccionar módulo",children:u.jsx("div",{className:`transform transition-transform duration-300 ${e?"rotate-180 scale-75":"rotate-0"}`,children:e?u.jsx(Mc,{size:32}):u.jsx(eG,{size:32})})})]})};function NCe(t){return dl({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224l0 32 0 160c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-88.2c9.9 6.6 20.6 12 32 16.1l0 24.2c0 8.8 7.2 16 16 16s16-7.2 16-16l0-16.9c5.3 .6 10.6 .9 16 .9s10.7-.3 16-.9l0 16.9c0 8.8 7.2 16 16 16s16-7.2 16-16l0-24.2c11.4-4 22.1-9.4 32-16.1l0 88.2c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-160 32 32 0 49.5c0 9.5 2.8 18.7 8.1 26.6L530 427c8.8 13.1 23.5 21 39.3 21c22.5 0 41.9-15.9 46.3-38l20.3-101.6c2.6-13-.3-26.5-8-37.3l-3.9-5.5 0-81.6c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 14.4-52.9-74.1C496 86.5 452.4 64 405.9 64L272 64l-16 0-64 0-48 0C77.7 64 24 117.7 24 184l0 54C9.4 249.8 0 267.8 0 288l0 17.6c0 8 6.4 14.4 14.4 14.4C46.2 320 72 294.2 72 262.4l0-6.4 0-32 0-40c0-24.3 12.1-45.8 30.5-58.9C98.3 135.9 96 147.7 96 160l0 64zM560 336a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zM166.6 166.6c-4.2-4.2-6.6-10-6.6-16c0-12.5 10.1-22.6 22.6-22.6l178.7 0c12.5 0 22.6 10.1 22.6 22.6c0 6-2.4 11.8-6.6 16l-23.4 23.4C332.2 211.8 302.7 224 272 224s-60.2-12.2-81.9-33.9l-23.4-23.4z"},child:[]}]})(t)}const DCe={idle:{Icon:qH,color:"text-green-500",label:"Datos sincronizados"},syncing:{Icon:WH,color:"text-amber-500 animate-spin-slow",label:"Sincronizando datos..."},offline:{Icon:KH,color:"text-red-500",label:"Sin conexión"}},OT=({status:t})=>{const{Icon:e,color:n,label:r}=DCe[t];return u.jsx("div",{className:"flex items-center gap-2",title:r,children:u.jsx(e,{className:`w-5 h-5 ${n}`})})},MCe=({initialPage:t,onSwitchModule:e})=>{const{syncStatus:n}=At(),[r,i]=L.useState({name:"lots-dashboard"}),[s,a]=L.useState([]);L.useEffect(()=>{t&&i(t)},[t]);const o=[{page:{name:"lots-dashboard"},label:"Lotes",icon:jne},{page:{name:"herd"},label:"Rebaño",icon:NCe},{page:{name:"add-animal"},label:"Añadir",icon:Nc}],l=d=>{a(h=>[...h,r]),i(d)},c=()=>{const d=s[s.length-1];d?(a(h=>h.slice(0,-1)),i(d)):i({name:"lots-dashboard"})},f=()=>{switch(r.name){case"lots-dashboard":return u.jsx(qO,{navigateTo:l});case"lot-detail":return u.jsx(Xne,{lotName:r.lotName,onBack:c,navigateTo:l});case"breeding-group-detail":return u.jsx(Sre,{groupId:r.groupId,onBack:c,navigateTo:l});case"herd":return u.jsx(nre,{navigateTo:l,locationFilter:r.locationFilter});case"manage-lots":return u.jsx(xre,{onBack:()=>i({name:"herd"})});case"management":return u.jsx(i6,{onSelectAnimal:d=>l({name:"rebano-profile",animalId:d})});case"add-animal":return u.jsx(Qne,{onBack:()=>i({name:"herd"})});case"rebano-profile":return u.jsx(vre,{animalId:r.animalId,onBack:c,navigateTo:l});case"lactation-profile":return u.jsx(wCe,{animalId:r.animalId,onBack:c});case"growth-profile":return u.jsx(PCe,{animalId:r.animalId,onBack:c});case"ocr":return u.jsx(OCe,{onBack:c});case"feeding-plan":return u.jsx(SCe,{lotName:r.lotName,onBack:c});case"batch-treatment":return u.jsx(ACe,{lotName:r.lotName,onBack:c});default:return u.jsx(qO,{navigateTo:l})}};return u.jsxs("div",{className:"font-sans text-gray-200 min-h-screen animate-fade-in",children:[u.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:u.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(JL,{className:"text-brand-orange",size:28}),u.jsx("h1",{className:"text-xl font-bold text-white",children:"Rebaño"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx(OT,{status:n})})]})}),u.jsx("main",{className:"pt-16 pb-24",children:f()}),u.jsx(ICe,{onSwitchModule:e}),u.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:[o.map(d=>{let h=!1;return d.label==="Lotes"?h=["lots-dashboard","lot-detail","breeding-group-detail","feeding-plan","batch-treatment"].includes(r.name):(d.label==="Rebaño"||d.label==="Añadir")&&(h=["herd","rebano-profile","manage-lots","add-animal","lactation-profile","growth-profile","ocr","management"].includes(r.name)),u.jsxs("button",{onClick:()=>{a([]),i(d.page)},className:`relative flex flex-col items-center justify-center pt-3 pb-2 w-full transition-colors ${h?"text-amber-400":"text-gray-500 hover:text-white"}`,children:[u.jsx(d.icon,{className:"w-6 h-6"}),u.jsx("span",{className:"text-xs font-semibold mt-1",children:d.label})]},d.label)}),u.jsxs("button",{onClick:()=>pf.signOut(),className:"relative flex flex-col items-center justify-center pt-3 pb-2 w-full text-gray-500 hover:text-red-400 transition-colors",children:[u.jsx(O3,{className:"w-6 h-6"}),u.jsx("span",{className:"text-xs font-semibold mt-1",children:"Salir"})]})]})]})};function GD({onNavigateToAnalysis:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=At(),[s,a]=L.useState("current"),[o,l]=L.useState(!1),[c,f]=L.useState(!1),d=L.useMemo(()=>{if(i||!n.length||!e.length)return{herdAverage:0,activeGoats:0,herdLactationCurve:[],gaussData:{distribution:[],mean:0,stdDev:0}};let h=0;if(n.length>0){const P=n.reduce((S,T)=>T.date>S?T.date:S,n[0].date);h=new Set(n.filter(S=>S.date===P).map(S=>S.goatId)).size}let g=n;if(s==="current"){const P=new Set(r.filter(S=>S.status==="activa").map(S=>S.goatId));g=n.filter(S=>P.has(S.goatId))}const b={};g.forEach(P=>{const S=r.filter(k=>k.goatId===P.goatId&&new Date(P.date)>=new Date(k.parturitionDate)).sort((k,z)=>new Date(z.parturitionDate).getTime()-new Date(k.parturitionDate).getTime())[0];if(!S)return;const T=Pm(S.parturitionDate,P.date);b[T]||(b[T]={totalKg:0,count:0}),b[T].totalKg+=P.kg,b[T].count++});const y=Object.entries(b).map(([P,S])=>({del:parseInt(P),kg:S.totalKg/S.count,name:"Promedio Rebaño"})).sort((P,S)=>P.del-S.del),x=e.map(P=>{const S=n.filter(k=>k.goatId===P.id);return S.length===0?null:{avg:S.reduce((k,z)=>k+z.kg,0)/S.length}}).filter(Boolean),w=x.length>0?x.reduce((P,S)=>P+S.avg,0)/x.length:0,_=x.length>0?Math.sqrt(x.reduce((P,S)=>P+Math.pow(S.avg-w,2),0)/x.length):0,E=[];if(x.length>0){const P=Math.floor(Math.min(...x.map(T=>T.avg))*4)/4,S=Math.ceil(Math.max(...x.map(T=>T.avg))*4)/4;for(let T=P;T<=S;T+=.25){const k=T,z=T+.25,N=x.filter($=>$.avg>=k&&$.avg<z).length;N>0&&E.push({range:`${k.toFixed(2)}`,count:N})}}const O={distribution:E,mean:w,stdDev:_};return{herdAverage:n.length>0?n.reduce((P,S)=>P+S.kg,0)/n.length:0,activeGoats:h,herdLactationCurve:y,gaussData:O}},[e,n,r,i,s]);return i?u.jsx("div",{className:"text-center p-10",children:u.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos del rebaño..."})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4",children:[u.jsxs("header",{className:"text-center pt-8 pb-4",children:[u.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Dashboard"}),u.jsx("p",{className:"text-xl text-zinc-400",children:"Análisis de LactoKeeper"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[u.jsx(xm,{size:14})," ",u.jsx("span",{children:"Promedio Global"})]}),u.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[d.herdAverage.toFixed(2)," ",u.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"Kg"})]})]}),u.jsxs("button",{onClick:t,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[u.jsx(cG,{}),u.jsx("span",{children:"Animales en Ordeño"})]}),u.jsx("p",{className:"text-4xl font-bold tracking-tight text-white",children:d.activeGoats})]})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[u.jsx(mj,{size:16}),u.jsx("span",{children:"Curva de Lactancia"}),u.jsx("button",{onClick:()=>l(!0),className:"text-zinc-500 hover:text-white transition-colors",children:u.jsx(sv,{size:14})})]}),u.jsxs("div",{className:"flex bg-zinc-900/80 rounded-lg p-0.5",children:[u.jsx("button",{onClick:()=>a("current"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${s==="current"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Actual"}),u.jsx("button",{onClick:()=>a("historical"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${s==="historical"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Histórico"})]})]}),u.jsx("div",{className:"w-full h-48",children:u.jsx(Mr,{children:u.jsxs(vCe,{data:d.herdLactationCurve,margin:{top:5,right:10,left:0,bottom:5},children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"lactationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#FF9500",stopOpacity:.7}),u.jsx("stop",{offset:"80%",stopColor:"#34C759",stopOpacity:.1})]})}),u.jsx(Rn,{dataKey:"del",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),u.jsx($n,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,domain:["dataMin - 0.5","dataMax + 0.5"],width:30}),u.jsx(ln,{content:u.jsx(Kf,{})}),u.jsx(vl,{type:"monotone",dataKey:"kg",stroke:"#FF9500",strokeWidth:2.5,fill:"url(#lactationGradient)"})]})})})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsx("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[u.jsx(mj,{size:16}),u.jsx("span",{children:"Distribución del Rebaño"}),u.jsx("button",{onClick:()=>f(!0),className:"text-zinc-500 hover:text-white transition-colors",children:u.jsx(sv,{size:14})})]})}),u.jsx("div",{className:"w-full h-48",children:u.jsx(Mr,{children:u.jsxs(Gi,{data:d.gaussData.distribution,margin:{top:10,right:10,left:0,bottom:0},children:[u.jsx(Lm,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),u.jsx(Rn,{dataKey:"range",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),u.jsx($n,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,allowDecimals:!1,width:30}),u.jsx(ln,{content:u.jsx(Kf,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),u.jsx(er,{dataKey:"count",fill:"rgba(255, 255, 255, 0.4)",name:"Nº de Cabras"}),u.jsx(Hb,{x:d.gaussData.mean.toFixed(2),stroke:"#34C759",strokeWidth:2,label:{value:"μ",fill:"#34C759",position:"insideTopLeft"}})]})})})]})]}),u.jsx(St,{isOpen:o,onClose:()=>l(!1),title:"¿Qué es la Curva de Lactancia del Rebaño?",children:u.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[u.jsx("p",{children:'Este gráfico revela la **"personalidad productiva"** de tu rebaño. No es un promedio simple, sino una línea de tiempo del rendimiento promedio.'}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-white mb-1",children:"¿Cómo se Calcula?"}),u.jsx("p",{className:"text-sm",children:'Para cada "Día en Leche" (DEL) en el eje horizontal, el sistema agrupa los pesajes de **todos los animales** que han pasado por ese día de su ciclo y calcula el promedio.'}),u.jsxs("p",{className:"text-sm mt-2 bg-black/20 p-2 rounded-md",children:[u.jsx("strong",{children:"Ejemplo:"}),' El punto en "DEL 50" es el promedio de todos los pesajes que se hicieron a cualquier animal cuando estaba exactamente en su día 50 de lactancia.']})]}),u.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Te permite responder visualmente a preguntas clave como: ¿Cuándo ocurre el pico de producción del rebaño? y ¿Qué tan persistente es la lactancia después del pico?"})]})}),u.jsx(St,{isOpen:c,onClose:()=>f(!1),title:"¿Qué es la Distribución del Rebaño?",children:u.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[u.jsx("p",{children:"Este gráfico, conocido como Campana de Gauss o distribución normal, clasifica el rendimiento promedio de cada animal en el rebaño."}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-white mb-1",children:"Media (μ)"}),u.jsx("p",{className:"text-sm",children:"La línea verde marcada como **μ** representa el **promedio de producción de todo el rebaño**. Es el punto de referencia central."})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-white mb-1",children:"Las Barras"}),u.jsx("p",{className:"text-sm",children:"Cada barra muestra cuántos animales caen dentro de un rango específico de producción. Una barra alta en el centro (cerca de μ) indica que la mayoría de tu rebaño tiene un rendimiento promedio y consistente."})]}),u.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Esta herramienta es clave para identificar rápidamente a los animales de élite (extremo derecho) y a los que podrían necesitar atención (extremo izquierdo)."})]})})]})}const y0=(t,e,n,r,i)=>L.useMemo(()=>{if(!t.length||!e.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const s=t.reduce((y,x)=>{const w=e.find(k=>k.id===x.goatId);if(!w)return y;const _=r.filter(k=>k.goatId===w.id&&new Date(k.parturitionDate)<=new Date(x.date)).sort((k,z)=>new Date(z.parturitionDate).getTime()-new Date(k.parturitionDate).getTime())[0];if(!_)return y;const E=n.filter(k=>k.goatId===w.id).sort((k,z)=>new Date(z.date).getTime()-new Date(k.date).getTime()),O=Pm(_.parturitionDate,x.date),A=i?iJ(x.kg,O):x.kg;let P="single";const S=.15,T=E.findIndex(k=>k.id===x.id);if(T>0){const k=E[T-1],z=x.kg-k.kg;z>S?P="up":z<-S?P="down":P="stable"}return y.push({...w,latestWeighing:x.kg,weighingId:x.id,del:O,score:A,trend:P,date:x.date}),y},[]);if(!s.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const a=i?"score":"latestWeighing",o=s.reduce((y,x)=>y+x[a],0)/s.length,l=Math.sqrt(s.reduce((y,x)=>y+Math.pow(x[a]-o,2),0)/s.length),c=o-.4*l,f=o+.4*l,d=s.map(y=>{const x=y[a];let w="Promedio";return l>.1&&(x<c?w="Pobre":x>f&&(w="Sobresaliente")),{...y,classification:w}}),h=[{name:"Pobre",count:d.filter(y=>y.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:d.filter(y=>y.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:d.filter(y=>y.classification==="Sobresaliente").length,fill:"#34C759"}],g=s.length>0?s.reduce((y,x)=>y+x.latestWeighing,0)/s.length:0,b=s.length>0?s.reduce((y,x)=>y+x.score,0)/s.length:0;return{classifiedAnimals:d,distribution:h,mean:g,stdDev:l,weightedMean:b}},[t,e,n,r,i]),RCe=({trend:t,isLongTrend:e})=>{if(!t||t==="single")return null;const n={up:"text-green-400",down:"text-red-400",stable:"text-zinc-500"};return u.jsxs("div",{className:`flex items-center font-semibold text-sm ${n[t]}`,children:[t==="up"&&u.jsx(kE,{size:16}),t==="down"&&u.jsx(OE,{size:16}),t==="stable"&&u.jsx(k3,{size:16}),e&&u.jsx("span",{className:"ml-0.5 font-bold",children:"+"})]})},$Ce=(t,e)=>{const[n,r]=L.useState(null),[i,s]=L.useState(0),[a,o]=L.useState(!1),[l,c]=L.useState([]);return L.useEffect(()=>{const f=e.filter(x=>x.goatId===t).sort((x,w)=>new Date(w.date).getTime()-new Date(x.date).getTime());if(f.length<2){r(f.length===1?"single":null),c(f),s(0),o(!1);return}const d=f[0].kg,h=f[1].kg,g=d-h,b=.15;s(g),c([f[0],f[1]]);let y="stable";if(g>b&&(y="up"),g<-b&&(y="down"),r(y),f.length>=3){const x=f[2].kg,w=h-x;g>b&&w>b||g<-b&&w<-b?o(!0):o(!1)}else o(!1)},[t,e]),{trend:n,difference:i,isLongTrend:a,lastTwoWeighings:l}},LCe=t=>{const{x:e,y:n,width:r,height:i,value:s,total:a}=t;if(a===0||s===0)return null;const o=(s/a*100).toFixed(0);return u.jsx("text",{x:e+r/2,y:n+i/2,fill:"#fff",textAnchor:"middle",dominantBaseline:"middle",fontSize:"14px",fontWeight:"bold",opacity:.8,children:`${o}%`})},Lw=({animal:t,onSelectAnimal:e})=>{var f,d;const{weighings:n}=At(),{isLongTrend:r,lastTwoWeighings:i,difference:s}=$Ce(t.id,n),[a,o]=L.useState(!1),l=h=>{h.stopPropagation(),t.trend&&t.trend!=="single"&&o(!0)},c=Is(t.birthDate);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{onClick:()=>e(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),u.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",c," | Lote: ",t.location||"Sin Asignar"]})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"font-semibold text-brand-orange",children:[t.latestWeighing.toFixed(2)," Kg"]}),u.jsxs("p",{className:"text-xs text-zinc-400",children:["DEL: ",t.del]})]}),u.jsx("button",{onClick:l,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors disabled:cursor-not-allowed",disabled:!t.trend||t.trend==="single",children:u.jsx(RCe,{trend:t.trend,isLongTrend:r})}),u.jsx("span",{className:`hidden sm:block px-2 py-0.5 text-xs font-semibold rounded-full text-white ${t.classification==="Pobre"?"bg-brand-red/80":t.classification==="Sobresaliente"?"bg-brand-green/80":"bg-gray-500/80"}`,children:t.classification}),u.jsx(io,{className:"text-zinc-600"})]})]}),u.jsx(St,{isOpen:a,onClose:()=>o(!1),title:`Tendencia de ${t.id}`,children:u.jsxs("div",{className:"text-center text-white space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm text-zinc-400",children:["Pesaje Anterior (",i[1]?new Date(i[1].date).toLocaleDateString():"N/A",")"]}),u.jsxs("p",{className:"text-2xl font-semibold",children:[((f=i[1])==null?void 0:f.kg.toFixed(2))||"N/A"," Kg"]})]}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm text-zinc-400",children:["Último Pesaje (",i[0]?new Date(i[0].date).toLocaleDateString():"N/A",")"]}),u.jsxs("p",{className:"text-2xl font-semibold",children:[((d=i[0])==null?void 0:d.kg.toFixed(2))||"N/A"," Kg"]})]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-zinc-400 text-base mb-1",children:"Diferencia"}),u.jsxs("p",{className:`text-3xl font-bold ${s>0?"text-brand-green":s<0?"text-brand-red":"text-zinc-400"}`,children:[s>0?"+":"",s.toFixed(2)," Kg"]})]})]})})]})};function zCe({onSelectAnimal:t,selectedDate:e}){const{animals:n,parturitions:r,weighings:i,isLoading:s}=At(),[a,o]=L.useState(!1),[l,c]=L.useState("all"),[f,d]=L.useState("all"),[h,g]=L.useState("all"),[b,y]=L.useState(null),[x,w]=L.useState("all"),[_,E]=L.useState(!1),[O,A]=L.useState(!1),{weighingsByDate:P,availableDates:S}=L.useMemo(()=>{const Ce={};i.forEach(oe=>{Ce[oe.date]||(Ce[oe.date]=[]),Ce[oe.date].push(oe)});const Ye=Object.keys(Ce).sort((oe,Be)=>new Date(Be).getTime()-new Date(oe).getTime());return{weighingsByDate:Ce,availableDates:Ye}},[i]),[T,k]=L.useState(0);L.useEffect(()=>{if(e&&S.length>0){const Ce=S.indexOf(e);Ce!==-1&&k(Ce)}},[e,S]);const z=S[T],N=L.useMemo(()=>{const Ce=P[z]||[],Ye=new Map;return Ce.forEach(oe=>{Ye.set(oe.goatId,oe)}),Array.from(Ye.values())},[z,P]),{classifiedAnimals:$,distribution:M,mean:Y,stdDev:q,weightedMean:ie}=y0(N,n,i,r,a),le=L.useMemo(()=>{if(T+1<S.length){const Ce=S[T+1];return P[Ce]||[]}return[]},[T,S,P]),Q=y0(le,n,i,r,!1),G=L.useMemo(()=>{const Ce=new Set($.map(He=>He.id));let Ye=new Set,oe=new Set;const Be=new Set(Q.classifiedAnimals.map(He=>He.id));T===S.length-1&&S.length>0?Ye=Ce:(Ye=new Set([...Ce].filter(He=>!Be.has(He))),oe=new Set([...Be].filter(He=>!Ce.has(He))));const We=S.slice(0,3).map(He=>{const Pt=P[He]||[];if(Pt.length===0)return{date:He,avg:0};const on=Pt.reduce((dn,en)=>dn+en.kg,0);return{date:new Date(He).toLocaleDateString("es-VE",{month:"short",day:"numeric"}),avg:on/Pt.length}}).reverse();let ue=null,ht=null,ye=0,xe=0,Fe=0;if($.length>0){const He=$.map(Pt=>Pt.latestWeighing);ye=He.reduce((Pt,on)=>Pt+on,0),xe=Math.max(...He),Fe=Math.min(...He),ue=$.find(Pt=>Pt.latestWeighing===xe)||null,ht=$.find(Pt=>Pt.latestWeighing===Fe)||null}const Tt=Y-q,et=Y+q,lt=$.filter(He=>He.latestWeighing>=Tt&&He.latestWeighing<=et).length,Ge=$.length>0?lt/$.length*100:0;return{trendData:We,kpi:{total:ye,max:xe,min:Fe},topPerformer:ue,bottomPerformer:ht,consistency:{percentage:Ge},newAnimalIds:Ye,exitingAnimalIds:oe}},[$,Q.classifiedAnimals,S,T,P,Y,q]),he=L.useMemo(()=>{let Ce=[...$];return l!=="all"&&(Ce=Ce.filter(Ye=>Ye.classification===l)),x==="new"&&(Ce=Ce.filter(Ye=>G.newAnimalIds.has(Ye.id))),f!=="all"&&(Ce=Ce.filter(Ye=>Ye.trend===f)),h!=="all"&&(Ce=Ce.filter(Ye=>{const oe=Ye.del;return h==="first"?oe>0&&oe<=100:h==="second"?oe>100&&oe<=200:h==="third"?oe>200&&oe<270:h==="drying"?oe>=270:!0})),Ce.sort((Ye,oe)=>Ye.id.localeCompare(oe.id))},[$,l,f,h,x,G.newAnimalIds]),{searchTerm:ce,setSearchTerm:we,filteredItems:ke}=n6(he,["id"]),Ue=L.useMemo(()=>{const Ce=$.length;if(Ce===0)return{up:0,down:0,new:0,stable:0,total:0};const Ye=$.filter(ue=>ue.trend==="up").length,oe=$.filter(ue=>ue.trend==="down").length,Be=$.filter(ue=>ue.trend==="stable").length,We=$.filter(ue=>ue.trend==="single").length;return{up:Ye/Ce*100,down:oe/Ce*100,stable:Be/Ce*100,new:We/Ce*100,total:Ce}},[$]),ct=()=>{c("all"),d("all"),g("all"),w("all")},ot=Ce=>{if(Ce!=null&&Ce.name){const Ye=Ce.name;c(oe=>oe===Ye?"all":Ye)}};return s?u.jsx("div",{className:"text-center p-10",children:u.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando animales..."})}):u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[u.jsx(r6,{title:"Análisis de Rebaño",subtitle:"Animales en Ordeño",searchTerm:ce,setSearchTerm:we}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border flex justify-between items-center",children:[u.jsx("button",{onClick:()=>k(Ce=>Math.min(Ce+1,S.length-1)),disabled:T>=S.length-1,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:u.jsx(BH,{})}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-lg font-semibold text-white",children:z?new Date(z).toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Sin Datos"}),u.jsxs("p",{className:"text-sm text-zinc-400",children:[N.length," animales pesados"]})]}),u.jsx("button",{onClick:()=>k(Ce=>Math.max(Ce-1,0)),disabled:T===0,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:u.jsx(io,{})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("button",{onClick:()=>y("media"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[u.jsx(IE,{size:14}),u.jsx("span",{children:a?"Media Ponderada":"Media de Prod."})]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[(a?ie:Y).toFixed(2)," ",u.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[u.jsx(D3,{size:14}),u.jsx("span",{children:"Prod. Total"})]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[G.kpi.total.toFixed(2)," ",u.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),u.jsxs("button",{onClick:()=>y("stdDev"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[u.jsx(fG,{size:14}),u.jsx("span",{children:"Consistencia"})]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[q.toFixed(2)," ",u.jsx("span",{className:"text-lg text-zinc-400",children:"σ"})]})]}),u.jsxs("button",{onClick:()=>y("rango"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[u.jsx(Dc,{size:14}),u.jsx("span",{children:"Rango Prod."})]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[G.kpi.min.toFixed(2)," - ",G.kpi.max.toFixed(2)," ",u.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(tb,{className:"text-brand-orange",size:18}),u.jsx("h3",{className:"text-lg font-semibold text-white",children:"Análisis del Día"}),u.jsx("button",{onClick:()=>E(!0),className:"text-zinc-500 hover:text-white",children:u.jsx(sv,{size:14})})]}),u.jsxs("label",{className:"flex items-center space-x-2 text-sm text-zinc-300 cursor-pointer",children:[u.jsx(Wx,{size:14,className:a?"text-brand-orange":"text-zinc-500"}),u.jsx("span",{children:"Ponderado a DEL"}),u.jsx("button",{type:"button",onClick:Ce=>{Ce.preventDefault(),Ce.stopPropagation(),A(!0)},className:"text-zinc-500 hover:text-white -ml-1",children:u.jsx(sv,{size:14})}),u.jsx("input",{type:"checkbox",checked:a,onChange:Ce=>o(Ce.target.checked),className:"form-checkbox h-4 w-4 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]})]}),u.jsx("div",{className:"w-full h-48",children:u.jsx(Mr,{children:u.jsxs(Gi,{data:M,margin:{top:20,right:10,left:-20,bottom:0},children:[u.jsx(Rn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx($n,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx(ln,{cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),u.jsxs(er,{dataKey:"count",onClick:ot,cursor:"pointer",children:[M.map(Ce=>u.jsx(Vc,{fill:Ce.fill,className:`${l!=="all"&&l!==Ce.name?"opacity-30":"opacity-100"} transition-opacity`},Ce.name)),u.jsx(Ei,{dataKey:"count",content:u.jsx(LCe,{total:$.length})})]})]})})}),u.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[u.jsxs("span",{children:["μ = ",Y.toFixed(2)]})," | ",u.jsxs("span",{children:["σ = ",q.toFixed(2)]})]})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border space-y-2",children:[u.jsxs("div",{className:"flex justify-between items-center px-2 pt-2",children:[u.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[u.jsx("button",{onClick:()=>d("all"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors ${f==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),u.jsxs("button",{onClick:()=>d("up"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${f==="up"?"bg-brand-green/80 text-white":"bg-zinc-800/50 text-brand-green"}`,children:[u.jsx(kE,{size:14})," ",u.jsxs("span",{children:[Ue.up.toFixed(0),"%"]})]}),u.jsxs("button",{onClick:()=>d("down"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${f==="down"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"}`,children:[u.jsx(OE,{size:14})," ",u.jsxs("span",{children:[Ue.down.toFixed(0),"%"]})]}),u.jsxs("button",{onClick:()=>d("single"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${f==="single"?"bg-brand-blue/80 text-white":"bg-zinc-800/50 text-brand-blue"}`,children:[u.jsx(Wx,{size:14})," ",u.jsxs("span",{children:[Ue.new.toFixed(0),"%"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("div",{className:"text-sm font-medium text-zinc-500",children:[ke.length," / ",$.length]}),u.jsx("button",{onClick:ct,title:"Limpiar todos los filtros",className:"text-zinc-500 hover:text-white",children:u.jsx(DE,{size:16})})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[u.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Fase Lactancia:"}),u.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[u.jsx("button",{onClick:()=>g("all"),className:`px-2 py-1 text-xs font-semibold rounded-md ${h==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),u.jsx("button",{onClick:()=>g("first"),className:`px-2 py-1 text-xs font-semibold rounded-md ${h==="first"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"1er T"}),u.jsx("button",{onClick:()=>g("second"),className:`px-2 py-1 text-xs font-semibold rounded-md ${h==="second"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"2do T"}),u.jsx("button",{onClick:()=>g("third"),className:`px-2 py-1 text-xs font-semibold rounded-md ${h==="third"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"3er T"}),u.jsx("button",{onClick:()=>g("drying"),className:`px-2 py-1 text-xs font-semibold rounded-md ${h==="drying"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"}`,children:"A Secado"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[u.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Movimientos:"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("button",{onClick:()=>w(Ce=>Ce==="new"?"all":"new"),disabled:G.newAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all ${x==="new"?"bg-brand-green text-white shadow-lg shadow-green-500/20":"bg-zinc-800/50 text-zinc-300"} ${G.newAnimalIds.size>0&&x!=="new"&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[u.jsx(nG,{size:14})," ",u.jsxs("span",{children:["Ingresos (",G.newAnimalIds.size,")"]})]}),u.jsxs("button",{onClick:()=>alert(`Animales que salieron del ordeño:
${[...G.exitingAnimalIds].join(`
`)}`),disabled:G.exitingAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all ${x==="exiting"?"bg-brand-red text-white shadow-lg shadow-red-500/20":"bg-zinc-800/50 text-zinc-300"} ${G.exitingAnimalIds.size>0&&x!=="exiting"&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[u.jsx(O3,{size:14})," ",u.jsxs("span",{children:["Salidas (",G.exitingAnimalIds.size,")"]})]})]})]})]}),u.jsx("div",{className:"space-y-2",children:ke.length>0?ke.map(Ce=>u.jsx(Lw,{animal:Ce,onSelectAnimal:t},Ce.weighingId||Ce.id)):u.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:u.jsx("p",{className:"text-zinc-400",children:ce?`No se encontraron resultados para "${ce}"`:"No se encontraron animales con los filtros actuales."})})}),u.jsx(St,{isOpen:b==="media",onClose:()=>y(null),title:"Tendencia de Producción Promedio",children:u.jsx("div",{className:"w-full h-56 -ml-4",children:u.jsx(Mr,{width:"100%",height:"100%",children:u.jsxs(Gi,{data:G.trendData,margin:{top:20,right:20,left:-20,bottom:5},children:[u.jsx(Lm,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),u.jsx(Rn,{dataKey:"date",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx($n,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx(ln,{cursor:{fill:"rgba(255, 255, 255, 0.05)"},contentStyle:{backgroundColor:"rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.2)"}}),u.jsx(er,{dataKey:"avg",name:"Promedio Kg",fill:"#FF9500",radius:[4,4,0,0],children:u.jsx(Ei,{dataKey:"avg",position:"top",formatter:Ce=>Ce.toFixed(2),fill:"#FFF",fontSize:12})})]})})})}),u.jsx(St,{isOpen:b==="rango",onClose:()=>y(null),title:"Extremos de Producción del Día",children:u.jsxs("div",{className:"space-y-4",children:[G.topPerformer&&u.jsxs("div",{className:"bg-green-900/40 border border-green-500/50 rounded-2xl p-4",children:[u.jsx("h3",{className:"font-semibold text-brand-green mb-2",children:"Animal Estrella (Producción Máxima)"}),u.jsx(Lw,{animal:G.topPerformer,onSelectAnimal:()=>{y(null),t(G.topPerformer.id)}})]}),G.bottomPerformer&&u.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-4",children:[u.jsx("h3",{className:"font-semibold text-brand-red mb-2",children:"Animal a Observar (Producción Mínima)"}),u.jsx(Lw,{animal:G.bottomPerformer,onSelectAnimal:()=>{y(null),t(G.bottomPerformer.id)}})]})]})}),u.jsx(St,{isOpen:b==="stdDev",onClose:()=>y(null),title:"Análisis de Consistencia (σ)",children:u.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[u.jsx("p",{children:"La Desviación Estándar (σ) mide qué tan dispersa está la producción de tu rebaño. Un valor **bajo** es ideal, ya que indica un rebaño consistente y predecible."}),u.jsxs("div",{className:"bg-black/30 p-4 rounded-lg text-center",children:[u.jsx("p",{className:"text-sm uppercase text-zinc-400",children:"Rebaño dentro de 1σ de la media"}),u.jsxs("p",{className:"text-4xl font-bold text-brand-orange my-1",children:[G.consistency.percentage.toFixed(0),"%"]}),u.jsxs("p",{className:"text-sm text-zinc-400",children:["Esto significa que la mayoría de tu rebaño tiene un rendimiento muy cercano al promedio de ",u.jsxs("span",{className:"font-bold text-white",children:[Y.toFixed(2)," Kg"]}),"."]})]}),u.jsx("p",{className:"text-xs text-zinc-500 pt-2 border-t border-zinc-700",children:"En una distribución normal perfecta, este valor es del 68%. Un valor superior indica una consistencia excepcional."})]})}),u.jsx(St,{isOpen:_,onClose:()=>E(!1),title:"¿Qué es el Análisis del Ordeño?",children:u.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[u.jsx("p",{children:"Este panel clasifica a los animales en ordeño según su rendimiento, permitiéndote identificar rápidamente a los individuos de mayor y menor producción."}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-white mb-1",children:"Clasificación (Pobre, Promedio, Sobresaliente)"}),u.jsx("p",{className:"text-sm",children:"Se calcula usando la media (μ) y la desviación estándar (σ) de la producción. Los animales que se desvían significativamente del promedio se marcan como pobres o sobresalientes."})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-white mb-1",children:"Ponderado a DEL"}),u.jsxs("p",{className:"text-sm",children:["Al activar este interruptor (",u.jsx(Wx,{size:12,className:"inline-block mb-0.5"}),'), el análisis se vuelve más inteligente. Otorga un mayor "score" a los animales que producen bien al inicio de su lactancia, ya que es más valioso que la misma producción en una etapa tardía.']})]})]})}),u.jsx(St,{isOpen:O,onClose:()=>A(!1),title:"¿Qué es el Score Ponderado?",children:u.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[u.jsx("p",{children:"El Score Ponderado ajusta la producción de un animal para premiar la **persistencia lechera**, un indicador clave de la calidad genética y la eficiencia."}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-white mb-1",children:"Fórmula Aplicada"}),u.jsx("div",{className:"bg-black/30 p-3 rounded-lg text-sm font-mono text-center text-orange-300",children:"Score = Kg × (1 + ((DEL - 50) / (DEL + 50)))"})]}),u.jsx("p",{className:"pt-2 border-t border-zinc-700/80 text-sm",children:"Esto significa que 2 Kg en el día **200** de lactancia obtendrán un score **mucho más alto** que 2 Kg en el día 40, ayudándote a identificar a tus animales más eficientes y persistentes."})]})})]})}const VCe=t=>L.useMemo(()=>{if(t.length===0)return{monthlyData:[]};const n=t.reduce((i,s)=>{const a=s.date.substring(0,7);return i[a]||(i[a]=[]),i[a].push(s),i},{});let r=Object.entries(n).map(([i,s])=>{const a=new Date(`${i}-02T12:00:00Z`),o=a.toLocaleString("es-VE",{month:"long",timeZone:"UTC"}),l=a.getUTCFullYear(),c=s.length,f=s.reduce((d,h)=>d+h.kg,0);return{periodLabel:`${o.charAt(0).toUpperCase()+o.slice(1)} ${l}`,periodId:i,totalKg:f,averageKg:c>0?f/c:0,weighingCount:c,animalCount:new Set(s.map(d=>d.goatId)).size,weighingEvents:new Set(s.map(d=>d.date)).size,weighings:s,newAnimalsWeighings:[]}}).sort((i,s)=>s.periodId.localeCompare(i.periodId));return r=r.map((i,s,a)=>{const o=a[s+1];if(o){const l=o.averageKg?(i.averageKg-o.averageKg)/o.averageKg*100:void 0,c=o.animalCount?(i.animalCount-o.animalCount)/o.animalCount*100:void 0,f=new Set(o.weighings.map(y=>y.goatId)),d=new Set(i.weighings.map(y=>y.goatId)),h=new Set([...d].filter(y=>!f.has(y))),g=i.weighings.filter(y=>h.has(y.goatId)),b=[...f].filter(y=>!d.has(y)).length;return{...i,avgKgChange:l,animalCountChange:c,newAnimalsWeighings:g,previousAnimalCount:o.animalCount,exitingAnimalCount:b}}return{...i,newAnimalsWeighings:i.weighings,previousAnimalCount:0,exitingAnimalCount:0}}),{monthlyData:r,quarterlyData:[],yearlyData:[]}},[t]),py=({value:t})=>{if(t===void 0||isNaN(t))return null;const e=t>0,n=e?"text-brand-green":"text-brand-red",r=e?kE:OE;return u.jsxs("span",{className:`flex items-center text-sm font-bold ${n}`,children:[u.jsx(r,{size:16,className:"mr-0.5"}),t.toFixed(1),"%"]})},FCe=({stats:t,onClick:e})=>u.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-white",children:t.periodLabel}),u.jsxs("p",{className:"text-sm text-zinc-400",children:["Prom: ",t.averageKg.toFixed(2)," Kg | ",t.animalCount," animales"]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx(py,{value:t.avgKgChange}),u.jsx(io,{className:"text-zinc-600"})]})]}),$F=({weighing:t,onSelectAnimal:e})=>u.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-black/20 rounded-lg p-3 border border-zinc-700/50 flex justify-between items-center hover:border-orange-400/50",children:[u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("div",{children:u.jsxs("p",{className:"font-bold text-base text-white flex items-center gap-2",children:[t.id,u.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${t.classification==="Pobre"?"bg-brand-red/80":t.classification==="Sobresaliente"?"bg-brand-green/80":"bg-gray-500/80"}`,children:t.classification})]})})}),u.jsxs("p",{className:"font-semibold text-lg text-white",children:[t.latestWeighing.toFixed(2)," ",u.jsx("span",{className:"text-base font-medium text-zinc-400",children:"Kg"})]})]}),LF=t=>{const{x:e,y:n,width:r,value:i,total:s}=t;if(s===0||i===0)return null;const a=(i/s*100).toFixed(0);return u.jsx("text",{x:e+r/2,y:n+20,fill:"#fff",textAnchor:"middle",fontSize:"12px",fontWeight:"bold",children:`${a}%`})},BCe=({isOpen:t,onClose:e,data:n,periodLabel:r,onSelectAnimal:i})=>{const{animals:s,weighings:a,parturitions:o}=At(),[l,c]=L.useState("all"),f=y0((n==null?void 0:n.weighings)||[],s,a,o,!1),d=L.useMemo(()=>l==="all"?f.classifiedAnimals:f.classifiedAnimals.filter(g=>g.classification===l),[f.classifiedAnimals,l]),h=g=>{if(g!=null&&g.name){const b=g.name;c(y=>y===b?"all":b)}};return!t||!n?null:u.jsx(St,{isOpen:t,onClose:e,title:`Análisis de Nuevos Ingresos - ${r}`,children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[u.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[u.jsx(xm,{size:14}),"Promedio"]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[f.mean.toFixed(2),u.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]}),u.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[u.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[u.jsx(nd,{size:14}),"Animales"]}),u.jsx("p",{className:"text-2xl font-bold text-white",children:f.classifiedAnimals.length})]})]}),u.jsx("div",{className:"bg-black/20 backdrop-blur-xl rounded-2xl p-4 border border-zinc-800/50",children:u.jsx("div",{className:"w-full h-48",children:u.jsx(Mr,{children:u.jsxs(Gi,{data:f.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[u.jsx(Rn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx($n,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx(ln,{cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),u.jsxs(er,{dataKey:"count",onClick:h,cursor:"pointer",children:[f.distribution.map(g=>u.jsx(Vc,{fill:g.fill,className:`${l!=="all"&&l!==g.name?"opacity-30":"opacity-100"}`},g.name)),u.jsx(Ei,{dataKey:"count",content:u.jsx(LF,{total:f.classifiedAnimals.length})})]})]})})})}),u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:d.sort((g,b)=>b.latestWeighing-g.latestWeighing).map(g=>u.jsx($F,{weighing:g,onSelectAnimal:i},g.weighingId||g.id))})]})})};function UCe({onSelectAnimal:t,selectedPeriod:e,setSelectedPeriod:n}){const{animals:r,weighings:i,parturitions:s,isLoading:a}=At(),[o,l]=L.useState("monthly"),[c,f]=L.useState(!1),[d,h]=L.useState(null),[g,b]=L.useState("all"),{monthlyData:y}=VCe(i),x=y0((e==null?void 0:e.weighings)||[],r,i,s,!1),w=L.useMemo(()=>g==="all"?x.classifiedAnimals:x.classifiedAnimals.filter(A=>A.classification===g),[x.classifiedAnimals,g]),_=A=>{if(A!=null&&A.name){const P=A.name;b(S=>S===P?"all":P)}},O={monthly:y,quarterly:[],yearly:[]}[o];return a?u.jsx("div",{className:"text-center p-10",children:u.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando historial..."})}):e?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 animate-fade-in",children:[u.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[u.jsx("button",{onClick:()=>{n(null),b("all")},className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"text-center flex-grow",children:[u.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:e.periodLabel}),u.jsx("p",{className:"text-lg text-zinc-400",children:"Análisis del Período"})]}),u.jsx("div",{className:"w-8"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[u.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[u.jsx(xm,{size:14}),"Promedio / Animal"]}),u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsxs("p",{className:"text-2xl font-bold text-white",children:[e.averageKg.toFixed(2),u.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]}),u.jsx(py,{value:e.avgKgChange})]})]}),u.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[u.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[u.jsx(bc,{size:14}),"Eventos de Pesaje"]}),u.jsx("p",{className:"text-2xl font-bold text-white",children:e.weighingEvents})]}),u.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[u.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[u.jsx(nd,{size:14}),"Animales Ordeñados"]}),u.jsxs("button",{onClick:()=>f(!0),className:"flex items-baseline gap-2 w-full text-left",children:[u.jsx("p",{className:"text-2xl font-bold text-white",children:e.animalCount}),u.jsx(py,{value:e.animalCountChange})]})]}),u.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[u.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[u.jsx(Dc,{size:14}),"Total Registrado"]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[e.totalKg.toFixed(0),u.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsxs("div",{className:"flex items-center space-x-2 border-b border-brand-border pb-2 mb-4",children:[u.jsx(tb,{className:"text-brand-orange",size:18}),u.jsx("h3",{className:"text-lg font-semibold text-white",children:"Distribución del Período"})]}),u.jsx("div",{className:"w-full h-48",children:u.jsx(Mr,{children:u.jsxs(Gi,{data:x.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[u.jsx(Rn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx($n,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx(ln,{cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),u.jsxs(er,{dataKey:"count",onClick:_,cursor:"pointer",children:[x.distribution.map(A=>u.jsx(Vc,{fill:A.fill,className:`${g!=="all"&&g!==A.name?"opacity-30":"opacity-100"} transition-opacity`},A.name)),u.jsx(Ei,{dataKey:"count",content:u.jsx(LF,{total:x.classifiedAnimals.length})})]})]})})}),u.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[u.jsxs("span",{children:["μ = ",x.mean.toFixed(2)," Kg"]})," | ",u.jsxs("span",{children:["σ = ",x.stdDev.toFixed(2)]})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1 mt-4",children:["Pesajes del Período (",w.length,")"]}),w.sort((A,P)=>P.latestWeighing-A.latestWeighing).map(A=>u.jsx($F,{weighing:A,onSelectAnimal:t},A.weighingId||A.id))]})]}),u.jsx(St,{isOpen:c,onClose:()=>f(!1),title:"Variación de Animales en Ordeño",children:u.jsxs("div",{className:"text-zinc-300 space-y-4",children:[u.jsxs("div",{children:[u.jsxs("h4",{className:"font-semibold text-white mb-1",children:[e.periodLabel," vs Mes Anterior"]}),u.jsxs("p",{className:"text-sm text-zinc-400",children:["El mes anterior tenías ",u.jsx("span",{className:"font-bold text-white",children:e.previousAnimalCount})," animales en ordeño. Este mes tienes ",u.jsx("span",{className:"font-bold text-white",children:e.animalCount}),"."]}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsxs("p",{children:["El cambio neto es de ",u.jsx("span",{className:"font-bold text-white",children:e.animalCount-e.previousAnimalCount})," animales"]}),u.jsx(py,{value:e.animalCountChange})]})]}),u.jsxs("div",{className:"pt-4 border-t border-zinc-700/80",children:[e.exitingAnimalCount>0&&u.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Salieron del ordeño: ",u.jsx("span",{className:"font-bold text-brand-red",children:e.exitingAnimalCount})," animales."]}),e.newAnimalsWeighings.length>0&&u.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Nuevos ingresos: ",u.jsx("span",{className:"font-bold text-brand-green",children:new Set(e.newAnimalsWeighings.map(A=>A.goatId)).size})," animales."]}),e.newAnimalsWeighings.length>0&&u.jsxs("button",{onClick:()=>{h({...e,weighings:e.newAnimalsWeighings}),f(!1)},className:"w-full mt-4 bg-brand-orange text-white font-semibold py-2 rounded-lg hover:bg-orange-600 transition-colors",children:["Analizar los ",new Set(e.newAnimalsWeighings.map(A=>A.goatId)).size," Nuevos Ingresos"]})]})]})}),u.jsx(BCe,{isOpen:!!d,onClose:()=>h(null),data:d,periodLabel:e.periodLabel,onSelectAnimal:t})]}):u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[u.jsxs("header",{className:"text-center pt-8 pb-4",children:[u.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Historial de Producción"}),u.jsx("p",{className:"text-xl text-zinc-400",children:"La película de tu rebaño"})]}),u.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:u.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[u.jsx("button",{onClick:()=>l("monthly"),className:`w-1/3 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${o==="monthly"?"bg-brand-orange text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:"Mensual"}),u.jsx("button",{disabled:!0,className:"w-1/3 px-4 py-1.5 text-sm font-semibold rounded-lg opacity-50 cursor-not-allowed",children:"Trimestral"}),u.jsx("button",{disabled:!0,className:"w-1/3 px-4 py-1.5 text-sm font-semibold rounded-lg opacity-50 cursor-not-allowed",children:"Anual"})]})}),u.jsx("div",{className:"space-y-2",children:(O||[]).map(A=>u.jsx(FCe,{stats:A,onClick:()=>n(A)},A.periodId))})]})}const WCe=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=L.useMemo(()=>{const s=new Date;return s.setHours(0,0,0,0),Array.from({length:7},(a,o)=>{const l=new Date(s);return l.setDate(s.getDate()-o),l})},[]),i=(s,a)=>{if(s.getTime()===a.getTime())return"Hoy";const o=new Date(a);return o.setDate(a.getDate()-1),s.getTime()===o.getTime()?"Ayer":s.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return u.jsxs("div",{className:"px-4",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[u.jsx(bc,{size:16}),"Fecha del Pesaje"]}),u.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[u.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[u.jsx(bc,{size:20}),u.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(s=>{const a=s.getTime()===t.getTime();return u.jsxs("button",{type:"button",onClick:()=>e(s),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${a?"bg-brand-orange text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[u.jsx("span",{className:"text-xs capitalize",children:i(s,r[0])}),u.jsx("span",{className:"font-bold text-2xl",children:s.getDate()}),u.jsx("span",{className:"text-xs",children:s.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},s.toISOString())})]})]})},KCe=({entry:t,onDelete:e,onRegister:n})=>{const r=!t.isRecognized;return u.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${r?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[r&&u.jsx(zr,{className:"text-amber-400 flex-shrink-0",size:18}),u.jsx("span",{className:"font-semibold text-white",children:t.animalId})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[r?u.jsx("button",{onClick:()=>n(t.animalId),className:"text-xs font-semibold bg-brand-orange text-white px-2 py-1 rounded-md hover:bg-orange-600",children:"Registrar Parto"}):u.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),u.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(Mc,{size:16})})]})]})},qCe=({onBack:t,onSaveSuccess:e})=>{const{animals:n,fetchData:r}=At(),[i,s]=L.useState(""),[a,o]=L.useState(""),[l,c]=L.useState([]),[f,d]=L.useState(null),[h,g]=L.useState(()=>{const N=new Date;return N.setHours(0,0,0,0),N}),[b,y]=L.useState(!1),[x,w]=L.useState({isOpen:!1,motherId:""}),_=L.useRef(null),E=L.useRef(null),O=()=>{var Y;if(!i||!a)return;const N=i.toUpperCase().trim(),$=n.find(q=>q.id===N);if($&&$.isReference){d({type:"error",text:`${N} es un animal de Referencia y no se le pueden añadir pesajes.`});return}const M={tempId:Date.now(),animalId:N,kg:parseFloat(a),date:h.toISOString().split("T")[0],isRecognized:!!$};c(q=>[M,...q]),s(""),o(""),(Y=_.current)==null||Y.focus()},A=async()=>{d(null);const{currentUser:N}=pf;if(!N){d({type:"error",text:"Error de autenticación."});return}const $=l.filter(M=>!M.isRecognized).length;if($>0){d({type:"error",text:`No se puede guardar. Tienes ${$} animal(es) sin registrar.`});return}if(l.length===0){d({type:"error",text:"No hay pesajes para guardar."});return}try{const M=rv(Lt),Y=Qr(Lt,"weighings");l.forEach(q=>{const ie=_r(Y),le={goatId:q.animalId,kg:q.kg,date:q.date,userId:N.uid};M.set(ie,le)}),await M.commit(),d({type:"success",text:`${l.length} pesajes guardados con éxito.`}),c([]),setTimeout(()=>e(h.toISOString().split("T")[0]),1500)}catch(M){d({type:"error",text:"Ocurrió un error al guardar en la nube."}),console.error("Error en escritura por lote:",M)}},P=N=>{var $;N.key==="Enter"&&i&&(N.preventDefault(),($=E.current)==null||$.focus())},S=N=>{N.key==="Enter"&&a&&(N.preventDefault(),O())},T=N=>{c($=>$.filter(M=>M.tempId!==N))},k=N=>{N&&(N.setHours(0,0,0,0),g(N)),y(!1)},z=()=>{c(N=>N.map($=>$.animalId===x.motherId?{...$,isRecognized:!0}:$)),r(),w({isOpen:!1,motherId:""})};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[u.jsxs("header",{className:"text-center px-4 flex items-center",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Leche"}),u.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Ordeño"})]}),u.jsx("div",{className:"w-8"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(WCe,{selectedDate:h,onDateChange:g,onOpenCalendar:()=>y(!0)}),u.jsxs("div",{className:"flex items-center gap-2 px-4",children:[u.jsx("input",{ref:_,type:"text",value:i,onChange:N=>s(N.target.value),onKeyDown:P,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),u.jsx("input",{ref:E,type:"number",step:"0.01",value:a,onChange:N=>o(N.target.value),onKeyDown:S,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),u.jsx("button",{onClick:O,disabled:!i||!a,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:u.jsx(Nc,{size:24})})]})]})]}),u.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[l.length===0&&u.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),l.map(N=>u.jsx(KCe,{entry:N,onDelete:T,onRegister:$=>w({isOpen:!0,motherId:$})},N.tempId))]}),u.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[f&&u.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${f.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",f.type==="success"?u.jsx(ul,{size:18}):u.jsx(zr,{size:18})," ",u.jsx("span",{children:f.text})," "]}),u.jsxs("button",{onClick:A,className:"w-full flex items-center justify-center gap-2 bg-brand-orange/20 border border-brand-orange text-brand-orange hover:bg-brand-orange/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[u.jsx(ME,{size:20})," Guardar ",l.length>0?`(${l.length})`:""," Pesajes"]})]})]}),u.jsx(St,{isOpen:b,onClose:()=>y(!1),title:"Seleccionar Fecha",children:u.jsx("div",{className:"flex justify-center",children:u.jsx(fb,{mode:"single",selected:h,onSelect:k})})}),u.jsx(St,{isOpen:x.isOpen,onClose:()=>w({isOpen:!1,motherId:""}),title:`Registrar Parto para: ${x.motherId}`,children:u.jsx(_A,{motherId:x.motherId,onSaveSuccess:z,onCancel:()=>w({isOpen:!1,motherId:""})})})]})};function HCe({onNavigate:t}){const[e,n]=L.useState("options");return e==="rapid"?u.jsx(qCe,{onBack:()=>n("options"),onSaveSuccess:()=>{t&&t("dashboard")}}):u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in",children:[u.jsxs("header",{className:"text-center pt-8 pb-4",children:[u.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Añadir Datos de Leche"}),u.jsx("p",{className:"text-lg text-zinc-400",children:"Selecciona un método de carga"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>n("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-orange text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[u.jsx(rb,{className:"w-12 h-12 mb-2 text-brand-orange"}),u.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),u.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),u.jsxs("button",{onClick:()=>t("ocr"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[u.jsx(N3,{className:"w-12 h-12 mb-2 text-brand-blue"}),u.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),u.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}function GCe({navigateToRebano:t,onExitModule:e}){const{syncStatus:n}=At(),[r,i]=L.useState("dashboard"),[s,a]=L.useState(null),o=[{id:"dashboard",label:"Dashboard",icon:tb},{id:"analysis",label:"Análisis",icon:tG},{id:"history",label:"Historial",icon:zH},{id:"add-data",label:"Añadir",icon:Nc},{id:"drying",label:"Secado",icon:RE}],l=()=>{r==="dashboard"?e():i("dashboard")},c=()=>{switch(r){case"dashboard":return u.jsx(GD,{onNavigateToAnalysis:()=>i("analysis")});case"analysis":return u.jsx(zCe,{onSelectAnimal:f=>t({name:"rebano-profile",animalId:f})});case"history":return u.jsx(UCe,{onSelectAnimal:f=>t({name:"rebano-profile",animalId:f}),selectedPeriod:s,setSelectedPeriod:a});case"add-data":return u.jsx(HCe,{onNavigate:(f,d)=>t({name:f,...d})});case"drying":return u.jsx(i6,{onSelectAnimal:f=>t({name:"rebano-profile",animalId:f})});default:return u.jsx(GD,{onNavigateToAnalysis:()=>i("analysis")})}};return u.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[u.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:u.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[u.jsx("button",{onClick:l,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ine,{className:"text-brand-orange",size:28}),u.jsx("h1",{className:"text-xl font-bold",children:"LactoKeeper"})]}),u.jsx("div",{className:"w-8 flex justify-end",children:u.jsx(OT,{status:n})})]})}),u.jsx("main",{className:"flex-grow pt-16 pb-24",children:c()}),u.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:o.map(f=>u.jsxs("button",{onClick:()=>i(f.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${r===f.id?"text-brand-orange":"text-gray-400 hover:text-brand-orange"}`,children:[u.jsx(f.icon,{className:"w-6 h-6 mb-1"}),u.jsx("span",{className:"text-xs font-semibold",children:f.label})]},f.id))})]})}const YCe=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=L.useMemo(()=>{const s=new Date;return s.setHours(0,0,0,0),Array.from({length:7},(a,o)=>{const l=new Date(s);return l.setDate(s.getDate()-o),l})},[]),i=(s,a)=>{if(s.getTime()===a.getTime())return"Hoy";const o=new Date(a);return o.setDate(a.getDate()-1),s.getTime()===o.getTime()?"Ayer":s.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return u.jsxs("div",{className:"px-4",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[u.jsx(bc,{size:16}),"Fecha del Pesaje"]}),u.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[u.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[u.jsx(bc,{size:20}),u.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(s=>{const a=s.getTime()===t.getTime();return u.jsxs("button",{type:"button",onClick:()=>e(s),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${a?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[u.jsx("span",{className:"text-xs capitalize",children:i(s,r[0])}),u.jsx("span",{className:"font-bold text-2xl",children:s.getDate()}),u.jsx("span",{className:"text-xs",children:s.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},s.toISOString())})]})]})},XCe=({entry:t,onDelete:e})=>{const n=!t.isRecognized;return u.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${n?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[n&&u.jsx(zr,{className:"text-amber-400 flex-shrink-0",size:18}),u.jsx("span",{className:"font-semibold text-white",children:t.animalId})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),u.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(Mc,{size:16})})]})]})},QCe=({onBack:t,onSaveSuccess:e})=>{const{animals:n}=At(),[r,i]=L.useState(""),[s,a]=L.useState(""),[o,l]=L.useState([]),[c,f]=L.useState(null),[d,h]=L.useState(()=>{const S=new Date;return S.setHours(0,0,0,0),S}),[g,b]=L.useState(!1),y=L.useRef(null),x=L.useRef(null),w=()=>{var z;if(!r||!s)return;const S=r.toUpperCase().trim(),T=n.find(N=>N.id===S);if(T&&T.isReference){f({type:"error",text:`${S} es un animal de Referencia y no se le pueden añadir pesajes.`});return}const k={tempId:Date.now(),animalId:S,kg:parseFloat(s),date:d.toISOString().split("T")[0],isRecognized:!!T};l(N=>[k,...N]),i(""),a(""),(z=y.current)==null||z.focus()},_=async()=>{f(null);const{currentUser:S}=pf;if(!S){f({type:"error",text:"Error de autenticación."});return}if(o.length===0){f({type:"error",text:"No hay pesajes para guardar."});return}try{const T=rv(Lt),k=Qr(Lt,"bodyWeighings");o.forEach(z=>{const N=_r(k),$={animalId:z.animalId,kg:z.kg,date:z.date,userId:S.uid};T.set(N,$)}),await T.commit(),f({type:"success",text:`${o.length} pesajes guardados con éxito.`}),l([]),setTimeout(()=>e(d.toISOString().split("T")[0]),1500)}catch(T){f({type:"error",text:"Ocurrió un error al guardar en la nube."}),console.error("Error en escritura por lote:",T)}},E=S=>{var T;S.key==="Enter"&&r&&(S.preventDefault(),(T=x.current)==null||T.focus())},O=S=>{S.key==="Enter"&&s&&(S.preventDefault(),w())},A=S=>{l(T=>T.filter(k=>k.tempId!==S))},P=S=>{S&&(S.setHours(0,0,0,0),h(S)),b(!1)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[u.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[u.jsxs("header",{className:"text-center px-4 flex items-center",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Peso"}),u.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Pesaje"})]}),u.jsx("div",{className:"w-8"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(YCe,{selectedDate:d,onDateChange:h,onOpenCalendar:()=>b(!0)}),u.jsxs("div",{className:"flex items-center gap-2 px-4",children:[u.jsx("input",{ref:y,type:"text",value:r,onChange:S=>i(S.target.value),onKeyDown:E,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),u.jsx("input",{ref:x,type:"number",step:"0.01",value:s,onChange:S=>a(S.target.value),onKeyDown:O,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),u.jsx("button",{onClick:w,disabled:!r||!s,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:u.jsx(Nc,{size:24})})]})]})]}),u.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[o.length===0&&u.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),o.map(S=>u.jsx(XCe,{entry:S,onDelete:A},S.tempId))]}),u.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[c&&u.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${c.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",c.type==="success"?u.jsx(ul,{size:18}):u.jsx(zr,{size:18})," ",u.jsx("span",{children:c.text})," "]}),u.jsxs("button",{onClick:_,className:"w-full flex items-center justify-center gap-2 bg-brand-green/20 border border-brand-green text-brand-green hover:bg-brand-green/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[u.jsx(ME,{size:20})," Guardar ",o.length>0?`(${o.length})`:""," Pesajes"]})]})]}),u.jsx(St,{isOpen:g,onClose:()=>b(!1),title:"Seleccionar Fecha",children:u.jsx("div",{className:"flex justify-center",children:u.jsx(fb,{mode:"single",selected:d,onSelect:P})})})]})};function ZCe({onNavigate:t,onSaveSuccess:e}){const[n,r]=L.useState("options");return n==="rapid"?u.jsx(QCe,{onBack:()=>r("options"),onSaveSuccess:e}):u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[u.jsxs("header",{className:"text-center",children:[u.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Añadir Pesaje Corporal"}),u.jsx("p",{className:"text-lg text-zinc-400",children:"Carga de Datos de Crecimiento"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-green text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[u.jsx(rb,{className:"w-12 h-12 mb-2 text-brand-green"}),u.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),u.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),u.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[u.jsx(N3,{className:"w-12 h-12 mb-2 text-brand-blue"}),u.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),u.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}const JCe=({gdp:t,averageGdp:e})=>{if(!t||!e||e===0)return null;const n=t/e;return n>1.1?u.jsx(Dc,{size:18,className:"text-brand-green"}):n<.9?u.jsx(dG,{size:18,className:"text-brand-red"}):u.jsx(k3,{size:18,className:"text-zinc-500"})},eje=({animal:t,onSelect:e,averageGdp:n})=>u.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),u.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"font-semibold text-white",children:[t.gdp.overall?`${(t.gdp.overall*1e3).toFixed(0)}`:"--",u.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),u.jsx("p",{className:`font-bold text-sm ${t.classification==="Sobresaliente"?"text-brand-green":t.classification==="Pobre"?"text-brand-red":"text-zinc-400"}`,children:t.classification})]}),u.jsx(JCe,{gdp:t.gdp.overall,averageGdp:n}),u.jsx(io,{className:"text-zinc-600"})]})]});function YD({onSelectAnimal:t}){const{animals:e,bodyWeighings:n,parturitions:r}=At(),i=L.useMemo(()=>{const s=e.filter(_=>{const E=Tm(_,r);return["Cabrita","Cabritona","Cabrito","Macho de Levante"].includes(E)});if(s.length===0)return{analyzedAnimals:[],distribution:[],averageGdp:0};let a=0,o=0;const l=s.map(_=>{const E=n.filter(A=>A.animalId===_.id),O=vA(_.birthWeight,E);return O.overall&&O.overall>0&&(a+=O.overall,o++),{..._,formattedAge:Is(_.birthDate),gdp:O}}),c=o>0?a/o:0,f=l.map(_=>({..._,score:_.gdp.overall?sJ(_.gdp.overall,c,Ho(_.birthDate)):0})),d=f.filter(_=>_.score>0).map(_=>_.score),h=d.length>0?d.reduce((_,E)=>_+E,0)/d.length:0,g=d.length>0?Math.sqrt(d.reduce((_,E)=>_+Math.pow(E-h,2),0)/d.length):0,b=h-.4*g,y=h+.4*g,x=f.map(_=>{let E="Promedio";return _.score>0&&g>1&&(_.score<b?E="Pobre":_.score>y&&(E="Sobresaliente")),{..._,classification:E}}),w=[{name:"Pobre",count:x.filter(_=>_.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:x.filter(_=>_.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:x.filter(_=>_.classification==="Sobresaliente").length,fill:"#34C759"}];return{analyzedAnimals:x.sort((_,E)=>E.score-_.score),distribution:w,averageGdp:c}},[e,n,r]);return u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in",children:[u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[u.jsx(Dc,{}),u.jsx("span",{children:"GDP Promedio del Levante"})]}),u.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[(i.averageGdp*1e3).toFixed(0)," ",u.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"g/día"})]})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),u.jsx("div",{className:"w-full h-48",children:u.jsx(Mr,{children:u.jsxs(Gi,{data:i.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[u.jsx(Rn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx($n,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx(ln,{content:u.jsx(Kf,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),u.jsx(er,{dataKey:"count",children:i.distribution.map(s=>u.jsx(Vc,{fill:s.fill},s.name))})]})})})]}),u.jsxs("div",{className:"space-y-2 pt-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:["Animales en Levante (",i.analyzedAnimals.length,")"]}),i.analyzedAnimals.length>0?i.analyzedAnimals.map(s=>u.jsx(eje,{animal:s,onSelect:()=>t(s.id),averageGdp:i.averageGdp},s.id)):u.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:u.jsx("p",{className:"text-zinc-500",children:"No hay animales en fase de levante o no se han registrado pesajes."})})]})]})}const tje=()=>{const{animals:t,bodyWeighings:e,parturitions:n}=At();return L.useMemo(()=>{const s=t.filter(E=>{const O=Ho(E.birthDate);return O>0&&O<=365&&!E.isReference}).map(E=>{const O=e.filter(P=>P.animalId===E.id),A=vA(E.birthWeight,O);return{...E,gdp:A.overall,ageInDays:Ho(E.birthDate)}}).filter(E=>E.gdp!==null&&E.gdp>0);if(s.length<2)return{classifiedAnimals:[],distribution:[],gaussChartData:[],meanGdp:0,stdDev:0};const o=s.reduce((E,O)=>E+O.gdp,0)/s.length,l=Math.sqrt(s.reduce((E,O)=>E+Math.pow(O.gdp-o,2),0)/s.length),c=o-.4*l,f=o+.4*l,d=s.map(E=>{let O="Promedio";return l>.005&&(E.gdp<c?O="Pobre":E.gdp>f&&(O="Sobresaliente")),{...E,classification:O}}),h=[{name:"Pobre",count:d.filter(E=>E.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:d.filter(E=>E.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:d.filter(E=>E.classification==="Sobresaliente").length,fill:"#34C759"}],g=d.map(E=>E.gdp),b=Math.min(...g),y=Math.max(...g),x=10,w=(y-b)/x,_=Array.from({length:x},(E,O)=>{const A=b+O*w,P=A+w,S=d.filter(T=>T.gdp>=A&&T.gdp<P).length;return{name:`${(A*1e3).toFixed(0)}`,count:S}});return{classifiedAnimals:d.sort((E,O)=>O.gdp-E.gdp),distribution:h,gaussChartData:_,meanGdp:o,stdDev:l}},[t,e,n])},nje=({animal:t,onSelect:e})=>{const n={Sobresaliente:"bg-brand-green/80",Promedio:"bg-gray-500/80",Pobre:"bg-brand-red/80"},r=Is(t.birthDate);return u.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),u.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",r," | Lote: ",t.location||"Sin Asignar"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("p",{className:"font-semibold text-white text-right",children:[(t.gdp*1e3).toFixed(0),u.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),u.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${n[t.classification]}`,children:t.classification}),u.jsx(io,{className:"text-zinc-600"})]})]})};function rje({onSelectAnimal:t}){const{classifiedAnimals:e,distribution:n,gaussChartData:r,meanGdp:i,stdDev:s}=tje(),[a,o]=L.useState("all"),l=B.useMemo(()=>a==="all"?e:e.filter(f=>f.classification===a),[e,a]),c=f=>{if(f!=null&&f.name){const d=f.name;o(h=>h===d?"all":d)}};return u.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[u.jsxs("header",{className:"text-center",children:[u.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de GDP"}),u.jsx("p",{className:"text-lg text-zinc-400",children:"Ganancia Diaria de Peso"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[u.jsx(Dc,{size:14}),u.jsx("span",{children:"GDP Media"})]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[(i*1e3).toFixed(0)," ",u.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[u.jsx(D3,{size:14}),u.jsx("span",{children:"Desv. Estándar"})]}),u.jsxs("p",{className:"text-2xl font-bold text-white",children:[(s*1e3).toFixed(0)," ",u.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),u.jsx("div",{className:"w-full h-48",children:u.jsx(Mr,{children:u.jsxs(Gi,{data:n,margin:{top:20,right:10,left:-20,bottom:0},children:[u.jsx(Rn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx($n,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx(ln,{content:u.jsx(Kf,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),u.jsx(er,{dataKey:"count",onClick:c,cursor:"pointer",children:n.map(f=>u.jsx(Vc,{fill:f.fill,className:`${a!=="all"&&a!==f.name?"opacity-30":"opacity-100"} transition-opacity`},f.name))})]})})})]}),u.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Campana de Gauss (g/día)"}),u.jsx("div",{className:"w-full h-48",children:u.jsx(Mr,{children:u.jsxs(Gi,{data:r,margin:{top:20,right:10,left:-20,bottom:0},children:[u.jsx(Rn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),u.jsx($n,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),u.jsx(ln,{content:u.jsx(Kf,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),u.jsx(er,{dataKey:"count",fill:"rgba(52, 199, 89, 0.6)"})]})})})]}),u.jsxs("div",{className:"space-y-2 pt-4",children:[u.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:[a==="all"?"Todos los Animales":`Animales (${a})`," (",l.length,")"]}),l.length>0?l.map(f=>u.jsx(nje,{animal:f,onSelect:t},f.id)):u.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:u.jsx("p",{className:"text-zinc-500",children:"No hay animales que coincidan con los filtros."})})]})]})}function ije({navigateToRebano:t,onExitModule:e}){const{syncStatus:n}=At(),[r,i]=L.useState("dashboard"),s=[{id:"dashboard",label:"Dashboard",icon:tb},{id:"analysis",label:"Análisis",icon:One},{id:"add-data",label:"Añadir",icon:Nc}],a=()=>{r==="dashboard"?e():i("dashboard")},o=()=>{switch(r){case"dashboard":return u.jsx(YD,{onSelectAnimal:l=>t({name:"rebano-profile",animalId:l})});case"analysis":return u.jsx(rje,{onSelectAnimal:l=>t({name:"rebano-profile",animalId:l})});case"add-data":return u.jsx(ZCe,{onNavigate:t,onSaveSuccess:()=>i("dashboard")});default:return u.jsx(YD,{onSelectAnimal:l=>t({name:"rebano-profile",animalId:l})})}};return u.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[u.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:u.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[u.jsx("button",{onClick:a,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:u.jsx(li,{size:24})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(wm,{className:"text-brand-green"}),u.jsx("h1",{className:"text-xl font-bold",children:"Kilos"})]}),u.jsx("div",{className:"w-8 flex justify-end",children:u.jsx(OT,{status:n})})]})}),u.jsx("main",{className:"flex-grow pt-16 pb-24",children:o()}),u.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:s.map(l=>u.jsxs("button",{onClick:()=>i(l.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${r===l.id?"text-brand-green":"text-gray-400 hover:text-brand-green"}`,children:[u.jsx(l.icon,{className:"w-6 h-6 mb-1"}),u.jsx("span",{className:"text-xs font-semibold",children:l.label})]},l.id))})]})}const sje=()=>u.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#1C1C1E] animate-fade-in",children:[u.jsxs("div",{className:"relative flex items-center justify-center w-24 h-24",children:[u.jsx(JL,{className:"text-brand-orange w-12 h-12"}),u.jsx("div",{className:"absolute inset-0",children:u.jsx(j3,{className:"w-24 h-24 text-zinc-700 animate-spin-slow"})})]}),u.jsx("p",{className:"mt-4 text-lg font-medium text-zinc-400 tracking-wider",children:"Cargando datos..."})]});function aje(){const{currentUser:t,isLoading:e}=v3(),{isLoading:n}=At(),[r,i]=L.useState("rebano"),[s,a]=L.useState(null),o=f=>{a(null),i(f)},l=()=>{i("rebano")},c=f=>{a(f),i("rebano")};if(e||t&&n)return u.jsx(sje,{});if(!t)return u.jsx(mG,{});switch(r){case"lactokeeper":return u.jsx(GCe,{onExitModule:l,navigateToRebano:c});case"kilos":return u.jsx(ije,{onExitModule:l,navigateToRebano:c});case"rebano":default:return u.jsx(MCe,{initialPage:s,onSwitchModule:o})}}zw.createRoot(document.getElementById("root")).render(u.jsx(B.StrictMode,{children:u.jsx(TH,{children:u.jsx(kH,{children:u.jsx(aje,{})})})}));
