var Iee=Object.defineProperty;var Oee=(t,e,n)=>e in t?Iee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var In=(t,e,n)=>Oee(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _9={exports:{}},I5={},A9={exports:{}},Jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb=Symbol.for("react.element"),Mee=Symbol.for("react.portal"),Ree=Symbol.for("react.fragment"),Lee=Symbol.for("react.strict_mode"),Fee=Symbol.for("react.profiler"),zee=Symbol.for("react.provider"),$ee=Symbol.for("react.context"),Bee=Symbol.for("react.forward_ref"),Vee=Symbol.for("react.suspense"),Uee=Symbol.for("react.memo"),Wee=Symbol.for("react.lazy"),EI=Symbol.iterator;function Hee(t){return t===null||typeof t!="object"?null:(t=EI&&t[EI]||t["@@iterator"],typeof t=="function"?t:null)}var C9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j9=Object.assign,E9={};function qg(t,e,n){this.props=t,this.context=e,this.refs=E9,this.updater=n||C9}qg.prototype.isReactComponent={};qg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function N9(){}N9.prototype=qg.prototype;function Sk(t,e,n){this.props=t,this.context=e,this.refs=E9,this.updater=n||C9}var _k=Sk.prototype=new N9;_k.constructor=Sk;j9(_k,qg.prototype);_k.isPureReactComponent=!0;var NI=Array.isArray,P9=Object.prototype.hasOwnProperty,Ak={current:null},k9={key:!0,ref:!0,__self:!0,__source:!0};function T9(t,e,n){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)P9.call(e,r)&&!k9.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:vb,type:t,key:a,ref:s,props:i,_owner:Ak.current}}function qee(t,e){return{$$typeof:vb,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ck(t){return typeof t=="object"&&t!==null&&t.$$typeof===vb}function Kee(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var PI=/\/+/g;function eA(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Kee(""+t.key):e.toString(36)}function k1(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case vb:case Mee:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+eA(s,0):r,NI(i)?(n="",t!=null&&(n=t.replace(PI,"$&/")+"/"),k1(i,e,n,"",function(u){return u})):i!=null&&(Ck(i)&&(i=qee(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(PI,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",NI(t))for(var o=0;o<t.length;o++){a=t[o];var l=r+eA(a,o);s+=k1(a,e,n,l,i)}else if(l=Hee(t),typeof l=="function")for(t=l.call(t),o=0;!(a=t.next()).done;)a=a.value,l=r+eA(a,o++),s+=k1(a,e,n,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function yx(t,e,n){if(t==null)return t;var r=[],i=0;return k1(t,r,"","",function(a){return e.call(n,a,i++)}),r}function Gee(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var oo={current:null},T1={transition:null},Yee={ReactCurrentDispatcher:oo,ReactCurrentBatchConfig:T1,ReactCurrentOwner:Ak};function D9(){throw Error("act(...) is not supported in production builds of React.")}Jn.Children={map:yx,forEach:function(t,e,n){yx(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yx(t,function(){e++}),e},toArray:function(t){return yx(t,function(e){return e})||[]},only:function(t){if(!Ck(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Jn.Component=qg;Jn.Fragment=Ree;Jn.Profiler=Fee;Jn.PureComponent=Sk;Jn.StrictMode=Lee;Jn.Suspense=Vee;Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yee;Jn.act=D9;Jn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=j9({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=Ak.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)P9.call(e,l)&&!k9.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:vb,type:t.type,key:i,ref:a,props:r,_owner:s}};Jn.createContext=function(t){return t={$$typeof:$ee,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zee,_context:t},t.Consumer=t};Jn.createElement=T9;Jn.createFactory=function(t){var e=T9.bind(null,t);return e.type=t,e};Jn.createRef=function(){return{current:null}};Jn.forwardRef=function(t){return{$$typeof:Bee,render:t}};Jn.isValidElement=Ck;Jn.lazy=function(t){return{$$typeof:Wee,_payload:{_status:-1,_result:t},_init:Gee}};Jn.memo=function(t,e){return{$$typeof:Uee,type:t,compare:e===void 0?null:e}};Jn.startTransition=function(t){var e=T1.transition;T1.transition={};try{t()}finally{T1.transition=e}};Jn.unstable_act=D9;Jn.useCallback=function(t,e){return oo.current.useCallback(t,e)};Jn.useContext=function(t){return oo.current.useContext(t)};Jn.useDebugValue=function(){};Jn.useDeferredValue=function(t){return oo.current.useDeferredValue(t)};Jn.useEffect=function(t,e){return oo.current.useEffect(t,e)};Jn.useId=function(){return oo.current.useId()};Jn.useImperativeHandle=function(t,e,n){return oo.current.useImperativeHandle(t,e,n)};Jn.useInsertionEffect=function(t,e){return oo.current.useInsertionEffect(t,e)};Jn.useLayoutEffect=function(t,e){return oo.current.useLayoutEffect(t,e)};Jn.useMemo=function(t,e){return oo.current.useMemo(t,e)};Jn.useReducer=function(t,e,n){return oo.current.useReducer(t,e,n)};Jn.useRef=function(t){return oo.current.useRef(t)};Jn.useState=function(t){return oo.current.useState(t)};Jn.useSyncExternalStore=function(t,e,n){return oo.current.useSyncExternalStore(t,e,n)};Jn.useTransition=function(){return oo.current.useTransition()};Jn.version="18.3.1";A9.exports=Jn;var I=A9.exports;const be=Pr(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xee=I,Qee=Symbol.for("react.element"),Zee=Symbol.for("react.fragment"),Jee=Object.prototype.hasOwnProperty,ete=Xee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tte={key:!0,ref:!0,__self:!0,__source:!0};function I9(t,e,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Jee.call(e,r)&&!tte.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Qee,type:t,key:a,ref:s,props:i,_owner:ete.current}}I5.Fragment=Zee;I5.jsx=I9;I5.jsxs=I9;_9.exports=I5;var c=_9.exports,kj={},O9={exports:{}},ml={},M9={exports:{}},R9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ee){var le=H.length;H.push(ee);e:for(;0<le;){var se=le-1>>>1,$=H[se];if(0<i($,ee))H[se]=ee,H[le]=$,le=se;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ee=H[0],le=H.pop();if(le!==ee){H[0]=le;e:for(var se=0,$=H.length,X=$>>>1;se<X;){var te=2*(se+1)-1,oe=H[te],me=te+1,_e=H[me];if(0>i(oe,le))me<$&&0>i(_e,oe)?(H[se]=_e,H[me]=le,se=me):(H[se]=oe,H[te]=le,se=te);else if(me<$&&0>i(_e,le))H[se]=_e,H[me]=le,se=me;else break e}}return ee}function i(H,ee){var le=H.sortIndex-ee.sortIndex;return le!==0?le:H.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,f=null,p=3,h=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var ee=n(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=H)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(u)}}function A(H){if(m=!1,S(H),!g)if(n(l)!==null)g=!0,Z(C);else{var ee=n(u);ee!==null&&Y(A,ee.startTime-H)}}function C(H,ee){g=!1,m&&(m=!1,y(N),N=-1),h=!0;var le=p;try{for(S(ee),f=n(l);f!==null&&(!(f.expirationTime>ee)||H&&!T());){var se=f.callback;if(typeof se=="function"){f.callback=null,p=f.priorityLevel;var $=se(f.expirationTime<=ee);ee=t.unstable_now(),typeof $=="function"?f.callback=$:f===n(l)&&r(l),S(ee)}else r(l);f=n(l)}if(f!==null)var X=!0;else{var te=n(u);te!==null&&Y(A,te.startTime-ee),X=!1}return X}finally{f=null,p=le,h=!1}}var D=!1,j=null,N=-1,P=5,O=-1;function T(){return!(t.unstable_now()-O<P)}function M(){if(j!==null){var H=t.unstable_now();O=H;var ee=!0;try{ee=j(!0,H)}finally{ee?L():(D=!1,j=null)}}else D=!1}var L;if(typeof b=="function")L=function(){b(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,K=V.port2;V.port1.onmessage=M,L=function(){K.postMessage(null)}}else L=function(){v(M,0)};function Z(H){j=H,D||(D=!0,L())}function Y(H,ee){N=v(function(){H(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,Z(C))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var le=p;p=ee;try{return H()}finally{p=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var le=p;p=H;try{return ee()}finally{p=le}},t.unstable_scheduleCallback=function(H,ee,le){var se=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?se+le:se):le=se,H){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=le+$,H={id:d++,callback:ee,priorityLevel:H,startTime:le,expirationTime:$,sortIndex:-1},le>se?(H.sortIndex=le,e(u,H),n(l)===null&&H===n(u)&&(m?(y(N),N=-1):m=!0,Y(A,le-se))):(H.sortIndex=$,e(l,H),g||h||(g=!0,Z(C))),H},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(H){var ee=p;return function(){var le=p;p=ee;try{return H.apply(this,arguments)}finally{p=le}}}})(R9);M9.exports=R9;var nte=M9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rte=I,dl=nte;function kt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L9=new Set,Y0={};function op(t,e){Vm(t,e),Vm(t+"Capture",e)}function Vm(t,e){for(Y0[t]=e,t=0;t<e.length;t++)L9.add(e[t])}var Zu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tj=Object.prototype.hasOwnProperty,ite=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kI={},TI={};function ate(t){return Tj.call(TI,t)?!0:Tj.call(kI,t)?!1:ite.test(t)?TI[t]=!0:(kI[t]=!0,!1)}function ste(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ote(t,e,n,r){if(e===null||typeof e>"u"||ste(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lo(t,e,n,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fs[t]=new lo(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fs[e]=new lo(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fs[t]=new lo(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fs[t]=new lo(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fs[t]=new lo(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fs[t]=new lo(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fs[t]=new lo(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fs[t]=new lo(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fs[t]=new lo(t,5,!1,t.toLowerCase(),null,!1,!1)});var jk=/[\-:]([a-z])/g;function Ek(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jk,Ek);fs[e]=new lo(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jk,Ek);fs[e]=new lo(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jk,Ek);fs[e]=new lo(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fs[t]=new lo(t,1,!1,t.toLowerCase(),null,!1,!1)});fs.xlinkHref=new lo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fs[t]=new lo(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nk(t,e,n,r){var i=fs.hasOwnProperty(e)?fs[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ote(e,n,i,r)&&(n=null),r||i===null?ate(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hd=rte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bx=Symbol.for("react.element"),Xp=Symbol.for("react.portal"),Qp=Symbol.for("react.fragment"),Pk=Symbol.for("react.strict_mode"),Dj=Symbol.for("react.profiler"),F9=Symbol.for("react.provider"),z9=Symbol.for("react.context"),kk=Symbol.for("react.forward_ref"),Ij=Symbol.for("react.suspense"),Oj=Symbol.for("react.suspense_list"),Tk=Symbol.for("react.memo"),Fd=Symbol.for("react.lazy"),$9=Symbol.for("react.offscreen"),DI=Symbol.iterator;function Nv(t){return t===null||typeof t!="object"?null:(t=DI&&t[DI]||t["@@iterator"],typeof t=="function"?t:null)}var Ii=Object.assign,tA;function Zv(t){if(tA===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tA=e&&e[1]||""}return`
`+tA+t}var nA=!1;function rA(t,e){if(!t||nA)return"";nA=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=o);break}}}finally{nA=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zv(t):""}function lte(t){switch(t.tag){case 5:return Zv(t.type);case 16:return Zv("Lazy");case 13:return Zv("Suspense");case 19:return Zv("SuspenseList");case 0:case 2:case 15:return t=rA(t.type,!1),t;case 11:return t=rA(t.type.render,!1),t;case 1:return t=rA(t.type,!0),t;default:return""}}function Mj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qp:return"Fragment";case Xp:return"Portal";case Dj:return"Profiler";case Pk:return"StrictMode";case Ij:return"Suspense";case Oj:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case z9:return(t.displayName||"Context")+".Consumer";case F9:return(t._context.displayName||"Context")+".Provider";case kk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tk:return e=t.displayName||null,e!==null?e:Mj(t.type)||"Memo";case Fd:e=t._payload,t=t._init;try{return Mj(t(e))}catch{}}return null}function cte(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mj(e);case 8:return e===Pk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B9(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ute(t){var e=B9(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xx(t){t._valueTracker||(t._valueTracker=ute(t))}function V9(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=B9(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function f2(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rj(t,e){var n=e.checked;return Ii({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function II(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function U9(t,e){e=e.checked,e!=null&&Nk(t,"checked",e,!1)}function Lj(t,e){U9(t,e);var n=gf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fj(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fj(t,e.type,gf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function OI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fj(t,e,n){(e!=="number"||f2(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jv=Array.isArray;function wm(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gf(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(kt(91));return Ii({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function MI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(kt(92));if(Jv(n)){if(1<n.length)throw Error(kt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gf(n)}}function W9(t,e){var n=gf(e.value),r=gf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function RI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function H9(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $j(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?H9(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wx,q9=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wx=wx||document.createElement("div"),wx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function X0(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var f0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dte=["Webkit","ms","Moz","O"];Object.keys(f0).forEach(function(t){dte.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),f0[e]=f0[t]})});function K9(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||f0.hasOwnProperty(t)&&f0[t]?(""+e).trim():e+"px"}function G9(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=K9(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var fte=Ii({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bj(t,e){if(e){if(fte[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(kt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(kt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(kt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(kt(62))}}function Vj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uj=null;function Dk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wj=null,Sm=null,_m=null;function LI(t){if(t=xb(t)){if(typeof Wj!="function")throw Error(kt(280));var e=t.stateNode;e&&(e=F5(e),Wj(t.stateNode,t.type,e))}}function Y9(t){Sm?_m?_m.push(t):_m=[t]:Sm=t}function X9(){if(Sm){var t=Sm,e=_m;if(_m=Sm=null,LI(t),e)for(t=0;t<e.length;t++)LI(e[t])}}function Q9(t,e){return t(e)}function Z9(){}var iA=!1;function J9(t,e,n){if(iA)return t(e,n);iA=!0;try{return Q9(t,e,n)}finally{iA=!1,(Sm!==null||_m!==null)&&(Z9(),X9())}}function Q0(t,e){var n=t.stateNode;if(n===null)return null;var r=F5(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(kt(231,e,typeof n));return n}var Hj=!1;if(Zu)try{var Pv={};Object.defineProperty(Pv,"passive",{get:function(){Hj=!0}}),window.addEventListener("test",Pv,Pv),window.removeEventListener("test",Pv,Pv)}catch{Hj=!1}function hte(t,e,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var h0=!1,h2=null,p2=!1,qj=null,pte={onError:function(t){h0=!0,h2=t}};function mte(t,e,n,r,i,a,s,o,l){h0=!1,h2=null,hte.apply(pte,arguments)}function gte(t,e,n,r,i,a,s,o,l){if(mte.apply(this,arguments),h0){if(h0){var u=h2;h0=!1,h2=null}else throw Error(kt(198));p2||(p2=!0,qj=u)}}function lp(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eB(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function FI(t){if(lp(t)!==t)throw Error(kt(188))}function vte(t){var e=t.alternate;if(!e){if(e=lp(t),e===null)throw Error(kt(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return FI(i),t;if(a===r)return FI(i),e;a=a.sibling}throw Error(kt(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(kt(189))}}if(n.alternate!==r)throw Error(kt(190))}if(n.tag!==3)throw Error(kt(188));return n.stateNode.current===n?t:e}function tB(t){return t=vte(t),t!==null?nB(t):null}function nB(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nB(t);if(e!==null)return e;t=t.sibling}return null}var rB=dl.unstable_scheduleCallback,zI=dl.unstable_cancelCallback,yte=dl.unstable_shouldYield,bte=dl.unstable_requestPaint,aa=dl.unstable_now,xte=dl.unstable_getCurrentPriorityLevel,Ik=dl.unstable_ImmediatePriority,iB=dl.unstable_UserBlockingPriority,m2=dl.unstable_NormalPriority,wte=dl.unstable_LowPriority,aB=dl.unstable_IdlePriority,O5=null,ru=null;function Ste(t){if(ru&&typeof ru.onCommitFiberRoot=="function")try{ru.onCommitFiberRoot(O5,t,void 0,(t.current.flags&128)===128)}catch{}}var bc=Math.clz32?Math.clz32:Cte,_te=Math.log,Ate=Math.LN2;function Cte(t){return t>>>=0,t===0?32:31-(_te(t)/Ate|0)|0}var Sx=64,_x=4194304;function e0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function g2(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=e0(o):(a&=s,a!==0&&(r=e0(a)))}else s=n&~i,s!==0?r=e0(s):a!==0&&(r=e0(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bc(e),i=1<<n,r|=t[n],e&=~i;return r}function jte(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ete(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-bc(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=jte(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}function Kj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sB(){var t=Sx;return Sx<<=1,!(Sx&4194240)&&(Sx=64),t}function aA(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yb(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bc(e),t[e]=n}function Nte(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-bc(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function Ok(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bc(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Lr=0;function oB(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lB,Mk,cB,uB,dB,Gj=!1,Ax=[],tf=null,nf=null,rf=null,Z0=new Map,J0=new Map,Bd=[],Pte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $I(t,e){switch(t){case"focusin":case"focusout":tf=null;break;case"dragenter":case"dragleave":nf=null;break;case"mouseover":case"mouseout":rf=null;break;case"pointerover":case"pointerout":Z0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":J0.delete(e.pointerId)}}function kv(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=xb(e),e!==null&&Mk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kte(t,e,n,r,i){switch(e){case"focusin":return tf=kv(tf,t,e,n,r,i),!0;case"dragenter":return nf=kv(nf,t,e,n,r,i),!0;case"mouseover":return rf=kv(rf,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Z0.set(a,kv(Z0.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,J0.set(a,kv(J0.get(a)||null,t,e,n,r,i)),!0}return!1}function fB(t){var e=yh(t.target);if(e!==null){var n=lp(e);if(n!==null){if(e=n.tag,e===13){if(e=eB(n),e!==null){t.blockedOn=e,dB(t.priority,function(){cB(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function D1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yj(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uj=r,n.target.dispatchEvent(r),Uj=null}else return e=xb(n),e!==null&&Mk(e),t.blockedOn=n,!1;e.shift()}return!0}function BI(t,e,n){D1(t)&&n.delete(e)}function Tte(){Gj=!1,tf!==null&&D1(tf)&&(tf=null),nf!==null&&D1(nf)&&(nf=null),rf!==null&&D1(rf)&&(rf=null),Z0.forEach(BI),J0.forEach(BI)}function Tv(t,e){t.blockedOn===e&&(t.blockedOn=null,Gj||(Gj=!0,dl.unstable_scheduleCallback(dl.unstable_NormalPriority,Tte)))}function ey(t){function e(i){return Tv(i,t)}if(0<Ax.length){Tv(Ax[0],t);for(var n=1;n<Ax.length;n++){var r=Ax[n];r.blockedOn===t&&(r.blockedOn=null)}}for(tf!==null&&Tv(tf,t),nf!==null&&Tv(nf,t),rf!==null&&Tv(rf,t),Z0.forEach(e),J0.forEach(e),n=0;n<Bd.length;n++)r=Bd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Bd.length&&(n=Bd[0],n.blockedOn===null);)fB(n),n.blockedOn===null&&Bd.shift()}var Am=hd.ReactCurrentBatchConfig,v2=!0;function Dte(t,e,n,r){var i=Lr,a=Am.transition;Am.transition=null;try{Lr=1,Rk(t,e,n,r)}finally{Lr=i,Am.transition=a}}function Ite(t,e,n,r){var i=Lr,a=Am.transition;Am.transition=null;try{Lr=4,Rk(t,e,n,r)}finally{Lr=i,Am.transition=a}}function Rk(t,e,n,r){if(v2){var i=Yj(t,e,n,r);if(i===null)mA(t,e,r,y2,n),$I(t,r);else if(kte(i,t,e,n,r))r.stopPropagation();else if($I(t,r),e&4&&-1<Pte.indexOf(t)){for(;i!==null;){var a=xb(i);if(a!==null&&lB(a),a=Yj(t,e,n,r),a===null&&mA(t,e,r,y2,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else mA(t,e,r,null,n)}}var y2=null;function Yj(t,e,n,r){if(y2=null,t=Dk(r),t=yh(t),t!==null)if(e=lp(t),e===null)t=null;else if(n=e.tag,n===13){if(t=eB(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return y2=t,null}function hB(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xte()){case Ik:return 1;case iB:return 4;case m2:case wte:return 16;case aB:return 536870912;default:return 16}default:return 16}}var Wd=null,Lk=null,I1=null;function pB(){if(I1)return I1;var t,e=Lk,n=e.length,r,i="value"in Wd?Wd.value:Wd.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return I1=i.slice(t,1<r?1-r:void 0)}function O1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cx(){return!0}function VI(){return!1}function gl(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Cx:VI,this.isPropagationStopped=VI,this}return Ii(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cx)},persist:function(){},isPersistent:Cx}),e}var Kg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fk=gl(Kg),bb=Ii({},Kg,{view:0,detail:0}),Ote=gl(bb),sA,oA,Dv,M5=Ii({},bb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dv&&(Dv&&t.type==="mousemove"?(sA=t.screenX-Dv.screenX,oA=t.screenY-Dv.screenY):oA=sA=0,Dv=t),sA)},movementY:function(t){return"movementY"in t?t.movementY:oA}}),UI=gl(M5),Mte=Ii({},M5,{dataTransfer:0}),Rte=gl(Mte),Lte=Ii({},bb,{relatedTarget:0}),lA=gl(Lte),Fte=Ii({},Kg,{animationName:0,elapsedTime:0,pseudoElement:0}),zte=gl(Fte),$te=Ii({},Kg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bte=gl($te),Vte=Ii({},Kg,{data:0}),WI=gl(Vte),Ute={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wte={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hte={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qte(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hte[t])?!!e[t]:!1}function zk(){return qte}var Kte=Ii({},bb,{key:function(t){if(t.key){var e=Ute[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=O1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wte[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zk,charCode:function(t){return t.type==="keypress"?O1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?O1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gte=gl(Kte),Yte=Ii({},M5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HI=gl(Yte),Xte=Ii({},bb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zk}),Qte=gl(Xte),Zte=Ii({},Kg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jte=gl(Zte),ene=Ii({},M5,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tne=gl(ene),nne=[9,13,27,32],$k=Zu&&"CompositionEvent"in window,p0=null;Zu&&"documentMode"in document&&(p0=document.documentMode);var rne=Zu&&"TextEvent"in window&&!p0,mB=Zu&&(!$k||p0&&8<p0&&11>=p0),qI=" ",KI=!1;function gB(t,e){switch(t){case"keyup":return nne.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vB(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zp=!1;function ine(t,e){switch(t){case"compositionend":return vB(e);case"keypress":return e.which!==32?null:(KI=!0,qI);case"textInput":return t=e.data,t===qI&&KI?null:t;default:return null}}function ane(t,e){if(Zp)return t==="compositionend"||!$k&&gB(t,e)?(t=pB(),I1=Lk=Wd=null,Zp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mB&&e.locale!=="ko"?null:e.data;default:return null}}var sne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sne[t.type]:e==="textarea"}function yB(t,e,n,r){Y9(r),e=b2(e,"onChange"),0<e.length&&(n=new Fk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var m0=null,ty=null;function one(t){PB(t,0)}function R5(t){var e=tm(t);if(V9(e))return t}function lne(t,e){if(t==="change")return e}var bB=!1;if(Zu){var cA;if(Zu){var uA="oninput"in document;if(!uA){var YI=document.createElement("div");YI.setAttribute("oninput","return;"),uA=typeof YI.oninput=="function"}cA=uA}else cA=!1;bB=cA&&(!document.documentMode||9<document.documentMode)}function XI(){m0&&(m0.detachEvent("onpropertychange",xB),ty=m0=null)}function xB(t){if(t.propertyName==="value"&&R5(ty)){var e=[];yB(e,ty,t,Dk(t)),J9(one,e)}}function cne(t,e,n){t==="focusin"?(XI(),m0=e,ty=n,m0.attachEvent("onpropertychange",xB)):t==="focusout"&&XI()}function une(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return R5(ty)}function dne(t,e){if(t==="click")return R5(e)}function fne(t,e){if(t==="input"||t==="change")return R5(e)}function hne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ac=typeof Object.is=="function"?Object.is:hne;function ny(t,e){if(Ac(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Tj.call(e,i)||!Ac(t[i],e[i]))return!1}return!0}function QI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ZI(t,e){var n=QI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=QI(n)}}function wB(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wB(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SB(){for(var t=window,e=f2();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=f2(t.document)}return e}function Bk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pne(t){var e=SB(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wB(n.ownerDocument.documentElement,n)){if(r!==null&&Bk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=ZI(n,a);var s=ZI(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mne=Zu&&"documentMode"in document&&11>=document.documentMode,Jp=null,Xj=null,g0=null,Qj=!1;function JI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qj||Jp==null||Jp!==f2(r)||(r=Jp,"selectionStart"in r&&Bk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),g0&&ny(g0,r)||(g0=r,r=b2(Xj,"onSelect"),0<r.length&&(e=new Fk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Jp)))}function jx(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var em={animationend:jx("Animation","AnimationEnd"),animationiteration:jx("Animation","AnimationIteration"),animationstart:jx("Animation","AnimationStart"),transitionend:jx("Transition","TransitionEnd")},dA={},_B={};Zu&&(_B=document.createElement("div").style,"AnimationEvent"in window||(delete em.animationend.animation,delete em.animationiteration.animation,delete em.animationstart.animation),"TransitionEvent"in window||delete em.transitionend.transition);function L5(t){if(dA[t])return dA[t];if(!em[t])return t;var e=em[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _B)return dA[t]=e[n];return t}var AB=L5("animationend"),CB=L5("animationiteration"),jB=L5("animationstart"),EB=L5("transitionend"),NB=new Map,eO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pf(t,e){NB.set(t,e),op(e,[t])}for(var fA=0;fA<eO.length;fA++){var hA=eO[fA],gne=hA.toLowerCase(),vne=hA[0].toUpperCase()+hA.slice(1);Pf(gne,"on"+vne)}Pf(AB,"onAnimationEnd");Pf(CB,"onAnimationIteration");Pf(jB,"onAnimationStart");Pf("dblclick","onDoubleClick");Pf("focusin","onFocus");Pf("focusout","onBlur");Pf(EB,"onTransitionEnd");Vm("onMouseEnter",["mouseout","mouseover"]);Vm("onMouseLeave",["mouseout","mouseover"]);Vm("onPointerEnter",["pointerout","pointerover"]);Vm("onPointerLeave",["pointerout","pointerover"]);op("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));op("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));op("onBeforeInput",["compositionend","keypress","textInput","paste"]);op("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));op("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));op("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var t0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yne=new Set("cancel close invalid load scroll toggle".split(" ").concat(t0));function tO(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gte(r,e,void 0,t),t.currentTarget=null}function PB(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;tO(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;tO(i,o,u),a=l}}}if(p2)throw t=qj,p2=!1,qj=null,t}function fi(t,e){var n=e[nE];n===void 0&&(n=e[nE]=new Set);var r=t+"__bubble";n.has(r)||(kB(e,t,2,!1),n.add(r))}function pA(t,e,n){var r=0;e&&(r|=4),kB(n,t,r,e)}var Ex="_reactListening"+Math.random().toString(36).slice(2);function ry(t){if(!t[Ex]){t[Ex]=!0,L9.forEach(function(n){n!=="selectionchange"&&(yne.has(n)||pA(n,!1,t),pA(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ex]||(e[Ex]=!0,pA("selectionchange",!1,e))}}function kB(t,e,n,r){switch(hB(e)){case 1:var i=Dte;break;case 4:i=Ite;break;default:i=Rk}n=i.bind(null,e,n,t),i=void 0,!Hj||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function mA(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=yh(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}J9(function(){var u=a,d=Dk(n),f=[];e:{var p=NB.get(t);if(p!==void 0){var h=Fk,g=t;switch(t){case"keypress":if(O1(n)===0)break e;case"keydown":case"keyup":h=Gte;break;case"focusin":g="focus",h=lA;break;case"focusout":g="blur",h=lA;break;case"beforeblur":case"afterblur":h=lA;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=UI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Rte;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Qte;break;case AB:case CB:case jB:h=zte;break;case EB:h=Jte;break;case"scroll":h=Ote;break;case"wheel":h=tne;break;case"copy":case"cut":case"paste":h=Bte;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=HI}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?p!==null?p+"Capture":null:p;m=[];for(var b=u,S;b!==null;){S=b;var A=S.stateNode;if(S.tag===5&&A!==null&&(S=A,y!==null&&(A=Q0(b,y),A!=null&&m.push(iy(b,A,S)))),v)break;b=b.return}0<m.length&&(p=new h(p,g,null,n,d),f.push({event:p,listeners:m}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&n!==Uj&&(g=n.relatedTarget||n.fromElement)&&(yh(g)||g[Ju]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=u,g=g?yh(g):null,g!==null&&(v=lp(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=u),h!==g)){if(m=UI,A="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(m=HI,A="onPointerLeave",y="onPointerEnter",b="pointer"),v=h==null?p:tm(h),S=g==null?p:tm(g),p=new m(A,b+"leave",h,n,d),p.target=v,p.relatedTarget=S,A=null,yh(d)===u&&(m=new m(y,b+"enter",g,n,d),m.target=S,m.relatedTarget=v,A=m),v=A,h&&g)t:{for(m=h,y=g,b=0,S=m;S;S=Dp(S))b++;for(S=0,A=y;A;A=Dp(A))S++;for(;0<b-S;)m=Dp(m),b--;for(;0<S-b;)y=Dp(y),S--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=Dp(m),y=Dp(y)}m=null}else m=null;h!==null&&nO(f,p,h,m,!1),g!==null&&v!==null&&nO(f,v,g,m,!0)}}e:{if(p=u?tm(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var C=lne;else if(GI(p))if(bB)C=fne;else{C=une;var D=cne}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=dne);if(C&&(C=C(t,u))){yB(f,C,n,d);break e}D&&D(t,p,u),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&Fj(p,"number",p.value)}switch(D=u?tm(u):window,t){case"focusin":(GI(D)||D.contentEditable==="true")&&(Jp=D,Xj=u,g0=null);break;case"focusout":g0=Xj=Jp=null;break;case"mousedown":Qj=!0;break;case"contextmenu":case"mouseup":case"dragend":Qj=!1,JI(f,n,d);break;case"selectionchange":if(mne)break;case"keydown":case"keyup":JI(f,n,d)}var j;if($k)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Zp?gB(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(mB&&n.locale!=="ko"&&(Zp||N!=="onCompositionStart"?N==="onCompositionEnd"&&Zp&&(j=pB()):(Wd=d,Lk="value"in Wd?Wd.value:Wd.textContent,Zp=!0)),D=b2(u,N),0<D.length&&(N=new WI(N,t,null,n,d),f.push({event:N,listeners:D}),j?N.data=j:(j=vB(n),j!==null&&(N.data=j)))),(j=rne?ine(t,n):ane(t,n))&&(u=b2(u,"onBeforeInput"),0<u.length&&(d=new WI("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=j))}PB(f,e)})}function iy(t,e,n){return{instance:t,listener:e,currentTarget:n}}function b2(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Q0(t,n),a!=null&&r.unshift(iy(t,a,i)),a=Q0(t,e),a!=null&&r.push(iy(t,a,i))),t=t.return}return r}function Dp(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nO(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Q0(n,a),l!=null&&s.unshift(iy(n,l,o))):i||(l=Q0(n,a),l!=null&&s.push(iy(n,l,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var bne=/\r\n?/g,xne=/\u0000|\uFFFD/g;function rO(t){return(typeof t=="string"?t:""+t).replace(bne,`
`).replace(xne,"")}function Nx(t,e,n){if(e=rO(e),rO(t)!==e&&n)throw Error(kt(425))}function x2(){}var Zj=null,Jj=null;function eE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tE=typeof setTimeout=="function"?setTimeout:void 0,wne=typeof clearTimeout=="function"?clearTimeout:void 0,iO=typeof Promise=="function"?Promise:void 0,Sne=typeof queueMicrotask=="function"?queueMicrotask:typeof iO<"u"?function(t){return iO.resolve(null).then(t).catch(_ne)}:tE;function _ne(t){setTimeout(function(){throw t})}function gA(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ey(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ey(e)}function af(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aO(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gg=Math.random().toString(36).slice(2),Yc="__reactFiber$"+Gg,ay="__reactProps$"+Gg,Ju="__reactContainer$"+Gg,nE="__reactEvents$"+Gg,Ane="__reactListeners$"+Gg,Cne="__reactHandles$"+Gg;function yh(t){var e=t[Yc];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ju]||n[Yc]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aO(t);t!==null;){if(n=t[Yc])return n;t=aO(t)}return e}t=n,n=t.parentNode}return null}function xb(t){return t=t[Yc]||t[Ju],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function tm(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(kt(33))}function F5(t){return t[ay]||null}var rE=[],nm=-1;function kf(t){return{current:t}}function bi(t){0>nm||(t.current=rE[nm],rE[nm]=null,nm--)}function ti(t,e){nm++,rE[nm]=t.current,t.current=e}var vf={},Vs=kf(vf),So=kf(!1),Vh=vf;function Um(t,e){var n=t.type.contextTypes;if(!n)return vf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _o(t){return t=t.childContextTypes,t!=null}function w2(){bi(So),bi(Vs)}function sO(t,e,n){if(Vs.current!==vf)throw Error(kt(168));ti(Vs,e),ti(So,n)}function TB(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(kt(108,cte(t)||"Unknown",i));return Ii({},n,r)}function S2(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vf,Vh=Vs.current,ti(Vs,t),ti(So,So.current),!0}function oO(t,e,n){var r=t.stateNode;if(!r)throw Error(kt(169));n?(t=TB(t,e,Vh),r.__reactInternalMemoizedMergedChildContext=t,bi(So),bi(Vs),ti(Vs,t)):bi(So),ti(So,n)}var Lu=null,z5=!1,vA=!1;function DB(t){Lu===null?Lu=[t]:Lu.push(t)}function jne(t){z5=!0,DB(t)}function Tf(){if(!vA&&Lu!==null){vA=!0;var t=0,e=Lr;try{var n=Lu;for(Lr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lu=null,z5=!1}catch(i){throw Lu!==null&&(Lu=Lu.slice(t+1)),rB(Ik,Tf),i}finally{Lr=e,vA=!1}}return null}var rm=[],im=0,_2=null,A2=0,Ml=[],Rl=0,Uh=null,zu=1,$u="";function rh(t,e){rm[im++]=A2,rm[im++]=_2,_2=t,A2=e}function IB(t,e,n){Ml[Rl++]=zu,Ml[Rl++]=$u,Ml[Rl++]=Uh,Uh=t;var r=zu;t=$u;var i=32-bc(r)-1;r&=~(1<<i),n+=1;var a=32-bc(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,zu=1<<32-bc(e)+i|n<<i|r,$u=a+t}else zu=1<<a|n<<i|r,$u=t}function Vk(t){t.return!==null&&(rh(t,1),IB(t,1,0))}function Uk(t){for(;t===_2;)_2=rm[--im],rm[im]=null,A2=rm[--im],rm[im]=null;for(;t===Uh;)Uh=Ml[--Rl],Ml[Rl]=null,$u=Ml[--Rl],Ml[Rl]=null,zu=Ml[--Rl],Ml[Rl]=null}var al=null,nl=null,wi=!1,vc=null;function OB(t,e){var n=Fl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lO(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,al=t,nl=af(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,al=t,nl=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Uh!==null?{id:zu,overflow:$u}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fl(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,al=t,nl=null,!0):!1;default:return!1}}function iE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aE(t){if(wi){var e=nl;if(e){var n=e;if(!lO(t,e)){if(iE(t))throw Error(kt(418));e=af(n.nextSibling);var r=al;e&&lO(t,e)?OB(r,n):(t.flags=t.flags&-4097|2,wi=!1,al=t)}}else{if(iE(t))throw Error(kt(418));t.flags=t.flags&-4097|2,wi=!1,al=t}}}function cO(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;al=t}function Px(t){if(t!==al)return!1;if(!wi)return cO(t),wi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eE(t.type,t.memoizedProps)),e&&(e=nl)){if(iE(t))throw MB(),Error(kt(418));for(;e;)OB(t,e),e=af(e.nextSibling)}if(cO(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(kt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nl=af(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nl=null}}else nl=al?af(t.stateNode.nextSibling):null;return!0}function MB(){for(var t=nl;t;)t=af(t.nextSibling)}function Wm(){nl=al=null,wi=!1}function Wk(t){vc===null?vc=[t]:vc.push(t)}var Ene=hd.ReactCurrentBatchConfig;function Iv(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(kt(309));var r=n.stateNode}if(!r)throw Error(kt(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(kt(284));if(!n._owner)throw Error(kt(290,t))}return t}function kx(t,e){throw t=Object.prototype.toString.call(e),Error(kt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uO(t){var e=t._init;return e(t._payload)}function RB(t){function e(y,b){if(t){var S=y.deletions;S===null?(y.deletions=[b],y.flags|=16):S.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=cf(y,b),y.index=0,y.sibling=null,y}function a(y,b,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<b?(y.flags|=2,b):S):(y.flags|=2,b)):(y.flags|=1048576,b)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,b,S,A){return b===null||b.tag!==6?(b=AA(S,y.mode,A),b.return=y,b):(b=i(b,S),b.return=y,b)}function l(y,b,S,A){var C=S.type;return C===Qp?d(y,b,S.props.children,A,S.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fd&&uO(C)===b.type)?(A=i(b,S.props),A.ref=Iv(y,b,S),A.return=y,A):(A=B1(S.type,S.key,S.props,null,y.mode,A),A.ref=Iv(y,b,S),A.return=y,A)}function u(y,b,S,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=CA(S,y.mode,A),b.return=y,b):(b=i(b,S.children||[]),b.return=y,b)}function d(y,b,S,A,C){return b===null||b.tag!==7?(b=Th(S,y.mode,A,C),b.return=y,b):(b=i(b,S),b.return=y,b)}function f(y,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=AA(""+b,y.mode,S),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bx:return S=B1(b.type,b.key,b.props,null,y.mode,S),S.ref=Iv(y,null,b),S.return=y,S;case Xp:return b=CA(b,y.mode,S),b.return=y,b;case Fd:var A=b._init;return f(y,A(b._payload),S)}if(Jv(b)||Nv(b))return b=Th(b,y.mode,S,null),b.return=y,b;kx(y,b)}return null}function p(y,b,S,A){var C=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:o(y,b,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case bx:return S.key===C?l(y,b,S,A):null;case Xp:return S.key===C?u(y,b,S,A):null;case Fd:return C=S._init,p(y,b,C(S._payload),A)}if(Jv(S)||Nv(S))return C!==null?null:d(y,b,S,A,null);kx(y,S)}return null}function h(y,b,S,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(S)||null,o(b,y,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case bx:return y=y.get(A.key===null?S:A.key)||null,l(b,y,A,C);case Xp:return y=y.get(A.key===null?S:A.key)||null,u(b,y,A,C);case Fd:var D=A._init;return h(y,b,S,D(A._payload),C)}if(Jv(A)||Nv(A))return y=y.get(S)||null,d(b,y,A,C,null);kx(b,A)}return null}function g(y,b,S,A){for(var C=null,D=null,j=b,N=b=0,P=null;j!==null&&N<S.length;N++){j.index>N?(P=j,j=null):P=j.sibling;var O=p(y,j,S[N],A);if(O===null){j===null&&(j=P);break}t&&j&&O.alternate===null&&e(y,j),b=a(O,b,N),D===null?C=O:D.sibling=O,D=O,j=P}if(N===S.length)return n(y,j),wi&&rh(y,N),C;if(j===null){for(;N<S.length;N++)j=f(y,S[N],A),j!==null&&(b=a(j,b,N),D===null?C=j:D.sibling=j,D=j);return wi&&rh(y,N),C}for(j=r(y,j);N<S.length;N++)P=h(j,y,N,S[N],A),P!==null&&(t&&P.alternate!==null&&j.delete(P.key===null?N:P.key),b=a(P,b,N),D===null?C=P:D.sibling=P,D=P);return t&&j.forEach(function(T){return e(y,T)}),wi&&rh(y,N),C}function m(y,b,S,A){var C=Nv(S);if(typeof C!="function")throw Error(kt(150));if(S=C.call(S),S==null)throw Error(kt(151));for(var D=C=null,j=b,N=b=0,P=null,O=S.next();j!==null&&!O.done;N++,O=S.next()){j.index>N?(P=j,j=null):P=j.sibling;var T=p(y,j,O.value,A);if(T===null){j===null&&(j=P);break}t&&j&&T.alternate===null&&e(y,j),b=a(T,b,N),D===null?C=T:D.sibling=T,D=T,j=P}if(O.done)return n(y,j),wi&&rh(y,N),C;if(j===null){for(;!O.done;N++,O=S.next())O=f(y,O.value,A),O!==null&&(b=a(O,b,N),D===null?C=O:D.sibling=O,D=O);return wi&&rh(y,N),C}for(j=r(y,j);!O.done;N++,O=S.next())O=h(j,y,N,O.value,A),O!==null&&(t&&O.alternate!==null&&j.delete(O.key===null?N:O.key),b=a(O,b,N),D===null?C=O:D.sibling=O,D=O);return t&&j.forEach(function(M){return e(y,M)}),wi&&rh(y,N),C}function v(y,b,S,A){if(typeof S=="object"&&S!==null&&S.type===Qp&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case bx:e:{for(var C=S.key,D=b;D!==null;){if(D.key===C){if(C=S.type,C===Qp){if(D.tag===7){n(y,D.sibling),b=i(D,S.props.children),b.return=y,y=b;break e}}else if(D.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fd&&uO(C)===D.type){n(y,D.sibling),b=i(D,S.props),b.ref=Iv(y,D,S),b.return=y,y=b;break e}n(y,D);break}else e(y,D);D=D.sibling}S.type===Qp?(b=Th(S.props.children,y.mode,A,S.key),b.return=y,y=b):(A=B1(S.type,S.key,S.props,null,y.mode,A),A.ref=Iv(y,b,S),A.return=y,y=A)}return s(y);case Xp:e:{for(D=S.key;b!==null;){if(b.key===D)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){n(y,b.sibling),b=i(b,S.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=CA(S,y.mode,A),b.return=y,y=b}return s(y);case Fd:return D=S._init,v(y,b,D(S._payload),A)}if(Jv(S))return g(y,b,S,A);if(Nv(S))return m(y,b,S,A);kx(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(n(y,b.sibling),b=i(b,S),b.return=y,y=b):(n(y,b),b=AA(S,y.mode,A),b.return=y,y=b),s(y)):n(y,b)}return v}var Hm=RB(!0),LB=RB(!1),C2=kf(null),j2=null,am=null,Hk=null;function qk(){Hk=am=j2=null}function Kk(t){var e=C2.current;bi(C2),t._currentValue=e}function sE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Cm(t,e){j2=t,Hk=am=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yo=!0),t.firstContext=null)}function Vl(t){var e=t._currentValue;if(Hk!==t)if(t={context:t,memoizedValue:e,next:null},am===null){if(j2===null)throw Error(kt(308));am=t,j2.dependencies={lanes:0,firstContext:t}}else am=am.next=t;return e}var bh=null;function Gk(t){bh===null?bh=[t]:bh.push(t)}function FB(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Gk(e)):(n.next=i.next,i.next=n),e.interleaved=n,ed(t,r)}function ed(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zd=!1;function Yk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zB(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ku(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,gr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ed(t,n)}return i=r.interleaved,i===null?(e.next=e,Gk(r)):(e.next=i.next,i.next=e),r.interleaved=e,ed(t,n)}function M1(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ok(t,n)}}function dO(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function E2(t,e,n,r){var i=t.updateQueue;zd=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,d=u=l=null,o=a;do{var p=o.lane,h=o.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,m=o;switch(p=e,h=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(h,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,p=typeof g=="function"?g.call(h,f,p):g,p==null)break e;f=Ii({},f,p);break e;case 2:zd=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=h,l=f):d=d.next=h,s|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Hh|=s,t.lanes=s,t.memoizedState=f}}function fO(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(kt(191,i));i.call(r)}}}var wb={},iu=kf(wb),sy=kf(wb),oy=kf(wb);function xh(t){if(t===wb)throw Error(kt(174));return t}function Xk(t,e){switch(ti(oy,e),ti(sy,t),ti(iu,wb),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$j(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$j(e,t)}bi(iu),ti(iu,e)}function qm(){bi(iu),bi(sy),bi(oy)}function $B(t){xh(oy.current);var e=xh(iu.current),n=$j(e,t.type);e!==n&&(ti(sy,t),ti(iu,n))}function Qk(t){sy.current===t&&(bi(iu),bi(sy))}var Ni=kf(0);function N2(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yA=[];function Zk(){for(var t=0;t<yA.length;t++)yA[t]._workInProgressVersionPrimary=null;yA.length=0}var R1=hd.ReactCurrentDispatcher,bA=hd.ReactCurrentBatchConfig,Wh=0,Di=null,Oa=null,Va=null,P2=!1,v0=!1,ly=0,Nne=0;function Es(){throw Error(kt(321))}function Jk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ac(t[n],e[n]))return!1;return!0}function e4(t,e,n,r,i,a){if(Wh=a,Di=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,R1.current=t===null||t.memoizedState===null?Dne:Ine,t=n(r,i),v0){a=0;do{if(v0=!1,ly=0,25<=a)throw Error(kt(301));a+=1,Va=Oa=null,e.updateQueue=null,R1.current=One,t=n(r,i)}while(v0)}if(R1.current=k2,e=Oa!==null&&Oa.next!==null,Wh=0,Va=Oa=Di=null,P2=!1,e)throw Error(kt(300));return t}function t4(){var t=ly!==0;return ly=0,t}function Kc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Va===null?Di.memoizedState=Va=t:Va=Va.next=t,Va}function Ul(){if(Oa===null){var t=Di.alternate;t=t!==null?t.memoizedState:null}else t=Oa.next;var e=Va===null?Di.memoizedState:Va.next;if(e!==null)Va=e,Oa=t;else{if(t===null)throw Error(kt(310));Oa=t,t={memoizedState:Oa.memoizedState,baseState:Oa.baseState,baseQueue:Oa.baseQueue,queue:Oa.queue,next:null},Va===null?Di.memoizedState=Va=t:Va=Va.next=t}return Va}function cy(t,e){return typeof e=="function"?e(t):e}function xA(t){var e=Ul(),n=e.queue;if(n===null)throw Error(kt(311));n.lastRenderedReducer=t;var r=Oa,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var d=u.lane;if((Wh&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,s=r):l=l.next=f,Di.lanes|=d,Hh|=d}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,Ac(r,e.memoizedState)||(yo=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Di.lanes|=a,Hh|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wA(t){var e=Ul(),n=e.queue;if(n===null)throw Error(kt(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);Ac(a,e.memoizedState)||(yo=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function BB(){}function VB(t,e){var n=Di,r=Ul(),i=e(),a=!Ac(r.memoizedState,i);if(a&&(r.memoizedState=i,yo=!0),r=r.queue,n4(HB.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Va!==null&&Va.memoizedState.tag&1){if(n.flags|=2048,uy(9,WB.bind(null,n,r,i,e),void 0,null),qa===null)throw Error(kt(349));Wh&30||UB(n,e,i)}return i}function UB(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Di.updateQueue,e===null?(e={lastEffect:null,stores:null},Di.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function WB(t,e,n,r){e.value=n,e.getSnapshot=r,qB(e)&&KB(t)}function HB(t,e,n){return n(function(){qB(e)&&KB(t)})}function qB(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ac(t,n)}catch{return!0}}function KB(t){var e=ed(t,1);e!==null&&xc(e,t,1,-1)}function hO(t){var e=Kc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cy,lastRenderedState:t},e.queue=t,t=t.dispatch=Tne.bind(null,Di,t),[e.memoizedState,t]}function uy(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Di.updateQueue,e===null?(e={lastEffect:null,stores:null},Di.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function GB(){return Ul().memoizedState}function L1(t,e,n,r){var i=Kc();Di.flags|=t,i.memoizedState=uy(1|e,n,void 0,r===void 0?null:r)}function $5(t,e,n,r){var i=Ul();r=r===void 0?null:r;var a=void 0;if(Oa!==null){var s=Oa.memoizedState;if(a=s.destroy,r!==null&&Jk(r,s.deps)){i.memoizedState=uy(e,n,a,r);return}}Di.flags|=t,i.memoizedState=uy(1|e,n,a,r)}function pO(t,e){return L1(8390656,8,t,e)}function n4(t,e){return $5(2048,8,t,e)}function YB(t,e){return $5(4,2,t,e)}function XB(t,e){return $5(4,4,t,e)}function QB(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ZB(t,e,n){return n=n!=null?n.concat([t]):null,$5(4,4,QB.bind(null,e,t),n)}function r4(){}function JB(t,e){var n=Ul();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function eV(t,e){var n=Ul();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tV(t,e,n){return Wh&21?(Ac(n,e)||(n=sB(),Di.lanes|=n,Hh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yo=!0),t.memoizedState=n)}function Pne(t,e){var n=Lr;Lr=n!==0&&4>n?n:4,t(!0);var r=bA.transition;bA.transition={};try{t(!1),e()}finally{Lr=n,bA.transition=r}}function nV(){return Ul().memoizedState}function kne(t,e,n){var r=lf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rV(t))iV(e,n);else if(n=FB(t,e,n,r),n!==null){var i=ro();xc(n,t,r,i),aV(n,e,r)}}function Tne(t,e,n){var r=lf(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rV(t))iV(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Ac(o,s)){var l=e.interleaved;l===null?(i.next=i,Gk(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=FB(t,e,i,r),n!==null&&(i=ro(),xc(n,t,r,i),aV(n,e,r))}}function rV(t){var e=t.alternate;return t===Di||e!==null&&e===Di}function iV(t,e){v0=P2=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function aV(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ok(t,n)}}var k2={readContext:Vl,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},Dne={readContext:Vl,useCallback:function(t,e){return Kc().memoizedState=[t,e===void 0?null:e],t},useContext:Vl,useEffect:pO,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,L1(4194308,4,QB.bind(null,e,t),n)},useLayoutEffect:function(t,e){return L1(4194308,4,t,e)},useInsertionEffect:function(t,e){return L1(4,2,t,e)},useMemo:function(t,e){var n=Kc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kne.bind(null,Di,t),[r.memoizedState,t]},useRef:function(t){var e=Kc();return t={current:t},e.memoizedState=t},useState:hO,useDebugValue:r4,useDeferredValue:function(t){return Kc().memoizedState=t},useTransition:function(){var t=hO(!1),e=t[0];return t=Pne.bind(null,t[1]),Kc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Di,i=Kc();if(wi){if(n===void 0)throw Error(kt(407));n=n()}else{if(n=e(),qa===null)throw Error(kt(349));Wh&30||UB(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,pO(HB.bind(null,r,a,t),[t]),r.flags|=2048,uy(9,WB.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Kc(),e=qa.identifierPrefix;if(wi){var n=$u,r=zu;n=(r&~(1<<32-bc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ly++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Nne++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ine={readContext:Vl,useCallback:JB,useContext:Vl,useEffect:n4,useImperativeHandle:ZB,useInsertionEffect:YB,useLayoutEffect:XB,useMemo:eV,useReducer:xA,useRef:GB,useState:function(){return xA(cy)},useDebugValue:r4,useDeferredValue:function(t){var e=Ul();return tV(e,Oa.memoizedState,t)},useTransition:function(){var t=xA(cy)[0],e=Ul().memoizedState;return[t,e]},useMutableSource:BB,useSyncExternalStore:VB,useId:nV,unstable_isNewReconciler:!1},One={readContext:Vl,useCallback:JB,useContext:Vl,useEffect:n4,useImperativeHandle:ZB,useInsertionEffect:YB,useLayoutEffect:XB,useMemo:eV,useReducer:wA,useRef:GB,useState:function(){return wA(cy)},useDebugValue:r4,useDeferredValue:function(t){var e=Ul();return Oa===null?e.memoizedState=t:tV(e,Oa.memoizedState,t)},useTransition:function(){var t=wA(cy)[0],e=Ul().memoizedState;return[t,e]},useMutableSource:BB,useSyncExternalStore:VB,useId:nV,unstable_isNewReconciler:!1};function hc(t,e){if(t&&t.defaultProps){e=Ii({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function oE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ii({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var B5={isMounted:function(t){return(t=t._reactInternals)?lp(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ro(),i=lf(t),a=Ku(r,i);a.payload=e,n!=null&&(a.callback=n),e=sf(t,a,i),e!==null&&(xc(e,t,i,r),M1(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ro(),i=lf(t),a=Ku(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=sf(t,a,i),e!==null&&(xc(e,t,i,r),M1(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ro(),r=lf(t),i=Ku(n,r);i.tag=2,e!=null&&(i.callback=e),e=sf(t,i,r),e!==null&&(xc(e,t,r,n),M1(e,t,r))}};function mO(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!ny(n,r)||!ny(i,a):!0}function sV(t,e,n){var r=!1,i=vf,a=e.contextType;return typeof a=="object"&&a!==null?a=Vl(a):(i=_o(e)?Vh:Vs.current,r=e.contextTypes,a=(r=r!=null)?Um(t,i):vf),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=B5,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function gO(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&B5.enqueueReplaceState(e,e.state,null)}function lE(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Yk(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Vl(a):(a=_o(e)?Vh:Vs.current,i.context=Um(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(oE(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&B5.enqueueReplaceState(i,i.state,null),E2(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Km(t,e){try{var n="",r=e;do n+=lte(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function SA(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Mne=typeof WeakMap=="function"?WeakMap:Map;function oV(t,e,n){n=Ku(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){D2||(D2=!0,bE=r),cE(t,e)},n}function lV(t,e,n){n=Ku(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cE(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){cE(t,e),typeof r!="function"&&(of===null?of=new Set([this]):of.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function vO(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Mne;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Yne.bind(null,t,e,n),e.then(t,t))}function yO(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bO(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ku(-1,1),e.tag=2,sf(n,e,1))),n.lanes|=1),t)}var Rne=hd.ReactCurrentOwner,yo=!1;function Zs(t,e,n,r){e.child=t===null?LB(e,null,n,r):Hm(e,t.child,n,r)}function xO(t,e,n,r,i){n=n.render;var a=e.ref;return Cm(e,i),r=e4(t,e,n,r,a,i),n=t4(),t!==null&&!yo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,td(t,e,i)):(wi&&n&&Vk(e),e.flags|=1,Zs(t,e,r,i),e.child)}function wO(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!d4(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,cV(t,e,a,r,i)):(t=B1(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:ny,n(s,r)&&t.ref===e.ref)return td(t,e,i)}return e.flags|=1,t=cf(a,r),t.ref=e.ref,t.return=e,e.child=t}function cV(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(ny(a,r)&&t.ref===e.ref)if(yo=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(yo=!0);else return e.lanes=t.lanes,td(t,e,i)}return uE(t,e,n,r,i)}function uV(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ti(om,Jo),Jo|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ti(om,Jo),Jo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ti(om,Jo),Jo|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,ti(om,Jo),Jo|=r;return Zs(t,e,i,n),e.child}function dV(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uE(t,e,n,r,i){var a=_o(n)?Vh:Vs.current;return a=Um(e,a),Cm(e,i),n=e4(t,e,n,r,a,i),r=t4(),t!==null&&!yo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,td(t,e,i)):(wi&&r&&Vk(e),e.flags|=1,Zs(t,e,n,i),e.child)}function SO(t,e,n,r,i){if(_o(n)){var a=!0;S2(e)}else a=!1;if(Cm(e,i),e.stateNode===null)F1(t,e),sV(e,n,r),lE(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Vl(u):(u=_o(n)?Vh:Vs.current,u=Um(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&gO(e,s,r,u),zd=!1;var p=e.memoizedState;s.state=p,E2(e,r,s,i),l=e.memoizedState,o!==r||p!==l||So.current||zd?(typeof d=="function"&&(oE(e,n,d,r),l=e.memoizedState),(o=zd||mO(e,n,o,r,p,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,zB(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:hc(e.type,o),s.props=u,f=e.pendingProps,p=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vl(l):(l=_o(n)?Vh:Vs.current,l=Um(e,l));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||p!==l)&&gO(e,s,r,l),zd=!1,p=e.memoizedState,s.state=p,E2(e,r,s,i);var g=e.memoizedState;o!==f||p!==g||So.current||zd?(typeof h=="function"&&(oE(e,n,h,r),g=e.memoizedState),(u=zd||mO(e,n,u,r,p,g,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),s.props=r,s.state=g,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return dE(t,e,n,r,a,i)}function dE(t,e,n,r,i,a){dV(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&oO(e,n,!1),td(t,e,a);r=e.stateNode,Rne.current=e;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Hm(e,t.child,null,a),e.child=Hm(e,null,o,a)):Zs(t,e,o,a),e.memoizedState=r.state,i&&oO(e,n,!0),e.child}function fV(t){var e=t.stateNode;e.pendingContext?sO(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sO(t,e.context,!1),Xk(t,e.containerInfo)}function _O(t,e,n,r,i){return Wm(),Wk(i),e.flags|=256,Zs(t,e,n,r),e.child}var fE={dehydrated:null,treeContext:null,retryLane:0};function hE(t){return{baseLanes:t,cachePool:null,transitions:null}}function hV(t,e,n){var r=e.pendingProps,i=Ni.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ti(Ni,i&1),t===null)return aE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,a?(r=e.mode,a=e.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=W5(s,r,0,null),t=Th(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=hE(n),e.memoizedState=fE,t):i4(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Lne(t,e,s,r,o,i,n);if(a){a=r.fallback,s=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=cf(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=cf(o,a):(a=Th(a,s,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,s=t.child.memoizedState,s=s===null?hE(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~n,e.memoizedState=fE,r}return a=t.child,t=a.sibling,r=cf(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function i4(t,e){return e=W5({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tx(t,e,n,r){return r!==null&&Wk(r),Hm(e,t.child,null,n),t=i4(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lne(t,e,n,r,i,a,s){if(n)return e.flags&256?(e.flags&=-257,r=SA(Error(kt(422))),Tx(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=W5({mode:"visible",children:r.children},i,0,null),a=Th(a,i,s,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Hm(e,t.child,null,s),e.child.memoizedState=hE(s),e.memoizedState=fE,a);if(!(e.mode&1))return Tx(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(kt(419)),r=SA(a,r,void 0),Tx(t,e,s,r)}if(o=(s&t.childLanes)!==0,yo||o){if(r=qa,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ed(t,i),xc(r,t,i,-1))}return u4(),r=SA(Error(kt(421))),Tx(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Xne.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,nl=af(i.nextSibling),al=e,wi=!0,vc=null,t!==null&&(Ml[Rl++]=zu,Ml[Rl++]=$u,Ml[Rl++]=Uh,zu=t.id,$u=t.overflow,Uh=e),e=i4(e,r.children),e.flags|=4096,e)}function AO(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sE(t.return,e,n)}function _A(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function pV(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Zs(t,e,r.children,n),r=Ni.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&AO(t,n,e);else if(t.tag===19)AO(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ti(Ni,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&N2(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_A(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&N2(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_A(e,!0,n,null,a);break;case"together":_A(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function F1(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function td(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(kt(153));if(e.child!==null){for(t=e.child,n=cf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=cf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Fne(t,e,n){switch(e.tag){case 3:fV(e),Wm();break;case 5:$B(e);break;case 1:_o(e.type)&&S2(e);break;case 4:Xk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ti(C2,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ti(Ni,Ni.current&1),e.flags|=128,null):n&e.child.childLanes?hV(t,e,n):(ti(Ni,Ni.current&1),t=td(t,e,n),t!==null?t.sibling:null);ti(Ni,Ni.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pV(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ti(Ni,Ni.current),r)break;return null;case 22:case 23:return e.lanes=0,uV(t,e,n)}return td(t,e,n)}var mV,pE,gV,vV;mV=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pE=function(){};gV=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,xh(iu.current);var a=null;switch(n){case"input":i=Rj(t,i),r=Rj(t,r),a=[];break;case"select":i=Ii({},i,{value:void 0}),r=Ii({},r,{value:void 0}),a=[];break;case"textarea":i=zj(t,i),r=zj(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=x2)}Bj(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Y0.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Y0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&fi("scroll",t),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};vV=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ov(t,e){if(!wi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ns(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zne(t,e,n){var r=e.pendingProps;switch(Uk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(e),null;case 1:return _o(e.type)&&w2(),Ns(e),null;case 3:return r=e.stateNode,qm(),bi(So),bi(Vs),Zk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Px(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vc!==null&&(SE(vc),vc=null))),pE(t,e),Ns(e),null;case 5:Qk(e);var i=xh(oy.current);if(n=e.type,t!==null&&e.stateNode!=null)gV(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(kt(166));return Ns(e),null}if(t=xh(iu.current),Px(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Yc]=e,r[ay]=a,t=(e.mode&1)!==0,n){case"dialog":fi("cancel",r),fi("close",r);break;case"iframe":case"object":case"embed":fi("load",r);break;case"video":case"audio":for(i=0;i<t0.length;i++)fi(t0[i],r);break;case"source":fi("error",r);break;case"img":case"image":case"link":fi("error",r),fi("load",r);break;case"details":fi("toggle",r);break;case"input":II(r,a),fi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},fi("invalid",r);break;case"textarea":MI(r,a),fi("invalid",r)}Bj(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Nx(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Nx(r.textContent,o,t),i=["children",""+o]):Y0.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&fi("scroll",r)}switch(n){case"input":xx(r),OI(r,a,!0);break;case"textarea":xx(r),RI(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=x2)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=H9(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Yc]=e,t[ay]=r,mV(t,e,!1,!1),e.stateNode=t;e:{switch(s=Vj(n,r),n){case"dialog":fi("cancel",t),fi("close",t),i=r;break;case"iframe":case"object":case"embed":fi("load",t),i=r;break;case"video":case"audio":for(i=0;i<t0.length;i++)fi(t0[i],t);i=r;break;case"source":fi("error",t),i=r;break;case"img":case"image":case"link":fi("error",t),fi("load",t),i=r;break;case"details":fi("toggle",t),i=r;break;case"input":II(t,r),i=Rj(t,r),fi("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ii({},r,{value:void 0}),fi("invalid",t);break;case"textarea":MI(t,r),i=zj(t,r),fi("invalid",t);break;default:i=r}Bj(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?G9(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&q9(t,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&X0(t,l):typeof l=="number"&&X0(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Y0.hasOwnProperty(a)?l!=null&&a==="onScroll"&&fi("scroll",t):l!=null&&Nk(t,a,l,s))}switch(n){case"input":xx(t),OI(t,r,!1);break;case"textarea":xx(t),RI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gf(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?wm(t,!!r.multiple,a,!1):r.defaultValue!=null&&wm(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=x2)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ns(e),null;case 6:if(t&&e.stateNode!=null)vV(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(kt(166));if(n=xh(oy.current),xh(iu.current),Px(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yc]=e,(a=r.nodeValue!==n)&&(t=al,t!==null))switch(t.tag){case 3:Nx(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nx(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yc]=e,e.stateNode=r}return Ns(e),null;case 13:if(bi(Ni),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wi&&nl!==null&&e.mode&1&&!(e.flags&128))MB(),Wm(),e.flags|=98560,a=!1;else if(a=Px(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(kt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(kt(317));a[Yc]=e}else Wm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ns(e),a=!1}else vc!==null&&(SE(vc),vc=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ni.current&1?Ma===0&&(Ma=3):u4())),e.updateQueue!==null&&(e.flags|=4),Ns(e),null);case 4:return qm(),pE(t,e),t===null&&ry(e.stateNode.containerInfo),Ns(e),null;case 10:return Kk(e.type._context),Ns(e),null;case 17:return _o(e.type)&&w2(),Ns(e),null;case 19:if(bi(Ni),a=e.memoizedState,a===null)return Ns(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)Ov(a,!1);else{if(Ma!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=N2(t),s!==null){for(e.flags|=128,Ov(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ti(Ni,Ni.current&1|2),e.child}t=t.sibling}a.tail!==null&&aa()>Gm&&(e.flags|=128,r=!0,Ov(a,!1),e.lanes=4194304)}else{if(!r)if(t=N2(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ov(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!wi)return Ns(e),null}else 2*aa()-a.renderingStartTime>Gm&&n!==1073741824&&(e.flags|=128,r=!0,Ov(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(n=a.last,n!==null?n.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=aa(),e.sibling=null,n=Ni.current,ti(Ni,r?n&1|2:n&1),e):(Ns(e),null);case 22:case 23:return c4(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Jo&1073741824&&(Ns(e),e.subtreeFlags&6&&(e.flags|=8192)):Ns(e),null;case 24:return null;case 25:return null}throw Error(kt(156,e.tag))}function $ne(t,e){switch(Uk(e),e.tag){case 1:return _o(e.type)&&w2(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qm(),bi(So),bi(Vs),Zk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qk(e),null;case 13:if(bi(Ni),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(kt(340));Wm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bi(Ni),null;case 4:return qm(),null;case 10:return Kk(e.type._context),null;case 22:case 23:return c4(),null;case 24:return null;default:return null}}var Dx=!1,Ls=!1,Bne=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function sm(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vi(t,e,r)}else n.current=null}function mE(t,e,n){try{n()}catch(r){Vi(t,e,r)}}var CO=!1;function Vne(t,e){if(Zj=v2,t=SB(),Bk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,u=0,d=0,f=t,p=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(o=s+i),f!==a||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===t)break t;if(p===n&&++u===i&&(o=s),p===a&&++d===r&&(l=s),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jj={focusedElem:t,selectionRange:n},v2=!1,Jt=e;Jt!==null;)if(e=Jt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Jt=t;else for(;Jt!==null;){e=Jt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:hc(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(kt(163))}}catch(A){Vi(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Jt=t;break}Jt=e.return}return g=CO,CO=!1,g}function y0(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&mE(e,n,a)}i=i.next}while(i!==r)}}function V5(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yV(t){var e=t.alternate;e!==null&&(t.alternate=null,yV(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yc],delete e[ay],delete e[nE],delete e[Ane],delete e[Cne])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bV(t){return t.tag===5||t.tag===3||t.tag===4}function jO(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bV(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=x2));else if(r!==4&&(t=t.child,t!==null))for(vE(t,e,n),t=t.sibling;t!==null;)vE(t,e,n),t=t.sibling}function yE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yE(t,e,n),t=t.sibling;t!==null;)yE(t,e,n),t=t.sibling}var as=null,pc=!1;function Pd(t,e,n){for(n=n.child;n!==null;)xV(t,e,n),n=n.sibling}function xV(t,e,n){if(ru&&typeof ru.onCommitFiberUnmount=="function")try{ru.onCommitFiberUnmount(O5,n)}catch{}switch(n.tag){case 5:Ls||sm(n,e);case 6:var r=as,i=pc;as=null,Pd(t,e,n),as=r,pc=i,as!==null&&(pc?(t=as,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):as.removeChild(n.stateNode));break;case 18:as!==null&&(pc?(t=as,n=n.stateNode,t.nodeType===8?gA(t.parentNode,n):t.nodeType===1&&gA(t,n),ey(t)):gA(as,n.stateNode));break;case 4:r=as,i=pc,as=n.stateNode.containerInfo,pc=!0,Pd(t,e,n),as=r,pc=i;break;case 0:case 11:case 14:case 15:if(!Ls&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&mE(n,e,s),i=i.next}while(i!==r)}Pd(t,e,n);break;case 1:if(!Ls&&(sm(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Vi(n,e,o)}Pd(t,e,n);break;case 21:Pd(t,e,n);break;case 22:n.mode&1?(Ls=(r=Ls)||n.memoizedState!==null,Pd(t,e,n),Ls=r):Pd(t,e,n);break;default:Pd(t,e,n)}}function EO(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Bne),e.forEach(function(r){var i=Qne.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function cc(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:as=o.stateNode,pc=!1;break e;case 3:as=o.stateNode.containerInfo,pc=!0;break e;case 4:as=o.stateNode.containerInfo,pc=!0;break e}o=o.return}if(as===null)throw Error(kt(160));xV(a,s,i),as=null,pc=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Vi(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wV(e,t),e=e.sibling}function wV(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cc(e,t),Wc(t),r&4){try{y0(3,t,t.return),V5(3,t)}catch(m){Vi(t,t.return,m)}try{y0(5,t,t.return)}catch(m){Vi(t,t.return,m)}}break;case 1:cc(e,t),Wc(t),r&512&&n!==null&&sm(n,n.return);break;case 5:if(cc(e,t),Wc(t),r&512&&n!==null&&sm(n,n.return),t.flags&32){var i=t.stateNode;try{X0(i,"")}catch(m){Vi(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=n!==null?n.memoizedProps:a,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&U9(i,a),Vj(o,s);var u=Vj(o,a);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?G9(i,f):d==="dangerouslySetInnerHTML"?q9(i,f):d==="children"?X0(i,f):Nk(i,d,f,u)}switch(o){case"input":Lj(i,a);break;case"textarea":W9(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?wm(i,!!a.multiple,h,!1):p!==!!a.multiple&&(a.defaultValue!=null?wm(i,!!a.multiple,a.defaultValue,!0):wm(i,!!a.multiple,a.multiple?[]:"",!1))}i[ay]=a}catch(m){Vi(t,t.return,m)}}break;case 6:if(cc(e,t),Wc(t),r&4){if(t.stateNode===null)throw Error(kt(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(m){Vi(t,t.return,m)}}break;case 3:if(cc(e,t),Wc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ey(e.containerInfo)}catch(m){Vi(t,t.return,m)}break;case 4:cc(e,t),Wc(t);break;case 13:cc(e,t),Wc(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(o4=aa())),r&4&&EO(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ls=(u=Ls)||d,cc(e,t),Ls=u):cc(e,t),Wc(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Jt=t,d=t.child;d!==null;){for(f=Jt=d;Jt!==null;){switch(p=Jt,h=p.child,p.tag){case 0:case 11:case 14:case 15:y0(4,p,p.return);break;case 1:sm(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Vi(r,n,m)}}break;case 5:sm(p,p.return);break;case 22:if(p.memoizedState!==null){PO(f);continue}}h!==null?(h.return=p,Jt=h):PO(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=K9("display",s))}catch(m){Vi(t,t.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Vi(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cc(e,t),Wc(t),r&4&&EO(t);break;case 21:break;default:cc(e,t),Wc(t)}}function Wc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bV(n)){var r=n;break e}n=n.return}throw Error(kt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(X0(i,""),r.flags&=-33);var a=jO(t);yE(t,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=jO(t);vE(t,o,s);break;default:throw Error(kt(161))}}catch(l){Vi(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Une(t,e,n){Jt=t,SV(t)}function SV(t,e,n){for(var r=(t.mode&1)!==0;Jt!==null;){var i=Jt,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Dx;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Ls;o=Dx;var u=Ls;if(Dx=s,(Ls=l)&&!u)for(Jt=i;Jt!==null;)s=Jt,l=s.child,s.tag===22&&s.memoizedState!==null?kO(i):l!==null?(l.return=s,Jt=l):kO(i);for(;a!==null;)Jt=a,SV(a),a=a.sibling;Jt=i,Dx=o,Ls=u}NO(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Jt=a):NO(t)}}function NO(t){for(;Jt!==null;){var e=Jt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ls||V5(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ls)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:hc(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&fO(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fO(e,s,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ey(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(kt(163))}Ls||e.flags&512&&gE(e)}catch(p){Vi(e,e.return,p)}}if(e===t){Jt=null;break}if(n=e.sibling,n!==null){n.return=e.return,Jt=n;break}Jt=e.return}}function PO(t){for(;Jt!==null;){var e=Jt;if(e===t){Jt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Jt=n;break}Jt=e.return}}function kO(t){for(;Jt!==null;){var e=Jt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{V5(4,e)}catch(l){Vi(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Vi(e,i,l)}}var a=e.return;try{gE(e)}catch(l){Vi(e,a,l)}break;case 5:var s=e.return;try{gE(e)}catch(l){Vi(e,s,l)}}}catch(l){Vi(e,e.return,l)}if(e===t){Jt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Jt=o;break}Jt=e.return}}var Wne=Math.ceil,T2=hd.ReactCurrentDispatcher,a4=hd.ReactCurrentOwner,$l=hd.ReactCurrentBatchConfig,gr=0,qa=null,ma=null,us=0,Jo=0,om=kf(0),Ma=0,dy=null,Hh=0,U5=0,s4=0,b0=null,go=null,o4=0,Gm=1/0,Mu=null,D2=!1,bE=null,of=null,Ix=!1,Hd=null,I2=0,x0=0,xE=null,z1=-1,$1=0;function ro(){return gr&6?aa():z1!==-1?z1:z1=aa()}function lf(t){return t.mode&1?gr&2&&us!==0?us&-us:Ene.transition!==null?($1===0&&($1=sB()),$1):(t=Lr,t!==0||(t=window.event,t=t===void 0?16:hB(t.type)),t):1}function xc(t,e,n,r){if(50<x0)throw x0=0,xE=null,Error(kt(185));yb(t,n,r),(!(gr&2)||t!==qa)&&(t===qa&&(!(gr&2)&&(U5|=n),Ma===4&&Vd(t,us)),Ao(t,r),n===1&&gr===0&&!(e.mode&1)&&(Gm=aa()+500,z5&&Tf()))}function Ao(t,e){var n=t.callbackNode;Ete(t,e);var r=g2(t,t===qa?us:0);if(r===0)n!==null&&zI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zI(n),e===1)t.tag===0?jne(TO.bind(null,t)):DB(TO.bind(null,t)),Sne(function(){!(gr&6)&&Tf()}),n=null;else{switch(oB(r)){case 1:n=Ik;break;case 4:n=iB;break;case 16:n=m2;break;case 536870912:n=aB;break;default:n=m2}n=kV(n,_V.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _V(t,e){if(z1=-1,$1=0,gr&6)throw Error(kt(327));var n=t.callbackNode;if(jm()&&t.callbackNode!==n)return null;var r=g2(t,t===qa?us:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=O2(t,r);else{e=r;var i=gr;gr|=2;var a=CV();(qa!==t||us!==e)&&(Mu=null,Gm=aa()+500,kh(t,e));do try{Kne();break}catch(o){AV(t,o)}while(!0);qk(),T2.current=a,gr=i,ma!==null?e=0:(qa=null,us=0,e=Ma)}if(e!==0){if(e===2&&(i=Kj(t),i!==0&&(r=i,e=wE(t,i))),e===1)throw n=dy,kh(t,0),Vd(t,r),Ao(t,aa()),n;if(e===6)Vd(t,r);else{if(i=t.current.alternate,!(r&30)&&!Hne(i)&&(e=O2(t,r),e===2&&(a=Kj(t),a!==0&&(r=a,e=wE(t,a))),e===1))throw n=dy,kh(t,0),Vd(t,r),Ao(t,aa()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(kt(345));case 2:ih(t,go,Mu);break;case 3:if(Vd(t,r),(r&130023424)===r&&(e=o4+500-aa(),10<e)){if(g2(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ro(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tE(ih.bind(null,t,go,Mu),e);break}ih(t,go,Mu);break;case 4:if(Vd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-bc(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=aa()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Wne(r/1960))-r,10<r){t.timeoutHandle=tE(ih.bind(null,t,go,Mu),r);break}ih(t,go,Mu);break;case 5:ih(t,go,Mu);break;default:throw Error(kt(329))}}}return Ao(t,aa()),t.callbackNode===n?_V.bind(null,t):null}function wE(t,e){var n=b0;return t.current.memoizedState.isDehydrated&&(kh(t,e).flags|=256),t=O2(t,e),t!==2&&(e=go,go=n,e!==null&&SE(e)),t}function SE(t){go===null?go=t:go.push.apply(go,t)}function Hne(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ac(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vd(t,e){for(e&=~s4,e&=~U5,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bc(e),r=1<<n;t[n]=-1,e&=~r}}function TO(t){if(gr&6)throw Error(kt(327));jm();var e=g2(t,0);if(!(e&1))return Ao(t,aa()),null;var n=O2(t,e);if(t.tag!==0&&n===2){var r=Kj(t);r!==0&&(e=r,n=wE(t,r))}if(n===1)throw n=dy,kh(t,0),Vd(t,e),Ao(t,aa()),n;if(n===6)throw Error(kt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ih(t,go,Mu),Ao(t,aa()),null}function l4(t,e){var n=gr;gr|=1;try{return t(e)}finally{gr=n,gr===0&&(Gm=aa()+500,z5&&Tf())}}function qh(t){Hd!==null&&Hd.tag===0&&!(gr&6)&&jm();var e=gr;gr|=1;var n=$l.transition,r=Lr;try{if($l.transition=null,Lr=1,t)return t()}finally{Lr=r,$l.transition=n,gr=e,!(gr&6)&&Tf()}}function c4(){Jo=om.current,bi(om)}function kh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wne(n)),ma!==null)for(n=ma.return;n!==null;){var r=n;switch(Uk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&w2();break;case 3:qm(),bi(So),bi(Vs),Zk();break;case 5:Qk(r);break;case 4:qm();break;case 13:bi(Ni);break;case 19:bi(Ni);break;case 10:Kk(r.type._context);break;case 22:case 23:c4()}n=n.return}if(qa=t,ma=t=cf(t.current,null),us=Jo=e,Ma=0,dy=null,s4=U5=Hh=0,go=b0=null,bh!==null){for(e=0;e<bh.length;e++)if(n=bh[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}bh=null}return t}function AV(t,e){do{var n=ma;try{if(qk(),R1.current=k2,P2){for(var r=Di.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}P2=!1}if(Wh=0,Va=Oa=Di=null,v0=!1,ly=0,a4.current=null,n===null||n.return===null){Ma=1,dy=e,ma=null;break}e:{var a=t,s=n.return,o=n,l=e;if(e=us,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=yO(s);if(h!==null){h.flags&=-257,bO(h,s,o,a,e),h.mode&1&&vO(a,u,e),e=h,l=u;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){vO(a,u,e),u4();break e}l=Error(kt(426))}}else if(wi&&o.mode&1){var v=yO(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),bO(v,s,o,a,e),Wk(Km(l,o));break e}}a=l=Km(l,o),Ma!==4&&(Ma=2),b0===null?b0=[a]:b0.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=oV(a,l,e);dO(a,y);break e;case 1:o=l;var b=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(of===null||!of.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var A=lV(a,o,e);dO(a,A);break e}}a=a.return}while(a!==null)}EV(n)}catch(C){e=C,ma===n&&n!==null&&(ma=n=n.return);continue}break}while(!0)}function CV(){var t=T2.current;return T2.current=k2,t===null?k2:t}function u4(){(Ma===0||Ma===3||Ma===2)&&(Ma=4),qa===null||!(Hh&268435455)&&!(U5&268435455)||Vd(qa,us)}function O2(t,e){var n=gr;gr|=2;var r=CV();(qa!==t||us!==e)&&(Mu=null,kh(t,e));do try{qne();break}catch(i){AV(t,i)}while(!0);if(qk(),gr=n,T2.current=r,ma!==null)throw Error(kt(261));return qa=null,us=0,Ma}function qne(){for(;ma!==null;)jV(ma)}function Kne(){for(;ma!==null&&!yte();)jV(ma)}function jV(t){var e=PV(t.alternate,t,Jo);t.memoizedProps=t.pendingProps,e===null?EV(t):ma=e,a4.current=null}function EV(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$ne(n,e),n!==null){n.flags&=32767,ma=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ma=6,ma=null;return}}else if(n=zne(n,e,Jo),n!==null){ma=n;return}if(e=e.sibling,e!==null){ma=e;return}ma=e=t}while(e!==null);Ma===0&&(Ma=5)}function ih(t,e,n){var r=Lr,i=$l.transition;try{$l.transition=null,Lr=1,Gne(t,e,n,r)}finally{$l.transition=i,Lr=r}return null}function Gne(t,e,n,r){do jm();while(Hd!==null);if(gr&6)throw Error(kt(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(kt(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Nte(t,a),t===qa&&(ma=qa=null,us=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ix||(Ix=!0,kV(m2,function(){return jm(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=$l.transition,$l.transition=null;var s=Lr;Lr=1;var o=gr;gr|=4,a4.current=null,Vne(t,n),wV(n,t),pne(Jj),v2=!!Zj,Jj=Zj=null,t.current=n,Une(n),bte(),gr=o,Lr=s,$l.transition=a}else t.current=n;if(Ix&&(Ix=!1,Hd=t,I2=i),a=t.pendingLanes,a===0&&(of=null),Ste(n.stateNode),Ao(t,aa()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(D2)throw D2=!1,t=bE,bE=null,t;return I2&1&&t.tag!==0&&jm(),a=t.pendingLanes,a&1?t===xE?x0++:(x0=0,xE=t):x0=0,Tf(),null}function jm(){if(Hd!==null){var t=oB(I2),e=$l.transition,n=Lr;try{if($l.transition=null,Lr=16>t?16:t,Hd===null)var r=!1;else{if(t=Hd,Hd=null,I2=0,gr&6)throw Error(kt(331));var i=gr;for(gr|=4,Jt=t.current;Jt!==null;){var a=Jt,s=a.child;if(Jt.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Jt=u;Jt!==null;){var d=Jt;switch(d.tag){case 0:case 11:case 15:y0(8,d,a)}var f=d.child;if(f!==null)f.return=d,Jt=f;else for(;Jt!==null;){d=Jt;var p=d.sibling,h=d.return;if(yV(d),d===u){Jt=null;break}if(p!==null){p.return=h,Jt=p;break}Jt=h}}}var g=a.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Jt=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Jt=s;else e:for(;Jt!==null;){if(a=Jt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:y0(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,Jt=y;break e}Jt=a.return}}var b=t.current;for(Jt=b;Jt!==null;){s=Jt;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,Jt=S;else e:for(s=b;Jt!==null;){if(o=Jt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:V5(9,o)}}catch(C){Vi(o,o.return,C)}if(o===s){Jt=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,Jt=A;break e}Jt=o.return}}if(gr=i,Tf(),ru&&typeof ru.onPostCommitFiberRoot=="function")try{ru.onPostCommitFiberRoot(O5,t)}catch{}r=!0}return r}finally{Lr=n,$l.transition=e}}return!1}function DO(t,e,n){e=Km(n,e),e=oV(t,e,1),t=sf(t,e,1),e=ro(),t!==null&&(yb(t,1,e),Ao(t,e))}function Vi(t,e,n){if(t.tag===3)DO(t,t,n);else for(;e!==null;){if(e.tag===3){DO(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(of===null||!of.has(r))){t=Km(n,t),t=lV(e,t,1),e=sf(e,t,1),t=ro(),e!==null&&(yb(e,1,t),Ao(e,t));break}}e=e.return}}function Yne(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ro(),t.pingedLanes|=t.suspendedLanes&n,qa===t&&(us&n)===n&&(Ma===4||Ma===3&&(us&130023424)===us&&500>aa()-o4?kh(t,0):s4|=n),Ao(t,e)}function NV(t,e){e===0&&(t.mode&1?(e=_x,_x<<=1,!(_x&130023424)&&(_x=4194304)):e=1);var n=ro();t=ed(t,e),t!==null&&(yb(t,e,n),Ao(t,n))}function Xne(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),NV(t,n)}function Qne(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(kt(314))}r!==null&&r.delete(e),NV(t,n)}var PV;PV=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||So.current)yo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yo=!1,Fne(t,e,n);yo=!!(t.flags&131072)}else yo=!1,wi&&e.flags&1048576&&IB(e,A2,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;F1(t,e),t=e.pendingProps;var i=Um(e,Vs.current);Cm(e,n),i=e4(null,e,r,t,i,n);var a=t4();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_o(r)?(a=!0,S2(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yk(e),i.updater=B5,e.stateNode=i,i._reactInternals=e,lE(e,r,t,n),e=dE(null,e,r,!0,a,n)):(e.tag=0,wi&&a&&Vk(e),Zs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(F1(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Jne(r),t=hc(r,t),i){case 0:e=uE(null,e,r,t,n);break e;case 1:e=SO(null,e,r,t,n);break e;case 11:e=xO(null,e,r,t,n);break e;case 14:e=wO(null,e,r,hc(r.type,t),n);break e}throw Error(kt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hc(r,i),uE(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hc(r,i),SO(t,e,r,i,n);case 3:e:{if(fV(e),t===null)throw Error(kt(387));r=e.pendingProps,a=e.memoizedState,i=a.element,zB(t,e),E2(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Km(Error(kt(423)),e),e=_O(t,e,r,n,i);break e}else if(r!==i){i=Km(Error(kt(424)),e),e=_O(t,e,r,n,i);break e}else for(nl=af(e.stateNode.containerInfo.firstChild),al=e,wi=!0,vc=null,n=LB(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wm(),r===i){e=td(t,e,n);break e}Zs(t,e,r,n)}e=e.child}return e;case 5:return $B(e),t===null&&aE(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,eE(r,i)?s=null:a!==null&&eE(r,a)&&(e.flags|=32),dV(t,e),Zs(t,e,s,n),e.child;case 6:return t===null&&aE(e),null;case 13:return hV(t,e,n);case 4:return Xk(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hm(e,null,r,n):Zs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hc(r,i),xO(t,e,r,i,n);case 7:return Zs(t,e,e.pendingProps,n),e.child;case 8:return Zs(t,e,e.pendingProps.children,n),e.child;case 12:return Zs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,ti(C2,r._currentValue),r._currentValue=s,a!==null)if(Ac(a.value,s)){if(a.children===i.children&&!So.current){e=td(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=Ku(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),sE(a.return,n,e),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(kt(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),sE(s,n,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Zs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Cm(e,n),i=Vl(i),r=r(i),e.flags|=1,Zs(t,e,r,n),e.child;case 14:return r=e.type,i=hc(r,e.pendingProps),i=hc(r.type,i),wO(t,e,r,i,n);case 15:return cV(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hc(r,i),F1(t,e),e.tag=1,_o(r)?(t=!0,S2(e)):t=!1,Cm(e,n),sV(e,r,i),lE(e,r,i,n),dE(null,e,r,!0,t,n);case 19:return pV(t,e,n);case 22:return uV(t,e,n)}throw Error(kt(156,e.tag))};function kV(t,e){return rB(t,e)}function Zne(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fl(t,e,n,r){return new Zne(t,e,n,r)}function d4(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jne(t){if(typeof t=="function")return d4(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kk)return 11;if(t===Tk)return 14}return 2}function cf(t,e){var n=t.alternate;return n===null?(n=Fl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function B1(t,e,n,r,i,a){var s=2;if(r=t,typeof t=="function")d4(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Qp:return Th(n.children,i,a,e);case Pk:s=8,i|=8;break;case Dj:return t=Fl(12,n,e,i|2),t.elementType=Dj,t.lanes=a,t;case Ij:return t=Fl(13,n,e,i),t.elementType=Ij,t.lanes=a,t;case Oj:return t=Fl(19,n,e,i),t.elementType=Oj,t.lanes=a,t;case $9:return W5(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F9:s=10;break e;case z9:s=9;break e;case kk:s=11;break e;case Tk:s=14;break e;case Fd:s=16,r=null;break e}throw Error(kt(130,t==null?t:typeof t,""))}return e=Fl(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Th(t,e,n,r){return t=Fl(7,t,r,e),t.lanes=n,t}function W5(t,e,n,r){return t=Fl(22,t,r,e),t.elementType=$9,t.lanes=n,t.stateNode={isHidden:!1},t}function AA(t,e,n){return t=Fl(6,t,null,e),t.lanes=n,t}function CA(t,e,n){return e=Fl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ere(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aA(0),this.expirationTimes=aA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aA(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function f4(t,e,n,r,i,a,s,o,l){return t=new ere(t,e,n,o,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Fl(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yk(a),t}function tre(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function TV(t){if(!t)return vf;t=t._reactInternals;e:{if(lp(t)!==t||t.tag!==1)throw Error(kt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_o(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(kt(171))}if(t.tag===1){var n=t.type;if(_o(n))return TB(t,n,e)}return e}function DV(t,e,n,r,i,a,s,o,l){return t=f4(n,r,!0,t,i,a,s,o,l),t.context=TV(null),n=t.current,r=ro(),i=lf(n),a=Ku(r,i),a.callback=e??null,sf(n,a,i),t.current.lanes=i,yb(t,i,r),Ao(t,r),t}function H5(t,e,n,r){var i=e.current,a=ro(),s=lf(i);return n=TV(n),e.context===null?e.context=n:e.pendingContext=n,e=Ku(a,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=sf(i,e,s),t!==null&&(xc(t,i,s,a),M1(t,i,s)),s}function M2(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function IO(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function h4(t,e){IO(t,e),(t=t.alternate)&&IO(t,e)}function nre(){return null}var IV=typeof reportError=="function"?reportError:function(t){console.error(t)};function p4(t){this._internalRoot=t}q5.prototype.render=p4.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(kt(409));H5(t,e,null,null)};q5.prototype.unmount=p4.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qh(function(){H5(null,t,null,null)}),e[Ju]=null}};function q5(t){this._internalRoot=t}q5.prototype.unstable_scheduleHydration=function(t){if(t){var e=uB();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bd.length&&e!==0&&e<Bd[n].priority;n++);Bd.splice(n,0,t),n===0&&fB(t)}};function m4(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function K5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function OO(){}function rre(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=M2(s);a.call(u)}}var s=DV(e,r,t,0,null,!1,!1,"",OO);return t._reactRootContainer=s,t[Ju]=s.current,ry(t.nodeType===8?t.parentNode:t),qh(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=M2(l);o.call(u)}}var l=f4(t,0,!1,null,null,!1,!1,"",OO);return t._reactRootContainer=l,t[Ju]=l.current,ry(t.nodeType===8?t.parentNode:t),qh(function(){H5(e,l,n,r)}),l}function G5(t,e,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=M2(s);o.call(l)}}H5(e,s,t,i)}else s=rre(n,e,t,i,r);return M2(s)}lB=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=e0(e.pendingLanes);n!==0&&(Ok(e,n|1),Ao(e,aa()),!(gr&6)&&(Gm=aa()+500,Tf()))}break;case 13:qh(function(){var r=ed(t,1);if(r!==null){var i=ro();xc(r,t,1,i)}}),h4(t,1)}};Mk=function(t){if(t.tag===13){var e=ed(t,134217728);if(e!==null){var n=ro();xc(e,t,134217728,n)}h4(t,134217728)}};cB=function(t){if(t.tag===13){var e=lf(t),n=ed(t,e);if(n!==null){var r=ro();xc(n,t,e,r)}h4(t,e)}};uB=function(){return Lr};dB=function(t,e){var n=Lr;try{return Lr=t,e()}finally{Lr=n}};Wj=function(t,e,n){switch(e){case"input":if(Lj(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=F5(r);if(!i)throw Error(kt(90));V9(r),Lj(r,i)}}}break;case"textarea":W9(t,n);break;case"select":e=n.value,e!=null&&wm(t,!!n.multiple,e,!1)}};Q9=l4;Z9=qh;var ire={usingClientEntryPoint:!1,Events:[xb,tm,F5,Y9,X9,l4]},Mv={findFiberByHostInstance:yh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},are={bundleType:Mv.bundleType,version:Mv.version,rendererPackageName:Mv.rendererPackageName,rendererConfig:Mv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hd.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tB(t),t===null?null:t.stateNode},findFiberByHostInstance:Mv.findFiberByHostInstance||nre,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ox=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ox.isDisabled&&Ox.supportsFiber)try{O5=Ox.inject(are),ru=Ox}catch{}}ml.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ire;ml.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m4(e))throw Error(kt(200));return tre(t,e,null,n)};ml.createRoot=function(t,e){if(!m4(t))throw Error(kt(299));var n=!1,r="",i=IV;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=f4(t,1,!1,null,null,n,!1,r,i),t[Ju]=e.current,ry(t.nodeType===8?t.parentNode:t),new p4(e)};ml.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(kt(188)):(t=Object.keys(t).join(","),Error(kt(268,t)));return t=tB(e),t=t===null?null:t.stateNode,t};ml.flushSync=function(t){return qh(t)};ml.hydrate=function(t,e,n){if(!K5(e))throw Error(kt(200));return G5(null,t,e,!0,n)};ml.hydrateRoot=function(t,e,n){if(!m4(t))throw Error(kt(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=IV;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=DV(e,null,t,1,n??null,i,!1,a,s),t[Ju]=e.current,ry(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new q5(e)};ml.render=function(t,e,n){if(!K5(e))throw Error(kt(200));return G5(null,t,e,!1,n)};ml.unmountComponentAtNode=function(t){if(!K5(t))throw Error(kt(40));return t._reactRootContainer?(qh(function(){G5(null,null,t,!1,function(){t._reactRootContainer=null,t[Ju]=null})}),!0):!1};ml.unstable_batchedUpdates=l4;ml.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!K5(n))throw Error(kt(200));if(t==null||t._reactInternals===void 0)throw Error(kt(38));return G5(t,e,n,!1,r)};ml.version="18.3.1-next-f1338f8080-20240426";function OV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OV)}catch(t){console.error(t)}}OV(),O9.exports=ml;var fy=O9.exports,MO=fy;kj.createRoot=MO.createRoot,kj.hydrateRoot=MO.hydrateRoot;var RO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sre=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},RV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=a>>2,f=(a&3)<<4|o>>4;let p=(o&15)<<2|u>>6,h=u&63;l||(h=64,s||(p=64)),r.push(n[d],n[f],n[p],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MV(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sre(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||f==null)throw new ore;const p=a<<2|o>>4;if(r.push(p),u!==64){const h=o<<4&240|u>>2;if(r.push(h),f!==64){const g=u<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ore extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lre=function(t){const e=MV(t);return RV.encodeByteArray(e,!0)},LV=function(t){return lre(t).replace(/\./g,"")},FV=function(t){try{return RV.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ure=()=>cre().__FIREBASE_DEFAULTS__,dre=()=>{if(typeof process>"u"||typeof RO>"u")return;const t=RO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fre=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&FV(t[1]);return e&&JSON.parse(e)},g4=()=>{try{return ure()||dre()||fre()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hre=()=>{var t;return(t=g4())===null||t===void 0?void 0:t.config},pre=t=>{var e;return(e=g4())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mre{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gre(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Eo())}function vre(){var t;const e=(t=g4())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yre(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bre(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wre(){const t=Eo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Sre(){return!vre()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _re(){try{return typeof indexedDB=="object"}catch{return!1}}function Are(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cre="FirebaseError";class pd extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Cre,Object.setPrototypeOf(this,pd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sb.prototype.create)}}class Sb{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?jre(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new pd(i,o,r)}}function jre(t,e){return t.replace(Ere,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Ere=/\{\$([^}]+)}/g;function hy(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(LO(a)&&LO(s)){if(!hy(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function LO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function n0(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function r0(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Nre(t,e){const n=new Pre(t,e);return n.subscribe.bind(n)}class Pre{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kre(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jA),i.error===void 0&&(i.error=jA),i.complete===void 0&&(i.complete=jA);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kre(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jA(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t){return t&&t._delegate?t._delegate:t}class Kh{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tre{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mre;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ire(e))try{this.getOrInitializeService({instanceIdentifier:ah})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=ah){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ah){return this.instances.has(e)}getOptions(e=ah){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ah){return this.component?this.component.multipleInstances?e:ah:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Dre(t){return t===ah?void 0:t}function Ire(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ore{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Tre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ir;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ir||(ir={}));const Mre={debug:ir.DEBUG,verbose:ir.VERBOSE,info:ir.INFO,warn:ir.WARN,error:ir.ERROR,silent:ir.SILENT},Rre=ir.INFO,Lre={[ir.DEBUG]:"log",[ir.VERBOSE]:"log",[ir.INFO]:"info",[ir.WARN]:"warn",[ir.ERROR]:"error"},Fre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Lre[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class v4{constructor(e){this.name=e,this._logLevel=Rre,this._logHandler=Fre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ir))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ir.DEBUG,...e),this._logHandler(this,ir.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ir.VERBOSE,...e),this._logHandler(this,ir.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ir.INFO,...e),this._logHandler(this,ir.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ir.WARN,...e),this._logHandler(this,ir.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ir.ERROR,...e),this._logHandler(this,ir.ERROR,...e)}}const zre=(t,e)=>e.some(n=>t instanceof n);let FO,zO;function $re(){return FO||(FO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bre(){return zO||(zO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $V=new WeakMap,_E=new WeakMap,BV=new WeakMap,EA=new WeakMap,y4=new WeakMap;function Vre(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(uf(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&$V.set(n,t)}).catch(()=>{}),y4.set(e,t),e}function Ure(t){if(_E.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});_E.set(t,e)}let AE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _E.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BV.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uf(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Wre(t){AE=t(AE)}function Hre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(NA(this),e,...n);return BV.set(r,e.sort?e.sort():[e]),uf(r)}:Bre().includes(t)?function(...e){return t.apply(NA(this),e),uf($V.get(this))}:function(...e){return uf(t.apply(NA(this),e))}}function qre(t){return typeof t=="function"?Hre(t):(t instanceof IDBTransaction&&Ure(t),zre(t,$re())?new Proxy(t,AE):t)}function uf(t){if(t instanceof IDBRequest)return Vre(t);if(EA.has(t))return EA.get(t);const e=qre(t);return e!==t&&(EA.set(t,e),y4.set(e,t)),e}const NA=t=>y4.get(t);function Kre(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=uf(s);return r&&s.addEventListener("upgradeneeded",l=>{r(uf(s.result),l.oldVersion,l.newVersion,uf(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Gre=["get","getKey","getAll","getAllKeys","count"],Yre=["put","add","delete","clear"],PA=new Map;function $O(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(PA.get(e))return PA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Yre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Gre.includes(n)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&l.done]))[0]};return PA.set(e,a),a}Wre(t=>({...t,get:(e,n,r)=>$O(e,n)||t.get(e,n,r),has:(e,n)=>!!$O(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Qre(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Qre(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const CE="@firebase/app",BO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new v4("@firebase/app"),Zre="@firebase/app-compat",Jre="@firebase/analytics-compat",eie="@firebase/analytics",tie="@firebase/app-check-compat",nie="@firebase/app-check",rie="@firebase/auth",iie="@firebase/auth-compat",aie="@firebase/database",sie="@firebase/data-connect",oie="@firebase/database-compat",lie="@firebase/functions",cie="@firebase/functions-compat",uie="@firebase/installations",die="@firebase/installations-compat",fie="@firebase/messaging",hie="@firebase/messaging-compat",pie="@firebase/performance",mie="@firebase/performance-compat",gie="@firebase/remote-config",vie="@firebase/remote-config-compat",yie="@firebase/storage",bie="@firebase/storage-compat",xie="@firebase/firestore",wie="@firebase/vertexai-preview",Sie="@firebase/firestore-compat",_ie="firebase",Aie="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cie="[DEFAULT]",jie={[CE]:"fire-core",[Zre]:"fire-core-compat",[eie]:"fire-analytics",[Jre]:"fire-analytics-compat",[nie]:"fire-app-check",[tie]:"fire-app-check-compat",[rie]:"fire-auth",[iie]:"fire-auth-compat",[aie]:"fire-rtdb",[sie]:"fire-data-connect",[oie]:"fire-rtdb-compat",[lie]:"fire-fn",[cie]:"fire-fn-compat",[uie]:"fire-iid",[die]:"fire-iid-compat",[fie]:"fire-fcm",[hie]:"fire-fcm-compat",[pie]:"fire-perf",[mie]:"fire-perf-compat",[gie]:"fire-rc",[vie]:"fire-rc-compat",[yie]:"fire-gcs",[bie]:"fire-gcs-compat",[xie]:"fire-fst",[Sie]:"fire-fst-compat",[wie]:"fire-vertex","fire-js":"fire-js",[_ie]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new Map,Eie=new Map,EE=new Map;function VO(t,e){try{t.container.addComponent(e)}catch(n){nd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ym(t){const e=t.name;if(EE.has(e))return nd.debug(`There were multiple attempts to register component ${e}.`),!1;EE.set(e,t);for(const n of jE.values())VO(n,t);for(const n of Eie.values())VO(n,t);return!0}function VV(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qd(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dh=new Sb("app","Firebase",Nie);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pie{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=Aie;function kie(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cie,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Dh.create("bad-app-name",{appName:String(i)});if(n||(n=hre()),!n)throw Dh.create("no-options");const a=jE.get(i);if(a){if(hy(n,a.options)&&hy(r,a.config))return a;throw Dh.create("duplicate-app",{appName:i})}const s=new Ore(i);for(const l of EE.values())s.addComponent(l);const o=new Pie(n,r,s);return jE.set(i,o),o}function df(t,e,n){var r;let i=(r=jie[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nd.warn(o.join(" "));return}Ym(new Kh(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tie="firebase-heartbeat-database",Die=1,py="firebase-heartbeat-store";let kA=null;function UV(){return kA||(kA=Kre(Tie,Die,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(py)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dh.create("idb-open",{originalErrorMessage:t.message})})),kA}async function Iie(t){try{const n=(await UV()).transaction(py),r=await n.objectStore(py).get(WV(t));return await n.done,r}catch(e){if(e instanceof pd)nd.warn(e.message);else{const n=Dh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nd.warn(n.message)}}}async function UO(t,e){try{const r=(await UV()).transaction(py,"readwrite");await r.objectStore(py).put(e,WV(t)),await r.done}catch(n){if(n instanceof pd)nd.warn(n.message);else{const r=Dh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nd.warn(r.message)}}}function WV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oie=1024,Mie=30*24*60*60*1e3;class Rie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Fie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=WO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=Mie}),this._storage.overwrite(this._heartbeatsCache))}catch(r){nd.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=WO(),{heartbeatsToSend:r,unsentEntries:i}=Lie(this._heartbeatsCache.heartbeats),a=LV(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return nd.warn(n),""}}}function WO(){return new Date().toISOString().substring(0,10)}function Lie(t,e=Oie){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),HO(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),HO(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Fie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _re()?Are().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Iie(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return UO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return UO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function HO(t){return LV(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zie(t){Ym(new Kh("platform-logger",e=>new Xre(e),"PRIVATE")),Ym(new Kh("heartbeat",e=>new Rie(e),"PRIVATE")),df(CE,BO,t),df(CE,BO,"esm2017"),df("fire-js","")}zie("");function HV(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function qV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $ie=qV,KV=new Sb("auth","Firebase",qV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new v4("@firebase/auth");function Bie(t,...e){R2.logLevel<=ir.WARN&&R2.warn(`Auth (${Y5}): ${t}`,...e)}function V1(t,...e){R2.logLevel<=ir.ERROR&&R2.error(`Auth (${Y5}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t,...e){throw x4(t,...e)}function b4(t,...e){return x4(t,...e)}function GV(t,e,n){const r=Object.assign(Object.assign({},$ie()),{[e]:n});return new Sb("auth","Firebase",r).create(e,{appName:t.name})}function Ih(t){return GV(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function x4(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return KV.create(t,...e)}function mr(t,e,...n){if(!t)throw x4(e,...n)}function Bu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw V1(e),new Error(e)}function L2(t,e){t||Bu(e)}function Vie(){return qO()==="http:"||qO()==="https:"}function qO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uie(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vie()||bre()||"connection"in navigator)?navigator.onLine:!0}function Wie(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n){this.shortDelay=e,this.longDelay=n,L2(n>e,"Short delay should be less than long delay!"),this.isMobile=gre()||xre()}get(){return Uie()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hie(t,e){L2(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kie=new _b(3e4,6e4);function cp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function up(t,e,n,r,i={}){return XV(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=zV(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},a);return yre()||(u.referrerPolicy="no-referrer"),YV.fetch()(QV(t,t.config.apiHost,n,o),u)})}async function XV(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},qie),e);try{const i=new Yie(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Mx(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mx(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Mx(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Mx(t,"user-disabled",s);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw GV(t,d,u);Xm(t,d)}}catch(i){if(i instanceof pd)throw i;Xm(t,"network-request-failed",{message:String(i)})}}async function X5(t,e,n,r,i={}){const a=await up(t,e,n,r,i);return"mfaPendingCredential"in a&&Xm(t,"multi-factor-auth-required",{_serverResponse:a}),a}function QV(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Hie(t.config,i):`${t.config.apiScheme}://${i}`}function Gie(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yie{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(b4(this.auth,"network-request-failed")),Kie.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mx(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=b4(t,e,r);return i.customData._tokenResponse=n,i}function KO(t){return t!==void 0&&t.enterprise!==void 0}class Xie{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Gie(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Qie(t,e){return up(t,"GET","/v2/recaptchaConfig",cp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zie(t,e){return up(t,"POST","/v1/accounts:delete",e)}async function ZV(t,e){return up(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Jie(t,e=!1){const n=hs(t),r=await n.getIdToken(e),i=JV(r);mr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:w0(TA(i.auth_time)),issuedAtTime:w0(TA(i.iat)),expirationTime:w0(TA(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function TA(t){return Number(t)*1e3}function JV(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return V1("JWT malformed, contained fewer than 3 sections"),null;try{const i=FV(n);return i?JSON.parse(i):(V1("Failed to decode base64 JWT payload"),null)}catch(i){return V1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function GO(t){const e=JV(t);return mr(e,"internal-error"),mr(typeof e.exp<"u","internal-error"),mr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NE(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pd&&eae(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eae({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tae{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=w0(this.lastLoginAt),this.creationTime=w0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(t){var e;const n=t.auth,r=await t.getIdToken(),i=await NE(t,ZV(n,{idToken:r}));mr(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?eU(a.providerUserInfo):[],o=rae(t.providerData,s),l=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),d=l?u:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new PE(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function nae(t){const e=hs(t);await F2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rae(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eU(t){return t.map(e=>{var{providerId:n}=e,r=HV(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iae(t,e){const n=await XV(t,{},async()=>{const r=zV({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=QV(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",YV.fetch()(s,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aae(t,e){return up(t,"POST","/v2/accounts:revokeToken",cp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mr(e.idToken,"internal-error"),mr(typeof e.idToken<"u","internal-error"),mr(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){mr(e.length!==0,"internal-error");const n=GO(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await iae(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Em;return r&&(mr(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(mr(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(mr(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Em,this.toJSON())}_performRefresh(){return Bu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t,e){mr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vu{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=HV(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new PE(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await NE(this,this.stsTokenManager.getToken(this.auth,e));return mr(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Jie(this,e)}reload(){return nae(this)}_assign(e){this!==e&&(mr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){mr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await F2(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qd(this.auth.app))return Promise.reject(Ih(this.auth));const e=await this.getIdToken();return await NE(this,Zie(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,s,o,l,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,h=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,g=(s=n.photoURL)!==null&&s!==void 0?s:void 0,m=(o=n.tenantId)!==null&&o!==void 0?o:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,b=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:A,isAnonymous:C,providerData:D,stsTokenManager:j}=n;mr(S&&j,e,"internal-error");const N=Em.fromJSON(this.name,j);mr(typeof S=="string",e,"internal-error"),kd(f,e.name),kd(p,e.name),mr(typeof A=="boolean",e,"internal-error"),mr(typeof C=="boolean",e,"internal-error"),kd(h,e.name),kd(g,e.name),kd(m,e.name),kd(v,e.name),kd(y,e.name),kd(b,e.name);const P=new Vu({uid:S,auth:e,email:p,emailVerified:A,displayName:f,isAnonymous:C,photoURL:g,phoneNumber:h,tenantId:m,stsTokenManager:N,createdAt:y,lastLoginAt:b});return D&&Array.isArray(D)&&(P.providerData=D.map(O=>Object.assign({},O))),v&&(P._redirectEventId=v),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new Em;i.updateFromServerResponse(n);const a=new Vu({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await F2(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];mr(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?eU(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Em;o.updateFromIdToken(r);const l=new Vu({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new PE(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=new Map;function wh(t){L2(t instanceof Function,"Expected a class definition");let e=YO.get(t);return e?(L2(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,YO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tU.type="NONE";const XO=tU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t,e,n){return`firebase:${t}:${e}:${n}`}class Nm{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=DA(this.userKey,i.apiKey,a),this.fullPersistenceKey=DA("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vu._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Nm(wh(XO),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||wh(XO);const s=DA(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(s);if(d){const f=Vu._fromJSON(e,d);u!==a&&(o=f),a=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new Nm(a,e,r):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new Nm(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sae(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iU(e))return"Blackberry";if(aU(e))return"Webos";if(oae(e))return"Safari";if((e.includes("chrome/")||lae(e))&&!e.includes("edge/"))return"Chrome";if(rU(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sae(t=Eo()){return/firefox\//i.test(t)}function oae(t=Eo()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lae(t=Eo()){return/crios\//i.test(t)}function nU(t=Eo()){return/iemobile/i.test(t)}function rU(t=Eo()){return/android/i.test(t)}function iU(t=Eo()){return/blackberry/i.test(t)}function aU(t=Eo()){return/webos/i.test(t)}function cae(t=Eo()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uae(){return wre()&&document.documentMode===10}function dae(t=Eo()){return cae(t)||rU(t)||aU(t)||iU(t)||/windows phone/i.test(t)||nU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t,e=[]){let n;switch(t){case"Browser":n=QO(Eo());break;case"Worker":n=`${QO(Eo())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Y5}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fae{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hae(t,e={}){return up(t,"GET","/v2/passwordPolicy",cp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pae=6;class mae{constructor(e){var n,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:pae,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,s,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gae{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZO(this),this.idTokenSubscription=new ZO(this),this.beforeStateQueue=new fae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wh(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Nm.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ZV(this,{idToken:e}),r=await Vu._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qd(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await F2(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Wie()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qd(this.app))return Promise.reject(Ih(this));const n=e?hs(e):null;return n&&mr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&mr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qd(this.app)?Promise.reject(Ih(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qd(this.app)?Promise.reject(Ih(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wh(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hae(this),n=new mae(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sb("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await aae(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wh(e)||this._popupRedirectResolver;mr(n,this,"argument-error"),this.redirectPersistenceManager=await Nm.create(this,[wh(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(mr(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Bie(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ab(t){return hs(t)}class ZO{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nre(n=>this.observer=n)}get next(){return mr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w4={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vae(t){w4=t}function yae(t){return w4.loadJS(t)}function bae(){return w4.recaptchaEnterpriseScript}const xae="recaptcha-enterprise",wae="NO_RECAPTCHA";class Sae{constructor(e){this.type=xae,this.auth=Ab(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{Qie(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Xie(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(l=>{o(l)})})}function i(a,s,o){const l=window.grecaptcha;KO(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(wae)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&KO(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=bae();l.length!==0&&(l+=o),yae(l).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function JO(t,e,n,r=!1){const i=new Sae(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function kE(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await JO(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await JO(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ae(t,e){const n=VV(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(hy(a,e??{}))return i;Xm(i,"already-initialized")}return n.initialize({options:e})}function Aae(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wh);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cae{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bu("not implemented")}_getIdTokenResponse(e){return Bu("not implemented")}_linkToIdToken(e,n){return Bu("not implemented")}_getReauthenticationResolver(e){return Bu("not implemented")}}async function jae(t,e){return up(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eae(t,e){return X5(t,"POST","/v1/accounts:signInWithPassword",cp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nae(t,e){return X5(t,"POST","/v1/accounts:signInWithEmailLink",cp(t,e))}async function Pae(t,e){return X5(t,"POST","/v1/accounts:signInWithEmailLink",cp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my extends Cae{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new my(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new my(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kE(e,n,"signInWithPassword",Eae);case"emailLink":return Nae(e,{email:this._email,oobCode:this._password});default:Xm(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kE(e,r,"signUpPassword",jae);case"emailLink":return Pae(e,{idToken:n,email:this._email,oobCode:this._password});default:Xm(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kae(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Tae(t){const e=n0(r0(t)).link,n=e?n0(r0(e)).deep_link_id:null,r=n0(r0(t)).deep_link_id;return(r?n0(r0(r)).link:null)||r||n||e||t}class S4{constructor(e){var n,r,i,a,s,o;const l=n0(r0(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,f=kae((i=l.mode)!==null&&i!==void 0?i:null);mr(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(a=l.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=Tae(e);try{return new S4(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(){this.providerId=Yg.PROVIDER_ID}static credential(e,n){return my._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=S4.parseLink(n);return mr(r,"argument-error"),my._fromEmailAndCode(e,r.code,r.tenantId)}}Yg.PROVIDER_ID="password";Yg.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dae(t,e){return X5(t,"POST","/v1/accounts:signUp",cp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Vu._fromIdTokenResponse(e,r,i),s=eM(r);return new gy({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=eM(r);return new gy({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function eM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2 extends pd{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,z2.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new z2(e,n,r,i)}}function Iae(t,e,n,r){return n._getIdTokenResponse(t).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?z2._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oae(t,e,n=!1){if(qd(t.app))return Promise.reject(Ih(t));const r="signIn",i=await Iae(t,r,e),a=await gy._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Mae(t,e){return Oae(Ab(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oU(t){const e=Ab(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Rae(t,e,n){if(qd(t.app))return Promise.reject(Ih(t));const r=Ab(t),s=await kE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dae).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&oU(t),l}),o=await gy._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function Lae(t,e,n){return qd(t.app)?Promise.reject(Ih(t)):Mae(hs(t),Yg.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oU(t),r})}function Fae(t,e,n,r){return hs(t).onAuthStateChanged(e,n,r)}const tM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tM,"1"),this.storage.removeItem(tM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zae=1e3,$ae=10;class cU extends lU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dae(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);uae()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,$ae):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cU.type="LOCAL";const Bae=cU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vae extends lU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Vae.type="SESSION";new _b(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new _b(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new _b(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new _b(5e3,15e3);var nM="@firebase/auth",rM="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uae{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wae(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Hae(t){Ym(new Kh("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;mr(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sU(t)},u=new gae(r,i,a,l);return Aae(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ym(new Kh("auth-internal",e=>{const n=Ab(e.getProvider("auth").getImmediate());return(r=>new Uae(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),df(nM,rM,Wae(t)),df(nM,rM,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qae=5*60;pre("authIdTokenMaxAge");function Kae(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vae({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=b4("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Kae().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Hae("Browser");var Gae="firebase",Yae="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */df(Gae,Yae,"app");var iM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oh,uU;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,N){function P(){}P.prototype=N.prototype,j.D=N.prototype,j.prototype=new P,j.prototype.constructor=j,j.C=function(O,T,M){for(var L=Array(arguments.length-2),V=2;V<arguments.length;V++)L[V-2]=arguments[V];return N.prototype[T].apply(O,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,N,P){P||(P=0);var O=Array(16);if(typeof N=="string")for(var T=0;16>T;++T)O[T]=N.charCodeAt(P++)|N.charCodeAt(P++)<<8|N.charCodeAt(P++)<<16|N.charCodeAt(P++)<<24;else for(T=0;16>T;++T)O[T]=N[P++]|N[P++]<<8|N[P++]<<16|N[P++]<<24;N=j.g[0],P=j.g[1],T=j.g[2];var M=j.g[3],L=N+(M^P&(T^M))+O[0]+3614090360&4294967295;N=P+(L<<7&4294967295|L>>>25),L=M+(T^N&(P^T))+O[1]+3905402710&4294967295,M=N+(L<<12&4294967295|L>>>20),L=T+(P^M&(N^P))+O[2]+606105819&4294967295,T=M+(L<<17&4294967295|L>>>15),L=P+(N^T&(M^N))+O[3]+3250441966&4294967295,P=T+(L<<22&4294967295|L>>>10),L=N+(M^P&(T^M))+O[4]+4118548399&4294967295,N=P+(L<<7&4294967295|L>>>25),L=M+(T^N&(P^T))+O[5]+1200080426&4294967295,M=N+(L<<12&4294967295|L>>>20),L=T+(P^M&(N^P))+O[6]+2821735955&4294967295,T=M+(L<<17&4294967295|L>>>15),L=P+(N^T&(M^N))+O[7]+4249261313&4294967295,P=T+(L<<22&4294967295|L>>>10),L=N+(M^P&(T^M))+O[8]+1770035416&4294967295,N=P+(L<<7&4294967295|L>>>25),L=M+(T^N&(P^T))+O[9]+2336552879&4294967295,M=N+(L<<12&4294967295|L>>>20),L=T+(P^M&(N^P))+O[10]+4294925233&4294967295,T=M+(L<<17&4294967295|L>>>15),L=P+(N^T&(M^N))+O[11]+2304563134&4294967295,P=T+(L<<22&4294967295|L>>>10),L=N+(M^P&(T^M))+O[12]+1804603682&4294967295,N=P+(L<<7&4294967295|L>>>25),L=M+(T^N&(P^T))+O[13]+4254626195&4294967295,M=N+(L<<12&4294967295|L>>>20),L=T+(P^M&(N^P))+O[14]+2792965006&4294967295,T=M+(L<<17&4294967295|L>>>15),L=P+(N^T&(M^N))+O[15]+1236535329&4294967295,P=T+(L<<22&4294967295|L>>>10),L=N+(T^M&(P^T))+O[1]+4129170786&4294967295,N=P+(L<<5&4294967295|L>>>27),L=M+(P^T&(N^P))+O[6]+3225465664&4294967295,M=N+(L<<9&4294967295|L>>>23),L=T+(N^P&(M^N))+O[11]+643717713&4294967295,T=M+(L<<14&4294967295|L>>>18),L=P+(M^N&(T^M))+O[0]+3921069994&4294967295,P=T+(L<<20&4294967295|L>>>12),L=N+(T^M&(P^T))+O[5]+3593408605&4294967295,N=P+(L<<5&4294967295|L>>>27),L=M+(P^T&(N^P))+O[10]+38016083&4294967295,M=N+(L<<9&4294967295|L>>>23),L=T+(N^P&(M^N))+O[15]+3634488961&4294967295,T=M+(L<<14&4294967295|L>>>18),L=P+(M^N&(T^M))+O[4]+3889429448&4294967295,P=T+(L<<20&4294967295|L>>>12),L=N+(T^M&(P^T))+O[9]+568446438&4294967295,N=P+(L<<5&4294967295|L>>>27),L=M+(P^T&(N^P))+O[14]+3275163606&4294967295,M=N+(L<<9&4294967295|L>>>23),L=T+(N^P&(M^N))+O[3]+4107603335&4294967295,T=M+(L<<14&4294967295|L>>>18),L=P+(M^N&(T^M))+O[8]+1163531501&4294967295,P=T+(L<<20&4294967295|L>>>12),L=N+(T^M&(P^T))+O[13]+2850285829&4294967295,N=P+(L<<5&4294967295|L>>>27),L=M+(P^T&(N^P))+O[2]+4243563512&4294967295,M=N+(L<<9&4294967295|L>>>23),L=T+(N^P&(M^N))+O[7]+1735328473&4294967295,T=M+(L<<14&4294967295|L>>>18),L=P+(M^N&(T^M))+O[12]+2368359562&4294967295,P=T+(L<<20&4294967295|L>>>12),L=N+(P^T^M)+O[5]+4294588738&4294967295,N=P+(L<<4&4294967295|L>>>28),L=M+(N^P^T)+O[8]+2272392833&4294967295,M=N+(L<<11&4294967295|L>>>21),L=T+(M^N^P)+O[11]+1839030562&4294967295,T=M+(L<<16&4294967295|L>>>16),L=P+(T^M^N)+O[14]+4259657740&4294967295,P=T+(L<<23&4294967295|L>>>9),L=N+(P^T^M)+O[1]+2763975236&4294967295,N=P+(L<<4&4294967295|L>>>28),L=M+(N^P^T)+O[4]+1272893353&4294967295,M=N+(L<<11&4294967295|L>>>21),L=T+(M^N^P)+O[7]+4139469664&4294967295,T=M+(L<<16&4294967295|L>>>16),L=P+(T^M^N)+O[10]+3200236656&4294967295,P=T+(L<<23&4294967295|L>>>9),L=N+(P^T^M)+O[13]+681279174&4294967295,N=P+(L<<4&4294967295|L>>>28),L=M+(N^P^T)+O[0]+3936430074&4294967295,M=N+(L<<11&4294967295|L>>>21),L=T+(M^N^P)+O[3]+3572445317&4294967295,T=M+(L<<16&4294967295|L>>>16),L=P+(T^M^N)+O[6]+76029189&4294967295,P=T+(L<<23&4294967295|L>>>9),L=N+(P^T^M)+O[9]+3654602809&4294967295,N=P+(L<<4&4294967295|L>>>28),L=M+(N^P^T)+O[12]+3873151461&4294967295,M=N+(L<<11&4294967295|L>>>21),L=T+(M^N^P)+O[15]+530742520&4294967295,T=M+(L<<16&4294967295|L>>>16),L=P+(T^M^N)+O[2]+3299628645&4294967295,P=T+(L<<23&4294967295|L>>>9),L=N+(T^(P|~M))+O[0]+4096336452&4294967295,N=P+(L<<6&4294967295|L>>>26),L=M+(P^(N|~T))+O[7]+1126891415&4294967295,M=N+(L<<10&4294967295|L>>>22),L=T+(N^(M|~P))+O[14]+2878612391&4294967295,T=M+(L<<15&4294967295|L>>>17),L=P+(M^(T|~N))+O[5]+4237533241&4294967295,P=T+(L<<21&4294967295|L>>>11),L=N+(T^(P|~M))+O[12]+1700485571&4294967295,N=P+(L<<6&4294967295|L>>>26),L=M+(P^(N|~T))+O[3]+2399980690&4294967295,M=N+(L<<10&4294967295|L>>>22),L=T+(N^(M|~P))+O[10]+4293915773&4294967295,T=M+(L<<15&4294967295|L>>>17),L=P+(M^(T|~N))+O[1]+2240044497&4294967295,P=T+(L<<21&4294967295|L>>>11),L=N+(T^(P|~M))+O[8]+1873313359&4294967295,N=P+(L<<6&4294967295|L>>>26),L=M+(P^(N|~T))+O[15]+4264355552&4294967295,M=N+(L<<10&4294967295|L>>>22),L=T+(N^(M|~P))+O[6]+2734768916&4294967295,T=M+(L<<15&4294967295|L>>>17),L=P+(M^(T|~N))+O[13]+1309151649&4294967295,P=T+(L<<21&4294967295|L>>>11),L=N+(T^(P|~M))+O[4]+4149444226&4294967295,N=P+(L<<6&4294967295|L>>>26),L=M+(P^(N|~T))+O[11]+3174756917&4294967295,M=N+(L<<10&4294967295|L>>>22),L=T+(N^(M|~P))+O[2]+718787259&4294967295,T=M+(L<<15&4294967295|L>>>17),L=P+(M^(T|~N))+O[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(T+(L<<21&4294967295|L>>>11))&4294967295,j.g[2]=j.g[2]+T&4294967295,j.g[3]=j.g[3]+M&4294967295}r.prototype.u=function(j,N){N===void 0&&(N=j.length);for(var P=N-this.blockSize,O=this.B,T=this.h,M=0;M<N;){if(T==0)for(;M<=P;)i(this,j,M),M+=this.blockSize;if(typeof j=="string"){for(;M<N;)if(O[T++]=j.charCodeAt(M++),T==this.blockSize){i(this,O),T=0;break}}else for(;M<N;)if(O[T++]=j[M++],T==this.blockSize){i(this,O),T=0;break}}this.h=T,this.o+=N},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;var P=8*this.o;for(N=j.length-8;N<j.length;++N)j[N]=P&255,P/=256;for(this.u(j),j=Array(16),N=P=0;4>N;++N)for(var O=0;32>O;O+=8)j[P++]=this.g[N]>>>O&255;return j};function a(j,N){var P=o;return Object.prototype.hasOwnProperty.call(P,j)?P[j]:P[j]=N(j)}function s(j,N){this.h=N;for(var P=[],O=!0,T=j.length-1;0<=T;T--){var M=j[T]|0;O&&M==N||(P[T]=M,O=!1)}this.g=P}var o={};function l(j){return-128<=j&&128>j?a(j,function(N){return new s([N|0],0>N?-1:0)}):new s([j|0],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return f;if(0>j)return v(u(-j));for(var N=[],P=1,O=0;j>=P;O++)N[O]=j/P|0,P*=4294967296;return new s(N,0)}function d(j,N){if(j.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(j.charAt(0)=="-")return v(d(j.substring(1),N));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=u(Math.pow(N,8)),O=f,T=0;T<j.length;T+=8){var M=Math.min(8,j.length-T),L=parseInt(j.substring(T,T+M),N);8>M?(M=u(Math.pow(N,M)),O=O.j(M).add(u(L))):(O=O.j(P),O=O.add(u(L)))}return O}var f=l(0),p=l(1),h=l(16777216);t=s.prototype,t.m=function(){if(m(this))return-v(this).m();for(var j=0,N=1,P=0;P<this.g.length;P++){var O=this.i(P);j+=(0<=O?O:4294967296+O)*N,N*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(g(this))return"0";if(m(this))return"-"+v(this).toString(j);for(var N=u(Math.pow(j,6)),P=this,O="";;){var T=A(P,N).g;P=y(P,T.j(N));var M=((0<P.g.length?P.g[0]:P.h)>>>0).toString(j);if(P=T,g(P))return M+O;for(;6>M.length;)M="0"+M;O=M+O}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function g(j){if(j.h!=0)return!1;for(var N=0;N<j.g.length;N++)if(j.g[N]!=0)return!1;return!0}function m(j){return j.h==-1}t.l=function(j){return j=y(this,j),m(j)?-1:g(j)?0:1};function v(j){for(var N=j.g.length,P=[],O=0;O<N;O++)P[O]=~j.g[O];return new s(P,~j.h).add(p)}t.abs=function(){return m(this)?v(this):this},t.add=function(j){for(var N=Math.max(this.g.length,j.g.length),P=[],O=0,T=0;T<=N;T++){var M=O+(this.i(T)&65535)+(j.i(T)&65535),L=(M>>>16)+(this.i(T)>>>16)+(j.i(T)>>>16);O=L>>>16,M&=65535,L&=65535,P[T]=L<<16|M}return new s(P,P[P.length-1]&-2147483648?-1:0)};function y(j,N){return j.add(v(N))}t.j=function(j){if(g(this)||g(j))return f;if(m(this))return m(j)?v(this).j(v(j)):v(v(this).j(j));if(m(j))return v(this.j(v(j)));if(0>this.l(h)&&0>j.l(h))return u(this.m()*j.m());for(var N=this.g.length+j.g.length,P=[],O=0;O<2*N;O++)P[O]=0;for(O=0;O<this.g.length;O++)for(var T=0;T<j.g.length;T++){var M=this.i(O)>>>16,L=this.i(O)&65535,V=j.i(T)>>>16,K=j.i(T)&65535;P[2*O+2*T]+=L*K,b(P,2*O+2*T),P[2*O+2*T+1]+=M*K,b(P,2*O+2*T+1),P[2*O+2*T+1]+=L*V,b(P,2*O+2*T+1),P[2*O+2*T+2]+=M*V,b(P,2*O+2*T+2)}for(O=0;O<N;O++)P[O]=P[2*O+1]<<16|P[2*O];for(O=N;O<2*N;O++)P[O]=0;return new s(P,0)};function b(j,N){for(;(j[N]&65535)!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function S(j,N){this.g=j,this.h=N}function A(j,N){if(g(N))throw Error("division by zero");if(g(j))return new S(f,f);if(m(j))return N=A(v(j),N),new S(v(N.g),v(N.h));if(m(N))return N=A(j,v(N)),new S(v(N.g),N.h);if(30<j.g.length){if(m(j)||m(N))throw Error("slowDivide_ only works with positive integers.");for(var P=p,O=N;0>=O.l(j);)P=C(P),O=C(O);var T=D(P,1),M=D(O,1);for(O=D(O,2),P=D(P,2);!g(O);){var L=M.add(O);0>=L.l(j)&&(T=T.add(P),M=L),O=D(O,1),P=D(P,1)}return N=y(j,T.j(N)),new S(T,N)}for(T=f;0<=j.l(N);){for(P=Math.max(1,Math.floor(j.m()/N.m())),O=Math.ceil(Math.log(P)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),M=u(P),L=M.j(N);m(L)||0<L.l(j);)P-=O,M=u(P),L=M.j(N);g(M)&&(M=p),T=T.add(M),j=y(j,L)}return new S(T,j)}t.A=function(j){return A(this,j).h},t.and=function(j){for(var N=Math.max(this.g.length,j.g.length),P=[],O=0;O<N;O++)P[O]=this.i(O)&j.i(O);return new s(P,this.h&j.h)},t.or=function(j){for(var N=Math.max(this.g.length,j.g.length),P=[],O=0;O<N;O++)P[O]=this.i(O)|j.i(O);return new s(P,this.h|j.h)},t.xor=function(j){for(var N=Math.max(this.g.length,j.g.length),P=[],O=0;O<N;O++)P[O]=this.i(O)^j.i(O);return new s(P,this.h^j.h)};function C(j){for(var N=j.g.length+1,P=[],O=0;O<N;O++)P[O]=j.i(O)<<1|j.i(O-1)>>>31;return new s(P,j.h)}function D(j,N){var P=N>>5;N%=32;for(var O=j.g.length-P,T=[],M=0;M<O;M++)T[M]=0<N?j.i(M+P)>>>N|j.i(M+P+1)<<32-N:j.i(M+P);return new s(T,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uU=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Oh=s}).apply(typeof iM<"u"?iM:typeof self<"u"?self:typeof window<"u"?window:{});var Rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dU,i0,fU,U1,TE,hU,pU,mU;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,B,q){return w==Array.prototype||w==Object.prototype||(w[B]=q.value),w};function n(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rx=="object"&&Rx];for(var B=0;B<w.length;++B){var q=w[B];if(q&&q.Math==Math)return q}throw Error("Cannot find global object")}var r=n(this);function i(w,B){if(B)e:{var q=r;w=w.split(".");for(var ue=0;ue<w.length-1;ue++){var Be=w[ue];if(!(Be in q))break e;q=q[Be]}w=w[w.length-1],ue=q[w],B=B(ue),B!=ue&&B!=null&&e(q,w,{configurable:!0,writable:!0,value:B})}}function a(w,B){w instanceof String&&(w+="");var q=0,ue=!1,Be={next:function(){if(!ue&&q<w.length){var Ge=q++;return{value:B(Ge,w[Ge]),done:!1}}return ue=!0,{done:!0,value:void 0}}};return Be[Symbol.iterator]=function(){return Be},Be}i("Array.prototype.values",function(w){return w||function(){return a(this,function(B,q){return q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(w){var B=typeof w;return B=B!="object"?B:w?Array.isArray(w)?"array":B:"null",B=="array"||B=="object"&&typeof w.length=="number"}function u(w){var B=typeof w;return B=="object"&&w!=null||B=="function"}function d(w,B,q){return w.call.apply(w.bind,arguments)}function f(w,B,q){if(!w)throw Error();if(2<arguments.length){var ue=Array.prototype.slice.call(arguments,2);return function(){var Be=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Be,ue),w.apply(B,Be)}}return function(){return w.apply(B,arguments)}}function p(w,B,q){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function h(w,B){var q=Array.prototype.slice.call(arguments,1);return function(){var ue=q.slice();return ue.push.apply(ue,arguments),w.apply(this,ue)}}function g(w,B){function q(){}q.prototype=B.prototype,w.aa=B.prototype,w.prototype=new q,w.prototype.constructor=w,w.Qb=function(ue,Be,Ge){for(var Tt=Array(arguments.length-2),Qn=2;Qn<arguments.length;Qn++)Tt[Qn-2]=arguments[Qn];return B.prototype[Be].apply(ue,Tt)}}function m(w){const B=w.length;if(0<B){const q=Array(B);for(let ue=0;ue<B;ue++)q[ue]=w[ue];return q}return[]}function v(w,B){for(let q=1;q<arguments.length;q++){const ue=arguments[q];if(l(ue)){const Be=w.length||0,Ge=ue.length||0;w.length=Be+Ge;for(let Tt=0;Tt<Ge;Tt++)w[Be+Tt]=ue[Tt]}else w.push(ue)}}class y{constructor(B,q){this.i=B,this.j=q,this.h=0,this.g=null}get(){let B;return 0<this.h?(this.h--,B=this.g,this.g=B.next,B.next=null):B=this.i(),B}}function b(w){return/^[\s\xa0]*$/.test(w)}function S(){var w=o.navigator;return w&&(w=w.userAgent)?w:""}function A(w){return A[" "](w),w}A[" "]=function(){};var C=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function D(w,B,q){for(const ue in w)B.call(q,w[ue],ue,w)}function j(w,B){for(const q in w)B.call(void 0,w[q],q,w)}function N(w){const B={};for(const q in w)B[q]=w[q];return B}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(w,B){let q,ue;for(let Be=1;Be<arguments.length;Be++){ue=arguments[Be];for(q in ue)w[q]=ue[q];for(let Ge=0;Ge<P.length;Ge++)q=P[Ge],Object.prototype.hasOwnProperty.call(ue,q)&&(w[q]=ue[q])}}function T(w){var B=1;w=w.split(":");const q=[];for(;0<B&&w.length;)q.push(w.shift()),B--;return w.length&&q.push(w.join(":")),q}function M(w){o.setTimeout(()=>{throw w},0)}function L(){var w=ee;let B=null;return w.g&&(B=w.g,w.g=w.g.next,w.g||(w.h=null),B.next=null),B}class V{constructor(){this.h=this.g=null}add(B,q){const ue=K.get();ue.set(B,q),this.h?this.h.next=ue:this.g=ue,this.h=ue}}var K=new y(()=>new Z,w=>w.reset());class Z{constructor(){this.next=this.g=this.h=null}set(B,q){this.h=B,this.g=q,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,H=!1,ee=new V,le=()=>{const w=o.Promise.resolve(void 0);Y=()=>{w.then(se)}};var se=()=>{for(var w;w=L();){try{w.h.call(w.g)}catch(q){M(q)}var B=K;B.j(w),100>B.h&&(B.h++,w.next=B.g,B.g=w)}H=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(w,B){this.type=w,this.g=this.target=B,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var w=!1,B=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const q=()=>{};o.addEventListener("test",q,B),o.removeEventListener("test",q,B)}catch{}return w}();function oe(w,B){if(X.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var q=this.type=w.type,ue=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=B,B=w.relatedTarget){if(C){e:{try{A(B.nodeName);var Be=!0;break e}catch{}Be=!1}Be||(B=null)}}else q=="mouseover"?B=w.fromElement:q=="mouseout"&&(B=w.toElement);this.relatedTarget=B,ue?(this.clientX=ue.clientX!==void 0?ue.clientX:ue.pageX,this.clientY=ue.clientY!==void 0?ue.clientY:ue.pageY,this.screenX=ue.screenX||0,this.screenY=ue.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:me[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&oe.aa.h.call(this)}}g(oe,X);var me={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function fe(w,B,q,ue,Be){this.listener=w,this.proxy=null,this.src=B,this.type=q,this.capture=!!ue,this.ha=Be,this.key=++Ce,this.da=this.fa=!1}function xe(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function Se(w){this.src=w,this.g={},this.h=0}Se.prototype.add=function(w,B,q,ue,Be){var Ge=w.toString();w=this.g[Ge],w||(w=this.g[Ge]=[],this.h++);var Tt=He(w,B,ue,Be);return-1<Tt?(B=w[Tt],q||(B.fa=!1)):(B=new fe(B,this.src,Ge,!!ue,Be),B.fa=q,w.push(B)),B};function ie(w,B){var q=B.type;if(q in w.g){var ue=w.g[q],Be=Array.prototype.indexOf.call(ue,B,void 0),Ge;(Ge=0<=Be)&&Array.prototype.splice.call(ue,Be,1),Ge&&(xe(B),w.g[q].length==0&&(delete w.g[q],w.h--))}}function He(w,B,q,ue){for(var Be=0;Be<w.length;++Be){var Ge=w[Be];if(!Ge.da&&Ge.listener==B&&Ge.capture==!!q&&Ge.ha==ue)return Be}return-1}var Fe="closure_lm_"+(1e6*Math.random()|0),he={};function Ye(w,B,q,ue,Be){if(Array.isArray(B)){for(var Ge=0;Ge<B.length;Ge++)Ye(w,B[Ge],q,ue,Be);return null}return q=Zt(q),w&&w[_e]?w.K(B,q,u(ue)?!!ue.capture:!1,Be):mt(w,B,q,!1,ue,Be)}function mt(w,B,q,ue,Be,Ge){if(!B)throw Error("Invalid event type");var Tt=u(Be)?!!Be.capture:!!Be,Qn=It(w);if(Qn||(w[Fe]=Qn=new Se(w)),q=Qn.add(B,q,ue,Tt,Ge),q.proxy)return q;if(ue=vt(),q.proxy=ue,ue.src=w,ue.listener=q,w.addEventListener)te||(Be=Tt),Be===void 0&&(Be=!1),w.addEventListener(B.toString(),ue,Be);else if(w.attachEvent)w.attachEvent(ht(B.toString()),ue);else if(w.addListener&&w.removeListener)w.addListener(ue);else throw Error("addEventListener and attachEvent are unavailable.");return q}function vt(){function w(q){return B.call(w.src,w.listener,q)}const B=dt;return w}function Qe(w,B,q,ue,Be){if(Array.isArray(B))for(var Ge=0;Ge<B.length;Ge++)Qe(w,B[Ge],q,ue,Be);else ue=u(ue)?!!ue.capture:!!ue,q=Zt(q),w&&w[_e]?(w=w.i,B=String(B).toString(),B in w.g&&(Ge=w.g[B],q=He(Ge,q,ue,Be),-1<q&&(xe(Ge[q]),Array.prototype.splice.call(Ge,q,1),Ge.length==0&&(delete w.g[B],w.h--)))):w&&(w=It(w))&&(B=w.g[B.toString()],w=-1,B&&(w=He(B,q,ue,Be)),(q=-1<w?B[w]:null)&&Ot(q))}function Ot(w){if(typeof w!="number"&&w&&!w.da){var B=w.src;if(B&&B[_e])ie(B.i,w);else{var q=w.type,ue=w.proxy;B.removeEventListener?B.removeEventListener(q,ue,w.capture):B.detachEvent?B.detachEvent(ht(q),ue):B.addListener&&B.removeListener&&B.removeListener(ue),(q=It(B))?(ie(q,w),q.h==0&&(q.src=null,B[Fe]=null)):xe(w)}}}function ht(w){return w in he?he[w]:he[w]="on"+w}function dt(w,B){if(w.da)w=!0;else{B=new oe(B,this);var q=w.listener,ue=w.ha||w.src;w.fa&&Ot(w),w=q.call(ue,B)}return w}function It(w){return w=w[Fe],w instanceof Se?w:null}var tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zt(w){return typeof w=="function"?w:(w[tn]||(w[tn]=function(B){return w.handleEvent(B)}),w[tn])}function $t(){$.call(this),this.i=new Se(this),this.M=this,this.F=null}g($t,$),$t.prototype[_e]=!0,$t.prototype.removeEventListener=function(w,B,q,ue){Qe(this,w,B,q,ue)};function on(w,B){var q,ue=w.F;if(ue)for(q=[];ue;ue=ue.F)q.push(ue);if(w=w.M,ue=B.type||B,typeof B=="string")B=new X(B,w);else if(B instanceof X)B.target=B.target||w;else{var Be=B;B=new X(ue,w),O(B,Be)}if(Be=!0,q)for(var Ge=q.length-1;0<=Ge;Ge--){var Tt=B.g=q[Ge];Be=lt(Tt,ue,!0,B)&&Be}if(Tt=B.g=w,Be=lt(Tt,ue,!0,B)&&Be,Be=lt(Tt,ue,!1,B)&&Be,q)for(Ge=0;Ge<q.length;Ge++)Tt=B.g=q[Ge],Be=lt(Tt,ue,!1,B)&&Be}$t.prototype.N=function(){if($t.aa.N.call(this),this.i){var w=this.i,B;for(B in w.g){for(var q=w.g[B],ue=0;ue<q.length;ue++)xe(q[ue]);delete w.g[B],w.h--}}this.F=null},$t.prototype.K=function(w,B,q,ue){return this.i.add(String(w),B,!1,q,ue)},$t.prototype.L=function(w,B,q,ue){return this.i.add(String(w),B,!0,q,ue)};function lt(w,B,q,ue){if(B=w.i.g[String(B)],!B)return!0;B=B.concat();for(var Be=!0,Ge=0;Ge<B.length;++Ge){var Tt=B[Ge];if(Tt&&!Tt.da&&Tt.capture==q){var Qn=Tt.listener,Qr=Tt.ha||Tt.src;Tt.fa&&ie(w.i,Tt),Be=Qn.call(Qr,ue)!==!1&&Be}}return Be&&!ue.defaultPrevented}function bt(w,B,q){if(typeof w=="function")q&&(w=p(w,q));else if(w&&typeof w.handleEvent=="function")w=p(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(B)?-1:o.setTimeout(w,B||0)}function yt(w){w.g=bt(()=>{w.g=null,w.i&&(w.i=!1,yt(w))},w.l);const B=w.h;w.h=null,w.m.apply(null,B)}class nt extends ${constructor(B,q){super(),this.m=B,this.l=q,this.h=null,this.i=!1,this.g=null}j(B){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bt(w){$.call(this),this.h=w,this.g={}}g(Bt,$);var ft=[];function pt(w){D(w.g,function(B,q){this.g.hasOwnProperty(q)&&Ot(B)},w),w.g={}}Bt.prototype.N=function(){Bt.aa.N.call(this),pt(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rt=o.JSON.stringify,Ct=o.JSON.parse,Ht=class{stringify(w){return o.JSON.stringify(w,void 0)}parse(w){return o.JSON.parse(w,void 0)}};function pn(){}pn.prototype.h=null;function dn(w){return w.h||(w.h=w.i())}function wt(){}var sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mn(){X.call(this,"d")}g(mn,X);function qt(){X.call(this,"c")}g(qt,X);var Cn={},ba=null;function $r(){return ba=ba||new $t}Cn.La="serverreachability";function gs(w){X.call(this,Cn.La,w)}g(gs,X);function Re(w){const B=$r();on(B,new gs(B))}Cn.STAT_EVENT="statevent";function Oe(w,B){X.call(this,Cn.STAT_EVENT,w),this.stat=B}g(Oe,X);function Ke(w){const B=$r();on(B,new Oe(B,w))}Cn.Ma="timingevent";function Et(w,B){X.call(this,Cn.Ma,w),this.size=B}g(Et,X);function ct(w,B){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){w()},B)}function Gt(){this.g=!0}Gt.prototype.xa=function(){this.g=!1};function yn(w,B,q,ue,Be,Ge){w.info(function(){if(w.g)if(Ge)for(var Tt="",Qn=Ge.split("&"),Qr=0;Qr<Qn.length;Qr++){var $n=Qn[Qr].split("=");if(1<$n.length){var Bn=$n[0];$n=$n[1];var Dr=Bn.split("_");Tt=2<=Dr.length&&Dr[1]=="type"?Tt+(Bn+"="+$n+"&"):Tt+(Bn+"=redacted&")}}else Tt=null;else Tt=Ge;return"XMLHTTP REQ ("+ue+") [attempt "+Be+"]: "+B+`
`+q+`
`+Tt})}function Gn(w,B,q,ue,Be,Ge,Tt){w.info(function(){return"XMLHTTP RESP ("+ue+") [ attempt "+Be+"]: "+B+`
`+q+`
`+Ge+" "+Tt})}function Ft(w,B,q,ue){w.info(function(){return"XMLHTTP TEXT ("+B+"): "+Ri(w,q)+(ue?" "+ue:"")})}function qn(w,B){w.info(function(){return"TIMEOUT: "+B})}Gt.prototype.info=function(){};function Ri(w,B){if(!w.g)return B;if(!B)return null;try{var q=JSON.parse(B);if(q){for(w=0;w<q.length;w++)if(Array.isArray(q[w])){var ue=q[w];if(!(2>ue.length)){var Be=ue[1];if(Array.isArray(Be)&&!(1>Be.length)){var Ge=Be[0];if(Ge!="noop"&&Ge!="stop"&&Ge!="close")for(var Tt=1;Tt<Be.length;Tt++)Be[Tt]=""}}}}return Rt(q)}catch{return B}}var kr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Br={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tr;function er(){}g(er,pn),er.prototype.g=function(){return new XMLHttpRequest},er.prototype.i=function(){return{}},Tr=new er;function Sr(w,B,q,ue){this.j=w,this.i=B,this.l=q,this.R=ue||1,this.U=new Bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}var vs={},xa={};function Do(w,B,q){w.L=1,w.v=Hs(wa(B)),w.m=q,w.P=!0,Io(w,null)}function Io(w,B){w.F=Date.now(),ca(w),w.A=wa(w.v);var q=w.A,ue=w.R;Array.isArray(ue)||(ue=[String(ue)]),Xt(q.i,"t",ue),w.C=0,q=w.j.J,w.h=new oi,w.g=Er(w.j,q?B:null,!w.m),0<w.O&&(w.M=new nt(p(w.Y,w,w.g),w.O)),B=w.U,q=w.g,ue=w.ca;var Be="readystatechange";Array.isArray(Be)||(Be&&(ft[0]=Be.toString()),Be=ft);for(var Ge=0;Ge<Be.length;Ge++){var Tt=Ye(q,Be[Ge],ue||B.handleEvent,!1,B.h||B);if(!Tt)break;B.g[Tt.key]=Tt}B=w.H?N(w.H):{},w.m?(w.u||(w.u="POST"),B["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,B)):(w.u="GET",w.g.ea(w.A,w.u,null,B)),Re(),yn(w.i,w.u,w.A,w.l,w.R,w.m)}Sr.prototype.ca=function(w){w=w.target;const B=this.M;B&&As(w)==3?B.j():this.Y(w)},Sr.prototype.Y=function(w){try{if(w==this.g)e:{const Dr=As(this.g);var B=this.g.Ba();const Za=this.g.Z();if(!(3>Dr)&&(Dr!=3||this.g&&(this.h.h||this.g.oa()||rc(this.g)))){this.J||Dr!=4||B==7||(B==8||0>=Za?Re(3):Re(2)),Us(this);var q=this.g.Z();this.X=q;t:if(_r(this)){var ue=rc(this.g);w="";var Be=ue.length,Ge=As(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xa(this),Ei(this);var Tt="";break t}this.h.i=new o.TextDecoder}for(B=0;B<Be;B++)this.h.h=!0,w+=this.h.i.decode(ue[B],{stream:!(Ge&&B==Be-1)});ue.length=0,this.h.g+=w,this.C=0,Tt=this.h.g}else Tt=this.g.oa();if(this.o=q==200,Gn(this.i,this.u,this.A,this.l,this.R,Dr,q),this.o){if(this.T&&!this.K){t:{if(this.g){var Qn,Qr=this.g;if((Qn=Qr.g?Qr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Qn)){var $n=Qn;break t}}$n=null}if(q=$n)Ft(this.i,this.l,q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yl(this,q);else{this.o=!1,this.s=3,Ke(12),Xa(this),Ei(this);break e}}if(this.P){q=!0;let Aa;for(;!this.J&&this.C<Tt.length;)if(Aa=Oo(this,Tt),Aa==xa){Dr==4&&(this.s=4,Ke(14),q=!1),Ft(this.i,this.l,null,"[Incomplete Response]");break}else if(Aa==vs){this.s=4,Ke(15),Ft(this.i,this.l,Tt,"[Invalid Chunk]"),q=!1;break}else Ft(this.i,this.l,Aa,null),yl(this,Aa);if(_r(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dr!=4||Tt.length!=0||this.h.h||(this.s=1,Ke(16),q=!1),this.o=this.o&&q,!q)Ft(this.i,this.l,Tt,"[Invalid Chunked Response]"),Xa(this),Ei(this);else if(0<Tt.length&&!this.W){this.W=!0;var Bn=this.j;Bn.g==this&&Bn.ba&&!Bn.M&&(Bn.j.info("Great, no buffering proxy detected. Bytes received: "+Tt.length),Wt(Bn),Bn.M=!0,Ke(11))}}else Ft(this.i,this.l,Tt,null),yl(this,Tt);Dr==4&&Xa(this),this.o&&!this.J&&(Dr==4?bn(this.j,this):(this.o=!1,ca(this)))}else Ks(this.g),q==400&&0<Tt.indexOf("Unknown SID")?(this.s=3,Ke(12)):(this.s=0,Ke(13)),Xa(this),Ei(this)}}}catch{}finally{}};function _r(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function Oo(w,B){var q=w.C,ue=B.indexOf(`
`,q);return ue==-1?xa:(q=Number(B.substring(q,ue)),isNaN(q)?vs:(ue+=1,ue+q>B.length?xa:(B=B.slice(ue,ue+q),w.C=ue+q,B)))}Sr.prototype.cancel=function(){this.J=!0,Xa(this)};function ca(w){w.S=Date.now()+w.I,Fc(w,w.I)}function Fc(w,B){if(w.B!=null)throw Error("WatchDog timer not null");w.B=ct(p(w.ba,w),B)}function Us(w){w.B&&(o.clearTimeout(w.B),w.B=null)}Sr.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(qn(this.i,this.A),this.L!=2&&(Re(),Ke(17)),Xa(this),this.s=2,Ei(this)):Fc(this,this.S-w)};function Ei(w){w.j.G==0||w.J||bn(w.j,w)}function Xa(w){Us(w);var B=w.M;B&&typeof B.ma=="function"&&B.ma(),w.M=null,pt(w.U),w.g&&(B=w.g,w.g=null,B.abort(),B.ma())}function yl(w,B){try{var q=w.j;if(q.G!=0&&(q.g==w||kn(q.h,w))){if(!w.K&&kn(q.h,w)&&q.G==3){try{var ue=q.Da.g.parse(B)}catch{ue=null}if(Array.isArray(ue)&&ue.length==3){var Be=ue;if(Be[0]==0){e:if(!q.u){if(q.g)if(q.g.F+3e3<w.F)gn(q),Qa(q);else break e;at(q),Ke(18)}}else q.za=Be[1],0<q.za-q.T&&37500>Be[2]&&q.F&&q.v==0&&!q.C&&(q.C=ct(p(q.Za,q),6e3));if(1>=$c(q.h)&&q.ca){try{q.ca()}catch{}q.ca=void 0}}else lr(q,11)}else if((w.K||q.g==w)&&gn(q),!b(B))for(Be=q.Da.g.parse(B),B=0;B<Be.length;B++){let $n=Be[B];if(q.T=$n[0],$n=$n[1],q.G==2)if($n[0]=="c"){q.K=$n[1],q.ia=$n[2];const Bn=$n[3];Bn!=null&&(q.la=Bn,q.j.info("VER="+q.la));const Dr=$n[4];Dr!=null&&(q.Aa=Dr,q.j.info("SVER="+q.Aa));const Za=$n[5];Za!=null&&typeof Za=="number"&&0<Za&&(ue=1.5*Za,q.L=ue,q.j.info("backChannelRequestTimeoutMs_="+ue)),ue=q;const Aa=w.g;if(Aa){const da=Aa.g?Aa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(da){var Ge=ue.h;Ge.g||da.indexOf("spdy")==-1&&da.indexOf("quic")==-1&&da.indexOf("h2")==-1||(Ge.j=Ge.l,Ge.g=new Set,Ge.h&&(Bc(Ge,Ge.h),Ge.h=null))}if(ue.D){const Vo=Aa.g?Aa.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(ue.ya=Vo,Hn(ue.I,ue.D,Vo))}}q.G=3,q.l&&q.l.ua(),q.ba&&(q.R=Date.now()-w.F,q.j.info("Handshake RTT: "+q.R+"ms")),ue=q;var Tt=w;if(ue.qa=hr(ue,ue.J?ue.ia:null,ue.W),Tt.K){Yr(ue.h,Tt);var Qn=Tt,Qr=ue.L;Qr&&(Qn.I=Qr),Qn.B&&(Us(Qn),ca(Qn)),ue.g=Tt}else rt(ue);0<q.i.length&&R(q)}else $n[0]!="stop"&&$n[0]!="close"||lr(q,7);else q.G==3&&($n[0]=="stop"||$n[0]=="close"?$n[0]=="stop"?lr(q,7):Bo(q):$n[0]!="noop"&&q.l&&q.l.ta($n),q.v=0)}}Re(4)}catch{}}var Ws=class{constructor(w,B){this.g=w,this.map=B}};function zc(w){this.l=w||10,o.PerformanceNavigationTiming?(w=o.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bl(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function $c(w){return w.h?1:w.g?w.g.size:0}function kn(w,B){return w.h?w.h==B:w.g?w.g.has(B):!1}function Bc(w,B){w.g?w.g.add(B):w.h=B}function Yr(w,B){w.h&&w.h==B?w.h=null:w.g&&w.g.has(B)&&w.g.delete(B)}zc.prototype.cancel=function(){if(this.i=xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function xl(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let B=w.i;for(const q of w.g.values())B=B.concat(q.D);return B}return m(w.i)}function Su(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(l(w)){for(var B=[],q=w.length,ue=0;ue<q;ue++)B.push(w[ue]);return B}B=[],q=0;for(ue in w)B[q++]=w[ue];return B}function Yn(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(l(w)||typeof w=="string"){var B=[];w=w.length;for(var q=0;q<w;q++)B.push(q);return B}B=[],q=0;for(const ue in w)B[q++]=ue;return B}}}function ys(w,B){if(w.forEach&&typeof w.forEach=="function")w.forEach(B,void 0);else if(l(w)||typeof w=="string")Array.prototype.forEach.call(w,B,void 0);else for(var q=Yn(w),ue=Su(w),Be=ue.length,Ge=0;Ge<Be;Ge++)B.call(void 0,ue[Ge],q&&q[Ge],w)}var ua=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bs(w,B){if(w){w=w.split("&");for(var q=0;q<w.length;q++){var ue=w[q].indexOf("="),Be=null;if(0<=ue){var Ge=w[q].substring(0,ue);Be=w[q].substring(ue+1)}else Ge=w[q];B(Ge,Be?decodeURIComponent(Be.replace(/\+/g," ")):"")}}}function fr(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof fr){this.h=w.h,Mo(this,w.j),this.o=w.o,this.g=w.g,Ql(this,w.s),this.l=w.l;var B=w.i,q=new Sa;q.i=B.i,B.g&&(q.g=new Map(B.g),q.h=B.h),Zl(this,q),this.m=w.m}else w&&(B=String(w).match(ua))?(this.h=!1,Mo(this,B[1]||"",!0),this.o=Ro(B[2]||""),this.g=Ro(B[3]||"",!0),Ql(this,B[4]),this.l=Ro(B[5]||"",!0),Zl(this,B[6]||"",!0),this.m=Ro(B[7]||"")):(this.h=!1,this.i=new Sa(null,this.h))}fr.prototype.toString=function(){var w=[],B=this.j;B&&w.push(xs(B,_u,!0),":");var q=this.g;return(q||B=="file")&&(w.push("//"),(B=this.o)&&w.push(xs(B,_u,!0),"@"),w.push(encodeURIComponent(String(q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),q=this.s,q!=null&&w.push(":",String(q))),(q=this.l)&&(this.g&&q.charAt(0)!="/"&&w.push("/"),w.push(xs(q,q.charAt(0)=="/"?qf:Hf,!0))),(q=this.i.toString())&&w.push("?",q),(q=this.m)&&w.push("#",xs(q,ws)),w.join("")};function wa(w){return new fr(w)}function Mo(w,B,q){w.j=q?Ro(B,!0):B,w.j&&(w.j=w.j.replace(/:$/,""))}function Ql(w,B){if(B){if(B=Number(B),isNaN(B)||0>B)throw Error("Bad port number "+B);w.s=B}else w.s=null}function Zl(w,B,q){B instanceof Sa?(w.i=B,ec(w.i,w.h)):(q||(B=xs(B,Gi)),w.i=new Sa(B,w.h))}function Hn(w,B,q){w.i.set(B,q)}function Hs(w){return Hn(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function Ro(w,B){return w?B?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function xs(w,B,q){return typeof w=="string"?(w=encodeURI(w).replace(B,Wn),q&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function Wn(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var _u=/[#\/\?@]/g,Hf=/[#\?:]/g,qf=/[#\?]/g,Gi=/[#\?@]/g,ws=/#/g;function Sa(w,B){this.h=this.g=null,this.i=w||null,this.j=!!B}function Yi(w){w.g||(w.g=new Map,w.h=0,w.i&&bs(w.i,function(B,q){w.add(decodeURIComponent(B.replace(/\+/g," ")),q)}))}t=Sa.prototype,t.add=function(w,B){Yi(this),this.i=null,w=Xi(this,w);var q=this.g.get(w);return q||this.g.set(w,q=[]),q.push(B),this.h+=1,this};function Lo(w,B){Yi(w),B=Xi(w,B),w.g.has(B)&&(w.i=null,w.h-=w.g.get(B).length,w.g.delete(B))}function Jl(w,B){return Yi(w),B=Xi(w,B),w.g.has(B)}t.forEach=function(w,B){Yi(this),this.g.forEach(function(q,ue){q.forEach(function(Be){w.call(B,Be,ue,this)},this)},this)},t.na=function(){Yi(this);const w=Array.from(this.g.values()),B=Array.from(this.g.keys()),q=[];for(let ue=0;ue<B.length;ue++){const Be=w[ue];for(let Ge=0;Ge<Be.length;Ge++)q.push(B[ue])}return q},t.V=function(w){Yi(this);let B=[];if(typeof w=="string")Jl(this,w)&&(B=B.concat(this.g.get(Xi(this,w))));else{w=Array.from(this.g.values());for(let q=0;q<w.length;q++)B=B.concat(w[q])}return B},t.set=function(w,B){return Yi(this),this.i=null,w=Xi(this,w),Jl(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[B]),this.h+=1,this},t.get=function(w,B){return w?(w=this.V(w),0<w.length?String(w[0]):B):B};function Xt(w,B,q){Lo(w,B),0<q.length&&(w.i=null,w.g.set(Xi(w,B),m(q)),w.h+=q.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],B=Array.from(this.g.keys());for(var q=0;q<B.length;q++){var ue=B[q];const Ge=encodeURIComponent(String(ue)),Tt=this.V(ue);for(ue=0;ue<Tt.length;ue++){var Be=Ge;Tt[ue]!==""&&(Be+="="+encodeURIComponent(String(Tt[ue]))),w.push(Be)}}return this.i=w.join("&")};function Xi(w,B){return B=String(B),w.j&&(B=B.toLowerCase()),B}function ec(w,B){B&&!w.j&&(Yi(w),w.i=null,w.g.forEach(function(q,ue){var Be=ue.toLowerCase();ue!=Be&&(Lo(this,ue),Xt(this,Be,q))},w)),w.j=B}function tc(w,B){const q=new Gt;if(o.Image){const ue=new Image;ue.onload=h(Wr,q,"TestLoadImage: loaded",!0,B,ue),ue.onerror=h(Wr,q,"TestLoadImage: error",!1,B,ue),ue.onabort=h(Wr,q,"TestLoadImage: abort",!1,B,ue),ue.ontimeout=h(Wr,q,"TestLoadImage: timeout",!1,B,ue),o.setTimeout(function(){ue.ontimeout&&ue.ontimeout()},1e4),ue.src=w}else B(!1)}function Au(w,B){const q=new Gt,ue=new AbortController,Be=setTimeout(()=>{ue.abort(),Wr(q,"TestPingServer: timeout",!1,B)},1e4);fetch(w,{signal:ue.signal}).then(Ge=>{clearTimeout(Be),Ge.ok?Wr(q,"TestPingServer: ok",!0,B):Wr(q,"TestPingServer: server error",!1,B)}).catch(()=>{clearTimeout(Be),Wr(q,"TestPingServer: error",!1,B)})}function Wr(w,B,q,ue,Be){try{Be&&(Be.onload=null,Be.onerror=null,Be.onabort=null,Be.ontimeout=null),ue(q)}catch{}}function Fo(){this.g=new Ht}function Ss(w,B,q){const ue=q||"";try{ys(w,function(Be,Ge){let Tt=Be;u(Be)&&(Tt=Rt(Be)),B.push(ue+Ge+"="+encodeURIComponent(Tt))})}catch(Be){throw B.push(ue+"type="+encodeURIComponent("_badmap")),Be}}function wl(w){this.l=w.Ub||null,this.j=w.eb||!1}g(wl,pn),wl.prototype.g=function(){return new co(this.l,this.j)},wl.prototype.i=function(w){return function(){return w}}({});function co(w,B){$t.call(this),this.D=w,this.o=B,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(co,$t),t=co.prototype,t.open=function(w,B){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=B,this.readyState=1,_s(this)},t.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const B={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(B.body=w),(this.D||o).fetch(new Request(this.A,B)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_a(this)),this.readyState=0},t.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,_s(this)),this.g&&(this.readyState=3,_s(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sl(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sl(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}t.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var B=w.value?w.value:new Uint8Array(0);(B=this.v.decode(B,{stream:!w.done}))&&(this.response=this.responseText+=B)}w.done?_a(this):_s(this),this.readyState==3&&Sl(this)}},t.Ra=function(w){this.g&&(this.response=this.responseText=w,_a(this))},t.Qa=function(w){this.g&&(this.response=w,_a(this))},t.ga=function(){this.g&&_a(this)};function _a(w){w.readyState=4,w.l=null,w.j=null,w.v=null,_s(w)}t.setRequestHeader=function(w,B){this.u.append(w,B)},t.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],B=this.h.entries();for(var q=B.next();!q.done;)q=q.value,w.push(q[0]+": "+q[1]),q=B.next();return w.join(`\r
`)};function _s(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function _l(w){let B="";return D(w,function(q,ue){B+=ue,B+=":",B+=q,B+=`\r
`}),B}function Cu(w,B,q){e:{for(ue in q){var ue=!1;break e}ue=!0}ue||(q=_l(q),typeof w=="string"?q!=null&&encodeURIComponent(String(q)):Hn(w,B,q))}function or(w){$t.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(or,$t);var ju=/^https?$/i,nc=["POST","PUT"];t=or.prototype,t.Ha=function(w){this.J=w},t.ea=function(w,B,q,ue){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);B=B?B.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tr.g(),this.v=this.o?dn(this.o):dn(Tr),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(B,String(w),!0),this.B=!1}catch(Ge){qs(this,Ge);return}if(w=q||"",q=new Map(this.headers),ue)if(Object.getPrototypeOf(ue)===Object.prototype)for(var Be in ue)q.set(Be,ue[Be]);else if(typeof ue.keys=="function"&&typeof ue.get=="function")for(const Ge of ue.keys())q.set(Ge,ue.get(Ge));else throw Error("Unknown input type for opt_headers: "+String(ue));ue=Array.from(q.keys()).find(Ge=>Ge.toLowerCase()=="content-type"),Be=o.FormData&&w instanceof o.FormData,!(0<=Array.prototype.indexOf.call(nc,B,void 0))||ue||Be||q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ge,Tt]of q)this.g.setRequestHeader(Ge,Tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cl(this),this.u=!0,this.g.send(w),this.u=!1}catch(Ge){qs(this,Ge)}};function qs(w,B){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=B,w.m=5,zo(w),Al(w)}function zo(w){w.A||(w.A=!0,on(w,"complete"),on(w,"error"))}t.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,on(this,"complete"),on(this,"abort"),Al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Al(this,!0)),or.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$o(this):this.bb())},t.bb=function(){$o(this)};function $o(w){if(w.h&&typeof s<"u"&&(!w.v[1]||As(w)!=4||w.Z()!=2)){if(w.u&&As(w)==4)bt(w.Ea,0,w);else if(on(w,"readystatechange"),As(w)==4){w.h=!1;try{const Tt=w.Z();e:switch(Tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break e;default:B=!1}var q;if(!(q=B)){var ue;if(ue=Tt===0){var Be=String(w.D).match(ua)[1]||null;!Be&&o.self&&o.self.location&&(Be=o.self.location.protocol.slice(0,-1)),ue=!ju.test(Be?Be.toLowerCase():"")}q=ue}if(q)on(w,"complete"),on(w,"success");else{w.m=6;try{var Ge=2<As(w)?w.g.statusText:""}catch{Ge=""}w.l=Ge+" ["+w.Z()+"]",zo(w)}}finally{Al(w)}}}}function Al(w,B){if(w.g){Cl(w);const q=w.g,ue=w.v[0]?()=>{}:null;w.g=null,w.v=null,B||on(w,"ready");try{q.onreadystatechange=ue}catch{}}}function Cl(w){w.I&&(o.clearTimeout(w.I),w.I=null)}t.isActive=function(){return!!this.g};function As(w){return w.g?w.g.readyState:0}t.Z=function(){try{return 2<As(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(w){if(this.g){var B=this.g.responseText;return w&&B.indexOf(w)==0&&(B=B.substring(w.length)),Ct(B)}};function rc(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function Ks(w){const B={};w=(w.g&&2<=As(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let ue=0;ue<w.length;ue++){if(b(w[ue]))continue;var q=T(w[ue]);const Be=q[0];if(q=q[1],typeof q!="string")continue;q=q.trim();const Ge=B[Be]||[];B[Be]=Ge,Ge.push(q)}j(B,function(ue){return ue.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fa(w,B,q){return q&&q.internalChannelParams&&q.internalChannelParams[w]||B}function jl(w){this.Aa=0,this.i=[],this.j=new Gt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fa("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fa("baseRetryDelayMs",5e3,w),this.cb=Fa("retryDelaySeedMs",1e4,w),this.Wa=Fa("forwardChannelMaxRetries",2,w),this.wa=Fa("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new zc(w&&w.concurrentRequestLimit),this.Da=new Fo,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jl.prototype,t.la=8,t.G=1,t.connect=function(w,B,q,ue){Ke(0),this.W=w,this.H=B||{},q&&ue!==void 0&&(this.H.OSID=q,this.H.OAID=ue),this.F=this.X,this.I=hr(this,null,this.W),R(this)};function Bo(w){if(Vc(w),w.G==3){var B=w.U++,q=wa(w.I);if(Hn(q,"SID",w.K),Hn(q,"RID",B),Hn(q,"TYPE","terminate"),Ee(w,q),B=new Sr(w,w.j,B),B.L=2,B.v=Hs(wa(q)),q=!1,o.navigator&&o.navigator.sendBeacon)try{q=o.navigator.sendBeacon(B.v.toString(),"")}catch{}!q&&o.Image&&(new Image().src=B.v,q=!0),q||(B.g=Er(B.j,null),B.g.ea(B.v)),B.F=Date.now(),ca(B)}Vr(w)}function Qa(w){w.g&&(Wt(w),w.g.cancel(),w.g=null)}function Vc(w){Qa(w),w.u&&(o.clearTimeout(w.u),w.u=null),gn(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&o.clearTimeout(w.s),w.s=null)}function R(w){if(!bl(w.h)&&!w.s){w.s=!0;var B=w.Ga;Y||le(),H||(Y(),H=!0),ee.add(B,w),w.B=0}}function Q(w,B){return $c(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=B.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=ct(p(w.Ga,w,B),Xn(w,w.B)),w.B++,!0)}t.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const Be=new Sr(this,this.j,w);let Ge=this.o;if(this.S&&(Ge?(Ge=N(Ge),O(Ge,this.S)):Ge=this.S),this.m!==null||this.O||(Be.H=Ge,Ge=null),this.P)e:{for(var B=0,q=0;q<this.i.length;q++){t:{var ue=this.i[q];if("__data__"in ue.map&&(ue=ue.map.__data__,typeof ue=="string")){ue=ue.length;break t}ue=void 0}if(ue===void 0)break;if(B+=ue,4096<B){B=q;break e}if(B===4096||q===this.i.length-1){B=q+1;break e}}B=1e3}else B=1e3;B=$e(this,Be,B),q=wa(this.I),Hn(q,"RID",w),Hn(q,"CVER",22),this.D&&Hn(q,"X-HTTP-Session-Id",this.D),Ee(this,q),Ge&&(this.O?B="headers="+encodeURIComponent(String(_l(Ge)))+"&"+B:this.m&&Cu(q,this.m,Ge)),Bc(this.h,Be),this.Ua&&Hn(q,"TYPE","init"),this.P?(Hn(q,"$req",B),Hn(q,"SID","null"),Be.T=!0,Do(Be,q,null)):Do(Be,q,B),this.G=2}}else this.G==3&&(w?ge(this,w):this.i.length==0||bl(this.h)||ge(this))};function ge(w,B){var q;B?q=B.l:q=w.U++;const ue=wa(w.I);Hn(ue,"SID",w.K),Hn(ue,"RID",q),Hn(ue,"AID",w.T),Ee(w,ue),w.m&&w.o&&Cu(ue,w.m,w.o),q=new Sr(w,w.j,q,w.B+1),w.m===null&&(q.H=w.o),B&&(w.i=B.D.concat(w.i)),B=$e(w,q,1e3),q.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),Bc(w.h,q),Do(q,ue,B)}function Ee(w,B){w.H&&D(w.H,function(q,ue){Hn(B,ue,q)}),w.l&&ys({},function(q,ue){Hn(B,ue,q)})}function $e(w,B,q){q=Math.min(w.i.length,q);var ue=w.l?p(w.l.Na,w.l,w):null;e:{var Be=w.i;let Ge=-1;for(;;){const Tt=["count="+q];Ge==-1?0<q?(Ge=Be[0].g,Tt.push("ofs="+Ge)):Ge=0:Tt.push("ofs="+Ge);let Qn=!0;for(let Qr=0;Qr<q;Qr++){let $n=Be[Qr].g;const Bn=Be[Qr].map;if($n-=Ge,0>$n)Ge=Math.max(0,Be[Qr].g-100),Qn=!1;else try{Ss(Bn,Tt,"req"+$n+"_")}catch{ue&&ue(Bn)}}if(Qn){ue=Tt.join("&");break e}}}return w=w.i.splice(0,q),B.D=w,ue}function rt(w){if(!w.g&&!w.u){w.Y=1;var B=w.Fa;Y||le(),H||(Y(),H=!0),ee.add(B,w),w.v=0}}function at(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=ct(p(w.Fa,w),Xn(w,w.v)),w.v++,!0)}t.Fa=function(){if(this.u=null,Yt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=ct(p(this.ab,this),w)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ke(10),Qa(this),Yt(this))};function Wt(w){w.A!=null&&(o.clearTimeout(w.A),w.A=null)}function Yt(w){w.g=new Sr(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var B=wa(w.qa);Hn(B,"RID","rpc"),Hn(B,"SID",w.K),Hn(B,"AID",w.T),Hn(B,"CI",w.F?"0":"1"),!w.F&&w.ja&&Hn(B,"TO",w.ja),Hn(B,"TYPE","xmlhttp"),Ee(w,B),w.m&&w.o&&Cu(B,w.m,w.o),w.L&&(w.g.I=w.L);var q=w.g;w=w.ia,q.L=1,q.v=Hs(wa(B)),q.m=null,q.P=!0,Io(q,w)}t.Za=function(){this.C!=null&&(this.C=null,Qa(this),at(this),Ke(19))};function gn(w){w.C!=null&&(o.clearTimeout(w.C),w.C=null)}function bn(w,B){var q=null;if(w.g==B){gn(w),Wt(w),w.g=null;var ue=2}else if(kn(w.h,B))q=B.D,Yr(w.h,B),ue=1;else return;if(w.G!=0){if(B.o)if(ue==1){q=B.m?B.m.length:0,B=Date.now()-B.F;var Be=w.B;ue=$r(),on(ue,new Et(ue,q)),R(w)}else rt(w);else if(Be=B.s,Be==3||Be==0&&0<B.X||!(ue==1&&Q(w,B)||ue==2&&at(w)))switch(q&&0<q.length&&(B=w.h,B.i=B.i.concat(q)),Be){case 1:lr(w,5);break;case 4:lr(w,10);break;case 3:lr(w,6);break;default:lr(w,2)}}}function Xn(w,B){let q=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(q*=2),q*B}function lr(w,B){if(w.j.info("Error code "+B),B==2){var q=p(w.fb,w),ue=w.Xa;const Be=!ue;ue=new fr(ue||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Mo(ue,"https"),Hs(ue),Be?tc(ue.toString(),q):Au(ue.toString(),q)}else Ke(2);w.G=0,w.l&&w.l.sa(B),Vr(w),Vc(w)}t.fb=function(w){w?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function Vr(w){if(w.G=0,w.ka=[],w.l){const B=xl(w.h);(B.length!=0||w.i.length!=0)&&(v(w.ka,B),v(w.ka,w.i),w.h.i.length=0,m(w.i),w.i.length=0),w.l.ra()}}function hr(w,B,q){var ue=q instanceof fr?wa(q):new fr(q);if(ue.g!="")B&&(ue.g=B+"."+ue.g),Ql(ue,ue.s);else{var Be=o.location;ue=Be.protocol,B=B?B+"."+Be.hostname:Be.hostname,Be=+Be.port;var Ge=new fr(null);ue&&Mo(Ge,ue),B&&(Ge.g=B),Be&&Ql(Ge,Be),q&&(Ge.l=q),ue=Ge}return q=w.D,B=w.ya,q&&B&&Hn(ue,q,B),Hn(ue,"VER",w.la),Ee(w,ue),ue}function Er(w,B,q){if(B&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return B=w.Ca&&!w.pa?new or(new wl({eb:q})):new or(w.pa),B.Ha(w.J),B}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hr(){}t=Hr.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xr(){}Xr.prototype.g=function(w,B){return new Ar(w,B)};function Ar(w,B){$t.call(this),this.g=new jl(B),this.l=w,this.h=B&&B.messageUrlParams||null,w=B&&B.messageHeaders||null,B&&B.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=B&&B.initMessageHeaders||null,B&&B.messageContentType&&(w?w["X-WebChannel-Content-Type"]=B.messageContentType:w={"X-WebChannel-Content-Type":B.messageContentType}),B&&B.va&&(w?w["X-WebChannel-Client-Profile"]=B.va:w={"X-WebChannel-Client-Profile":B.va}),this.g.S=w,(w=B&&B.Sb)&&!b(w)&&(this.g.m=w),this.v=B&&B.supportsCrossDomainXhr||!1,this.u=B&&B.sendRawJson||!1,(B=B&&B.httpSessionIdParam)&&!b(B)&&(this.g.D=B,w=this.h,w!==null&&B in w&&(w=this.h,B in w&&delete w[B])),this.j=new Gs(this)}g(Ar,$t),Ar.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ar.prototype.close=function(){Bo(this.g)},Ar.prototype.o=function(w){var B=this.g;if(typeof w=="string"){var q={};q.__data__=w,w=q}else this.u&&(q={},q.__data__=Rt(w),w=q);B.i.push(new Ws(B.Ya++,w)),B.G==3&&R(B)},Ar.prototype.N=function(){this.g.l=null,delete this.j,Bo(this.g),delete this.g,Ar.aa.N.call(this)};function Qi(w){mn.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var B=w.__sm__;if(B){e:{for(const q in B){w=q;break e}w=void 0}(this.i=w)&&(w=this.i,B=B!==null&&w in B?B[w]:void 0),this.data=B}else this.data=w}g(Qi,mn);function Uc(){qt.call(this),this.status=1}g(Uc,qt);function Gs(w){this.g=w}g(Gs,Hr),Gs.prototype.ua=function(){on(this.g,"a")},Gs.prototype.ta=function(w){on(this.g,new Qi(w))},Gs.prototype.sa=function(w){on(this.g,new Uc)},Gs.prototype.ra=function(){on(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,Ar.prototype.send=Ar.prototype.o,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,mU=function(){return new Xr},pU=function(){return $r()},hU=Cn,TE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kr.NO_ERROR=0,kr.TIMEOUT=8,kr.HTTP_ERROR=6,U1=kr,Br.COMPLETE="complete",fU=Br,wt.EventType=sr,sr.OPEN="a",sr.CLOSE="b",sr.ERROR="c",sr.MESSAGE="d",$t.prototype.listen=$t.prototype.K,i0=wt,or.prototype.listenOnce=or.prototype.L,or.prototype.getLastError=or.prototype.Ka,or.prototype.getLastErrorCode=or.prototype.Ba,or.prototype.getStatus=or.prototype.Z,or.prototype.getResponseJson=or.prototype.Oa,or.prototype.getResponseText=or.prototype.oa,or.prototype.send=or.prototype.ea,or.prototype.setWithCredentials=or.prototype.Ha,dU=or}).apply(typeof Rx<"u"?Rx:typeof self<"u"?self:typeof window<"u"?window:{});const aM="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mo.UNAUTHENTICATED=new mo(null),mo.GOOGLE_CREDENTIALS=new mo("google-credentials-uid"),mo.FIRST_PARTY=new mo("first-party-uid"),mo.MOCK_USER=new mo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new v4("@firebase/firestore");function Rv(){return Gh.logLevel}function an(t,...e){if(Gh.logLevel<=ir.DEBUG){const n=e.map(_4);Gh.debug(`Firestore (${Xg}): ${t}`,...n)}}function rd(t,...e){if(Gh.logLevel<=ir.ERROR){const n=e.map(_4);Gh.error(`Firestore (${Xg}): ${t}`,...n)}}function vy(t,...e){if(Gh.logLevel<=ir.WARN){const n=e.map(_4);Gh.warn(`Firestore (${Xg}): ${t}`,...n)}}function _4(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t="Unexpected state"){const e=`FIRESTORE (${Xg}) INTERNAL ASSERTION FAILED: `+t;throw rd(e),new Error(e)}function Fr(t,e){t||Tn()}function Ln(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qt extends pd{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xae{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qae{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mo.UNAUTHENTICATED))}shutdown(){}}class Zae{constructor(e){this.t=e,this.currentUser=mo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fr(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new Mh;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Mh,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{an("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(an("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Mh)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(an("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fr(typeof r.accessToken=="string"),new Xae(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fr(e===null||typeof e=="string"),new mo(e)}}class Jae{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=mo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ese{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Jae(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(mo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tse{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nse{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Fr(this.o===void 0);const r=a=>{a.error!=null&&an("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.R;return this.R=a.token,an("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{an("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):an("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fr(typeof n.token=="string"),this.R=n.token,new tse(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rse(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=rse(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function br(t,e){return t<e?-1:t>e?1:0}function Qm(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Qt(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qt(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Qt(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qt(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return va.fromMillis(Date.now())}static fromDate(e){return va.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new va(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?br(this.nanoseconds,e.nanoseconds):br(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mn(e)}static min(){return new Mn(new va(0,0))}static max(){return new Mn(new va(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n,r){n===void 0?n=0:n>e.length&&Tn(),r===void 0?r=e.length-n:r>e.length-n&&Tn(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yy.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yy?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),s=n.get(i);if(a<s)return-1;if(a>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class gi extends yy{construct(e,n,r){return new gi(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Qt(gt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new gi(n)}static emptyPath(){return new gi([])}}const ise=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ls extends yy{construct(e,n,r){return new ls(e,n,r)}static isValidIdentifier(e){return ise.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ls.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ls(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Qt(gt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Qt(gt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Qt(gt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Qt(gt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ls(n)}static emptyPath(){return new ls([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.path=e}static fromPath(e){return new vn(gi.fromString(e))}static fromName(e){return new vn(gi.fromString(e).popFirst(5))}static empty(){return new vn(gi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gi.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vn(new gi(e.slice()))}}function ase(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Mn.fromTimestamp(r===1e9?new va(n+1,0):new va(n,r));return new yf(i,vn.empty(),e)}function sse(t){return new yf(t.readTime,t.key,-1)}class yf{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yf(Mn.min(),vn.empty(),-1)}static max(){return new yf(Mn.max(),vn.empty(),-1)}}function ose(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=vn.comparator(t.documentKey,e.documentKey),n!==0?n:br(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lse="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cse{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(t){if(t.code!==gt.FAILED_PRECONDITION||t.message!==lse)throw t;an("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Tn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new At((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof At?n:At.resolve(n)}catch(n){return At.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):At.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):At.reject(n)}static resolve(e){return new At((n,r)=>{n(e)})}static reject(e){return new At((n,r)=>{r(e)})}static waitFor(e){return new At((n,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&n()},l=>r(l))}),s=!0,a===i&&n()})}static or(e){let n=At.resolve(!1);for(const r of e)n=n.next(i=>i?At.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new At((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;n(e[u]).next(d=>{s[u]=d,++o,o===a&&r(s)},d=>i(d))}})}static doWhile(e,n){return new At((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function use(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jb(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}A4.oe=-1;function Q5(t){return t==null}function $2(t){return t===0&&1/t==-1/0}function dse(t){return typeof t=="number"&&Number.isInteger(t)&&!$2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function dp(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){this.comparator=e,this.root=n||os.EMPTY}insert(e,n){return new Oi(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,os.BLACK,null,null))}remove(e){return new Oi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,os.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lx(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lx(this.root,e,this.comparator,!0)}}class Lx{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class os{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??os.RED,this.left=i??os.EMPTY,this.right=a??os.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new os(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return os.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return os.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,os.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Tn();const e=this.left.check();if(e!==this.right.check())throw Tn();return e+(this.isRed()?0:1)}}os.EMPTY=null,os.RED=!0,os.BLACK=!1;os.EMPTY=new class{constructor(){this.size=0}get key(){throw Tn()}get value(){throw Tn()}get color(){throw Tn()}get left(){throw Tn()}get right(){throw Tn()}copy(e,n,r,i,a){return this}insert(e,n,r){return new os(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.comparator=e,this.data=new Oi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new oM(this.data.getIterator())}getIteratorFrom(e){return new oM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ds)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ds(this.comparator);return n.data=e,n}}class oM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.fields=e,e.sort(ls.comparator)}static empty(){return new rl([])}unionWith(e){let n=new ds(ls.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rl(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qm(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new yU("Invalid base64 string: "+a):a}}(e);return new ps(n)}static fromUint8Array(e){const n=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new ps(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return br(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ps.EMPTY_BYTE_STRING=new ps("");const fse=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bf(t){if(Fr(!!t),typeof t=="string"){let e=0;const n=fse.exec(t);if(Fr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ia(t.seconds),nanos:ia(t.nanos)}}function ia(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yh(t){return typeof t=="string"?ps.fromBase64String(t):ps.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function j4(t){const e=t.mapValue.fields.__previous_value__;return C4(e)?j4(e):e}function by(t){const e=bf(t.mapValue.fields.__local_write_time__.timestampValue);return new va(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hse{constructor(e,n,r,i,a,s,o,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u}}class xy{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xy("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof xy&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx={mapValue:{}};function Xh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?C4(t)?4:mse(t)?9007199254740991:pse(t)?10:11:Tn()}function du(t,e){if(t===e)return!0;const n=Xh(t);if(n!==Xh(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return by(t).isEqual(by(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=bf(i.timestampValue),o=bf(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Yh(i.bytesValue).isEqual(Yh(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return ia(i.geoPointValue.latitude)===ia(a.geoPointValue.latitude)&&ia(i.geoPointValue.longitude)===ia(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ia(i.integerValue)===ia(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=ia(i.doubleValue),o=ia(a.doubleValue);return s===o?$2(s)===$2(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Qm(t.arrayValue.values||[],e.arrayValue.values||[],du);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(sM(s)!==sM(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!du(s[l],o[l])))return!1;return!0}(t,e);default:return Tn()}}function wy(t,e){return(t.values||[]).find(n=>du(n,e))!==void 0}function Zm(t,e){if(t===e)return 0;const n=Xh(t),r=Xh(e);if(n!==r)return br(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return br(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=ia(a.integerValue||a.doubleValue),l=ia(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return lM(t.timestampValue,e.timestampValue);case 4:return lM(by(t),by(e));case 5:return br(t.stringValue,e.stringValue);case 6:return function(a,s){const o=Yh(a),l=Yh(s);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),l=s.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=br(o[u],l[u]);if(d!==0)return d}return br(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=br(ia(a.latitude),ia(s.latitude));return o!==0?o:br(ia(a.longitude),ia(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cM(t.arrayValue,e.arrayValue);case 10:return function(a,s){var o,l,u,d;const f=a.fields||{},p=s.fields||{},h=(o=f.value)===null||o===void 0?void 0:o.arrayValue,g=(l=p.value)===null||l===void 0?void 0:l.arrayValue,m=br(((u=h==null?void 0:h.values)===null||u===void 0?void 0:u.length)||0,((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0);return m!==0?m:cM(h,g)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===Fx.mapValue&&s===Fx.mapValue)return 0;if(a===Fx.mapValue)return 1;if(s===Fx.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=s.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=br(l[f],d[f]);if(p!==0)return p;const h=Zm(o[l[f]],u[d[f]]);if(h!==0)return h}return br(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Tn()}}function lM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return br(t,e);const n=bf(t),r=bf(e),i=br(n.seconds,r.seconds);return i!==0?i:br(n.nanos,r.nanos)}function cM(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Zm(n[i],r[i]);if(a)return a}return br(n.length,r.length)}function Jm(t){return DE(t)}function DE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=bf(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yh(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return vn.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=DE(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${DE(n.fields[s])}`;return i+"}"}(t.mapValue):Tn()}function uM(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function IE(t){return!!t&&"integerValue"in t}function E4(t){return!!t&&"arrayValue"in t}function dM(t){return!!t&&"nullValue"in t}function fM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function W1(t){return!!t&&"mapValue"in t}function pse(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function S0(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return dp(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=S0(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=S0(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mse(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.value=e}static empty(){return new vo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!W1(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=S0(n)}setAll(e){let n=ls.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=S0(s):i.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());W1(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return du(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];W1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){dp(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new vo(S0(this.value))}}function bU(t){const e=[];return dp(t.fields,(n,r)=>{const i=new ls([n]);if(W1(r)){const a=bU(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new rl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Fs(e,0,Mn.min(),Mn.min(),Mn.min(),vo.empty(),0)}static newFoundDocument(e,n,r,i){return new Fs(e,1,n,Mn.min(),r,i,0)}static newNoDocument(e,n){return new Fs(e,2,n,Mn.min(),Mn.min(),vo.empty(),0)}static newUnknownDocument(e,n){return new Fs(e,3,n,Mn.min(),Mn.min(),vo.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Mn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n){this.position=e,this.inclusive=n}}function hM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=vn.comparator(vn.fromName(s.referenceValue),n.key):r=Zm(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function pM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!du(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n="asc"){this.field=e,this.dir=n}}function gse(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xU=class{};class ga extends xU{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yse(e,n,r):n==="array-contains"?new wse(e,r):n==="in"?new Sse(e,r):n==="not-in"?new _se(e,r):n==="array-contains-any"?new Ase(e,r):new ga(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bse(e,r):new xse(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zm(n,this.value)):n!==null&&Xh(this.value)===Xh(n)&&this.matchesComparison(Zm(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Tn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cc extends xU{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Cc(e,n)}matches(e){return wU(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wU(t){return t.op==="and"}function SU(t){return vse(t)&&wU(t)}function vse(t){for(const e of t.filters)if(e instanceof Cc)return!1;return!0}function OE(t){if(t instanceof ga)return t.field.canonicalString()+t.op.toString()+Jm(t.value);if(SU(t))return t.filters.map(e=>OE(e)).join(",");{const e=t.filters.map(n=>OE(n)).join(",");return`${t.op}(${e})`}}function _U(t,e){return t instanceof ga?function(r,i){return i instanceof ga&&r.op===i.op&&r.field.isEqual(i.field)&&du(r.value,i.value)}(t,e):t instanceof Cc?function(r,i){return i instanceof Cc&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&_U(s,i.filters[o]),!0):!1}(t,e):void Tn()}function AU(t){return t instanceof ga?function(n){return`${n.field.canonicalString()} ${n.op} ${Jm(n.value)}`}(t):t instanceof Cc?function(n){return n.op.toString()+" {"+n.getFilters().map(AU).join(" ,")+"}"}(t):"Filter"}class yse extends ga{constructor(e,n,r){super(e,n,r),this.key=vn.fromName(r.referenceValue)}matches(e){const n=vn.comparator(e.key,this.key);return this.matchesComparison(n)}}class bse extends ga{constructor(e,n){super(e,"in",n),this.keys=CU("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xse extends ga{constructor(e,n){super(e,"not-in",n),this.keys=CU("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function CU(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>vn.fromName(r.referenceValue))}class wse extends ga{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return E4(n)&&wy(n.arrayValue,this.value)}}class Sse extends ga{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wy(this.value.arrayValue,n)}}class _se extends ga{constructor(e,n){super(e,"not-in",n)}matches(e){if(wy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wy(this.value.arrayValue,n)}}class Ase extends ga{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!E4(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wy(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cse{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.ue=null}}function mM(t,e=null,n=[],r=[],i=null,a=null,s=null){return new Cse(t,e,n,r,i,a,s)}function N4(t){const e=Ln(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>OE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Q5(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Jm(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Jm(r)).join(",")),e.ue=n}return e.ue}function P4(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gse(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_U(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pM(t.startAt,e.startAt)&&pM(t.endAt,e.endAt)}function ME(t){return vn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jse(t,e,n,r,i,a,s,o){return new Eb(t,e,n,r,i,a,s,o)}function k4(t){return new Eb(t)}function gM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jU(t){return t.collectionGroup!==null}function _0(t){const e=Ln(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new ds(ls.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new V2(a,r))}),n.has(ls.keyField().canonicalString())||e.ce.push(new V2(ls.keyField(),r))}return e.ce}function au(t){const e=Ln(t);return e.le||(e.le=Ese(e,_0(t))),e.le}function Ese(t,e){if(t.limitType==="F")return mM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new V2(i.field,a)});const n=t.endAt?new B2(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new B2(t.startAt.position,t.startAt.inclusive):null;return mM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function RE(t,e){const n=t.filters.concat([e]);return new Eb(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function LE(t,e,n){return new Eb(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Z5(t,e){return P4(au(t),au(e))&&t.limitType===e.limitType}function EU(t){return`${N4(au(t))}|lt:${t.limitType}`}function Vp(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AU(i)).join(", ")}]`),Q5(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Jm(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Jm(i)).join(",")),`Target(${r})`}(au(t))}; limitType=${t.limitType})`}function J5(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):vn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of _0(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,o,l){const u=hM(s,o,l);return s.inclusive?u<=0:u<0}(r.startAt,_0(r),i)||r.endAt&&!function(s,o,l){const u=hM(s,o,l);return s.inclusive?u>=0:u>0}(r.endAt,_0(r),i))}(t,e)}function Nse(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NU(t){return(e,n)=>{let r=!1;for(const i of _0(t)){const a=Pse(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Pse(t,e,n){const r=t.field.isKeyField()?vn.comparator(e.key,n.key):function(a,s,o){const l=s.data.field(a),u=o.data.field(a);return l!==null&&u!==null?Zm(l,u):Tn()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Tn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){dp(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return vU(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kse=new Oi(vn.comparator);function id(){return kse}const PU=new Oi(vn.comparator);function a0(...t){let e=PU;for(const n of t)e=e.insert(n.key,n);return e}function kU(t){let e=PU;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sh(){return A0()}function TU(){return A0()}function A0(){return new Qg(t=>t.toString(),(t,e)=>t.isEqual(e))}const Tse=new Oi(vn.comparator),Dse=new ds(vn.comparator);function tr(...t){let e=Dse;for(const n of t)e=e.add(n);return e}const Ise=new ds(br);function Ose(){return Ise}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$2(e)?"-0":e}}function DU(t){return{integerValue:""+t}}function Mse(t,e){return dse(e)?DU(e):T4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this._=void 0}}function Rse(t,e,n){return t instanceof Sy?function(i,a){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&C4(a)&&(a=j4(a)),a&&(s.fields.__previous_value__=a),{mapValue:s}}(n,e):t instanceof _y?OU(t,e):t instanceof Ay?MU(t,e):function(i,a){const s=IU(i,a),o=vM(s)+vM(i.Pe);return IE(s)&&IE(i.Pe)?DU(o):T4(i.serializer,o)}(t,e)}function Lse(t,e,n){return t instanceof _y?OU(t,e):t instanceof Ay?MU(t,e):n}function IU(t,e){return t instanceof U2?function(r){return IE(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Sy extends eS{}class _y extends eS{constructor(e){super(),this.elements=e}}function OU(t,e){const n=RU(e);for(const r of t.elements)n.some(i=>du(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ay extends eS{constructor(e){super(),this.elements=e}}function MU(t,e){let n=RU(e);for(const r of t.elements)n=n.filter(i=>!du(i,r));return{arrayValue:{values:n}}}class U2 extends eS{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function vM(t){return ia(t.integerValue||t.doubleValue)}function RU(t){return E4(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fse{constructor(e,n){this.field=e,this.transform=n}}function zse(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof _y&&i instanceof _y||r instanceof Ay&&i instanceof Ay?Qm(r.elements,i.elements,du):r instanceof U2&&i instanceof U2?du(r.Pe,i.Pe):r instanceof Sy&&i instanceof Sy}(t.transform,e.transform)}class $se{constructor(e,n){this.version=e,this.transformResults=n}}class sl{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sl}static exists(e){return new sl(void 0,e)}static updateTime(e){return new sl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function H1(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tS{}function LU(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nS(t.key,sl.none()):new Nb(t.key,t.data,sl.none());{const n=t.data,r=vo.empty();let i=new ds(ls.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Df(t.key,r,new rl(i.toArray()),sl.none())}}function Bse(t,e,n){t instanceof Nb?function(i,a,s){const o=i.value.clone(),l=bM(i.fieldTransforms,a,s.transformResults);o.setAll(l),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Df?function(i,a,s){if(!H1(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=bM(i.fieldTransforms,a,s.transformResults),l=a.data;l.setAll(FU(i)),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function C0(t,e,n,r){return t instanceof Nb?function(a,s,o,l){if(!H1(a.precondition,s))return o;const u=a.value.clone(),d=xM(a.fieldTransforms,l,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Df?function(a,s,o,l){if(!H1(a.precondition,s))return o;const u=xM(a.fieldTransforms,l,s),d=s.data;return d.setAll(FU(a)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(a,s,o){return H1(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function Vse(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=IU(r.transform,i||null);a!=null&&(n===null&&(n=vo.empty()),n.set(r.field,a))}return n||null}function yM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qm(r,i,(a,s)=>zse(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nb extends tS{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Df extends tS{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function FU(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bM(t,e,n){const r=new Map;Fr(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,Lse(s,o,n[i]))}return r}function xM(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,Rse(a,s,e))}return r}class nS extends tS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Use extends tS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wse{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Bse(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=C0(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=C0(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=TU();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const l=LU(s,o);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Mn.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),tr())}isEqual(e){return this.batchId===e.batchId&&Qm(this.mutations,e.mutations,(n,r)=>yM(n,r))&&Qm(this.baseMutations,e.baseMutations,(n,r)=>yM(n,r))}}class D4{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Fr(e.mutations.length===r.length);let i=function(){return Tse}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new D4(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hse{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qse{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ha,ur;function Kse(t){switch(t){default:return Tn();case gt.CANCELLED:case gt.UNKNOWN:case gt.DEADLINE_EXCEEDED:case gt.RESOURCE_EXHAUSTED:case gt.INTERNAL:case gt.UNAVAILABLE:case gt.UNAUTHENTICATED:return!1;case gt.INVALID_ARGUMENT:case gt.NOT_FOUND:case gt.ALREADY_EXISTS:case gt.PERMISSION_DENIED:case gt.FAILED_PRECONDITION:case gt.ABORTED:case gt.OUT_OF_RANGE:case gt.UNIMPLEMENTED:case gt.DATA_LOSS:return!0}}function zU(t){if(t===void 0)return rd("GRPC error has no .code"),gt.UNKNOWN;switch(t){case ha.OK:return gt.OK;case ha.CANCELLED:return gt.CANCELLED;case ha.UNKNOWN:return gt.UNKNOWN;case ha.DEADLINE_EXCEEDED:return gt.DEADLINE_EXCEEDED;case ha.RESOURCE_EXHAUSTED:return gt.RESOURCE_EXHAUSTED;case ha.INTERNAL:return gt.INTERNAL;case ha.UNAVAILABLE:return gt.UNAVAILABLE;case ha.UNAUTHENTICATED:return gt.UNAUTHENTICATED;case ha.INVALID_ARGUMENT:return gt.INVALID_ARGUMENT;case ha.NOT_FOUND:return gt.NOT_FOUND;case ha.ALREADY_EXISTS:return gt.ALREADY_EXISTS;case ha.PERMISSION_DENIED:return gt.PERMISSION_DENIED;case ha.FAILED_PRECONDITION:return gt.FAILED_PRECONDITION;case ha.ABORTED:return gt.ABORTED;case ha.OUT_OF_RANGE:return gt.OUT_OF_RANGE;case ha.UNIMPLEMENTED:return gt.UNIMPLEMENTED;case ha.DATA_LOSS:return gt.DATA_LOSS;default:return Tn()}}(ur=ha||(ha={}))[ur.OK=0]="OK",ur[ur.CANCELLED=1]="CANCELLED",ur[ur.UNKNOWN=2]="UNKNOWN",ur[ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ur[ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ur[ur.NOT_FOUND=5]="NOT_FOUND",ur[ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",ur[ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",ur[ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",ur[ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ur[ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ur[ur.ABORTED=10]="ABORTED",ur[ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",ur[ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",ur[ur.INTERNAL=13]="INTERNAL",ur[ur.UNAVAILABLE=14]="UNAVAILABLE",ur[ur.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gse(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yse=new Oh([4294967295,4294967295],0);function wM(t){const e=Gse().encode(t),n=new uU;return n.update(e),new Uint8Array(n.digest())}function SM(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Oh([n,r],0),new Oh([i,a],0)]}class I4{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new s0(`Invalid padding: ${n}`);if(r<0)throw new s0(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new s0(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new s0(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Oh.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Oh.fromNumber(r)));return i.compare(Yse)===1&&(i=new Oh([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=wM(e),[r,i]=SM(n);for(let a=0;a<this.hashCount;a++){const s=this.Ee(r,i,a);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new I4(a,i,n);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.Ie===0)return;const n=wM(e),[r,i]=SM(n);for(let a=0;a<this.hashCount;a++){const s=this.Ee(r,i,a);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class s0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Pb.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rS(Mn.min(),i,new Oi(br),id(),tr())}}class Pb{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pb(r,n,tr(),tr(),tr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class $U{constructor(e,n){this.targetId=e,this.me=n}}class BU{constructor(e,n,r=ps.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class _M{constructor(){this.fe=0,this.ge=CM(),this.pe=ps.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=tr(),n=tr(),r=tr();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Tn()}}),new Pb(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=CM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Xse{constructor(e){this.Le=e,this.Be=new Map,this.ke=id(),this.qe=AM(),this.Qe=new Oi(br)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Tn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(ME(a))if(r===0){const s=new vn(a.path);this.Ue(n,s,Fs.newNoDocument(s,Mn.min()))}else Fr(r===1);else{const s=this.Ye(n);if(s!==r){const o=this.Ze(e),l=o?this.Xe(o,e,s):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=Yh(r).toUint8Array()}catch(l){if(l instanceof yU)return vy("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new I4(s,i,a)}catch(l){return vy(l instanceof s0?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const s=this.Le.tt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,s)=>{const o=this.Je(s);if(o){if(a.current&&ME(o.target)){const l=new vn(o.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,Fs.newNoDocument(l,e))}a.be&&(n.set(s,a.ve()),a.Ce())}});let r=tr();this.qe.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ke.forEach((a,s)=>s.setReadTime(e));const i=new rS(e,n,this.Qe,this.ke,r);return this.ke=id(),this.qe=AM(),this.Qe=new Oi(br),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new _M,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ds(br),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||an("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _M),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function AM(){return new Oi(vn.comparator)}function CM(){return new Oi(vn.comparator)}const Qse={asc:"ASCENDING",desc:"DESCENDING"},Zse={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jse={and:"AND",or:"OR"};class eoe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function FE(t,e){return t.useProto3Json||Q5(e)?e:{value:e}}function W2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VU(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function toe(t,e){return W2(t,e.toTimestamp())}function su(t){return Fr(!!t),Mn.fromTimestamp(function(n){const r=bf(n);return new va(r.seconds,r.nanos)}(t))}function O4(t,e){return zE(t,e).canonicalString()}function zE(t,e){const n=function(i){return new gi(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function UU(t){const e=gi.fromString(t);return Fr(GU(e)),e}function $E(t,e){return O4(t.databaseId,e.path)}function IA(t,e){const n=UU(e);if(n.get(1)!==t.databaseId.projectId)throw new Qt(gt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Qt(gt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new vn(HU(n))}function WU(t,e){return O4(t.databaseId,e)}function noe(t){const e=UU(t);return e.length===4?gi.emptyPath():HU(e)}function BE(t){return new gi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HU(t){return Fr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function jM(t,e,n){return{name:$E(t,e),fields:n.value.mapValue.fields}}function roe(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Tn()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(Fr(d===void 0||typeof d=="string"),ps.fromBase64String(d||"")):(Fr(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ps.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(u){const d=u.code===void 0?gt.UNKNOWN:zU(u.code);return new Qt(d,u.message||"")}(s);n=new BU(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=IA(t,r.document.name),a=su(r.document.updateTime),s=r.document.createTime?su(r.document.createTime):Mn.min(),o=new vo({mapValue:{fields:r.document.fields}}),l=Fs.newFoundDocument(i,a,s,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new q1(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=IA(t,r.document),a=r.readTime?su(r.readTime):Mn.min(),s=Fs.newNoDocument(i,a),o=r.removedTargetIds||[];n=new q1([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=IA(t,r.document),a=r.removedTargetIds||[];n=new q1([],a,i,null)}else{if(!("filter"in e))return Tn();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new qse(i,a),o=r.targetId;n=new $U(o,s)}}return n}function ioe(t,e){let n;if(e instanceof Nb)n={update:jM(t,e.key,e.value)};else if(e instanceof nS)n={delete:$E(t,e.key)};else if(e instanceof Df)n={update:jM(t,e.key,e.data),updateMask:hoe(e.fieldMask)};else{if(!(e instanceof Use))return Tn();n={verify:$E(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof Sy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof _y)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ay)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof U2)return{fieldPath:s.field.canonicalString(),increment:o.Pe};throw Tn()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:toe(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Tn()}(t,e.precondition)),n}function aoe(t,e){return t&&t.length>0?(Fr(e!==void 0),t.map(n=>function(i,a){let s=i.updateTime?su(i.updateTime):su(a);return s.isEqual(Mn.min())&&(s=su(a)),new $se(s,i.transformResults||[])}(n,e))):[]}function soe(t,e){return{documents:[WU(t,e.path)]}}function ooe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WU(t,i);const a=function(u){if(u.length!==0)return KU(Cc.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const s=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:Up(p.field),direction:uoe(p.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=FE(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function loe(t){let e=noe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Fr(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(f){const p=qU(f);return p instanceof Cc&&SU(p)?p.getFilters():[p]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(p=>function(g){return new V2(Wp(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(n.orderBy));let o=null;n.limit&&(o=function(f){let p;return p=typeof f=="object"?f.value:f,Q5(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,h=f.values||[];return new B2(h,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,h=f.values||[];return new B2(h,p)}(n.endAt)),jse(e,i,s,a,o,"F",l,u)}function coe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Tn()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qU(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wp(n.unaryFilter.field);return ga.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wp(n.unaryFilter.field);return ga.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Wp(n.unaryFilter.field);return ga.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Wp(n.unaryFilter.field);return ga.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Tn()}}(t):t.fieldFilter!==void 0?function(n){return ga.create(Wp(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Tn()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cc.create(n.compositeFilter.filters.map(r=>qU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Tn()}}(n.compositeFilter.op))}(t):Tn()}function uoe(t){return Qse[t]}function doe(t){return Zse[t]}function foe(t){return Jse[t]}function Up(t){return{fieldPath:t.canonicalString()}}function Wp(t){return ls.fromServerFormat(t.fieldPath)}function KU(t){return t instanceof ga?function(n){if(n.op==="=="){if(fM(n.value))return{unaryFilter:{field:Up(n.field),op:"IS_NAN"}};if(dM(n.value))return{unaryFilter:{field:Up(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fM(n.value))return{unaryFilter:{field:Up(n.field),op:"IS_NOT_NAN"}};if(dM(n.value))return{unaryFilter:{field:Up(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Up(n.field),op:doe(n.op),value:n.value}}}(t):t instanceof Cc?function(n){const r=n.getFilters().map(i=>KU(i));return r.length===1?r[0]:{compositeFilter:{op:foe(n.op),filters:r}}}(t):Tn()}function hoe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GU(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r,i,a=Mn.min(),s=Mn.min(),o=ps.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Kd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class poe{constructor(e){this.ct=e}}function moe(t){const e=loe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?LE(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class goe{constructor(){this.un=new voe}addToCollectionParentIndex(e,n){return this.un.add(n),At.resolve()}getCollectionParents(e,n){return At.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return At.resolve()}deleteFieldIndex(e,n){return At.resolve()}deleteAllFieldIndexes(e){return At.resolve()}createTargetIndexes(e,n){return At.resolve()}getDocumentsMatchingTarget(e,n){return At.resolve(null)}getIndexType(e,n){return At.resolve(0)}getFieldIndexes(e,n){return At.resolve([])}getNextCollectionGroupToUpdate(e){return At.resolve(null)}getMinOffset(e,n){return At.resolve(yf.min())}getMinOffsetFromCollectionGroup(e,n){return At.resolve(yf.min())}updateCollectionGroup(e,n,r){return At.resolve()}updateIndexEntries(e,n){return At.resolve()}}class voe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ds(gi.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ds(gi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new eg(0)}static kn(){return new eg(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yoe{constructor(){this.changes=new Qg(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fs.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?At.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class boe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xoe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&C0(r.mutation,i,rl.empty(),va.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,tr()).next(()=>r))}getLocalViewOfDocuments(e,n,r=tr()){const i=Sh();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let s=a0();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Sh();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,tr()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{n.set(s,o)})})}computeViews(e,n,r,i){let a=id();const s=A0(),o=function(){return A0()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Df)?a=a.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),C0(d.mutation,u,d.mutation.getFieldMask(),va.now())):s.set(u.key,rl.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var f;return o.set(u,new boe(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,n){const r=A0();let i=new Oi((s,o)=>s-o),a=tr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const o of s)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||rl.empty();d=o.applyToLocalView(u,d),r.set(l,d);const f=(i.get(o.batchId)||tr()).add(l);i=i.insert(o.batchId,f)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,f=TU();d.forEach(p=>{if(!a.has(p)){const h=LU(n.get(p),r.get(p));h!==null&&f.set(p,h),a=a.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return At.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return vn.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):At.resolve(Sh());let o=-1,l=a;return s.next(u=>At.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),a.get(d)?At.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,tr())).next(d=>({batchId:o,changes:kU(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new vn(n)).next(r=>{let i=a0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=a0();return this.indexManager.getCollectionParents(e,a).next(o=>At.forEach(o,l=>{const u=function(f,p){return new Eb(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,p)=>{s=s.insert(f,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(s=>{a.forEach((l,u)=>{const d=u.getKey();s.get(d)===null&&(s=s.insert(d,Fs.newInvalidDocument(d)))});let o=a0();return s.forEach((l,u)=>{const d=a.get(l);d!==void 0&&C0(d.mutation,u,rl.empty(),va.now()),J5(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class woe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return At.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:su(i.createTime)}}(n)),At.resolve()}getNamedQuery(e,n){return At.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:moe(i.bundledQuery),readTime:su(i.readTime)}}(n)),At.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Soe{constructor(){this.overlays=new Oi(vn.comparator),this.Ir=new Map}getOverlay(e,n){return At.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Sh();return At.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.ht(e,n,a)}),At.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),At.resolve()}getOverlaysForCollection(e,n,r){const i=Sh(),a=n.length+1,s=new vn(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>r&&i.set(l.getKey(),l)}return At.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Oi((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=Sh(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Sh(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=i)););return At.resolve(o)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Hse(n,r));let a=this.Ir.get(n);a===void 0&&(a=tr(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _oe{constructor(){this.sessionToken=ps.EMPTY_BYTE_STRING}getSessionToken(e){return At.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,At.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.Tr=new ds($a.Er),this.dr=new ds($a.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new $a(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new $a(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new vn(new gi([])),r=new $a(n,e),i=new $a(n,e+1),a=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),a.push(s.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new vn(new gi([])),r=new $a(n,e),i=new $a(n,e+1);let a=tr();return this.dr.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const n=new $a(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $a{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return vn.comparator(e.key,n.key)||br(e.wr,n.wr)}static Ar(e,n){return br(e.wr,n.wr)||vn.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aoe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ds($a.Er)}checkEmpty(e){return At.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Wse(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.br=this.br.add(new $a(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return At.resolve(s)}lookupMutationBatch(e,n){return At.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return At.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return At.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return At.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $a(n,0),i=new $a(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],s=>{const o=this.Dr(s.wr);a.push(o)}),At.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ds(br);return n.forEach(i=>{const a=new $a(i,0),s=new $a(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,s],o=>{r=r.add(o.wr)})}),At.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;vn.isDocumentKey(a)||(a=a.child(""));const s=new $a(new vn(a),0);let o=new ds(br);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.wr)),!0)},s),At.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Fr(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return At.forEach(n.mutations,i=>{const a=new $a(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new $a(n,0),i=this.br.firstAfterOrEqual(r);return At.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,At.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Coe{constructor(e){this.Mr=e,this.docs=function(){return new Oi(vn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return At.resolve(r?r.document.mutableCopy():Fs.newInvalidDocument(n))}getEntries(e,n){let r=id();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Fs.newInvalidDocument(i))}),At.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=id();const s=n.path,o=new vn(s.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||ose(sse(d),r)<=0||(i.has(d.key)||J5(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return At.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Tn()}Or(e,n){return At.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new joe(this)}getSize(e){return At.resolve(this.size)}}class joe extends yoe{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),At.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eoe{constructor(e){this.persistence=e,this.Nr=new Qg(n=>N4(n),P4),this.lastRemoteSnapshotVersion=Mn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new M4,this.targetCount=0,this.kr=eg.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),At.resolve()}getLastRemoteSnapshotVersion(e){return At.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return At.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),At.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),At.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new eg(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,At.resolve()}updateTargetData(e,n){return this.Kn(n),At.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,At.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),At.waitFor(a).next(()=>i)}getTargetCount(e){return At.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return At.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),At.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),At.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),At.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return At.resolve(r)}containsKey(e,n){return At.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Noe{constructor(e,n){this.qr={},this.overlays={},this.Qr=new A4(0),this.Kr=!1,this.Kr=!0,this.$r=new _oe,this.referenceDelegate=e(this),this.Ur=new Eoe(this),this.indexManager=new goe,this.remoteDocumentCache=function(i){return new Coe(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new poe(n),this.Gr=new woe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Soe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Aoe(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){an("MemoryPersistence","Starting transaction:",e);const i=new Poe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return At.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Poe extends cse{constructor(e){super(),this.currentSequenceNumber=e}}class R4{constructor(e){this.persistence=e,this.Jr=new M4,this.Yr=null}static Zr(e){return new R4(e)}get Xr(){if(this.Yr)return this.Yr;throw Tn()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),At.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),At.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),At.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return At.forEach(this.Xr,r=>{const i=vn.fromPath(r);return this.ei(e,i).next(a=>{a||n.removeEntry(i,Mn.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return At.or([()=>At.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=tr(),i=tr();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new L4(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class koe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Toe{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Sre()?8:use(Eo())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.Zi(e,n,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new koe;return this.Xi(e,n,s).next(o=>{if(a.result=o,this.zi)return this.es(e,n,s,o.size)})}).next(()=>a.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Rv()<=ir.DEBUG&&an("QueryEngine","SDK will not create cache indexes for query:",Vp(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),At.resolve()):(Rv()<=ir.DEBUG&&an("QueryEngine","Query:",Vp(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Rv()<=ir.DEBUG&&an("QueryEngine","The SDK decides to create cache indexes for query:",Vp(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,au(n))):At.resolve())}Yi(e,n){if(gM(n))return At.resolve(null);let r=au(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=LE(n,null,"F"),r=au(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=tr(...a);return this.Ji.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,o);return this.ns(n,u,s,l.readTime)?this.Yi(e,LE(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return gM(n)||i.isEqual(Mn.min())?At.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const s=this.ts(n,a);return this.ns(n,s,r,i)?At.resolve(null):(Rv()<=ir.DEBUG&&an("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vp(n)),this.rs(e,s,n,ase(i,-1)).next(o=>o))})}ts(e,n){let r=new ds(NU(e));return n.forEach((i,a)=>{J5(e,a)&&(r=r.add(a))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return Rv()<=ir.DEBUG&&an("QueryEngine","Using full collection scan to execute query:",Vp(n)),this.Ji.getDocumentsMatchingQuery(e,n,yf.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Doe{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Oi(br),this._s=new Qg(a=>N4(a),P4),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xoe(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Ioe(t,e,n,r){return new Doe(t,e,n,r)}async function YU(t,e){const n=Ln(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let l=tr();for(const u of i){s.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of a){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:o}))})})}function Ooe(t,e){const n=Ln(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const f=u.batch,p=f.keys();let h=At.resolve();return p.forEach(g=>{h=h.next(()=>d.getEntry(l,g)).next(m=>{const v=u.docVersions.get(g);Fr(v!==null),m.version.compareTo(v)<0&&(f.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),d.addEntry(m)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=tr();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XU(t){const e=Ln(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Moe(t,e){const n=Ln(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach((d,f)=>{const p=i.get(f);if(!p)return;o.push(n.Ur.removeMatchingKeys(a,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(a,d.addedDocuments,f)));let h=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?h=h.withResumeToken(ps.EMPTY_BYTE_STRING,Mn.min()).withLastLimboFreeSnapshotVersion(Mn.min()):d.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(d.resumeToken,r)),i=i.insert(f,h),function(m,v,y){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,h,d)&&o.push(n.Ur.updateTargetData(a,h))});let l=id(),u=tr();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),o.push(Roe(a,s,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(Mn.min())){const d=n.Ur.getLastRemoteSnapshotVersion(a).next(f=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(d)}return At.waitFor(o).next(()=>s.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(n.os=i,a))}function Roe(t,e,n){let r=tr(),i=tr();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let s=id();return n.forEach((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Mn.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):an("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function Loe(t,e){const n=Ln(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Foe(t,e){const n=Ln(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(a=>a?(i=a,At.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Kd(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function VE(t,e,n){const r=Ln(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!jb(s))throw s;an("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function EM(t,e,n){const r=Ln(t);let i=Mn.min(),a=tr();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,d){const f=Ln(l),p=f._s.get(d);return p!==void 0?At.resolve(f.os.get(p)):f.Ur.getTargetData(u,d)}(r,s,au(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:Mn.min(),n?a:tr())).next(o=>(zoe(r,Nse(e),o),{documents:o,Ts:a})))}function zoe(t,e,n){let r=t.us.get(e)||Mn.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class NM{constructor(){this.activeTargetIds=Ose()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $oe{constructor(){this.so=new NM,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new NM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Boe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){an("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){an("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zx=null;function OA(){return zx===null?zx=function(){return 268435456+Math.round(2147483648*Math.random())}():zx++,"0x"+zx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Voe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uoe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="WebChannelConnection";class Woe extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,s){const o=OA(),l=this.xo(n,r.toUriEncodedString());an("RestConnection",`Sending RPC '${n}' ${o}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,s),this.No(n,l,u,i).then(d=>(an("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw vy("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,a,s,o){return this.Mo(n,r,i,a,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xg}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>n[s]=a),i&&i.headers.forEach((a,s)=>n[s]=a)}xo(n,r){const i=Voe[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=OA();return new Promise((s,o)=>{const l=new dU;l.setWithCredentials(!0),l.listenOnce(fU.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case U1.NO_ERROR:const d=l.getResponseJson();an(Ps,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),s(d);break;case U1.TIMEOUT:an(Ps,`RPC '${e}' ${a} timed out`),o(new Qt(gt.DEADLINE_EXCEEDED,"Request time out"));break;case U1.HTTP_ERROR:const f=l.getStatus();if(an(Ps,`RPC '${e}' ${a} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const h=p==null?void 0:p.error;if(h&&h.status&&h.message){const g=function(v){const y=v.toLowerCase().replace(/_/g,"-");return Object.values(gt).indexOf(y)>=0?y:gt.UNKNOWN}(h.status);o(new Qt(g,h.message))}else o(new Qt(gt.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Qt(gt.UNAVAILABLE,"Connection failed."));break;default:Tn()}}finally{an(Ps,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(i);an(Ps,`RPC '${e}' ${a} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=OA(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=mU(),o=pU(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=a.join("");an(Ps,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=s.createWebChannel(d,l);let p=!1,h=!1;const g=new Uoe({Io:v=>{h?an(Ps,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(p||(an(Ps,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),an(Ps,`RPC '${e}' stream ${i} sending:`,v),f.send(v))},To:()=>f.close()}),m=(v,y,b)=>{v.listen(y,S=>{try{b(S)}catch(A){setTimeout(()=>{throw A},0)}})};return m(f,i0.EventType.OPEN,()=>{h||(an(Ps,`RPC '${e}' stream ${i} transport opened.`),g.yo())}),m(f,i0.EventType.CLOSE,()=>{h||(h=!0,an(Ps,`RPC '${e}' stream ${i} transport closed`),g.So())}),m(f,i0.EventType.ERROR,v=>{h||(h=!0,vy(Ps,`RPC '${e}' stream ${i} transport errored:`,v),g.So(new Qt(gt.UNAVAILABLE,"The operation could not be completed")))}),m(f,i0.EventType.MESSAGE,v=>{var y;if(!h){const b=v.data[0];Fr(!!b);const S=b,A=S.error||((y=S[0])===null||y===void 0?void 0:y.error);if(A){an(Ps,`RPC '${e}' stream ${i} received error:`,A);const C=A.status;let D=function(P){const O=ha[P];if(O!==void 0)return zU(O)}(C),j=A.message;D===void 0&&(D=gt.INTERNAL,j="Unknown error status: "+C+" with message "+A.message),h=!0,g.So(new Qt(D,j)),f.close()}else an(Ps,`RPC '${e}' stream ${i} received:`,b),g.bo(b)}}),m(o,hU.STAT_EVENT,v=>{v.stat===TE.PROXY?an(Ps,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===TE.NOPROXY&&an(Ps,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function MA(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t){return new eoe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&an("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e,n,r,i,a,s,o,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new QU(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===gt.RESOURCE_EXHAUSTED?(rd(n.toString()),rd("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===gt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Qt(gt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return an("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(an("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hoe extends ZU{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=roe(this.serializer,e),r=function(a){if(!("targetChange"in a))return Mn.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Mn.min():s.readTime?su(s.readTime):Mn.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=BE(this.serializer),n.addTarget=function(a,s){let o;const l=s.target;if(o=ME(l)?{documents:soe(a,l)}:{query:ooe(a,l)._t},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=VU(a,s.resumeToken);const u=FE(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(Mn.min())>0){o.readTime=W2(a,s.snapshotVersion.toTimestamp());const u=FE(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=coe(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=BE(this.serializer),n.removeTarget=e,this.a_(n)}}class qoe extends ZU{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Fr(!!e.streamToken),this.lastStreamToken=e.streamToken,Fr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=aoe(e.writeResults,e.commitTime),r=su(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=BE(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ioe(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Koe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Qt(gt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Mo(e,zE(n,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Qt(gt.UNKNOWN,a.toString())})}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Lo(e,zE(n,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Qt(gt.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Goe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rd(n),this.D_=!1):an("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yoe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(s=>{r.enqueueAndForget(async()=>{fp(this)&&(an("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Ln(l);u.L_.add(4),await kb(u),u.q_.set("Unknown"),u.L_.delete(4),await aS(u)}(this))})}),this.q_=new Goe(r,i)}}async function aS(t){if(fp(t))for(const e of t.B_)await e(!0)}async function kb(t){for(const e of t.B_)await e(!1)}function JU(t,e){const n=Ln(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),B4(n)?$4(n):Zg(n).r_()&&z4(n,e))}function F4(t,e){const n=Ln(t),r=Zg(n);n.N_.delete(e),r.r_()&&eW(n,e),n.N_.size===0&&(r.r_()?r.o_():fp(n)&&n.q_.set("Unknown"))}function z4(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Mn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zg(t).A_(e)}function eW(t,e){t.Q_.xe(e),Zg(t).R_(e)}function $4(t){t.Q_=new Xse({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Zg(t).start(),t.q_.v_()}function B4(t){return fp(t)&&!Zg(t).n_()&&t.N_.size>0}function fp(t){return Ln(t).L_.size===0}function tW(t){t.Q_=void 0}async function Xoe(t){t.q_.set("Online")}async function Qoe(t){t.N_.forEach((e,n)=>{z4(t,e)})}async function Zoe(t,e){tW(t),B4(t)?(t.q_.M_(e),$4(t)):t.q_.set("Unknown")}async function Joe(t,e,n){if(t.q_.set("Online"),e instanceof BU&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.N_.delete(o),i.Q_.removeTarget(o))}(t,e)}catch(r){an("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await H2(t,r)}else if(e instanceof q1?t.Q_.Ke(e):e instanceof $U?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Mn.min()))try{const r=await XU(t.localStore);n.compareTo(r)>=0&&await function(a,s){const o=a.Q_.rt(s);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach((l,u)=>{const d=a.N_.get(l);if(!d)return;a.N_.set(l,d.withResumeToken(ps.EMPTY_BYTE_STRING,d.snapshotVersion)),eW(a,l);const f=new Kd(d.target,l,u,d.sequenceNumber);z4(a,f)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){an("RemoteStore","Failed to raise snapshot:",r),await H2(t,r)}}async function H2(t,e,n){if(!jb(e))throw e;t.L_.add(1),await kb(t),t.q_.set("Offline"),n||(n=()=>XU(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{an("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await aS(t)})}function nW(t,e){return e().catch(n=>H2(t,n,e))}async function sS(t){const e=Ln(t),n=xf(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ele(e);)try{const i=await Loe(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,tle(e,i)}catch(i){await H2(e,i)}rW(e)&&iW(e)}function ele(t){return fp(t)&&t.O_.length<10}function tle(t,e){t.O_.push(e);const n=xf(t);n.r_()&&n.V_&&n.m_(e.mutations)}function rW(t){return fp(t)&&!xf(t).n_()&&t.O_.length>0}function iW(t){xf(t).start()}async function nle(t){xf(t).p_()}async function rle(t){const e=xf(t);for(const n of t.O_)e.m_(n.mutations)}async function ile(t,e,n){const r=t.O_.shift(),i=D4.from(r,e,n);await nW(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await sS(t)}async function ale(t,e){e&&xf(t).V_&&await async function(r,i){if(function(s){return Kse(s)&&s!==gt.ABORTED}(i.code)){const a=r.O_.shift();xf(r).s_(),await nW(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await sS(r)}}(t,e),rW(t)&&iW(t)}async function kM(t,e){const n=Ln(t);n.asyncQueue.verifyOperationInProgress(),an("RemoteStore","RemoteStore received new credentials");const r=fp(n);n.L_.add(3),await kb(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await aS(n)}async function sle(t,e){const n=Ln(t);e?(n.L_.delete(2),await aS(n)):e||(n.L_.add(2),await kb(n),n.q_.set("Unknown"))}function Zg(t){return t.K_||(t.K_=function(n,r,i){const a=Ln(n);return a.w_(),new Hoe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Xoe.bind(null,t),Ro:Qoe.bind(null,t),mo:Zoe.bind(null,t),d_:Joe.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),B4(t)?$4(t):t.q_.set("Unknown")):(await t.K_.stop(),tW(t))})),t.K_}function xf(t){return t.U_||(t.U_=function(n,r,i){const a=Ln(n);return a.w_(),new qoe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nle.bind(null,t),mo:ale.bind(null,t),f_:rle.bind(null,t),g_:ile.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await sS(t)):(await t.U_.stop(),t.O_.length>0&&(an("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Mh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new V4(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qt(gt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U4(t,e){if(rd("AsyncQueue",`${e}: ${t}`),jb(t))return new Qt(gt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e){this.comparator=e?(n,r)=>e(n,r)||vn.comparator(n.key,r.key):(n,r)=>vn.comparator(n.key,r.key),this.keyedMap=a0(),this.sortedSet=new Oi(this.comparator)}static emptySet(e){return new Pm(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.W_=new Oi(vn.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Tn():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class tg{constructor(e,n,r,i,a,s,o,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new tg(e,n,Pm.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Z5(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ole{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class lle{constructor(){this.queries=DM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ln(n),a=i.queries;i.queries=DM(),a.forEach((s,o)=>{for(const l of o.j_)l.onError(r)})})(this,new Qt(gt.ABORTED,"Firestore shutting down"))}}function DM(){return new Qg(t=>EU(t),Z5)}async function cle(t,e){const n=Ln(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new ole,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=U4(s,`Initialization of query '${Vp(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&W4(n)}async function ule(t,e){const n=Ln(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.j_.indexOf(e);s>=0&&(a.j_.splice(s,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dle(t,e){const n=Ln(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.j_)o.X_(i)&&(r=!0);s.z_=i}}r&&W4(n)}function fle(t,e,n){const r=Ln(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function W4(t){t.Y_.forEach(e=>{e.next()})}var UE,IM;(IM=UE||(UE={})).ea="default",IM.Cache="cache";class hle{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new tg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=tg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==UE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(e){this.key=e}}class sW{constructor(e){this.key=e}}class ple{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=tr(),this.mutatedKeys=tr(),this.Aa=NU(e),this.Ra=new Pm(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new TM,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const p=i.get(d),h=J5(this.query,f)?f:null,g=!!p&&this.mutatedKeys.has(p.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let v=!1;p&&h?p.data.isEqual(h.data)?g!==m&&(r.track({type:3,doc:h}),v=!0):this.ga(p,h)||(r.track({type:2,doc:h}),v=!0,(l&&this.Aa(h,l)>0||u&&this.Aa(h,u)<0)&&(o=!0)):!p&&h?(r.track({type:0,doc:h}),v=!0):p&&!h&&(r.track({type:1,doc:p}),v=!0,(l||u)&&(o=!0)),v&&(h?(s=s.add(h),a=m?a.add(d):a.delete(d)):(s=s.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:o,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((d,f)=>function(h,g){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tn()}};return m(h)-m(g)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;const o=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new tg(this.query,e.Ra,a,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new TM,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=tr(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new sW(r))}),this.da.forEach(r=>{e.has(r)||n.push(new aW(r))}),n}ba(e){this.Ta=e.Ts,this.da=tr();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return tg.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class mle{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class gle{constructor(e){this.key=e,this.va=!1}}class vle{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Qg(o=>EU(o),Z5),this.Ma=new Map,this.xa=new Set,this.Oa=new Oi(vn.comparator),this.Na=new Map,this.La=new M4,this.Ba={},this.ka=new Map,this.qa=eg.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function yle(t,e,n=!0){const r=fW(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await oW(r,e,n,!0),i}async function ble(t,e){const n=fW(t);await oW(n,e,!0,!1)}async function oW(t,e,n,r){const i=await Foe(t.localStore,au(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await xle(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&JU(t.remoteStore,i),o}async function xle(t,e,n,r,i){t.Ka=(f,p,h)=>async function(m,v,y,b){let S=v.view.ma(y);S.ns&&(S=await EM(m.localStore,v.query,!1).then(({documents:j})=>v.view.ma(j,S)));const A=b&&b.targetChanges.get(v.targetId),C=b&&b.targetMismatches.get(v.targetId)!=null,D=v.view.applyChanges(S,m.isPrimaryClient,A,C);return MM(m,v.targetId,D.wa),D.snapshot}(t,f,p,h);const a=await EM(t.localStore,e,!0),s=new ple(e,a.Ts),o=s.ma(a.documents),l=Pb.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,l);MM(t,n,u.wa);const d=new mle(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function wle(t,e,n){const r=Ln(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(s=>!Z5(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await VE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&F4(r.remoteStore,i.targetId),WE(r,i.targetId)}).catch(Cb)):(WE(r,i.targetId),await VE(r.localStore,i.targetId,!0))}async function Sle(t,e){const n=Ln(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),F4(n.remoteStore,r.targetId))}async function _le(t,e,n){const r=kle(t);try{const i=await function(s,o){const l=Ln(s),u=va.now(),d=o.reduce((h,g)=>h.add(g.key),tr());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let g=id(),m=tr();return l.cs.getEntries(h,d).next(v=>{g=v,g.forEach((y,b)=>{b.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,g)).next(v=>{f=v;const y=[];for(const b of o){const S=Vse(b,f.get(b.key).overlayedDocument);S!=null&&y.push(new Df(b.key,S,bU(S.value.mapValue),sl.exists(!0)))}return l.mutationQueue.addMutationBatch(h,u,y,o)}).next(v=>{p=v;const y=v.applyToLocalDocumentSet(f,m);return l.documentOverlayCache.saveOverlays(h,v.batchId,y)})}).then(()=>({batchId:p.batchId,changes:kU(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new Oi(br)),u=u.insert(o,l),s.Ba[s.currentUser.toKey()]=u}(r,i.batchId,n),await Tb(r,i.changes),await sS(r.remoteStore)}catch(i){const a=U4(i,"Failed to persist write");n.reject(a)}}async function lW(t,e){const n=Ln(t);try{const r=await Moe(n.localStore,e);e.targetChanges.forEach((i,a)=>{const s=n.Na.get(a);s&&(Fr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Fr(s.va):i.removedDocuments.size>0&&(Fr(s.va),s.va=!1))}),await Tb(n,r,e)}catch(r){await Cb(r)}}function OM(t,e,n){const r=Ln(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((a,s)=>{const o=s.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const l=Ln(s);l.onlineState=o;let u=!1;l.queries.forEach((d,f)=>{for(const p of f.j_)p.Z_(o)&&(u=!0)}),u&&W4(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ale(t,e,n){const r=Ln(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let s=new Oi(vn.comparator);s=s.insert(a,Fs.newNoDocument(a,Mn.min()));const o=tr().add(a),l=new rS(Mn.min(),new Map,new Oi(br),s,o);await lW(r,l),r.Oa=r.Oa.remove(a),r.Na.delete(e),H4(r)}else await VE(r.localStore,e,!1).then(()=>WE(r,e,n)).catch(Cb)}async function Cle(t,e){const n=Ln(t),r=e.batch.batchId;try{const i=await Ooe(n.localStore,e);uW(n,r,null),cW(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tb(n,i)}catch(i){await Cb(i)}}async function jle(t,e,n){const r=Ln(t);try{const i=await function(s,o){const l=Ln(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(f=>(Fr(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);uW(r,e,n),cW(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Tb(r,i)}catch(i){await Cb(i)}}function cW(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function uW(t,e,n){const r=Ln(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function WE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||dW(t,r)})}function dW(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(F4(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),H4(t))}function MM(t,e,n){for(const r of n)r instanceof aW?(t.La.addReference(r.key,e),Ele(t,r)):r instanceof sW?(an("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||dW(t,r.key)):Tn()}function Ele(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(an("SyncEngine","New document in limbo: "+n),t.xa.add(r),H4(t))}function H4(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new vn(gi.fromString(e)),r=t.qa.next();t.Na.set(r,new gle(n)),t.Oa=t.Oa.insert(n,r),JU(t.remoteStore,new Kd(au(k4(n.path)),r,"TargetPurposeLimboResolution",A4.oe))}}async function Tb(t,e,n){const r=Ln(t),i=[],a=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((o,l)=>{s.push(r.Ka(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=L4.Wi(l.targetId,u);a.push(f)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(l,u){const d=Ln(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>At.forEach(u,p=>At.forEach(p.$i,h=>d.persistence.referenceDelegate.addReference(f,p.targetId,h)).next(()=>At.forEach(p.Ui,h=>d.persistence.referenceDelegate.removeReference(f,p.targetId,h)))))}catch(f){if(!jb(f))throw f;an("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const h=d.os.get(p),g=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(g);d.os=d.os.insert(p,m)}}}(r.localStore,a))}async function Nle(t,e){const n=Ln(t);if(!n.currentUser.isEqual(e)){an("SyncEngine","User change. New user:",e.toKey());const r=await YU(n.localStore,e);n.currentUser=e,function(a,s){a.ka.forEach(o=>{o.forEach(l=>{l.reject(new Qt(gt.CANCELLED,s))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tb(n,r.hs)}}function Ple(t,e){const n=Ln(t),r=n.Na.get(e);if(r&&r.va)return tr().add(r.key);{let i=tr();const a=n.Ma.get(e);if(!a)return i;for(const s of a){const o=n.Fa.get(s);i=i.unionWith(o.view.Va)}return i}}function fW(t){const e=Ln(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ple.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ale.bind(null,e),e.Ca.d_=dle.bind(null,e.eventManager),e.Ca.$a=fle.bind(null,e.eventManager),e}function kle(t){const e=Ln(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cle.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jle.bind(null,e),e}class q2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=iS(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Ioe(this.persistence,new Toe,e.initialUser,this.serializer)}Ga(e){return new Noe(R4.Zr,this.serializer)}Wa(e){return new $oe}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}q2.provider={build:()=>new q2};class HE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nle.bind(null,this.syncEngine),await sle(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lle}()}createDatastore(e){const n=iS(e.databaseInfo.databaseId),r=function(a){return new Woe(a)}(e.databaseInfo);return function(a,s,o,l){return new Koe(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,s,o){return new Yoe(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>OM(this.syncEngine,n,0),function(){return PM.D()?new PM:new Boe}())}createSyncEngine(e,n){return function(i,a,s,o,l,u,d){const f=new vle(i,a,s,o,l,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=Ln(i);an("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await kb(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}HE.provider={build:()=>new HE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tle{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rd("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dle{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=mo.UNAUTHENTICATED,this.clientId=gU.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{an("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(an("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=U4(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function RA(t,e){t.asyncQueue.verifyOperationInProgress(),an("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await YU(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function RM(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ile(t);an("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>kM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>kM(e.remoteStore,i)),t._onlineComponents=e}async function Ile(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){an("FirestoreClient","Using user provided OfflineComponentProvider");try{await RA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===gt.FAILED_PRECONDITION||i.code===gt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;vy("Error using user provided cache. Falling back to memory cache: "+n),await RA(t,new q2)}}else an("FirestoreClient","Using default OfflineComponentProvider"),await RA(t,new q2);return t._offlineComponents}async function hW(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(an("FirestoreClient","Using user provided OnlineComponentProvider"),await RM(t,t._uninitializedComponentsProvider._online)):(an("FirestoreClient","Using default OnlineComponentProvider"),await RM(t,new HE))),t._onlineComponents}function Ole(t){return hW(t).then(e=>e.syncEngine)}async function LM(t){const e=await hW(t),n=e.eventManager;return n.onListen=yle.bind(null,e.syncEngine),n.onUnlisten=wle.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ble.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Sle.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pW(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mW(t,e,n){if(!n)throw new Qt(gt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Mle(t,e,n,r){if(e===!0&&r===!0)throw new Qt(gt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zM(t){if(!vn.isDocumentKey(t))throw new Qt(gt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $M(t){if(vn.isDocumentKey(t))throw new Qt(gt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function oS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Tn()}function Rh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Qt(gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oS(t);throw new Qt(gt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Qt(gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Qt(gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mle("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pW((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Qt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Qt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Qt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class q4{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BM({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qt(gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Qt(gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BM(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Qae;switch(r.type){case"firstParty":return new ese(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Qt(gt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=FM.get(n);r&&(an("ComponentProvider","Removing Datastore"),FM.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jg(this.firestore,e,this._query)}}class Co{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ff(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Co(this.firestore,e,this._key)}}class ff extends Jg{constructor(e,n,r){super(e,n,k4(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Co(this.firestore,null,new vn(e))}withConverter(e){return new ff(this.firestore,e,this._path)}}function Rle(t,e,...n){if(t=hs(t),mW("collection","path",e),t instanceof q4){const r=gi.fromString(e,...n);return $M(r),new ff(t,null,r)}{if(!(t instanceof Co||t instanceof ff))throw new Qt(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gi.fromString(e,...n));return $M(r),new ff(t.firestore,null,r)}}function Da(t,e,...n){if(t=hs(t),arguments.length===1&&(e=gU.newId()),mW("doc","path",e),t instanceof q4){const r=gi.fromString(e,...n);return zM(r),new Co(t,null,new vn(r))}{if(!(t instanceof Co||t instanceof ff))throw new Qt(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gi.fromString(e,...n));return zM(r),new Co(t.firestore,t instanceof ff?t.converter:null,new vn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new QU(this,"async_queue_retry"),this.Vu=()=>{const r=MA();r&&an("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=MA();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=MA();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mh;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!jb(e))throw e;an("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw rd("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=V4.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&Tn()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function UM(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class ng extends q4{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new VM,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VM(e),this._firestoreClient=void 0,await e}}}function Lle(t,e,n){n||(n="(default)");const r=VV(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(hy(a,e))return i;throw new Qt(gt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Qt(gt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Qt(gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function K4(t){if(t._terminated)throw new Qt(gt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Fle(t),t._firestoreClient}function Fle(t){var e,n,r;const i=t._freezeSettings(),a=function(o,l,u,d){return new hse(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,pW(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Dle(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rg(ps.fromBase64String(e))}catch(n){throw new Qt(gt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rg(ps.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Qt(gt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ls(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Qt(gt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Qt(gt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return br(this._lat,e._lat)||br(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zle=/^__.*__$/;class $le{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Df(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nb(e,this.data,n,this.fieldTransforms)}}class gW{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Df(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vW(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tn()}}class X4{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new X4(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return K2(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vW(this.Cu)&&zle.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Ble{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||iS(e)}Qu(e,n,r,i=!1){return new X4({Cu:e,methodName:n,qu:r,path:ls.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Q4(t){const e=t._freezeSettings(),n=iS(t._databaseId);return new Ble(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yW(t,e,n,r,i,a={}){const s=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);J4("Data must be an object, but it was:",s,r);const o=bW(r,s);let l,u;if(a.merge)l=new rl(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const d=[];for(const f of a.mergeFields){const p=qE(e,f,n);if(!s.contains(p))throw new Qt(gt.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);wW(d,p)||d.push(p)}l=new rl(d),u=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=s.fieldTransforms;return new $le(new vo(o),l,u)}class uS extends cS{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uS}}class Z4 extends cS{_toFieldTransform(e){return new Fse(e.path,new Sy)}isEqual(e){return e instanceof Z4}}function Vle(t,e,n,r){const i=t.Qu(1,e,n);J4("Data must be an object, but it was:",i,r);const a=[],s=vo.empty();dp(r,(l,u)=>{const d=eT(e,l,n);u=hs(u);const f=i.Nu(d);if(u instanceof uS)a.push(d);else{const p=Db(u,f);p!=null&&(a.push(d),s.set(d,p))}});const o=new rl(a);return new gW(s,o,i.fieldTransforms)}function Ule(t,e,n,r,i,a){const s=t.Qu(1,e,n),o=[qE(e,r,n)],l=[i];if(a.length%2!=0)throw new Qt(gt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)o.push(qE(e,a[p])),l.push(a[p+1]);const u=[],d=vo.empty();for(let p=o.length-1;p>=0;--p)if(!wW(u,o[p])){const h=o[p];let g=l[p];g=hs(g);const m=s.Nu(h);if(g instanceof uS)u.push(h);else{const v=Db(g,m);v!=null&&(u.push(h),d.set(h,v))}}const f=new rl(u);return new gW(d,f,s.fieldTransforms)}function Wle(t,e,n,r=!1){return Db(n,t.Qu(r?4:3,e))}function Db(t,e){if(xW(t=hs(t)))return J4("Unsupported field value:",e,t),bW(t,e);if(t instanceof cS)return function(r,i){if(!vW(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let l=Db(o,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),s++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=hs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mse(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=va.fromDate(r);return{timestampValue:W2(i.serializer,a)}}if(r instanceof va){const a=new va(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:W2(i.serializer,a)}}if(r instanceof G4)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rg)return{bytesValue:VU(i.serializer,r._byteString)};if(r instanceof Co){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:O4(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Y4)return function(s,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return T4(o.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${oS(r)}`)}(t,e)}function bW(t,e){const n={};return vU(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dp(t,(r,i)=>{const a=Db(i,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function xW(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof va||t instanceof G4||t instanceof rg||t instanceof Co||t instanceof cS||t instanceof Y4)}function J4(t,e,n){if(!xW(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=oS(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function qE(t,e,n){if((e=hs(e))instanceof lS)return e._internalPath;if(typeof e=="string")return eT(t,e);throw K2("Field path arguments must be of type string or ",t,!1,void 0,n)}const Hle=new RegExp("[~\\*/\\[\\]]");function eT(t,e,n){if(e.search(Hle)>=0)throw K2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lS(...e.split("."))._internalPath}catch{throw K2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function K2(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Qt(gt.INVALID_ARGUMENT,o+t+l)}function wW(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Co(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qle(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qle extends SW{data(){return super.data()}}function tT(t,e){return typeof e=="string"?eT(t,e):e instanceof lS?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kle(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Qt(gt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nT{}class Gle extends nT{}function Yle(t,e,...n){let r=[];e instanceof nT&&r.push(e),r=r.concat(n),function(a){const s=a.filter(l=>l instanceof rT).length,o=a.filter(l=>l instanceof dS).length;if(s>1||s>0&&o>0)throw new Qt(gt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class dS extends Gle{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new dS(e,n,r)}_apply(e){const n=this._parse(e);return _W(e._query,n),new Jg(e.firestore,e.converter,RE(e._query,n))}_parse(e){const n=Q4(e.firestore);return function(a,s,o,l,u,d,f){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Qt(gt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){HM(f,d);const h=[];for(const g of f)h.push(WM(l,a,g));p={arrayValue:{values:h}}}else p=WM(l,a,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||HM(f,d),p=Wle(o,s,f,d==="in"||d==="not-in");return ga.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xle(t,e,n){const r=e,i=tT("where",t);return dS._create(i,r,n)}class rT extends nT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rT(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cc.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const l of o)_W(s,l),s=RE(s,l)}(e._query,n),new Jg(e.firestore,e.converter,RE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function WM(t,e,n){if(typeof(n=hs(n))=="string"){if(n==="")throw new Qt(gt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jU(e)&&n.indexOf("/")!==-1)throw new Qt(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(gi.fromString(n));if(!vn.isDocumentKey(r))throw new Qt(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uM(t,new vn(r))}if(n instanceof Co)return uM(t,n._key);throw new Qt(gt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oS(n)}.`)}function HM(t,e){if(!Array.isArray(t)||t.length===0)throw new Qt(gt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _W(t,e){const n=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Qt(gt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Qt(gt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Qle{convertValue(e,n="none"){switch(Xh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ia(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Tn()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return dp(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ia(s.doubleValue));return new Y4(a)}convertGeoPoint(e){return new G4(ia(e.latitude),ia(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=j4(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(by(e));default:return null}}convertTimestamp(e){const n=bf(e);return new va(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gi.fromString(e);Fr(GU(r));const i=new xy(r.get(1),r.get(3)),a=new vn(r.popFirst(5));return i.isEqual(n)||rd(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CW extends SW{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new K1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(tT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class K1 extends CW{data(e={}){return super.data(e)}}class Zle{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new o0(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new K1(this._firestore,this._userDataWriter,r.key,r,new o0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Qt(gt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const l=new K1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new o0(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new K1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new o0(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),d=s.indexOf(o.doc.key)),{type:Jle(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Jle(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tn()}}class jW extends Qle{constructor(e){super(),this.firestore=e}convertBytes(e){return new rg(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Co(this.firestore,null,n)}}function KE(t,e,n){t=Rh(t,Co);const r=Rh(t.firestore,ng),i=AW(t.converter,e,n);return iT(r,[yW(Q4(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,sl.none())])}function Xf(t){return iT(Rh(t.firestore,ng),[new nS(t._key,sl.none())])}function qM(t,...e){var n,r,i;t=hs(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||UM(e[s])||(a=e[s],s++);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(UM(e[s])){const f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,u,d;if(t instanceof Co)u=Rh(t.firestore,ng),d=k4(t._key.path),l={next:f=>{e[s]&&e[s](ece(u,t,f))},error:e[s+1],complete:e[s+2]};else{const f=Rh(t,Jg);u=Rh(f.firestore,ng),d=f._query;const p=new jW(u);l={next:h=>{e[s]&&e[s](new Zle(u,p,f,h))},error:e[s+1],complete:e[s+2]},Kle(t._query)}return function(p,h,g,m){const v=new Tle(m),y=new hle(h,v,g);return p.asyncQueue.enqueueAndForget(async()=>cle(await LM(p),y)),()=>{v.Za(),p.asyncQueue.enqueueAndForget(async()=>ule(await LM(p),y))}}(K4(u),d,o,l)}function iT(t,e){return function(r,i){const a=new Mh;return r.asyncQueue.enqueueAndForget(async()=>_le(await Ole(r),i,a)),a.promise}(K4(t),e)}function ece(t,e,n){const r=n.docs.get(e._key),i=new jW(t);return new CW(t,i,e._key,r,new o0(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tce{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Q4(e)}set(e,n,r){this._verifyNotCommitted();const i=LA(e,this._firestore),a=AW(i.converter,n,r),s=yW(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,sl.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=LA(e,this._firestore);let s;return s=typeof(n=hs(n))=="string"||n instanceof lS?Ule(this._dataReader,"WriteBatch.update",a._key,n,r,i):Vle(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,sl.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=LA(e,this._firestore);return this._mutations=this._mutations.concat(new nS(n._key,sl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qt(gt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function LA(t,e){if((t=hs(t)).firestore!==e)throw new Qt(gt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function KM(){return new Z4("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){return K4(t=Rh(t,ng)),new tce(t,e=>iT(t,e))}(function(e,n=!0){(function(i){Xg=i})(Y5),Ym(new Kh("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new ng(new Zae(r.getProvider("auth-internal")),new nse(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Qt(gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xy(u.options.projectId,d)}(s,i),s);return a=Object.assign({useFetchStreams:n},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),df(aM,"4.7.3",e),df(aM,"4.7.3","esm2017")})();const nce={apiKey:"AIzaSyCq3MZURc1tNUbpK7BDzKZKQoh8C3twzmA",authDomain:"lactokeeper.firebaseapp.com",projectId:"lactokeeper",storageBucket:"https://www.google.com/search?q=lactokeeper.appspot.com",messagingSenderId:"437430613715",appId:"1:437430613715:web:b4e56c7a0698c719ae8626"},EW=kie(nce),ig=_ae(EW,{persistence:Bae}),hi=Lle(EW,{}),NW=I.createContext({currentUser:null,isLoading:!0}),PW=()=>I.useContext(NW),rce=({children:t})=>{const[e,n]=I.useState(null),[r,i]=I.useState(!0);I.useEffect(()=>Fae(ig,o=>{n(o),setTimeout(()=>i(!1),200)}),[]);const a=I.useMemo(()=>({currentUser:e,isLoading:r}),[e,r]);return c.jsx(NW.Provider,{value:a,children:t})};var kW={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Yp,function(){var n=function(_,k){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,W){z.__proto__=W}||function(z,W){for(var G in W)Object.prototype.hasOwnProperty.call(W,G)&&(z[G]=W[G])})(_,k)},r=function(){return(r=Object.assign||function(_){for(var k,z=1,W=arguments.length;z<W;z++)for(var G in k=arguments[z])Object.prototype.hasOwnProperty.call(k,G)&&(_[G]=k[G]);return _}).apply(this,arguments)};function i(_,k,z){for(var W,G=0,ne=k.length;G<ne;G++)!W&&G in k||((W=W||Array.prototype.slice.call(k,0,G))[G]=k[G]);return _.concat(W||Array.prototype.slice.call(k))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Yp,s=Object.keys,o=Array.isArray;function l(_,k){return typeof k!="object"||s(k).forEach(function(z){_[z]=k[z]}),_}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function f(_,k){return d.call(_,k)}function p(_,k){typeof k=="function"&&(k=k(u(_))),(typeof Reflect>"u"?s:Reflect.ownKeys)(k).forEach(function(z){g(_,z,k[z])})}var h=Object.defineProperty;function g(_,k,z,W){h(_,k,l(z&&f(z,"get")&&typeof z.get=="function"?{get:z.get,set:z.set,configurable:!0}:{value:z,configurable:!0,writable:!0},W))}function m(_){return{from:function(k){return _.prototype=Object.create(k.prototype),g(_.prototype,"constructor",_),{extend:p.bind(null,_.prototype)}}}}var v=Object.getOwnPropertyDescriptor,y=[].slice;function b(_,k,z){return y.call(_,k,z)}function S(_,k){return k(_)}function A(_){if(!_)throw new Error("Assertion Failed")}function C(_){a.setImmediate?setImmediate(_):setTimeout(_,0)}function D(_,k){if(typeof k=="string"&&f(_,k))return _[k];if(!k)return _;if(typeof k!="string"){for(var z=[],W=0,G=k.length;W<G;++W){var ne=D(_,k[W]);z.push(ne)}return z}var pe=k.indexOf(".");if(pe!==-1){var we=_[k.substr(0,pe)];return we==null?void 0:D(we,k.substr(pe+1))}}function j(_,k,z){if(_&&k!==void 0&&!("isFrozen"in Object&&Object.isFrozen(_)))if(typeof k!="string"&&"length"in k){A(typeof z!="string"&&"length"in z);for(var W=0,G=k.length;W<G;++W)j(_,k[W],z[W])}else{var ne,pe,we=k.indexOf(".");we!==-1?(ne=k.substr(0,we),(pe=k.substr(we+1))===""?z===void 0?o(_)&&!isNaN(parseInt(ne))?_.splice(ne,1):delete _[ne]:_[ne]=z:j(we=!(we=_[ne])||!f(_,ne)?_[ne]={}:we,pe,z)):z===void 0?o(_)&&!isNaN(parseInt(k))?_.splice(k,1):delete _[k]:_[k]=z}}function N(_){var k,z={};for(k in _)f(_,k)&&(z[k]=_[k]);return z}var P=[].concat;function O(_){return P.apply([],_)}var $t="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(O([8,16,32,64].map(function(_){return["Int","Uint","Float"].map(function(k){return k+_+"Array"})}))).filter(function(_){return a[_]}),T=new Set($t.map(function(_){return a[_]})),M=null;function L(_){return M=new WeakMap,_=function k(z){if(!z||typeof z!="object")return z;var W=M.get(z);if(W)return W;if(o(z)){W=[],M.set(z,W);for(var G=0,ne=z.length;G<ne;++G)W.push(k(z[G]))}else if(T.has(z.constructor))W=z;else{var pe,we=u(z);for(pe in W=we===Object.prototype?{}:Object.create(we),M.set(z,W),z)f(z,pe)&&(W[pe]=k(z[pe]))}return W}(_),M=null,_}var V={}.toString;function K(_){return V.call(_).slice(8,-1)}var Z=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Y=typeof Z=="symbol"?function(_){var k;return _!=null&&(k=_[Z])&&k.apply(_)}:function(){return null};function H(_,k){return k=_.indexOf(k),0<=k&&_.splice(k,1),0<=k}var ee={};function le(_){var k,z,W,G;if(arguments.length===1){if(o(_))return _.slice();if(this===ee&&typeof _=="string")return[_];if(G=Y(_)){for(z=[];!(W=G.next()).done;)z.push(W.value);return z}if(_==null)return[_];if(typeof(k=_.length)!="number")return[_];for(z=new Array(k);k--;)z[k]=_[k];return z}for(k=arguments.length,z=new Array(k);k--;)z[k]=arguments[k];return z}var se=typeof Symbol<"u"?function(_){return _[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Zt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Zi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zt),$={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function X(_,k){this.name=_,this.message=k}function te(_,k){return _+". Errors: "+Object.keys(k).map(function(z){return k[z].toString()}).filter(function(z,W,G){return G.indexOf(z)===W}).join(`
`)}function oe(_,k,z,W){this.failures=k,this.failedKeys=W,this.successCount=z,this.message=te(_,k)}function me(_,k){this.name="BulkError",this.failures=Object.keys(k).map(function(z){return k[z]}),this.failuresByPos=k,this.message=te(_,this.failures)}m(X).from(Error).extend({toString:function(){return this.name+": "+this.message}}),m(oe).from(X),m(me).from(X);var _e=Zi.reduce(function(_,k){return _[k]=k+"Error",_},{}),Ce=X,fe=Zi.reduce(function(_,k){var z=k+"Error";function W(G,ne){this.name=z,G?typeof G=="string"?(this.message="".concat(G).concat(ne?`
 `+ne:""),this.inner=ne||null):typeof G=="object"&&(this.message="".concat(G.name," ").concat(G.message),this.inner=G):(this.message=$[k]||z,this.inner=null)}return m(W).from(Ce),_[k]=W,_},{});fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError;var xe=Zt.reduce(function(_,k){return _[k+"Error"]=fe[k],_},{}),Se=Zi.reduce(function(_,k){return["Syntax","Type","Range"].indexOf(k)===-1&&(_[k+"Error"]=fe[k]),_},{});function ie(){}function He(_){return _}function Fe(_,k){return _==null||_===He?k:function(z){return k(_(z))}}function he(_,k){return function(){_.apply(this,arguments),k.apply(this,arguments)}}function Ye(_,k){return _===ie?k:function(){var z=_.apply(this,arguments);z!==void 0&&(arguments[0]=z);var W=this.onsuccess,G=this.onerror;this.onsuccess=null,this.onerror=null;var ne=k.apply(this,arguments);return W&&(this.onsuccess=this.onsuccess?he(W,this.onsuccess):W),G&&(this.onerror=this.onerror?he(G,this.onerror):G),ne!==void 0?ne:z}}function mt(_,k){return _===ie?k:function(){_.apply(this,arguments);var z=this.onsuccess,W=this.onerror;this.onsuccess=this.onerror=null,k.apply(this,arguments),z&&(this.onsuccess=this.onsuccess?he(z,this.onsuccess):z),W&&(this.onerror=this.onerror?he(W,this.onerror):W)}}function vt(_,k){return _===ie?k:function(z){var W=_.apply(this,arguments);l(z,W);var G=this.onsuccess,ne=this.onerror;return this.onsuccess=null,this.onerror=null,z=k.apply(this,arguments),G&&(this.onsuccess=this.onsuccess?he(G,this.onsuccess):G),ne&&(this.onerror=this.onerror?he(ne,this.onerror):ne),W===void 0?z===void 0?void 0:z:l(W,z)}}function Qe(_,k){return _===ie?k:function(){return k.apply(this,arguments)!==!1&&_.apply(this,arguments)}}function Ot(_,k){return _===ie?k:function(){var z=_.apply(this,arguments);if(z&&typeof z.then=="function"){for(var W=this,G=arguments.length,ne=new Array(G);G--;)ne[G]=arguments[G];return z.then(function(){return k.apply(W,ne)})}return k.apply(this,arguments)}}Se.ModifyError=oe,Se.DexieError=X,Se.BulkError=me;var ht=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function dt(_){ht=_}var It={},tn=100,$t=typeof Promise>"u"?[]:function(){var _=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[_,u(_),_];var k=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[k,u(k),_]}(),Zt=$t[0],Zi=$t[1],$t=$t[2],Zi=Zi&&Zi.then,on=Zt&&Zt.constructor,lt=!!$t,bt=function(_,k){Ht.push([_,k]),nt&&(queueMicrotask(gs),nt=!1)},yt=!0,nt=!0,Bt=[],ft=[],pt=He,Rt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ie,pgp:!1,env:{},finalize:ie},Ct=Rt,Ht=[],pn=0,dn=[];function wt(_){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var k=this._PSD=Ct;if(typeof _!="function"){if(_!==It)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&qt(this,this._value))}this._state=null,this._value=null,++k.ref,function z(W,G){try{G(function(ne){if(W._state===null){if(ne===W)throw new TypeError("A promise cannot be resolved with itself.");var pe=W._lib&&Re();ne&&typeof ne.then=="function"?z(W,function(we,Ne){ne instanceof wt?ne._then(we,Ne):ne.then(we,Ne)}):(W._state=!0,W._value=ne,Cn(W)),pe&&Oe()}},qt.bind(null,W))}catch(ne){qt(W,ne)}}(this,_)}var sr={get:function(){var _=Ct,k=qn;function z(W,G){var ne=this,pe=!_.global&&(_!==Ct||k!==qn),we=pe&&!Tr(),Ne=new wt(function(Te,Me){ba(ne,new mn(Do(W,_,pe,we),Do(G,_,pe,we),Te,Me,_))});return this._consoleTask&&(Ne._consoleTask=this._consoleTask),Ne}return z.prototype=It,z},set:function(_){g(this,"then",_&&_.prototype===It?sr:{get:function(){return _},set:sr.set})}};function mn(_,k,z,W,G){this.onFulfilled=typeof _=="function"?_:null,this.onRejected=typeof k=="function"?k:null,this.resolve=z,this.reject=W,this.psd=G}function qt(_,k){var z,W;ft.push(k),_._state===null&&(z=_._lib&&Re(),k=pt(k),_._state=!1,_._value=k,W=_,Bt.some(function(G){return G._value===W._value})||Bt.push(W),Cn(_),z&&Oe())}function Cn(_){var k=_._listeners;_._listeners=[];for(var z=0,W=k.length;z<W;++z)ba(_,k[z]);var G=_._PSD;--G.ref||G.finalize(),pn===0&&(++pn,bt(function(){--pn==0&&Ke()},[]))}function ba(_,k){if(_._state!==null){var z=_._state?k.onFulfilled:k.onRejected;if(z===null)return(_._state?k.resolve:k.reject)(_._value);++k.psd.ref,++pn,bt($r,[z,_,k])}else _._listeners.push(k)}function $r(_,k,z){try{var W,G=k._value;!k._state&&ft.length&&(ft=[]),W=ht&&k._consoleTask?k._consoleTask.run(function(){return _(G)}):_(G),k._state||ft.indexOf(G)!==-1||function(ne){for(var pe=Bt.length;pe;)if(Bt[--pe]._value===ne._value)return Bt.splice(pe,1)}(k),z.resolve(W)}catch(ne){z.reject(ne)}finally{--pn==0&&Ke(),--z.psd.ref||z.psd.finalize()}}function gs(){xa(Rt,function(){Re()&&Oe()})}function Re(){var _=yt;return nt=yt=!1,_}function Oe(){var _,k,z;do for(;0<Ht.length;)for(_=Ht,Ht=[],z=_.length,k=0;k<z;++k){var W=_[k];W[0].apply(null,W[1])}while(0<Ht.length);nt=yt=!0}function Ke(){var _=Bt;Bt=[],_.forEach(function(W){W._PSD.onunhandled.call(null,W._value,W)});for(var k=dn.slice(0),z=k.length;z;)k[--z]()}function Et(_){return new wt(It,!1,_)}function ct(_,k){var z=Ct;return function(){var W=Re(),G=Ct;try{return oi(z,!0),_.apply(this,arguments)}catch(ne){k&&k(ne)}finally{oi(G,!1),W&&Oe()}}}p(wt.prototype,{then:sr,_then:function(_,k){ba(this,new mn(null,null,_,k,Ct))},catch:function(_){if(arguments.length===1)return this.then(null,_);var k=_,z=arguments[1];return typeof k=="function"?this.then(null,function(W){return(W instanceof k?z:Et)(W)}):this.then(null,function(W){return(W&&W.name===k?z:Et)(W)})},finally:function(_){return this.then(function(k){return wt.resolve(_()).then(function(){return k})},function(k){return wt.resolve(_()).then(function(){return Et(k)})})},timeout:function(_,k){var z=this;return _<1/0?new wt(function(W,G){var ne=setTimeout(function(){return G(new fe.Timeout(k))},_);z.then(W,G).finally(clearTimeout.bind(null,ne))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&g(wt.prototype,Symbol.toStringTag,"Dexie.Promise"),Rt.env=vs(),p(wt,{all:function(){var _=le.apply(null,arguments).map(er);return new wt(function(k,z){_.length===0&&k([]);var W=_.length;_.forEach(function(G,ne){return wt.resolve(G).then(function(pe){_[ne]=pe,--W||k(_)},z)})})},resolve:function(_){return _ instanceof wt?_:_&&typeof _.then=="function"?new wt(function(k,z){_.then(k,z)}):new wt(It,!0,_)},reject:Et,race:function(){var _=le.apply(null,arguments).map(er);return new wt(function(k,z){_.map(function(W){return wt.resolve(W).then(k,z)})})},PSD:{get:function(){return Ct},set:function(_){return Ct=_}},totalEchoes:{get:function(){return qn}},newPSD:kr,usePSD:xa,scheduler:{get:function(){return bt},set:function(_){bt=_}},rejectionMapper:{get:function(){return pt},set:function(_){pt=_}},follow:function(_,k){return new wt(function(z,W){return kr(function(G,ne){var pe=Ct;pe.unhandleds=[],pe.onunhandled=ne,pe.finalize=he(function(){var we,Ne=this;we=function(){Ne.unhandleds.length===0?G():ne(Ne.unhandleds[0])},dn.push(function Te(){we(),dn.splice(dn.indexOf(Te),1)}),++pn,bt(function(){--pn==0&&Ke()},[])},pe.finalize),_()},k,z,W)})}}),on&&(on.allSettled&&g(wt,"allSettled",function(){var _=le.apply(null,arguments).map(er);return new wt(function(k){_.length===0&&k([]);var z=_.length,W=new Array(z);_.forEach(function(G,ne){return wt.resolve(G).then(function(pe){return W[ne]={status:"fulfilled",value:pe}},function(pe){return W[ne]={status:"rejected",reason:pe}}).then(function(){return--z||k(W)})})})}),on.any&&typeof AggregateError<"u"&&g(wt,"any",function(){var _=le.apply(null,arguments).map(er);return new wt(function(k,z){_.length===0&&z(new AggregateError([]));var W=_.length,G=new Array(W);_.forEach(function(ne,pe){return wt.resolve(ne).then(function(we){return k(we)},function(we){G[pe]=we,--W||z(new AggregateError(G))})})})}),on.withResolvers&&(wt.withResolvers=on.withResolvers));var Gt={awaits:0,echoes:0,id:0},yn=0,Gn=[],Ft=0,qn=0,Ri=0;function kr(_,k,z,W){var G=Ct,ne=Object.create(G);return ne.parent=G,ne.ref=0,ne.global=!1,ne.id=++Ri,Rt.env,ne.env=lt?{Promise:wt,PromiseProp:{value:wt,configurable:!0,writable:!0},all:wt.all,race:wt.race,allSettled:wt.allSettled,any:wt.any,resolve:wt.resolve,reject:wt.reject}:{},k&&l(ne,k),++G.ref,ne.finalize=function(){--this.parent.ref||this.parent.finalize()},W=xa(ne,_,z,W),ne.ref===0&&ne.finalize(),W}function Br(){return Gt.id||(Gt.id=++yn),++Gt.awaits,Gt.echoes+=tn,Gt.id}function Tr(){return!!Gt.awaits&&(--Gt.awaits==0&&(Gt.id=0),Gt.echoes=Gt.awaits*tn,!0)}function er(_){return Gt.echoes&&_&&_.constructor===on?(Br(),_.then(function(k){return Tr(),k},function(k){return Tr(),_r(k)})):_}function Sr(){var _=Gn[Gn.length-1];Gn.pop(),oi(_,!1)}function oi(_,k){var z,W=Ct;(k?!Gt.echoes||Ft++&&_===Ct:!Ft||--Ft&&_===Ct)||queueMicrotask(k?(function(G){++qn,Gt.echoes&&--Gt.echoes!=0||(Gt.echoes=Gt.awaits=Gt.id=0),Gn.push(Ct),oi(G,!0)}).bind(null,_):Sr),_!==Ct&&(Ct=_,W===Rt&&(Rt.env=vs()),lt&&(z=Rt.env.Promise,k=_.env,(W.global||_.global)&&(Object.defineProperty(a,"Promise",k.PromiseProp),z.all=k.all,z.race=k.race,z.resolve=k.resolve,z.reject=k.reject,k.allSettled&&(z.allSettled=k.allSettled),k.any&&(z.any=k.any))))}function vs(){var _=a.Promise;return lt?{Promise:_,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:_.all,race:_.race,allSettled:_.allSettled,any:_.any,resolve:_.resolve,reject:_.reject}:{}}function xa(_,k,z,W,G){var ne=Ct;try{return oi(_,!0),k(z,W,G)}finally{oi(ne,!1)}}function Do(_,k,z,W){return typeof _!="function"?_:function(){var G=Ct;z&&Br(),oi(k,!0);try{return _.apply(this,arguments)}finally{oi(G,!1),W&&queueMicrotask(Tr)}}}function Io(_){Promise===on&&Gt.echoes===0?Ft===0?_():enqueueNativeMicroTask(_):setTimeout(_,0)}(""+Zi).indexOf("[native code]")===-1&&(Br=Tr=ie);var _r=wt.reject,Oo="￿",ca="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Fc="String expected.",Us=[],Ei="__dbnames",Xa="readonly",yl="readwrite";function Ws(_,k){return _?k?function(){return _.apply(this,arguments)&&k.apply(this,arguments)}:_:k}var zc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bl(_){return typeof _!="string"||/\./.test(_)?function(k){return k}:function(k){return k[_]===void 0&&_ in k&&delete(k=L(k))[_],k}}function $c(){throw fe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function kn(_,k){try{var z=Bc(_),W=Bc(k);if(z!==W)return z==="Array"?1:W==="Array"?-1:z==="binary"?1:W==="binary"?-1:z==="string"?1:W==="string"?-1:z==="Date"?1:W!=="Date"?NaN:-1;switch(z){case"number":case"Date":case"string":return k<_?1:_<k?-1:0;case"binary":return function(G,ne){for(var pe=G.length,we=ne.length,Ne=pe<we?pe:we,Te=0;Te<Ne;++Te)if(G[Te]!==ne[Te])return G[Te]<ne[Te]?-1:1;return pe===we?0:pe<we?-1:1}(Yr(_),Yr(k));case"Array":return function(G,ne){for(var pe=G.length,we=ne.length,Ne=pe<we?pe:we,Te=0;Te<Ne;++Te){var Me=kn(G[Te],ne[Te]);if(Me!==0)return Me}return pe===we?0:pe<we?-1:1}(_,k)}}catch{}return NaN}function Bc(_){var k=typeof _;return k!="object"?k:ArrayBuffer.isView(_)?"binary":(_=K(_),_==="ArrayBuffer"?"binary":_)}function Yr(_){return _ instanceof Uint8Array?_:ArrayBuffer.isView(_)?new Uint8Array(_.buffer,_.byteOffset,_.byteLength):new Uint8Array(_)}function xl(_,k,z){var W=_.schema.yProps;return W?(k&&0<z.numFailures&&(k=k.filter(function(G,ne){return!z.failures[ne]})),Promise.all(W.map(function(G){return G=G.updatesTable,k?_.db.table(G).where("k").anyOf(k).delete():_.db.table(G).clear()})).then(function(){return z})):z}var Su=(Yn.prototype._trans=function(_,k,z){var W=this._tx||Ct.trans,G=this.name,ne=ht&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(_==="readonly"?"read":"write"," ").concat(this.name));function pe(Te,Me,Ae){if(!Ae.schema[G])throw new fe.NotFound("Table "+G+" not part of transaction");return k(Ae.idbtrans,Ae)}var we=Re();try{var Ne=W&&W.db._novip===this.db._novip?W===Ct.trans?W._promise(_,pe,z):kr(function(){return W._promise(_,pe,z)},{trans:W,transless:Ct.transless||Ct}):function Te(Me,Ae,ke,je){if(Me.idbdb&&(Me._state.openComplete||Ct.letThrough||Me._vip)){var Pe=Me._createTransaction(Ae,ke,Me._dbSchema);try{Pe.create(),Me._state.PR1398_maxLoop=3}catch(Ie){return Ie.name===_e.InvalidState&&Me.isOpen()&&0<--Me._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Me.close({disableAutoOpen:!1}),Me.open().then(function(){return Te(Me,Ae,ke,je)})):_r(Ie)}return Pe._promise(Ae,function(Ie,ze){return kr(function(){return Ct.trans=Pe,je(Ie,ze,Pe)})}).then(function(Ie){if(Ae==="readwrite")try{Pe.idbtrans.commit()}catch{}return Ae==="readonly"?Ie:Pe._completion.then(function(){return Ie})})}if(Me._state.openComplete)return _r(new fe.DatabaseClosed(Me._state.dbOpenError));if(!Me._state.isBeingOpened){if(!Me._state.autoOpen)return _r(new fe.DatabaseClosed);Me.open().catch(ie)}return Me._state.dbReadyPromise.then(function(){return Te(Me,Ae,ke,je)})}(this.db,_,[this.name],pe);return ne&&(Ne._consoleTask=ne,Ne=Ne.catch(function(Te){return console.trace(Te),_r(Te)})),Ne}finally{we&&Oe()}},Yn.prototype.get=function(_,k){var z=this;return _&&_.constructor===Object?this.where(_).first(k):_==null?_r(new fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(W){return z.core.get({trans:W,key:_}).then(function(G){return z.hook.reading.fire(G)})}).then(k)},Yn.prototype.where=function(_){if(typeof _=="string")return new this.db.WhereClause(this,_);if(o(_))return new this.db.WhereClause(this,"[".concat(_.join("+"),"]"));var k=s(_);if(k.length===1)return this.where(k[0]).equals(_[k[0]]);var z=this.schema.indexes.concat(this.schema.primKey).filter(function(we){if(we.compound&&k.every(function(Te){return 0<=we.keyPath.indexOf(Te)})){for(var Ne=0;Ne<k.length;++Ne)if(k.indexOf(we.keyPath[Ne])===-1)return!1;return!0}return!1}).sort(function(we,Ne){return we.keyPath.length-Ne.keyPath.length})[0];if(z&&this.db._maxKey!==Oo){var ne=z.keyPath.slice(0,k.length);return this.where(ne).equals(ne.map(function(Ne){return _[Ne]}))}!z&&ht&&console.warn("The query ".concat(JSON.stringify(_)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(k.join("+"),"]"));var W=this.schema.idxByName;function G(we,Ne){return kn(we,Ne)===0}var pe=k.reduce(function(Ae,Ne){var Te=Ae[0],Me=Ae[1],Ae=W[Ne],ke=_[Ne];return[Te||Ae,Te||!Ae?Ws(Me,Ae&&Ae.multi?function(je){return je=D(je,Ne),o(je)&&je.some(function(Pe){return G(ke,Pe)})}:function(je){return G(ke,D(je,Ne))}):Me]},[null,null]),ne=pe[0],pe=pe[1];return ne?this.where(ne.name).equals(_[ne.keyPath]).filter(pe):z?this.filter(pe):this.where(k).equals("")},Yn.prototype.filter=function(_){return this.toCollection().and(_)},Yn.prototype.count=function(_){return this.toCollection().count(_)},Yn.prototype.offset=function(_){return this.toCollection().offset(_)},Yn.prototype.limit=function(_){return this.toCollection().limit(_)},Yn.prototype.each=function(_){return this.toCollection().each(_)},Yn.prototype.toArray=function(_){return this.toCollection().toArray(_)},Yn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Yn.prototype.orderBy=function(_){return new this.db.Collection(new this.db.WhereClause(this,o(_)?"[".concat(_.join("+"),"]"):_))},Yn.prototype.reverse=function(){return this.toCollection().reverse()},Yn.prototype.mapToClass=function(_){var k,z=this.db,W=this.name;function G(){return k!==null&&k.apply(this,arguments)||this}(this.schema.mappedClass=_).prototype instanceof $c&&(function(Ne,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Class extends value "+String(Te)+" is not a constructor or null");function Me(){this.constructor=Ne}n(Ne,Te),Ne.prototype=Te===null?Object.create(Te):(Me.prototype=Te.prototype,new Me)}(G,k=_),Object.defineProperty(G.prototype,"db",{get:function(){return z},enumerable:!1,configurable:!0}),G.prototype.table=function(){return W},_=G);for(var ne=new Set,pe=_.prototype;pe;pe=u(pe))Object.getOwnPropertyNames(pe).forEach(function(Ne){return ne.add(Ne)});function we(Ne){if(!Ne)return Ne;var Te,Me=Object.create(_.prototype);for(Te in Ne)if(!ne.has(Te))try{Me[Te]=Ne[Te]}catch{}return Me}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=we,this.hook("reading",we),_},Yn.prototype.defineClass=function(){return this.mapToClass(function(_){l(this,_)})},Yn.prototype.add=function(_,k){var z=this,W=this.schema.primKey,G=W.auto,ne=W.keyPath,pe=_;return ne&&G&&(pe=bl(ne)(_)),this._trans("readwrite",function(we){return z.core.mutate({trans:we,type:"add",keys:k!=null?[k]:null,values:[pe]})}).then(function(we){return we.numFailures?wt.reject(we.failures[0]):we.lastResult}).then(function(we){if(ne)try{j(_,ne,we)}catch{}return we})},Yn.prototype.update=function(_,k){return typeof _!="object"||o(_)?this.where(":id").equals(_).modify(k):(_=D(_,this.schema.primKey.keyPath),_===void 0?_r(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(_).modify(k))},Yn.prototype.put=function(_,k){var z=this,W=this.schema.primKey,G=W.auto,ne=W.keyPath,pe=_;return ne&&G&&(pe=bl(ne)(_)),this._trans("readwrite",function(we){return z.core.mutate({trans:we,type:"put",values:[pe],keys:k!=null?[k]:null})}).then(function(we){return we.numFailures?wt.reject(we.failures[0]):we.lastResult}).then(function(we){if(ne)try{j(_,ne,we)}catch{}return we})},Yn.prototype.delete=function(_){var k=this;return this._trans("readwrite",function(z){return k.core.mutate({trans:z,type:"delete",keys:[_]}).then(function(W){return xl(k,[_],W)}).then(function(W){return W.numFailures?wt.reject(W.failures[0]):void 0})})},Yn.prototype.clear=function(){var _=this;return this._trans("readwrite",function(k){return _.core.mutate({trans:k,type:"deleteRange",range:zc}).then(function(z){return xl(_,null,z)})}).then(function(k){return k.numFailures?wt.reject(k.failures[0]):void 0})},Yn.prototype.bulkGet=function(_){var k=this;return this._trans("readonly",function(z){return k.core.getMany({keys:_,trans:z}).then(function(W){return W.map(function(G){return k.hook.reading.fire(G)})})})},Yn.prototype.bulkAdd=function(_,k,z){var W=this,G=Array.isArray(k)?k:void 0,ne=(z=z||(G?void 0:k))?z.allKeys:void 0;return this._trans("readwrite",function(pe){var Te=W.schema.primKey,we=Te.auto,Te=Te.keyPath;if(Te&&G)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(G&&G.length!==_.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var Ne=_.length,Te=Te&&we?_.map(bl(Te)):_;return W.core.mutate({trans:pe,type:"add",keys:G,values:Te,wantResults:ne}).then(function(Pe){var Ae=Pe.numFailures,ke=Pe.results,je=Pe.lastResult,Pe=Pe.failures;if(Ae===0)return ne?ke:je;throw new me("".concat(W.name,".bulkAdd(): ").concat(Ae," of ").concat(Ne," operations failed"),Pe)})})},Yn.prototype.bulkPut=function(_,k,z){var W=this,G=Array.isArray(k)?k:void 0,ne=(z=z||(G?void 0:k))?z.allKeys:void 0;return this._trans("readwrite",function(pe){var Te=W.schema.primKey,we=Te.auto,Te=Te.keyPath;if(Te&&G)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(G&&G.length!==_.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var Ne=_.length,Te=Te&&we?_.map(bl(Te)):_;return W.core.mutate({trans:pe,type:"put",keys:G,values:Te,wantResults:ne}).then(function(Pe){var Ae=Pe.numFailures,ke=Pe.results,je=Pe.lastResult,Pe=Pe.failures;if(Ae===0)return ne?ke:je;throw new me("".concat(W.name,".bulkPut(): ").concat(Ae," of ").concat(Ne," operations failed"),Pe)})})},Yn.prototype.bulkUpdate=function(_){var k=this,z=this.core,W=_.map(function(pe){return pe.key}),G=_.map(function(pe){return pe.changes}),ne=[];return this._trans("readwrite",function(pe){return z.getMany({trans:pe,keys:W,cache:"clone"}).then(function(we){var Ne=[],Te=[];_.forEach(function(Ae,ke){var je=Ae.key,Pe=Ae.changes,Ie=we[ke];if(Ie){for(var ze=0,Ve=Object.keys(Pe);ze<Ve.length;ze++){var Xe=Ve[ze],et=Pe[Xe];if(Xe===k.schema.primKey.keyPath){if(kn(et,je)!==0)throw new fe.Constraint("Cannot update primary key in bulkUpdate()")}else j(Ie,Xe,et)}ne.push(ke),Ne.push(je),Te.push(Ie)}});var Me=Ne.length;return z.mutate({trans:pe,type:"put",keys:Ne,values:Te,updates:{keys:W,changeSpecs:G}}).then(function(Ae){var ke=Ae.numFailures,je=Ae.failures;if(ke===0)return Me;for(var Pe=0,Ie=Object.keys(je);Pe<Ie.length;Pe++){var ze,Ve=Ie[Pe],Xe=ne[Number(Ve)];Xe!=null&&(ze=je[Ve],delete je[Ve],je[Xe]=ze)}throw new me("".concat(k.name,".bulkUpdate(): ").concat(ke," of ").concat(Me," operations failed"),je)})})})},Yn.prototype.bulkDelete=function(_){var k=this,z=_.length;return this._trans("readwrite",function(W){return k.core.mutate({trans:W,type:"delete",keys:_}).then(function(G){return xl(k,_,G)})}).then(function(pe){var G=pe.numFailures,ne=pe.lastResult,pe=pe.failures;if(G===0)return ne;throw new me("".concat(k.name,".bulkDelete(): ").concat(G," of ").concat(z," operations failed"),pe)})},Yn);function Yn(){}function ys(_){function k(pe,we){if(we){for(var Ne=arguments.length,Te=new Array(Ne-1);--Ne;)Te[Ne-1]=arguments[Ne];return z[pe].subscribe.apply(null,Te),_}if(typeof pe=="string")return z[pe]}var z={};k.addEventType=ne;for(var W=1,G=arguments.length;W<G;++W)ne(arguments[W]);return k;function ne(pe,we,Ne){if(typeof pe!="object"){var Te;we=we||Qe;var Me={subscribers:[],fire:Ne=Ne||ie,subscribe:function(Ae){Me.subscribers.indexOf(Ae)===-1&&(Me.subscribers.push(Ae),Me.fire=we(Me.fire,Ae))},unsubscribe:function(Ae){Me.subscribers=Me.subscribers.filter(function(ke){return ke!==Ae}),Me.fire=Me.subscribers.reduce(we,Ne)}};return z[pe]=k[pe]=Me}s(Te=pe).forEach(function(Ae){var ke=Te[Ae];if(o(ke))ne(Ae,Te[Ae][0],Te[Ae][1]);else{if(ke!=="asap")throw new fe.InvalidArgument("Invalid event config");var je=ne(Ae,He,function(){for(var Pe=arguments.length,Ie=new Array(Pe);Pe--;)Ie[Pe]=arguments[Pe];je.subscribers.forEach(function(ze){C(function(){ze.apply(null,Ie)})})})}})}}function ua(_,k){return m(k).from({prototype:_}),k}function bs(_,k){return!(_.filter||_.algorithm||_.or)&&(k?_.justLimit:!_.replayFilter)}function fr(_,k){_.filter=Ws(_.filter,k)}function wa(_,k,z){var W=_.replayFilter;_.replayFilter=W?function(){return Ws(W(),k())}:k,_.justLimit=z&&!W}function Mo(_,k){if(_.isPrimKey)return k.primaryKey;var z=k.getIndexByKeyPath(_.index);if(!z)throw new fe.Schema("KeyPath "+_.index+" on object store "+k.name+" is not indexed");return z}function Ql(_,k,z){var W=Mo(_,k.schema);return k.openCursor({trans:z,values:!_.keysOnly,reverse:_.dir==="prev",unique:!!_.unique,query:{index:W,range:_.range}})}function Zl(_,k,z,W){var G=_.replayFilter?Ws(_.filter,_.replayFilter()):_.filter;if(_.or){var ne={},pe=function(we,Ne,Te){var Me,Ae;G&&!G(Ne,Te,function(ke){return Ne.stop(ke)},function(ke){return Ne.fail(ke)})||((Ae=""+(Me=Ne.primaryKey))=="[object ArrayBuffer]"&&(Ae=""+new Uint8Array(Me)),f(ne,Ae)||(ne[Ae]=!0,k(we,Ne,Te)))};return Promise.all([_.or._iterate(pe,z),Hn(Ql(_,W,z),_.algorithm,pe,!_.keysOnly&&_.valueMapper)])}return Hn(Ql(_,W,z),Ws(_.algorithm,G),k,!_.keysOnly&&_.valueMapper)}function Hn(_,k,z,W){var G=ct(W?function(ne,pe,we){return z(W(ne),pe,we)}:z);return _.then(function(ne){if(ne)return ne.start(function(){var pe=function(){return ne.continue()};k&&!k(ne,function(we){return pe=we},function(we){ne.stop(we),pe=ie},function(we){ne.fail(we),pe=ie})||G(ne.value,ne,function(we){return pe=we}),pe()})})}var Hs=(Ro.prototype.execute=function(_){var k=this["@@propmod"];if(k.add!==void 0){var z=k.add;if(o(z))return i(i([],o(_)?_:[],!0),z).sort();if(typeof z=="number")return(Number(_)||0)+z;if(typeof z=="bigint")try{return BigInt(_)+z}catch{return BigInt(0)+z}throw new TypeError("Invalid term ".concat(z))}if(k.remove!==void 0){var W=k.remove;if(o(W))return o(_)?_.filter(function(G){return!W.includes(G)}).sort():[];if(typeof W=="number")return Number(_)-W;if(typeof W=="bigint")try{return BigInt(_)-W}catch{return BigInt(0)-W}throw new TypeError("Invalid subtrahend ".concat(W))}return z=(z=k.replacePrefix)===null||z===void 0?void 0:z[0],z&&typeof _=="string"&&_.startsWith(z)?k.replacePrefix[1]+_.substring(z.length):_},Ro);function Ro(_){this["@@propmod"]=_}var xs=(Wn.prototype._read=function(_,k){var z=this._ctx;return z.error?z.table._trans(null,_r.bind(null,z.error)):z.table._trans("readonly",_).then(k)},Wn.prototype._write=function(_){var k=this._ctx;return k.error?k.table._trans(null,_r.bind(null,k.error)):k.table._trans("readwrite",_,"locked")},Wn.prototype._addAlgorithm=function(_){var k=this._ctx;k.algorithm=Ws(k.algorithm,_)},Wn.prototype._iterate=function(_,k){return Zl(this._ctx,_,k,this._ctx.table.core)},Wn.prototype.clone=function(_){var k=Object.create(this.constructor.prototype),z=Object.create(this._ctx);return _&&l(z,_),k._ctx=z,k},Wn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Wn.prototype.each=function(_){var k=this._ctx;return this._read(function(z){return Zl(k,_,z,k.table.core)})},Wn.prototype.count=function(_){var k=this;return this._read(function(z){var W=k._ctx,G=W.table.core;if(bs(W,!0))return G.count({trans:z,query:{index:Mo(W,G.schema),range:W.range}}).then(function(pe){return Math.min(pe,W.limit)});var ne=0;return Zl(W,function(){return++ne,!1},z,G).then(function(){return ne})}).then(_)},Wn.prototype.sortBy=function(_,k){var z=_.split(".").reverse(),W=z[0],G=z.length-1;function ne(Ne,Te){return Te?ne(Ne[z[Te]],Te-1):Ne[W]}var pe=this._ctx.dir==="next"?1:-1;function we(Ne,Te){return kn(ne(Ne,G),ne(Te,G))*pe}return this.toArray(function(Ne){return Ne.sort(we)}).then(k)},Wn.prototype.toArray=function(_){var k=this;return this._read(function(z){var W=k._ctx;if(W.dir==="next"&&bs(W,!0)&&0<W.limit){var G=W.valueMapper,ne=Mo(W,W.table.core.schema);return W.table.core.query({trans:z,limit:W.limit,values:!0,query:{index:ne,range:W.range}}).then(function(we){return we=we.result,G?we.map(G):we})}var pe=[];return Zl(W,function(we){return pe.push(we)},z,W.table.core).then(function(){return pe})},_)},Wn.prototype.offset=function(_){var k=this._ctx;return _<=0||(k.offset+=_,bs(k)?wa(k,function(){var z=_;return function(W,G){return z===0||(z===1?--z:G(function(){W.advance(z),z=0}),!1)}}):wa(k,function(){var z=_;return function(){return--z<0}})),this},Wn.prototype.limit=function(_){return this._ctx.limit=Math.min(this._ctx.limit,_),wa(this._ctx,function(){var k=_;return function(z,W,G){return--k<=0&&W(G),0<=k}},!0),this},Wn.prototype.until=function(_,k){return fr(this._ctx,function(z,W,G){return!_(z.value)||(W(G),k)}),this},Wn.prototype.first=function(_){return this.limit(1).toArray(function(k){return k[0]}).then(_)},Wn.prototype.last=function(_){return this.reverse().first(_)},Wn.prototype.filter=function(_){var k;return fr(this._ctx,function(z){return _(z.value)}),(k=this._ctx).isMatch=Ws(k.isMatch,_),this},Wn.prototype.and=function(_){return this.filter(_)},Wn.prototype.or=function(_){return new this.db.WhereClause(this._ctx.table,_,this)},Wn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Wn.prototype.desc=function(){return this.reverse()},Wn.prototype.eachKey=function(_){var k=this._ctx;return k.keysOnly=!k.isMatch,this.each(function(z,W){_(W.key,W)})},Wn.prototype.eachUniqueKey=function(_){return this._ctx.unique="unique",this.eachKey(_)},Wn.prototype.eachPrimaryKey=function(_){var k=this._ctx;return k.keysOnly=!k.isMatch,this.each(function(z,W){_(W.primaryKey,W)})},Wn.prototype.keys=function(_){var k=this._ctx;k.keysOnly=!k.isMatch;var z=[];return this.each(function(W,G){z.push(G.key)}).then(function(){return z}).then(_)},Wn.prototype.primaryKeys=function(_){var k=this._ctx;if(k.dir==="next"&&bs(k,!0)&&0<k.limit)return this._read(function(W){var G=Mo(k,k.table.core.schema);return k.table.core.query({trans:W,values:!1,limit:k.limit,query:{index:G,range:k.range}})}).then(function(W){return W.result}).then(_);k.keysOnly=!k.isMatch;var z=[];return this.each(function(W,G){z.push(G.primaryKey)}).then(function(){return z}).then(_)},Wn.prototype.uniqueKeys=function(_){return this._ctx.unique="unique",this.keys(_)},Wn.prototype.firstKey=function(_){return this.limit(1).keys(function(k){return k[0]}).then(_)},Wn.prototype.lastKey=function(_){return this.reverse().firstKey(_)},Wn.prototype.distinct=function(){var _=this._ctx,_=_.index&&_.table.schema.idxByName[_.index];if(!_||!_.multi)return this;var k={};return fr(this._ctx,function(G){var W=G.primaryKey.toString(),G=f(k,W);return k[W]=!0,!G}),this},Wn.prototype.modify=function(_){var k=this,z=this._ctx;return this._write(function(W){var G,ne,pe;pe=typeof _=="function"?_:(G=s(_),ne=G.length,function(Ve){for(var Xe=!1,et=0;et<ne;++et){var tt=G[et],_t=_[tt],Mt=D(Ve,tt);_t instanceof Hs?(j(Ve,tt,_t.execute(Mt)),Xe=!0):Mt!==_t&&(j(Ve,tt,_t),Xe=!0)}return Xe});var we=z.table.core,Ae=we.schema.primaryKey,Ne=Ae.outbound,Te=Ae.extractKey,Me=200,Ae=k.db._options.modifyChunkSize;Ae&&(Me=typeof Ae=="object"?Ae[we.name]||Ae["*"]||200:Ae);function ke(Ve,tt){var et=tt.failures,tt=tt.numFailures;Pe+=Ve-tt;for(var _t=0,Mt=s(et);_t<Mt.length;_t++){var Nt=Mt[_t];je.push(et[Nt])}}var je=[],Pe=0,Ie=[],ze=_===_u;return k.clone().primaryKeys().then(function(Ve){function Xe(tt){var _t=Math.min(Me,Ve.length-tt),Mt=Ve.slice(tt,tt+_t);return(ze?Promise.resolve([]):we.getMany({trans:W,keys:Mt,cache:"immutable"})).then(function(Nt){var Dt=[],Vt=[],Lt=Ne?[]:null,Ut=ze?Mt:[];if(!ze)for(var Dn=0;Dn<_t;++Dn){var Zn=Nt[Dn],Nn={value:L(Zn),primKey:Ve[tt+Dn]};pe.call(Nn,Nn.value,Nn)!==!1&&(Nn.value==null?Ut.push(Ve[tt+Dn]):Ne||kn(Te(Zn),Te(Nn.value))===0?(Vt.push(Nn.value),Ne&&Lt.push(Ve[tt+Dn])):(Ut.push(Ve[tt+Dn]),Dt.push(Nn.value)))}return Promise.resolve(0<Dt.length&&we.mutate({trans:W,type:"add",values:Dt}).then(function(ci){for(var jn in ci.failures)Ut.splice(parseInt(jn),1);ke(Dt.length,ci)})).then(function(){return(0<Vt.length||et&&typeof _=="object")&&we.mutate({trans:W,type:"put",keys:Lt,values:Vt,criteria:et,changeSpec:typeof _!="function"&&_,isAdditionalChunk:0<tt}).then(function(ci){return ke(Vt.length,ci)})}).then(function(){return(0<Ut.length||et&&ze)&&we.mutate({trans:W,type:"delete",keys:Ut,criteria:et,isAdditionalChunk:0<tt}).then(function(ci){return xl(z.table,Ut,ci)}).then(function(ci){return ke(Ut.length,ci)})}).then(function(){return Ve.length>tt+_t&&Xe(tt+Me)})})}var et=bs(z)&&z.limit===1/0&&(typeof _!="function"||ze)&&{index:z.index,range:z.range};return Xe(0).then(function(){if(0<je.length)throw new oe("Error modifying one or more objects",je,Pe,Ie);return Ve.length})})})},Wn.prototype.delete=function(){var _=this._ctx,k=_.range;return!bs(_)||_.table.schema.yProps||!_.isPrimKey&&k.type!==3?this.modify(_u):this._write(function(z){var W=_.table.core.schema.primaryKey,G=k;return _.table.core.count({trans:z,query:{index:W,range:G}}).then(function(ne){return _.table.core.mutate({trans:z,type:"deleteRange",range:G}).then(function(Ne){var we=Ne.failures,Ne=Ne.numFailures;if(Ne)throw new oe("Could not delete some values",Object.keys(we).map(function(Te){return we[Te]}),ne-Ne);return ne-Ne})})})},Wn);function Wn(){}var _u=function(_,k){return k.value=null};function Hf(_,k){return _<k?-1:_===k?0:1}function qf(_,k){return k<_?-1:_===k?0:1}function Gi(_,k,z){return _=_ instanceof Jl?new _.Collection(_):_,_._ctx.error=new(z||TypeError)(k),_}function ws(_){return new _.Collection(_,function(){return Lo("")}).limit(0)}function Sa(_,k,z,W){var G,ne,pe,we,Ne,Te,Me,Ae=z.length;if(!z.every(function(Pe){return typeof Pe=="string"}))return Gi(_,Fc);function ke(Pe){G=Pe==="next"?function(ze){return ze.toUpperCase()}:function(ze){return ze.toLowerCase()},ne=Pe==="next"?function(ze){return ze.toLowerCase()}:function(ze){return ze.toUpperCase()},pe=Pe==="next"?Hf:qf;var Ie=z.map(function(ze){return{lower:ne(ze),upper:G(ze)}}).sort(function(ze,Ve){return pe(ze.lower,Ve.lower)});we=Ie.map(function(ze){return ze.upper}),Ne=Ie.map(function(ze){return ze.lower}),Me=(Te=Pe)==="next"?"":W}ke("next"),_=new _.Collection(_,function(){return Yi(we[0],Ne[Ae-1]+W)}),_._ondirectionchange=function(Pe){ke(Pe)};var je=0;return _._addAlgorithm(function(Pe,Ie,ze){var Ve=Pe.key;if(typeof Ve!="string")return!1;var Xe=ne(Ve);if(k(Xe,Ne,je))return!0;for(var et=null,tt=je;tt<Ae;++tt){var _t=function(Mt,Nt,Dt,Vt,Lt,Ut){for(var Dn=Math.min(Mt.length,Vt.length),Zn=-1,Nn=0;Nn<Dn;++Nn){var ci=Nt[Nn];if(ci!==Vt[Nn])return Lt(Mt[Nn],Dt[Nn])<0?Mt.substr(0,Nn)+Dt[Nn]+Dt.substr(Nn+1):Lt(Mt[Nn],Vt[Nn])<0?Mt.substr(0,Nn)+Vt[Nn]+Dt.substr(Nn+1):0<=Zn?Mt.substr(0,Zn)+Nt[Zn]+Dt.substr(Zn+1):null;Lt(Mt[Nn],ci)<0&&(Zn=Nn)}return Dn<Vt.length&&Ut==="next"?Mt+Dt.substr(Mt.length):Dn<Mt.length&&Ut==="prev"?Mt.substr(0,Dt.length):Zn<0?null:Mt.substr(0,Zn)+Vt[Zn]+Dt.substr(Zn+1)}(Ve,Xe,we[tt],Ne[tt],pe,Te);_t===null&&et===null?je=tt+1:(et===null||0<pe(et,_t))&&(et=_t)}return Ie(et!==null?function(){Pe.continue(et+Me)}:ze),!1}),_}function Yi(_,k,z,W){return{type:2,lower:_,upper:k,lowerOpen:z,upperOpen:W}}function Lo(_){return{type:1,lower:_,upper:_}}var Jl=(Object.defineProperty(Xt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Xt.prototype.between=function(_,k,z,W){z=z!==!1,W=W===!0;try{return 0<this._cmp(_,k)||this._cmp(_,k)===0&&(z||W)&&(!z||!W)?ws(this):new this.Collection(this,function(){return Yi(_,k,!z,!W)})}catch{return Gi(this,ca)}},Xt.prototype.equals=function(_){return _==null?Gi(this,ca):new this.Collection(this,function(){return Lo(_)})},Xt.prototype.above=function(_){return _==null?Gi(this,ca):new this.Collection(this,function(){return Yi(_,void 0,!0)})},Xt.prototype.aboveOrEqual=function(_){return _==null?Gi(this,ca):new this.Collection(this,function(){return Yi(_,void 0,!1)})},Xt.prototype.below=function(_){return _==null?Gi(this,ca):new this.Collection(this,function(){return Yi(void 0,_,!1,!0)})},Xt.prototype.belowOrEqual=function(_){return _==null?Gi(this,ca):new this.Collection(this,function(){return Yi(void 0,_)})},Xt.prototype.startsWith=function(_){return typeof _!="string"?Gi(this,Fc):this.between(_,_+Oo,!0,!0)},Xt.prototype.startsWithIgnoreCase=function(_){return _===""?this.startsWith(_):Sa(this,function(k,z){return k.indexOf(z[0])===0},[_],Oo)},Xt.prototype.equalsIgnoreCase=function(_){return Sa(this,function(k,z){return k===z[0]},[_],"")},Xt.prototype.anyOfIgnoreCase=function(){var _=le.apply(ee,arguments);return _.length===0?ws(this):Sa(this,function(k,z){return z.indexOf(k)!==-1},_,"")},Xt.prototype.startsWithAnyOfIgnoreCase=function(){var _=le.apply(ee,arguments);return _.length===0?ws(this):Sa(this,function(k,z){return z.some(function(W){return k.indexOf(W)===0})},_,Oo)},Xt.prototype.anyOf=function(){var _=this,k=le.apply(ee,arguments),z=this._cmp;try{k.sort(z)}catch{return Gi(this,ca)}if(k.length===0)return ws(this);var W=new this.Collection(this,function(){return Yi(k[0],k[k.length-1])});W._ondirectionchange=function(ne){z=ne==="next"?_._ascending:_._descending,k.sort(z)};var G=0;return W._addAlgorithm(function(ne,pe,we){for(var Ne=ne.key;0<z(Ne,k[G]);)if(++G===k.length)return pe(we),!1;return z(Ne,k[G])===0||(pe(function(){ne.continue(k[G])}),!1)}),W},Xt.prototype.notEqual=function(_){return this.inAnyRange([[-1/0,_],[_,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Xt.prototype.noneOf=function(){var _=le.apply(ee,arguments);if(_.length===0)return new this.Collection(this);try{_.sort(this._ascending)}catch{return Gi(this,ca)}var k=_.reduce(function(z,W){return z?z.concat([[z[z.length-1][1],W]]):[[-1/0,W]]},null);return k.push([_[_.length-1],this.db._maxKey]),this.inAnyRange(k,{includeLowers:!1,includeUppers:!1})},Xt.prototype.inAnyRange=function(Ve,k){var z=this,W=this._cmp,G=this._ascending,ne=this._descending,pe=this._min,we=this._max;if(Ve.length===0)return ws(this);if(!Ve.every(function(Xe){return Xe[0]!==void 0&&Xe[1]!==void 0&&G(Xe[0],Xe[1])<=0}))return Gi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var Ne=!k||k.includeLowers!==!1,Te=k&&k.includeUppers===!0,Me,Ae=G;function ke(Xe,et){return Ae(Xe[0],et[0])}try{(Me=Ve.reduce(function(Xe,et){for(var tt=0,_t=Xe.length;tt<_t;++tt){var Mt=Xe[tt];if(W(et[0],Mt[1])<0&&0<W(et[1],Mt[0])){Mt[0]=pe(Mt[0],et[0]),Mt[1]=we(Mt[1],et[1]);break}}return tt===_t&&Xe.push(et),Xe},[])).sort(ke)}catch{return Gi(this,ca)}var je=0,Pe=Te?function(Xe){return 0<G(Xe,Me[je][1])}:function(Xe){return 0<=G(Xe,Me[je][1])},Ie=Ne?function(Xe){return 0<ne(Xe,Me[je][0])}:function(Xe){return 0<=ne(Xe,Me[je][0])},ze=Pe,Ve=new this.Collection(this,function(){return Yi(Me[0][0],Me[Me.length-1][1],!Ne,!Te)});return Ve._ondirectionchange=function(Xe){Ae=Xe==="next"?(ze=Pe,G):(ze=Ie,ne),Me.sort(ke)},Ve._addAlgorithm(function(Xe,et,tt){for(var _t,Mt=Xe.key;ze(Mt);)if(++je===Me.length)return et(tt),!1;return!Pe(_t=Mt)&&!Ie(_t)||(z._cmp(Mt,Me[je][1])===0||z._cmp(Mt,Me[je][0])===0||et(function(){Ae===G?Xe.continue(Me[je][0]):Xe.continue(Me[je][1])}),!1)}),Ve},Xt.prototype.startsWithAnyOf=function(){var _=le.apply(ee,arguments);return _.every(function(k){return typeof k=="string"})?_.length===0?ws(this):this.inAnyRange(_.map(function(k){return[k,k+Oo]})):Gi(this,"startsWithAnyOf() only works with strings")},Xt);function Xt(){}function Xi(_){return ct(function(k){return ec(k),_(k.target.error),!1})}function ec(_){_.stopPropagation&&_.stopPropagation(),_.preventDefault&&_.preventDefault()}var tc="storagemutated",Au="x-storagemutated-1",Wr=ys(null,tc),Fo=(Ss.prototype._lock=function(){return A(!Ct.global),++this._reculock,this._reculock!==1||Ct.global||(Ct.lockOwnerFor=this),this},Ss.prototype._unlock=function(){if(A(!Ct.global),--this._reculock==0)for(Ct.global||(Ct.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var _=this._blockedFuncs.shift();try{xa(_[1],_[0])}catch{}}return this},Ss.prototype._locked=function(){return this._reculock&&Ct.lockOwnerFor!==this},Ss.prototype.create=function(_){var k=this;if(!this.mode)return this;var z=this.db.idbdb,W=this.db._state.dbOpenError;if(A(!this.idbtrans),!_&&!z)switch(W&&W.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(W);case"MissingAPIError":throw new fe.MissingAPI(W.message,W);default:throw new fe.OpenFailed(W)}if(!this.active)throw new fe.TransactionInactive;return A(this._completion._state===null),(_=this.idbtrans=_||(this.db.core||z).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ct(function(G){ec(G),k._reject(_.error)}),_.onabort=ct(function(G){ec(G),k.active&&k._reject(new fe.Abort(_.error)),k.active=!1,k.on("abort").fire(G)}),_.oncomplete=ct(function(){k.active=!1,k._resolve(),"mutatedParts"in _&&Wr.storagemutated.fire(_.mutatedParts)}),this},Ss.prototype._promise=function(_,k,z){var W=this;if(_==="readwrite"&&this.mode!=="readwrite")return _r(new fe.ReadOnly("Transaction is readonly"));if(!this.active)return _r(new fe.TransactionInactive);if(this._locked())return new wt(function(ne,pe){W._blockedFuncs.push([function(){W._promise(_,k,z).then(ne,pe)},Ct])});if(z)return kr(function(){var ne=new wt(function(pe,we){W._lock();var Ne=k(pe,we,W);Ne&&Ne.then&&Ne.then(pe,we)});return ne.finally(function(){return W._unlock()}),ne._lib=!0,ne});var G=new wt(function(ne,pe){var we=k(ne,pe,W);we&&we.then&&we.then(ne,pe)});return G._lib=!0,G},Ss.prototype._root=function(){return this.parent?this.parent._root():this},Ss.prototype.waitFor=function(_){var k,z=this._root(),W=wt.resolve(_);z._waitingFor?z._waitingFor=z._waitingFor.then(function(){return W}):(z._waitingFor=W,z._waitingQueue=[],k=z.idbtrans.objectStore(z.storeNames[0]),function ne(){for(++z._spinCount;z._waitingQueue.length;)z._waitingQueue.shift()();z._waitingFor&&(k.get(-1/0).onsuccess=ne)}());var G=z._waitingFor;return new wt(function(ne,pe){W.then(function(we){return z._waitingQueue.push(ct(ne.bind(null,we)))},function(we){return z._waitingQueue.push(ct(pe.bind(null,we)))}).finally(function(){z._waitingFor===G&&(z._waitingFor=null)})})},Ss.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new fe.Abort))},Ss.prototype.table=function(_){var k=this._memoizedTables||(this._memoizedTables={});if(f(k,_))return k[_];var z=this.schema[_];if(!z)throw new fe.NotFound("Table "+_+" not part of transaction");return z=new this.db.Table(_,z,this),z.core=this.db.core.table(_),k[_]=z},Ss);function Ss(){}function wl(_,k,z,W,G,ne,pe,we){return{name:_,keyPath:k,unique:z,multi:W,auto:G,compound:ne,src:(z&&!pe?"&":"")+(W?"*":"")+(G?"++":"")+co(k),type:we}}function co(_){return typeof _=="string"?_:_?"["+[].join.call(_,"+")+"]":""}function Sl(_,k,z){return{name:_,primKey:k,indexes:z,mappedClass:null,idxByName:(W=function(G){return[G.name,G]},z.reduce(function(G,ne,pe){return pe=W(ne,pe),pe&&(G[pe[0]]=pe[1]),G},{}))};var W}var _a=function(_){try{return _.only([[]]),_a=function(){return[[]]},[[]]}catch{return _a=function(){return Oo},Oo}};function _s(_){return _==null?function(){}:typeof _=="string"?(k=_).split(".").length===1?function(z){return z[k]}:function(z){return D(z,k)}:function(z){return D(z,_)};var k}function _l(_){return[].slice.call(_)}var Cu=0;function or(_){return _==null?":id":typeof _=="string"?_:"[".concat(_.join("+"),"]")}function ju(_,k,Ne){function W(ze){if(ze.type===3)return null;if(ze.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var je=ze.lower,Pe=ze.upper,Ie=ze.lowerOpen,ze=ze.upperOpen;return je===void 0?Pe===void 0?null:k.upperBound(Pe,!!ze):Pe===void 0?k.lowerBound(je,!!Ie):k.bound(je,Pe,!!Ie,!!ze)}function G(ke){var je,Pe=ke.name;return{name:Pe,schema:ke,mutate:function(Ie){var ze=Ie.trans,Ve=Ie.type,Xe=Ie.keys,et=Ie.values,tt=Ie.range;return new Promise(function(_t,Mt){_t=ct(_t);var Nt=ze.objectStore(Pe),Dt=Nt.keyPath==null,Vt=Ve==="put"||Ve==="add";if(!Vt&&Ve!=="delete"&&Ve!=="deleteRange")throw new Error("Invalid operation type: "+Ve);var Lt,Ut=(Xe||et||{length:1}).length;if(Xe&&et&&Xe.length!==et.length)throw new Error("Given keys array must have same length as given values array.");if(Ut===0)return _t({numFailures:0,failures:{},results:[],lastResult:void 0});function Dn(fa){++ci,ec(fa)}var Zn=[],Nn=[],ci=0;if(Ve==="deleteRange"){if(tt.type===4)return _t({numFailures:ci,failures:Nn,results:[],lastResult:void 0});tt.type===3?Zn.push(Lt=Nt.clear()):Zn.push(Lt=Nt.delete(W(tt)))}else{var Dt=Vt?Dt?[et,Xe]:[et,null]:[Xe,null],jn=Dt[0],ja=Dt[1];if(Vt)for(var Ea=0;Ea<Ut;++Ea)Zn.push(Lt=ja&&ja[Ea]!==void 0?Nt[Ve](jn[Ea],ja[Ea]):Nt[Ve](jn[Ea])),Lt.onerror=Dn;else for(Ea=0;Ea<Ut;++Ea)Zn.push(Lt=Nt[Ve](jn[Ea])),Lt.onerror=Dn}function Sd(fa){fa=fa.target.result,Zn.forEach(function(Ji,Cs){return Ji.error!=null&&(Nn[Cs]=Ji.error)}),_t({numFailures:ci,failures:Nn,results:Ve==="delete"?Xe:Zn.map(function(Ji){return Ji.result}),lastResult:fa})}Lt.onerror=function(fa){Dn(fa),Sd(fa)},Lt.onsuccess=Sd})},getMany:function(Ie){var ze=Ie.trans,Ve=Ie.keys;return new Promise(function(Xe,et){Xe=ct(Xe);for(var tt,_t=ze.objectStore(Pe),Mt=Ve.length,Nt=new Array(Mt),Dt=0,Vt=0,Lt=function(Zn){Zn=Zn.target,Nt[Zn._pos]=Zn.result,++Vt===Dt&&Xe(Nt)},Ut=Xi(et),Dn=0;Dn<Mt;++Dn)Ve[Dn]!=null&&((tt=_t.get(Ve[Dn]))._pos=Dn,tt.onsuccess=Lt,tt.onerror=Ut,++Dt);Dt===0&&Xe(Nt)})},get:function(Ie){var ze=Ie.trans,Ve=Ie.key;return new Promise(function(Xe,et){Xe=ct(Xe);var tt=ze.objectStore(Pe).get(Ve);tt.onsuccess=function(_t){return Xe(_t.target.result)},tt.onerror=Xi(et)})},query:(je=Te,function(Ie){return new Promise(function(ze,Ve){ze=ct(ze);var Xe,et,tt,Dt=Ie.trans,_t=Ie.values,Mt=Ie.limit,Lt=Ie.query,Nt=Mt===1/0?void 0:Mt,Vt=Lt.index,Lt=Lt.range,Dt=Dt.objectStore(Pe),Vt=Vt.isPrimaryKey?Dt:Dt.index(Vt.name),Lt=W(Lt);if(Mt===0)return ze({result:[]});je?((Nt=_t?Vt.getAll(Lt,Nt):Vt.getAllKeys(Lt,Nt)).onsuccess=function(Ut){return ze({result:Ut.target.result})},Nt.onerror=Xi(Ve)):(Xe=0,et=!_t&&"openKeyCursor"in Vt?Vt.openKeyCursor(Lt):Vt.openCursor(Lt),tt=[],et.onsuccess=function(Ut){var Dn=et.result;return Dn?(tt.push(_t?Dn.value:Dn.primaryKey),++Xe===Mt?ze({result:tt}):void Dn.continue()):ze({result:tt})},et.onerror=Xi(Ve))})}),openCursor:function(Ie){var ze=Ie.trans,Ve=Ie.values,Xe=Ie.query,et=Ie.reverse,tt=Ie.unique;return new Promise(function(_t,Mt){_t=ct(_t);var Vt=Xe.index,Nt=Xe.range,Dt=ze.objectStore(Pe),Dt=Vt.isPrimaryKey?Dt:Dt.index(Vt.name),Vt=et?tt?"prevunique":"prev":tt?"nextunique":"next",Lt=!Ve&&"openKeyCursor"in Dt?Dt.openKeyCursor(W(Nt),Vt):Dt.openCursor(W(Nt),Vt);Lt.onerror=Xi(Mt),Lt.onsuccess=ct(function(Ut){var Dn,Zn,Nn,ci,jn=Lt.result;jn?(jn.___id=++Cu,jn.done=!1,Dn=jn.continue.bind(jn),Zn=(Zn=jn.continuePrimaryKey)&&Zn.bind(jn),Nn=jn.advance.bind(jn),ci=function(){throw new Error("Cursor not stopped")},jn.trans=ze,jn.stop=jn.continue=jn.continuePrimaryKey=jn.advance=function(){throw new Error("Cursor not started")},jn.fail=ct(Mt),jn.next=function(){var ja=this,Ea=1;return this.start(function(){return Ea--?ja.continue():ja.stop()}).then(function(){return ja})},jn.start=function(ja){function Ea(){if(Lt.result)try{ja()}catch(fa){jn.fail(fa)}else jn.done=!0,jn.start=function(){throw new Error("Cursor behind last entry")},jn.stop()}var Sd=new Promise(function(fa,Ji){fa=ct(fa),Lt.onerror=Xi(Ji),jn.fail=Ji,jn.stop=function(Cs){jn.stop=jn.continue=jn.continuePrimaryKey=jn.advance=ci,fa(Cs)}});return Lt.onsuccess=ct(function(fa){Lt.onsuccess=Ea,Ea()}),jn.continue=Dn,jn.continuePrimaryKey=Zn,jn.advance=Nn,Ea(),Sd},_t(jn)):_t(null)},Mt)})},count:function(Ie){var ze=Ie.query,Ve=Ie.trans,Xe=ze.index,et=ze.range;return new Promise(function(tt,_t){var Mt=Ve.objectStore(Pe),Nt=Xe.isPrimaryKey?Mt:Mt.index(Xe.name),Mt=W(et),Nt=Mt?Nt.count(Mt):Nt.count();Nt.onsuccess=ct(function(Dt){return tt(Dt.target.result)}),Nt.onerror=Xi(_t)})}}}var ne,pe,we,Me=(pe=Ne,we=_l((ne=_).objectStoreNames),{schema:{name:ne.name,tables:we.map(function(ke){return pe.objectStore(ke)}).map(function(ke){var je=ke.keyPath,ze=ke.autoIncrement,Pe=o(je),Ie={},ze={name:ke.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:je==null,compound:Pe,keyPath:je,autoIncrement:ze,unique:!0,extractKey:_s(je)},indexes:_l(ke.indexNames).map(function(Ve){return ke.index(Ve)}).map(function(tt){var Xe=tt.name,et=tt.unique,_t=tt.multiEntry,tt=tt.keyPath,_t={name:Xe,compound:o(tt),keyPath:tt,unique:et,multiEntry:_t,extractKey:_s(tt)};return Ie[or(tt)]=_t}),getIndexByKeyPath:function(Ve){return Ie[or(Ve)]}};return Ie[":id"]=ze.primaryKey,je!=null&&(Ie[or(je)]=ze.primaryKey),ze})},hasGetAll:0<we.length&&"getAll"in pe.objectStore(we[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Ne=Me.schema,Te=Me.hasGetAll,Me=Ne.tables.map(G),Ae={};return Me.forEach(function(ke){return Ae[ke.name]=ke}),{stack:"dbcore",transaction:_.transaction.bind(_),table:function(ke){if(!Ae[ke])throw new Error("Table '".concat(ke,"' not found"));return Ae[ke]},MIN_KEY:-1/0,MAX_KEY:_a(k),schema:Ne}}function nc(_,k,z,W){var G=z.IDBKeyRange;return z.indexedDB,{dbcore:(W=ju(k,G,W),_.dbcore.reduce(function(ne,pe){return pe=pe.create,r(r({},ne),pe(ne))},W))}}function qs(_,W){var z=W.db,W=nc(_._middlewares,z,_._deps,W);_.core=W.dbcore,_.tables.forEach(function(G){var ne=G.name;_.core.schema.tables.some(function(pe){return pe.name===ne})&&(G.core=_.core.table(ne),_[ne]instanceof _.Table&&(_[ne].core=G.core))})}function zo(_,k,z,W){z.forEach(function(G){var ne=W[G];k.forEach(function(pe){var we=function Ne(Te,Me){return v(Te,Me)||(Te=u(Te))&&Ne(Te,Me)}(pe,G);(!we||"value"in we&&we.value===void 0)&&(pe===_.Transaction.prototype||pe instanceof _.Transaction?g(pe,G,{get:function(){return this.table(G)},set:function(Ne){h(this,G,{value:Ne,writable:!0,configurable:!0,enumerable:!0})}}):pe[G]=new _.Table(G,ne))})})}function $o(_,k){k.forEach(function(z){for(var W in z)z[W]instanceof _.Table&&delete z[W]})}function Al(_,k){return _._cfg.version-k._cfg.version}function Cl(_,k,z,W){var G=_._dbSchema;z.objectStoreNames.contains("$meta")&&!G.$meta&&(G.$meta=Sl("$meta",Vc("")[0],[]),_._storeNames.push("$meta"));var ne=_._createTransaction("readwrite",_._storeNames,G);ne.create(z),ne._completion.catch(W);var pe=ne._reject.bind(ne),we=Ct.transless||Ct;kr(function(){return Ct.trans=ne,Ct.transless=we,k!==0?(qs(_,z),Te=k,((Ne=ne).storeNames.includes("$meta")?Ne.table("$meta").get("version").then(function(Me){return Me??Te}):wt.resolve(Te)).then(function(Me){return ke=Me,je=ne,Pe=z,Ie=[],Me=(Ae=_)._versions,ze=Ae._dbSchema=Bo(0,Ae.idbdb,Pe),(Me=Me.filter(function(Ve){return Ve._cfg.version>=ke})).length!==0?(Me.forEach(function(Ve){Ie.push(function(){var Xe=ze,et=Ve._cfg.dbschema;Qa(Ae,Xe,Pe),Qa(Ae,et,Pe),ze=Ae._dbSchema=et;var tt=rc(Xe,et);tt.add.forEach(function(Vt){Ks(Pe,Vt[0],Vt[1].primKey,Vt[1].indexes)}),tt.change.forEach(function(Vt){if(Vt.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var Lt=Pe.objectStore(Vt.name);Vt.add.forEach(function(Ut){return jl(Lt,Ut)}),Vt.change.forEach(function(Ut){Lt.deleteIndex(Ut.name),jl(Lt,Ut)}),Vt.del.forEach(function(Ut){return Lt.deleteIndex(Ut)})});var _t=Ve._cfg.contentUpgrade;if(_t&&Ve._cfg.version>ke){qs(Ae,Pe),je._memoizedTables={};var Mt=N(et);tt.del.forEach(function(Vt){Mt[Vt]=Xe[Vt]}),$o(Ae,[Ae.Transaction.prototype]),zo(Ae,[Ae.Transaction.prototype],s(Mt),Mt),je.schema=Mt;var Nt,Dt=se(_t);return Dt&&Br(),tt=wt.follow(function(){var Vt;(Nt=_t(je))&&Dt&&(Vt=Tr.bind(null,null),Nt.then(Vt,Vt))}),Nt&&typeof Nt.then=="function"?wt.resolve(Nt):tt.then(function(){return Nt})}}),Ie.push(function(Xe){var et,tt,_t=Ve._cfg.dbschema;et=_t,tt=Xe,[].slice.call(tt.db.objectStoreNames).forEach(function(Mt){return et[Mt]==null&&tt.db.deleteObjectStore(Mt)}),$o(Ae,[Ae.Transaction.prototype]),zo(Ae,[Ae.Transaction.prototype],Ae._storeNames,Ae._dbSchema),je.schema=Ae._dbSchema}),Ie.push(function(Xe){Ae.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Ae.idbdb.version/10)===Ve._cfg.version?(Ae.idbdb.deleteObjectStore("$meta"),delete Ae._dbSchema.$meta,Ae._storeNames=Ae._storeNames.filter(function(et){return et!=="$meta"})):Xe.objectStore("$meta").put(Ve._cfg.version,"version"))})}),function Ve(){return Ie.length?wt.resolve(Ie.shift()(je.idbtrans)).then(Ve):wt.resolve()}().then(function(){Fa(ze,Pe)})):wt.resolve();var Ae,ke,je,Pe,Ie,ze}).catch(pe)):(s(G).forEach(function(Me){Ks(z,Me,G[Me].primKey,G[Me].indexes)}),qs(_,z),void wt.follow(function(){return _.on.populate.fire(ne)}).catch(pe));var Ne,Te})}function As(_,k){Fa(_._dbSchema,k),k.db.version%10!=0||k.objectStoreNames.contains("$meta")||k.db.createObjectStore("$meta").add(Math.ceil(k.db.version/10-1),"version");var z=Bo(0,_.idbdb,k);Qa(_,_._dbSchema,k);for(var W=0,G=rc(z,_._dbSchema).change;W<G.length;W++){var ne=function(pe){if(pe.change.length||pe.recreate)return console.warn("Unable to patch indexes of table ".concat(pe.name," because it has changes on the type of index or primary key.")),{value:void 0};var we=k.objectStore(pe.name);pe.add.forEach(function(Ne){ht&&console.debug("Dexie upgrade patch: Creating missing index ".concat(pe.name,".").concat(Ne.src)),jl(we,Ne)})}(G[W]);if(typeof ne=="object")return ne.value}}function rc(_,k){var z,W={del:[],add:[],change:[]};for(z in _)k[z]||W.del.push(z);for(z in k){var G=_[z],ne=k[z];if(G){var pe={name:z,def:ne,recreate:!1,del:[],add:[],change:[]};if(""+(G.primKey.keyPath||"")!=""+(ne.primKey.keyPath||"")||G.primKey.auto!==ne.primKey.auto)pe.recreate=!0,W.change.push(pe);else{var we=G.idxByName,Ne=ne.idxByName,Te=void 0;for(Te in we)Ne[Te]||pe.del.push(Te);for(Te in Ne){var Me=we[Te],Ae=Ne[Te];Me?Me.src!==Ae.src&&pe.change.push(Ae):pe.add.push(Ae)}(0<pe.del.length||0<pe.add.length||0<pe.change.length)&&W.change.push(pe)}}else W.add.push([z,ne])}return W}function Ks(_,k,z,W){var G=_.db.createObjectStore(k,z.keyPath?{keyPath:z.keyPath,autoIncrement:z.auto}:{autoIncrement:z.auto});return W.forEach(function(ne){return jl(G,ne)}),G}function Fa(_,k){s(_).forEach(function(z){k.db.objectStoreNames.contains(z)||(ht&&console.debug("Dexie: Creating missing table",z),Ks(k,z,_[z].primKey,_[z].indexes))})}function jl(_,k){_.createIndex(k.name,k.keyPath,{unique:k.unique,multiEntry:k.multi})}function Bo(_,k,z){var W={};return b(k.objectStoreNames,0).forEach(function(G){for(var ne=z.objectStore(G),pe=wl(co(Te=ne.keyPath),Te||"",!0,!1,!!ne.autoIncrement,Te&&typeof Te!="string",!0),we=[],Ne=0;Ne<ne.indexNames.length;++Ne){var Me=ne.index(ne.indexNames[Ne]),Te=Me.keyPath,Me=wl(Me.name,Te,!!Me.unique,!!Me.multiEntry,!1,Te&&typeof Te!="string",!1);we.push(Me)}W[G]=Sl(G,pe,we)}),W}function Qa(_,k,z){for(var W=z.db.objectStoreNames,G=0;G<W.length;++G){var ne=W[G],pe=z.objectStore(ne);_._hasGetAll="getAll"in pe;for(var we=0;we<pe.indexNames.length;++we){var Ne=pe.indexNames[we],Te=pe.index(Ne).keyPath,Me=typeof Te=="string"?Te:"["+b(Te).join("+")+"]";!k[ne]||(Te=k[ne].idxByName[Me])&&(Te.name=Ne,delete k[ne].idxByName[Me],k[ne].idxByName[Ne]=Te)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(_._hasGetAll=!1)}function Vc(_){return _.split(",").map(function(k,z){var ne=k.split(":"),W=(G=ne[1])===null||G===void 0?void 0:G.trim(),G=(k=ne[0].trim()).replace(/([&*]|\+\+)/g,""),ne=/^\[/.test(G)?G.match(/^\[(.*)\]$/)[1].split("+"):G;return wl(G,ne||null,/\&/.test(k),/\*/.test(k),/\+\+/.test(k),o(ne),z===0,W)})}var R=(Q.prototype._createTableSchema=Sl,Q.prototype._parseIndexSyntax=Vc,Q.prototype._parseStoresSpec=function(_,k){var z=this;s(_).forEach(function(W){if(_[W]!==null){var G=z._parseIndexSyntax(_[W]),ne=G.shift();if(!ne)throw new fe.Schema("Invalid schema for table "+W+": "+_[W]);if(ne.unique=!0,ne.multi)throw new fe.Schema("Primary key cannot be multiEntry*");G.forEach(function(pe){if(pe.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!pe.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),G=z._createTableSchema(W,ne,G),k[W]=G}})},Q.prototype.stores=function(z){var k=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,z):z;var z=k._versions,W={},G={};return z.forEach(function(ne){l(W,ne._cfg.storesSource),G=ne._cfg.dbschema={},ne._parseStoresSpec(W,G)}),k._dbSchema=G,$o(k,[k._allTables,k,k.Transaction.prototype]),zo(k,[k._allTables,k,k.Transaction.prototype,this._cfg.tables],s(G),G),k._storeNames=s(G),this},Q.prototype.upgrade=function(_){return this._cfg.contentUpgrade=Ot(this._cfg.contentUpgrade||ie,_),this},Q);function Q(){}function ge(_,k){var z=_._dbNamesDB;return z||(z=_._dbNamesDB=new Ja(Ei,{addons:[],indexedDB:_,IDBKeyRange:k})).version(1).stores({dbnames:"name"}),z.table("dbnames")}function Ee(_){return _&&typeof _.databases=="function"}function $e(_){return kr(function(){return Ct.letThrough=!0,_()})}function rt(_){return!("from"in _)}var at=function(_,k){if(!this){var z=new at;return _&&"d"in _&&l(z,_),z}l(this,arguments.length?{d:1,from:_,to:1<arguments.length?k:_}:{d:0})};function Wt(_,k,z){var W=kn(k,z);if(!isNaN(W)){if(0<W)throw RangeError();if(rt(_))return l(_,{from:k,to:z,d:1});var G=_.l,W=_.r;if(kn(z,_.from)<0)return G?Wt(G,k,z):_.l={from:k,to:z,d:1,l:null,r:null},Xn(_);if(0<kn(k,_.to))return W?Wt(W,k,z):_.r={from:k,to:z,d:1,l:null,r:null},Xn(_);kn(k,_.from)<0&&(_.from=k,_.l=null,_.d=W?W.d+1:1),0<kn(z,_.to)&&(_.to=z,_.r=null,_.d=_.l?_.l.d+1:1),z=!_.r,G&&!_.l&&Yt(_,G),W&&z&&Yt(_,W)}}function Yt(_,k){rt(k)||function z(W,Ne){var ne=Ne.from,pe=Ne.to,we=Ne.l,Ne=Ne.r;Wt(W,ne,pe),we&&z(W,we),Ne&&z(W,Ne)}(_,k)}function gn(_,k){var z=bn(k),W=z.next();if(W.done)return!1;for(var G=W.value,ne=bn(_),pe=ne.next(G.from),we=pe.value;!W.done&&!pe.done;){if(kn(we.from,G.to)<=0&&0<=kn(we.to,G.from))return!0;kn(G.from,we.from)<0?G=(W=z.next(we.from)).value:we=(pe=ne.next(G.from)).value}return!1}function bn(_){var k=rt(_)?null:{s:0,n:_};return{next:function(z){for(var W=0<arguments.length;k;)switch(k.s){case 0:if(k.s=1,W)for(;k.n.l&&kn(z,k.n.from)<0;)k={up:k,n:k.n.l,s:1};else for(;k.n.l;)k={up:k,n:k.n.l,s:1};case 1:if(k.s=2,!W||kn(z,k.n.to)<=0)return{value:k.n,done:!1};case 2:if(k.n.r){k.s=3,k={up:k,n:k.n.r,s:0};continue}case 3:k=k.up}return{done:!0}}}}function Xn(_){var k,z,W=(((k=_.r)===null||k===void 0?void 0:k.d)||0)-(((z=_.l)===null||z===void 0?void 0:z.d)||0),G=1<W?"r":W<-1?"l":"";G&&(k=G=="r"?"l":"r",z=r({},_),W=_[G],_.from=W.from,_.to=W.to,_[G]=W[G],z[G]=W[k],(_[k]=z).d=lr(z)),_.d=lr(_)}function lr(z){var k=z.r,z=z.l;return(k?z?Math.max(k.d,z.d):k.d:z?z.d:0)+1}function Vr(_,k){return s(k).forEach(function(z){_[z]?Yt(_[z],k[z]):_[z]=function W(G){var ne,pe,we={};for(ne in G)f(G,ne)&&(pe=G[ne],we[ne]=!pe||typeof pe!="object"||T.has(pe.constructor)?pe:W(pe));return we}(k[z])}),_}function hr(_,k){return _.all||k.all||Object.keys(_).some(function(z){return k[z]&&gn(k[z],_[z])})}p(at.prototype,((Zi={add:function(_){return Yt(this,_),this},addKey:function(_){return Wt(this,_,_),this},addKeys:function(_){var k=this;return _.forEach(function(z){return Wt(k,z,z)}),this},hasKey:function(_){var k=bn(this).next(_).value;return k&&kn(k.from,_)<=0&&0<=kn(k.to,_)}})[Z]=function(){return bn(this)},Zi));var Er={},Hr={},Xr=!1;function Ar(_){Vr(Hr,_),Xr||(Xr=!0,setTimeout(function(){Xr=!1,Qi(Hr,!(Hr={}))},0))}function Qi(_,k){k===void 0&&(k=!1);var z=new Set;if(_.all)for(var W=0,G=Object.values(Er);W<G.length;W++)Uc(pe=G[W],_,z,k);else for(var ne in _){var pe,we=/^idb\:\/\/(.*)\/(.*)\//.exec(ne);we&&(ne=we[1],we=we[2],(pe=Er["idb://".concat(ne,"/").concat(we)])&&Uc(pe,_,z,k))}z.forEach(function(Ne){return Ne()})}function Uc(_,k,z,W){for(var G=[],ne=0,pe=Object.entries(_.queries.query);ne<pe.length;ne++){for(var we=pe[ne],Ne=we[0],Te=[],Me=0,Ae=we[1];Me<Ae.length;Me++){var ke=Ae[Me];hr(k,ke.obsSet)?ke.subscribers.forEach(function(ze){return z.add(ze)}):W&&Te.push(ke)}W&&G.push([Ne,Te])}if(W)for(var je=0,Pe=G;je<Pe.length;je++){var Ie=Pe[je],Ne=Ie[0],Te=Ie[1];_.queries.query[Ne]=Te}}function Gs(_){var k=_._state,z=_._deps.indexedDB;if(k.isBeingOpened||_.idbdb)return k.dbReadyPromise.then(function(){return k.dbOpenError?_r(k.dbOpenError):_});k.isBeingOpened=!0,k.dbOpenError=null,k.openComplete=!1;var W=k.openCanceller,G=Math.round(10*_.verno),ne=!1;function pe(){if(k.openCanceller!==W)throw new fe.DatabaseClosed("db.open() was cancelled")}function we(){return new wt(function(ke,je){if(pe(),!z)throw new fe.MissingAPI;var Pe=_.name,Ie=k.autoSchema||!G?z.open(Pe):z.open(Pe,G);if(!Ie)throw new fe.MissingAPI;Ie.onerror=Xi(je),Ie.onblocked=ct(_._fireOnBlocked),Ie.onupgradeneeded=ct(function(ze){var Ve;Me=Ie.transaction,k.autoSchema&&!_._options.allowEmptyDB?(Ie.onerror=ec,Me.abort(),Ie.result.close(),(Ve=z.deleteDatabase(Pe)).onsuccess=Ve.onerror=ct(function(){je(new fe.NoSuchDatabase("Database ".concat(Pe," doesnt exist")))})):(Me.onerror=Xi(je),ze=ze.oldVersion>Math.pow(2,62)?0:ze.oldVersion,Ae=ze<1,_.idbdb=Ie.result,ne&&As(_,Me),Cl(_,ze/10,Me,je))},je),Ie.onsuccess=ct(function(){Me=null;var ze,Ve,Xe,et,tt,_t=_.idbdb=Ie.result,Mt=b(_t.objectStoreNames);if(0<Mt.length)try{var Nt=_t.transaction((et=Mt).length===1?et[0]:et,"readonly");if(k.autoSchema)Ve=_t,Xe=Nt,(ze=_).verno=Ve.version/10,Xe=ze._dbSchema=Bo(0,Ve,Xe),ze._storeNames=b(Ve.objectStoreNames,0),zo(ze,[ze._allTables],s(Xe),Xe);else if(Qa(_,_._dbSchema,Nt),((tt=rc(Bo(0,(tt=_).idbdb,Nt),tt._dbSchema)).add.length||tt.change.some(function(Dt){return Dt.add.length||Dt.change.length}))&&!ne)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),_t.close(),G=_t.version+1,ne=!0,ke(we());qs(_,Nt)}catch{}Us.push(_),_t.onversionchange=ct(function(Dt){k.vcFired=!0,_.on("versionchange").fire(Dt)}),_t.onclose=ct(function(Dt){_.on("close").fire(Dt)}),Ae&&(tt=_._deps,Nt=Pe,_t=tt.indexedDB,tt=tt.IDBKeyRange,Ee(_t)||Nt===Ei||ge(_t,tt).put({name:Nt}).catch(ie)),ke()},je)}).catch(function(ke){switch(ke==null?void 0:ke.name){case"UnknownError":if(0<k.PR1398_maxLoop)return k.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),we();break;case"VersionError":if(0<G)return G=0,we()}return wt.reject(ke)})}var Ne,Te=k.dbReadyResolve,Me=null,Ae=!1;return wt.race([W,(typeof navigator>"u"?wt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ke){function je(){return indexedDB.databases().finally(ke)}Ne=setInterval(je,100),je()}).finally(function(){return clearInterval(Ne)}):Promise.resolve()).then(we)]).then(function(){return pe(),k.onReadyBeingFired=[],wt.resolve($e(function(){return _.on.ready.fire(_.vip)})).then(function ke(){if(0<k.onReadyBeingFired.length){var je=k.onReadyBeingFired.reduce(Ot,ie);return k.onReadyBeingFired=[],wt.resolve($e(function(){return je(_.vip)})).then(ke)}})}).finally(function(){k.openCanceller===W&&(k.onReadyBeingFired=null,k.isBeingOpened=!1)}).catch(function(ke){k.dbOpenError=ke;try{Me&&Me.abort()}catch{}return W===k.openCanceller&&_._close(),_r(ke)}).finally(function(){k.openComplete=!0,Te()}).then(function(){var ke;return Ae&&(ke={},_.tables.forEach(function(je){je.schema.indexes.forEach(function(Pe){Pe.name&&(ke["idb://".concat(_.name,"/").concat(je.name,"/").concat(Pe.name)]=new at(-1/0,[[[]]]))}),ke["idb://".concat(_.name,"/").concat(je.name,"/")]=ke["idb://".concat(_.name,"/").concat(je.name,"/:dels")]=new at(-1/0,[[[]]])}),Wr(tc).fire(ke),Qi(ke,!0)),_})}function w(_){function k(ne){return _.next(ne)}var z=G(k),W=G(function(ne){return _.throw(ne)});function G(ne){return function(Ne){var we=ne(Ne),Ne=we.value;return we.done?Ne:Ne&&typeof Ne.then=="function"?Ne.then(z,W):o(Ne)?Promise.all(Ne).then(z,W):z(Ne)}}return G(k)()}function B(_,k,z){for(var W=o(_)?_.slice():[_],G=0;G<z;++G)W.push(k);return W}var q={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(_){return r(r({},_),{table:function(k){var z=_.table(k),W=z.schema,G={},ne=[];function pe(Ae,ke,je){var Pe=or(Ae),Ie=G[Pe]=G[Pe]||[],ze=Ae==null?0:typeof Ae=="string"?1:Ae.length,Ve=0<ke,Ve=r(r({},je),{name:Ve?"".concat(Pe,"(virtual-from:").concat(je.name,")"):je.name,lowLevelIndex:je,isVirtual:Ve,keyTail:ke,keyLength:ze,extractKey:_s(Ae),unique:!Ve&&je.unique});return Ie.push(Ve),Ve.isPrimaryKey||ne.push(Ve),1<ze&&pe(ze===2?Ae[0]:Ae.slice(0,ze-1),ke+1,je),Ie.sort(function(Xe,et){return Xe.keyTail-et.keyTail}),Ve}k=pe(W.primaryKey.keyPath,0,W.primaryKey),G[":id"]=[k];for(var we=0,Ne=W.indexes;we<Ne.length;we++){var Te=Ne[we];pe(Te.keyPath,0,Te)}function Me(Ae){var ke,je=Ae.query.index;return je.isVirtual?r(r({},Ae),{query:{index:je.lowLevelIndex,range:(ke=Ae.query.range,je=je.keyTail,{type:ke.type===1?2:ke.type,lower:B(ke.lower,ke.lowerOpen?_.MAX_KEY:_.MIN_KEY,je),lowerOpen:!0,upper:B(ke.upper,ke.upperOpen?_.MIN_KEY:_.MAX_KEY,je),upperOpen:!0})}}):Ae}return r(r({},z),{schema:r(r({},W),{primaryKey:k,indexes:ne,getIndexByKeyPath:function(Ae){return(Ae=G[or(Ae)])&&Ae[0]}}),count:function(Ae){return z.count(Me(Ae))},query:function(Ae){return z.query(Me(Ae))},openCursor:function(Ae){var ke=Ae.query.index,je=ke.keyTail,Pe=ke.isVirtual,Ie=ke.keyLength;return Pe?z.openCursor(Me(Ae)).then(function(Ve){return Ve&&ze(Ve)}):z.openCursor(Ae);function ze(Ve){return Object.create(Ve,{continue:{value:function(Xe){Xe!=null?Ve.continue(B(Xe,Ae.reverse?_.MAX_KEY:_.MIN_KEY,je)):Ae.unique?Ve.continue(Ve.key.slice(0,Ie).concat(Ae.reverse?_.MIN_KEY:_.MAX_KEY,je)):Ve.continue()}},continuePrimaryKey:{value:function(Xe,et){Ve.continuePrimaryKey(B(Xe,_.MAX_KEY,je),et)}},primaryKey:{get:function(){return Ve.primaryKey}},key:{get:function(){var Xe=Ve.key;return Ie===1?Xe[0]:Xe.slice(0,Ie)}},value:{get:function(){return Ve.value}}})}}})}})}};function ue(_,k,z,W){return z=z||{},W=W||"",s(_).forEach(function(G){var ne,pe,we;f(k,G)?(ne=_[G],pe=k[G],typeof ne=="object"&&typeof pe=="object"&&ne&&pe?(we=K(ne))!==K(pe)?z[W+G]=k[G]:we==="Object"?ue(ne,pe,z,W+G+"."):ne!==pe&&(z[W+G]=k[G]):ne!==pe&&(z[W+G]=k[G])):z[W+G]=void 0}),s(k).forEach(function(G){f(_,G)||(z[W+G]=k[G])}),z}function Be(_,k){return k.type==="delete"?k.keys:k.keys||k.values.map(_.extractKey)}var Ge={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(_){return r(r({},_),{table:function(k){var z=_.table(k),W=z.schema.primaryKey;return r(r({},z),{mutate:function(G){var ne=Ct.trans,pe=ne.table(k).hook,we=pe.deleting,Ne=pe.creating,Te=pe.updating;switch(G.type){case"add":if(Ne.fire===ie)break;return ne._promise("readwrite",function(){return Me(G)},!0);case"put":if(Ne.fire===ie&&Te.fire===ie)break;return ne._promise("readwrite",function(){return Me(G)},!0);case"delete":if(we.fire===ie)break;return ne._promise("readwrite",function(){return Me(G)},!0);case"deleteRange":if(we.fire===ie)break;return ne._promise("readwrite",function(){return function Ae(ke,je,Pe){return z.query({trans:ke,values:!1,query:{index:W,range:je},limit:Pe}).then(function(Ie){var ze=Ie.result;return Me({type:"delete",keys:ze,trans:ke}).then(function(Ve){return 0<Ve.numFailures?Promise.reject(Ve.failures[0]):ze.length<Pe?{failures:[],numFailures:0,lastResult:void 0}:Ae(ke,r(r({},je),{lower:ze[ze.length-1],lowerOpen:!0}),Pe)})})}(G.trans,G.range,1e4)},!0)}return z.mutate(G);function Me(Ae){var ke,je,Pe,Ie=Ct.trans,ze=Ae.keys||Be(W,Ae);if(!ze)throw new Error("Keys missing");return(Ae=Ae.type==="add"||Ae.type==="put"?r(r({},Ae),{keys:ze}):r({},Ae)).type!=="delete"&&(Ae.values=i([],Ae.values)),Ae.keys&&(Ae.keys=i([],Ae.keys)),ke=z,Pe=ze,((je=Ae).type==="add"?Promise.resolve([]):ke.getMany({trans:je.trans,keys:Pe,cache:"immutable"})).then(function(Ve){var Xe=ze.map(function(et,tt){var _t,Mt,Nt,Dt=Ve[tt],Vt={onerror:null,onsuccess:null};return Ae.type==="delete"?we.fire.call(Vt,et,Dt,Ie):Ae.type==="add"||Dt===void 0?(_t=Ne.fire.call(Vt,et,Ae.values[tt],Ie),et==null&&_t!=null&&(Ae.keys[tt]=et=_t,W.outbound||j(Ae.values[tt],W.keyPath,et))):(_t=ue(Dt,Ae.values[tt]),(Mt=Te.fire.call(Vt,_t,et,Dt,Ie))&&(Nt=Ae.values[tt],Object.keys(Mt).forEach(function(Lt){f(Nt,Lt)?Nt[Lt]=Mt[Lt]:j(Nt,Lt,Mt[Lt])}))),Vt});return z.mutate(Ae).then(function(et){for(var tt=et.failures,_t=et.results,Mt=et.numFailures,et=et.lastResult,Nt=0;Nt<ze.length;++Nt){var Dt=(_t||ze)[Nt],Vt=Xe[Nt];Dt==null?Vt.onerror&&Vt.onerror(tt[Nt]):Vt.onsuccess&&Vt.onsuccess(Ae.type==="put"&&Ve[Nt]?Ae.values[Nt]:Dt)}return{failures:tt,results:_t,numFailures:Mt,lastResult:et}}).catch(function(et){return Xe.forEach(function(tt){return tt.onerror&&tt.onerror(et)}),Promise.reject(et)})})}}})}})}};function Tt(_,k,z){try{if(!k||k.keys.length<_.length)return null;for(var W=[],G=0,ne=0;G<k.keys.length&&ne<_.length;++G)kn(k.keys[G],_[ne])===0&&(W.push(z?L(k.values[G]):k.values[G]),++ne);return W.length===_.length?W:null}catch{return null}}var Qn={stack:"dbcore",level:-1,create:function(_){return{table:function(k){var z=_.table(k);return r(r({},z),{getMany:function(W){if(!W.cache)return z.getMany(W);var G=Tt(W.keys,W.trans._cache,W.cache==="clone");return G?wt.resolve(G):z.getMany(W).then(function(ne){return W.trans._cache={keys:W.keys,values:W.cache==="clone"?L(ne):ne},ne})},mutate:function(W){return W.type!=="add"&&(W.trans._cache=null),z.mutate(W)}})}}}};function Qr(_,k){return _.trans.mode==="readonly"&&!!_.subscr&&!_.trans.explicit&&_.trans.db._options.cache!=="disabled"&&!k.schema.primaryKey.outbound}function $n(_,k){switch(_){case"query":return k.values&&!k.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Bn={stack:"dbcore",level:0,name:"Observability",create:function(_){var k=_.schema.name,z=new at(_.MIN_KEY,_.MAX_KEY);return r(r({},_),{transaction:function(W,G,ne){if(Ct.subscr&&G!=="readonly")throw new fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ct.querier));return _.transaction(W,G,ne)},table:function(W){var G=_.table(W),ne=G.schema,pe=ne.primaryKey,Ae=ne.indexes,we=pe.extractKey,Ne=pe.outbound,Te=pe.autoIncrement&&Ae.filter(function(je){return je.compound&&je.keyPath.includes(pe.keyPath)}),Me=r(r({},G),{mutate:function(je){function Pe(Lt){return Lt="idb://".concat(k,"/").concat(W,"/").concat(Lt),et[Lt]||(et[Lt]=new at)}var Ie,ze,Ve,Xe=je.trans,et=je.mutatedParts||(je.mutatedParts={}),tt=Pe(""),_t=Pe(":dels"),Mt=je.type,Vt=je.type==="deleteRange"?[je.range]:je.type==="delete"?[je.keys]:je.values.length<50?[Be(pe,je).filter(function(Lt){return Lt}),je.values]:[],Nt=Vt[0],Dt=Vt[1],Vt=je.trans._cache;return o(Nt)?(tt.addKeys(Nt),(Vt=Mt==="delete"||Nt.length===Dt.length?Tt(Nt,Vt):null)||_t.addKeys(Nt),(Vt||Dt)&&(Ie=Pe,ze=Vt,Ve=Dt,ne.indexes.forEach(function(Lt){var Ut=Ie(Lt.name||"");function Dn(Nn){return Nn!=null?Lt.extractKey(Nn):null}function Zn(Nn){return Lt.multiEntry&&o(Nn)?Nn.forEach(function(ci){return Ut.addKey(ci)}):Ut.addKey(Nn)}(ze||Ve).forEach(function(Nn,ja){var jn=ze&&Dn(ze[ja]),ja=Ve&&Dn(Ve[ja]);kn(jn,ja)!==0&&(jn!=null&&Zn(jn),ja!=null&&Zn(ja))})}))):Nt?(Dt={from:(Dt=Nt.lower)!==null&&Dt!==void 0?Dt:_.MIN_KEY,to:(Dt=Nt.upper)!==null&&Dt!==void 0?Dt:_.MAX_KEY},_t.add(Dt),tt.add(Dt)):(tt.add(z),_t.add(z),ne.indexes.forEach(function(Lt){return Pe(Lt.name).add(z)})),G.mutate(je).then(function(Lt){return!Nt||je.type!=="add"&&je.type!=="put"||(tt.addKeys(Lt.results),Te&&Te.forEach(function(Ut){for(var Dn=je.values.map(function(jn){return Ut.extractKey(jn)}),Zn=Ut.keyPath.findIndex(function(jn){return jn===pe.keyPath}),Nn=0,ci=Lt.results.length;Nn<ci;++Nn)Dn[Nn][Zn]=Lt.results[Nn];Pe(Ut.name).addKeys(Dn)})),Xe.mutatedParts=Vr(Xe.mutatedParts||{},et),Lt})}}),Ae=function(Pe){var Ie=Pe.query,Pe=Ie.index,Ie=Ie.range;return[Pe,new at((Pe=Ie.lower)!==null&&Pe!==void 0?Pe:_.MIN_KEY,(Ie=Ie.upper)!==null&&Ie!==void 0?Ie:_.MAX_KEY)]},ke={get:function(je){return[pe,new at(je.key)]},getMany:function(je){return[pe,new at().addKeys(je.keys)]},count:Ae,query:Ae,openCursor:Ae};return s(ke).forEach(function(je){Me[je]=function(Pe){var Ie=Ct.subscr,ze=!!Ie,Ve=Qr(Ct,G)&&$n(je,Pe)?Pe.obsSet={}:Ie;if(ze){var Xe=function(Dt){return Dt="idb://".concat(k,"/").concat(W,"/").concat(Dt),Ve[Dt]||(Ve[Dt]=new at)},et=Xe(""),tt=Xe(":dels"),Ie=ke[je](Pe),ze=Ie[0],Ie=Ie[1];if((je==="query"&&ze.isPrimaryKey&&!Pe.values?tt:Xe(ze.name||"")).add(Ie),!ze.isPrimaryKey){if(je!=="count"){var _t=je==="query"&&Ne&&Pe.values&&G.query(r(r({},Pe),{values:!1}));return G[je].apply(this,arguments).then(function(Dt){if(je==="query"){if(Ne&&Pe.values)return _t.then(function(Dn){return Dn=Dn.result,et.addKeys(Dn),Dt});var Vt=Pe.values?Dt.result.map(we):Dt.result;(Pe.values?et:tt).addKeys(Vt)}else if(je==="openCursor"){var Lt=Dt,Ut=Pe.values;return Lt&&Object.create(Lt,{key:{get:function(){return tt.addKey(Lt.primaryKey),Lt.key}},primaryKey:{get:function(){var Dn=Lt.primaryKey;return tt.addKey(Dn),Dn}},value:{get:function(){return Ut&&et.addKey(Lt.primaryKey),Lt.value}}})}return Dt})}tt.add(z)}}return G[je].apply(this,arguments)}}),Me}})}};function Dr(_,k,z){if(z.numFailures===0)return k;if(k.type==="deleteRange")return null;var W=k.keys?k.keys.length:"values"in k&&k.values?k.values.length:1;return z.numFailures===W?null:(k=r({},k),o(k.keys)&&(k.keys=k.keys.filter(function(G,ne){return!(ne in z.failures)})),"values"in k&&o(k.values)&&(k.values=k.values.filter(function(G,ne){return!(ne in z.failures)})),k)}function Za(_,k){return z=_,((W=k).lower===void 0||(W.lowerOpen?0<kn(z,W.lower):0<=kn(z,W.lower)))&&(_=_,(k=k).upper===void 0||(k.upperOpen?kn(_,k.upper)<0:kn(_,k.upper)<=0));var z,W}function Aa(_,k,ke,W,G,ne){if(!ke||ke.length===0)return _;var pe=k.query.index,we=pe.multiEntry,Ne=k.query.range,Te=W.schema.primaryKey.extractKey,Me=pe.extractKey,Ae=(pe.lowLevelIndex||pe).extractKey,ke=ke.reduce(function(je,Pe){var Ie=je,ze=[];if(Pe.type==="add"||Pe.type==="put")for(var Ve=new at,Xe=Pe.values.length-1;0<=Xe;--Xe){var et,tt=Pe.values[Xe],_t=Te(tt);Ve.hasKey(_t)||(et=Me(tt),(we&&o(et)?et.some(function(Lt){return Za(Lt,Ne)}):Za(et,Ne))&&(Ve.addKey(_t),ze.push(tt)))}switch(Pe.type){case"add":var Mt=new at().addKeys(k.values?je.map(function(Ut){return Te(Ut)}):je),Ie=je.concat(k.values?ze.filter(function(Ut){return Ut=Te(Ut),!Mt.hasKey(Ut)&&(Mt.addKey(Ut),!0)}):ze.map(function(Ut){return Te(Ut)}).filter(function(Ut){return!Mt.hasKey(Ut)&&(Mt.addKey(Ut),!0)}));break;case"put":var Nt=new at().addKeys(Pe.values.map(function(Ut){return Te(Ut)}));Ie=je.filter(function(Ut){return!Nt.hasKey(k.values?Te(Ut):Ut)}).concat(k.values?ze:ze.map(function(Ut){return Te(Ut)}));break;case"delete":var Dt=new at().addKeys(Pe.keys);Ie=je.filter(function(Ut){return!Dt.hasKey(k.values?Te(Ut):Ut)});break;case"deleteRange":var Vt=Pe.range;Ie=je.filter(function(Ut){return!Za(Te(Ut),Vt)})}return Ie},_);return ke===_?_:(ke.sort(function(je,Pe){return kn(Ae(je),Ae(Pe))||kn(Te(je),Te(Pe))}),k.limit&&k.limit<1/0&&(ke.length>k.limit?ke.length=k.limit:_.length===k.limit&&ke.length<k.limit&&(G.dirty=!0)),ne?Object.freeze(ke):ke)}function da(_,k){return kn(_.lower,k.lower)===0&&kn(_.upper,k.upper)===0&&!!_.lowerOpen==!!k.lowerOpen&&!!_.upperOpen==!!k.upperOpen}function Vo(_,k){return function(z,W,G,ne){if(z===void 0)return W!==void 0?-1:0;if(W===void 0)return 1;if((W=kn(z,W))===0){if(G&&ne)return 0;if(G)return 1;if(ne)return-1}return W}(_.lower,k.lower,_.lowerOpen,k.lowerOpen)<=0&&0<=function(z,W,G,ne){if(z===void 0)return W!==void 0?1:0;if(W===void 0)return-1;if((W=kn(z,W))===0){if(G&&ne)return 0;if(G)return-1;if(ne)return 1}return W}(_.upper,k.upper,_.upperOpen,k.upperOpen)}function Kf(_,k,z,W){_.subscribers.add(z),W.addEventListener("abort",function(){var G,ne;_.subscribers.delete(z),_.subscribers.size===0&&(G=_,ne=k,setTimeout(function(){G.subscribers.size===0&&H(ne,G)},3e3))})}var Gf={stack:"dbcore",level:0,name:"Cache",create:function(_){var k=_.schema.name;return r(r({},_),{transaction:function(z,W,G){var ne,pe,we=_.transaction(z,W,G);return W==="readwrite"&&(pe=(ne=new AbortController).signal,G=function(Ne){return function(){if(ne.abort(),W==="readwrite"){for(var Te=new Set,Me=0,Ae=z;Me<Ae.length;Me++){var ke=Ae[Me],je=Er["idb://".concat(k,"/").concat(ke)];if(je){var Pe=_.table(ke),Ie=je.optimisticOps.filter(function(Ut){return Ut.trans===we});if(we._explicit&&Ne&&we.mutatedParts)for(var ze=0,Ve=Object.values(je.queries.query);ze<Ve.length;ze++)for(var Xe=0,et=(Mt=Ve[ze]).slice();Xe<et.length;Xe++)hr((Nt=et[Xe]).obsSet,we.mutatedParts)&&(H(Mt,Nt),Nt.subscribers.forEach(function(Ut){return Te.add(Ut)}));else if(0<Ie.length){je.optimisticOps=je.optimisticOps.filter(function(Ut){return Ut.trans!==we});for(var tt=0,_t=Object.values(je.queries.query);tt<_t.length;tt++)for(var Mt,Nt,Dt,Vt=0,Lt=(Mt=_t[tt]).slice();Vt<Lt.length;Vt++)(Nt=Lt[Vt]).res!=null&&we.mutatedParts&&(Ne&&!Nt.dirty?(Dt=Object.isFrozen(Nt.res),Dt=Aa(Nt.res,Nt.req,Ie,Pe,Nt,Dt),Nt.dirty?(H(Mt,Nt),Nt.subscribers.forEach(function(Ut){return Te.add(Ut)})):Dt!==Nt.res&&(Nt.res=Dt,Nt.promise=wt.resolve({result:Dt}))):(Nt.dirty&&H(Mt,Nt),Nt.subscribers.forEach(function(Ut){return Te.add(Ut)})))}}}Te.forEach(function(Ut){return Ut()})}}},we.addEventListener("abort",G(!1),{signal:pe}),we.addEventListener("error",G(!1),{signal:pe}),we.addEventListener("complete",G(!0),{signal:pe})),we},table:function(z){var W=_.table(z),G=W.schema.primaryKey;return r(r({},W),{mutate:function(ne){var pe=Ct.trans;if(G.outbound||pe.db._options.cache==="disabled"||pe.explicit||pe.idbtrans.mode!=="readwrite")return W.mutate(ne);var we=Er["idb://".concat(k,"/").concat(z)];return we?(pe=W.mutate(ne),ne.type!=="add"&&ne.type!=="put"||!(50<=ne.values.length||Be(G,ne).some(function(Ne){return Ne==null}))?(we.optimisticOps.push(ne),ne.mutatedParts&&Ar(ne.mutatedParts),pe.then(function(Ne){0<Ne.numFailures&&(H(we.optimisticOps,ne),(Ne=Dr(0,ne,Ne))&&we.optimisticOps.push(Ne),ne.mutatedParts&&Ar(ne.mutatedParts))}),pe.catch(function(){H(we.optimisticOps,ne),ne.mutatedParts&&Ar(ne.mutatedParts)})):pe.then(function(Ne){var Te=Dr(0,r(r({},ne),{values:ne.values.map(function(Me,Ae){var ke;return Ne.failures[Ae]?Me:(Me=(ke=G.keyPath)!==null&&ke!==void 0&&ke.includes(".")?L(Me):r({},Me),j(Me,G.keyPath,Ne.results[Ae]),Me)})}),Ne);we.optimisticOps.push(Te),queueMicrotask(function(){return ne.mutatedParts&&Ar(ne.mutatedParts)})}),pe):W.mutate(ne)},query:function(ne){if(!Qr(Ct,W)||!$n("query",ne))return W.query(ne);var pe=((Te=Ct.trans)===null||Te===void 0?void 0:Te.db._options.cache)==="immutable",Ae=Ct,we=Ae.requery,Ne=Ae.signal,Te=function(Pe,Ie,ze,Ve){var Xe=Er["idb://".concat(Pe,"/").concat(Ie)];if(!Xe)return[];if(!(Ie=Xe.queries[ze]))return[null,!1,Xe,null];var et=Ie[(Ve.query?Ve.query.index.name:null)||""];if(!et)return[null,!1,Xe,null];switch(ze){case"query":var tt=et.find(function(_t){return _t.req.limit===Ve.limit&&_t.req.values===Ve.values&&da(_t.req.query.range,Ve.query.range)});return tt?[tt,!0,Xe,et]:[et.find(function(_t){return("limit"in _t.req?_t.req.limit:1/0)>=Ve.limit&&(!Ve.values||_t.req.values)&&Vo(_t.req.query.range,Ve.query.range)}),!1,Xe,et];case"count":return tt=et.find(function(_t){return da(_t.req.query.range,Ve.query.range)}),[tt,!!tt,Xe,et]}}(k,z,"query",ne),Me=Te[0],Ae=Te[1],ke=Te[2],je=Te[3];return Me&&Ae?Me.obsSet=ne.obsSet:(Ae=W.query(ne).then(function(Pe){var Ie=Pe.result;if(Me&&(Me.res=Ie),pe){for(var ze=0,Ve=Ie.length;ze<Ve;++ze)Object.freeze(Ie[ze]);Object.freeze(Ie)}else Pe.result=L(Ie);return Pe}).catch(function(Pe){return je&&Me&&H(je,Me),Promise.reject(Pe)}),Me={obsSet:ne.obsSet,promise:Ae,subscribers:new Set,type:"query",req:ne,dirty:!1},je?je.push(Me):(je=[Me],(ke=ke||(Er["idb://".concat(k,"/").concat(z)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[ne.query.index.name||""]=je)),Kf(Me,je,we,Ne),Me.promise.then(function(Pe){return{result:Aa(Pe.result,ne,ke==null?void 0:ke.optimisticOps,W,Me,pe)}})}})}})}};function Uo(_,k){return new Proxy(_,{get:function(z,W,G){return W==="db"?k:Reflect.get(z,W,G)}})}var Ja=(nr.prototype.version=function(_){if(isNaN(_)||_<.1)throw new fe.Type("Given version is not a positive number");if(_=Math.round(10*_)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,_);var k=this._versions,z=k.filter(function(W){return W._cfg.version===_})[0];return z||(z=new this.Version(_),k.push(z),k.sort(Al),z.stores({}),this._state.autoSchema=!1,z)},nr.prototype._whenReady=function(_){var k=this;return this.idbdb&&(this._state.openComplete||Ct.letThrough||this._vip)?_():new wt(function(z,W){if(k._state.openComplete)return W(new fe.DatabaseClosed(k._state.dbOpenError));if(!k._state.isBeingOpened){if(!k._state.autoOpen)return void W(new fe.DatabaseClosed);k.open().catch(ie)}k._state.dbReadyPromise.then(z,W)}).then(_)},nr.prototype.use=function(_){var k=_.stack,z=_.create,W=_.level,G=_.name;return G&&this.unuse({stack:k,name:G}),_=this._middlewares[k]||(this._middlewares[k]=[]),_.push({stack:k,create:z,level:W??10,name:G}),_.sort(function(ne,pe){return ne.level-pe.level}),this},nr.prototype.unuse=function(_){var k=_.stack,z=_.name,W=_.create;return k&&this._middlewares[k]&&(this._middlewares[k]=this._middlewares[k].filter(function(G){return W?G.create!==W:!!z&&G.name!==z})),this},nr.prototype.open=function(){var _=this;return xa(Rt,function(){return Gs(_)})},nr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var _=this._state,k=Us.indexOf(this);if(0<=k&&Us.splice(k,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}_.isBeingOpened||(_.dbReadyPromise=new wt(function(z){_.dbReadyResolve=z}),_.openCanceller=new wt(function(z,W){_.cancelOpen=W}))},nr.prototype.close=function(z){var k=(z===void 0?{disableAutoOpen:!0}:z).disableAutoOpen,z=this._state;k?(z.isBeingOpened&&z.cancelOpen(new fe.DatabaseClosed),this._close(),z.autoOpen=!1,z.dbOpenError=new fe.DatabaseClosed):(this._close(),z.autoOpen=this._options.autoOpen||z.isBeingOpened,z.openComplete=!1,z.dbOpenError=null)},nr.prototype.delete=function(_){var k=this;_===void 0&&(_={disableAutoOpen:!0});var z=0<arguments.length&&typeof arguments[0]!="object",W=this._state;return new wt(function(G,ne){function pe(){k.close(_);var we=k._deps.indexedDB.deleteDatabase(k.name);we.onsuccess=ct(function(){var Ne,Te,Me;Ne=k._deps,Te=k.name,Me=Ne.indexedDB,Ne=Ne.IDBKeyRange,Ee(Me)||Te===Ei||ge(Me,Ne).delete(Te).catch(ie),G()}),we.onerror=Xi(ne),we.onblocked=k._fireOnBlocked}if(z)throw new fe.InvalidArgument("Invalid closeOptions argument to db.delete()");W.isBeingOpened?W.dbReadyPromise.then(pe):pe()})},nr.prototype.backendDB=function(){return this.idbdb},nr.prototype.isOpen=function(){return this.idbdb!==null},nr.prototype.hasBeenClosed=function(){var _=this._state.dbOpenError;return _&&_.name==="DatabaseClosed"},nr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},nr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nr.prototype,"tables",{get:function(){var _=this;return s(this._allTables).map(function(k){return _._allTables[k]})},enumerable:!1,configurable:!0}),nr.prototype.transaction=function(){var _=(function(k,z,W){var G=arguments.length;if(G<2)throw new fe.InvalidArgument("Too few arguments");for(var ne=new Array(G-1);--G;)ne[G-1]=arguments[G];return W=ne.pop(),[k,O(ne),W]}).apply(this,arguments);return this._transaction.apply(this,_)},nr.prototype._transaction=function(_,k,z){var W=this,G=Ct.trans;G&&G.db===this&&_.indexOf("!")===-1||(G=null);var ne,pe,we=_.indexOf("?")!==-1;_=_.replace("!","").replace("?","");try{if(pe=k.map(function(Te){if(Te=Te instanceof W.Table?Te.name:Te,typeof Te!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Te}),_=="r"||_===Xa)ne=Xa;else{if(_!="rw"&&_!=yl)throw new fe.InvalidArgument("Invalid transaction mode: "+_);ne=yl}if(G){if(G.mode===Xa&&ne===yl){if(!we)throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");G=null}G&&pe.forEach(function(Te){if(G&&G.storeNames.indexOf(Te)===-1){if(!we)throw new fe.SubTransaction("Table "+Te+" not included in parent transaction.");G=null}}),we&&G&&!G.active&&(G=null)}}catch(Te){return G?G._promise(null,function(Me,Ae){Ae(Te)}):_r(Te)}var Ne=(function Te(Me,Ae,ke,je,Pe){return wt.resolve().then(function(){var Ie=Ct.transless||Ct,ze=Me._createTransaction(Ae,ke,Me._dbSchema,je);if(ze.explicit=!0,Ie={trans:ze,transless:Ie},je)ze.idbtrans=je.idbtrans;else try{ze.create(),ze.idbtrans._explicit=!0,Me._state.PR1398_maxLoop=3}catch(et){return et.name===_e.InvalidState&&Me.isOpen()&&0<--Me._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Me.close({disableAutoOpen:!1}),Me.open().then(function(){return Te(Me,Ae,ke,null,Pe)})):_r(et)}var Ve,Xe=se(Pe);return Xe&&Br(),Ie=wt.follow(function(){var et;(Ve=Pe.call(ze,ze))&&(Xe?(et=Tr.bind(null,null),Ve.then(et,et)):typeof Ve.next=="function"&&typeof Ve.throw=="function"&&(Ve=w(Ve)))},Ie),(Ve&&typeof Ve.then=="function"?wt.resolve(Ve).then(function(et){return ze.active?et:_r(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Ie.then(function(){return Ve})).then(function(et){return je&&ze._resolve(),ze._completion.then(function(){return et})}).catch(function(et){return ze._reject(et),_r(et)})})}).bind(null,this,ne,pe,G,z);return G?G._promise(ne,Ne,"lock"):Ct.trans?xa(Ct.transless,function(){return W._whenReady(Ne)}):this._whenReady(Ne)},nr.prototype.table=function(_){if(!f(this._allTables,_))throw new fe.InvalidTable("Table ".concat(_," does not exist"));return this._allTables[_]},nr);function nr(_,k){var z=this;this._middlewares={},this.verno=0;var W=nr.dependencies;this._options=k=r({addons:nr.addons,autoOpen:!0,indexedDB:W.indexedDB,IDBKeyRange:W.IDBKeyRange,cache:"cloned"},k),this._deps={indexedDB:k.indexedDB,IDBKeyRange:k.IDBKeyRange},W=k.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var G,ne,pe,we,Ne,Te={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ie,dbReadyPromise:null,cancelOpen:ie,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:k.autoOpen};Te.dbReadyPromise=new wt(function(Ae){Te.dbReadyResolve=Ae}),Te.openCanceller=new wt(function(Ae,ke){Te.cancelOpen=ke}),this._state=Te,this.name=_,this.on=ys(this,"populate","blocked","versionchange","close",{ready:[Ot,ie]}),this.once=function(Ae,ke){var je=function(){for(var Pe=[],Ie=0;Ie<arguments.length;Ie++)Pe[Ie]=arguments[Ie];z.on(Ae).unsubscribe(je),ke.apply(z,Pe)};return z.on(Ae,je)},this.on.ready.subscribe=S(this.on.ready.subscribe,function(Ae){return function(ke,je){nr.vip(function(){var Pe,Ie=z._state;Ie.openComplete?(Ie.dbOpenError||wt.resolve().then(ke),je&&Ae(ke)):Ie.onReadyBeingFired?(Ie.onReadyBeingFired.push(ke),je&&Ae(ke)):(Ae(ke),Pe=z,je||Ae(function ze(){Pe.on.ready.unsubscribe(ke),Pe.on.ready.unsubscribe(ze)}))})}}),this.Collection=(G=this,ua(xs.prototype,function(Ve,ze){this.db=G;var je=zc,Pe=null;if(ze)try{je=ze()}catch(Xe){Pe=Xe}var Ie=Ve._ctx,ze=Ie.table,Ve=ze.hook.reading.fire;this._ctx={table:ze,index:Ie.index,isPrimKey:!Ie.index||ze.schema.primKey.keyPath&&Ie.index===ze.schema.primKey.name,range:je,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Pe,or:Ie.or,valueMapper:Ve!==He?Ve:null}})),this.Table=(ne=this,ua(Su.prototype,function(Ae,ke,je){this.db=ne,this._tx=je,this.name=Ae,this.schema=ke,this.hook=ne._allTables[Ae]?ne._allTables[Ae].hook:ys(null,{creating:[Ye,ie],reading:[Fe,He],updating:[vt,ie],deleting:[mt,ie]})})),this.Transaction=(pe=this,ua(Fo.prototype,function(Ae,ke,je,Pe,Ie){var ze=this;Ae!=="readonly"&&ke.forEach(function(Ve){Ve=(Ve=je[Ve])===null||Ve===void 0?void 0:Ve.yProps,Ve&&(ke=ke.concat(Ve.map(function(Xe){return Xe.updatesTable})))}),this.db=pe,this.mode=Ae,this.storeNames=ke,this.schema=je,this.chromeTransactionDurability=Pe,this.idbtrans=null,this.on=ys(this,"complete","error","abort"),this.parent=Ie||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new wt(function(Ve,Xe){ze._resolve=Ve,ze._reject=Xe}),this._completion.then(function(){ze.active=!1,ze.on.complete.fire()},function(Ve){var Xe=ze.active;return ze.active=!1,ze.on.error.fire(Ve),ze.parent?ze.parent._reject(Ve):Xe&&ze.idbtrans&&ze.idbtrans.abort(),_r(Ve)})})),this.Version=(we=this,ua(R.prototype,function(Ae){this.db=we,this._cfg={version:Ae,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Ne=this,ua(Jl.prototype,function(Ae,ke,je){if(this.db=Ne,this._ctx={table:Ae,index:ke===":id"?null:ke,or:je},this._cmp=this._ascending=kn,this._descending=function(Pe,Ie){return kn(Ie,Pe)},this._max=function(Pe,Ie){return 0<kn(Pe,Ie)?Pe:Ie},this._min=function(Pe,Ie){return kn(Pe,Ie)<0?Pe:Ie},this._IDBKeyRange=Ne._deps.IDBKeyRange,!this._IDBKeyRange)throw new fe.MissingAPI})),this.on("versionchange",function(Ae){0<Ae.newVersion?console.warn("Another connection wants to upgrade database '".concat(z.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(z.name,"'. Closing db now to resume the delete request.")),z.close({disableAutoOpen:!1})}),this.on("blocked",function(Ae){!Ae.newVersion||Ae.newVersion<Ae.oldVersion?console.warn("Dexie.delete('".concat(z.name,"') was blocked")):console.warn("Upgrade '".concat(z.name,"' blocked by other connection holding version ").concat(Ae.oldVersion/10))}),this._maxKey=_a(k.IDBKeyRange),this._createTransaction=function(Ae,ke,je,Pe){return new z.Transaction(Ae,ke,je,z._options.chromeTransactionDurability,Pe)},this._fireOnBlocked=function(Ae){z.on("blocked").fire(Ae),Us.filter(function(ke){return ke.name===z.name&&ke!==z&&!ke._state.vcFired}).map(function(ke){return ke.on("versionchange").fire(Ae)})},this.use(Qn),this.use(Gf),this.use(Bn),this.use(q),this.use(Ge);var Me=new Proxy(this,{get:function(Ae,ke,je){if(ke==="_vip")return!0;if(ke==="table")return function(Ie){return Uo(z.table(Ie),Me)};var Pe=Reflect.get(Ae,ke,je);return Pe instanceof Su?Uo(Pe,Me):ke==="tables"?Pe.map(function(Ie){return Uo(Ie,Me)}):ke==="_createTransaction"?function(){return Uo(Pe.apply(this,arguments),Me)}:Pe}});this.vip=Me,W.forEach(function(Ae){return Ae(z)})}var za,Zi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ic=(El.prototype.subscribe=function(_,k,z){return this._subscribe(_&&typeof _!="function"?_:{next:_,error:k,complete:z})},El.prototype[Zi]=function(){return this},El);function El(_){this._subscribe=_}try{za={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{za={indexedDB:null,IDBKeyRange:null}}function wd(_){var k,z=!1,W=new ic(function(G){var ne=se(_),pe,we=!1,Ne={},Te={},Me={get closed(){return we},unsubscribe:function(){we||(we=!0,pe&&pe.abort(),Ae&&Wr.storagemutated.unsubscribe(je))}};G.start&&G.start(Me);var Ae=!1,ke=function(){return Io(Pe)},je=function(Ie){Vr(Ne,Ie),hr(Te,Ne)&&ke()},Pe=function(){var Ie,ze,Ve;!we&&za.indexedDB&&(Ne={},Ie={},pe&&pe.abort(),pe=new AbortController,Ve=function(Xe){var et=Re();try{ne&&Br();var tt=kr(_,Xe);return tt=ne?tt.finally(Tr):tt}finally{et&&Oe()}}(ze={subscr:Ie,signal:pe.signal,requery:ke,querier:_,trans:null}),Promise.resolve(Ve).then(function(Xe){z=!0,k=Xe,we||ze.signal.aborted||(Ne={},function(et){for(var tt in et)if(f(et,tt))return;return 1}(Te=Ie)||Ae||(Wr(tc,je),Ae=!0),Io(function(){return!we&&G.next&&G.next(Xe)}))},function(Xe){z=!1,["DatabaseClosedError","AbortError"].includes(Xe==null?void 0:Xe.name)||we||Io(function(){we||G.error&&G.error(Xe)})}))};return setTimeout(ke,0),Me});return W.hasValue=function(){return z},W.getValue=function(){return k},W}var uo=Ja;function li(_){var k=Ca;try{Ca=!0,Wr.storagemutated.fire(_),Qi(_,!0)}finally{Ca=k}}p(uo,r(r({},Se),{delete:function(_){return new uo(_,{addons:[]}).delete()},exists:function(_){return new uo(_,{addons:[]}).open().then(function(k){return k.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(_){try{return k=uo.dependencies,z=k.indexedDB,k=k.IDBKeyRange,(Ee(z)?Promise.resolve(z.databases()).then(function(W){return W.map(function(G){return G.name}).filter(function(G){return G!==Ei})}):ge(z,k).toCollection().primaryKeys()).then(_)}catch{return _r(new fe.MissingAPI)}var k,z},defineClass:function(){return function(_){l(this,_)}},ignoreTransaction:function(_){return Ct.trans?xa(Ct.transless,_):_()},vip:$e,async:function(_){return function(){try{var k=w(_.apply(this,arguments));return k&&typeof k.then=="function"?k:wt.resolve(k)}catch(z){return _r(z)}}},spawn:function(_,k,z){try{var W=w(_.apply(z,k||[]));return W&&typeof W.then=="function"?W:wt.resolve(W)}catch(G){return _r(G)}},currentTransaction:{get:function(){return Ct.trans||null}},waitFor:function(_,k){return k=wt.resolve(typeof _=="function"?uo.ignoreTransaction(_):_).timeout(k||6e4),Ct.trans?Ct.trans.waitFor(k):k},Promise:wt,debug:{get:function(){return ht},set:function(_){dt(_)}},derive:m,extend:l,props:p,override:S,Events:ys,on:Wr,liveQuery:wd,extendObservabilitySet:Vr,getByKeyPath:D,setByKeyPath:j,delByKeyPath:function(_,k){typeof k=="string"?j(_,k,void 0):"length"in k&&[].map.call(k,function(z){j(_,z,void 0)})},shallowClone:N,deepClone:L,getObjectDiff:ue,cmp:kn,asap:C,minKey:-1/0,addons:[],connections:Us,errnames:_e,dependencies:za,cache:Er,semVer:"4.2.0",version:"4.2.0".split(".").map(function(_){return parseInt(_)}).reduce(function(_,k,z){return _+k/Math.pow(10,2*z)})})),uo.maxKey=_a(uo.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Wr(tc,function(_){Ca||(_=new CustomEvent(Au,{detail:_}),Ca=!0,dispatchEvent(_),Ca=!1)}),addEventListener(Au,function(_){_=_.detail,Ca||li(_)}));var ac,Ca=!1,Wo=function(){};return typeof BroadcastChannel<"u"&&((Wo=function(){(ac=new BroadcastChannel(Au)).onmessage=function(_){return _.data&&li(_.data)}})(),typeof ac.unref=="function"&&ac.unref(),Wr(tc,function(_){Ca||ac.postMessage(_)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(_){if(!Ja.disableBfCache&&_.persisted){ht&&console.debug("Dexie: handling persisted pagehide"),ac!=null&&ac.close();for(var k=0,z=Us;k<z.length;k++)z[k].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(_){!Ja.disableBfCache&&_.persisted&&(ht&&console.debug("Dexie: handling persisted pageshow"),Wo(),li({all:new at(-1/0,[[]])}))})),wt.rejectionMapper=function(_,k){return!_||_ instanceof X||_ instanceof TypeError||_ instanceof SyntaxError||!_.name||!xe[_.name]?_:(k=new xe[_.name](k||_.message,_),"stack"in _&&g(k,"stack",{get:function(){return this.inner.stack}}),k)},dt(ht),r(Ja,Object.freeze({__proto__:null,Dexie:Ja,liveQuery:wd,Entity:$c,cmp:kn,PropModification:Hs,replacePrefix:function(_,k){return new Hs({replacePrefix:[_,k]})},add:function(_){return new Hs({add:_})},remove:function(_){return new Hs({remove:_})},default:Ja,RangeSet:at,mergeRanges:Yt,rangesOverlap:gn}),{default:Ja}),Ja})})(kW);var ice=kW.exports;const GE=Pr(ice),GM=Symbol.for("Dexie"),ag=globalThis[GM]||(globalThis[GM]=GE);if(GE.semVer!==ag.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${GE.semVer} and ${ag.semVer}`);const{liveQuery:_Xe,mergeRanges:AXe,rangesOverlap:CXe,RangeSet:jXe,cmp:EXe,Entity:NXe,PropModification:PXe,replacePrefix:kXe,add:TXe,remove:DXe,DexieYProvider:IXe}=ag,TW="GanaderoOS_DB",DW=21;class ace extends ag{constructor(){super(TW);In(this,"animals");In(this,"fathers");In(this,"parturitions");In(this,"weighings");In(this,"lots");In(this,"origins");In(this,"breedingSeasons");In(this,"sireLots");In(this,"serviceRecords");In(this,"events");In(this,"feedingPlans");In(this,"bodyWeighings");In(this,"products");In(this,"healthPlans");In(this,"planActivities");In(this,"healthEvents");this.version(DW).stores({animals:"&id, userId, status, location, motherId, fatherId, sireLotId, _synced",fathers:"&id, userId, _synced",parturitions:"&id, userId, goatId, status, _synced",weighings:"&id, userId, goatId, date, _synced",lots:"&id, userId, &name, parentLotId, _synced",origins:"&id, userId, &name, _synced",breedingSeasons:"&id, userId, &name, status, _synced",sireLots:"&id, userId, seasonId, sireId, _synced",serviceRecords:"&id, userId, sireLotId, femaleId, _synced",events:"&id, userId, animalId, date, type, lotName, _synced",feedingPlans:"&id, userId, lotName, _synced",bodyWeighings:"&id, userId, animalId, date, _synced",products:"&id, userId, &name, category, _synced",healthPlans:"&id, userId, &name, targetGroup, _synced",planActivities:"&id, userId, healthPlanId, category, _synced",healthEvents:"&id, userId, animalId, date, activityId, _synced"})}}let j0=null;const sce=async()=>{if(j0)return j0;const t=new ace;try{return await t.open(),console.log("Base de datos local abierta con éxito (v"+DW+")."),j0=t,t}catch(e){return console.error("Error al abrir la base de datos local.",e),e.name==="VersionError"?console.log("Dexie intentará actualizar la estructura de la base de datos."):confirm("Error al iniciar la base de datos local. ¿Deseas forzar el reinicio? (Tus datos en la nube están seguros). La aplicación se recargará.")?(await ag.delete(TW),window.location.reload()):alert("La aplicación no puede continuar sin una base de datos funcional."),new Promise(()=>{})}},Kn=()=>{if(!j0)throw new Error("La base de datos no ha sido inicializada. Llama a initDB() primero.");return j0},rs=[];for(let t=0;t<256;++t)rs.push((t+256).toString(16).slice(1));function oce(t,e=0){return(rs[t[e+0]]+rs[t[e+1]]+rs[t[e+2]]+rs[t[e+3]]+"-"+rs[t[e+4]]+rs[t[e+5]]+"-"+rs[t[e+6]]+rs[t[e+7]]+"-"+rs[t[e+8]]+rs[t[e+9]]+"-"+rs[t[e+10]]+rs[t[e+11]]+rs[t[e+12]]+rs[t[e+13]]+rs[t[e+14]]+rs[t[e+15]]).toLowerCase()}let FA;const lce=new Uint8Array(16);function cce(){if(!FA){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");FA=crypto.getRandomValues.bind(crypto)}return FA(lce)}const uce=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),YM={randomUUID:uce};function dce(t,e,n){var i;t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??cce();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,oce(r)}function ks(t,e,n){return YM.randomUUID&&!t?YM.randomUUID():dce(t)}const Hp={nombreFinca:"Mi Finca",theme:"dark",porcentajePrenez:90,porcentajeProlificidad:120,mortalidadCrias:8,mortalidadLevante:3,mortalidadCabras:5,tasaReemplazo:20,eliminacionCabritos:100,pesoPrimerServicioKg:30,edadDesteteDias:90,pesoDesteteMetaKg:15,diasGestacion:150,diasLactanciaObjetivo:305,diasSecadoObjetivo:60,diasConfirmarPrenez:60,diasPreParto:15,diasAlertaAtraso:7,diasRetiroLecheDefault:7,diasRetiroCarneDefault:30,monedaSimbolo:"$",costoSacoAlimento:25,pesoSacoAlimentoKg:40,precioLecheLitro:.8,precioVentaCabritoKg:3.5,precioVentaDescarteAdulto:50},IW=I.createContext({}),Kt=()=>I.useContext(IW),zi=async(t,e,n)=>{try{const r=Object.entries(n).reduce((l,[u,d])=>(d!==void 0&&u!=="_synced"&&(l[u]=d),l),{}),i=Kn()[t],a=await i.get(e),s=!a||!a.createdAt||n.createdAt===KM(),o={...r};s&&!r.createdAt?o.createdAt=KM():(r.createdAt===null||r.createdAt===void 0)&&delete o.createdAt,await KE(Da(hi,t,e),o,{merge:!0}),await i.update(e,{_synced:!0})}catch(r){console.error(`Firestore sync for ${t} (${e}) failed:`,r);const i=Kn()[t];try{await i.update(e,{_synced:!1})}catch(a){console.error(`Failed to update sync status locally for ${t} (${e}):`,a)}}},fce=({children:t})=>{const{currentUser:e}=PW(),[n,r]=I.useState([]),[i,a]=I.useState([]),[s,o]=I.useState([]),[l,u]=I.useState([]),[d,f]=I.useState([]),[p,h]=I.useState([]),[g,m]=I.useState([]),[v,y]=I.useState([]),[b,S]=I.useState([]),[A,C]=I.useState([]),[D,j]=I.useState([]),[N,P]=I.useState([]),[O,T]=I.useState([]),[M,L]=I.useState([]),[V,K]=I.useState([]),[Z,Y]=I.useState([]),[H,ee]=I.useState(!0),[le,se]=I.useState(navigator.onLine?"idle":"offline"),[$,X]=I.useState(Hp),[te,oe]=I.useState(!0),me=I.useRef(null),_e=I.useRef([]),Ce=I.useRef(!1),fe=I.useCallback(async()=>{if(Ce.current||_e.current.length===0||!navigator.onLine){_e.current.length===0&&!Ce.current&&se("idle");return}Ce.current=!0,se("syncing");const Re=_e.current.shift();if(Re)try{await Re()}catch(Oe){console.error("Sync Queue: Error processing item:",Oe)}Ce.current=!1,_e.current.length>0?setTimeout(fe,100):(se("idle"),me.current&&clearTimeout(me.current),me.current=setTimeout(()=>{_e.current.length===0&&!Ce.current&&se("idle")},2e3))},[]),xe=I.useCallback(Re=>{_e.current.push(Re),Ce.current||fe()},[fe]),Se=I.useCallback(async()=>{try{const Re=Kn(),[Oe,Ke,Et,ct,Gt,yn,Gn,Ft,qn,Ri,kr,Br,Tr,er,Sr,oi]=await Promise.all([Re.animals.toArray(),Re.fathers.toArray(),Re.weighings.toArray(),Re.parturitions.toArray(),Re.lots.toArray(),Re.origins.toArray(),Re.breedingSeasons.toArray(),Re.sireLots.toArray(),Re.serviceRecords.toArray(),Re.events.toArray(),Re.feedingPlans.toArray(),Re.bodyWeighings.toArray(),Re.products.toArray(),Re.healthPlans.toArray(),Re.planActivities.toArray(),Re.healthEvents.toArray()]);r(Oe),a(Ke),o(Et),u(ct),f(Gt),h(yn),m(Gn),y(Ft),S(qn),C(Ri),j(kr),P(Br),T(Tr),L(er),K(Sr),Y(oi)}catch(Re){console.error("Error al cargar datos locales:",Re)}finally{ee(!1)}},[]);I.useEffect(()=>{let Re=[];const Oe=()=>{se("idle"),fe()},Ke=()=>se("offline");return window.addEventListener("online",Oe),window.addEventListener("offline",Ke),(async()=>{if(!e){ee(!1),oe(!1),r([]),a([]),o([]),u([]),f([]),h([]),m([]),y([]),S([]),C([]),j([]),P([]),T([]),L([]),K([]),Y([]),X(Hp);return}ee(!0),oe(!0);try{const ct=await sce();await Se();const Gt=Da(hi,"configuracion",e.uid),yn=qM(Gt,qn=>{qn.exists()?X(Ri=>({...Hp,...Ri,...qn.data()})):(X(Hp),KE(Gt,Hp).catch(Ri=>console.error("Failed to set default config",Ri))),oe(!1)},qn=>{console.error("Error fetching config:",qn),oe(!1)});Re.push(yn);const Gn=qn=>Yle(Rle(hi,qn),Xle("userId","==",e.uid)),Ft=(qn,Ri)=>{const kr=qM(Gn(qn),async Br=>{if(Br.metadata.hasPendingWrites)return;const Tr=Br.docChanges().map(er=>{const Sr={id:er.doc.id,...er.doc.data()};return Object.keys(Sr).forEach(oi=>{Sr[oi]instanceof va&&(Sr[oi]=Sr[oi].toMillis())}),{type:er.type,data:Sr}});if(Tr.length>0){navigator.onLine&&(se("syncing"),me.current&&clearTimeout(me.current),me.current=setTimeout(()=>{_e.current.length===0&&!Ce.current&&se("idle")},2e3));try{await ct.transaction("rw",Ri,async()=>{for(const er of Tr)er.data._synced=!0,er.type==="added"||er.type==="modified"?await Ri.put(er.data):er.type==="removed"&&await Ri.delete(er.data.id)}),await Se()}catch(er){console.error(`Dexie transaction error during sync for ${qn}:`,er)}}},Br=>{Br.code==="permission-denied"?console.warn(`Permission denied for ${qn}.`):console.error(`Firestore snapshot error for ${qn}:`,Br)});Re.push(kr)};Ft("animals",ct.animals),Ft("fathers",ct.fathers),Ft("parturitions",ct.parturitions),Ft("weighings",ct.weighings),Ft("lots",ct.lots),Ft("origins",ct.origins),Ft("breedingSeasons",ct.breedingSeasons),Ft("sireLots",ct.sireLots),Ft("serviceRecords",ct.serviceRecords),Ft("events",ct.events),Ft("feedingPlans",ct.feedingPlans),Ft("bodyWeighings",ct.bodyWeighings),Ft("products",ct.products),Ft("healthPlans",ct.healthPlans),Ft("planActivities",ct.planActivities),Ft("healthEvents",ct.healthEvents)}catch(ct){console.error("Fallo crítico en la inicialización:",ct),ee(!1),oe(!1)}})(),()=>{Re.forEach(ct=>ct()),window.removeEventListener("online",Oe),window.removeEventListener("offline",Ke),me.current&&clearTimeout(me.current)}},[e==null?void 0:e.uid,Se,fe]);const ie=I.useCallback(Re=>{e&&(async()=>{try{const Oe=Kn(),Ke={id:ks(),...Re,userId:e.uid,_synced:!1};await Oe.events.put(Ke),xe(()=>zi("events",Ke.id,Ke)),setTimeout(Se,50)}catch(Oe){console.error("Error en registro de evento local:",Oe)}})()},[e,xe,Se]),He=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke=(Re.id?Re.id:`REF-${Date.now()}`).toUpperCase(),Et={...Re,id:Ke,userId:e.uid,createdAt:Date.now(),_synced:!1};await Oe.animals.put(Et);let ct="";if(Et.birthDate&&Et.birthDate!=="N/A")try{ct=` F.N.: ${new Date(Et.birthDate+"T00:00:00Z").toLocaleDateString("es-VE",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"})}`}catch{ct=` F.N.: ${Et.birthDate}.`}else ct=" F.N. desconocida.";const Gt=Et.isReference?"Animal de Referencia":"Animal (Activo)";ie({animalId:Et.id,date:new Date(Et.createdAt).toISOString().split("T")[0],type:"Registro",details:`${Gt} registrado en el sistema.${ct}`,lotName:Et.location}),Se(),xe(()=>zi("animals",Et.id,Et))},[e,xe,Se,ie]),Fe=I.useCallback(async(Re,Oe)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Kn(),Et=Re.toUpperCase(),ct=new Date().toISOString().split("T")[0],Gt=await Ke.animals.get(Et);if(!Gt)throw new Error("Animal no encontrado para actualizar");Oe.birthDate&&Oe.birthDate!=="N/A"&&!Oe.lifecycleStage?Oe.lifecycleStage=hce(Oe.birthDate,Gt.sex):(Oe.birthDate==="N/A"||Oe.birthDate==="")&&!Oe.lifecycleStage&&(delete Oe.lifecycleStage,Oe.birthDate="N/A");const yn={...Oe,_synced:!1};await Ke.animals.update(Et,yn),Oe.location!==void 0&&Oe.location!==Gt.location&&ie({animalId:Et,date:ct,type:"Movimiento",details:`Movido de '${Gt.location||"Sin Asignar"}' a '${Oe.location||"Sin Asignar"}'`,lotName:Oe.location||""}),Oe.reproductiveStatus!==void 0&&Oe.reproductiveStatus!==Gt.reproductiveStatus&&ie({animalId:Et,date:ct,type:"Cambio de Estado",details:`Estado reproductivo: ${Oe.reproductiveStatus}`}),Oe.status!==void 0&&Oe.status!==Gt.status&&ie({animalId:Et,date:Oe.endDate||ct,type:"Cambio de Estado",details:`Animal dado de baja: ${Oe.status} ${Oe.cullReason?`(${Oe.cullReason})`:""}`}),Oe.weaningDate&&!Gt.weaningDate&&ie({animalId:Et,date:Oe.weaningDate,type:"Cambio de Estado",details:`Destetado con ${Oe.weaningWeight||"N/A"} Kg`}),Se();const Gn=await Ke.animals.get(Et);Gn&&xe(()=>zi("animals",Et,Gn))},[e,xe,Se,ie]),he=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke=Re.toUpperCase();await Oe.animals.delete(Ke),Se(),xe(()=>Xf(Da(hi,"animals",Ke)).catch(Et=>console.error("Firestore delete sync failed:",Et)))},[e,xe,Se]),Ye=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke=await Oe.parturitions.get(Re);if(!Ke)throw new Error("Parto no encontrado");const Et={status:"en-secado",dryingStartDate:new Date().toISOString().split("T")[0],_synced:!1};await Oe.parturitions.update(Re,Et),ie({animalId:Ke.goatId,date:Et.dryingStartDate,type:"Cambio de Estado",details:`Inició proceso de secado (Lactancia de ${Ke.parturitionDate})`}),Se();const ct=await Oe.parturitions.get(Re);ct&&xe(()=>zi("parturitions",Re,ct))},[e,xe,Se,ie]),mt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke=await Oe.parturitions.get(Re);if(!Ke)throw new Error("Parto no encontrado");const Et={status:"seca",_synced:!1};await Oe.parturitions.update(Re,Et),ie({animalId:Ke.goatId,date:new Date().toISOString().split("T")[0],type:"Cambio de Estado",details:`Declarada Seca (Lactancia de ${Ke.parturitionDate})`}),Se();const ct=await Oe.parturitions.get(Re);ct&&xe(()=>zi("parturitions",Re,ct))},[e,xe,Se,ie]),vt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn();if(await Oe.lots.where("name").equalsIgnoreCase(Re.name).first())throw new Error(`El lote '${Re.name}' ya existe.`);const Et={id:ks(),name:Re.name,parentLotId:Re.parentLotId,userId:e.uid,_synced:!1};await Oe.lots.put(Et),Se(),xe(()=>zi("lots",Et.id,Et))},[e,xe,Se]),Qe=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke=await Oe.lots.get(Re);if(Ke){if(await Oe.animals.where({location:Ke.name}).count()>0)throw new Error("No se puede eliminar un lote con animales asignados.");if(await Oe.lots.where({parentLotId:Re}).count()>0)throw new Error("No se puede eliminar un lote que contiene sub-lotes.")}await Oe.lots.delete(Re),Se(),xe(()=>Xf(Da(hi,"lots",Re)).catch(Et=>console.error("Firestore delete sync failed:",Et)))},[e,xe,Se]),Ot=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn();if(await Oe.origins.where("name").equalsIgnoreCase(Re).first())throw new Error(`El origen '${Re}' ya existe.`);const Et={id:ks(),name:Re,userId:e.uid,_synced:!1};await Oe.origins.put(Et),Se(),xe(()=>zi("origins",Et.id,Et))},[e,xe,Se]),ht=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");await Kn().origins.delete(Re),Se(),xe(()=>Xf(Da(hi,"origins",Re)).catch(Ke=>console.error("Firestore delete sync failed:",Ke)))},[e,xe,Se]),dt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke={id:ks(),...Re,userId:e.uid,_synced:!1};await Oe.weighings.put(Ke),ie({animalId:Re.goatId,date:Re.date,type:"Pesaje Lechero",details:`Registro de ${Re.kg} Kg`}),Se(),xe(()=>zi("weighings",Ke.id,Ke))},[e,xe,Se,ie]),It=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke={id:ks(),...Re,userId:e.uid,_synced:!1};await Oe.bodyWeighings.put(Ke),ie({animalId:Re.animalId,date:Re.date,type:"Pesaje Corporal",details:`Registro de ${Re.kg} Kg`}),Se(),xe(()=>zi("bodyWeighings",Ke.id,Ke))},[e,xe,Se,ie]),tn=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke=await Oe.weighings.where({date:Re}).toArray();if(Ke.length===0)return;const Et=Ke.map(Ft=>Ft.id),ct=Ke.map(Ft=>Ft.goatId),yn=(await Oe.events.where("date").equals(Re).and(Ft=>Ft.type==="Pesaje Lechero"&&ct.includes(Ft.animalId)).toArray()).map(Ft=>Ft.id);await Oe.transaction("rw",Oe.weighings,Oe.events,async()=>{await Oe.weighings.bulkDelete(Et),await Oe.events.bulkDelete(yn)}),await Se(),xe(async()=>{const Ft=Lv(hi);Et.forEach(qn=>Ft.delete(Da(hi,"weighings",qn))),yn.forEach(qn=>Ft.delete(Da(hi,"events",qn))),await Ft.commit()})},[e,xe,Se]),Zt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke=Re.id.toUpperCase();if(await Oe.fathers.where("id").equalsIgnoreCase(Ke).first())throw new Error(`El ID de padre '${Ke}' ya está en uso.`);const ct={...Re,id:Ke,userId:e.uid,_synced:!1};await Oe.fathers.put(ct),Se(),xe(()=>zi("fathers",ct.id,ct))},[e,xe,Se]),$t=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke=Re.motherId.toUpperCase(),Et=Re.parturitionOutcome==="Aborto"&&!Re.inducedLactation?"finalizada":"activa",ct=ks(),Gt={id:ct,goatId:Ke,parturitionDate:Re.parturitionDate,sireId:Re.sireId,offspringCount:Re.offspringCount,parturitionType:Re.parturitionType,parturitionOutcome:Re.parturitionOutcome,status:Et,userId:e.uid,_synced:!1,dryingStartDate:Re.inducedLactation&&Re.parturitionOutcome==="Aborto"?Re.parturitionDate:void 0,liveOffspring:Re.liveOffspring?Re.liveOffspring.map(Ft=>{var qn;return{id:(qn=Ft.id)==null?void 0:qn.toUpperCase(),sex:Ft.sex,birthWeight:Ft.birthWeight}}):void 0},yn=(Re.liveOffspring||[]).map(Ft=>({id:Ft.id.toUpperCase(),sex:Ft.sex,status:"Activo",birthDate:Re.parturitionDate,motherId:Ke,fatherId:Re.sireId,birthWeight:parseFloat(Ft.birthWeight)||void 0,userId:e.uid,createdAt:Date.now(),lifecycleStage:Ft.sex==="Hembra"?"Cabrita":"Cabrito",location:"",reproductiveStatus:"No Aplica",isReference:!1,_synced:!1}));await Oe.transaction("rw",Oe.parturitions,Oe.animals,Oe.events,async()=>{await Oe.parturitions.put(Gt),ie({animalId:Ke,date:Re.parturitionDate,type:Re.parturitionOutcome==="Aborto"?"Aborto":"Parto",details:Re.parturitionOutcome==="Aborto"?`Aborto registrado con Semental: ${Re.sireId}. ${Re.inducedLactation?"Se induce lactancia.":""}`:`Parto ${Re.parturitionType} (${Re.offspringCount} crías) con Semental: ${Re.sireId}. Vivas: ${yn.length}.`}),yn.length>0&&(await Oe.animals.bulkPut(yn),yn.forEach(Ft=>{ie({animalId:Ft.id,date:Ft.birthDate,type:"Nacimiento",details:`Nacido con ${Ft.birthWeight||"N/A"} Kg. Madre: ${Ft.motherId}. Padre: ${Ft.fatherId}.`})}))}),await Se(),xe(async()=>{const Ft=Lv(hi);Ft.set(Da(hi,"parturitions",ct),Gt),yn.forEach(qn=>Ft.set(Da(hi,"animals",qn.id),qn)),await Ft.commit()})},[e,xe,Se,ie]),on=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke={id:ks(),...Re,userId:e.uid,_synced:!1};await Oe.serviceRecords.put(Ke);const Et=await Oe.sireLots.get(Ke.sireLotId),ct=Et?await Oe.fathers.get(Et.sireId)||await Oe.animals.get(Et.sireId):null;ie({animalId:Ke.femaleId,date:Ke.serviceDate,type:"Servicio",details:`Servicio registrado con Semental: ${(ct==null?void 0:ct.name)||(ct==null?void 0:ct.id)||(Et==null?void 0:Et.sireId)||"Desconocido"}`}),Se(),xe(()=>zi("serviceRecords",Ke.id,Ke))},[e,xe,Se,ie]),lt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke=await Oe.animals.where({location:Re.lotName}).toArray();if(Ke.length===0)return;const Et=Ke.map(Gt=>({id:ks(),animalId:Gt.id,date:Re.date,type:Re.type,details:Re.details,lotName:Re.lotName,userId:e.uid,notes:`Evento aplicado a todo el lote: ${Re.lotName}`,_synced:!1}));await Oe.events.bulkPut(Et),Se(),xe(async()=>{const Gt=Lv(hi);Et.forEach(yn=>Gt.set(Da(hi,"events",yn.id),yn)),await Gt.commit()})},[e,xe,Se]),bt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke={id:ks(),...Re,userId:e.uid,_synced:!1};await Oe.feedingPlans.put(Ke),Se(),xe(()=>zi("feedingPlans",Ke.id,Ke))},[e,xe,Se]),yt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke={id:ks(),...Re,userId:e.uid,_synced:!1};return await Oe.breedingSeasons.put(Ke),Se(),xe(()=>zi("breedingSeasons",Ke.id,Ke)),Ke.id},[e,xe,Se]),nt=I.useCallback(async(Re,Oe)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Kn(),Et={...Oe,_synced:!1};await Ke.breedingSeasons.update(Re,Et),Se();const ct=await Ke.breedingSeasons.get(Re);ct&&xe(()=>zi("breedingSeasons",Re,ct))},[e,xe,Se]),Bt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");await Kn().breedingSeasons.delete(Re),Se(),xe(()=>Xf(Da(hi,"breedingSeasons",Re)).catch(Ke=>console.error("Firestore delete sync failed:",Ke)))},[e,xe,Se]),ft=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke={id:ks(),...Re,userId:e.uid,_synced:!1};return await Oe.sireLots.put(Ke),Se(),xe(()=>zi("sireLots",Ke.id,Ke)),Ke.id},[e,xe,Se]),pt=I.useCallback(async(Re,Oe)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Kn(),Et={...Oe,_synced:!1};await Ke.sireLots.update(Re,Et),Se();const ct=await Ke.sireLots.get(Re);ct&&xe(()=>zi("sireLots",Re,ct))},[e,xe,Se]),Rt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");await Kn().sireLots.delete(Re),Se(),xe(()=>Xf(Da(hi,"sireLots",Re)).catch(Ke=>console.error("Firestore delete sync failed:",Ke)))},[e,xe,Se]),Ct=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke={id:ks(),...Re,userId:e.uid,_synced:!1};await Oe.products.put(Ke),Se(),xe(()=>zi("products",Ke.id,Ke))},[e,xe,Se]),Ht=I.useCallback(async(Re,Oe)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Kn(),Et={...Oe,_synced:!1};await Ke.products.update(Re,Et),Se();const ct=await Ke.products.get(Re);ct&&xe(()=>zi("products",Re,ct))},[e,xe,Se]),pn=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");await Kn().products.delete(Re),Se(),xe(()=>Xf(Da(hi,"products",Re)).catch(Ke=>console.error("Firestore delete sync failed:",Ke)))},[e,xe,Se]),dn=I.useCallback(async(Re,Oe)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Kn(),Et={id:ks(),...Re,userId:e.uid,_synced:!1},ct=Oe.map(yn=>({id:ks(),...yn,healthPlanId:Et.id,userId:e.uid,_synced:!1}));await Ke.transaction("rw",Ke.healthPlans,Ke.planActivities,async()=>{await Ke.healthPlans.put(Et),await Ke.planActivities.bulkPut(ct)}),Se(),xe(async()=>{const yn=Lv(hi);yn.set(Da(hi,"healthPlans",Et.id),Et),ct.forEach(Gn=>yn.set(Da(hi,"planActivities",Gn.id),Gn)),await yn.commit()})},[e,xe,Se]),wt=I.useCallback(async(Re,Oe)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Kn(),Et={...Oe,_synced:!1};await Ke.healthPlans.update(Re,Et),Se();const ct=await Ke.healthPlans.get(Re);ct&&xe(()=>zi("healthPlans",Re,ct))},[e,xe,Se]),sr=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Et=(await Oe.planActivities.where({healthPlanId:Re}).toArray()).map(Gt=>Gt.id);await Oe.transaction("rw",Oe.healthPlans,Oe.planActivities,async()=>{await Oe.planActivities.bulkDelete(Et),await Oe.healthPlans.delete(Re)}),Se(),xe(async()=>{const Gt=Lv(hi);Et.forEach(yn=>Gt.delete(Da(hi,"planActivities",yn))),Gt.delete(Da(hi,"healthPlans",Re)),await Gt.commit()})},[e,xe,Se]),mn=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke={id:ks(),...Re,userId:e.uid,_synced:!1};await Oe.planActivities.put(Ke),Se(),xe(()=>zi("planActivities",Ke.id,Ke))},[e,xe,Se]),qt=I.useCallback(async(Re,Oe)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Kn(),Et={...Oe,_synced:!1};await Ke.planActivities.update(Re,Et),Se();const ct=await Ke.planActivities.get(Re);ct&&xe(()=>zi("planActivities",Re,ct))},[e,xe,Se]),Cn=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");await Kn().planActivities.delete(Re),Se(),xe(()=>Xf(Da(hi,"planActivities",Re)).catch(Ke=>console.error("Firestore delete sync failed:",Ke)))},[e,xe,Se]),ba=I.useCallback(async Re=>{var Et;if(!e)throw new Error("Usuario no autenticado");const Oe=Kn(),Ke={id:ks(),...Re,userId:e.uid,_synced:!1};await Oe.healthEvents.put(Ke),ie({animalId:Ke.animalId,date:Ke.date,type:"Tratamiento",details:`${Ke.type}${Ke.productUsed?` con ${((Et=O.find(ct=>ct.id===Ke.productUsed))==null?void 0:Et.name)||"producto"}`:""}`,notes:Ke.notes,lotName:Ke.lotName}),Se(),xe(()=>zi("healthEvents",Ke.id,Ke))},[e,xe,Se,ie,O]),$r=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");se("syncing");try{const Oe=Da(hi,"configuracion",e.uid);await KE(Oe,Re,{merge:!0})}catch(Oe){throw console.error("Error al guardar configuración:",Oe),se("idle"),Oe}},[e]),gs=I.useMemo(()=>({animals:n,fathers:i,weighings:s,parturitions:l,lots:d,origins:p,breedingSeasons:g,sireLots:v,serviceRecords:b,events:A,feedingPlans:D,bodyWeighings:N,products:O,healthPlans:M,planActivities:V,healthEvents:Z,appConfig:$,isLoadingConfig:te,isLoading:H,syncStatus:le,fetchData:Se,addAnimal:He,updateAnimal:Fe,deleteAnimalPermanently:he,startDryingProcess:Ye,setLactationAsDry:mt,addLot:vt,deleteLot:Qe,addOrigin:Ot,deleteOrigin:ht,addBreedingSeason:yt,updateBreedingSeason:nt,deleteBreedingSeason:Bt,addSireLot:ft,updateSireLot:pt,deleteSireLot:Rt,addServiceRecord:on,addFeedingPlan:bt,addBatchEvent:lt,addWeighing:dt,addBodyWeighing:It,deleteWeighingSession:tn,addParturition:$t,addFather:Zt,addProduct:Ct,updateProduct:Ht,deleteProduct:pn,addHealthPlanWithActivities:dn,updateHealthPlan:wt,deleteHealthPlan:sr,addPlanActivity:mn,updatePlanActivity:qt,deletePlanActivity:Cn,addHealthEvent:ba,updateAppConfig:$r}),[n,i,s,l,d,p,g,v,b,A,D,N,O,M,V,Z,$,te,H,le,Se,He,Fe,he,Ye,mt,vt,Qe,Ot,ht,yt,nt,Bt,ft,pt,Rt,on,bt,lt,dt,It,tn,$t,Zt,Ct,Ht,pn,dn,wt,sr,mn,qt,Cn,ba,$r]);return c.jsx(IW.Provider,{value:gs,children:t})},hce=(t,e)=>{if(!t||t==="N/A"||!e)return"Indefinido";const n=new Date,r=new Date(t+"T00:00:00Z");if(isNaN(r.getTime()))return"Indefinido";const i=Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),a=Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),s=Math.floor((i-a)/(1e3*60*60*24));return e==="Hembra"?s<=60?"Cabrita":s<=365?"Cabritona":"Cabra Adulta":s<=60?"Cabrito":s<=365?"Macho de Levante":"Macho Cabrío"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pce=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OW=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mce={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gce=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},l)=>I.createElement("svg",{ref:l,...mce,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:OW("lucide",i),...o},[...s.map(([u,d])=>I.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(t,e)=>{const n=I.forwardRef(({className:r,...i},a)=>I.createElement(gce,{ref:a,iconNode:e,className:OW(`lucide-${pce(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=St("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=St("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=St("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=St("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vce=St("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=St("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=St("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=St("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yce=St("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bce=St("BarChart4",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xce=St("BarChartHorizontal",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=St("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wce=St("CalendarCheck2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sce=St("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ce=St("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=St("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=St("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ace=St("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cce=St("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=St("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jce=St("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=St("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=St("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ece=St("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nce=St("CircleOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.35 2.69A10 10 0 0 1 21.3 15.65",key:"1pfsoa"}],["path",{d:"M19.08 19.08A10 10 0 1 1 4.92 4.92",key:"1ablyi"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=St("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pce=St("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MW=St("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=St("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=St("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kce=St("CloudCog",[["circle",{cx:"12",cy:"17",r:"3",key:"1spfwm"}],["path",{d:"M4.2 15.1A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.2",key:"zaobp"}],["path",{d:"m15.7 18.4-.9-.3",key:"4qxpbn"}],["path",{d:"m9.2 15.9-.9-.3",key:"17q7o2"}],["path",{d:"m10.6 20.7.3-.9",key:"1pf4s2"}],["path",{d:"m13.1 14.2.3-.9",key:"1mnuqm"}],["path",{d:"m13.6 20.7-.4-1",key:"1jpd1m"}],["path",{d:"m10.8 14.3-.4-1",key:"17ugyy"}],["path",{d:"m8.3 18.6 1-.4",key:"s42vdx"}],["path",{d:"m14.7 15.8 1-.4",key:"2wizun"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tce=St("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dce=St("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ice=St("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=St("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oce=St("Dna",[["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m17 6-2.5-2.5",key:"5cdfhj"}],["path",{d:"m14 8-1-1",key:"15nbz5"}],["path",{d:"m7 18 2.5 2.5",key:"16tu1a"}],["path",{d:"m3.5 14.5.5.5",key:"hapbhd"}],["path",{d:"m20 9 .5.5",key:"1n7z02"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m10 16 1.5 1.5",key:"11lckj"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=St("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mce=St("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=St("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=St("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RW=St("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rce=St("Feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=St("FileArchive",[["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v18",key:"1oywqq"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lce=St("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=St("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=St("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=St("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fce=St("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=St("GitCompareArrows",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"M12 18H7a2 2 0 0 1-2-2V9",key:"16sdep"}],["path",{d:"m9 15 3 3-3 3",key:"1m3kbl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=St("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zce=St("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=St("HeartCrack",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"m12 13-1-1 2-2-3-3 2-2",key:"xjdxli"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ce=St("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=St("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=St("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=St("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=St("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=St("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $W=St("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=St("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=St("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=St("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=St("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WW=St("Milk",[["path",{d:"M8 2h8",key:"1ssgc1"}],["path",{d:"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2",key:"qtp12x"}],["path",{d:"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"ygeh44"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=St("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=St("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=St("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bce=St("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=St("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vce=St("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=St("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uce=St("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=St("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wce=St("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hce=St("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=St("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=St("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=St("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=St("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=St("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=St("Sigma",[["path",{d:"M18 7V4H6l6 8-6 8h12v-3",key:"zis8ev"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=St("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=St("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qce=St("SquareActivity",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=St("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kce=St("SquareMinus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=St("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=St("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gce=St("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=St("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yce=St("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=St("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xce=St("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=St("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=St("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=St("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=St("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qce=St("Waypoints",[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=St("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=St("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=St("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var XW={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ZM=be.createContext&&be.createContext(XW),Zce=["attr","size","title"];function Jce(t,e){if(t==null)return{};var n=eue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function X2(){return X2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X2.apply(this,arguments)}function JM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Q2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JM(Object(n),!0).forEach(function(r){tue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tue(t,e,n){return e=nue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nue(t){var e=rue(t,"string");return typeof e=="symbol"?e:e+""}function rue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QW(t){return t&&t.map((e,n)=>be.createElement(e.tag,Q2({key:n},e.attr),QW(e.child)))}function vl(t){return e=>be.createElement(iue,X2({attr:Q2({},t.attr)},e),QW(t.child))}function iue(t){var e=n=>{var{attr:r,size:i,title:a}=t,s=Jce(t,Zce),o=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),be.createElement("svg",X2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:Q2(Q2({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&be.createElement("title",null,a),t.children)};return ZM!==void 0?be.createElement(ZM.Consumer,null,n=>e(n)):e(XW)}function ZW(t){return vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 23.38L89.844 89.845l-64.9 162.254 14.85 5.943c20.312-50.766 40.62-101.535 60.93-152.304l1.432-3.58L256 40.616l153.844 61.54 1.43 3.58 60.93 152.305 14.853-5.942-64.9-162.254C366.77 67.69 311.386 45.534 256 23.38zm0 36.624l-139.996 55.998L72.8 224h.2v263h78V329h-39v-18h297v176h30V224h.2c-14.402-36-28.802-72-43.204-107.998L256 60.004zM151 135h210v114H151V135zm23.563 18L199 201.873V153h-24.438zM313 153v48.873L337.438 153H313zm-144 29.127V231h24.438L169 182.127zm174 0L318.562 231H343v-48.873zm-98.73 18.69c-1.207-.02-2.31.02-3.288.128-2.823.31-10.76 3.708-16.86 7.3-2.796 1.645-5.23 3.22-7.122 4.484V231h78v-16.97c-4.193-1.675-10.334-4.02-17.578-6.368-11.206-3.63-24.71-6.71-33.152-6.846zM160 263h192v18H160v-18zm15.16 66L208 389.205 240.84 329h-65.68zm144 0L352 389.205 384.84 329h-65.68zM169 355.295v105.41L197.748 408 169 355.295zm78 0L218.252 408 247 460.705v-105.41zm66 0v105.41L341.748 408 313 355.295zm78 0L362.252 408 391 460.705v-105.41zm-183 71.5L175.16 487h65.68L208 426.795zm144 0L319.16 487h65.68L352 426.795z"},child:[]}]})(t)}function aue(t){return vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M23 23v466h466v-18H41v-82.184l85.854-57.234 70.023 70.022 65.133-260.536L387.28 203.7 455.07 95.73l19.317 11.858 6.102-71.1-60.644 37.616 19.884 12.207-59.01 93.99-130.732-65.366-62.865 251.462-57.98-57.978L41 367.184V23H23z"},child:[]}]})(t)}function sue(t){return vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M44.62 106a26 26 0 0 0-25.69 29.3c16 124 16 117.4 0 241.4A26 26 0 0 0 54.72 404l138.68-57.7c-1.2 9.5-2.4 18.9-3.9 30.4-2.5 19.8 17.3 35 35.8 27.3l252-124c9.7-4 16-13.5 16-24s-6.3-20-16-24l-252-124c-3.2-1.3-6.6-2-10.1-2-15.6.1-27.7 13.8-25.7 29.3 1.5 11.5 2.7 20.9 3.9 30.4L54.72 108a26 26 0 0 0-10.1-2z"},child:[]}]})(t)}function tv(t){return vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M273 459l7.79-20 6.21 20 5.79-23.33-4.25-48c-7.76 7.94-17.54 17.85-29.74 30.27zm38.5-380.86a115.06 115.06 0 0 0-21.13-19.6c-17.315-11.88-35.418-18.913-55.08-22.14-18.751-3.067-37.99-2.743-56.33.12A203.86 203.86 0 0 0 133 49.42a184.2 184.2 0 0 0-29.62 15.36c-12.304 8.597-10.431 6.828.95 1.82a179.6 179.6 0 0 1 30.9-10c50.427-4.832 98.41-7.579 134.17 27.17a80 80 0 0 1 12.28 16c4.714 8.06 7.805 16.877 9.66 25.59l45.69 2.84c-5.032-17.752-15.256-37.574-25.53-50.06zm50.05 26.63c-8.531-13.217-18.495-25.428-29.66-34.88a78.24 78.24 0 0 0-15.79-10.38c2.67 2.68 5.22 5.45 7.61 8.32a138.13 138.13 0 0 1 9.13 12.11l.1.14.09.14c9.772 15.14 17.164 33.862 20.78 49.15l22.19 1.3a253.49 253.49 0 0 0-14.43-25.91zm29.89 43l70 179.4-11.82 28.37-65.77-37.94-8 13.86 67.56 39-4.327 5.754L394.12 372l-65.33-31.47a42.41 42.41 0 0 0-9.29-1.43c-5.71 0-9.52 2.06-12.71 6.62-2.53 3.61-78.5 80.52-147.64 150.28H16V243.73l92.85 3.85 96.61-33.26 10.13-11a214.71 214.71 0 0 1 38 24.27 18.57 18.57 0 0 0 11.61 3.93c13.792-1.574 22.025-9.12 32.83-17.83-3.267-21.244-6.724-43.71-9.56-62.1-6.463-2.155-12.926-4.308-19.39-6.46l4.39-4.78zm-37.25 65.02c-4.024-14.705-20.114-19.427-30.58-18.14-3.073.432-6.167 1.427-8.77 2.68.868 3.09 2.17 7.87 3.79 10.35 6.527 9.211 17.348 13.898 27.64 12.51 3.967-.672 8.94-3.676 7.92-7.4zm61.63 105.47l19 20 11.6-11-19-20zM475 172.99s-40.54-27.8-57-1.2l11.25 28.83zM294 382.05l13.4 22.28-.4-35.64c-3.29 3.45-7.53 7.82-12.95 13.36zm-30.6-167c5.858 1.872 17.61-6.048 17.33-8.01l-6.67-43.33-28-9.31c-17.65-2.861-58.224-4.989-67.27 9.28 39.596 39.732 39.526 16.87 84.61 51.37zm127.08 172.89c-15.313-7.704-30.838-14.996-46.28-22.44 5.153 29.387 10.895 58.672 15.75 88.11l25.26 37.33-2.6-34L400 469.61v-28.67l10.19-41.95 6.67-11.05z"},child:[]}]})(t)}function oue(t){return vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M302.958 20.019l-93.916 46.564v35.404c31.305-15.522 62.61-31.047 93.916-46.568zm6.53 52.252l-95.4 47.3 63.036 78.137 95.397-47.303zm-111.915 55.492l-33.732 16.724h47.224zm-22.119 34.722l71.615 26.633-21.484-26.633zm-41.021 3.948v276.752l131.22 48.796v-276.75zm243.134 1.56c-31.306 15.521-62.61 31.044-93.916 46.567v275.863l93.916-46.567zM176.501 272.466s-15.3 15.085-9.889 24.203c4.167 7.02 21.889 5.418 21.889 5.418l15.549 3.848s17.72 10.374 21.887 5.416c5.41-6.44-9.887-29.098-9.887-29.098s35.91 33.492 29.662 47.318c-3.143 6.955-24.719-2.117-24.719-2.117s5.495 7.21 4.944 10.549c-1.001 6.062-13.774 9.916-13.774 9.916s1.111 21.24-6 25.168c-5.147 2.843-14.628.497-19.775-4.895-7.111-7.448-6-28.136-6-28.136s-12.775-10.177-13.776-16.735c-.55-3.611 4.944-8.103 4.944-8.103s-21.575-1.607-24.717-10.117c-6.247-16.919 29.662-32.635 29.662-32.635z"},child:[]}]})(t)}function lue(t){return vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M90.52 390.06h38.497v16.583H65.443V390.06l31.933-28.182c2.852-2.578 4.96-5.098 6.328-7.56 1.368-2.46 2.05-5.018 2.05-7.675 0-4.1-1.386-7.402-4.16-9.902-2.733-2.5-6.386-3.75-10.956-3.75-3.516 0-7.363.763-11.543 2.286-4.18 1.485-8.652 3.71-13.418 6.68v-19.22c5.078-1.678 10.098-2.948 15.06-3.807 4.96-.9 9.823-1.35 14.588-1.35 10.47 0 18.594 2.306 24.375 6.915 5.82 4.61 8.73 11.035 8.73 19.277 0 4.766-1.23 9.22-3.69 13.36-2.46 4.1-7.637 9.61-15.528 16.523l-18.69 16.406m349.377 32.915c5.897 1.524 10.37 4.18 13.417 7.97 3.086 3.75 4.63 8.534 4.63 14.355 0 8.672-3.322 15.273-9.962 19.804-6.64 4.493-16.328 6.74-29.063 6.74-4.492 0-9.004-.372-13.535-1.115-4.492-.704-8.945-1.778-13.36-3.223v-17.403c4.22 2.11 8.4 3.71 12.54 4.805 4.18 1.054 8.28 1.58 12.304 1.58 5.978 0 10.548-1.034 13.712-3.104 3.203-2.07 4.805-5.04 4.805-8.907 0-3.985-1.64-6.993-4.922-9.024-3.242-2.07-8.047-3.105-14.414-3.106h-9.022v-14.53h9.492c5.664 0 9.883-.88 12.656-2.638 2.773-1.796 4.16-4.51 4.16-8.144 0-3.36-1.347-5.957-4.043-7.793-2.695-1.836-6.504-2.754-11.426-2.754-3.632 0-7.304.41-11.015 1.232-3.71.82-7.403 2.03-11.074 3.632V384.83c4.453-1.25 8.867-2.186 13.242-2.812 4.375-.624 8.672-.937 12.89-.937 11.368 0 19.864 1.876 25.49 5.626 5.663 3.71 8.495 9.316 8.495 16.816 0 5.118-1.348 9.317-4.043 12.598-2.696 3.242-6.68 5.527-11.953 6.856M236.062 230.74h19.922v-56.544l-20.45 4.22v-15.352l20.333-4.22h21.445v71.895h19.922v15.585h-61.172V230.74M496 496V352H352V128H176v160H16v208"},child:[]}]})(t)}function cue(t){return vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M24.844 25.563c1.333 77.685 25.778 141.568 63.283 187.955 4.367-4.937 8.77-9.796 13.13-14.553a9.5 9.5 0 0 1 7.348-3.178 9.5 9.5 0 0 1 6.66 16.016c-22.957 25.048-46.51 52.82-58.777 76.95-6.132 12.067-9.31 23.07-9.037 31.874.17 5.474 1.374 10.174 4.26 14.562l16.552-22.684a9.5 9.5 0 0 1 7.898-4.008 9.5 9.5 0 0 1 7.45 15.207l-16.635 22.797c2.973.316 6.316-.284 10.474-1.75 8.174-2.882 18.38-9.868 28.734-19.672 20.704-19.608 42.15-50.057 56.953-77.644a9.5 9.5 0 0 1 9.9-4.885c6.228 1.017 22.147 2.215 35.78.573 6.816-.82 13.107-2.395 17.232-4.432 4.124-2.035 5.597-3.84 6.12-5.934a9.5 9.5 0 1 1 18.434 4.603c-2.193 8.78-8.967 14.825-16.145 18.37-7.18 3.542-15.245 5.277-23.372 6.256-12.798 1.542-25.47 1.082-34.522.143-2.816 5.038-5.806 10.122-8.937 15.192 29.03 14.058 60.48 21.354 92.34 21.115 22.055-.164 43.82-4.29 64.64-11.937-6.014-8.637-11.297-17.378-15.596-25.96A9.5 9.5 0 1 1 326 252.03c13.688 27.32 40.692 59.164 67.537 79.982 13.423 10.41 26.846 18.047 37.842 21.363 5.988 1.806 10.902 2.378 14.983 1.854l-10.996-13.093a9.5 9.5 0 0 1 7.06-15.715 9.5 9.5 0 0 1 7.49 3.494l12.054 14.352c3.226-4.725 4.71-9.948 5.042-16.102.513-9.534-2.39-21.344-8.18-34.158-11.578-25.63-34.297-54.796-57.053-79.625a9.5 9.5 0 0 1 7.322-16.01 9.5 9.5 0 0 1 6.685 3.172c3.1 3.384 6.205 6.848 9.29 10.37 37.514-47.34 61.834-111.574 62.892-186.352H24.843zm138.664 270.68c-4.952 14.607-8.863 29.266-11.043 42.61-2.476 15.154-2.608 28.608-.29 37.745 2.32 9.137 5.71 13.32 12.514 15.22 10.31 2.88 17.56 1.32 24.884-3.572 7.325-4.893 14.436-13.87 20.696-25.87 6.813-13.064 12.555-29.486 17.517-47.09-22.16-3.106-43.775-9.54-64.28-19.044zm173.04 6.083c-9.938 3.936-20.108 7.144-30.456 9.57.512.913 1.02 1.844 1.54 2.733 7.736 13.262 16.197 23.722 23.802 29.292 7.604 5.57 12.882 6.638 19.34 3.77 7.937-3.52 12.458-8.014 15.236-14.087-10.454-9.556-20.457-20.185-29.46-31.28z"},child:[]}]})(t)}const uue=()=>{const[t,e]=I.useState(!0),[n,r]=I.useState(""),[i,a]=I.useState(""),[s,o]=I.useState(null),[l,u]=I.useState(!1),d=async()=>{if(window.confirm("¿Estás seguro de que quieres forzar la eliminación de la base de datos local? Esto no afectará tus datos en la nube."))try{await ag.delete("GanaderoOS_DB"),alert("Base de datos local eliminada con éxito. La página se recargará."),window.location.reload()}catch(h){alert("Error al eliminar la base de datos."),console.error(h)}},f=h=>{if(h.code==="auth/network-request-failed")return"No hay conexión a internet. Se requiere conexión para iniciar sesión.";switch(h.code){case"auth/invalid-email":return"El formato del correo electrónico no es válido.";case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Correo electrónico o contraseña incorrectos.";case"auth/email-already-in-use":return"Este correo electrónico ya está registrado.";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres.";default:return console.error("Firebase Auth Error:",h),"Ocurrió un error inesperado. Por favor, intenta de nuevo."}},p=async h=>{h.preventDefault(),o(null),u(!0);try{t?await Lae(ig,n,i):await Rae(ig,n,i)}catch(g){o(f(g))}finally{u(!1)}};return c.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 font-sans",children:c.jsxs("div",{className:"w-full max-w-sm",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[c.jsx(tv,{className:"w-12 h-12 text-brand-orange"}),c.jsx("h1",{className:"text-4xl font-bold text-white",children:"GanaderoOS"})]}),c.jsx("p",{className:"text-zinc-400",children:"El sistema operativo para tu finca."})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-6 border border-brand-border",children:[c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full mb-6",children:[c.jsx("button",{onClick:()=>e(!0),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"bg-zinc-700 text-white":"text-zinc-400 hover:bg-zinc-800/50"}`,children:"Iniciar Sesión"}),c.jsx("button",{onClick:()=>e(!1),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"text-zinc-400 hover:bg-zinc-800/50":"bg-zinc-700 text-white"}`,children:"Registrarse"})]}),c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c.jsx("input",{type:"email",value:n,onChange:h=>r(h.target.value),placeholder:"Correo electrónico",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),c.jsx("input",{type:"password",value:i,onChange:h=>a(h.target.value),placeholder:"Contraseña",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),s&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(dr,{size:18}),c.jsx("span",{children:s})]}),c.jsx("button",{type:"submit",disabled:l,className:"w-full bg-brand-orange text-white font-bold py-3 rounded-xl transition-colors hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Procesando...":t?"Iniciar Sesión":"Crear Cuenta"})]})]}),c.jsxs("div",{className:"mt-6 text-center",children:[c.jsxs("button",{onClick:d,className:"flex items-center justify-center gap-2 mx-auto bg-brand-red/20 text-brand-red font-semibold py-2 px-4 rounded-lg border border-brand-red/50 hover:bg-brand-red/30 transition-colors",children:[c.jsx(Gl,{size:16}),"Forzar Reinicio de DB Local"]}),c.jsx("p",{className:"text-xs text-zinc-600 mt-2",children:"Si la app no carga, usa este botón."})]})]})})};function due(t){return vl({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 160c44.2 0 80-35.8 80-80S236.2 0 192 0s-80 35.8-80 80 35.8 80 80 80zm-53.4 248.8l25.6-32-61.5-51.2L56.8 383c-11.4 14.2-11.7 34.4-.8 49l48 64c7.9 10.5 19.9 16 32 16 8.3 0 16.8-2.6 24-8 17.7-13.2 21.2-38.3 8-56l-29.4-39.2zm142.7-83.2l-61.5 51.2 25.6 32L216 448c-13.2 17.7-9.7 42.8 8 56 7.2 5.4 15.6 8 24 8 12.2 0 24.2-5.5 32-16l48-64c10.9-14.6 10.6-34.8-.8-49l-45.9-57.4zM376.7 145c-12.7-18.1-37.6-22.4-55.7-9.8l-40.6 28.5c-52.7 37-124.2 37-176.8 0L63 135.3C44.9 122.6 20 127 7.3 145-5.4 163.1-1 188 17 200.7l40.6 28.5c17 11.9 35.4 20.9 54.4 27.9V288h160v-30.8c19-7 37.4-16 54.4-27.9l40.6-28.5c18.1-12.8 22.4-37.7 9.7-55.8z"},child:[]}]})(t)}function fue(t){return vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function hue(t){return vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M201.5 174.8l55.7 55.8c3.1 3.1 3.1 8.2 0 11.3l-11.3 11.3c-3.1 3.1-8.2 3.1-11.3 0l-55.7-55.8-45.3 45.3 55.8 55.8c3.1 3.1 3.1 8.2 0 11.3l-11.3 11.3c-3.1 3.1-8.2 3.1-11.3 0L111 265.2l-26.4 26.4c-17.3 17.3-25.6 41.1-23 65.4l7.1 63.6L2.3 487c-3.1 3.1-3.1 8.2 0 11.3l11.3 11.3c3.1 3.1 8.2 3.1 11.3 0l66.3-66.3 63.6 7.1c23.9 2.6 47.9-5.4 65.4-23l181.9-181.9-135.7-135.7-64.9 65zm308.2-93.3L430.5 2.3c-3.1-3.1-8.2-3.1-11.3 0l-11.3 11.3c-3.1 3.1-3.1 8.2 0 11.3l28.3 28.3-45.3 45.3-56.6-56.6-17-17c-3.1-3.1-8.2-3.1-11.3 0l-33.9 33.9c-3.1 3.1-3.1 8.2 0 11.3l17 17L424.8 223l17 17c3.1 3.1 8.2 3.1 11.3 0l33.9-34c3.1-3.1 3.1-8.2 0-11.3l-73.5-73.5 45.3-45.3 28.3 28.3c3.1 3.1 8.2 3.1 11.3 0l11.3-11.3c3.1-3.2 3.1-8.2 0-11.4z"},child:[]}]})(t)}function pue(t){return vl({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 336c-48.6 0-88 39.4-88 88s39.4 88 88 88 88-39.4 88-88-39.4-88-88-88zm0 112c-13.23 0-24-10.77-24-24s10.77-24 24-24 24 10.77 24 24-10.77 24-24 24zm80-288h-64v-40.2c0-14.12 4.7-27.76 13.15-38.84 4.42-5.8 3.55-14.06-1.32-19.49L534.2 37.3c-6.66-7.45-18.32-6.92-24.7.78C490.58 60.9 480 89.81 480 119.8V160H377.67L321.58 29.14A47.914 47.914 0 0 0 277.45 0H144c-26.47 0-48 21.53-48 48v146.52c-8.63-6.73-20.96-6.46-28.89 1.47L36 227.1c-8.59 8.59-8.59 22.52 0 31.11l5.06 5.06c-4.99 9.26-8.96 18.82-11.91 28.72H22c-12.15 0-22 9.85-22 22v44c0 12.15 9.85 22 22 22h7.14c2.96 9.91 6.92 19.46 11.91 28.73l-5.06 5.06c-8.59 8.59-8.59 22.52 0 31.11L67.1 476c8.59 8.59 22.52 8.59 31.11 0l5.06-5.06c9.26 4.99 18.82 8.96 28.72 11.91V490c0 12.15 9.85 22 22 22h44c12.15 0 22-9.85 22-22v-7.14c9.9-2.95 19.46-6.92 28.72-11.91l5.06 5.06c8.59 8.59 22.52 8.59 31.11 0l31.11-31.11c8.59-8.59 8.59-22.52 0-31.11l-5.06-5.06c4.99-9.26 8.96-18.82 11.91-28.72H330c12.15 0 22-9.85 22-22v-6h80.54c21.91-28.99 56.32-48 95.46-48 18.64 0 36.07 4.61 51.8 12.2l50.82-50.82c6-6 9.37-14.14 9.37-22.63V192c.01-17.67-14.32-32-31.99-32zM176 416c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm22-256h-38V64h106.89l41.15 96H198z"},child:[]}]})(t)}function mue(t){return vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.28 445.86l-73.03-292.13c-3.8-15.19-16.44-25.72-30.87-25.72h-60.25c3.57-10.05 5.88-20.72 5.88-32 0-53.02-42.98-96-96-96s-96 42.98-96 96c0 11.28 2.3 21.95 5.88 32h-60.25c-14.43 0-27.08 10.54-30.87 25.72L1.72 445.86C-6.61 479.17 16.38 512 48.03 512h415.95c31.64 0 54.63-32.83 46.3-66.14zM256 128c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32z"},child:[]}]})(t)}const sn=({isOpen:t,onClose:e,title:n,children:r,size:i="default"})=>{if(!t)return null;const a=i==="fullscreen"?"items-end":"items-center",s={default:"max-w-md m-4 rounded-2xl",large:"max-w-xl m-4 rounded-2xl",fullscreen:"w-full h-[95vh] rounded-t-2xl flex flex-col"};return c.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center z-50 animate-fade-in ${a}`,onClick:e,children:c.jsxs("div",{className:`bg-ios-modal-bg border border-zinc-700/80 shadow-2xl text-white transform transition-all animate-slide-up ${s[i]}`,onClick:o=>o.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-zinc-800/80",children:[c.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:n}),c.jsx("button",{onClick:e,className:"p-1 rounded-full text-zinc-500 hover:text-white hover:bg-zinc-700/50 transition-colors",children:c.jsx(Ic,{size:20})})]}),c.jsx("div",{className:i==="fullscreen"?"flex-1 overflow-y-auto p-4":"overflow-y-auto max-h-[85vh] p-6",children:r})]})})},gue=({isOpen:t,onClose:e,editingLotId:n})=>{const{lots:r,addLot:i}=Kt(),[a,s]=I.useState(""),[o,l]=I.useState(""),[u,d]=I.useState(""),f=async()=>{if(a.trim()===""){d("El nombre del lote no puede estar vacío.");return}try{await i({name:a,parentLotId:o||void 0}),p()}catch(g){d(g.message||"No se pudo guardar el lote."),console.error(g)}},p=()=>{s(""),l(""),d(""),e()},h=r.filter(g=>!g.parentLotId&&g.id!==n);return c.jsx(sn,{isOpen:t,onClose:p,title:"Crear Nuevo Lote",children:c.jsxs("form",{onSubmit:g=>{g.preventDefault(),f()},className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la nueva ubicación o lote en tu finca."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"lotName",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Lote"}),c.jsx("input",{id:"lotName",type:"text",value:a,onChange:g=>s(g.target.value),placeholder:"Ej: Galpón 1",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"parentLot",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Sub-lote de (Opcional)"}),c.jsxs("select",{id:"parentLot",value:o,onChange:g=>l(g.target.value),className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0",children:[c.jsx("option",{value:"",children:"Ninguno (Es un Lote Principal)"}),h.map(g=>c.jsx("option",{value:g.id,children:g.name},g.id))]})]}),u&&c.jsx("p",{className:"text-sm text-brand-red text-center",children:u}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx("button",{type:"button",onClick:p,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Lote"})]})]})})},mT=I.createContext({});function md(t){const e=I.useRef(null);return e.current===null&&(e.current=t()),e.current}const xS=I.createContext(null),wS=I.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class vue extends I.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function yue({children:t,isPresent:e}){const n=I.useId(),r=I.useRef(null),i=I.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=I.useContext(wS);return I.useInsertionEffect(()=>{const{width:s,height:o,top:l,left:u}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return a&&(d.nonce=a),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),c.jsx(vue,{isPresent:e,childRef:r,sizeRef:i,children:I.cloneElement(t,{ref:r})})}const bue=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s})=>{const o=md(xue),l=I.useId(),u=I.useCallback(f=>{o.set(f,!0);for(const p of o.values())if(!p)return;r&&r()},[o,r]),d=I.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u,register:f=>(o.set(f,!1),()=>o.delete(f))}),a?[Math.random(),u]:[n,u]);return I.useMemo(()=>{o.forEach((f,p)=>o.set(p,!1))},[n]),I.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),s==="popLayout"&&(t=c.jsx(yue,{isPresent:n,children:t})),c.jsx(xS.Provider,{value:d,children:t})};function xue(){return new Map}function JW(t=!0){const e=I.useContext(xS);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=I.useId();I.useEffect(()=>{t&&i(a)},[t]);const s=I.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const $x=t=>t.key||"";function eR(t){const e=[];return I.Children.forEach(t,n=>{I.isValidElement(n)&&e.push(n)}),e}const gT=typeof window<"u",SS=gT?I.useLayoutEffect:I.useEffect,G1=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1})=>{const[o,l]=JW(s),u=I.useMemo(()=>eR(t),[t]),d=s&&!o?[]:u.map($x),f=I.useRef(!0),p=I.useRef(u),h=md(()=>new Map),[g,m]=I.useState(u),[v,y]=I.useState(u);SS(()=>{f.current=!1,p.current=u;for(let A=0;A<v.length;A++){const C=$x(v[A]);d.includes(C)?h.delete(C):h.get(C)!==!0&&h.set(C,!1)}},[v,d.length,d.join("-")]);const b=[];if(u!==g){let A=[...u];for(let C=0;C<v.length;C++){const D=v[C],j=$x(D);d.includes(j)||(A.splice(C,0,D),b.push(D))}a==="wait"&&b.length&&(A=b),y(eR(A)),m(u);return}const{forceRender:S}=I.useContext(mT);return c.jsx(c.Fragment,{children:v.map(A=>{const C=$x(A),D=s&&!o?!1:u===v||d.includes(C),j=()=>{if(h.has(C))h.set(C,!0);else return;let N=!0;h.forEach(P=>{P||(N=!1)}),N&&(S==null||S(),y(p.current),s&&(l==null||l()),r&&r())};return c.jsx(bue,{isPresent:D,initial:!f.current||n?void 0:!1,custom:D?void 0:e,presenceAffectsLayout:i,mode:a,onExitComplete:D?void 0:j,children:A},C)})})},ll=t=>t;let eH=ll;function vT(t){let e;return()=>(e===void 0&&(e=t()),e)}const lg=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Gu=t=>t*1e3,Yu=t=>t/1e3,wue={useManualTiming:!1};function Sue(t){let e=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(l.schedule(u),t()),u(s)}const l={schedule:(u,d=!1,f=!1)=>{const h=f&&r?e:n;return d&&a.add(u),h.has(u)||h.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(s=u,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const Bx=["read","resolveKeyframes","update","preRender","render","postRender"],_ue=40;function tH(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Bx.reduce((y,b)=>(y[b]=Sue(a),y),{}),{read:o,resolveKeyframes:l,update:u,preRender:d,render:f,postRender:p}=s,h=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,_ue),1),i.timestamp=y,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),d.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(h))},g=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:Bx.reduce((y,b)=>{const S=s[b];return y[b]=(A,C=!1,D=!1)=>(n||g(),S.schedule(A,C,D)),y},{}),cancel:y=>{for(let b=0;b<Bx.length;b++)s[Bx[b]].cancel(y)},state:i,steps:s}}const{schedule:ai,cancel:ad,state:ss,steps:$A}=tH(typeof requestAnimationFrame<"u"?requestAnimationFrame:ll,!0),nH=I.createContext({strict:!1}),tR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cg={};for(const t in tR)cg[t]={isEnabled:e=>tR[t].some(n=>!!e[n])};function Aue(t){for(const e in t)cg[e]={...cg[e],...t[e]}}const Cue=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Z2(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Cue.has(t)}let rH=t=>!Z2(t);function jue(t){t&&(rH=e=>e.startsWith("on")?!Z2(e):t(e))}try{jue(require("@emotion/is-prop-valid").default)}catch{}function Eue(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(rH(i)||n===!0&&Z2(i)||!e&&!Z2(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Nue(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const _S=I.createContext({});function Cy(t){return typeof t=="string"||Array.isArray(t)}function AS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const yT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bT=["initial",...yT];function CS(t){return AS(t.animate)||bT.some(e=>Cy(t[e]))}function iH(t){return!!(CS(t)||t.variants)}function Pue(t,e){if(CS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Cy(n)?n:void 0,animate:Cy(r)?r:void 0}}return t.inherit!==!1?e:{}}function kue(t){const{initial:e,animate:n}=Pue(t,I.useContext(_S));return I.useMemo(()=>({initial:e,animate:n}),[nR(e),nR(n)])}function nR(t){return Array.isArray(t)?t.join(" "):t}const Tue=Symbol.for("motionComponentSymbol");function lm(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Due(t,e,n){return I.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):lm(n)&&(n.current=r))},[e])}const xT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Iue="framerAppearId",aH="data-"+xT(Iue),{schedule:wT}=tH(queueMicrotask,!1),sH=I.createContext({});function Oue(t,e,n,r,i){var a,s;const{visualElement:o}=I.useContext(_S),l=I.useContext(nH),u=I.useContext(xS),d=I.useContext(wS).reducedMotion,f=I.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,h=I.useContext(sH);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&Mue(f.current,n,i,h);const g=I.useRef(!1);I.useInsertionEffect(()=>{p&&g.current&&p.update(n,u)});const m=n[aH],v=I.useRef(!!m&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,m))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,m)));return SS(()=>{p&&(g.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),wT.render(p.render),v.current&&p.animationState&&p.animationState.animateChanges())}),I.useEffect(()=>{p&&(!v.current&&p.animationState&&p.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,m)}),v.current=!1))}),p}function Mue(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:oH(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&lm(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function oH(t){if(t)return t.options.allowProjection!==!1?t.projection:oH(t.parent)}function Rue({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var a,s;t&&Aue(t);function o(u,d){let f;const p={...I.useContext(wS),...u,layoutId:Lue(u)},{isStatic:h}=p,g=kue(u),m=r(u,h);if(!h&&gT){Fue();const v=zue(p);f=v.MeasureLayout,g.visualElement=Oue(i,m,p,e,v.ProjectionNode)}return c.jsxs(_S.Provider,{value:g,children:[f&&g.visualElement?c.jsx(f,{visualElement:g.visualElement,...p}):null,n(i,u,Due(m,g.visualElement,d),m,h,g.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(s=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&s!==void 0?s:""})`}`;const l=I.forwardRef(o);return l[Tue]=i,l}function Lue({layoutId:t}){const e=I.useContext(mT).id;return e&&t!==void 0?e+"-"+t:t}function Fue(t,e){I.useContext(nH).strict}function zue(t){const{drag:e,layout:n}=cg;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const $ue=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ST(t){return typeof t!="string"||t.includes("-")?!1:!!($ue.indexOf(t)>-1||/[A-Z]/u.test(t))}function rR(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function _T(t,e,n,r){if(typeof e=="function"){const[i,a]=rR(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=rR(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const XE=t=>Array.isArray(t),Bue=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Vue=t=>XE(t)?t[t.length-1]||0:t,cs=t=>!!(t&&t.getVelocity);function Y1(t){const e=cs(t)?t.get():t;return Bue(e)?e.toValue():e}function Uue({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const s={latestValues:Wue(r,i,a,t),renderState:e()};return n&&(s.onMount=o=>n({props:r,current:o,...s}),s.onUpdate=o=>n(o)),s}const lH=t=>(e,n)=>{const r=I.useContext(_S),i=I.useContext(xS),a=()=>Uue(t,e,r,i);return n?a():md(a)};function Wue(t,e,n,r){const i={},a=r(t,{});for(const p in a)i[p]=Y1(a[p]);let{initial:s,animate:o}=t;const l=CS(t),u=iH(t);e&&u&&!l&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const f=d?o:s;if(f&&typeof f!="boolean"&&!AS(f)){const p=Array.isArray(f)?f:[f];for(let h=0;h<p.length;h++){const g=_T(t,p[h]);if(g){const{transitionEnd:m,transition:v,...y}=g;for(const b in y){let S=y[b];if(Array.isArray(S)){const A=d?S.length-1:0;S=S[A]}S!==null&&(i[b]=S)}for(const b in m)i[b]=m[b]}}}return i}const nv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mp=new Set(nv),cH=t=>e=>typeof e=="string"&&e.startsWith(t),uH=cH("--"),Hue=cH("var(--"),AT=t=>Hue(t)?que.test(t.split("/*")[0].trim()):!1,que=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dH=(t,e)=>e&&typeof t=="number"?e.transform(t):t,sd=(t,e,n)=>n>e?e:n<t?t:n,rv={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jy={...rv,transform:t=>sd(0,1,t)},Vx={...rv,default:1},Mb=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rd=Mb("deg"),ou=Mb("%"),An=Mb("px"),Kue=Mb("vh"),Gue=Mb("vw"),iR={...ou,parse:t=>ou.parse(t)/100,transform:t=>ou.transform(t*100)},Yue={borderWidth:An,borderTopWidth:An,borderRightWidth:An,borderBottomWidth:An,borderLeftWidth:An,borderRadius:An,radius:An,borderTopLeftRadius:An,borderTopRightRadius:An,borderBottomRightRadius:An,borderBottomLeftRadius:An,width:An,maxWidth:An,height:An,maxHeight:An,top:An,right:An,bottom:An,left:An,padding:An,paddingTop:An,paddingRight:An,paddingBottom:An,paddingLeft:An,margin:An,marginTop:An,marginRight:An,marginBottom:An,marginLeft:An,backgroundPositionX:An,backgroundPositionY:An},Xue={rotate:Rd,rotateX:Rd,rotateY:Rd,rotateZ:Rd,scale:Vx,scaleX:Vx,scaleY:Vx,scaleZ:Vx,skew:Rd,skewX:Rd,skewY:Rd,distance:An,translateX:An,translateY:An,translateZ:An,x:An,y:An,z:An,perspective:An,transformPerspective:An,opacity:jy,originX:iR,originY:iR,originZ:An},aR={...rv,transform:Math.round},CT={...Yue,...Xue,zIndex:aR,size:An,fillOpacity:jy,strokeOpacity:jy,numOctaves:aR},Que={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Zue=nv.length;function Jue(t,e,n){let r="",i=!0;for(let a=0;a<Zue;a++){const s=nv[a],o=t[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=dH(o,CT[s]);if(!l){i=!1;const d=Que[s]||s;r+=`${d}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function jT(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const l in e){const u=e[l];if(mp.has(l)){s=!0;continue}else if(uH(l)){i[l]=u;continue}else{const d=dH(u,CT[l]);l.startsWith("origin")?(o=!0,a[l]=d):r[l]=d}}if(e.transform||(s||n?r.transform=Jue(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${l} ${u} ${d}`}}const ede={offset:"stroke-dashoffset",array:"stroke-dasharray"},tde={offset:"strokeDashoffset",array:"strokeDasharray"};function nde(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?ede:tde;t[a.offset]=An.transform(-r);const s=An.transform(e),o=An.transform(n);t[a.array]=`${s} ${o}`}function sR(t,e,n){return typeof t=="string"?t:An.transform(e+n*t)}function rde(t,e,n){const r=sR(e,t.x,t.width),i=sR(n,t.y,t.height);return`${r} ${i}`}function ET(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},d,f){if(jT(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:h,dimensions:g}=t;p.transform&&(g&&(h.transform=p.transform),delete p.transform),g&&(i!==void 0||a!==void 0||h.transform)&&(h.transformOrigin=rde(g,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),s!==void 0&&nde(p,s,o,l,!1)}const NT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),fH=()=>({...NT(),attrs:{}}),PT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function hH(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const pH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mH(t,e,n,r){hH(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(pH.has(i)?i:xT(i),e.attrs[i])}const J2={};function ide(t){Object.assign(J2,t)}function gH(t,{layout:e,layoutId:n}){return mp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!J2[t]||t==="opacity")}function kT(t,e,n){var r;const{style:i}=t,a={};for(const s in i)(cs(i[s])||e.style&&cs(e.style[s])||gH(s,t)||((r=n==null?void 0:n.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function vH(t,e,n){const r=kT(t,e,n);for(const i in t)if(cs(t[i])||cs(e[i])){const a=nv.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function ade(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const oR=["x","y","width","height","cx","cy","r"],sde={useVisualState:lH({scrapeMotionValuesFromProps:vH,createRenderState:fH,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const o in i)if(mp.has(o)){a=!0;break}}if(!a)return;let s=!e;if(e)for(let o=0;o<oR.length;o++){const l=oR[o];t[l]!==e[l]&&(s=!0)}s&&ai.read(()=>{ade(n,r),ai.render(()=>{ET(r,i,PT(n.tagName),t.transformTemplate),mH(n,r)})})}})},ode={useVisualState:lH({scrapeMotionValuesFromProps:kT,createRenderState:NT})};function yH(t,e,n){for(const r in e)!cs(e[r])&&!gH(r,n)&&(t[r]=e[r])}function lde({transformTemplate:t},e){return I.useMemo(()=>{const n=NT();return jT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function cde(t,e){const n=t.style||{},r={};return yH(r,n,t),Object.assign(r,lde(t,e)),r}function ude(t,e){const n={},r=cde(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function dde(t,e,n,r){const i=I.useMemo(()=>{const a=fH();return ET(a,e,PT(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};yH(a,t.style,t),i.style={...a,...i.style}}return i}function fde(t=!1){return(n,r,i,{latestValues:a},s)=>{const l=(ST(n)?dde:ude)(r,a,s,n),u=Eue(r,typeof n=="string",t),d=n!==I.Fragment?{...u,...l,ref:i}:{},{children:f}=r,p=I.useMemo(()=>cs(f)?f.get():f,[f]);return I.createElement(n,{...d,children:p})}}function hde(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...ST(r)?sde:ode,preloadedFeatures:t,useRender:fde(i),createVisualElement:e,Component:r};return Rue(s)}}function bH(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function jS(t,e,n){const r=t.getProps();return _T(r,e,n!==void 0?n:r.custom,t)}const pde=vT(()=>window.ScrollTimeline!==void 0);class mde{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(pde()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class gde extends mde{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function TT(t,e){return t?t[e]||t.default||t:void 0}const QE=2e4;function xH(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<QE;)e+=n,r=t.next(e);return e>=QE?1/0:e}function DT(t){return typeof t=="function"}function lR(t,e){t.timeline=e,t.onfinish=null}const IT=t=>Array.isArray(t)&&typeof t[0]=="number",vde={linearEasing:void 0};function yde(t,e){const n=vT(t);return()=>{var r;return(r=vde[e])!==null&&r!==void 0?r:n()}}const ew=yde(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wH=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(lg(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function SH(t){return!!(typeof t=="function"&&ew()||!t||typeof t=="string"&&(t in ZE||ew())||IT(t)||Array.isArray(t)&&t.every(SH))}const l0=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ZE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:l0([0,.65,.55,1]),circOut:l0([.55,0,1,.45]),backIn:l0([.31,.01,.66,-.59]),backOut:l0([.33,1.53,.69,.99])};function _H(t,e){if(t)return typeof t=="function"&&ew()?wH(t,e):IT(t)?l0(t):Array.isArray(t)?t.map(n=>_H(n,e)||ZE.easeOut):ZE[t]}const fc={x:!1,y:!1};function AH(){return fc.x||fc.y}function bde(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function CH(t,e){const n=bde(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function cR(t){return e=>{e.pointerType==="touch"||AH()||t(e)}}function xde(t,e,n={}){const[r,i,a]=CH(t,n),s=cR(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const d=cR(f=>{u(f),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,i)});return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const jH=(t,e)=>e?t===e?!0:jH(t,e.parentElement):!1,OT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,wde=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Sde(t){return wde.has(t.tagName)||t.tabIndex!==-1}const c0=new WeakSet;function uR(t){return e=>{e.key==="Enter"&&t(e)}}function BA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const _de=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=uR(()=>{if(c0.has(n))return;BA(n,"down");const i=uR(()=>{BA(n,"up")}),a=()=>BA(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function dR(t){return OT(t)&&!AH()}function Ade(t,e,n={}){const[r,i,a]=CH(t,n),s=o=>{const l=o.currentTarget;if(!dR(o)||c0.has(l))return;c0.add(l);const u=e(o),d=(h,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!dR(h)||!c0.has(l))&&(c0.delete(l),typeof u=="function"&&u(h,{success:g}))},f=h=>{d(h,n.useGlobalTarget||jH(l,h.target))},p=h=>{d(h,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(o=>{!Sde(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),o.addEventListener("focus",u=>_de(u,i),i)}),a}function Cde(t){return t==="x"||t==="y"?fc[t]?null:(fc[t]=!0,()=>{fc[t]=!1}):fc.x||fc.y?null:(fc.x=fc.y=!0,()=>{fc.x=fc.y=!1})}const EH=new Set(["width","height","top","left","right","bottom",...nv]);let X1;function jde(){X1=void 0}const lu={now:()=>(X1===void 0&&lu.set(ss.isProcessing||wue.useManualTiming?ss.timestamp:performance.now()),X1),set:t=>{X1=t,queueMicrotask(jde)}};function MT(t,e){t.indexOf(e)===-1&&t.push(e)}function RT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ede([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[a]=t.splice(e,1);t.splice(i,0,a)}return t}class LT{constructor(){this.subscriptions=[]}add(e){return MT(this.subscriptions,e),()=>RT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function NH(t,e){return e?t*(1e3/e):0}const fR=30,Nde=t=>!isNaN(parseFloat(t)),E0={current:void 0};class Pde{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=lu.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=lu.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Nde(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new LT);const r=this.events[e].add(n);return e==="change"?()=>{r(),ai.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return E0.current&&E0.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=lu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>fR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,fR);return NH(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ug(t,e){return new Pde(t,e)}function kde(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ug(n))}function FT(t,e){const n=jS(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=Vue(a[s]);kde(t,s,o)}}function Tde(t){return!!(cs(t)&&t.add)}function JE(t,e){const n=t.getValue("willChange");if(Tde(n))return n.add(e)}function PH(t){return t.props[aH]}const kH=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Dde=1e-7,Ide=12;function Ode(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=kH(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>Dde&&++o<Ide);return s}function Rb(t,e,n,r){if(t===e&&n===r)return ll;const i=a=>Ode(a,0,1,t,n);return a=>a===0||a===1?a:kH(i(a),e,r)}const TH=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,DH=t=>e=>1-t(1-e),IH=Rb(.33,1.53,.69,.99),zT=DH(IH),OH=TH(zT),MH=t=>(t*=2)<1?.5*zT(t):.5*(2-Math.pow(2,-10*(t-1))),$T=t=>1-Math.sin(Math.acos(t)),RH=DH($T),LH=TH($T),FH=t=>/^0[^.\s]+$/u.test(t);function Mde(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||FH(t):!0}const N0=t=>Math.round(t*1e5)/1e5,BT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Rde(t){return t==null}const Lde=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,VT=(t,e)=>n=>!!(typeof n=="string"&&Lde.test(n)&&n.startsWith(t)||e&&!Rde(n)&&Object.prototype.hasOwnProperty.call(n,e)),zH=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(BT);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},Fde=t=>sd(0,255,t),VA={...rv,transform:t=>Math.round(Fde(t))},_h={test:VT("rgb","red"),parse:zH("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+VA.transform(t)+", "+VA.transform(e)+", "+VA.transform(n)+", "+N0(jy.transform(r))+")"};function zde(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const eN={test:VT("#"),parse:zde,transform:_h.transform},cm={test:VT("hsl","hue"),parse:zH("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ou.transform(N0(e))+", "+ou.transform(N0(n))+", "+N0(jy.transform(r))+")"},Ms={test:t=>_h.test(t)||eN.test(t)||cm.test(t),parse:t=>_h.test(t)?_h.parse(t):cm.test(t)?cm.parse(t):eN.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_h.transform(t):cm.transform(t)},$de=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Bde(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(BT))===null||e===void 0?void 0:e.length)||0)+(((n=t.match($de))===null||n===void 0?void 0:n.length)||0)>0}const $H="number",BH="color",Vde="var",Ude="var(",hR="${}",Wde=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ey(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Wde,l=>(Ms.test(l)?(r.color.push(a),i.push(BH),n.push(Ms.parse(l))):l.startsWith(Ude)?(r.var.push(a),i.push(Vde),n.push(l)):(r.number.push(a),i.push($H),n.push(parseFloat(l))),++a,hR)).split(hR);return{values:n,split:o,indexes:r,types:i}}function VH(t){return Ey(t).values}function UH(t){const{split:e,types:n}=Ey(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===$H?a+=N0(i[s]):o===BH?a+=Ms.transform(i[s]):a+=i[s]}return a}}const Hde=t=>typeof t=="number"?0:t;function qde(t){const e=VH(t);return UH(t)(e.map(Hde))}const _f={test:Bde,parse:VH,createTransformer:UH,getAnimatableNone:qde},Kde=new Set(["brightness","contrast","saturate","opacity"]);function Gde(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(BT)||[];if(!r)return t;const i=n.replace(r,"");let a=Kde.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const Yde=/\b([a-z-]*)\(.*?\)/gu,tN={..._f,getAnimatableNone:t=>{const e=t.match(Yde);return e?e.map(Gde).join(" "):t}},Xde={...CT,color:Ms,backgroundColor:Ms,outlineColor:Ms,fill:Ms,stroke:Ms,borderColor:Ms,borderTopColor:Ms,borderRightColor:Ms,borderBottomColor:Ms,borderLeftColor:Ms,filter:tN,WebkitFilter:tN},UT=t=>Xde[t];function WH(t,e){let n=UT(t);return n!==tN&&(n=_f),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Qde=new Set(["auto","none","0"]);function Zde(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!Qde.has(a)&&Ey(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=WH(n,i)}const pR=t=>t===rv||t===An,mR=(t,e)=>parseFloat(t.split(", ")[e]),gR=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return mR(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?mR(a[1],t):0}},Jde=new Set(["x","y","z"]),efe=nv.filter(t=>!Jde.has(t));function tfe(t){const e=[];return efe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const dg={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:gR(4,13),y:gR(5,14)};dg.translateX=dg.x;dg.translateY=dg.y;const Lh=new Set;let nN=!1,rN=!1;function HH(){if(rN){const t=Array.from(Lh).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=tfe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}rN=!1,nN=!1,Lh.forEach(t=>t.complete()),Lh.clear()}function qH(){Lh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(rN=!0)})}function nfe(){qH(),HH()}class WT{constructor(e,n,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Lh.add(this),nN||(nN=!0,ai.read(qH),ai.resolveKeyframes(HH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Lh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Lh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const KH=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),rfe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ife(t){const e=rfe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function GH(t,e,n=1){const[r,i]=ife(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return KH(s)?parseFloat(s):s}return AT(i)?GH(i,e,n+1):i}const YH=t=>e=>e.test(t),afe={test:t=>t==="auto",parse:t=>t},XH=[rv,An,ou,Rd,Gue,Kue,afe],vR=t=>XH.find(YH(t));class QH extends WT{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),AT(u))){const d=GH(u,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!EH.has(r)||e.length!==2)return;const[i,a]=e,s=vR(i),o=vR(a);if(s!==o)if(pR(s)&&pR(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)Mde(e[i])&&r.push(i);r.length&&Zde(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=dg[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=dg[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const yR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(_f.test(t)||t==="0")&&!t.startsWith("url("));function sfe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function ofe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=yR(i,e),o=yR(a,e);return!s||!o?!1:sfe(t)||(n==="spring"||DT(n))&&r}const lfe=t=>t!==null;function ES(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(lfe),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const cfe=40;class ZH{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=lu.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>cfe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&nfe(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=lu.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!ofe(e,r,i,a))if(s)this.options.duration=0;else{l&&l(ES(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Si=(t,e,n)=>t+(e-t)*n;function UA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function ufe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=UA(l,o,t+1/3),a=UA(l,o,t),s=UA(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function tw(t,e){return n=>n>0?e:t}const WA=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},dfe=[eN,_h,cm],ffe=t=>dfe.find(e=>e.test(t));function bR(t){const e=ffe(t);if(!e)return!1;let n=e.parse(t);return e===cm&&(n=ufe(n)),n}const xR=(t,e)=>{const n=bR(t),r=bR(e);if(!n||!r)return tw(t,e);const i={...n};return a=>(i.red=WA(n.red,r.red,a),i.green=WA(n.green,r.green,a),i.blue=WA(n.blue,r.blue,a),i.alpha=Si(n.alpha,r.alpha,a),_h.transform(i))},hfe=(t,e)=>n=>e(t(n)),Lb=(...t)=>t.reduce(hfe),iN=new Set(["none","hidden"]);function pfe(t,e){return iN.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function mfe(t,e){return n=>Si(t,e,n)}function HT(t){return typeof t=="number"?mfe:typeof t=="string"?AT(t)?tw:Ms.test(t)?xR:yfe:Array.isArray(t)?JH:typeof t=="object"?Ms.test(t)?xR:gfe:tw}function JH(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>HT(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function gfe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=HT(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function vfe(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const s=e.types[a],o=t.indexes[s][i[s]],l=(n=t.values[o])!==null&&n!==void 0?n:0;r[a]=l,i[s]++}return r}const yfe=(t,e)=>{const n=_f.createTransformer(e),r=Ey(t),i=Ey(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?iN.has(t)&&!i.values.length||iN.has(e)&&!r.values.length?pfe(t,e):Lb(JH(vfe(r,i),i.values),n):tw(t,e)};function eq(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Si(t,e,n):HT(t)(t,e)}const bfe=5;function tq(t,e,n){const r=Math.max(e-bfe,0);return NH(n-t(r),e-r)}const Bi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},HA=.001;function xfe({duration:t=Bi.duration,bounce:e=Bi.bounce,velocity:n=Bi.velocity,mass:r=Bi.mass}){let i,a,s=1-e;s=sd(Bi.minDamping,Bi.maxDamping,s),t=sd(Bi.minDuration,Bi.maxDuration,Yu(t)),s<1?(i=u=>{const d=u*s,f=d*t,p=d-n,h=aN(u,s),g=Math.exp(-f);return HA-p/h*g},a=u=>{const f=u*s*t,p=f*n+n,h=Math.pow(s,2)*Math.pow(u,2)*t,g=Math.exp(-f),m=aN(Math.pow(u,2),s);return(-i(u)+HA>0?-1:1)*((p-h)*g)/m}):(i=u=>{const d=Math.exp(-u*t),f=(u-n)*t+1;return-HA+d*f},a=u=>{const d=Math.exp(-u*t),f=(n-u)*(t*t);return d*f});const o=5/t,l=Sfe(i,a,o);if(t=Gu(t),isNaN(l))return{stiffness:Bi.stiffness,damping:Bi.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const wfe=12;function Sfe(t,e,n){let r=n;for(let i=1;i<wfe;i++)r=r-t(r)/e(r);return r}function aN(t,e){return t*Math.sqrt(1-e*e)}const _fe=["duration","bounce"],Afe=["stiffness","damping","mass"];function wR(t,e){return e.some(n=>t[n]!==void 0)}function Cfe(t){let e={velocity:Bi.velocity,stiffness:Bi.stiffness,damping:Bi.damping,mass:Bi.mass,isResolvedFromDuration:!1,...t};if(!wR(t,Afe)&&wR(t,_fe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*sd(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Bi.mass,stiffness:i,damping:a}}else{const n=xfe(t);e={...e,...n,mass:Bi.mass},e.isResolvedFromDuration=!0}return e}function nq(t=Bi.visualDuration,e=Bi.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:d,duration:f,velocity:p,isResolvedFromDuration:h}=Cfe({...n,velocity:-Yu(n.velocity||0)}),g=p||0,m=u/(2*Math.sqrt(l*d)),v=s-a,y=Yu(Math.sqrt(l/d)),b=Math.abs(v)<5;r||(r=b?Bi.restSpeed.granular:Bi.restSpeed.default),i||(i=b?Bi.restDelta.granular:Bi.restDelta.default);let S;if(m<1){const C=aN(y,m);S=D=>{const j=Math.exp(-m*y*D);return s-j*((g+m*y*v)/C*Math.sin(C*D)+v*Math.cos(C*D))}}else if(m===1)S=C=>s-Math.exp(-y*C)*(v+(g+y*v)*C);else{const C=y*Math.sqrt(m*m-1);S=D=>{const j=Math.exp(-m*y*D),N=Math.min(C*D,300);return s-j*((g+m*y*v)*Math.sinh(N)+C*v*Math.cosh(N))/C}}const A={calculatedDuration:h&&f||null,next:C=>{const D=S(C);if(h)o.done=C>=f;else{let j=0;m<1&&(j=C===0?Gu(g):tq(S,C,D));const N=Math.abs(j)<=r,P=Math.abs(s-D)<=i;o.done=N&&P}return o.value=o.done?s:D,o},toString:()=>{const C=Math.min(xH(A),QE),D=wH(j=>A.next(C*j).value,C,30);return C+"ms "+D}};return A}function SR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:d}){const f=t[0],p={done:!1,value:f},h=N=>o!==void 0&&N<o||l!==void 0&&N>l,g=N=>o===void 0?l:l===void 0||Math.abs(o-N)<Math.abs(l-N)?o:l;let m=n*e;const v=f+m,y=s===void 0?v:s(v);y!==v&&(m=y-f);const b=N=>-m*Math.exp(-N/r),S=N=>y+b(N),A=N=>{const P=b(N),O=S(N);p.done=Math.abs(P)<=u,p.value=p.done?y:O};let C,D;const j=N=>{h(p.value)&&(C=N,D=nq({keyframes:[p.value,g(p.value)],velocity:tq(S,N,p.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:N=>{let P=!1;return!D&&C===void 0&&(P=!0,A(N),j(N)),C!==void 0&&N>=C?D.next(N-C):(!P&&A(N),p)}}}const jfe=Rb(.42,0,1,1),Efe=Rb(0,0,.58,1),rq=Rb(.42,0,.58,1),Nfe=t=>Array.isArray(t)&&typeof t[0]!="number",Pfe={linear:ll,easeIn:jfe,easeInOut:rq,easeOut:Efe,circIn:$T,circInOut:LH,circOut:RH,backIn:zT,backInOut:OH,backOut:IH,anticipate:MH},_R=t=>{if(IT(t)){eH(t.length===4);const[e,n,r,i]=t;return Rb(e,n,r,i)}else if(typeof t=="string")return Pfe[t];return t};function kfe(t,e,n){const r=[],i=n||eq,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||ll:e;o=Lb(l,o)}r.push(o)}return r}function iq(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(eH(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=kfe(e,r,i),l=o.length,u=d=>{if(s&&d<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const p=lg(t[f],t[f+1],d);return o[f](p)};return n?d=>u(sd(t[0],t[a-1],d)):u}function Tfe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=lg(0,e,r);t.push(Si(n,1,i))}}function Dfe(t){const e=[0];return Tfe(e,t.length-1),e}function Ife(t,e){return t.map(n=>n*e)}function Ofe(t,e){return t.map(()=>e||rq).splice(0,t.length-1)}function nw({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Nfe(r)?r.map(_R):_R(r),a={done:!1,value:e[0]},s=Ife(n&&n.length===e.length?n:Dfe(e),t),o=iq(s,e,{ease:Array.isArray(i)?i:Ofe(e,i)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const Mfe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ai.update(e,!0),stop:()=>ad(e),now:()=>ss.isProcessing?ss.timestamp:lu.now()}},Rfe={decay:SR,inertia:SR,tween:nw,keyframes:nw,spring:nq},Lfe=t=>t/100;class qT extends ZH{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,s=(i==null?void 0:i.KeyframeResolver)||WT,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new s(a,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=DT(n)?n:Rfe[n]||nw;let l,u;o!==nw&&typeof e[0]!="number"&&(l=Lb(Lfe,eq(e[0],e[1])),e=[0,100]);const d=o({...this.options,keyframes:e});a==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=xH(d));const{calculatedDuration:f}=d,p=f+i,h=p*(r+1)-i;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=r;if(this.startTime===null)return a.next(0);const{delay:p,repeat:h,repeatType:g,repeatDelay:m,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-p*(this.speed>=0?1:-1),b=this.speed>=0?y<0:y>d;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let S=this.currentTime,A=a;if(h){const N=Math.min(this.currentTime,d)/f;let P=Math.floor(N),O=N%1;!O&&N>=1&&(O=1),O===1&&P--,P=Math.min(P,h+1),!!(P%2)&&(g==="reverse"?(O=1-O,m&&(O-=m/f)):g==="mirror"&&(A=s)),S=sd(0,1,O)*f}const C=b?{done:!1,value:l[0]}:A.next(S);o&&(C.value=o(C.value));let{done:D}=C;!b&&u!==null&&(D=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return j&&i!==void 0&&(C.value=ES(l,this.options,i)),v&&v(C.value),j&&this.finish(),C}get duration(){const{resolved:e}=this;return e?Yu(e.calculatedDuration):0}get time(){return Yu(this.currentTime)}set time(e){e=Gu(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Yu(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Mfe,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Ffe=new Set(["opacity","clipPath","filter","transform"]);function zfe(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const d=_H(o,i);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const $fe=vT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rw=10,Bfe=2e4;function Vfe(t){return DT(t.type)||t.type==="spring"||!SH(t.ease)}function Ufe(t,e){const n=new qT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<Bfe;)r=n.sample(a),i.push(r.value),a+=rw;return{times:void 0,keyframes:i,duration:a-rw,ease:"linear"}}const aq={anticipate:MH,backInOut:OH,circInOut:LH};function Wfe(t){return t in aq}class AR extends ZH{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new QH(a,(s,o)=>this.onKeyframesResolved(s,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&ew()&&Wfe(a)&&(a=aq[a]),Vfe(this.options)){const{onComplete:f,onUpdate:p,motionValue:h,element:g,...m}=this.options,v=Ufe(e,m);e=v.keyframes,e.length===1&&(e[1]=e[0]),r=v.duration,i=v.times,a=v.ease,s="keyframes"}const d=zfe(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:a});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(lR(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;o.set(ES(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Yu(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Yu(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Gu(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ll;const{animation:r}=n;lR(r,e)}return ll}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:s,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:f,element:p,...h}=this.options,g=new qT({...h,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),m=Gu(this.time);u.setWithVelocity(g.sample(m-rw).value,g.sample(m).value,rw)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return $fe()&&r&&Ffe.has(r)&&!l&&!u&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}const Hfe={type:"spring",stiffness:500,damping:25,restSpeed:10},qfe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Kfe={type:"keyframes",duration:.8},Gfe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Yfe=(t,{keyframes:e})=>e.length>2?Kfe:mp.has(t)?t.startsWith("scale")?qfe(e[1]):Hfe:Gfe;function Xfe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const KT=(t,e,n,r={},i,a)=>s=>{const o=TT(r,t)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Gu(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:p=>{e.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};Xfe(o)||(d={...d,...Yfe(t,d)}),d.duration&&(d.duration=Gu(d.duration)),d.repeatDelay&&(d.repeatDelay=Gu(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!a&&e.get()!==void 0){const p=ES(d.keyframes,o);if(p!==void 0)return ai.update(()=>{d.onUpdate(p),d.onComplete()}),new gde([])}return!a&&AR.supports(d)?new AR(d):new qT(d)};function Qfe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function sq(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const p=t.getValue(f,(a=t.latestValues[f])!==null&&a!==void 0?a:null),h=l[f];if(h===void 0||d&&Qfe(d,f))continue;const g={delay:n,...TT(s||{},f)};let m=!1;if(window.MotionHandoffAnimation){const y=PH(t);if(y){const b=window.MotionHandoffAnimation(y,f,ai);b!==null&&(g.startTime=b,m=!0)}}JE(t,f),p.start(KT(f,p,h,t.shouldReduceMotion&&EH.has(f)?{type:!1}:g,t,m));const v=p.animation;v&&u.push(v)}return o&&Promise.all(u).then(()=>{ai.update(()=>{o&&FT(t,o)})}),u}function sN(t,e,n={}){var r;const i=jS(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(sq(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=a;return Zfe(t,e,d+u,f,p,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function Zfe(t,e,n=0,r=0,i=1,a){const s=[],o=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(t.variantChildren).sort(Jfe).forEach((u,d)=>{u.notify("AnimationStart",e),s.push(sN(u,e,{...a,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(s)}function Jfe(t,e){return t.sortNodePosition(e)}function oq(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>sN(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=sN(t,e,n);else{const i=typeof e=="function"?jS(t,e,n.custom):e;r=Promise.all(sq(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const ehe=bT.length;function lq(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?lq(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<ehe;n++){const r=bT[n],i=t.props[r];(Cy(i)||i===!1)&&(e[r]=i)}return e}const the=[...yT].reverse(),nhe=yT.length;function rhe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>oq(t,n,r)))}function ihe(t){let e=rhe(t),n=CR(),r=!0;const i=l=>(u,d)=>{var f;const p=jS(t,d,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:h,transitionEnd:g,...m}=p;u={...u,...m,...g}}return u};function a(l){e=l(t)}function s(l){const{props:u}=t,d=lq(t.parent)||{},f=[],p=new Set;let h={},g=1/0;for(let v=0;v<nhe;v++){const y=the[v],b=n[y],S=u[y]!==void 0?u[y]:d[y],A=Cy(S),C=y===l?b.isActive:null;C===!1&&(g=v);let D=S===d[y]&&S!==u[y]&&A;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),b.protectedKeys={...h},!b.isActive&&C===null||!S&&!b.prevProp||AS(S)||typeof S=="boolean")continue;const j=ahe(b.prevProp,S);let N=j||y===l&&b.isActive&&!D&&A||v>g&&A,P=!1;const O=Array.isArray(S)?S:[S];let T=O.reduce(i(y),{});C===!1&&(T={});const{prevResolvedValues:M={}}=b,L={...M,...T},V=Y=>{N=!0,p.has(Y)&&(P=!0,p.delete(Y)),b.needsAnimating[Y]=!0;const H=t.getValue(Y);H&&(H.liveStyle=!1)};for(const Y in L){const H=T[Y],ee=M[Y];if(h.hasOwnProperty(Y))continue;let le=!1;XE(H)&&XE(ee)?le=!bH(H,ee):le=H!==ee,le?H!=null?V(Y):p.add(Y):H!==void 0&&p.has(Y)?V(Y):b.protectedKeys[Y]=!0}b.prevProp=S,b.prevResolvedValues=T,b.isActive&&(h={...h,...T}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(D&&j)||P)&&f.push(...O.map(Y=>({animation:Y,options:{type:y}})))}if(p.size){const v={};p.forEach(y=>{const b=t.getBaseTarget(y),S=t.getValue(y);S&&(S.liveStyle=!0),v[y]=b??null}),f.push({animation:v})}let m=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function o(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var h;return(h=p.animationState)===null||h===void 0?void 0:h.setActive(l,u)}),n[l].isActive=u;const f=s(l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=CR(),r=!0}}}function ahe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!bH(e,t):!1}function Qf(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function CR(){return{animate:Qf(!0),whileInView:Qf(),whileHover:Qf(),whileTap:Qf(),whileDrag:Qf(),whileFocus:Qf(),exit:Qf()}}class Mf{constructor(e){this.isMounted=!1,this.node=e}update(){}}class she extends Mf{constructor(e){super(e),e.animationState||(e.animationState=ihe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();AS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let ohe=0;class lhe extends Mf{constructor(){super(...arguments),this.id=ohe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const che={animation:{Feature:she},exit:{Feature:lhe}};function Ny(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Fb(t){return{point:{x:t.pageX,y:t.pageY}}}const uhe=t=>e=>OT(e)&&t(e,Fb(e));function P0(t,e,n,r){return Ny(t,e,uhe(n),r)}const jR=(t,e)=>Math.abs(t-e);function dhe(t,e){const n=jR(t.x,e.x),r=jR(t.y,e.y);return Math.sqrt(n**2+r**2)}class cq{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=KA(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,h=dhe(f.offset,{x:0,y:0})>=3;if(!p&&!h)return;const{point:g}=f,{timestamp:m}=ss;this.history.push({...g,timestamp:m});const{onStart:v,onMove:y}=this.handlers;p||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=qA(p,this.transformPagePoint),ai.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:h,onSessionEnd:g,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=KA(f.type==="pointercancel"?this.lastMoveEventInfo:qA(p,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,v),g&&g(f,v)},!OT(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Fb(e),o=qA(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=ss;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,KA(o,this.history)),this.removeListeners=Lb(P0(this.contextWindow,"pointermove",this.handlePointerMove),P0(this.contextWindow,"pointerup",this.handlePointerUp),P0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ad(this.updatePoint)}}function qA(t,e){return e?{point:e(t.point)}:t}function ER(t,e){return{x:t.x-e.x,y:t.y-e.y}}function KA({point:t},e){return{point:t,delta:ER(t,uq(e)),offset:ER(t,fhe(e)),velocity:hhe(e,.1)}}function fhe(t){return t[0]}function uq(t){return t[t.length-1]}function hhe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=uq(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Gu(e)));)n--;if(!r)return{x:0,y:0};const a=Yu(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const dq=1e-4,phe=1-dq,mhe=1+dq,fq=.01,ghe=0-fq,vhe=0+fq;function fl(t){return t.max-t.min}function yhe(t,e,n){return Math.abs(t-e)<=n}function NR(t,e,n,r=.5){t.origin=r,t.originPoint=Si(e.min,e.max,t.origin),t.scale=fl(n)/fl(e),t.translate=Si(n.min,n.max,t.origin)-t.originPoint,(t.scale>=phe&&t.scale<=mhe||isNaN(t.scale))&&(t.scale=1),(t.translate>=ghe&&t.translate<=vhe||isNaN(t.translate))&&(t.translate=0)}function k0(t,e,n,r){NR(t.x,e.x,n.x,r?r.originX:void 0),NR(t.y,e.y,n.y,r?r.originY:void 0)}function PR(t,e,n){t.min=n.min+e.min,t.max=t.min+fl(e)}function bhe(t,e,n){PR(t.x,e.x,n.x),PR(t.y,e.y,n.y)}function kR(t,e,n){t.min=e.min-n.min,t.max=t.min+fl(e)}function T0(t,e,n){kR(t.x,e.x,n.x),kR(t.y,e.y,n.y)}function xhe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Si(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Si(n,t,r.max):Math.min(t,n)),t}function TR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function whe(t,{top:e,left:n,bottom:r,right:i}){return{x:TR(t.x,n,i),y:TR(t.y,e,r)}}function DR(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function She(t,e){return{x:DR(t.x,e.x),y:DR(t.y,e.y)}}function _he(t,e){let n=.5;const r=fl(t),i=fl(e);return i>r?n=lg(e.min,e.max-r,t.min):r>i&&(n=lg(t.min,t.max-i,e.min)),sd(0,1,n)}function Ahe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const oN=.35;function Che(t=oN){return t===!1?t=0:t===!0&&(t=oN),{x:IR(t,"left","right"),y:IR(t,"top","bottom")}}function IR(t,e,n){return{min:OR(t,e),max:OR(t,n)}}function OR(t,e){return typeof t=="number"?t:t[e]||0}const MR=()=>({translate:0,scale:1,origin:0,originPoint:0}),um=()=>({x:MR(),y:MR()}),RR=()=>({min:0,max:0}),ra=()=>({x:RR(),y:RR()});function Il(t){return[t("x"),t("y")]}function hq({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function jhe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Ehe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function GA(t){return t===void 0||t===1}function lN({scale:t,scaleX:e,scaleY:n}){return!GA(t)||!GA(e)||!GA(n)}function sh(t){return lN(t)||pq(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function pq(t){return LR(t.x)||LR(t.y)}function LR(t){return t&&t!=="0%"}function iw(t,e,n){const r=t-n,i=e*r;return n+i}function FR(t,e,n,r,i){return i!==void 0&&(t=iw(t,i,r)),iw(t,n,r)+e}function cN(t,e=0,n=1,r,i){t.min=FR(t.min,e,n,r,i),t.max=FR(t.max,e,n,r,i)}function mq(t,{x:e,y:n}){cN(t.x,e.translate,e.scale,e.originPoint),cN(t.y,n.translate,n.scale,n.originPoint)}const zR=.999999999999,$R=1.0000000000001;function Nhe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&fm(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,mq(t,s)),r&&sh(a.latestValues)&&fm(t,a.latestValues))}e.x<$R&&e.x>zR&&(e.x=1),e.y<$R&&e.y>zR&&(e.y=1)}function dm(t,e){t.min=t.min+e,t.max=t.max+e}function BR(t,e,n,r,i=.5){const a=Si(t.min,t.max,i);cN(t,e,n,a,r)}function fm(t,e){BR(t.x,e.x,e.scaleX,e.scale,e.originX),BR(t.y,e.y,e.scaleY,e.scale,e.originY)}function gq(t,e){return hq(Ehe(t.getBoundingClientRect(),e))}function Phe(t,e,n){const r=gq(t,n),{scroll:i}=e;return i&&(dm(r.x,i.offset.x),dm(r.y,i.offset.y)),r}const vq=({current:t})=>t?t.ownerDocument.defaultView:null,khe=new WeakMap;class The{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ra(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Fb(d).point)},a=(d,f)=>{const{drag:p,dragPropagation:h,onDragStart:g}=this.getProps();if(p&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Cde(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Il(v=>{let y=this.getAxisMotionValue(v).get()||0;if(ou.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const S=b.layout.layoutBox[v];S&&(y=fl(S)*(parseFloat(y)/100))}}this.originPoint[v]=y}),g&&ai.postRender(()=>g(d,f)),JE(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},s=(d,f)=>{const{dragPropagation:p,dragDirectionLock:h,onDirectionLock:g,onDrag:m}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:v}=f;if(h&&this.currentDirection===null){this.currentDirection=Dhe(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),m&&m(d,f)},o=(d,f)=>this.stop(d,f),l=()=>Il(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new cq(e,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:vq(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&ai.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Ux(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=xhe(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&lm(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=whe(i.layoutBox,n):this.constraints=!1,this.elastic=Che(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Il(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Ahe(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!lm(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Phe(r,i.root,this.visualElement.getTransformPagePoint());let s=She(i.layout.layoutBox,a);if(n){const o=n(jhe(s));this.hasMutatedConstraints=!!o,o&&(s=hq(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Il(d=>{if(!Ux(d,n,this.currentDirection))return;let f=l&&l[d]||{};s&&(f={min:0,max:0});const p=i?200:1e6,h=i?40:1e7,g={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return JE(this.visualElement,e),r.start(KT(e,r,0,n,this.visualElement,!1))}stopAnimation(){Il(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Il(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Il(n=>{const{drag:r}=this.getProps();if(!Ux(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-Si(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!lm(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Il(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=_he({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Il(s=>{if(!Ux(s,e,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Si(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;khe.set(this.visualElement,this);const e=this.visualElement.current,n=P0(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();lm(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ai.read(r);const s=Ny(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Il(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=oN,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Ux(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Dhe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Ihe extends Mf{constructor(e){super(e),this.removeGroupControls=ll,this.removeListeners=ll,this.controls=new The(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ll}unmount(){this.removeGroupControls(),this.removeListeners()}}const VR=t=>(e,n)=>{t&&ai.postRender(()=>t(e,n))};class Ohe extends Mf{constructor(){super(...arguments),this.removePointerDownListener=ll}onPointerDown(e){this.session=new cq(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vq(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:VR(e),onStart:VR(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&ai.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=P0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Q1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function UR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Fv={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(An.test(t))t=parseFloat(t);else return t;const n=UR(t,e.target.x),r=UR(t,e.target.y);return`${n}% ${r}%`}},Mhe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=_f.parse(t);if(i.length>5)return r;const a=_f.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=l;const u=Si(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class Rhe extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;ide(Lhe),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Q1.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||ai.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yq(t){const[e,n]=JW(),r=I.useContext(mT);return c.jsx(Rhe,{...t,layoutGroup:r,switchLayoutGroup:I.useContext(sH),isPresent:e,safeToRemove:n})}const Lhe={borderRadius:{...Fv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fv,borderTopRightRadius:Fv,borderBottomLeftRadius:Fv,borderBottomRightRadius:Fv,boxShadow:Mhe};function Fhe(t,e,n){const r=cs(t)?t:ug(t);return r.start(KT("",r,e,n)),r.animation}function zhe(t){return t instanceof SVGElement&&t.tagName!=="svg"}const $he=(t,e)=>t.depth-e.depth;class Bhe{constructor(){this.children=[],this.isDirty=!1}add(e){MT(this.children,e),this.isDirty=!0}remove(e){RT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($he),this.isDirty=!1,this.children.forEach(e)}}function Vhe(t,e){const n=lu.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(ad(r),t(a-e))};return ai.read(r,!0),()=>ad(r)}const bq=["TopLeft","TopRight","BottomLeft","BottomRight"],Uhe=bq.length,WR=t=>typeof t=="string"?parseFloat(t):t,HR=t=>typeof t=="number"||An.test(t);function Whe(t,e,n,r,i,a){i?(t.opacity=Si(0,n.opacity!==void 0?n.opacity:1,Hhe(r)),t.opacityExit=Si(e.opacity!==void 0?e.opacity:1,0,qhe(r))):a&&(t.opacity=Si(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<Uhe;s++){const o=`border${bq[s]}Radius`;let l=qR(e,o),u=qR(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||HR(l)===HR(u)?(t[o]=Math.max(Si(WR(l),WR(u),r),0),(ou.test(u)||ou.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Si(e.rotate||0,n.rotate||0,r))}function qR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Hhe=xq(0,.5,RH),qhe=xq(.5,.95,ll);function xq(t,e,n){return r=>r<t?0:r>e?1:n(lg(t,e,r))}function KR(t,e){t.min=e.min,t.max=e.max}function Pl(t,e){KR(t.x,e.x),KR(t.y,e.y)}function GR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function YR(t,e,n,r,i){return t-=e,t=iw(t,1/n,r),i!==void 0&&(t=iw(t,1/i,r)),t}function Khe(t,e=0,n=1,r=.5,i,a=t,s=t){if(ou.test(e)&&(e=parseFloat(e),e=Si(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Si(a.min,a.max,r);t===a&&(o-=e),t.min=YR(t.min,e,n,o,i),t.max=YR(t.max,e,n,o,i)}function XR(t,e,[n,r,i],a,s){Khe(t,e[n],e[r],e[i],e.scale,a,s)}const Ghe=["x","scaleX","originX"],Yhe=["y","scaleY","originY"];function QR(t,e,n,r){XR(t.x,e,Ghe,n?n.x:void 0,r?r.x:void 0),XR(t.y,e,Yhe,n?n.y:void 0,r?r.y:void 0)}function ZR(t){return t.translate===0&&t.scale===1}function wq(t){return ZR(t.x)&&ZR(t.y)}function JR(t,e){return t.min===e.min&&t.max===e.max}function Xhe(t,e){return JR(t.x,e.x)&&JR(t.y,e.y)}function e6(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Sq(t,e){return e6(t.x,e.x)&&e6(t.y,e.y)}function t6(t){return fl(t.x)/fl(t.y)}function n6(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Qhe{constructor(){this.members=[]}add(e){MT(this.members,e),e.scheduleRender()}remove(e){if(RT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zhe(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:p,skewX:h,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),h&&(r+=`skewX(${h}deg) `),g&&(r+=`skewY(${g}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const oh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},u0=typeof window<"u"&&window.MotionDebug!==void 0,YA=["","X","Y","Z"],Jhe={visibility:"hidden"},r6=1e3;let epe=0;function XA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function _q(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=PH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ai,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&_q(r)}function Aq({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=epe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,u0&&(oh.totalNodes=oh.resolvedTargetDeltas=oh.recalculatedProjection=0),this.nodes.forEach(rpe),this.nodes.forEach(lpe),this.nodes.forEach(cpe),this.nodes.forEach(ipe),u0&&window.MotionDebug.record(oh)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Bhe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new LT),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=zhe(s),this.instance=s;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Vhe(p,250),Q1.hasAnimatedSinceResize&&(Q1.hasAnimatedSinceResize=!1,this.nodes.forEach(a6))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||d.getDefaultTransition()||ppe,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=d.getProps(),b=!this.targetLayout||!Sq(this.targetLayout,g)||h,S=!p&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,S);const A={...TT(m,"layout"),onPlay:v,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else p||a6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ad(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(upe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_q(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(i6);return}this.isUpdating||this.nodes.forEach(spe),this.isUpdating=!1,this.nodes.forEach(ope),this.nodes.forEach(tpe),this.nodes.forEach(npe),this.clearAllSnapshots();const o=lu.now();ss.delta=sd(0,1e3/60,o-ss.timestamp),ss.timestamp=o,ss.isProcessing=!0,$A.update.process(ss),$A.preRender.process(ss),$A.render.process(ss),ss.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ape),this.sharedNodes.forEach(dpe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ai.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ai.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ra(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!wq(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&(o||sh(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),mpe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return ra();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(gpe))){const{scroll:d}=this.root;d&&(dm(l.x,d.offset.x),dm(l.y,d.offset.y))}return l}removeElementScroll(s){var o;const l=ra();if(Pl(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:p}=d;d!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Pl(l,s),dm(l.x,f.offset.x),dm(l.y,f.offset.y))}return l}applyTransform(s,o=!1){const l=ra();Pl(l,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&fm(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),sh(d.latestValues)&&fm(l,d.latestValues)}return sh(this.latestValues)&&fm(l,this.latestValues),l}removeTransform(s){const o=ra();Pl(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!sh(u.latestValues))continue;lN(u.latestValues)&&u.updateSnapshot();const d=ra(),f=u.measurePageBox();Pl(d,f),QR(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return sh(this.latestValues)&&QR(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ss.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=ss.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ra(),this.relativeTargetOrigin=ra(),T0(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Pl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ra(),this.targetWithTransforms=ra()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bhe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pl(this.target,this.layout.layoutBox),mq(this.target,this.targetDelta)):Pl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ra(),this.relativeTargetOrigin=ra(),T0(this.relativeTargetOrigin,this.target,h.target),Pl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}u0&&oh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||lN(this.parent.latestValues)||pq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ss.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Pl(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,h=this.treeScale.y;Nhe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ra());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(GR(this.prevProjectionDelta.x,this.projectionDelta.x),GR(this.prevProjectionDelta.y,this.projectionDelta.y)),k0(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==h||!n6(this.projectionDelta.x,this.prevProjectionDelta.x)||!n6(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),u0&&oh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=um(),this.projectionDelta=um(),this.projectionDeltaWithTransform=um()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},f=um();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const p=ra(),h=l?l.source:void 0,g=this.layout?this.layout.source:void 0,m=h!==g,v=this.getStack(),y=!v||v.members.length<=1,b=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(hpe));this.animationProgress=0;let S;this.mixTargetDelta=A=>{const C=A/1e3;s6(f.x,s.x,C),s6(f.y,s.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(T0(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fpe(this.relativeTarget,this.relativeTargetOrigin,p,C),S&&Xhe(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=ra()),Pl(S,this.relativeTarget)),m&&(this.animationValues=d,Whe(d,u,this.latestValues,C,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ad(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ai.update(()=>{Q1.hasAnimatedSinceResize=!0,this.currentAnimation=Fhe(0,r6,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(r6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&Cq(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ra();const f=fl(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const p=fl(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+p}Pl(o,l),fm(o,d),k0(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Qhe),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&XA("z",s,u,this.animationValues);for(let d=0;d<YA.length;d++)XA(`rotate${YA[d]}`,s,u,this.animationValues),XA(`skew${YA[d]}`,s,u,this.animationValues);s.render();for(const d in u)s.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Jhe;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Y1(s==null?void 0:s.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Y1(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!sh(this.latestValues)&&(m.transform=d?d({},""):"none",this.hasProjected=!1),m}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Zhe(this.projectionDeltaWithTransform,this.treeScale,p),d&&(u.transform=d(p,u.transform));const{x:h,y:g}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(o=p.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const m in J2){if(p[m]===void 0)continue;const{correct:v,applyTo:y}=J2[m],b=u.transform==="none"?p[m]:v(p[m],f);if(y){const S=y.length;for(let A=0;A<S;A++)u[y[A]]=b}else u[m]=b}return this.options.layoutId&&(u.pointerEvents=f===this?Y1(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(i6),this.root.sharedNodes.clear()}}}function tpe(t){t.updateLayout()}function npe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,s=n.source!==t.layout.source;a==="size"?Il(f=>{const p=s?n.measuredBox[f]:n.layoutBox[f],h=fl(p);p.min=r[f].min,p.max=p.min+h}):Cq(a,n.layoutBox,r)&&Il(f=>{const p=s?n.measuredBox[f]:n.layoutBox[f],h=fl(r[f]);p.max=p.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+h)});const o=um();k0(o,r,n.layoutBox);const l=um();s?k0(l,t.applyTransform(i,!0),n.measuredBox):k0(l,r,n.layoutBox);const u=!wq(o);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:h}=f;if(p&&h){const g=ra();T0(g,n.layoutBox,p.layoutBox);const m=ra();T0(m,r,h.layoutBox),Sq(g,m)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=g,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function rpe(t){u0&&oh.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ipe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ape(t){t.clearSnapshot()}function i6(t){t.clearMeasurements()}function spe(t){t.isLayoutDirty=!1}function ope(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function a6(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function lpe(t){t.resolveTargetDelta()}function cpe(t){t.calcProjection()}function upe(t){t.resetSkewAndRotation()}function dpe(t){t.removeLeadSnapshot()}function s6(t,e,n){t.translate=Si(e.translate,0,n),t.scale=Si(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function o6(t,e,n,r){t.min=Si(e.min,n.min,r),t.max=Si(e.max,n.max,r)}function fpe(t,e,n,r){o6(t.x,e.x,n.x,r),o6(t.y,e.y,n.y,r)}function hpe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ppe={duration:.45,ease:[.4,0,.1,1]},l6=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),c6=l6("applewebkit/")&&!l6("chrome/")?Math.round:ll;function u6(t){t.min=c6(t.min),t.max=c6(t.max)}function mpe(t){u6(t.x),u6(t.y)}function Cq(t,e,n){return t==="position"||t==="preserve-aspect"&&!yhe(t6(e),t6(n),.2)}function gpe(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const vpe=Aq({attachResizeListener:(t,e)=>Ny(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),QA={current:void 0},jq=Aq({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!QA.current){const t=new vpe({});t.mount(window),t.setOptions({layoutScroll:!0}),QA.current=t}return QA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ype={pan:{Feature:Ohe},drag:{Feature:Ihe,ProjectionNode:jq,MeasureLayout:yq}};function d6(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&ai.postRender(()=>a(e,Fb(e)))}class bpe extends Mf{mount(){const{current:e}=this.node;e&&(this.unmount=xde(e,n=>(d6(this.node,n,"Start"),r=>d6(this.node,r,"End"))))}unmount(){}}class xpe extends Mf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Lb(Ny(this.node.current,"focus",()=>this.onFocus()),Ny(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function f6(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&ai.postRender(()=>a(e,Fb(e)))}class wpe extends Mf{mount(){const{current:e}=this.node;e&&(this.unmount=Ade(e,n=>(f6(this.node,n,"Start"),(r,{success:i})=>f6(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const uN=new WeakMap,ZA=new WeakMap,Spe=t=>{const e=uN.get(t.target);e&&e(t)},_pe=t=>{t.forEach(Spe)};function Ape({root:t,...e}){const n=t||document;ZA.has(n)||ZA.set(n,{});const r=ZA.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(_pe,{root:t,...e})),r[i]}function Cpe(t,e,n){const r=Ape(e);return uN.set(t,n),r.observe(t),()=>{uN.delete(t),r.unobserve(t)}}const jpe={some:0,all:1};class Epe extends Mf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:jpe[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=u?d:f;p&&p(l)};return Cpe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Npe(e,n))&&this.startObserver()}unmount(){}}function Npe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Ppe={inView:{Feature:Epe},tap:{Feature:wpe},focus:{Feature:xpe},hover:{Feature:bpe}},kpe={layout:{ProjectionNode:jq,MeasureLayout:yq}},dN={current:null},Eq={current:!1};function Tpe(){if(Eq.current=!0,!!gT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>dN.current=t.matches;t.addListener(e),e()}else dN.current=!1}const Dpe=[...XH,Ms,_f],Ipe=t=>Dpe.find(YH(t)),h6=new WeakMap;function Ope(t,e,n){for(const r in e){const i=e[r],a=n[r];if(cs(i))t.addValue(r,i);else if(cs(a))t.addValue(r,ug(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,ug(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const p6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Mpe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=WT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=lu.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,ai.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:d}=s;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=CS(n),this.isVariantNode=iH(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in p){const g=p[h];l[h]!==void 0&&cs(g)&&g.set(l[h],!1)}}mount(e){this.current=e,h6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Eq.current||Tpe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:dN.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){h6.delete(this.current),this.projection&&this.projection.unmount(),ad(this.notifyUpdate),ad(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=mp.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ai.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in cg){const n=cg[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ra()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<p6.length;r++){const i=p6[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Ope(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ug(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(KH(i)||FH(i))?i=parseFloat(i):!Ipe(i)&&_f.test(n)&&(i=WH(e,n)),this.setBaseTarget(e,cs(i)?i.get():i)),cs(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=_T(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!cs(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new LT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Nq extends Mpe{constructor(){super(...arguments),this.KeyframeResolver=QH}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;cs(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Rpe(t){return window.getComputedStyle(t)}class Lpe extends Nq{constructor(){super(...arguments),this.type="html",this.renderInstance=hH}readValueFromInstance(e,n){if(mp.has(n)){const r=UT(n);return r&&r.default||0}else{const r=Rpe(e),i=(uH(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return gq(e,n)}build(e,n,r){jT(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return kT(e,n,r)}}class Fpe extends Nq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ra}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(mp.has(n)){const r=UT(n);return r&&r.default||0}return n=pH.has(n)?n:xT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return vH(e,n,r)}build(e,n,r){ET(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){mH(e,n,r,i)}mount(e){this.isSVGTag=PT(e.tagName),super.mount(e)}}const zpe=(t,e)=>ST(t)?new Fpe(e):new Lpe(e,{allowProjection:t!==I.Fragment}),$pe=hde({...che,...Ppe,...ype,...kpe},zpe),Wi=Nue($pe);function Pq(t){const e=md(()=>ug(t)),{isStatic:n}=I.useContext(wS);if(n){const[,r]=I.useState(t);I.useEffect(()=>e.on("change",r),[])}return e}function kq(t,e){const n=Pq(e()),r=()=>n.set(e());return r(),SS(()=>{const i=()=>ai.preRender(r,!1,!0),a=t.map(s=>s.on("change",i));return()=>{a.forEach(s=>s()),ad(r)}}),n}const Bpe=t=>t&&typeof t=="object"&&t.mix,Vpe=t=>Bpe(t)?t.mix:void 0;function Upe(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],a=t[2+n],s=t[3+n],o=iq(i,a,{mixer:Vpe(a[0]),...s});return e?o(r):o}function Wpe(t){E0.current=[],t();const e=kq(E0.current,t);return E0.current=void 0,e}function Hpe(t,e,n,r){if(typeof t=="function")return Wpe(t);const i=typeof e=="function"?e:Upe(e,n,r);return Array.isArray(t)?m6(t,i):m6([t],([a])=>i(a))}function m6(t,e){const n=md(()=>[]);return kq(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function qpe(t){t.values.forEach(e=>e.stop())}function fN(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&FT(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{fN(a,e)})})}function Kpe(t,e){if(Array.isArray(e))return fN(t,e);if(typeof e=="string")return fN(t,[e]);FT(t,e)}function Gpe(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(oq(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{Kpe(r,n)})},stop(){t.forEach(n=>{qpe(n)})},mount(){return()=>{e.stop()}}};return e}function Ype(){const t=md(Gpe);return SS(t.mount,[]),t}const gp=Ype;class Xpe{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}}const Qpe=()=>new Xpe;function GT(){return md(Qpe)}const Tq=I.createContext(null);function Zpe(t,e,n,r){if(!r)return t;const i=t.findIndex(d=>d.value===e);if(i===-1)return t;const a=r>0?1:-1,s=t[i+a];if(!s)return t;const o=t[i],l=s.layout,u=Si(l.min,l.max,.5);return a===1&&o.layout.max+n>u||a===-1&&o.layout.min+n<u?Ede(t,i,i+a):t}function Jpe({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...a},s){const o=md(()=>Wi[e]),l=[],u=I.useRef(!1),d={axis:n,registerItem:(f,p)=>{const h=l.findIndex(g=>f===g.value);h!==-1?l[h].layout=p[n]:l.push({value:f,layout:p[n]}),l.sort(tme)},updateOrder:(f,p,h)=>{if(u.current)return;const g=Zpe(l,f,p,h);l!==g&&(u.current=!0,r(g.map(eme).filter(m=>i.indexOf(m)!==-1)))}};return I.useEffect(()=>{u.current=!1}),c.jsx(o,{...a,ref:s,ignoreStrict:!0,children:c.jsx(Tq.Provider,{value:d,children:t})})}const YT=I.forwardRef(Jpe);function eme(t){return t.value}function tme(t,e){return t.layout.min-e.layout.min}function g6(t,e=0){return cs(t)?t:Pq(e)}function nme({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:a=!0,...s},o){const l=md(()=>Wi[r]),u=I.useContext(Tq),d={x:g6(e.x),y:g6(e.y)},f=Hpe([d.x,d.y],([m,v])=>m||v?1:"unset"),{axis:p,registerItem:h,updateOrder:g}=u;return c.jsx(l,{drag:p,...s,dragSnapToOrigin:!0,style:{...e,x:d.x,y:d.y,zIndex:f},layout:a,onDrag:(m,v)=>{const{velocity:y}=v;y[p]&&g(n,d[p].get(),y[p]),i&&i(m,v)},onLayoutMeasure:m=>h(n,m),ref:o,ignoreStrict:!0,children:t})}const XT=I.forwardRef(nme),pu=({isOpen:t,onClose:e,title:n,actions:r})=>t?c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-end sm:items-center z-50 animate-fade-in",onClick:e,children:c.jsxs("div",{className:"w-full max-w-sm bg-ios-modal-bg rounded-t-2xl sm:rounded-2xl shadow-2xl text-white animate-slide-up",onClick:i=>i.stopPropagation(),children:[c.jsx("div",{className:"p-2",children:c.jsx("header",{className:"text-center p-2 rounded-lg bg-zinc-800/50",children:c.jsx("h2",{className:"text-sm font-semibold text-brand-light-gray",children:n})})}),c.jsx("div",{className:"p-2",children:c.jsx("div",{className:"bg-zinc-800/50 rounded-lg",children:r.map((i,a)=>c.jsxs("button",{onClick:()=>{i.onClick(),e()},className:`w-full flex items-center p-3 text-left transition-colors hover:bg-white/10 ${i.color||"text-brand-blue"} ${a>0?"border-t border-zinc-700/80":""}`,children:[c.jsx(i.icon,{size:22,className:"mr-4"}),c.jsx("span",{className:"text-lg font-medium text-white",children:i.label})]},a))})}),c.jsxs("div",{className:"p-2 mt-1",children:[c.jsx("button",{onClick:e,className:"w-full bg-zinc-700 p-3 text-lg font-bold text-white rounded-xl hover:bg-zinc-600 transition-colors",children:"Cancelar"}),"S           "]})]})}):null,rme=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?c.jsxs(sn,{isOpen:t,onClose:e,title:r,children:[" ",c.jsxs("div",{className:"space-y-6",children:[" ",c.jsx("p",{className:"text-zinc-300",children:i})," ",c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})," "]})," "]}):null,ime=({lotName:t,count:e,subLotsCount:n,dragControls:r,isSubLot:i})=>c.jsxs("div",{className:"w-full p-4 flex items-center",children:[!i&&c.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:a=>r.start(a),children:c.jsx(cT,{className:"text-zinc-500"})}),i&&c.jsx("div",{className:"w-4 flex-shrink-0"}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[t,n>0&&c.jsx("span",{title:`${n} sub-lotes`,className:"bg-zinc-700/80 p-1 rounded-full",children:c.jsx(zW,{size:12,className:"text-zinc-400"})})]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[c.jsx("span",{className:"font-semibold text-brand-orange",children:e})," ",e===1?"animal":"animales",n>0?" (directos)":""]})]})]}),v6=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i,isSubLot:a=!1})=>{var p,h;const s=gp(),o=I.useRef(!1),l=t.count>0||(((p=t.subLots)==null?void 0:p.length)||0)>0,u=t.name!=="Sin Asignar",f={drag:"x",dragConstraints:{left:-((l?80:0)+(u?80:0)),right:0},dragElastic:.1,onPanStart:()=>{o.current=!0},onPanEnd:()=>{setTimeout(()=>{o.current=!1},50)},onTap:()=>{o.current||r()},animate:s,transition:{type:"spring",stiffness:400,damping:40}};return c.jsxs("div",{className:`relative w-full overflow-hidden ${a?"rounded-lg":"rounded-2xl"} bg-brand-glass border border-brand-border`,children:[c.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[l&&c.jsxs("button",{onClick:e,onPointerDown:g=>g.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-orange text-white",children:[c.jsx(Of,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),u&&c.jsxs("button",{onClick:n,onPointerDown:g=>g.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[c.jsx(Gl,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Borrar"})]})]}),c.jsx(Wi.div,{...f,dragListener:!a&&i?!1:void 0,className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:c.jsx(ime,{lotName:t.name,count:t.count,subLotsCount:((h=t.subLots)==null?void 0:h.length)||0,dragControls:i,isSubLot:a})})]})},ame=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=GT();return c.jsxs(XT,{value:t,dragListener:!1,dragControls:i,className:"space-y-1",children:[c.jsx(v6,{lot:t,dragControls:i,onClick:()=>e({name:"lot-detail",lotName:t.name}),onEdit:()=>n(t),onDelete:()=>r(t),isSubLot:!1}),t.subLots&&t.subLots.length>0&&c.jsx("div",{className:"pl-6 space-y-1",children:t.subLots.map(a=>c.jsx(v6,{lot:a,onClick:()=>e({name:"lot-detail",lotName:a.name}),onEdit:()=>n(a),onDelete:()=>r(a),isSubLot:!0},a.id))})]},t.id)};function sme({navigateTo:t}){const{animals:e,lots:n,deleteLot:r}=Kt(),[i,a]=I.useState(!1),[s,o]=I.useState(null),[l,u]=I.useState(null),d=I.useMemo(()=>{const m=new Map;n.forEach(A=>m.set(A.name,0)),(e||[]).forEach(A=>{const C=A.location||"Sin Asignar";m.set(C,(m.get(C)||0)+1)});const v=n.map(A=>({id:A.id,name:A.name,count:m.get(A.name)||0,parentLotId:A.parentLotId})),y=new Map;v.forEach(A=>{A.parentLotId&&(y.has(A.parentLotId)||y.set(A.parentLotId,[]),y.get(A.parentLotId).push(A))});const b=v.filter(A=>!A.parentLotId).map(A=>({...A,subLots:y.get(A.id)||[]})),S=m.get("Sin Asignar")||0;return(S>0||b.length===0&&S>0)&&b.push({id:"unassigned",name:"Sin Asignar",count:S,parentLotId:void 0,subLots:[]}),b.sort((A,C)=>A.name.localeCompare(C.name))},[e,n]),[f,p]=I.useState(d);I.useEffect(()=>{p(d)},[d]);const h=[{label:"Mover Animales",icon:fT,onClick:()=>t({name:"lot-detail",lotName:(s==null?void 0:s.name)||""})}],g=()=>{l&&(r(l.id),u(null))};return f.length===0?c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[c.jsx(ZW,{size:32,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-500 font-semibold",children:"No hay lotes físicos creados."}),c.jsx("p",{className:"text-xs text-zinc-600",children:"Usa el botón '+' para empezar a organizar tu rebaño."})]}):c.jsxs(c.Fragment,{children:[c.jsx(YT,{as:"div",axis:"y",values:f,onReorder:p,className:"space-y-3",children:f.map(m=>c.jsx(ame,{lot:m,navigateTo:t,onEdit:v=>{o(v),a(!0)},onDelete:v=>u(v)},m.id))}),c.jsx(pu,{isOpen:i,onClose:()=>a(!1),title:`Acciones para "${s==null?void 0:s.name}"`,actions:h}),c.jsx(rme,{isOpen:!!l,onClose:()=>u(null),onConfirm:g,title:"Eliminar Lote",message:`¿Estás seguro de que quieres eliminar el lote "${l==null?void 0:l.name}"? Esta acción no se puede deshacer.`})]})}const ome=({onSave:t,onCancel:e,existingSeason:n})=>{const[r,i]=I.useState(""),[a,s]=I.useState(""),[o,l]=I.useState("45"),[u,d]=I.useState(!1),[f,p]=I.useState(null),[h,g]=I.useState(!1);I.useEffect(()=>{if(n){i(n.name),s(n.startDate);const v=new Date(n.startDate),y=new Date(n.endDate),b=Math.abs(y.getTime()-v.getTime()),S=Math.ceil(b/(1e3*60*60*24));l(String(S)),d(n.requiresLightTreatment)}else s(new Date().toISOString().split("T")[0])},[n]);const m=async v=>{if(v.preventDefault(),p(null),!r.trim()||!a||!o){p("Todos los campos son obligatorios.");return}g(!0);const y=new Date(a),b=new Date(y);b.setDate(y.getDate()+parseInt(o,10));const S={name:r,startDate:a,endDate:b.toISOString().split("T")[0],requiresLightTreatment:u};try{await t(S)}catch(A){p("No se pudo guardar la temporada de monta."),console.error(A),g(!1)}};return c.jsxs("form",{onSubmit:m,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre de la Temporada"}),c.jsx("input",{id:"name",type:"text",value:r,onChange:v=>i(v.target.value),placeholder:"Ej: Monta de Otoño 2025",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),c.jsx("input",{id:"startDate",type:"date",value:a,onChange:v=>s(v.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Duración (días)"}),c.jsx("input",{id:"duration",type:"number",value:o,onChange:v=>l(v.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]})]}),c.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-zinc-700 flex items-center justify-between",children:[c.jsx("label",{htmlFor:"lightTreatment",className:"text-sm font-medium text-zinc-300",children:"¿Requiere Tratamiento de Luz?"}),c.jsx("input",{id:"lightTreatment",type:"checkbox",checked:u,onChange:v=>d(v.target.checked),className:"form-checkbox h-5 w-5 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]}),f&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(dr,{size:18}),c.jsx("span",{children:f})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:h,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:h?"Guardando...":"Guardar Temporada"})]})]})},lme=({season:t,dragControls:e})=>c.jsxs("div",{className:"w-full p-4 flex items-center",children:[c.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:n=>e.start(n),children:c.jsx(cT,{className:"text-zinc-500"})}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[t.name,t.requiresLightTreatment&&c.jsx("span",{title:"Requiere Tratamiento de Luz",children:c.jsx(Gce,{size:16,className:"text-yellow-400"})})]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[new Date(t.startDate+"T00:00:00").toLocaleDateString()," - ",new Date(t.endDate+"T00:00:00").toLocaleDateString()]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${t.status==="Activo"?"bg-green-500/80 text-white":"bg-zinc-600 text-zinc-300"}`,children:t.status}),c.jsx(qi,{className:"text-zinc-600"})]})]}),cme=({season:t,onEdit:e,onClick:n,dragControls:r})=>{const i=gp(),a=I.useRef(!1);return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:c.jsxs("button",{onClick:e,onPointerDown:s=>s.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(Of,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]})}),c.jsx(Wi.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onPanStart:()=>{a.current=!0},onPanEnd:()=>{setTimeout(()=>{a.current=!1},50)},onTap:()=>{a.current||n()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:c.jsx(lme,{season:t,dragControls:r})})]})},ume=({season:t,navigateTo:e,onEdit:n})=>{const r=GT();return c.jsx(XT,{value:t,dragListener:!1,dragControls:r,children:c.jsx(cme,{season:t,dragControls:r,onClick:()=>e({name:"breeding-season-detail",seasonId:t.id}),onEdit:()=>n(t)})},t.id)};function dme({navigateTo:t}){const{breedingSeasons:e,addBreedingSeason:n,updateBreedingSeason:r}=Kt(),[i,a]=I.useState(!1),[s,o]=I.useState(void 0),l=I.useMemo(()=>[...e].sort((h,g)=>h.status==="Activo"&&g.status!=="Activo"?-1:h.status!=="Activo"&&g.status==="Activo"?1:new Date(g.startDate).getTime()-new Date(h.startDate).getTime()),[e]),[u,d]=I.useState(l);I.useEffect(()=>{d(l)},[l]);const f=h=>{o(h),a(!0)},p=async h=>{s?await r(s.id,{...h}):await n({...h,status:"Activo"}),a(!1),o(void 0)};return u.length===0?c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[c.jsx(bS,{size:32,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-500 font-semibold",children:"No hay temporadas de monta creadas."}),c.jsx("p",{className:"text-xs text-zinc-600",children:"Usa el botón de abajo para empezar a planificar."})]}):c.jsxs(c.Fragment,{children:[c.jsx(YT,{as:"div",axis:"y",values:u,onReorder:d,className:"space-y-3",children:u.map(h=>c.jsx(ume,{season:h,navigateTo:t,onEdit:f},h.id))}),c.jsx("div",{className:"px-4 mt-4",children:c.jsxs("button",{onClick:()=>f(),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(Ki,{size:20})," Crear Nueva Temporada"]})}),c.jsx(sn,{isOpen:i,onClose:()=>{a(!1),o(void 0)},title:s?"Editar Temporada de Monta":"Crear Temporada de Monta",children:c.jsx(ome,{onSave:p,onCancel:()=>{a(!1),o(void 0)},existingSeason:s})})]})}function Dq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Dq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Rn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Dq(t))&&(r&&(r+=" "),r+=e);return r}var fme=Array.isArray,ko=fme,hme=typeof Yp=="object"&&Yp&&Yp.Object===Object&&Yp,Iq=hme,pme=Iq,mme=typeof self=="object"&&self&&self.Object===Object&&self,gme=pme||mme||Function("return this")(),bu=gme,vme=bu,yme=vme.Symbol,zb=yme,y6=zb,Oq=Object.prototype,bme=Oq.hasOwnProperty,xme=Oq.toString,zv=y6?y6.toStringTag:void 0;function wme(t){var e=bme.call(t,zv),n=t[zv];try{t[zv]=void 0;var r=!0}catch{}var i=xme.call(t);return r&&(e?t[zv]=n:delete t[zv]),i}var Sme=wme,_me=Object.prototype,Ame=_me.toString;function Cme(t){return Ame.call(t)}var jme=Cme,b6=zb,Eme=Sme,Nme=jme,Pme="[object Null]",kme="[object Undefined]",x6=b6?b6.toStringTag:void 0;function Tme(t){return t==null?t===void 0?kme:Pme:x6&&x6 in Object(t)?Eme(t):Nme(t)}var gd=Tme;function Dme(t){return t!=null&&typeof t=="object"}var vd=Dme,Ime=gd,Ome=vd,Mme="[object Symbol]";function Rme(t){return typeof t=="symbol"||Ome(t)&&Ime(t)==Mme}var iv=Rme,Lme=ko,Fme=iv,zme=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$me=/^\w*$/;function Bme(t,e){if(Lme(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Fme(t)?!0:$me.test(t)||!zme.test(t)||e!=null&&t in Object(e)}var QT=Bme;function Vme(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Rf=Vme;const av=Pr(Rf);var Ume=gd,Wme=Rf,Hme="[object AsyncFunction]",qme="[object Function]",Kme="[object GeneratorFunction]",Gme="[object Proxy]";function Yme(t){if(!Wme(t))return!1;var e=Ume(t);return e==qme||e==Kme||e==Hme||e==Gme}var ZT=Yme;const Sn=Pr(ZT);var Xme=bu,Qme=Xme["__core-js_shared__"],Zme=Qme,JA=Zme,w6=function(){var t=/[^.]+$/.exec(JA&&JA.keys&&JA.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Jme(t){return!!w6&&w6 in t}var ege=Jme,tge=Function.prototype,nge=tge.toString;function rge(t){if(t!=null){try{return nge.call(t)}catch{}try{return t+""}catch{}}return""}var Mq=rge,ige=ZT,age=ege,sge=Rf,oge=Mq,lge=/[\\^$.*+?()[\]{}|]/g,cge=/^\[object .+?Constructor\]$/,uge=Function.prototype,dge=Object.prototype,fge=uge.toString,hge=dge.hasOwnProperty,pge=RegExp("^"+fge.call(hge).replace(lge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mge(t){if(!sge(t)||age(t))return!1;var e=ige(t)?pge:cge;return e.test(oge(t))}var gge=mge;function vge(t,e){return t==null?void 0:t[e]}var yge=vge,bge=gge,xge=yge;function wge(t,e){var n=xge(t,e);return bge(n)?n:void 0}var vp=wge,Sge=vp,_ge=Sge(Object,"create"),NS=_ge,S6=NS;function Age(){this.__data__=S6?S6(null):{},this.size=0}var Cge=Age;function jge(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ege=jge,Nge=NS,Pge="__lodash_hash_undefined__",kge=Object.prototype,Tge=kge.hasOwnProperty;function Dge(t){var e=this.__data__;if(Nge){var n=e[t];return n===Pge?void 0:n}return Tge.call(e,t)?e[t]:void 0}var Ige=Dge,Oge=NS,Mge=Object.prototype,Rge=Mge.hasOwnProperty;function Lge(t){var e=this.__data__;return Oge?e[t]!==void 0:Rge.call(e,t)}var Fge=Lge,zge=NS,$ge="__lodash_hash_undefined__";function Bge(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=zge&&e===void 0?$ge:e,this}var Vge=Bge,Uge=Cge,Wge=Ege,Hge=Ige,qge=Fge,Kge=Vge;function sv(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}sv.prototype.clear=Uge;sv.prototype.delete=Wge;sv.prototype.get=Hge;sv.prototype.has=qge;sv.prototype.set=Kge;var Gge=sv;function Yge(){this.__data__=[],this.size=0}var Xge=Yge;function Qge(t,e){return t===e||t!==t&&e!==e}var JT=Qge,Zge=JT;function Jge(t,e){for(var n=t.length;n--;)if(Zge(t[n][0],e))return n;return-1}var PS=Jge,eve=PS,tve=Array.prototype,nve=tve.splice;function rve(t){var e=this.__data__,n=eve(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():nve.call(e,n,1),--this.size,!0}var ive=rve,ave=PS;function sve(t){var e=this.__data__,n=ave(e,t);return n<0?void 0:e[n][1]}var ove=sve,lve=PS;function cve(t){return lve(this.__data__,t)>-1}var uve=cve,dve=PS;function fve(t,e){var n=this.__data__,r=dve(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var hve=fve,pve=Xge,mve=ive,gve=ove,vve=uve,yve=hve;function ov(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ov.prototype.clear=pve;ov.prototype.delete=mve;ov.prototype.get=gve;ov.prototype.has=vve;ov.prototype.set=yve;var kS=ov,bve=vp,xve=bu,wve=bve(xve,"Map"),e3=wve,_6=Gge,Sve=kS,_ve=e3;function Ave(){this.size=0,this.__data__={hash:new _6,map:new(_ve||Sve),string:new _6}}var Cve=Ave;function jve(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Eve=jve,Nve=Eve;function Pve(t,e){var n=t.__data__;return Nve(e)?n[typeof e=="string"?"string":"hash"]:n.map}var TS=Pve,kve=TS;function Tve(t){var e=kve(this,t).delete(t);return this.size-=e?1:0,e}var Dve=Tve,Ive=TS;function Ove(t){return Ive(this,t).get(t)}var Mve=Ove,Rve=TS;function Lve(t){return Rve(this,t).has(t)}var Fve=Lve,zve=TS;function $ve(t,e){var n=zve(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Bve=$ve,Vve=Cve,Uve=Dve,Wve=Mve,Hve=Fve,qve=Bve;function lv(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}lv.prototype.clear=Vve;lv.prototype.delete=Uve;lv.prototype.get=Wve;lv.prototype.has=Hve;lv.prototype.set=qve;var t3=lv,Rq=t3,Kve="Expected a function";function n3(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Kve);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(n3.Cache||Rq),n}n3.Cache=Rq;var Lq=n3;const Gve=Pr(Lq);var Yve=Lq,Xve=500;function Qve(t){var e=Yve(t,function(r){return n.size===Xve&&n.clear(),r}),n=e.cache;return e}var Zve=Qve,Jve=Zve,e0e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t0e=/\\(\\)?/g,n0e=Jve(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(e0e,function(n,r,i,a){e.push(i?a.replace(t0e,"$1"):r||n)}),e}),r0e=n0e;function i0e(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var r3=i0e,A6=zb,a0e=r3,s0e=ko,o0e=iv,C6=A6?A6.prototype:void 0,j6=C6?C6.toString:void 0;function Fq(t){if(typeof t=="string")return t;if(s0e(t))return a0e(t,Fq)+"";if(o0e(t))return j6?j6.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var l0e=Fq,c0e=l0e;function u0e(t){return t==null?"":c0e(t)}var zq=u0e,d0e=ko,f0e=QT,h0e=r0e,p0e=zq;function m0e(t,e){return d0e(t)?t:f0e(t,e)?[t]:h0e(p0e(t))}var $q=m0e,g0e=iv;function v0e(t){if(typeof t=="string"||g0e(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var DS=v0e,y0e=$q,b0e=DS;function x0e(t,e){e=y0e(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[b0e(e[n++])];return n&&n==r?t:void 0}var i3=x0e,w0e=i3;function S0e(t,e,n){var r=t==null?void 0:w0e(t,e);return r===void 0?n:r}var Bq=S0e;const cl=Pr(Bq);function _0e(t){return t==null}var A0e=_0e;const wn=Pr(A0e);var C0e=gd,j0e=ko,E0e=vd,N0e="[object String]";function P0e(t){return typeof t=="string"||!j0e(t)&&E0e(t)&&C0e(t)==N0e}var k0e=P0e;const Qh=Pr(k0e);var Vq={exports:{}},zr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a3=Symbol.for("react.element"),s3=Symbol.for("react.portal"),IS=Symbol.for("react.fragment"),OS=Symbol.for("react.strict_mode"),MS=Symbol.for("react.profiler"),RS=Symbol.for("react.provider"),LS=Symbol.for("react.context"),T0e=Symbol.for("react.server_context"),FS=Symbol.for("react.forward_ref"),zS=Symbol.for("react.suspense"),$S=Symbol.for("react.suspense_list"),BS=Symbol.for("react.memo"),VS=Symbol.for("react.lazy"),D0e=Symbol.for("react.offscreen"),Uq;Uq=Symbol.for("react.module.reference");function Yl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case a3:switch(t=t.type,t){case IS:case MS:case OS:case zS:case $S:return t;default:switch(t=t&&t.$$typeof,t){case T0e:case LS:case FS:case VS:case BS:case RS:return t;default:return e}}case s3:return e}}}zr.ContextConsumer=LS;zr.ContextProvider=RS;zr.Element=a3;zr.ForwardRef=FS;zr.Fragment=IS;zr.Lazy=VS;zr.Memo=BS;zr.Portal=s3;zr.Profiler=MS;zr.StrictMode=OS;zr.Suspense=zS;zr.SuspenseList=$S;zr.isAsyncMode=function(){return!1};zr.isConcurrentMode=function(){return!1};zr.isContextConsumer=function(t){return Yl(t)===LS};zr.isContextProvider=function(t){return Yl(t)===RS};zr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===a3};zr.isForwardRef=function(t){return Yl(t)===FS};zr.isFragment=function(t){return Yl(t)===IS};zr.isLazy=function(t){return Yl(t)===VS};zr.isMemo=function(t){return Yl(t)===BS};zr.isPortal=function(t){return Yl(t)===s3};zr.isProfiler=function(t){return Yl(t)===MS};zr.isStrictMode=function(t){return Yl(t)===OS};zr.isSuspense=function(t){return Yl(t)===zS};zr.isSuspenseList=function(t){return Yl(t)===$S};zr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===IS||t===MS||t===OS||t===zS||t===$S||t===D0e||typeof t=="object"&&t!==null&&(t.$$typeof===VS||t.$$typeof===BS||t.$$typeof===RS||t.$$typeof===LS||t.$$typeof===FS||t.$$typeof===Uq||t.getModuleId!==void 0)};zr.typeOf=Yl;Vq.exports=zr;var I0e=Vq.exports,O0e=gd,M0e=vd,R0e="[object Number]";function L0e(t){return typeof t=="number"||M0e(t)&&O0e(t)==R0e}var Wq=L0e;const F0e=Pr(Wq);var z0e=Wq;function $0e(t){return z0e(t)&&t!=+t}var B0e=$0e;const cv=Pr(B0e);var eo=function(e){return e===0?0:e>0?1:-1},Ah=function(e){return Qh(e)&&e.indexOf("%")===e.length-1},Pt=function(e){return F0e(e)&&!cv(e)},V0e=function(e){return wn(e)},Ra=function(e){return Pt(e)||Qh(e)},U0e=0,Lf=function(e){var n=++U0e;return"".concat(e||"").concat(n)},to=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pt(e)&&!Qh(e))return r;var a;if(Ah(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return cv(a)&&(a=r),i&&a>n&&(a=n),a},Ud=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},W0e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Pi=function(e,n){return Pt(e)&&Pt(n)?function(r){return e+r*(n-e)}:function(){return n}};function aw(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):cl(r,e))===n})}var H0e=function(e){if(!e||!e.length)return null;for(var n=e.length,r=0,i=0,a=0,s=0,o=1/0,l=-1/0,u=0,d=0,f=0;f<n;f++)u=e[f].cx||0,d=e[f].cy||0,r+=u,i+=d,a+=u*d,s+=u*u,o=Math.min(o,u),l=Math.max(l,u);var p=n*s!==r*r?(n*a-r*i)/(n*s-r*r):0;return{xmin:o,xmax:l,a:p,b:(i-p*r)/n}},q0e=function(e,n){return Pt(e)&&Pt(n)?e-n:Qh(e)&&Qh(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function km(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function hN(t){"@babel/helpers - typeof";return hN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hN(t)}var K0e=["viewBox","children"],G0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],E6=["points","pathLength"],eC={svg:K0e,polygon:E6,polyline:E6},o3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],sw=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(I.isValidElement(e)&&(r=e.props),!av(r))return null;var i={};return Object.keys(r).forEach(function(a){o3.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},Y0e=function(e,n,r){return function(i){return e(n,r,i),null}},Af=function(e,n,r){if(!av(e)||hN(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];o3.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=Y0e(s,n,r))}),i},X0e=["children"],Q0e=["children"];function N6(t,e){if(t==null)return{};var n=Z0e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Z0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pN(t){"@babel/helpers - typeof";return pN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pN(t)}var P6={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Xu=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},k6=null,tC=null,l3=function t(e){if(e===k6&&Array.isArray(tC))return tC;var n=[];return I.Children.forEach(e,function(r){wn(r)||(I0e.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),tC=n,k6=e,n};function io(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Xu(i)}):r=[Xu(e)],l3(t).forEach(function(i){var a=cl(i,"type.displayName")||cl(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function el(t,e){var n=io(t,e);return n&&n[0]}var T6=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Pt(r)||r<=0||!Pt(i)||i<=0)},J0e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],eye=function(e){return e&&e.type&&Qh(e.type)&&J0e.indexOf(e.type)>=0},Hq=function(e){return e&&pN(e)==="object"&&"clipDot"in e},tye=function(e,n,r,i){var a,s=(a=eC==null?void 0:eC[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Sn(e)&&(i&&s.includes(n)||G0e.includes(n))||r&&o3.includes(n)},un=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(I.isValidElement(e)&&(i=e.props),!av(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;tye((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},mN=function t(e,n){if(e===n)return!0;var r=I.Children.count(e);if(r!==I.Children.count(n))return!1;if(r===0)return!0;if(r===1)return D6(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!D6(a,s))return!1}return!0},D6=function(e,n){if(wn(e)&&wn(n))return!0;if(!wn(e)&&!wn(n)){var r=e.props||{},i=r.children,a=N6(r,X0e),s=n.props||{},o=s.children,l=N6(s,Q0e);return i&&o?km(a,l)&&mN(i,o):!i&&!o?km(a,l):!1}return!1},I6=function(e,n){var r=[],i={};return l3(e).forEach(function(a,s){if(eye(a))r.push(a);else if(a){var o=Xu(a.type),l=n[o]||{},u=l.handler,d=l.once;if(u&&(!d||!i[o])){var f=u(a,o,s);r.push(f),i[o]=!0}}}),r},nye=function(e){var n=e&&e.type;return n&&P6[n]?P6[n]:null},rye=function(e,n){return l3(n).indexOf(e)},iye=["children","width","height","viewBox","className","style","title","desc"];function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(this,arguments)}function aye(t,e){if(t==null)return{};var n=sye(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vN(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,l=t.desc,u=aye(t,iye),d=i||{width:n,height:r,x:0,y:0},f=Rn("recharts-surface",a);return be.createElement("svg",gN({},un(u,!0,"svg"),{className:f,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),be.createElement("title",null,o),be.createElement("desc",null,l),e)}var oye=["children","className"];function yN(){return yN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yN.apply(this,arguments)}function lye(t,e){if(t==null)return{};var n=cye(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var zn=be.forwardRef(function(t,e){var n=t.children,r=t.className,i=lye(t,oye),a=Rn("recharts-layer",r);return be.createElement("g",yN({className:a},un(i,!0),{ref:e}),n)}),wc=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function uye(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var dye=uye,fye=dye;function hye(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:fye(t,e,n)}var pye=hye,mye="\\ud800-\\udfff",gye="\\u0300-\\u036f",vye="\\ufe20-\\ufe2f",yye="\\u20d0-\\u20ff",bye=gye+vye+yye,xye="\\ufe0e\\ufe0f",wye="\\u200d",Sye=RegExp("["+wye+mye+bye+xye+"]");function _ye(t){return Sye.test(t)}var qq=_ye;function Aye(t){return t.split("")}var Cye=Aye,Kq="\\ud800-\\udfff",jye="\\u0300-\\u036f",Eye="\\ufe20-\\ufe2f",Nye="\\u20d0-\\u20ff",Pye=jye+Eye+Nye,kye="\\ufe0e\\ufe0f",Tye="["+Kq+"]",bN="["+Pye+"]",xN="\\ud83c[\\udffb-\\udfff]",Dye="(?:"+bN+"|"+xN+")",Gq="[^"+Kq+"]",Yq="(?:\\ud83c[\\udde6-\\uddff]){2}",Xq="[\\ud800-\\udbff][\\udc00-\\udfff]",Iye="\\u200d",Qq=Dye+"?",Zq="["+kye+"]?",Oye="(?:"+Iye+"(?:"+[Gq,Yq,Xq].join("|")+")"+Zq+Qq+")*",Mye=Zq+Qq+Oye,Rye="(?:"+[Gq+bN+"?",bN,Yq,Xq,Tye].join("|")+")",Lye=RegExp(xN+"(?="+xN+")|"+Rye+Mye,"g");function Fye(t){return t.match(Lye)||[]}var zye=Fye,$ye=Cye,Bye=qq,Vye=zye;function Uye(t){return Bye(t)?Vye(t):$ye(t)}var Wye=Uye,Hye=pye,qye=qq,Kye=Wye,Gye=zq;function Yye(t){return function(e){e=Gye(e);var n=qye(e)?Kye(e):void 0,r=n?n[0]:e.charAt(0),i=n?Hye(n,1).join(""):e.slice(1);return r[t]()+i}}var Xye=Yye,Qye=Xye,Zye=Qye("toUpperCase"),Jye=Zye;const US=Pr(Jye);function ei(t){return function(){return t}}const Jq=Math.cos,ow=Math.sin,Oc=Math.sqrt,lw=Math.PI,WS=2*lw,wN=Math.PI,SN=2*wN,lh=1e-6,ebe=SN-lh;function eK(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function tbe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return eK;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class nbe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?eK:tbe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,u=i-n,d=s-e,f=o-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>lh)if(!(Math.abs(f*l-u*d)>lh)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-s,g=i-o,m=l*l+u*u,v=h*h+g*g,y=Math.sqrt(m),b=Math.sqrt(p),S=a*Math.tan((wN-Math.acos((m+p-v)/(2*y*b)))/2),A=S/b,C=S/y;Math.abs(A-1)>lh&&this._append`L${e+A*d},${n+A*f}`,this._append`A${a},${a},0,0,${+(f*h>d*g)},${this._x1=e+C*l},${this._y1=n+C*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,d=n+l,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>lh||Math.abs(this._y1-d)>lh)&&this._append`L${u},${d}`,r&&(p<0&&(p=p%SN+SN),p>ebe?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:p>lh&&this._append`A${r},${r},0,${+(p>=wN)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function c3(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new nbe(e)}function u3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function tK(t){this._context=t}tK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function HS(t){return new tK(t)}function nK(t){return t[0]}function rK(t){return t[1]}function iK(t,e){var n=ei(!0),r=null,i=HS,a=null,s=c3(o);t=typeof t=="function"?t:t===void 0?nK:ei(t),e=typeof e=="function"?e:e===void 0?rK:ei(e);function o(l){var u,d=(l=u3(l)).length,f,p=!1,h;for(r==null&&(a=i(h=s())),u=0;u<=d;++u)!(u<d&&n(f=l[u],u,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(f,u,l),+e(f,u,l));if(h)return a=null,h+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:ei(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:ei(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ei(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}function Wx(t,e,n){var r=null,i=ei(!0),a=null,s=HS,o=null,l=c3(u);t=typeof t=="function"?t:t===void 0?nK:ei(+t),e=typeof e=="function"?e:ei(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?rK:ei(+n);function u(f){var p,h,g,m=(f=u3(f)).length,v,y=!1,b,S=new Array(m),A=new Array(m);for(a==null&&(o=s(b=l())),p=0;p<=m;++p){if(!(p<m&&i(v=f[p],p,f))===y)if(y=!y)h=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=p-1;g>=h;--g)o.point(S[g],A[g]);o.lineEnd(),o.areaEnd()}y&&(S[p]=+t(v,p,f),A[p]=+e(v,p,f),o.point(r?+r(v,p,f):S[p],n?+n(v,p,f):A[p]))}if(b)return o=null,b+""||null}function d(){return iK().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:ei(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:ei(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ei(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:ei(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:ei(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ei(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:ei(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}class aK{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function rbe(t){return new aK(t,!0)}function ibe(t){return new aK(t,!1)}const d3={draw(t,e){const n=Oc(e/lw);t.moveTo(n,0),t.arc(0,0,n,0,WS)}},abe={draw(t,e){const n=Oc(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},sK=Oc(1/3),sbe=sK*2,obe={draw(t,e){const n=Oc(e/sbe),r=n*sK;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},lbe={draw(t,e){const n=Oc(e),r=-n/2;t.rect(r,r,n,n)}},cbe=.8908130915292852,oK=ow(lw/10)/ow(7*lw/10),ube=ow(WS/10)*oK,dbe=-Jq(WS/10)*oK,fbe={draw(t,e){const n=Oc(e*cbe),r=ube*n,i=dbe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=WS*a/5,o=Jq(s),l=ow(s);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},nC=Oc(3),hbe={draw(t,e){const n=-Oc(e/(nC*3));t.moveTo(0,n*2),t.lineTo(-nC*n,-n),t.lineTo(nC*n,-n),t.closePath()}},kl=-.5,Tl=Oc(3)/2,_N=1/Oc(12),pbe=(_N/2+1)*3,mbe={draw(t,e){const n=Oc(e/pbe),r=n/2,i=n*_N,a=r,s=n*_N+n,o=-a,l=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(kl*r-Tl*i,Tl*r+kl*i),t.lineTo(kl*a-Tl*s,Tl*a+kl*s),t.lineTo(kl*o-Tl*l,Tl*o+kl*l),t.lineTo(kl*r+Tl*i,kl*i-Tl*r),t.lineTo(kl*a+Tl*s,kl*s-Tl*a),t.lineTo(kl*o+Tl*l,kl*l-Tl*o),t.closePath()}};function gbe(t,e){let n=null,r=c3(i);t=typeof t=="function"?t:ei(t||d3),e=typeof e=="function"?e:ei(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:ei(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:ei(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function cw(){}function uw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function lK(t){this._context=t}lK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:uw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:uw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vbe(t){return new lK(t)}function cK(t){this._context=t}cK.prototype={areaStart:cw,areaEnd:cw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:uw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ybe(t){return new cK(t)}function uK(t){this._context=t}uK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:uw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function bbe(t){return new uK(t)}function dK(t){this._context=t}dK.prototype={areaStart:cw,areaEnd:cw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function xbe(t){return new dK(t)}function O6(t){return t<0?-1:1}function M6(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(O6(a)+O6(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function R6(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function rC(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function dw(t){this._context=t}dw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rC(this,this._t0,R6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,rC(this,R6(this,n=M6(this,t,e)),n);break;default:rC(this,this._t0,n=M6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function fK(t){this._context=new hK(t)}(fK.prototype=Object.create(dw.prototype)).point=function(t,e){dw.prototype.point.call(this,e,t)};function hK(t){this._context=t}hK.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function wbe(t){return new dw(t)}function Sbe(t){return new fK(t)}function pK(t){this._context=t}pK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=L6(t),i=L6(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function L6(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function _be(t){return new pK(t)}function qS(t,e){this._context=t,this._t=e}qS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Abe(t){return new qS(t,.5)}function Cbe(t){return new qS(t,0)}function jbe(t){return new qS(t,1)}function fg(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function AN(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Ebe(t,e){return t[e]}function Nbe(t){const e=[];return e.key=t,e}function Pbe(){var t=ei([]),e=AN,n=fg,r=Ebe;function i(a){var s=Array.from(t.apply(this,arguments),Nbe),o,l=s.length,u=-1,d;for(const f of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+r(f,s[o].key,u,a)]).data=f;for(o=0,d=u3(e(s));o<l;++o)s[d[o]].index=o;return n(s,d),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:ei(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:ei(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?AN:typeof a=="function"?a:ei(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??fg,i):n},i}function kbe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}fg(t,e)}}function Tbe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}fg(t,e)}}function Dbe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,l=0,u=0;o<s;++o){for(var d=t[e[o]],f=d[r][1]||0,p=d[r-1][1]||0,h=(f-p)/2,g=0;g<o;++g){var m=t[e[g]],v=m[r][1]||0,y=m[r-1][1]||0;h+=v-y}l+=f,u+=h*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,fg(t,e)}}function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}var Ibe=["type","size","sizeType"];function CN(){return CN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CN.apply(this,arguments)}function F6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function z6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F6(Object(n),!0).forEach(function(r){Obe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Obe(t,e,n){return e=Mbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mbe(t){var e=Rbe(t,"string");return Py(e)=="symbol"?e:e+""}function Rbe(t,e){if(Py(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Py(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lbe(t,e){if(t==null)return{};var n=Fbe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var mK={symbolCircle:d3,symbolCross:abe,symbolDiamond:obe,symbolSquare:lbe,symbolStar:fbe,symbolTriangle:hbe,symbolWye:mbe},zbe=Math.PI/180,$be=function(e){var n="symbol".concat(US(e));return mK[n]||d3},Bbe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*zbe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Vbe=function(e,n){mK["symbol".concat(US(e))]=n},KS=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,l=Lbe(e,Ibe),u=z6(z6({},l),{},{type:r,size:a,sizeType:o}),d=function(){var v=$be(r),y=gbe().type(v).size(Bbe(a,o,r));return y()},f=u.className,p=u.cx,h=u.cy,g=un(u,!0);return p===+p&&h===+h&&a===+a?be.createElement("path",CN({},g,{className:Rn("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};KS.registerSymbol=Vbe;function hg(t){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(t)}function jN(){return jN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jN.apply(this,arguments)}function $6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ube(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$6(Object(n),!0).forEach(function(r){ky(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hbe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vK(r.key),r)}}function qbe(t,e,n){return e&&Hbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kbe(t,e,n){return e=fw(e),Gbe(t,gK()?Reflect.construct(e,n||[],fw(t).constructor):e.apply(t,n))}function Gbe(t,e){if(e&&(hg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ybe(t)}function Ybe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gK=function(){return!!t})()}function fw(t){return fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fw(t)}function Xbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EN(t,e)}function EN(t,e){return EN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EN(t,e)}function ky(t,e,n){return e=vK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vK(t){var e=Qbe(t,"string");return hg(e)=="symbol"?e:e+""}function Qbe(t,e){if(hg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Dl=32,f3=function(t){function e(){return Wbe(this,e),Kbe(this,e,arguments)}return Xbe(e,t),qbe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=Dl/2,s=Dl/6,o=Dl/3,l=r.inactive?i:r.color;if(r.type==="plainline")return be.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Dl,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return be.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Dl,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return be.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Dl/8,"h").concat(Dl,"v").concat(Dl*3/4,"h").concat(-Dl,"z"),className:"recharts-legend-icon"});if(be.isValidElement(r.legendIcon)){var u=Ube({},r);return delete u.legendIcon,be.cloneElement(r.legendIcon,u)}return be.createElement(KS,{fill:l,cx:a,cy:a,size:Dl,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,l=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Dl,height:Dl},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(h,g){var m=h.formatter||l,v=Rn(ky(ky({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=Sn(h.value)?null:h.value;wc(!Sn(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=h.inactive?u:h.color;return be.createElement("li",jN({className:v,style:f,key:"legend-item-".concat(g)},Af(r.props,h,g)),be.createElement(vN,{width:s,height:s,viewBox:d,style:p},r.renderIcon(h)),be.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},m?m(y,h,g):y))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return be.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(I.PureComponent);ky(f3,"displayName","Legend");ky(f3,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Zbe=kS;function Jbe(){this.__data__=new Zbe,this.size=0}var exe=Jbe;function txe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var nxe=txe;function rxe(t){return this.__data__.get(t)}var ixe=rxe;function axe(t){return this.__data__.has(t)}var sxe=axe,oxe=kS,lxe=e3,cxe=t3,uxe=200;function dxe(t,e){var n=this.__data__;if(n instanceof oxe){var r=n.__data__;if(!lxe||r.length<uxe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new cxe(r)}return n.set(t,e),this.size=n.size,this}var fxe=dxe,hxe=kS,pxe=exe,mxe=nxe,gxe=ixe,vxe=sxe,yxe=fxe;function uv(t){var e=this.__data__=new hxe(t);this.size=e.size}uv.prototype.clear=pxe;uv.prototype.delete=mxe;uv.prototype.get=gxe;uv.prototype.has=vxe;uv.prototype.set=yxe;var yK=uv,bxe="__lodash_hash_undefined__";function xxe(t){return this.__data__.set(t,bxe),this}var wxe=xxe;function Sxe(t){return this.__data__.has(t)}var _xe=Sxe,Axe=t3,Cxe=wxe,jxe=_xe;function hw(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Axe;++e<n;)this.add(t[e])}hw.prototype.add=hw.prototype.push=Cxe;hw.prototype.has=jxe;var bK=hw;function Exe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var xK=Exe;function Nxe(t,e){return t.has(e)}var wK=Nxe,Pxe=bK,kxe=xK,Txe=wK,Dxe=1,Ixe=2;function Oxe(t,e,n,r,i,a){var s=n&Dxe,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var f=-1,p=!0,h=n&Ixe?new Pxe:void 0;for(a.set(t,e),a.set(e,t);++f<o;){var g=t[f],m=e[f];if(r)var v=s?r(m,g,f,e,t,a):r(g,m,f,t,e,a);if(v!==void 0){if(v)continue;p=!1;break}if(h){if(!kxe(e,function(y,b){if(!Txe(h,b)&&(g===y||i(g,y,n,r,a)))return h.push(b)})){p=!1;break}}else if(!(g===m||i(g,m,n,r,a))){p=!1;break}}return a.delete(t),a.delete(e),p}var SK=Oxe,Mxe=bu,Rxe=Mxe.Uint8Array,Lxe=Rxe;function Fxe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var zxe=Fxe;function $xe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var h3=$xe,B6=zb,V6=Lxe,Bxe=JT,Vxe=SK,Uxe=zxe,Wxe=h3,Hxe=1,qxe=2,Kxe="[object Boolean]",Gxe="[object Date]",Yxe="[object Error]",Xxe="[object Map]",Qxe="[object Number]",Zxe="[object RegExp]",Jxe="[object Set]",e1e="[object String]",t1e="[object Symbol]",n1e="[object ArrayBuffer]",r1e="[object DataView]",U6=B6?B6.prototype:void 0,iC=U6?U6.valueOf:void 0;function i1e(t,e,n,r,i,a,s){switch(n){case r1e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case n1e:return!(t.byteLength!=e.byteLength||!a(new V6(t),new V6(e)));case Kxe:case Gxe:case Qxe:return Bxe(+t,+e);case Yxe:return t.name==e.name&&t.message==e.message;case Zxe:case e1e:return t==e+"";case Xxe:var o=Uxe;case Jxe:var l=r&Hxe;if(o||(o=Wxe),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;r|=qxe,s.set(t,e);var d=Vxe(o(t),o(e),r,i,a,s);return s.delete(t),d;case t1e:if(iC)return iC.call(t)==iC.call(e)}return!1}var a1e=i1e;function s1e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var _K=s1e,o1e=_K,l1e=ko;function c1e(t,e,n){var r=e(t);return l1e(t)?r:o1e(r,n(t))}var u1e=c1e;function d1e(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}var f1e=d1e;function h1e(){return[]}var p1e=h1e,m1e=f1e,g1e=p1e,v1e=Object.prototype,y1e=v1e.propertyIsEnumerable,W6=Object.getOwnPropertySymbols,b1e=W6?function(t){return t==null?[]:(t=Object(t),m1e(W6(t),function(e){return y1e.call(t,e)}))}:g1e,x1e=b1e;function w1e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var S1e=w1e,_1e=gd,A1e=vd,C1e="[object Arguments]";function j1e(t){return A1e(t)&&_1e(t)==C1e}var E1e=j1e,H6=E1e,N1e=vd,AK=Object.prototype,P1e=AK.hasOwnProperty,k1e=AK.propertyIsEnumerable,T1e=H6(function(){return arguments}())?H6:function(t){return N1e(t)&&P1e.call(t,"callee")&&!k1e.call(t,"callee")},p3=T1e,pw={exports:{}};function D1e(){return!1}var I1e=D1e;pw.exports;(function(t,e){var n=bu,r=I1e,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;t.exports=u})(pw,pw.exports);var CK=pw.exports,O1e=9007199254740991,M1e=/^(?:0|[1-9]\d*)$/;function R1e(t,e){var n=typeof t;return e=e??O1e,!!e&&(n=="number"||n!="symbol"&&M1e.test(t))&&t>-1&&t%1==0&&t<e}var m3=R1e,L1e=9007199254740991;function F1e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=L1e}var g3=F1e,z1e=gd,$1e=g3,B1e=vd,V1e="[object Arguments]",U1e="[object Array]",W1e="[object Boolean]",H1e="[object Date]",q1e="[object Error]",K1e="[object Function]",G1e="[object Map]",Y1e="[object Number]",X1e="[object Object]",Q1e="[object RegExp]",Z1e="[object Set]",J1e="[object String]",e2e="[object WeakMap]",t2e="[object ArrayBuffer]",n2e="[object DataView]",r2e="[object Float32Array]",i2e="[object Float64Array]",a2e="[object Int8Array]",s2e="[object Int16Array]",o2e="[object Int32Array]",l2e="[object Uint8Array]",c2e="[object Uint8ClampedArray]",u2e="[object Uint16Array]",d2e="[object Uint32Array]",pi={};pi[r2e]=pi[i2e]=pi[a2e]=pi[s2e]=pi[o2e]=pi[l2e]=pi[c2e]=pi[u2e]=pi[d2e]=!0;pi[V1e]=pi[U1e]=pi[t2e]=pi[W1e]=pi[n2e]=pi[H1e]=pi[q1e]=pi[K1e]=pi[G1e]=pi[Y1e]=pi[X1e]=pi[Q1e]=pi[Z1e]=pi[J1e]=pi[e2e]=!1;function f2e(t){return B1e(t)&&$1e(t.length)&&!!pi[z1e(t)]}var h2e=f2e;function p2e(t){return function(e){return t(e)}}var jK=p2e,mw={exports:{}};mw.exports;(function(t,e){var n=Iq,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o})(mw,mw.exports);var m2e=mw.exports,g2e=h2e,v2e=jK,q6=m2e,K6=q6&&q6.isTypedArray,y2e=K6?v2e(K6):g2e,EK=y2e,b2e=S1e,x2e=p3,w2e=ko,S2e=CK,_2e=m3,A2e=EK,C2e=Object.prototype,j2e=C2e.hasOwnProperty;function E2e(t,e){var n=w2e(t),r=!n&&x2e(t),i=!n&&!r&&S2e(t),a=!n&&!r&&!i&&A2e(t),s=n||r||i||a,o=s?b2e(t.length,String):[],l=o.length;for(var u in t)(e||j2e.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||_2e(u,l)))&&o.push(u);return o}var N2e=E2e,P2e=Object.prototype;function k2e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||P2e;return t===n}var T2e=k2e;function D2e(t,e){return function(n){return t(e(n))}}var NK=D2e,I2e=NK,O2e=I2e(Object.keys,Object),M2e=O2e,R2e=T2e,L2e=M2e,F2e=Object.prototype,z2e=F2e.hasOwnProperty;function $2e(t){if(!R2e(t))return L2e(t);var e=[];for(var n in Object(t))z2e.call(t,n)&&n!="constructor"&&e.push(n);return e}var B2e=$2e,V2e=ZT,U2e=g3;function W2e(t){return t!=null&&U2e(t.length)&&!V2e(t)}var $b=W2e,H2e=N2e,q2e=B2e,K2e=$b;function G2e(t){return K2e(t)?H2e(t):q2e(t)}var GS=G2e,Y2e=u1e,X2e=x1e,Q2e=GS;function Z2e(t){return Y2e(t,Q2e,X2e)}var J2e=Z2e,G6=J2e,ewe=1,twe=Object.prototype,nwe=twe.hasOwnProperty;function rwe(t,e,n,r,i,a){var s=n&ewe,o=G6(t),l=o.length,u=G6(e),d=u.length;if(l!=d&&!s)return!1;for(var f=l;f--;){var p=o[f];if(!(s?p in e:nwe.call(e,p)))return!1}var h=a.get(t),g=a.get(e);if(h&&g)return h==e&&g==t;var m=!0;a.set(t,e),a.set(e,t);for(var v=s;++f<l;){p=o[f];var y=t[p],b=e[p];if(r)var S=s?r(b,y,p,e,t,a):r(y,b,p,t,e,a);if(!(S===void 0?y===b||i(y,b,n,r,a):S)){m=!1;break}v||(v=p=="constructor")}if(m&&!v){var A=t.constructor,C=e.constructor;A!=C&&"constructor"in t&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof C=="function"&&C instanceof C)&&(m=!1)}return a.delete(t),a.delete(e),m}var iwe=rwe,awe=vp,swe=bu,owe=awe(swe,"DataView"),lwe=owe,cwe=vp,uwe=bu,dwe=cwe(uwe,"Promise"),fwe=dwe,hwe=vp,pwe=bu,mwe=hwe(pwe,"Set"),PK=mwe,gwe=vp,vwe=bu,ywe=gwe(vwe,"WeakMap"),bwe=ywe,NN=lwe,PN=e3,kN=fwe,TN=PK,DN=bwe,kK=gd,dv=Mq,Y6="[object Map]",xwe="[object Object]",X6="[object Promise]",Q6="[object Set]",Z6="[object WeakMap]",J6="[object DataView]",wwe=dv(NN),Swe=dv(PN),_we=dv(kN),Awe=dv(TN),Cwe=dv(DN),ch=kK;(NN&&ch(new NN(new ArrayBuffer(1)))!=J6||PN&&ch(new PN)!=Y6||kN&&ch(kN.resolve())!=X6||TN&&ch(new TN)!=Q6||DN&&ch(new DN)!=Z6)&&(ch=function(t){var e=kK(t),n=e==xwe?t.constructor:void 0,r=n?dv(n):"";if(r)switch(r){case wwe:return J6;case Swe:return Y6;case _we:return X6;case Awe:return Q6;case Cwe:return Z6}return e});var jwe=ch,aC=yK,Ewe=SK,Nwe=a1e,Pwe=iwe,eL=jwe,tL=ko,nL=CK,kwe=EK,Twe=1,rL="[object Arguments]",iL="[object Array]",Hx="[object Object]",Dwe=Object.prototype,aL=Dwe.hasOwnProperty;function Iwe(t,e,n,r,i,a){var s=tL(t),o=tL(e),l=s?iL:eL(t),u=o?iL:eL(e);l=l==rL?Hx:l,u=u==rL?Hx:u;var d=l==Hx,f=u==Hx,p=l==u;if(p&&nL(t)){if(!nL(e))return!1;s=!0,d=!1}if(p&&!d)return a||(a=new aC),s||kwe(t)?Ewe(t,e,n,r,i,a):Nwe(t,e,l,n,r,i,a);if(!(n&Twe)){var h=d&&aL.call(t,"__wrapped__"),g=f&&aL.call(e,"__wrapped__");if(h||g){var m=h?t.value():t,v=g?e.value():e;return a||(a=new aC),i(m,v,n,r,a)}}return p?(a||(a=new aC),Pwe(t,e,n,r,i,a)):!1}var Owe=Iwe,Mwe=Owe,sL=vd;function TK(t,e,n,r,i){return t===e?!0:t==null||e==null||!sL(t)&&!sL(e)?t!==t&&e!==e:Mwe(t,e,n,r,TK,i)}var v3=TK,Rwe=yK,Lwe=v3,Fwe=1,zwe=2;function $we(t,e,n,r){var i=n.length,a=i,s=!r;if(t==null)return!a;for(t=Object(t);i--;){var o=n[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=n[i];var l=o[0],u=t[l],d=o[1];if(s&&o[2]){if(u===void 0&&!(l in t))return!1}else{var f=new Rwe;if(r)var p=r(u,d,l,t,e,f);if(!(p===void 0?Lwe(d,u,Fwe|zwe,r,f):p))return!1}}return!0}var Bwe=$we,Vwe=Rf;function Uwe(t){return t===t&&!Vwe(t)}var DK=Uwe,Wwe=DK,Hwe=GS;function qwe(t){for(var e=Hwe(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Wwe(i)]}return e}var Kwe=qwe;function Gwe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var IK=Gwe,Ywe=Bwe,Xwe=Kwe,Qwe=IK;function Zwe(t){var e=Xwe(t);return e.length==1&&e[0][2]?Qwe(e[0][0],e[0][1]):function(n){return n===t||Ywe(n,t,e)}}var Jwe=Zwe;function e5e(t,e){return t!=null&&e in Object(t)}var t5e=e5e,n5e=$q,r5e=p3,i5e=ko,a5e=m3,s5e=g3,o5e=DS;function l5e(t,e,n){e=n5e(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var s=o5e(e[r]);if(!(a=t!=null&&n(t,s)))break;t=t[s]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&s5e(i)&&a5e(s,i)&&(i5e(t)||r5e(t)))}var c5e=l5e,u5e=t5e,d5e=c5e;function f5e(t,e){return t!=null&&d5e(t,e,u5e)}var h5e=f5e,p5e=v3,m5e=Bq,g5e=h5e,v5e=QT,y5e=DK,b5e=IK,x5e=DS,w5e=1,S5e=2;function _5e(t,e){return v5e(t)&&y5e(e)?b5e(x5e(t),e):function(n){var r=m5e(n,t);return r===void 0&&r===e?g5e(n,t):p5e(e,r,w5e|S5e)}}var A5e=_5e;function C5e(t){return t}var fv=C5e;function j5e(t){return function(e){return e==null?void 0:e[t]}}var E5e=j5e,N5e=i3;function P5e(t){return function(e){return N5e(e,t)}}var k5e=P5e,T5e=E5e,D5e=k5e,I5e=QT,O5e=DS;function M5e(t){return I5e(t)?T5e(O5e(t)):D5e(t)}var R5e=M5e,L5e=Jwe,F5e=A5e,z5e=fv,$5e=ko,B5e=R5e;function V5e(t){return typeof t=="function"?t:t==null?z5e:typeof t=="object"?$5e(t)?F5e(t[0],t[1]):L5e(t):B5e(t)}var xu=V5e;function U5e(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var OK=U5e;function W5e(t){return t!==t}var H5e=W5e;function q5e(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var K5e=q5e,G5e=OK,Y5e=H5e,X5e=K5e;function Q5e(t,e,n){return e===e?X5e(t,e,n):G5e(t,Y5e,n)}var Z5e=Q5e,J5e=Z5e;function eSe(t,e){var n=t==null?0:t.length;return!!n&&J5e(t,e,0)>-1}var tSe=eSe;function nSe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var rSe=nSe;function iSe(){}var aSe=iSe,sC=PK,sSe=aSe,oSe=h3,lSe=1/0,cSe=sC&&1/oSe(new sC([,-0]))[1]==lSe?function(t){return new sC(t)}:sSe,uSe=cSe,dSe=bK,fSe=tSe,hSe=rSe,pSe=wK,mSe=uSe,gSe=h3,vSe=200;function ySe(t,e,n){var r=-1,i=fSe,a=t.length,s=!0,o=[],l=o;if(n)s=!1,i=hSe;else if(a>=vSe){var u=e?null:mSe(t);if(u)return gSe(u);s=!1,i=pSe,l=new dSe}else l=e?[]:o;e:for(;++r<a;){var d=t[r],f=e?e(d):d;if(d=n||d!==0?d:0,s&&f===f){for(var p=l.length;p--;)if(l[p]===f)continue e;e&&l.push(f),o.push(d)}else i(l,f,n)||(l!==o&&l.push(f),o.push(d))}return o}var bSe=ySe,xSe=xu,wSe=bSe;function SSe(t,e){return t&&t.length?wSe(t,xSe(e)):[]}var _Se=SSe;const oL=Pr(_Se);function MK(t,e,n){return e===!0?oL(t,n):Sn(e)?oL(t,e):t}function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}var ASe=["ref"];function lL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ku(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lL(Object(n),!0).forEach(function(r){YS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LK(r.key),r)}}function jSe(t,e,n){return e&&cL(t.prototype,e),n&&cL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ESe(t,e,n){return e=gw(e),NSe(t,RK()?Reflect.construct(e,n||[],gw(t).constructor):e.apply(t,n))}function NSe(t,e){if(e&&(pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PSe(t)}function PSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RK=function(){return!!t})()}function gw(t){return gw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gw(t)}function kSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IN(t,e)}function IN(t,e){return IN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IN(t,e)}function YS(t,e,n){return e=LK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LK(t){var e=TSe(t,"string");return pg(e)=="symbol"?e:e+""}function TSe(t,e){if(pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function DSe(t,e){if(t==null)return{};var n=ISe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ISe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function OSe(t){return t.value}function MSe(t,e){if(be.isValidElement(t))return be.cloneElement(t,e);if(typeof t=="function")return be.createElement(t,e);e.ref;var n=DSe(e,ASe);return be.createElement(f3,n)}var uL=1,Bl=function(t){function e(){var n;CSe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=ESe(this,e,[].concat(i)),YS(n,"lastBoundingBox",{width:-1,height:-1}),n}return kSe(e,t),jSe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>uL||Math.abs(i.height-this.lastBoundingBox.height)>uL)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ku({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,l=i.margin,u=i.chartWidth,d=i.chartHeight,f,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var h=this.getBBoxSnapshot();f={left:((u||0)-h.width)/2}}else f=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var g=this.getBBoxSnapshot();p={top:((d||0)-g.height)/2}}else p=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ku(ku({},f),p)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=ku(ku({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return be.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){r.wrapperNode=h}},MSe(a,ku(ku({},this.props),{},{payload:MK(d,u,OSe)})))}}],[{key:"getWithHeight",value:function(r,i){var a=ku(ku({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&Pt(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(I.PureComponent);YS(Bl,"displayName","Legend");YS(Bl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var dL=zb,RSe=p3,LSe=ko,fL=dL?dL.isConcatSpreadable:void 0;function FSe(t){return LSe(t)||RSe(t)||!!(fL&&t&&t[fL])}var zSe=FSe,$Se=_K,BSe=zSe;function FK(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=BSe),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?FK(o,e-1,n,r,i):$Se(i,o):r||(i[i.length]=o)}return i}var zK=FK;function VSe(t){return function(e,n,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var l=s[t?o:++i];if(n(a[l],l,a)===!1)break}return e}}var USe=VSe,WSe=USe,HSe=WSe(),qSe=HSe,KSe=qSe,GSe=GS;function YSe(t,e){return t&&KSe(t,e,GSe)}var $K=YSe,XSe=$b;function QSe(t,e){return function(n,r){if(n==null)return n;if(!XSe(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=Object(n);(e?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var ZSe=QSe,JSe=$K,e_e=ZSe,t_e=e_e(JSe),y3=t_e,n_e=y3,r_e=$b;function i_e(t,e){var n=-1,r=r_e(t)?Array(t.length):[];return n_e(t,function(i,a,s){r[++n]=e(i,a,s)}),r}var BK=i_e;function a_e(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var s_e=a_e,hL=iv;function o_e(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=hL(t),s=e!==void 0,o=e===null,l=e===e,u=hL(e);if(!o&&!u&&!a&&t>e||a&&s&&l&&!o&&!u||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!u&&t<e||u&&n&&i&&!r&&!a||o&&n&&i||!s&&i||!l)return-1}return 0}var l_e=o_e,c_e=l_e;function u_e(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;++r<s;){var l=c_e(i[r],a[r]);if(l){if(r>=o)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var d_e=u_e,oC=r3,f_e=i3,h_e=xu,p_e=BK,m_e=s_e,g_e=jK,v_e=d_e,y_e=fv,b_e=ko;function x_e(t,e,n){e.length?e=oC(e,function(a){return b_e(a)?function(s){return f_e(s,a.length===1?a[0]:a)}:a}):e=[y_e];var r=-1;e=oC(e,g_e(h_e));var i=p_e(t,function(a,s,o){var l=oC(e,function(u){return u(a)});return{criteria:l,index:++r,value:a}});return m_e(i,function(a,s){return v_e(a,s,n)})}var w_e=x_e;function S_e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var __e=S_e,A_e=__e,pL=Math.max;function C_e(t,e,n){return e=pL(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=pL(r.length-e,0),s=Array(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),A_e(t,this,o)}}var j_e=C_e;function E_e(t){return function(){return t}}var N_e=E_e,P_e=vp,k_e=function(){try{var t=P_e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),VK=k_e,T_e=N_e,mL=VK,D_e=fv,I_e=mL?function(t,e){return mL(t,"toString",{configurable:!0,enumerable:!1,value:T_e(e),writable:!0})}:D_e,O_e=I_e,M_e=800,R_e=16,L_e=Date.now;function F_e(t){var e=0,n=0;return function(){var r=L_e(),i=R_e-(r-n);if(n=r,i>0){if(++e>=M_e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var z_e=F_e,$_e=O_e,B_e=z_e,V_e=B_e($_e),U_e=V_e,W_e=fv,H_e=j_e,q_e=U_e;function K_e(t,e){return q_e(H_e(t,e,W_e),t+"")}var G_e=K_e,Y_e=JT,X_e=$b,Q_e=m3,Z_e=Rf;function J_e(t,e,n){if(!Z_e(n))return!1;var r=typeof e;return(r=="number"?X_e(n)&&Q_e(e,n.length):r=="string"&&e in n)?Y_e(n[e],t):!1}var XS=J_e,eAe=zK,tAe=w_e,nAe=G_e,gL=XS,rAe=nAe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&gL(t,e[0],e[1])?e=[]:n>2&&gL(e[0],e[1],e[2])&&(e=[e[0]]),tAe(t,eAe(e,1),[])}),iAe=rAe;const b3=Pr(iAe);function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}function ON(){return ON=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ON.apply(this,arguments)}function aAe(t,e){return cAe(t)||lAe(t,e)||oAe(t,e)||sAe()}function sAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oAe(t,e){if(t){if(typeof t=="string")return vL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vL(t,e)}}function vL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function cAe(t){if(Array.isArray(t))return t}function yL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yL(Object(n),!0).forEach(function(r){uAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uAe(t,e,n){return e=dAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dAe(t){var e=fAe(t,"string");return Ty(e)=="symbol"?e:e+""}function fAe(t,e){if(Ty(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hAe(t){return Array.isArray(t)&&Ra(t[0])&&Ra(t[1])?t.join(" ~ "):t}var pAe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,l=e.labelStyle,u=l===void 0?{}:l,d=e.payload,f=e.formatter,p=e.itemSorter,h=e.wrapperClassName,g=e.labelClassName,m=e.label,v=e.labelFormatter,y=e.accessibilityLayer,b=y===void 0?!1:y,S=function(){if(d&&d.length){var M={padding:0,margin:0},L=(p?b3(d,p):d).map(function(V,K){if(V.type==="none")return null;var Z=lC({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},o),Y=V.formatter||f||hAe,H=V.value,ee=V.name,le=H,se=ee;if(Y&&le!=null&&se!=null){var $=Y(H,ee,V,K,d);if(Array.isArray($)){var X=aAe($,2);le=X[0],se=X[1]}else le=$}return be.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:Z},Ra(se)?be.createElement("span",{className:"recharts-tooltip-item-name"},se):null,Ra(se)?be.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,be.createElement("span",{className:"recharts-tooltip-item-value"},le),be.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return be.createElement("ul",{className:"recharts-tooltip-item-list",style:M},L)}return null},A=lC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),C=lC({margin:0},u),D=!wn(m),j=D?m:"",N=Rn("recharts-default-tooltip",h),P=Rn("recharts-tooltip-label",g);D&&v&&d!==void 0&&d!==null&&(j=v(m,d));var O=b?{role:"status","aria-live":"assertive"}:{};return be.createElement("div",ON({className:N,style:A},O),be.createElement("p",{className:P,style:C},be.isValidElement(j)?j:"".concat(j)),S())};function Dy(t){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dy(t)}function qx(t,e,n){return e=mAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mAe(t){var e=gAe(t,"string");return Dy(e)=="symbol"?e:e+""}function gAe(t,e){if(Dy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $v="recharts-tooltip-wrapper",vAe={visibility:"hidden"};function yAe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Rn($v,qx(qx(qx(qx({},"".concat($v,"-right"),Pt(n)&&e&&Pt(e.x)&&n>=e.x),"".concat($v,"-left"),Pt(n)&&e&&Pt(e.x)&&n<e.x),"".concat($v,"-bottom"),Pt(r)&&e&&Pt(e.y)&&r>=e.y),"".concat($v,"-top"),Pt(r)&&e&&Pt(e.y)&&r<e.y))}function bL(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(a&&Pt(a[r]))return a[r];var d=n[r]-o-i,f=n[r]+i;if(e[r])return s[r]?d:f;if(s[r]){var p=d,h=l[r];return p<h?Math.max(f,l[r]):Math.max(d,l[r])}var g=f+o,m=l[r]+u;return g>m?Math.max(d,l[r]):Math.max(f,l[r])}function bAe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function xAe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,u,d,f;return s.height>0&&s.width>0&&n?(d=bL({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=bL({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=bAe({translateX:d,translateY:f,useTranslate3d:o})):u=vAe,{cssProperties:u,cssClasses:yAe({translateX:d,translateY:f,coordinate:n})}}function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}function xL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xL(Object(n),!0).forEach(function(r){RN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WK(r.key),r)}}function _Ae(t,e,n){return e&&SAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function AAe(t,e,n){return e=vw(e),CAe(t,UK()?Reflect.construct(e,n||[],vw(t).constructor):e.apply(t,n))}function CAe(t,e){if(e&&(mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jAe(t)}function jAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UK=function(){return!!t})()}function vw(t){return vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vw(t)}function EAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MN(t,e)}function MN(t,e){return MN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MN(t,e)}function RN(t,e,n){return e=WK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WK(t){var e=NAe(t,"string");return mg(e)=="symbol"?e:e+""}function NAe(t,e){if(mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var SL=1,PAe=function(t){function e(){var n;wAe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=AAe(this,e,[].concat(i)),RN(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),RN(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return EAe(e,t),_Ae(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>SL||Math.abs(r.height-this.state.lastBoundingBox.height)>SL)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,p=i.isAnimationActive,h=i.offset,g=i.position,m=i.reverseDirection,v=i.useTranslate3d,y=i.viewBox,b=i.wrapperStyle,S=xAe({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:h,position:g,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:y}),A=S.cssClasses,C=S.cssProperties,D=wL(wL({transition:p&&a?"transform ".concat(o,"ms ").concat(l):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return be.createElement("div",{tabIndex:-1,className:A,style:D,ref:function(N){r.wrapperNode=N}},u)}}])}(I.PureComponent),kAe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},yd={isSsr:kAe()};function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}function _L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_L(Object(n),!0).forEach(function(r){x3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_L(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qK(r.key),r)}}function IAe(t,e,n){return e&&DAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OAe(t,e,n){return e=yw(e),MAe(t,HK()?Reflect.construct(e,n||[],yw(t).constructor):e.apply(t,n))}function MAe(t,e){if(e&&(gg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RAe(t)}function RAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HK=function(){return!!t})()}function yw(t){return yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yw(t)}function LAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LN(t,e)}function LN(t,e){return LN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LN(t,e)}function x3(t,e,n){return e=qK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qK(t){var e=FAe(t,"string");return gg(e)=="symbol"?e:e+""}function FAe(t,e){if(gg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function zAe(t){return t.dataKey}function $Ae(t,e){return be.isValidElement(t)?be.cloneElement(t,e):typeof t=="function"?be.createElement(t,e):be.createElement(pAe,e)}var xr=function(t){function e(){return TAe(this,e),OAe(this,e,arguments)}return LAe(e,t),IAe(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,p=i.isAnimationActive,h=i.offset,g=i.payload,m=i.payloadUniqBy,v=i.position,y=i.reverseDirection,b=i.useTranslate3d,S=i.viewBox,A=i.wrapperStyle,C=g??[];f&&C.length&&(C=MK(g.filter(function(j){return j.value!=null&&(j.hide!==!0||r.props.includeHidden)}),m,zAe));var D=C.length>0;return be.createElement(PAe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:p,active:a,coordinate:d,hasPayload:D,offset:h,position:v,reverseDirection:y,useTranslate3d:b,viewBox:S,wrapperStyle:A},$Ae(u,AL(AL({},this.props),{},{payload:C})))}}])}(I.PureComponent);x3(xr,"displayName","Tooltip");x3(xr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!yd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var BAe=bu,VAe=function(){return BAe.Date.now()},UAe=VAe,WAe=/\s/;function HAe(t){for(var e=t.length;e--&&WAe.test(t.charAt(e)););return e}var qAe=HAe,KAe=qAe,GAe=/^\s+/;function YAe(t){return t&&t.slice(0,KAe(t)+1).replace(GAe,"")}var XAe=YAe,QAe=XAe,CL=Rf,ZAe=iv,jL=NaN,JAe=/^[-+]0x[0-9a-f]+$/i,eCe=/^0b[01]+$/i,tCe=/^0o[0-7]+$/i,nCe=parseInt;function rCe(t){if(typeof t=="number")return t;if(ZAe(t))return jL;if(CL(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=CL(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=QAe(t);var n=eCe.test(t);return n||tCe.test(t)?nCe(t.slice(2),n?2:8):JAe.test(t)?jL:+t}var KK=rCe,iCe=Rf,cC=UAe,EL=KK,aCe="Expected a function",sCe=Math.max,oCe=Math.min;function lCe(t,e,n){var r,i,a,s,o,l,u=0,d=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(aCe);e=EL(e)||0,iCe(n)&&(d=!!n.leading,f="maxWait"in n,a=f?sCe(EL(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p);function h(D){var j=r,N=i;return r=i=void 0,u=D,s=t.apply(N,j),s}function g(D){return u=D,o=setTimeout(y,e),d?h(D):s}function m(D){var j=D-l,N=D-u,P=e-j;return f?oCe(P,a-N):P}function v(D){var j=D-l,N=D-u;return l===void 0||j>=e||j<0||f&&N>=a}function y(){var D=cC();if(v(D))return b(D);o=setTimeout(y,m(D))}function b(D){return o=void 0,p&&r?h(D):(r=i=void 0,s)}function S(){o!==void 0&&clearTimeout(o),u=0,r=l=i=o=void 0}function A(){return o===void 0?s:b(cC())}function C(){var D=cC(),j=v(D);if(r=arguments,i=this,l=D,j){if(o===void 0)return g(l);if(f)return clearTimeout(o),o=setTimeout(y,e),h(l)}return o===void 0&&(o=setTimeout(y,e)),s}return C.cancel=S,C.flush=A,C}var cCe=lCe,uCe=cCe,dCe=Rf,fCe="Expected a function";function hCe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(fCe);return dCe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),uCe(t,e,{leading:r,maxWait:e,trailing:i})}var pCe=hCe;const GK=Pr(pCe);function Iy(t){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(t)}function NL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NL(Object(n),!0).forEach(function(r){mCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mCe(t,e,n){return e=gCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gCe(t){var e=vCe(t,"string");return Iy(e)=="symbol"?e:e+""}function vCe(t,e){if(Iy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Iy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yCe(t,e){return SCe(t)||wCe(t,e)||xCe(t,e)||bCe()}function bCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xCe(t,e){if(t){if(typeof t=="string")return PL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PL(t,e)}}function PL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function SCe(t){if(Array.isArray(t))return t}var ki=I.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,l=o===void 0?"100%":o,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,p=t.maxHeight,h=t.children,g=t.debounce,m=g===void 0?0:g,v=t.id,y=t.className,b=t.onResize,S=t.style,A=S===void 0?{}:S,C=I.useRef(null),D=I.useRef();D.current=b,I.useImperativeHandle(e,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var j=I.useState({containerWidth:i.width,containerHeight:i.height}),N=yCe(j,2),P=N[0],O=N[1],T=I.useCallback(function(L,V){O(function(K){var Z=Math.round(L),Y=Math.round(V);return K.containerWidth===Z&&K.containerHeight===Y?K:{containerWidth:Z,containerHeight:Y}})},[]);I.useEffect(function(){var L=function(ee){var le,se=ee[0].contentRect,$=se.width,X=se.height;T($,X),(le=D.current)===null||le===void 0||le.call(D,$,X)};m>0&&(L=GK(L,m,{trailing:!0,leading:!1}));var V=new ResizeObserver(L),K=C.current.getBoundingClientRect(),Z=K.width,Y=K.height;return T(Z,Y),V.observe(C.current),function(){V.disconnect()}},[T,m]);var M=I.useMemo(function(){var L=P.containerWidth,V=P.containerHeight;if(L<0||V<0)return null;wc(Ah(s)||Ah(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),wc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var K=Ah(s)?L:s,Z=Ah(l)?V:l;n&&n>0&&(K?Z=K/n:Z&&(K=Z*n),p&&Z>p&&(Z=p)),wc(K>0||Z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,K,Z,s,l,d,f,n);var Y=!Array.isArray(h)&&Xu(h.type).endsWith("Chart");return be.Children.map(h,function(H){return be.isValidElement(H)?I.cloneElement(H,Kx({width:K,height:Z},Y?{style:Kx({height:"100%",width:"100%",maxHeight:Z,maxWidth:K},H.props.style)}:{})):H})},[n,h,l,p,f,d,P,s]);return be.createElement("div",{id:v?"".concat(v):void 0,className:Rn("recharts-responsive-container",y),style:Kx(Kx({},A),{},{width:s,height:l,minWidth:d,minHeight:f,maxHeight:p}),ref:C},M)}),hl=function(e){return null};hl.displayName="Cell";function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function kL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kL(Object(n),!0).forEach(function(r){_Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ce(t,e,n){return e=ACe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ACe(t){var e=CCe(t,"string");return Oy(e)=="symbol"?e:e+""}function CCe(t,e){if(Oy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Oy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ip={widthCache:{},cacheCount:0},jCe=2e3,ECe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},TL="recharts_measurement_span";function NCe(t){var e=FN({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var D0=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||yd.isSsr)return{width:0,height:0};var r=NCe(n),i=JSON.stringify({text:e,copyStyle:r});if(Ip.widthCache[i])return Ip.widthCache[i];try{var a=document.getElementById(TL);a||(a=document.createElement("span"),a.setAttribute("id",TL),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=FN(FN({},ECe),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return Ip.widthCache[i]=l,++Ip.cacheCount>jCe&&(Ip.cacheCount=0,Ip.widthCache={}),l}catch{return{width:0,height:0}}},PCe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function My(t){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(t)}function bw(t,e){return ICe(t)||DCe(t,e)||TCe(t,e)||kCe()}function kCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TCe(t,e){if(t){if(typeof t=="string")return DL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DL(t,e)}}function DL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function ICe(t){if(Array.isArray(t))return t}function OCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RCe(r.key),r)}}function MCe(t,e,n){return e&&IL(t.prototype,e),n&&IL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RCe(t){var e=LCe(t,"string");return My(e)=="symbol"?e:e+""}function LCe(t,e){if(My(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(My(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var OL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ML=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FCe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,zCe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,YK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},$Ce=Object.keys(YK),hm="NaN";function BCe(t,e){return t*YK[e]}var Gx=function(){function t(e,n){OCe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!FCe.test(n)&&(this.num=NaN,this.unit=""),$Ce.includes(n)&&(this.num=BCe(e,n),this.unit="px")}return MCe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=zCe.exec(n))!==null&&r!==void 0?r:[],a=bw(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])}();function XK(t){if(t.includes(hm))return hm;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=OL.exec(e))!==null&&n!==void 0?n:[],i=bw(r,4),a=i[1],s=i[2],o=i[3],l=Gx.parse(a??""),u=Gx.parse(o??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return hm;e=e.replace(OL,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,p=(f=ML.exec(e))!==null&&f!==void 0?f:[],h=bw(p,4),g=h[1],m=h[2],v=h[3],y=Gx.parse(g??""),b=Gx.parse(v??""),S=m==="+"?y.add(b):y.subtract(b);if(S.isNaN())return hm;e=e.replace(ML,S.toString())}return e}var RL=/\(([^()]*)\)/;function VCe(t){for(var e=t;e.includes("(");){var n=RL.exec(e),r=bw(n,2),i=r[1];e=e.replace(RL,XK(i))}return e}function UCe(t){var e=t.replace(/\s+/g,"");return e=VCe(e),e=XK(e),e}function WCe(t){try{return UCe(t)}catch{return hm}}function uC(t){var e=WCe(t.slice(5,-1));return e===hm?"":e}var HCe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],qCe=["dx","dy","angle","className","breakAll"];function zN(){return zN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zN.apply(this,arguments)}function LL(t,e){if(t==null)return{};var n=KCe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function FL(t,e){return QCe(t)||XCe(t,e)||YCe(t,e)||GCe()}function GCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YCe(t,e){if(t){if(typeof t=="string")return zL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zL(t,e)}}function zL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function XCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function QCe(t){if(Array.isArray(t))return t}var QK=/[ \f\n\r\t\v\u2028\u2029]+/,ZK=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];wn(n)||(r?a=n.toString().split(""):a=n.toString().split(QK));var s=a.map(function(l){return{word:l,width:D0(l,i).width}}),o=r?0:D0(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},ZCe=function(e,n,r,i,a){var s=e.maxLines,o=e.children,l=e.style,u=e.breakAll,d=Pt(s),f=o,p=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce(function(Z,Y){var H=Y.word,ee=Y.width,le=Z[Z.length-1];if(le&&(i==null||a||le.width+ee+r<Number(i)))le.words.push(H),le.width+=ee+r;else{var se={words:[H],width:ee};Z.push(se)}return Z},[])},h=p(n),g=function(K){return K.reduce(function(Z,Y){return Z.width>Y.width?Z:Y})};if(!d)return h;for(var m="…",v=function(K){var Z=f.slice(0,K),Y=ZK({breakAll:u,style:l,children:Z+m}).wordsWithComputedWidth,H=p(Y),ee=H.length>s||g(H).width>Number(i);return[ee,H]},y=0,b=f.length-1,S=0,A;y<=b&&S<=f.length-1;){var C=Math.floor((y+b)/2),D=C-1,j=v(D),N=FL(j,2),P=N[0],O=N[1],T=v(C),M=FL(T,1),L=M[0];if(!P&&!L&&(y=C+1),P&&L&&(b=C-1),!P&&L){A=O;break}S++}return A||h},$L=function(e){var n=wn(e)?[]:e.toString().split(QK);return[{words:n}]},JCe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!yd.isSsr){var l,u,d=ZK({breakAll:s,children:i,style:a});if(d){var f=d.wordsWithComputedWidth,p=d.spaceWidth;l=f,u=p}else return $L(i);return ZCe({breakAll:s,children:i,maxLines:o,style:a},l,u,n,r)}return $L(i)},BL="#808080",Zh=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,l=e.capHeight,u=l===void 0?"0.71em":l,d=e.scaleToFit,f=d===void 0?!1:d,p=e.textAnchor,h=p===void 0?"start":p,g=e.verticalAnchor,m=g===void 0?"end":g,v=e.fill,y=v===void 0?BL:v,b=LL(e,HCe),S=I.useMemo(function(){return JCe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),A=b.dx,C=b.dy,D=b.angle,j=b.className,N=b.breakAll,P=LL(b,qCe);if(!Ra(r)||!Ra(a))return null;var O=r+(Pt(A)?A:0),T=a+(Pt(C)?C:0),M;switch(m){case"start":M=uC("calc(".concat(u,")"));break;case"middle":M=uC("calc(".concat((S.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:M=uC("calc(".concat(S.length-1," * -").concat(o,")"));break}var L=[];if(f){var V=S[0].width,K=b.width;L.push("scale(".concat((Pt(K)?K/V:1)/V,")"))}return D&&L.push("rotate(".concat(D,", ").concat(O,", ").concat(T,")")),L.length&&(P.transform=L.join(" ")),be.createElement("text",zN({},un(P,!0),{x:O,y:T,className:Rn("recharts-text",j),textAnchor:h,fill:y.includes("url")?BL:y}),S.map(function(Z,Y){var H=Z.words.join(N?"":" ");return be.createElement("tspan",{x:O,dy:Y===0?M:o,key:"".concat(H,"-").concat(Y)},H)}))};function hf(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function eje(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function w3(t){let e,n,r;t.length!==2?(e=hf,n=(o,l)=>hf(t(o),l),r=(o,l)=>t(o)-l):(e=t===hf||t===eje?t:tje,n=t,r=t);function i(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){const f=i(o,l,u,d-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function tje(){return 0}function JK(t){return t===null?NaN:+t}function*nje(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const rje=w3(hf),Bb=rje.right;w3(JK).center;class VL extends Map{constructor(e,n=sje){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(UL(this,e))}has(e){return super.has(UL(this,e))}set(e,n){return super.set(ije(this,e),n)}delete(e){return super.delete(aje(this,e))}}function UL({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ije({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function aje({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function sje(t){return t!==null&&typeof t=="object"?t.valueOf():t}function oje(t=hf){if(t===hf)return eG;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function eG(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const lje=Math.sqrt(50),cje=Math.sqrt(10),uje=Math.sqrt(2);function xw(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=lje?10:a>=cje?5:a>=uje?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?xw(t,e,n*2):[o,l,u]}function $N(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?xw(e,t,n):xw(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function BN(t,e,n){return e=+e,t=+t,n=+n,xw(t,e,n)[2]}function VN(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?BN(e,t,n):BN(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function WL(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function HL(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function tG(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?eG:oje(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,d=Math.log(l),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*f/l+p)),g=Math.min(r,Math.floor(e+(l-u)*f/l+p));tG(t,e,h,g,i)}const a=t[e];let s=n,o=r;for(Bv(t,n,e),i(t[r],a)>0&&Bv(t,n,r);s<o;){for(Bv(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Bv(t,n,o):(++o,Bv(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Bv(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function dje(t,e,n){if(t=Float64Array.from(nje(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return HL(t);if(e>=1)return WL(t);var r,i=(r-1)*e,a=Math.floor(i),s=WL(tG(t,a).subarray(0,a+1)),o=HL(t.subarray(a+1));return s+(o-s)*(i-a)}}function fje(t,e,n=JK){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function hje(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Xl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function bd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const UN=Symbol("implicit");function S3(){var t=new VL,e=[],n=[],r=UN;function i(a){let s=t.get(a);if(s===void 0){if(r!==UN)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new VL;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return S3(e,n).unknown(r)},Xl.apply(i,arguments),i}function Ry(){var t=S3().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,u=0,d=.5;delete t.unknown;function f(){var p=e().length,h=i<r,g=h?i:r,m=h?r:i;a=(m-g)/Math.max(1,p-l+u*2),o&&(a=Math.floor(a)),g+=(m-g-a*(p-l))*d,s=a*(1-l),o&&(g=Math.round(g),s=Math.round(s));var v=hje(p).map(function(y){return g+a*y});return n(h?v.reverse():v)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(p){return arguments.length?(o=!!p,f()):o},t.padding=function(p){return arguments.length?(l=Math.min(1,u=+p),f()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),f()):l},t.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},t.copy=function(){return Ry(e(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(d)},Xl.apply(f(),arguments)}function nG(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return nG(e())},t}function I0(){return nG(Ry.apply(null,arguments).paddingInner(1))}function _3(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function rG(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Vb(){}var Ly=.7,ww=1/Ly,Tm="\\s*([+-]?\\d+)\\s*",Fy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pje=/^#([0-9a-f]{3,8})$/,mje=new RegExp(`^rgb\\(${Tm},${Tm},${Tm}\\)$`),gje=new RegExp(`^rgb\\(${cu},${cu},${cu}\\)$`),vje=new RegExp(`^rgba\\(${Tm},${Tm},${Tm},${Fy}\\)$`),yje=new RegExp(`^rgba\\(${cu},${cu},${cu},${Fy}\\)$`),bje=new RegExp(`^hsl\\(${Fy},${cu},${cu}\\)$`),xje=new RegExp(`^hsla\\(${Fy},${cu},${cu},${Fy}\\)$`),qL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_3(Vb,zy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:KL,formatHex:KL,formatHex8:wje,formatHsl:Sje,formatRgb:GL,toString:GL});function KL(){return this.rgb().formatHex()}function wje(){return this.rgb().formatHex8()}function Sje(){return iG(this).formatHsl()}function GL(){return this.rgb().formatRgb()}function zy(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pje.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?YL(e):n===3?new bo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Yx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Yx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=mje.exec(t))?new bo(e[1],e[2],e[3],1):(e=gje.exec(t))?new bo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vje.exec(t))?Yx(e[1],e[2],e[3],e[4]):(e=yje.exec(t))?Yx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bje.exec(t))?ZL(e[1],e[2]/100,e[3]/100,1):(e=xje.exec(t))?ZL(e[1],e[2]/100,e[3]/100,e[4]):qL.hasOwnProperty(t)?YL(qL[t]):t==="transparent"?new bo(NaN,NaN,NaN,0):null}function YL(t){return new bo(t>>16&255,t>>8&255,t&255,1)}function Yx(t,e,n,r){return r<=0&&(t=e=n=NaN),new bo(t,e,n,r)}function _je(t){return t instanceof Vb||(t=zy(t)),t?(t=t.rgb(),new bo(t.r,t.g,t.b,t.opacity)):new bo}function WN(t,e,n,r){return arguments.length===1?_je(t):new bo(t,e,n,r??1)}function bo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}_3(bo,WN,rG(Vb,{brighter(t){return t=t==null?ww:Math.pow(ww,t),new bo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ly:Math.pow(Ly,t),new bo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bo(Fh(this.r),Fh(this.g),Fh(this.b),Sw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XL,formatHex:XL,formatHex8:Aje,formatRgb:QL,toString:QL}));function XL(){return`#${Ch(this.r)}${Ch(this.g)}${Ch(this.b)}`}function Aje(){return`#${Ch(this.r)}${Ch(this.g)}${Ch(this.b)}${Ch((isNaN(this.opacity)?1:this.opacity)*255)}`}function QL(){const t=Sw(this.opacity);return`${t===1?"rgb(":"rgba("}${Fh(this.r)}, ${Fh(this.g)}, ${Fh(this.b)}${t===1?")":`, ${t})`}`}function Sw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Fh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ch(t){return t=Fh(t),(t<16?"0":"")+t.toString(16)}function ZL(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new yc(t,e,n,r)}function iG(t){if(t instanceof yc)return new yc(t.h,t.s,t.l,t.opacity);if(t instanceof Vb||(t=zy(t)),!t)return new yc;if(t instanceof yc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new yc(s,o,l,t.opacity)}function Cje(t,e,n,r){return arguments.length===1?iG(t):new yc(t,e,n,r??1)}function yc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}_3(yc,Cje,rG(Vb,{brighter(t){return t=t==null?ww:Math.pow(ww,t),new yc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ly:Math.pow(Ly,t),new yc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new bo(dC(t>=240?t-240:t+120,i,r),dC(t,i,r),dC(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new yc(JL(this.h),Xx(this.s),Xx(this.l),Sw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Sw(this.opacity);return`${t===1?"hsl(":"hsla("}${JL(this.h)}, ${Xx(this.s)*100}%, ${Xx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function JL(t){return t=(t||0)%360,t<0?t+360:t}function Xx(t){return Math.max(0,Math.min(1,t||0))}function dC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const A3=t=>()=>t;function jje(t,e){return function(n){return t+n*e}}function Eje(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Nje(t){return(t=+t)==1?aG:function(e,n){return n-e?Eje(e,n,t):A3(isNaN(e)?n:e)}}function aG(t,e){var n=e-t;return n?jje(t,n):A3(isNaN(t)?e:t)}const e8=function t(e){var n=Nje(e);function r(i,a){var s=n((i=WN(i)).r,(a=WN(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),u=aG(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function Pje(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function kje(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Tje(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=hv(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Dje(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function _w(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ije(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=hv(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var HN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fC=new RegExp(HN.source,"g");function Oje(t){return function(){return t}}function Mje(t){return function(e){return t(e)+""}}function Rje(t,e){var n=HN.lastIndex=fC.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=HN.exec(t))&&(i=fC.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:_w(r,i)})),n=fC.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Mje(l[0].x):Oje(e):(e=l.length,function(u){for(var d=0,f;d<e;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function hv(t,e){var n=typeof e,r;return e==null||n==="boolean"?A3(e):(n==="number"?_w:n==="string"?(r=zy(e))?(e=r,e8):Rje:e instanceof zy?e8:e instanceof Date?Dje:kje(e)?Pje:Array.isArray(e)?Tje:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ije:_w)(t,e)}function C3(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Lje(t,e){e===void 0&&(e=t,t=hv);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function Fje(t){return function(){return t}}function Aw(t){return+t}var t8=[0,1];function no(t){return t}function qN(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Fje(isNaN(e)?NaN:.5)}function zje(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function $je(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=qN(i,r),a=n(s,a)):(r=qN(r,i),a=n(a,s)),function(o){return a(r(o))}}function Bje(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=qN(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=Bb(t,o,1,r)-1;return a[l](i[l](o))}}function Ub(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function QS(){var t=t8,e=t8,n=hv,r,i,a,s=no,o,l,u;function d(){var p=Math.min(t.length,e.length);return s!==no&&(s=zje(t[0],t[p-1])),o=p>2?Bje:$je,l=u=null,f}function f(p){return p==null||isNaN(p=+p)?a:(l||(l=o(t.map(r),e,n)))(r(s(p)))}return f.invert=function(p){return s(i((u||(u=o(e,t.map(r),_w)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,Aw),d()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),n=C3,d()},f.clamp=function(p){return arguments.length?(s=p?!0:no,d()):s!==no},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,h){return r=p,i=h,d()}}function j3(){return QS()(no,no)}function Vje(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Cw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function vg(t){return t=Cw(Math.abs(t)),t?t[1]:NaN}function Uje(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Wje(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Hje=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $y(t){if(!(e=Hje.exec(t)))throw new Error("invalid format: "+t);var e;return new E3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}$y.prototype=E3.prototype;function E3(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}E3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qje(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var sG;function Kje(t,e){var n=Cw(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(sG=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Cw(t,Math.max(0,e+a-1))[0]}function n8(t,e){var n=Cw(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const r8={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Vje,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>n8(t*100,e),r:n8,s:Kje,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function i8(t){return t}var a8=Array.prototype.map,s8=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Gje(t){var e=t.grouping===void 0||t.thousands===void 0?i8:Uje(a8.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?i8:Wje(a8.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=$y(f);var p=f.fill,h=f.align,g=f.sign,m=f.symbol,v=f.zero,y=f.width,b=f.comma,S=f.precision,A=f.trim,C=f.type;C==="n"?(b=!0,C="g"):r8[C]||(S===void 0&&(S=12),A=!0,C="g"),(v||p==="0"&&h==="=")&&(v=!0,p="0",h="=");var D=m==="$"?n:m==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",j=m==="$"?r:/[%p]/.test(C)?s:"",N=r8[C],P=/[defgprs%]/.test(C);S=S===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function O(T){var M=D,L=j,V,K,Z;if(C==="c")L=N(T)+L,T="";else{T=+T;var Y=T<0||1/T<0;if(T=isNaN(T)?l:N(Math.abs(T),S),A&&(T=qje(T)),Y&&+T==0&&g!=="+"&&(Y=!1),M=(Y?g==="("?g:o:g==="-"||g==="("?"":g)+M,L=(C==="s"?s8[8+sG/3]:"")+L+(Y&&g==="("?")":""),P){for(V=-1,K=T.length;++V<K;)if(Z=T.charCodeAt(V),48>Z||Z>57){L=(Z===46?i+T.slice(V+1):T.slice(V))+L,T=T.slice(0,V);break}}}b&&!v&&(T=e(T,1/0));var H=M.length+T.length+L.length,ee=H<y?new Array(y-H+1).join(p):"";switch(b&&v&&(T=e(ee+T,ee.length?y-L.length:1/0),ee=""),h){case"<":T=M+T+L+ee;break;case"=":T=M+ee+T+L;break;case"^":T=ee.slice(0,H=ee.length>>1)+M+T+L+ee.slice(H);break;default:T=ee+M+T+L;break}return a(T)}return O.toString=function(){return f+""},O}function d(f,p){var h=u((f=$y(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(vg(p)/3)))*3,m=Math.pow(10,-g),v=s8[8+g/3];return function(y){return h(m*y)+v}}return{format:u,formatPrefix:d}}var Qx,N3,oG;Yje({thousands:",",grouping:[3],currency:["$",""]});function Yje(t){return Qx=Gje(t),N3=Qx.format,oG=Qx.formatPrefix,Qx}function Xje(t){return Math.max(0,-vg(Math.abs(t)))}function Qje(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vg(e)/3)))*3-vg(Math.abs(t)))}function Zje(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,vg(e)-vg(t))+1}function lG(t,e,n,r){var i=VN(t,e,n),a;switch(r=$y(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Qje(i,s))&&(r.precision=a),oG(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Zje(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Xje(i))&&(r.precision=a-(r.type==="%")*2);break}}return N3(r)}function Ff(t){var e=t.domain;return t.ticks=function(n){var r=e();return $N(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return lG(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=BN(s,o,n),u===l)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function jw(){var t=j3();return t.copy=function(){return Ub(t,jw())},Xl.apply(t,arguments),Ff(t)}function cG(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Aw),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return cG(t).unknown(e)},t=arguments.length?Array.from(t,Aw):[0,1],Ff(n)}function uG(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function o8(t){return Math.log(t)}function l8(t){return Math.exp(t)}function Jje(t){return-Math.log(-t)}function eEe(t){return-Math.exp(-t)}function tEe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function nEe(t){return t===10?tEe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function rEe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function c8(t){return(e,n)=>-t(-e,n)}function P3(t){const e=t(o8,l8),n=e.domain;let r=10,i,a;function s(){return i=rEe(r),a=nEe(r),n()[0]<0?(i=c8(i),a=c8(a),t(Jje,eEe)):t(o8,l8),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const l=n();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=i(u),h=i(d),g,m;const v=o==null?10:+o;let y=[];if(!(r%1)&&h-p<v){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(g=1;g<r;++g)if(m=p<0?g/a(-p):g*a(p),!(m<u)){if(m>d)break;y.push(m)}}else for(;p<=h;++p)for(g=r-1;g>=1;--g)if(m=p>0?g/a(-p):g*a(p),!(m<u)){if(m>d)break;y.push(m)}y.length*2<v&&(y=$N(u,d,v))}else y=$N(p,h,Math.min(h-p,v)).map(a);return f?y.reverse():y},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=$y(l)).precision==null&&(l.trim=!0),l=N3(l)),o===1/0)return l;const u=Math.max(1,r*o/e.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?l(d):""}},e.nice=()=>n(uG(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function dG(){const t=P3(QS()).domain([1,10]);return t.copy=()=>Ub(t,dG()).base(t.base()),Xl.apply(t,arguments),t}function u8(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function d8(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function k3(t){var e=1,n=t(u8(e),d8(e));return n.constant=function(r){return arguments.length?t(u8(e=+r),d8(e)):e},Ff(n)}function fG(){var t=k3(QS());return t.copy=function(){return Ub(t,fG()).constant(t.constant())},Xl.apply(t,arguments)}function f8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function iEe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function aEe(t){return t<0?-t*t:t*t}function T3(t){var e=t(no,no),n=1;function r(){return n===1?t(no,no):n===.5?t(iEe,aEe):t(f8(n),f8(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ff(e)}function D3(){var t=T3(QS());return t.copy=function(){return Ub(t,D3()).exponent(t.exponent())},Xl.apply(t,arguments),t}function sEe(){return D3.apply(null,arguments).exponent(.5)}function h8(t){return Math.sign(t)*t*t}function oEe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function hG(){var t=j3(),e=[0,1],n=!1,r;function i(a){var s=oEe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(h8(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Aw)).map(h8)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return hG(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Xl.apply(i,arguments),Ff(i)}function pG(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=fje(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Bb(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(hf),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return pG().domain(t).range(e).unknown(r)},Xl.apply(a,arguments)}function mG(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[Bb(r,l,0,n)]:a}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return mG().domain([t,e]).range(i).unknown(a)},Xl.apply(Ff(s),arguments)}function gG(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Bb(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return gG().domain(t).range(e).unknown(n)},Xl.apply(i,arguments)}const hC=new Date,pC=new Date;function La(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return l},i.filter=a=>La(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(hC.setTime(+a),pC.setTime(+s),t(hC),t(pC),Math.floor(n(hC,pC))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Ew=La(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ew.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?La(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ew);Ew.range;const Uu=1e3,zl=Uu*60,Wu=zl*60,od=Wu*24,I3=od*7,p8=od*30,mC=od*365,jh=La(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Uu)},(t,e)=>(e-t)/Uu,t=>t.getUTCSeconds());jh.range;const O3=La(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Uu)},(t,e)=>{t.setTime(+t+e*zl)},(t,e)=>(e-t)/zl,t=>t.getMinutes());O3.range;const M3=La(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*zl)},(t,e)=>(e-t)/zl,t=>t.getUTCMinutes());M3.range;const R3=La(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Uu-t.getMinutes()*zl)},(t,e)=>{t.setTime(+t+e*Wu)},(t,e)=>(e-t)/Wu,t=>t.getHours());R3.range;const L3=La(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Wu)},(t,e)=>(e-t)/Wu,t=>t.getUTCHours());L3.range;const Wb=La(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*zl)/od,t=>t.getDate()-1);Wb.range;const ZS=La(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/od,t=>t.getUTCDate()-1);ZS.range;const vG=La(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/od,t=>Math.floor(t/od));vG.range;function yp(t){return La(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*zl)/I3)}const JS=yp(0),Nw=yp(1),lEe=yp(2),cEe=yp(3),yg=yp(4),uEe=yp(5),dEe=yp(6);JS.range;Nw.range;lEe.range;cEe.range;yg.range;uEe.range;dEe.range;function bp(t){return La(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/I3)}const e_=bp(0),Pw=bp(1),fEe=bp(2),hEe=bp(3),bg=bp(4),pEe=bp(5),mEe=bp(6);e_.range;Pw.range;fEe.range;hEe.range;bg.range;pEe.range;mEe.range;const F3=La(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());F3.range;const z3=La(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());z3.range;const ld=La(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ld.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:La(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ld.range;const cd=La(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());cd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:La(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});cd.range;function yG(t,e,n,r,i,a){const s=[[jh,1,Uu],[jh,5,5*Uu],[jh,15,15*Uu],[jh,30,30*Uu],[a,1,zl],[a,5,5*zl],[a,15,15*zl],[a,30,30*zl],[i,1,Wu],[i,3,3*Wu],[i,6,6*Wu],[i,12,12*Wu],[r,1,od],[r,2,2*od],[n,1,I3],[e,1,p8],[e,3,3*p8],[t,1,mC]];function o(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:l(u,d,f),g=h?h.range(u,+d+1):[];return p?g.reverse():g}function l(u,d,f){const p=Math.abs(d-u)/f,h=w3(([,,v])=>v).right(s,p);if(h===s.length)return t.every(VN(u/mC,d/mC,f));if(h===0)return Ew.every(Math.max(VN(u,d,f),1));const[g,m]=s[p/s[h-1][2]<s[h][2]/p?h-1:h];return g.every(m)}return[o,l]}const[gEe,vEe]=yG(cd,z3,e_,vG,L3,M3),[yEe,bEe]=yG(ld,F3,JS,Wb,R3,O3);function gC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function vC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Vv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function xEe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,u=Uv(i),d=Wv(i),f=Uv(a),p=Wv(a),h=Uv(s),g=Wv(s),m=Uv(o),v=Wv(o),y=Uv(l),b=Wv(l),S={a:Y,A:H,b:ee,B:le,c:null,d:x8,e:x8,f:UEe,g:JEe,G:tNe,H:$Ee,I:BEe,j:VEe,L:bG,m:WEe,M:HEe,p:se,q:$,Q:_8,s:A8,S:qEe,u:KEe,U:GEe,V:YEe,w:XEe,W:QEe,x:null,X:null,y:ZEe,Y:eNe,Z:nNe,"%":S8},A={a:X,A:te,b:oe,B:me,c:null,d:w8,e:w8,f:sNe,g:gNe,G:yNe,H:rNe,I:iNe,j:aNe,L:wG,m:oNe,M:lNe,p:_e,q:Ce,Q:_8,s:A8,S:cNe,u:uNe,U:dNe,V:fNe,w:hNe,W:pNe,x:null,X:null,y:mNe,Y:vNe,Z:bNe,"%":S8},C={a:O,A:T,b:M,B:L,c:V,d:y8,e:y8,f:REe,g:v8,G:g8,H:b8,I:b8,j:DEe,L:MEe,m:TEe,M:IEe,p:P,q:kEe,Q:FEe,s:zEe,S:OEe,u:CEe,U:jEe,V:EEe,w:AEe,W:NEe,x:K,X:Z,y:v8,Y:g8,Z:PEe,"%":LEe};S.x=D(n,S),S.X=D(r,S),S.c=D(e,S),A.x=D(n,A),A.X=D(r,A),A.c=D(e,A);function D(fe,xe){return function(Se){var ie=[],He=-1,Fe=0,he=fe.length,Ye,mt,vt;for(Se instanceof Date||(Se=new Date(+Se));++He<he;)fe.charCodeAt(He)===37&&(ie.push(fe.slice(Fe,He)),(mt=m8[Ye=fe.charAt(++He)])!=null?Ye=fe.charAt(++He):mt=Ye==="e"?" ":"0",(vt=xe[Ye])&&(Ye=vt(Se,mt)),ie.push(Ye),Fe=He+1);return ie.push(fe.slice(Fe,He)),ie.join("")}}function j(fe,xe){return function(Se){var ie=Vv(1900,void 0,1),He=N(ie,fe,Se+="",0),Fe,he;if(He!=Se.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(xe&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(Fe=vC(Vv(ie.y,0,1)),he=Fe.getUTCDay(),Fe=he>4||he===0?Pw.ceil(Fe):Pw(Fe),Fe=ZS.offset(Fe,(ie.V-1)*7),ie.y=Fe.getUTCFullYear(),ie.m=Fe.getUTCMonth(),ie.d=Fe.getUTCDate()+(ie.w+6)%7):(Fe=gC(Vv(ie.y,0,1)),he=Fe.getDay(),Fe=he>4||he===0?Nw.ceil(Fe):Nw(Fe),Fe=Wb.offset(Fe,(ie.V-1)*7),ie.y=Fe.getFullYear(),ie.m=Fe.getMonth(),ie.d=Fe.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),he="Z"in ie?vC(Vv(ie.y,0,1)).getUTCDay():gC(Vv(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(he+5)%7:ie.w+ie.U*7-(he+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,vC(ie)):gC(ie)}}function N(fe,xe,Se,ie){for(var He=0,Fe=xe.length,he=Se.length,Ye,mt;He<Fe;){if(ie>=he)return-1;if(Ye=xe.charCodeAt(He++),Ye===37){if(Ye=xe.charAt(He++),mt=C[Ye in m8?xe.charAt(He++):Ye],!mt||(ie=mt(fe,Se,ie))<0)return-1}else if(Ye!=Se.charCodeAt(ie++))return-1}return ie}function P(fe,xe,Se){var ie=u.exec(xe.slice(Se));return ie?(fe.p=d.get(ie[0].toLowerCase()),Se+ie[0].length):-1}function O(fe,xe,Se){var ie=h.exec(xe.slice(Se));return ie?(fe.w=g.get(ie[0].toLowerCase()),Se+ie[0].length):-1}function T(fe,xe,Se){var ie=f.exec(xe.slice(Se));return ie?(fe.w=p.get(ie[0].toLowerCase()),Se+ie[0].length):-1}function M(fe,xe,Se){var ie=y.exec(xe.slice(Se));return ie?(fe.m=b.get(ie[0].toLowerCase()),Se+ie[0].length):-1}function L(fe,xe,Se){var ie=m.exec(xe.slice(Se));return ie?(fe.m=v.get(ie[0].toLowerCase()),Se+ie[0].length):-1}function V(fe,xe,Se){return N(fe,e,xe,Se)}function K(fe,xe,Se){return N(fe,n,xe,Se)}function Z(fe,xe,Se){return N(fe,r,xe,Se)}function Y(fe){return s[fe.getDay()]}function H(fe){return a[fe.getDay()]}function ee(fe){return l[fe.getMonth()]}function le(fe){return o[fe.getMonth()]}function se(fe){return i[+(fe.getHours()>=12)]}function $(fe){return 1+~~(fe.getMonth()/3)}function X(fe){return s[fe.getUTCDay()]}function te(fe){return a[fe.getUTCDay()]}function oe(fe){return l[fe.getUTCMonth()]}function me(fe){return o[fe.getUTCMonth()]}function _e(fe){return i[+(fe.getUTCHours()>=12)]}function Ce(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var xe=D(fe+="",S);return xe.toString=function(){return fe},xe},parse:function(fe){var xe=j(fe+="",!1);return xe.toString=function(){return fe},xe},utcFormat:function(fe){var xe=D(fe+="",A);return xe.toString=function(){return fe},xe},utcParse:function(fe){var xe=j(fe+="",!0);return xe.toString=function(){return fe},xe}}}var m8={"-":"",_:" ",0:"0"},Ya=/^\s*\d+/,wEe=/^%/,SEe=/[\\^$*+?|[\]().{}]/g;function wr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function _Ee(t){return t.replace(SEe,"\\$&")}function Uv(t){return new RegExp("^(?:"+t.map(_Ee).join("|")+")","i")}function Wv(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function AEe(t,e,n){var r=Ya.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function CEe(t,e,n){var r=Ya.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function jEe(t,e,n){var r=Ya.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function EEe(t,e,n){var r=Ya.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function NEe(t,e,n){var r=Ya.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function g8(t,e,n){var r=Ya.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function v8(t,e,n){var r=Ya.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function PEe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function kEe(t,e,n){var r=Ya.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function TEe(t,e,n){var r=Ya.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function y8(t,e,n){var r=Ya.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function DEe(t,e,n){var r=Ya.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function b8(t,e,n){var r=Ya.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function IEe(t,e,n){var r=Ya.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function OEe(t,e,n){var r=Ya.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function MEe(t,e,n){var r=Ya.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function REe(t,e,n){var r=Ya.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function LEe(t,e,n){var r=wEe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function FEe(t,e,n){var r=Ya.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function zEe(t,e,n){var r=Ya.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function x8(t,e){return wr(t.getDate(),e,2)}function $Ee(t,e){return wr(t.getHours(),e,2)}function BEe(t,e){return wr(t.getHours()%12||12,e,2)}function VEe(t,e){return wr(1+Wb.count(ld(t),t),e,3)}function bG(t,e){return wr(t.getMilliseconds(),e,3)}function UEe(t,e){return bG(t,e)+"000"}function WEe(t,e){return wr(t.getMonth()+1,e,2)}function HEe(t,e){return wr(t.getMinutes(),e,2)}function qEe(t,e){return wr(t.getSeconds(),e,2)}function KEe(t){var e=t.getDay();return e===0?7:e}function GEe(t,e){return wr(JS.count(ld(t)-1,t),e,2)}function xG(t){var e=t.getDay();return e>=4||e===0?yg(t):yg.ceil(t)}function YEe(t,e){return t=xG(t),wr(yg.count(ld(t),t)+(ld(t).getDay()===4),e,2)}function XEe(t){return t.getDay()}function QEe(t,e){return wr(Nw.count(ld(t)-1,t),e,2)}function ZEe(t,e){return wr(t.getFullYear()%100,e,2)}function JEe(t,e){return t=xG(t),wr(t.getFullYear()%100,e,2)}function eNe(t,e){return wr(t.getFullYear()%1e4,e,4)}function tNe(t,e){var n=t.getDay();return t=n>=4||n===0?yg(t):yg.ceil(t),wr(t.getFullYear()%1e4,e,4)}function nNe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+wr(e/60|0,"0",2)+wr(e%60,"0",2)}function w8(t,e){return wr(t.getUTCDate(),e,2)}function rNe(t,e){return wr(t.getUTCHours(),e,2)}function iNe(t,e){return wr(t.getUTCHours()%12||12,e,2)}function aNe(t,e){return wr(1+ZS.count(cd(t),t),e,3)}function wG(t,e){return wr(t.getUTCMilliseconds(),e,3)}function sNe(t,e){return wG(t,e)+"000"}function oNe(t,e){return wr(t.getUTCMonth()+1,e,2)}function lNe(t,e){return wr(t.getUTCMinutes(),e,2)}function cNe(t,e){return wr(t.getUTCSeconds(),e,2)}function uNe(t){var e=t.getUTCDay();return e===0?7:e}function dNe(t,e){return wr(e_.count(cd(t)-1,t),e,2)}function SG(t){var e=t.getUTCDay();return e>=4||e===0?bg(t):bg.ceil(t)}function fNe(t,e){return t=SG(t),wr(bg.count(cd(t),t)+(cd(t).getUTCDay()===4),e,2)}function hNe(t){return t.getUTCDay()}function pNe(t,e){return wr(Pw.count(cd(t)-1,t),e,2)}function mNe(t,e){return wr(t.getUTCFullYear()%100,e,2)}function gNe(t,e){return t=SG(t),wr(t.getUTCFullYear()%100,e,2)}function vNe(t,e){return wr(t.getUTCFullYear()%1e4,e,4)}function yNe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?bg(t):bg.ceil(t),wr(t.getUTCFullYear()%1e4,e,4)}function bNe(){return"+0000"}function S8(){return"%"}function _8(t){return+t}function A8(t){return Math.floor(+t/1e3)}var Op,_G,AG;xNe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xNe(t){return Op=xEe(t),_G=Op.format,Op.parse,AG=Op.utcFormat,Op.utcParse,Op}function wNe(t){return new Date(t)}function SNe(t){return t instanceof Date?+t:+new Date(+t)}function $3(t,e,n,r,i,a,s,o,l,u){var d=j3(),f=d.invert,p=d.domain,h=u(".%L"),g=u(":%S"),m=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),b=u("%b %d"),S=u("%B"),A=u("%Y");function C(D){return(l(D)<D?h:o(D)<D?g:s(D)<D?m:a(D)<D?v:r(D)<D?i(D)<D?y:b:n(D)<D?S:A)(D)}return d.invert=function(D){return new Date(f(D))},d.domain=function(D){return arguments.length?p(Array.from(D,SNe)):p().map(wNe)},d.ticks=function(D){var j=p();return t(j[0],j[j.length-1],D??10)},d.tickFormat=function(D,j){return j==null?C:u(j)},d.nice=function(D){var j=p();return(!D||typeof D.range!="function")&&(D=e(j[0],j[j.length-1],D??10)),D?p(uG(j,D)):d},d.copy=function(){return Ub(d,$3(t,e,n,r,i,a,s,o,l,u))},d}function _Ne(){return Xl.apply($3(yEe,bEe,ld,F3,JS,Wb,R3,O3,jh,_G).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ANe(){return Xl.apply($3(gEe,vEe,cd,z3,e_,ZS,L3,M3,jh,AG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function t_(){var t=0,e=1,n,r,i,a,s=no,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(p){var h,g;return arguments.length?([h,g]=p,s=f(h,g),u):[s(0),s(1)]}}return u.range=d(hv),u.rangeRound=d(C3),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function zf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function CG(){var t=Ff(t_()(no));return t.copy=function(){return zf(t,CG())},bd.apply(t,arguments)}function jG(){var t=P3(t_()).domain([1,10]);return t.copy=function(){return zf(t,jG()).base(t.base())},bd.apply(t,arguments)}function EG(){var t=k3(t_());return t.copy=function(){return zf(t,EG()).constant(t.constant())},bd.apply(t,arguments)}function B3(){var t=T3(t_());return t.copy=function(){return zf(t,B3()).exponent(t.exponent())},bd.apply(t,arguments)}function CNe(){return B3.apply(null,arguments).exponent(.5)}function NG(){var t=[],e=no;function n(r){if(r!=null&&!isNaN(r=+r))return e((Bb(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(hf),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>dje(t,a/r))},n.copy=function(){return NG(e).domain(t)},bd.apply(n,arguments)}function n_(){var t=0,e=.5,n=1,r=1,i,a,s,o,l,u=no,d,f=!1,p;function h(m){return isNaN(m=+m)?p:(m=.5+((m=+d(m))-a)*(r*m<r*a?o:l),u(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e,n]=m,i=d(t=+t),a=d(e=+e),s=d(n=+n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,h):[t,e,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(u=m,h):u};function g(m){return function(v){var y,b,S;return arguments.length?([y,b,S]=v,u=Lje(m,[y,b,S]),h):[u(0),u(.5),u(1)]}}return h.range=g(hv),h.rangeRound=g(C3),h.unknown=function(m){return arguments.length?(p=m,h):p},function(m){return d=m,i=m(t),a=m(e),s=m(n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,h}}function PG(){var t=Ff(n_()(no));return t.copy=function(){return zf(t,PG())},bd.apply(t,arguments)}function kG(){var t=P3(n_()).domain([.1,1,10]);return t.copy=function(){return zf(t,kG()).base(t.base())},bd.apply(t,arguments)}function TG(){var t=k3(n_());return t.copy=function(){return zf(t,TG()).constant(t.constant())},bd.apply(t,arguments)}function V3(){var t=T3(n_());return t.copy=function(){return zf(t,V3()).exponent(t.exponent())},bd.apply(t,arguments)}function jNe(){return V3.apply(null,arguments).exponent(.5)}const C8=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ry,scaleDiverging:PG,scaleDivergingLog:kG,scaleDivergingPow:V3,scaleDivergingSqrt:jNe,scaleDivergingSymlog:TG,scaleIdentity:cG,scaleImplicit:UN,scaleLinear:jw,scaleLog:dG,scaleOrdinal:S3,scalePoint:I0,scalePow:D3,scaleQuantile:pG,scaleQuantize:mG,scaleRadial:hG,scaleSequential:CG,scaleSequentialLog:jG,scaleSequentialPow:B3,scaleSequentialQuantile:NG,scaleSequentialSqrt:CNe,scaleSequentialSymlog:EG,scaleSqrt:sEe,scaleSymlog:fG,scaleThreshold:gG,scaleTime:_Ne,scaleUtc:ANe,tickFormat:lG},Symbol.toStringTag,{value:"Module"}));var ENe=iv;function NNe(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(s!=null&&(o===void 0?s===s&&!ENe(s):n(s,o)))var o=s,l=a}return l}var r_=NNe;function PNe(t,e){return t>e}var DG=PNe,kNe=r_,TNe=DG,DNe=fv;function INe(t){return t&&t.length?kNe(t,DNe,TNe):void 0}var ONe=INe;const Gd=Pr(ONe);function MNe(t,e){return t<e}var IG=MNe,RNe=r_,LNe=IG,FNe=fv;function zNe(t){return t&&t.length?RNe(t,FNe,LNe):void 0}var $Ne=zNe;const i_=Pr($Ne);var BNe=r3,VNe=xu,UNe=BK,WNe=ko;function HNe(t,e){var n=WNe(t)?BNe:UNe;return n(t,VNe(e))}var qNe=HNe,KNe=zK,GNe=qNe;function YNe(t,e){return KNe(GNe(t,e),1)}var XNe=YNe;const QNe=Pr(XNe);var ZNe=v3;function JNe(t,e){return ZNe(t,e)}var ePe=JNe;const Cf=Pr(ePe);var pv=1e9,tPe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},W3,_i=!0,Hl="[DecimalError] ",zh=Hl+"Invalid argument: ",U3=Hl+"Exponent out of range: ",mv=Math.floor,uh=Math.pow,nPe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,tl,Ba=1e7,mi=7,OG=9007199254740991,kw=mv(OG/mi),en={};en.absoluteValue=en.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};en.comparedTo=en.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};en.decimalPlaces=en.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*mi;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};en.dividedBy=en.div=function(t){return Qu(this,new this.constructor(t))};en.dividedToIntegerBy=en.idiv=function(t){var e=this,n=e.constructor;return Gr(Qu(e,new n(t),0,1),n.precision)};en.equals=en.eq=function(t){return!this.cmp(t)};en.exponent=function(){return ya(this)};en.greaterThan=en.gt=function(t){return this.cmp(t)>0};en.greaterThanOrEqualTo=en.gte=function(t){return this.cmp(t)>=0};en.isInteger=en.isint=function(){return this.e>this.d.length-2};en.isNegative=en.isneg=function(){return this.s<0};en.isPositive=en.ispos=function(){return this.s>0};en.isZero=function(){return this.s===0};en.lessThan=en.lt=function(t){return this.cmp(t)<0};en.lessThanOrEqualTo=en.lte=function(t){return this.cmp(t)<1};en.logarithm=en.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(tl))throw Error(Hl+"NaN");if(n.s<1)throw Error(Hl+(n.s?"NaN":"-Infinity"));return n.eq(tl)?new r(0):(_i=!1,e=Qu(By(n,a),By(t,a),a),_i=!0,Gr(e,i))};en.minus=en.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?LG(e,t):MG(e,(t.s=-t.s,t))};en.modulo=en.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Hl+"NaN");return n.s?(_i=!1,e=Qu(n,t,0,1).times(t),_i=!0,n.minus(e)):Gr(new r(n),i)};en.naturalExponential=en.exp=function(){return RG(this)};en.naturalLogarithm=en.ln=function(){return By(this)};en.negated=en.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};en.plus=en.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?MG(e,t):LG(e,(t.s=-t.s,t))};en.precision=en.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(zh+t);if(e=ya(i)+1,r=i.d.length-1,n=r*mi+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};en.squareRoot=en.sqrt=function(){var t,e,n,r,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Hl+"NaN")}for(t=ya(o),_i=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Zc(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=mv((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(a=r,r=a.plus(Qu(o,a,s+2)).times(.5),Zc(a.d).slice(0,s)===(e=Zc(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Gr(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return _i=!0,Gr(r,n)};en.times=en.mul=function(t){var e,n,r,i,a,s,o,l,u,d=this,f=d.constructor,p=d.d,h=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,l=p.length,u=h.length,l<u&&(a=p,p=h,h=a,s=l,l=u,u=s),a=[],s=l+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)o=a[i]+h[r]*p[i-r-1]+e,a[i--]=o%Ba|0,e=o/Ba|0;a[i]=(a[i]+e)%Ba|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,_i?Gr(t,f.precision):t};en.toDecimalPlaces=en.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(mu(t,0,pv),e===void 0?e=r.rounding:mu(e,0,8),Gr(n,t+ya(n)+1,e))};en.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Jh(r,!0):(mu(t,0,pv),e===void 0?e=i.rounding:mu(e,0,8),r=Gr(new i(r),t+1,e),n=Jh(r,!0,t+1)),n};en.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Jh(i):(mu(t,0,pv),e===void 0?e=a.rounding:mu(e,0,8),r=Gr(new a(i),t+ya(i)+1,e),n=Jh(r.abs(),!1,t+ya(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};en.toInteger=en.toint=function(){var t=this,e=t.constructor;return Gr(new e(t),ya(t)+1,e.rounding)};en.toNumber=function(){return+this};en.toPower=en.pow=function(t){var e,n,r,i,a,s,o=this,l=o.constructor,u=12,d=+(t=new l(t));if(!t.s)return new l(tl);if(o=new l(o),!o.s){if(t.s<1)throw Error(Hl+"Infinity");return o}if(o.eq(tl))return o;if(r=l.precision,t.eq(tl))return Gr(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=d<0?-d:d)<=OG){for(i=new l(tl),e=Math.ceil(r/mi+4),_i=!1;n%2&&(i=i.times(o),E8(i.d,e)),n=mv(n/2),n!==0;)o=o.times(o),E8(o.d,e);return _i=!0,t.s<0?new l(tl).div(i):Gr(i,r)}}else if(a<0)throw Error(Hl+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,_i=!1,i=t.times(By(o,r+u)),_i=!0,i=RG(i),i.s=a,i};en.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=ya(i),r=Jh(i,n<=a.toExpNeg||n>=a.toExpPos)):(mu(t,1,pv),e===void 0?e=a.rounding:mu(e,0,8),i=Gr(new a(i),t,e),n=ya(i),r=Jh(i,t<=n||n<=a.toExpNeg,t)),r};en.toSignificantDigits=en.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(mu(t,1,pv),e===void 0?e=r.rounding:mu(e,0,8)),Gr(new r(n),t,e)};en.toString=en.valueOf=en.val=en.toJSON=en[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ya(t),n=t.constructor;return Jh(t,e<=n.toExpNeg||e>=n.toExpPos)};function MG(t,e){var n,r,i,a,s,o,l,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),_i?Gr(e,f):e;if(l=t.d,u=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,o=u.length):(r=u,i=s,o=l.length),s=Math.ceil(f/mi),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,r=u,u=l,l=r),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/Ba|0,l[a]%=Ba;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,_i?Gr(e,f):e}function mu(t,e,n){if(t!==~~t||t<e||t>n)throw Error(zh+t)}function Zc(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=mi-r.length,n&&(a+=$d(n)),a+=r;s=t[e],r=s+"",n=mi-r.length,n&&(a+=$d(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Qu=function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Ba|0,s=a/Ba|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Ba+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,l,u,d,f,p,h,g,m,v,y,b,S,A,C,D,j,N,P=r.constructor,O=r.s==i.s?1:-1,T=r.d,M=i.d;if(!r.s)return new P(r);if(!i.s)throw Error(Hl+"Division by zero");for(l=r.e-i.e,j=M.length,C=T.length,h=new P(O),g=h.d=[],u=0;M[u]==(T[u]||0);)++u;if(M[u]>(T[u]||0)&&--l,a==null?b=a=P.precision:s?b=a+(ya(r)-ya(i))+1:b=a,b<0)return new P(0);if(b=b/mi+2|0,u=0,j==1)for(d=0,M=M[0],b++;(u<C||d)&&b--;u++)S=d*Ba+(T[u]||0),g[u]=S/M|0,d=S%M|0;else{for(d=Ba/(M[0]+1)|0,d>1&&(M=t(M,d),T=t(T,d),j=M.length,C=T.length),A=j,m=T.slice(0,j),v=m.length;v<j;)m[v++]=0;N=M.slice(),N.unshift(0),D=M[0],M[1]>=Ba/2&&++D;do d=0,o=e(M,m,j,v),o<0?(y=m[0],j!=v&&(y=y*Ba+(m[1]||0)),d=y/D|0,d>1?(d>=Ba&&(d=Ba-1),f=t(M,d),p=f.length,v=m.length,o=e(f,m,p,v),o==1&&(d--,n(f,j<p?N:M,p))):(d==0&&(o=d=1),f=M.slice()),p=f.length,p<v&&f.unshift(0),n(m,f,v),o==-1&&(v=m.length,o=e(M,m,j,v),o<1&&(d++,n(m,j<v?N:M,v))),v=m.length):o===0&&(d++,m=[0]),g[u++]=d,o&&m[0]?m[v++]=T[A]||0:(m=[T[A]],v=1);while((A++<C||m[0]!==void 0)&&b--)}return g[0]||g.shift(),h.e=l,Gr(h,s?a+ya(h)+1:a)}}();function RG(t,e){var n,r,i,a,s,o,l=0,u=0,d=t.constructor,f=d.precision;if(ya(t)>16)throw Error(U3+ya(t));if(!t.s)return new d(tl);for(_i=!1,o=f,s=new d(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(uh(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new d(tl),d.precision=o;;){if(i=Gr(i.times(t),o),n=n.times(++l),s=a.plus(Qu(i,n,o)),Zc(s.d).slice(0,o)===Zc(a.d).slice(0,o)){for(;u--;)a=Gr(a.times(a),o);return d.precision=f,e==null?(_i=!0,Gr(a,f)):a}a=s}}function ya(t){for(var e=t.e*mi,n=t.d[0];n>=10;n/=10)e++;return e}function yC(t,e,n){if(e>t.LN10.sd())throw _i=!0,n&&(t.precision=n),Error(Hl+"LN10 precision limit exceeded");return Gr(new t(t.LN10),e)}function $d(t){for(var e="";t--;)e+="0";return e}function By(t,e){var n,r,i,a,s,o,l,u,d,f=1,p=10,h=t,g=h.d,m=h.constructor,v=m.precision;if(h.s<1)throw Error(Hl+(h.s?"NaN":"-Infinity"));if(h.eq(tl))return new m(0);if(e==null?(_i=!1,u=v):u=e,h.eq(10))return e==null&&(_i=!0),yC(m,u);if(u+=p,m.precision=u,n=Zc(g),r=n.charAt(0),a=ya(h),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=Zc(h.d),r=n.charAt(0),f++;a=ya(h),r>1?(h=new m("0."+n),a++):h=new m(r+"."+n.slice(1))}else return l=yC(m,u+2,v).times(a+""),h=By(new m(r+"."+n.slice(1)),u-p).plus(l),m.precision=v,e==null?(_i=!0,Gr(h,v)):h;for(o=s=h=Qu(h.minus(tl),h.plus(tl),u),d=Gr(h.times(h),u),i=3;;){if(s=Gr(s.times(d),u),l=o.plus(Qu(s,new m(i),u)),Zc(l.d).slice(0,u)===Zc(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(yC(m,u+2,v).times(a+""))),o=Qu(o,new m(f),u),m.precision=v,e==null?(_i=!0,Gr(o,v)):o;o=l,i+=2}}function j8(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=mv(n/mi),t.d=[],r=(n+1)%mi,n<0&&(r+=mi),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=mi;r<i;)t.d.push(+e.slice(r,r+=mi));e=e.slice(r),r=mi-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),_i&&(t.e>kw||t.e<-kw))throw Error(U3+n)}else t.s=0,t.e=0,t.d=[0];return t}function Gr(t,e,n){var r,i,a,s,o,l,u,d,f=t.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=mi,i=e,u=f[d=0];else{if(d=Math.ceil((r+1)/mi),a=f.length,d>=a)return t;for(u=a=f[d],s=1;a>=10;a/=10)s++;r%=mi,i=r-mi+s}if(n!==void 0&&(a=uh(10,s-i-1),o=u/a%10|0,l=e<0||f[d+1]!==void 0||u%a,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?u/uh(10,s-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(a=ya(t),f.length=1,e=e-a-1,f[0]=uh(10,(mi-e%mi)%mi),t.e=mv(-e/mi)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,a=1,d--):(f.length=d+1,a=uh(10,mi-r),f[d]=i>0?(u/uh(10,s-i)%uh(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==Ba&&(f[0]=1,++t.e);break}else{if(f[d]+=a,f[d]!=Ba)break;f[d--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(_i&&(t.e>kw||t.e<-kw))throw Error(U3+ya(t));return t}function LG(t,e){var n,r,i,a,s,o,l,u,d,f,p=t.constructor,h=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),_i?Gr(e,h):e;if(l=t.d,f=e.d,r=e.e,u=t.e,l=l.slice(),s=u-r,s){for(d=s<0,d?(n=l,s=-s,o=f.length):(n=f,r=u,o=l.length),i=Math.max(Math.ceil(h/mi),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}s=0}for(d&&(n=l,l=f,f=n,e.s=-e.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=Ba-1;--l[a],l[i]+=Ba}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,_i?Gr(e,h):e):new p(0)}function Jh(t,e,n){var r,i=ya(t),a=Zc(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+$d(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+$d(-i-1)+a,n&&(r=n-s)>0&&(a+=$d(r))):i>=s?(a+=$d(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+$d(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=$d(r))),t.s<0?"-"+a:a}function E8(t,e){if(t.length>e)return t.length=e,!0}function FG(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(zh+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return j8(s,a.toString())}else if(typeof a!="string")throw Error(zh+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,nPe.test(a))j8(s,a);else throw Error(zh+a)}if(i.prototype=en,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=FG,i.config=i.set=rPe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function rPe(t){if(!t||typeof t!="object")throw Error(Hl+"Object expected");var e,n,r,i=["precision",1,pv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(mv(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(zh+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(zh+n+": "+r);return this}var W3=FG(tPe);tl=new W3(1);const Ur=W3;function iPe(t){return lPe(t)||oPe(t)||sPe(t)||aPe()}function aPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sPe(t,e){if(t){if(typeof t=="string")return KN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KN(t,e)}}function oPe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function lPe(t){if(Array.isArray(t))return KN(t)}function KN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cPe=function(e){return e},zG={},$G=function(e){return e===zG},N8=function(e){return function n(){return arguments.length===0||arguments.length===1&&$G(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},uPe=function t(e,n){return e===1?n:N8(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==zG}).length;return s>=e?n.apply(void 0,i):t(e-s,N8(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=i.map(function(f){return $G(f)?l.shift():f});return n.apply(void 0,iPe(d).concat(l))}))})},a_=function(e){return uPe(e.length,e)},GN=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},dPe=a_(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),fPe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return cPe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},YN=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},BG=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,l){return o===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function hPe(t){var e;return t===0?e=1:e=Math.floor(new Ur(t).abs().log(10).toNumber())+1,e}function pPe(t,e,n){for(var r=new Ur(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var mPe=a_(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),gPe=a_(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),vPe=a_(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const s_={rangeStep:pPe,getDigitCount:hPe,interpolateNumber:mPe,uninterpolateNumber:gPe,uninterpolateTruncation:vPe};function XN(t){return xPe(t)||bPe(t)||VG(t)||yPe()}function yPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bPe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function xPe(t){if(Array.isArray(t))return QN(t)}function Vy(t,e){return _Pe(t)||SPe(t,e)||VG(t,e)||wPe()}function wPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VG(t,e){if(t){if(typeof t=="string")return QN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QN(t,e)}}function QN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SPe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function _Pe(t){if(Array.isArray(t))return t}function UG(t){var e=Vy(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function WG(t,e,n){if(t.lte(0))return new Ur(0);var r=s_.getDigitCount(t.toNumber()),i=new Ur(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Ur(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=o.mul(i);return e?l:new Ur(Math.ceil(l))}function APe(t,e,n){var r=1,i=new Ur(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Ur(10).pow(s_.getDigitCount(t)-1),i=new Ur(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Ur(Math.floor(t)))}else t===0?i=new Ur(Math.floor((e-1)/2)):n||(i=new Ur(Math.floor(t)));var s=Math.floor((e-1)/2),o=fPe(dPe(function(l){return i.add(new Ur(l-s).mul(r)).toNumber()}),GN);return o(0,e)}function HG(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ur(0),tickMin:new Ur(0),tickMax:new Ur(0)};var a=WG(new Ur(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new Ur(0):(s=new Ur(t).add(e).div(2),s=s.sub(new Ur(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),l=Math.ceil(new Ur(e).sub(s).div(a).toNumber()),u=o+l+1;return u>n?HG(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,o=e>0?o:o+(n-u)),{step:a,tickMin:s.sub(new Ur(o).mul(a)),tickMax:s.add(new Ur(l).mul(a))})}function CPe(t){var e=Vy(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=UG([n,r]),l=Vy(o,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(XN(GN(0,i-1).map(function(){return 1/0}))):[].concat(XN(GN(0,i-1).map(function(){return-1/0})),[d]);return n>r?YN(f):f}if(u===d)return APe(u,i,a);var p=HG(u,d,s,a),h=p.step,g=p.tickMin,m=p.tickMax,v=s_.rangeStep(g,m.add(new Ur(.1).mul(h)),h);return n>r?YN(v):v}function jPe(t,e){var n=Vy(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=UG([r,i]),o=Vy(s,2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var d=Math.max(e,2),f=WG(new Ur(u).sub(l).div(d-1),a,0),p=[].concat(XN(s_.rangeStep(new Ur(l),new Ur(u).sub(new Ur(.99).mul(f)),f)),[u]);return r>i?YN(p):p}var EPe=BG(CPe),NPe=BG(jPe),PPe="Invariant failed";function ep(t,e){throw new Error(PPe)}var kPe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function Tw(){return Tw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tw.apply(this,arguments)}function TPe(t,e){return MPe(t)||OPe(t,e)||IPe(t,e)||DPe()}function DPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IPe(t,e){if(t){if(typeof t=="string")return P8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P8(t,e)}}function P8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function MPe(t){if(Array.isArray(t))return t}function RPe(t,e){if(t==null)return{};var n=LPe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function LPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function FPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GG(r.key),r)}}function $Pe(t,e,n){return e&&zPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BPe(t,e,n){return e=Dw(e),VPe(t,qG()?Reflect.construct(e,n||[],Dw(t).constructor):e.apply(t,n))}function VPe(t,e){if(e&&(xg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UPe(t)}function UPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qG=function(){return!!t})()}function Dw(t){return Dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dw(t)}function WPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZN(t,e)}function ZN(t,e){return ZN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ZN(t,e)}function KG(t,e,n){return e=GG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GG(t){var e=HPe(t,"string");return xg(e)=="symbol"?e:e+""}function HPe(t,e){if(xg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gv=function(t){function e(){return FPe(this,e),BPe(this,e,arguments)}return WPe(e,t),$Pe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,l=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,p=RPe(r,kPe),h=un(p,!1);this.props.direction==="x"&&d.type!=="number"&&ep();var g=l.map(function(m){var v=u(m,o),y=v.x,b=v.y,S=v.value,A=v.errorVal;if(!A)return null;var C=[],D,j;if(Array.isArray(A)){var N=TPe(A,2);D=N[0],j=N[1]}else D=j=A;if(a==="vertical"){var P=d.scale,O=b+i,T=O+s,M=O-s,L=P(S-D),V=P(S+j);C.push({x1:V,y1:T,x2:V,y2:M}),C.push({x1:L,y1:O,x2:V,y2:O}),C.push({x1:L,y1:T,x2:L,y2:M})}else if(a==="horizontal"){var K=f.scale,Z=y+i,Y=Z-s,H=Z+s,ee=K(S-D),le=K(S+j);C.push({x1:Y,y1:le,x2:H,y2:le}),C.push({x1:Z,y1:ee,x2:Z,y2:le}),C.push({x1:Y,y1:ee,x2:H,y2:ee})}return be.createElement(zn,Tw({className:"recharts-errorBar",key:"bar-".concat(C.map(function(se){return"".concat(se.x1,"-").concat(se.x2,"-").concat(se.y1,"-").concat(se.y2)}))},h),C.map(function(se){return be.createElement("line",Tw({},se,{key:"line-".concat(se.x1,"-").concat(se.x2,"-").concat(se.y1,"-").concat(se.y2)}))}))});return be.createElement(zn,{className:"recharts-errorBars"},g)}}])}(be.Component);KG(gv,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});KG(gv,"displayName","ErrorBar");function Uy(t){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(t)}function k8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k8(Object(n),!0).forEach(function(r){qPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qPe(t,e,n){return e=KPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KPe(t){var e=GPe(t,"string");return Uy(e)=="symbol"?e:e+""}function GPe(t,e){if(Uy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YG=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=el(n,Bl);if(!s)return null;var o=Bl.defaultProps,l=o!==void 0?Zf(Zf({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(d,f){var p=f.item,h=f.props,g=h.sectors||h.data||[];return d.concat(g.map(function(m){return{type:s.props.iconType||p.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(r||[]).map(function(d){var f=d.item,p=f.type.defaultProps,h=p!==void 0?Zf(Zf({},p),f.props):{},g=h.dataKey,m=h.name,v=h.legendType,y=h.hide;return{inactive:y,dataKey:g,type:l.iconType||v||"square",color:H3(f),value:m||g,payload:h}}),Zf(Zf(Zf({},l),Bl.getWithHeight(s,i)),{},{payload:u,item:s})};function Wy(t){"@babel/helpers - typeof";return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wy(t)}function T8(t){return ZPe(t)||QPe(t)||XPe(t)||YPe()}function YPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XPe(t,e){if(t){if(typeof t=="string")return JN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JN(t,e)}}function QPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZPe(t){if(Array.isArray(t))return JN(t)}function JN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ui(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D8(Object(n),!0).forEach(function(r){Dm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dm(t,e,n){return e=JPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JPe(t){var e=eke(t,"string");return Wy(e)=="symbol"?e:e+""}function eke(t,e){if(Wy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vi(t,e,n){return wn(t)||wn(e)?n:Ra(e)?cl(t,e,n):Sn(e)?e(t):n}function O0(t,e,n,r){var i=QNe(t,function(o){return vi(o,e)});if(n==="number"){var a=i.filter(function(o){return Pt(o)||parseFloat(o)});return a.length?[i_(a),Gd(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!wn(o)}):i;return s.map(function(o){return Ra(o)||o instanceof Date?o:""})}var tke=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,f=i[u].coordinate,p=u>=o-1?i[0].coordinate:i[u+1].coordinate,h=void 0;if(eo(f-d)!==eo(p-f)){var g=[];if(eo(p-f)===eo(l[1]-l[0])){h=p;var m=f+l[1]-l[0];g[0]=Math.min(m,(m+d)/2),g[1]=Math.max(m,(m+d)/2)}else{h=d;var v=p+l[1]-l[0];g[0]=Math.min(f,(v+f)/2),g[1]=Math.max(f,(v+f)/2)}var y=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(e>y[0]&&e<=y[1]||e>=g[0]&&e<=g[1]){s=i[u].index;break}}else{var b=Math.min(d,p),S=Math.max(d,p);if(e>(b+f)/2&&e<=(S+f)/2){s=i[u].index;break}}}else for(var A=0;A<o;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){s=r[A].index;break}return s},H3=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Ui(Ui({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},nke=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),l=0,u=o.length;l<u;l++)for(var d=a[o[l]].stackGroups,f=Object.keys(d),p=0,h=f.length;p<h;p++){var g=d[f[p]],m=g.items,v=g.cateAxisId,y=m.filter(function(j){return Xu(j.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,S=b!==void 0?Ui(Ui({},b),y[0].props):y[0].props,A=S.barSize,C=S[v];s[C]||(s[C]=[]);var D=wn(A)?n:A;s[C].push({item:y[0],stackList:y.slice(1),barSize:wn(D)?void 0:to(D,r,0)})}}return s},rke=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,l=s.length;if(l<1)return null;var u=to(n,i,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var p=!1,h=i/l,g=s.reduce(function(A,C){return A+C.barSize||0},0);g+=(l-1)*u,g>=i&&(g-=(l-1)*u,u=0),g>=i&&h>0&&(p=!0,h*=.9,g=l*h);var m=(i-g)/2>>0,v={offset:m-u,size:0};d=s.reduce(function(A,C){var D={item:C.item,position:{offset:v.offset+v.size+u,size:p?h:C.barSize}},j=[].concat(T8(A),[D]);return v=j[j.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(N){j.push({item:N,position:v})}),j},f)}else{var y=to(r,i,0,!0);i-2*y-(l-1)*u<=0&&(u=0);var b=(i-2*y-(l-1)*u)/l;b>1&&(b>>=0);var S=o===+o?Math.min(b,o):b;d=s.reduce(function(A,C,D){var j=[].concat(T8(A),[{item:C.item,position:{offset:y+(b+u)*D+(b-S)/2,size:S}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(N){j.push({item:N,position:j[j.length-1].position})}),j},f)}return d},ike=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,l=s-(o.left||0)-(o.right||0),u=YG({children:a,legendWidth:l});if(u){var d=i||{},f=d.width,p=d.height,h=u.align,g=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&g==="middle")&&h!=="center"&&Pt(e[h]))return Ui(Ui({},e),{},Dm({},h,e[h]+(f||0)));if((m==="horizontal"||m==="vertical"&&h==="center")&&g!=="middle"&&Pt(e[g]))return Ui(Ui({},e),{},Dm({},g,e[g]+(p||0)))}return e},ake=function(e,n,r){return wn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},XG=function(e,n,r,i,a){var s=n.props.children,o=io(s,gv).filter(function(u){return ake(i,a,u.props.direction)});if(o&&o.length){var l=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=vi(d,r);if(wn(f))return u;var p=Array.isArray(f)?[i_(f),Gd(f)]:[f,f],h=l.reduce(function(g,m){var v=vi(d,m,0),y=p[0]-Math.abs(Array.isArray(v)?v[0]:v),b=p[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(y,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},ske=function(e,n,r,i,a){var s=n.map(function(o){return XG(e,o,r,a,i)}).filter(function(o){return!wn(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},QG=function(e,n,r,i,a){var s=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&XG(e,l,u,i)||O0(e,u,r,a)});if(r==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,l.push(u[d]));return l},[])},ZG=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},JG=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var a,s,o=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate});return a||o.push(n),s||o.push(r),o},Hu=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?eo(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var p=a?a.indexOf(f):f;return{coordinate:i(p)+u,value:f,offset:u}});return d.filter(function(f){return!cv(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,p){return{coordinate:i(f)+u,value:f,index:p,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,p){return{coordinate:i(f)+u,value:a?a[f]:f,index:p,offset:u}})},bC=new WeakMap,Zx=function(e,n){if(typeof n!="function")return e;bC.has(e)||bC.set(e,new WeakMap);var r=bC.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},eY=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:Ry(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:jw(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:I0(),realScaleType:"point"}:a==="category"?{scale:Ry(),realScaleType:"band"}:{scale:jw(),realScaleType:"linear"};if(Qh(i)){var l="scale".concat(US(i));return{scale:(C8[l]||I0)(),realScaleType:C8[l]?l:"point"}}return Sn(i)?{scale:i}:{scale:I0(),realScaleType:"point"}},I8=1e-4,tY=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-I8,s=Math.max(i[0],i[1])+I8,o=e(n[0]),l=e(n[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([n[0],n[r-1]])}},oke=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},lke=function(e,n){if(!n||n.length!==2||!Pt(n[0])||!Pt(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!Pt(e[0])||e[0]<r)&&(a[0]=r),(!Pt(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},cke=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var l=cv(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},uke=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=cv(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},dke={sign:cke,expand:kbe,none:fg,silhouette:Tbe,wiggle:Dbe,positive:uke},fke=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=dke[r],s=Pbe().keys(i).value(function(o,l){return+vi(o,l,0)}).order(AN).offset(a);return s(e)},hke=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,l={},u=o.reduce(function(f,p){var h,g=(h=p.type)!==null&&h!==void 0&&h.defaultProps?Ui(Ui({},p.type.defaultProps),p.props):p.props,m=g.stackId,v=g.hide;if(v)return f;var y=g[r],b=f[y]||{hasStack:!1,stackGroups:{}};if(Ra(m)){var S=b.stackGroups[m]||{numericAxisId:r,cateAxisId:i,items:[]};S.items.push(p),b.hasStack=!0,b.stackGroups[m]=S}else b.stackGroups[Lf("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return Ui(Ui({},f),{},Dm({},y,b))},l),d={};return Object.keys(u).reduce(function(f,p){var h=u[p];if(h.hasStack){var g={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(m,v){var y=h.stackGroups[v];return Ui(Ui({},m),{},Dm({},v,{numericAxisId:r,cateAxisId:i,items:y.items,stackedData:fke(e,y.items,a)}))},g)}return Ui(Ui({},f),{},Dm({},p,h))},d)},nY=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=EPe(u,a,o);return e.domain([i_(d),Gd(d)]),{niceTicks:d}}if(a&&i==="number"){var f=e.domain(),p=NPe(f,a,o);return{niceTicks:p}}return null};function wg(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!wn(i[e.dataKey])){var o=aw(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=vi(i,wn(s)?e.dataKey:s);return wn(l)?null:e.scale(l)}var O8=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=vi(s,n.dataKey,n.domain[o]);return wn(l)?null:n.scale(l)-a/2+i},pke=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},mke=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Ui(Ui({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Ra(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},gke=function(e){return e.reduce(function(n,r){return[i_(r.concat([n[0]]).filter(Pt)),Gd(r.concat([n[1]]).filter(Pt))]},[1/0,-1/0])},rY=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,l=o.reduce(function(u,d){var f=gke(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},M8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,R8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eP=function(e,n,r){if(Sn(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Pt(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(M8.test(e[0])){var a=+M8.exec(e[0])[1];i[0]=n[0]-a}else Sn(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Pt(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(R8.test(e[1])){var s=+R8.exec(e[1])[1];i[1]=n[1]+s}else Sn(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Iw=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=b3(n,function(f){return f.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var u=a[o],d=a[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},L8=function(e,n,r){return!e||!e.length||Cf(e,cl(r,"type.defaultProps.domain"))?n:e},iY=function(e,n){var r=e.type.defaultProps?Ui(Ui({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,l=r.tooltipType,u=r.chartType,d=r.hide;return Ui(Ui({},un(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:H3(e),value:vi(n,i),type:l,payload:n,chartType:u,hide:d})};function Hy(t){"@babel/helpers - typeof";return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hy(t)}function F8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ru(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F8(Object(n),!0).forEach(function(r){aY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aY(t,e,n){return e=vke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vke(t){var e=yke(t,"string");return Hy(e)=="symbol"?e:e+""}function yke(t,e){if(Hy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bke(t,e){return _ke(t)||Ske(t,e)||wke(t,e)||xke()}function xke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wke(t,e){if(t){if(typeof t=="string")return z8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z8(t,e)}}function z8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ske(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function _ke(t){if(Array.isArray(t))return t}var Ow=Math.PI/180,Ake=function(e){return e*180/Math.PI},ri=function(e,n,r,i){return{x:e+Math.cos(-Ow*i)*r,y:n+Math.sin(-Ow*i)*r}},sY=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Cke=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.startAngle,u=e.endAngle,d=to(e.cx,s,s/2),f=to(e.cy,o,o/2),p=sY(s,o,r),h=to(e.innerRadius,p,0),g=to(e.outerRadius,p,p*.8),m=Object.keys(n);return m.reduce(function(v,y){var b=n[y],S=b.domain,A=b.reversed,C;if(wn(b.range))i==="angleAxis"?C=[l,u]:i==="radiusAxis"&&(C=[h,g]),A&&(C=[C[1],C[0]]);else{C=b.range;var D=C,j=bke(D,2);l=j[0],u=j[1]}var N=eY(b,a),P=N.realScaleType,O=N.scale;O.domain(S).range(C),tY(O);var T=nY(O,Ru(Ru({},b),{},{realScaleType:P})),M=Ru(Ru(Ru({},b),T),{},{range:C,radius:g,realScaleType:P,scale:O,cx:d,cy:f,innerRadius:h,outerRadius:g,startAngle:l,endAngle:u});return Ru(Ru({},v),{},aY({},y,M))},{})},jke=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},Eke=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=jke({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var l=(r-a)/o,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:o,angle:Ake(u),angleInRadian:u}},Nke=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},Pke=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},$8=function(e,n){var r=e.x,i=e.y,a=Eke({x:r,y:i},n),s=a.radius,o=a.angle,l=n.innerRadius,u=n.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var d=Nke(n),f=d.startAngle,p=d.endAngle,h=o,g;if(f<=p){for(;h>p;)h-=360;for(;h<f;)h+=360;g=h>=f&&h<=p}else{for(;h>f;)h-=360;for(;h<p;)h+=360;g=h>=p&&h<=f}return g?Ru(Ru({},n),{},{radius:s,angle:Pke(h,n)}):null},oY=function(e){return!I.isValidElement(e)&&!Sn(e)&&typeof e!="boolean"?e.className:""};function qy(t){"@babel/helpers - typeof";return qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qy(t)}var kke=["offset"];function Tke(t){return Mke(t)||Oke(t)||Ike(t)||Dke()}function Dke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ike(t,e){if(t){if(typeof t=="string")return tP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tP(t,e)}}function Oke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mke(t){if(Array.isArray(t))return tP(t)}function tP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rke(t,e){if(t==null)return{};var n=Lke(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function B8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ia(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B8(Object(n),!0).forEach(function(r){Fke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fke(t,e,n){return e=zke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zke(t){var e=$ke(t,"string");return qy(e)=="symbol"?e:e+""}function $ke(t,e){if(qy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ky(){return Ky=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ky.apply(this,arguments)}var Bke=function(e){var n=e.value,r=e.formatter,i=wn(e.children)?n:e.children;return Sn(r)?r(i):i},Vke=function(e,n){var r=eo(n-e),i=Math.min(Math.abs(n-e),360);return r*i},Uke=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,l=a,u=l.cx,d=l.cy,f=l.innerRadius,p=l.outerRadius,h=l.startAngle,g=l.endAngle,m=l.clockWise,v=(f+p)/2,y=Vke(h,g),b=y>=0?1:-1,S,A;i==="insideStart"?(S=h+b*s,A=m):i==="insideEnd"?(S=g-b*s,A=!m):i==="end"&&(S=g+b*s,A=m),A=y<=0?A:!A;var C=ri(u,d,v,S),D=ri(u,d,v,S+(A?1:-1)*359),j="M".concat(C.x,",").concat(C.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(A?0:1,`,
    `).concat(D.x,",").concat(D.y),N=wn(e.id)?Lf("recharts-radial-line-"):e.id;return be.createElement("text",Ky({},r,{dominantBaseline:"central",className:Rn("recharts-radial-bar-label",o)}),be.createElement("defs",null,be.createElement("path",{id:N,d:j})),be.createElement("textPath",{xlinkHref:"#".concat(N)},n))},Wke=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,l=a.innerRadius,u=a.outerRadius,d=a.startAngle,f=a.endAngle,p=(d+f)/2;if(i==="outside"){var h=ri(s,o,u+r,p),g=h.x,m=h.y;return{x:g,y:m,textAnchor:g>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,y=ri(s,o,v,p),b=y.x,S=y.y;return{x:b,y:S,textAnchor:"middle",verticalAnchor:"middle"}},Hke=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,l=s.y,u=s.width,d=s.height,f=d>=0?1:-1,p=f*i,h=f>0?"end":"start",g=f>0?"start":"end",m=u>=0?1:-1,v=m*i,y=m>0?"end":"start",b=m>0?"start":"end";if(a==="top"){var S={x:o+u/2,y:l-f*i,textAnchor:"middle",verticalAnchor:h};return Ia(Ia({},S),r?{height:Math.max(l-r.y,0),width:u}:{})}if(a==="bottom"){var A={x:o+u/2,y:l+d+p,textAnchor:"middle",verticalAnchor:g};return Ia(Ia({},A),r?{height:Math.max(r.y+r.height-(l+d),0),width:u}:{})}if(a==="left"){var C={x:o-v,y:l+d/2,textAnchor:y,verticalAnchor:"middle"};return Ia(Ia({},C),r?{width:Math.max(C.x-r.x,0),height:d}:{})}if(a==="right"){var D={x:o+u+v,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return Ia(Ia({},D),r?{width:Math.max(r.x+r.width-D.x,0),height:d}:{})}var j=r?{width:u,height:d}:{};return a==="insideLeft"?Ia({x:o+v,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},j):a==="insideRight"?Ia({x:o+u-v,y:l+d/2,textAnchor:y,verticalAnchor:"middle"},j):a==="insideTop"?Ia({x:o+u/2,y:l+p,textAnchor:"middle",verticalAnchor:g},j):a==="insideBottom"?Ia({x:o+u/2,y:l+d-p,textAnchor:"middle",verticalAnchor:h},j):a==="insideTopLeft"?Ia({x:o+v,y:l+p,textAnchor:b,verticalAnchor:g},j):a==="insideTopRight"?Ia({x:o+u-v,y:l+p,textAnchor:y,verticalAnchor:g},j):a==="insideBottomLeft"?Ia({x:o+v,y:l+d-p,textAnchor:b,verticalAnchor:h},j):a==="insideBottomRight"?Ia({x:o+u-v,y:l+d-p,textAnchor:y,verticalAnchor:h},j):av(a)&&(Pt(a.x)||Ah(a.x))&&(Pt(a.y)||Ah(a.y))?Ia({x:o+to(a.x,u),y:l+to(a.y,d),textAnchor:"end",verticalAnchor:"end"},j):Ia({x:o+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},qke=function(e){return"cx"in e&&Pt(e.cx)};function Wa(t){var e=t.offset,n=e===void 0?5:e,r=Rke(t,kke),i=Ia({offset:n},r),a=i.viewBox,s=i.position,o=i.value,l=i.children,u=i.content,d=i.className,f=d===void 0?"":d,p=i.textBreakAll;if(!a||wn(o)&&wn(l)&&!I.isValidElement(u)&&!Sn(u))return null;if(I.isValidElement(u))return I.cloneElement(u,i);var h;if(Sn(u)){if(h=I.createElement(u,i),I.isValidElement(h))return h}else h=Bke(i);var g=qke(a),m=un(i,!0);if(g&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Uke(i,h,m);var v=g?Wke(i):Hke(i);return be.createElement(Zh,Ky({className:Rn("recharts-label",f)},m,v,{breakAll:p}),h)}Wa.displayName="Label";var lY=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,l=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,p=e.y,h=e.top,g=e.left,m=e.width,v=e.height,y=e.clockWise,b=e.labelViewBox;if(b)return b;if(Pt(m)&&Pt(v)){if(Pt(f)&&Pt(p))return{x:f,y:p,width:m,height:v};if(Pt(h)&&Pt(g))return{x:h,y:g,width:m,height:v}}return Pt(f)&&Pt(p)?{x:f,y:p,width:0,height:0}:Pt(n)&&Pt(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||l||o||0,clockWise:y}:e.viewBox?e.viewBox:{}},Kke=function(e,n){return e?e===!0?be.createElement(Wa,{key:"label-implicit",viewBox:n}):Ra(e)?be.createElement(Wa,{key:"label-implicit",viewBox:n,value:e}):I.isValidElement(e)?e.type===Wa?I.cloneElement(e,{key:"label-implicit",viewBox:n}):be.createElement(Wa,{key:"label-implicit",content:e,viewBox:n}):Sn(e)?be.createElement(Wa,{key:"label-implicit",content:e,viewBox:n}):av(e)?be.createElement(Wa,Ky({viewBox:n},e,{key:"label-implicit"})):null:null},Gke=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=lY(e),s=io(i,Wa).map(function(l,u){return I.cloneElement(l,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var o=Kke(e.label,n||a);return[o].concat(Tke(s))};Wa.parseViewBox=lY;Wa.renderCallByParent=Gke;function Yke(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Xke=Yke;const Qke=Pr(Xke);function Gy(t){"@babel/helpers - typeof";return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gy(t)}var Zke=["valueAccessor"],Jke=["data","dataKey","clockWise","id","textBreakAll"];function e4e(t){return i4e(t)||r4e(t)||n4e(t)||t4e()}function t4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n4e(t,e){if(t){if(typeof t=="string")return nP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nP(t,e)}}function r4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function i4e(t){if(Array.isArray(t))return nP(t)}function nP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mw.apply(this,arguments)}function V8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V8(Object(n),!0).forEach(function(r){a4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a4e(t,e,n){return e=s4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s4e(t){var e=o4e(t,"string");return Gy(e)=="symbol"?e:e+""}function o4e(t,e){if(Gy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W8(t,e){if(t==null)return{};var n=l4e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function l4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var c4e=function(e){return Array.isArray(e.value)?Qke(e.value):e.value};function ao(t){var e=t.valueAccessor,n=e===void 0?c4e:e,r=W8(t,Zke),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,l=r.textBreakAll,u=W8(r,Jke);return!i||!i.length?null:be.createElement(zn,{className:"recharts-label-list"},i.map(function(d,f){var p=wn(a)?n(d,f):vi(d&&d.payload,a),h=wn(o)?{}:{id:"".concat(o,"-").concat(f)};return be.createElement(Wa,Mw({},un(d,!0),u,h,{parentViewBox:d.parentViewBox,value:p,textBreakAll:l,viewBox:Wa.parseViewBox(wn(s)?d:U8(U8({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}ao.displayName="LabelList";function u4e(t,e){return t?t===!0?be.createElement(ao,{key:"labelList-implicit",data:e}):be.isValidElement(t)||Sn(t)?be.createElement(ao,{key:"labelList-implicit",data:e,content:t}):av(t)?be.createElement(ao,Mw({data:e},t,{key:"labelList-implicit"})):null:null}function d4e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=io(r,ao).map(function(s,o){return I.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=u4e(t.label,e);return[a].concat(e4e(i))}ao.renderCallByParent=d4e;function Yy(t){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yy(t)}function rP(){return rP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rP.apply(this,arguments)}function H8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H8(Object(n),!0).forEach(function(r){f4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f4e(t,e,n){return e=h4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h4e(t){var e=p4e(t,"string");return Yy(e)=="symbol"?e:e+""}function p4e(t,e){if(Yy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m4e=function(e,n){var r=eo(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Jx=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,d=l*(o?1:-1)+i,f=Math.asin(l/d)/Ow,p=u?a:a+s*f,h=ri(n,r,d,p),g=ri(n,r,i,p),m=u?a-s*f:a,v=ri(n,r,d*Math.cos(f*Ow),m);return{center:h,circleTangency:g,lineTangency:v,theta:f}},cY=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,l=m4e(s,o),u=s+l,d=ri(n,r,a,s),f=ri(n,r,a,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var h=ri(n,r,i,s),g=ri(n,r,i,u);p+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},g4e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=eo(d-u),p=Jx({cx:n,cy:r,radius:a,angle:u,sign:f,cornerRadius:s,cornerIsExternal:l}),h=p.circleTangency,g=p.lineTangency,m=p.theta,v=Jx({cx:n,cy:r,radius:a,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:l}),y=v.circleTangency,b=v.lineTangency,S=v.theta,A=l?Math.abs(u-d):Math.abs(u-d)-m-S;if(A<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):cY({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var C="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(A>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var D=Jx({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),j=D.circleTangency,N=D.lineTangency,P=D.theta,O=Jx({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),T=O.circleTangency,M=O.lineTangency,L=O.theta,V=l?Math.abs(u-d):Math.abs(u-d)-P-L;if(V<0&&s===0)return"".concat(C,"L").concat(n,",").concat(r,"Z");C+="L".concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(V>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(N.x,",").concat(N.y,"Z")}else C+="L".concat(n,",").concat(r,"Z");return C},v4e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},uY=function(e){var n=q8(q8({},v4e),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,p=n.className;if(s<a||d===f)return null;var h=Rn("recharts-sector",p),g=s-a,m=to(o,g,0,!0),v;return m>0&&Math.abs(d-f)<360?v=g4e({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,g/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}):v=cY({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:f}),be.createElement("path",rP({},un(n,!0),{className:h,d:v,role:"img"}))};function Xy(t){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xy(t)}function iP(){return iP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iP.apply(this,arguments)}function K8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K8(Object(n),!0).forEach(function(r){y4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y4e(t,e,n){return e=b4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b4e(t){var e=x4e(t,"string");return Xy(e)=="symbol"?e:e+""}function x4e(t,e){if(Xy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y8={curveBasisClosed:ybe,curveBasisOpen:bbe,curveBasis:vbe,curveBumpX:rbe,curveBumpY:ibe,curveLinearClosed:xbe,curveLinear:HS,curveMonotoneX:wbe,curveMonotoneY:Sbe,curveNatural:_be,curveStep:Abe,curveStepAfter:jbe,curveStepBefore:Cbe},e1=function(e){return e.x===+e.x&&e.y===+e.y},Hv=function(e){return e.x},qv=function(e){return e.y},w4e=function(e,n){if(Sn(e))return e;var r="curve".concat(US(e));return(r==="curveMonotone"||r==="curveBump")&&n?Y8["".concat(r).concat(n==="vertical"?"Y":"X")]:Y8[r]||HS},S4e=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,l=e.connectNulls,u=l===void 0?!1:l,d=w4e(r,o),f=u?a.filter(function(m){return e1(m)}):a,p;if(Array.isArray(s)){var h=u?s.filter(function(m){return e1(m)}):s,g=f.map(function(m,v){return G8(G8({},m),{},{base:h[v]})});return o==="vertical"?p=Wx().y(qv).x1(Hv).x0(function(m){return m.base.x}):p=Wx().x(Hv).y1(qv).y0(function(m){return m.base.y}),p.defined(e1).curve(d),p(g)}return o==="vertical"&&Pt(s)?p=Wx().y(qv).x1(Hv).x0(s):Pt(s)?p=Wx().x(Hv).y1(qv).y0(s):p=iK().x(Hv).y(qv),p.defined(e1).curve(d),p(f)},pf=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?S4e(e):i;return I.createElement("path",iP({},un(e,!1),sw(e),{className:Rn("recharts-curve",n),d:s,ref:a}))},dY={exports:{}},_4e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",A4e=_4e,C4e=A4e;function fY(){}function hY(){}hY.resetWarningCache=fY;var j4e=function(){function t(r,i,a,s,o,l){if(l!==C4e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:hY,resetWarningCache:fY};return n.PropTypes=n,n};dY.exports=j4e();var E4e=dY.exports;const Nr=Pr(E4e);var N4e=Object.getOwnPropertyNames,P4e=Object.getOwnPropertySymbols,k4e=Object.prototype.hasOwnProperty;function X8(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function t1(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);var l=t(n,r,i);return a.delete(n),a.delete(r),l}}function T4e(t){return t!=null?t[Symbol.toStringTag]:void 0}function Q8(t){return N4e(t).concat(P4e(t))}var D4e=Object.hasOwn||function(t,e){return k4e.call(t,e)};function xp(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var I4e="__v",O4e="__o",M4e="_owner",Z8=Object.getOwnPropertyDescriptor,J8=Object.keys;function R4e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function L4e(t,e){return xp(t.getTime(),e.getTime())}function F4e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function z4e(t,e){return t===e}function e7(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),s,o,l=0;(s=a.next())&&!s.done;){for(var u=e.entries(),d=!1,f=0;(o=u.next())&&!o.done;){if(i[f]){f++;continue}var p=s.value,h=o.value;if(n.equals(p[0],h[0],l,f,t,e,n)&&n.equals(p[1],h[1],p[0],h[0],t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1;l++}return!0}var $4e=xp;function B4e(t,e,n){var r=J8(t),i=r.length;if(J8(e).length!==i)return!1;for(;i-- >0;)if(!pY(t,e,n,r[i]))return!1;return!0}function Kv(t,e,n){var r=Q8(t),i=r.length;if(Q8(e).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=r[i],!pY(t,e,n,a)||(s=Z8(t,a),o=Z8(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function V4e(t,e){return xp(t.valueOf(),e.valueOf())}function U4e(t,e){return t.source===e.source&&t.flags===e.flags}function t7(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),s,o;(s=a.next())&&!s.done;){for(var l=e.values(),u=!1,d=0;(o=l.next())&&!o.done;){if(!i[d]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function W4e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function H4e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function pY(t,e,n,r){return(r===M4e||r===O4e||r===I4e)&&(t.$$typeof||e.$$typeof)?!0:D4e(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var q4e="[object Arguments]",K4e="[object Boolean]",G4e="[object Date]",Y4e="[object Error]",X4e="[object Map]",Q4e="[object Number]",Z4e="[object Object]",J4e="[object RegExp]",eTe="[object Set]",tTe="[object String]",nTe="[object URL]",rTe=Array.isArray,n7=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,r7=Object.assign,iTe=Object.prototype.toString.call.bind(Object.prototype.toString);function aTe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,p=t.areUrlsEqual,h=t.unknownTagComparators;return function(m,v,y){if(m===v)return!0;if(m==null||v==null)return!1;var b=typeof m;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?s(m,v,y):b==="function"?i(m,v,y):!1;var S=m.constructor;if(S!==v.constructor)return!1;if(S===Object)return o(m,v,y);if(rTe(m))return e(m,v,y);if(n7!=null&&n7(m))return f(m,v,y);if(S===Date)return n(m,v,y);if(S===RegExp)return u(m,v,y);if(S===Map)return a(m,v,y);if(S===Set)return d(m,v,y);var A=iTe(m);if(A===G4e)return n(m,v,y);if(A===J4e)return u(m,v,y);if(A===X4e)return a(m,v,y);if(A===eTe)return d(m,v,y);if(A===Z4e)return typeof m.then!="function"&&typeof v.then!="function"&&o(m,v,y);if(A===nTe)return p(m,v,y);if(A===Y4e)return r(m,v,y);if(A===q4e)return o(m,v,y);if(A===K4e||A===Q4e||A===tTe)return l(m,v,y);if(h){var C=h[A];if(!C){var D=T4e(m);D&&(C=h[D])}if(C)return C(m,v,y)}return!1}}function sTe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Kv:R4e,areDatesEqual:L4e,areErrorsEqual:F4e,areFunctionsEqual:z4e,areMapsEqual:r?X8(e7,Kv):e7,areNumbersEqual:$4e,areObjectsEqual:r?Kv:B4e,arePrimitiveWrappersEqual:V4e,areRegExpsEqual:U4e,areSetsEqual:r?X8(t7,Kv):t7,areTypedArraysEqual:r?Kv:W4e,areUrlsEqual:H4e,unknownTagComparators:void 0};if(n&&(i=r7({},i,n(i))),e){var a=t1(i.areArraysEqual),s=t1(i.areMapsEqual),o=t1(i.areObjectsEqual),l=t1(i.areSetsEqual);i=r7({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}function oTe(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function lTe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(l,u){var d=r(),f=d.cache,p=f===void 0?e?new WeakMap:void 0:f,h=d.meta;return n(l,u,{cache:p,equals:i,meta:h,strict:a})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,u){return n(l,u,s)}}var cTe=$f();$f({strict:!0});$f({circular:!0});$f({circular:!0,strict:!0});$f({createInternalComparator:function(){return xp}});$f({strict:!0,createInternalComparator:function(){return xp}});$f({circular:!0,createInternalComparator:function(){return xp}});$f({circular:!0,createInternalComparator:function(){return xp},strict:!0});function $f(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,s=a===void 0?!1:a,o=sTe(t),l=aTe(o),u=r?r(l):oTe(l);return lTe({circular:n,comparator:l,createState:i,equals:u,strict:s})}function uTe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function i7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):uTe(i)};requestAnimationFrame(r)}function aP(t){"@babel/helpers - typeof";return aP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aP(t)}function dTe(t){return mTe(t)||pTe(t)||hTe(t)||fTe()}function fTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hTe(t,e){if(t){if(typeof t=="string")return a7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a7(t,e)}}function a7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mTe(t){if(Array.isArray(t))return t}function gTe(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=dTe(s),l=o[0],u=o.slice(1);if(typeof l=="number"){i7(i.bind(null,u),l);return}i(l),i7(i.bind(null,u));return}aP(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Qy(t){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qy(t)}function s7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function o7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s7(Object(n),!0).forEach(function(r){mY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mY(t,e,n){return e=vTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vTe(t){var e=yTe(t,"string");return Qy(e)==="symbol"?e:String(e)}function yTe(t,e){if(Qy(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bTe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},xTe=function(e){return e},wTe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},M0=function(e,n){return Object.keys(n).reduce(function(r,i){return o7(o7({},r),{},mY({},i,e(i,n[i])))},{})},l7=function(e,n,r){return e.map(function(i){return"".concat(wTe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function STe(t,e){return CTe(t)||ATe(t,e)||gY(t,e)||_Te()}function _Te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ATe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function CTe(t){if(Array.isArray(t))return t}function jTe(t){return PTe(t)||NTe(t)||gY(t)||ETe()}function ETe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gY(t,e){if(t){if(typeof t=="string")return sP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sP(t,e)}}function NTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function PTe(t){if(Array.isArray(t))return sP(t)}function sP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Rw=1e-4,vY=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},yY=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},c7=function(e,n){return function(r){var i=vY(e,n);return yY(i,r)}},kTe=function(e,n){return function(r){var i=vY(e,n),a=[].concat(jTe(i.map(function(s,o){return s*o}).slice(1)),[0]);return yY(a,r)}},u7=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=STe(u,4);i=d[0],a=d[1],s=d[2],o=d[3]}}}var f=c7(i,s),p=c7(a,o),h=kTe(i,s),g=function(y){return y>1?1:y<0?0:y},m=function(y){for(var b=y>1?1:y,S=b,A=0;A<8;++A){var C=f(S)-b,D=h(S);if(Math.abs(C-b)<Rw||D<Rw)return p(S);S=g(S-C/D)}return p(S)};return m.isStepper=!1,m},TTe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,l=function(d,f,p){var h=-(d-f)*r,g=p*a,m=p+(h-g)*o/1e3,v=p*o/1e3+d;return Math.abs(v-f)<Rw&&Math.abs(m)<Rw?[f,0]:[v,m]};return l.isStepper=!0,l.dt=o,l},DTe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return u7(i);case"spring":return TTe();default:if(i.split("(")[0]==="cubic-bezier")return u7(i)}return typeof i=="function"?i:null};function Zy(t){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(t)}function d7(t){return MTe(t)||OTe(t)||bY(t)||ITe()}function ITe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MTe(t){if(Array.isArray(t))return lP(t)}function f7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function is(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f7(Object(n),!0).forEach(function(r){oP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oP(t,e,n){return e=RTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RTe(t){var e=LTe(t,"string");return Zy(e)==="symbol"?e:String(e)}function LTe(t,e){if(Zy(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FTe(t,e){return BTe(t)||$Te(t,e)||bY(t,e)||zTe()}function zTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bY(t,e){if(t){if(typeof t=="string")return lP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lP(t,e)}}function lP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $Te(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function BTe(t){if(Array.isArray(t))return t}var Lw=function(e,n,r){return e+(n-e)*r},cP=function(e){var n=e.from,r=e.to;return n!==r},VTe=function t(e,n,r){var i=M0(function(a,s){if(cP(s)){var o=e(s.from,s.to,s.velocity),l=FTe(o,2),u=l[0],d=l[1];return is(is({},s),{},{from:u,velocity:d})}return s},n);return r<1?M0(function(a,s){return cP(s)?is(is({},s),{},{velocity:Lw(s.velocity,i[a].velocity,r),from:Lw(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const UTe=function(t,e,n,r,i){var a=bTe(t,e),s=a.reduce(function(v,y){return is(is({},v),{},oP({},y,[t[y],e[y]]))},{}),o=a.reduce(function(v,y){return is(is({},v),{},oP({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,u,d,f=function(){return null},p=function(){return M0(function(y,b){return b.from},o)},h=function(){return!Object.values(o).filter(cP).length},g=function(y){u||(u=y);var b=y-u,S=b/n.dt;o=VTe(n,o,S),i(is(is(is({},t),e),p())),u=y,h()||(l=requestAnimationFrame(f))},m=function(y){d||(d=y);var b=(y-d)/r,S=M0(function(C,D){return Lw.apply(void 0,d7(D).concat([n(b)]))},s);if(i(is(is(is({},t),e),S)),b<1)l=requestAnimationFrame(f);else{var A=M0(function(C,D){return Lw.apply(void 0,d7(D).concat([n(1)]))},s);i(is(is(is({},t),e),A))}};return f=n.isStepper?g:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}var WTe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function HTe(t,e){if(t==null)return{};var n=qTe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qTe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function xC(t){return XTe(t)||YTe(t)||GTe(t)||KTe()}function KTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GTe(t,e){if(t){if(typeof t=="string")return uP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uP(t,e)}}function YTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function XTe(t){if(Array.isArray(t))return uP(t)}function uP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h7(Object(n),!0).forEach(function(r){d0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d0(t,e,n){return e=xY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xY(r.key),r)}}function JTe(t,e,n){return e&&ZTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xY(t){var e=e3e(t,"string");return Sg(e)==="symbol"?e:String(e)}function e3e(t,e){if(Sg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dP(t,e)}function dP(t,e){return dP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dP(t,e)}function n3e(t){var e=r3e();return function(){var r=Fw(t),i;if(e){var a=Fw(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return fP(this,i)}}function fP(t,e){if(e&&(Sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hP(t)}function hP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fw(t){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fw(t)}var ql=function(t){t3e(n,t);var e=n3e(n);function n(r,i){var a;QTe(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,l=s.attributeName,u=s.from,d=s.to,f=s.steps,p=s.children,h=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(hP(a)),a.changeStyle=a.changeStyle.bind(hP(a)),!o||h<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:d}),fP(a);if(f&&f.length)a.state={style:f[0].style};else if(u){if(typeof p=="function")return a.state={style:u},fP(a);a.state={style:l?d0({},l,u):u}}else a.state={style:{}};return a}return JTe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,d=a.to,f=a.from,p=this.state.style;if(o){if(!s){var h={style:l?d0({},l,d):d};this.state&&p&&(l&&p[l]!==d||!l&&p!==d)&&this.setState(h);return}if(!(cTe(i.to,d)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=g||u?f:i.to;if(this.state&&p){var v={style:l?d0({},l,m):m};(l&&p[l]!==m||!l&&p!==m)&&this.setState(v)}this.runAnimation(uc(uc({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,l=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,p=i.onAnimationStart,h=UTe(s,o,DTe(u),l,this.changeStyle),g=function(){a.stopJSAnimation=h()};this.manager.start([p,d,g,l,f])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,l=i.onAnimationStart,u=s[0],d=u.style,f=u.duration,p=f===void 0?0:f,h=function(m,v,y){if(y===0)return m;var b=v.duration,S=v.easing,A=S===void 0?"ease":S,C=v.style,D=v.properties,j=v.onAnimationEnd,N=y>0?s[y-1]:v,P=D||Object.keys(C);if(typeof A=="function"||A==="spring")return[].concat(xC(m),[a.runJSAnimation.bind(a,{from:N.style,to:C,duration:b,easing:A}),b]);var O=l7(P,b,A),T=uc(uc(uc({},N.style),C),{},{transition:O});return[].concat(xC(m),[T,b,j]).filter(xTe)};return this.manager.start([l].concat(xC(s.reduce(h,[d,Math.max(p,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=gTe());var a=i.begin,s=i.duration,o=i.attributeName,l=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,p=i.steps,h=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var m=o?d0({},o,l):l,v=l7(Object.keys(m),s,u);g.start([d,a,uc(uc({},m),{},{transition:v}),s,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=HTe(i,WTe),u=I.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!o||u===0||s<=0)return a;var f=function(h){var g=h.props,m=g.style,v=m===void 0?{}:m,y=g.className,b=I.cloneElement(h,uc(uc({},l),{},{style:uc(uc({},v),d),className:y}));return b};return u===1?f(I.Children.only(a)):be.createElement("div",null,I.Children.map(a,function(p){return f(p)}))}}]),n}(I.PureComponent);ql.displayName="Animate";ql.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ql.propTypes={from:Nr.oneOfType([Nr.object,Nr.string]),to:Nr.oneOfType([Nr.object,Nr.string]),attributeName:Nr.string,duration:Nr.number,begin:Nr.number,easing:Nr.oneOfType([Nr.string,Nr.func]),steps:Nr.arrayOf(Nr.shape({duration:Nr.number.isRequired,style:Nr.object.isRequired,easing:Nr.oneOfType([Nr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Nr.func]),properties:Nr.arrayOf("string"),onAnimationEnd:Nr.func})),children:Nr.oneOfType([Nr.node,Nr.func]),isActive:Nr.bool,canBegin:Nr.bool,onAnimationEnd:Nr.func,shouldReAnimate:Nr.bool,onAnimationStart:Nr.func,onAnimationReStart:Nr.func};function Jy(t){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jy(t)}function zw(){return zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zw.apply(this,arguments)}function i3e(t,e){return l3e(t)||o3e(t,e)||s3e(t,e)||a3e()}function a3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s3e(t,e){if(t){if(typeof t=="string")return p7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p7(t,e)}}function p7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function l3e(t){if(Array.isArray(t))return t}function m7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function g7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m7(Object(n),!0).forEach(function(r){c3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c3e(t,e,n){return e=u3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u3e(t){var e=d3e(t,"string");return Jy(e)=="symbol"?e:e+""}function d3e(t,e){if(Jy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v7=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var f=[0,0,0,0],p=0,h=4;p<h;p++)f[p]=a[p]>s?s:a[p];d="M".concat(e,",").concat(n+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+l*f[0],",").concat(n)),d+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*f[1])),d+="L ".concat(e+r,",").concat(n+i-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-l*f[2],",").concat(n+i)),d+="L ".concat(e+l*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*f[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var g=Math.min(s,a);d="M ".concat(e,",").concat(n+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+l*g,",").concat(n,`
            L `).concat(e+r-l*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*g,`
            L `).concat(e+r,",").concat(n+i-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+r-l*g,",").concat(n+i,`
            L `).concat(e+l*g,",").concat(n+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*g," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},f3e=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var u=Math.min(a,a+o),d=Math.max(a,a+o),f=Math.min(s,s+l),p=Math.max(s,s+l);return r>=u&&r<=d&&i>=f&&i<=p}return!1},h3e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},q3=function(e){var n=g7(g7({},h3e),e),r=I.useRef(),i=I.useState(-1),a=i3e(i,2),s=a[0],o=a[1];I.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var l=n.x,u=n.y,d=n.width,f=n.height,p=n.radius,h=n.className,g=n.animationEasing,m=n.animationDuration,v=n.animationBegin,y=n.isAnimationActive,b=n.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var S=Rn("recharts-rectangle",h);return b?be.createElement(ql,{canBegin:s>0,from:{width:d,height:f,x:l,y:u},to:{width:d,height:f,x:l,y:u},duration:m,animationEasing:g,isActive:b},function(A){var C=A.width,D=A.height,j=A.x,N=A.y;return be.createElement(ql,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:m,isActive:y,easing:g},be.createElement("path",zw({},un(n,!0),{className:S,d:v7(j,N,C,D,p),ref:r})))}):be.createElement("path",zw({},un(n,!0),{className:S,d:v7(l,u,d,f,p)}))},p3e=["points","className","baseLinePoints","connectNulls"];function pm(){return pm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pm.apply(this,arguments)}function m3e(t,e){if(t==null)return{};var n=g3e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function g3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function y7(t){return x3e(t)||b3e(t)||y3e(t)||v3e()}function v3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y3e(t,e){if(t){if(typeof t=="string")return pP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pP(t,e)}}function b3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function x3e(t){if(Array.isArray(t))return pP(t)}function pP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b7=function(e){return e&&e.x===+e.x&&e.y===+e.y},w3e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){b7(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),b7(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},R0=function(e,n){var r=w3e(e);n&&(r=[r.reduce(function(a,s){return[].concat(y7(a),y7(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,o,l){return"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},S3e=function(e,n,r){var i=R0(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(R0(n.reverse(),r).slice(1))},_3e=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,s=m3e(e,p3e);if(!n||!n.length)return null;var o=Rn("recharts-polygon",r);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",u=S3e(n,i,a);return be.createElement("g",{className:o},be.createElement("path",pm({},un(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),l?be.createElement("path",pm({},un(s,!0),{fill:"none",d:R0(n,a)})):null,l?be.createElement("path",pm({},un(s,!0),{fill:"none",d:R0(i,a)})):null)}var d=R0(n,a);return be.createElement("path",pm({},un(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:o,d}))};function mP(){return mP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mP.apply(this,arguments)}var Hb=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=Rn("recharts-dot",a);return n===+n&&r===+r&&i===+i?I.createElement("circle",mP({},un(e,!1),sw(e),{className:s,cx:n,cy:r,r:i})):null};function eb(t){"@babel/helpers - typeof";return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eb(t)}var A3e=["x","y","top","left","width","height","className"];function gP(){return gP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gP.apply(this,arguments)}function x7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x7(Object(n),!0).forEach(function(r){j3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j3e(t,e,n){return e=E3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E3e(t){var e=N3e(t,"string");return eb(e)=="symbol"?e:e+""}function N3e(t,e){if(eb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(eb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P3e(t,e){if(t==null)return{};var n=k3e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function k3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var T3e=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},D3e=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,l=e.left,u=l===void 0?0:l,d=e.width,f=d===void 0?0:d,p=e.height,h=p===void 0?0:p,g=e.className,m=P3e(e,A3e),v=C3e({x:r,y:a,top:o,left:u,width:f,height:h},m);return!Pt(r)||!Pt(a)||!Pt(f)||!Pt(h)||!Pt(o)||!Pt(u)?null:be.createElement("path",gP({},un(v,!0),{className:Rn("recharts-cross",g),d:T3e(r,a,f,h,o,u)}))},I3e=r_,O3e=DG,M3e=xu;function R3e(t,e){return t&&t.length?I3e(t,M3e(e),O3e):void 0}var L3e=R3e;const F3e=Pr(L3e);var z3e=r_,$3e=xu,B3e=IG;function V3e(t,e){return t&&t.length?z3e(t,$3e(e),B3e):void 0}var U3e=V3e;const W3e=Pr(U3e);var H3e=["cx","cy","angle","ticks","axisLine"],q3e=["ticks","tick","angle","tickFormatter","stroke"];function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function L0(){return L0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L0.apply(this,arguments)}function w7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w7(Object(n),!0).forEach(function(r){o_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S7(t,e){if(t==null)return{};var n=K3e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function K3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function G3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SY(r.key),r)}}function Y3e(t,e,n){return e&&_7(t.prototype,e),n&&_7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function X3e(t,e,n){return e=$w(e),Q3e(t,wY()?Reflect.construct(e,n||[],$w(t).constructor):e.apply(t,n))}function Q3e(t,e){if(e&&(_g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z3e(t)}function Z3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wY=function(){return!!t})()}function $w(t){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$w(t)}function J3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vP(t,e)}function vP(t,e){return vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vP(t,e)}function o_(t,e,n){return e=SY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SY(t){var e=eDe(t,"string");return _g(e)=="symbol"?e:e+""}function eDe(t,e){if(_g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_g(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var l_=function(t){function e(){return G3e(this,e),X3e(this,e,arguments)}return J3e(e,t),Y3e(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,o=a.cx,l=a.cy;return ri(o,l,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=F3e(o,function(d){return d.coordinate||0}),u=W3e(o,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=r.axisLine,u=S7(r,H3e),d=o.reduce(function(g,m){return[Math.min(g[0],m.coordinate),Math.max(g[1],m.coordinate)]},[1/0,-1/0]),f=ri(i,a,d[0],s),p=ri(i,a,d[1],s),h=Jf(Jf(Jf({},un(u,!1)),{},{fill:"none"},un(l,!1)),{},{x1:f.x,y1:f.y,x2:p.x,y2:p.y});return be.createElement("line",L0({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,l=i.tickFormatter,u=i.stroke,d=S7(i,q3e),f=this.getTickTextAnchor(),p=un(d,!1),h=un(s,!1),g=a.map(function(m,v){var y=r.getTickValueCoord(m),b=Jf(Jf(Jf(Jf({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(y.x,", ").concat(y.y,")")},p),{},{stroke:"none",fill:u},h),{},{index:v},y),{},{payload:m});return be.createElement(zn,L0({className:Rn("recharts-polar-radius-axis-tick",oY(s)),key:"tick-".concat(m.coordinate)},Af(r.props,m,v)),e.renderTickItem(s,b,l?l(m.value,v):m.value))});return be.createElement(zn,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:be.createElement(zn,{className:Rn("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),Wa.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return be.isValidElement(r)?s=be.cloneElement(r,i):Sn(r)?s=r(i):s=be.createElement(Zh,L0({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(I.PureComponent);o_(l_,"displayName","PolarRadiusAxis");o_(l_,"axisType","radiusAxis");o_(l_,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function mh(){return mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mh.apply(this,arguments)}function A7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A7(Object(n),!0).forEach(function(r){c_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,AY(r.key),r)}}function nDe(t,e,n){return e&&C7(t.prototype,e),n&&C7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rDe(t,e,n){return e=Bw(e),iDe(t,_Y()?Reflect.construct(e,n||[],Bw(t).constructor):e.apply(t,n))}function iDe(t,e){if(e&&(Ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aDe(t)}function aDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _Y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_Y=function(){return!!t})()}function Bw(t){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bw(t)}function sDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yP(t,e)}function yP(t,e){return yP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yP(t,e)}function c_(t,e,n){return e=AY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AY(t){var e=oDe(t,"string");return Ag(e)=="symbol"?e:e+""}function oDe(t,e){if(Ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ag(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lDe=Math.PI/180,j7=1e-5,u_=function(t){function e(){return tDe(this,e),rDe(this,e,arguments)}return sDe(e,t),nDe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.orientation,u=i.tickSize,d=u||8,f=ri(a,s,o,r.coordinate),p=ri(a,s,o+(l==="inner"?-1:1)*d,r.coordinate);return{x1:f.x,y1:f.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*lDe),s;return a>j7?s=i==="outer"?"start":"end":a<-j7?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,o=r.axisLine,l=r.axisLineType,u=eh(eh({},un(this.props,!1)),{},{fill:"none"},un(o,!1));if(l==="circle")return be.createElement(Hb,mh({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var d=this.props.ticks,f=d.map(function(p){return ri(i,a,s,p.coordinate)});return be.createElement(_3e,mh({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,l=i.tickFormatter,u=i.stroke,d=un(this.props,!1),f=un(s,!1),p=eh(eh({},d),{},{fill:"none"},un(o,!1)),h=a.map(function(g,m){var v=r.getTickLineCoord(g),y=r.getTickTextAnchor(g),b=eh(eh(eh({textAnchor:y},d),{},{stroke:"none",fill:u},f),{},{index:m,payload:g,x:v.x2,y:v.y2});return be.createElement(zn,mh({className:Rn("recharts-polar-angle-axis-tick",oY(s)),key:"tick-".concat(g.coordinate)},Af(r.props,g,m)),o&&be.createElement("line",mh({className:"recharts-polar-angle-axis-tick-line"},p,v)),s&&e.renderTickItem(s,b,l?l(g.value,m):g.value))});return be.createElement(zn,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:be.createElement(zn,{className:Rn("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return be.isValidElement(r)?s=be.cloneElement(r,i):Sn(r)?s=r(i):s=be.createElement(Zh,mh({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(I.PureComponent);c_(u_,"displayName","PolarAngleAxis");c_(u_,"axisType","angleAxis");c_(u_,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var cDe=NK,uDe=cDe(Object.getPrototypeOf,Object),dDe=uDe,fDe=gd,hDe=dDe,pDe=vd,mDe="[object Object]",gDe=Function.prototype,vDe=Object.prototype,CY=gDe.toString,yDe=vDe.hasOwnProperty,bDe=CY.call(Object);function xDe(t){if(!pDe(t)||fDe(t)!=mDe)return!1;var e=hDe(t);if(e===null)return!0;var n=yDe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&CY.call(n)==bDe}var wDe=xDe;const SDe=Pr(wDe);var _De=gd,ADe=vd,CDe="[object Boolean]";function jDe(t){return t===!0||t===!1||ADe(t)&&_De(t)==CDe}var EDe=jDe;const NDe=Pr(EDe);function tb(t){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(t)}function Vw(){return Vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vw.apply(this,arguments)}function PDe(t,e){return IDe(t)||DDe(t,e)||TDe(t,e)||kDe()}function kDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TDe(t,e){if(t){if(typeof t=="string")return E7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E7(t,e)}}function E7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DDe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function IDe(t){if(Array.isArray(t))return t}function N7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N7(Object(n),!0).forEach(function(r){ODe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ODe(t,e,n){return e=MDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MDe(t){var e=RDe(t,"string");return tb(e)=="symbol"?e:e+""}function RDe(t,e){if(tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k7=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},LDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FDe=function(e){var n=P7(P7({},LDe),e),r=I.useRef(),i=I.useState(-1),a=PDe(i,2),s=a[0],o=a[1];I.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&o(S)}catch{}},[]);var l=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,p=n.height,h=n.className,g=n.animationEasing,m=n.animationDuration,v=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||p!==+p||d===0&&f===0||p===0)return null;var b=Rn("recharts-trapezoid",h);return y?be.createElement(ql,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:p,x:l,y:u},to:{upperWidth:d,lowerWidth:f,height:p,x:l,y:u},duration:m,animationEasing:g,isActive:y},function(S){var A=S.upperWidth,C=S.lowerWidth,D=S.height,j=S.x,N=S.y;return be.createElement(ql,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:m,easing:g},be.createElement("path",Vw({},un(n,!0),{className:b,d:k7(j,N,A,C,D),ref:r})))}):be.createElement("g",null,be.createElement("path",Vw({},un(n,!0),{className:b,d:k7(l,u,d,f,p)})))},zDe=["option","shapeType","propTransformer","activeClassName","isActive"];function nb(t){"@babel/helpers - typeof";return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nb(t)}function $De(t,e){if(t==null)return{};var n=BDe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BDe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function T7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T7(Object(n),!0).forEach(function(r){VDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VDe(t,e,n){return e=UDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UDe(t){var e=WDe(t,"string");return nb(e)=="symbol"?e:e+""}function WDe(t,e){if(nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HDe(t,e){return Uw(Uw({},e),t)}function qDe(t,e){return t==="symbols"}function D7(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return be.createElement(q3,n);case"trapezoid":return be.createElement(FDe,n);case"sector":return be.createElement(uY,n);case"symbols":if(qDe(e))return be.createElement(KS,n);break;default:return null}}function KDe(t){return I.isValidElement(t)?t.props:t}function Ww(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?HDe:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,l=$De(t,zDe),u;if(I.isValidElement(e))u=I.cloneElement(e,Uw(Uw({},l),KDe(e)));else if(Sn(e))u=e(l);else if(SDe(e)&&!NDe(e)){var d=i(e,l);u=be.createElement(D7,{shapeType:n,elementProps:d})}else{var f=l;u=be.createElement(D7,{shapeType:n,elementProps:f})}return o?be.createElement(zn,{className:s},u):u}function d_(t,e){return e!=null&&"trapezoids"in t.props}function f_(t,e){return e!=null&&"sectors"in t.props}function rb(t,e){return e!=null&&"points"in t.props}function GDe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function YDe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function XDe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function QDe(t,e){var n;return d_(t,e)?n=GDe:f_(t,e)?n=YDe:rb(t,e)&&(n=XDe),n}function ZDe(t,e){var n;return d_(t,e)?n="trapezoids":f_(t,e)?n="sectors":rb(t,e)&&(n="points"),n}function JDe(t,e){if(d_(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(f_(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return rb(t,e)?e.payload:{}}function eIe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=ZDe(n,e),a=JDe(n,e),s=r.filter(function(l,u){var d=Cf(a,l),f=n.props[i].filter(function(g){var m=QDe(n,e);return m(g,e)}),p=n.props[i].indexOf(f[f.length-1]),h=u===p;return d&&h}),o=r.indexOf(s[s.length-1]);return o}var Z1;function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function mm(){return mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mm.apply(this,arguments)}function I7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I7(Object(n),!0).forEach(function(r){Ll(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EY(r.key),r)}}function nIe(t,e,n){return e&&O7(t.prototype,e),n&&O7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rIe(t,e,n){return e=Hw(e),iIe(t,jY()?Reflect.construct(e,n||[],Hw(t).constructor):e.apply(t,n))}function iIe(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aIe(t)}function aIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jY=function(){return!!t})()}function Hw(t){return Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hw(t)}function sIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bP(t,e)}function bP(t,e){return bP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bP(t,e)}function Ll(t,e,n){return e=EY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EY(t){var e=oIe(t,"string");return Cg(e)=="symbol"?e:e+""}function oIe(t,e){if(Cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ec=function(t){function e(n){var r;return tIe(this,e),r=rIe(this,e,[n]),Ll(r,"pieRef",null),Ll(r,"sectorRefs",[]),Ll(r,"id",Lf("recharts-pie-")),Ll(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Sn(i)&&i()}),Ll(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Sn(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return sIe(e,t),nIe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,l=a.dataKey,u=a.valueKey,d=un(this.props,!1),f=un(s,!1),p=un(o,!1),h=s&&s.offsetRadius||20,g=r.map(function(m,v){var y=(m.startAngle+m.endAngle)/2,b=ri(m.cx,m.cy,m.outerRadius+h,y),S=Jr(Jr(Jr(Jr({},d),m),{},{stroke:"none"},f),{},{index:v,textAnchor:e.getTextAnchor(b.x,m.cx)},b),A=Jr(Jr(Jr(Jr({},d),m),{},{fill:"none",stroke:m.fill},p),{},{index:v,points:[ri(m.cx,m.cy,m.outerRadius,y),b]}),C=l;return wn(l)&&wn(u)?C="value":wn(l)&&(C=u),be.createElement(zn,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(v)},o&&e.renderLabelLineItem(o,A,"line"),e.renderLabelItem(s,S,vi(m,C)))});return be.createElement(zn,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,l=a.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(d),p=l&&i.hasActiveIndex()?l:null,h=f?s:p,g=Jr(Jr({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return be.createElement(zn,mm({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Af(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),be.createElement(Ww,mm({option:h,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,p=f.prevSectors,h=f.prevIsAnimationActive;return be.createElement(ql,{begin:o,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var m=g.t,v=[],y=a&&a[0],b=y.startAngle;return a.forEach(function(S,A){var C=p&&p[A],D=A>0?cl(S,"paddingAngle",0):0;if(C){var j=Pi(C.endAngle-C.startAngle,S.endAngle-S.startAngle),N=Jr(Jr({},S),{},{startAngle:b+D,endAngle:b+j(m)+D});v.push(N),b=N.endAngle}else{var P=S.endAngle,O=S.startAngle,T=Pi(0,P-O),M=T(m),L=Jr(Jr({},S),{},{startAngle:b+D,endAngle:b+M+D});v.push(L),b=L.endAngle}}),be.createElement(zn,null,r.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!Cf(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,l=i.label,u=i.cx,d=i.cy,f=i.innerRadius,p=i.outerRadius,h=i.isAnimationActive,g=this.state.isAnimationFinished;if(a||!s||!s.length||!Pt(u)||!Pt(d)||!Pt(f)||!Pt(p))return null;var m=Rn("recharts-pie",o);return be.createElement(zn,{tabIndex:this.props.rootTabIndex,className:m,ref:function(y){r.pieRef=y}},this.renderSectors(),l&&this.renderLabels(s),Wa.renderCallByParent(this.props,null,!1),(!h||g)&&ao.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(be.isValidElement(r))return be.cloneElement(r,i);if(Sn(r))return r(i);var s=Rn("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return be.createElement(pf,mm({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(be.isValidElement(r))return be.cloneElement(r,i);var s=a;if(Sn(r)&&(s=r(i),be.isValidElement(s)))return s;var o=Rn("recharts-pie-label-text",typeof r!="boolean"&&!Sn(r)?r.className:"");return be.createElement(Zh,mm({},i,{alignmentBaseline:"middle",className:o}),s)}}])}(I.PureComponent);Z1=Ec;Ll(Ec,"displayName","Pie");Ll(Ec,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!yd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ll(Ec,"parseDeltaAngle",function(t,e){var n=eo(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Ll(Ec,"getRealPieData",function(t){var e=t.data,n=t.children,r=un(t,!1),i=io(n,hl);return e&&e.length?e.map(function(a,s){return Jr(Jr(Jr({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return Jr(Jr({},r),a.props)}):[]});Ll(Ec,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,s=sY(i,a),o=r+to(t.cx,i,i/2),l=n+to(t.cy,a,a/2),u=to(t.innerRadius,s,0),d=to(t.outerRadius,s,s*.8),f=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:l,innerRadius:u,outerRadius:d,maxRadius:f}});Ll(Ec,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Jr(Jr({},e.type.defaultProps),e.props):e.props,i=Z1.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,l=r.paddingAngle,u=r.dataKey,d=r.nameKey,f=r.valueKey,p=r.tooltipType,h=Math.abs(r.minAngle),g=Z1.parseCoordinateOfPie(r,n),m=Z1.parseDeltaAngle(s,o),v=Math.abs(m),y=u;wn(u)&&wn(f)?(wc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):wn(u)&&(wc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var b=i.filter(function(N){return vi(N,y,0)!==0}).length,S=(v>=360?b:b-1)*l,A=v-b*h-S,C=i.reduce(function(N,P){var O=vi(P,y,0);return N+(Pt(O)?O:0)},0),D;if(C>0){var j;D=i.map(function(N,P){var O=vi(N,y,0),T=vi(N,d,P),M=(Pt(O)?O:0)/C,L;P?L=j.endAngle+eo(m)*l*(O!==0?1:0):L=s;var V=L+eo(m)*((O!==0?h:0)+M*A),K=(L+V)/2,Z=(g.innerRadius+g.outerRadius)/2,Y=[{name:T,value:O,payload:N,dataKey:y,type:p}],H=ri(g.cx,g.cy,Z,K);return j=Jr(Jr(Jr({percent:M,cornerRadius:a,name:T,tooltipPayload:Y,midAngle:K,middleRadius:Z,tooltipPosition:H},N),g),{},{value:vi(N,y),startAngle:L,endAngle:V,payload:N,paddingAngle:eo(m)*l}),j})}return Jr(Jr({},g),{},{sectors:D,data:i})});var lIe=Math.ceil,cIe=Math.max;function uIe(t,e,n,r){for(var i=-1,a=cIe(lIe((e-t)/(n||1)),0),s=Array(a);a--;)s[r?a:++i]=t,t+=n;return s}var dIe=uIe,fIe=KK,M7=1/0,hIe=17976931348623157e292;function pIe(t){if(!t)return t===0?t:0;if(t=fIe(t),t===M7||t===-M7){var e=t<0?-1:1;return e*hIe}return t===t?t:0}var NY=pIe,mIe=dIe,gIe=XS,wC=NY;function vIe(t){return function(e,n,r){return r&&typeof r!="number"&&gIe(e,n,r)&&(n=r=void 0),e=wC(e),n===void 0?(n=e,e=0):n=wC(n),r=r===void 0?e<n?1:-1:wC(r),mIe(e,n,r,t)}}var yIe=vIe,bIe=yIe,xIe=bIe(),wIe=xIe;const qw=Pr(wIe);function ib(t){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function R7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R7(Object(n),!0).forEach(function(r){PY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PY(t,e,n){return e=SIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SIe(t){var e=_Ie(t,"string");return ib(e)=="symbol"?e:e+""}function _Ie(t,e){if(ib(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ib(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AIe=["Webkit","Moz","O","ms"],CIe=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=AIe.reduce(function(a,s){return L7(L7({},a),{},PY({},s+r,n))},{});return i[e]=n,i};function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function Kw(){return Kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kw.apply(this,arguments)}function F7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F7(Object(n),!0).forEach(function(r){Zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TY(r.key),r)}}function EIe(t,e,n){return e&&z7(t.prototype,e),n&&z7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function NIe(t,e,n){return e=Gw(e),PIe(t,kY()?Reflect.construct(e,n||[],Gw(t).constructor):e.apply(t,n))}function PIe(t,e){if(e&&(jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kIe(t)}function kIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kY=function(){return!!t})()}function Gw(t){return Gw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gw(t)}function TIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xP(t,e)}function xP(t,e){return xP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xP(t,e)}function Zo(t,e,n){return e=TY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TY(t){var e=DIe(t,"string");return jg(e)=="symbol"?e:e+""}function DIe(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var IIe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=I0().domain(qw(0,l)).range([a,a+s-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},$7=function(e){return e.changedTouches&&!!e.changedTouches.length},Eg=function(t){function e(n){var r;return jIe(this,e),r=NIe(this,e,[n]),Zo(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Zo(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Zo(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),Zo(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Zo(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Zo(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Zo(r,"handleSlideDragStart",function(i){var a=$7(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return TIe(e,t),EIe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,l=o.gap,u=o.data,d=u.length-1,f=Math.min(i,a),p=Math.max(i,a),h=e.getIndexInRange(s,f),g=e.getIndexInRange(s,p);return{startIndex:h-h%l,endIndex:g===d?d:g-g%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,l=vi(a[r],o,r);return Sn(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,l=this.props,u=l.x,d=l.width,f=l.travellerWidth,p=l.startIndex,h=l.endIndex,g=l.onChange,m=r.pageX-a;m>0?m=Math.min(m,u+d-f-o,u+d-f-s):m<0&&(m=Math.max(m,u-s,u-o));var v=this.getIndex({startX:s+m,endX:o+m});(v.startIndex!==p||v.endIndex!==h)&&g&&g(v),this.setState({startX:s+m,endX:o+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=$7(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,l=i.startX,u=this.state[s],d=this.props,f=d.x,p=d.width,h=d.travellerWidth,g=d.onChange,m=d.gap,v=d.data,y={startX:this.state.startX,endX:this.state.endX},b=r.pageX-a;b>0?b=Math.min(b,f+p-h-u):b<0&&(b=Math.max(b,f-u)),y[s]=u+b;var S=this.getIndex(y),A=S.startIndex,C=S.endIndex,D=function(){var N=v.length-1;return s==="startX"&&(o>l?A%m===0:C%m===0)||o<l&&C===N||s==="endX"&&(o>l?C%m===0:A%m===0)||o>l&&C===N};this.setState(Zo(Zo({},s,u+b),"brushMoveStartX",r.pageX),function(){g&&D()&&g(S)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,l=s.startX,u=s.endX,d=this.state[i],f=o.indexOf(d);if(f!==-1){var p=f+r;if(!(p===-1||p>=o.length)){var h=o[p];i==="startX"&&h>=u||i==="endX"&&h<=l||this.setState(Zo({},i,h),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.fill,u=r.stroke;return be.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.data,u=r.children,d=r.padding,f=I.Children.only(u);return f?be.cloneElement(f,{x:i,y:a,width:s,height:o,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,l=this.props,u=l.y,d=l.travellerWidth,f=l.height,p=l.traveller,h=l.ariaLabel,g=l.data,m=l.startIndex,v=l.endIndex,y=Math.max(r,this.props.x),b=SC(SC({},un(this.props,!1)),{},{x:y,y:u,width:d,height:f}),S=h||"Min value: ".concat((a=g[m])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=g[v])===null||s===void 0?void 0:s.name);return be.createElement(zn,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),o.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,b))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,l=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return be.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:s,width:f,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,l=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,p=d.endX,h=5,g={pointerEvents:"none",fill:u};return be.createElement(zn,{className:"recharts-brush-texts"},be.createElement(Zh,Kw({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-h,y:s+o/2},g),this.getTextOfTick(i)),be.createElement(Zh,Kw({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+l+h,y:s+o/2},g),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,l=r.y,u=r.width,d=r.height,f=r.alwaysShowText,p=this.state,h=p.startX,g=p.endX,m=p.isTextActive,v=p.isSlideMoving,y=p.isTravellerMoving,b=p.isTravellerFocused;if(!i||!i.length||!Pt(o)||!Pt(l)||!Pt(u)||!Pt(d)||u<=0||d<=0)return null;var S=Rn("recharts-brush",a),A=be.Children.count(s)===1,C=CIe("userSelect","none");return be.createElement(zn,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(h,g),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(g,"endX"),(m||v||y||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,l=r.stroke,u=Math.floor(a+o/2)-1;return be.createElement(be.Fragment,null,be.createElement("rect",{x:i,y:a,width:s,height:o,fill:l,stroke:"none"}),be.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),be.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return be.isValidElement(r)?a=be.cloneElement(r,i):Sn(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,l=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return SC({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?IIe({data:a,width:s,x:o,travellerWidth:l,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+s-l]);var p=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);r[l]>i?o=l:s=l}return i>=r[o]?o:s}}])}(I.PureComponent);Zo(Eg,"displayName","Brush");Zo(Eg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var OIe=y3;function MIe(t,e){var n;return OIe(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var RIe=MIe,LIe=xK,FIe=xu,zIe=RIe,$Ie=ko,BIe=XS;function VIe(t,e,n){var r=$Ie(t)?LIe:zIe;return n&&BIe(t,e,n)&&(e=void 0),r(t,FIe(e))}var UIe=VIe;const WIe=Pr(UIe);var uu=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},B7=VK;function HIe(t,e,n){e=="__proto__"&&B7?B7(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var qIe=HIe,KIe=qIe,GIe=$K,YIe=xu;function XIe(t,e){var n={};return e=YIe(e),GIe(t,function(r,i,a){KIe(n,i,e(r,i,a))}),n}var QIe=XIe;const ZIe=Pr(QIe);function JIe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var eOe=JIe,tOe=y3;function nOe(t,e){var n=!0;return tOe(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var rOe=nOe,iOe=eOe,aOe=rOe,sOe=xu,oOe=ko,lOe=XS;function cOe(t,e,n){var r=oOe(t)?iOe:aOe;return n&&lOe(t,e,n)&&(e=void 0),r(t,sOe(e))}var uOe=cOe;const DY=Pr(uOe);var dOe=["x","y"];function ab(t){"@babel/helpers - typeof";return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(t)}function wP(){return wP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wP.apply(this,arguments)}function V7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V7(Object(n),!0).forEach(function(r){fOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fOe(t,e,n){return e=hOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hOe(t){var e=pOe(t,"string");return ab(e)=="symbol"?e:e+""}function pOe(t,e){if(ab(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ab(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mOe(t,e){if(t==null)return{};var n=gOe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vOe(t,e){var n=t.x,r=t.y,i=mOe(t,dOe),a="".concat(n),s=parseInt(a,10),o="".concat(r),l=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),p=parseInt(f,10);return Gv(Gv(Gv(Gv(Gv({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function U7(t){return be.createElement(Ww,wP({shapeType:"rectangle",propTransformer:vOe,activeClassName:"recharts-active-bar"},t))}var yOe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=Pt(r)||V0e(r);return a?e(r,i):(a||ep(),n)}},bOe=["value","background"],IY;function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function xOe(t,e){if(t==null)return{};var n=wOe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yw(){return Yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yw.apply(this,arguments)}function W7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W7(Object(n),!0).forEach(function(r){Yd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MY(r.key),r)}}function _Oe(t,e,n){return e&&H7(t.prototype,e),n&&H7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function AOe(t,e,n){return e=Xw(e),COe(t,OY()?Reflect.construct(e,n||[],Xw(t).constructor):e.apply(t,n))}function COe(t,e){if(e&&(Ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jOe(t)}function jOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OY=function(){return!!t})()}function Xw(t){return Xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xw(t)}function EOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SP(t,e)}function SP(t,e){return SP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SP(t,e)}function Yd(t,e,n){return e=MY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MY(t){var e=NOe(t,"string");return Ng(e)=="symbol"?e:e+""}function NOe(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ng(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ti=function(t){function e(){var n;SOe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=AOe(this,e,[].concat(i)),Yd(n,"state",{isAnimationFinished:!1}),Yd(n,"id",Lf("recharts-bar-")),Yd(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),Yd(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return EOe(e,t),_Oe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,u=a.activeBar,d=un(this.props,!1);return r&&r.map(function(f,p){var h=p===l,g=h?u:s,m=pa(pa(pa({},d),f),{},{isActive:h,option:g,index:p,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return be.createElement(zn,Yw({className:"recharts-bar-rectangle"},Af(i.props,f,p),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(p)}),be.createElement(U7,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,p=this.state.prevData;return be.createElement(ql,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var g=h.t,m=a.map(function(v,y){var b=p&&p[y];if(b){var S=Pi(b.x,v.x),A=Pi(b.y,v.y),C=Pi(b.width,v.width),D=Pi(b.height,v.height);return pa(pa({},v),{},{x:S(g),y:A(g),width:C(g),height:D(g)})}if(s==="horizontal"){var j=Pi(0,v.height),N=j(g);return pa(pa({},v),{},{y:v.y+v.height-N,height:N})}var P=Pi(0,v.width),O=P(g);return pa(pa({},v),{},{width:O})});return be.createElement(zn,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Cf(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,l=un(this.props.background,!1);return a.map(function(u,d){u.value;var f=u.background,p=xOe(u,bOe);if(!f)return null;var h=pa(pa(pa(pa(pa({},p),{},{fill:"#eee"},f),l),Af(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return be.createElement(U7,Yw({key:"background-bar-".concat(d),option:r.props.background,isActive:d===o},h))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,f=io(d,gv);if(!f)return null;var p=u==="vertical"?s[0].height/2:s[0].width/2,h=function(v,y){var b=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:b,errorVal:vi(v,y)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return be.createElement(zn,g,f.map(function(m){return be.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,offset:p,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,l=r.yAxis,u=r.left,d=r.top,f=r.width,p=r.height,h=r.isAnimationActive,g=r.background,m=r.id;if(i||!a||!a.length)return null;var v=this.state.isAnimationFinished,y=Rn("recharts-bar",s),b=o&&o.allowDataOverflow,S=l&&l.allowDataOverflow,A=b||S,C=wn(m)?this.id:m;return be.createElement(zn,{className:y},b||S?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(C)},be.createElement("rect",{x:b?u:u-f/2,y:S?d:d-p/2,width:b?f:f*2,height:S?p:p*2}))):null,be.createElement(zn,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(C,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,C),(!h||v)&&ao.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(I.PureComponent);IY=Ti;Yd(Ti,"displayName","Bar");Yd(Ti,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!yd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Yd(Ti,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,p=t.offset,h=oke(r,n);if(!h)return null;var g=e.layout,m=n.type.defaultProps,v=m!==void 0?pa(pa({},m),n.props):n.props,y=v.dataKey,b=v.children,S=v.minPointSize,A=g==="horizontal"?s:a,C=u?A.scale.domain():null,D=pke({numericAxis:A}),j=io(b,hl),N=f.map(function(P,O){var T,M,L,V,K,Z;u?T=lke(u[d+O],C):(T=vi(P,y),Array.isArray(T)||(T=[D,T]));var Y=yOe(S,IY.defaultProps.minPointSize)(T[1],O);if(g==="horizontal"){var H,ee=[s.scale(T[0]),s.scale(T[1])],le=ee[0],se=ee[1];M=O8({axis:a,ticks:o,bandSize:i,offset:h.offset,entry:P,index:O}),L=(H=se??le)!==null&&H!==void 0?H:void 0,V=h.size;var $=le-se;if(K=Number.isNaN($)?0:$,Z={x:M,y:s.y,width:V,height:s.height},Math.abs(Y)>0&&Math.abs(K)<Math.abs(Y)){var X=eo(K||Y)*(Math.abs(Y)-Math.abs(K));L-=X,K+=X}}else{var te=[a.scale(T[0]),a.scale(T[1])],oe=te[0],me=te[1];if(M=oe,L=O8({axis:s,ticks:l,bandSize:i,offset:h.offset,entry:P,index:O}),V=me-oe,K=h.size,Z={x:a.x,y:L,width:a.width,height:K},Math.abs(Y)>0&&Math.abs(V)<Math.abs(Y)){var _e=eo(V||Y)*(Math.abs(Y)-Math.abs(V));V+=_e}}return pa(pa(pa({},P),{},{x:M,y:L,width:V,height:K,value:u?T:T[1],payload:P,background:Z},j&&j[O]&&j[O].props),{},{tooltipPayload:[iY(n,P)],tooltipPosition:{x:M+V/2,y:L+K/2}})});return pa({data:N,layout:g},p)});function sb(t){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(t)}function POe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RY(r.key),r)}}function kOe(t,e,n){return e&&q7(t.prototype,e),n&&q7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function K7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K7(Object(n),!0).forEach(function(r){h_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h_(t,e,n){return e=RY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RY(t){var e=TOe(t,"string");return sb(e)=="symbol"?e:e+""}function TOe(t,e){if(sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p_=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.layout,u=e.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},p=!!el(u,Ti);return d.reduce(function(h,g){var m=n[g],v=m.orientation,y=m.domain,b=m.padding,S=b===void 0?{}:b,A=m.mirror,C=m.reversed,D="".concat(v).concat(A?"Mirror":""),j,N,P,O,T;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var M=y[1]-y[0],L=1/0,V=m.categoricalDomain.sort(q0e);if(V.forEach(function(te,oe){oe>0&&(L=Math.min((te||0)-(V[oe-1]||0),L))}),Number.isFinite(L)){var K=L/M,Z=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(j=K*Z/2),m.padding==="no-gap"){var Y=to(e.barCategoryGap,K*Z),H=K*Z/2;j=H-Y-(H-Y)/Z*Y}}}i==="xAxis"?N=[r.left+(S.left||0)+(j||0),r.left+r.width-(S.right||0)-(j||0)]:i==="yAxis"?N=l==="horizontal"?[r.top+r.height-(S.bottom||0),r.top+(S.top||0)]:[r.top+(S.top||0)+(j||0),r.top+r.height-(S.bottom||0)-(j||0)]:N=m.range,C&&(N=[N[1],N[0]]);var ee=eY(m,a,p),le=ee.scale,se=ee.realScaleType;le.domain(y).range(N),tY(le);var $=nY(le,mc(mc({},m),{},{realScaleType:se}));i==="xAxis"?(T=v==="top"&&!A||v==="bottom"&&A,P=r.left,O=f[D]-T*m.height):i==="yAxis"&&(T=v==="left"&&!A||v==="right"&&A,P=f[D]-T*m.width,O=r.top);var X=mc(mc(mc({},m),$),{},{realScaleType:se,x:P,y:O,scale:le,width:i==="xAxis"?r.width:m.width,height:i==="yAxis"?r.height:m.height});return X.bandSize=Iw(X,$),!m.hide&&i==="xAxis"?f[D]+=(T?-1:1)*X.height:m.hide||(f[D]+=(T?-1:1)*X.width),mc(mc({},h),{},h_({},g,X))},{})},LY=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},DOe=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return LY({x:n,y:r},{x:i,y:a})},FY=function(){function t(e){POe(this,t),this.scale=e}return kOe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();h_(FY,"EPS",1e-4);var K3=function(e){var n=Object.keys(e).reduce(function(r,i){return mc(mc({},r),{},h_({},i,FY.create(e[i])))},{});return mc(mc({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return ZIe(i,function(l,u){return n[u].apply(l,{bandAware:s,position:o})})},isInRange:function(i){return DY(i,function(a,s){return n[s].isInRange(a)})}})};function IOe(t){return(t%180+180)%180}var OOe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=IOe(i),s=a*Math.PI/180,o=Math.atan(r/n),l=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},MOe=xu,ROe=$b,LOe=GS;function FOe(t){return function(e,n,r){var i=Object(e);if(!ROe(e)){var a=MOe(n);e=LOe(e),n=function(o){return a(i[o],o,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:void 0}}var zOe=FOe,$Oe=NY;function BOe(t){var e=$Oe(t),n=e%1;return e===e?n?e-n:e:0}var VOe=BOe,UOe=OK,WOe=xu,HOe=VOe,qOe=Math.max;function KOe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:HOe(n);return i<0&&(i=qOe(r+i,0)),UOe(t,WOe(e),i)}var GOe=KOe,YOe=zOe,XOe=GOe,QOe=YOe(XOe),ZOe=QOe;const JOe=Pr(ZOe);var eMe=Gve(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),G3=I.createContext(void 0),Y3=I.createContext(void 0),zY=I.createContext(void 0),$Y=I.createContext({}),BY=I.createContext(void 0),VY=I.createContext(0),UY=I.createContext(0),G7=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,l=e.width,u=e.height,d=eMe(a);return be.createElement(G3.Provider,{value:r},be.createElement(Y3.Provider,{value:i},be.createElement($Y.Provider,{value:a},be.createElement(zY.Provider,{value:d},be.createElement(BY.Provider,{value:s},be.createElement(VY.Provider,{value:u},be.createElement(UY.Provider,{value:l},o)))))))},tMe=function(){return I.useContext(BY)},WY=function(e){var n=I.useContext(G3);n==null&&ep();var r=n[e];return r==null&&ep(),r},nMe=function(){var e=I.useContext(G3);return Ud(e)},rMe=function(){var e=I.useContext(Y3),n=JOe(e,function(r){return DY(r.domain,Number.isFinite)});return n||Ud(e)},HY=function(e){var n=I.useContext(Y3);n==null&&ep();var r=n[e];return r==null&&ep(),r},iMe=function(){var e=I.useContext(zY);return e},aMe=function(){return I.useContext($Y)},X3=function(){return I.useContext(UY)},Q3=function(){return I.useContext(VY)};function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function sMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KY(r.key),r)}}function lMe(t,e,n){return e&&oMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cMe(t,e,n){return e=Qw(e),uMe(t,qY()?Reflect.construct(e,n||[],Qw(t).constructor):e.apply(t,n))}function uMe(t,e){if(e&&(Pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dMe(t)}function dMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qY=function(){return!!t})()}function Qw(t){return Qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qw(t)}function fMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_P(t,e)}function _P(t,e){return _P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_P(t,e)}function Y7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y7(Object(n),!0).forEach(function(r){Z3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z3(t,e,n){return e=KY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KY(t){var e=hMe(t,"string");return Pg(e)=="symbol"?e:e+""}function hMe(t,e){if(Pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pMe(t,e){return yMe(t)||vMe(t,e)||gMe(t,e)||mMe()}function mMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gMe(t,e){if(t){if(typeof t=="string")return Q7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q7(t,e)}}function Q7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vMe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function yMe(t){if(Array.isArray(t))return t}function AP(){return AP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AP.apply(this,arguments)}var bMe=function(e,n){var r;return be.isValidElement(e)?r=be.cloneElement(e,n):Sn(e)?r=e(n):r=be.createElement("line",AP({},n,{className:"recharts-reference-line-line"})),r},xMe=function(e,n,r,i,a,s,o,l,u){var d=a.x,f=a.y,p=a.width,h=a.height;if(r){var g=u.y,m=e.y.apply(g,{position:s});if(uu(u,"discard")&&!e.y.isInRange(m))return null;var v=[{x:d+p,y:m},{x:d,y:m}];return l==="left"?v.reverse():v}if(n){var y=u.x,b=e.x.apply(y,{position:s});if(uu(u,"discard")&&!e.x.isInRange(b))return null;var S=[{x:b,y:f+h},{x:b,y:f}];return o==="top"?S.reverse():S}if(i){var A=u.segment,C=A.map(function(D){return e.apply(D,{position:s})});return uu(u,"discard")&&WIe(C,function(D){return!e.isInRange(D)})?null:C}return null};function wMe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,l=t.alwaysShow,u=tMe(),d=WY(i),f=HY(a),p=iMe();if(!u||!p)return null;wc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=K3({x:d.scale,y:f.scale}),g=Ra(e),m=Ra(n),v=r&&r.length===2,y=xMe(h,g,m,v,p,t.position,d.orientation,f.orientation,t);if(!y)return null;var b=pMe(y,2),S=b[0],A=S.x,C=S.y,D=b[1],j=D.x,N=D.y,P=uu(t,"hidden")?"url(#".concat(u,")"):void 0,O=X7(X7({clipPath:P},un(t,!0)),{},{x1:A,y1:C,x2:j,y2:N});return be.createElement(zn,{className:Rn("recharts-reference-line",o)},bMe(s,O),Wa.renderCallByParent(t,DOe({x1:A,y1:C,x2:j,y2:N})))}var m_=function(t){function e(){return sMe(this,e),cMe(this,e,arguments)}return fMe(e,t),lMe(e,[{key:"render",value:function(){return be.createElement(wMe,this.props)}}])}(be.Component);Z3(m_,"displayName","ReferenceLine");Z3(m_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function CP(){return CP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CP.apply(this,arguments)}function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function Z7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function J7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z7(Object(n),!0).forEach(function(r){g_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YY(r.key),r)}}function AMe(t,e,n){return e&&_Me(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CMe(t,e,n){return e=Zw(e),jMe(t,GY()?Reflect.construct(e,n||[],Zw(t).constructor):e.apply(t,n))}function jMe(t,e){if(e&&(kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EMe(t)}function EMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GY=function(){return!!t})()}function Zw(t){return Zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zw(t)}function NMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jP(t,e)}function jP(t,e){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jP(t,e)}function g_(t,e,n){return e=YY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YY(t){var e=PMe(t,"string");return kg(e)=="symbol"?e:e+""}function PMe(t,e){if(kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kMe=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=K3({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return uu(e,"discard")&&!s.isInRange(o)?null:o},v_=function(t){function e(){return SMe(this,e),CMe(this,e,arguments)}return NMe(e,t),AMe(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,l=r.clipPathId,u=Ra(i),d=Ra(a);if(wc(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=kMe(this.props);if(!f)return null;var p=f.x,h=f.y,g=this.props,m=g.shape,v=g.className,y=uu(this.props,"hidden")?"url(#".concat(l,")"):void 0,b=J7(J7({clipPath:y},un(this.props,!0)),{},{cx:p,cy:h});return be.createElement(zn,{className:Rn("recharts-reference-dot",v)},e.renderDot(m,b),Wa.renderCallByParent(this.props,{x:p-s,y:h-s,width:2*s,height:2*s}))}}])}(be.Component);g_(v_,"displayName","ReferenceDot");g_(v_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});g_(v_,"renderDot",function(t,e){var n;return be.isValidElement(t)?n=be.cloneElement(t,e):Sn(t)?n=t(e):n=be.createElement(Hb,CP({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function EP(){return EP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EP.apply(this,arguments)}function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function eF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eF(Object(n),!0).forEach(function(r){y_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QY(r.key),r)}}function IMe(t,e,n){return e&&DMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OMe(t,e,n){return e=Jw(e),MMe(t,XY()?Reflect.construct(e,n||[],Jw(t).constructor):e.apply(t,n))}function MMe(t,e){if(e&&(Tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RMe(t)}function RMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XY=function(){return!!t})()}function Jw(t){return Jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jw(t)}function LMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NP(t,e)}function NP(t,e){return NP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NP(t,e)}function y_(t,e,n){return e=QY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QY(t){var e=FMe(t,"string");return Tg(e)=="symbol"?e:e+""}function FMe(t,e){if(Tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zMe=function(e,n,r,i,a){var s=a.x1,o=a.x2,l=a.y1,u=a.y2,d=a.xAxis,f=a.yAxis;if(!d||!f)return null;var p=K3({x:d.scale,y:f.scale}),h={x:e?p.x.apply(s,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(l,{position:"start"}):p.y.rangeMin},g={x:n?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(u,{position:"end"}):p.y.rangeMax};return uu(a,"discard")&&(!p.isInRange(h)||!p.isInRange(g))?null:LY(h,g)},b_=function(t){function e(){return TMe(this,e),OMe(this,e,arguments)}return LMe(e,t),IMe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,l=r.className,u=r.alwaysShow,d=r.clipPathId;wc(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Ra(i),p=Ra(a),h=Ra(s),g=Ra(o),m=this.props.shape;if(!f&&!p&&!h&&!g&&!m)return null;var v=zMe(f,p,h,g,this.props);if(!v&&!m)return null;var y=uu(this.props,"hidden")?"url(#".concat(d,")"):void 0;return be.createElement(zn,{className:Rn("recharts-reference-area",l)},e.renderRect(m,tF(tF({clipPath:y},un(this.props,!0)),v)),Wa.renderCallByParent(this.props,v))}}])}(be.Component);y_(b_,"displayName","ReferenceArea");y_(b_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});y_(b_,"renderRect",function(t,e){var n;return be.isValidElement(t)?n=be.cloneElement(t,e):Sn(t)?n=t(e):n=be.createElement(q3,EP({},e,{className:"recharts-reference-area-rect"})),n});function ZY(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function $Me(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return OOe(r,n)}function BMe(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function e5(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function VMe(t,e){return ZY(t,e+1)}function UMe(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,l=0,u=1,d=s,f=function(){var g=r==null?void 0:r[l];if(g===void 0)return{v:ZY(r,u)};var m=l,v,y=function(){return v===void 0&&(v=n(g,m)),v},b=g.coordinate,S=l===0||e5(t,b,y,d,o);S||(l=0,d=s,u+=1),S&&(d=b+t*(y()/2+i),l+=u)},p;u<=a.length;)if(p=f(),p)return p.v;return[]}function ob(t){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(t)}function nF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nF(Object(n),!0).forEach(function(r){WMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WMe(t,e,n){return e=HMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HMe(t){var e=qMe(t,"string");return ob(e)=="symbol"?e:e+""}function qMe(t,e){if(ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ob(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KMe(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,l=e.end,u=function(p){var h=a[p],g,m=function(){return g===void 0&&(g=n(h,p)),g};if(p===s-1){var v=t*(h.coordinate+t*m()/2-l);a[p]=h=Rs(Rs({},h),{},{tickCoord:v>0?h.coordinate-v*t:h.coordinate})}else a[p]=h=Rs(Rs({},h),{},{tickCoord:h.coordinate});var y=e5(t,h.tickCoord,m,o,l);y&&(l=h.tickCoord-t*(m()/2+i),a[p]=Rs(Rs({},h),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return a}function GMe(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,l=e.start,u=e.end;if(a){var d=r[o-1],f=n(d,o-1),p=t*(d.coordinate+t*f/2-u);s[o-1]=d=Rs(Rs({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate});var h=e5(t,d.tickCoord,function(){return f},l,u);h&&(u=d.tickCoord-t*(f/2+i),s[o-1]=Rs(Rs({},d),{},{isShow:!0}))}for(var g=a?o-1:o,m=function(b){var S=s[b],A,C=function(){return A===void 0&&(A=n(S,b)),A};if(b===0){var D=t*(S.coordinate-t*C()/2-l);s[b]=S=Rs(Rs({},S),{},{tickCoord:D<0?S.coordinate-D*t:S.coordinate})}else s[b]=S=Rs(Rs({},S),{},{tickCoord:S.coordinate});var j=e5(t,S.tickCoord,C,l,u);j&&(l=S.tickCoord+t*(C()/2+i),s[b]=Rs(Rs({},S),{},{isShow:!0}))},v=0;v<g;v++)m(v);return s}function J3(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,l=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(Pt(l)||yd.isSsr)return VMe(i,typeof l=="number"&&Pt(l)?l:0);var p=[],h=o==="top"||o==="bottom"?"width":"height",g=d&&h==="width"?D0(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(S,A){var C=Sn(u)?u(S.value,A):S.value;return h==="width"?$Me(D0(C,{fontSize:e,letterSpacing:n}),g,f):D0(C,{fontSize:e,letterSpacing:n})[h]},v=i.length>=2?eo(i[1].coordinate-i[0].coordinate):1,y=BMe(a,v,h);return l==="equidistantPreserveStart"?UMe(v,y,m,i,s):(l==="preserveStart"||l==="preserveStartEnd"?p=GMe(v,y,m,i,s,l==="preserveStartEnd"):p=KMe(v,y,m,i,s),p.filter(function(b){return b.isShow}))}var YMe=["viewBox"],XMe=["viewBox"],QMe=["ticks"];function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function gm(){return gm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gm.apply(this,arguments)}function rF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rF(Object(n),!0).forEach(function(r){eD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _C(t,e){if(t==null)return{};var n=ZMe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ZMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function JMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eX(r.key),r)}}function eRe(t,e,n){return e&&iF(t.prototype,e),n&&iF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tRe(t,e,n){return e=t5(e),nRe(t,JY()?Reflect.construct(e,n||[],t5(t).constructor):e.apply(t,n))}function nRe(t,e){if(e&&(Dg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rRe(t)}function rRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JY=function(){return!!t})()}function t5(t){return t5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},t5(t)}function iRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PP(t,e)}function PP(t,e){return PP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PP(t,e)}function eD(t,e,n){return e=eX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eX(t){var e=aRe(t,"string");return Dg(e)=="symbol"?e:e+""}function aRe(t,e){if(Dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vv=function(t){function e(n){var r;return JMe(this,e),r=tRe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return iRe(e,t),eRe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=_C(r,YMe),o=this.props,l=o.viewBox,u=_C(o,XMe);return!km(a,l)||!km(s,u)||!km(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,p=i.tickMargin,h,g,m,v,y,b,S=f?-1:1,A=r.tickSize||d,C=Pt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":h=g=r.coordinate,v=s+ +!f*l,m=v-S*A,b=m-S*p,y=C;break;case"left":m=v=r.coordinate,g=a+ +!f*o,h=g-S*A,y=h-S*p,b=C;break;case"right":m=v=r.coordinate,g=a+ +f*o,h=g+S*A,y=h+S*p,b=C;break;default:h=g=r.coordinate,v=s+ +f*l,m=v+S*A,b=m+S*p,y=C;break}return{line:{x1:h,y1:m,x2:g,y2:v},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.orientation,u=r.mirror,d=r.axisLine,f=Ta(Ta(Ta({},un(this.props,!1)),un(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!u||l==="bottom"&&u);f=Ta(Ta({},f),{},{x1:i,y1:a+p*o,x2:i+s,y2:a+p*o})}else{var h=+(l==="left"&&!u||l==="right"&&u);f=Ta(Ta({},f),{},{x1:i+h*s,y1:a,x2:i+h*s,y2:a+o})}return be.createElement("line",gm({},f,{className:Rn("recharts-cartesian-axis-line",cl(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,l=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,p=o.unit,h=J3(Ta(Ta({},this.props),{},{ticks:r}),i,a),g=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),v=un(this.props,!1),y=un(d,!1),b=Ta(Ta({},v),{},{fill:"none"},un(l,!1)),S=h.map(function(A,C){var D=s.getTickLineCoord(A),j=D.line,N=D.tick,P=Ta(Ta(Ta(Ta({textAnchor:g,verticalAnchor:m},v),{},{stroke:"none",fill:u},y),N),{},{index:C,payload:A,visibleTicksCount:h.length,tickFormatter:f});return be.createElement(zn,gm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Af(s.props,A,C)),l&&be.createElement("line",gm({},b,j,{className:Rn("recharts-cartesian-axis-tick-line",cl(l,"className"))})),d&&e.renderTickItem(d,P,"".concat(Sn(f)?f(A.value,C):A.value).concat(p||"")))});return be.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,l=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,p=f.ticks,h=_C(f,QMe),g=p;return Sn(l)&&(g=p&&p.length>0?l(this.props):l(h)),s<=0||o<=0||!g||!g.length?null:be.createElement(zn,{className:Rn("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},a&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Wa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,o=Rn(i.className,"recharts-cartesian-axis-tick-value");return be.isValidElement(r)?s=be.cloneElement(r,Ta(Ta({},i),{},{className:o})):Sn(r)?s=r(Ta(Ta({},i),{},{className:o})):s=be.createElement(Zh,gm({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(I.Component);eD(vv,"displayName","CartesianAxis");eD(vv,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var sRe=["x1","y1","x2","y2","key"],oRe=["offset"];function tp(t){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tp(t)}function aF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aF(Object(n),!0).forEach(function(r){lRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lRe(t,e,n){return e=cRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cRe(t){var e=uRe(t,"string");return tp(e)=="symbol"?e:e+""}function uRe(t,e){if(tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eh(){return Eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eh.apply(this,arguments)}function sF(t,e){if(t==null)return{};var n=dRe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var fRe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,l=e.ry;return be.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function tX(t,e){var n;if(be.isValidElement(t))n=be.cloneElement(t,e);else if(Sn(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,l=sF(e,sRe),u=un(l,!1);u.offset;var d=sF(u,oRe);n=be.createElement("line",Eh({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function hRe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=zs(zs({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return tX(i,u)});return be.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function pRe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=zs(zs({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return tX(i,u)});return be.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function mRe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var d=o.map(function(p){return Math.round(p+i-i)}).sort(function(p,h){return p-h});i!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var g=!d[h+1],m=g?i+s-p:d[h+1]-p;if(m<=0)return null;var v=h%e.length;return be.createElement("rect",{key:"react-".concat(h),y:p,x:r,height:m,width:a,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return be.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function gRe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(p){return Math.round(p+a-a)}).sort(function(p,h){return p-h});a!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var g=!d[h+1],m=g?a+o-p:d[h+1]-p;if(m<=0)return null;var v=h%r.length;return be.createElement("rect",{key:"react-".concat(h),x:p,y:s,width:m,height:l,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return be.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var vRe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return JG(J3(zs(zs(zs({},vv.defaultProps),r),{},{ticks:Hu(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},yRe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return JG(J3(zs(zs(zs({},vv.defaultProps),r),{},{ticks:Hu(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Mp={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Jc(t){var e,n,r,i,a,s,o=X3(),l=Q3(),u=aMe(),d=zs(zs({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Mp.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Mp.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Mp.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Mp.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Mp.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Mp.verticalFill,x:Pt(t.x)?t.x:u.left,y:Pt(t.y)?t.y:u.top,width:Pt(t.width)?t.width:u.width,height:Pt(t.height)?t.height:u.height}),f=d.x,p=d.y,h=d.width,g=d.height,m=d.syncWithTicks,v=d.horizontalValues,y=d.verticalValues,b=nMe(),S=rMe();if(!Pt(h)||h<=0||!Pt(g)||g<=0||!Pt(f)||f!==+f||!Pt(p)||p!==+p)return null;var A=d.verticalCoordinatesGenerator||vRe,C=d.horizontalCoordinatesGenerator||yRe,D=d.horizontalPoints,j=d.verticalPoints;if((!D||!D.length)&&Sn(C)){var N=v&&v.length,P=C({yAxis:S?zs(zs({},S),{},{ticks:N?v:S.ticks}):void 0,width:o,height:l,offset:u},N?!0:m);wc(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(tp(P),"]")),Array.isArray(P)&&(D=P)}if((!j||!j.length)&&Sn(A)){var O=y&&y.length,T=A({xAxis:b?zs(zs({},b),{},{ticks:O?y:b.ticks}):void 0,width:o,height:l,offset:u},O?!0:m);wc(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(tp(T),"]")),Array.isArray(T)&&(j=T)}return be.createElement("g",{className:"recharts-cartesian-grid"},be.createElement(fRe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),be.createElement(hRe,Eh({},d,{offset:u,horizontalPoints:D,xAxis:b,yAxis:S})),be.createElement(pRe,Eh({},d,{offset:u,verticalPoints:j,xAxis:b,yAxis:S})),be.createElement(mRe,Eh({},d,{horizontalPoints:D})),be.createElement(gRe,Eh({},d,{verticalPoints:j})))}Jc.displayName="CartesianGrid";var bRe=["type","layout","connectNulls","ref"],xRe=["key"];function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function oF(t,e){if(t==null)return{};var n=wRe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function F0(){return F0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F0.apply(this,arguments)}function lF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lF(Object(n),!0).forEach(function(r){gc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rp(t){return CRe(t)||ARe(t)||_Re(t)||SRe()}function SRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Re(t,e){if(t){if(typeof t=="string")return kP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kP(t,e)}}function ARe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CRe(t){if(Array.isArray(t))return kP(t)}function kP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rX(r.key),r)}}function ERe(t,e,n){return e&&cF(t.prototype,e),n&&cF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function NRe(t,e,n){return e=n5(e),PRe(t,nX()?Reflect.construct(e,n||[],n5(t).constructor):e.apply(t,n))}function PRe(t,e){if(e&&(Ig(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kRe(t)}function kRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nX=function(){return!!t})()}function n5(t){return n5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},n5(t)}function TRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TP(t,e)}function TP(t,e){return TP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TP(t,e)}function gc(t,e,n){return e=rX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rX(t){var e=DRe(t,"string");return Ig(e)=="symbol"?e:e+""}function DRe(t,e){if(Ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ud=function(t){function e(){var n;jRe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=NRe(this,e,[].concat(i)),gc(n,"state",{isAnimationFinished:!0,totalLength:0}),gc(n,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),gc(n,"getStrokeDasharray",function(s,o,l){var u=l.reduce(function(y,b){return y+b});if(!u)return n.generateSimpleStrokeDasharray(o,s);for(var d=Math.floor(s/u),f=s%u,p=o-s,h=[],g=0,m=0;g<l.length;m+=l[g],++g)if(m+l[g]>f){h=[].concat(Rp(l.slice(0,g)),[f-m]);break}var v=h.length%2===0?[0,p]:[p];return[].concat(Rp(e.repeat(l,d)),Rp(h),v).map(function(y){return"".concat(y,"px")}).join(", ")}),gc(n,"id",Lf("recharts-line-")),gc(n,"pathRef",function(s){n.mainCurve=s}),gc(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),gc(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return TRe(e,t),ERe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,f=io(d,gv);if(!f)return null;var p=function(m,v){return{x:m.x,y:m.y,value:m.value,errorVal:vi(m.payload,v)}},h={clipPath:r?"url(#clipPath-".concat(i,")"):null};return be.createElement(zn,h,f.map(function(g){return be.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,u=o.points,d=o.dataKey,f=un(this.props,!1),p=un(l,!0),h=u.map(function(m,v){var y=Qo(Qo(Qo({key:"dot-".concat(v),r:3},f),p),{},{index:v,cx:m.x,cy:m.y,value:m.value,dataKey:d,payload:m.payload,points:u});return e.renderDotItem(l,y)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return be.createElement(zn,F0({className:"recharts-line-dots",key:"dots"},g),h)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,l=o.type,u=o.layout,d=o.connectNulls;o.ref;var f=oF(o,bRe),p=Qo(Qo(Qo({},un(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:l,layout:u,connectNulls:d});return be.createElement(pf,F0({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,l=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,p=s.animationEasing,h=s.animationId,g=s.animateNewValues,m=s.width,v=s.height,y=this.state,b=y.prevPoints,S=y.totalLength;return be.createElement(ql,{begin:d,duration:f,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var C=A.t;if(b){var D=b.length/o.length,j=o.map(function(M,L){var V=Math.floor(L*D);if(b[V]){var K=b[V],Z=Pi(K.x,M.x),Y=Pi(K.y,M.y);return Qo(Qo({},M),{},{x:Z(C),y:Y(C)})}if(g){var H=Pi(m*2,M.x),ee=Pi(v/2,M.y);return Qo(Qo({},M),{},{x:H(C),y:ee(C)})}return Qo(Qo({},M),{},{x:M.x,y:M.y})});return a.renderCurveStatically(j,r,i)}var N=Pi(0,S),P=N(C),O;if(l){var T="".concat(l).split(/[,\s]+/gim).map(function(M){return parseFloat(M)});O=a.getStrokeDasharray(P,S,T)}else O=a.generateSimpleStrokeDasharray(S,P);return a.renderCurveStatically(o,r,i,{strokeDasharray:O})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,l=this.state,u=l.prevPoints,d=l.totalLength;return o&&s&&s.length&&(!u&&d>0||!Cf(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,u=i.xAxis,d=i.yAxis,f=i.top,p=i.left,h=i.width,g=i.height,m=i.isAnimationActive,v=i.id;if(a||!o||!o.length)return null;var y=this.state.isAnimationFinished,b=o.length===1,S=Rn("recharts-line",l),A=u&&u.allowDataOverflow,C=d&&d.allowDataOverflow,D=A||C,j=wn(v)?this.id:v,N=(r=un(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=N.r,O=P===void 0?3:P,T=N.strokeWidth,M=T===void 0?2:T,L=Hq(s)?s:{},V=L.clipDot,K=V===void 0?!0:V,Z=O*2+M;return be.createElement(zn,{className:S},A||C?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(j)},be.createElement("rect",{x:A?p:p-h/2,y:C?f:f-g/2,width:A?h:h*2,height:C?g:g*2})),!K&&be.createElement("clipPath",{id:"clipPath-dots-".concat(j)},be.createElement("rect",{x:p-Z/2,y:f-Z/2,width:h+Z,height:g+Z}))):null,!b&&this.renderCurve(D,j),this.renderErrorBar(D,j),(b||s)&&this.renderDots(D,K,j),(!m||y)&&ao.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Rp(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(Rp(s),Rp(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(be.isValidElement(r))a=be.cloneElement(r,i);else if(Sn(r))a=r(i);else{var s=i.key,o=oF(i,xRe),l=Rn("recharts-line-dot",typeof r!="boolean"?r.className:"");a=be.createElement(Hb,F0({key:s},o,{className:l}))}return a}}])}(I.PureComponent);gc(ud,"displayName","Line");gc(ud,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!yd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});gc(ud,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,s=t.dataKey,o=t.bandSize,l=t.displayedData,u=t.offset,d=e.layout,f=l.map(function(p,h){var g=vi(p,s);return d==="horizontal"?{x:wg({axis:n,ticks:i,bandSize:o,entry:p,index:h}),y:wn(g)?null:r.scale(g),value:g,payload:p}:{x:wn(g)?null:n.scale(g),y:wg({axis:r,ticks:a,bandSize:o,entry:p,index:h}),value:g,payload:p}});return Qo({points:f,layout:d},u)});var IRe=["layout","type","stroke","connectNulls","isRange","ref"],ORe=["key"],iX;function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function aX(t,e){if(t==null)return{};var n=MRe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function MRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Nh(){return Nh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nh.apply(this,arguments)}function uF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ld(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uF(Object(n),!0).forEach(function(r){eu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oX(r.key),r)}}function LRe(t,e,n){return e&&dF(t.prototype,e),n&&dF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function FRe(t,e,n){return e=r5(e),zRe(t,sX()?Reflect.construct(e,n||[],r5(t).constructor):e.apply(t,n))}function zRe(t,e){if(e&&(Og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Re(t)}function $Re(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sX=function(){return!!t})()}function r5(t){return r5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r5(t)}function BRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DP(t,e)}function DP(t,e){return DP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DP(t,e)}function eu(t,e,n){return e=oX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oX(t){var e=VRe(t,"string");return Og(e)=="symbol"?e:e+""}function VRe(t,e){if(Og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bs=function(t){function e(){var n;RRe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=FRe(this,e,[].concat(i)),eu(n,"state",{isAnimationFinished:!0}),eu(n,"id",Lf("recharts-area-")),eu(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Sn(s)&&s()}),eu(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Sn(s)&&s()}),n}return BRe(e,t),LRe(e,[{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(s&&!o)return null;var l=this.props,u=l.dot,d=l.points,f=l.dataKey,p=un(this.props,!1),h=un(u,!0),g=d.map(function(v,y){var b=Ld(Ld(Ld({key:"dot-".concat(y),r:3},p),h),{},{index:y,cx:v.x,cy:v.y,dataKey:f,value:v.value,payload:v.payload,points:d});return e.renderDotItem(u,b)}),m={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return be.createElement(zn,Nh({className:"recharts-area-dots"},m),g)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,l=s[0].x,u=s[s.length-1].x,d=r*Math.abs(l-u),f=Gd(s.map(function(p){return p.y||0}));return Pt(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(Gd(a.map(function(p){return p.y||0})),f)),Pt(f)?be.createElement("rect",{x:l<u?l:l-d,y:0,width:d,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,l=s[0].y,u=s[s.length-1].y,d=r*Math.abs(l-u),f=Gd(s.map(function(p){return p.x||0}));return Pt(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(Gd(a.map(function(p){return p.x||0})),f)),Pt(f)?be.createElement("rect",{x:0,y:l<u?l:l-d,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,s){var o=this.props,l=o.layout,u=o.type,d=o.stroke,f=o.connectNulls,p=o.isRange;o.ref;var h=aX(o,IRe);return be.createElement(zn,{clipPath:a?"url(#clipPath-".concat(s,")"):null},be.createElement(pf,Nh({},un(h,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&be.createElement(pf,Nh({},un(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:r})),d!=="none"&&p&&be.createElement(pf,Nh({},un(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,l=s.baseLine,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,p=s.animationEasing,h=s.animationId,g=this.state,m=g.prevPoints,v=g.prevBaseLine;return be.createElement(ql,{begin:d,duration:f,isActive:u,easing:p,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t;if(m){var S=m.length/o.length,A=o.map(function(N,P){var O=Math.floor(P*S);if(m[O]){var T=m[O],M=Pi(T.x,N.x),L=Pi(T.y,N.y);return Ld(Ld({},N),{},{x:M(b),y:L(b)})}return N}),C;if(Pt(l)&&typeof l=="number"){var D=Pi(v,l);C=D(b)}else if(wn(l)||cv(l)){var j=Pi(v,0);C=j(b)}else C=l.map(function(N,P){var O=Math.floor(P*S);if(v[O]){var T=v[O],M=Pi(T.x,N.x),L=Pi(T.y,N.y);return Ld(Ld({},N),{},{x:M(b),y:L(b)})}return N});return a.renderAreaStatically(A,C,r,i)}return be.createElement(zn,null,be.createElement("defs",null,be.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(b))),be.createElement(zn,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(o,l,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,s=a.points,o=a.baseLine,l=a.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,p=u.totalLength;return l&&s&&s.length&&(!d&&p>0||!Cf(d,s)||!Cf(f,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(s,o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,u=i.top,d=i.left,f=i.xAxis,p=i.yAxis,h=i.width,g=i.height,m=i.isAnimationActive,v=i.id;if(a||!o||!o.length)return null;var y=this.state.isAnimationFinished,b=o.length===1,S=Rn("recharts-area",l),A=f&&f.allowDataOverflow,C=p&&p.allowDataOverflow,D=A||C,j=wn(v)?this.id:v,N=(r=un(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=N.r,O=P===void 0?3:P,T=N.strokeWidth,M=T===void 0?2:T,L=Hq(s)?s:{},V=L.clipDot,K=V===void 0?!0:V,Z=O*2+M;return be.createElement(zn,{className:S},A||C?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(j)},be.createElement("rect",{x:A?d:d-h/2,y:C?u:u-g/2,width:A?h:h*2,height:C?g:g*2})),!K&&be.createElement("clipPath",{id:"clipPath-dots-".concat(j)},be.createElement("rect",{x:d-Z/2,y:u-Z/2,width:h+Z,height:g+Z}))):null,b?null:this.renderArea(D,j),(s||b)&&this.renderDots(D,K,j),(!m||y)&&ao.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(I.PureComponent);iX=Bs;eu(Bs,"displayName","Area");eu(Bs,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!yd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});eu(Bs,"getBaseValue",function(t,e,n,r){var i=t.layout,a=t.baseValue,s=e.props.baseValue,o=s??a;if(Pt(o)&&typeof o=="number")return o;var l=i==="horizontal"?r:n,u=l.scale.domain();if(l.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return o==="dataMin"?f:o==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});eu(Bs,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,a=t.xAxisTicks,s=t.yAxisTicks,o=t.bandSize,l=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,p=t.offset,h=e.layout,g=u&&u.length,m=iX.getBaseValue(e,n,r,i),v=h==="horizontal",y=!1,b=f.map(function(A,C){var D;g?D=u[d+C]:(D=vi(A,l),Array.isArray(D)?y=!0:D=[m,D]);var j=D[1]==null||g&&vi(A,l)==null;return v?{x:wg({axis:r,ticks:a,bandSize:o,entry:A,index:C}),y:j?null:i.scale(D[1]),value:D,payload:A}:{x:j?null:r.scale(D[1]),y:wg({axis:i,ticks:s,bandSize:o,entry:A,index:C}),value:D,payload:A}}),S;return g||y?S=b.map(function(A){var C=Array.isArray(A.value)?A.value[0]:null;return v?{x:A.x,y:C!=null&&A.y!=null?i.scale(C):null}:{x:C!=null?r.scale(C):null,y:A.y}}):S=v?i.scale(m):r.scale(m),Ld({points:b,baseLine:S,layout:h,isRange:y},p)});eu(Bs,"renderDotItem",function(t,e){var n;if(be.isValidElement(t))n=be.cloneElement(t,e);else if(Sn(t))n=t(e);else{var r=Rn("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=aX(e,ORe);n=be.createElement(Hb,Nh({},a,{key:i,className:r}))}return n});function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function URe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WRe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uX(r.key),r)}}function HRe(t,e,n){return e&&WRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qRe(t,e,n){return e=i5(e),KRe(t,lX()?Reflect.construct(e,n||[],i5(t).constructor):e.apply(t,n))}function KRe(t,e){if(e&&(Mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GRe(t)}function GRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lX=function(){return!!t})()}function i5(t){return i5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},i5(t)}function YRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IP(t,e)}function IP(t,e){return IP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IP(t,e)}function cX(t,e,n){return e=uX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uX(t){var e=XRe(t,"string");return Mg(e)=="symbol"?e:e+""}function XRe(t,e){if(Mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var x_=function(t){function e(){return URe(this,e),qRe(this,e,arguments)}return YRe(e,t),HRe(e,[{key:"render",value:function(){return null}}])}(I.Component);cX(x_,"displayName","ZAxis");cX(x_,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var QRe=["option","isActive"];function z0(){return z0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z0.apply(this,arguments)}function ZRe(t,e){if(t==null)return{};var n=JRe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function e6e(t){var e=t.option,n=t.isActive,r=ZRe(t,QRe);return typeof e=="string"?I.createElement(Ww,z0({option:I.createElement(KS,z0({type:e},r)),isActive:n,shapeType:"symbols"},r)):I.createElement(Ww,z0({option:e,isActive:n,shapeType:"symbols"},r))}function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function $0(){return $0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$0.apply(this,arguments)}function fF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ol(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fF(Object(n),!0).forEach(function(r){Xd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fX(r.key),r)}}function n6e(t,e,n){return e&&hF(t.prototype,e),n&&hF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r6e(t,e,n){return e=a5(e),i6e(t,dX()?Reflect.construct(e,n||[],a5(t).constructor):e.apply(t,n))}function i6e(t,e){if(e&&(Rg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a6e(t)}function a6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dX=function(){return!!t})()}function a5(t){return a5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a5(t)}function s6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OP(t,e)}function OP(t,e){return OP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OP(t,e)}function Xd(t,e,n){return e=fX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fX(t){var e=o6e(t,"string");return Rg(e)=="symbol"?e:e+""}function o6e(t,e){if(Rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var w_=function(t){function e(){var n;t6e(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=r6e(this,e,[].concat(i)),Xd(n,"state",{isAnimationFinished:!1}),Xd(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),Xd(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),Xd(n,"id",Lf("recharts-scatter-")),n}return s6e(e,t),n6e(e,[{key:"renderSymbolsStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.activeShape,l=a.activeIndex,u=un(this.props,!1);return r.map(function(d,f){var p=l===f,h=p?o:s,g=Ol(Ol({},u),d);return be.createElement(zn,$0({className:"recharts-scatter-symbol",key:"symbol-".concat(d==null?void 0:d.cx,"-").concat(d==null?void 0:d.cy,"-").concat(d==null?void 0:d.size,"-").concat(f)},Af(i.props,d,f),{role:"img"}),be.createElement(e6e,$0({option:h,isActive:p,key:"symbol-".concat(f)},g)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,i=this.props,a=i.points,s=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state.prevPoints;return be.createElement(ql,{begin:o,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var h=p.t,g=a.map(function(m,v){var y=f&&f[v];if(y){var b=Pi(y.cx,m.cx),S=Pi(y.cy,m.cy),A=Pi(y.size,m.size);return Ol(Ol({},m),{},{cx:b(h),cy:S(h),size:A(h)})}var C=Pi(0,m.size);return Ol(Ol({},m),{},{size:C(h)})});return be.createElement(zn,null,r.renderSymbolsStatically(g))})}},{key:"renderSymbols",value:function(){var r=this.props,i=r.points,a=r.isAnimationActive,s=this.state.prevPoints;return a&&i&&i.length&&(!s||!Cf(s,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.points,s=i.xAxis,o=i.yAxis,l=i.children,u=io(l,gv);return u?u.map(function(d,f){var p=d.props,h=p.direction,g=p.dataKey;return be.cloneElement(d,{key:"".concat(h,"-").concat(g,"-").concat(a[f]),data:a,xAxis:s,yAxis:o,layout:h==="x"?"vertical":"horizontal",dataPointFormatter:function(v,y){return{x:v.cx,y:v.cy,value:h==="x"?+v.node.x:+v.node.y,errorVal:vi(v,y)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,i=r.points,a=r.line,s=r.lineType,o=r.lineJointType,l=un(this.props,!1),u=un(a,!1),d,f;if(s==="joint")d=i.map(function(S){return{x:S.cx,y:S.cy}});else if(s==="fitting"){var p=H0e(i),h=p.xmin,g=p.xmax,m=p.a,v=p.b,y=function(A){return m*A+v};d=[{x:h,y:y(h)},{x:g,y:y(g)}]}var b=Ol(Ol(Ol({},l),{},{fill:"none",stroke:l&&l.fill},u),{},{points:d});return be.isValidElement(a)?f=be.cloneElement(a,b):Sn(a)?f=a(b):f=be.createElement(pf,$0({},b,{type:o})),be.createElement(zn,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.points,s=r.line,o=r.className,l=r.xAxis,u=r.yAxis,d=r.left,f=r.top,p=r.width,h=r.height,g=r.id,m=r.isAnimationActive;if(i||!a||!a.length)return null;var v=this.state.isAnimationFinished,y=Rn("recharts-scatter",o),b=l&&l.allowDataOverflow,S=u&&u.allowDataOverflow,A=b||S,C=wn(g)?this.id:g;return be.createElement(zn,{className:y,clipPath:A?"url(#clipPath-".concat(C,")"):null},b||S?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(C)},be.createElement("rect",{x:b?d:d-p/2,y:S?f:f-h/2,width:b?p:p*2,height:S?h:h*2}))):null,s&&this.renderLine(),this.renderErrorBar(),be.createElement(zn,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!m||v)&&ao.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}}])}(I.PureComponent);Xd(w_,"displayName","Scatter");Xd(w_,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!yd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Xd(w_,"getComposedData",function(t){var e=t.xAxis,n=t.yAxis,r=t.zAxis,i=t.item,a=t.displayedData,s=t.xAxisTicks,o=t.yAxisTicks,l=t.offset,u=i.props.tooltipType,d=io(i.props.children,hl),f=wn(e.dataKey)?i.props.dataKey:e.dataKey,p=wn(n.dataKey)?i.props.dataKey:n.dataKey,h=r&&r.dataKey,g=r?r.range:x_.defaultProps.range,m=g&&g[0],v=e.scale.bandwidth?e.scale.bandwidth():0,y=n.scale.bandwidth?n.scale.bandwidth():0,b=a.map(function(S,A){var C=vi(S,f),D=vi(S,p),j=!wn(h)&&vi(S,h)||"-",N=[{name:wn(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:C,payload:S,dataKey:f,type:u},{name:wn(n.dataKey)?i.props.name:n.name||n.dataKey,unit:n.unit||"",value:D,payload:S,dataKey:p,type:u}];j!=="-"&&N.push({name:r.name||r.dataKey,unit:r.unit||"",value:j,payload:S,dataKey:h,type:u});var P=wg({axis:e,ticks:s,bandSize:v,entry:S,index:A,dataKey:f}),O=wg({axis:n,ticks:o,bandSize:y,entry:S,index:A,dataKey:p}),T=j!=="-"?r.scale(j):m,M=Math.sqrt(Math.max(T,0)/Math.PI);return Ol(Ol({},S),{},{cx:P,cy:O,x:P-M,y:O-M,xAxis:e,yAxis:n,zAxis:r,width:2*M,height:2*M,size:T,node:{x:C,y:D,z:j},tooltipPayload:N,tooltipPosition:{x:P,y:O},payload:S},d&&d[A]&&d[A].props)});return Ol({points:b},l)});function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function l6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c6e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mX(r.key),r)}}function u6e(t,e,n){return e&&c6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function d6e(t,e,n){return e=s5(e),f6e(t,hX()?Reflect.construct(e,n||[],s5(t).constructor):e.apply(t,n))}function f6e(t,e){if(e&&(Lg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h6e(t)}function h6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hX=function(){return!!t})()}function s5(t){return s5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},s5(t)}function p6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MP(t,e)}function MP(t,e){return MP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MP(t,e)}function pX(t,e,n){return e=mX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mX(t){var e=m6e(t,"string");return Lg(e)=="symbol"?e:e+""}function m6e(t,e){if(Lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function RP(){return RP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RP.apply(this,arguments)}function g6e(t){var e=t.xAxisId,n=X3(),r=Q3(),i=WY(e);return i==null?null:I.createElement(vv,RP({},i,{className:Rn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return Hu(s,!0)}}))}var ii=function(t){function e(){return l6e(this,e),d6e(this,e,arguments)}return p6e(e,t),u6e(e,[{key:"render",value:function(){return I.createElement(g6e,this.props)}}])}(I.Component);pX(ii,"displayName","XAxis");pX(ii,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function v6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y6e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yX(r.key),r)}}function b6e(t,e,n){return e&&y6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function x6e(t,e,n){return e=o5(e),w6e(t,gX()?Reflect.construct(e,n||[],o5(t).constructor):e.apply(t,n))}function w6e(t,e){if(e&&(Fg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S6e(t)}function S6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gX=function(){return!!t})()}function o5(t){return o5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},o5(t)}function _6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LP(t,e)}function LP(t,e){return LP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LP(t,e)}function vX(t,e,n){return e=yX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yX(t){var e=A6e(t,"string");return Fg(e)=="symbol"?e:e+""}function A6e(t,e){if(Fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function FP(){return FP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FP.apply(this,arguments)}var C6e=function(e){var n=e.yAxisId,r=X3(),i=Q3(),a=HY(n);return a==null?null:I.createElement(vv,FP({},a,{className:Rn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Hu(o,!0)}}))},ni=function(t){function e(){return v6e(this,e),x6e(this,e,arguments)}return _6e(e,t),b6e(e,[{key:"render",value:function(){return I.createElement(C6e,this.props)}}])}(I.Component);vX(ni,"displayName","YAxis");vX(ni,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function pF(t){return P6e(t)||N6e(t)||E6e(t)||j6e()}function j6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E6e(t,e){if(t){if(typeof t=="string")return zP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zP(t,e)}}function N6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function P6e(t){if(Array.isArray(t))return zP(t)}function zP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $P=function(e,n,r,i,a){var s=io(e,m_),o=io(e,v_),l=[].concat(pF(s),pF(o)),u=io(e,b_),d="".concat(i,"Id"),f=i[0],p=n;if(l.length&&(p=l.reduce(function(m,v){if(v.props[d]===r&&uu(v.props,"extendDomain")&&Pt(v.props[f])){var y=v.props[f];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},p)),u.length){var h="".concat(f,"1"),g="".concat(f,"2");p=u.reduce(function(m,v){if(v.props[d]===r&&uu(v.props,"extendDomain")&&Pt(v.props[h])&&Pt(v.props[g])){var y=v.props[h],b=v.props[g];return[Math.min(m[0],y,b),Math.max(m[1],y,b)]}return m},p)}return a&&a.length&&(p=a.reduce(function(m,v){return Pt(v)?[Math.min(m[0],v),Math.max(m[1],v)]:m},p)),p},bX={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,f||l,p),g=n?n+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],h]:l._events[g].push(h):(l._events[g]=h,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,h=f.length,g=new Array(h);p<h;p++)g[p]=f[p].fn;return g},o.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,p,h,g){var m=n?n+u:u;if(!this._events[m])return!1;var v=this._events[m],y=arguments.length,b,S;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,p),!0;case 5:return v.fn.call(v.context,d,f,p,h),!0;case 6:return v.fn.call(v.context,d,f,p,h,g),!0}for(S=1,b=new Array(y-1);S<y;S++)b[S-1]=arguments[S];v.fn.apply(v.context,b)}else{var A=v.length,C;for(S=0;S<A;S++)switch(v[S].once&&this.removeListener(u,v[S].fn,void 0,!0),y){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,d);break;case 3:v[S].fn.call(v[S].context,d,f);break;case 4:v[S].fn.call(v[S].context,d,f,p);break;default:if(!b)for(C=1,b=new Array(y-1);C<y;C++)b[C-1]=arguments[C];v[S].fn.apply(v[S].context,b)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,p){var h=n?n+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var g=this._events[h];if(g.fn)g.fn===d&&(!p||g.once)&&(!f||g.context===f)&&s(this,h);else{for(var m=0,v=[],y=g.length;m<y;m++)(g[m].fn!==d||p&&!g[m].once||f&&g[m].context!==f)&&v.push(g[m]);v.length?this._events[h]=v.length===1?v[0]:v:s(this,h)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(bX);var k6e=bX.exports;const T6e=Pr(k6e);var AC=new T6e,CC="recharts.syncMouseEvents";function lb(t){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lb(t)}function D6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I6e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xX(r.key),r)}}function O6e(t,e,n){return e&&I6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jC(t,e,n){return e=xX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xX(t){var e=M6e(t,"string");return lb(e)=="symbol"?e:e+""}function M6e(t,e){if(lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var R6e=function(){function t(){D6e(this,t),jC(this,"activeIndex",0),jC(this,"coordinateList",[]),jC(this,"layout","horizontal")}return O6e(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,l=n.layout,u=l===void 0?null:l,d=n.offset,f=d===void 0?null:d,p=n.mouseHandlerCallback,h=p===void 0?null:p;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=a+l+u,p=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])}();function L6e(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Pt(r)&&Pt(i))return!0}return!1}function F6e(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function wX(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=ri(e,n,r,i),o=ri(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function z6e(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,p=ri(o,l,u,f),h=ri(o,l,d,f);r=p.x,i=p.y,a=h.x,s=h.y}else return wX(e);return[{x:r,y:i},{x:a,y:s}]}function cb(t){"@babel/helpers - typeof";return cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cb(t)}function mF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function n1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mF(Object(n),!0).forEach(function(r){$6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $6e(t,e,n){return e=B6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B6e(t){var e=V6e(t,"string");return cb(e)=="symbol"?e:e+""}function V6e(t,e){if(cb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U6e(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,l=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,p=t.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!a||!s||p!=="ScatterChart"&&i!=="axis")return null;var g,m=pf;if(p==="ScatterChart")g=s,m=D3e;else if(p==="BarChart")g=F6e(f,s,l,d),m=q3;else if(f==="radial"){var v=wX(s),y=v.cx,b=v.cy,S=v.radius,A=v.startAngle,C=v.endAngle;g={cx:y,cy:b,startAngle:A,endAngle:C,innerRadius:S,outerRadius:S},m=uY}else g={points:z6e(f,s,l)},m=pf;var D=n1(n1(n1(n1({stroke:"#ccc",pointerEvents:"none"},l),g),un(h,!1)),{},{payload:o,payloadIndex:u,className:Rn("recharts-tooltip-cursor",h.className)});return I.isValidElement(h)?I.cloneElement(h,D):I.createElement(m,D)}var W6e=["item"],H6e=["children","className","width","height","style","compact","title","desc"];function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function vm(){return vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vm.apply(this,arguments)}function gF(t,e){return G6e(t)||K6e(t,e)||_X(t,e)||q6e()}function q6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K6e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function G6e(t){if(Array.isArray(t))return t}function vF(t,e){if(t==null)return{};var n=Y6e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Y6e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function X6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q6e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,AX(r.key),r)}}function Z6e(t,e,n){return e&&Q6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function J6e(t,e,n){return e=l5(e),eLe(t,SX()?Reflect.construct(e,n||[],l5(t).constructor):e.apply(t,n))}function eLe(t,e){if(e&&(zg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tLe(t)}function tLe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SX=function(){return!!t})()}function l5(t){return l5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},l5(t)}function nLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BP(t,e)}function BP(t,e){return BP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},BP(t,e)}function $g(t){return aLe(t)||iLe(t)||_X(t)||rLe()}function rLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _X(t,e){if(t){if(typeof t=="string")return VP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VP(t,e)}}function iLe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aLe(t){if(Array.isArray(t))return VP(t)}function VP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yF(Object(n),!0).forEach(function(r){_n(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _n(t,e,n){return e=AX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AX(t){var e=sLe(t,"string");return zg(e)=="symbol"?e:e+""}function sLe(t,e){if(zg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oLe={xAxis:["bottom","top"],yAxis:["left","right"]},lLe={width:"100%",height:"100%"},CX={x:0,y:0};function r1(t){return t}var cLe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},uLe=function(e,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return st(st(st({},i),ri(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,u=i.angle;return st(st(st({},i),ri(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return CX},S_=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,l){var u=l.props.data;return u&&u.length?[].concat($g(o),$g(u)):o},[]);return s.length>0?s:e&&e.length&&Pt(i)&&Pt(a)?e.slice(i,a+1):[]};function jX(t){return t==="number"?[0,"auto"]:void 0}var UP=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=S_(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(l,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var h=f===void 0?o:f;p=aw(h,s.dataKey,i)}else p=f&&f[r]||o[r];return p?[].concat($g(l),[iY(u,p)]):l},[])},bF=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=cLe(a,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,d=tke(s,o,u,l);if(d>=0&&u){var f=u[d]&&u[d].value,p=UP(e,n,d,f),h=uLe(r,o,d,a);return{activeTooltipIndex:d,activeLabel:f,activePayload:p,activeCoordinate:h}}return null},dLe=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,p=e.stackOffset,h=ZG(d,a);return r.reduce(function(g,m){var v,y=m.type.defaultProps!==void 0?st(st({},m.type.defaultProps),m.props):m.props,b=y.type,S=y.dataKey,A=y.allowDataOverflow,C=y.allowDuplicatedCategory,D=y.scale,j=y.ticks,N=y.includeHidden,P=y[s];if(g[P])return g;var O=S_(e.data,{graphicalItems:i.filter(function($){var X,te=s in $.props?$.props[s]:(X=$.type.defaultProps)===null||X===void 0?void 0:X[s];return te===P}),dataStartIndex:l,dataEndIndex:u}),T=O.length,M,L,V;L6e(y.domain,A,b)&&(M=eP(y.domain,null,A),h&&(b==="number"||D!=="auto")&&(V=O0(O,S,"category")));var K=jX(b);if(!M||M.length===0){var Z,Y=(Z=y.domain)!==null&&Z!==void 0?Z:K;if(S){if(M=O0(O,S,b),b==="category"&&h){var H=W0e(M);C&&H?(L=M,M=qw(0,T)):C||(M=L8(Y,M,m).reduce(function($,X){return $.indexOf(X)>=0?$:[].concat($g($),[X])},[]))}else if(b==="category")C?M=M.filter(function($){return $!==""&&!wn($)}):M=L8(Y,M,m).reduce(function($,X){return $.indexOf(X)>=0||X===""||wn(X)?$:[].concat($g($),[X])},[]);else if(b==="number"){var ee=ske(O,i.filter(function($){var X,te,oe=s in $.props?$.props[s]:(X=$.type.defaultProps)===null||X===void 0?void 0:X[s],me="hide"in $.props?$.props.hide:(te=$.type.defaultProps)===null||te===void 0?void 0:te.hide;return oe===P&&(N||!me)}),S,a,d);ee&&(M=ee)}h&&(b==="number"||D!=="auto")&&(V=O0(O,S,"category"))}else h?M=qw(0,T):o&&o[P]&&o[P].hasStack&&b==="number"?M=p==="expand"?[0,1]:rY(o[P].stackGroups,l,u):M=QG(O,i.filter(function($){var X=s in $.props?$.props[s]:$.type.defaultProps[s],te="hide"in $.props?$.props.hide:$.type.defaultProps.hide;return X===P&&(N||!te)}),b,d,!0);if(b==="number")M=$P(f,M,P,a,j),Y&&(M=eP(Y,M,A));else if(b==="category"&&Y){var le=Y,se=M.every(function($){return le.indexOf($)>=0});se&&(M=le)}}return st(st({},g),{},_n({},P,st(st({},y),{},{axisType:a,domain:M,categoricalDomain:V,duplicateDomain:L,originalDomain:(v=y.domain)!==null&&v!==void 0?v:K,isCategorical:h,layout:d})))},{})},fLe=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,p=S_(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),h=p.length,g=ZG(d,a),m=-1;return r.reduce(function(v,y){var b=y.type.defaultProps!==void 0?st(st({},y.type.defaultProps),y.props):y.props,S=b[s],A=jX("number");if(!v[S]){m++;var C;return g?C=qw(0,h):o&&o[S]&&o[S].hasStack?(C=rY(o[S].stackGroups,l,u),C=$P(f,C,S,a)):(C=eP(A,QG(p,r.filter(function(D){var j,N,P=s in D.props?D.props[s]:(j=D.type.defaultProps)===null||j===void 0?void 0:j[s],O="hide"in D.props?D.props.hide:(N=D.type.defaultProps)===null||N===void 0?void 0:N.hide;return P===S&&!O}),"number",d),i.defaultProps.allowDataOverflow),C=$P(f,C,S,a)),st(st({},v),{},_n({},S,st(st({axisType:a},i.defaultProps),{},{hide:!0,orientation:cl(oLe,"".concat(a,".").concat(m%2),null),domain:C,originalDomain:A,isCategorical:g,layout:d})))}return v},{})},hLe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=e.children,f="".concat(i,"Id"),p=io(d,a),h={};return p&&p.length?h=dLe(e,{axes:p,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(h=fLe(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:u})),h},pLe=function(e){var n=Ud(e),r=Hu(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:b3(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Iw(n,r)}},xF=function(e){var n=e.children,r=e.defaultShowTooltip,i=el(n,Eg),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},mLe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Xu(n&&n.type);return r&&r.indexOf("Bar")>=0})},wF=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},gLe=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,l=o===void 0?{}:o,u=r.width,d=r.height,f=r.children,p=r.margin||{},h=el(f,Eg),g=el(f,Bl),m=Object.keys(l).reduce(function(C,D){var j=l[D],N=j.orientation;return!j.mirror&&!j.hide?st(st({},C),{},_n({},N,C[N]+j.width)):C},{left:p.left||0,right:p.right||0}),v=Object.keys(s).reduce(function(C,D){var j=s[D],N=j.orientation;return!j.mirror&&!j.hide?st(st({},C),{},_n({},N,cl(C,"".concat(N))+j.height)):C},{top:p.top||0,bottom:p.bottom||0}),y=st(st({},v),m),b=y.bottom;h&&(y.bottom+=h.props.height||Eg.defaultProps.height),g&&n&&(y=ike(y,i,r,n));var S=u-y.left-y.right,A=d-y.top-y.bottom;return st(st({brushBottom:b},y),{},{width:Math.max(S,0),height:Math.max(A,0)})},vLe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},qb=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,p=function(y,b){var S=b.graphicalItems,A=b.stackGroups,C=b.offset,D=b.updateId,j=b.dataStartIndex,N=b.dataEndIndex,P=y.barSize,O=y.layout,T=y.barGap,M=y.barCategoryGap,L=y.maxBarSize,V=wF(O),K=V.numericAxisName,Z=V.cateAxisName,Y=mLe(S),H=[];return S.forEach(function(ee,le){var se=S_(y.data,{graphicalItems:[ee],dataStartIndex:j,dataEndIndex:N}),$=ee.type.defaultProps!==void 0?st(st({},ee.type.defaultProps),ee.props):ee.props,X=$.dataKey,te=$.maxBarSize,oe=$["".concat(K,"Id")],me=$["".concat(Z,"Id")],_e={},Ce=l.reduce(function(ht,dt){var It=b["".concat(dt.axisType,"Map")],tn=$["".concat(dt.axisType,"Id")];It&&It[tn]||dt.axisType==="zAxis"||ep();var Zt=It[tn];return st(st({},ht),{},_n(_n({},dt.axisType,Zt),"".concat(dt.axisType,"Ticks"),Hu(Zt)))},_e),fe=Ce[Z],xe=Ce["".concat(Z,"Ticks")],Se=A&&A[oe]&&A[oe].hasStack&&mke(ee,A[oe].stackGroups),ie=Xu(ee.type).indexOf("Bar")>=0,He=Iw(fe,xe),Fe=[],he=Y&&nke({barSize:P,stackGroups:A,totalSize:vLe(Ce,Z)});if(ie){var Ye,mt,vt=wn(te)?L:te,Qe=(Ye=(mt=Iw(fe,xe,!0))!==null&&mt!==void 0?mt:vt)!==null&&Ye!==void 0?Ye:0;Fe=rke({barGap:T,barCategoryGap:M,bandSize:Qe!==He?Qe:He,sizeList:he[me],maxBarSize:vt}),Qe!==He&&(Fe=Fe.map(function(ht){return st(st({},ht),{},{position:st(st({},ht.position),{},{offset:ht.position.offset-Qe/2})})}))}var Ot=ee&&ee.type&&ee.type.getComposedData;Ot&&H.push({props:st(st({},Ot(st(st({},Ce),{},{displayedData:se,props:y,dataKey:X,item:ee,bandSize:He,barPosition:Fe,offset:C,stackedData:Se,layout:O,dataStartIndex:j,dataEndIndex:N}))),{},_n(_n(_n({key:ee.key||"item-".concat(le)},K,Ce[K]),Z,Ce[Z]),"animationId",D)),childIndex:rye(ee,y.children),item:ee})}),H},h=function(y,b){var S=y.props,A=y.dataStartIndex,C=y.dataEndIndex,D=y.updateId;if(!T6({props:S}))return null;var j=S.children,N=S.layout,P=S.stackOffset,O=S.data,T=S.reverseStackOrder,M=wF(N),L=M.numericAxisName,V=M.cateAxisName,K=io(j,r),Z=hke(O,K,"".concat(L,"Id"),"".concat(V,"Id"),P,T),Y=l.reduce(function($,X){var te="".concat(X.axisType,"Map");return st(st({},$),{},_n({},te,hLe(S,st(st({},X),{},{graphicalItems:K,stackGroups:X.axisType===L&&Z,dataStartIndex:A,dataEndIndex:C}))))},{}),H=gLe(st(st({},Y),{},{props:S,graphicalItems:K}),b==null?void 0:b.legendBBox);Object.keys(Y).forEach(function($){Y[$]=d(S,Y[$],H,$.replace("Map",""),n)});var ee=Y["".concat(V,"Map")],le=pLe(ee),se=p(S,st(st({},Y),{},{dataStartIndex:A,dataEndIndex:C,updateId:D,graphicalItems:K,stackGroups:Z,offset:H}));return st(st({formattedGraphicalItems:se,graphicalItems:K,offset:H,stackGroups:Z},le),Y)},g=function(v){function y(b){var S,A,C;return X6e(this,y),C=J6e(this,y,[b]),_n(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_n(C,"accessibilityManager",new R6e),_n(C,"handleLegendBBoxUpdate",function(D){if(D){var j=C.state,N=j.dataStartIndex,P=j.dataEndIndex,O=j.updateId;C.setState(st({legendBBox:D},h({props:C.props,dataStartIndex:N,dataEndIndex:P,updateId:O},st(st({},C.state),{},{legendBBox:D}))))}}),_n(C,"handleReceiveSyncEvent",function(D,j,N){if(C.props.syncId===D){if(N===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(j)}}),_n(C,"handleBrushChange",function(D){var j=D.startIndex,N=D.endIndex;if(j!==C.state.dataStartIndex||N!==C.state.dataEndIndex){var P=C.state.updateId;C.setState(function(){return st({dataStartIndex:j,dataEndIndex:N},h({props:C.props,dataStartIndex:j,dataEndIndex:N,updateId:P},C.state))}),C.triggerSyncEvent({dataStartIndex:j,dataEndIndex:N})}}),_n(C,"handleMouseEnter",function(D){var j=C.getMouseInfo(D);if(j){var N=st(st({},j),{},{isTooltipActive:!0});C.setState(N),C.triggerSyncEvent(N);var P=C.props.onMouseEnter;Sn(P)&&P(N,D)}}),_n(C,"triggeredAfterMouseMove",function(D){var j=C.getMouseInfo(D),N=j?st(st({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(N),C.triggerSyncEvent(N);var P=C.props.onMouseMove;Sn(P)&&P(N,D)}),_n(C,"handleItemMouseEnter",function(D){C.setState(function(){return{isTooltipActive:!0,activeItem:D,activePayload:D.tooltipPayload,activeCoordinate:D.tooltipPosition||{x:D.cx,y:D.cy}}})}),_n(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),_n(C,"handleMouseMove",function(D){D.persist(),C.throttleTriggeredAfterMouseMove(D)}),_n(C,"handleMouseLeave",function(D){C.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};C.setState(j),C.triggerSyncEvent(j);var N=C.props.onMouseLeave;Sn(N)&&N(j,D)}),_n(C,"handleOuterEvent",function(D){var j=nye(D),N=cl(C.props,"".concat(j));if(j&&Sn(N)){var P,O;/.*touch.*/i.test(j)?O=C.getMouseInfo(D.changedTouches[0]):O=C.getMouseInfo(D),N((P=O)!==null&&P!==void 0?P:{},D)}}),_n(C,"handleClick",function(D){var j=C.getMouseInfo(D);if(j){var N=st(st({},j),{},{isTooltipActive:!0});C.setState(N),C.triggerSyncEvent(N);var P=C.props.onClick;Sn(P)&&P(N,D)}}),_n(C,"handleMouseDown",function(D){var j=C.props.onMouseDown;if(Sn(j)){var N=C.getMouseInfo(D);j(N,D)}}),_n(C,"handleMouseUp",function(D){var j=C.props.onMouseUp;if(Sn(j)){var N=C.getMouseInfo(D);j(N,D)}}),_n(C,"handleTouchMove",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(D.changedTouches[0])}),_n(C,"handleTouchStart",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&C.handleMouseDown(D.changedTouches[0])}),_n(C,"handleTouchEnd",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&C.handleMouseUp(D.changedTouches[0])}),_n(C,"handleDoubleClick",function(D){var j=C.props.onDoubleClick;if(Sn(j)){var N=C.getMouseInfo(D);j(N,D)}}),_n(C,"handleContextMenu",function(D){var j=C.props.onContextMenu;if(Sn(j)){var N=C.getMouseInfo(D);j(N,D)}}),_n(C,"triggerSyncEvent",function(D){C.props.syncId!==void 0&&AC.emit(CC,C.props.syncId,D,C.eventEmitterSymbol)}),_n(C,"applySyncEvent",function(D){var j=C.props,N=j.layout,P=j.syncMethod,O=C.state.updateId,T=D.dataStartIndex,M=D.dataEndIndex;if(D.dataStartIndex!==void 0||D.dataEndIndex!==void 0)C.setState(st({dataStartIndex:T,dataEndIndex:M},h({props:C.props,dataStartIndex:T,dataEndIndex:M,updateId:O},C.state)));else if(D.activeTooltipIndex!==void 0){var L=D.chartX,V=D.chartY,K=D.activeTooltipIndex,Z=C.state,Y=Z.offset,H=Z.tooltipTicks;if(!Y)return;if(typeof P=="function")K=P(H,D);else if(P==="value"){K=-1;for(var ee=0;ee<H.length;ee++)if(H[ee].value===D.activeLabel){K=ee;break}}var le=st(st({},Y),{},{x:Y.left,y:Y.top}),se=Math.min(L,le.x+le.width),$=Math.min(V,le.y+le.height),X=H[K]&&H[K].value,te=UP(C.state,C.props.data,K),oe=H[K]?{x:N==="horizontal"?H[K].coordinate:se,y:N==="horizontal"?$:H[K].coordinate}:CX;C.setState(st(st({},D),{},{activeLabel:X,activeCoordinate:oe,activePayload:te,activeTooltipIndex:K}))}else C.setState(D)}),_n(C,"renderCursor",function(D){var j,N=C.state,P=N.isTooltipActive,O=N.activeCoordinate,T=N.activePayload,M=N.offset,L=N.activeTooltipIndex,V=N.tooltipAxisBandSize,K=C.getTooltipEventType(),Z=(j=D.props.active)!==null&&j!==void 0?j:P,Y=C.props.layout,H=D.key||"_recharts-cursor";return be.createElement(U6e,{key:H,activeCoordinate:O,activePayload:T,activeTooltipIndex:L,chartName:n,element:D,isActive:Z,layout:Y,offset:M,tooltipAxisBandSize:V,tooltipEventType:K})}),_n(C,"renderPolarAxis",function(D,j,N){var P=cl(D,"type.axisType"),O=cl(C.state,"".concat(P,"Map")),T=D.type.defaultProps,M=T!==void 0?st(st({},T),D.props):D.props,L=O&&O[M["".concat(P,"Id")]];return I.cloneElement(D,st(st({},L),{},{className:Rn(P,L.className),key:D.key||"".concat(j,"-").concat(N),ticks:Hu(L,!0)}))}),_n(C,"renderPolarGrid",function(D){var j=D.props,N=j.radialLines,P=j.polarAngles,O=j.polarRadius,T=C.state,M=T.radiusAxisMap,L=T.angleAxisMap,V=Ud(M),K=Ud(L),Z=K.cx,Y=K.cy,H=K.innerRadius,ee=K.outerRadius;return I.cloneElement(D,{polarAngles:Array.isArray(P)?P:Hu(K,!0).map(function(le){return le.coordinate}),polarRadius:Array.isArray(O)?O:Hu(V,!0).map(function(le){return le.coordinate}),cx:Z,cy:Y,innerRadius:H,outerRadius:ee,key:D.key||"polar-grid",radialLines:N})}),_n(C,"renderLegend",function(){var D=C.state.formattedGraphicalItems,j=C.props,N=j.children,P=j.width,O=j.height,T=C.props.margin||{},M=P-(T.left||0)-(T.right||0),L=YG({children:N,formattedGraphicalItems:D,legendWidth:M,legendContent:u});if(!L)return null;var V=L.item,K=vF(L,W6e);return I.cloneElement(V,st(st({},K),{},{chartWidth:P,chartHeight:O,margin:T,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),_n(C,"renderTooltip",function(){var D,j=C.props,N=j.children,P=j.accessibilityLayer,O=el(N,xr);if(!O)return null;var T=C.state,M=T.isTooltipActive,L=T.activeCoordinate,V=T.activePayload,K=T.activeLabel,Z=T.offset,Y=(D=O.props.active)!==null&&D!==void 0?D:M;return I.cloneElement(O,{viewBox:st(st({},Z),{},{x:Z.left,y:Z.top}),active:Y,label:K,payload:Y?V:[],coordinate:L,accessibilityLayer:P})}),_n(C,"renderBrush",function(D){var j=C.props,N=j.margin,P=j.data,O=C.state,T=O.offset,M=O.dataStartIndex,L=O.dataEndIndex,V=O.updateId;return I.cloneElement(D,{key:D.key||"_recharts-brush",onChange:Zx(C.handleBrushChange,D.props.onChange),data:P,x:Pt(D.props.x)?D.props.x:T.left,y:Pt(D.props.y)?D.props.y:T.top+T.height+T.brushBottom-(N.bottom||0),width:Pt(D.props.width)?D.props.width:T.width,startIndex:M,endIndex:L,updateId:"brush-".concat(V)})}),_n(C,"renderReferenceElement",function(D,j,N){if(!D)return null;var P=C,O=P.clipPathId,T=C.state,M=T.xAxisMap,L=T.yAxisMap,V=T.offset,K=D.type.defaultProps||{},Z=D.props,Y=Z.xAxisId,H=Y===void 0?K.xAxisId:Y,ee=Z.yAxisId,le=ee===void 0?K.yAxisId:ee;return I.cloneElement(D,{key:D.key||"".concat(j,"-").concat(N),xAxis:M[H],yAxis:L[le],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:O})}),_n(C,"renderActivePoints",function(D){var j=D.item,N=D.activePoint,P=D.basePoint,O=D.childIndex,T=D.isRange,M=[],L=j.props.key,V=j.item.type.defaultProps!==void 0?st(st({},j.item.type.defaultProps),j.item.props):j.item.props,K=V.activeDot,Z=V.dataKey,Y=st(st({index:O,dataKey:Z,cx:N.x,cy:N.y,r:4,fill:H3(j.item),strokeWidth:2,stroke:"#fff",payload:N.payload,value:N.value},un(K,!1)),sw(K));return M.push(y.renderActiveDot(K,Y,"".concat(L,"-activePoint-").concat(O))),P?M.push(y.renderActiveDot(K,st(st({},Y),{},{cx:P.x,cy:P.y}),"".concat(L,"-basePoint-").concat(O))):T&&M.push(null),M}),_n(C,"renderGraphicChild",function(D,j,N){var P=C.filterFormatItem(D,j,N);if(!P)return null;var O=C.getTooltipEventType(),T=C.state,M=T.isTooltipActive,L=T.tooltipAxis,V=T.activeTooltipIndex,K=T.activeLabel,Z=C.props.children,Y=el(Z,xr),H=P.props,ee=H.points,le=H.isRange,se=H.baseLine,$=P.item.type.defaultProps!==void 0?st(st({},P.item.type.defaultProps),P.item.props):P.item.props,X=$.activeDot,te=$.hide,oe=$.activeBar,me=$.activeShape,_e=!!(!te&&M&&Y&&(X||oe||me)),Ce={};O!=="axis"&&Y&&Y.props.trigger==="click"?Ce={onClick:Zx(C.handleItemMouseEnter,D.props.onClick)}:O!=="axis"&&(Ce={onMouseLeave:Zx(C.handleItemMouseLeave,D.props.onMouseLeave),onMouseEnter:Zx(C.handleItemMouseEnter,D.props.onMouseEnter)});var fe=I.cloneElement(D,st(st({},P.props),Ce));function xe(dt){return typeof L.dataKey=="function"?L.dataKey(dt.payload):null}if(_e)if(V>=0){var Se,ie;if(L.dataKey&&!L.allowDuplicatedCategory){var He=typeof L.dataKey=="function"?xe:"payload.".concat(L.dataKey.toString());Se=aw(ee,He,K),ie=le&&se&&aw(se,He,K)}else Se=ee==null?void 0:ee[V],ie=le&&se&&se[V];if(me||oe){var Fe=D.props.activeIndex!==void 0?D.props.activeIndex:V;return[I.cloneElement(D,st(st(st({},P.props),Ce),{},{activeIndex:Fe})),null,null]}if(!wn(Se))return[fe].concat($g(C.renderActivePoints({item:P,activePoint:Se,basePoint:ie,childIndex:V,isRange:le})))}else{var he,Ye=(he=C.getItemByXY(C.state.activeCoordinate))!==null&&he!==void 0?he:{graphicalItem:fe},mt=Ye.graphicalItem,vt=mt.item,Qe=vt===void 0?D:vt,Ot=mt.childIndex,ht=st(st(st({},P.props),Ce),{},{activeIndex:Ot});return[I.cloneElement(Qe,ht),null,null]}return le?[fe,null,null]:[fe,null]}),_n(C,"renderCustomized",function(D,j,N){return I.cloneElement(D,st(st({key:"recharts-customized-".concat(N)},C.props),C.state))}),_n(C,"renderMap",{CartesianGrid:{handler:r1,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:r1},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:r1},YAxis:{handler:r1},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((S=b.id)!==null&&S!==void 0?S:Lf("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=GK(C.triggeredAfterMouseMove,(A=b.throttleDelay)!==null&&A!==void 0?A:1e3/60),C.state={},C}return nLe(y,v),Z6e(y,[{key:"componentDidMount",value:function(){var S,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,A=S.children,C=S.data,D=S.height,j=S.layout,N=el(A,xr);if(N){var P=N.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,T=UP(this.state,C,P,O),M=this.state.tooltipTicks[P].coordinate,L=(this.state.offset.top+D)/2,V=j==="horizontal",K=V?{x:M,y:L}:{y:M,x:L},Z=this.state.formattedGraphicalItems.find(function(H){var ee=H.item;return ee.type.name==="Scatter"});Z&&(K=st(st({},K),Z.props.points[P].tooltipPosition),T=Z.props.points[P].tooltipPayload);var Y={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:O,activePayload:T,activeCoordinate:K};this.setState(Y),this.renderCursor(N),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var C,D;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(D=this.props.margin.top)!==null&&D!==void 0?D:0}})}return null}},{key:"componentDidUpdate",value:function(S){mN([el(S.children,xr)],[el(this.props.children,xr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=el(this.props.children,xr);if(S&&typeof S.props.shared=="boolean"){var A=S.props.shared?"axis":"item";return o.indexOf(A)>=0?A:a}return a}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var A=this.container,C=A.getBoundingClientRect(),D=PCe(C),j={chartX:Math.round(S.pageX-D.left),chartY:Math.round(S.pageY-D.top)},N=C.width/A.offsetWidth||1,P=this.inRange(j.chartX,j.chartY,N);if(!P)return null;var O=this.state,T=O.xAxisMap,M=O.yAxisMap,L=this.getTooltipEventType(),V=bF(this.state,this.props.data,this.props.layout,P);if(L!=="axis"&&T&&M){var K=Ud(T).scale,Z=Ud(M).scale,Y=K&&K.invert?K.invert(j.chartX):null,H=Z&&Z.invert?Z.invert(j.chartY):null;return st(st({},j),{},{xValue:Y,yValue:H},V)}return V?st(st({},j),V):null}},{key:"inRange",value:function(S,A){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,D=this.props.layout,j=S/C,N=A/C;if(D==="horizontal"||D==="vertical"){var P=this.state.offset,O=j>=P.left&&j<=P.left+P.width&&N>=P.top&&N<=P.top+P.height;return O?{x:j,y:N}:null}var T=this.state,M=T.angleAxisMap,L=T.radiusAxisMap;if(M&&L){var V=Ud(M);return $8({x:j,y:N},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,A=this.getTooltipEventType(),C=el(S,xr),D={};C&&A==="axis"&&(C.props.trigger==="click"?D={onClick:this.handleClick}:D={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=sw(this.props,this.handleOuterEvent);return st(st({},j),D)}},{key:"addListener",value:function(){AC.on(CC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){AC.removeListener(CC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,A,C){for(var D=this.state.formattedGraphicalItems,j=0,N=D.length;j<N;j++){var P=D[j];if(P.item===S||P.props.key===S.key||A===Xu(P.item.type)&&C===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,A=this.state.offset,C=A.left,D=A.top,j=A.height,N=A.width;return be.createElement("defs",null,be.createElement("clipPath",{id:S},be.createElement("rect",{x:C,y:D,height:j,width:N})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(A,C){var D=gF(C,2),j=D[0],N=D[1];return st(st({},A),{},_n({},j,N.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(A,C){var D=gF(C,2),j=D[0],N=D[1];return st(st({},A),{},_n({},j,N.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[S])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(S){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[S])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(S){var A=this.state,C=A.formattedGraphicalItems,D=A.activeItem;if(C&&C.length)for(var j=0,N=C.length;j<N;j++){var P=C[j],O=P.props,T=P.item,M=T.type.defaultProps!==void 0?st(st({},T.type.defaultProps),T.props):T.props,L=Xu(T.type);if(L==="Bar"){var V=(O.data||[]).find(function(H){return f3e(S,H)});if(V)return{graphicalItem:P,payload:V}}else if(L==="RadialBar"){var K=(O.data||[]).find(function(H){return $8(S,H)});if(K)return{graphicalItem:P,payload:K}}else if(d_(P,D)||f_(P,D)||rb(P,D)){var Z=eIe({graphicalItem:P,activeTooltipItem:D,itemData:M.data}),Y=M.activeIndex===void 0?Z:M.activeIndex;return{graphicalItem:st(st({},P),{},{childIndex:Y}),payload:rb(P,D)?M.data[Z]:P.props.data[Z]}}}return null}},{key:"render",value:function(){var S=this;if(!T6(this))return null;var A=this.props,C=A.children,D=A.className,j=A.width,N=A.height,P=A.style,O=A.compact,T=A.title,M=A.desc,L=vF(A,H6e),V=un(L,!1);if(O)return be.createElement(G7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},be.createElement(vN,vm({},V,{width:j,height:N,title:T,desc:M}),this.renderClipPath(),I6(C,this.renderMap)));if(this.props.accessibilityLayer){var K,Z;V.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,V.role=(Z=this.props.role)!==null&&Z!==void 0?Z:"application",V.onKeyDown=function(H){S.accessibilityManager.keyboardEvent(H)},V.onFocus=function(){S.accessibilityManager.focus()}}var Y=this.parseEventsOfWrapper();return be.createElement(G7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},be.createElement("div",vm({className:Rn("recharts-wrapper",D),style:st({position:"relative",cursor:"default",width:j,height:N},P)},Y,{ref:function(ee){S.container=ee}}),be.createElement(vN,vm({},V,{width:j,height:N,title:T,desc:M,style:lLe}),this.renderClipPath(),I6(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(I.Component);_n(g,"displayName",n),_n(g,"defaultProps",st({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),_n(g,"getDerivedStateFromProps",function(v,y){var b=v.dataKey,S=v.data,A=v.children,C=v.width,D=v.height,j=v.layout,N=v.stackOffset,P=v.margin,O=y.dataStartIndex,T=y.dataEndIndex;if(y.updateId===void 0){var M=xF(v);return st(st(st({},M),{},{updateId:0},h(st(st({props:v},M),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:S,prevWidth:C,prevHeight:D,prevLayout:j,prevStackOffset:N,prevMargin:P,prevChildren:A})}if(b!==y.prevDataKey||S!==y.prevData||C!==y.prevWidth||D!==y.prevHeight||j!==y.prevLayout||N!==y.prevStackOffset||!km(P,y.prevMargin)){var L=xF(v),V={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},K=st(st({},bF(y,S,j)),{},{updateId:y.updateId+1}),Z=st(st(st({},L),V),K);return st(st(st({},Z),h(st({props:v},Z),y)),{},{prevDataKey:b,prevData:S,prevWidth:C,prevHeight:D,prevLayout:j,prevStackOffset:N,prevMargin:P,prevChildren:A})}if(!mN(A,y.prevChildren)){var Y,H,ee,le,se=el(A,Eg),$=se&&(Y=(H=se.props)===null||H===void 0?void 0:H.startIndex)!==null&&Y!==void 0?Y:O,X=se&&(ee=(le=se.props)===null||le===void 0?void 0:le.endIndex)!==null&&ee!==void 0?ee:T,te=$!==O||X!==T,oe=!wn(S),me=oe&&!te?y.updateId:y.updateId+1;return st(st({updateId:me},h(st(st({props:v},y),{},{updateId:me,dataStartIndex:$,dataEndIndex:X}),y)),{},{prevChildren:A,dataStartIndex:$,dataEndIndex:X})}return null}),_n(g,"renderActiveDot",function(v,y,b){var S;return I.isValidElement(v)?S=I.cloneElement(v,y):Sn(v)?S=v(y):S=be.createElement(Hb,y),be.createElement(zn,{className:"recharts-active-dot",key:b},S)});var m=I.forwardRef(function(y,b){return be.createElement(g,vm({},y,{ref:b}))});return m.displayName=g.displayName,m},yLe=qb({chartName:"LineChart",GraphicalChild:ud,axisComponents:[{axisType:"xAxis",AxisComp:ii},{axisType:"yAxis",AxisComp:ni}],formatAxisMap:p_}),Po=qb({chartName:"BarChart",GraphicalChild:Ti,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ii},{axisType:"yAxis",AxisComp:ni}],formatAxisMap:p_}),WP=qb({chartName:"PieChart",GraphicalChild:Ec,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:u_},{axisType:"radiusAxis",AxisComp:l_}],formatAxisMap:Cke,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),__=qb({chartName:"AreaChart",GraphicalChild:Bs,axisComponents:[{axisType:"xAxis",AxisComp:ii},{axisType:"yAxis",AxisComp:ni}],formatAxisMap:p_}),bLe=qb({chartName:"ComposedChart",GraphicalChild:[ud,Bs,Ti,w_],axisComponents:[{axisType:"xAxis",AxisComp:ii},{axisType:"yAxis",AxisComp:ni},{axisType:"zAxis",AxisComp:x_}],formatAxisMap:p_});const jr={PREGNANT:{key:"PREGNANT",Icon:Wl,color:"text-pink-400",label:"Preñada"},IN_SERVICE_CONFIRMED:{key:"IN_SERVICE_CONFIRMED",Icon:$ce,color:"text-pink-500",label:"Servicio Visto"},IN_SERVICE:{key:"IN_SERVICE",Icon:gS,color:"text-red-400",label:"En Monta"},EMPTY:{key:"EMPTY",Icon:Nce,color:"text-zinc-500",label:"Vacía"},SIRE_IN_SERVICE:{key:"SIRE_IN_SERVICE",Icon:Qce,color:"text-blue-400",label:"Reproductor Activo"},MILKING:{key:"MILKING",Icon:cue,color:"text-blue-300",label:"En Ordeño"},DRYING_OFF:{key:"DRYING_OFF",Icon:pp,color:"text-yellow-400",label:"Secando"},DRY:{key:"DRY",Icon:Dc,color:"text-zinc-400",label:"Seca"}},Sc=t=>{if(!t||t==="N/A")return-1;const e=new Date(t+"T00:00:00Z"),n=new Date,r=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));if(isNaN(e.getTime()))return-1;const i=r.getTime()-e.getTime(),a=Math.floor(i/(1e3*60*60*24));return Math.max(0,a)},Mc=t=>{const e=Sc(t);if(e<0)return"N/A";if(e<=60)return`${e} día${e!==1?"s":""}`;const n=30.4375,r=Math.floor(e/n);if(r<12){const s=Math.round(e%n);return`${r} mes${r!==1?"es":""}${s>0?` y ${s} día${s!==1?"s":""}`:""}`}const i=Math.floor(r/12),a=Math.round(r%12);return`${i} año${i!==1?"s":""}${a>0?` y ${a} mes${a!==1?"es":""}`:""}`},Bf=(t,e)=>{const n=Sc(t.birthDate);return n<0?"Indefinido":t.sex==="Hembra"?t.weaningDate||n>60?e.some(i=>i.goatId===t.id)?"Cabra":"Cabritona":"Cabrita":n>=365?"Macho Cabrío":t.weaningDate||n>60?"Macho de Levante":"Cabrito"},Vf=(t,e)=>{const n=new Date(t+"T00:00:00Z"),r=new Date(e+"T00:00:00Z");if(isNaN(n.getTime())||isNaN(r.getTime()))return 0;const i=r.getTime()-n.getTime(),a=Math.floor(i/(1e3*60*60*24));return Math.max(0,a)},xLe=(t,e)=>{const r=1+(e-50)/(e+50),i=t*Math.max(.5,r);return parseFloat(i.toFixed(2))},tD=(t,e)=>{if(e.length===0)return{overall:null,recent:null};const n=[...e].sort((s,o)=>new Date(s.date).getTime()-new Date(o.date).getTime()),r=n[n.length-1];let i=null;if(t&&t>0){const s=Sc(r.date)-Sc(new Date().toISOString().split("T")[0])+Sc(new Date(r.date).toISOString().split("T")[0]);s>0&&(i=(r.kg-t)/s)}let a=null;if(n.length>=2){const s=r,o=n[n.length-2],l=(new Date(s.date).getTime()-new Date(o.date).getTime())/(1e3*60*60*24);l>0&&(a=(s.kg-o.kg)/l)}return{overall:i,recent:a}},EX=(t,e,n)=>{const r=t.map(d=>({age:(new Date(d.date).getTime()-new Date(e).getTime())/864e5,kg:d.kg})).sort((d,f)=>d.age-f.age);if(r.length<1)return null;const i=r.filter(d=>d.age<=n).pop(),a=r.find(d=>d.age>=n);if(i&&i.age===n)return i.kg;if(a&&a.age===n)return a.kg;if(!i||!a)return null;if(i.age===a.age)return i.kg;const s=a.age-i.age;if(s===0)return i.kg;const o=a.kg-i.kg,l=n-i.age,u=i.kg+l/s*o;return parseFloat(u.toFixed(2))},wLe=(t,e,n)=>{if(e===0)return 100;const r=t/e*100,i=1+(180-Math.min(n,180))/180*.1;return Math.round(r*i)},SLe=t=>{if(!t.weaningWeight||!t.weaningDate||!t.birthWeight||!t.birthDate)return null;const e=(new Date(t.weaningDate).getTime()-new Date(t.birthDate).getTime())/(1e3*60*60*24);if(e<=0)return null;const n=(t.weaningWeight-t.birthWeight)/e,r=t.birthWeight+n*60;return parseFloat(r.toFixed(2))},_Le=(t,e)=>{const n=e.filter(r=>r.animalId===t.id);return EX(n,t.birthDate,210)},NX=(t,e,n,r,i)=>{const a=[];if(!t)return[];if(t.sex==="Hembra"){const o=e.filter(l=>l.goatId===t.id&&l.status!=="finalizada").sort((l,u)=>new Date(u.parturitionDate).getTime()-new Date(l.parturitionDate).getTime())[0];o&&(o.status==="activa"?a.push(jr.MILKING):o.status==="en-secado"?a.push(jr.DRYING_OFF):o.status==="seca"&&a.push(jr.DRY))}if(t.reproductiveStatus==="Preñada"?a.push(jr.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(l=>l.femaleId===t.id&&l.sireLotId===t.sireLotId)?a.push(jr.IN_SERVICE_CONFIRMED):a.push(jr.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push(jr.EMPTY),t.sex==="Macho"){const o=i.filter(d=>d.status==="Activo"),l=new Set(o.map(d=>d.id));r.some(d=>d.sireId===t.id&&l.has(d.seasonId))&&a.push(jr.SIRE_IN_SERVICE)}return Array.from(new Set(a.map(o=>o.key))).map(o=>jr[o])},HP={A:"Alpina",S:"Saanen",N:"Anglo Nubian",AGC:"Canaria",C:"Canaria",T:"Toggenburger",CR:"Criolla"},qP=t=>{const e=new Map;if(!t)return e;const n=/(\d+(\.\d+)?)%?([A-Z]+)/g;let r;for(;(r=n.exec(t.toUpperCase()))!==null;){const i=parseFloat(r[1]),a=r[3],s=Object.keys(HP).includes(a);!isNaN(i)&&s&&e.set(a,(e.get(a)||0)+i)}return e},ALe=t=>t.size===0?"":Array.from(t.entries()).filter(([,n])=>n>0).sort((n,r)=>r[1]-n[1]).map(([n,r])=>`${parseFloat(r.toFixed(2))}%${n}`).join(" "),CLe=(t,e)=>{const n=qP(t),r=qP(e),i=new Map;return new Set([...n.keys(),...r.keys()]).forEach(s=>{const o=n.get(s)||0,l=r.get(s)||0;i.set(s,o/2+l/2)}),ALe(i)},nD=t=>{const e=qP(t);if(e.size===0)return"";const n=Array.from(e.entries()).sort((o,l)=>l[1]-o[1]);if(n.length===0)return"";const[r,i]=n[0],a=96.9,s=HP[r];for(const[o,l]of n)if(l>=a)return`${HP[o]} Pura`;return i>0?`Mestiza ${s}`:"Mestiza"},jLe=()=>{const{animals:t,parturitions:e,bodyWeighings:n,sireLots:r,breedingSeasons:i,weighings:a,appConfig:s}=Kt();return I.useMemo(()=>{const l=t.filter(se=>!se.isReference),u={cabras:[],cabritonas:[],cabritas:[],cabritos:[],machosLevante:[],reproductores:[]};l.forEach(se=>{switch(Bf(se,e)){case"Cabra":u.cabras.push(se);break;case"Cabritona":u.cabritonas.push(se);break;case"Cabrita":u.cabritas.push(se);break;case"Cabrito":u.cabritos.push(se);break;case"Macho de Levante":u.machosLevante.push(se);break;case"Macho Cabrío":u.reproductores.push(se);break}});const d=u.cabras.length+u.cabritonas.length+u.cabritas.length,f=e.filter(se=>se.status==="activa"&&u.cabras.some($=>$.id===se.goatId)).length,p=u.cabras.length-f,h=u.cabras.filter(se=>se.reproductiveStatus==="Preñada").length,g=u.cabras.filter(se=>se.reproductiveStatus==="Vacía"||se.reproductiveStatus==="Post-Parto"||se.reproductiveStatus==="Destetada").length,m=u.cabras.filter(se=>se.reproductiveStatus==="En Servicio").length,v=[{name:"Preñadas",value:h,color:"#34C759"},{name:"Vacías",value:g,color:"#FF9500"},{name:"En Monta",value:m,color:"#007AFF"}].filter(se=>se.value>0),y=new Date().getFullYear(),b=[];for(let se=0;se<2;se++){const $=new Date(y,se*6,1),X=new Date(y,(se+1)*6,0),te=a.filter(Ce=>{const fe=new Date(Ce.date+"T00:00:00");return fe>=$&&fe<=X}),oe=new Set(te.map(Ce=>Ce.goatId)),me=u.cabras.filter(Ce=>!!e.find(xe=>xe.goatId===Ce.id&&new Date(xe.parturitionDate)<=X)).length,_e=me>0?oe.size/me*100:0;b.push({name:`Semestre ${se+1}`,"En Ordeño (%)":parseFloat(_e.toFixed(1))})}const S=s.pesoPrimerServicioKg,A=S*.95,C=u.cabritonas.filter(se=>se.reproductiveStatus==="En Servicio").length,D=u.cabritonas.filter(se=>{const $=n.filter(X=>X.animalId===se.id).sort((X,te)=>new Date(te.date).getTime()-new Date(X.date).getTime())[0];return $?$.kg>=A&&$.kg<S||$.kg>=S&&se.reproductiveStatus!=="En Servicio"&&se.reproductiveStatus!=="Preñada":!1}).length,j=u.cabritonas.length-C-h,N=u.cabritas.length,P=u.cabritos.length,O=N+P,T=[{name:"Hembras",value:N,color:"#FF2D55"},{name:"Machos",value:P,color:"#007AFF"}].filter(se=>se.value>0),M=[...u.cabritas,...u.cabritos].map(se=>{const $=Sc(se.birthDate),X=n.filter(xe=>xe.animalId===se.id).sort((xe,Se)=>new Date(Se.date).getTime()-new Date(xe.date).getTime())[0],te=(X==null?void 0:X.kg)||0,oe=$>=52,me=te>=9.5,_e=$>=45&&$<52,Ce=$>=40&&$<45||te>=8.5&&te<9.5;let fe="Amamantando";return oe&&me?fe="Listo para Destete":_e?fe="En Fase Destete":Ce&&(fe="Próximo a Destete"),{id:se.id,status:fe}}),L=M.filter(se=>se.status==="En Fase Destete").length,V=M.filter(se=>se.status==="Próximo a Destete").length,K=M.filter(se=>se.status==="Listo para Destete").length,Z=M.filter(se=>se.status==="Amamantando").length,Y=[{name:"Listo",value:K,color:"#34C759"},{name:"En Fase",value:L,color:"#FFD60A"},{name:"Próximo",value:V,color:"#FF9F0A"},{name:"Amamantando",value:Z,color:"#007AFF"}].filter(se=>se.value>0),H=new Set(i.filter(se=>se.status==="Activo").map(se=>se.id)),ee=r.filter(se=>H.has(se.seasonId)),le=u.reproductores.filter(se=>ee.some($=>$.sireId===se.id)).map(se=>{const $=ee.find(te=>te.sireId===se.id),X=t.filter(te=>te.sireLotId===$.id).length;return{...se,lotId:$.id,assignedFemales:X}});return{totalPoblacion:l.length,totalVientres:d,cabras:{total:u.cabras.length,enProduccion:f,secas:p,preñadas:h,vacias:g,enMonta:m,reproductiveStatusData:v,milkingPercentageData:b},cabritonas:{total:u.cabritonas.length,enMonta:C,disponibles:j,proximasAServicio:D},crias:{total:O,hembras:N,machos:P,criasEnMaternidadData:T,enFaseDestete:L,proximasADestete:V,listasParaDestete:K,desteteStatusData:Y},reproductores:{total:u.reproductores.length,activos:le}}},[t,e,n,r,i,a,s.pesoPrimerServicioKg])},ar=t=>{if(!t)return"N/A";const e=t.id,n=t.name,r=t.isReference,i=e?e.toUpperCase().trim():"ID_DESCONOCIDO",a=n?String(n).toUpperCase().trim():"";return r&&a.length>0&&i.startsWith("REF-")?a:a.length>0?`${i} ${a}`:i},i1=({title:t,value:e,icon:n,onClick:r})=>c.jsxs("button",{onClick:r,className:"bg-dashboard-surface backdrop-blur-xl rounded-2xl p-4 border border-brand-border/50 text-left hover:border-brand-orange/60 hover:bg-dashboard-surface-hover transition-all duration-200 w-full",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-medium text-brand-light-gray uppercase tracking-wider",children:t}),c.jsx(n,{className:"w-6 h-6 text-brand-orange"})]}),c.jsx("p",{className:"text-4xl font-semibold text-white mt-4",children:e})]}),Td=({title:t,children:e})=>c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-brand-light-gray mb-3 px-1",children:t}),c.jsx("div",{className:"bg-brand-glass backdrop-blur-lg rounded-xl p-4 border border-brand-border/50",children:e})]}),Dd=({label:t,value:e,unit:n,subLabel:r,icon:i})=>c.jsxs("div",{className:"flex justify-between items-center py-2.5",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[i&&c.jsx(i,{className:"w-5 h-5 text-zinc-400"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-base text-white",children:t}),r&&c.jsx("p",{className:"text-xs text-brand-medium-gray mt-0.5",children:r})]})]}),c.jsxs("div",{className:"flex items-baseline gap-1.5",children:[c.jsx("p",{className:"text-xl font-semibold text-white",children:e}),c.jsx("p",{className:"text-sm text-brand-medium-gray",children:n})]})]}),EC=({active:t,payload:e,label:n})=>t&&e&&e.length?c.jsxs("div",{className:"p-2 bg-zinc-800/80 backdrop-blur-md rounded-lg border border-zinc-700 text-white text-sm",children:[c.jsx("p",{className:"font-semibold mb-1",children:n||e[0].name}),e.map((r,i)=>c.jsxs("p",{style:{color:r.color},children:[r.name,": ",c.jsxs("span",{className:"font-bold",children:[r.value,r.unit]})]},`item-${i}`))]}):null;function SF({navigateTo:t}){const[e,n]=I.useState("physical"),[r,i]=I.useState(!1),[a,s]=I.useState(!1),[o,l]=I.useState(!1),[u,d]=I.useState(!1),[f,p]=I.useState(!1),h=jLe();return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-lg mx-auto space-y-6 pb-24 pt-4",children:[c.jsxs("div",{className:"text-center mb-6 px-4",children:[c.jsxs("p",{className:"text-base text-zinc-300 font-light",children:["Población Total del Rebaño: ",c.jsx("span",{className:"font-bold text-white",children:h.totalPoblacion})]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Total de Vientres: ",c.jsx("span",{className:"font-bold text-zinc-200",children:h.totalVientres})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4",children:[c.jsx(i1,{title:"Cabras",value:h.cabras.total,icon:mS,onClick:()=>s(!0)}),c.jsx(i1,{title:"Cabritonas",value:h.cabritonas.total,icon:ms,onClick:()=>l(!0)}),c.jsx(i1,{title:"Crías",value:h.crias.total,icon:Wl,onClick:()=>d(!0)}),c.jsx(i1,{title:"Reproductores",value:h.reproductores.total,icon:Oce,onClick:()=>p(!0)})]}),c.jsx("div",{className:"pt-4 px-4",children:c.jsxs("div",{className:"relative bg-brand-glass rounded-xl p-1 border border-brand-border flex items-center",children:[c.jsxs("button",{onClick:()=>n("physical"),className:`w-1/2 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="physical"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[c.jsx(hu,{size:16})," ",c.jsx("span",{className:"text-sm font-semibold",children:"Lotes Físicos"}),c.jsx("span",{onClick:g=>{g.stopPropagation(),i(!0)},className:"ml-2 p-1 rounded-full hover:bg-brand-orange/50",children:c.jsx(Ki,{size:18})})]}),c.jsxs("button",{onClick:()=>n("breeding"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="breeding"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[c.jsx(bS,{size:16})," Lotes de Monta"]})]})}),c.jsxs("div",{className:"pt-0",children:[" ",e==="physical"&&c.jsx(sme,{navigateTo:t}),e==="breeding"&&c.jsx(dme,{navigateTo:t})]})]}),c.jsx(sn,{isOpen:a,onClose:()=>s(!1),title:"Análisis de Hembras Adultas",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs(Td,{title:"Estado Productivo y Reproductivo",children:[c.jsx(Dd,{icon:Fce,label:"En Producción",unit:"cabras",value:h.cabras.enProduccion,subLabel:`${(h.cabras.total>0?h.cabras.enProduccion/h.cabras.total*100:0).toFixed(0)}% del total`}),c.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),c.jsx(Dd,{icon:Dc,label:"Secas",unit:"cabras",value:h.cabras.secas,subLabel:`${(h.cabras.total>0?h.cabras.secas/h.cabras.total*100:0).toFixed(0)}% del total`}),c.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),c.jsx(Dd,{icon:XM,label:"En Monta Activa",unit:"cabras",value:h.cabras.enMonta})]}),c.jsx(Td,{title:"Estado Reproductivo (Vientres)",children:c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{width:"100%",height:"100%",children:c.jsxs(WP,{children:[c.jsx(Ec,{data:h.cabras.reproductiveStatusData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:3,cornerRadius:5,children:h.cabras.reproductiveStatusData.map(g=>c.jsx(hl,{fill:g.color,stroke:"none"},`cell-${g.name}`))}),c.jsx(xr,{content:c.jsx(EC,{})}),c.jsx(Bl,{iconSize:10,wrapperStyle:{fontSize:"12px",paddingTop:"10px"}})]})})})}),c.jsx(Td,{title:"Rendimiento Anual en Ordeño",children:c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{width:"100%",height:"100%",children:c.jsxs(Po,{data:h.cabras.milkingPercentageData,margin:{top:15,right:10,left:-20,bottom:0},children:[c.jsx(ii,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},axisLine:!1,tickLine:!1}),c.jsx(ni,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},unit:"%",axisLine:!1,tickLine:!1}),c.jsx(xr,{content:c.jsx(EC,{unit:"%"}),cursor:{fill:"rgba(255, 255, 255, 0.08)"}}),c.jsx(Ti,{dataKey:"En Ordeño (%)",fill:"#FF9500",radius:[8,8,0,0],animationDuration:500})]})})})})]})}),c.jsx(sn,{isOpen:o,onClose:()=>l(!1),title:"Análisis de Cabritonas",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs(Td,{title:"Disponibilidad para Monta",children:[c.jsx(Dd,{icon:XM,label:"En Monta",unit:"cabritonas",value:h.cabritonas.enMonta,subLabel:`${(h.cabritonas.total>0?h.cabritonas.enMonta/h.cabritonas.total*100:0).toFixed(0)}% del total`}),c.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),c.jsx(Dd,{icon:hu,label:"Disponibles",unit:"cabritonas",value:h.cabritonas.disponibles})]}),c.jsx(Td,{title:"Próximas a Servicio",children:c.jsx(Dd,{icon:mue,label:"Con Peso Óptimo",unit:"cabritonas",value:h.cabritonas.proximasAServicio,subLabel:"(≥ 28.5 Kg y sin lote asignado)"})})]})}),c.jsx(sn,{isOpen:u,onClose:()=>d(!1),title:"Análisis de Crías en Maternidad",children:c.jsxs("div",{className:"space-y-5",children:[c.jsx(Td,{title:"Distribución por Sexo",children:c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{width:"100%",height:"100%",children:c.jsxs(WP,{children:[c.jsx(Ec,{data:h.crias.criasEnMaternidadData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:3,cornerRadius:5,children:h.crias.criasEnMaternidadData.map(g=>c.jsx(hl,{fill:g.color,stroke:"none"},`cell-${g.name}`))}),c.jsx(xr,{content:c.jsx(EC,{})}),c.jsx(Bl,{iconSize:10,wrapperStyle:{fontSize:"12px",paddingTop:"10px"}})]})})})}),c.jsxs(Td,{title:"Estado de Destete",children:[c.jsx(Dd,{icon:Wl,label:"Listas para Destete",unit:"crías",value:h.crias.listasParaDestete,subLabel:"≥ 52 días y ≥ 9.5 Kg"}),c.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),c.jsx(Dd,{icon:Ece,label:"En Fase de Destete",unit:"crías",value:h.crias.enFaseDestete,subLabel:"45-52 días"})]})]})}),c.jsx(sn,{isOpen:f,onClose:()=>p(!1),title:"Estado de Reproductores",children:c.jsx("div",{className:"space-y-4",children:c.jsx(Td,{title:"Activos en Temporada de Monta",children:h.reproductores.activos.length>0?h.reproductores.activos.map((g,m)=>c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>{p(!1),t({name:"sire-lot-detail",lotId:g.lotId})},className:"w-full text-left p-2 rounded-lg flex justify-between items-center hover:bg-brand-glass transition-colors group",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-white",children:ar(g)}),c.jsx("p",{className:"text-xs text-brand-medium-gray",children:"Ver lote de monta asignado"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"text-base font-semibold text-brand-orange",children:[g.assignedFemales," hembras"]}),c.jsx(qi,{className:"text-zinc-500 group-hover:text-white transition-colors"})]})]}),m<h.reproductores.activos.length-1&&c.jsx("div",{className:"border-b border-brand-border/50 mx-2"})]},g.id)):c.jsx("p",{className:"text-sm text-brand-medium-gray text-center py-4",children:"No hay reproductores activos en una temporada de monta actualmente."})})})}),c.jsx(gue,{isOpen:r,onClose:()=>i(!1)})]})}const ELe=()=>({isRelated:I.useCallback((e,n,r)=>{if(!e||!n)return!1;const i=r.find(a=>a.id===e);if(!i)return!1;if(i.fatherId===n)return!0;if(i.motherId){const a=r.find(s=>s.id===i.motherId);if(a&&a.fatherId===n)return!0}return!1},[])}),NLe=(t,e,n,r,i)=>{const a=[];if(!t)return[];if(t.sex==="Hembra"){const s=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,l)=>new Date(l.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];s&&(s.status==="activa"?a.push("MILKING"):s.status==="en-secado"?a.push("DRYING_OFF"):a.push("DRY"))}if(t.reproductiveStatus==="Preñada"?a.push("PREGNANT"):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?a.push("IN_SERVICE_CONFIRMED"):a.push("IN_SERVICE"):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push("EMPTY"),t.sex==="Macho"){const s=i.filter(u=>u.status==="Activo"),o=new Set(s.map(u=>u.id));r.some(u=>u.sireId===t.id&&o.has(u.seasonId))&&a.push("SIRE_IN_SERVICE")}return Array.from(new Set(a))},PLe=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],_F=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-zinc-400 mb-2",children:t}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{type:"button",onClick:()=>r("ALL"),className:`px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const a=i.Icon||null;return c.jsxs("button",{type:"button",onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-blue text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[a&&c.jsx(a,{size:14}),i.label]},i.key)})]})]}),kLe=({activeMode:t,setActiveMode:e})=>c.jsxs("div",{className:"flex bg-zinc-900 rounded-xl p-1 w-full flex-shrink-0",children:[c.jsxs("button",{onClick:()=>e("Activo"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${t==="Activo"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[c.jsx(hu,{size:16})," Activos"]}),c.jsxs("button",{onClick:()=>e("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${t==="Referencia"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[c.jsx(LW,{size:16})," Referencia"]})]}),TLe=({animal:t,isSelected:e,onToggle:n,inbreedingRisk:r})=>{const i=t.name?String(t.name).toUpperCase().trim():"";return c.jsx("div",{onClick:()=>n(t.id),className:`w-full text-left p-3 rounded-xl cursor-pointer transition-colors flex items-center justify-between min-h-[70px] 
        	 	 ${r?"bg-yellow-900/50 border border-yellow-500/60 hover:bg-yellow-800/50":"bg-zinc-800/50 hover:bg-zinc-700"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"flex-shrink-0",children:e?c.jsx(vS,{className:"text-brand-green",size:20}):c.jsx(yS,{className:"text-zinc-500",size:20})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),i&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:i}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})})]})]})})},A_=({isOpen:t,onClose:e,onSelect:n,animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,title:l,sireIdForInbreedingCheck:u,sessionType:d})=>{const{isRelated:f}=ELe(),[p,h]=I.useState(""),[g,m]=I.useState("Activo"),[v,y]=I.useState(new Set),[b,S]=I.useState(!1),[A,C]=I.useState("ALL"),[D,j]=I.useState("ALL"),[N,P]=I.useState("ALL"),[O,T]=I.useState("ALL"),M=()=>{C("ALL"),j("ALL"),P("ALL"),T("ALL")},L=I.useMemo(()=>r.map($=>({...$,statuses:NLe($,i,a,o,s),formattedAge:Mc($.birthDate),zootecnicCategory:Bf($,i)})),[r,i,a,o,s]);I.useEffect(()=>{t&&d&&(M(),d==="leche"&&j("MILKING"))},[t,d]);const V=I.useMemo(()=>{let $=L;if($=$.filter(X=>g==="Activo"?X.status==="Activo"&&!X.isReference&&!X.sireLotId:X.isReference),A!=="ALL"&&($=$.filter(X=>X.zootecnicCategory===A)),g==="Activo"?(D!=="ALL"&&($=$.filter(X=>X.statuses.includes(D))),N!=="ALL"&&($=$.filter(X=>X.statuses.includes(N)))):O!=="ALL"&&($=$.filter(X=>X.status===O)),d==="leche"&&($=$.filter(X=>X.statuses.includes("MILKING"))),p){const X=p.toLowerCase();$=$.filter(te=>te.id.toLowerCase().includes(X)||te.name&&te.name.toLowerCase().includes(X))}return $.sort((X,te)=>X.id.localeCompare(te.id))},[L,A,D,N,O,g,p,d]);I.useEffect(()=>{t&&d&&y(new Set(V.map($=>$.id)))},[V,t,d]);const K=I.useMemo(()=>V.length>0&&V.every($=>v.has($.id)),[V,v]),Z=I.useMemo(()=>v.size>0&&!K,[v,K]),Y=()=>{y(K?new Set:new Set(V.map($=>$.id)))},H=$=>{y(X=>{const te=new Set(X);return te.has($)?te.delete($):te.add($),te})},ee=()=>{n(Array.from(v)),le()},le=()=>{y(new Set),h(""),S(!1),e()},se=l.replace("Añadir animales a:","Lote:");return c.jsxs(c.Fragment,{children:[c.jsx(sn,{isOpen:t,onClose:le,title:se,size:"fullscreen",children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx("div",{className:"flex-shrink-0 space-y-3 px-2 pt-4 pb-2",children:c.jsxs("div",{className:"relative",children:[c.jsx(fu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),c.jsx("input",{type:"search",placeholder:"Buscar ID o Nombre...",value:p,onChange:$=>h($.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-orange"})]})}),c.jsxs("div",{className:"flex-grow overflow-y-auto space-y-2 px-2 min-h-[10rem]",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[c.jsxs("div",{onClick:Y,className:"flex items-center gap-3 cursor-pointer p-1",children:[K?c.jsx(vS,{className:"text-brand-green",size:20}):Z?c.jsx(Kce,{className:"text-zinc-500",size:20}):c.jsx(yS,{className:"text-zinc-500",size:20}),c.jsxs("span",{className:"text-sm font-semibold text-zinc-300",children:[K?"Deseleccionar Todos":"Seleccionar Todos"," (",V.length,")"]})]}),c.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-1.5 text-brand-blue font-semibold p-2 rounded-lg hover:bg-zinc-800",children:[c.jsx(FW,{size:16}),"Filtros"]})]}),V.length>0?V.map($=>{const X=u?f($.id,u,r):!1;return c.jsx(TLe,{animal:$,isSelected:v.has($.id),onToggle:H,inbreedingRisk:X},$.id)}):c.jsx("p",{className:"text-zinc-500 text-center py-8",children:p?`No se encontraron resultados para "${p}"`:"No hay animales con estos filtros."})]}),c.jsx("div",{className:"flex-shrink-0 px-2 py-4 border-t border-zinc-700/50 bg-ios-modal-bg",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:le,className:"text-zinc-400 hover:text-white px-4 py-2",children:c.jsx("span",{className:"font-semibold",children:"Cancelar"})}),c.jsxs("button",{onClick:ee,disabled:v.size===0,className:"bg-brand-green hover:bg-green-600 text-white font-bold py-3 px-6 rounded-xl disabled:opacity-50 transition-colors",children:["Seleccionar (",v.size,")"]})]})})]})}),c.jsx(sn,{isOpen:b,onClose:()=>S(!1),title:"Filtros",size:"default",children:c.jsxs("div",{className:"space-y-4 px-4 pb-4",children:[c.jsx(kLe,{activeMode:g,setActiveMode:m}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Categoría Zootécnica"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>C("ALL"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${A==="ALL"?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:"Todos"}),PLe.map($=>c.jsx("button",{onClick:()=>C($),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${A===$?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:$},$))]})]}),g==="Activo"&&c.jsxs(c.Fragment,{children:[c.jsx(_F,{title:"Filtros Productivos",filters:["MILKING","DRYING_OFF","DRY"].map($=>jr[$]).filter(Boolean),activeFilter:D,onFilterChange:j}),c.jsx(_F,{title:"Filtros Reproductivos",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map($=>jr[$]).filter(Boolean),activeFilter:N,onFilterChange:P})]}),g==="Referencia"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Causa de Baja"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>T("ALL"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${O==="ALL"?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:"Todas"}),c.jsx("button",{onClick:()=>T("Venta"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${O==="Venta"?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:"Venta"}),c.jsx("button",{onClick:()=>T("Muerte"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${O==="Muerte"?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:"Muerte"}),c.jsx("button",{onClick:()=>T("Descarte"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${O==="Descarte"?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:"Descarte"})]})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-zinc-700/50",children:[c.jsxs("button",{onClick:M,className:"flex-shrink-0 p-2 rounded-xl border border-zinc-700 bg-zinc-800 text-zinc-300 hover:bg-zinc-700",children:[c.jsx(lT,{size:16})," ",c.jsx("span",{className:"ml-1 text-sm",children:"Limpiar Filtros"})]}),c.jsx("button",{onClick:()=>S(!1),className:"px-5 py-2 bg-brand-blue text-white font-bold rounded-lg",children:"Ver Resultados"})]})]})})]})},DLe=({isOpen:t,onClose:e,animalsToTransfer:n,fromLot:r})=>{const{lots:i,updateAnimal:a}=Kt(),[s,o]=I.useState(""),l=I.useMemo(()=>i.filter(d=>d.name!==r),[i,r]),u=async()=>{if(!s||n.length===0)return;const d=n.map(f=>a(f,{location:s}));try{await Promise.all(d),e()}catch(f){console.error("Error al transferir animales:",f)}};return c.jsx(sn,{isOpen:t,onClose:e,title:`Transferir ${n.length} animales`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:["Transferir desde: ",c.jsx("span",{className:"font-semibold text-white",children:r})]}),c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1 mt-4",children:"Hacia el lote:"}),c.jsxs("select",{value:s,onChange:d=>o(d.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[c.jsx("option",{value:"",children:"Seleccionar lote de destino..."}),l.map(d=>c.jsx("option",{value:d.name,children:d.name},d.id))]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:u,disabled:!s,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:"Confirmar Transferencia"})]})]})})};function Lp(t,e,n){let r=n.initialDeps??[],i;function a(){var s,o,l,u;let d;n.key&&((s=n.debug)!=null&&s.call(n))&&(d=Date.now());const f=t();if(!(f.length!==r.length||f.some((g,m)=>r[m]!==g)))return i;r=f;let h;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(h=Date.now()),i=e(...f),n.key&&((l=n.debug)!=null&&l.call(n))){const g=Math.round((Date.now()-d)*100)/100,m=Math.round((Date.now()-h)*100)/100,v=m/16,y=(b,S)=>{for(b=String(b);b.length<S;)b=" "+b;return b};console.info(`%c⏱ ${y(m,5)} /${y(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*v,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(u=n==null?void 0:n.onChange)==null||u.call(n,i),i}return a.updateDeps=s=>{r=s},a}function AF(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const ILe=(t,e)=>Math.abs(t-e)<1.01,OLe=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},CF=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},MLe=t=>t,RLe=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},LLe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=s=>{const{width:o,height:l}=s;e({width:Math.round(o),height:Math.round(l)})};if(i(CF(n)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(s=>{const o=()=>{const l=s[0];if(l!=null&&l.borderBoxSize){const u=l.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(CF(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(n,{box:"border-box"}),()=>{a.unobserve(n)}},jF={passive:!0},EF=typeof window>"u"?!0:"onscrollend"in window,FLe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const a=t.options.useScrollendEvent&&EF?()=>{}:OLe(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),s=d=>()=>{const{horizontal:f,isRtl:p}=t.options;i=f?n.scrollLeft*(p&&-1||1):n.scrollTop,a(),e(i,d)},o=s(!0),l=s(!1);l(),n.addEventListener("scroll",o,jF);const u=t.options.useScrollendEvent&&EF;return u&&n.addEventListener("scrollend",l,jF),()=>{n.removeEventListener("scroll",o),u&&n.removeEventListener("scrollend",l)}},zLe=(t,e,n)=>{if(e!=null&&e.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},$Le=(t,{adjustments:e=0,behavior:n},r)=>{var i,a;const s=t+e;(a=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[r.options.horizontal?"left":"top"]:s,behavior:n})};class BLe{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const s=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var a;return(a=r())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=r())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:MLe,rangeExtractor:RLe,onChange:()=>{},measureElement:zLe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Lp(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,a=new Map;for(let s=r-1;s>=0;s--){const o=n[s];if(i.has(o.lane))continue;const l=a.get(o.lane);if(l==null||o.end>l.end?a.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((s,o)=>s.end===o.end?s.index-o.index:s.end-o.end)[0]:void 0},this.getMeasurementOptions=Lp(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,a,s)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s}),{key:!1}),this.getMeasurements=Lp(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s},o)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let d=l;d<n;d++){const f=a(d),p=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d),h=p?p.end+this.options.gap:r+i,g=o.get(f),m=typeof g=="number"?g:this.options.estimateSize(d),v=h+m,y=p?p.lane:d%this.options.lanes;u[d]={index:d,start:h,size:m,end:v,key:f,lane:y}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Lp(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,a)=>this.range=n.length>0&&r>0?VLe({measurements:n,outerSize:r,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Lp(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,a,s)=>a===null||s===null?[]:n({startIndex:a,endIndex:s,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),a=this.measurementsCache[i];if(!a)return;const s=a.key,o=this.elementsCache.get(s);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(s,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const a=this.itemSizeCache.get(i.key)??i.size,s=r-a;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Lp(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let a=0,s=n.length;a<s;a++){const o=n[a],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return AF(r[PX(0,r.length-1,i=>AF(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const a=this.getSize(),s=this.getScrollOffset();r==="auto"&&(r=n>=s+a?"end":"start"),r==="center"?n+=(i-a)/2:r==="end"&&(n-=a);const o=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const a=this.getSize(),s=this.getScrollOffset();if(r==="auto")if(i.end>=s+a-this.options.scrollPaddingEnd)r="end";else if(i.start<=s+this.options.scrollPaddingStart)r="start";else return[s,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let a=0;const s=10,o=u=>{if(!this.targetWindow)return;const d=this.getOffsetForIndex(n,u);if(!d){console.warn("Failed to get offset for index:",n);return}const[f,p]=d;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const h=this.getScrollOffset(),g=this.getOffsetForIndex(n,p);if(!g){console.warn("Failed to get offset for index:",n);return}ILe(g[0],h)||l(p)})},l=u=>{this.targetWindow&&(a++,a<s?this.targetWindow.requestAnimationFrame(()=>o(u)):console.warn(`Failed to scroll to index ${n} after ${s} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const a=Array(this.options.lanes).fill(null);let s=r.length-1;for(;s>=0&&a.some(o=>o===null);){const o=r[s];a[o.lane]===null&&(a[o.lane]=o.end),s--}i=Math.max(...a.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const PX=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,a=n(i);if(a<r)t=i+1;else if(a>r)e=i-1;else return i}return t>0?t-1:0};function VLe({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,a=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:i};let s=PX(0,i,a,n),o=s;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(d=>d<n+e);){const d=t[o];l[d.lane]=d.end,o++}const u=Array(r).fill(n+e);for(;s>=0&&u.some(d=>d>=n);){const d=t[s];u[d.lane]=d.start,s--}s=Math.max(0,s-s%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:s,endIndex:o}}const NF=typeof document<"u"?I.useLayoutEffect:I.useEffect;function ULe(t){const e=I.useReducer(()=>({}),{})[1],n={...t,onChange:(i,a)=>{var s;a?fy.flushSync(e):e(),(s=t.onChange)==null||s.call(t,i,a)}},[r]=I.useState(()=>new BLe(n));return r.setOptions(n),NF(()=>r._didMount(),[]),NF(()=>r._willUpdate()),r}function kX(t){return ULe({observeElementRect:LLe,observeElementOffset:FLe,scrollToFn:$Le,...t})}const TX=({statuses:t})=>{if(!t||t.length===0)return null;const e=[...t].sort((n,r)=>{const i=["MILKING","DRYING_OFF","DRY","PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"];return i.indexOf(n.key)-i.indexOf(r.key)});return c.jsx("div",{className:"flex items-center space-x-1.5",children:e.map(({key:n,Icon:r,color:i,label:a})=>c.jsx("span",{title:a,children:c.jsx(r,{className:i,size:16,strokeWidth:2.5})},n))})},rD=({animal:t,onSelect:e,onOpenActions:n})=>{const r=gp(),i=I.useRef(!1),a=(l,u)=>{const d=u.offset.x,f=u.velocity.x;(d<-80/2||f<-500)&&n(t),r.start({x:0}),setTimeout(()=>{i.current=!1},50)},s=t.isReference?t.sex==="Macho"?"bg-blue-400":"bg-pink-400":null,o=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border min-h-[80px]",children:[c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:c.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(Ki,{size:20}),c.jsx("span",{className:"text-[10px] mt-0.5 font-semibold",children:"Acciones"})]})}),s&&c.jsx("div",{className:`absolute top-2 right-2 w-2 h-2 rounded-full ${s} z-20`,title:t.sex}),c.jsx(Wi.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{i.current=!0},onDragEnd:a,onTap:()=>{i.current||e(t.id)},animate:r,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-3 flex items-center min-h-[80px]",children:c.jsxs("div",{className:"flex justify-between items-center w-full",children:[" ",c.jsxs("div",{className:"min-w-0 pr-3",children:[" ",c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),o&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:o}),c.jsxs("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:[c.jsxs("span",{children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]}),t.sireName&&c.jsxs("span",{className:"block sm:inline sm:ml-2",children:["(Rep: ",t.sireName,")"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[" ",c.jsx(TX,{statuses:t.statusObjects})," ",c.jsx(qi,{className:"text-zinc-600 w-5 h-5"})," "]})]})})]})},iD=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=I.useState(""),[a,s]=I.useState(""),[o,l]=I.useState(""),{fathers:u}=Kt(),d=()=>{l("");const f=r.trim().toUpperCase(),p=a.trim();if(!f||!p){l("Ambos campos son obligatorios.");return}if(u.some(h=>h.id===f)){l("Este ID ya está en uso. Por favor, elige otro.");return}n({id:f,name:p}),i(""),s("")};return c.jsx(sn,{isOpen:t,onClose:e,title:"Añadir Nuevo Padre",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce un ID único y el nombre del nuevo semental."}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{type:"text",value:r,onChange:f=>i(f.target.value),placeholder:"ID del Padre (ej. P002)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"}),c.jsx("input",{type:"text",value:a,onChange:f=>s(f.target.value),placeholder:"Nombre del Padre (ej. Sansón)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),o&&c.jsx("p",{className:"text-sm text-brand-red",children:o}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 rounded-lg hover:bg-zinc-500 font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:d,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Padre"})]})]})})};function vr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function pl(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Js(t,e){const n=vr(t);return isNaN(e)?pl(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Nc(t,e){const n=vr(t);if(isNaN(e))return pl(t,NaN);if(!e)return n;const r=n.getDate(),i=pl(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const aD=6048e5,WLe=864e5;let HLe={};function Kb(){return HLe}function gu(t,e){var o,l,u,d;const n=Kb(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=vr(t),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function np(t){return gu(t,{weekStartsOn:1})}function DX(t){const e=vr(t),n=e.getFullYear(),r=pl(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=np(r),a=pl(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const s=np(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function Bg(t){const e=vr(t);return e.setHours(0,0,0,0),e}function c5(t){const e=vr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function tu(t,e){const n=Bg(t),r=Bg(e),i=+n-c5(n),a=+r-c5(r);return Math.round((i-a)/WLe)}function qLe(t){const e=DX(t),n=pl(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),np(n)}function KP(t,e){const n=e*7;return Js(t,n)}function KLe(t,e){return Nc(t,e*12)}function GLe(t){let e;return t.forEach(function(n){const r=vr(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function YLe(t){let e;return t.forEach(n=>{const r=vr(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function xo(t,e){const n=Bg(t),r=Bg(e);return+n==+r}function sD(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function XLe(t){if(!sD(t)&&typeof t!="number")return!1;const e=vr(t);return!isNaN(Number(e))}function ub(t,e){const n=vr(t),r=vr(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function QLe(t,e,n){const r=gu(t,n),i=gu(e,n),a=+r-c5(r),s=+i-c5(i);return Math.round((a-s)/aD)}function oD(t){const e=vr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function jo(t){const e=vr(t);return e.setDate(1),e.setHours(0,0,0,0),e}function IX(t){const e=vr(t),n=pl(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function lD(t,e){var o,l,u,d;const n=Kb(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=vr(t),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function OX(t){return lD(t,{weekStartsOn:1})}const ZLe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JLe=(t,e,n)=>{let r;const i=ZLe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Im(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const e8e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},t8e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},n8e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},r8e={date:Im({formats:e8e,defaultWidth:"full"}),time:Im({formats:t8e,defaultWidth:"full"}),dateTime:Im({formats:n8e,defaultWidth:"full"})},i8e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},a8e=(t,e,n,r)=>i8e[t];function Xc(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const s8e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},o8e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},l8e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},c8e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},u8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},d8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},f8e=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},h8e={ordinalNumber:f8e,era:Xc({values:s8e,defaultWidth:"wide"}),quarter:Xc({values:o8e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Xc({values:l8e,defaultWidth:"wide"}),day:Xc({values:c8e,defaultWidth:"wide"}),dayPeriod:Xc({values:u8e,defaultWidth:"wide",formattingValues:d8e,defaultFormattingWidth:"wide"})};function Qc(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?m8e(o,f=>f.test(s)):p8e(o,f=>f.test(s));let u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}function p8e(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function m8e(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function MX(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const g8e=/^(\d+)(th|st|nd|rd)?/i,v8e=/\d+/i,y8e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},b8e={any:[/^b/i,/^(a|c)/i]},x8e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},w8e={any:[/1/i,/2/i,/3/i,/4/i]},S8e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_8e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},A8e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},C8e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},j8e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},E8e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},N8e={ordinalNumber:MX({matchPattern:g8e,parsePattern:v8e,valueCallback:t=>parseInt(t,10)}),era:Qc({matchPatterns:y8e,defaultMatchWidth:"wide",parsePatterns:b8e,defaultParseWidth:"any"}),quarter:Qc({matchPatterns:x8e,defaultMatchWidth:"wide",parsePatterns:w8e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qc({matchPatterns:S8e,defaultMatchWidth:"wide",parsePatterns:_8e,defaultParseWidth:"any"}),day:Qc({matchPatterns:A8e,defaultMatchWidth:"wide",parsePatterns:C8e,defaultParseWidth:"any"}),dayPeriod:Qc({matchPatterns:j8e,defaultMatchWidth:"any",parsePatterns:E8e,defaultParseWidth:"any"})},RX={code:"en-US",formatDistance:JLe,formatLong:r8e,formatRelative:a8e,localize:h8e,match:N8e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function P8e(t){const e=vr(t);return tu(e,IX(e))+1}function LX(t){const e=vr(t),n=+np(e)-+qLe(e);return Math.round(n/aD)+1}function FX(t,e){var d,f,p,h;const n=vr(t),r=n.getFullYear(),i=Kb(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(p=i.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,s=pl(t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=gu(s,e),l=pl(t,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const u=gu(l,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function k8e(t,e){var o,l,u,d;const n=Kb(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=FX(t,e),a=pl(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),gu(a,e)}function zX(t,e){const n=vr(t),r=+gu(n,e)-+k8e(n,e);return Math.round(r/aD)+1}function Mr(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Id={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Mr(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Mr(n+1,2)},d(t,e){return Mr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Mr(t.getHours()%12||12,e.length)},H(t,e){return Mr(t.getHours(),e.length)},m(t,e){return Mr(t.getMinutes(),e.length)},s(t,e){return Mr(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Mr(i,e.length)}},Fp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},PF={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Id.y(t,e)},Y:function(t,e,n,r){const i=FX(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return Mr(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Mr(a,e.length)},R:function(t,e){const n=DX(t);return Mr(n,e.length)},u:function(t,e){const n=t.getFullYear();return Mr(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Mr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Mr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Id.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Mr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=zX(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Mr(i,e.length)},I:function(t,e,n){const r=LX(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Mr(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Id.d(t,e)},D:function(t,e,n){const r=P8e(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Mr(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Mr(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Mr(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Mr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Fp.noon:r===0?i=Fp.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Fp.evening:r>=12?i=Fp.afternoon:r>=4?i=Fp.morning:i=Fp.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Id.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Id.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Mr(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Mr(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Id.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Id.s(t,e)},S:function(t,e){return Id.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return TF(r);case"XXXX":case"XX":return dh(r);case"XXXXX":case"XXX":default:return dh(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return TF(r);case"xxxx":case"xx":return dh(r);case"xxxxx":case"xxx":default:return dh(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+kF(r,":");case"OOOO":default:return"GMT"+dh(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+kF(r,":");case"zzzz":default:return"GMT"+dh(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Mr(r,e.length)},T:function(t,e,n){const r=t.getTime();return Mr(r,e.length)}};function kF(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Mr(a,2)}function TF(t,e){return t%60===0?(t>0?"-":"+")+Mr(Math.abs(t)/60,2):dh(t,e)}function dh(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Mr(Math.trunc(r/60),2),a=Mr(r%60,2);return n+i+e+a}const DF=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},$X=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},T8e=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return DF(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",DF(r,e)).replace("{{time}}",$X(i,e))},D8e={p:$X,P:T8e},I8e=/^D+$/,O8e=/^Y+$/,M8e=["D","DD","YY","YYYY"];function R8e(t){return I8e.test(t)}function L8e(t){return O8e.test(t)}function F8e(t,e,n){const r=z8e(t,e,n);if(console.warn(r),M8e.includes(t))throw new RangeError(r)}function z8e(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $8e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,B8e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,V8e=/^'([^]*?)'?$/,U8e=/''/g,W8e=/[a-zA-Z]/;function wp(t,e,n){var d,f,p,h,g,m,v,y;const r=Kb(),i=(n==null?void 0:n.locale)??r.locale??RX,a=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(p=r.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((m=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((y=(v=r.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??0,o=vr(t);if(!XLe(o))throw new RangeError("Invalid time value");let l=e.match(B8e).map(b=>{const S=b[0];if(S==="p"||S==="P"){const A=D8e[S];return A(b,i.formatLong)}return b}).join("").match($8e).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const S=b[0];if(S==="'")return{isToken:!1,value:H8e(b)};if(PF[S])return{isToken:!0,value:b};if(S.match(W8e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(b=>{if(!b.isToken)return b.value;const S=b.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&L8e(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&R8e(S))&&F8e(S,e,String(t));const A=PF[S[0]];return A(o,S,i.localize,u)}).join("")}function H8e(t){const e=t.match(V8e);return e?e[1].replace(U8e,"'"):t}function q8e(t){const e=vr(t),n=e.getFullYear(),r=e.getMonth(),i=pl(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function K8e(t){return Math.trunc(+vr(t)/1e3)}function G8e(t){const e=vr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function Y8e(t,e){return QLe(G8e(t),jo(t),e)+1}function GP(t,e){const n=vr(t),r=vr(e);return n.getTime()>r.getTime()}function BX(t,e){const n=vr(t),r=vr(e);return+n<+r}function cD(t,e){const n=vr(t),r=vr(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function X8e(t,e){const n=vr(t),r=vr(e);return n.getFullYear()===r.getFullYear()}function NC(t,e){return Js(t,-e)}function PC(t,e){const n=vr(t),r=n.getFullYear(),i=n.getDate(),a=pl(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const s=q8e(a);return n.setMonth(e,Math.min(i,s)),n}function IF(t,e){const n=vr(t);return isNaN(+n)?pl(t,NaN):(n.setFullYear(e),n)}const Q8e={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},Z8e=(t,e,n)=>{let r;const i=Q8e[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},J8e={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},e7e={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},t7e={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},n7e={date:Im({formats:J8e,defaultWidth:"full"}),time:Im({formats:e7e,defaultWidth:"full"}),dateTime:Im({formats:t7e,defaultWidth:"full"})},r7e={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},i7e={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},a7e=(t,e,n,r)=>e.getHours()!==1?i7e[t]:r7e[t],s7e={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},o7e={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},l7e={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},c7e={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},u7e={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},d7e={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},f7e=(t,e)=>Number(t)+"º",h7e={ordinalNumber:f7e,era:Xc({values:s7e,defaultWidth:"wide"}),quarter:Xc({values:o7e,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Xc({values:l7e,defaultWidth:"wide"}),day:Xc({values:c7e,defaultWidth:"wide"}),dayPeriod:Xc({values:u7e,defaultWidth:"wide",formattingValues:d7e,defaultFormattingWidth:"wide"})},p7e=/^(\d+)(º)?/i,m7e=/\d+/i,g7e={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},v7e={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},y7e={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},b7e={any:[/1/i,/2/i,/3/i,/4/i]},x7e={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},w7e={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},S7e={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},_7e={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},A7e={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},C7e={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},j7e={ordinalNumber:MX({matchPattern:p7e,parsePattern:m7e,valueCallback:function(t){return parseInt(t,10)}}),era:Qc({matchPatterns:g7e,defaultMatchWidth:"wide",parsePatterns:v7e,defaultParseWidth:"any"}),quarter:Qc({matchPatterns:y7e,defaultMatchWidth:"wide",parsePatterns:b7e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qc({matchPatterns:x7e,defaultMatchWidth:"wide",parsePatterns:w7e,defaultParseWidth:"any"}),day:Qc({matchPatterns:S7e,defaultMatchWidth:"wide",parsePatterns:_7e,defaultParseWidth:"any"}),dayPeriod:Qc({matchPatterns:A7e,defaultMatchWidth:"any",parsePatterns:C7e,defaultParseWidth:"any"})},Gb={code:"es",formatDistance:Z8e,formatLong:n7e,formatRelative:a7e,localize:h7e,match:j7e,options:{weekStartsOn:1,firstWeekContainsDate:1}};var En=function(){return En=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},En.apply(this,arguments)};function E7e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function VX(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Yb(t){return t.mode==="multiple"}function Xb(t){return t.mode==="range"}function C_(t){return t.mode==="single"}var N7e={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function P7e(t,e){return wp(t,"LLLL y",e)}function k7e(t,e){return wp(t,"d",e)}function T7e(t,e){return wp(t,"LLLL",e)}function D7e(t){return"".concat(t)}function I7e(t,e){return wp(t,"cccccc",e)}function O7e(t,e){return wp(t,"yyyy",e)}var M7e=Object.freeze({__proto__:null,formatCaption:P7e,formatDay:k7e,formatMonthCaption:T7e,formatWeekNumber:D7e,formatWeekdayName:I7e,formatYearCaption:O7e}),R7e=function(t,e,n){return wp(t,"do MMMM (EEEE)",n)},L7e=function(){return"Month: "},F7e=function(){return"Go to next month"},z7e=function(){return"Go to previous month"},$7e=function(t,e){return wp(t,"cccc",e)},B7e=function(t){return"Week n. ".concat(t)},V7e=function(){return"Year: "},U7e=Object.freeze({__proto__:null,labelDay:R7e,labelMonthDropdown:L7e,labelNext:F7e,labelPrevious:z7e,labelWeekNumber:B7e,labelWeekday:$7e,labelYearDropdown:V7e});function W7e(){var t="buttons",e=N7e,n=RX,r={},i={},a=1,s={},o=new Date;return{captionLayout:t,classNames:e,formatters:M7e,labels:U7e,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:s,today:o,mode:"default"}}function H7e(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,a=t.fromDate,s=t.toDate;return r?a=jo(r):e&&(a=new Date(e,0,1)),i?s=oD(i):n&&(s=new Date(n,11,31)),{fromDate:a?Bg(a):void 0,toDate:s?Bg(s):void 0}}var UX=I.createContext(void 0);function q7e(t){var e,n=t.initialProps,r=W7e(),i=H7e(n),a=i.fromDate,s=i.toDate,o=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;o!=="buttons"&&(!a||!s)&&(o="buttons");var l;(C_(n)||Yb(n)||Xb(n))&&(l=n.onSelect);var u=En(En(En({},r),n),{captionLayout:o,classNames:En(En({},r.classNames),n.classNames),components:En({},n.components),formatters:En(En({},r.formatters),n.formatters),fromDate:a,labels:En(En({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:En(En({},r.modifiers),n.modifiers),modifiersClassNames:En(En({},r.modifiersClassNames),n.modifiersClassNames),onSelect:l,styles:En(En({},r.styles),n.styles),toDate:s});return c.jsx(UX.Provider,{value:u,children:t.children})}function si(){var t=I.useContext(UX);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function WX(t){var e=si(),n=e.locale,r=e.classNames,i=e.styles,a=e.formatters.formatCaption;return c.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function K7e(t){return c.jsx("svg",En({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:c.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function HX(t){var e,n,r=t.onChange,i=t.value,a=t.children,s=t.caption,o=t.className,l=t.style,u=si(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:K7e;return c.jsxs("div",{className:o,style:l,children:[c.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),c.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:r,children:a}),c.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[s,c.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function G7e(t){var e,n=si(),r=n.fromDate,i=n.toDate,a=n.styles,s=n.locale,o=n.formatters.formatMonthCaption,l=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return c.jsx(c.Fragment,{});if(!i)return c.jsx(c.Fragment,{});var f=[];if(X8e(r,i))for(var p=jo(r),h=r.getMonth();h<=i.getMonth();h++)f.push(PC(p,h));else for(var p=jo(new Date),h=0;h<=11;h++)f.push(PC(p,h));var g=function(v){var y=Number(v.target.value),b=PC(jo(t.displayMonth),y);t.onChange(b)},m=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:HX;return c.jsx(m,{name:"months","aria-label":d(),className:l.dropdown_month,style:a.dropdown_month,onChange:g,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:s}),children:f.map(function(v){return c.jsx("option",{value:v.getMonth(),children:o(v,{locale:s})},v.getMonth())})})}function Y7e(t){var e,n=t.displayMonth,r=si(),i=r.fromDate,a=r.toDate,s=r.locale,o=r.styles,l=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,p=[];if(!i)return c.jsx(c.Fragment,{});if(!a)return c.jsx(c.Fragment,{});for(var h=i.getFullYear(),g=a.getFullYear(),m=h;m<=g;m++)p.push(IF(IX(new Date),m));var v=function(b){var S=IF(jo(n),Number(b.target.value));t.onChange(S)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:HX;return c.jsx(y,{name:"years","aria-label":f(),className:l.dropdown_year,style:o.dropdown_year,onChange:v,value:n.getFullYear(),caption:d(n,{locale:s}),children:p.map(function(b){return c.jsx("option",{value:b.getFullYear(),children:d(b,{locale:s})},b.getFullYear())})})}function X7e(t,e){var n=I.useState(t),r=n[0],i=n[1],a=e===void 0?r:e;return[a,i]}function Q7e(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,a=t.toDate,s=t.fromDate,o=t.numberOfMonths,l=o===void 0?1:o;if(a&&ub(a,i)<0){var u=-1*(l-1);i=Nc(a,u)}return s&&ub(i,s)<0&&(i=s),jo(i)}function Z7e(){var t=si(),e=Q7e(t),n=X7e(e,t.month),r=n[0],i=n[1],a=function(s){var o;if(!t.disableNavigation){var l=jo(s);i(l),(o=t.onMonthChange)===null||o===void 0||o.call(t,l)}};return[r,a]}function J7e(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=jo(t),a=jo(Nc(i,r)),s=ub(a,i),o=[],l=0;l<s;l++){var u=Nc(i,l);o.push(u)}return n&&(o=o.reverse()),o}function eFe(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,s=r?a:1,o=jo(t);if(!n)return Nc(o,s);var l=ub(n,t);if(!(l<a))return Nc(o,s)}}function tFe(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,s=r?a:1,o=jo(t);if(!n)return Nc(o,-s);var l=ub(o,n);if(!(l<=0))return Nc(o,-s)}}var qX=I.createContext(void 0);function nFe(t){var e=si(),n=Z7e(),r=n[0],i=n[1],a=J7e(r,e),s=eFe(r,e),o=tFe(r,e),l=function(f){return a.some(function(p){return cD(f,p)})},u=function(f,p){l(f)||(p&&BX(f,p)?i(Nc(f,1+e.numberOfMonths*-1)):i(f))},d={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:u,previousMonth:o,nextMonth:s,isDateDisplayed:l};return c.jsx(qX.Provider,{value:d,children:t.children})}function Qb(){var t=I.useContext(qX);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function OF(t){var e,n=si(),r=n.classNames,i=n.styles,a=n.components,s=Qb().goToMonth,o=function(d){s(Nc(d,t.displayIndex?-t.displayIndex:0))},l=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:WX,u=c.jsx(l,{id:t.id,displayMonth:t.displayMonth});return c.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[c.jsx("div",{className:r.vhidden,children:u}),c.jsx(G7e,{onChange:o,displayMonth:t.displayMonth}),c.jsx(Y7e,{onChange:o,displayMonth:t.displayMonth})]})}function rFe(t){return c.jsx("svg",En({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:c.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function iFe(t){return c.jsx("svg",En({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:c.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var u5=I.forwardRef(function(t,e){var n=si(),r=n.classNames,i=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var s=a.join(" "),o=En(En({},i.button_reset),i.button);return t.style&&Object.assign(o,t.style),c.jsx("button",En({},t,{ref:e,type:"button",className:s,style:o}))});function aFe(t){var e,n,r=si(),i=r.dir,a=r.locale,s=r.classNames,o=r.styles,l=r.labels,u=l.labelPrevious,d=l.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return c.jsx(c.Fragment,{});var p=u(t.previousMonth,{locale:a}),h=[s.nav_button,s.nav_button_previous].join(" "),g=d(t.nextMonth,{locale:a}),m=[s.nav_button,s.nav_button_next].join(" "),v=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:iFe,y=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:rFe;return c.jsxs("div",{className:s.nav,style:o.nav,children:[!t.hidePrevious&&c.jsx(u5,{name:"previous-month","aria-label":p,className:h,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?c.jsx(v,{className:s.nav_icon,style:o.nav_icon}):c.jsx(y,{className:s.nav_icon,style:o.nav_icon})}),!t.hideNext&&c.jsx(u5,{name:"next-month","aria-label":g,className:m,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?c.jsx(y,{className:s.nav_icon,style:o.nav_icon}):c.jsx(v,{className:s.nav_icon,style:o.nav_icon})})]})}function MF(t){var e=si().numberOfMonths,n=Qb(),r=n.previousMonth,i=n.nextMonth,a=n.goToMonth,s=n.displayMonths,o=s.findIndex(function(g){return cD(t.displayMonth,g)}),l=o===0,u=o===s.length-1,d=e>1&&(l||!u),f=e>1&&(u||!l),p=function(){r&&a(r)},h=function(){i&&a(i)};return c.jsx(aFe,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:i,previousMonth:r,onPreviousClick:p,onNextClick:h})}function sFe(t){var e,n=si(),r=n.classNames,i=n.disableNavigation,a=n.styles,s=n.captionLayout,o=n.components,l=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:WX,u;return i?u=c.jsx(l,{id:t.id,displayMonth:t.displayMonth}):s==="dropdown"?u=c.jsx(OF,{displayMonth:t.displayMonth,id:t.id}):s==="dropdown-buttons"?u=c.jsxs(c.Fragment,{children:[c.jsx(OF,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),c.jsx(MF,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=c.jsxs(c.Fragment,{children:[c.jsx(l,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),c.jsx(MF,{displayMonth:t.displayMonth,id:t.id})]}),c.jsx("div",{className:r.caption,style:a.caption,children:u})}function oFe(t){var e=si(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?c.jsx("tfoot",{className:i,style:r.tfoot,children:c.jsx("tr",{children:c.jsx("td",{colSpan:8,children:n})})}):c.jsx(c.Fragment,{})}function lFe(t,e,n){for(var r=n?np(new Date):gu(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var s=Js(r,a);i.push(s)}return i}function cFe(){var t=si(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,s=t.ISOWeek,o=t.formatters.formatWeekdayName,l=t.labels.labelWeekday,u=lFe(i,a,s);return c.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&c.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,f){return c.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":l(d,{locale:i}),children:o(d,{locale:i})},f)})]})}function uFe(){var t,e=si(),n=e.classNames,r=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:cFe;return c.jsx("thead",{style:r.head,className:n.head,children:c.jsx(a,{})})}function dFe(t){var e=si(),n=e.locale,r=e.formatters.formatDay;return c.jsx(c.Fragment,{children:r(t.date,{locale:n})})}var uD=I.createContext(void 0);function fFe(t){if(!Yb(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return c.jsx(uD.Provider,{value:e,children:t.children})}return c.jsx(hFe,{initialProps:t.initialProps,children:t.children})}function hFe(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,a=e.max,s=function(u,d,f){var p,h;(p=e.onDayClick)===null||p===void 0||p.call(e,u,d,f);var g=!!(d.selected&&i&&(r==null?void 0:r.length)===i);if(!g){var m=!!(!d.selected&&a&&(r==null?void 0:r.length)===a);if(!m){var v=r?VX([],r):[];if(d.selected){var y=v.findIndex(function(b){return xo(u,b)});v.splice(y,1)}else v.push(u);(h=e.onSelect)===null||h===void 0||h.call(e,v,u,d,f)}}},o={disabled:[]};r&&o.disabled.push(function(u){var d=a&&r.length>a-1,f=r.some(function(p){return xo(p,u)});return!!(d&&!f)});var l={selected:r,onDayClick:s,modifiers:o};return c.jsx(uD.Provider,{value:l,children:n})}function dD(){var t=I.useContext(uD);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function pFe(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?xo(i,t)&&xo(r,t)?void 0:xo(i,t)?{from:i,to:void 0}:xo(r,t)?void 0:GP(r,t)?{from:t,to:i}:{from:r,to:t}:i?GP(t,i)?{from:i,to:t}:{from:t,to:i}:r?BX(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var fD=I.createContext(void 0);function mFe(t){if(!Xb(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return c.jsx(fD.Provider,{value:e,children:t.children})}return c.jsx(gFe,{initialProps:t.initialProps,children:t.children})}function gFe(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},a=i.from,s=i.to,o=e.min,l=e.max,u=function(h,g,m){var v,y;(v=e.onDayClick)===null||v===void 0||v.call(e,h,g,m);var b=pFe(h,r);(y=e.onSelect)===null||y===void 0||y.call(e,b,h,g,m)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],s?(d.range_end=[s],xo(a,s)||(d.range_middle=[{after:a,before:s}])):d.range_end=[a]):s&&(d.range_start=[s],d.range_end=[s]),o&&(a&&!s&&d.disabled.push({after:NC(a,o-1),before:Js(a,o-1)}),a&&s&&d.disabled.push({after:a,before:Js(a,o-1)}),!a&&s&&d.disabled.push({after:NC(s,o-1),before:Js(s,o-1)})),l){if(a&&!s&&(d.disabled.push({before:Js(a,-l+1)}),d.disabled.push({after:Js(a,l-1)})),a&&s){var f=tu(s,a)+1,p=l-f;d.disabled.push({before:NC(a,p)}),d.disabled.push({after:Js(s,p)})}!a&&s&&(d.disabled.push({before:Js(s,-l+1)}),d.disabled.push({after:Js(s,l-1)}))}return c.jsx(fD.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function hD(){var t=I.useContext(fD);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function J1(t){return Array.isArray(t)?VX([],t):t!==void 0?[t]:[]}function vFe(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=J1(i)}),e}var Pc;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Pc||(Pc={}));var yFe=Pc.Selected,Tu=Pc.Disabled,bFe=Pc.Hidden,xFe=Pc.Today,kC=Pc.RangeEnd,TC=Pc.RangeMiddle,DC=Pc.RangeStart,wFe=Pc.Outside;function SFe(t,e,n){var r,i=(r={},r[yFe]=J1(t.selected),r[Tu]=J1(t.disabled),r[bFe]=J1(t.hidden),r[xFe]=[t.today],r[kC]=[],r[TC]=[],r[DC]=[],r[wFe]=[],r);return t.fromDate&&i[Tu].push({before:t.fromDate}),t.toDate&&i[Tu].push({after:t.toDate}),Yb(t)?i[Tu]=i[Tu].concat(e.modifiers[Tu]):Xb(t)&&(i[Tu]=i[Tu].concat(n.modifiers[Tu]),i[DC]=n.modifiers[DC],i[TC]=n.modifiers[TC],i[kC]=n.modifiers[kC]),i}var KX=I.createContext(void 0);function _Fe(t){var e=si(),n=dD(),r=hD(),i=SFe(e,n,r),a=vFe(e.modifiers),s=En(En({},i),a);return c.jsx(KX.Provider,{value:s,children:t.children})}function GX(){var t=I.useContext(KX);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function AFe(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function CFe(t){return!!(t&&typeof t=="object"&&"from"in t)}function jFe(t){return!!(t&&typeof t=="object"&&"after"in t)}function EFe(t){return!!(t&&typeof t=="object"&&"before"in t)}function NFe(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function PFe(t,e){var n,r=e.from,i=e.to;if(r&&i){var a=tu(i,r)<0;a&&(n=[i,r],r=n[0],i=n[1]);var s=tu(t,r)>=0&&tu(i,t)>=0;return s}return i?xo(i,t):r?xo(r,t):!1}function kFe(t){return sD(t)}function TFe(t){return Array.isArray(t)&&t.every(sD)}function DFe(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(kFe(n))return xo(t,n);if(TFe(n))return n.includes(t);if(CFe(n))return PFe(t,n);if(NFe(n))return n.dayOfWeek.includes(t.getDay());if(AFe(n)){var r=tu(n.before,t),i=tu(n.after,t),a=r>0,s=i<0,o=GP(n.before,n.after);return o?s&&a:a||s}return jFe(n)?tu(t,n.after)>0:EFe(n)?tu(n.before,t)>0:typeof n=="function"?n(t):!1})}function pD(t,e,n){var r=Object.keys(e).reduce(function(a,s){var o=e[s];return DFe(t,o)&&a.push(s),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),n&&!cD(t,n)&&(i.outside=!0),i}function IFe(t,e){for(var n=jo(t[0]),r=oD(t[t.length-1]),i,a,s=n;s<=r;){var o=pD(s,e),l=!o.disabled&&!o.hidden;if(!l){s=Js(s,1);continue}if(o.selected)return s;o.today&&!a&&(a=s),i||(i=s),s=Js(s,1)}return a||i}var OFe=365;function YX(t,e){var n=e.moveBy,r=e.direction,i=e.context,a=e.modifiers,s=e.retry,o=s===void 0?{count:0,lastFocused:t}:s,l=i.weekStartsOn,u=i.fromDate,d=i.toDate,f=i.locale,p={day:Js,week:KP,month:Nc,year:KLe,startOfWeek:function(v){return i.ISOWeek?np(v):gu(v,{locale:f,weekStartsOn:l})},endOfWeek:function(v){return i.ISOWeek?OX(v):lD(v,{locale:f,weekStartsOn:l})}},h=p[n](t,r==="after"?1:-1);r==="before"&&u?h=GLe([u,h]):r==="after"&&d&&(h=YLe([d,h]));var g=!0;if(a){var m=pD(h,a);g=!m.disabled&&!m.hidden}return g?h:o.count>OFe?o.lastFocused:YX(h,{moveBy:n,direction:r,context:i,modifiers:a,retry:En(En({},o),{count:o.count+1})})}var XX=I.createContext(void 0);function MFe(t){var e=Qb(),n=GX(),r=I.useState(),i=r[0],a=r[1],s=I.useState(),o=s[0],l=s[1],u=IFe(e.displayMonths,n),d=i??(o&&e.isDateDisplayed(o))?o:u,f=function(){l(i),a(void 0)},p=function(v){a(v)},h=si(),g=function(v,y){if(i){var b=YX(i,{moveBy:v,direction:y,context:h,modifiers:n});xo(i,b)||(e.goToDate(b,i),p(b))}},m={focusedDay:i,focusTarget:d,blur:f,focus:p,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return c.jsx(XX.Provider,{value:m,children:t.children})}function mD(){var t=I.useContext(XX);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function RFe(t,e){var n=GX(),r=pD(t,n,e);return r}var gD=I.createContext(void 0);function LFe(t){if(!C_(t.initialProps)){var e={selected:void 0};return c.jsx(gD.Provider,{value:e,children:t.children})}return c.jsx(FFe,{initialProps:t.initialProps,children:t.children})}function FFe(t){var e=t.initialProps,n=t.children,r=function(a,s,o){var l,u,d;if((l=e.onDayClick)===null||l===void 0||l.call(e,a,s,o),s.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,s,o);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,s,o)},i={selected:e.selected,onDayClick:r};return c.jsx(gD.Provider,{value:i,children:n})}function QX(){var t=I.useContext(gD);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function zFe(t,e){var n=si(),r=QX(),i=dD(),a=hD(),s=mD(),o=s.focusDayAfter,l=s.focusDayBefore,u=s.focusWeekAfter,d=s.focusWeekBefore,f=s.blur,p=s.focus,h=s.focusMonthBefore,g=s.focusMonthAfter,m=s.focusYearBefore,v=s.focusYearAfter,y=s.focusStartOfWeek,b=s.focusEndOfWeek,S=function(Y){var H,ee,le,se;C_(n)?(H=r.onDayClick)===null||H===void 0||H.call(r,t,e,Y):Yb(n)?(ee=i.onDayClick)===null||ee===void 0||ee.call(i,t,e,Y):Xb(n)?(le=a.onDayClick)===null||le===void 0||le.call(a,t,e,Y):(se=n.onDayClick)===null||se===void 0||se.call(n,t,e,Y)},A=function(Y){var H;p(t),(H=n.onDayFocus)===null||H===void 0||H.call(n,t,e,Y)},C=function(Y){var H;f(),(H=n.onDayBlur)===null||H===void 0||H.call(n,t,e,Y)},D=function(Y){var H;(H=n.onDayMouseEnter)===null||H===void 0||H.call(n,t,e,Y)},j=function(Y){var H;(H=n.onDayMouseLeave)===null||H===void 0||H.call(n,t,e,Y)},N=function(Y){var H;(H=n.onDayPointerEnter)===null||H===void 0||H.call(n,t,e,Y)},P=function(Y){var H;(H=n.onDayPointerLeave)===null||H===void 0||H.call(n,t,e,Y)},O=function(Y){var H;(H=n.onDayTouchCancel)===null||H===void 0||H.call(n,t,e,Y)},T=function(Y){var H;(H=n.onDayTouchEnd)===null||H===void 0||H.call(n,t,e,Y)},M=function(Y){var H;(H=n.onDayTouchMove)===null||H===void 0||H.call(n,t,e,Y)},L=function(Y){var H;(H=n.onDayTouchStart)===null||H===void 0||H.call(n,t,e,Y)},V=function(Y){var H;(H=n.onDayKeyUp)===null||H===void 0||H.call(n,t,e,Y)},K=function(Y){var H;switch(Y.key){case"ArrowLeft":Y.preventDefault(),Y.stopPropagation(),n.dir==="rtl"?o():l();break;case"ArrowRight":Y.preventDefault(),Y.stopPropagation(),n.dir==="rtl"?l():o();break;case"ArrowDown":Y.preventDefault(),Y.stopPropagation(),u();break;case"ArrowUp":Y.preventDefault(),Y.stopPropagation(),d();break;case"PageUp":Y.preventDefault(),Y.stopPropagation(),Y.shiftKey?m():h();break;case"PageDown":Y.preventDefault(),Y.stopPropagation(),Y.shiftKey?v():g();break;case"Home":Y.preventDefault(),Y.stopPropagation(),y();break;case"End":Y.preventDefault(),Y.stopPropagation(),b();break}(H=n.onDayKeyDown)===null||H===void 0||H.call(n,t,e,Y)},Z={onClick:S,onFocus:A,onBlur:C,onKeyDown:K,onKeyUp:V,onMouseEnter:D,onMouseLeave:j,onPointerEnter:N,onPointerLeave:P,onTouchCancel:O,onTouchEnd:T,onTouchMove:M,onTouchStart:L};return Z}function $Fe(){var t=si(),e=QX(),n=dD(),r=hD(),i=C_(t)?e.selected:Yb(t)?n.selected:Xb(t)?r.selected:void 0;return i}function BFe(t){return Object.values(Pc).includes(t)}function VFe(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(BFe(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function UFe(t,e){var n=En({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=En(En({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function WFe(t,e,n){var r,i,a,s=si(),o=mD(),l=RFe(t,e),u=zFe(t,l),d=$Fe(),f=!!(s.onDayClick||s.mode!=="default");I.useEffect(function(){var D;l.outside||o.focusedDay&&f&&xo(o.focusedDay,t)&&((D=n.current)===null||D===void 0||D.focus())},[o.focusedDay,t,n,f,l.outside]);var p=VFe(s,l).join(" "),h=UFe(s,l),g=!!(l.outside&&!s.showOutsideDays||l.hidden),m=(a=(i=s.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:dFe,v=c.jsx(m,{date:t,displayMonth:e,activeModifiers:l}),y={style:h,className:p,children:v,role:"gridcell"},b=o.focusTarget&&xo(o.focusTarget,t)&&!l.outside,S=o.focusedDay&&xo(o.focusedDay,t),A=En(En(En({},y),(r={disabled:l.disabled,role:"gridcell"},r["aria-selected"]=l.selected,r.tabIndex=S||b?0:-1,r)),u),C={isButton:f,isHidden:g,activeModifiers:l,selectedDays:d,buttonProps:A,divProps:y};return C}function HFe(t){var e=I.useRef(null),n=WFe(t.date,t.displayMonth,e);return n.isHidden?c.jsx("div",{role:"gridcell"}):n.isButton?c.jsx(u5,En({name:"day",ref:e},n.buttonProps)):c.jsx("div",En({},n.divProps))}function qFe(t){var e=t.number,n=t.dates,r=si(),i=r.onWeekNumberClick,a=r.styles,s=r.classNames,o=r.locale,l=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:o});if(!i)return c.jsx("span",{className:s.weeknumber,style:a.weeknumber,children:d});var f=l(Number(e),{locale:o}),p=function(h){i(e,n,h)};return c.jsx(u5,{name:"week-number","aria-label":f,className:s.weeknumber,style:a.weeknumber,onClick:p,children:d})}function KFe(t){var e,n,r=si(),i=r.styles,a=r.classNames,s=r.showWeekNumber,o=r.components,l=(e=o==null?void 0:o.Day)!==null&&e!==void 0?e:HFe,u=(n=o==null?void 0:o.WeekNumber)!==null&&n!==void 0?n:qFe,d;return s&&(d=c.jsx("td",{className:a.cell,style:i.cell,children:c.jsx(u,{number:t.weekNumber,dates:t.dates})})),c.jsxs("tr",{className:a.row,style:i.row,children:[d,t.dates.map(function(f){return c.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:c.jsx(l,{displayMonth:t.displayMonth,date:f})},K8e(f))})]})}function RF(t,e,n){for(var r=n!=null&&n.ISOWeek?OX(e):lD(e,n),i=n!=null&&n.ISOWeek?np(t):gu(t,n),a=tu(r,i),s=[],o=0;o<=a;o++)s.push(Js(i,o));var l=s.reduce(function(u,d){var f=n!=null&&n.ISOWeek?LX(d):zX(d,n),p=u.find(function(h){return h.weekNumber===f});return p?(p.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return l}function GFe(t,e){var n=RF(jo(t),oD(t),e);if(e!=null&&e.useFixedWeeks){var r=Y8e(t,e);if(r<6){var i=n[n.length-1],a=i.dates[i.dates.length-1],s=KP(a,6-r),o=RF(KP(a,1),s,e);n.push.apply(n,o)}}return n}function YFe(t){var e,n,r,i=si(),a=i.locale,s=i.classNames,o=i.styles,l=i.hideHead,u=i.fixedWeeks,d=i.components,f=i.weekStartsOn,p=i.firstWeekContainsDate,h=i.ISOWeek,g=GFe(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:h,locale:a,weekStartsOn:f,firstWeekContainsDate:p}),m=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:uFe,v=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:KFe,y=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:oFe;return c.jsxs("table",{id:t.id,className:s.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!l&&c.jsx(m,{}),c.jsx("tbody",{className:s.tbody,style:o.tbody,children:g.map(function(b){return c.jsx(v,{displayMonth:t.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),c.jsx(y,{displayMonth:t.displayMonth})]})}function XFe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var QFe=XFe()?I.useLayoutEffect:I.useEffect,IC=!1,ZFe=0;function LF(){return"react-day-picker-".concat(++ZFe)}function JFe(t){var e,n=t??(IC?LF():null),r=I.useState(n),i=r[0],a=r[1];return QFe(function(){i===null&&a(LF())},[]),I.useEffect(function(){IC===!1&&(IC=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function eze(t){var e,n,r=si(),i=r.dir,a=r.classNames,s=r.styles,o=r.components,l=Qb().displayMonths,u=JFe(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[a.month],p=s.month,h=t.displayIndex===0,g=t.displayIndex===l.length-1,m=!h&&!g;i==="rtl"&&(e=[h,g],g=e[0],h=e[1]),h&&(f.push(a.caption_start),p=En(En({},p),s.caption_start)),g&&(f.push(a.caption_end),p=En(En({},p),s.caption_end)),m&&(f.push(a.caption_between),p=En(En({},p),s.caption_between));var v=(n=o==null?void 0:o.Caption)!==null&&n!==void 0?n:sFe;return c.jsxs("div",{className:f.join(" "),style:p,children:[c.jsx(v,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),c.jsx(YFe,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function tze(t){var e=si(),n=e.classNames,r=e.styles;return c.jsx("div",{className:n.months,style:r.months,children:t.children})}function nze(t){var e,n,r=t.initialProps,i=si(),a=mD(),s=Qb(),o=I.useState(!1),l=o[0],u=o[1];I.useEffect(function(){i.initialFocus&&a.focusTarget&&(l||(a.focus(a.focusTarget),u(!0)))},[i.initialFocus,l,a.focus,a.focusTarget,a]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var f=En(En({},i.styles.root),i.style),p=Object.keys(r).filter(function(g){return g.startsWith("data-")}).reduce(function(g,m){var v;return En(En({},g),(v={},v[m]=r[m],v))},{}),h=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:tze;return c.jsx("div",En({className:d.join(" "),style:f,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:c.jsx(h,{children:s.displayMonths.map(function(g,m){return c.jsx(eze,{displayIndex:m,displayMonth:g},m)})})}))}function rze(t){var e=t.children,n=E7e(t,["children"]);return c.jsx(q7e,{initialProps:n,children:c.jsx(nFe,{children:c.jsx(LFe,{initialProps:n,children:c.jsx(fFe,{initialProps:n,children:c.jsx(mFe,{initialProps:n,children:c.jsx(_Fe,{children:c.jsx(MFe,{children:e})})})})})})})}function Sp(t){return c.jsx(rze,En({},t,{children:c.jsx(nze,{initialProps:t})}))}const FF=[{count:1,name:"Simple"},{count:2,name:"Doble"},{count:3,name:"Triple"},{count:4,name:"Cuádruple"},{count:5,name:"Quíntuple"}],zF=140,$F=7,ize=`
  .rdp {
    --rdp-cell-size: 40px; --rdp-accent-color: #FF9500; --rdp-background-color: transparent;
    --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: transparent;
    --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF; margin: 1em auto;
  }
  .rdp-caption_label { color: #FFF; font-weight: bold;}
  .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; }
  .rdp-day { color: #FFF;}
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
  .rdp-day_today { font-weight: bold; color: #FF9500; }
  .rdp-day_disabled { color: #505054; }
  .rdp-day_outside { color: #505054; }
  .rdp-caption_dropdowns { display: flex; gap: 10px; }
   .rdp-dropdown { background-color: #333; border: 1px solid #555; color: #FFF; padding: 4px 8px; border-radius: 6px; }
`,_p=({isOpen:t,onClose:e,motherId:n})=>{const{animals:r,fathers:i,addFather:a,addParturition:s,parturitions:o}=Kt(),[l,u]=I.useState(1),[d,f]=I.useState(new Date().toISOString().split("T")[0]),[p,h]=I.useState(""),[g,m]=I.useState(1),[v,y]=I.useState([]),[b,S]=I.useState(!1),[A,C]=I.useState(!1),[D,j]=I.useState(!1),[N,P]=I.useState(""),O=I.useMemo(()=>r.find(ee=>ee.id===n),[r,n]),T=O!=null&&O.name?String(O.name).toUpperCase().trim():"";I.useEffect(()=>{t&&(u(1),f(new Date().toISOString().split("T")[0]),h(""),m(1),y([]),j(!1),P(""))},[t]);const M=()=>u(ee=>ee<4?ee+1:ee),L=()=>u(ee=>ee>1?ee-1:ee),V=ee=>{m(ee),y(Array.from({length:ee},(le,se)=>({id:`kid_${se}_${Date.now()}`,sex:"Hembra",status:"Viva",correlative:"",birthWeight:""}))),M()},K=(ee,le,se)=>{const $=[...v];let X=se;le==="birthWeight"&&parseFloat(se)>$F&&(X=$F.toString()),$[ee]={...$[ee],[le]:X},y($)},Z=async()=>{var $;j(!0),P("");const ee=o.filter(X=>X.goatId.toUpperCase()===n.toUpperCase()),le=new Date(d).getTime();if(ee.some(X=>{const te=new Date(X.parturitionDate).getTime();return Math.abs(le-te)/(1e3*60*60*24)<zF})){P(`Ya existe un parto registrado para ${n} en una fecha demasiado cercana (menos de ${zF} días).`),j(!1);return}try{const X=i.find(_e=>_e.id===p);if(!X)throw new Error("Padre (semental) no encontrado en la base de datos.");const te=v.filter(_e=>_e.status==="Viva"),oe=v.some(_e=>_e.status==="Mortinato"),me=te.map(_e=>({sex:_e.sex,birthWeight:_e.birthWeight,id:`${_e.sex==="Macho"?"X":ar(X).charAt(0).toUpperCase()||"?"}${_e.correlative}`}));await s({motherId:n.toUpperCase(),parturitionDate:d,sireId:p,parturitionType:(($=FF.find(_e=>_e.count===g))==null?void 0:$.name)||"Simple",offspringCount:v.length,liveOffspring:me,parturitionOutcome:oe?"Con Mortinatos":"Normal",inducedLactation:!0}),M(),setTimeout(e,2e3)}catch(X){P(X.message||"Error al registrar el parto. Revisa los datos e IDs de las crías."),console.error(X),j(!1)}},Y=I.useMemo(()=>i.find(ee=>ee.id===p),[p,i]),H=async ee=>{try{await a(ee),h(ee.id),S(!1)}catch(le){P(le.message||"No se pudo guardar el nuevo padre."),console.error("Error saving new father:",le)}};return t?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex flex-col justify-end z-50 animate-fade-in",onClick:e,children:c.jsxs("div",{className:"bg-ios-modal-bg w-full h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:ee=>ee.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[l>1&&l<4&&c.jsx("button",{onClick:L,className:"p-2 text-zinc-400 hover:text-white",children:c.jsx(ji,{size:24})}),c.jsx("h1",{className:"text-xl font-bold tracking-tight text-white mx-auto",children:l===4?"Éxito":"Registrar Parto"}),l<4?c.jsx("button",{onClick:e,className:"p-2 text-zinc-400 hover:text-white",children:c.jsx(Ic,{size:24})}):c.jsx("div",{className:"w-10"})]}),c.jsxs("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[l===1&&c.jsxs("div",{className:"space-y-6 max-w-md mx-auto",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:O==null?void 0:O.id.toUpperCase()}),T&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:T})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Fecha del Parto"}),c.jsxs("button",{type:"button",onClick:()=>C(!0),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg text-left flex justify-between items-center text-white",children:[c.jsx("span",{children:d?new Date(d+"T00:00:00Z").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}):"Seleccionar Fecha"}),c.jsx(so,{className:"text-zinc-400",size:20})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Padre (Semental)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:p,onChange:ee=>h(ee.target.value),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg appearance-none text-white",children:[c.jsx("option",{value:"",className:"text-zinc-500",children:"Seleccionar Padre..."}),i.map(ee=>c.jsx("option",{value:ee.id,className:"text-white",children:ar(ee)},ee.id))]}),c.jsx("button",{type:"button",onClick:()=>S(!0),className:"flex-shrink-0 p-4 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(Ki,{size:24})})]})]}),c.jsx("button",{onClick:M,disabled:!d||!p,className:"w-full bg-brand-orange text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:"Siguiente"})]}),l===2&&c.jsxs("div",{className:"space-y-6 text-center max-w-md mx-auto",children:[c.jsx("h2",{className:"text-2xl font-semibold text-white",children:"¿Cuántas crías nacieron?"}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:FF.map(ee=>c.jsx("button",{onClick:()=>V(ee.count),className:"bg-zinc-800 hover:bg-zinc-700 text-white font-bold py-8 rounded-2xl text-2xl transition-colors",children:ee.name},ee.count))})]}),l===3&&c.jsxs("div",{className:"space-y-4 max-w-xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:O==null?void 0:O.id.toUpperCase()}),T&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:T})]}),v.map((ee,le)=>{const se=ee.status==="Mortinato";return c.jsxs("div",{className:`bg-black/20 rounded-2xl p-4 border transition-colors ${se?"border-red-500/30":"border-zinc-700"} space-y-3`,children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("p",{className:"font-semibold text-brand-orange",children:["Cría ",le+1]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"w-32",children:c.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[c.jsx("button",{type:"button",onClick:()=>K(le,"status","Viva"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${se?"text-zinc-400":"bg-green-600 text-white"}`,children:"Viva"}),c.jsx("button",{type:"button",onClick:()=>K(le,"status","Mortinato"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${se?"bg-red-600 text-white":"text-zinc-400"}`,children:"Mortinato"})]})}),c.jsx("div",{className:"w-32",children:c.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[c.jsx("button",{type:"button",onClick:()=>K(le,"sex","Hembra"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${ee.sex==="Hembra"?"bg-pink-500 text-white":"text-zinc-400"}`,children:"Hembra"}),c.jsx("button",{type:"button",onClick:()=>K(le,"sex","Macho"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${ee.sex==="Macho"?"bg-blue-500 text-white":"text-zinc-400"}`,children:"Macho"})]})})]})]}),c.jsxs("div",{className:`grid grid-cols-2 gap-3 items-center transition-opacity ${se?"opacity-40 pointer-events-none":"opacity-100"}`,children:[c.jsxs("div",{className:"flex items-center bg-zinc-800 p-3 rounded-xl gap-2",children:[c.jsx("span",{className:"font-mono text-zinc-400 text-lg",children:ee.sex==="Macho"?"X":ar(Y).charAt(0).toUpperCase()||"?"}),c.jsx("input",{autoFocus:le===0,value:ee.correlative,onChange:$=>K(le,"correlative",$.target.value.toUpperCase()),placeholder:"ID",className:"w-full bg-transparent text-lg text-white focus:outline-none",disabled:se,required:!se})]}),c.jsx("input",{value:ee.birthWeight,onChange:$=>K(le,"birthWeight",$.target.value),placeholder:"Peso (Kg)",type:"number",step:"0.1",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",disabled:se,required:!se})]})]},ee.id)}),c.jsx("button",{onClick:Z,disabled:D||v.some(ee=>ee.status==="Viva"&&(!ee.correlative||!ee.birthWeight)),className:"w-full bg-brand-green text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:D?"Guardando...":`Guardar Parto y ${g} Cría(s)`}),N&&c.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(dr,{size:18}),c.jsx("span",{children:N})]})]}),l===4&&c.jsxs("div",{className:"text-center flex flex-col justify-center items-center h-full",children:[c.jsx(Ga,{size:80,className:"text-brand-green mb-4 animate-pulse"}),c.jsx("h2",{className:"text-3xl font-bold text-white",children:"¡Éxito!"}),c.jsxs("p",{className:"text-lg text-zinc-400",children:["El parto de ",c.jsx("span",{className:"font-mono font-bold text-white",children:O==null?void 0:O.id.toUpperCase()})," se ha registrado."]})]})]})]})}),c.jsxs(sn,{isOpen:A,onClose:()=>C(!1),title:"Seleccionar Fecha del Parto",children:[c.jsx("style",{children:ize}),c.jsx("div",{className:"flex justify-center",children:c.jsx(Sp,{mode:"single",selected:new Date(d+"T00:00:00Z"),onSelect:ee=>{ee&&f(ee.toISOString().split("T")[0]),C(!1)},locale:Gb,disabled:{after:new Date},captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-2,toYear:new Date().getFullYear()})})]}),c.jsx(iD,{isOpen:b,onClose:()=>S(!1),onSave:H})]}):null},vD=({isOpen:t,animal:e,onClose:n,onLogToSession:r,onStartNewSession:i,onStartDrying:a,onSetDry:s})=>{const{parturitions:o,weighings:l}=Kt(),[u,d]=I.useState(!1),f=I.useMemo(()=>o.filter(g=>g.goatId===e.id&&(g.status==="activa"||g.status==="en-secado")).sort((g,m)=>new Date(m.parturitionDate).getTime()-new Date(g.parturitionDate).getTime())[0],[o,e.id]),p=I.useMemo(()=>{const g=l.map(v=>v.date);return[...new Set(g)].sort((v,y)=>new Date(y).getTime()-new Date(v).getTime()).slice(0,3)},[l]),h=e.name?String(e.name).toUpperCase().trim():"";return!f&&!u?c.jsx(sn,{isOpen:t,onClose:n,title:"Acción Requerida",children:c.jsxs("div",{className:"text-center space-y-4 text-white",children:[c.jsx(dr,{className:"mx-auto h-12 w-12 text-amber-400"}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:e.id.toUpperCase()}),h&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:h})]}),c.jsx("h3",{className:"text-lg font-medium",children:"Animal sin Parto Activo"}),c.jsx("p",{className:"text-sm text-zinc-400",children:"Para registrar un pesaje o gestionar el secado, el animal debe tener un parto activo."}),c.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(Wl,{size:18})," Declarar Parto Ahora"]})]})}):u?c.jsx(_p,{isOpen:!0,onClose:()=>{d(!1)},motherId:e.id}):c.jsx(sn,{isOpen:t,onClose:n,title:"Acciones de Leche",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-2",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:e.id.toUpperCase()}),h&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:h})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(uT,{size:16}),"Añadir a Sesión Reciente"]}),p.length>0?c.jsx("div",{className:"space-y-2",children:p.map(g=>c.jsxs("button",{onClick:()=>r(g),className:"w-full text-left bg-zinc-800/80 p-3 rounded-xl hover:bg-zinc-700 transition-colors flex justify-between items-center group",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(so,{size:18,className:"text-zinc-500"}),c.jsx("span",{className:"text-base font-semibold text-white",children:new Date(g+"T00:00:00Z").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})})]}),c.jsx(qi,{size:20,className:"text-zinc-600 group-hover:text-white transition-colors"})]},g))}):c.jsx("p",{className:"text-center text-sm text-zinc-500 py-4",children:"No hay sesiones recientes."})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(ol,{size:16}),"Iniciar Nueva Sesión de Pesaje"]}),c.jsxs("button",{onClick:i,className:"w-full text-left bg-brand-orange/20 border border-brand-orange/80 p-4 rounded-xl hover:bg-brand-orange/30 transition-colors flex justify-between items-center group",children:[c.jsx("span",{className:"text-lg font-bold text-white",children:"Construir Carga Masiva..."}),c.jsx(qi,{size:20,className:"text-brand-orange group-hover:text-orange-300 transition-colors"})]}),c.jsx("p",{className:"text-xs text-zinc-500 text-center px-4 mt-2",children:"Esto te permitirá seleccionar un grupo de animales y registrar sus pesajes."})]}),f&&c.jsxs("div",{className:"pt-4 border-t border-brand-border",children:[c.jsx("h3",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Acciones de Lactancia"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>a(f.id),disabled:f.status!=="activa",className:"w-full flex items-center justify-center gap-2 bg-blue-600/20 text-blue-300 font-semibold py-3 px-3 rounded-lg hover:bg-blue-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(pp,{size:16})," ",f.status==="en-secado"?"Ya en Secado":"Iniciar Secado"]}),c.jsxs("button",{type:"button",onClick:()=>s(f.id),disabled:f.status==="seca"||f.status==="finalizada",className:"w-full flex items-center justify-center gap-2 bg-gray-600/20 text-gray-300 font-semibold py-3 px-3 rounded-lg hover:bg-gray-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Dc,{size:16})," ",f.status==="seca"?"Ya Seca":"Declarar Seca"]})]}),f.status==="en-secado"&&c.jsx("p",{className:"text-center text-xs text-zinc-400 mt-2",children:"El animal está en su período de secado."})]})]})})},yD=({isOpen:t,animal:e,onClose:n,onLogToSession:r,onStartNewSession:i,onSetReadyForMating:a})=>{const{bodyWeighings:s,parturitions:o}=Kt(),l=I.useMemo(()=>{const p=s.map(g=>g.date);return[...new Set(p)].sort((g,m)=>new Date(m).getTime()-new Date(g).getTime()).slice(0,3)},[s]),d=Bf(e,o)==="Cabritona"&&e.reproductiveStatus==="Vacía",f=e.name?String(e.name).toUpperCase().trim():"";return c.jsx(sn,{isOpen:t,onClose:n,title:"Pesaje Corporal",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-2",children:[" ",c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:e.id.toUpperCase()}),f&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:f})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(uT,{size:16}),"Añadir a Sesión Reciente"]}),l.length>0?c.jsx("div",{className:"space-y-2",children:l.map(p=>c.jsxs("button",{onClick:()=>r(p),className:"w-full text-left bg-zinc-800/80 p-3 rounded-xl hover:bg-zinc-700 transition-colors flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(so,{size:18,className:"text-zinc-500"}),c.jsx("span",{className:"text-base font-semibold text-white",children:new Date(p+"T00:00:00Z").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})})]}),c.jsx(qi,{size:20,className:"text-zinc-600"})]},p))}):c.jsx("p",{className:"text-center text-sm text-zinc-500 py-4",children:"No hay sesiones recientes."})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(ol,{size:16}),"Iniciar Nueva Sesión de Pesaje"]}),c.jsxs("button",{onClick:i,className:"w-full text-left bg-brand-green/20 border border-brand-green/80 p-4 rounded-xl hover:bg-brand-green/30 transition-colors flex justify-between items-center",children:[c.jsx("span",{className:"text-lg font-bold text-white",children:"Construir Carga Masiva..."}),c.jsx(qi,{size:20,className:"text-brand-green"})]}),c.jsx("p",{className:"text-xs text-zinc-500 text-center px-4 mt-2",children:"Esto te permitirá seleccionar un grupo de animales y registrar sus pesos."})]}),d&&c.jsxs("div",{className:"pt-4 border-t border-brand-border",children:[c.jsx("h3",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Acciones de Desarrollo"}),c.jsx("div",{className:"flex",children:c.jsxs("button",{onClick:a,className:"w-full flex items-center justify-center gap-2 bg-pink-600/20 text-pink-300 font-semibold py-3 px-3 rounded-lg hover:bg-pink-600/40 transition-colors",children:[c.jsx(YW,{size:16})," Declarar en Peso de Monta"]})}),c.jsx("p",{className:"text-xs text-zinc-500 text-center px-4 mt-2",children:'Si el animal tiene el peso y la edad adecuados, esto lo marcará como "En Servicio".'})]})]})})},j_=({animal:t,onConfirm:e,onCancel:n,reason:r,isOpen:i})=>{const[a,s]=I.useState(new Date().toISOString().split("T")[0]),[o,l]=I.useState(""),[u,d]=I.useState(""),[f,p]=I.useState("Cría"),[h,g]=I.useState(""),[m,v]=I.useState(),[y,b]=I.useState(""),S=["Baja producción","Bajo índice de crecimiento","Inflamación articular","Linfadenitis caseosa","Sospecha de otras enfermedades"],A=t.name?String(t.name).toUpperCase().trim():"",C=()=>{const j={reason:r,date:a,salePrice:r==="Venta"&&parseFloat(o)||void 0,saleBuyer:r==="Venta"&&u||void 0,salePurpose:r==="Venta"?f:void 0,deathReason:r==="Muerte"&&h||void 0,cullReason:r==="Descarte"&&m||void 0,cullReasonDetails:r==="Descarte"&&m==="Sospecha de otras enfermedades"?y:void 0};e(j)},D=`Dar de baja por ${r}`;return i?c.jsx(sn,{isOpen:i,onClose:n,title:D,children:c.jsxs("div",{className:"space-y-4 text-white",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:t.id.toUpperCase()}),A&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:A})]}),c.jsxs("div",{className:"animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Evento"}),c.jsx("input",{type:"date",value:a,onChange:j=>s(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",max:new Date().toISOString().split("T")[0],required:!0})]}),r==="Venta"&&c.jsxs("div",{className:"space-y-4 animate-fade-in",children:[c.jsx("input",{type:"number",step:"0.01",value:o,onChange:j=>l(j.target.value),placeholder:"Precio de Venta (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"}),c.jsx("input",{type:"text",value:u,onChange:j=>d(j.target.value),placeholder:"Comprador (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"}),c.jsxs("select",{value:f,onChange:j=>p(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",children:[c.jsx("option",{value:"Cría",children:"Para Cría"}),c.jsx("option",{value:"Carne",children:"Para Carne"})]})]}),r==="Muerte"&&c.jsx("div",{className:"animate-fade-in",children:c.jsx("textarea",{value:h,onChange:j=>g(j.target.value),placeholder:"Causa / Descripción de la muerte...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",rows:3})}),r==="Descarte"&&c.jsxs("div",{className:"space-y-4 animate-fade-in",children:[c.jsxs("select",{value:m||"",onChange:j=>v(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",children:[c.jsx("option",{value:"",children:"Seleccione una causa..."}),S.map(j=>c.jsx("option",{value:j,children:j},j))]}),m==="Sospecha de otras enfermedades"&&c.jsx("input",{type:"text",value:y,onChange:j=>b(j.target.value),placeholder:"Especificar sospecha o síntomas...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"})]}),c.jsx("p",{className:"text-xs text-zinc-500 text-center pt-2",children:'El animal será movido a "Referencia".'}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[c.jsx("button",{onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsx("button",{onClick:C,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg",children:"Confirmar Baja"})]})]})}):null},bD=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{fathers:r,addFather:i,addParturition:a}=Kt(),[s,o]=I.useState(new Date().toISOString().split("T")[0]),[l,u]=I.useState(""),[d,f]=I.useState(!0),[p,h]=I.useState(!1),[g,m]=I.useState(null),[v,y]=I.useState(!1),b=t.name?String(t.name).toUpperCase().trim():"",S=async C=>{if(C.preventDefault(),!l){m({type:"error",text:"Debe seleccionar el padre (semental)."});return}h(!0),m(null);try{await a({motherId:t.id,parturitionDate:s,sireId:l,parturitionType:"Simple",offspringCount:0,liveOffspring:[],parturitionOutcome:"Aborto",inducedLactation:d}),m({type:"success",text:`Aborto registrado para ${t.id.toUpperCase()}.`}),setTimeout(e,1500)}catch(D){m({type:"error",text:D.message||"No se pudo registrar el aborto."}),h(!1)}},A=async C=>{try{await i(C),u(C.id),y(!1)}catch(D){console.error("Error saving new father:",D),m({type:"error",text:D.message||"No se pudo guardar el nuevo padre."})}};return c.jsxs(c.Fragment,{children:[c.jsx(sn,{isOpen:!v,onClose:n,title:"Registrar Aborto",children:c.jsxs("form",{onSubmit:S,className:"space-y-4",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:t.id.toUpperCase()}),b&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:b})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Aborto"}),c.jsx("input",{type:"date",value:s,onChange:C=>o(C.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",required:!0,max:new Date().toISOString().split("T")[0]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Padre (Semental Involucrado)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:l,onChange:C=>u(C.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",required:!0,children:[c.jsx("option",{value:"",children:"Seleccionar Padre..."}),r.map(C=>c.jsx("option",{value:C.id,children:ar(C)},C.id))]}),c.jsx("button",{type:"button",onClick:()=>y(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",title:"Añadir Nuevo Padre de Referencia",children:c.jsx(Ki,{size:24})})]})]}),c.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-zinc-700 flex items-center justify-between",children:[c.jsx("label",{htmlFor:"inducedLactation",className:"text-sm font-medium text-zinc-300",children:"¿Se iniciará lactancia post-aborto?"}),c.jsx("input",{id:"inducedLactation",type:"checkbox",checked:d,onChange:C=>f(C.target.checked),className:"form-checkbox h-5 w-5 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]}),c.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Marcar esta opción iniciará una lactancia "atípica" para poder registrar los pesajes.'}),g&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${g.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[g.type==="success"?c.jsx(Ga,{size:18}):c.jsx(dr,{size:18}),c.jsx("span",{children:g.text})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[c.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:p,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg disabled:opacity-50",children:p?"Guardando...":"Confirmar Aborto"})]})]})}),c.jsx(iD,{isOpen:v,onClose:()=>y(!1),onSave:A})]})},Vg=({animalId:t,weightType:e,onSaveSuccess:n,onCancel:r,sessionDate:i})=>{const{addBodyWeighing:a,addWeighing:s,animals:o}=Kt(),[l,u]=I.useState(i||new Date().toISOString().split("T")[0]),[d,f]=I.useState(""),[p,h]=I.useState(!1),[g,m]=I.useState(null),v=be.useMemo(()=>o.find(S=>S.id===t),[o,t]),y=v!=null&&v.name?String(v.name).toUpperCase().trim():"";I.useEffect(()=>{i&&u(i)},[i]);const b=async S=>{S.preventDefault(),m(null),h(!0);const A=parseFloat(d);if(isNaN(A)||A<=0){m({type:"error",text:"Por favor, introduce un peso válido."}),h(!1);return}if(e==="corporal"&&A>150){m({type:"error",text:"El peso corporal parece irracionalmente alto."}),h(!1);return}if(e==="leche"&&A>8.5){m({type:"error",text:"La producción de leche parece irracionalmente alta."}),h(!1);return}try{e==="corporal"?await a({animalId:t,date:l,kg:A}):await s({goatId:t,date:l,kg:A}),m({type:"success",text:`Pesaje de ${t} guardado con éxito.`}),setTimeout(()=>{n()},1500)}catch(C){m({type:"error",text:C.message||"No se pudo guardar el pesaje."}),h(!1)}};return c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[c.jsxs("div",{className:"text-center mb-2",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:t.toUpperCase()}),y&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:y})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weighingDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Pesaje"}),c.jsx("input",{id:"weighingDate",type:"date",value:l,onChange:S=>u(S.target.value),disabled:!!i,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg disabled:opacity-70 disabled:bg-zinc-700",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weighingKg",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso (Kg)"}),c.jsx("input",{id:"weighingKg",type:"number",step:"0.1",value:d,onChange:S=>f(S.target.value),placeholder:"Ej: 3.5",autoFocus:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),g&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${g.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[g.type==="success"?c.jsx(Ga,{size:18}):c.jsx(dr,{size:18}),c.jsx("span",{children:g.text})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:p,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:p?c.jsx(jc,{size:18,className:"animate-spin"}):"Guardar Pesaje"})]})]})},xD=({weightType:t,animalsToWeigh:e,onSaveSuccess:n,onCancel:r})=>{const{addWeighing:i,addBodyWeighing:a,parturitions:s,startDryingProcess:o,setLactationAsDry:l}=Kt(),[u,d]=I.useState(new Date().toISOString().split("T")[0]),[f,p]=I.useState({}),[h,g]=I.useState(!1),[m,v]=I.useState(null),[y,b]=I.useState(null),S=I.useMemo(()=>Object.values(f).filter(P=>P.trim()!==""&&!isNaN(parseFloat(P))).length,[f]),A=I.useMemo(()=>{const P=new Map;if(t==="leche"){const O=new Set(e.map(T=>T.id));s.filter(T=>O.has(T.goatId)&&(T.status==="activa"||T.status==="en-secado")).forEach(T=>{const M=P.get(T.goatId);(!M||new Date(T.parturitionDate)>new Date(M.parturitionDate))&&P.set(T.goatId,T)})}return P},[s,e,t]),C=(P,O)=>{p(T=>({...T,[P]:O}))},D=async P=>{const O=A.get(P);if(!(!O||O.status!=="activa")){v(P),b(null);try{await o(O.id),A.set(P,{...O,status:"en-secado"})}catch(T){b({type:"error",text:`Error al secar ${P}: ${T.message}`})}finally{v(null)}}},j=async P=>{const O=A.get(P);if(!(!O||O.status==="seca"||O.status==="finalizada")){v(P),b(null);try{await l(O.id),A.set(P,{...O,status:"seca"})}catch(T){b({type:"error",text:`Error al secar ${P}: ${T.message}`})}finally{v(null)}}},N=async P=>{P.preventDefault(),b(null),g(!0);const O=Object.entries(f).map(([T,M])=>({animalId:T,kg:parseFloat(M)})).filter(T=>!isNaN(T.kg)&&T.kg>0);if(O.length===0){b({type:"error",text:"No se han introducido pesos válidos."}),g(!1);return}try{const T=O.map(M=>t==="leche"?i({goatId:M.animalId,kg:M.kg,date:u}):a({animalId:M.animalId,kg:M.kg,date:u}));await Promise.all(T),b({type:"success",text:`${O.length} pesajes guardados con éxito.`}),setTimeout(()=>{n()},1500)}catch(T){b({type:"error",text:"Ocurrió un error al guardar los datos."}),g(!1),console.error("Error en escritura por lote de pesajes:",T)}};return c.jsxs("form",{onSubmit:N,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex-shrink-0 space-y-4 p-4 border-b border-brand-border",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:t==="leche"?"Sesión de Ordeño":"Sesión de Pesaje Corporal"}),c.jsx("input",{type:"date",value:u,onChange:P=>d(P.target.value),className:"bg-zinc-800 text-white p-2 rounded-lg text-sm"})]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Registrando ",S," / ",e.length," animales."]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto p-4 space-y-2",children:e.map(P=>{const O=P.name?String(P.name).toUpperCase().trim():"";if(t==="corporal")return c.jsxs("div",{className:"grid grid-cols-2 items-center gap-4 p-2 bg-black/20 rounded-lg",children:[c.jsxs("div",{className:"min-w-0 col-span-1",children:[c.jsx("label",{htmlFor:`weight-${P.id}`,className:"font-mono font-semibold text-base text-white truncate block cursor-pointer",children:P.id.toUpperCase()}),O&&c.jsx("p",{className:"text-sm font-normal text-zinc-400 truncate",children:O})]}),c.jsx("input",{id:`weight-${P.id}`,type:"number",step:"0.1",value:f[P.id]||"",onChange:L=>C(P.id,L.target.value),placeholder:"Kg",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center"})]},P.id);const T=A.get(P.id),M=m===P.id;return c.jsxs("div",{className:"grid grid-cols-3 items-center gap-2 p-2 bg-black/20 rounded-lg",children:[c.jsxs("div",{className:"min-w-0 col-span-1",children:[c.jsx("label",{htmlFor:`weight-${P.id}`,className:"font-mono font-semibold text-base text-white truncate block cursor-pointer",children:P.id.toUpperCase()}),O&&c.jsx("p",{className:"text-sm font-normal text-zinc-400 truncate",children:O})]}),c.jsx("input",{id:`weight-${P.id}`,type:"number",step:"0.1",value:f[P.id]||"",onChange:L=>C(P.id,L.target.value),placeholder:"Kg",disabled:!T||T.status==="seca"||h,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center col-span-1 disabled:opacity-50"}),c.jsx("div",{className:"col-span-1 flex items-center justify-end gap-1",children:M?c.jsx(jc,{className:"animate-spin text-zinc-400",size:20}):c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",onClick:()=>D(P.id),disabled:!T||T.status!=="activa"||h,title:"Iniciar Secado",className:"p-2 bg-blue-600/20 text-blue-300 rounded-lg hover:bg-blue-600/40 disabled:opacity-30 disabled:cursor-not-allowed",children:c.jsx(pp,{size:16})}),c.jsx("button",{type:"button",onClick:()=>j(P.id),disabled:!T||T.status==="seca"||T.status==="finalizada"||h,title:"Declarar Seca",className:"p-2 bg-gray-600/20 text-gray-300 rounded-lg hover:bg-gray-600/40 disabled:opacity-30 disabled:cursor-not-allowed",children:c.jsx(Dc,{size:16})})]})})]},P.id)})}),c.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-ios-modal-bg",children:[y&&c.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${y.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[y.type==="success"?c.jsx(Ga,{size:18}):c.jsx(dr,{size:18}),c.jsx("span",{children:y.text})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsxs("button",{type:"submit",disabled:h||S===0||m!==null,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[h?c.jsx(jc,{size:18,className:"animate-spin"}):c.jsx(ev,{size:18}),"Guardar ",S>0?`(${S})`:""]})]})]})]})},wD=({weightType:t,onBack:e,onAnimalsSelected:n})=>{const{animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o}=Kt(),[l,u]=I.useState(!0),d=`Nueva Sesión de Peso ${t==="corporal"?"Corporal":"Lechero"}`,f=h=>{const g=r.filter(m=>h.includes(m.id));n(h,g),u(!1)},p=()=>{u(!1),e()};return c.jsx(A_,{isOpen:l,onClose:p,onSelect:f,animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,title:d,sessionType:t})},aze=`
  .rdp {
    --rdp-cell-size: 40px; /* Size of day cells */
    --rdp-accent-color: #FF9500; /* Orange accent */
    --rdp-background-color: transparent; /* Transparent background */
    --rdp-accent-color-dark: #FF9500;
    --rdp-background-color-dark: transparent;
    --rdp-outline: 2px solid var(--rdp-accent-color); /* Outline for focused day */
    --rdp-border-radius: 12px; /* Rounded corners */
    color: #FFF; /* Default text color */
    margin: 1em auto; /* Centering */
  }
  .rdp-caption_label { color: #FFF; font-weight: bold; } /* Month/Year label */
  .rdp-nav_button { color: #FF9500; } /* Navigation arrows */
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; } /* Weekday names */
  .rdp-day { color: #FFF; } /* Day numbers */
  .rdp-day_today { font-weight: bold; color: #FF9500; } /* Today's date */
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; } /* Selected day */
  .rdp-day_disabled { color: #505054; } /* Disabled days */
  .rdp-day_outside { color: #505054; } /* Days outside current month */
  .rdp-caption_dropdowns { display: flex; gap: 10px; } /* Style dropdowns if used */
  .rdp-dropdown {
      background-color: #333; /* Dark background for dropdown */
      border: 1px solid #555;
      color: #FFF;
      padding: 4px 8px;
      border-radius: 6px;
  }
`,SD=({isOpen:t,onClose:e,onSave:n,animal:r})=>{if(!t)return null;const i=r.name?String(r.name).toUpperCase().trim():"",a=s=>{s&&n(s)};return c.jsxs(sn,{isOpen:t,onClose:e,title:"Registrar Servicio",children:[c.jsx("style",{children:aze}),c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:r.id.toUpperCase()}),i&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:i})]}),c.jsx("div",{className:"flex justify-center pb-4",children:c.jsx(Sp,{mode:"single",onSelect:a,defaultMonth:new Date,locale:Gb,disabled:{after:new Date},captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()})})]})},sze=({animal:t,isSelected:e,onSelect:n})=>{const r=t.name?String(t.name).toUpperCase().trim():"";return c.jsx("div",{onClick:()=>n(t.id),className:`w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border flex justify-between items-center transition-all cursor-pointer min-h-[80px] ${e?"border-brand-orange ring-2 ring-brand-orange/50":"border-brand-border"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[e?c.jsx(vS,{className:"text-brand-orange flex-shrink-0",size:20}):c.jsx(yS,{className:"text-zinc-500 flex-shrink-0",size:20}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),r&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:r}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[t.sex," | ",t.formattedAge]})})]})]})})};function oze({lotName:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,updateAnimal:l,addServiceRecord:u,startDryingProcess:d,setLactationAsDry:f,fathers:p}=Kt(),[h,g]=I.useState(!1),[m,v]=I.useState(!1),[y,b]=I.useState(new Set),[S,A]=I.useState(!1),[C,D]=I.useState(null),[j,N]=I.useState(!1),[P,O]=I.useState(null),[T,M]=I.useState(null),[L,V]=I.useState(null),[K,Z]=I.useState([]),[Y,H]=I.useState("corporal"),ee=I.useMemo(()=>{const Ye=new Map(o.map(vt=>[vt.id,vt])),mt=new Map(p.map(vt=>[vt.id,vt]));return r.filter(vt=>(vt.location||"Sin Asignar")===t&&!vt.isReference).sort((vt,Qe)=>vt.id.localeCompare(Qe.id)).map(vt=>{let Qe;if(vt.sireLotId){const Ot=Ye.get(vt.sireLotId);if(Ot){const ht=mt.get(Ot.sireId)||r.find(dt=>dt.id===Ot.sireId);Qe=ht?ar(ht):void 0}}return{...vt,formattedAge:Mc(vt.birthDate),statusObjects:NX(vt,i,a,o,s),sireName:Qe}})},[r,t,i,a,o,s,p]),le=I.useRef(null),se=kX({count:ee.length,getScrollElement:()=>le.current,estimateSize:()=>96,overscan:5}),$=Ye=>{b(mt=>{const vt=new Set(mt);return vt.has(Ye)?vt.delete(Ye):vt.add(Ye),vt})},X=async()=>{const Ye=Array.from(y).map(mt=>l(mt,{location:""}));try{await Promise.all(Ye),v(!1),b(new Set)}catch(mt){console.error("Error al quitar animales:",mt)}},te=async Ye=>{if(!t)return;const mt=Ye.map(vt=>l(vt,{location:t}));await Promise.all(mt),g(!1)},oe=Ye=>{if(!Ye)return[];const mt=[];return Ye.sex==="Hembra"&&(mt.push({label:"Declarar Parto",icon:Wl,onClick:()=>{N(!1),O("parturition")}}),mt.push({label:"Declarar Aborto",icon:Sf,onClick:()=>{N(!1),O("abortion")},color:"text-yellow-400"}),mt.push({label:"Acciones de Leche",icon:wf,onClick:()=>{N(!1),O("milkWeighingAction")}}),Ye.sireLotId&&mt.push({label:"Registrar Servicio",icon:gS,onClick:()=>{N(!1),O("service")},color:"text-pink-400"})),mt.push({label:"Acciones de Peso",icon:If,onClick:()=>{N(!1),O("bodyWeighingAction")}}),mt.push({label:"Dar de Baja",icon:Dc,onClick:()=>{N(!1),O("decommissionSheet")},color:"text-brand-red"}),mt},me=[{label:"Por Venta",icon:No,onClick:()=>{M("Venta"),O("decommission")}},{label:"Por Muerte",icon:Sf,onClick:()=>{M("Muerte"),O("decommission")},color:"text-brand-red"},{label:"Por Descarte",icon:fS,onClick:()=>{M("Descarte"),O("decommission")},color:"text-brand-red"}],_e=Ye=>{D(Ye),N(!0)},Ce=()=>{O(null),D(null),V(null),Z([]),M(null)},fe=async Ye=>{if(!C)return;const mt={status:Ye.reason,isReference:!0,endDate:Ye.date};Ye.reason==="Venta"&&Object.assign(mt,{salePrice:Ye.salePrice,saleBuyer:Ye.saleBuyer,salePurpose:Ye.salePurpose}),Ye.reason==="Muerte"&&(mt.deathReason=Ye.deathReason),Ye.reason==="Descarte"&&Object.assign(mt,{cullReason:Ye.cullReason,cullReasonDetails:Ye.cullReasonDetails}),await l(C.id,mt),Ce()},xe=(Ye,mt)=>{V(Ye),O(mt==="leche"?"logSimpleMilk":"logSimpleBody")},Se=Ye=>{H(Ye),O(Ye==="leche"?"newMilkSession":"newBodySession")},ie=async()=>{C&&(await l(C.id,{reproductiveStatus:"En Servicio"}),Ce())},He=(Ye,mt)=>{Z(mt),O("bulkWeighing")},Fe=()=>{Ce()},he=async Ye=>{if(!C||!C.sireLotId){console.error("Missing animal or sireLotId."),Ce();return}await u({sireLotId:C.sireLotId,femaleId:C.id,serviceDate:Ye.toISOString().split("T")[0]}),Ce()};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{ref:le,className:"w-full max-w-2xl mx-auto space-y-4 pb-4 animate-fade-in",style:{height:`calc(100vh - 64px - 65px - ${m&&y.size>0?"80px":"0px"})`,overflowY:"auto"},children:[c.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4 sticky top-0 bg-brand-dark/80 backdrop-blur-lg z-10 border-b border-brand-border",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:t}),c.jsxs("p",{className:"text-lg text-zinc-400",children:[ee.length," ",ee.length===1?"animal":"animales"]})]}),m?c.jsx("button",{onClick:()=>{v(!1),b(new Set)},className:"text-brand-orange font-semibold px-2 py-1",children:"Listo"}):c.jsx("button",{onClick:()=>v(!0),className:"p-2 -mr-2 text-zinc-400 hover:text-white",children:c.jsx(Of,{size:20})})]}),!m&&c.jsx("div",{className:"px-4 pt-4",children:c.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[c.jsx(Ki,{size:20})," Añadir Animales"]})}),c.jsx("div",{className:"pt-4",style:{height:"auto",position:"relative"},children:ee.length>0?c.jsx("div",{style:{height:`${se.getTotalSize()}px`,width:"100%",position:"relative"},children:se.getVirtualItems().map(Ye=>{const mt=ee[Ye.index];return c.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${Ye.size}px`,transform:`translateY(${Ye.start}px)`,padding:"0 1rem 1rem 1rem",boxSizing:"border-box"},children:m?c.jsx(sze,{animal:mt,isSelected:y.has(mt.id),onSelect:$}):c.jsx(rD,{animal:mt,onSelect:vt=>n({name:"rebano-profile",animalId:vt}),onOpenActions:_e})},Ye.key)})}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:c.jsx("p",{className:"text-zinc-500",children:"Este lote está vacío."})})})]}),m&&y.size>0&&c.jsx("div",{className:"fixed bottom-16 left-0 right-0 bg-ios-modal-bg p-4 border-t border-brand-border animate-slide-up z-20",children:c.jsxs("div",{className:"max-w-2xl mx-auto flex gap-4",children:[c.jsxs("button",{onClick:X,className:"flex-1 flex items-center justify-center gap-2 bg-brand-red text-white font-bold py-3 rounded-xl",children:[c.jsx(Gl,{size:18})," Quitar del Lote"]}),c.jsxs("button",{onClick:()=>A(!0),className:"flex-1 flex items-center justify-center gap-2 bg-brand-blue text-white font-bold py-3 rounded-xl",children:[c.jsx(HW,{size:18})," Transferir"]})]})}),c.jsx(A_,{isOpen:h,onClose:()=>g(!1),onSelect:te,animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,title:`Añadir animales a: ${t}`}),c.jsx(DLe,{isOpen:S,onClose:()=>{A(!1),v(!1),b(new Set)},animalsToTransfer:Array.from(y),fromLot:t}),c.jsx(pu,{isOpen:j,onClose:()=>N(!1),title:`Acciones para ${ar(C)}`,actions:oe(C)}),c.jsx(pu,{isOpen:P==="decommissionSheet",onClose:Ce,title:"Causa de la Baja",actions:me}),C&&c.jsxs(c.Fragment,{children:[P==="parturition"&&c.jsx(_p,{isOpen:!0,onClose:Ce,motherId:C.id}),P==="abortion"&&c.jsx(bD,{animal:C,onCancel:Ce,onSaveSuccess:Ce}),P==="decommission"&&T&&c.jsx(j_,{isOpen:P==="decommission",animal:C,onCancel:Ce,onConfirm:fe,reason:T}),P==="service"&&c.jsx(SD,{isOpen:!0,onClose:Ce,onSave:he,animal:C}),P==="milkWeighingAction"&&c.jsx(vD,{isOpen:!0,animal:C,onClose:Ce,onLogToSession:Ye=>xe(Ye,"leche"),onStartNewSession:()=>Se("leche"),onStartDrying:d,onSetDry:f}),P==="bodyWeighingAction"&&c.jsx(yD,{isOpen:!0,animal:C,onClose:Ce,onLogToSession:Ye=>xe(Ye,"corporal"),onStartNewSession:()=>Se("corporal"),onSetReadyForMating:ie}),P==="logSimpleMilk"&&L&&c.jsx(sn,{isOpen:!0,onClose:Ce,title:`Añadir Pesaje Leche: ${ar(C)}`,children:c.jsx(Vg,{animalId:C.id,weightType:"leche",onSaveSuccess:Ce,onCancel:Ce,sessionDate:L})}),P==="logSimpleBody"&&L&&c.jsx(sn,{isOpen:!0,onClose:Ce,title:`Añadir Peso Corporal: ${ar(C)}`,children:c.jsx(Vg,{animalId:C.id,weightType:"corporal",onSaveSuccess:Ce,onCancel:Ce,sessionDate:L})}),(P==="newMilkSession"||P==="newBodySession")&&c.jsx(wD,{weightType:Y,onBack:Ce,onAnimalsSelected:He}),P==="bulkWeighing"&&c.jsx(sn,{isOpen:!0,onClose:Ce,title:`Carga Masiva - ${Y==="leche"?"Leche":"Corporal"}`,size:"fullscreen",children:c.jsx(xD,{weightType:Y,animalsToWeigh:K,onSaveSuccess:Fe,onCancel:Ce})})]})]})}const lze=({activeFilter:t,setActiveFilter:e})=>c.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[c.jsx("button",{onClick:()=>e("Activo"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Activo"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Activos"}),c.jsx("button",{onClick:()=>e("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"De Referencia"})]}),cze=({activeFilter:t,setFilter:e})=>{const n=[{key:"all",label:"Todos"},{key:"Venta",label:"Vendidos"},{key:"Muerte",label:"Muertos"},{key:"Descarte",label:"Descartados"}];return c.jsxs("div",{className:"p-3 bg-black/20 rounded-lg",children:[c.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"Filtrar por estado:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(r=>c.jsx("button",{onClick:()=>e(r.key),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${t===r.key?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:r.label},r.key))})]})},d5=({isOpen:t,onClose:e,onSelect:n,animals:r,title:i,filterSex:a})=>{const[s,o]=I.useState(""),[l,u]=I.useState("Activo"),[d,f]=I.useState("all"),p=m=>{u(m),f("all")},h=I.useMemo(()=>r.filter(m=>{if(a&&m.sex&&m.sex!==a)return!1;const v=m.isReference;return l==="Referencia"?v?d!=="all"?m.status===d:!0:!1:!v}).filter(m=>{if(!s)return!0;const v=s.toLowerCase(),y=m.id.toLowerCase().includes(v),b=m.name&&m.name.toLowerCase().includes(v);return y||b}).sort((m,v)=>m.id.localeCompare(v.id)),[r,s,l,d,a]),g=m=>{n(m),o("")};return c.jsx(sn,{isOpen:t,onClose:e,title:i,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(fu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),c.jsx("input",{type:"search",placeholder:"Buscar ID o Nombre...",value:s,onChange:m=>o(m.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-orange"})]}),c.jsx(lze,{activeFilter:l,setActiveFilter:p}),l==="Referencia"&&c.jsx("div",{className:"animate-fade-in",children:c.jsx(cze,{activeFilter:d,setFilter:f})}),c.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:h.length>0?h.map(m=>{const v=m.name?String(m.name).toUpperCase().trim():"";return c.jsx("button",{onClick:()=>g(m.id),className:"w-full text-left p-3 bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:c.jsxs("div",{className:"min-w-0",children:[" ",c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:m.id.toUpperCase()}),v&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:v}),c.jsxs("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:[m.sex?`${m.sex}`:"",m.birthDate&&m.birthDate!=="N/A"?` | ${Mc(m.birthDate)}`:"",` | Lote: ${m.location||"N/A"}`]})]})},m.id)}):c.jsx("p",{className:"text-center text-zinc-500 py-8",children:"No se encontraron animales con estos filtros."})})]})})},ZX=(t,e)=>{if(!t||!e)return"Indefinido";const n=new Date,r=new Date(t+"T00:00:00");if(isNaN(r.getTime()))return"Indefinido";const i=(n.getTime()-r.getTime())/(1e3*60*60*24);return e==="Hembra"?i<=60?"Cabrita":i<=365?"Cabritona":"Cabra Adulta":i<=60?"Cabrito":i<=365?"Macho de Levante":"Macho Cabrío"},ym=be.forwardRef(({className:t,...e},n)=>c.jsx("input",{ref:n,...e,className:`w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange disabled:opacity-50 disabled:bg-brand-dark/50 ${t}`})),OC=be.forwardRef(({children:t,...e},n)=>c.jsxs("div",{className:"relative w-full",children:[c.jsx("select",{ref:n,...e,className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white appearance-none focus:outline-none focus:ring-2 focus:ring-brand-orange",children:t}),c.jsx(G2,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"})]})),Om=({title:t,children:e})=>c.jsxs("div",{className:"bg-brand-glass rounded-2xl border border-brand-border p-4 space-y-4",children:[c.jsx("h2",{className:"text-zinc-400 font-semibold text-sm uppercase tracking-wide",children:t}),e]}),YP=({labelOn:t,labelOff:e,value:n,onChange:r})=>c.jsxs("div",{onClick:()=>r(!n),className:"w-full bg-brand-dark rounded-xl p-1 flex cursor-pointer",children:[c.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"bg-zinc-700 text-white":"text-zinc-400"}`,children:t}),c.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"text-zinc-400":"bg-zinc-700 text-white"}`,children:e})]}),uze=({onSaveSuccess:t,onCancel:e})=>{const{addAnimal:n,animals:r,lots:i,fathers:a}=Kt(),[s,o]=I.useState("Activo"),[l,u]=I.useState("Hembra"),[d,f]=I.useState(""),[p,h]=I.useState(""),[g,m]=I.useState(""),[v,y]=I.useState("MN"),[b,S]=I.useState(""),[A,C]=I.useState(null),[D,j]=I.useState(null),[N,P]=I.useState(""),[O,T]=I.useState(""),[M,L]=I.useState(!1),[V,K]=I.useState(""),[Z,Y]=I.useState(null),[H,ee]=I.useState(null),[le,se]=I.useState("Indefinido"),[$,X]=I.useState(!1),[te,oe]=I.useState(!1),[me,_e]=I.useState(!1),[Ce,fe]=I.useState(!1),[xe,Se]=I.useState(!1),[ie,He]=I.useState(null),Fe=I.useMemo(()=>g?ZX(g,l):"Indefinido",[g,l]),he=g?Fe:le;I.useEffect(()=>{T(nD(N))},[N]);const Ye=I.useMemo(()=>r.filter(dt=>dt.sex==="Hembra"),[r]),mt=I.useMemo(()=>r.filter(dt=>dt.sex==="Macho"),[r]),vt=I.useMemo(()=>{const dt=mt,It=a.map(tn=>({id:tn.id,name:tn.name,sex:"Macho",status:"Activo",isReference:!0,birthDate:"N/A",lifecycleStage:"Macho Cabrío",location:"Referencia",reproductiveStatus:"No Aplica",createdAt:0,lastWeighing:null}));return[...dt,...It]},[mt,a]);I.useEffect(()=>{const dt=r.find(tn=>tn.id===D),It=vt.find(tn=>tn.id===A);if(dt!=null&&dt.racialComposition&&(It!=null&&It.racialComposition)){const tn=CLe(dt.racialComposition,It.racialComposition);P(tn),L(!0)}else(!dt||!It)&&L(!1)},[D,A,r,vt]),I.useEffect(()=>{if(Y(null),d&&s==="Activo"){const dt=r.some(It=>It.id.toLowerCase()===d.toLowerCase());ee(dt?`El ID "${d.toUpperCase()}" ya existe en el rebaño principal.`:null)}else ee(null)},[d,r,s]);const Qe=I.useMemo(()=>i,[i]),Ot=async dt=>{if(dt.preventDefault(),Y(null),ee(null),s==="Activo"&&!d){Y({type:"error",text:"El ID del animal es obligatorio para animales Activos."});return}if(d&&s==="Activo"&&r.some(Zt=>Zt.id.toLowerCase()===d.toLowerCase())){ee(`El ID "${d.toUpperCase()}" ya existe en el rebaño principal.`),Y({type:"error",text:`El ID "${d.toUpperCase()}" ya existe.`});return}const It={id:d.toUpperCase()||`REF-${Date.now()}`,name:p||void 0,birthDate:g||"N/A",sex:l,isReference:s==="Referencia",status:"Activo",lifecycleStage:he,conceptionMethod:v||void 0,birthWeight:b?parseFloat(b):void 0,fatherId:A||void 0,motherId:D||void 0,racialComposition:N||void 0,breed:O||void 0,location:V||"",reproductiveStatus:l==="Hembra"?"Vacía":"No Aplica",createdAt:new Date().getTime(),lastWeighing:null};try{await n(It),Y({type:"success",text:`Animal ${ar(It)} agregado con éxito.`}),setTimeout(t,1e3)}catch(tn){Y({type:"error",text:tn.message||"No se pudo guardar el animal."}),console.error("Error al guardar animal:",tn)}},ht=dt=>{ie==="father"?C(dt.id):ie==="mother"&&j(dt.id),He(null)};return c.jsxs(c.Fragment,{children:[c.jsxs("form",{onSubmit:Ot,className:"w-full space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:["ID Animal ",s==="Activo"?"(Obligatorio)":"(Opcional para Referencia)"]}),c.jsx("input",{type:"text",value:d,onClick:()=>fe(!0),readOnly:!0,placeholder:s==="Activo"?"T047":"Opcional...",className:`w-full bg-brand-glass border rounded-xl p-4 text-white text-center text-3xl font-mono tracking-widest placeholder-zinc-700 focus:outline-none focus:ring-2 cursor-pointer ${H?"border-brand-red ring-brand-red":"border-brand-border focus:ring-brand-orange"}`,required:s==="Activo"}),H&&c.jsxs("p",{className:"mt-2 text-sm text-brand-red flex items-center justify-center gap-1",children:[c.jsx(dr,{size:14})," ",H]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Nombre (Opcional)"}),c.jsx(ym,{type:"text",value:p,onChange:dt=>h(dt.target.value.toUpperCase()),placeholder:"Ej: PRINCESA"})]}),c.jsxs(Om,{title:"Categoría",children:[c.jsx(YP,{labelOn:"Hembra",labelOff:"Macho",value:l==="Hembra",onChange:dt=>u(dt?"Hembra":"Macho")}),c.jsx(YP,{labelOn:"Activo",labelOff:"Referencia",value:s==="Activo",onChange:dt=>{o(dt?"Activo":"Referencia"),dt||ee(null)}})]}),c.jsxs(Om,{title:"Genética y Nacimiento",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Fecha de Nacimiento (Opcional)"}),c.jsxs("button",{type:"button",onClick:()=>X(!0),className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white flex justify-between items-center",children:[c.jsx("span",{className:g?"text-white":"text-zinc-500",children:g?new Date(g+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Seleccionar fecha..."}),c.jsx(so,{className:"text-zinc-400",size:20})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Estado (Categoría Zootécnica)"}),g?c.jsx(ym,{type:"text",value:Fe,readOnly:!0,disabled:!0}):c.jsxs(OC,{value:le,onChange:dt=>se(dt.target.value),children:[c.jsx("option",{value:"Indefinido",children:"Seleccionar Categoría..."}),c.jsx("option",{value:"Cabrita",children:"Cabrita"}),c.jsx("option",{value:"Cabritona",children:"Cabritona"}),c.jsx("option",{value:"Cabra Adulta",children:"Cabra Adulta"}),c.jsx("option",{value:"Cabrito",children:"Cabrito"}),c.jsx("option",{value:"Macho de Levante",children:"Macho de Levante"}),c.jsx("option",{value:"Macho Cabrío",children:"Macho Cabrío (Reproductor)"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs(OC,{value:v,onChange:dt=>y(dt.target.value),children:[c.jsx("option",{value:"MN",children:"Monta Natural (MN)"}),c.jsx("option",{value:"IA",children:"Inseminación Artificial (IA)"}),c.jsx("option",{value:"TE",children:"Transferencia de Embriones (TE)"}),c.jsx("option",{value:"",children:"Otro/Desconocido"})]}),c.jsx(ym,{type:"number",step:"0.1",value:b,onChange:dt=>S(dt.target.value),placeholder:"Peso al Nacer (Kg)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Padre (Semental)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>_e(!0),className:"w-full text-left bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 flex justify-between items-center",children:[c.jsx("span",{className:A?"text-white":"text-zinc-500",children:A?ar(vt.find(dt=>dt.id===A))||A:"Seleccionar padre..."}),c.jsx(fu,{size:18,className:"text-zinc-400"})]}),c.jsx("button",{type:"button",onClick:()=>He("father"),className:"p-3 bg-brand-glass border border-brand-border rounded-xl text-brand-orange hover:bg-brand-orange/20 flex-shrink-0",children:c.jsx(Ki,{size:20})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Madre"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>oe(!0),className:"w-full text-left bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 flex justify-between items-center",children:[c.jsx("span",{className:D?"text-white":"text-zinc-500",children:D?ar(Ye.find(dt=>dt.id===D))||D:"Seleccionar madre..."}),c.jsx(fu,{size:18,className:"text-zinc-400"})]}),c.jsx("button",{type:"button",onClick:()=>He("mother"),className:"p-3 bg-brand-glass border border-brand-border rounded-xl text-brand-orange hover:bg-brand-orange/20 flex-shrink-0",children:c.jsx(Ki,{size:20})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Composición Racial (Ej: 50%A 50%S)"}),c.jsx("input",{type:"text",value:N,onClick:()=>{M||Se(!0)},readOnly:!0,placeholder:"100%A ó 75%A 25%AGC",disabled:M,className:`w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange ${M?"opacity-50 bg-brand-dark/50":"cursor-pointer"}`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Raza (Auto-calculada)"}),c.jsx(ym,{type:"text",value:O,readOnly:!0,disabled:!0,placeholder:"Ej: Mestiza Alpina"})]})]}),c.jsxs(Om,{title:"Manejo",children:[c.jsxs(OC,{value:V,onChange:dt=>K(dt.target.value),children:[c.jsx("option",{value:"",children:"Ubicación / Lote (Opcional)..."}),Qe.map(dt=>c.jsx("option",{value:dt.name,children:dt.name},dt.id))]}),c.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Si no se asigna un lote, se podrá encontrar en el filtro "Última Carga".'})]}),c.jsxs("div",{className:"space-y-3 pt-4",children:[Z&&!H&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${Z.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",Z.type==="success"?c.jsx(Ga,{size:18}):c.jsx(dr,{size:18})," ",c.jsx("span",{children:Z.text})," "]}),c.jsx("button",{type:"submit",disabled:!!H,className:`w-full text-white font-bold py-4 rounded-xl text-lg ${H?"bg-zinc-600 cursor-not-allowed":"bg-brand-green hover:bg-green-600"}`,children:"Guardar Animal"}),c.jsx("button",{type:"button",onClick:e,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-3 rounded-xl text-lg",children:"Cancelar"})]})]}),$&&c.jsx(JX,{onClose:()=>X(!1),onSelectDate:dt=>{dt&&m(dt.toISOString().split("T")[0]),X(!1)},currentValue:g?new Date(g+"T00:00:00"):new Date}),c.jsx(d5,{isOpen:te,onClose:()=>oe(!1),onSelect:dt=>{j(dt),oe(!1)},animals:Ye,title:"Seleccionar Madre",filterSex:"Hembra"}),c.jsx(d5,{isOpen:me,onClose:()=>_e(!1),onSelect:dt=>{C(dt),_e(!1)},animals:vt,title:"Seleccionar Padre",filterSex:"Macho"}),Ce&&c.jsx(eQ,{onClose:()=>fe(!1),onInput:dt=>f(dt.toUpperCase()),currentValue:d}),xe&&c.jsx(tQ,{onClose:()=>Se(!1),onInput:P,currentValue:N}),ie&&c.jsx(dze,{type:ie,onClose:()=>He(null),onSave:ht})]})},JX=({onClose:t,onSelectDate:e,currentValue:n})=>c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm animate-fade-in",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-ios-modal-bg rounded-t-2xl p-4 shadow-lg animate-slide-up",onClick:r=>r.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 1rem)"},children:[c.jsx("div",{onClick:t,className:"w-16 h-1.5 bg-zinc-700 rounded-full mx-auto mb-4 cursor-pointer"}),c.jsx("div",{className:"flex justify-center [&_.rdp]:bg-transparent [&_.rdp]:text-white [&_.rdp-caption_select]:bg-brand-glass [&_.rdp-caption_select]:border-brand-border [&_.rdp-caption_select]:text-white [&_.rdp-caption_select]:rounded-lg [&_.rdp-day_selected]:bg-brand-orange [&_.rdp-day_selected]:text-white [&_.rdp-day_today]:text-brand-orange [&_.rdp-nav_button]:text-zinc-400 [&_.rdp-head_cell]:text-zinc-500 [&_.rdp-day]:text-zinc-200 [&_.rdp-day_outside]:text-zinc-600",children:c.jsx(Sp,{mode:"single",selected:n,onSelect:e,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear(),defaultMonth:n,locale:Gb})})]})}),eQ=({onClose:t,onInput:e,currentValue:n})=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=["1","2","3","4","5","6","7","8","9","-","0","DEL"],a=o=>{if(o==="DEL"){s();return}o&&n.length<15&&e(n+o)},s=()=>{e(n.slice(0,-1))};return c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-[#333333] p-2 space-y-2",onClick:o=>o.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 0.5rem)"},children:[c.jsxs("div",{className:"flex flex-nowrap space-x-1.5 overflow-x-auto py-2 alphabet-scroller",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[c.jsx("style",{children:".alphabet-scroller::-webkit-scrollbar { display: none; }"}),r.map(o=>c.jsx("button",{onClick:()=>a(o),className:"flex-shrink-0 w-10 h-10 bg-[#555555] text-white rounded-md text-lg font-medium active:bg-zinc-500",children:o},o))]}),c.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:i.map(o=>c.jsx("button",{onClick:()=>a(o),className:"h-12 bg-[#555555] text-white rounded-md text-xl font-medium active:bg-zinc-500 flex items-center justify-center",children:o==="DEL"?c.jsx(hS,{size:20}):o},o))}),c.jsx("button",{onClick:t,className:"h-12 w-full bg-blue-600 text-white rounded-md text-lg font-semibold active:bg-blue-700",children:"Done"})]})})},tQ=({onClose:t,onInput:e,currentValue:n})=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=["1","2","3","4","5","6","7","8","9","%","0","DEL"],a=4,s=l=>{var m,v,y;if(l==="DEL"){o();return}if(n.length>=30)return;const u=n.split(" ").filter(b=>b!=="");let d=/[%A-Z]$/.test(n),f=n===""||n.endsWith(" ");if(u.length>=a&&f&&/\d/.test(l))return;let p=n;if(d&&/\d/.test(l))if(u.length<a)p+=" ";else return;if(l==="%"&&!/\d$/.test(p.slice(-1))&&!/[A-Z]$/.test(p.slice(-1))||l==="%"&&/%$/.test(p)||/[A-Z]/.test(l)&&!f&&!/\d$/.test(p.slice(-1))&&!/%$/.test(p.slice(-1))||/\d/.test(l)&&/[A-Z]$/.test(p))return;const h=((v=(m=p.split(" ").pop())==null?void 0:m.match(/\d+$/))==null?void 0:v[0])||"";if(!(l==="0"&&(f||/[%A-Z ]$/.test(p.slice(-1)))&&h.length===0)){if(l==="0"&&h==="0")return;/\d/.test(l)&&h==="0"&&(p=p.slice(0,-1))}const g=(y=(h+l).match(/\d+/))==null?void 0:y[0];g&&parseInt(g,10)>100||e(p+l)},o=()=>{e(n.slice(0,-1))};return c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-[#333333] p-2 space-y-2",onClick:l=>l.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 0.5rem)"},children:[c.jsxs("div",{className:"flex flex-nowrap space-x-1.5 overflow-x-auto py-2 alphabet-scroller",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[c.jsx("style",{children:".alphabet-scroller::-webkit-scrollbar { display: none; }"}),r.map(l=>c.jsx("button",{onClick:()=>s(l),className:"flex-shrink-0 w-10 h-10 bg-[#555555] text-white rounded-md text-lg font-medium active:bg-zinc-500",children:l},l))]}),c.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:i.map(l=>c.jsx("button",{onClick:()=>s(l),className:`h-12 bg-[#555555] text-white rounded-md text-xl font-medium active:bg-zinc-500 flex items-center justify-center ${l==="%"?"text-brand-orange":""}`,children:l==="DEL"?c.jsx(hS,{size:20}):l},l))}),c.jsx("button",{onClick:t,className:"h-12 w-full bg-blue-600 text-white rounded-md text-lg font-semibold active:bg-blue-700",children:"Done"})]})})},dze=({type:t,onClose:e,onSave:n})=>{const{addAnimal:r,animals:i,fathers:a}=Kt(),[s,o]=I.useState("Referencia"),[l,u]=I.useState(""),[d,f]=I.useState(""),[p,h]=I.useState(""),[g,m]=I.useState(""),[v,y]=I.useState(""),[b,S]=I.useState(null),[A,C]=I.useState(!1),[D,j]=I.useState(!1),[N,P]=I.useState(!1);I.useEffect(()=>{y(nD(g))},[g]);const O=async()=>{if(S(null),s==="Activo"&&!l){S("El ID es obligatorio si el estado es Activo.");return}const T=l.toUpperCase()||`REF-${Date.now()}`,M=new Set([...i.map(K=>K.id.toLowerCase()),...a.map(K=>K.id.toLowerCase())]);if(l&&M.has(T.toLowerCase())){S("Este ID ya existe en la base de datos (rebaño o referencias).");return}const L=t==="mother"?"Hembra":"Macho",V={id:T,name:d.toUpperCase()||void 0,birthDate:p||"N/A",sex:L,isReference:s==="Referencia",status:"Activo",lifecycleStage:p?ZX(p,L):L==="Hembra"?"Cabra Adulta":"Macho Cabrío",racialComposition:g||void 0,breed:v||void 0,location:"Referencia",reproductiveStatus:L==="Hembra"?"Vacía":"No Aplica",createdAt:new Date().getTime(),lastWeighing:null};try{await r(V),n(V)}catch(K){S(K.message||"Error al guardar el animal."),console.error("Error saving quick parent:",K)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-[60] bg-black/50 backdrop-blur-sm animate-fade-in flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"w-full max-w-md bg-ios-modal-bg rounded-2xl shadow-lg animate-slide-up flex flex-col max-h-[85vh]",onClick:T=>T.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[c.jsx("div",{className:"w-10"}),c.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Agregar ",t==="mother"?"Madre":"Padre"," Rápido"]}),c.jsx("button",{onClick:e,className:"p-2 -mr-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50",children:c.jsx(Ic,{size:20})})]}),c.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto",children:[c.jsx(Om,{title:"Categoría",children:c.jsx(YP,{labelOn:"Activo",labelOff:"Referencia",value:s==="Activo",onChange:T=>o(T?"Activo":"Referencia")})}),c.jsxs(Om,{title:"Identificación",children:[c.jsx("input",{type:"text",value:l,onClick:()=>C(!0),readOnly:!0,placeholder:s==="Activo"?"ID (Obligatorio)":"ID (Opcional)",className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange cursor-pointer"}),c.jsx(ym,{value:d,onChange:T=>f(T.target.value.toUpperCase()),placeholder:"Nombre (Opcional)"}),c.jsxs("button",{type:"button",onClick:()=>j(!0),className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-left flex justify-between items-center",children:[c.jsx("span",{className:p?"text-white":"text-zinc-500",children:p?new Date(p+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Fecha de Nacimiento (Opcional)"}),c.jsx(so,{className:"text-zinc-400",size:20})]})]}),c.jsxs(Om,{title:"Raza",children:[c.jsx("input",{type:"text",value:g,onClick:()=>P(!0),readOnly:!0,placeholder:"Composición Racial (Opcional)",className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange cursor-pointer"}),c.jsx(ym,{value:v,disabled:!0,readOnly:!0,placeholder:"Raza (Auto-calculada)"})]}),b&&c.jsx("p",{className:"text-sm text-brand-red text-center",children:b})]}),c.jsx("footer",{className:"p-4 border-t border-brand-border flex-shrink-0",children:c.jsxs("button",{onClick:O,className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:["Guardar ",t==="mother"?"Madre":"Padre"]})})]})}),A&&c.jsx(eQ,{onClose:()=>C(!1),onInput:T=>u(T.toUpperCase()),currentValue:l}),D&&c.jsx(JX,{onClose:()=>j(!1),onSelectDate:T=>{T&&h(T.toISOString().split("T")[0]),j(!1)},currentValue:p?new Date(p+"T00:00:00"):new Date}),N&&c.jsx(tQ,{onClose:()=>P(!1),onInput:m,currentValue:g})]})};function fze({onBack:t}){return c.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex flex-col justify-end animate-fade-in",onClick:t,children:c.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-4xl mx-auto h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:e=>e.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[c.jsx("div",{className:"w-10"})," ",c.jsx("h1",{className:"text-xl font-bold tracking-tight text-white",children:"Ingresar Nuevo Animal"}),c.jsx("button",{onClick:t,className:"p-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50 transition-colors","aria-label":"Cerrar",children:c.jsx(Ic,{size:24})})]}),c.jsx("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsx(uze,{onSaveSuccess:t,onCancel:t})})})]})})}const _D=(t,e)=>{const[n,r]=I.useState(""),i=I.useMemo(()=>n?t.filter(a=>e.some(s=>{const o=a[s];return typeof o=="string"||typeof o=="number"?o.toString().toLowerCase().includes(n.toLowerCase()):!1})):t,[t,n,e]);return{searchTerm:n,setSearchTerm:r,filteredItems:i}},hze=({title:t,subtitle:e,searchTerm:n,setSearchTerm:r})=>{const[i,a]=I.useState(!1),s=I.useRef(null);I.useEffect(()=>{var l;i&&((l=s.current)==null||l.focus())},[i]);const o=()=>{r(""),a(!1)};return c.jsxs("header",{className:"text-center pt-4 pb-4 relative overflow-hidden",children:[c.jsxs("div",{className:`transition-transform duration-300 ${i?"-translate-y-20":"translate-y-0"}`,children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:t}),c.jsx("p",{className:"text-md text-zinc-400",children:e})]}),c.jsx("div",{className:`absolute inset-0 transition-transform duration-300 flex items-center pt-2 ${i?"translate-y-0":"translate-y-20"}`,children:c.jsx("input",{ref:s,type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"Buscar por ID...",className:"w-full bg-zinc-800 text-white text-lg placeholder-zinc-500 p-3 rounded-xl border-2 border-transparent focus:border-amber-500 focus:ring-0 focus:outline-none"})}),c.jsx("div",{className:"absolute top-4 right-0 pt-1",children:c.jsx("button",{onClick:i?o:()=>a(!0),className:"p-2 text-zinc-400 hover:text-white transition-colors",children:i?c.jsx(Ic,{size:22}):c.jsx(fu,{size:22})})})]})},yv=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?c.jsx(sn,{isOpen:t,onClose:e,title:r,children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("p",{className:"text-zinc-300",children:i}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Confirmar"})]})]})}):null,pze=(t,e,n,r,i)=>{if(!t||t.status!=="Activo"||t.isReference)return[];const a=[];if(t.sex==="Hembra"){const o=e.filter(l=>l.goatId===t.id&&l.status!=="finalizada").sort((l,u)=>new Date(u.parturitionDate).getTime()-new Date(l.parturitionDate).getTime())[0];o&&(o.status==="activa"?a.push(jr.MILKING):o.status==="en-secado"?a.push(jr.DRYING_OFF):o.status==="seca"&&a.push(jr.DRY))}if(t.reproductiveStatus==="Preñada"?a.push(jr.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(l=>l.femaleId===t.id&&l.sireLotId===t.sireLotId)?a.push(jr.IN_SERVICE_CONFIRMED):a.push(jr.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push(jr.EMPTY),t.sex==="Macho"){const o=i.filter(d=>d.status==="Activo"),l=new Set(o.map(d=>d.id));r.some(d=>d.sireId===t.id&&l.has(d.seasonId))&&a.push(jr.SIRE_IN_SERVICE)}return Array.from(new Set(a.map(o=>o.key))).map(o=>jr[o]).filter(Boolean)},mze=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],MC=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>c.jsxs("div",{children:[t&&c.jsx("label",{className:"block text-sm font-semibold text-zinc-400 mb-2",children:t}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>r("ALL"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n==="all"||n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const a=i.Icon||null;return c.jsxs("button",{onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[a&&c.jsx(a,{size:14}),i.label]},i.key)})]})]});function gze({navigateTo:t,locationFilter:e}){const{animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,isLoading:o,updateAnimal:l,startDryingProcess:u,setLactationAsDry:d,addServiceRecord:f,fathers:p,deleteAnimalPermanently:h}=Kt(),[g,m]=I.useState(null),[v,y]=I.useState(!1),[b,S]=I.useState(null),[A,C]=I.useState(null),[D,j]=I.useState(null),[N,P]=I.useState([]),[O,T]=I.useState("corporal"),[M,L]=I.useState("Activos"),[V,K]=I.useState("all"),[Z,Y]=I.useState("Todos"),[H,ee]=I.useState(!1),[le,se]=I.useState("ALL"),[$,X]=I.useState("ALL"),[te,oe]=I.useState(!1),[me,_e]=I.useState(!1),[Ce,fe]=I.useState(!1),xe=I.useMemo(()=>{const ft=new Map(s.map(Rt=>[Rt.id,Rt])),pt=new Map(p.map(Rt=>[Rt.id,Rt]));return n.map(Rt=>{let Ct;if(Rt.sireLotId){const Ht=ft.get(Rt.sireLotId);if(Ht){const pn=pt.get(Ht.sireId)||n.find(dn=>dn.id===Ht.sireId);Ct=pn?ar(pn):void 0}}return{...Rt,statusObjects:pze(Rt,r,i,s,a),formattedAge:Mc(Rt.birthDate),zootecnicCategory:Bf(Rt,r),sireName:Ct}})},[n,r,i,s,a,p]),Se=I.useMemo(()=>{let ft=M==="Activos"?xe.filter(pt=>!pt.isReference):xe.filter(pt=>pt.isReference);return e&&(ft=ft.filter(pt=>(pt.location||"Sin Asignar")===e)),H?ft.sort((pt,Rt)=>(Rt.endDate?new Date(Rt.endDate).getTime():Rt.createdAt||0)-(pt.endDate?new Date(pt.endDate).getTime():pt.createdAt||0)).slice(0,25):(M==="Activos"?(le!=="ALL"&&(ft=ft.filter(pt=>pt.statusObjects.some(Rt=>Rt.key===le))),$!=="ALL"&&(ft=ft.filter(pt=>pt.statusObjects.some(Rt=>Rt.key===$)))):V!=="all"&&(ft=ft.filter(pt=>pt.status===V)),Z!=="Todos"&&(ft=ft.filter(pt=>pt.zootecnicCategory===Z)),ft)},[xe,M,H,e,Z,le,$,V]),{searchTerm:ie,setSearchTerm:He,filteredItems:Fe}=_D(Se,["id","name"]),he=()=>{Y("Todos"),ee(!1),se("ALL"),X("ALL"),K("all"),He(""),oe(!1),_e(!1)},Ye=ft=>{if(!ft)return[];if(ft.isReference)return[{label:"Reintegrar a Activos",icon:KW,onClick:bt},{label:"Eliminar Permanentemente",icon:Gl,onClick:()=>{y(!1),fe(!0)},color:"text-brand-red"}];const pt=[];return ft.sex==="Hembra"&&(pt.push({label:"Declarar Parto",icon:Wl,onClick:()=>{y(!1),S("parturition")}}),pt.push({label:"Declarar Aborto",icon:Sf,onClick:()=>{y(!1),S("abortion")},color:"text-yellow-400"}),pt.push({label:"Acciones de Leche",icon:wf,onClick:()=>{y(!1),S("milkWeighingAction")}}),ft.sireLotId&&pt.push({label:"Registrar Servicio",icon:gS,onClick:()=>{y(!1),S("service")},color:"text-pink-400"})),pt.push({label:"Acciones de Peso",icon:If,onClick:()=>{y(!1),S("bodyWeighingAction")}}),pt.push({label:"Mover a Lote",icon:fT,onClick:()=>t({name:"rebano-profile",animalId:ft.id,openAction:"move"})}),pt.push({label:"Dar de Baja",icon:Dc,onClick:()=>{y(!1),S("decommissionSheet")},color:"text-brand-red"}),pt},mt=[{label:"Por Venta",icon:No,onClick:()=>{C("Venta"),S("decommission")}},{label:"Por Muerte",icon:Sf,onClick:()=>{C("Muerte"),S("decommission")},color:"text-brand-red"},{label:"Por Descarte",icon:fS,onClick:()=>{C("Descarte"),S("decommission")},color:"text-brand-red"}],vt=ft=>{m(ft),y(!0)},Qe=()=>{S(null),m(null),j(null),P([]),C(null)},Ot=async ft=>{if(!g)return;const pt={status:ft.reason,isReference:!0,endDate:ft.date};ft.reason==="Venta"&&Object.assign(pt,{salePrice:ft.salePrice,saleBuyer:ft.saleBuyer,salePurpose:ft.salePurpose}),ft.reason==="Muerte"&&(pt.deathReason=ft.deathReason),ft.reason==="Descarte"&&Object.assign(pt,{cullReason:ft.cullReason,cullReasonDetails:ft.cullReasonDetails}),await l(g.id,pt),Qe()},ht=(ft,pt)=>{j(ft),S(pt==="leche"?"logSimpleMilk":"logSimpleBody")},dt=ft=>{T(ft),S(ft==="leche"?"newMilkSession":"newBodySession")},It=async()=>{g&&(await l(g.id,{reproductiveStatus:"En Servicio"}),Qe())},tn=(ft,pt)=>{P(pt),S("bulkWeighing")},Zt=()=>{Qe()},$t=ft=>{u(ft),Qe()},on=ft=>{d(ft),Qe()},lt=async ft=>{if(!g||!g.sireLotId){console.error("Missing animal or sireLotId."),Qe();return}await f({sireLotId:g.sireLotId,femaleId:g.id,serviceDate:ft.toISOString().split("T")[0]}),Qe()},bt=async()=>{!g||!g.isReference||(await l(g.id,{isReference:!1,status:"Activo",endDate:void 0,reproductiveStatus:"Vacía"}),y(!1),m(null))},yt=async()=>{!g||!g.isReference||(await h(g.id),fe(!1),y(!1),m(null))},nt=I.useRef(null),Bt=kX({count:Fe.length,getScrollElement:()=>nt.current,estimateSize:()=>96,overscan:5});return o?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando rebaño..."})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{ref:nt,className:"w-full max-w-2xl mx-auto space-y-4 pb-12",style:{height:"calc(100vh - 64px - 65px)",overflowY:"auto"},children:[c.jsx(hze,{title:e||"Mi Rebaño",subtitle:`${Fe.length} animales en la vista`,searchTerm:ie,setSearchTerm:He}),c.jsxs("div",{className:"space-y-4 px-4",children:[c.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[c.jsxs("button",{onClick:()=>{L("Activos"),he(),Y("Todos")},className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${M==="Activos"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx(hu,{size:16})," Activos"]}),c.jsxs("button",{onClick:()=>{L("Referencia"),he()},className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${M==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx(LW,{size:16})," Referencia"]})]}),M==="Activos"?c.jsxs("div",{className:"space-y-4 animate-fade-in",children:[c.jsxs("button",{onClick:()=>t({name:"add-animal"}),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(Ki,{size:18})," Ingresar Nuevo Animal"]}),c.jsxs("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>oe(!te),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[c.jsx("span",{children:"Filtros Productivos"}),c.jsx(G2,{className:`transition-transform ${te?"rotate-180":""}`,size:18})]}),te&&c.jsx("div",{className:"animate-fade-in",children:c.jsx(MC,{title:"",filters:["MILKING","DRYING_OFF","DRY"].map(ft=>jr[ft]).filter(Boolean),activeFilter:le,onFilterChange:se})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>_e(!me),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[c.jsx("span",{children:"Filtros Reproductivos"}),c.jsx(G2,{className:`transition-transform ${me?"rotate-180":""}`,size:18})]}),me&&c.jsx("div",{className:"animate-fade-in",children:c.jsx(MC,{title:"",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map(ft=>jr[ft]).filter(Boolean),activeFilter:$,onFilterChange:X})})]})]})]}):c.jsx("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:c.jsx(MC,{title:"Filtrar por Causa de Baja",filters:[{key:"Venta",label:"Venta"},{key:"Muerte",label:"Muerte"},{key:"Descarte",label:"Descarte"}],activeFilter:V,onFilterChange:K})}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("button",{onClick:()=>ee(!H),title:H?"Mostrar todos":"Mostrar última carga",className:`flex items-center gap-2 py-1 px-3 text-sm font-semibold rounded-lg transition-colors ${H?"text-brand-orange":"text-zinc-400 hover:text-brand-orange"}`,children:[c.jsx(uT,{size:16})," ",H?"Viendo Última Carga":"Última Carga"]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("button",{onClick:()=>t({name:"manage-lots"}),className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[c.jsx(hT,{size:14})," Gestionar Lotes"]}),c.jsxs("button",{onClick:he,className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[c.jsx(lT,{size:14})," Limpiar"]})]})]}),c.jsxs("select",{value:Z,onChange:ft=>Y(ft.target.value),className:"w-full bg-brand-glass p-3 rounded-xl text-white border border-brand-border focus:border-brand-orange focus:ring-0 appearance-none",children:[c.jsx("option",{value:"Todos",children:"Todas las Categorías Zootécnicas"}),mze.map(ft=>c.jsx("option",{value:ft,children:ft},ft))]})]}),c.jsx("div",{className:"pt-4",style:{height:"auto",position:"relative"},children:Fe.length>0?c.jsx("div",{style:{height:`${Bt.getTotalSize()}px`,width:"100%",position:"relative"},children:Bt.getVirtualItems().map(ft=>{const pt=Fe[ft.index];return c.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${ft.size}px`,transform:`translateY(${ft.start}px)`,padding:"0 1rem 1rem 1rem",boxSizing:"border-box"},children:c.jsx(rD,{animal:pt,onSelect:()=>t({name:"rebano-profile",animalId:pt.id}),onOpenActions:vt})},ft.key)})}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:c.jsx("p",{className:"text-zinc-400",children:ie?`No se encontraron resultados para "${ie}"`:"No hay animales que coincidan con los filtros."})})})]}),c.jsx(pu,{isOpen:v,onClose:()=>y(!1),title:`Acciones para ${ar(g)}`,actions:Ye(g)}),c.jsx(pu,{isOpen:b==="decommissionSheet",onClose:Qe,title:"Causa de la Baja",actions:mt}),g&&c.jsxs(c.Fragment,{children:[b==="parturition"&&c.jsx(_p,{isOpen:!0,onClose:Qe,motherId:g.id}),b==="abortion"&&c.jsx(bD,{animal:g,onCancel:Qe,onSaveSuccess:Qe}),b==="decommission"&&A&&c.jsx(j_,{isOpen:b==="decommission",animal:g,onCancel:Qe,onConfirm:Ot,reason:A}),b==="service"&&c.jsx(SD,{isOpen:!0,onClose:Qe,onSave:lt,animal:g}),b==="milkWeighingAction"&&c.jsx(vD,{isOpen:!0,animal:g,onClose:Qe,onLogToSession:ft=>ht(ft,"leche"),onStartNewSession:()=>dt("leche"),onStartDrying:$t,onSetDry:on}),b==="bodyWeighingAction"&&c.jsx(yD,{isOpen:!0,animal:g,onClose:Qe,onLogToSession:ft=>ht(ft,"corporal"),onStartNewSession:()=>dt("corporal"),onSetReadyForMating:It}),b==="logSimpleMilk"&&D&&c.jsx(sn,{isOpen:!0,onClose:Qe,title:`Añadir Pesaje Leche: ${ar(g)}`,children:c.jsx(Vg,{animalId:g.id,weightType:"leche",onSaveSuccess:Qe,onCancel:Qe,sessionDate:D})}),b==="logSimpleBody"&&D&&c.jsx(sn,{isOpen:!0,onClose:Qe,title:`Añadir Peso Corporal: ${ar(g)}`,children:c.jsx(Vg,{animalId:g.id,weightType:"corporal",onSaveSuccess:Qe,onCancel:Qe,sessionDate:D})}),(b==="newMilkSession"||b==="newBodySession")&&c.jsx(wD,{weightType:O,onBack:Qe,onAnimalsSelected:tn}),b==="bulkWeighing"&&c.jsx(sn,{isOpen:!0,onClose:Qe,title:`Carga Masiva - ${O==="leche"?"Leche":"Corporal"}`,size:"fullscreen",children:c.jsx(xD,{weightType:O,animalsToWeigh:N,onSaveSuccess:Zt,onCancel:Qe})}),c.jsx(yv,{isOpen:Ce,onClose:()=>fe(!1),onConfirm:yt,title:`Eliminar ${ar(g)} Permanentemente`,message:"Esta acción borrará el registro del animal de la base de datos para siempre y no se puede deshacer. ¿Continuar?"})]})]})}const vze=({isOpen:t,onClose:e,editingLotId:n})=>{const{lots:r,addLot:i}=Kt(),[a,s]=I.useState(""),[o,l]=I.useState(""),[u,d]=I.useState(""),f=async()=>{if(a.trim()===""){d("El nombre del lote no puede estar vacío.");return}try{await i({name:a,parentLotId:o||void 0}),p()}catch(g){d(g.message||"No se pudo guardar el lote."),console.error(g)}},p=()=>{s(""),l(""),d(""),e()},h=r.filter(g=>!g.parentLotId&&g.id!==n);return c.jsx(sn,{isOpen:t,onClose:p,title:"Crear Nuevo Lote",children:c.jsxs("form",{onSubmit:g=>{g.preventDefault(),f()},className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la nueva ubicación o lote en tu finca."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"lotName",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Lote"}),c.jsx("input",{id:"lotName",type:"text",value:a,onChange:g=>s(g.target.value),placeholder:"Ej: Galpón 1",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"parentLot",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Sub-lote de (Opcional)"}),c.jsxs("select",{id:"parentLot",value:o,onChange:g=>l(g.target.value),className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0",children:[c.jsx("option",{value:"",children:"Ninguno (Es un Lote Principal)"}),h.map(g=>c.jsx("option",{value:g.id,children:g.name},g.id))]})]}),u&&c.jsx("p",{className:"text-sm text-brand-red text-center",children:u}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx("button",{type:"button",onClick:p,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Lote"})]})]})})},yze=({isOpen:t,onClose:e})=>{const{addOrigin:n}=Kt(),[r,i]=I.useState(""),[a,s]=I.useState(""),o=async()=>{if(r.trim()===""){s("El nombre del origen no puede estar vacío.");return}try{await n(r),i(""),s(""),e()}catch(u){s("No se pudo guardar el origen."),console.error(u)}},l=()=>{i(""),s(""),e()};return c.jsx(sn,{isOpen:t,onClose:l,title:"Crear Nuevo Origen",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la ganadería o finca de origen."}),c.jsx("div",{children:c.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"Ej: Agropecuaria La Bendición",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})}),a&&c.jsx("p",{className:"text-sm text-brand-red",children:a}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx("button",{onClick:l,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:o,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Origen"})]})]})})},bze=t=>{const{events:e}=Kt();return I.useMemo(()=>t?e.filter(a=>a.animalId===t).sort((a,s)=>new Date(s.date).getTime()-new Date(a.date).getTime()):[],[e,t])},xze=({animalId:t,birthDate:e,onSave:n,onCancel:r})=>{const[i,a]=I.useState(new Date().toISOString().split("T")[0]),[s,o]=I.useState(""),[l,u]=I.useState(null),[d,f]=I.useState(!1),{animals:p}=Kt(),h=I.useMemo(()=>p.find(v=>v.id===t),[p,t]),g=h!=null&&h.name?String(h.name).toUpperCase().trim():"",m=async v=>{v.preventDefault(),u(null),f(!0);const y=parseFloat(s);if(!i||!s||isNaN(y)||y<=0){u("Por favor, introduce una fecha y un peso válidos."),f(!1);return}if(new Date(i)<new Date(e)){u("La fecha de destete no puede ser anterior a la fecha de nacimiento."),f(!1);return}try{await n({weaningDate:i,weaningWeight:y})}catch(b){u("No se pudo guardar el registro de destete."),console.error(b)}finally{f(!1)}};return c.jsxs("form",{onSubmit:m,className:"space-y-4",children:[c.jsxs("div",{className:"text-center mb-2",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:t.toUpperCase()}),g&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:g})]}),c.jsx("p",{className:"text-sm text-zinc-400 text-center -mt-2",children:"Registra la fecha y el peso al momento del destete."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weaningDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Destete"}),c.jsx("input",{id:"weaningDate",type:"date",value:i,onChange:v=>a(v.target.value),className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0,max:new Date().toISOString().split("T")[0]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weaningWeight",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso al Destete (Kg)"}),c.jsx("input",{id:"weaningWeight",type:"number",step:"0.1",value:s,onChange:v=>o(v.target.value),placeholder:"Ej: 15.5",className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),l&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(dr,{size:18}),c.jsx("span",{children:l})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsxs("button",{type:"submit",disabled:d,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[d&&c.jsx(jc,{size:18,className:"animate-spin"}),d?"Guardando...":"Guardar Destete"]})]})]})},wze=t=>{const{animals:e}=Kt(),n=I.useMemo(()=>{const i=new Map;return e.forEach(a=>i.set(a.id,a)),i},[e]);return I.useMemo(()=>{const i=(s,o)=>{if(!s||o>3)return;const l=n.get(s);if(!l)return;const u=i(l.fatherId,o+1),d=i(l.motherId,o+1);return{animal:l,sire:u,dam:d}};return i(t,0)||null},[t,n])},po=({animal:t,onClick:e})=>{const n="bg-zinc-800/80 p-1.5 rounded-lg border border-zinc-700/80 w-44 text-left shadow-md transition-colors text-xs px-2";if(!t)return c.jsxs("div",{className:`${n} bg-zinc-900/50 border-dashed text-center`,children:[" ",c.jsx("p",{className:"font-semibold text-zinc-500",children:"Desconocido"})]});const r=t.sex==="Hembra"?"text-pink-400":"text-blue-400",i=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>e(t.id),className:`${n} hover:border-brand-orange`,children:[c.jsx("p",{className:`font-mono font-semibold text-xs truncate ${r}`,children:t.id.toUpperCase()}),i&&c.jsx("p",{className:"text-[10px] text-zinc-300 truncate",children:i}),c.jsx("p",{className:"text-zinc-400 text-[10px]",children:t.sex})]})},Sze=({rootNode:t,onAncestorClick:e})=>{var l,u,d,f,p,h,g,m,v,y,b,S,A,C,D,j,N,P,O,T,M,L,V,K,Z,Y,H,ee,le,se,$,X,te,oe;if(!t)return c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay datos de genealogía suficientes para mostrar el pedigrí."});const n="border-zinc-600",r=c.jsx("div",{className:`w-3 border-t-2 ${n}`}),i=c.jsx("div",{className:`h-20 border-r-2 ${n}`}),a=c.jsx("div",{className:`h-10 border-r-2 ${n}`}),s=c.jsx("div",{className:`h-6 border-r-2 ${n}`}),o=t.animal.name?String(t.animal.name).toUpperCase().trim():"";return c.jsxs("div",{className:"flex items-center justify-center p-4 overflow-x-auto min-w-max",children:[c.jsx("div",{className:"flex flex-col items-center justify-center",children:c.jsxs("div",{className:"bg-zinc-800/80 p-1.5 rounded-lg border border-zinc-700/80 w-44 text-left shadow-md text-xs px-2",children:[" ",c.jsx("p",{className:`font-mono font-semibold text-xs truncate ${t.animal.sex==="Hembra"?"text-pink-400":"text-blue-400"}`,children:t.animal.id.toUpperCase()}),o&&c.jsx("p",{className:"text-[10px] text-zinc-300 truncate",children:o}),c.jsx("p",{className:"text-zinc-400 text-[10px]",children:t.animal.sex})]})}),c.jsxs("div",{className:"flex flex-col items-center",children:[r,i,r]}),c.jsxs("div",{className:"flex flex-col items-center justify-around space-y-4",children:[c.jsx(po,{animal:(l=t.sire)==null?void 0:l.animal,onClick:e}),c.jsx(po,{animal:(u=t.dam)==null?void 0:u.animal,onClick:e})]}),c.jsxs("div",{className:"flex flex-col items-center justify-around space-y-4",children:[c.jsxs("div",{className:"flex items-center",children:[" ",r," ",a," ",r," "]}),c.jsxs("div",{className:"flex items-center",children:[" ",r," ",a," ",r," "]})]}),c.jsxs("div",{className:"flex flex-col items-center justify-between gap-[20px]",children:[c.jsx(po,{animal:(f=(d=t.sire)==null?void 0:d.sire)==null?void 0:f.animal,onClick:e}),c.jsx(po,{animal:(h=(p=t.sire)==null?void 0:p.dam)==null?void 0:h.animal,onClick:e}),c.jsx("div",{className:"h-[6px]"}),c.jsx(po,{animal:(m=(g=t.dam)==null?void 0:g.sire)==null?void 0:m.animal,onClick:e}),c.jsx(po,{animal:(y=(v=t.dam)==null?void 0:v.dam)==null?void 0:y.animal,onClick:e})]}),c.jsxs("div",{className:"flex flex-col items-center justify-between gap-[20px]",children:[c.jsxs("div",{className:"flex items-center",children:[" ",r," ",s," ",r," "]}),c.jsxs("div",{className:"flex items-center",children:[" ",r," ",s," ",r," "]}),c.jsx("div",{className:"h-[6px]"}),c.jsxs("div",{className:"flex items-center",children:[" ",r," ",s," ",r," "]}),c.jsxs("div",{className:"flex items-center",children:[" ",r," ",s," ",r," "]})]}),c.jsxs("div",{className:"flex flex-col items-center justify-between gap-[6px]",children:[c.jsx(po,{animal:(A=(S=(b=t.sire)==null?void 0:b.sire)==null?void 0:S.sire)==null?void 0:A.animal,onClick:e}),c.jsx(po,{animal:(j=(D=(C=t.sire)==null?void 0:C.sire)==null?void 0:D.dam)==null?void 0:j.animal,onClick:e}),c.jsx("div",{className:"h-[2px]"}),c.jsx(po,{animal:(O=(P=(N=t.sire)==null?void 0:N.dam)==null?void 0:P.sire)==null?void 0:O.animal,onClick:e}),c.jsx(po,{animal:(L=(M=(T=t.sire)==null?void 0:T.dam)==null?void 0:M.dam)==null?void 0:L.animal,onClick:e}),c.jsx("div",{className:"h-[8px]"}),c.jsx(po,{animal:(Z=(K=(V=t.dam)==null?void 0:V.sire)==null?void 0:K.sire)==null?void 0:Z.animal,onClick:e}),c.jsx(po,{animal:(ee=(H=(Y=t.dam)==null?void 0:Y.sire)==null?void 0:H.dam)==null?void 0:ee.animal,onClick:e}),c.jsx("div",{className:"h-[2px]"}),c.jsx(po,{animal:($=(se=(le=t.dam)==null?void 0:le.dam)==null?void 0:se.sire)==null?void 0:$.animal,onClick:e}),c.jsx(po,{animal:(oe=(te=(X=t.dam)==null?void 0:X.dam)==null?void 0:te.dam)==null?void 0:oe.animal,onClick:e})]})]})},_ze=({isOpen:t,onClose:e,animalId:n,navigateTo:r})=>{const i=wze(n),{animals:a}=Kt(),s=a.find(u=>u.id===n),o=()=>{const u=document.querySelector(".pedigree-modal-header"),d=document.querySelector(".pedigree-modal-footer");u&&(u.style.display="none"),d&&(d.style.display="none"),window.print(),u&&(u.style.display=""),d&&(d.style.display="")},l=()=>{const u=document.querySelector(".pedigree-modal-header"),d=document.querySelector(".pedigree-modal-footer");u&&(u.style.display=""),d&&(d.style.display=""),e()};return c.jsxs(sn,{isOpen:t,onClose:l,title:`Genealogía de ${ar(s)}`,size:"large",children:[c.jsxs("div",{className:"pedigree-modal-header mb-4",children:[" "," "]}),c.jsxs("div",{className:"pedigree-chart-container",children:[" ",c.jsx(Sze,{rootNode:i,onAncestorClick:u=>{e(),setTimeout(()=>r({name:"rebano-profile",animalId:u}),100)}})]}),c.jsxs("footer",{className:"pedigree-modal-footer mt-6 pt-4 border-t border-brand-border flex justify-end gap-3",children:[c.jsxs("button",{onClick:o,className:"flex items-center gap-2 bg-zinc-600 hover:bg-zinc-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:[c.jsx(Uce,{size:18})," Imprimir"]}),c.jsx("button",{onClick:l,className:"bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg",children:"Cerrar"})]}),c.jsx("style",{children:`
                    @media print {
                        body * {
                            visibility: hidden;
                        }
                        .pedigree-chart-container, .pedigree-chart-container * {
                            visibility: visible;
                        }
                        .pedigree-chart-container {
                            position: absolute;
                            left: 0;
                            top: 0;
                            width: 100%; /* Ajusta según necesidad */
                        }
                        /* Oculta los botones dentro del gráfico si los hubiera */
                        .pedigree-chart-container button {
                            display: none;
                        }
                         /* Ajusta el tamaño de fuente si es necesario */
                        .pedigree-chart-container p {
                           font-size: 10px; /* Ejemplo */
                        }
                    }
                `})]})},BF=be.forwardRef(({className:t,...e},n)=>c.jsx("input",{ref:n,...e,className:`w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange disabled:opacity-50 disabled:bg-brand-dark/50 ${t}`})),nQ=be.forwardRef(({children:t,...e},n)=>c.jsxs("div",{className:"relative w-full",children:[c.jsx("select",{ref:n,...e,className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white appearance-none focus:outline-none focus:ring-2 focus:ring-brand-orange",children:t}),c.jsx(G2,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"})]})),RC=({title:t,children:e})=>c.jsxs("div",{className:"bg-brand-glass rounded-2xl border border-brand-border p-4 space-y-4",children:[c.jsx("h2",{className:"text-zinc-400 font-semibold text-sm uppercase tracking-wide",children:t}),e]}),Aze=({labelOn:t,labelOff:e,value:n,onChange:r})=>c.jsxs("div",{onClick:()=>r(!n),className:"w-full bg-brand-dark rounded-xl p-1 flex cursor-pointer",children:[c.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"bg-zinc-700 text-white":"text-zinc-400"}`,children:t}),c.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"text-zinc-400":"bg-zinc-700 text-white"}`,children:e})]}),Cze=({onClose:t,onSelectDate:e,currentValue:n})=>c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm animate-fade-in",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-ios-modal-bg rounded-t-2xl p-4 shadow-lg animate-slide-up",onClick:r=>r.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 1rem)"},children:[c.jsx("div",{onClick:t,className:"w-16 h-1.5 bg-zinc-700 rounded-full mx-auto mb-4 cursor-pointer"}),c.jsx("div",{className:"flex justify-center [&_.rdp]:bg-transparent [&_.rdp]:text-white [&_.rdp-caption_select]:bg-brand-glass [&_.rdp-caption_select]:border-brand-border [&_.rdp-caption_select]:text-white [&_.rdp-caption_select]:rounded-lg [&_.rdp-day_selected]:bg-brand-orange [&_.rdp-day_selected]:text-white [&_.rdp-day_today]:text-brand-orange [&_.rdp-nav_button]:text-zinc-400 [&_.rdp-head_cell]:text-zinc-500 [&_.rdp-day]:text-zinc-200 [&_.rdp-day_outside]:text-zinc-600",children:c.jsx(Sp,{mode:"single",selected:n,onSelect:e,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear(),defaultMonth:n,locale:Gb})})]})}),jze=({onClose:t,onInput:e,currentValue:n})=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=["1","2","3","4","5","6","7","8","9","-","0","DEL"],a=o=>{if(o==="DEL"){s();return}o&&n.length<15&&e(n+o)},s=()=>{e(n.slice(0,-1))};return c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-[#333333] p-2 space-y-2",onClick:o=>o.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 0.5rem)"},children:[c.jsxs("div",{className:"flex flex-nowrap space-x-1.5 overflow-x-auto py-2 alphabet-scroller",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[c.jsx("style",{children:".alphabet-scroller::-webkit-scrollbar { display: none; }"}),r.map(o=>c.jsx("button",{onClick:()=>a(o),className:"flex-shrink-0 w-10 h-10 bg-[#555555] text-white rounded-md text-lg font-medium active:bg-zinc-500",children:o},o))]}),c.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:i.map(o=>c.jsx("button",{onClick:()=>a(o),className:"h-12 bg-[#555555] text-white rounded-md text-xl font-medium active:bg-zinc-500 flex items-center justify-center",children:o==="DEL"?c.jsx(hS,{size:20}):o},o))}),c.jsx("button",{onClick:t,className:"h-12 w-full bg-blue-600 text-white rounded-md text-lg font-semibold active:bg-blue-700",children:"Done"})]})})},Eze=({onClose:t,onInput:e,currentValue:n})=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=["1","2","3","4","5","6","7","8","9","%","0","DEL"],a=4,s=l=>{var m,v,y;if(l==="DEL"){o();return}if(n.length>=30)return;const u=n.split(" ").filter(b=>b!=="");let d=/[%A-Z]$/.test(n),f=n===""||n.endsWith(" ");if(u.length>=a&&f&&/\d/.test(l))return;let p=n;if(d&&/\d/.test(l))if(u.length<a)p+=" ";else return;if(l==="%"&&!/\d$/.test(p.slice(-1))&&!/[A-Z]$/.test(p.slice(-1))||l==="%"&&/%$/.test(p)||/[A-Z]/.test(l)&&!f&&!/\d$/.test(p.slice(-1))&&!/%$/.test(p.slice(-1))||/\d/.test(l)&&/[A-Z]$/.test(p))return;const h=((v=(m=p.split(" ").pop())==null?void 0:m.match(/\d+$/))==null?void 0:v[0])||"";if(!(l==="0"&&(f||/[%A-Z ]$/.test(p.slice(-1)))&&h.length===0)){if(l==="0"&&h==="0")return;/\d/.test(l)&&h==="0"&&(p=p.slice(0,-1))}const g=(y=(h+l).match(/\d+/))==null?void 0:y[0];g&&parseInt(g,10)>100||e(p+l)},o=()=>{e(n.slice(0,-1))};return c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-[#333333] p-2 space-y-2",onClick:l=>l.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 0.5rem)"},children:[c.jsxs("div",{className:"flex flex-nowrap space-x-1.5 overflow-x-auto py-2 alphabet-scroller",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[c.jsx("style",{children:".alphabet-scroller::-webkit-scrollbar { display: none; }"}),r.map(l=>c.jsx("button",{onClick:()=>s(l),className:"flex-shrink-0 w-10 h-10 bg-[#555555] text-white rounded-md text-lg font-medium active:bg-zinc-500",children:l},l))]}),c.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:i.map(l=>c.jsx("button",{onClick:()=>s(l),className:`h-12 bg-[#555555] text-white rounded-md text-xl font-medium active:bg-zinc-500 flex items-center justify-center ${l==="%"?"text-brand-orange":""}`,children:l==="DEL"?c.jsx(hS,{size:20}):l},l))}),c.jsx("button",{onClick:t,className:"h-12 w-full bg-blue-600 text-white rounded-md text-lg font-semibold active:bg-blue-700",children:"Done"})]})})},Nze=({type:t,onClose:e,onSave:n})=>{const{animals:r,fathers:i}=Kt(),[a,s]=I.useState("Referencia"),[o,l]=I.useState(""),[u,d]=I.useState(""),[f,p]=I.useState(""),[h,g]=I.useState(""),[m,v]=I.useState(""),[y,b]=I.useState(null),[S,A]=I.useState(!1),[C,D]=I.useState(!1),[j,N]=I.useState(!1),P=(M,L)=>{if(!M||!L)return"Indefinido";const V=new Date,K=new Date(M+"T00:00:00");if(isNaN(K.getTime()))return"Indefinido";const Z=(V.getTime()-K.getTime())/(1e3*60*60*24);return L==="Hembra"?Z<=60?"Cabrita":Z<=365?"Cabritona":"Cabra Adulta":Z<=60?"Cabrito":Z<=365?"Macho de Levante":"Macho Cabrío"};I.useEffect(()=>{v(nD(h))},[h]);const O=async()=>{if(b(null),a==="Activo"&&!o){b("El ID es obligatorio si el estado es Activo.");return}const M=o.toUpperCase()||`REF-${Date.now()}`,L=new Set([...r.map(Z=>Z.id.toLowerCase()),...i.map(Z=>Z.id.toLowerCase())]);if(o&&L.has(M.toLowerCase())){b("Este ID ya existe en la base de datos (rebaño o referencias).");return}const V=t==="mother"?"Hembra":"Macho",K={id:M,name:u.toUpperCase()||void 0,birthDate:f||"N/A",sex:V,isReference:a==="Referencia",status:"Activo",lifecycleStage:f?P(f,V):V==="Hembra"?"Cabra Adulta":"Macho Cabrío",racialComposition:h||void 0,breed:m||void 0,location:"Referencia",reproductiveStatus:V==="Hembra"?"Vacía":"No Aplica",createdAt:new Date().getTime(),lastWeighing:null};try{n(K)}catch(Z){b(Z.message||"Error al preparar datos del animal."),console.error("Error creating quick parent object:",Z)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm animate-fade-in flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"w-full max-w-md bg-ios-modal-bg rounded-2xl shadow-lg animate-slide-up flex flex-col max-h-[90vh]",onClick:M=>M.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[c.jsx("div",{className:"w-10"}),c.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Agregar ",t==="mother"?"Madre":"Padre"," Rápido"]}),c.jsx("button",{onClick:e,className:"p-2 -mr-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50",children:c.jsx(Ic,{size:20})})]}),c.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto",children:[c.jsx(RC,{title:"Categoría",children:c.jsx(Aze,{labelOn:"Activo",labelOff:"Referencia",value:a==="Activo",onChange:M=>s(M?"Activo":"Referencia")})}),c.jsxs(RC,{title:"Identificación",children:[c.jsx("input",{type:"text",value:o,onClick:()=>A(!0),readOnly:!0,placeholder:a==="Activo"?"ID (Obligatorio)":"ID (Opcional)",className:`w-full bg-brand-glass border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 cursor-pointer font-mono ${y&&y.includes("ID ya existe")?"border-brand-red ring-brand-red":"border-brand-border focus:ring-brand-orange"}`}),c.jsx(BF,{value:u,onChange:M=>d(M.target.value.toUpperCase()),placeholder:"Nombre (Opcional)"}),c.jsxs("button",{type:"button",onClick:()=>D(!0),className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-left flex justify-between items-center",children:[c.jsx("span",{className:f?"text-white":"text-zinc-500",children:f?new Date(f+"T00:00:00Z").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}):"Fecha Nacimiento (Opcional)"}),c.jsx(so,{className:"text-zinc-400",size:20})]})]}),c.jsxs(RC,{title:"Raza",children:[c.jsx("input",{type:"text",value:h,onClick:()=>N(!0),readOnly:!0,placeholder:"Composición Racial (Opcional)",className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange cursor-pointer"}),c.jsx(BF,{value:m,disabled:!0,readOnly:!0,placeholder:"Raza (Auto-calculada)"})]}),y&&c.jsx("p",{className:"text-sm text-brand-red text-center",children:y})]}),c.jsx("footer",{className:"p-4 border-t border-brand-border flex-shrink-0",children:c.jsx("button",{onClick:O,className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar"})})]})}),S&&c.jsx(jze,{onClose:()=>A(!1),onInput:M=>l(M.toUpperCase()),currentValue:o}),C&&c.jsx(Cze,{onClose:()=>D(!1),onSelectDate:M=>{M&&p(M.toISOString().split("T")[0]),D(!1)},currentValue:f?new Date(f+"T00:00:00Z"):new Date}),j&&c.jsx(Eze,{onClose:()=>N(!1),onInput:g,currentValue:h}),c.jsx("style",{children:" .rdp { --rdp-cell-size: 40px; --rdp-accent-color: #FF9500; --rdp-background-color: transparent; --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: transparent; --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF; margin: 1em auto; } .rdp-caption_label { color: #FFF; font-weight: bold;} .rdp-nav_button { color: #FF9500; } .rdp-head_cell { color: #8e8e93; font-size: 0.8em; } .rdp-day { color: #FFF;} .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; } .rdp-day_today { font-weight: bold; color: #FF9500; } .rdp-day_disabled { color: #505054; } .rdp-day_outside { color: #505054; } .rdp-caption_dropdowns { display: flex; gap: 10px; } .rdp-dropdown { background-color: #333; border: 1px solid #555; color: #FFF; padding: 4px 8px; border-radius: 6px; } "})]})},Du=({label:t,value:e,isEditing:n,children:r})=>c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium text-zinc-400",children:t}),n&&r?r:c.jsx("dd",{className:`mt-1 text-lg font-semibold text-white truncate ${t==="ID"?"font-mono":""}`,children:e||"N/A"})]}),Pze=({onOpenModal:t})=>c.jsx("div",{className:"text-center p-4 min-h-[150px] flex flex-col justify-center items-center",children:c.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 bg-brand-blue hover:bg-blue-700 text-white font-bold py-3 px-5 rounded-lg transition-colors",children:[c.jsx(RW,{size:20})," Ver Genealogía Completa"]})}),kze={Nacimiento:{icon:Rce,color:"bg-green-500/20 text-brand-green"},Registro:{icon:pS,color:"bg-blue-500/20 text-brand-blue"},Parto:{icon:Wl,color:"bg-pink-500/20 text-pink-400"},Aborto:{icon:Sf,color:"bg-yellow-500/20 text-yellow-400"},Movimiento:{icon:fT,color:"bg-blue-500/20 text-brand-blue"},"Cambio de Estado":{icon:Yce,color:"bg-purple-500/20 text-purple-400"},"Pesaje Lechero":{icon:WW,color:"bg-gray-500/20 text-gray-300"},"Pesaje Corporal":{icon:If,color:"bg-green-500/20 text-brand-green"},Servicio:{icon:mS,color:"bg-pink-500/20 text-pink-400"},Tratamiento:{icon:hp,color:"bg-red-500/20 text-brand-red"},Diagnóstico:{icon:Ga,color:"bg-teal-500/20 text-teal-300"}},Tze=({animal:t})=>{const e=bze(t==null?void 0:t.id);return t?!e||e.length===0?c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene eventos registrados."}):c.jsx("div",{className:"space-y-3",children:e.map(n=>{const r=kze[n.type]||{icon:pS,color:"bg-gray-500/20 text-gray-300"},i=r.icon;let a="Fecha desconocida",s="";if(n.type==="Registro"&&t.createdAt)a=new Date(t.createdAt).toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}),s="Registrado el: ";else if(n.date&&n.date!=="N/A")try{a=new Date(n.date+"T00:00:00Z").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}catch(o){console.error("Error formatting event date:",n.date,o),a=n.date}return c.jsxs("div",{className:"flex items-start gap-4 p-3 bg-black/20 rounded-lg",children:[c.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${r.color}`,children:c.jsx(i,{size:20})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:n.type}),c.jsx("p",{className:"text-sm text-zinc-300",children:n.details}),c.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:[s,a,n.lotName&&` | Lote: ${n.lotName}`]})]})]},n.id)})}):c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Cargando datos del animal..."})},Dze=({offspring:t,navigateTo:e})=>t.length===0?c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene descendencia registrada."}):c.jsx("div",{className:"space-y-2",children:t.map(n=>{const r=n.name?String(n.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>e({name:"rebano-profile",animalId:n.id}),className:"w-full text-left p-3 bg-black/20 hover:bg-zinc-800/60 rounded-lg transition-colors flex justify-between items-center group",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:n.id.toUpperCase()}),r&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:r}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[n.sex," | ",Mc(n.birthDate)," | Lote: ",n.location||"N/A"]})})]}),c.jsx(qi,{className:"text-zinc-600 group-hover:text-white transition-colors flex-shrink-0"})]},n.id)})}),Ize=({animal:t,isEditing:e,editedData:n,setEditedData:r,origins:i,onAddOriginClick:a,onLocationClick:s})=>{const o=(u,d)=>{r(f=>({...f,[u]:d}))},l=Mc(t.birthDate);return c.jsxs("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-6",children:[c.jsx(Du,{label:"ID",value:t.id}),c.jsx(Du,{label:"Sexo",value:t.sex}),c.jsx(Du,{label:"Fecha Nacimiento",value:t.birthDate!=="N/A"?new Date(t.birthDate+"T00:00:00Z").toLocaleDateString("es-VE",{timeZone:"UTC"}):"N/A",isEditing:e,children:c.jsx("input",{type:"date",value:n.birthDate==="N/A"?"":n.birthDate||"",onChange:u=>o("birthDate",u.target.value||"N/A"),className:"w-full bg-zinc-700 p-2 rounded-md mt-1 text-white"})}),c.jsx(Du,{label:"Edad",value:l}),c.jsx(Du,{label:"Ubicación / Lote",children:!e&&c.jsx("dd",{className:"mt-1 text-lg",children:c.jsx("button",{onClick:s,className:"font-semibold text-brand-orange hover:underline text-left",children:t.location||"Sin Asignar"})})}),c.jsx(Du,{label:"Categoría",value:t.lifecycleStage}),c.jsx(Du,{label:"Origen",value:t.origin,isEditing:e,children:c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsxs(nQ,{value:n.origin||"",onChange:u=>o("origin",u.target.value),children:[c.jsx("option",{value:"",children:"Seleccionar Origen..."}),c.jsx("option",{value:"Finca Masparrito",children:"Finca Masparrito"}),i.map(u=>c.jsx("option",{value:u.name,children:u.name},u.id))]}),c.jsx("button",{type:"button",onClick:a,className:"p-2 bg-brand-orange hover:bg-orange-600 text-white rounded-md",children:c.jsx(ol,{size:20})})]})}),t.weaningDate&&c.jsx(Du,{label:"Fecha de Destete",value:new Date(t.weaningDate+"T00:00:00Z").toLocaleDateString("es-VE",{timeZone:"UTC"})}),t.weaningWeight&&c.jsx(Du,{label:"Peso al Destete",value:`${t.weaningWeight} Kg`})]})};function Oze({animalId:t,onBack:e,navigateTo:n}){const{animals:r,lots:i,origins:a,parturitions:s,updateAnimal:o,deleteAnimalPermanently:l,fathers:u,addAnimal:d,appConfig:f}=Kt(),[p,h]=I.useState("main"),[g,m]=I.useState(!1),[v,y]=I.useState({}),[b,S]=I.useState("idle"),[A,C]=I.useState(!1),[D,j]=I.useState(!1),[N,P]=I.useState(!1),[O,T]=I.useState(!1),[M,L]=I.useState(""),[V,K]=I.useState(!1),[Z,Y]=I.useState(null),[H,ee]=I.useState(!1),[le,se]=I.useState(!1),[$,X]=I.useState(!1),[te,oe]=I.useState(!1),[me,_e]=I.useState(!1),[Ce,fe]=I.useState(!1),[xe,Se]=I.useState(null),ie=I.useMemo(()=>r.find(nt=>nt.id===t),[r,t]),He=I.useMemo(()=>ie?ie.sex==="Hembra"?r.filter(nt=>nt.motherId===ie.id).sort((nt,Bt)=>new Date(Bt.birthDate).getTime()-new Date(nt.birthDate).getTime()):ie.sex==="Macho"?r.filter(nt=>nt.fatherId===ie.id).sort((nt,Bt)=>new Date(Bt.birthDate).getTime()-new Date(nt.birthDate).getTime()):[]:[],[r,ie]),Fe=I.useMemo(()=>r.filter(nt=>nt.sex==="Hembra"),[r]),he=I.useMemo(()=>{const nt=r.filter(ft=>ft.sex==="Macho"),Bt=u.map(ft=>({id:ft.id,name:ft.name,sex:"Macho",status:"Activo",isReference:!0,birthDate:"N/A",lifecycleStage:"Macho Cabrío",location:"Referencia",reproductiveStatus:"No Aplica",createdAt:0,lastWeighing:null}));return[...nt,...Bt]},[r,u]),Ye=I.useMemo(()=>ie?Bf(ie,s):"",[ie,s]),mt=I.useMemo(()=>{if(!ie||ie.weaningDate||ie.isReference||ie.status!=="Activo")return!1;const nt=Ye;return nt!=="Cabrita"&&nt!=="Cabrito"?!1:Sc(ie.birthDate)>f.edadDesteteDias},[ie,Ye,f.edadDesteteDias]),vt=(ie==null?void 0:ie.breedingFailures)||0,Qe=vt>=2||mt?"border-brand-red ring-2 ring-brand-red/80":"border-brand-border";I.useEffect(()=>{ie&&(g&&y({birthDate:ie.birthDate,origin:ie.origin,fatherId:ie.fatherId,motherId:ie.motherId}),L(ie.location||""))},[ie,g]);const Ot=async()=>{if(ie){S("saving");try{await o(ie.id,v),S("success"),setTimeout(()=>{m(!1),S("idle")},1500)}catch(nt){console.error("Error al actualizar:",nt),S("idle")}}},ht=()=>{m(!1),y({})},dt=async()=>{if(ie)try{await o(ie.id,{location:M}),T(!1)}catch(nt){console.error("Error al actualizar ubicación:",nt)}},It=async nt=>{if(!ie||!Z)return;const Bt={status:Z,isReference:!0,endDate:nt.date};Z==="Venta"&&Object.assign(Bt,{salePrice:nt.salePrice,saleBuyer:nt.saleBuyer,salePurpose:nt.salePurpose}),Z==="Muerte"&&(Bt.deathReason=nt.deathReason),Z==="Descarte"&&Object.assign(Bt,{cullReason:nt.cullReason,cullReasonDetails:nt.cullReasonDetails}),await o(ie.id,Bt),Y(null)},tn=async()=>{ie&&await o(ie.id,{isReference:!1,status:"Activo",endDate:void 0})},Zt=async()=>{ie&&(await l(ie.id),e())},$t=async nt=>{ie&&(await o(ie.id,{weaningDate:nt.weaningDate,weaningWeight:nt.weaningWeight}),X(!1))},on=async nt=>{try{await d(nt),xe==="father"?y(Bt=>({...Bt,fatherId:nt.id})):xe==="mother"&&y(Bt=>({...Bt,motherId:nt.id}))}catch(Bt){console.error("Error saving quick parent:",Bt)}finally{Se(null)}},lt=[{label:"Por Venta",icon:No,onClick:()=>Y("Venta")},{label:"Por Muerte",icon:Sf,onClick:()=>Y("Muerte"),color:"text-brand-red"},{label:"Por Descarte",icon:fS,onClick:()=>Y("Descarte"),color:"text-brand-red"}],bt=[{label:"Reintegrar a Activos",icon:KW,onClick:tn},{label:"Eliminar Permanentemente",icon:Gl,onClick:()=>se(!0),color:"text-brand-red"}];if(!ie)return c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]});const yt=ie.name?ie.name.toUpperCase().trim():"";return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[c.jsxs("header",{className:`bg-brand-glass backdrop-blur-xl rounded-b-2xl p-4 border-b border-x sticky top-0 z-10 transition-all ${Qe}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center min-w-0",children:[c.jsx("h1",{className:"text-2xl font-mono font-bold tracking-tight text-white truncate",children:ie.id.toUpperCase()}),yt&&c.jsx("p",{className:"text-sm text-zinc-300 truncate",children:yt})]}),c.jsxs("div",{className:"w-8 flex items-center justify-end gap-1",children:[mt&&c.jsx("span",{title:`Destete atrasado (Meta: ${f.edadDesteteDias} días)`,children:c.jsx(dr,{className:"text-brand-red",size:20})}),vt===1&&!mt&&c.jsx("span",{title:"1 fallo reproductivo reportado",children:c.jsx(dr,{className:"text-yellow-400",size:20})}),vt>=2&&!mt&&c.jsx("span",{title:`${vt} fallos reproductivos reportados`,children:c.jsx(dr,{className:"text-brand-red",size:20})})]})]}),c.jsx("p",{className:"text-center text-brand-orange font-semibold text-sm -mt-1 mb-3 uppercase tracking-wider",children:ie.isReference?"REFERENCIA":ie.status!=="Activo"?ie.status:ie.location||"Sin Asignar"}),mt&&c.jsxs("div",{className:"mb-3 p-3 bg-brand-red/20 border border-brand-red rounded-lg text-center",children:[c.jsx("p",{className:"text-red-300 text-sm font-semibold",children:"Destete Atrasado"}),c.jsxs("p",{className:"text-red-400 text-xs",children:["Este animal tiene ",Sc(ie.birthDate)," días (Meta: ",f.edadDesteteDias," días) y no ha sido destetado."]})]}),c.jsxs("div",{className:"flex justify-around bg-black/20 rounded-xl p-1",children:[ie.sex==="Hembra"&&c.jsxs(c.Fragment,{children:[" ",c.jsxs("button",{onClick:()=>n({name:"lactation-profile",animalId:ie.id}),className:"flex flex-col items-center p-2 text-blue-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(wf,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Leche"})]})," ",c.jsxs("button",{onClick:()=>P(!0),disabled:ie.isReference||ie.status!=="Activo",className:"flex flex-col items-center p-2 text-pink-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[c.jsx(Wl,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Parto"})]})," "]}),(Ye==="Cabrita"||Ye==="Cabrito")&&!ie.weaningDate&&!ie.isReference&&ie.status==="Activo"&&c.jsxs("button",{onClick:()=>X(!0),className:"flex flex-col items-center p-2 text-yellow-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(vce,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Destetar"})]}),c.jsxs("button",{onClick:()=>n({name:"growth-profile",animalId:ie.id}),className:"flex flex-col items-center p-2 text-brand-green hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(If,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Peso"})]}),c.jsxs("button",{onClick:()=>alert("Función en desarrollo"),disabled:ie.isReference||ie.status!=="Activo",className:"flex flex-col items-center p-2 text-teal-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[c.jsx(hp,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Sanidad"})]}),c.jsxs("button",{onClick:()=>ie.isReference?ee(!0):T(!0),className:"flex flex-col items-center p-2 text-brand-blue hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(Hce,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Mover"})]}),ie.status==="Activo"&&!ie.isReference&&c.jsxs("button",{onClick:()=>K(!0),className:"flex flex-col items-center p-2 text-amber-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(Dc,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Dar de baja"})]}),c.jsxs("button",{onClick:()=>m(!g),className:`flex flex-col items-center p-2 w-full rounded-lg transition-colors ${g?"text-green-400":"text-brand-orange"} hover:bg-zinc-700/50`,children:[c.jsx(Of,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Editar"})]})]})]}),c.jsxs("main",{className:"p-4 space-y-4",children:[c.jsxs("div",{className:"flex bg-brand-glass rounded-xl p-1 border border-brand-border",children:[c.jsx("button",{onClick:()=>h("main"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${p==="main"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Ficha"}),c.jsx("button",{onClick:()=>h("genetics"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${p==="genetics"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Genealogía"}),c.jsx("button",{onClick:()=>h("progeny"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${p==="progeny"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Progenie"}),c.jsx("button",{onClick:()=>h("events"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${p==="events"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Eventos"})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border min-h-[200px]",children:[p==="main"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx(Ize,{animal:ie,isEditing:g,editedData:v,setEditedData:y,origins:a,onAddOriginClick:()=>j(!0),onLocationClick:()=>T(!0)}),g&&c.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-700",children:[c.jsx("h3",{className:"text-sm font-medium text-zinc-400",children:"Padres (Opcional)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>fe(!0),className:"w-full text-left bg-zinc-700 border border-zinc-600 rounded-xl p-3 text-white placeholder-zinc-500 flex justify-between items-center",children:[c.jsxs("span",{className:v.fatherId?"text-white":"text-zinc-500",children:["Padre: ",v.fatherId?ar(he.find(nt=>nt.id===v.fatherId))||v.fatherId:"Seleccionar..."]}),c.jsx(fu,{size:18,className:"text-zinc-400"})]}),c.jsx("button",{type:"button",onClick:()=>Se("father"),className:"p-3 bg-zinc-700 border border-zinc-600 rounded-xl text-brand-orange hover:bg-brand-orange/20 flex-shrink-0",children:c.jsx(Ki,{size:20})})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>_e(!0),className:"w-full text-left bg-zinc-700 border border-zinc-600 rounded-xl p-3 text-white placeholder-zinc-500 flex justify-between items-center",children:[c.jsxs("span",{className:v.motherId?"text-white":"text-zinc-500",children:["Madre: ",v.motherId?ar(Fe.find(nt=>nt.id===v.motherId))||v.motherId:"Seleccionar..."]}),c.jsx(fu,{size:18,className:"text-zinc-400"})]}),c.jsx("button",{type:"button",onClick:()=>Se("mother"),className:"p-3 bg-zinc-700 border border-zinc-600 rounded-xl text-brand-orange hover:bg-brand-orange/20 flex-shrink-0",children:c.jsx(Ki,{size:20})})]})]}),g&&c.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-zinc-700",children:[c.jsxs("button",{onClick:ht,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2",children:[c.jsx(Ic,{size:18})," Cancelar"]}),c.jsxs("button",{onClick:Ot,disabled:b!=="idle",className:"bg-brand-green hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:opacity-50 min-w-[130px] justify-center",children:[b==="saving"&&c.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"}),b==="success"&&c.jsx(Ga,{size:18}),b==="idle"&&c.jsx(ev,{size:18}),c.jsx("span",{className:"ml-2",children:b==="success"?"Guardado":"Guardar"})]})]})]}),p==="genetics"&&c.jsx(Pze,{onOpenModal:()=>oe(!0)}),p==="progeny"&&c.jsx(Dze,{offspring:He,navigateTo:n}),p==="events"&&c.jsx(Tze,{animal:ie})]})]})]}),c.jsx(sn,{isOpen:O,onClose:()=>T(!1),title:`Cambiar Lote para ${ar(ie)}`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar nuevo lote"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(nQ,{value:M,onChange:nt=>L(nt.target.value),children:[c.jsx("option",{value:"",children:"Sin Asignar"}),i.map(nt=>c.jsx("option",{value:nt.name,children:nt.name},nt.id))]}),c.jsx("button",{type:"button",onClick:()=>{T(!1),C(!0)},className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(ol,{size:24})})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{onClick:()=>T(!1),className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsx("button",{onClick:dt,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Cambio"})]})]})}),c.jsx(pu,{isOpen:V,onClose:()=>K(!1),title:"Causa de la Baja",actions:lt}),Z&&ie&&c.jsx(j_,{isOpen:!!Z,animal:ie,onCancel:()=>Y(null),onConfirm:It,reason:Z}),c.jsx(pu,{isOpen:H,onClose:()=>ee(!1),title:"Acciones de Referencia",actions:bt}),c.jsx(yv,{isOpen:le,onClose:()=>se(!1),onConfirm:Zt,title:`¿Eliminar ${ar(ie)} Permanentemente?`,message:"Esta acción borrará el registro del animal de la base de datos para siempre y no se puede deshacer."}),c.jsx(vze,{isOpen:A,onClose:()=>C(!1)}),c.jsx(yze,{isOpen:D,onClose:()=>j(!1)}),c.jsx(_p,{isOpen:N,onClose:()=>P(!1),motherId:ie.id}),c.jsxs(sn,{isOpen:$,onClose:()=>X(!1),title:`Registrar Destete de ${ar(ie)}`,children:[" ",c.jsx(xze,{animalId:ie.id,birthDate:ie.birthDate,onSave:$t,onCancel:()=>X(!1)})," "]}),c.jsx(_ze,{isOpen:te,onClose:()=>oe(!1),animalId:ie.id,navigateTo:n}),c.jsx(d5,{isOpen:me,onClose:()=>_e(!1),onSelect:nt=>{y(Bt=>({...Bt,motherId:nt})),_e(!1)},animals:Fe,title:"Seleccionar Madre",filterSex:"Hembra"}),c.jsx(d5,{isOpen:Ce,onClose:()=>fe(!1),onSelect:nt=>{y(Bt=>({...Bt,fatherId:nt})),fe(!1)},animals:he,title:"Seleccionar Padre",filterSex:"Macho"}),xe&&c.jsx(Nze,{type:xe,onClose:()=>Se(null),onSave:on})]})}const Mze=({animal:t,parturition:e,onSelectAnimal:n})=>c.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate).toLocaleDateString()}`,e.status==="seca"&&"Lactancia finalizada"]})]}),c.jsx(qi,{className:"text-zinc-600"})]});function Rze({onSelectAnimal:t,defaultView:e="drying"}){const{animals:n,parturitions:r,isLoading:i}=Kt(),[a,s]=I.useState(e);I.useEffect(()=>{s(e)},[e]);const o=I.useMemo(()=>{const u=p=>n.find(h=>h.id===p),d=r.filter(p=>p.status==="en-secado").map(p=>({animal:u(p.goatId),parturition:p})).filter(p=>p.animal),f=r.filter(p=>p.status==="seca").map(p=>({animal:u(p.goatId),parturition:p})).filter(p=>p.animal);return{drying:d,dry:f}},[n,r]),l=o[a]||[];return i?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsxs("header",{className:"text-center pt-8 pb-4",children:[c.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Gestión de Rebaño"}),c.jsx("p",{className:"text-xl text-zinc-400",children:"Animales por Estado de Lactancia"})]}),c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border flex justify-between items-center",children:c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[c.jsxs("button",{onClick:()=>s("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${a==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",o.drying.length,")"]}),c.jsxs("button",{onClick:()=>s("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${a==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",o.dry.length,")"]})]})}),c.jsx("div",{className:"space-y-2",children:l.length>0?l.map(({animal:u,parturition:d})=>c.jsx(Mze,{animal:u,parturition:d,onSelectAnimal:t},d.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function Lze({onBack:t}){const{lots:e,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,addLot:o,deleteLot:l,updateAnimal:u}=Kt(),[d,f]=I.useState(""),[p,h]=I.useState(!1),[g,m]=I.useState(null),[v,y]=I.useState(""),b=I.useMemo(()=>{const j=new Map;return n.forEach(N=>{const P=N.location||"Sin Asignar";j.set(P,(j.get(P)||0)+1)}),e.map(N=>({...N,animalCount:j.get(N.name)||0})).sort((N,P)=>N.name.localeCompare(P.name))},[e,n]),S=async()=>{if(d.trim()!==""){y("");try{await o({name:d,parentLotId:void 0}),f("")}catch(j){y(j.message||"No se pudo crear el lote.")}}},A=async(j,N)=>{var P;if(N>0){y(`No se puede eliminar "${(P=e.find(O=>O.id===j))==null?void 0:P.name}". Reasigne los ${N} animales primero.`);return}if(y(""),window.confirm("¿Estás seguro de que quieres eliminar este lote? Esta acción no se puede deshacer."))try{await l(j)}catch(O){y(O.message||"No se pudo eliminar el lote.")}},C=j=>{m(j),h(!0)},D=async j=>{if(!g)return;const N=j.map(P=>u(P,{location:g}));await Promise.all(N),h(!1),m(null)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestionar Lotes Físicos"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Crea ubicaciones y asigna animales"})]}),c.jsx("div",{className:"w-8"})]}),c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Añadir Nuevo Lote"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:d,onChange:j=>f(j.target.value),placeholder:"Nombre del lote...",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),c.jsx("button",{onClick:S,className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(Ki,{size:24})})]}),v&&c.jsx("p",{className:"text-sm text-brand-red text-center",children:v})]})}),c.jsxs("div",{className:"space-y-2 pt-4 px-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-2",children:"Lotes Existentes"}),b.length>0?b.map(j=>c.jsxs("div",{className:"w-full text-left bg-brand-glass rounded-2xl p-4 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:j.name}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[j.animalCount," ",j.animalCount===1?"animal":"animales"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>C(j.name),className:"flex items-center gap-2 bg-zinc-700/80 text-white font-semibold py-2 px-3 rounded-lg hover:bg-zinc-600/80 transition-colors",children:[c.jsx(hu,{size:16})," Asignar"]}),c.jsx("button",{onClick:()=>A(j.id,j.animalCount),className:"p-2 text-zinc-500 hover:text-brand-red transition-colors",children:c.jsx(Gl,{size:18})})]})]},j.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"Aún no has creado ningún lote."})})]})]}),c.jsx(A_,{isOpen:p,onClose:()=>h(!1),onSelect:D,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,title:`Asignar animales a: ${g}`})]})}const Fze=({onSave:t,onCancel:e,editingLot:n})=>{const{fathers:r,addFather:i}=Kt(),[a,s]=I.useState(""),[o,l]=I.useState(!1),[u,d]=I.useState(null),[f,p]=I.useState(!1);I.useEffect(()=>{n&&n.sireId?s(n.sireId):s("")},[n]);const h=async v=>{await i(v),s(v.id),l(!1)},g=async v=>{if(v.preventDefault(),d(null),!a){d("Debes seleccionar un semental.");return}p(!0);try{await t(a)}catch(y){d("No se pudo guardar el lote."),console.error(y),p(!1)}},m=n?f?"Actualizando...":"Guardar Cambios":f?"Creando...":"Crear Lote";return c.jsxs(c.Fragment,{children:[c.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"sire",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar Semental"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{id:"sire",value:a,onChange:v=>s(v.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl font-mono text-white",required:!0,disabled:!!n,children:[c.jsx("option",{value:"",children:"Elegir reproductor..."}),r.map(v=>c.jsx("option",{value:v.id,children:ar(v)},v.id))]}),c.jsx("button",{type:"button",onClick:()=>l(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(Ki,{size:24})})]})]}),u&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(dr,{size:18}),c.jsx("span",{children:u})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:f||!a,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:m})]})]}),c.jsx(iD,{isOpen:o,onClose:()=>l(!1),onSave:h})]})},zze=({isOpen:t,onClose:e,femalesToTransfer:n,originSeasonId:r,onConfirmTransfer:i})=>{const{animals:a,breedingSeasons:s,sireLots:o}=Kt(),[l,u]=I.useState(new Set),[d,f]=I.useState(""),[p,h]=I.useState(!1),[g,m]=I.useState("");I.useEffect(()=>{t&&(u(new Set(n)),f(""),m(""))},[t,n]);const v=I.useMemo(()=>s.find(C=>C.id===r),[s,r]),y=I.useMemo(()=>s.filter(C=>C.id!==r&&C.status==="Activo"),[s,r]),b=I.useMemo(()=>{const C=new Map(a.map(D=>[D.id,D]));return n.map(D=>C.get(D)).filter(D=>!!D).sort((D,j)=>D.id.localeCompare(j.id))},[n,a]),S=C=>{u(D=>{const j=new Set(D);return j.has(C)?j.delete(C):j.add(C),j})},A=async()=>{if(!d){m("Debes seleccionar una temporada de destino.");return}if(!o.some(D=>D.seasonId===d)){m("La temporada de destino no tiene lotes de reproductor. Crea uno primero.");return}if(l.size===0){m("Debes seleccionar al menos una hembra para transferir.");return}h(!0),m("");try{await i(d,Array.from(l)),h(!1),e()}catch(D){m(D.message||"Error al transferir los animales."),console.error("Error transferring animals:",D),h(!1)}};return t?c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-50 animate-fade-in p-4",onClick:e,children:c.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-lg rounded-2xl flex flex-col animate-slide-up max-h-[90vh]",onClick:C=>C.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 p-4 border-b border-brand-border",children:[c.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Transferir Animales"}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Desde la Temporada: ",(v==null?void 0:v.name)||"Cargando..."]})]}),c.jsxs("main",{className:"p-6 space-y-4 overflow-y-auto",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:["Animales a transferir (",l.size,"/",b.length,")"]}),c.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 p-2 bg-black/20 rounded-lg border border-zinc-700",children:b.length>0?b.map(C=>{const D=C.name?String(C.name).toUpperCase().trim():"";return c.jsxs("div",{onClick:()=>S(C.id),className:"flex items-center gap-3 p-2 rounded-md hover:bg-zinc-700 cursor-pointer transition-colors",children:[l.has(C.id)?c.jsx(vS,{className:"text-brand-orange flex-shrink-0"}):c.jsx(yS,{className:"text-zinc-500 flex-shrink-0"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:C.id.toUpperCase()}),D&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:D})]})]},C.id)}):c.jsx("p",{className:"text-sm text-zinc-500 text-center py-2",children:"No hay animales para transferir."})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"destination",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Transferir a la Temporada:"}),c.jsxs("select",{id:"destination",value:d,onChange:C=>f(C.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-white appearance-none",children:[c.jsx("option",{value:"",children:"Seleccionar temporada de destino..."}),y.map(C=>c.jsxs("option",{value:C.id,children:[C.name," (Activa)"]},C.id))]})]}),g&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(dr,{size:18}),c.jsx("span",{children:g})]})]}),c.jsxs("footer",{className:"flex-shrink-0 flex justify-end gap-4 p-4 border-t border-brand-border",children:[c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsx("button",{onClick:A,disabled:p||l.size===0||!d,className:"px-5 py-2 bg-brand-blue hover:bg-blue-700 text-white font-bold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Transfiriendo...":`Transferir ${l.size} Animal(es)`})]})]})}):null},$ze=({sireName:t,animalCount:e,dragControls:n})=>c.jsxs("div",{className:"w-full p-4 flex items-center",children:[c.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:r=>n.start(r),children:c.jsx(cT,{className:"text-zinc-500"})}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[c.jsx(tv,{})," Lote: ",t]}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1 flex items-center gap-2",children:[c.jsx(hu,{size:14})," ",e," ",e===1?"hembra asignada":"hembras asignadas"]})]}),c.jsx(qi,{className:"text-zinc-600"})]}),Bze=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i})=>{const a=gp(),s=I.useRef(!1),o=(l,u)=>{const d=u.offset.x,f=u.velocity.x;Math.abs(d)<2&&Math.abs(f)<100||(d<-160/2||f<-500?a.start({x:-160}):a.start({x:0})),setTimeout(()=>{s.current=!1},100)};return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[c.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[c.jsxs("button",{onClick:e,onPointerDown:l=>l.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(Of,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),c.jsxs("button",{onClick:n,onPointerDown:l=>l.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[c.jsx(Gl,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),c.jsx(Wi.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{s.current=!0},onDragEnd:o,onTap:()=>{s.current||r()},animate:a,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:c.jsx($ze,{sireName:t.sireName,animalCount:t.animalCount,dragControls:i})})]})},Vze=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=GT();return c.jsx(XT,{value:t,dragListener:!1,dragControls:i,children:c.jsx(Bze,{lot:t,dragControls:i,onClick:()=>e({name:"sire-lot-detail",lotId:t.id}),onEdit:()=>n(t),onDelete:()=>r(t)})},t.id)};function Uze({seasonId:t,onBack:e,navigateTo:n}){const{breedingSeasons:r,sireLots:i,fathers:a,animals:s,serviceRecords:o,addSireLot:l,updateSireLot:u,deleteSireLot:d,updateAnimal:f}=Kt(),[p,h]=I.useState(!1),[g,m]=I.useState(void 0),[v,y]=I.useState(null),[b,S]=I.useState(null),[A,C]=I.useState(!1),[D,j]=I.useState(null),N=I.useMemo(()=>r.find(H=>H.id===t),[r,t]),P=I.useMemo(()=>i.filter(H=>H.seasonId===t).map(H=>{const ee=a.find($=>$.id===H.sireId),le=ee?ar(ee):"Desconocido",se=s.filter($=>$.sireLotId===H.id).length;return{...H,sireName:le,animalCount:se,sireId:H.sireId}}),[i,t,a,s]),[O,T]=I.useState(P);I.useEffect(()=>{T(P)},[P]);const M=I.useMemo(()=>{if(!N||N.status!=="Cerrado")return[];const H=new Set(P.map(se=>se.id)),ee=s.filter(se=>se.sireLotId&&H.has(se.sireLotId)),le=new Set(o.filter(se=>se.sireLotId&&H.has(se.sireLotId)).map(se=>se.femaleId));return ee.filter(se=>!le.has(se.id))},[N,P,s,o]),L=H=>{m(H),h(!0)},V=async H=>{g?await u(g.id,{sireId:H}):await l({seasonId:t,sireId:H}),h(!1),m(void 0)},K=H=>{H.animalCount>0?S(`No se puede eliminar. Reasigna las ${H.animalCount} hembra(s) a otro lote primero.`):y(H)},Z=()=>{v&&(d(v.id),y(null))},Y=async(H,ee)=>{j(null);const le=i.find($=>$.seasonId===H);if(!le){j("La temporada de destino no tiene lotes de reproductor. Por favor, crea uno primero."),C(!1);return}const se=ee.map($=>f($,{sireLotId:le.id,reproductiveStatus:"En Servicio"}));await Promise.all(se),C(!1)};return N?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:N.name}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de la Temporada"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"space-y-4 px-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Lotes de Reproductor"}),c.jsxs("button",{onClick:()=>L(),className:"flex items-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[c.jsx(Ki,{size:16})," Añadir Lote"]})]}),O.length>0?c.jsx(YT,{as:"div",axis:"y",values:O,onReorder:T,className:"space-y-3",children:O.map(H=>c.jsx(Vze,{lot:H,navigateTo:n,onEdit:L,onDelete:K},H.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"Esta temporada aún no tiene lotes de reproductor."})})]}),N.status==="Cerrado"&&c.jsxs("div",{className:"space-y-4 px-4 pt-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Resultados: Hembras sin Servicio"}),M.length>0&&c.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 px-3 rounded-lg text-sm",children:[c.jsx(HW,{size:16})," Transferir"]})]}),c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-2",children:M.length>0?M.map(H=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/20 rounded-md",children:[c.jsx("span",{className:"font-semibold text-white",children:ar(H)}),c.jsxs("span",{className:"text-xs text-zinc-400",children:["Lote Físico: ",H.location||"N/A"]})]},H.id)):c.jsxs("div",{className:"text-center py-6 flex flex-col items-center gap-2",children:[c.jsx(Bce,{size:32,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-400 font-semibold",children:"Todas las hembras tuvieron servicio en esta temporada."})]})})]})]}),c.jsx(sn,{isOpen:p,onClose:()=>{h(!1),m(void 0)},title:g?`Editar Lote de ${g.sireName}`:"Añadir Lote de Reproductor",children:c.jsx(Fze,{onSave:V,onCancel:()=>{h(!1),m(void 0)},editingLot:g,seasonId:N.id})}),c.jsx(yv,{isOpen:!!v,onClose:()=>y(null),onConfirm:Z,title:`Eliminar Lote de ${v==null?void 0:v.sireName}`,message:"¿Estás seguro de que quieres eliminar este lote? Esta acción es irreversible."}),c.jsx(sn,{isOpen:!!b,onClose:()=>S(null),title:"Acción no permitida",children:c.jsxs("div",{className:"space-y-4 text-center",children:[" ",c.jsx(dr,{size:40,className:"mx-auto text-amber-400"})," ",c.jsx("p",{className:"text-zinc-300",children:b})," ",c.jsx("button",{onClick:()=>S(null),className:"mt-4 bg-brand-orange text-white font-semibold py-2 px-6 rounded-lg",children:"Entendido"})," "]})}),c.jsx(sn,{isOpen:!!D,onClose:()=>j(null),title:"Error de Transferencia",children:c.jsxs("div",{className:"space-y-4 text-center",children:[" ",c.jsx(dr,{size:40,className:"mx-auto text-amber-400"})," ",c.jsx("p",{className:"text-zinc-300",children:D})," ",c.jsx("button",{onClick:()=>j(null),className:"mt-4 bg-brand-orange text-white font-semibold py-2 px-6 rounded-lg",children:"Entendido"})," "]})}),c.jsx(zze,{isOpen:A,onClose:()=>C(!1),femalesToTransfer:M.map(H=>H.id),originSeasonId:N.id,onConfirmTransfer:Y})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada no encontrada."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const Wze=(t,e,n,r,i)=>{if(!t||t.status!=="Activo"||t.isReference)return[];const a=[];if(t.sex==="Hembra"){const o=e.filter(l=>l.goatId===t.id&&l.status!=="finalizada").sort((l,u)=>new Date(u.parturitionDate).getTime()-new Date(l.parturitionDate).getTime())[0];o&&(o.status==="activa"?a.push(jr.MILKING):o.status==="en-secado"?a.push(jr.DRYING_OFF):o.status==="seca"&&a.push(jr.DRY))}if(t.reproductiveStatus==="Preñada"?a.push(jr.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(l=>l.femaleId===t.id&&l.sireLotId===t.sireLotId)?a.push(jr.IN_SERVICE_CONFIRMED):a.push(jr.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push(jr.EMPTY),t.sex==="Macho"){const o=i.filter(d=>d.status==="Activo"),l=new Set(o.map(d=>d.id));r.some(d=>d.sireId===t.id&&l.has(d.seasonId))&&a.push(jr.SIRE_IN_SERVICE)}return Array.from(new Set(a.map(o=>o.key))).map(o=>jr[o]).filter(Boolean)};function Hze({lotId:t,navigateTo:e,onBack:n}){const{sireLots:r,fathers:i,animals:a,parturitions:s,serviceRecords:o,breedingSeasons:l,updateAnimal:u,addServiceRecord:d,startDryingProcess:f,setLactationAsDry:p}=Kt(),[h,g]=I.useState(!1),[m,v]=I.useState(""),[y,b]=I.useState(null),[S,A]=I.useState(!1),[C,D]=I.useState(null),[j,N]=I.useState(null),[P,O]=I.useState(null),[T,M]=I.useState([]),[L,V]=I.useState("corporal"),K=I.useMemo(()=>r.find(ie=>ie.id===t),[r,t]),Z=I.useMemo(()=>{if(!K)return;const ie=i.find(He=>He.id===K.sireId);return ie?{...ie,isReference:!0}:a.find(He=>He.id===K.sireId)},[i,a,K]),Y=I.useMemo(()=>Z?ar(Z):"Desconocido",[Z]),H=I.useMemo(()=>K?a.filter(ie=>ie.sireLotId===K.id&&!ie.isReference).sort((ie,He)=>ie.id.localeCompare(He.id)).map(ie=>({...ie,formattedAge:Mc(ie.birthDate),statusObjects:Wze(ie,s,o,r,l)})):[],[a,K,s,o,r,l]),ee=I.useMemo(()=>{if(!m)return H;const ie=m.toLowerCase();return H.filter(He=>ar(He).toLowerCase().includes(ie))},[H,m]),le=async ie=>{if(!K)return;const He=ie.map(Fe=>u(Fe,{sireLotId:K.id,reproductiveStatus:"En Servicio"}));await Promise.all(He),g(!1)},se=async ie=>{!K||!y||(await d({sireLotId:K.id,femaleId:y.id,serviceDate:ie.toISOString().split("T")[0]}),oe())},$=ie=>{if(!ie)return[];const He=[];return He.push({label:"Registrar Servicio",icon:gS,onClick:()=>{A(!1),D("service")},color:"text-pink-400"}),He.push({label:"Declarar Parto",icon:Wl,onClick:()=>{A(!1),D("parturition")}}),He.push({label:"Declarar Aborto",icon:Sf,onClick:()=>{A(!1),D("abortion")},color:"text-yellow-400"}),He.push({label:"Acciones de Leche",icon:wf,onClick:()=>{A(!1),D("milkWeighingAction")}}),He.push({label:"Acciones de Peso",icon:If,onClick:()=>{A(!1),D("bodyWeighingAction")}}),He.push({label:"Dar de Baja",icon:Dc,onClick:()=>{A(!1),D("decommissionSheet")},color:"text-brand-red"}),He},X=[{label:"Por Venta",icon:No,onClick:()=>{N("Venta"),D("decommission")}},{label:"Por Muerte",icon:Sf,onClick:()=>{N("Muerte"),D("decommission")},color:"text-brand-red"},{label:"Por Descarte",icon:fS,onClick:()=>{N("Descarte"),D("decommission")},color:"text-brand-red"}],te=ie=>{b(ie),A(!0)},oe=()=>{D(null),b(null),O(null),M([]),N(null)},me=async ie=>{if(!y)return;const He={status:ie.reason,isReference:!0,endDate:ie.date};ie.reason==="Venta"&&Object.assign(He,{salePrice:ie.salePrice,saleBuyer:ie.saleBuyer,salePurpose:ie.salePurpose}),ie.reason==="Muerte"&&(He.deathReason=ie.deathReason),ie.reason==="Descarte"&&Object.assign(He,{cullReason:ie.cullReason,cullReasonDetails:ie.cullReasonDetails}),await u(y.id,He),oe()},_e=(ie,He)=>{O(ie),D(He==="leche"?"logSimpleMilk":"logSimpleBody")},Ce=ie=>{V(ie),D(ie==="leche"?"newMilkSession":"newBodySession")},fe=async()=>{y&&(await u(y.id,{reproductiveStatus:"En Servicio"}),oe())},xe=(ie,He)=>{M(He),D("bulkWeighing")},Se=()=>{oe()};return K?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4 sticky top-0 bg-brand-dark/80 backdrop-blur-lg z-10 border-b border-brand-border",children:[c.jsx("button",{onClick:n,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow min-w-0",children:[c.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white truncate",children:["Lote: ",c.jsx("span",{className:"font-mono",children:Y})]}),c.jsxs("p",{className:"text-xs text-zinc-400 truncate",children:["Reproductor: ",Z?ar(Z):"Desconocido"]})]}),c.jsx("button",{onClick:()=>g(!0),className:"p-2 -mr-2 bg-brand-orange hover:bg-orange-600 text-white rounded-full transition-colors",children:c.jsx(Ki,{size:24})})]}),c.jsxs("div",{className:"space-y-4 pt-4 px-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300",children:["Hembras Asignadas (",ee.length,")"]}),c.jsxs("div",{className:"relative w-40",children:[c.jsx(fu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),c.jsx("input",{type:"search",value:m,onChange:ie=>v(ie.target.value),placeholder:"Buscar ID o Nombre...",className:"w-full bg-zinc-800/80 rounded-lg pl-8 pr-2 py-1 text-white border-transparent focus:border-brand-amber focus:ring-0 text-sm"})]})]}),c.jsx("div",{className:"space-y-4",children:ee.length>0?ee.map(ie=>c.jsx(rD,{animal:ie,onSelect:He=>e({name:"rebano-profile",animalId:He}),onOpenActions:te},ie.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:m?"No se encontraron coincidencias.":"Aún no has asignado hembras a este lote."})})})]})]}),c.jsx(A_,{isOpen:h,onClose:()=>g(!1),onSelect:le,animals:a,parturitions:s,serviceRecords:o,breedingSeasons:l,sireLots:r,title:`Asignar Hembras al Lote de ${Y}`,sireIdForInbreedingCheck:K.sireId}),c.jsx(pu,{isOpen:S,onClose:()=>A(!1),title:`Acciones para ${ar(y)}`,actions:$(y)}),c.jsx(pu,{isOpen:C==="decommissionSheet",onClose:oe,title:"Causa de la Baja",actions:X}),y&&c.jsxs(c.Fragment,{children:[C==="service"&&c.jsx(SD,{isOpen:!0,onClose:oe,onSave:se,animal:y}),C==="parturition"&&c.jsx(_p,{isOpen:!0,onClose:oe,motherId:y.id}),C==="abortion"&&c.jsx(bD,{animal:y,onCancel:oe,onSaveSuccess:oe}),C==="decommission"&&j&&c.jsx(j_,{isOpen:C==="decommission",animal:y,onCancel:oe,onConfirm:me,reason:j}),C==="milkWeighingAction"&&c.jsx(vD,{isOpen:!0,animal:y,onClose:oe,onLogToSession:ie=>_e(ie,"leche"),onStartNewSession:()=>Ce("leche"),onStartDrying:f,onSetDry:p}),C==="bodyWeighingAction"&&c.jsx(yD,{isOpen:!0,animal:y,onClose:oe,onLogToSession:ie=>_e(ie,"corporal"),onStartNewSession:()=>Ce("corporal"),onSetReadyForMating:fe}),C==="logSimpleMilk"&&P&&c.jsx(sn,{isOpen:!0,onClose:oe,title:`Añadir Pesaje Leche: ${ar(y)}`,children:c.jsx(Vg,{animalId:y.id,weightType:"leche",onSaveSuccess:oe,onCancel:oe,sessionDate:P})}),C==="logSimpleBody"&&P&&c.jsx(sn,{isOpen:!0,onClose:oe,title:`Añadir Peso Corporal: ${ar(y)}`,children:c.jsx(Vg,{animalId:y.id,weightType:"corporal",onSaveSuccess:oe,onCancel:oe,sessionDate:P})}),(C==="newMilkSession"||C==="newBodySession")&&c.jsx(wD,{weightType:L,onBack:oe,onAnimalsSelected:xe}),C==="bulkWeighing"&&c.jsx(sn,{isOpen:!0,onClose:oe,title:`Carga Masiva - ${L==="leche"?"Leche":"Corporal"}`,size:"fullscreen",children:c.jsx(xD,{weightType:L,animalsToWeigh:T,onSaveSuccess:Se,onCancel:oe})})]})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Lote de Reproductor no encontrado."}),c.jsx("button",{onClick:n,className:"mt-4 text-brand-orange",children:"Volver"})]})}const qze=t=>{const[e,n]=I.useState([]),[r,i]=I.useState([]),[a,s]=I.useState(!0);return I.useEffect(()=>{if(!t)return;(async()=>{s(!0);try{const u=Kn(),[d,f]=await Promise.all([u.weighings.where("goatId").equals(t).toArray(),u.parturitions.where("goatId").equals(t).toArray()]);n(d),i(f.sort((p,h)=>new Date(p.parturitionDate).getTime()-new Date(h.parturitionDate).getTime()))}catch(u){console.error(`Error al cargar datos para ${t}:`,u)}finally{s(!1)}})()},[t]),{...I.useMemo(()=>{if(r.length===0)return{allLactations:[],parturitionIntervals:[],lastWeighingDate:null};const l=r.map((f,p)=>{const h=new Date(f.parturitionDate),g=p<r.length-1?new Date(r[p+1].parturitionDate):new Date(9999,11,31),m=e.filter(D=>{const j=new Date(D.date);return j>=h&&j<g}),v=m.map(D=>({del:Vf(f.parturitionDate,D.date),kg:D.kg})).sort((D,j)=>D.del-j.del),y=m.reduce((D,j)=>D+j.kg,0),b=m.length>0?y/m.length:0,S=v.reduce((D,j)=>j.kg>D.kg?j:D,{kg:0,del:0}),A=v[v.length-1],C=A?A.del:0;return{parturitionDate:f.parturitionDate,weighings:m,lactationCurve:v,averageProduction:b,peakProduction:S,totalDays:C}}),u=r.slice(1).map((f,p)=>{const h=r[p],g=new Date(f.parturitionDate).getTime()-new Date(h.parturitionDate).getTime();return{period:`${h.parturitionDate.substring(0,4)} - ${f.parturitionDate.substring(0,4)}`,days:Math.round(g/(1e3*60*60*24))}}),d=e.sort((f,p)=>new Date(p.date).getTime()-new Date(f.date).getTime())[0];return{allLactations:l,parturitionIntervals:u,lastWeighingDate:(d==null?void 0:d.date)||null}},[e,r]),isLoading:a}},a1=(t,e,n)=>{const r={};return t.forEach(i=>{const a=e.filter(o=>o.goatId===i.goatId&&new Date(i.date)>=new Date(o.parturitionDate)).sort((o,l)=>new Date(l.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];if(!a)return;const s=Vf(a.parturitionDate,i.date);n!==void 0&&s>n||(r[s]||(r[s]={totalKg:0,count:0}),r[s].totalKg+=i.kg,r[s].count++)}),Object.entries(r).map(([i,a])=>({del:parseInt(i),kg:a.totalKg/a.count})).sort((i,a)=>i.del-a.del)},s1=(t,e)=>{let n=0,r=0;return t.forEach(i=>{const a=e.filter(s=>s.goatId===i).sort((s,o)=>new Date(s.parturitionDate).getTime()-new Date(o.parturitionDate).getTime());for(let s=1;s<a.length;s++){const o=a[s],l=a[s-1];if(l.dryingStartDate){const u=new Date(l.dryingStartDate),f=new Date(o.parturitionDate).getTime()-u.getTime(),p=Math.round(f/(1e3*60*60*24));p>=0&&(n+=p,r++)}}}),r===0?null:n/r},Kze=(t,e,n,r)=>{const[i,a]=I.useState(null),[s,o]=I.useState(!1);return I.useEffect(()=>{if(!t.type||!t.animal){a(null),o(!1);return}const{type:l,animal:u,highlightedLactationDEL:d}=t;(async()=>{o(!0),a(null);let p=null;try{if(l==="PRIMIPARAS_AVG"||l==="MULTIPARAS_AVG"||l==="HERD_AVG"){const h=n.reduce((A,C)=>(A[C.goatId]=(A[C.goatId]||0)+1,A),{}),g=n.filter(A=>{const C=h[A.goatId]||0;return l==="PRIMIPARAS_AVG"?C===1:l==="MULTIPARAS_AVG"?C>1:!0}),m=new Set(g.map(A=>A.goatId)),v=r.filter(A=>m.has(A.goatId)),y=a1(v,g,d),b=s1(m,n);p={name:l==="PRIMIPARAS_AVG"?"Prom. Primíparas":l==="MULTIPARAS_AVG"?"Prom. Multíparas":"Prom. Rebaño",curve:y,averageRestInterval:b}}else if(l==="PEERS_AVG"){const h=new Date(u.birthDate),g=h.getFullYear(),m=Math.floor(h.getMonth()/6),v=new Set(e.filter(D=>{const j=new Date(D.birthDate);return j.getFullYear()===g&&Math.floor(j.getMonth()/6)===m&&D.id!==u.id}).map(D=>D.id)),y=new Set(n.filter(D=>v.has(D.goatId)).map(D=>D.goatId)),b=n.filter(D=>y.has(D.goatId)),S=r.filter(D=>y.has(D.goatId)),A=a1(S,b,d),C=s1(y,n);p={name:`Prom. Pares (${g}-S${m+1})`,curve:A,averageRestInterval:C}}else if(l==="DAM")if(u.motherId){const h=n.filter(y=>y.goatId===u.motherId),g=r.filter(y=>y.goatId===u.motherId),m=a1(g,h,d),v=s1(new Set([u.motherId]),n);p={name:`Prom. Madre (${u.motherId})`,curve:m,averageRestInterval:v}}else p={name:"Madre (Desconocida)",curve:[],averageRestInterval:null};else if(l==="PROGENY_AVG"){const h=new Set(e.filter(b=>b.motherId===u.id&&b.sex==="Hembra").map(b=>b.id)),g=n.filter(b=>h.has(b.goatId)),m=r.filter(b=>h.has(b.goatId)),v=a1(m,g,d),y=s1(h,n);p={name:"Prom. Hijas",curve:v,averageRestInterval:y}}else if(l==="SPECIFIC_LACTATION"&&t.specificLactationIndex!==void 0){const h=n.filter(m=>m.goatId===u.id).sort((m,v)=>new Date(m.parturitionDate).getTime()-new Date(v.parturitionDate).getTime());let g=null;if(t.specificLactationIndex>0&&t.specificLactationIndex<h.length){const m=h[t.specificLactationIndex-1];if(m.dryingStartDate){const v=new Date(m.dryingStartDate),b=new Date(h[t.specificLactationIndex].parturitionDate).getTime()-v.getTime();g=Math.round(b/(1e3*60*60*24))}}if(t.specificLactationIndex<h.length){const m=h[t.specificLactationIndex],v=t.specificLactationIndex+1<h.length?new Date(h[t.specificLactationIndex+1].parturitionDate):new Date(9999,11,31),b=r.filter(A=>{const C=new Date(A.date);return A.goatId===u.id&&C>=new Date(m.parturitionDate)&&C<v}).map(A=>({del:Vf(m.parturitionDate,A.date),kg:A.kg})).sort((A,C)=>A.del-C.del);p={name:`Lact. ${new Date(m.parturitionDate).getFullYear()} (#${t.specificLactationIndex+1})`,curve:b,averageRestInterval:g}}else p={name:"Lactancia no encontrada",curve:[],averageRestInterval:null}}}catch(h){console.error("Error calculating comparison data:",h),p={name:"Error",curve:[],averageRestInterval:null}}finally{a(p),o(!1)}})()},[t,e,n,r]),{comparativeData:i,isLoading:s}},o1=[{stroke:"#FF9500",fill:"url(#gradient0)"},{stroke:"#34C759",fill:"url(#gradient1)"},{stroke:"#007AFF",fill:"url(#gradient2)"},{stroke:"#AF52DE",fill:"url(#gradient3)"},{stroke:"#FF3B30",fill:"url(#gradient4)"},{stroke:"#5AC8FA",fill:"url(#gradient5)"},{stroke:"#FFCC00",fill:"url(#gradient6)"}],LC="#007AFF",VF="comparisonGradient",Gze=({active:t,payload:e,label:n})=>t&&e&&e.length?c.jsxs("div",{className:"bg-black/70 backdrop-blur-md p-3 rounded-lg border border-zinc-700 text-white shadow-xl",children:[c.jsxs("p",{className:"label text-zinc-400 text-sm font-medium mb-1",children:["DEL: ",n]}),e.map(r=>{var i;return c.jsxs("p",{style:{color:r.stroke||((i=r.payload)==null?void 0:i.stroke)},className:"font-semibold text-base flex justify-between items-center gap-4",children:[c.jsxs("span",{children:[r.name,":"]}),c.jsx("span",{children:typeof r.value=="number"?`${r.value.toFixed(2)} Kg`:"N/A"})]},r.name)})]}):null,Yze=({lactationsData:t,comparisonData:e,highlightedLactationDate:n,onLactationClick:r})=>{const[i,a]=I.useState(null),s=I.useMemo(()=>t?t.slice(-o1.length).reverse():[],[t]),o=I.useMemo(()=>new Map(s.map(m=>[`Lact. ${new Date(m.parturitionDate).getFullYear()}`,m.parturitionDate])),[s]),l=(m,v)=>{const y=o.get(m),b=p&&n===y,S=i===m,A=v.dataKey==="kg"&&e&&m===e.name;let C=1;return A?C=1:p?C=b?1:.7:i&&(C=S?1:.7),c.jsx("span",{style:{color:v.color,opacity:C,transition:"opacity 0.2s ease"},children:m})},u=I.useMemo(()=>{if(!s)return[];let m=s.flatMap(v=>v.lactationCurve);return e!=null&&e.curve&&(m=m.concat(e.curve)),m},[s,e]),d=I.useMemo(()=>!u||u.length===0?305:Math.max(...u.map(m=>m.del),0),[u]),f=I.useMemo(()=>!u||u.length===0?5:Math.max(...u.map(m=>m.kg),0),[u]),p=n!==null,h=LC,g=`url(#${VF})`;return s?s.length===0?c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay datos históricos de lactancia para mostrar."}):c.jsx("div",{className:"w-full h-72",children:c.jsx(ki,{children:c.jsxs(__,{margin:{top:5,right:15,left:-25,bottom:5},onClick:m=>{(!m||!m.activePayload||m.activePayload.length===0)&&r(null)},children:[c.jsxs("defs",{children:[o1.map((m,v)=>c.jsxs("linearGradient",{id:`gradient${v}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:m.stroke,stopOpacity:.7}),c.jsx("stop",{offset:"95%",stopColor:m.stroke,stopOpacity:.15})]},`grad-${v}`)),c.jsxs("linearGradient",{id:VF,x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:LC,stopOpacity:.6})," ",c.jsx("stop",{offset:"95%",stopColor:LC,stopOpacity:.1})," "]})]}),c.jsx(Jc,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)",vertical:!1}),c.jsx(ii,{dataKey:"del",type:"number",domain:[0,d>0?d:305],tick:{fill:"rgba(255, 255, 255, 0.5)",fontSize:10},stroke:"rgba(255, 255, 255, 0.2)",axisLine:!1,tickLine:!1,name:"DEL"}),c.jsx(ni,{orientation:"right",tick:{fill:"rgba(255, 255, 255, 0.5)",fontSize:10},stroke:"rgba(255, 255, 255, 0.2)",axisLine:!1,tickLine:!1,domain:[0,f>0?Math.ceil(f+.5):5],unit:"Kg",width:35}),c.jsx(xr,{content:c.jsx(Gze,{}),cursor:{stroke:"rgba(255,255,255,0.4)",strokeWidth:1.5}}),c.jsx(Bl,{verticalAlign:"top",height:36,iconType:"plainline",wrapperStyle:{fontSize:"12px",paddingBottom:"10px"},formatter:l,onMouseEnter:m=>a(m.value),onMouseLeave:()=>a(null)}),s.map((m,v)=>{const y=o1[v%o1.length],S=`Lact. ${new Date(m.parturitionDate).getFullYear()}`,A=n===m.parturitionDate,C=i===S,D=A||C,j=p?A?1:.7:C?1:.9,N=D?3.5:2.5,P=p?A?.7:.3:C?.8:.7;return c.jsxs(be.Fragment,{children:[c.jsx(Bs,{type:"monotone",data:m.lactationCurve,dataKey:"kg",name:S,stroke:"none",fill:y.fill,fillOpacity:P,activeDot:!1,style:{transition:"opacity 0.2s ease, fill-opacity 0.2s ease"}}),c.jsx(ud,{type:"monotone",data:m.lactationCurve,dataKey:"kg",name:S,stroke:y.stroke,strokeWidth:N,dot:!1,activeDot:{r:5,strokeWidth:0},strokeOpacity:j,style:{transition:"opacity 0.2s ease, stroke-width 0.2s ease"},onClick:()=>{r(m.parturitionDate)},cursor:"pointer"})]},m.parturitionDate)}),e&&e.curve.length>0&&c.jsxs(be.Fragment,{children:[c.jsx(Bs,{type:"monotone",data:e.curve,dataKey:"kg",name:e.name,stroke:"none",fill:g,fillOpacity:p?.4:.6,style:{transition:"opacity 0.2s ease"}}),c.jsx(ud,{type:"monotone",data:e.curve,dataKey:"kg",name:e.name,stroke:h,strokeWidth:2.5,strokeDasharray:"4 4",dot:!1,activeDot:{r:5,strokeWidth:0},strokeOpacity:1,style:{transition:"opacity 0.2s ease"}})]})]})})}):c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Cargando datos..."})},Xze=({lactationNumber:t,lactationData:e,onClick:n})=>{const r=new Date(e.parturitionDate+"T00:00:00Z").getUTCFullYear();return c.jsxs("button",{onClick:n,className:"w-full text-left bg-black/20 rounded-2xl p-4 border border-zinc-700/80 hover:border-brand-blue/50 transition-colors group",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"font-bold text-lg text-white",children:["Lactancia #",t," ",c.jsxs("span",{className:"text-zinc-400 font-normal",children:["(",r,")"]})]}),c.jsx(qi,{className:"text-zinc-500 group-hover:text-brand-blue transition-colors"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs text-zinc-400 flex items-center justify-center gap-1",children:[c.jsx(Ob,{size:12}),"Promedio"]}),c.jsxs("p",{className:"text-xl font-semibold text-white",children:[e.averageProduction.toFixed(2),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:" Kg"})]})]}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs text-zinc-400 flex items-center justify-center gap-1",children:[c.jsx(ms,{size:12}),"Pico"]}),c.jsxs("p",{className:"text-xl font-semibold text-white",children:[e.peakProduction.kg.toFixed(2),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:" Kg"})]})]}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs text-zinc-400 flex items-center justify-center gap-1",children:[c.jsx(aT,{size:12}),"Duración"]}),c.jsxs("p",{className:"text-xl font-semibold text-white",children:[e.totalDays,c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:" días"})]})]})]})]})},FC=(t,e=2,n="Kg")=>t==null||isNaN(t)?"N/A":`${t.toFixed(e)} ${n}`,Qze=(t,e,n)=>{const r=n.find(s=>s.goatId===e&&s.parturitionDate===t.parturitionDate);if(!r)return null;const i=n.filter(s=>s.goatId===e&&new Date(s.parturitionDate)<new Date(r.parturitionDate)).sort((s,o)=>new Date(o.parturitionDate).getTime()-new Date(s.parturitionDate).getTime())[0];if(!i||!i.dryingStartDate)return null;const a=new Date(r.parturitionDate).getTime()-new Date(i.dryingStartDate).getTime();return Math.round(a/(1e3*60*60*24))},l1=({label:t,valueA:e,valueB:n,unit:r,decimals:i=2,invertColors:a=!1})=>{const s=e!=null,o=n!=null,l=s&&o;let u=null,d="N/A",f="text-zinc-400",p=dT;return l&&(u=e-n,Math.abs(u)<.01&&(u=0),d=`${u>0?"+":""}${u.toFixed(i)} ${r}`,u>0?(f=a?"text-brand-red":"text-brand-green",p=og):u<0&&(f=a?"text-brand-green":"text-brand-red",p=sg)),c.jsxs("div",{className:"py-3 border-b border-zinc-700/50 flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-medium text-zinc-400",children:t}),c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsx("span",{className:"text-lg font-semibold text-white",children:FC(e,i,r)}),l?c.jsxs("span",{className:`text-sm font-medium flex items-center ${f}`,children:[c.jsx(p,{size:16,className:"mr-0.5"}),d,c.jsxs("span",{className:"text-zinc-500 ml-2 text-xs font-normal",children:["(vs ",FC(n,i,r),")"]})]}):c.jsxs("span",{className:"text-sm font-medium text-zinc-500",children:["vs ",FC(n,i,r)]})]})]})},Zze=({lactationA:t,comparisonB:e,allParturitions:n,animalId:r})=>{const i=e!=null&&e.curve.length?e.curve.reduce((d,f)=>d+f.kg,0)/e.curve.length:null,a=e!=null&&e.curve.length?e.curve.reduce((d,f)=>f.kg>d.kg?f:d,{kg:0,del:0}):null,s=e!=null&&e.curve.length?e.curve[e.curve.length-1].del:null,o=I.useMemo(()=>Qze(t,r,n),[t,r,n]),l=e==null?void 0:e.averageRestInterval,u=`Lact. ${new Date(t.parturitionDate).getFullYear()}`;return c.jsxs("div",{className:"mt-4 pt-4 border-t border-brand-border/50 text-white animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[c.jsx("span",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wide",children:"Métrica"}),c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsx("span",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:u}),c.jsxs("span",{className:"text-xs font-light text-zinc-400",children:["vs ",(e==null?void 0:e.name)||"..."]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(l1,{label:"Promedio",valueA:t.averageProduction,valueB:i,unit:"Kg",decimals:2}),c.jsx(l1,{label:"Pico",valueA:t.peakProduction.kg,valueB:a==null?void 0:a.kg,unit:"Kg",decimals:2}),c.jsx(l1,{label:"Duración (DEL)",valueA:t.totalDays,valueB:s,unit:"días",decimals:0}),c.jsx(l1,{label:"Descanso Previo",valueA:o,valueB:l,unit:"días",decimals:0,invertColors:!0})]})]})},Jze=({active:t,payload:e,label:n})=>{var r;return t&&e&&e.length?c.jsxs("div",{className:"bg-zinc-800/80 backdrop-blur-md p-3 rounded-lg border border-zinc-700 text-white shadow-xl",children:[c.jsxs("p",{className:"label text-zinc-400 text-sm font-medium mb-1",children:["DEL: ",n]}),c.jsxs("p",{className:"font-semibold text-base",style:{color:e[0].stroke||((r=e[0].payload)==null?void 0:r.stroke)||e[0].fill},children:[e[0].name,": ",e[0].value.toFixed(2)," Kg"]})]}):null};function rQ({animalId:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,weighings:a,startDryingProcess:s,setLactationAsDry:o}=Kt(),{allLactations:l,parturitionIntervals:u,lastWeighingDate:d,isLoading:f}=qze(t),[p,h]=I.useState(!1),[g,m]=I.useState(null),[v,y]=I.useState(!1),[b,S]=I.useState(null),A=I.useMemo(()=>r.find(te=>te.id===t)||null,[r,t]),[C,D]=I.useState({type:null,animal:A,highlightedLactationDEL:void 0}),{comparativeData:j,isLoading:N}=Kze(C,r,i,a),P=I.useMemo(()=>{if(l.length===0)return null;const te=l[l.length-1],oe=i.find(me=>me.parturitionDate===te.parturitionDate&&me.goatId===t);return{...te,id:oe==null?void 0:oe.id,status:oe==null?void 0:oe.status}},[l,i,t]),O=I.useMemo(()=>{if(!P||P.status==="seca"||P.status==="finalizada")return"N/A";const te=P.status!=="activa"&&d?d:new Date().toISOString().split("T")[0];return Vf(P.parturitionDate,te)},[P,d]),T=I.useMemo(()=>!P||P.weighings.length===0?null:[...P.weighings].sort((oe,me)=>new Date(me.date).getTime()-new Date(oe.date).getTime())[0].kg,[P]),M=I.useMemo(()=>!v||!j||N||j.curve.length===0?null:{name:j.name,curve:j.curve},[v,j,N]),L=I.useMemo(()=>l.length>0?l[l.length-1]:null,[l]),V=I.useMemo(()=>u.length>0?u[u.length-1].days:0,[u]),K=I.useMemo(()=>l.length<=1?[]:l.slice(0,-1).reverse(),[l]);if(f)return c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando perfil..."})});const Z=l.length===1,Y=te=>{if(!te)return;const oe=l.find(me=>me.parturitionDate===te);return!oe||oe.lactationCurve.length===0?0:Math.max(...oe.lactationCurve.map(me=>me.del),0)},H=te=>{S(te);const oe=Y(te);te?(y(!0),D(me=>({...me,animal:A,highlightedLactationDEL:oe}))):(y(!1),D({type:null,animal:null,highlightedLactationDEL:void 0}))},ee=()=>{const te=!v;if(y(te),te){let oe=b;!oe&&L&&(oe=L.parturitionDate,S(oe));const me=Y(oe);D(_e=>({..._e,animal:A,highlightedLactationDEL:me}))}else S(null),D({type:null,animal:null,highlightedLactationDEL:void 0})},le=(te,oe)=>{D(me=>{const _e=me.type===te&&me.specificLactationIndex===oe?null:te;let Ce=b;_e&&(y(!0),!Ce&&L&&(Ce=L.parturitionDate,S(Ce)));const fe=Y(Ce);return{...me,type:_e,animal:A,specificLactationIndex:te==="SPECIFIC_LACTATION"?oe:void 0,highlightedLactationDEL:fe}})},se=te=>{te&&te.lactationCurve.length>0&&(m(te),h(!0))},$=(te,oe)=>{const me=C.type===te&&(te!=="SPECIFIC_LACTATION"||C.specificLactationIndex===oe);let _e="";return Z&&te==="PRIMIPARAS_AVG"&&(_e="ring-2 ring-amber-400"),!Z&&te==="MULTIPARAS_AVG"&&(_e="ring-2 ring-amber-400"),`px-2 py-1 text-xs rounded-md transition-colors ${me?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${_e}`},X=b!==null;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 sticky top-0 z-10 bg-brand-dark/80 backdrop-blur-md -mx-4 px-4 border-b border-brand-border/50 mb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:t}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Perfil de Lactancia"})]}),c.jsx("button",{onClick:()=>n({name:"rebano-profile",animalId:t}),className:"p-2 -mr-2 text-zinc-400 hover:text-white transition-colors",title:"Ir a la ficha general del animal",children:c.jsx(pS,{size:24})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(Ob,{size:14}),c.jsx("span",{children:"Promedio Actual"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[(L==null?void 0:L.averageProduction.toFixed(2))||"N/A"," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(ms,{size:14}),c.jsx("span",{children:"Pico Prod. Actual"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[(L==null?void 0:L.peakProduction.kg.toFixed(2))||"N/A"," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(aT,{size:14}),c.jsx("span",{children:"DEL Actual"})]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:O})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(Wce,{size:14}),c.jsx("span",{children:"Últ. Int. Partos"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[V||"N/A"," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"días"})]})]}),c.jsxs("button",{onClick:()=>se(L),disabled:!L||L.weighings.length===0,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors col-span-2 md:col-span-1 disabled:opacity-50 disabled:cursor-not-allowed relative group",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(wce,{size:14}),c.jsx("span",{children:"Últ. Pesaje"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[(T==null?void 0:T.toFixed(2))??"N/A"," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]}),c.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:d?new Date(d+"T00:00:00").toLocaleDateString():""}),c.jsx("div",{className:"absolute top-3 right-3 text-zinc-500 group-hover:text-brand-amber transition-colors",children:c.jsx(Ib,{size:18})})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border relative",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center border-b border-brand-border pb-2 mb-4 gap-2",children:[c.jsx("h3",{className:"text-zinc-400 font-semibold text-xs uppercase",children:"Historial de Lactancias"}),c.jsxs("div",{className:"flex items-center space-x-2 self-end sm:self-center",children:[X&&c.jsxs("button",{onClick:()=>H(null),className:"text-xs font-semibold text-zinc-400 hover:text-white animate-fade-in flex items-center gap-1 bg-zinc-700/50 px-2 py-1 rounded-md",title:"Quitar zoom",children:[c.jsx(Pce,{size:14}),"Ver Todo"]}),c.jsx("span",{className:"text-xs font-semibold text-zinc-300",children:"Comparar:"}),c.jsx("button",{onClick:ee,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${v?"bg-amber-500":"bg-zinc-700"}`,children:c.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${v?"translate-x-5":"translate-x-0"}`})})]})]}),v&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4 animate-fade-in p-2 bg-black/20 rounded-lg",children:[c.jsx("span",{className:"text-xs font-semibold text-zinc-300 w-full sm:w-auto",children:"Grupos:"}),c.jsx("button",{onClick:()=>le("PRIMIPARAS_AVG"),className:$("PRIMIPARAS_AVG"),children:"vs Primíparas"}),c.jsx("button",{onClick:()=>le("MULTIPARAS_AVG"),className:$("MULTIPARAS_AVG"),children:"vs Multíparas"}),c.jsx("button",{onClick:()=>le("HERD_AVG"),className:$("HERD_AVG"),children:"vs Rebaño"}),c.jsx("button",{onClick:()=>le("PEERS_AVG"),className:$("PEERS_AVG"),children:"vs Pares"}),c.jsx("span",{className:"text-xs font-semibold text-zinc-300 w-full sm:w-auto pt-2 sm:pt-0",children:"Familia:"}),c.jsx("button",{onClick:()=>le("DAM"),className:$("DAM"),disabled:!(A!=null&&A.motherId),children:"Madre"}),c.jsx("button",{onClick:()=>le("PROGENY_AVG"),className:$("PROGENY_AVG"),children:"Prom. Hijas"}),c.jsx("span",{className:"text-xs font-semibold text-zinc-300 w-full sm:w-auto pt-2 sm:pt-0",children:"Propias:"}),K.map((te,oe)=>c.jsxs("button",{onClick:()=>le("SPECIFIC_LACTATION",l.length-2-oe),className:$("SPECIFIC_LACTATION",l.length-2-oe),children:["vs Lact. #",l.length-1-oe," (",new Date(te.parturitionDate).getFullYear(),")"]},te.parturitionDate))]}),c.jsx(Yze,{lactationsData:l,comparisonData:M,highlightedLactationDate:b,onLactationClick:H}),N&&c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm rounded-xl text-white",children:[c.jsx(jc,{className:"animate-spin mr-2"})," Calculando comparación..."]}),v&&j&&L&&!N&&c.jsx(Zze,{lactationA:l.find(te=>te.parturitionDate===b)||L,comparisonB:j,allParturitions:i,animalId:t})]}),K.length>0&&c.jsxs("div",{className:"space-y-3 pt-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-1",children:"Lactancias Anteriores"}),K.map((te,oe)=>c.jsx(Xze,{lactationNumber:l.length-1-oe,lactationData:te,onClick:()=>se(te)},te.parturitionDate))]}),(P==null?void 0:P.id)&&P.status!=="finalizada"&&c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-zinc-400 font-semibold text-xs uppercase mb-3",children:"Gestión de Lactancia Actual"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[P.status==="activa"&&c.jsxs("button",{onClick:()=>s(P.id),className:"w-full flex items-center justify-center space-x-2 bg-blue-600/80 hover:bg-blue-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[c.jsx(pp,{size:20}),c.jsx("span",{children:"Iniciar Proceso de Secado"})]}),(P.status==="activa"||P.status==="en-secado")&&c.jsxs("button",{onClick:()=>o(P.id),className:"w-full flex items-center justify-center space-x-2 bg-gray-600/80 hover:bg-gray-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[c.jsx(Dc,{size:20}),c.jsx("span",{children:"Declarar Lactancia como Seca"})]}),P.status==="seca"&&c.jsx("div",{className:"w-full text-center p-3 bg-black/20 rounded-xl",children:c.jsx("p",{className:"font-semibold text-green-400",children:"Esta lactancia ha finalizado."})})]}),P.status==="en-secado"&&c.jsx("p",{className:"text-center text-xs text-zinc-400 mt-2",children:"El animal está en su período de secado."})]})]}),c.jsx(sn,{isOpen:p,onClose:()=>h(!1),title:`Curva Lactancia (${g?new Date(g.parturitionDate).getFullYear():"Actual"}) - ${t}`,children:g?c.jsx("div",{className:"w-full h-[320px] -ml-2 -mr-2",children:c.jsx(ki,{width:"100%",height:"100%",children:c.jsxs(__,{data:g.lactationCurve,margin:{top:10,right:10,left:0,bottom:0},children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"colorLactation",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:"#FBBF24",stopOpacity:.8}),c.jsx("stop",{offset:"95%",stopColor:"#FBBF24",stopOpacity:0})]})}),c.jsx(Jc,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)",vertical:!1}),c.jsx(ii,{dataKey:"del",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},tickLine:!1,axisLine:{stroke:"rgba(255,255,255,0.2)"}}),c.jsx(ni,{orientation:"right",tickFormatter:te=>`${te.toFixed(1)} Kg`,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},tickLine:!1,axisLine:{stroke:"rgba(255,255,255,0.2)"}}),c.jsx(xr,{content:c.jsx(Jze,{})}),c.jsx(Bs,{type:"monotone",dataKey:"kg",name:`${t} (${new Date(g.parturitionDate).getFullYear()})`,stroke:"#FBBF24",fill:"url(#colorLactation)",strokeWidth:2.5,dot:{r:3,fill:"#FBBF24",stroke:"#FBBF24",strokeWidth:1},activeDot:{r:5,fill:"#FFFFFF",stroke:"#FBBF24",strokeWidth:2}})]})})}):c.jsx("p",{className:"text-center text-zinc-400 py-8",children:"No hay datos para mostrar la curva seleccionada."})})]})}const e$e=({plan:t})=>c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("p",{className:"font-semibold text-white",children:t.details}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Iniciado el: ",new Date(t.startDate+"T00:00:00").toLocaleDateString("es-VE")]})]});function t$e({lotName:t,onBack:e}){const{feedingPlans:n,addFeedingPlan:r}=Kt(),[i,a]=I.useState(""),[s,o]=I.useState(new Date().toISOString().split("T")[0]),[l,u]=I.useState(null),d=I.useMemo(()=>n.filter(p=>p.lotName===t).sort((p,h)=>new Date(h.startDate).getTime()-new Date(p.startDate).getTime()),[n,t]),f=async p=>{if(p.preventDefault(),!i.trim()){u({type:"error",text:"Los detalles del plan no pueden estar vacíos."});return}try{await r({lotName:t,details:i,startDate:s}),u({type:"success",text:"Plan de alimentación guardado con éxito."}),a("")}catch(h){u({type:"error",text:"No se pudo guardar el plan."}),console.error(h)}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Alimentación: ",t]}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Planes de Nutrición del Lote"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("form",{onSubmit:f,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[c.jsx(Ki,{size:20})," Asignar Nuevo Plan"]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"planDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Plan (Ej: 2kg de concentrado/día)"}),c.jsx("textarea",{id:"planDetails",rows:3,value:i,onChange:p=>a(p.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"planStartDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),c.jsx("input",{id:"planStartDate",type:"date",value:s,onChange:p=>o(p.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Plan"}),l&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${l.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[l.type==="success"?c.jsx(Ga,{size:18}):c.jsx(dr,{size:18}),c.jsx("span",{children:l.text})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[c.jsx(sT,{size:20})," Historial de Planes"]}),d.length>0?c.jsx("div",{className:"space-y-2",children:d.map(p=>c.jsx(e$e,{plan:p},p.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay planes de alimentación registrados para este lote."})})]})]})}const n$e=({event:t})=>c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("p",{className:"font-semibold text-white",children:t.details}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Aplicado el: ",new Date(t.date+"T00:00:00").toLocaleDateString("es-VE")]})]});function r$e({lotName:t,onBack:e}){const{events:n,addBatchEvent:r}=Kt(),[i,a]=I.useState(""),[s,o]=I.useState(new Date().toISOString().split("T")[0]),[l,u]=I.useState(null),d=I.useMemo(()=>{const p=n.filter(h=>h.lotName===t&&h.type==="Tratamiento").reduce((h,g)=>{const m=`${g.date}-${g.details}`;return h[m]||(h[m]=g),h},{});return Object.values(p).sort((h,g)=>new Date(g.date).getTime()-new Date(h.date).getTime())},[n,t]),f=async p=>{if(p.preventDefault(),u(null),!i.trim()){u({type:"error",text:"Los detalles del tratamiento no pueden estar vacíos."});return}try{await r({lotName:t,details:i,date:s,type:"Tratamiento"}),u({type:"success",text:"Tratamiento registrado con éxito para todo el lote."}),a("")}catch(h){u({type:"error",text:"No se pudo registrar el tratamiento."}),console.error(h)}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Tratamientos: ",t]}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Sanidad Colectiva del Lote"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("form",{onSubmit:f,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[c.jsx(Ki,{size:20})," Registrar Tratamiento al Lote"]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"treatmentDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Tratamiento (Ej: Vacuna Triple)"}),c.jsx("textarea",{id:"treatmentDetails",rows:3,value:i,onChange:p=>a(p.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"treatmentDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),c.jsx("input",{id:"treatmentDate",type:"date",value:s,onChange:p=>o(p.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Tratamiento"}),l&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${l.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[l.type==="success"?c.jsx(Ga,{size:18}):c.jsx(dr,{size:18}),c.jsx("span",{children:l.text})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[c.jsx(Xce,{size:20})," Historial de Tratamientos del Lote"]}),d.length>0?c.jsx("div",{className:"space-y-2",children:d.map(p=>c.jsx(n$e,{event:p},p.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay tratamientos registrados para este lote."})})]})]})}const vu=({active:t,payload:e,label:n})=>{if(t&&e&&e.length){const r=e[0].payload.name==="Promedio Rebaño";return"range"in e[0].payload?c.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[c.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Rango: ",e[0].payload.range," Kg"]}),c.jsxs("p",{className:"font-bold text-base",children:["Nº de Cabras: ",e[0].value]})]}):c.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[c.jsx("p",{className:"label text-brand-light-gray text-sm",children:r?`Días en Leche (DEL): ${n}`:`DEL: ${n}`}),c.jsx("p",{className:"font-bold text-base",children:r?`Promedio: ${e[0].value.toFixed(2)} Kg`:`Producción: ${e[0].value.toFixed(2)} Kg`})]})}return null},th=({icon:t,label:e,value:n,unit:r,colorClass:i})=>c.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border ${i||""}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(t,{size:14}),c.jsx("span",{children:e})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[n," ",c.jsx("span",{className:"text-lg text-zinc-400",children:r})]})]});function i$e({animalId:t,onBack:e}){const{animals:n,bodyWeighings:r,appConfig:i}=Kt(),a=I.useMemo(()=>{const m=n.find(P=>P.id===t);if(!m)return null;const v=r.filter(P=>P.animalId===m.id).sort((P,O)=>new Date(P.date).getTime()-new Date(O.date).getTime()),y=tD(m.birthWeight,v),b=Mc(m.birthDate),S=v.length>0?v[v.length-1].kg:m.birthWeight||0,A=SLe(m),C=_Le(m,v),D=v.map(P=>({age:(new Date(P.date).getTime()-new Date(m.birthDate+"T00:00:00Z").getTime())/(1e3*60*60*24),[m.id]:P.kg}));m.birthWeight&&D.unshift({age:0,[m.id]:m.birthWeight});const N=[60,90,180,270].map(P=>({days:P,weight:EX(v,m.birthDate,P)}));return{animal:m,gdp:y,formattedAge:b,latestWeight:S,chartData:D,interpolatedWeights:N,weaningIndex:A,precocityIndex:C}},[t,n,r]);if(!a)return c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."})});const{animal:s,gdp:o,formattedAge:l,latestWeight:u,chartData:d,interpolatedWeights:f,weaningIndex:p,precocityIndex:h}=a,g=s.name?String(s.name).toUpperCase().trim():"";return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4 sticky top-0 bg-brand-dark/80 backdrop-blur-md z-10 border-b border-brand-border -mx-4 mb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow min-w-0",children:[c.jsx("h1",{className:"text-3xl font-mono font-bold tracking-tight text-white truncate",children:s.id.toUpperCase()}),g&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:g}),c.jsx("p",{className:"text-lg text-zinc-400 mt-1",children:"Perfil de Crecimiento"})," "]}),c.jsx("div",{className:"w-8"})," "]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 px-4",children:[c.jsx(th,{icon:If,label:"Peso Actual",value:u.toFixed(2),unit:"Kg"}),c.jsx(th,{icon:ms,label:"GDP General",value:o.overall?(o.overall*1e3).toFixed(0):"N/A",unit:"g/día"}),c.jsx(th,{icon:so,label:"Edad Actual",value:l}),c.jsx(th,{icon:zce,label:"Nº Pesajes",value:d.length>0?d.length-(s.birthWeight?1:0):0})]}),(p||h)&&c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 px-4",children:[p&&c.jsx(th,{icon:lue,label:"Índice Destete (60d)",value:p.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"}),c.jsx(th,{icon:Cce,label:"Meta Destete (Config)",value:i.pesoDesteteMetaKg.toFixed(2),unit:"Kg",colorClass:"border-blue-400/50"}),h&&c.jsx(th,{icon:sue,label:"Índice Precocidad (7m)",value:h.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"})]}),c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Curva de Crecimiento"}),d.length>1?c.jsx("div",{className:"w-full h-64",children:c.jsx(ki,{children:c.jsxs(yLe,{data:d,margin:{top:5,right:20,left:-10,bottom:5},children:[c.jsx(Jc,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),c.jsx(ii,{dataKey:"age",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Edad (días)",position:"insideBottom",offset:-5,fill:"rgba(255,255,255,0.5)"}}),c.jsx(ni,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Peso (Kg)",angle:-90,position:"insideRight",fill:"rgba(255,255,255,0.5)"},domain:["dataMin - 2","dataMax + 2"]}),c.jsx(xr,{content:c.jsx(vu,{})}),c.jsx(Bl,{verticalAlign:"top",height:36}),c.jsx(ud,{type:"monotone",dataKey:s.id,name:ar(s),stroke:"#34C759",strokeWidth:2.5,dot:{r:4},activeDot:{r:6}})]})})}):c.jsx("p",{className:"text-center text-zinc-500 py-8",children:"No hay suficientes pesajes para mostrar la curva."})]})}),c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Hitos de Crecimiento (Pesos Estimados)"}),d.length>1?c.jsx("div",{className:"grid grid-cols-2 gap-4",children:f.map(({days:m,weight:v})=>c.jsxs("div",{className:"bg-black/20 p-3 rounded-lg text-center",children:[c.jsxs("p",{className:"text-sm text-zinc-400",children:["Peso a los ",m," días"]}),c.jsx("p",{className:"text-xl font-bold text-white",children:v?`${v.toFixed(2)} Kg`:"---"})]},m))}):c.jsx("p",{className:"text-center text-zinc-500 py-4",children:"Se necesitan más pesajes para estimar los hitos."})]})})]})}const a$e=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result.split(",")[1]),r.onerror=i=>n(i)}),s$e=({onImageSelect:t})=>{const e=I.useRef(null),n=r=>{var i;(i=r.target.files)!=null&&i[0]&&t(r.target.files[0])};return c.jsxs("div",{className:"space-y-4 animate-fade-in",children:[c.jsx("input",{type:"file",ref:e,accept:"image/*",onChange:n,className:"hidden"}),c.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.setAttribute("capture","environment"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-blue-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(Ace,{className:"w-12 h-12 mb-2 text-blue-400"}),c.jsx("span",{className:"text-lg font-semibold",children:"Tomar Foto"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Usa la cámara para escanear"})]}),c.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.removeAttribute("capture"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-green-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(Lce,{className:"w-12 h-12 mb-2 text-green-400"}),c.jsx("span",{className:"text-lg font-semibold",children:"Seleccionar Archivo"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Elige una foto de tu galería"})]})]})};function o$e({onBack:t}){const[e,n]=I.useState("capture"),[r,i]=I.useState(""),[a,s]=I.useState(""),o=async l=>{var u,d;n("loading"),i(""),s("");try{const f=await a$e(l),m=await fetch("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAsHrxI8e8prsvYNvx992YyC26n592GfWk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:f},features:[{type:"TEXT_DETECTION"}]}]})});if(!m.ok){const b=await m.json();throw new Error(b.error.message||"Error en la API de Google Vision.")}const y=(d=(u=(await m.json()).responses[0])==null?void 0:u.fullTextAnnotation)==null?void 0:d.text;if(y)s(y),n("verification");else throw new Error("No se pudo detectar texto en la imagen. Intenta con una foto más clara.")}catch(f){i(f.message||"Ocurrió un error inesperado."),n("error")}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Escanear Cuaderno"}),c.jsx("p",{className:"text-xl text-zinc-400",children:"Digitalización Asistida"})]}),c.jsx("div",{className:"w-8"})]}),e==="capture"&&c.jsx(s$e,{onImageSelect:o}),e==="loading"&&c.jsxs("div",{className:"text-center py-20 animate-fade-in",children:[c.jsx(BW,{className:"w-12 h-12 text-amber-400 mx-auto animate-spin"}),c.jsx("p",{className:"mt-4 text-zinc-400",children:"Analizando imagen con IA..."})]}),e==="verification"&&c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider border-b border-brand-border pb-2",children:[c.jsx(pS,{}),c.jsx("span",{children:"Texto Reconocido"})]}),c.jsx("textarea",{readOnly:!0,value:a,className:"w-full h-48 bg-black/20 text-white p-3 rounded-lg border border-zinc-700"}),c.jsx("p",{className:"text-xs text-zinc-500 text-center",children:"Funcionalidad de autocompletado de pesajes próximamente."}),c.jsx("button",{onClick:()=>n("capture"),className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Escanear Otra Imagen"})]}),e==="error"&&c.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-6 text-center animate-fade-in",children:[c.jsx(dr,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),c.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Ocurrió un Error"}),c.jsx("p",{className:"text-red-300",children:r}),c.jsx("button",{onClick:()=>n("capture"),className:"mt-6 bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Intentar de Nuevo"})]})]})}const UF=152,AD=()=>{const{animals:t,breedingSeasons:e,sireLots:n,serviceRecords:r,fathers:i}=Kt();return{forecastBySeason:I.useMemo(()=>{var d;const s=[],o=e.filter(f=>f.status==="Activo");for(const f of o){const p=n.filter(m=>m.seasonId===f.id);if(p.length===0)continue;const h=new Set(p.map(m=>m.id)),g=t.filter(m=>m.sireLotId&&h.has(m.sireLotId));for(const m of g){const v=r.filter(S=>S.femaleId===m.id&&S.sireLotId===m.sireLotId&&new Date(S.serviceDate)>=new Date(f.startDate)&&new Date(S.serviceDate)<=new Date(f.endDate)).sort((S,A)=>new Date(A.serviceDate).getTime()-new Date(S.serviceDate).getTime())[0],y=n.find(S=>S.id===m.sireLotId);if(!y)continue;const b=((d=i.find(S=>S.id===y.sireId))==null?void 0:d.name)||"Desconocido";if(v){const S=new Date(v.serviceDate);S.setDate(S.getDate()+UF),s.push({animal:m,dueDate:S,type:"Confirmada",sireId:y.sireId,sireName:b,seasonId:f.id})}else{const A=new Date(f.startDate);A.setDate(A.getDate()+10+UF),s.push({animal:m,dueDate:A,type:"Probable",sireId:y.sireId,sireName:b,seasonId:f.id})}}}const l=s.reduce((f,p)=>{const{seasonId:h}=p;return f[h]||(f[h]=[]),f[h].push(p),f},{});let u=Object.entries(l).map(([f,p])=>{const h=e.find(y=>y.id===f),g=p.map(y=>y.dueDate.getTime()),m=new Date(Math.min(...g)),v=new Date(Math.max(...g));return{seasonId:f,seasonName:h.name,projectedStartDate:p.length>0?m:null,projectedEndDate:p.length>0?v:null,events:p.sort((y,b)=>y.dueDate.getTime()-b.dueDate.getTime()),totalEvents:p.length,confirmedEvents:p.filter(y=>y.type==="Confirmada").length,probableEvents:p.filter(y=>y.type==="Probable").length,daysSinceLastSeason:null}}).sort((f,p)=>f.projectedStartDate&&p.projectedStartDate?f.projectedStartDate.getTime()-p.projectedStartDate.getTime():f.projectedStartDate?-1:p.projectedStartDate?1:0);if(u.length>1){for(let f=1;f<u.length;f++)if(u[f].projectedStartDate&&u[f-1].projectedEndDate){const p=u[f].projectedStartDate,h=u[f-1].projectedEndDate,g=p.getTime()-h.getTime(),m=Math.ceil(g/(1e3*60*60*24));u[f].daysSinceLastSeason=m}}return u},[t,e,n,r,i])}},l$e=`
  .rdp { --rdp-cell-size: 45px; --rdp-accent-color: #FF9500; --rdp-background-color: #2C2C2E; --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: #2C2C2E; --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF; width: 100%; }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
  .day-confirmed { position: relative; }
  .day-confirmed::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #34C759; }
  .day-probable { position: relative; }
  .day-probable::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #FF9500; opacity: 0.7; }
`,c$e=({seasonForecast:t,onClick:e})=>{var n,r;return c.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border hover:border-brand-blue transition-colors",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.seasonName}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[(n=t.projectedStartDate)==null?void 0:n.toLocaleDateString("es-VE",{month:"long",day:"numeric"})," - ",(r=t.projectedEndDate)==null?void 0:r.toLocaleDateString("es-VE",{month:"long",day:"numeric",year:"numeric"})]})]}),t.daysSinceLastSeason!==null&&t.daysSinceLastSeason>0&&c.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[c.jsx("p",{className:"text-xs text-zinc-500",children:"Separación"}),c.jsxs("p",{className:"font-semibold text-white",children:[t.daysSinceLastSeason," días"]})]})]}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700/50 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"font-bold text-2xl text-white",children:t.totalEvents}),c.jsx("p",{className:"text-xs text-zinc-400",children:"Partos"})]}),c.jsxs("div",{className:"text-left text-xs",children:[c.jsxs("p",{className:"flex items-center gap-1 text-brand-green",children:[c.jsx(Ga,{size:12})," Confirmados: ",t.confirmedEvents]}),c.jsxs("p",{className:"flex items-center gap-1 text-brand-orange",children:[c.jsx(oT,{size:12})," Probables: ",t.probableEvents]})]})]}),c.jsx(qi,{className:"text-zinc-600"})]})]})},u$e=({forecastItem:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-white",children:t.animal.id}),c.jsxs("p",{className:"text-xs text-zinc-400",children:["Reproductor: ",t.sireName]})]}),c.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?c.jsx(Ga,{size:16}):c.jsx(oT,{size:16}),c.jsx("span",{children:t.type})]})]});function d$e({navigateTo:t}){const{forecastBySeason:e}=AD(),[n,r]=I.useState("cards"),[i,a]=I.useState(void 0),[s,o]=I.useState(new Date),l=I.useMemo(()=>e.flatMap(f=>f.events),[e]),u=I.useMemo(()=>({confirmed:l.filter(f=>f.type==="Confirmada").map(f=>f.dueDate),probable:l.filter(f=>f.type==="Probable").map(f=>f.dueDate)}),[l]),d=I.useMemo(()=>i?l.filter(f=>f.dueDate.getFullYear()===i.getFullYear()&&f.dueDate.getMonth()===i.getMonth()&&f.dueDate.getDate()===i.getDate()):[],[l,i]);return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[c.jsx("style",{children:l$e}),c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Calendario de Partos"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Proyecciones del Rebaño"})]}),c.jsxs("div",{className:"flex justify-center p-1 bg-zinc-800 rounded-xl",children:[c.jsxs("button",{onClick:()=>r("cards"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="cards"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx($W,{size:16})," Temporadas"]}),c.jsxs("button",{onClick:()=>r("calendar"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="calendar"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx(so,{size:16})," Calendario"]})]}),n==="cards"&&c.jsx("div",{className:"space-y-3",children:e.length>0?e.map(f=>c.jsx(c$e,{seasonForecast:f,onClick:()=>t({name:"birthing-season-detail",seasonId:f.seasonId})},f.seasonId)):c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[c.jsx(Wl,{size:32,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-400",children:"No hay temporadas de parto activas o proyectadas."})]})}),n==="calendar"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:c.jsx(Sp,{mode:"single",selected:i,onSelect:a,month:s,onMonthChange:o,locale:Gb,modifiers:{confirmed:u.confirmed,probable:u.probable},modifiersClassNames:{confirmed:"day-confirmed",probable:"day-probable"},showOutsideDays:!0})}),i&&c.jsxs("div",{className:"space-y-3 pt-2",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Proyecciones para el ",i.toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})]}),d.length>0?c.jsx("div",{className:"space-y-2",children:d.map(f=>c.jsx(u$e,{forecastItem:f,onClick:()=>t({name:"rebano-profile",animalId:f.animal.id})},f.animal.id))}):c.jsx("div",{className:"text-center py-6 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay partos proyectados para este día."})})]})]})]})}const f$e=({forecastItem:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-white",children:t.animal.id}),c.jsxs("p",{className:"text-xs text-zinc-400",children:["Reproductor: ",t.sireName]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?c.jsx(Ga,{size:16}):c.jsx(oT,{size:16}),c.jsx("span",{children:t.type})]}),c.jsx(qi,{className:"text-zinc-600"})]})]}),h$e=t=>{const e=new Date(t.getUTCFullYear(),t.getUTCMonth(),1),n=e.getUTCDay()===0?6:e.getUTCDay()-1,r=t.getUTCDate(),i=Math.ceil((r+n)/7),a=t.toLocaleString("es-VE",{month:"short",timeZone:"UTC"});return`${a.charAt(0).toUpperCase()+a.slice(1)} - Sem ${i}`};function p$e({seasonId:t,onBack:e,navigateTo:n}){const{forecastBySeason:r}=AD(),i=I.useMemo(()=>r.find(s=>s.seasonId===t),[r,t]),a=I.useMemo(()=>{if(!i)return[];const s={};return i.events.forEach(o=>{const l=o.dueDate,u=h$e(l);if(!s[u]){const d=l.getUTCDate(),f=l.getUTCDay()===0?6:l.getUTCDay()-1,p=new Date(l);p.setUTCDate(d-f),s[u]={count:0,startDate:p}}s[u].count++}),Object.entries(s).map(([o,l])=>({name:o,partos:l.count,startDate:l.startDate})).sort((o,l)=>o.startDate.getTime()-l.startDate.getTime())},[i]);return i?c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:i.seasonName}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de Proyección de Partos"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[c.jsx(Ib,{size:20})," Proyección Semanal de Partos"]}),c.jsx("div",{className:"w-full h-56",children:c.jsx(ki,{children:c.jsxs(Po,{data:a,margin:{top:5,right:10,left:-20,bottom:5},children:[c.jsx(Jc,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),c.jsx(ii,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(ni,{allowDecimals:!1,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(xr,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"}}),c.jsx(Ti,{dataKey:"partos",name:"Nº de Partos",fill:"#007AFF",radius:[4,4,0,0]})]})})})]}),c.jsxs("div",{className:"space-y-3 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Lista de Animales (",i.totalEvents,")"]}),c.jsxs("div",{className:"space-y-2",children:["M                   ",i.events.map(s=>c.jsx(f$e,{forecastItem:s,onClick:()=>n({name:"rebano-profile",animalId:s.animal.id})},s.animal.id))]})]})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada de Partos no encontrada."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const nh=({title:t,icon:e,children:n})=>c.jsxs("div",{className:"mb-6",children:[c.jsxs("h2",{className:"text-sm font-semibold text-zinc-400 uppercase tracking-wide flex items-center gap-2 mb-2 px-4",children:[c.jsx(e,{size:16}),t]}),c.jsx("div",{className:"bg-brand-glass rounded-2xl border border-brand-border divide-y divide-brand-border overflow-hidden",children:n})]}),di=be.forwardRef(({label:t,unit:e,...n},r)=>c.jsxs("div",{className:"p-3 bg-ios-modal-bg flex justify-between items-center",children:[c.jsx("label",{htmlFor:n.id||n.name,className:"text-white text-base",children:t}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{ref:r,...n,className:`w-24 bg-zinc-700/80 rounded-lg p-2 text-white text-right font-mono text-base focus:outline-none focus:ring-2 focus:ring-brand-orange ${n.type==="text"?"font-sans":""}`}),e&&c.jsx("span",{className:"text-zinc-400 w-6 text-left",children:e})]})]})),m$e=({label:t,value:e,onChange:n})=>c.jsxs("div",{className:"p-3 bg-ios-modal-bg flex justify-between items-center",children:[c.jsx("label",{className:"text-white text-base",children:t}),c.jsx("button",{type:"button",role:"switch","aria-checked":e,onClick:()=>n(!e),className:`relative inline-flex h-8 w-14 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out ${e?"bg-brand-green":"bg-zinc-700"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-7 w-7 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${e?"translate-x-6":"translate-x-0"}`})})]});function g$e({onBack:t}){const{appConfig:e,updateAppConfig:n,isLoadingConfig:r}=Kt(),[i,a]=I.useState(e||Hp),[s,o]=I.useState("idle");I.useEffect(()=>{e&&a(e)},[e]);const l=f=>{const{name:p,value:h,type:g}=f.target;let m=h;g==="number"&&(m=h===""?0:parseFloat(h)),g==="checkbox"&&(m=f.target.checked),a(v=>({...v,[p]:m}))},u=f=>{a(p=>({...p,theme:f?"dark":"light"}))},d=async()=>{o("saving");try{await n(i),o("success"),setTimeout(()=>{o("idle"),t()},1500)}catch(f){console.error("Error al guardar configuración:",f),o("idle")}};return r?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando configuración..."})}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col",style:{height:"calc(100vh - 64px)"},children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between pt-8 pb-4 px-4 sticky top-0 bg-brand-dark/80 backdrop-blur-lg z-10 border-b border-brand-border",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Configuración"}),c.jsxs("button",{onClick:d,disabled:s!=="idle",className:`px-5 py-2 rounded-xl font-bold transition-colors text-lg flex items-center gap-2 ${s==="idle"?"bg-brand-orange text-black":s==="saving"?"bg-zinc-600 text-white":"bg-brand-green text-white"}`,children:[s==="idle"&&c.jsx(ev,{size:18}),s==="saving"&&c.jsx(jc,{size:18,className:"animate-spin"}),s==="success"&&c.jsx(Ga,{size:18}),s==="saving"?"Guardando...":s==="success"?"Guardado":"Guardar"]})]}),c.jsxs("main",{className:"flex-1 overflow-y-auto pb-24 pt-4",children:[c.jsxs(nh,{title:"General",icon:Ice,children:[c.jsx(di,{label:"Nombre de la Finca",type:"text",name:"nombreFinca",value:i.nombreFinca,onChange:l}),c.jsx(m$e,{label:"Modo Oscuro",value:i.theme==="dark",onChange:f=>u(f)})]}),c.jsxs(nh,{title:"Índices Biológicos",icon:qW,children:[c.jsx(di,{label:"% de Preñez",type:"number",name:"porcentajePrenez",value:i.porcentajePrenez,onChange:l,unit:"%"}),c.jsx(di,{label:"% Prolificidad",type:"number",name:"porcentajeProlificidad",value:i.porcentajeProlificidad,onChange:l,unit:"%"}),c.jsx(di,{label:"% Mortalidad Crías (0-3m)",type:"number",name:"mortalidadCrias",value:i.mortalidadCrias,onChange:l,unit:"%"}),c.jsx(di,{label:"% Mortalidad Levante (3-12m)",type:"number",name:"mortalidadLevante",value:i.mortalidadLevante,onChange:l,unit:"%"}),c.jsx(di,{label:"% Mortalidad Cabras (Adultas)",type:"number",name:"mortalidadCabras",value:i.mortalidadCabras,onChange:l,unit:"%"}),c.jsx(di,{label:"% Reemplazo (Anual)",type:"number",name:"tasaReemplazo",value:i.tasaReemplazo,onChange:l,unit:"%"}),c.jsx(di,{label:"% Eliminación Cabritos",type:"number",name:"eliminacionCabritos",value:i.eliminacionCabritos,onChange:l,unit:"%"})]}),c.jsxs(nh,{title:"Manejo Reproductivo",icon:Wl,children:[c.jsx(di,{label:"Peso 1er Servicio",type:"number",name:"pesoPrimerServicioKg",value:i.pesoPrimerServicioKg,onChange:l,unit:"Kg"}),c.jsx(di,{label:"Días de Gestación",type:"number",name:"diasGestacion",value:i.diasGestacion,onChange:l,unit:"días"}),c.jsx(di,{label:"Días Confirmar Preñez",type:"number",name:"diasConfirmarPrenez",value:i.diasConfirmarPrenez,onChange:l,unit:"días"}),c.jsx(di,{label:"Días de Pre-parto",type:"number",name:"diasPreParto",value:i.diasPreParto,onChange:l,unit:"días"})]}),c.jsxs(nh,{title:"Manejo Productivo (Leche)",icon:WW,children:[c.jsx(di,{label:"Días de Lactancia (Meta)",type:"number",name:"diasLactanciaObjetivo",value:i.diasLactanciaObjetivo,onChange:l,unit:"días"}),c.jsx(di,{label:"Días Secado (Meta)",type:"number",name:"diasSecadoObjetivo",value:i.diasSecadoObjetivo,onChange:l,unit:"días"})]}),c.jsxs(nh,{title:"Manejo Crecimiento (Kilos)",icon:ms,children:[c.jsx(di,{label:"Edad Destete (Meta)",type:"number",name:"edadDesteteDias",value:i.edadDesteteDias,onChange:l,unit:"días"}),c.jsx(di,{label:"Peso Destete (Meta)",type:"number",name:"pesoDesteteMetaKg",value:i.pesoDesteteMetaKg,onChange:l,unit:"Kg"})]}),c.jsxs(nh,{title:"Manejo Sanitario (StockCare)",icon:hp,children:[c.jsx(di,{label:"Días Alerta (Atraso)",type:"number",name:"diasAlertaAtraso",value:i.diasAlertaAtraso,onChange:l,unit:"días"}),c.jsx(di,{label:"Días Retiro Leche",type:"number",name:"diasRetiroLecheDefault",value:i.diasRetiroLecheDefault,onChange:l,unit:"días"}),c.jsx(di,{label:"Días Retiro Carne",type:"number",name:"diasRetiroCarneDefault",value:i.diasRetiroCarneDefault,onChange:l,unit:"días"})]}),c.jsxs(nh,{title:"Economía (Cents)",icon:No,children:[c.jsx(di,{label:"Símbolo Moneda",type:"text",name:"monedaSimbolo",value:i.monedaSimbolo,onChange:l}),c.jsx(di,{label:"Costo Saco Alimento",type:"number",name:"costoSacoAlimento",value:i.costoSacoAlimento,onChange:l,unit:i.monedaSimbolo}),c.jsx(di,{label:"Peso Saco Alimento",type:"number",name:"pesoSacoAlimentoKg",value:i.pesoSacoAlimentoKg,onChange:l,unit:"Kg"}),c.jsx(di,{label:"Precio Venta Leche",type:"number",name:"precioLecheLitro",value:i.precioLecheLitro,onChange:l,unit:`${i.monedaSimbolo}/L`}),c.jsx(di,{label:"Precio Venta Cabrito",type:"number",name:"precioVentaCabritoKg",value:i.precioVentaCabritoKg,onChange:l,unit:`${i.monedaSimbolo}/Kg`}),c.jsx(di,{label:"Precio Venta Descarte",type:"number",name:"precioVentaDescarteAdulto",value:i.precioVentaDescarteAdulto,onChange:l,unit:i.monedaSimbolo})]})]})]})}const v$e=[{id:"rebano",name:"Rebaño",icon:tv,color:"bg-amber-600"},{id:"lactokeeper",name:"LactoKeeper",icon:wf,color:"bg-brand-blue"},{id:"kilos",name:"Kilos",icon:If,color:"bg-brand-green"},{id:"salud",name:"StockCare",icon:mS,color:"bg-teal-500"},{id:"cents",name:"Cents",icon:No,color:"bg-yellow-500"},{id:"evolucion",name:"Evolución",icon:ms,color:"bg-indigo-500"}],Zb=({onSwitchModule:t})=>{const[e,n]=I.useState(!1),r=i=>{n(!1),t(i)};return c.jsxs("div",{className:"fixed bottom-24 right-4 z-40 flex flex-col items-end gap-4",children:[c.jsx("div",{className:`flex flex-col items-end gap-4 transition-all duration-300 ease-in-out overflow-hidden ${e?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:v$e.map(i=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"bg-black/60 backdrop-blur-md text-white text-sm font-semibold px-3 py-1 rounded-md shadow-lg",children:i.name}),c.jsx("button",{onClick:()=>r(i.id),className:`w-14 h-14 rounded-full flex items-center justify-center text-white shadow-lg ${i.color} transform transition-transform hover:scale-110`,"aria-label":`Cambiar al módulo ${i.name}`,children:c.jsx(i.icon,{size:28})})]},i.id))}),c.jsx("button",{onClick:()=>n(!e),className:"w-16 h-16 rounded-full flex items-center justify-center text-black bg-brand-amber shadow-2xl shadow-black/50 transform transition-transform duration-200 hover:scale-110 pointer-events-auto","aria-label":"Seleccionar módulo",children:c.jsx("div",{className:`transform transition-transform duration-300 ${e?"rotate-180 scale-75":"rotate-0"}`,children:e?c.jsx(Ic,{size:32}):c.jsx(zW,{size:32})})})]})};function y$e(t){return vl({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224l0 32 0 160c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-88.2c9.9 6.6 20.6 12 32 16.1l0 24.2c0 8.8 7.2 16 16 16s16-7.2 16-16l0-16.9c5.3 .6 10.6 .9 16 .9s10.7-.3 16-.9l0 16.9c0 8.8 7.2 16 16 16s16-7.2 16-16l0-24.2c11.4-4 22.1-9.4 32-16.1l0 88.2c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-160 32 32 0 49.5c0 9.5 2.8 18.7 8.1 26.6L530 427c8.8 13.1 23.5 21 39.3 21c22.5 0 41.9-15.9 46.3-38l20.3-101.6c2.6-13-.3-26.5-8-37.3l-3.9-5.5 0-81.6c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 14.4-52.9-74.1C496 86.5 452.4 64 405.9 64L272 64l-16 0-64 0-48 0C77.7 64 24 117.7 24 184l0 54C9.4 249.8 0 267.8 0 288l0 17.6c0 8 6.4 14.4 14.4 14.4C46.2 320 72 294.2 72 262.4l0-6.4 0-32 0-40c0-24.3 12.1-45.8 30.5-58.9C98.3 135.9 96 147.7 96 160l0 64zM560 336a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zM166.6 166.6c-4.2-4.2-6.6-10-6.6-16c0-12.5 10.1-22.6 22.6-22.6l178.7 0c12.5 0 22.6 10.1 22.6 22.6c0 6-2.4 11.8-6.6 16l-23.4 23.4C332.2 211.8 302.7 224 272 224s-60.2-12.2-81.9-33.9l-23.4-23.4z"},child:[]}]})(t)}const b$e={idle:{Icon:Dce,color:"text-green-500",label:"Datos sincronizados"},syncing:{Icon:kce,color:"text-amber-500 animate-spin-slow",label:"Sincronizando datos..."},offline:{Icon:Tce,color:"text-red-500",label:"Sin conexión"}},bv=({status:t})=>{const{Icon:e,color:n,label:r}=b$e[t];return c.jsx("div",{className:"flex items-center gap-2",title:r,children:c.jsx(e,{className:`w-5 h-5 ${n}`})})};function x$e({initialState:t,onSwitchModule:e}){const{syncStatus:n}=Kt(),[r,i]=I.useState({name:"lots-dashboard"}),[a,s]=I.useState([]);I.useEffect(()=>{t&&t.page?(i(t.page),s([])):(i({name:"lots-dashboard"}),s([]))},[t]);const o=[{page:{name:"lots-dashboard"},label:"Lotes",icon:ZW,mapsTo:["lots-dashboard","lot-detail","breeding-season-detail","sire-lot-detail","feeding-plan","batch-treatment"]},{page:{name:"herd"},label:"Rebaño",icon:y$e,mapsTo:["herd","rebano-profile","manage-lots","lactation-profile","growth-profile","configuracion"]},{page:{name:"farm-calendar"},label:"Calendario",icon:aT,mapsTo:["farm-calendar","birthing-season-detail"]},{page:{name:"add-animal"},label:"Añadir",icon:ol,mapsTo:["add-animal","ocr"]}],l=p=>{s(h=>[...h,r]),i(p)},u=()=>{const p=a.pop();p?(s([...a]),i(p)):t&&t.sourceModule?e(t.sourceModule):i({name:"lots-dashboard"})},d=p=>{s([]),i(p)},f=()=>{switch(r.name){case"lots-dashboard":return c.jsx(SF,{navigateTo:l});case"lot-detail":return c.jsx(oze,{lotName:r.lotName,onBack:u,navigateTo:l});case"breeding-season-detail":return c.jsx(Uze,{seasonId:r.seasonId,onBack:u,navigateTo:l});case"sire-lot-detail":return c.jsx(Hze,{lotId:r.lotId,onBack:u,navigateTo:l});case"herd":return c.jsx(gze,{navigateTo:l,locationFilter:r.locationFilter});case"manage-lots":return c.jsx(Lze,{onBack:()=>d({name:"herd"})});case"management":return c.jsx(Rze,{onSelectAnimal:p=>l({name:"rebano-profile",animalId:p})});case"add-animal":return c.jsx(fze,{onBack:()=>d({name:"herd"})});case"rebano-profile":return c.jsx(Oze,{animalId:r.animalId,onBack:u,navigateTo:l});case"lactation-profile":return c.jsx(rQ,{animalId:r.animalId,onBack:u,navigateTo:l});case"growth-profile":return c.jsx(i$e,{animalId:r.animalId,onBack:u});case"ocr":return c.jsx(o$e,{onBack:u});case"feeding-plan":return c.jsx(t$e,{lotName:r.lotName,onBack:u});case"batch-treatment":return c.jsx(r$e,{lotName:r.lotName,onBack:u});case"farm-calendar":return c.jsx(d$e,{navigateTo:l});case"birthing-season-detail":return c.jsx(p$e,{seasonId:r.seasonId,onBack:u,navigateTo:l});case"configuracion":return c.jsx(g$e,{navigateTo:l,onBack:u});default:return c.jsx(SF,{navigateTo:l})}};return c.jsxs("div",{className:"font-sans text-gray-200 min-h-screen animate-fade-in",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(tv,{className:"text-brand-orange",size:28}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),c.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Rebaño"})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(bv,{status:n}),c.jsx("button",{onClick:()=>l({name:"configuracion"}),className:"p-2 text-zinc-400 hover:text-white transition-colors",title:"Configuración",children:c.jsx(hT,{size:20})})]})]})}),c.jsx("main",{className:"pt-16 pb-16",children:f()})," ",c.jsx(Zb,{onSwitchModule:e}),c.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-20 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around h-16",children:[o.map(p=>{const h=p.mapsTo.includes(r.name);return c.jsxs("button",{onClick:()=>d(p.page),className:`relative flex flex-col items-center justify-center pt-3 pb-2 w-full transition-colors ${h?"text-amber-400":"text-gray-500 hover:text-white"}`,children:[c.jsx(p.icon,{className:"w-6 h-6"}),c.jsx("span",{className:"text-xs font-semibold mt-1",children:p.label})]},p.label)}),c.jsxs("button",{onClick:()=>ig.signOut(),className:"relative flex flex-col items-center justify-center pt-3 pb-2 w-full text-gray-500 hover:text-red-400 transition-colors",children:[c.jsx(UW,{className:"w-6 h-6"}),c.jsx("span",{className:"text-xs font-semibold mt-1",children:"Salir"})]})]})]})}function WF({onNavigateToAnalysis:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=Kt(),[a,s]=I.useState("current"),[o,l]=I.useState(!1),[u,d]=I.useState(!1),f=I.useMemo(()=>{if(i||!n.length||!e.length)return{herdAverage:0,activeGoats:0,herdLactationCurve:[],gaussData:{distribution:[],mean:0,stdDev:0}};let p=0;if(n.length>0){const D=n.reduce((j,N)=>N.date>j?N.date:j,n[0].date);p=new Set(n.filter(j=>j.date===D).map(j=>j.goatId)).size}let h=n;if(a==="current"){const D=new Set(r.filter(j=>j.status==="activa").map(j=>j.goatId));h=n.filter(j=>D.has(j.goatId))}const g={};h.forEach(D=>{const j=r.filter(P=>P.goatId===D.goatId&&new Date(D.date)>=new Date(P.parturitionDate)).sort((P,O)=>new Date(O.parturitionDate).getTime()-new Date(P.parturitionDate).getTime())[0];if(!j)return;const N=Vf(j.parturitionDate,D.date);g[N]||(g[N]={totalKg:0,count:0}),g[N].totalKg+=D.kg,g[N].count++});const m=Object.entries(g).map(([D,j])=>({del:parseInt(D),kg:j.totalKg/j.count,name:"Promedio Rebaño"})).sort((D,j)=>D.del-j.del),v=e.map(D=>{const j=n.filter(P=>P.goatId===D.id);return j.length===0?null:{avg:j.reduce((P,O)=>P+O.kg,0)/j.length}}).filter(Boolean),y=v.length>0?v.reduce((D,j)=>D+j.avg,0)/v.length:0,b=v.length>0?Math.sqrt(v.reduce((D,j)=>D+Math.pow(j.avg-y,2),0)/v.length):0,S=[];if(v.length>0){const D=Math.floor(Math.min(...v.map(N=>N.avg))*4)/4,j=Math.ceil(Math.max(...v.map(N=>N.avg))*4)/4;for(let N=D;N<=j;N+=.25){const P=N,O=N+.25,T=v.filter(M=>M.avg>=P&&M.avg<O).length;T>0&&S.push({range:`${P.toFixed(2)}`,count:T})}}const A={distribution:S,mean:y,stdDev:b};return{herdAverage:n.length>0?n.reduce((D,j)=>D+j.kg,0)/n.length:0,activeGoats:p,herdLactationCurve:m,gaussData:A}},[e,n,r,i,a]);return i?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos del rebaño..."})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 px-4",children:[c.jsxs("header",{className:"text-center pt-4 pb-4",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Dashboard de Producción"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Análisis General de LactoKeeper"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[c.jsx(Ob,{size:14}),c.jsx("span",{children:"Promedio Global"})]}),c.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[f.herdAverage.toFixed(2)," ",c.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"Kg"})]})]}),c.jsxs("button",{onClick:t,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[c.jsx(qce,{}),c.jsx("span",{children:"Animales en Ordeño"})]}),c.jsx("p",{className:"text-4xl font-bold tracking-tight text-white",children:f.activeGoats})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[c.jsx(YE,{size:16}),c.jsx("span",{children:"Curva de Lactancia"}),c.jsx("button",{onClick:()=>l(!0),className:"text-zinc-500 hover:text-white transition-colors",children:c.jsx(Y2,{size:14})})]}),c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-lg p-0.5",children:[c.jsx("button",{onClick:()=>s("current"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${a==="current"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Actual"}),c.jsx("button",{onClick:()=>s("historical"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${a==="historical"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Histórico"})]})]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{children:c.jsxs(__,{data:f.herdLactationCurve,margin:{top:5,right:10,left:0,bottom:5},children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"lactationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#FF9500",stopOpacity:.7}),c.jsx("stop",{offset:"80%",stopColor:"#34C759",stopOpacity:.1})]})}),c.jsx(ii,{dataKey:"del",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),c.jsx(ni,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,domain:["dataMin - 0.5","dataMax + 0.5"],width:30}),c.jsx(xr,{content:c.jsx(vu,{})}),c.jsx(Bs,{type:"monotone",dataKey:"kg",stroke:"#FF9500",strokeWidth:2.5,fill:"url(#lactationGradient)"})]})})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[c.jsx(YE,{size:16}),c.jsx("span",{children:"Distribución del Rebaño"}),c.jsx("button",{onClick:()=>d(!0),className:"text-zinc-500 hover:text-white transition-colors",children:c.jsx(Y2,{size:14})})]})}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{children:c.jsxs(Po,{data:f.gaussData.distribution,margin:{top:10,right:10,left:0,bottom:0},children:[c.jsx(Jc,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),c.jsx(ii,{dataKey:"range",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),c.jsx(ni,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,allowDecimals:!1,width:30}),c.jsx(xr,{content:c.jsx(vu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx(Ti,{dataKey:"count",fill:"rgba(255, 255, 255, 0.4)",name:"Nº de Cabras"}),c.jsx(m_,{x:f.gaussData.mean.toFixed(2),stroke:"#34C759",strokeWidth:2,label:{value:"μ",fill:"#34C759",position:"insideTopLeft"}})]})})})]})]}),c.jsx(sn,{isOpen:o,onClose:()=>l(!1),title:"¿Qué es la Curva de Lactancia del Rebaño?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:'Este gráfico revela la **"personalidad productiva"** de tu rebaño. No es un promedio simple, sino una línea de tiempo del rendimiento promedio.'}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"¿Cómo se Calcula?"}),c.jsx("p",{className:"text-sm",children:'Para cada "Día en Leche" (DEL) en el eje horizontal, el sistema agrupa los pesajes de **todos los animales** que han pasado por ese día de su ciclo y calcula el promedio.'}),c.jsxs("p",{className:"text-sm mt-2 bg-black/20 p-2 rounded-md",children:[c.jsx("strong",{children:"Ejemplo:"}),' El punto en "DEL 50" es el promedio de todos los pesajes que se hicieron a cualquier animal cuando estaba exactamente en su día 50 de lactancia.']})]}),c.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Te permite responder visualmente a preguntas clave como: ¿Cuándo ocurre el pico de producción del rebaño? y ¿Qué tan persistente es la lactancia después del pico?"})]})}),c.jsx(sn,{isOpen:u,onClose:()=>d(!1),title:"¿Qué es la Distribución del Rebaño?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:"Este gráfico, conocido como Campana de Gauss o distribución normal, clasifica el rendimiento promedio de cada animal en el rebaño."}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Media (μ)"}),c.jsx("p",{className:"text-sm",children:"La línea verde marcada como **μ** representa el **promedio de producción de todo el rebaño**. Es el punto de referencia central."})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Las Barras"}),c.jsx("p",{className:"text-sm",children:"Cada barra muestra cuántos animales caen dentro de un rango específico de producción. Una barra alta en el centro (cerca de μ) indica que la mayoría de tu rebaño tiene un rendimiento promedio y consistente."})]}),c.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Esta herramienta es clave para identificar rápidamente a los animales de élite (extremo derecho) y a los que podrían necesitar atención (extremo izquierdo)."})]})})]})}const f5=(t,e,n,r,i)=>I.useMemo(()=>{if(!t.length||!e.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const a=t.reduce((m,v)=>{const y=e.find(N=>N.id===v.goatId);if(!y)return m;const b=r.filter(N=>N.goatId===y.id&&new Date(N.parturitionDate)<=new Date(v.date)).sort((N,P)=>new Date(P.parturitionDate).getTime()-new Date(N.parturitionDate).getTime())[0];if(!b)return m;const S=Vf(b.parturitionDate,v.date),A=i?xLe(v.kg,S):v.kg,C=n.filter(N=>N.goatId===y.id).sort((N,P)=>new Date(P.date).getTime()-new Date(N.date).getTime());let D="single";const j=C.findIndex(N=>N.date===v.date);if(j!==-1&&j+1<C.length){const N=C[j+1],P=v.kg-N.kg,O=.15;P>O?D="up":P<-O?D="down":D="stable"}return m.push({...y,latestWeighing:v.kg,weighingId:v.id,del:S,score:A,trend:D,date:v.date}),m},[]);if(!a.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const s=i?"score":"latestWeighing",o=a.reduce((m,v)=>m+v[s],0)/a.length,l=Math.sqrt(a.reduce((m,v)=>m+Math.pow(v[s]-o,2),0)/a.length),u=o-.4*l,d=o+.4*l,f=a.map(m=>{const v=m[s];let y="Promedio";return l>.1&&(v<u?y="Pobre":v>d&&(y="Sobresaliente")),{...m,classification:y}}),p=[{name:"Pobre",count:f.filter(m=>m.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:f.filter(m=>m.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:f.filter(m=>m.classification==="Sobresaliente").length,fill:"#34C759"}],h=a.length>0?a.reduce((m,v)=>m+v.latestWeighing,0)/a.length:0,g=a.length>0?a.reduce((m,v)=>m+v.score,0)/a.length:0;return{classifiedAnimals:f,distribution:p,mean:h,stdDev:l,weightedMean:g}},[t,e,n,r,i]),w$e=({trend:t,isLongTrend:e})=>{if(!t||t==="single")return null;const n={up:{Icon:og,color:"text-brand-green"},down:{Icon:sg,color:"text-brand-red"},stable:{Icon:dT,color:"text-zinc-400"}},{Icon:r,color:i}=n[t];return c.jsxs("div",{className:`flex items-center font-semibold text-sm ${i}`,children:[c.jsx(r,{size:18,strokeWidth:3}),e&&c.jsx("span",{className:"ml-0.5 font-bold",children:"+"})]})},CD=(t,e)=>I.useMemo(()=>{if(!t||!e)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};const r=e.filter(d=>d.goatId===t).sort((d,f)=>new Date(f.date).getTime()-new Date(d.date).getTime());if(r.length<1)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};if(r.length===1)return{trend:"single",difference:0,isLongTrend:!1,lastTwoWeighings:[r[0]]};const i=r[0],a=r[1],s=i.kg-a.kg,o=.15;let l;s>o?l="up":s<-o?l="down":l="stable";let u=!1;if(r.length>=3){const d=r[2],f=a.kg-d.kg,p=s>o&&f>o,h=s<-o&&f<-o;(p||h)&&(u=!0)}return{trend:l,difference:s,isLongTrend:u,lastTwoWeighings:[i,a]}},[t,e]),S$e=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{parturitions:r,addWeighing:i,startDryingProcess:a,setLactationAsDry:s}=Kt(),[o,l]=I.useState(new Date().toISOString().split("T")[0]),[u,d]=I.useState(""),[f,p]=I.useState(!1),[h,g]=I.useState(null),[m,v]=I.useState(!1),y=I.useMemo(()=>r.filter(j=>j.goatId===t.id&&(j.status==="activa"||j.status==="en-secado")).sort((j,N)=>new Date(N.parturitionDate).getTime()-new Date(j.parturitionDate).getTime())[0],[r,t.id]),b=y?Vf(y.parturitionDate,o):null,S=t.name?String(t.name).toUpperCase().trim():"",A=async j=>{if(j.preventDefault(),!y||y.status==="seca"||y.status==="finalizada"){g({type:"error",text:"No se puede guardar pesaje. El animal no tiene una lactancia activa o en secado."});return}g(null),p(!0);const N=parseFloat(u);if(isNaN(N)||N<=0){g({type:"error",text:"Por favor, introduce un peso válido."}),p(!1);return}if(N>8.5){g({type:"error",text:"La producción parece irracionalmente alta (> 8.5 Kg)."}),p(!1);return}try{await i({goatId:t.id,date:o,kg:N}),g({type:"success",text:`Pesaje de ${t.id.toUpperCase()} guardado.`}),setTimeout(e,1500)}catch(P){g({type:"error",text:P.message||"No se pudo guardar el pesaje."}),p(!1)}},C=async()=>{if(!(!y||y.status!=="activa")){p(!0),g(null);try{await a(y.id),g({type:"success",text:"Proceso de secado iniciado con éxito."}),setTimeout(e,1500)}catch(j){g({type:"error",text:j.message||"No se pudo iniciar el secado."}),p(!1)}}},D=async()=>{if(!(!y||y.status==="seca"||y.status==="finalizada")){p(!0),g(null);try{await s(y.id),g({type:"success",text:"Lactancia declarada como seca con éxito."}),setTimeout(e,1500)}catch(j){g({type:"error",text:j.message||"No se pudo finalizar la lactancia."}),p(!1)}}};return c.jsxs(c.Fragment,{children:[c.jsx(sn,{isOpen:!m,onClose:n,title:"Pesaje Lechero",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:t.id.toUpperCase()}),S&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:S})]}),y?c.jsxs("form",{onSubmit:A,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weighingDateMilk",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),c.jsx("input",{id:"weighingDateMilk",type:"date",value:o,onChange:j=>l(j.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-white",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Días en Leche (DEL)"}),c.jsx("div",{className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center font-bold text-white",children:b??"N/A"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weighingKgMilk",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Producción (Kg)"}),c.jsx("input",{id:"weighingKgMilk",type:"number",step:"0.1",value:u,onChange:j=>d(j.target.value),placeholder:"Ej: 3.5",autoFocus:!0,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-white",required:!0})]}),h&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${h.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[h.type==="success"?c.jsx(Ga,{size:18}):c.jsx(dr,{size:18}),c.jsx("span",{children:h.text})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[c.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsxs("button",{type:"submit",disabled:f,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[c.jsx(ev,{size:18})," Guardar Pesaje"]})]}),c.jsxs("div",{className:"space-y-2 pt-4 border-t border-brand-border",children:[c.jsx("h4",{className:"text-sm font-semibold text-zinc-400",children:"Otras Acciones de Lactancia"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsxs("button",{type:"button",onClick:C,disabled:f||y.status!=="activa",className:"w-full flex items-center justify-center gap-2 bg-blue-600/20 text-blue-300 font-semibold py-3 px-3 rounded-lg hover:bg-blue-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(pp,{size:16})," ",y.status==="en-secado"?"Ya en Secado":"Iniciar Secado"]}),c.jsxs("button",{type:"button",onClick:D,disabled:f||y.status==="seca"||y.status==="finalizada",className:"w-full flex items-center justify-center gap-2 bg-gray-600/20 text-gray-300 font-semibold py-3 px-3 rounded-lg hover:bg-gray-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Dc,{size:16})," ",y.status==="seca"?"Ya Seca":"Declarar Seca"]})]})]})]}):c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx(dr,{className:"mx-auto h-12 w-12 text-amber-400"}),c.jsx("h3",{className:"text-lg font-medium text-white",children:"Animal sin Parto Activo"}),c.jsx("p",{className:"text-sm text-zinc-400",children:"Para registrar un pesaje o gestionar el secado, debe tener un parto activo."}),c.jsxs("button",{onClick:()=>v(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(Wl,{size:18})," Declarar Parto"]})]})]})}),m&&c.jsx(_p,{isOpen:m,onClose:()=>{v(!1)},motherId:t.id})]})},_$e=()=>{const{animals:t,parturitions:e,weighings:n,appConfig:r}=Kt();return I.useMemo(()=>{const a=new Date().toISOString().split("T")[0],s=new Set,o=r.diasLactanciaObjetivo-35,l=r.diasLactanciaObjetivo-5;return e.forEach(d=>{if(d.status==="activa"){const f=Vf(d.parturitionDate,a);f>=o&&f<=l&&s.add(d.goatId)}}),t.filter(d=>d.reproductiveStatus==="Preñada"&&!d.isReference).forEach(d=>{const f=n.filter(p=>p.goatId===d.id).sort((p,h)=>new Date(h.date).getTime()-new Date(p.date).getTime());if(f.length>=4){const p=f[0].kg,h=f[1].kg,g=f[2].kg,m=f[3].kg;p<h&&h<g&&g<m&&s.add(d.id)}}),e.forEach(d=>{d.status==="en-secado"&&s.add(d.goatId)}),Array.from(s)},[t,e,n,r.diasLactanciaObjetivo])},A$e=({isOpen:t,onClose:e,animalIds:n,onSelectAnimal:r})=>{const{animals:i,fathers:a}=Kt(),s=I.useMemo(()=>{const o=new Map(i.map(u=>[u.id,u])),l=new Map(a.map(u=>[u.id,u]));return n.map(u=>{const d=o.get(u);if(d)return d;const f=l.get(u);return f?{id:f.id,name:f.name,sex:"Macho",isReference:!0}:{id:u,name:void 0}}).sort((u,d)=>u.id.localeCompare(d.id))},[n,i,a]);return c.jsxs(sn,{isOpen:t,onClose:e,title:"Animales que Salieron del Ordeño",children:[c.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto pr-2",children:s.length>0?s.map(o=>{const l=o.name?String(o.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>{r(o.id),e()},className:"w-full text-left p-3 bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors flex justify-between items-center group",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:o.id.toUpperCase()}),l&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:l})]}),c.jsx(qi,{className:"text-zinc-500 group-hover:text-white transition-colors flex-shrink-0"})]},o.id)}):c.jsx("p",{className:"text-center text-zinc-500 py-4",children:"No hay animales que hayan salido en este período."})}),c.jsx("div",{className:"flex justify-end mt-4 pt-4 border-t border-brand-border",children:c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cerrar"})})]})},C$e=({isOpen:t,onClose:e,onConfirm:n,dateToDelete:r})=>{const[i,a]=I.useState(""),s=r?new Date(r+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"",o=i===r;return I.useEffect(()=>{t&&a("")},[t]),c.jsx(sn,{isOpen:t,onClose:e,title:"Confirmar Eliminación",children:c.jsxs("div",{className:"space-y-4 text-white",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(dr,{className:"mx-auto h-12 w-12 text-brand-red"}),c.jsxs("p",{className:"text-lg font-semibold",children:["¿Eliminar todos los pesajes del ",c.jsx("span",{className:"font-bold",children:s}),"?"]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Esta acción es irreversible y eliminará ",r?"permanentemente":""," todos los registros de esta fecha."]})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"confirmDateInput",className:"block text-sm font-medium text-zinc-400 mb-1",children:["Para confirmar, escribe la fecha: ",c.jsx("strong",{className:"text-zinc-200",children:r})]}),c.jsx("input",{id:"confirmDateInput",type:"text",value:i,onChange:l=>a(l.target.value),placeholder:"YYYY-MM-DD",className:`w-full bg-zinc-800 p-3 rounded-xl text-lg text-center font-mono border-2 ${i&&!o?"border-red-500":"border-zinc-700"} focus:border-brand-red focus:ring-0`})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:n,disabled:!o,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Eliminar Permanentemente"})]})]})})},c1=({title:t,value:e,unit:n,icon:r,onClick:i})=>c.jsxs("button",{onClick:i,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-orange transition-colors w-full",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(r,{size:14}),c.jsx("span",{children:t})]}),c.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:[e," ",c.jsx("span",{className:"text-lg text-zinc-400",children:n})]})]}),zC=({animal:t,onSelectAnimal:e,onOpenActions:n,isNewEntry:r})=>{const{weighings:i}=Kt(),{trend:a,isLongTrend:s}=CD(t.id,i),o=gp(),l=I.useRef(!1),u={Sobresaliente:"bg-brand-green",Promedio:"bg-gray-500",Pobre:"bg-brand-red"},d=t.name?String(t.name).toUpperCase().trim():"",f=(p,h)=>{const g=h.offset.x,m=h.velocity.x;(g<-80/2||m<-500)&&n(t),o.start({x:0}),setTimeout(()=>{l.current=!1},100)};return c.jsxs("div",{className:"relative w-full overflow-hidden bg-brand-glass border-b border-brand-border/50 last:border-b-0",children:[c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:c.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(Ki,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Acciones"})]})}),c.jsxs(Wi.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{l.current=!0},onDragEnd:f,onTap:()=>{l.current||e(t.id)},animate:o,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-3",children:[c.jsx("div",{className:`absolute top-3 right-3 w-2.5 h-2.5 rounded-full ${t.latestWeighing>0?u[t.classification]:"bg-transparent"}`,title:`Rendimiento: ${t.classification}`}),c.jsxs("div",{className:"flex justify-between items-center w-full",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),d&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:d}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})})]}),c.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"font-semibold text-base text-brand-orange",children:t.latestWeighing>0?`${t.latestWeighing.toFixed(2)} Kg`:"Sin Pesar"}),t.del>0&&c.jsxs("p",{className:"text-xs text-zinc-400",children:["DEL: ",t.del]})]}),c.jsx(TX,{statuses:t.statusObjects}),r?c.jsx("span",{title:"Primer Ingreso al Control Lechero",className:"w-6 h-6 flex items-center justify-center rounded-full bg-green-500/20 text-brand-green",children:c.jsx(VW,{size:16,strokeWidth:2.5})}):c.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:c.jsx(w$e,{trend:a,isLongTrend:s})}),c.jsx(qi,{className:"text-zinc-600 w-5 h-5"})]})]})]})]})},j$e=({animalId:t})=>{var i,a;const{weighings:e}=Kt(),{lastTwoWeighings:n,difference:r}=CD(t,e);return n.length<2?c.jsx("p",{children:"No hay suficientes datos para comparar."}):c.jsxs("div",{className:"text-center text-white space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-zinc-400",children:["Pesaje Anterior (",new Date(n[1].date+"T00:00:00").toLocaleDateString(),")"]}),c.jsxs("p",{className:"text-2xl font-semibold",children:[((i=n[1])==null?void 0:i.kg.toFixed(2))||"N/A"," Kg"]})]}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-zinc-400",children:["Último Pesaje (",new Date(n[0].date+"T00:00:00").toLocaleDateString(),")"]}),c.jsxs("p",{className:"text-2xl font-semibold",children:[((a=n[0])==null?void 0:a.kg.toFixed(2))||"N/A"," Kg"]})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-zinc-400 text-base mb-1",children:"Diferencia"}),c.jsxs("p",{className:`text-3xl font-bold ${r>.15?"text-brand-green":r<-.15?"text-brand-red":"text-zinc-400"}`,children:[r>0?"+":"",r.toFixed(2)," Kg"]})]})]})},E$e=t=>{const{x:e,y:n,width:r,height:i,value:a,total:s}=t;if(s===0||a===0)return null;const o=(a/s*100).toFixed(0);return c.jsx("text",{x:e+r/2,y:n+i/2,fill:"#fff",textAnchor:"middle",dominantBaseline:"middle",fontSize:"14px",fontWeight:"bold",opacity:.8,children:`${o}%`})};function N$e({onSelectAnimal:t}){const{animals:e,parturitions:n,weighings:r,isLoading:i,serviceRecords:a,sireLots:s,breedingSeasons:o,startDryingProcess:l,setLactationAsDry:u,deleteWeighingSession:d}=Kt(),[f,p]=I.useState(!1),[h,g]=I.useState("all"),[m,v]=I.useState("all"),[y,b]=I.useState("all"),[S,A]=I.useState("all"),[C,D]=I.useState(null),[j,N]=I.useState(null),[P,O]=I.useState(!1),[T,M]=I.useState(!1),[L,V]=I.useState(!1),[K,Z]=I.useState(!1),[Y,H]=I.useState(null),[ee,le]=I.useState(!1),[se,$]=I.useState(0),X=_$e(),{weighingsByDate:te,availableDates:oe}=I.useMemo(()=>{const lt={};r.forEach(yt=>{lt[yt.date]||(lt[yt.date]=[]),lt[yt.date].push(yt)});const bt=Object.keys(lt).sort((yt,nt)=>new Date(nt).getTime()-new Date(yt).getTime());return{weighingsByDate:lt,availableDates:bt}},[r]),me=oe[se],_e=I.useMemo(()=>{if(!me)return[];const lt=te[me]||[],bt=new Map;return lt.forEach(yt=>bt.set(yt.goatId,yt)),Array.from(bt.values())},[me,te]),{classifiedAnimals:Ce,distribution:fe,mean:xe,stdDev:Se,weightedMean:ie}=f5(_e,e,r,n,f),He=I.useMemo(()=>{const lt=new Map(e.map(bt=>[bt.id,bt]));return Ce.map(bt=>{const yt=lt.get(bt.id);return{...yt,...bt,formattedAge:yt?Mc(yt.birthDate):"N/A",statusObjects:yt?NX(yt,n,a,s,o):[]}})},[Ce,e,n,a,s,o]),Fe=I.useMemo(()=>{if(se+1<oe.length){const lt=oe[se+1];return te[lt]||[]}return[]},[se,oe,te]),he=f5(Fe,e,r,n,!1),Ye=I.useMemo(()=>{const lt=new Set(Ce.map(mn=>mn.id)),bt=new Set(he.classifiedAnimals.map(mn=>mn.id));let yt=new Set,nt=new Set;se===oe.length-1&&oe.length>0?yt=lt:oe.length>0&&(yt=new Set([...lt].filter(mn=>!bt.has(mn))),nt=new Set([...bt].filter(mn=>!lt.has(mn))));const Bt=oe.slice(Math.max(0,se-2),se+1).map(mn=>{const qt=te[mn]||[];if(qt.length===0)return{date:mn,avg:0};const Cn=qt.reduce((ba,$r)=>ba+$r.kg,0);return{date:new Date(mn+"T00:00:00").toLocaleDateString("es-VE",{month:"short",day:"numeric"}),avg:Cn/qt.length}}).reverse();let ft=null,pt=null,Rt=0,Ct=0,Ht=1/0;if(He.length>0){Rt=He.reduce((qt,Cn)=>qt+Cn.latestWeighing,0);const mn=He.map(qt=>qt.latestWeighing);Ct=Math.max(...mn),Ht=Math.min(...mn.filter(qt=>qt>0)),Ht===1/0&&(Ht=0),ft=He.find(qt=>qt.latestWeighing===Ct)||null,pt=He.find(qt=>qt.latestWeighing===Ht)||null}const pn=xe-Se,dn=xe+Se,wt=Ce.filter(mn=>mn.latestWeighing>=pn&&mn.latestWeighing<=dn).length,sr=Ce.length>0?wt/Ce.length*100:0;return{trendData:Bt,kpi:{total:Rt,max:Ct,min:Ht},topPerformer:ft,bottomPerformer:pt,consistency:{percentage:sr},newAnimalIds:yt,exitingAnimalIds:nt}},[Ce,He,he.classifiedAnimals,oe,se,te,xe,Se]),{searchTerm:mt,setSearchTerm:vt,filteredItems:Qe}=_D(He,["id","name"]),Ot=I.useMemo(()=>{let lt=mt?Qe:He;return h!=="all"&&(lt=lt.filter(bt=>bt.classification===h)),y==="new"&&(lt=lt.filter(bt=>Ye.newAnimalIds.has(bt.id))),m!=="all"&&(lt=lt.filter(bt=>{const{trend:yt}=CD(bt.id,r);return yt===m})),S!=="all"&&(lt=lt.filter(bt=>{const yt=bt.del;return S==="drying"?X.includes(bt.id):yt===0||yt===void 0?!1:S==="first"?yt>0&&yt<=100:S==="second"?yt>100&&yt<=200:S==="third"?yt>200&&yt<270:!1})),lt.sort((bt,yt)=>yt.latestWeighing-bt.latestWeighing)},[mt,Qe,He,h,m,S,y,Ye.newAnimalIds,X,r]),ht=I.useMemo(()=>{const lt=Ce.filter(Bt=>!Ye.newAnimalIds.has(Bt.id)).length;if(Ce.length===0)return{up:0,down:0,stable:0,new:0};if(lt===0&&Ye.newAnimalIds.size>0)return{up:0,down:0,stable:0,new:100};if(lt===0)return{up:0,down:0,stable:0,new:0};const bt=Ce.filter(Bt=>Bt.trend==="up").length,yt=Ce.filter(Bt=>Bt.trend==="down").length,nt=Ce.filter(Bt=>Bt.trend==="stable").length;return{up:bt/lt*100,down:yt/lt*100,stable:nt/lt*100,new:Ye.newAnimalIds.size/Ce.length*100||0}},[Ce,Ye.newAnimalIds]),dt=()=>{g("all"),v("all"),A("all"),b("all"),vt("")},It=lt=>{var bt;if((bt=lt==null?void 0:lt.payload)!=null&&bt.name){const yt=lt.payload.name;g(nt=>nt===yt?"all":yt)}},tn=lt=>{H(lt),Z(!0)},Zt=lt=>{if(!lt)return[];const bt=[],yt=n.find(nt=>nt.goatId===lt.id&&(nt.status==="activa"||nt.status==="en-secado"));return bt.push({label:"Registrar/Editar Pesaje",icon:wf,onClick:()=>{Z(!1),D("milkWeighing")}}),yt&&(yt.status==="activa"&&bt.push({label:"Iniciar Secado",icon:pp,onClick:()=>{l(yt.id),Z(!1)},color:"text-blue-400"}),(yt.status==="activa"||yt.status==="en-secado")&&bt.push({label:"Declarar Seca",icon:Dc,onClick:()=>{u(yt.id),Z(!1)},color:"text-zinc-400"})),bt},$t=()=>{D(null),H(null)},on=async()=>{if(me)try{await d(me),$(0),le(!1)}catch(lt){console.error("Error deleting session:",lt)}};return i&&oe.length===0?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Calculando análisis..."})}):oe.length===0?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"No hay pesajes registrados."})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{className:"bg-brand-glass rounded-2xl p-3 border border-brand-border flex justify-between items-center",children:[c.jsx("button",{onClick:()=>$(lt=>Math.min(lt+1,oe.length-1)),disabled:se>=oe.length-1,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:c.jsx(jce,{})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-lg font-semibold text-white",children:me?new Date(me+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Sin Datos"}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[_e.length," animales pesados"]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsxs("button",{onClick:()=>le(!0),className:"p-2 rounded-full text-zinc-500 hover:text-brand-red hover:bg-red-500/10 transition-colors mr-2",title:"Eliminar pesajes de este día",children:[" ",c.jsx(Gl,{size:18})," "]}),c.jsx("button",{onClick:()=>$(lt=>Math.max(lt-1,0)),disabled:se===0,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:c.jsx(qi,{})})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(c1,{icon:wf,title:f?"Media Ponderada":"Media Prod.",value:(f?ie:xe).toFixed(2),unit:"Kg",onClick:()=>D("media")}),c.jsx(c1,{icon:pT,title:"Prod. Total",value:Ye.kpi.total.toFixed(2),unit:"Kg",onClick:()=>D("total")}),c.jsx(c1,{icon:YW,title:"Consistencia",value:Se.toFixed(2),unit:"σ",onClick:()=>D("stdDev")}),c.jsx(c1,{icon:ms,title:"Rango Prod.",value:`${Ye.kpi.min.toFixed(2)} - ${Ye.kpi.max.toFixed(2)}`,unit:"Kg",onClick:()=>D("rango")})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(YE,{className:"text-brand-orange w-[18px] h-[18px]"}),c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Análisis del Día"}),c.jsx("button",{onClick:()=>O(!0),className:"text-zinc-500 hover:text-white",children:c.jsx(Y2,{size:14})})]}),c.jsxs("label",{className:"flex items-center space-x-2 text-sm text-zinc-300 cursor-pointer",children:[c.jsx(zA,{size:14,className:f?"text-brand-orange":"text-zinc-500"}),c.jsx("span",{children:"Ponderado a DEL"}),c.jsx("button",{type:"button",onClick:lt=>{lt.preventDefault(),lt.stopPropagation(),M(!0)},className:"text-zinc-500 hover:text-white -ml-1",children:c.jsx(Y2,{size:14})}),c.jsx("input",{type:"checkbox",checked:f,onChange:lt=>p(lt.target.checked),className:"form-checkbox h-4 w-4 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]})]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{children:c.jsxs(Po,{data:fe,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(ii,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(ni,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),c.jsx(xr,{content:c.jsx(vu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsxs(Ti,{dataKey:"count",onClick:It,cursor:"pointer",children:[fe.map(lt=>c.jsx(hl,{fill:lt.fill,className:`${h!=="all"&&h!==lt.name?"opacity-30":"opacity-100"} transition-opacity`},lt.name)),c.jsx(ao,{dataKey:"count",content:c.jsx(E$e,{total:Ce.length})})]})]})})}),c.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[c.jsxs("span",{children:["μ = ",xe.toFixed(2)]})," | ",c.jsxs("span",{children:["σ = ",Se.toFixed(2)]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center px-2 pt-2",children:[c.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[c.jsx("button",{onClick:()=>{v("all"),b("all")},className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors ${m==="all"&&y==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),c.jsxs("button",{onClick:()=>{v("up"),b("all")},disabled:ht.up===0&&Ce.length-Ye.newAnimalIds.size>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${m==="up"?"bg-brand-green/80 text-white":"bg-zinc-800/50 text-brand-green"} disabled:opacity-40`,children:[c.jsx(og,{size:14})," ",c.jsxs("span",{children:[ht.up.toFixed(0),"%"]})]}),c.jsxs("button",{onClick:()=>{v("down"),b("all")},disabled:ht.down===0&&Ce.length-Ye.newAnimalIds.size>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${m==="down"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"} disabled:opacity-40`,children:[c.jsx(sg,{size:14})," ",c.jsxs("span",{children:[ht.down.toFixed(0),"%"]})]}),c.jsxs("button",{onClick:()=>{v("single"),b("all")},disabled:ht.new===0&&Ce.length>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${m==="single"?"bg-brand-blue/80 text-white":"bg-zinc-800/50 text-brand-blue"} disabled:opacity-40`,children:[c.jsx(zA,{size:14})," ",c.jsxs("span",{children:[ht.new.toFixed(0),"%"]})]})]}),c.jsx("button",{onClick:dt,title:"Limpiar todos los filtros",className:"text-zinc-500 hover:text-white",children:c.jsx(lT,{size:16})})]}),c.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[c.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Fase Lactancia:"}),c.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[c.jsx("button",{onClick:()=>A("all"),className:`px-2 py-1 text-xs font-semibold rounded-md ${S==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),c.jsx("button",{onClick:()=>A("first"),className:`px-2 py-1 text-xs font-semibold rounded-md ${S==="first"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"1er T"}),c.jsx("button",{onClick:()=>A("second"),className:`px-2 py-1 text-xs font-semibold rounded-md ${S==="second"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"2do T"}),c.jsx("button",{onClick:()=>A("third"),className:`px-2 py-1 text-xs font-semibold rounded-md ${S==="third"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"3er T"}),c.jsx("button",{onClick:()=>A("drying"),className:`px-2 py-1 text-xs font-semibold rounded-md ${S==="drying"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"}`,children:"A Secado"})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[c.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Movimientos:"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("button",{onClick:()=>b(lt=>lt==="new"?"all":"new"),disabled:Ye.newAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all ${y==="new"?"bg-brand-green text-white shadow-lg shadow-green-500/20":"bg-zinc-800/50 text-zinc-300"} ${Ye.newAnimalIds.size>0&&y!=="new"&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[c.jsx(VW,{size:14})," ",c.jsxs("span",{children:["Ingresos (",Ye.newAnimalIds.size,")"]})]}),c.jsxs("button",{onClick:()=>V(!0),disabled:Ye.exitingAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all bg-zinc-800/50 text-zinc-300 ${Ye.exitingAnimalIds.size>0&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[c.jsx(UW,{size:14})," ",c.jsxs("span",{children:["Salidas (",Ye.exitingAnimalIds.size,")"]})]})]})]})]}),c.jsxs("div",{className:"relative px-4",children:[c.jsx(fu,{className:"absolute left-7 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"}),c.jsx("input",{type:"search",placeholder:`Buscar ID o Nombre en ${Ot.length} animales...`,value:mt,onChange:lt=>vt(lt.target.value),className:"w-full bg-brand-glass border border-brand-border rounded-xl pl-10 pr-4 py-3 text-white focus:ring-2 focus:ring-brand-orange"})]})]}),c.jsx("div",{className:"pt-2 space-y-0 pb-4",children:Ot.length>0?c.jsx("div",{className:"bg-brand-glass rounded-2xl border border-brand-border overflow-hidden mx-4",children:Ot.map(lt=>c.jsx(zC,{animal:lt,onSelectAnimal:t,onOpenActions:tn,isNewEntry:Ye.newAnimalIds.has(lt.id)},lt.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:c.jsx("p",{className:"text-zinc-400",children:mt?"No se encontraron resultados":"No hay animales con los filtros."})})})]}),c.jsx(sn,{isOpen:C==="media",onClose:()=>D(null),title:"Análisis de Producción Media",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsxs("p",{children:["La **Media de Producción** del día es **",xe.toFixed(2)," Kg**. Representa el promedio simple."]}),c.jsxs("p",{children:["La **Media Ponderada** (",ie.toFixed(2)," Kg) premia la **persistencia lechera** (más valor a producción tardía)."]})]})}),c.jsx(sn,{isOpen:C==="total",onClose:()=>D(null),title:"Producción Total del Día",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("p",{className:"text-zinc-400",children:["La producción total registrada el ",me?new Date(me+"T00:00:00").toLocaleDateString("es-VE"):"-"," fue:"]}),c.jsxs("h2",{className:"text-5xl font-bold text-brand-orange my-2",children:[Ye.kpi.total.toFixed(2)," Kg"]})]})}),c.jsx(sn,{isOpen:C==="stdDev",onClose:()=>D(null),title:"Análisis de Consistencia (σ)",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsxs("p",{children:["La Desviación Estándar (σ) de **",Se.toFixed(2),"** mide la dispersión. Un valor **bajo** es ideal (rebaño consistente)."]}),c.jsxs("div",{className:"bg-black/30 p-4 rounded-lg text-center",children:[c.jsx("p",{className:"text-sm uppercase text-zinc-400",children:"Rebaño dentro de 1σ"}),c.jsxs("p",{className:"text-4xl font-bold text-brand-orange my-1",children:[Ye.consistency.percentage.toFixed(0),"%"]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Cercanía al promedio de ",c.jsxs("span",{className:"font-bold text-white",children:[xe.toFixed(2)," Kg"]}),"."]})]})]})}),c.jsx(sn,{isOpen:C==="rango",onClose:()=>D(null),title:"Extremos de Producción del Día",children:c.jsxs("div",{className:"space-y-4",children:[Ye.topPerformer&&c.jsxs("div",{className:"bg-green-900/40 border border-green-500/50 rounded-2xl p-4",children:[c.jsx("h3",{className:"font-semibold text-brand-green mb-2",children:"Producción Máxima"}),c.jsx(zC,{animal:Ye.topPerformer,onSelectAnimal:()=>{D(null),t(Ye.topPerformer.id)},onOpenActions:tn,isNewEntry:Ye.newAnimalIds.has(Ye.topPerformer.id)})]}),Ye.bottomPerformer&&c.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-4",children:[c.jsx("h3",{className:"font-semibold text-brand-red mb-2",children:"Producción Mínima"}),c.jsx(zC,{animal:Ye.bottomPerformer,onSelectAnimal:()=>{D(null),t(Ye.bottomPerformer.id)},onOpenActions:tn,isNewEntry:Ye.newAnimalIds.has(Ye.bottomPerformer.id)})]})]})}),c.jsx(sn,{isOpen:P,onClose:()=>O(!1),title:"¿Qué es el Análisis del Ordeño?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:"Clasifica animales (Pobre, Promedio, Sobresaliente) usando la media (μ) y desviación estándar (σ)."}),c.jsxs("div",{children:[c.jsxs("h4",{className:"font-semibold text-white mb-1",children:["Ponderado a DEL (",c.jsx(zA,{size:12,className:"inline-block mb-0.5"}),")"]}),c.jsx("p",{className:"text-sm",children:"Activa este cálculo para dar más valor a la producción temprana (persistencia)."})]})]})}),c.jsx(sn,{isOpen:T,onClose:()=>M(!1),title:"¿Qué es el Score Ponderado?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:"Ajusta la producción para premiar la **persistencia lechera**."}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Fórmula"}),c.jsx("div",{className:"bg-black/30 p-3 rounded-lg text-sm font-mono text-center text-orange-300",children:"Score = Kg × (1 + ((DEL - 50) / (DEL + 50)))"})]}),c.jsx("p",{className:"pt-2 border-t border-zinc-700/80 text-sm",children:"2 Kg en día **200** valen más que 2 Kg en día 40."})]})}),j&&c.jsx(sn,{isOpen:!!j,onClose:()=>N(null),title:`Tendencia de ${ar(j)}`,children:c.jsx(j$e,{animalId:j.id})}),c.jsx(A$e,{isOpen:L,onClose:()=>V(!1),animalIds:Array.from(Ye.exitingAnimalIds),onSelectAnimal:t}),c.jsx(pu,{isOpen:K,onClose:()=>Z(!1),title:`Acciones para ${ar(Y)}`,actions:Zt(Y)}),C==="milkWeighing"&&Y&&c.jsx(S$e,{animal:Y,onCancel:$t,onSaveSuccess:$t}),me&&c.jsx(C$e,{isOpen:ee,onClose:()=>le(!1),onConfirm:on,dateToDelete:me})]})}const P$e=t=>I.useMemo(()=>{if(t.length===0)return{monthlyData:[]};const n=t.reduce((i,a)=>{const s=a.date.substring(0,7);return i[s]||(i[s]=[]),i[s].push(a),i},{});let r=Object.entries(n).map(([i,a])=>{const s=new Date(`${i}-02T12:00:00Z`),o=s.toLocaleString("es-VE",{month:"long",timeZone:"UTC"}),l=s.getUTCFullYear(),u=a.length,d=a.reduce((f,p)=>f+p.kg,0);return{periodLabel:`${o.charAt(0).toUpperCase()+o.slice(1)} ${l}`,periodId:i,totalKg:d,averageKg:u>0?d/u:0,weighingCount:u,animalCount:new Set(a.map(f=>f.goatId)).size,weighingEvents:new Set(a.map(f=>f.date)).size,weighings:a,newAnimalsWeighings:[]}}).sort((i,a)=>a.periodId.localeCompare(i.periodId));return r=r.map((i,a,s)=>{const o=s[a+1];if(o){const l=o.averageKg?(i.averageKg-o.averageKg)/o.averageKg*100:void 0,u=o.animalCount?(i.animalCount-o.animalCount)/o.animalCount*100:void 0,d=new Set(o.weighings.map(m=>m.goatId)),f=new Set(i.weighings.map(m=>m.goatId)),p=new Set([...f].filter(m=>!d.has(m))),h=i.weighings.filter(m=>p.has(m.goatId)),g=[...d].filter(m=>!f.has(m)).length;return{...i,avgKgChange:l,animalCountChange:u,newAnimalsWeighings:h,previousAnimalCount:o.animalCount,exitingAnimalCount:g}}return{...i,newAnimalsWeighings:i.weighings,previousAnimalCount:0,exitingAnimalCount:0}}),{monthlyData:r,quarterlyData:[],yearlyData:[]}},[t]),e2=({value:t})=>{if(t===void 0||isNaN(t)||t===0)return c.jsx("div",{className:"w-16 h-5"});const e=t>0,n=e?"text-brand-green":"text-brand-red",r=e?og:sg;return c.jsxs("span",{className:`flex items-center text-sm font-bold ${n} whitespace-nowrap`,children:[c.jsx(r,{size:16,className:"mr-0.5"}),t.toFixed(1),"%"]})},k$e=({stats:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[c.jsxs("div",{className:"min-w-0 mr-2",children:[c.jsx("p",{className:"font-bold text-lg text-white truncate",children:t.periodLabel}),c.jsxs("p",{className:"text-sm text-zinc-400 truncate",children:["Prom: ",t.averageKg.toFixed(2)," Kg | ",t.animalCount," animales"]})]}),c.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-2",children:[c.jsx(e2,{value:t.avgKgChange}),c.jsx(qi,{className:"text-zinc-600 flex-shrink-0"})]})]}),iQ=({weighing:t,onSelectAnimal:e})=>{const n=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-black/20 rounded-lg p-3 border border-zinc-700/50 flex justify-between items-center hover:border-orange-400/50",children:[c.jsxs("div",{className:"min-w-0 pr-3 flex items-center gap-3",children:[" ",c.jsxs("div",{children:[" ",c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),n&&c.jsx("p",{className:"text-xs font-normal text-zinc-400 truncate",children:n})]}),c.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white whitespace-nowrap ${t.classification==="Pobre"?"bg-brand-red/80":t.classification==="Sobresaliente"?"bg-brand-green/80":"bg-gray-500/80"}`,children:t.classification})]}),c.jsxs("p",{className:"font-semibold text-lg text-white flex-shrink-0",children:[" ",t.latestWeighing.toFixed(2),c.jsx("span",{className:"text-base font-medium text-zinc-400 ml-1",children:"Kg"})," "]})]})},aQ=t=>{const{x:e,y:n,width:r,value:i,total:a}=t;if(a===0||i===0)return null;const s=(i/a*100).toFixed(0);return c.jsx("text",{x:e+r/2,y:n+20,fill:"#fff",textAnchor:"middle",fontSize:"12px",fontWeight:"bold",children:`${s}%`})},T$e=({isOpen:t,onClose:e,data:n,periodLabel:r,onSelectAnimal:i})=>{const{animals:a,weighings:s,parturitions:o}=Kt(),[l,u]=I.useState("all"),d=f5((n==null?void 0:n.newAnimalsWeighings)||[],a,s,o,!1),f=I.useMemo(()=>l==="all"?d.classifiedAnimals:d.classifiedAnimals.filter(h=>h.classification===l),[d.classifiedAnimals,l]),p=h=>{var g;if((g=h==null?void 0:h.payload)!=null&&g.name){const m=h.payload.name;u(v=>v===m?"all":m)}};return!t||!n?null:c.jsx(sn,{isOpen:t,onClose:e,title:`Análisis Nuevos Ingresos - ${r}`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(Ob,{size:14}),"Promedio"]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[d.mean.toFixed(2),c.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]}),c.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(hu,{size:14}),"Animales"]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:d.classifiedAnimals.length})]})]}),c.jsx("div",{className:"bg-black/20 backdrop-blur-xl rounded-2xl p-4 border border-zinc-800/50",children:c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{children:c.jsxs(Po,{data:d.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(ii,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(ni,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(xr,{content:c.jsx(vu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsxs(Ti,{dataKey:"count",onClick:p,cursor:"pointer",children:[d.distribution.map(h=>c.jsx(hl,{fill:h.fill,className:`${l!=="all"&&l!==h.name?"opacity-30":"opacity-100"}`},h.name)),c.jsx(ao,{dataKey:"count",content:c.jsx(aQ,{total:d.classifiedAnimals.length})})]})]})})})}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:f.sort((h,g)=>g.latestWeighing-h.latestWeighing).map(h=>c.jsx(iQ,{weighing:h,onSelectAnimal:i},h.weighingId||h.id))})]})})};function D$e({navigateToRebano:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=Kt(),[a,s]=I.useState(null),[o,l]=I.useState("all"),[u,d]=I.useState(!1),[f,p]=I.useState(null),{monthlyData:h}=P$e(n),g=f5((a==null?void 0:a.weighings)||[],e,n,r,!1),m=I.useMemo(()=>o==="all"?g.classifiedAnimals:g.classifiedAnimals.filter(y=>y.classification===o),[g.classifiedAnimals,o]),v=y=>{var b;if((b=y==null?void 0:y.payload)!=null&&b.name){const S=y.payload.name;l(A=>A===S?"all":S)}};return i?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando historial..."})}):a?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 animate-fade-in px-4",children:[c.jsxs("header",{className:"flex items-center pt-4 pb-4",children:[c.jsx("button",{onClick:()=>{s(null),l("all")},className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsx("div",{className:"text-center flex-grow",children:c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:a.periodLabel})}),c.jsx("div",{className:"w-8"})," "]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(Ob,{size:14}),"Promedio / Animal"]}),c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsxs("p",{className:"text-2xl font-bold text-white",children:[a.averageKg.toFixed(2),c.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]}),c.jsx(e2,{value:a.avgKgChange})]})]}),c.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(so,{size:14}),"Eventos de Pesaje"]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:a.weighingEvents})]}),c.jsxs("button",{onClick:()=>d(!0),className:"bg-brand-glass p-3 rounded-2xl text-left hover:border-brand-orange transition-colors border border-brand-border",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(hu,{size:14}),"Animales Ordeñados"]}),c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsx("p",{className:"text-2xl font-bold text-white",children:a.animalCount}),c.jsx(e2,{value:a.animalCountChange})]})]}),c.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(ms,{size:14}),"Total Registrado"]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[a.totalKg.toFixed(0),c.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 border-b border-brand-border pb-2 mb-4",children:[c.jsx(Ib,{className:"text-brand-orange",size:18}),c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Distribución del Período"})]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{children:c.jsxs(Po,{data:g.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(ii,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(ni,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(xr,{content:c.jsx(vu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsxs(Ti,{dataKey:"count",onClick:v,cursor:"pointer",children:[g.distribution.map(y=>c.jsx(hl,{fill:y.fill,className:`${o!=="all"&&o!==y.name?"opacity-30":"opacity-100"} transition-opacity`},y.name)),c.jsx(ao,{dataKey:"count",content:c.jsx(aQ,{total:g.classifiedAnimals.length})})]})]})})}),c.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[c.jsxs("span",{children:["μ = ",g.mean.toFixed(2)," Kg"]})," | ",c.jsxs("span",{children:["σ = ",g.stdDev.toFixed(2)]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1 mt-4",children:["Pesajes del Período (",m.length,")"]}),m.length>0?m.sort((y,b)=>b.latestWeighing-y.latestWeighing).map(y=>c.jsx(iQ,{weighing:y,onSelectAnimal:b=>t({name:"lactation-profile",animalId:b})},y.weighingId||y.id)):c.jsx("div",{className:"text-center py-6 bg-brand-glass rounded-lg",children:c.jsx("p",{className:"text-zinc-500",children:"No hay pesajes que coincidan con el filtro."})})]})]}),c.jsx(sn,{isOpen:u,onClose:()=>d(!1),title:"Variación de Animales en Ordeño",children:c.jsxs("div",{className:"text-zinc-300 space-y-4",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"font-semibold text-white mb-1",children:[a.periodLabel," vs Mes Anterior"]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["El mes anterior tenías ",c.jsx("span",{className:"font-bold text-white",children:a.previousAnimalCount})," animales en ordeño. Este mes tienes ",c.jsx("span",{className:"font-bold text-white",children:a.animalCount}),"."]}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsxs("p",{children:["El cambio neto es de ",c.jsx("span",{className:"font-bold text-white",children:a.animalCount-(a.previousAnimalCount||0)})," animales"]}),c.jsx(e2,{value:a.animalCountChange})]})]}),c.jsxs("div",{className:"pt-4 border-t border-zinc-700/80",children:[a.exitingAnimalCount>0&&c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Salieron del ordeño: ",c.jsx("span",{className:"font-bold text-brand-red",children:a.exitingAnimalCount})," animales."]}),a.newAnimalsWeighings.length>0&&c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Nuevos ingresos: ",c.jsx("span",{className:"font-bold text-brand-green",children:new Set(a.newAnimalsWeighings.map(y=>y.goatId)).size})," animales."]}),a.newAnimalsWeighings.length>0&&c.jsxs("button",{onClick:()=>{p(a),d(!1)},className:"w-full mt-4 bg-brand-orange text-white font-semibold py-2 rounded-lg hover:bg-orange-600 transition-colors",children:["Analizar los ",new Set(a.newAnimalsWeighings.map(y=>y.goatId)).size," Nuevos Ingresos"]})]})]})}),c.jsx(T$e,{isOpen:!!f,onClose:()=>p(null),data:f,periodLabel:a.periodLabel,onSelectAnimal:y=>t({name:"lactation-profile",animalId:y})})]}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 px-4 pt-4",children:[c.jsx("header",{className:"text-center pb-4",children:c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Historial de Producción"})}),h.length>0?c.jsx("div",{className:"space-y-2",children:h.map(y=>c.jsx(k$e,{stats:y,onClick:()=>s(y)},y.periodId))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:c.jsx("p",{className:"text-zinc-400",children:"No hay datos históricos de pesajes registrados."})})]})}const I$e=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=I.useMemo(()=>{const a=new Date;return a.setHours(0,0,0,0),Array.from({length:7},(s,o)=>{const l=new Date(a);return l.setDate(a.getDate()-o),l})},[]),i=(a,s)=>{if(a.getTime()===s.getTime())return"Hoy";const o=new Date(s);return o.setDate(s.getDate()-1),a.getTime()===o.getTime()?"Ayer":a.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return c.jsxs("div",{className:"px-4",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(so,{size:16}),"Fecha del Pesaje"]}),c.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[c.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[c.jsx(so,{size:20}),c.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(a=>{const s=a.getTime()===t.getTime();return c.jsxs("button",{type:"button",onClick:()=>e(a),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${s?"bg-brand-orange text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[c.jsx("span",{className:"text-xs capitalize",children:i(a,r[0])}),c.jsx("span",{className:"font-bold text-2xl",children:a.getDate()}),c.jsx("span",{className:"text-xs",children:a.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},a.toISOString())})]})]})},O$e=({entry:t,onDelete:e,onRegister:n})=>{const r=!t.isRecognized;return c.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${r?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 min-w-0 pr-2",children:[r&&c.jsx(dr,{className:"text-amber-400 flex-shrink-0",size:18}),c.jsx("div",{className:"min-w-0",children:c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.animalId.toUpperCase()})})]}),c.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[r?c.jsx("button",{onClick:()=>n(t.animalId),className:"text-xs font-semibold bg-brand-orange text-white px-2 py-1 rounded-md hover:bg-orange-600",children:"Registrar Parto"}):c.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),c.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Ic,{size:16})})]})]})},M$e=({onSaveSuccess:t})=>{const{animals:e,weighings:n,fetchData:r,addWeighing:i}=Kt(),[a,s]=I.useState(""),[o,l]=I.useState(""),[u,d]=I.useState([]),[f,p]=I.useState(null),[h,g]=I.useState(()=>{const V=new Date;return V.setHours(0,0,0,0),V}),[m,v]=I.useState(!1),[y,b]=I.useState({isOpen:!1,motherId:""}),[S,A]=I.useState(!1),C=I.useRef(null),D=I.useRef(null),j=()=>{var ee;if(p(null),!a||!o)return;const V=a.toUpperCase().trim(),K=parseFloat(o),Z=h.toISOString().split("T")[0];if(K>100){p({type:"error",text:`El valor de ${K} Kg es irracional. Verifique el dato.`});return}if(K>8.5){p({type:"error",text:`Producción de ${K} Kg es muy alta. Límite: 8.5 Kg.`});return}if(u.some(le=>le.animalId===V)){p({type:"error",text:`${V} ya tiene un pesaje en esta sesión.`});return}if(n.some(le=>le.goatId===V&&le.date===Z)){p({type:"error",text:`${V} ya tiene un pesaje guardado para esta fecha.`});return}const Y=e.find(le=>le.id===V);if(Y&&Y.isReference){p({type:"error",text:`${V} es un animal de Referencia. No se pueden añadir pesajes.`});return}const H={tempId:Date.now(),animalId:V,name:Y==null?void 0:Y.name,kg:K,date:Z,isRecognized:!!Y};d(le=>[H,...le]),s(""),l(""),(ee=C.current)==null||ee.focus()},N=async()=>{p(null),A(!0);const{currentUser:V}=ig;if(!V){p({type:"error",text:"Error de autenticación."}),A(!1);return}const K=u.filter(Z=>!Z.isRecognized).length;if(K>0){p({type:"error",text:`No se puede guardar. Tienes ${K} animal(es) sin registrar.`}),A(!1);return}if(u.length===0){p({type:"error",text:"No hay pesajes para guardar."}),A(!1);return}try{const Z=u.map(Y=>{const H={goatId:Y.animalId,kg:Y.kg,date:Y.date};return i(H)});await Promise.all(Z),p({type:"success",text:`${u.length} pesajes guardados con éxito.`}),d([]),setTimeout(()=>{t(h.toISOString().split("T")[0])},1500)}catch(Z){p({type:"error",text:"Ocurrió un error al guardar localmente."}),console.error("Error en escritura local de pesajes:",Z),A(!1)}},P=V=>{var K;V.key==="Enter"&&a&&(V.preventDefault(),(K=D.current)==null||K.focus())},O=V=>{V.key==="Enter"&&o&&(V.preventDefault(),j())},T=V=>{d(K=>K.filter(Z=>Z.tempId!==V))},M=V=>{V&&(V.setHours(0,0,0,0),g(V)),v(!1)},L=()=>{r(),d(V=>V.map(K=>K.animalId===y.motherId?{...K,isRecognized:!0}:K)),b({isOpen:!1,motherId:""})};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex-shrink-0 space-y-4 pt-4",children:[c.jsxs("div",{className:"text-center px-4",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Leche"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Ordeño"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(I$e,{selectedDate:h,onDateChange:g,onOpenCalendar:()=>v(!0)}),c.jsxs("div",{className:"flex items-center gap-2 px-4",children:[c.jsx("input",{ref:C,type:"text",value:a,onChange:V=>s(V.target.value),onKeyDown:P,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),c.jsx("input",{ref:D,type:"number",step:"0.01",value:o,onChange:V=>l(V.target.value),onKeyDown:O,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),c.jsx("button",{onClick:j,disabled:!a||!o||S,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:c.jsx(ol,{size:24})})]})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[u.length===0&&c.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),u.map(V=>c.jsx(O$e,{entry:V,onDelete:T,onRegister:K=>b({isOpen:!0,motherId:K})},V.tempId))]}),c.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[f&&c.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${f.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",f.type==="success"?c.jsx(Ga,{size:18}):c.jsx(dr,{size:18})," ",c.jsx("span",{children:f.text})," "]}),c.jsxs("button",{onClick:N,disabled:S||u.length===0||u.some(V=>!V.isRecognized),className:"w-full flex items-center justify-center gap-2 bg-brand-orange/20 border border-brand-orange text-brand-orange hover:bg-brand-orange/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[S?c.jsx(jc,{size:24,className:"animate-spin"}):c.jsx(ev,{size:20}),S?"Guardando...":`Guardar ${u.length>0?`(${u.length})`:""} Pesajes`]})]})]}),c.jsx(sn,{isOpen:m,onClose:()=>v(!1),title:"Seleccionar Fecha",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(Sp,{mode:"single",selected:h,onSelect:M})})}),c.jsx(_p,{isOpen:y.isOpen,onClose:L,motherId:y.motherId})]})};function R$e({onNavigate:t,onSaveSuccess:e}){const[n,r]=I.useState("options");return n==="rapid"?c.jsx(M$e,{onSaveSuccess:e}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pt-4",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white text-center",children:"Añadir Datos de Leche"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-orange text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(bS,{className:"w-12 h-12 mb-2 text-brand-orange"}),c.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),c.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(GW,{className:"w-12 h-12 mb-2 text-brand-blue"}),c.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}const L$e=({animal:t,parturition:e,onSelectAnimal:n})=>c.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors min-h-[80px]",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),t.name&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:t.name.toUpperCase().trim()}),c.jsxs("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate+"T00:00:00Z").toLocaleDateString("es-VE",{timeZone:"UTC"})}`,e.status==="seca"&&"Lactancia finalizada"]})]}),c.jsx(qi,{className:"text-zinc-600 w-5 h-5 flex-shrink-0"})]});function F$e({navigateToRebano:t}){const{animals:e,parturitions:n,isLoading:r}=Kt(),[i,a]=I.useState("drying"),s=I.useMemo(()=>{const l=f=>e.find(p=>p.id===f),u=n.filter(f=>f.status==="en-secado").sort((f,p)=>new Date(p.dryingStartDate).getTime()-new Date(f.dryingStartDate).getTime()).map(f=>({animal:l(f.goatId),parturition:f})).filter(f=>f.animal&&!f.animal.isReference),d=n.filter(f=>f.status==="seca").sort((f,p)=>new Date(p.dryingStartDate).getTime()-new Date(f.dryingStartDate).getTime()).map(f=>({animal:l(f.goatId),parturition:f})).filter(f=>f.animal&&!f.animal.isReference);return{drying:u,dry:d}},[e,n]),o=s[i]||[];return r?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 px-4",children:[c.jsxs("header",{className:"text-center pt-4 pb-4",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestión de Secado"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Animales por Estado de Lactancia"})]}),c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[c.jsxs("button",{onClick:()=>a("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${i==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",s.drying.length,")"]}),c.jsxs("button",{onClick:()=>a("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${i==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",s.dry.length,")"]})]})}),c.jsx("div",{className:"space-y-4",children:o.length>0?o.map(({animal:l,parturition:u})=>c.jsx(L$e,{animal:l,parturition:u,onSelectAnimal:d=>t({name:"lactation-profile",animalId:d})},u.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function z$e({initialPage:t,onPageStateChange:e,navigateToRebano:n,onSwitchModule:r}){const{syncStatus:i}=Kt(),[a,s]=I.useState(t||{name:"dashboard"}),[o,l]=I.useState([]);I.useEffect(()=>{e(a)},[a,e]),I.useEffect(()=>{s(t&&typeof t=="object"&&"name"in t?t:{name:"dashboard"})},[t]);const u=[{id:"dashboard",label:"Dashboard",icon:yce},{id:"analysis",label:"Análisis",icon:$W},{id:"history",label:"Historial",icon:_ce},{id:"add-data",label:"Añadir",icon:ol},{id:"drying",label:"Secado",icon:pp}],d=m=>{l(v=>[...v,a]),s(m)},f=()=>{const m=o.pop();m?(s(m),l([...o])):a.name!=="dashboard"?s({name:"dashboard"}):r("rebano")},p=m=>{l([]),s({name:m})},h=m=>{n(m,"lactokeeper")},g=()=>{switch(a.name){case"dashboard":return c.jsx(WF,{onNavigateToAnalysis:()=>d({name:"analysis"})});case"analysis":return c.jsx(N$e,{onSelectAnimal:m=>d({name:"lactation-profile",animalId:m})});case"history":return c.jsx(D$e,{navigateToRebano:h});case"add-data":return c.jsx(R$e,{onNavigate:(m,v)=>h({name:m,...v}),onSaveSuccess:()=>d({name:"analysis"})});case"drying":return c.jsx(F$e,{navigateToRebano:h});case"lactation-profile":return c.jsx(rQ,{animalId:a.animalId,onBack:f,navigateTo:h});default:return c.jsx(WF,{onNavigateToAnalysis:()=>d({name:"analysis"})})}};return c.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col bg-brand-dark",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-brand-dark/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsx("button",{onClick:f,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(oue,{className:"text-brand-orange",size:28}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),c.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"LactoKeeper"})]})]}),c.jsx("div",{className:"w-8 flex justify-end",children:c.jsx(bv,{status:i})})]})}),c.jsx("main",{className:"flex-grow pt-16 pb-24",children:g()}),c.jsx(Zb,{onSwitchModule:r}),c.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around z-20 h-16",children:u.map(m=>c.jsxs("button",{onClick:()=>p(m.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${a.name===m.id?"text-brand-orange":"text-gray-400 hover:text-brand-orange"}`,children:[c.jsx(m.icon,{className:"w-6 h-6 mb-1"}),c.jsx("span",{className:"text-xs font-semibold",children:m.label})]},m.id))})]})}const $$e=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=I.useMemo(()=>{const a=new Date;return a.setHours(0,0,0,0),Array.from({length:7},(s,o)=>{const l=new Date(a);return l.setDate(a.getDate()-o),l})},[]),i=(a,s)=>{if(a.getTime()===s.getTime())return"Hoy";const o=new Date(s);return o.setDate(s.getDate()-1),a.getTime()===o.getTime()?"Ayer":a.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return c.jsxs("div",{className:"px-4",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(so,{size:16}),"Fecha del Pesaje"]}),c.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[c.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[c.jsx(so,{size:20}),c.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(a=>{const s=a.getTime()===t.getTime();return c.jsxs("button",{type:"button",onClick:()=>e(a),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${s?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[c.jsx("span",{className:"text-xs capitalize",children:i(a,r[0])}),c.jsx("span",{className:"font-bold text-2xl",children:a.getDate()}),c.jsx("span",{className:"text-xs",children:a.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},a.toISOString())})]})]})},B$e=({entry:t,onDelete:e})=>{const n=!t.isRecognized,r=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${n?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 min-w-0 pr-2",children:[n&&c.jsx(dr,{className:"text-amber-400 flex-shrink-0",size:18}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.animalId.toUpperCase()}),r&&c.jsx("p",{className:"text-sm font-normal text-zinc-400 truncate",children:r})]})]}),c.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[c.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),c.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Ic,{size:16})})]})]})},V$e=({onBack:t,onSaveSuccess:e})=>{const{animals:n,addBodyWeighing:r}=Kt(),[i,a]=I.useState(""),[s,o]=I.useState(""),[l,u]=I.useState([]),[d,f]=I.useState(null),[p,h]=I.useState(()=>{const O=new Date;return O.setHours(0,0,0,0),O}),[g,m]=I.useState(!1),[v,y]=I.useState(!1),b=I.useRef(null),S=I.useRef(null),A=()=>{var V,K,Z,Y,H;if(f(null),!i||!s)return;const O=i.toUpperCase().trim(),T=parseFloat(s);if(isNaN(T)||T<=0){f({type:"error",text:"Peso inválido."}),(V=S.current)==null||V.focus();return}if(T>150){f({type:"error",text:`El peso de ${T} Kg parece irracional. Verifique.`}),(K=S.current)==null||K.focus();return}if(l.some(ee=>ee.animalId===O)){f({type:"error",text:`${O} ya tiene un pesaje en esta sesión.`}),a(""),(Z=b.current)==null||Z.focus();return}const M=n.find(ee=>ee.id===O);if(M&&M.isReference){f({type:"error",text:`${O} es Referencia. No se pueden añadir pesajes.`}),a(""),(Y=b.current)==null||Y.focus();return}const L={tempId:Date.now(),animalId:O,name:M==null?void 0:M.name,kg:T,date:p.toISOString().split("T")[0],isRecognized:!!M};u(ee=>[L,...ee]),a(""),o(""),(H=b.current)==null||H.focus()},C=async()=>{f(null),y(!0);const{currentUser:O}=ig;if(!O){f({type:"error",text:"Error de autenticación."}),y(!1);return}const T=l.filter(M=>!M.isRecognized).length;if(T>0){f({type:"error",text:`No se puede guardar. Tienes ${T} animal(es) sin registrar en el rebaño.`}),y(!1);return}if(l.length===0){f({type:"error",text:"No hay pesajes para guardar."}),y(!1);return}try{const M=l.map(L=>r({animalId:L.animalId,kg:L.kg,date:L.date}));await Promise.all(M),f({type:"success",text:`${l.length} pesajes guardados con éxito.`}),u([]),setTimeout(()=>e(p.toISOString().split("T")[0]),1500)}catch(M){f({type:"error",text:"Ocurrió un error al guardar los datos."}),console.error("Error en escritura de pesajes corporales:",M),y(!1)}},D=O=>{var T;O.key==="Enter"&&i&&(O.preventDefault(),(T=S.current)==null||T.focus())},j=O=>{O.key==="Enter"&&s&&(O.preventDefault(),A())},N=O=>{u(T=>T.filter(M=>M.tempId!==O))},P=O=>{O&&(O.setHours(0,0,0,0),h(O)),m(!1)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[c.jsxs("div",{className:"flex-shrink-0 space-y-4 pt-4",children:[c.jsxs("header",{className:"text-center px-4 flex items-center",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Peso"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Pesaje Corporal"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx($$e,{selectedDate:p,onDateChange:h,onOpenCalendar:()=>m(!0)}),c.jsxs("div",{className:"flex items-center gap-2 px-4",children:[c.jsx("input",{ref:b,type:"text",value:i,onChange:O=>a(O.target.value),onKeyDown:D,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),c.jsx("input",{ref:S,type:"number",step:"0.1",value:s,onChange:O=>o(O.target.value),onKeyDown:j,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),c.jsx("button",{onClick:A,disabled:!i||!s||v,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:c.jsx(ol,{size:24})})]})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[l.length===0&&c.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),l.map(O=>c.jsx(B$e,{entry:O,onDelete:N},O.tempId))]}),c.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[d&&c.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${d.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",d.type==="success"?c.jsx(Ga,{size:18}):c.jsx(dr,{size:18})," ",c.jsx("span",{children:d.text})," "]}),c.jsxs("button",{onClick:C,disabled:v||l.length===0||l.some(O=>!O.isRecognized),className:"w-full flex items-center justify-center gap-2 bg-brand-green/20 border border-brand-green text-brand-green hover:bg-brand-green/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[v?c.jsx(jc,{size:20,className:"animate-spin"}):c.jsx(ev,{size:20}),v?"Guardando...":`Guardar ${l.length>0?`(${l.length})`:""} Pesajes`]})]})]}),c.jsx(sn,{isOpen:g,onClose:()=>m(!1),title:"Seleccionar Fecha",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(Sp,{mode:"single",selected:p,onSelect:P})})})]})};function U$e({onNavigate:t,onSaveSuccess:e}){const[n,r]=I.useState("options");return n==="rapid"?c.jsx(V$e,{onBack:()=>r("options"),onSaveSuccess:e}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pt-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Añadir Pesaje Corporal"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Carga de Datos de Crecimiento"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-green text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(bS,{className:"w-12 h-12 mb-2 text-brand-green"}),c.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),c.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(GW,{className:"w-12 h-12 mb-2 text-brand-blue"}),c.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}const W$e=({gdp:t,averageGdp:e})=>{if(t===null||!e||e===0)return null;const n=t/e;return n>1.1?c.jsx(ms,{size:18,className:"text-brand-green"}):n<.9?c.jsx(ms,{size:18,className:"text-brand-red rotate-180"}):c.jsx(dT,{size:18,className:"text-zinc-500"})},H$e=({animal:t,onSelect:e,averageGdp:n})=>{const r={Sobresaliente:"text-brand-green",Promedio:"text-zinc-400",Pobre:"text-brand-red"},i=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors min-h-[80px]",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),i&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:i}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})})]}),c.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold text-white text-base",children:[t.gdp?`${t.gdp.toFixed(0)}`:"--",c.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),c.jsx("p",{className:`font-bold text-xs ${r[t.classification]}`,children:t.classification})]}),c.jsx(W$e,{gdp:t.gdp?t.gdp/1e3:null,averageGdp:n}),c.jsx(qi,{className:"text-zinc-600 w-5 h-5"})]})]})};function HF({onSelectAnimal:t}){const{animals:e,bodyWeighings:n,parturitions:r}=Kt(),[i,a]=I.useState("all"),s=I.useMemo(()=>{const u=e.filter(O=>{if(O.status!=="Activo"||O.isReference||O.sireLotId)return!1;const T=Bf(O,r);return["Cabrita","Cabritona","Cabrito","Macho de Levante"].includes(T)});if(u.length===0)return{analyzedAnimals:[],distribution:[],averageGdp:0,gaussChartData:[],meanGdp:0,stdDev:0};let d=0,f=0;const p=u.map(O=>{const T=n.filter(Y=>Y.animalId===O.id),L=tD(O.birthWeight,T).overall??0,V=Sc(O.birthDate);L>0&&(d+=L,f++);const K=f>0?d/f:0,Z=L>0?wLe(L,K,V):0;return{...O,formattedAge:Mc(O.birthDate),ageInDays:V,gdpKgDay:L,score:Z}}),h=f>0?d/f:0,g=h,m=p.filter(O=>O.score>0).map(O=>O.score),v=m.length>0?m.reduce((O,T)=>O+T,0)/m.length:0,y=m.length>0?Math.sqrt(m.reduce((O,T)=>O+Math.pow(T-v,2),0)/m.length):0,b=v-.4*y,S=v+.4*y,C=p.sort((O,T)=>T.score-O.score).map(O=>{let T="Promedio";return O.score>0&&y>1&&(O.score<b?T="Pobre":O.score>S&&(T="Sobresaliente")),{...O,gdp:O.gdpKgDay*1e3,ageInDays:O.ageInDays,classification:T,formattedAge:O.formattedAge}}),D=[{name:"Pobre",count:C.filter(O=>O.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:C.filter(O=>O.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:C.filter(O=>O.classification==="Sobresaliente").length,fill:"#34C759"}],j=C.map(O=>O.gdp).filter(O=>O>0),N=[];let P=0;if(j.length>0){const O=Math.min(...j),T=Math.max(...j),M=Math.max(10,Math.ceil((T-O)/15));for(let V=Math.floor(O/M)*M;V<T;V+=M){const K=V,Z=V+M,Y=C.filter(H=>H.gdp>=K&&H.gdp<Z).length;Y>0&&N.push({name:`${K}-${Z}`,count:Y})}const L=g*1e3;P=j.length>0?Math.sqrt(j.reduce((V,K)=>V+Math.pow(K-L,2),0)/j.length):0}return{analyzedAnimals:C,distribution:D,averageGdp:h,gaussChartData:N,meanGdp:g*1e3,stdDev:P}},[e,n,r]),o=be.useMemo(()=>i==="all"?s.analyzedAnimals:s.analyzedAnimals.filter(u=>u.classification===i),[s.analyzedAnimals,i]),l=u=>{var d;if((d=u==null?void 0:u.payload)!=null&&d.name){const f=u.payload.name;a(p=>p===f?"all":f)}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[c.jsxs("header",{className:"text-center pt-4",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de GDP"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Ganancia Diaria de Peso"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(ms,{size:14}),c.jsx("span",{children:"GDP Media"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[s.meanGdp.toFixed(0)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(pT,{size:14}),c.jsx("span",{children:"Desv. Estándar"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[s.stdDev.toFixed(0)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{children:c.jsxs(Po,{data:s.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(ii,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(ni,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),c.jsx(xr,{content:c.jsx(vu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx(Ti,{dataKey:"count",onClick:l,cursor:"pointer",children:s.distribution.map(u=>c.jsx(hl,{fill:u.fill,className:`${i!=="all"&&i!==u.name?"opacity-30":"opacity-100"} transition-opacity`},u.name))})]})})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Campana de Gauss (g/día)"}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{children:c.jsxs(Po,{data:s.gaussChartData,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(ii,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},interval:0,angle:-30,textAnchor:"end",height:40}),c.jsx(ni,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),c.jsx(xr,{content:c.jsx(vu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx(Ti,{dataKey:"count",fill:"rgba(52, 199, 89, 0.6)",name:"Nº Animales"})]})})}),c.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[c.jsxs("span",{children:["μ = ",s.meanGdp.toFixed(0)," g/día"]})," | ",c.jsxs("span",{children:["σ = ",s.stdDev.toFixed(0)," g/día"]})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:[i==="all"?"Animales en Crecimiento":`Animales (${i})`," (",o.length,")"]}),o.length>0?o.map(u=>c.jsx(H$e,{animal:u,onSelect:t,averageGdp:s.averageGdp},u.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay animales que coincidan con los filtros."})})]})]})}const q$e=()=>{const{animals:t,bodyWeighings:e,parturitions:n}=Kt();return I.useMemo(()=>{const a=t.filter(S=>{if(S.status!=="Activo"||S.isReference||S.sireLotId)return!1;const A=Bf(S,n);return["Cabrita","Cabritona","Cabrito","Macho de Levante"].includes(A)}).map(S=>{const A=e.filter(D=>D.animalId===S.id),C=tD(S.birthWeight,A);return{...S,gdp:C.overall,ageInDays:Sc(S.birthDate)}}).filter(S=>S.gdp!==null&&S.gdp>0);if(a.length<2)return{classifiedAnimals:[],distribution:[],gaussChartData:[],meanGdp:0,stdDev:0};const o=a.reduce((S,A)=>S+A.gdp,0)/a.length,l=Math.sqrt(a.reduce((S,A)=>S+Math.pow(A.gdp-o,2),0)/a.length),u=o-.4*l,d=o+.4*l,f=a.map(S=>{let A="Promedio";return l>.005&&(S.gdp<u?A="Pobre":S.gdp>d&&(A="Sobresaliente")),{...S,classification:A,gdp:S.gdp*1e3}}),p=[{name:"Pobre",count:f.filter(S=>S.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:f.filter(S=>S.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:f.filter(S=>S.classification==="Sobresaliente").length,fill:"#34C759"}],h=f.map(S=>S.gdp),g=Math.min(...h),m=Math.max(...h),v=10,y=(m-g)/v,b=Array.from({length:v},(S,A)=>{const C=g+A*y,D=C+y,j=f.filter(N=>N.gdp>=C&&N.gdp<D).length;return{name:`${C.toFixed(0)}`,count:j}});return{classifiedAnimals:f.sort((S,A)=>A.gdp-S.gdp),distribution:p,gaussChartData:b,meanGdp:o,stdDev:l}},[t,e,n])},K$e=({animal:t,onSelect:e})=>{const n={Sobresaliente:"bg-brand-green/80",Promedio:"bg-gray-500/80",Pobre:"bg-brand-red/80"},r=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors min-h-[80px]",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),r&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:r}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})})]}),c.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold text-white text-base",children:[t.gdp?`${t.gdp.toFixed(0)}`:"--",c.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),c.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${n[t.classification]}`,children:t.classification})]}),c.jsx(qi,{className:"text-zinc-600 w-5 h-5"})]})]})},G$e=t=>{const{x:e,y:n,width:r,value:i,total:a}=t;if(a===0||i===0)return null;const s=(i/a*100).toFixed(0);return c.jsx("text",{x:e+r/2,y:n+20,fill:"#fff",textAnchor:"middle",fontSize:"12px",fontWeight:"bold",children:`${s}%`})};function Y$e({onSelectAnimal:t}){const{classifiedAnimals:e,distribution:n,gaussChartData:r,meanGdp:i,stdDev:a}=q$e(),s=I.useMemo(()=>e.map(g=>({...g,formattedAge:Mc(g.birthDate)})),[e]),{searchTerm:o,setSearchTerm:l,filteredItems:u}=_D(s,["id","name"]),[d,f]=I.useState("all"),p=be.useMemo(()=>{let g=o?u:s;return d==="all"?g:g.filter(m=>m.classification===d)},[s,d,o,u]),h=g=>{var m;if((m=g==null?void 0:g.payload)!=null&&m.name){const v=g.payload.name;f(y=>y===v?"all":v)}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[c.jsxs("header",{className:"text-center pt-4",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de GDP"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Ganancia Diaria de Peso"})]}),c.jsxs("div",{className:"relative px-4",children:[c.jsx(fu,{className:"absolute left-7 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"}),c.jsx("input",{type:"search",placeholder:`Buscar ID o Nombre en ${p.length} animales...`,value:o,onChange:g=>l(g.target.value),className:"w-full bg-brand-glass border border-brand-border rounded-xl pl-10 pr-4 py-3 text-white focus:ring-2 focus:ring-brand-orange"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(ms,{size:14}),c.jsx("span",{children:"GDP Media"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[i.toFixed(0)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(pT,{size:14}),c.jsx("span",{children:"Desv. Estándar"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[a.toFixed(0)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{children:c.jsxs(Po,{data:n,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(ii,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(ni,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),c.jsx(xr,{content:c.jsx(vu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsxs(Ti,{dataKey:"count",onClick:h,cursor:"pointer",children:[n.map(g=>c.jsx(hl,{fill:g.fill,className:`${d!=="all"&&d!==g.name?"opacity-30":"opacity-100"} transition-opacity`},g.name)),c.jsx(ao,{dataKey:"count",content:G$e})]})]})})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Campana de Gauss (g/día)"}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{children:c.jsxs(Po,{data:r,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(ii,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},interval:0,angle:-30,textAnchor:"end",height:40}),c.jsx(ni,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),c.jsx(xr,{content:c.jsx(vu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx(Ti,{dataKey:"count",fill:"rgba(52, 199, 89, 0.6)",name:"Nº Animales"})]})})}),c.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[c.jsxs("span",{children:["μ = ",i.toFixed(0)," g/día"]})," | ",c.jsxs("span",{children:["σ = ",a.toFixed(0)," g/día"]})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:[d==="all"?"Animales en Crecimiento":`Animales (${d})`," (",p.length,")"]}),p.length>0?p.map(g=>c.jsx(K$e,{animal:g,onSelect:t},g.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay animales que coincidan con los filtros."})})]})]})}function X$e({navigateToRebano:t,onSwitchModule:e}){const{syncStatus:n}=Kt(),[r,i]=I.useState("dashboard"),a=[{id:"dashboard",label:"Dashboard",icon:Ib},{id:"analysis",label:"Análisis",icon:aue},{id:"add-data",label:"Añadir",icon:ol}],s=()=>{r!=="dashboard"?i("dashboard"):e("rebano")},o=()=>{switch(r){case"dashboard":return c.jsx(HF,{onSelectAnimal:l=>t({name:"growth-profile",animalId:l})});case"analysis":return c.jsx(Y$e,{onSelectAnimal:l=>t({name:"growth-profile",animalId:l})});case"add-data":return c.jsx(U$e,{onNavigate:t,onSaveSuccess:()=>i("analysis")});default:return c.jsx(HF,{onSelectAnimal:l=>t({name:"growth-profile",animalId:l})})}};return c.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsx("button",{onClick:s,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(If,{className:"text-brand-green"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),c.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Kilos"})]})]}),c.jsx("div",{className:"w-8 flex justify-end",children:c.jsx(bv,{status:n})})]})}),c.jsx("main",{className:"flex-grow pt-16 pb-24",children:o()}),c.jsx(Zb,{onSwitchModule:e}),c.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:a.map(l=>c.jsxs("button",{onClick:()=>i(l.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${r===l.id?"text-brand-green":"text-gray-400 hover:text-brand-green"}`,children:[c.jsx(l.icon,{className:"w-6 h-6 mb-1"}),c.jsx("span",{className:"text-xs font-semibold",children:l.label})]},l.id))})]})}const Q$e=["Desparasitantes","Antibióticos","Vacunas","Vitaminas","Modificadores Orgánicos","Pomadas Tópicas","Analgésicos","Hormonas","Antiinflamatorios","Otro"],jD=({onSave:t,onCancel:e,existingProduct:n})=>{const[r,i]=I.useState(""),[a,s]=I.useState(""),[o,l]=I.useState("Otro"),[u,d]=I.useState(""),[f,p]=I.useState("ml"),[h,g]=I.useState(""),[m,v]=I.useState("Inyectable"),[y,b]=I.useState("Intramuscular"),[S,A]=I.useState("per_kg"),[C,D]=I.useState(""),[j,N]=I.useState(""),[P,O]=I.useState(""),[T,M]=I.useState(null);I.useEffect(()=>{n&&(i(n.name),s(n.laboratory||""),l(n.category||"Otro"),d(String(n.presentationValue||"")),p(n.presentationUnit||"ml"),g(String(n.price||"")),v(n.applicationType),n.applicationRoute&&b(n.applicationRoute),A(n.dosageType||"per_kg"),D(String(n.dosageFixed||"")),N(String(n.dosagePerKg_ml||"")),O(String(n.dosagePerKg_kg||"")))},[n]);const L=async V=>{if(V.preventDefault(),M(null),!r.trim()){M("El nombre es obligatorio.");return}if(S==="fixed"&&!C){M("La dosis fija es obligatoria.");return}if(S==="per_kg"&&(!j||!P)){M("Ambos campos de dosificación por Kg son obligatorios.");return}const K={name:r,applicationType:m,dosageType:S,category:o};a&&(K.laboratory=a),u&&(K.presentationValue=parseFloat(u)),K.presentationUnit=f,h&&(K.price=parseFloat(h)),m==="Inyectable"&&(K.applicationRoute=y),S==="fixed"&&(K.dosageFixed=parseFloat(C)),S==="per_kg"&&(K.dosagePerKg_ml=parseFloat(j),K.dosagePerKg_kg=parseFloat(P));try{await t(K)}catch(Z){M("No se pudo guardar el producto."),console.error(Z)}};return c.jsxs("form",{onSubmit:L,className:"space-y-4",children:[c.jsx("input",{type:"text",value:r,onChange:V=>i(V.target.value),placeholder:"Nombre o Marca Comercial",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),c.jsxs("select",{value:o,onChange:V=>l(V.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[c.jsx("option",{value:"",disabled:!0,children:"Seleccionar Categoría..."}),Q$e.map(V=>c.jsx("option",{value:V,children:V},V))]}),c.jsx("input",{type:"text",value:a,onChange:V=>s(V.target.value),placeholder:"Laboratorio (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:u,onChange:V=>d(V.target.value),placeholder:"Presentación",className:"w-full bg-zinc-800 p-3 rounded-xl"}),c.jsxs("select",{value:f,onChange:V=>p(V.target.value),className:"bg-zinc-800 p-3 rounded-xl",children:[c.jsx("option",{value:"ml",children:"ml"}),c.jsx("option",{value:"L",children:"L"})]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400",children:"$"}),c.jsx("input",{type:"number",step:"0.01",value:h,onChange:V=>g(V.target.value),placeholder:"Precio",className:"w-full bg-zinc-800 p-3 pl-7 rounded-xl"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Vía de Administración"}),c.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[c.jsx("button",{type:"button",onClick:()=>v("Inyectable"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Inyectable"}),c.jsx("button",{type:"button",onClick:()=>v("Oral"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Oral"}),c.jsx(Wi.div,{layoutId:"app-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${m==="Oral"?"left-1/2":"left-1"}`})]})]}),m==="Inyectable"&&c.jsxs(Wi.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[c.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Ruta (Inyectable)"}),c.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[c.jsx("button",{type:"button",onClick:()=>b("Intramuscular"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Intramuscular"}),c.jsx("button",{type:"button",onClick:()=>b("Subcutáneo"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Subcutáneo"}),c.jsx(Wi.div,{layoutId:"app-route-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${y==="Subcutáneo"?"left-1/2":"left-1"}`})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Dosificación"}),c.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[c.jsx("button",{type:"button",onClick:()=>A("per_kg"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Por Kg PV"}),c.jsx("button",{type:"button",onClick:()=>A("fixed"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Dosis Única"}),c.jsx(Wi.div,{layoutId:"dosage-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${S==="fixed"?"left-1/2":"left-1"}`})]}),S==="per_kg"?c.jsxs("div",{className:"flex items-center justify-between gap-2 animate-fade-in",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"number",step:"0.1",value:j,onChange:V=>N(V.target.value),placeholder:"1",className:"w-full bg-zinc-800 p-3 pr-10 rounded-xl",required:!0}),c.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"ml"})]}),c.jsx("span",{className:"text-zinc-500 text-sm",children:"por cada"}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"number",step:"1",value:P,onChange:V=>O(V.target.value),placeholder:"50",className:"w-full bg-zinc-800 p-3 pr-10 rounded-xl",required:!0}),c.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"Kg"})]})]}):c.jsxs("div",{className:"relative animate-fade-in",children:[c.jsx("input",{type:"number",step:"0.1",value:C,onChange:V=>D(V.target.value),placeholder:"Ej: 2",className:"w-full bg-zinc-800 p-3 pr-24 rounded-xl",required:!0}),c.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"ml (dosis total)"})]})]}),T&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(dr,{size:18}),c.jsx("span",{children:T})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-brand-green text-white font-bold rounded-lg",children:n?"Actualizar Producto":"Guardar Producto"})]})]})};function Z$e(){const{products:t,addProduct:e,updateProduct:n,deleteProduct:r}=Kt(),[i,a]=I.useState(!1),[s,o]=I.useState(void 0),[l,u]=I.useState(null),[d,f]=I.useState("Todos"),p=A=>{o(A),a(!0)},h=()=>{a(!1),o(void 0)},g=async A=>{s!=null&&s.id?await n(s.id,A):await e(A),h()},m=async()=>{l!=null&&l.id&&await r(l.id),u(null)},v=I.useMemo(()=>{const A=new Set(t.map(C=>C.category).filter(Boolean));return["Todos",...Array.from(A).sort()]},[t]),y=I.useMemo(()=>d==="Todos"?t:t.filter(A=>A.category===d),[t,d]),b=A=>{if(!A.price||!A.presentationValue||A.presentationValue===0)return"N/A";const C=A.presentationUnit==="L"?A.presentationValue*1e3:A.presentationValue;return C===0?"N/A":`$${(A.price/C).toFixed(3)} / ml`},S=A=>A.dosageType==="fixed"?`${A.dosageFixed} ml (fija)`:A.dosageType==="per_kg"?`${A.dosagePerKg_ml} ml / ${A.dosagePerKg_kg} Kg`:"No especificada";return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Inventario de Productos"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Gestión de Insumos Sanitarios"})]}),c.jsxs("button",{onClick:()=>p(),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:opacity-90 text-black font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(Ki,{size:18})," Añadir Nuevo Producto"]}),c.jsxs("div",{className:"space-y-2 pt-4",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-zinc-300",children:[c.jsx(FW,{size:18})," Filtrar por Categoría"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(A=>c.jsx("button",{onClick:()=>f(A),className:`px-3 py-1.5 text-sm font-semibold rounded-full transition-colors ${d===A?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:A},A))})]}),c.jsx("div",{className:"space-y-3 pt-4",children:y.length>0?y.map(A=>c.jsx("div",{className:"bg-dashboard-surface rounded-2xl p-4 border border-brand-border",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:A.name}),c.jsx("p",{className:"text-sm text-zinc-400",children:A.presentationValue?`${A.presentationValue} ${A.presentationUnit}`:"Sin presentación"}),c.jsxs("div",{className:"mt-2 flex items-center flex-wrap gap-x-4 gap-y-1 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(hp,{size:14})," ",S(A)]}),c.jsxs("span",{className:"flex items-center gap-1 font-semibold text-amber-400",children:[c.jsx(No,{size:14})," ",b(A)]})]})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>p(A),className:"p-2 text-zinc-400 hover:text-brand-orange transition-colors",children:c.jsx(Of,{size:18})}),c.jsx("button",{onClick:()=>u(A),className:"p-2 text-zinc-400 hover:text-brand-red transition-colors",children:c.jsx(Gl,{size:18})})]})]})},A.id)):c.jsxs("div",{className:"text-center py-10 bg-dashboard-surface rounded-2xl",children:[c.jsx("p",{className:"text-zinc-500 font-semibold",children:"No se encontraron productos."}),c.jsx("p",{className:"text-zinc-500 text-sm",children:d==="Todos"?"Añade tu primer producto para empezar.":`No hay productos en la categoría "${d}".`})]})})]}),c.jsx(sn,{isOpen:i,onClose:h,title:s?"Editar Producto":"Añadir Producto",children:c.jsx(jD,{onSave:g,onCancel:h,existingProduct:s})}),c.jsx(yv,{isOpen:!!l,onClose:()=>u(null),onConfirm:m,title:"Eliminar Producto",message:`¿Estás seguro de que quieres eliminar "${l==null?void 0:l.name}"? Esta acción no se puede deshacer.`})]})}var E_,xn,sQ,oQ,Ug,gh,qF,lQ,cQ,h5={},uQ=[],J$e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Qd(t,e){for(var n in e)t[n]=e[n];return t}function dQ(t){var e=t.parentNode;e&&e.removeChild(t)}function Je(t,e,n){var r,i,a,s={};for(a in e)a=="key"?r=e[a]:a=="ref"?i=e[a]:s[a]=e[a];if(arguments.length>2&&(s.children=arguments.length>3?E_.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(a in t.defaultProps)s[a]===void 0&&(s[a]=t.defaultProps[a]);return t2(t,s,r,i,null)}function t2(t,e,n,r,i){var a={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++sQ};return i==null&&xn.vnode!=null&&xn.vnode(a),a}function dd(){return{current:null}}function Hi(t){return t.children}function e9e(t,e,n,r,i){var a;for(a in n)a==="children"||a==="key"||a in e||p5(t,a,null,n[a],r);for(a in e)i&&typeof e[a]!="function"||a==="children"||a==="key"||a==="value"||a==="checked"||n[a]===e[a]||p5(t,a,e[a],n[a],r)}function KF(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||J$e.test(e)?n:n+"px"}function p5(t,e,n,r,i){var a;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||KF(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||KF(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")a=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=n,n?r||t.addEventListener(e,a?YF:GF,a):t.removeEventListener(e,a?YF:GF,a);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function GF(t){Ug=!0;try{return this.l[t.type+!1](xn.event?xn.event(t):t)}finally{Ug=!1}}function YF(t){Ug=!0;try{return this.l[t.type+!0](xn.event?xn.event(t):t)}finally{Ug=!1}}function ul(t,e){this.props=t,this.context=e}function db(t,e){if(e==null)return t.__?db(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?db(t):null}function fQ(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return fQ(t)}}function t9e(t){Ug?setTimeout(t):lQ(t)}function XP(t){(!t.__d&&(t.__d=!0)&&gh.push(t)&&!m5.__r++||qF!==xn.debounceRendering)&&((qF=xn.debounceRendering)||t9e)(m5)}function m5(){var t,e,n,r,i,a,s,o;for(gh.sort(function(l,u){return l.__v.__b-u.__v.__b});t=gh.shift();)t.__d&&(e=gh.length,r=void 0,i=void 0,s=(a=(n=t).__v).__e,(o=n.__P)&&(r=[],(i=Qd({},a)).__v=a.__v+1,ED(o,a,i,n.__n,o.ownerSVGElement!==void 0,a.__h!=null?[s]:null,r,s??db(a),a.__h),vQ(r,a),a.__e!=s&&fQ(a)),gh.length>e&&gh.sort(function(l,u){return l.__v.__b-u.__v.__b}));m5.__r=0}function hQ(t,e,n,r,i,a,s,o,l,u){var d,f,p,h,g,m,v,y=r&&r.__k||uQ,b=y.length;for(n.__k=[],d=0;d<e.length;d++)if((h=n.__k[d]=(h=e[d])==null||typeof h=="boolean"?null:typeof h=="string"||typeof h=="number"||typeof h=="bigint"?t2(null,h,null,null,h):Array.isArray(h)?t2(Hi,{children:h},null,null,null):h.__b>0?t2(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):h)!=null){if(h.__=n,h.__b=n.__b+1,(p=y[d])===null||p&&h.key==p.key&&h.type===p.type)y[d]=void 0;else for(f=0;f<b;f++){if((p=y[f])&&h.key==p.key&&h.type===p.type){y[f]=void 0;break}p=null}ED(t,h,p=p||h5,i,a,s,o,l,u),g=h.__e,(f=h.ref)&&p.ref!=f&&(v||(v=[]),p.ref&&v.push(p.ref,null,h),v.push(f,h.__c||g,h)),g!=null?(m==null&&(m=g),typeof h.type=="function"&&h.__k===p.__k?h.__d=l=pQ(h,l,t):l=mQ(t,h,p,y,g,l),typeof n.type=="function"&&(n.__d=l)):l&&p.__e==l&&l.parentNode!=t&&(l=db(p))}for(n.__e=m,d=b;d--;)y[d]!=null&&(typeof n.type=="function"&&y[d].__e!=null&&y[d].__e==n.__d&&(n.__d=gQ(r).nextSibling),bQ(y[d],y[d]));if(v)for(d=0;d<v.length;d++)yQ(v[d],v[++d],v[++d])}function pQ(t,e,n){for(var r,i=t.__k,a=0;i&&a<i.length;a++)(r=i[a])&&(r.__=t,e=typeof r.type=="function"?pQ(r,e,n):mQ(n,r,r,i,r.__e,e));return e}function g5(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){g5(n,e)}):e.push(t)),e}function mQ(t,e,n,r,i,a){var s,o,l;if(e.__d!==void 0)s=e.__d,e.__d=void 0;else if(n==null||i!=a||i.parentNode==null)e:if(a==null||a.parentNode!==t)t.appendChild(i),s=null;else{for(o=a,l=0;(o=o.nextSibling)&&l<r.length;l+=1)if(o==i)break e;t.insertBefore(i,a),s=a}return s!==void 0?s:i.nextSibling}function gQ(t){var e,n,r;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(r=gQ(n)))return r}return null}function ED(t,e,n,r,i,a,s,o,l){var u,d,f,p,h,g,m,v,y,b,S,A,C,D,j,N=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(l=n.__h,o=e.__e=n.__e,e.__h=null,a=[o]),(u=xn.__b)&&u(e);try{e:if(typeof N=="function"){if(v=e.props,y=(u=N.contextType)&&r[u.__c],b=u?y?y.props.value:u.__:r,n.__c?m=(d=e.__c=n.__c).__=d.__E:("prototype"in N&&N.prototype.render?e.__c=d=new N(v,b):(e.__c=d=new ul(v,b),d.constructor=N,d.render=r9e),y&&y.sub(d),d.props=v,d.state||(d.state={}),d.context=b,d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),N.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Qd({},d.__s)),Qd(d.__s,N.getDerivedStateFromProps(v,d.__s))),p=d.props,h=d.state,d.__v=e,f)N.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(N.getDerivedStateFromProps==null&&v!==p&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,b),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,b)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(P){P&&(P.__=e)}),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[],d.__h.length&&s.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,b),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(p,h,g)})}if(d.context=b,d.props=v,d.__P=t,A=xn.__r,C=0,"prototype"in N&&N.prototype.render){for(d.state=d.__s,d.__d=!1,A&&A(e),u=d.render(d.props,d.state,d.context),D=0;D<d._sb.length;D++)d.__h.push(d._sb[D]);d._sb=[]}else do d.__d=!1,A&&A(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++C<25);d.state=d.__s,d.getChildContext!=null&&(r=Qd(Qd({},r),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(g=d.getSnapshotBeforeUpdate(p,h)),j=u!=null&&u.type===Hi&&u.key==null?u.props.children:u,hQ(t,Array.isArray(j)?j:[j],e,n,r,i,a,s,o,l),d.base=e.__e,e.__h=null,d.__h.length&&s.push(d),m&&(d.__E=d.__=null),d.__e=!1}else a==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=n9e(n.__e,e,n,r,i,a,s,l);(u=xn.diffed)&&u(e)}catch(P){e.__v=null,(l||a!=null)&&(e.__e=o,e.__h=!!l,a[a.indexOf(o)]=null),xn.__e(P,e,n)}}function vQ(t,e){xn.__c&&xn.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){xn.__e(r,n.__v)}})}function n9e(t,e,n,r,i,a,s,o){var l,u,d,f=n.props,p=e.props,h=e.type,g=0;if(h==="svg"&&(i=!0),a!=null){for(;g<a.length;g++)if((l=a[g])&&"setAttribute"in l==!!h&&(h?l.localName===h:l.nodeType===3)){t=l,a[g]=null;break}}if(t==null){if(h===null)return document.createTextNode(p);t=i?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,p.is&&p),a=null,o=!1}if(h===null)f===p||o&&t.data===p||(t.data=p);else{if(a=a&&E_.call(t.childNodes),u=(f=n.props||h5).dangerouslySetInnerHTML,d=p.dangerouslySetInnerHTML,!o){if(a!=null)for(f={},g=0;g<t.attributes.length;g++)f[t.attributes[g].name]=t.attributes[g].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}if(e9e(t,p,f,i,o),d)e.__k=[];else if(g=e.props.children,hQ(t,Array.isArray(g)?g:[g],e,n,r,i&&h!=="foreignObject",a,s,a?a[0]:n.__k&&db(n,0),o),a!=null)for(g=a.length;g--;)a[g]!=null&&dQ(a[g]);o||("value"in p&&(g=p.value)!==void 0&&(g!==t.value||h==="progress"&&!g||h==="option"&&g!==f.value)&&p5(t,"value",g,f.value,!1),"checked"in p&&(g=p.checked)!==void 0&&g!==t.checked&&p5(t,"checked",g,f.checked,!1))}return t}function yQ(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){xn.__e(r,n)}}function bQ(t,e,n){var r,i;if(xn.unmount&&xn.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||yQ(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){xn.__e(a,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&bQ(r[i],e,n||typeof t.type!="function");n||t.__e==null||dQ(t.__e),t.__=t.__e=t.__d=void 0}function r9e(t,e,n){return this.constructor(t,n)}function fb(t,e,n){var r,i,a;xn.__&&xn.__(t,e),i=(r=!1)?null:e.__k,a=[],ED(e,t=e.__k=Je(Hi,null,[t]),i||h5,h5,e.ownerSVGElement!==void 0,i?null:e.firstChild?E_.call(e.childNodes):null,a,i?i.__e:e.firstChild,r),vQ(a,t)}function i9e(t,e){var n={__c:e="__cC"+cQ++,__:t,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,a;return this.getChildContext||(i=[],(a={})[e]=this,this.getChildContext=function(){return a},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&i.some(function(o){o.__e=!0,XP(o)})},this.sub=function(s){i.push(s);var o=s.componentWillUnmount;s.componentWillUnmount=function(){i.splice(i.indexOf(s),1),o&&o.call(s)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}E_=uQ.slice,xn={__e:function(t,e,n,r){for(var i,a,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(t)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),s=i.__d),s)return i.__E=i}catch(o){t=o}throw t}},sQ=0,oQ=function(t){return t!=null&&t.constructor===void 0},Ug=!1,ul.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Qd({},this.state),typeof t=="function"&&(t=t(Qd({},n),this.props)),t&&Qd(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),XP(this))},ul.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),XP(this))},ul.prototype.render=Hi,gh=[],lQ=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,m5.__r=0,cQ=0;var Gc,$C,XF,xQ=[],BC=[],QF=xn.__b,ZF=xn.__r,JF=xn.diffed,ez=xn.__c,tz=xn.unmount;function a9e(){for(var t;t=xQ.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(n2),t.__H.__h.forEach(QP),t.__H.__h=[]}catch(e){t.__H.__h=[],xn.__e(e,t.__v)}}xn.__b=function(t){Gc=null,QF&&QF(t)},xn.__r=function(t){ZF&&ZF(t);var e=(Gc=t.__c).__H;e&&($C===Gc?(e.__h=[],Gc.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=BC,n.__N=n.i=void 0})):(e.__h.forEach(n2),e.__h.forEach(QP),e.__h=[])),$C=Gc},xn.diffed=function(t){JF&&JF(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(xQ.push(e)!==1&&XF===xn.requestAnimationFrame||((XF=xn.requestAnimationFrame)||s9e)(a9e)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==BC&&(n.__=n.__V),n.i=void 0,n.__V=BC})),$C=Gc=null},xn.__c=function(t,e){e.some(function(n){try{n.__h.forEach(n2),n.__h=n.__h.filter(function(r){return!r.__||QP(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],xn.__e(r,n.__v)}}),ez&&ez(t,e)},xn.unmount=function(t){tz&&tz(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{n2(r)}catch(i){e=i}}),n.__H=void 0,e&&xn.__e(e,n.__v))};var nz=typeof requestAnimationFrame=="function";function s9e(t){var e,n=function(){clearTimeout(r),nz&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);nz&&(e=requestAnimationFrame(n))}function n2(t){var e=Gc,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Gc=e}function QP(t){var e=Gc;t.__c=t.__(),Gc=e}function o9e(t,e){for(var n in e)t[n]=e[n];return t}function rz(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function iz(t){this.props=t}(iz.prototype=new ul).isPureReactComponent=!0,iz.prototype.shouldComponentUpdate=function(t,e){return rz(this.props,t)||rz(this.state,e)};var az=xn.__b;xn.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),az&&az(t)};var l9e=xn.__e;xn.__e=function(t,e,n,r){if(t.then){for(var i,a=e;a=a.__;)if((i=a.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e)}l9e(t,e,n,r)};var sz=xn.unmount;function wQ(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=o9e({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return wQ(r,e,n)})),t}function SQ(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return SQ(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function VC(){this.__u=0,this.t=null,this.__b=null}function _Q(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function u1(){this.u=null,this.o=null}xn.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),sz&&sz(t)},(VC.prototype=new ul).__c=function(t,e){var n=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var i=_Q(r.__v),a=!1,s=function(){a||(a=!0,n.__R=null,i?i(o):o())};n.__R=s;var o=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=SQ(u,u.__c.__P,u.__c.__O)}var d;for(r.setState({__a:r.__b=null});d=r.t.pop();)d.forceUpdate()}},l=e.__h===!0;r.__u++||l||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(s,s)},VC.prototype.componentWillUnmount=function(){this.t=[]},VC.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=wQ(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&Je(Hi,null,t.fallback);return i&&(i.__h=null),[Je(Hi,null,e.__a?null:t.children),i]};var oz=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function c9e(t){return this.getChildContext=function(){return t.context},t.children}function u9e(t){var e=this,n=t.i;e.componentWillUnmount=function(){fb(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),fb(Je(c9e,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function d9e(t,e){var n=Je(u9e,{__v:t,i:e});return n.containerInfo=e,n}(u1.prototype=new ul).__a=function(t){var e=this,n=_Q(e.__v),r=e.o.get(t);return r[0]++,function(i){var a=function(){e.props.revealOrder?(r.push(i),oz(e,t,r)):i()};n?n(a):a()}},u1.prototype.render=function(t){this.u=null,this.o=new Map;var e=g5(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},u1.prototype.componentDidUpdate=u1.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){oz(t,n,e)})};var f9e=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,h9e=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,p9e=typeof document<"u",m9e=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};ul.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(ul.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var lz=xn.event;function g9e(){}function v9e(){return this.cancelBubble}function y9e(){return this.defaultPrevented}xn.event=function(t){return lz&&(t=lz(t)),t.persist=g9e,t.isPropagationStopped=v9e,t.isDefaultPrevented=y9e,t.nativeEvent=t};var cz={configurable:!0,get:function(){return this.class}},uz=xn.vnode;xn.vnode=function(t){var e=t.type,n=t.props,r=n;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var a in r={},n){var s=n[a];p9e&&a==="children"&&e==="noscript"||a==="value"&&"defaultValue"in n&&s==null||(a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&s===!0?s="":/ondoubleclick/i.test(a)?a="ondblclick":/^onchange(textarea|input)/i.test(a+e)&&!m9e(n.type)?a="oninput":/^onfocus$/i.test(a)?a="onfocusin":/^onblur$/i.test(a)?a="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(a)?a=a.toLowerCase():i&&h9e.test(a)?a=a.replace(/[A-Z0-9]/g,"-$&").toLowerCase():s===null&&(s=void 0),/^oninput$/i.test(a)&&(a=a.toLowerCase(),r[a]&&(a="oninputCapture")),r[a]=s)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=g5(n.children).forEach(function(o){o.props.selected=r.value.indexOf(o.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=g5(n.children).forEach(function(o){o.props.selected=r.multiple?r.defaultValue.indexOf(o.props.value)!=-1:r.defaultValue==o.props.value})),t.props=r,n.class!=n.className&&(cz.enumerable="className"in n,n.className!=null&&(r.class=n.className),Object.defineProperty(r,"className",cz))}t.$$typeof=f9e,uz&&uz(t)};var dz=xn.__r;xn.__r=function(t){dz&&dz(t),t.__c};const AQ=[],ZP=new Map;function CQ(t){AQ.push(t),ZP.forEach(e=>{EQ(e,t)})}function b9e(t){t.isConnected&&t.getRootNode&&jQ(t.getRootNode())}function jQ(t){let e=ZP.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=w9e();n&&(e.nonce=n);const r=t===document?document.head:t,i=t===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,i)}ZP.set(t,e),x9e(e)}}function x9e(t){for(const e of AQ)EQ(t,e)}function EQ(t,e){const{sheet:n}=t,r=n.cssRules.length;e.split("}").forEach((i,a)=>{i=i.trim(),i&&n.insertRule(i+"}",r+a)})}let UC;function w9e(){return UC===void 0&&(UC=S9e()),UC}function S9e(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&jQ(document);var _9e=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';CQ(_9e);class ND{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:r}=this;e in r&&(n?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function PD(t){t.parentNode&&t.parentNode.removeChild(t)}function $s(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(A9e(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function A9e(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function C9e(t,e){let n=t instanceof HTMLElement?[t]:t,r=[];for(let i=0;i<n.length;i+=1){let a=n[i].querySelectorAll(e);for(let s=0;s<a.length;s+=1)r.push(a[s])}return r}const j9e=/(top|left|right|bottom|width|height)$/i;function B0(t,e){for(let n in e)NQ(t,n,e[n])}function NQ(t,e,n){n==null?t.style[e]="":typeof n=="number"&&j9e.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function PQ(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let fz=0;function N_(){return fz+=1,"fc-dom-"+fz}function P_(t){t.preventDefault()}function E9e(t,e){return n=>{let r=$s(n.target,t);r&&e.call(r,n,r)}}function kQ(t,e,n,r){let i=E9e(n,r);return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}function N9e(t,e,n,r){let i;return kQ(t,"mouseover",e,(a,s)=>{if(s!==i){i=s,n(a,s);let o=l=>{i=null,r(l,s),s.removeEventListener("mouseleave",o)};s.addEventListener("mouseleave",o)}})}const hz=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function P9e(t,e){let n=r=>{e(r),hz.forEach(i=>{t.removeEventListener(i,n)})};hz.forEach(r=>{t.addEventListener(r,n)})}function TQ(t){return Object.assign({onClick:t},DQ(t))}function DQ(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let pz=0;function Ap(){return pz+=1,String(pz)}function kD(){document.body.classList.add("fc-not-allowed")}function TD(){document.body.classList.remove("fc-not-allowed")}function k9e(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",P_)}function T9e(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",P_)}function D9e(t){t.addEventListener("contextmenu",P_)}function I9e(t){t.removeEventListener("contextmenu",P_)}function O9e(t){let e=[],n=[],r,i;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),r=0;r<n.length;r+=1)i=n[r],typeof i=="string"?e.push(i.charAt(0)==="-"?{field:i.substring(1),order:-1}:{field:i,order:1}):typeof i=="function"&&e.push({func:i});return e}function M9e(t,e,n){let r,i;for(r=0;r<n.length;r+=1)if(i=R9e(t,e,n[r]),i)return i;return 0}function R9e(t,e,n){return n.func?n.func(t,e):L9e(t[n.field],e[n.field])*(n.order||1)}function L9e(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function WC(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function V0(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((r,i,a)=>r.replace("$"+a,i||""),t):n}function F9e(t,e){return t-e}function HC(t){return t%1===0}function z9e(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const $9e=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Cr(t,e){return typeof t=="string"?B9e(t):typeof t=="object"&&t?mz(t):typeof t=="number"?mz({[e||"milliseconds"]:t}):null}function B9e(t){let e=$9e.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function mz(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function V9e(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function U9e(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function W9e(t){return Mm(t)/365}function H9e(t){return Mm(t)/30}function Mm(t){return hb(t)/864e5}function hb(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function JP(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function jf(t,e,n){if(t===e)return!0;let r=t.length,i;if(r!==e.length)return!1;for(i=0;i<r;i+=1)if(!(n?n(t[i],e[i]):t[i]===e[i]))return!1;return!0}const q9e=["sun","mon","tue","wed","thu","fri","sat"];function gz(t,e){let n=Zd(t);return n[2]+=e*7,wo(n)}function Ka(t,e){let n=Zd(t);return n[2]+=e,wo(n)}function Ef(t,e){let n=Zd(t);return n[6]+=e,wo(n)}function K9e(t,e){return xv(t,e)/7}function xv(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function G9e(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function Y9e(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function X9e(t,e){return(e.valueOf()-t.valueOf())/1e3}function Q9e(t,e){let n=Ai(t),r=Ai(e);return{years:0,months:0,days:Math.round(xv(n,r)),milliseconds:e.valueOf()-r.valueOf()-(t.valueOf()-n.valueOf())}}function Z9e(t,e){let n=v5(t,e);return n!==null&&n%7===0?n/7:null}function v5(t,e){return Jd(t)===Jd(e)?Math.round(xv(t,e)):null}function Ai(t){return wo([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function J9e(t){return wo([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function eBe(t){return wo([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function tBe(t){return wo([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function nBe(t,e,n){let r=t.getUTCFullYear(),i=qC(t,r,e,n);if(i<1)return qC(t,r-1,e,n);let a=qC(t,r+1,e,n);return a>=1?Math.min(i,a):i}function qC(t,e,n,r){let i=wo([e,0,1+rBe(e,n,r)]),a=Ai(t),s=Math.round(xv(i,a));return Math.floor(s/7)+1}function rBe(t,e,n){let r=7+e-n;return-((7+wo([t,0,r]).getUTCDay()-e)%7)+r-1}function vz(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function yz(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function Zd(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function wo(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function IQ(t){return!isNaN(t.valueOf())}function Jd(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function iBe(t,e,n=!1){let r=t.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",ID(e,!0)))),r}function DD(t){return t.toISOString().replace(/T.*$/,"")}function aBe(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function ID(t,e=!1){let n=t<0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),a=Math.round(r%60);return e?`${n+WC(i,2)}:${WC(a,2)}`:`GMT${n}${i}${a?`:${WC(a,2)}`:""}`}function yr(t,e,n){let r,i;return function(...a){if(!r)i=t.apply(this,a);else if(!jf(r,a)){let s=t.apply(this,a);(!e||!e(s,i))&&(i=s)}return r=a,i}}function r2(t,e,n){let r,i;return a=>(r?kc(r,a)||(i=t.call(this,a)):i=t.call(this,a),r=a,i)}const KC={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},y5={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},d1=/\s*([ap])\.?m\.?/i,sBe=/,/g,oBe=/\s+/g,lBe=/\u200e/g,cBe=/UTC|GMT/;class uBe{constructor(e){let n={},r={},i=9;for(let a in e)a in KC?(r[a]=e[a],KC[a]<9&&(i=Math.min(KC[a],i))):(n[a]=e[a],a in y5&&(i=Math.min(y5[a],i)));this.standardDateProps=n,this.extendedSettings=r,this.smallestUnitNum=i,this.buildFormattingFunc=yr(bz)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,r,i){let{standardDateProps:a,extendedSettings:s}=this,o=gBe(e.marker,n.marker,r.calendarSystem);if(!o)return this.format(e,r);let l=o;l>1&&(a.year==="numeric"||a.year==="2-digit")&&(a.month==="numeric"||a.month==="2-digit")&&(a.day==="numeric"||a.day==="2-digit")&&(l=1);let u=this.format(e,r),d=this.format(n,r);if(u===d)return u;let f=vBe(a,l),p=bz(f,s,r),h=p(e),g=p(n),m=yBe(u,h,d,g),v=s.separator||i||r.defaultSeparator||"";return m?m.before+h+v+g+m.after:u+v+d}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function bz(t,e,n){let r=Object.keys(t).length;return r===1&&t.timeZoneName==="short"?i=>ID(i.timeZoneOffset):r===0&&e.week?i=>mBe(n.computeWeekNumber(i.marker),n.weekText,n.weekTextLong,n.locale,e.week):dBe(t,e,n)}function dBe(t,e,n){t=Object.assign({},t),e=Object.assign({},e),fBe(t,e),t.timeZone="UTC";let r=new Intl.DateTimeFormat(n.locale.codes,t),i;if(e.omitZeroMinute){let a=Object.assign({},t);delete a.minute,i=new Intl.DateTimeFormat(n.locale.codes,a)}return a=>{let{marker:s}=a,o;i&&!s.getUTCMinutes()?o=i:o=r;let l=o.format(s);return hBe(l,a,t,e,n)}}function fBe(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function hBe(t,e,n,r,i){return t=t.replace(lBe,""),n.timeZoneName==="short"&&(t=pBe(t,i.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":ID(e.timeZoneOffset))),r.omitCommas&&(t=t.replace(sBe,"").trim()),r.omitZeroMinute&&(t=t.replace(":00","")),r.meridiem===!1?t=t.replace(d1,"").trim():r.meridiem==="narrow"?t=t.replace(d1,(a,s)=>s.toLocaleLowerCase()):r.meridiem==="short"?t=t.replace(d1,(a,s)=>`${s.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(t=t.replace(d1,a=>a.toLocaleLowerCase())),t=t.replace(oBe," "),t=t.trim(),t}function pBe(t,e){let n=!1;return t=t.replace(cBe,()=>(n=!0,e)),n||(t+=` ${e}`),t}function mBe(t,e,n,r,i){let a=[];return i==="long"?a.push(n):(i==="short"||i==="narrow")&&a.push(e),(i==="long"||i==="short")&&a.push(" "),a.push(r.simpleNumberFormat.format(t)),r.options.direction==="rtl"&&a.reverse(),a.join("")}function gBe(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:Jd(t)!==Jd(e)?1:0}function vBe(t,e){let n={};for(let r in t)(!(r in y5)||y5[r]<=e)&&(n[r]=t[r]);return n}function yBe(t,e,n,r){let i=0;for(;i<t.length;){let a=t.indexOf(e,i);if(a===-1)break;let s=t.substr(0,a);i=a+e.length;let o=t.substr(i),l=0;for(;l<n.length;){let u=n.indexOf(r,l);if(u===-1)break;let d=n.substr(0,u);l=u+r.length;let f=n.substr(l);if(s===d&&o===f)return{before:s,after:o}}}return null}function xz(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function b5(t,e,n,r){let i=xz(t,n.calendarSystem),a=e?xz(e,n.calendarSystem):null;return{date:i,start:i,end:a,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}class bBe{constructor(e){this.cmdStr=e}format(e,n,r){return n.cmdFormatter(this.cmdStr,b5(e,null,n,r))}formatRange(e,n,r,i){return r.cmdFormatter(this.cmdStr,b5(e,n,r,i))}}class xBe{constructor(e){this.func=e}format(e,n,r){return this.func(b5(e,null,n,r))}formatRange(e,n,r,i){return this.func(b5(e,n,r,i))}}function Ha(t){return typeof t=="object"&&t?new uBe(t):typeof t=="string"?new bBe(t):typeof t=="function"?new xBe(t):null}const wz={navLinkDayClick:Ze,navLinkWeekClick:Ze,duration:Cr,bootstrapFontAwesome:Ze,buttonIcons:Ze,customButtons:Ze,defaultAllDayEventDuration:Cr,defaultTimedEventDuration:Cr,nextDayThreshold:Cr,scrollTime:Cr,scrollTimeReset:Boolean,slotMinTime:Cr,slotMaxTime:Cr,dayPopoverFormat:Ha,slotDuration:Cr,snapDuration:Cr,headerToolbar:Ze,footerToolbar:Ze,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Ha,dayHeaderClassNames:Ze,dayHeaderContent:Ze,dayHeaderDidMount:Ze,dayHeaderWillUnmount:Ze,dayCellClassNames:Ze,dayCellContent:Ze,dayCellDidMount:Ze,dayCellWillUnmount:Ze,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Ze,weekNumbers:Boolean,weekNumberClassNames:Ze,weekNumberContent:Ze,weekNumberDidMount:Ze,weekNumberWillUnmount:Ze,editable:Boolean,viewClassNames:Ze,viewDidMount:Ze,viewWillUnmount:Ze,nowIndicator:Boolean,nowIndicatorSnap:Ze,nowIndicatorClassNames:Ze,nowIndicatorContent:Ze,nowIndicatorDidMount:Ze,nowIndicatorWillUnmount:Ze,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Ze,locale:Ze,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Ze,eventOrder:O9e,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Ze,contentHeight:Ze,direction:String,weekNumberFormat:Ha,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Ze,initialDate:Ze,now:Ze,eventDataTransform:Ze,stickyHeaderDates:Ze,stickyFooterScrollbar:Ze,viewHeight:Ze,defaultAllDay:Boolean,eventSourceFailure:Ze,eventSourceSuccess:Ze,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Ze,eventConstraint:Ze,eventAllow:Ze,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Ze,eventContent:Ze,eventDidMount:Ze,eventWillUnmount:Ze,selectConstraint:Ze,selectOverlap:Ze,selectAllow:Ze,droppable:Boolean,unselectCancel:String,slotLabelFormat:Ze,slotLaneClassNames:Ze,slotLaneContent:Ze,slotLaneDidMount:Ze,slotLaneWillUnmount:Ze,slotLabelClassNames:Ze,slotLabelContent:Ze,slotLabelDidMount:Ze,slotLabelWillUnmount:Ze,dayMaxEvents:Ze,dayMaxEventRows:Ze,dayMinWidth:Number,slotLabelInterval:Cr,allDayText:String,allDayClassNames:Ze,allDayContent:Ze,allDayDidMount:Ze,allDayWillUnmount:Ze,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Ha,rerenderDelay:Number,moreLinkText:Ze,moreLinkHint:Ze,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Ze,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Cr,hiddenDays:Ze,fixedWeekCount:Boolean,validRange:Ze,visibleRange:Ze,titleFormat:Ze,eventInteractive:Boolean,noEventsText:String,viewHint:Ze,navLinkHint:Ze,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Ze,moreLinkClassNames:Ze,moreLinkContent:Ze,moreLinkDidMount:Ze,moreLinkWillUnmount:Ze,monthStartFormat:Ha,handleCustomRendering:Ze,customRenderingMetaMap:Ze,customRenderingReplaces:Boolean},U0={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},Sz={datesSet:Ze,eventsSet:Ze,eventAdd:Ze,eventChange:Ze,eventRemove:Ze,windowResize:Ze,eventClick:Ze,eventMouseEnter:Ze,eventMouseLeave:Ze,select:Ze,unselect:Ze,loading:Ze,_unmount:Ze,_beforeprint:Ze,_afterprint:Ze,_noEventDrop:Ze,_noEventResize:Ze,_resize:Ze,_scrollRequest:Ze},_z={buttonText:Ze,buttonHints:Ze,views:Ze,plugins:Ze,initialEvents:Ze,events:Ze,eventSources:Ze},fh={headerToolbar:hh,footerToolbar:hh,buttonText:hh,buttonHints:hh,buttonIcons:hh,dateIncrement:hh,plugins:f1,events:f1,eventSources:f1,resources:f1};function hh(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?kc(t,e):t===e}function f1(t,e){return Array.isArray(t)&&Array.isArray(e)?jf(t,e):t===e}const wBe={type:String,component:Ze,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Ze,usesMinMaxTime:Boolean,classNames:Ze,content:Ze,didMount:Ze,willUnmount:Ze};function GC(t){return MD(t,fh)}function OD(t,e){let n={},r={};for(let i in e)i in t&&(n[i]=e[i](t[i]));for(let i in t)i in e||(r[i]=t[i]);return{refined:n,extra:r}}function Ze(t){return t}const{hasOwnProperty:x5}=Object.prototype;function MD(t,e){let n={};if(e){for(let r in e)if(e[r]===hh){let i=[];for(let a=t.length-1;a>=0;a-=1){let s=t[a][r];if(typeof s=="object"&&s)i.unshift(s);else if(s!==void 0){n[r]=s;break}}i.length&&(n[r]=MD(i))}}for(let r=t.length-1;r>=0;r-=1){let i=t[r];for(let a in i)a in n||(n[a]=i[a])}return n}function rp(t,e){let n={};for(let r in t)e(t[r],r)&&(n[r]=t[r]);return n}function Cp(t,e){let n={};for(let r in t)n[r]=e(t[r],r);return n}function OQ(t){let e={};for(let n of t)e[n]=!0;return e}function RD(t){let e=[];for(let n in t)e.push(t[n]);return e}function kc(t,e){if(t===e)return!0;for(let n in t)if(x5.call(t,n)&&!(n in e))return!1;for(let n in e)if(x5.call(e,n)&&t[n]!==e[n])return!1;return!0}const SBe=/^on[A-Z]/;function _Be(t,e){const n=ABe(t,e);for(let r of n)if(!SBe.test(r))return!1;return!0}function ABe(t,e){let n=[];for(let r in t)x5.call(t,r)&&(r in e||n.push(r));for(let r in e)x5.call(e,r)&&t[r]!==e[r]&&n.push(r);return n}function YC(t,e,n={}){if(t===e)return!0;for(let r in e)if(!(r in t&&CBe(t[r],e[r],n[r])))return!1;for(let r in t)if(!(r in e))return!1;return!0}function CBe(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function jBe(t,e=0,n,r=1){let i=[];n==null&&(n=Object.keys(t).length);for(let a=e;a<n;a+=r){let s=t[a];s!==void 0&&i.push(s)}return i}let MQ={};function EBe(t,e){MQ[t]=e}function NBe(t){return new MQ[t]}class PBe{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return wo(e)}markerToArray(e){return Zd(e)}}EBe("gregory",PBe);const kBe=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function TBe(t){let e=kBe.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(IQ(n)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class DBe{constructor(e){let n=this.timeZone=e.timeZone,r=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=NBe(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):wo(vz(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=wo(e)),n===null||!IQ(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=TBe(e);if(n===null)return null;let{marker:r}=n,i=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):i=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:i}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n,this.calendarSystem.arrayToMarker(r)}addMonths(e,n){let r=this.calendarSystem.markerToArray(e);return r[1]+=n,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,n){let{calendarSystem:r}=this;return Jd(e)===Jd(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)&&r.getMarkerMonth(e)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:r}=this;return Jd(e)===Jd(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(e)+(r.getMarkerYear(n)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let r=this.diffWholeYears(e,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,n),r!==null?{unit:"month",value:r}:(r=Z9e(e,n),r!==null?{unit:"week",value:r}:(r=v5(e,n),r!==null?{unit:"day",value:r}:(r=G9e(e,n),HC(r)?{unit:"hour",value:r}:(r=Y9e(e,n),HC(r)?{unit:"minute",value:r}:(r=X9e(e,n),HC(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,r){let i;return r.years&&(i=this.diffWholeYears(e,n),i!==null)?i/W9e(r):r.months&&(i=this.diffWholeMonths(e,n),i!==null)?i/H9e(r):r.days&&(i=v5(e,n),i!==null)?i/Mm(r):(n.valueOf()-e.valueOf())/hb(r)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?Ai(e):n==="hour"?J9e(e):n==="minute"?eBe(e):n==="second"?tBe(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):nBe(e,this.weekDow,this.weekDoy)}format(e,n,r={}){return n.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,r,i={}){return i.isEndExclusive&&(n=Ef(n,-1)),r.formatRange({marker:e,timeZoneOffset:i.forcedStartTzo!=null?i.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:i.forcedEndTzo!=null?i.forcedEndTzo:this.offsetForMarker(n)},this,i.defaultSeparator)}formatIso(e,n={}){let r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(e)),iBe(e,r,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?wo(vz(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):wo(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-yz(Zd(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Zd(e)):null}toDate(e,n){return this.timeZone==="local"?yz(Zd(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Zd(e))*1e3*60):new Date(e.valueOf()-(n||0))}}class Jb{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,r;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(r in e)n[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}Jb.prototype.classes={};Jb.prototype.iconClasses={};Jb.prototype.baseIconClass="";Jb.prototype.iconOverridePrefix="";function w5(t){t();let e=xn.debounceRendering,n=[];function r(i){n.push(i)}for(xn.debounceRendering=r,fb(Je(IBe,{}),document.createElement("div"));n.length;)n.shift()();xn.debounceRendering=e}class IBe extends ul{render(){return Je("div",{})}componentDidMount(){this.setState({})}}function RQ(t){let e=i9e(t),n=e.Provider;return e.Provider=function(){let r=!this.getChildContext,i=n.apply(this,arguments);if(r){let a=[];this.shouldComponentUpdate=s=>{this.props.value!==s.value&&a.forEach(o=>{o.context=s.value,o.forceUpdate()})},this.sub=s=>{a.push(s);let o=s.componentWillUnmount;s.componentWillUnmount=()=>{a.splice(a.indexOf(s),1),o&&o.call(s)}}}return i},e}class OBe{constructor(e,n,r,i){this.execFunc=e,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=i,this.handleScrollRequest=a=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},a),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const jp=RQ({});function MBe(t,e,n,r,i,a,s,o,l,u,d,f,p,h){return{dateEnv:i,nowManager:a,options:n,pluginHooks:o,emitter:d,dispatch:l,getCurrentData:u,calendarApi:f,viewSpec:t,viewApi:e,dateProfileGenerator:r,theme:s,isRtl:n.direction==="rtl",addResizeHandler(g){d.on("_resize",g)},removeResizeHandler(g){d.off("_resize",g)},createScrollResponder(g){return new OBe(g,d,Cr(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:p,unregisterInteractiveComponent:h}}class Ep extends ul{shouldComponentUpdate(e,n){return!YC(this.props,e,this.propEquality)||!YC(this.state,n,this.stateEquality)}safeSetState(e){YC(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Ep.addPropsEquality=RBe;Ep.addStateEquality=LBe;Ep.contextType=jp;Ep.prototype.propEquality={};Ep.prototype.stateEquality={};class Mi extends Ep{}Mi.contextType=jp;function RBe(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function LBe(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function yu(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class LD extends Mi{constructor(){super(...arguments),this.id=Ap(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:r}=this.props;(!n.customRenderingReplaces||!ek(r,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&yu(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:r}=n,{customGenerator:i,defaultGenerator:a,renderProps:s}=e,o=LQ(e,[],this.handleEl);let l=!1,u,d=[],f;if(i!=null){const p=typeof i=="function"?i(s,Je):i;if(p===!0)l=!0;else{const h=p&&typeof p=="object";h&&"html"in p?o.dangerouslySetInnerHTML={__html:p.html}:h&&"domNodes"in p?d=Array.prototype.slice.call(p.domNodes):(h?oQ(p):typeof p!="function")?u=p:f=p}}else l=!ek(e.generatorName,r);return l&&a&&(u=a(s)),this.queuedDomNodes=d,this.currentGeneratorMeta=f,Je(e.elTag,o,u)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:r,context:i}=this,{handleCustomRendering:a,customRenderingMetaMap:s}=i.options;if(a){const o=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:s==null?void 0:s[r.generatorName];o&&a(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:o},r),{elClasses:(r.elClasses||[]).filter(FBe)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,r=this.base;if(!jf(e,n)){n.forEach(PD);for(let i of e)r.appendChild(i);this.currentDomNodes=e}}}LD.addPropsEquality({elClasses:jf,elStyle:kc,elAttrs:_Be,renderProps:kc});function ek(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function LQ(t,e,n){const r=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(r.className=(t.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),t.elStyle&&(r.style=t.elStyle),r}function FBe(t){return!!t}const FQ=RQ(0);class xd extends ul{constructor(){super(...arguments),this.InnerContent=zBe.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(yu(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=$Be(e.classNameGenerator,e.renderProps);if(e.children){const r=LQ(e,n,this.handleEl),i=e.children(this.InnerContent,e.renderProps,r);return e.elTag?Je(e.elTag,r,i):i}else return Je(LD,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}xd.contextType=FQ;function zBe(t,e){const n=t.props;return Je(LD,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function $Be(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class Az extends Mi{render(){let{props:e,context:n}=this,{options:r}=n,i={view:n.viewApi};return Je(xd,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...zQ(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>e.children)}}function zQ(t){return[`fc-${t.type}-view`,"fc-view"]}function BBe(t,e){let n=null,r=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(r=e.createMarker(t.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function Cz(t,e){let n=[],{start:r}=e,i,a;for(t.sort(VBe),i=0;i<t.length;i+=1)a=t[i],a.start>r&&n.push({start:r,end:a.start}),a.end>r&&(r=a.end);return r<e.end&&n.push({start:r,end:e.end}),n}function VBe(t,e){return t.start.valueOf()-e.start.valueOf()}function Wg(t,e){let{start:n,end:r}=t,i=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(n===null||r===null||n<r)&&(i={start:n,end:r}),i}function UBe(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function FD(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function k_(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function mf(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function WBe(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function $Q(t){let e=Math.floor(xv(t.start,t.end))||1,n=Ai(t.start),r=Ka(n,e);return{start:n,end:r}}function BQ(t,e=Cr(0)){let n=null,r=null;if(t.end){r=Ai(t.end);let i=t.end.valueOf()-r.valueOf();i&&i>=hb(e)&&(r=Ka(r,1))}return t.start&&(n=Ai(t.start),r&&r<=n&&(r=Ka(n,1))),{start:n,end:r}}function bm(t,e,n,r){return r==="year"?Cr(n.diffWholeYears(t,e),"year"):r==="month"?Cr(n.diffWholeMonths(t,e),"month"):Q9e(t,e)}class VQ{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,r){let{dateEnv:i}=this.props,a=i.subtract(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(a,-1,r)}buildNext(e,n,r){let{dateEnv:i}=this.props,a=i.add(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(a,1,r)}build(e,n,r=!0){let{props:i}=this,a,s,o,l,u,d;return a=this.buildValidRange(),a=this.trimHiddenDays(a),r&&(e=WBe(e,a)),s=this.buildCurrentRangeInfo(e,n),o=/^(year|month|week|day)$/.test(s.unit),l=this.buildRenderRange(this.trimHiddenDays(s.range),s.unit,o),l=this.trimHiddenDays(l),u=l,i.showNonCurrentDates||(u=Wg(u,s.range)),u=this.adjustActiveRange(u),u=Wg(u,a),d=FD(s.range,a),mf(l,e)||(e=l.start),{currentDate:e,validRange:a,currentRange:s.range,currentRangeUnit:s.unit,isRangeAllDay:o,activeRange:u,renderRange:l,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:d,dateIncrement:this.buildDateIncrement(s.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:r}=this,i=null,a=null,s=null,o;return r.duration?(i=r.duration,a=r.durationUnit,s=this.buildRangeFromDuration(e,n,i,a)):(o=this.props.dayCount)?(a="day",s=this.buildRangeFromDayCount(e,n,o)):(s=this.buildCustomVisibleRange(e))?a=r.dateEnv.greatestWholeUnit(s.start,s.end).unit:(i=this.getFallbackDuration(),a=JP(i).unit,s=this.buildRangeFromDuration(e,n,i,a)),{duration:i,unit:a,range:s}}getFallbackDuration(){return Cr({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:r,slotMinTime:i,slotMaxTime:a}=this.props,{start:s,end:o}=e;return r&&(Mm(i)<0&&(s=Ai(s),s=n.add(s,i)),Mm(a)>1&&(o=Ai(o),o=Ka(o,-1),o=n.add(o,a))),{start:s,end:o}}buildRangeFromDuration(e,n,r,i){let{dateEnv:a,dateAlignment:s}=this.props,o,l,u;if(!s){let{dateIncrement:f}=this.props;f&&hb(f)<hb(r)?s=JP(f).unit:s=i}Mm(r)<=1&&this.isHiddenDay(o)&&(o=this.skipHiddenDays(o,n),o=Ai(o));function d(){o=a.startOf(e,s),l=a.add(o,r),u={start:o,end:l}}return d(),this.trimHiddenDays(u)||(e=this.skipHiddenDays(e,n),d()),u}buildRangeFromDayCount(e,n,r){let{dateEnv:i,dateAlignment:a}=this.props,s=0,o=e,l;a&&(o=i.startOf(o,a)),o=Ai(o),o=this.skipHiddenDays(o,n),l=o;do l=Ka(l,1),this.isHiddenDay(l)||(s+=1);while(s<r);return{start:o,end:l}}buildCustomVisibleRange(e){let{props:n}=this,r=n.visibleRangeInput,i=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(e)):r,a=this.refineRange(i);return a&&(a.start==null||a.end==null)?null:a}buildRenderRange(e,n,r){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,r;return n||((r=this.props.dateAlignment)?Cr(1,r):e||Cr({days:1}))}refineRange(e){if(e){let n=BBe(e,this.props.dateEnv);return n&&(n=BQ(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],r=0,i;for(this.props.weekends===!1&&e.push(0,6),i=0;i<7;i+=1)(n[i]=e.indexOf(i)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:r}=e;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?n:0)+7)%7];)e=Ka(e,n);return e}}function zD(t,e,n,r){return{instanceId:Ap(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:r??null}}function HBe(t,e,n,r){for(let i=0;i<r.length;i+=1){let a=r[i].parse(t,n);if(a){let{allDay:s}=t;return s==null&&(s=e,s==null&&(s=a.allDayGuess,s==null&&(s=!1))),{allDay:s,duration:a.duration,typeData:a.typeData,typeId:i}}}return null}function ip(t,e,n){let{dateEnv:r,pluginHooks:i,options:a}=n,{defs:s,instances:o}=t;o=rp(o,l=>!s[l.defId].recurringDef);for(let l in s){let u=s[l];if(u.recurringDef){let{duration:d}=u.recurringDef;d||(d=u.allDay?a.defaultAllDayEventDuration:a.defaultTimedEventDuration);let f=qBe(u,d,e,r,i.recurringTypes);for(let p of f){let h=zD(l,{start:p,end:r.add(p,d)});o[h.instanceId]=h}}}return{defs:s,instances:o}}function qBe(t,e,n,r,i){let s=i[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:r.subtract(n.start,e),end:n.end},r);return t.allDay&&(s=s.map(Ai)),s}const i2={id:String,groupId:String,title:String,url:String,interactive:Boolean},UQ={start:Ze,end:Ze,date:Ze,allDay:Boolean},KBe=Object.assign(Object.assign(Object.assign({},i2),UQ),{extendedProps:Ze});function WQ(t,e,n,r,i=$D(n),a,s){let{refined:o,extra:l}=HQ(t,n,i),u=YBe(e,n),d=HBe(o,u,n.dateEnv,n.pluginHooks.recurringTypes);if(d){let p=tk(o,l,e?e.sourceId:"",d.allDay,!!d.duration,n,a);return p.recurringDef={typeId:d.typeId,typeData:d.typeData,duration:d.duration},{def:p,instance:null}}let f=GBe(o,u,n,r);if(f){let p=tk(o,l,e?e.sourceId:"",f.allDay,f.hasEnd,n,a),h=zD(p.defId,f.range,f.forcedStartTzo,f.forcedEndTzo);return s&&p.publicId&&s[p.publicId]&&(h.instanceId=s[p.publicId]),{def:p,instance:h}}return null}function HQ(t,e,n=$D(e)){return OD(t,n)}function $D(t){return Object.assign(Object.assign(Object.assign({},S5),KBe),t.pluginHooks.eventRefiners)}function tk(t,e,n,r,i,a,s){let o={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(s&&t.id?s[t.id]:"")||Ap(),sourceId:n,allDay:r,hasEnd:i,interactive:t.interactive,ui:_5(t,a),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let l of a.pluginHooks.eventDefMemberAdders)Object.assign(o,l(t));return Object.freeze(o.ui.classNames),Object.freeze(o.extendedProps),o}function GBe(t,e,n,r){let{allDay:i}=t,a,s=null,o=!1,l,u=null,d=t.start!=null?t.start:t.date;if(a=n.dateEnv.createMarkerMeta(d),a)s=a.marker;else if(!r)return null;return t.end!=null&&(l=n.dateEnv.createMarkerMeta(t.end)),i==null&&(e!=null?i=e:i=(!a||a.isTimeUnspecified)&&(!l||l.isTimeUnspecified)),i&&s&&(s=Ai(s)),l&&(u=l.marker,i&&(u=Ai(u)),s&&u<=s&&(u=null)),u?o=!0:r||(o=n.options.forceEventDuration||!1,u=n.dateEnv.add(s,i?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:i,hasEnd:o,range:{start:s,end:u},forcedStartTzo:a?a.forcedTzo:null,forcedEndTzo:l?l.forcedTzo:null}}function YBe(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function pb(t,e,n,r,i,a){let s=_c(),o=$D(n);for(let l of t){let u=WQ(l,e,n,r,o,i,a);u&&nk(u,s)}return s}function nk(t,e=_c()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function BD(t,e){let n=t.instances[e];if(n){let r=t.defs[n.defId],i=T_(t,a=>XBe(r,a));return i.defs[r.defId]=r,i.instances[n.instanceId]=n,i}return _c()}function XBe(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function _c(){return{defs:{},instances:{}}}function VD(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function T_(t,e){let n=rp(t.defs,e),r=rp(t.instances,i=>n[i.defId]);return{defs:n,instances:r}}function QBe(t,e){let{defs:n,instances:r}=t,i={},a={};for(let s in n)e.defs[s]||(i[s]=n[s]);for(let s in r)!e.instances[s]&&i[r[s].defId]&&(a[s]=r[s]);return{defs:i,instances:a}}function ZBe(t,e){return Array.isArray(t)?pb(t,null,e,!0):typeof t=="object"&&t?pb([t],null,e,!0):t!=null?String(t):null}function jz(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const S5={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Ze,overlap:Ze,allow:Ze,className:jz,classNames:jz,color:String,backgroundColor:String,borderColor:String,textColor:String},JBe={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function _5(t,e){let n=ZBe(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function eVe(t){return t.reduce(tVe,JBe)}function tVe(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const nVe={id:String,defaultAllDay:Boolean,url:String,format:String,events:Ze,eventDataTransform:Ze,success:Ze,failure:Ze};function qQ(t,e,n=KQ(e)){let r;if(typeof t=="string"?r={url:t}:typeof t=="function"||Array.isArray(t)?r={events:t}:typeof t=="object"&&t&&(r=t),r){let{refined:i,extra:a}=OD(r,n),s=rVe(i,e);if(s)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:i.defaultAllDay,eventDataTransform:i.eventDataTransform,success:i.success,failure:i.failure,publicId:i.id||"",sourceId:Ap(),sourceDefId:s.sourceDefId,meta:s.meta,ui:_5(i,e),extendedProps:a}}return null}function KQ(t){return Object.assign(Object.assign(Object.assign({},S5),nVe),t.pluginHooks.eventSourceRefiners)}function rVe(t,e){let n=e.pluginHooks.eventSourceDefs;for(let r=n.length-1;r>=0;r-=1){let a=n[r].parseMeta(t);if(a)return{sourceDefId:r,meta:a}}return null}function iVe(t,e,n,r,i){switch(e.type){case"RECEIVE_EVENTS":return aVe(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"RESET_RAW_EVENTS":return sVe(t,n[e.sourceId],e.rawEvents,r.activeRange,i);case"ADD_EVENTS":return oVe(t,e.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return VD(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?ip(t,r.activeRange,i):t;case"REMOVE_EVENTS":return QBe(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return YQ(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return T_(t,a=>!a.sourceId);case"REMOVE_ALL_EVENTS":return _c();default:return t}}function aVe(t,e,n,r,i,a){if(e&&n===e.latestFetchId){let s=pb(GQ(i,e,a),e,a);return r&&(s=ip(s,r,a)),VD(YQ(t,e.sourceId),s)}return t}function sVe(t,e,n,r,i){const{defIdMap:a,instanceIdMap:s}=cVe(t);let o=pb(GQ(n,e,i),e,i,!1,a,s);return ip(o,r,i)}function GQ(t,e,n){let r=n.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(t=Ez(t,i)),r&&(t=Ez(t,r)),t}function Ez(t,e){let n;if(!e)n=t;else{n=[];for(let r of t){let i=e(r);i?n.push(i):i==null&&n.push(r)}}return n}function oVe(t,e,n,r){return n&&(e=ip(e,n,r)),VD(t,e)}function Nz(t,e,n){let{defs:r}=t,i=Cp(t.instances,a=>r[a.defId].allDay?a:Object.assign(Object.assign({},a),{range:{start:n.createMarker(e.toDate(a.range.start,a.forcedStartTzo)),end:n.createMarker(e.toDate(a.range.end,a.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:a.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:a.forcedEndTzo}));return{defs:r,instances:i}}function YQ(t,e){return T_(t,n=>n.sourceId!==e)}function lVe(t,e){return{defs:t.defs,instances:rp(t.instances,n=>!e[n.instanceId])}}function cVe(t){const{defs:e,instances:n}=t,r={},i={};for(let a in e){const s=e[a],{publicId:o}=s;o&&(r[o]=a)}for(let a in n){const s=n[a],o=e[s.defId],{publicId:l}=o;l&&(i[l]=a)}return{defIdMap:r,instanceIdMap:i}}class D_{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){uVe(this.handlers,e,n)}off(e,n){dVe(this.handlers,e,n)}trigger(e,...n){let r=this.handlers[e]||[],i=this.options&&this.options[e],a=[].concat(i||[],r);for(let s of a)s.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function uVe(t,e,n){(t[e]||(t[e]=[])).push(n)}function dVe(t,e,n){n?t[e]&&(t[e]=t[e].filter(r=>r!==n)):delete t[e]}const fVe={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function hVe(t,e){return pb(pVe(t),null,e)}function pVe(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},fVe),n)),e}function XQ(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},UD(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function mVe(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function UD(t,e){let n={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(n,r(t,e));return Object.assign(n,kVe(t,e.dateEnv)),n}function Pz(t,e,n){let{dateEnv:r,options:i}=n,a=e;return t?(a=Ai(a),a=r.add(a,i.defaultAllDayEventDuration)):a=r.add(a,i.defaultTimedEventDuration),a}function WD(t,e,n,r){let i=A5(t.defs,e),a=_c();for(let s in t.defs){let o=t.defs[s];a.defs[s]=gVe(o,i[s],n,r)}for(let s in t.instances){let o=t.instances[s],l=a.defs[o.defId];a.instances[s]=vVe(o,l,i[o.defId],n,r)}return a}function gVe(t,e,n,r){let i=n.standardProps||{};i.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(i.hasEnd=!0);let a=Object.assign(Object.assign(Object.assign({},t),i),{ui:Object.assign(Object.assign({},t.ui),i.ui)});n.extendedProps&&(a.extendedProps=Object.assign(Object.assign({},a.extendedProps),n.extendedProps));for(let s of r.pluginHooks.eventDefMutationAppliers)s(a,n,r);return!a.hasEnd&&r.options.forceEventDuration&&(a.hasEnd=!0),a}function vVe(t,e,n,r,i){let{dateEnv:a}=i,s=r.standardProps&&r.standardProps.allDay===!0,o=r.standardProps&&r.standardProps.hasEnd===!1,l=Object.assign({},t);return s&&(l.range=$Q(l.range)),r.datesDelta&&n.startEditable&&(l.range={start:a.add(l.range.start,r.datesDelta),end:a.add(l.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(l.range={start:a.add(l.range.start,r.startDelta),end:l.range.end}),r.endDelta&&n.durationEditable&&(l.range={start:l.range.start,end:a.add(l.range.end,r.endDelta)}),o&&(l.range={start:l.range.start,end:Pz(e.allDay,l.range.start,i)}),e.allDay&&(l.range={start:Ai(l.range.start),end:Ai(l.range.end)}),l.range.end<l.range.start&&(l.range.end=Pz(e.allDay,l.range.start,i)),l}class qp{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Ci{constructor(e,n,r){this._context=e,this._def=n,this._instance=r||null}setProp(e,n){if(e in UQ)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=i2[e](n),this.mutate({standardProps:{publicId:n}});else if(e in i2)n=i2[e](n),this.mutate({standardProps:{[e]:n}});else if(e in S5){let r=S5[e](n);e==="color"?r={backgroundColor:n,borderColor:n}:e==="editable"?r={startEditable:n,durationEditable:n}:r={[e]:n},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:r}=this._context,i=r.createMarker(e);if(i&&this._instance){let a=this._instance.range,s=bm(a.start,i,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:s}):this.mutate({startDelta:s})}}setEnd(e,n={}){let{dateEnv:r}=this._context,i;if(!(e!=null&&(i=r.createMarker(e),!i))&&this._instance)if(i){let a=bm(this._instance.range.end,i,r,n.granularity);this.mutate({endDelta:a})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,r={}){let{dateEnv:i}=this._context,a={allDay:r.allDay},s=i.createMarker(e),o;if(s&&!(n!=null&&(o=i.createMarker(n),!o))&&this._instance){let l=this._instance.range;r.allDay===!0&&(l=$Q(l));let u=bm(l.start,s,i,r.granularity);if(o){let d=bm(l.end,o,i,r.granularity);V9e(u,d)?this.mutate({datesDelta:u,standardProps:a}):this.mutate({startDelta:u,endDelta:d,standardProps:a})}else a.hasEnd=!1,this.mutate({datesDelta:u,standardProps:a})}}moveStart(e){let n=Cr(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Cr(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Cr(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let r={allDay:e},{maintainDuration:i}=n;i==null&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:n}=this._context,r=this._instance,i=Ha(e);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let r=this._def,i=this._context,{eventStore:a}=i.getCurrentData(),s=BD(a,n.instanceId);s=WD(s,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);let l=new Ci(i,r,n);this._def=s.defs[r.defId],this._instance=s.instances[n.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:s}),i.emitter.trigger("eventChange",{oldEvent:l,event:this,relatedEvents:$h(s,i,n),revert(){i.dispatch({type:"RESET_EVENTS",eventStore:a})}})}}remove(){let e=this._context,n=QQ(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new qp(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:r}=n,{startStr:i,endStr:a}=this,s={allDay:n.allDay};return n.title&&(s.title=n.title),i&&(s.start=i),a&&(s.end=a),n.publicId&&(s.id=n.publicId),n.groupId&&(s.groupId=n.groupId),n.url&&(s.url=n.url),r.display&&r.display!=="auto"&&(s.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?s.color=r.backgroundColor:(r.backgroundColor&&(s.backgroundColor=r.backgroundColor),r.borderColor&&(s.borderColor=r.borderColor)),r.textColor&&(s.textColor=r.textColor),r.classNames.length&&(s.classNames=r.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(s,n.extendedProps):s.extendedProps=n.extendedProps),s}toJSON(){return this.toPlainObject()}}function QQ(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function $h(t,e,n){let{defs:r,instances:i}=t,a=[],s=n?n.instanceId:"";for(let o in i){let l=i[o],u=r[l.defId];l.instanceId!==s&&a.push(new Ci(e,u,l))}return a}function kz(t,e,n,r){let i={},a={},s={},o=[],l=[],u=A5(t.defs,e);for(let d in t.defs){let f=t.defs[d];u[f.defId].display==="inverse-background"&&(f.groupId?(i[f.groupId]=[],s[f.groupId]||(s[f.groupId]=f)):a[d]=[])}for(let d in t.instances){let f=t.instances[d],p=t.defs[f.defId],h=u[p.defId],g=f.range,m=!p.allDay&&r?BQ(g,r):g,v=Wg(m,n);v&&(h.display==="inverse-background"?p.groupId?i[p.groupId].push(v):a[f.defId].push(v):h.display!=="none"&&(h.display==="background"?o:l).push({def:p,ui:h,instance:f,range:v,isStart:m.start&&m.start.valueOf()===v.start.valueOf(),isEnd:m.end&&m.end.valueOf()===v.end.valueOf()}))}for(let d in i){let f=i[d],p=Cz(f,n);for(let h of p){let g=s[d],m=u[g.defId];o.push({def:g,ui:m,instance:null,range:h,isStart:!1,isEnd:!1})}}for(let d in a){let f=a[d],p=Cz(f,n);for(let h of p)o.push({def:t.defs[d],ui:u[d],instance:null,range:h,isStart:!1,isEnd:!1})}return{bg:o,fg:l}}function Tz(t,e){t.fcSeg=e}function Hg(t){return t.fcSeg||t.parentNode.fcSeg||null}function A5(t,e){return Cp(t,n=>ZQ(n,e))}function ZQ(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),eVe(n)}function yVe(t,e){let n=t.map(bVe);return n.sort((r,i)=>M9e(r,i,e)),n.map(r=>r._seg)}function bVe(t){let{eventRange:e}=t,n=e.def,r=e.instance?e.instance.range:e.range,i=r.start?r.start.valueOf():0,a=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:i,end:a,duration:a-i,allDay:Number(n.allDay),_seg:t})}function xVe(t,e){let{pluginHooks:n}=e,r=n.isDraggableTransformers,{def:i,ui:a}=t.eventRange,s=a.startEditable;for(let o of r)s=o(s,i,a,e);return s}function wVe(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function SVe(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function JQ(t,e,n,r,i,a,s){let{dateEnv:o,options:l}=n,{displayEventTime:u,displayEventEnd:d}=l,f=t.eventRange.def,p=t.eventRange.instance;u==null&&(u=r!==!1),d==null&&(d=i!==!1);let h=p.range.start,g=p.range.end,m=t.start||t.eventRange.range.start,v=t.end||t.eventRange.range.end,y=Ai(h).valueOf()===Ai(m).valueOf(),b=Ai(Ef(g,-1)).valueOf()===Ai(Ef(v,-1)).valueOf();return u&&!f.allDay&&(y||b)?(m=y?h:m,v=b?g:v,d&&f.hasEnd?o.formatRange(m,v,e,{forcedStartTzo:p.forcedStartTzo,forcedEndTzo:p.forcedEndTzo}):o.format(m,e,{forcedTzo:p.forcedStartTzo})):""}function W0(t,e,n){let r=t.eventRange.range;return{isPast:r.end<=e.start,isFuture:r.start>=e.end,isToday:e&&mf(e,r.start)}}function _Ve(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function AVe(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function eZ(t,e){let{def:n,instance:r}=t.eventRange,{url:i}=n;if(i)return{href:i};let{emitter:a,options:s}=e,{eventInteractive:o}=s;return o==null&&(o=n.interactive,o==null&&(o=!!a.hasHandlers("eventClick"))),o?DQ(l=>{a.trigger("eventClick",{el:l.target,event:new Ci(e,n,r),jsEvent:l,view:e.viewApi})}):{}}const CVe={start:Ze,end:Ze,allDay:Boolean};function jVe(t,e,n){let r=EVe(t,e),{range:i}=r;if(!i.start)return null;if(!i.end){if(n==null)return null;i.end=e.add(i.start,n)}return r}function EVe(t,e){let{refined:n,extra:r}=OD(t,CVe),i=n.start?e.createMarkerMeta(n.start):null,a=n.end?e.createMarkerMeta(n.end):null,{allDay:s}=n;return s==null&&(s=i&&i.isTimeUnspecified&&(!a||a.isTimeUnspecified)),Object.assign({range:{start:i?i.marker:null,end:a?a.marker:null},allDay:s},r)}function NVe(t,e){return UBe(t.range,e.range)&&t.allDay===e.allDay&&PVe(t,e)}function PVe(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function kVe(t,e){return Object.assign(Object.assign({},nZ(t.range,e,t.allDay)),{allDay:t.allDay})}function tZ(t,e,n){return Object.assign(Object.assign({},nZ(t,e,n)),{timeZone:e.timeZone})}function nZ(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function TVe(t,e,n){let r=HQ({editable:!1},n),i=tk(r.refined,r.extra,"",t.allDay,!0,n);return{def:i,ui:ZQ(i,e),instance:zD(i.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function DVe(t,e,n){let r=!1,i=function(o){r||(r=!0,e(o))},a=function(o){r||(r=!0,n(o))},s=t(i,a);s&&typeof s.then=="function"&&s.then(i,a)}class Dz extends Error{constructor(e,n){super(e),this.response=n}}function IVe(t,e,n){t=t.toUpperCase();const r={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(r.body=new URLSearchParams(n),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(i=>{if(i.ok)return i.json().then(a=>[a,i],()=>{throw new Dz("Failure parsing JSON",i)});throw new Dz("Request failed",i)})}let XC;function rZ(){return XC==null&&(XC=OVe()),XC}function OVe(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class MVe extends Mi{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{w5(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{w5(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:r}=this.state,i=r||n.height==="auto"||n.contentHeight==="auto",a=!i&&n.height!=null?n.height:"",s=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return rZ()||s.push("fc-liquid-hack"),e.children(s,a,i,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class wv{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function RVe(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function HD(t){return{[t.component.uid]:t}}const rk={};class I_ extends ul{constructor(e,n){super(e,n),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,r=n.nowManager.getDateMarker(),{nowIndicatorSnap:i}=n.options;i==="auto"&&(i=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let a,s;return i?(a=n.dateEnv.startOf(r,e.unit),s=n.dateEnv.add(a,Cr(1,e.unit)).valueOf()-r.valueOf()):(a=r,s=1e3*60),s=Math.min(1e3*60*60*24,s),{state:{nowDate:a,todayRange:LVe(a)},waitMs:s}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}I_.contextType=jp;function LVe(t){let e=Ai(t),n=Ka(e,1);return{start:e,end:n}}class FVe{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let r=this.getCurrentData(),i;n=n||"day",i=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),i?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:r}=this.getCurrentData(),i=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),a,s;for(let o in n)i.push(o);for(a=0;a<i.length;a+=1)if(s=n[i[a]],s&&s.singleUnit===e)return s;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),r=Cr(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),Ha(n))}formatRange(e,n,r){let{dateEnv:i}=this.getCurrentData();return i.formatRange(i.createMarker(e),i.createMarker(n),Ha(r),r)}formatIso(e,n){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:n})}select(e,n){let r;n==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:n};let i=this.getCurrentData(),a=jVe(r,i.dateEnv,Cr({days:1}));a&&(this.dispatch({type:"SELECT_DATES",selection:a}),XQ(a,null,i))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),mVe(e,n))}addEvent(e,n){if(e instanceof Ci){let s=e._def,o=e._instance;return this.getCurrentData().eventStore.defs[s.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:nk({def:s,instance:o})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),i;if(n instanceof qp)i=n.internalEventSource;else if(typeof n=="boolean")n&&([i]=RD(r.eventSources));else if(n!=null){let s=this.getEventSourceById(n);if(!s)return console.warn(`Could not find an event source with ID "${n}"`),null;i=s.internalEventSource}let a=WQ(e,i,r,!1);if(a){let s=new Ci(r,a.def,a.def.recurringDef?null:a.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:nk(a)}),this.triggerEventAdd(s),s}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:QQ(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:r,instances:i}=n.eventStore;e=String(e);for(let a in r){let s=r[a];if(s.publicId===e){if(s.recurringDef)return new Ci(n,s,null);for(let o in i){let l=i[o];if(l.defId===s.defId)return new Ci(n,s,l)}}}return null}getEvents(){let e=this.getCurrentData();return $h(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,r=[];for(let i in n)r.push(new qp(e,n[i]));return r}getEventSourceById(e){let n=this.getCurrentData(),r=n.eventSources;e=String(e);for(let i in r)if(r[i].publicId===e)return new qp(n,r[i]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof qp)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=qQ(e,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new qp(n,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Cr(e);n&&this.trigger("_scrollRequest",{time:n})}}function zVe(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function iZ(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function $Ve(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function BVe(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function VVe(t,e){return{left:t.left-e.left,top:t.top-e.top}}function aZ(t,e,n,r){return{dow:t.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!mf(r.activeRange,t))),isOther:!!(r&&!mf(r.currentRange,t)),isToday:!!(e&&mf(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function qD(t,e){let n=["fc-day",`fc-day-${q9e[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const UVe=Ha({year:"numeric",month:"long",day:"numeric"}),WVe=Ha({week:"long"});function ik(t,e,n="day",r=!0){const{dateEnv:i,options:a,calendarApi:s}=t;let o=i.format(e,n==="week"?WVe:UVe);if(a.navLinks){let l=i.toDate(e);const u=d=>{let f=n==="day"?a.navLinkDayClick:n==="week"?a.navLinkWeekClick:null;typeof f=="function"?f.call(s,i.toDate(e),d):(typeof f=="string"&&(n=f),s.zoomTo(e,n))};return Object.assign({title:V0(a.navLinkHint,[o,l],o),"data-navlink":""},r?TQ(u):{onClick:u})}return{"aria-label":o}}let QC=null;function HVe(){return QC===null&&(QC=qVe()),QC}function qVe(){let t=document.createElement("div");B0(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return PD(t),n}let ZC;function KVe(){return ZC||(ZC=GVe()),ZC}function GVe(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=sZ(t);return document.body.removeChild(t),e}function sZ(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function YVe(t,e=!1){let n=window.getComputedStyle(t),r=parseInt(n.borderLeftWidth,10)||0,i=parseInt(n.borderRightWidth,10)||0,a=parseInt(n.borderTopWidth,10)||0,s=parseInt(n.borderBottomWidth,10)||0,o=sZ(t),l=o.y-r-i,u=o.x-a-s,d={borderLeft:r,borderRight:i,borderTop:a,borderBottom:s,scrollbarBottom:u,scrollbarLeft:0,scrollbarRight:0};return HVe()&&n.direction==="rtl"?d.scrollbarLeft=l:d.scrollbarRight=l,e&&(d.paddingLeft=parseInt(n.paddingLeft,10)||0,d.paddingRight=parseInt(n.paddingRight,10)||0,d.paddingTop=parseInt(n.paddingTop,10)||0,d.paddingBottom=parseInt(n.paddingBottom,10)||0),d}function XVe(t,e=!1,n){let r=KD(t),i=YVe(t,e),a={left:r.left+i.borderLeft+i.scrollbarLeft,right:r.right-i.borderRight-i.scrollbarRight,top:r.top+i.borderTop,bottom:r.bottom-i.borderBottom-i.scrollbarBottom};return e&&(a.left+=i.paddingLeft,a.right-=i.paddingRight,a.top+=i.paddingTop,a.bottom-=i.paddingBottom),a}function KD(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function QVe(t){let e=oZ(t),n=t.getBoundingClientRect();for(let r of e){let i=iZ(n,r.getBoundingClientRect());if(i)n=i;else return null}return n}function oZ(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class C5{constructor(e,n,r,i){this.els=n;let a=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(a.left),i&&this.buildElVerticals(a.top)}buildElHorizontals(e){let n=[],r=[];for(let i of this.els){let a=i.getBoundingClientRect();n.push(a.left-e),r.push(a.right-e)}this.lefts=n,this.rights=r}buildElVerticals(e){let n=[],r=[];for(let i of this.els){let a=i.getBoundingClientRect();n.push(a.top-e),r.push(a.bottom-e)}this.tops=n,this.bottoms=r}leftToIndex(e){let{lefts:n,rights:r}=this,i=n.length,a;for(a=0;a<i;a+=1)if(e>=n[a]&&e<r[a])return a}topToIndex(e){let{tops:n,bottoms:r}=this,i=n.length,a;for(a=0;a<i;a+=1)if(e>=n[a]&&e<r[a])return a}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return h1(this.tops||[],e.tops||[])&&h1(this.bottoms||[],e.bottoms||[])&&h1(this.lefts||[],e.lefts||[])&&h1(this.rights||[],e.rights||[])}}function h1(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(Math.round(t[r])!==Math.round(e[r]))return!1;return!0}class GD{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class ZVe extends GD{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class JVe extends GD{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Np extends Mi{constructor(){super(...arguments),this.uid=Ap()}prepareHits(){}queryHit(e,n,r,i){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!$s(e,".fc-event-mirror")}isValidDateDownEl(e){return!$s(e,".fc-event:not(.fc-bg-event)")&&!$s(e,".fc-more-link")&&!$s(e,"a[data-navlink]")&&!$s(e,".fc-popover")}}class eUe{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let r of e)this.insertEntry(r,n);return n}insertEntry(e,n){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,r){if(this.allowReslicing&&e.touchingEntry){const i=Object.assign(Object.assign({},n),{span:lZ(n.span,e.touchingEntry.span)});r.push(i),this.splitEntry(n,e.touchingEntry,r)}else r.push(n)}splitEntry(e,n,r){let i=e.span,a=n.span;i.start<a.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.start,end:a.start}},r),i.end>a.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.end,end:i.end}},r)}insertEntryAt(e,n){let{entriesByLevel:r,levelCoords:i}=this;n.lateral===-1?(JC(i,n.level,n.levelCoord),JC(r,n.level,[e])):JC(r[n.level],n.lateral,e),this.stackCnts[H0(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:r,strictOrder:i,stackCnts:a}=this,s=n.length,o=0,l=-1,u=-1,d=null,f=0;for(let g=0;g<s;g+=1){const m=n[g];if(!i&&m>=o+this.getEntryThickness(e))break;let v=r[g],y,b=Oz(v,e.span.start,Iz),S=b[0]+b[1];for(;(y=v[S])&&y.span.start<e.span.end;){let A=m+this.getEntryThickness(y);A>o&&(o=A,d=y,l=g,u=S),A===o&&(f=Math.max(f,a[H0(y)]+1)),S+=1}}let p=0;if(d)for(p=l+1;p<s&&n[p]<o;)p+=1;let h=-1;return p<s&&n[p]===o&&(h=Oz(r[p],e.span.end,Iz)[0]),{touchingLevel:l,touchingLateral:u,touchingEntry:d,stackCnt:f,levelCoord:o,level:p,lateral:h}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,r=e.length,i=[];for(let a=0;a<r;a+=1){let s=e[a],o=n[a];for(let l of s)i.push(Object.assign(Object.assign({},l),{thickness:this.getEntryThickness(l),levelCoord:o}))}return i}}function Iz(t){return t.span.end}function H0(t){return t.index+":"+t.span.start}function lZ(t,e){let n=Math.max(t.start,e.start),r=Math.min(t.end,e.end);return n<r?{start:n,end:r}:null}function JC(t,e,n){t.splice(e,0,n)}function Oz(t,e,n){let r=0,i=t.length;if(!i||e<n(t[r]))return[0,0];if(e>n(t[i-1]))return[i,0];for(;r<i;){let a=Math.floor(r+(i-r)/2),s=n(t[a]);if(e<s)i=a;else if(e>s)r=a+1;else return[a,1]}return[r,0]}class tUe{constructor(e,n){this.emitter=new D_}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const YD={};function nUe(t,e){return!t||e>10?Ha({weekday:"short"}):e>1?Ha({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Ha({weekday:"long"})}const cZ="fc-col-header-cell";function uZ(t){return t.text}class rUe extends Mi{render(){let{dateEnv:e,options:n,theme:r,viewApi:i}=this.context,{props:a}=this,{date:s,dateProfile:o}=a,l=aZ(s,a.todayRange,null,o),u=[cZ].concat(qD(l,r)),d=e.format(s,a.dayHeaderFormat),f=!l.isDisabled&&a.colCnt>1?ik(this.context,s):{},p=e.toDate(s);e.namedTimeZoneImpl&&(p=Ef(p,36e5));let h=Object.assign(Object.assign(Object.assign({date:p,view:i},a.extraRenderProps),{text:d}),l);return Je(xd,{elTag:"th",elClasses:u,elAttrs:Object.assign({role:"columnheader",colSpan:a.colSpan,"data-date":l.isDisabled?void 0:DD(s)},a.extraDataAttrs),renderProps:h,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:uZ,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},g=>Je("div",{className:"fc-scrollgrid-sync-inner"},!l.isDisabled&&Je(g,{elTag:"a",elAttrs:f,elClasses:["fc-col-header-cell-cushion",a.isSticky&&"fc-sticky"]})))}}const iUe=Ha({weekday:"long"});class aUe extends Mi{render(){let{props:e}=this,{dateEnv:n,theme:r,viewApi:i,options:a}=this.context,s=Ka(new Date(2592e5),e.dow),o={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},l=n.format(s,e.dayHeaderFormat),u=Object.assign(Object.assign(Object.assign(Object.assign({date:s},o),{view:i}),e.extraRenderProps),{text:l});return Je(xd,{elTag:"th",elClasses:[cZ,...qD(o,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:u,generatorName:"dayHeaderContent",customGenerator:a.dayHeaderContent,defaultGenerator:uZ,classNameGenerator:a.dayHeaderClassNames,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},d=>Je("div",{className:"fc-scrollgrid-sync-inner"},Je(d,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(s,iUe)}})))}}class sUe extends Mi{constructor(){super(...arguments),this.createDayHeaderFormatter=yr(oUe)}render(){let{context:e}=this,{dates:n,dateProfile:r,datesRepDistinctDays:i,renderIntro:a}=this.props,s=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,n.length);return Je(I_,{unit:"day"},(o,l)=>Je("tr",{role:"row"},a&&a("day"),n.map(u=>i?Je(rUe,{key:u.toISOString(),date:u,dateProfile:r,todayRange:l,colCnt:n.length,dayHeaderFormat:s}):Je(aUe,{key:u.getUTCDay(),dow:u.getUTCDay(),dayHeaderFormat:s}))))}}function oUe(t,e,n){return t||nUe(e,n)}class lUe{constructor(e,n){let r=e.start,{end:i}=e,a=[],s=[],o=-1;for(;r<i;)n.isHiddenDay(r)?a.push(o+.5):(o+=1,a.push(o),s.push(r)),r=Ka(r,1);this.dates=s,this.indices=a,this.cnt=s.length}sliceRange(e){let n=this.getDateDayIndex(e.start),r=this.getDateDayIndex(Ka(e.end,-1)),i=Math.max(0,n),a=Math.min(this.cnt-1,r);return i=Math.ceil(i),a=Math.floor(a),i<=a?{firstIndex:i,lastIndex:a,isStart:n===i,isEnd:r===a}:null}getDateDayIndex(e){let{indices:n}=this,r=Math.floor(xv(this.dates[0],e));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]}}class cUe{constructor(e,n){let{dates:r}=e,i,a,s;if(n){for(a=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==a;i+=1);s=Math.ceil(r.length/i)}else s=1,i=r.length;this.rowCnt=s,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let r=[];for(let i=0;i<this.colCnt;i+=1)r.push(this.buildCell(n,i));e.push(r)}return e}buildCell(e,n){let r=this.daySeries.dates[e*this.colCnt+n];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,r=this.daySeries.sliceRange(e),i=[];if(r){let{firstIndex:a,lastIndex:s}=r,o=a;for(;o<=s;){let l=Math.floor(o/n),u=Math.min((l+1)*n,s+1);i.push({row:l,firstCol:o%n,lastCol:(u-1)%n,isStart:r.isStart&&o===a,isEnd:r.isEnd&&u-1===s}),o=u}}return i}}class uUe{constructor(){this.sliceBusinessHours=yr(this._sliceBusinessHours),this.sliceDateSelection=yr(this._sliceDateSpan),this.sliceEventStore=yr(this._sliceEventStore),this.sliceEventDrag=yr(this._sliceInteraction),this.sliceEventResize=yr(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,r,i,...a){let{eventUiBases:s}=e,o=this.sliceEventStore(e.eventStore,s,n,r,...a);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,r,s,i,...a),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,r,i,...a),fgEventSegs:o.fg,bgEventSegs:o.bg,eventDrag:this.sliceEventDrag(e.eventDrag,s,n,r,...a),eventResize:this.sliceEventResize(e.eventResize,s,n,r,...a),eventSelection:e.eventSelection}}sliceNowDate(e,n,r,i,...a){return this._sliceDateSpan({range:{start:e,end:Ef(e,1)},allDay:!1},n,r,{},i,...a)}_sliceBusinessHours(e,n,r,i,...a){return e?this._sliceEventStore(ip(e,p1(n,!!r),i),{},n,r,...a).bg:[]}_sliceEventStore(e,n,r,i,...a){if(e){let s=kz(e,n,p1(r,!!i),i);return{bg:this.sliceEventRanges(s.bg,a),fg:this.sliceEventRanges(s.fg,a)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,r,i,...a){if(!e)return null;let s=kz(e.mutatedEvents,n,p1(r,!!i),i);return{segs:this.sliceEventRanges(s.fg,a),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,r,i,a,...s){if(!e)return[];let o=p1(n,!!r),l=Wg(e.range,o);if(l){e=Object.assign(Object.assign({},e),{range:l});let u=TVe(e,i,a),d=this.sliceRange(e.range,...s);for(let f of d)f.eventRange=u;return d}return[]}sliceEventRanges(e,n){let r=[];for(let i of e)r.push(...this.sliceEventRange(i,n));return r}sliceEventRange(e,n){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:Ka(r.start,1)});let i=this.sliceRange(r,...n);for(let a of i)a.eventRange=e,a.isStart=e.isStart&&a.isStart,a.isEnd=e.isEnd&&a.isEnd;return i}}function p1(t,e){let n=t.activeRange;return e?n:{start:Ef(n.start,t.slotMinTime.milliseconds),end:Ef(n.end,t.slotMaxTime.milliseconds-864e5)}}function dZ(t,e,n){let{instances:r}=t.mutatedEvents;for(let i in r)if(!k_(e.validRange,r[i].range))return!1;return fZ({eventDrag:t},n)}function dUe(t,e,n){return k_(e.validRange,t.range)?fZ({dateSelection:t},n):!1}function fZ(t,e){let n=e.getCurrentData(),r=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||fUe)(r,e)}function fUe(t,e,n={},r){return!(t.eventDrag&&!hUe(t,e,n,r)||t.dateSelection&&!pUe(t,e,n,r))}function hUe(t,e,n,r){let i=e.getCurrentData(),a=t.eventDrag,s=a.mutatedEvents,o=s.defs,l=s.instances,u=A5(o,a.isEvent?t.eventUiBases:{"":i.selectionConfig});r&&(u=Cp(u,r));let d=lVe(t.eventStore,a.affectedEvents.instances),f=d.defs,p=d.instances,h=A5(f,t.eventUiBases);for(let g in l){let m=l[g],v=m.range,y=u[m.defId],b=o[m.defId];if(!hZ(y.constraints,v,d,t.businessHours,e))return!1;let{eventOverlap:S}=e.options,A=typeof S=="function"?S:null;for(let D in p){let j=p[D];if(FD(v,j.range)&&(h[j.defId].overlap===!1&&a.isEvent||y.overlap===!1||A&&!A(new Ci(e,f[j.defId],j),new Ci(e,b,m))))return!1}let C=i.eventStore;for(let D of y.allows){let j=Object.assign(Object.assign({},n),{range:m.range,allDay:b.allDay}),N=C.defs[b.defId],P=C.instances[g],O;if(N?O=new Ci(e,N,P):O=new Ci(e,b),!D(UD(j,e),O))return!1}}return!0}function pUe(t,e,n,r){let i=t.eventStore,a=i.defs,s=i.instances,o=t.dateSelection,l=o.range,{selectionConfig:u}=e.getCurrentData();if(r&&(u=r(u)),!hZ(u.constraints,l,i,t.businessHours,e))return!1;let{selectOverlap:d}=e.options,f=typeof d=="function"?d:null;for(let p in s){let h=s[p];if(FD(l,h.range)&&(u.overlap===!1||f&&!f(new Ci(e,a[h.defId],h),null)))return!1}for(let p of u.allows){let h=Object.assign(Object.assign({},n),o);if(!p(UD(h,e),null))return!1}return!0}function hZ(t,e,n,r,i){for(let a of t)if(!gUe(mUe(a,e,n,r,i),e))return!1;return!0}function mUe(t,e,n,r,i){return t==="businessHours"?ej(ip(r,e,i)):typeof t=="string"?ej(T_(n,a=>a.groupId===t)):typeof t=="object"&&t?ej(ip(t,e,i)):[]}function ej(t){let{instances:e}=t,n=[];for(let r in e)n.push(e[r].range);return n}function gUe(t,e){for(let n of t)if(k_(n,e))return!0;return!1}const m1=/^(visible|hidden)$/;class vUe extends Mi{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,yu(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:r}=e,i=n&&r,a=["fc-scroller"];return n&&(r?a.push("fc-scroller-liquid-absolute"):a.push("fc-scroller-liquid")),Je("div",{ref:this.handleEl,className:a.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:i&&-(e.overcomeLeft||0)||"",right:i&&-(e.overcomeRight||0)||"",bottom:i&&-(e.overcomeBottom||0)||"",marginLeft:!i&&-(e.overcomeLeft||0)||"",marginRight:!i&&-(e.overcomeRight||0)||"",marginBottom:!i&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(m1.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(m1.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return m1.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return m1.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Ph{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,r)=>{let{depths:i,currentMap:a}=this,s=!1,o=!1;n!==null?(s=r in a,a[r]=n,i[r]=(i[r]||0)+1,o=!0):(i[r]-=1,i[r]||(delete a[r],delete this.callbackMap[r],s=!0)),this.masterCallback&&(s&&this.masterCallback(null,String(r)),o&&this.masterCallback(n,String(r)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),n}collect(e,n,r){return jBe(this.currentMap,e,n,r)}getAll(){return RD(this.currentMap)}}function yUe(t){let e=C9e(t,".fc-scrollgrid-shrink"),n=0;for(let r of e)n=Math.max(n,z9e(r));return Math.ceil(n)}function pZ(t,e){return t.liquid&&e.liquid}function bUe(t,e){return e.maxHeight!=null||pZ(t,e)}function xUe(t,e,n,r){let{expandRows:i}=n;return typeof e.content=="function"?e.content(n):Je("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:i?n.clientHeight:""}},n.tableColGroupNode,Je(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function wUe(t,e){return jf(t,e,kc)}function SUe(t,e){let n=[];for(let r of t){let i=r.span||1;for(let a=0;a<i;a+=1)n.push(Je("col",{style:{width:r.width==="shrink"?_Ue(e):r.width||"",minWidth:r.minWidth||""}}))}return Je("colgroup",{},...n)}function _Ue(t){return t??4}function AUe(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function CUe(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function jUe(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function EUe(t){return Je("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function Mz(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function NUe(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class mZ extends Mi{constructor(){super(...arguments),this.processCols=yr(e=>e,wUe),this.renderMicroColGroup=yr(SUe),this.scrollerRefs=new Ph,this.scrollerElRefs=new Ph(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:r}=this,i=e.sections||[],a=this.processCols(e.cols),s=this.renderMicroColGroup(a,n.shrinkWidth),o=CUe(e.liquid,r);e.collapsibleWidth&&o.push("fc-scrollgrid-collapsible");let l=i.length,u=0,d,f=[],p=[],h=[];for(;u<l&&(d=i[u]).type==="header";)f.push(this.renderSection(d,s,!0)),u+=1;for(;u<l&&(d=i[u]).type==="body";)p.push(this.renderSection(d,s,!1)),u+=1;for(;u<l&&(d=i[u]).type==="footer";)h.push(this.renderSection(d,s,!0)),u+=1;let g=!rZ();const m={role:"rowgroup"};return Je("table",{role:"grid",className:o.join(" "),style:{height:e.height}},!!(!g&&f.length)&&Je("thead",m,...f),!!(!g&&p.length)&&Je("tbody",m,...p),!!(!g&&h.length)&&Je("tfoot",m,...h),g&&Je("tbody",m,...f,...p,...h))}renderSection(e,n,r){return"outerContent"in e?Je(Hi,{key:e.key},e.outerContent):Je("tr",{key:e.key,role:"presentation",className:jUe(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,r))}renderChunkTd(e,n,r,i){if("outerContent"in r)return r.outerContent;let{props:a}=this,{forceYScrollbars:s,scrollerClientWidths:o,scrollerClientHeights:l}=this.state,u=bUe(a,e),d=pZ(a,e),f=a.liquid?s?"scroll":u?"auto":"hidden":"visible",p=e.key,h=xUe(e,r,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!a.collapsibleWidth&&o[p]!==void 0?o[p]:null,clientHeight:l[p]!==void 0?l[p]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},i);return Je(i?"th":"td",{ref:r.elRef,role:"presentation"},Je("div",{className:`fc-scroller-harness${d?" fc-scroller-harness-liquid":""}`},Je(vUe,{ref:this.scrollerRefs.createRef(p),elRef:this.scrollerElRefs.createRef(p),overflowY:f,overflowX:a.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:d,liquidIsAbsolute:!0},h)))}_handleScrollerEl(e,n){let r=PUe(this.props.sections,n);r&&yu(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return AUe(this.props.cols)?yUe(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=KVe(),{scrollerRefs:n,scrollerElRefs:r}=this,i=!1,a={},s={};for(let o in n.currentMap){let l=n.currentMap[o];if(l&&l.needsYScrolling()){i=!0;break}}for(let o of this.props.sections){let l=o.key,u=r.currentMap[l];if(u){let d=u.parentNode;a[l]=Math.floor(d.getBoundingClientRect().width-(i?e.y:0)),s[l]=Math.floor(d.getBoundingClientRect().height)}}return{forceYScrollbars:i,scrollerClientWidths:a,scrollerClientHeights:s}}}mZ.addStateEquality({scrollerClientWidths:kc,scrollerClientHeights:kc});function PUe(t,e){for(let n of t)if(n.key===e)return n;return null}class XD extends Mi{constructor(){super(...arguments),this.buildPublicEvent=yr((e,n,r)=>new Ci(e,n,r)),this.handleEl=e=>{this.el=e,yu(this.props.elRef,e),e&&Tz(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{eventRange:a}=i,{ui:s}=a,o={event:this.buildPublicEvent(n,a.def,a.instance),view:n.viewApi,timeText:e.timeText,textColor:s.textColor,backgroundColor:s.backgroundColor,borderColor:s.borderColor,isDraggable:!e.disableDragging&&xVe(i,n),isStartResizable:!e.disableResizing&&wVe(i,n),isEndResizable:!e.disableResizing&&SVe(i),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!i.isStart,isEnd:!!i.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return Je(xd,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[..._Ve(o),...i.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:o,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&Tz(this.el,this.props.seg)}}class gZ extends Mi{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{ui:a}=i.eventRange,s=r.eventTimeFormat||e.defaultTimeFormat,o=JQ(i,s,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return Je(XD,Object.assign({},e,{elTag:"a",elStyle:{borderColor:a.borderColor,backgroundColor:a.backgroundColor},elAttrs:eZ(i,n),defaultGenerator:kUe,timeText:o}),(l,u)=>Je(Hi,null,Je(l,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:u.textColor}}),!!u.isStartResizable&&Je("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!u.isEndResizable&&Je("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}gZ.addPropsEquality({seg:kc});function kUe(t){return Je("div",{className:"fc-event-main-frame"},t.timeText&&Je("div",{className:"fc-event-time"},t.timeText),Je("div",{className:"fc-event-title-container"},Je("div",{className:"fc-event-title fc-sticky"},t.event.title||Je(Hi,null," "))))}const TUe=Ha({day:"numeric"});class vZ extends Mi{constructor(){super(...arguments),this.refineRenderProps=r2(DUe)}render(){let{props:e,context:n}=this,{options:r}=n,i=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:r.monthStartFormat});return Je(xd,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),i.isDisabled?{}:{"data-date":DD(e.date)}),elClasses:[...qD(i,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},e.children)}}function yZ(t){return!!(t.dayCellContent||ek("dayCellContent",t))}function DUe(t){let{date:e,dateEnv:n,dateProfile:r,isMonthStart:i}=t,a=aZ(e,t.todayRange,null,r),s=t.showDayNumber?n.format(e,i?t.monthStartFormat:TUe):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},a),{isMonthStart:i,dayNumberText:s}),t.extraRenderProps)}class IUe extends Mi{render(){let{props:e}=this,{seg:n}=e;return Je(XD,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:OUe,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function OUe(t){let{title:e}=t.event;return e&&Je("div",{className:"fc-event-title"},t.event.title)}function MUe(t){return Je("div",{className:`fc-${t}`})}const RUe=t=>Je(jp.Consumer,null,e=>{let{dateEnv:n,options:r}=e,{date:i}=t,a=r.weekNumberFormat||t.defaultFormat,s=n.computeWeekNumber(i),o=n.format(i,a),l={num:s,text:o,date:i};return Je(xd,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:l,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:LUe,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},t.children)});function LUe(t){return t.text}const tj=10;class FUe extends Mi{constructor(){super(...arguments),this.state={titleId:N_()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&yu(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=PQ(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:r,state:i}=this,a=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return d9e(Je("div",Object.assign({},r.extraAttrs,{id:r.id,className:a.join(" "),"aria-labelledby":i.titleId,ref:this.handleRootEl}),Je("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},Je("span",{className:"fc-popover-title",id:i.titleId},r.title),Je("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),Je("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:r}=this.props,{rootEl:i}=this,a=QVe(n);if(a){let s=i.getBoundingClientRect(),o=r?$s(n,".fc-scrollgrid").getBoundingClientRect().top:a.top,l=e?a.right-s.width:a.left;o=Math.max(o,tj),l=Math.min(l,document.documentElement.clientWidth-tj-s.width),l=Math.max(l,tj);let u=i.offsetParent.getBoundingClientRect();B0(i,{top:o-u.top,left:l-u.left})}}}class zUe extends Np{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:r}=this,{startDate:i,todayRange:a,dateProfile:s}=r,o=n.format(i,e.dayPopoverFormat);return Je(vZ,{elRef:this.handleRootEl,date:i,dateProfile:s,todayRange:a},(l,u,d)=>Je(FUe,{elRef:d.ref,id:r.id,title:o,extraClassNames:["fc-more-popover"].concat(d.className||[]),extraAttrs:d,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},yZ(e)&&Je(l,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,n,r,i){let{rootEl:a,props:s}=this;return e>=0&&e<r&&n>=0&&n<i?{dateProfile:s.dateProfile,dateSpan:Object.assign({allDay:!s.forceTimed,range:{start:s.startDate,end:s.endDate}},s.extraDateSpan),dayEl:a,rect:{left:0,top:0,right:r,bottom:i},layer:1}:null}}class $Ue extends Mi{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:N_()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&yu(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:r}=this,{moreLinkClick:i}=r.options,a=Rz(n).start;function s(o){let{def:l,instance:u,range:d}=o.eventRange;return{event:new Ci(r,l,u),start:r.dateEnv.toDate(d.start),end:r.dateEnv.toDate(d.end),isStart:o.isStart,isEnd:o.isEnd}}typeof i=="function"&&(i=i({date:a,allDay:!!n.allDayDate,allSegs:n.allSegs.map(s),hiddenSegs:n.hiddenSegs.map(s),jsEvent:e,view:r.viewApi})),!i||i==="popover"?this.setState({isPopoverOpen:!0}):typeof i=="string"&&r.calendarApi.zoomTo(a,i)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return Je(jp.Consumer,null,r=>{let{viewApi:i,options:a,calendarApi:s}=r,{moreLinkText:o}=a,{moreCnt:l}=e,u=Rz(e),d=typeof o=="function"?o.call(s,l):`+${l} ${o}`,f=V0(a.moreLinkHint,[l],d),p={num:l,shortText:`+${l}`,text:d,view:i};return Je(Hi,null,!!e.moreCnt&&Je(xd,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),TQ(this.handleClick)),{title:f,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:p,generatorName:"moreLinkContent",customGenerator:a.moreLinkContent,defaultGenerator:e.defaultGenerator||BUe,classNameGenerator:a.moreLinkClassNames,didMount:a.moreLinkDidMount,willUnmount:a.moreLinkWillUnmount},e.children),n.isPopoverOpen&&Je(zUe,{id:n.popoverId,startDate:u.start,endDate:u.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=$s(this.linkEl,".fc-view-harness"))}}function BUe(t){return t.text}function Rz(t){if(t.allDayDate)return{start:t.allDayDate,end:Ka(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:VUe(e),end:WUe(e)}}function VUe(t){return t.reduce(UUe).eventRange.range.start}function UUe(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function WUe(t){return t.reduce(HUe).eventRange.range.end}function HUe(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class qUe{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class KUe extends qUe{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let r=!1;e.isActive?(n.set(e.id,e),r=!0):n.has(e.id)&&(n.delete(e.id),r=!0),r&&this.set(n)}}const GUe=[],bZ={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},xZ=Object.assign(Object.assign({},bZ),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function YUe(t){let e=t.length>0?t[0].code:"en",n=GUe.concat(t),r={en:xZ};for(let i of n)r[i.code]=i;return{map:r,defaultCode:e}}function wZ(t,e){return typeof t=="object"&&!Array.isArray(t)?SZ(t.code,[t.code],t):XUe(t,e)}function XUe(t,e){let n=[].concat(t||[]),r=QUe(n,e)||xZ;return SZ(t,n,r)}function QUe(t,e){for(let n=0;n<t.length;n+=1){let r=t[n].toLocaleLowerCase().split("-");for(let i=r.length;i>0;i-=1){let a=r.slice(0,i).join("-");if(e[a])return e[a]}}return null}function SZ(t,e,n){let r=MD([bZ,n],["buttonText"]);delete r.code;let{week:i}=r;return delete r.week,{codeArg:t,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(t),options:r}}function Uf(t){return{id:Ap(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function ZUe(t,e){let n={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(a){for(let s of a){const o=s.name,l=n[o];l===void 0?(n[o]=s.id,i(s.deps),r=eWe(r,s)):l!==s.id&&console.warn(`Duplicate plugin '${o}'`)}}return t&&i(t),i(e),r}function JUe(){let t=[],e=[],n;return(r,i)=>((!n||!jf(r,t)||!jf(i,e))&&(n=ZUe(r,i)),t=r,e=i,n)}function eWe(t,e){return{premiumReleaseDate:tWe(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function tWe(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class Wf extends Jb{}Wf.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Wf.prototype.baseIconClass="fc-icon";Wf.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Wf.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Wf.prototype.iconOverrideOption="buttonIcons";Wf.prototype.iconOverrideCustomButtonOption="icon";Wf.prototype.iconOverridePrefix="fc-icon-";function nWe(t,e){let n={},r;for(r in t)ak(r,n,t,e);for(r in e)ak(r,n,t,e);return n}function ak(t,e,n,r){if(e[t])return e[t];let i=rWe(t,e,n,r);return i&&(e[t]=i),i}function rWe(t,e,n,r){let i=n[t],a=r[t],s=d=>i&&i[d]!==null?i[d]:a&&a[d]!==null?a[d]:null,o=s("component"),l=s("superType"),u=null;if(l){if(l===t)throw new Error("Can't have a custom view type that references itself");u=ak(l,e,n,r)}return!o&&u&&(o=u.component),o?{type:t,component:o,defaults:Object.assign(Object.assign({},u?u.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},u?u.overrides:{}),a?a.rawOptions:{})}:null}function Lz(t){return Cp(t,iWe)}function iWe(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=Fz(e):n&&!(n.prototype instanceof Mi)&&(n=Fz(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function Fz(t){return e=>Je(jp.Consumer,null,n=>Je(xd,{elTag:"div",elClasses:zQ(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function aWe(t,e,n,r){let i=Lz(t),a=Lz(e.views),s=nWe(i,a);return Cp(s,o=>sWe(o,a,e,n,r))}function sWe(t,e,n,r,i){let a=t.overrides.duration||t.defaults.duration||r.duration||n.duration,s=null,o="",l="",u={};if(a&&(s=oWe(a),s)){let p=JP(s);o=p.unit,p.value===1&&(l=o,u=e[o]?e[o].rawOptions:{})}let d=p=>{let h=p.buttonText||{},g=t.defaults.buttonTextKey;return g!=null&&h[g]!=null?h[g]:h[t.type]!=null?h[t.type]:h[l]!=null?h[l]:null},f=p=>{let h=p.buttonHints||{},g=t.defaults.buttonTextKey;return g!=null&&h[g]!=null?h[g]:h[t.type]!=null?h[t.type]:h[l]!=null?h[l]:null};return{type:t.type,component:t.component,duration:s,durationUnit:o,singleUnit:l,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},u),t.overrides),buttonTextOverride:d(r)||d(n)||t.overrides.buttonText,buttonTextDefault:d(i)||t.defaults.buttonText||d(U0)||t.type,buttonTitleOverride:f(r)||f(n)||t.overrides.buttonHint,buttonTitleDefault:f(i)||t.defaults.buttonHint||f(U0)}}let zz={};function oWe(t){let e=JSON.stringify(t),n=zz[e];return n===void 0&&(n=Cr(t),zz[e]=n),n}function lWe(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function cWe(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function uWe(t,e,n){let r=t.initialDate;return r!=null?e.createMarker(r):n.getDateMarker()}function dWe(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function fWe(t,e,n,r){let i;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||n);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(i=r.buildPrev(t,n),i.isValid)return i;break;case"NEXT":if(i=r.buildNext(t,n),i.isValid)return i;break}return t}function hWe(t,e,n){let r=e?e.activeRange:null;return AZ({},xWe(t,n),r,n)}function pWe(t,e,n,r){let i=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return AZ(t,e.sources,i,r);case"REMOVE_EVENT_SOURCE":return gWe(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?CZ(t,i,r):t;case"FETCH_EVENT_SOURCES":return QD(t,e.sourceIds?OQ(e.sourceIds):jZ(t,r),i,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return bWe(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function mWe(t,e,n){let r=e?e.activeRange:null;return QD(t,jZ(t,n),r,!0,n)}function _Z(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function AZ(t,e,n,r){let i={};for(let a of e)i[a.sourceId]=a;return n&&(i=CZ(i,n,r)),Object.assign(Object.assign({},t),i)}function gWe(t,e){return rp(t,n=>n.sourceId!==e)}function CZ(t,e,n){return QD(t,rp(t,r=>vWe(r,e,n)),e,!1,n)}function vWe(t,e,n){return EZ(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function QD(t,e,n,r,i){let a={};for(let s in t){let o=t[s];e[s]?a[s]=yWe(o,n,r,i):a[s]=o}return a}function yWe(t,e,n,r){let{options:i,calendarApi:a}=r,s=r.pluginHooks.eventSourceDefs[t.sourceDefId],o=Ap();return s.fetch({eventSource:t,range:e,isRefetch:n,context:r},l=>{let{rawEvents:u}=l;i.eventSourceSuccess&&(u=i.eventSourceSuccess.call(a,u,l.response)||u),t.success&&(u=t.success.call(a,u,l.response)||u),r.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:o,fetchRange:e,rawEvents:u})},l=>{let u=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(a,l),u=!0),t.failure&&(t.failure(l),u=!0),u||console.warn(l.message,l),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:o,fetchRange:e,error:l})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:o})}function bWe(t,e,n,r){let i=t[e];return i&&n===i.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},i),{isFetching:!1,fetchRange:r})}):t}function jZ(t,e){return rp(t,n=>EZ(n,e))}function xWe(t,e){let n=KQ(e),r=[].concat(t.eventSources||[]),i=[];t.initialEvents&&r.unshift(t.initialEvents),t.events&&r.unshift(t.events);for(let a of r){let s=qQ(a,e,n);s&&i.push(s)}return i}function EZ(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function wWe(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function SWe(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function _We(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function AWe(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function CWe(t,e,n,r,i){let a=t.headerToolbar?$z(t.headerToolbar,t,e,n,r,i):null,s=t.footerToolbar?$z(t.footerToolbar,t,e,n,r,i):null;return{header:a,footer:s}}function $z(t,e,n,r,i,a){let s={},o=[],l=!1;for(let u in t){let d=t[u],f=jWe(d,e,n,r,i,a);s[u]=f.widgets,o.push(...f.viewsWithButtons),l=l||f.hasTitle}return{sectionWidgets:s,viewsWithButtons:o,hasTitle:l}}function jWe(t,e,n,r,i,a){let s=e.direction==="rtl",o=e.customButtons||{},l=n.buttonText||{},u=e.buttonText||{},d=n.buttonHints||{},f=e.buttonHints||{},p=t?t.split(" "):[],h=[],g=!1;return{widgets:p.map(v=>v.split(",").map(y=>{if(y==="title")return g=!0,{buttonName:y};let b,S,A,C,D,j;if(b=o[y])A=N=>{b.click&&b.click.call(N.target,N,N.target)},(C=r.getCustomButtonIconClass(b))||(C=r.getIconClass(y,s))||(D=b.text),j=b.hint||b.text;else if(S=i[y]){h.push(y),A=()=>{a.changeView(y)},(D=S.buttonTextOverride)||(C=r.getIconClass(y,s))||(D=S.buttonTextDefault);let N=S.buttonTextOverride||S.buttonTextDefault;j=V0(S.buttonTitleOverride||S.buttonTitleDefault||e.viewHint,[N,y],N)}else if(a[y])if(A=()=>{a[y]()},(D=l[y])||(C=r.getIconClass(y,s))||(D=u[y]),y==="prevYear"||y==="nextYear"){let N=y==="prevYear"?"prev":"next";j=V0(d[N]||f[N],[u.year||"year","year"],u[y])}else j=N=>V0(d[y]||f[y],[u[N]||N,N],u[y]);return{buttonName:y,buttonClick:A,buttonIcon:C,buttonText:D,buttonHint:j}})),viewsWithButtons:h,hasTitle:g}}class EWe{constructor(e,n,r){this.type=e,this.getCurrentData=n,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let NWe={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const PWe=Uf({name:"array-event-source",eventSourceDefs:[NWe]});let kWe={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:r}=t.context,i=t.eventSource.meta;DVe(i.bind(null,tZ(t.range,r)),a=>e({rawEvents:a}),n)}};const TWe=Uf({name:"func-event-source",eventSourceDefs:[kWe]}),DWe={method:String,extraParams:Ze,startParam:String,endParam:String,timeZoneParam:String};let IWe={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:r}=t.eventSource,i=MWe(r,t.range,t.context);IVe(r.method,r.url,i).then(([a,s])=>{e({rawEvents:a,response:s})},n)}};const OWe=Uf({name:"json-event-source",eventSourceRefiners:DWe,eventSourceDefs:[IWe]});function MWe(t,e,n){let{dateEnv:r,options:i}=n,a,s,o,l,u={};return a=t.startParam,a==null&&(a=i.startParam),s=t.endParam,s==null&&(s=i.endParam),o=t.timeZoneParam,o==null&&(o=i.timeZoneParam),typeof t.extraParams=="function"?l=t.extraParams():l=t.extraParams||{},Object.assign(u,l),u[a]=r.formatIso(e.start),u[s]=r.formatIso(e.end),r.timeZone!=="local"&&(u[o]=r.timeZone),u}const RWe={daysOfWeek:Ze,startTime:Cr,endTime:Cr,duration:Cr,startRecur:Ze,endRecur:Ze};let LWe={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},r;return t.duration&&(r=t.duration),!r&&t.startTime&&t.endTime&&(r=U9e(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:r,typeData:n}}return null},expand(t,e,n){let r=Wg(e,{start:t.startRecur,end:t.endRecur});return r?zWe(t.daysOfWeek,t.startTime,t.dateEnv,n,r):[]}};const FWe=Uf({name:"simple-recurring-event",recurringTypes:[LWe],eventRefiners:RWe});function zWe(t,e,n,r,i){let a=t?OQ(t):null,s=Ai(i.start),o=i.end,l=[];for(e&&(e.milliseconds<0?o=Ka(o,1):e.milliseconds>=1e3*60*60*24&&(s=Ka(s,-1)));s<o;){let u;(!a||a[s.getUTCDay()])&&(e?u=r.add(s,e):u=s,l.push(r.createMarker(n.toDate(u)))),s=Ka(s,1)}return l}const $We=Uf({name:"change-handler",optionChangeHandlers:{events(t,e){Bz([t],e)},eventSources:Bz}});function Bz(t,e){let n=RD(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let r=[];for(let i of t){let a=!1;for(let s=0;s<n.length;s+=1)if(n[s]._raw===i){n.splice(s,1),a=!0;break}a||r.push(i)}for(let i of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:i.sourceId});for(let i of r)e.calendarApi.addEventSource(i)}function BWe(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},tZ(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function VWe(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",$h(t,e))}const UWe=[PWe,TWe,OWe,FWe,$We,Uf({name:"misc",isLoadingFuncs:[t=>_Z(t.eventSources)],propSetHandlers:{dateProfile:BWe,eventStore:VWe}})];class WWe{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new ND(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],r;for(;r=e.shift();)this.runTask(r),n.push(r);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function HWe(t,e,n){let r;return/^(year|month)$/.test(t.currentRangeUnit)?r=t.currentRange:r=t.activeRange,n.formatRange(r.start,r.end,Ha(e.titleFormat||qWe(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function qWe(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=v5(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class Vz{constructor(){this.resetListeners=new Set}handleInput(e,n){const r=this.dateEnv;if(e!==r&&(typeof n=="function"?this.nowFn=n:r||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const i of this.resetListeners.values())i()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class KWe{constructor(e){this.computeCurrentViewData=yr(this._computeCurrentViewData),this.organizeRawLocales=yr(YUe),this.buildLocale=yr(wZ),this.buildPluginHooks=JUe(),this.buildDateEnv=yr(GWe),this.buildTheme=yr(YWe),this.parseToolbars=yr(CWe),this.buildViewSpecs=yr(aWe),this.buildDateProfileGenerator=r2(XWe),this.buildViewApi=yr(QWe),this.buildViewUiProps=r2(eHe),this.buildEventUiBySource=yr(ZWe,kc),this.buildEventUiBases=yr(JWe),this.parseContextBusinessHours=r2(tHe),this.buildTitle=yr(HWe),this.nowManager=new Vz,this.emitter=new D_,this.actionRunner=new WWe(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=p=>{this.actionRunner.request(p)},this.props=e,this.actionRunner.pause(),this.nowManager=new Vz;let n={},r=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),i=r.calendarOptions.initialView||r.pluginHooks.initialView,a=this.computeCurrentViewData(i,r,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(a.options);let s={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},o=uWe(r.calendarOptions,r.dateEnv,this.nowManager),l=a.dateProfileGenerator.build(o);mf(l.activeRange,o)||(o=l.currentRange.start);for(let p of r.pluginHooks.contextInit)p(s);let u=hWe(r.calendarOptions,l,s),d={dynamicOptionOverrides:n,currentViewType:i,currentDate:o,dateProfile:l,businessHours:this.parseContextBusinessHours(s),eventSources:u,eventUiBases:{},eventStore:_c(),renderableEventStore:_c(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(s).selectionConfig},f=Object.assign(Object.assign({},s),d);for(let p of r.pluginHooks.reducers)Object.assign(d,p(null,null,f));nj(d,s)&&this.emitter.trigger("loading",!0),this.state=d,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:r}=this;n===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:r,emitter:i}=this,a=dWe(r.dynamicOptionOverrides,e),s=this.computeOptionsData(n.optionOverrides,a,n.calendarApi),o=lWe(r.currentViewType,e),l=this.computeCurrentViewData(o,s,n.optionOverrides,a);n.calendarApi.currentDataManager=this,i.setThisContext(n.calendarApi),i.setOptions(l.options);let u={nowManager:this.nowManager,dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},{currentDate:d,dateProfile:f}=r;this.data&&this.data.dateProfileGenerator!==l.dateProfileGenerator&&(f=l.dateProfileGenerator.build(d)),d=cWe(d,e),f=fWe(f,e,d,l.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!mf(f.currentRange,d))&&(d=f.currentRange.start);let p=pWe(r.eventSources,e,f,u),h=iVe(r.eventStore,e,p,f,u),m=_Z(p)&&!l.options.progressiveEventRendering&&r.renderableEventStore||h,{eventUiSingleBase:v,selectionConfig:y}=this.buildViewUiProps(u),b=this.buildEventUiBySource(p),S=this.buildEventUiBases(m.defs,v,b),A={dynamicOptionOverrides:a,currentViewType:o,currentDate:d,dateProfile:f,eventSources:p,eventStore:h,renderableEventStore:m,selectionConfig:y,eventUiBases:S,businessHours:this.parseContextBusinessHours(u),dateSelection:wWe(r.dateSelection,e),eventSelection:SWe(r.eventSelection,e),eventDrag:_We(r.eventDrag,e),eventResize:AWe(r.eventResize,e)},C=Object.assign(Object.assign({},u),A);for(let N of s.pluginHooks.reducers)Object.assign(A,N(r,e,C));let D=nj(r,u),j=nj(A,u);!D&&j?i.trigger("loading",!0):D&&!j&&i.trigger("loading",!1),this.state=A,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,r=this.data,i=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),a=this.computeCurrentViewData(n.currentViewType,i,e.optionOverrides,n.dynamicOptionOverrides),s=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,a.options,i.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},i),a),n),o=i.pluginHooks.optionChangeHandlers,l=r&&r.calendarOptions,u=i.calendarOptions;if(l&&l!==u){l.timeZone!==u.timeZone&&(n.eventSources=s.eventSources=mWe(s.eventSources,n.dateProfile,s),n.eventStore=s.eventStore=Nz(s.eventStore,r.dateEnv,s.dateEnv),n.renderableEventStore=s.renderableEventStore=Nz(s.renderableEventStore,r.dateEnv,s.dateEnv));for(let d in o)(this.optionsForHandling.indexOf(d)!==-1||l[d]!==u[d])&&o[d](u[d],s)}this.optionsForHandling=[],e.onData&&e.onData(s)}computeOptionsData(e,n,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:i,pluginHooks:a,localeDefaults:s,availableLocaleData:o,extra:l}=this.processRawCalendarOptions(e,n);Uz(l);let u=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,a,o,i.defaultRangeSeparator),d=this.buildViewSpecs(a.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,s),f=this.buildTheme(i,a),p=this.parseToolbars(i,this.stableOptionOverrides,f,d,r);return this.stableCalendarOptionsData={calendarOptions:i,pluginHooks:a,dateEnv:u,viewSpecs:d,theme:f,toolbarConfig:p,localeDefaults:s,availableRawLocales:o.map}}processRawCalendarOptions(e,n){let{locales:r,locale:i}=GC([U0,e,n]),a=this.organizeRawLocales(r),s=a.map,o=this.buildLocale(i||a.defaultCode,s).options,l=this.buildPluginHooks(e.plugins||[],UWe),u=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wz),Sz),_z),l.listenerRefiners),l.optionRefiners),d={},f=GC([U0,o,e,n]),p={},h=this.currentCalendarOptionsInput,g=this.currentCalendarOptionsRefined,m=!1;for(let v in f)this.optionsForRefining.indexOf(v)===-1&&(f[v]===h[v]||fh[v]&&v in h&&fh[v](h[v],f[v]))?p[v]=g[v]:u[v]?(p[v]=u[v](f[v]),m=!0):d[v]=h[v];return m&&(this.currentCalendarOptionsInput=f,this.currentCalendarOptionsRefined=p,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:l,availableLocaleData:a,localeDefaults:o,extra:d}}_computeCurrentViewData(e,n,r,i){let a=n.viewSpecs[e];if(!a)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:s,extra:o}=this.processRawViewOptions(a,n.pluginHooks,n.localeDefaults,r,i);Uz(o),this.nowManager.handleInput(n.dateEnv,s.now);let l=this.buildDateProfileGenerator({dateProfileGeneratorClass:a.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:a.duration,durationUnit:a.durationUnit,usesMinMaxTime:a.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,showNonCurrentDates:s.showNonCurrentDates,dayCount:s.dayCount,dateAlignment:s.dateAlignment,dateIncrement:s.dateIncrement,hiddenDays:s.hiddenDays,weekends:s.weekends,validRangeInput:s.validRange,visibleRangeInput:s.visibleRange,fixedWeekCount:s.fixedWeekCount}),u=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:a,options:s,dateProfileGenerator:l,viewApi:u}}processRawViewOptions(e,n,r,i,a){let s=GC([U0,e.optionDefaults,r,i,e.optionOverrides,a]),o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wz),Sz),_z),wBe),n.listenerRefiners),n.optionRefiners),l={},u=this.currentViewOptionsInput,d=this.currentViewOptionsRefined,f=!1,p={};for(let h in s)s[h]===u[h]||fh[h]&&fh[h](s[h],u[h])?l[h]=d[h]:(s[h]===this.currentCalendarOptionsInput[h]||fh[h]&&fh[h](s[h],this.currentCalendarOptionsInput[h])?h in this.currentCalendarOptionsRefined&&(l[h]=this.currentCalendarOptionsRefined[h]):o[h]?l[h]=o[h](s[h]):p[h]=s[h],f=!0);return f&&(this.currentViewOptionsInput=s,this.currentViewOptionsRefined=l),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:p}}}function GWe(t,e,n,r,i,a,s,o){let l=wZ(e||s.defaultCode,s.map);return new DBe({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:a.namedTimeZonedImpl,locale:l,weekNumberCalculation:n,firstDay:r,weekText:i,cmdFormatter:a.cmdFormatter,defaultSeparator:o})}function YWe(t,e){let n=e.themeClasses[t.themeSystem]||Wf;return new n(t)}function XWe(t){let e=t.dateProfileGeneratorClass||VQ;return new e(t)}function QWe(t,e,n){return new EWe(t,e,n)}function ZWe(t){return Cp(t,e=>e.ui)}function JWe(t,e,n){let r={"":e};for(let i in t){let a=t[i];a.sourceId&&n[a.sourceId]&&(r[i]=n[a.sourceId])}return r}function eHe(t){let{options:e}=t;return{eventUiSingleBase:_5({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:_5({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function nj(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function tHe(t){return hVe(t.options.businessHours,t)}function Uz(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class nHe extends Mi{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return Je("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:r}=this.context,i=[],a=!0;for(let s of e){let{buttonName:o,buttonClick:l,buttonText:u,buttonIcon:d,buttonHint:f}=s;if(o==="title")a=!1,i.push(Je("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let p=o===n.activeButton,h=!n.isTodayEnabled&&o==="today"||!n.isPrevEnabled&&o==="prev"||!n.isNextEnabled&&o==="next",g=[`fc-${o}-button`,r.getClass("button")];p&&g.push(r.getClass("buttonActive")),i.push(Je("button",{type:"button",title:typeof f=="function"?f(n.navUnit):f,disabled:h,"aria-pressed":p,className:g.join(" "),onClick:l},u||(d?Je("span",{className:d,role:"img"}):"")))}}if(i.length>1){let s=a&&r.getClass("buttonGroup")||"";return Je("div",{className:s},...i)}return i[0]}}class Wz extends Mi{render(){let{model:e,extraClassName:n}=this.props,r=!1,i,a,s=e.sectionWidgets,o=s.center;return s.left?(r=!0,i=s.left):i=s.start,s.right?(r=!0,a=s.right):a=s.end,Je("div",{className:[n||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",i||[]),this.renderSection("center",o||[]),this.renderSection("end",a||[]))}renderSection(e,n){let{props:r}=this;return Je(nHe,{key:e,widgetGroups:n,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class rHe extends Mi{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,yu(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:r}=e,i=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],a="",s="";return r?n.availableWidth!==null?a=n.availableWidth/r:s=`${1/r*100}%`:a=e.height||"",Je("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:i.join(" "),style:{height:a,paddingBottom:s}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class iHe extends wv{constructor(e){super(e),this.handleSegClick=(n,r)=>{let{component:i}=this,{context:a}=i,s=Hg(r);if(s&&i.isValidSegDownEl(n.target)){let o=$s(n.target,".fc-event-forced-url"),l=o?o.querySelector("a[href]").href:"";a.emitter.trigger("eventClick",{el:r,event:new Ci(i.context,s.eventRange.def,s.eventRange.instance),jsEvent:n,view:a.viewApi}),l&&!n.defaultPrevented&&(window.location.href=l)}},this.destroy=kQ(e.el,"click",".fc-event",this.handleSegClick)}}class aHe extends wv{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,r)=>{Hg(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",n,r))},this.handleSegLeave=(n,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,r))},this.removeHoverListeners=N9e(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,r){let{component:i}=this,{context:a}=i,s=Hg(r);(!n||i.isValidSegDownEl(n.target))&&a.emitter.trigger(e,{el:r,event:new Ci(a,s.eventRange.def,s.eventRange.instance),jsEvent:n,view:a.viewApi})}}class sHe extends Ep{constructor(){super(...arguments),this.buildViewContext=yr(MBe),this.buildViewPropTransformers=yr(lHe),this.buildToolbarProps=yr(oHe),this.headerRef=dd(),this.footerRef=dd(),this.interactionsStore={},this.state={viewLabelId:N_()},this.registerInteractiveComponent=(e,n)=>{let r=RVe(e,n),s=[iHe,aHe].concat(this.props.pluginHooks.componentInteractions).map(o=>new o(r));this.interactionsStore[e.uid]=s,rk[e.uid]=r},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let r of n)r.destroy();delete this.interactionsStore[e.uid]}delete rk[e.uid]},this.resizeRunner=new ND(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:r}=e,i=!1,a="",s;e.isHeightAuto||e.forPrint?a="":r.height!=null?i=!0:r.contentHeight!=null?a=r.contentHeight:s=Math.max(r.aspectRatio,.5);let o=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),l=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return Je(jp.Provider,{value:o},Je(I_,{unit:"day"},u=>{let d=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,u,e.viewTitle);return Je(Hi,null,n.header&&Je(Wz,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:l},d)),Je(rHe,{liquid:i,height:a,aspectRatio:s,labeledById:l},this.renderView(e),this.buildAppendContent()),n.footer&&Je(Wz,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},d)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let r in n)n[r](e[r],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:r}=n.pluginHooks;for(let i in r)n[i]!==e[i]&&r[i](n[i],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(r=>r(e));return Je(Hi,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:r}=e,i={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},a=this.buildViewPropTransformers(n.viewPropsTransformers);for(let o of a)Object.assign(i,o.transform(i,e));let s=r.component;return Je(s,Object.assign({},i))}}function oHe(t,e,n,r,i,a){let s=n.build(i,void 0,!1),o=n.buildPrev(e,r,!1),l=n.buildNext(e,r,!1);return{title:a,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:s.isValid&&!mf(e.currentRange,i),isPrevEnabled:o.isValid,isNextEnabled:l.isValid}}function lHe(t){return t.map(e=>new e)}class cHe extends FVe{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;w5(()=>{fb(Je(MVe,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(i,a,s,o)=>(this.setClassNames(i),this.setHeight(a),Je(FQ.Provider,{value:this.customContentRenderId},Je(sHe,Object.assign({isHeightAuto:s,forPrint:o},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,fb(null,this.el),this.setClassNames([]),this.setHeight(""))},b9e(e),this.el=e,this.renderRunner=new ND(this.handleRenderRequest),new KWe({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){w5(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!jf(e,this.currentClassNames)){let{classList:n}=this.el;for(let r of this.currentClassNames)n.remove(r);for(let r of e)n.add(r);this.currentClassNames=e}}setHeight(e){NQ(this.el,"height",e)}}const uHe=parseInt(String(be.version).split(".")[0]),dHe=uHe<18;class ZD extends I.Component{constructor(){super(...arguments),this.elRef=I.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(be.createElement(fHe,{key:n.id,customRendering:n}));return be.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new KUe;this.handleCustomRendering=e.handle.bind(e),this.calendar=new cHe(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{fy.flushSync(()=>{})});let n;e.subscribe(r=>{const i=Date.now(),a=!n;(dHe||a||this.isUpdating||this.isUnmounting||i-n<100?NZ:fy.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{n=i,a?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}ZD.act=NZ;class fHe extends I.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,r=typeof n=="function"?n(e.renderProps):n;return fy.createPortal(r,e.containerEl)}}function NZ(t){t()}class hHe extends Np{constructor(){super(...arguments),this.headerElRef=dd()}renderSimpleLayout(e,n){let{props:r,context:i}=this,a=[],s=Mz(i.options);return e&&a.push({type:"header",key:"header",isSticky:s,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),a.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),Je(Az,{elClasses:["fc-daygrid"],viewSpec:i.viewSpec},Je(mZ,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:a}))}renderHScrollLayout(e,n,r,i){let a=this.context.pluginHooks.scrollGridImpl;if(!a)throw new Error("No ScrollGrid implementation");let{props:s,context:o}=this,l=!s.forPrint&&Mz(o.options),u=!s.forPrint&&NUe(o.options),d=[];return e&&d.push({type:"header",key:"header",isSticky:l,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),u&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:EUe}]}),Je(Az,{elClasses:["fc-daygrid"],viewSpec:o.viewSpec},Je(a,{liquid:!s.isHeightAuto&&!s.forPrint,forPrint:s.forPrint,collapsibleWidth:s.forPrint,colGroups:[{cols:[{span:r,minWidth:i}]}],sections:d}))}}function a2(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.row].push(r);return n}function g1(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.firstCol].push(r);return n}function Hz(t,e){let n=[];if(t){for(let r=0;r<e;r+=1)n[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)n[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)n[r]=null;return n}const PZ=Ha({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function kZ(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class TZ extends Mi{render(){let{props:e}=this;return Je(gZ,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:PZ,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class DZ extends Mi{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,a=r.eventTimeFormat||PZ,s=JQ(i,a,n,!0,e.defaultDisplayEventEnd);return Je(XD,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:eZ(e.seg,n),defaultGenerator:pHe,timeText:s,isResizing:!1,isDateSelecting:!1}))}}function pHe(t){return Je(Hi,null,Je("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&Je("div",{className:"fc-event-time"},t.timeText),Je("div",{className:"fc-event-title"},t.event.title||Je(Hi,null," ")))}class mHe extends Mi{constructor(){super(...arguments),this.compileSegs=yr(gHe)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return Je($Ue,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return Je(Hi,null,n.map(a=>{let s=a.eventRange.instance.instanceId;return Je("div",{className:"fc-daygrid-event-harness",key:s,style:{visibility:i[s]?"hidden":""}},kZ(a)?Je(DZ,Object.assign({seg:a,isDragging:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},W0(a,e.todayRange))):Je(TZ,Object.assign({seg:a,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},W0(a,e.todayRange))))}))}})}}function gHe(t){let e=[],n=[];for(let r of t)e.push(r.seg),r.isVisible||n.push(r.seg);return{allSegs:e,invisibleSegs:n}}const vHe=Ha({week:"narrow"});class yHe extends Np{constructor(){super(...arguments),this.rootElRef=dd(),this.state={dayNumberId:N_()},this.handleRootEl=e=>{yu(this.rootElRef,e),yu(this.props.elRef,e)}}render(){let{context:e,props:n,state:r,rootElRef:i}=this,{options:a,dateEnv:s}=e,{date:o,dateProfile:l}=n;const u=n.showDayNumber&&xHe(o,l.currentRange,s);return Je(vZ,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:bHe,date:o,dateProfile:l,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:u,extraRenderProps:n.extraRenderProps},(d,f)=>Je("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&Je(RUe,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:ik(e,o,"week"),date:o,defaultFormat:vHe}),!f.isDisabled&&(n.showDayNumber||yZ(a)||n.forceDayTop)?Je("div",{className:"fc-daygrid-day-top"},Je(d,{elTag:"a",elClasses:["fc-daygrid-day-number",u&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},ik(e,o)),{id:r.dayNumberId})})):n.showDayNumber?Je("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},Je("a",{className:"fc-daygrid-day-number"}," ")):void 0,Je("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,Je("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},Je(mHe,{allDayDate:o,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:i,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),Je("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function bHe(t){return t.dayNumberText||Je(Hi,null," ")}function xHe(t,e,n){const{start:r,end:i}=e,a=Ef(i,-1),s=n.getYear(r),o=n.getMonth(r),l=n.getYear(a),u=n.getMonth(a);return!(s===l&&o===u)&&(t.valueOf()===r.valueOf()||n.getDay(t)===1&&t.valueOf()<i.valueOf())}function IZ(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function OZ(t){return IZ(t)+":"+t.lastCol}function wHe(t,e,n,r,i,a,s){let o=new AHe(y=>{let b=t[y.index].eventRange.instance.instanceId+":"+y.span.start+":"+(y.span.end-1);return i[b]||1});o.allowReslicing=!0,o.strictOrder=r,e===!0||n===!0?(o.maxCoord=a,o.hiddenConsumes=!0):typeof e=="number"?o.maxStackCnt=e:typeof n=="number"&&(o.maxStackCnt=n,o.hiddenConsumes=!0);let l=[],u=[];for(let y=0;y<t.length;y+=1){let b=t[y],S=OZ(b);i[S]!=null?l.push({index:y,span:{start:b.firstCol,end:b.lastCol+1}}):u.push(b)}let d=o.addSegs(l),f=o.toRects(),{singleColPlacements:p,multiColPlacements:h,leftoverMargins:g}=SHe(f,t,s),m=[],v=[];for(let y of u){h[y.firstCol].push({seg:y,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let b=y.firstCol;b<=y.lastCol;b+=1)p[b].push({seg:Rm(y,b,b+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let y=0;y<s.length;y+=1)m.push(0);for(let y of d){let b=t[y.index],S=y.span;h[S.start].push({seg:Rm(b,S.start,S.end,s),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let A=S.start;A<S.end;A+=1)m[A]+=1,p[A].push({seg:Rm(b,A,A+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let y=0;y<s.length;y+=1)v.push(g[y]);return{singleColPlacements:p,multiColPlacements:h,moreCnts:m,moreMarginTops:v}}function SHe(t,e,n){let r=_He(t,n.length),i=[],a=[],s=[];for(let o=0;o<n.length;o+=1){let l=r[o],u=[],d=0,f=0;for(let h of l){let g=e[h.index];u.push({seg:Rm(g,o,o+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:h.levelCoord-d}),d=h.levelCoord+h.thickness}let p=[];d=0,f=0;for(let h of l){let g=e[h.index],m=h.span.end-h.span.start>1,v=h.span.start===o;f+=h.levelCoord-d,d=h.levelCoord+h.thickness,m?(f+=h.thickness,v&&p.push({seg:Rm(g,h.span.start,h.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:h.levelCoord,marginTop:0})):v&&(p.push({seg:Rm(g,h.span.start,h.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:f}),f=0)}i.push(u),a.push(p),s.push(f)}return{singleColPlacements:i,multiColPlacements:a,leftoverMargins:s}}function _He(t,e){let n=[];for(let r=0;r<e;r+=1)n.push([]);for(let r of t)for(let i=r.span.start;i<r.span.end;i+=1)n[i].push(r);return n}function Rm(t,e,n,r){if(t.firstCol===e&&t.lastCol===n-1)return t;let i=t.eventRange,a=i.range,s=Wg(a,{start:r[e].date,end:Ka(r[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:i.def,ui:Object.assign(Object.assign({},i.ui),{durationEditable:!1}),instance:i.instance,range:s},isStart:t.isStart&&s.start.valueOf()===a.start.valueOf(),isEnd:t.isEnd&&s.end.valueOf()===a.end.valueOf()})}class AHe extends eUe{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:r}=this,i=a=>!this.forceHidden[H0(a)];for(let a=0;a<r.length;a+=1)r[a]=r[a].filter(i);return n}handleInvalidInsertion(e,n,r){const{entriesByLevel:i,forceHidden:a}=this,{touchingEntry:s,touchingLevel:o,touchingLateral:l}=e;if(this.hiddenConsumes&&s){const u=H0(s);if(!a[u])if(this.allowReslicing){const d=Object.assign(Object.assign({},s),{span:lZ(s.span,n.span)}),f=H0(d);a[f]=!0,i[o][l]=d,r.push(d),this.splitEntry(s,n,r)}else a[u]=!0,r.push(s)}super.handleInvalidInsertion(e,n,r)}}class MZ extends Np{constructor(){super(...arguments),this.cellElRefs=new Ph,this.frameElRefs=new Ph,this.fgElRefs=new Ph,this.segHarnessRefs=new Ph,this.rootElRef=dd(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:r}=this,{options:i}=r,a=e.cells.length,s=g1(e.businessHourSegs,a),o=g1(e.bgEventSegs,a),l=g1(this.getHighlightSegs(),a),u=g1(this.getMirrorSegs(),a),{singleColPlacements:d,multiColPlacements:f,moreCnts:p,moreMarginTops:h}=wHe(yVe(e.fgEventSegs,i.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,i.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),g=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return Je("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((m,v)=>{let y=this.renderFgSegs(v,e.forPrint?d[v]:f[v],e.todayRange,g),b=this.renderFgSegs(v,CHe(u[v],f),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return Je(yHe,{key:m.key,elRef:this.cellElRefs.createRef(m.key),innerElRef:this.frameElRefs.createRef(m.key),dateProfile:e.dateProfile,date:m.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&v===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:m.extraRenderProps,extraDataAttrs:m.extraDataAttrs,extraClassNames:m.extraClassNames,extraDateSpan:m.extraDateSpan,moreCnt:p[v],moreMarginTop:h[v],singlePlacements:d[v],fgContentElRef:this.fgElRefs.createRef(m.key),fgContent:Je(Hi,null,Je(Hi,null,y),Je(Hi,null,b)),bgContent:Je(Hi,null,this.renderFillSegs(l[v],"highlight"),this.renderFillSegs(s[v],"non-business"),this.renderFillSegs(o[v],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let r=this.props;this.updateSizing(!kc(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,r,i,a,s,o){let{context:l}=this,{eventSelection:u}=this.props,{framePositions:d}=this.state,f=this.props.cells.length===1,p=a||s||o,h=[];if(d)for(let g of n){let{seg:m}=g,{instanceId:v}=m.eventRange.instance,y=g.isVisible&&!i[v],b=g.isAbsolute,S="",A="";b&&(l.isRtl?(A=0,S=d.lefts[m.lastCol]-d.lefts[m.firstCol]):(S=0,A=d.rights[m.firstCol]-d.rights[m.lastCol])),h.push(Je("div",{className:"fc-daygrid-event-harness"+(b?" fc-daygrid-event-harness-abs":""),key:IZ(m),ref:p?null:this.segHarnessRefs.createRef(OZ(m)),style:{visibility:y?"":"hidden",marginTop:b?"":g.marginTop,top:b?g.absoluteTop:"",left:S,right:A}},kZ(m)?Je(DZ,Object.assign({seg:m,isDragging:a,isSelected:v===u,defaultDisplayEventEnd:f},W0(m,r))):Je(TZ,Object.assign({seg:m,isDragging:a,isResizing:s,isDateSelecting:o,isSelected:v===u,defaultDisplayEventEnd:f},W0(m,r)))))}return h}renderFillSegs(e,n){let{isRtl:r}=this.context,{todayRange:i}=this.props,{framePositions:a}=this.state,s=[];if(a)for(let o of e){let l=r?{right:0,left:a.lefts[o.lastCol]-a.lefts[o.firstCol]}:{left:0,right:a.rights[o.firstCol]-a.rights[o.lastCol]};s.push(Je("div",{key:AVe(o.eventRange),className:"fc-daygrid-bg-harness",style:l},n==="bg-event"?Je(IUe,Object.assign({seg:o},W0(o,i))):MUe(n)))}return Je(Hi,{},...s)}updateSizing(e){let{props:n,state:r,frameElRefs:i}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let l=n.cells.map(u=>i.currentMap[u.key]);if(l.length){let u=this.rootElRef.current,d=new C5(u,l,!0,!1);(!r.framePositions||!r.framePositions.similarTo(d))&&this.setState({framePositions:new C5(u,l,!0,!1)})}}const a=this.state.segHeights,s=this.querySegHeights(),o=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},a),s),maxContentHeight:o?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let r in e){let i=Math.round(e[r].getBoundingClientRect().height);n[r]=Math.max(n[r]||0,i)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}}MZ.addStateEquality({segHeights:kc});function CHe(t,e){if(!t.length)return[];let n=jHe(e);return t.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}))}function jHe(t){let e={};for(let n of t)for(let r of n)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class EHe extends Np{constructor(){super(...arguments),this.splitBusinessHourSegs=yr(a2),this.splitBgEventSegs=yr(NHe),this.splitFgEventSegs=yr(a2),this.splitDateSelectionSegs=yr(a2),this.splitEventDrag=yr(Hz),this.splitEventResize=yr(Hz),this.rowRefs=new Ph}render(){let{props:e,context:n}=this,r=e.cells.length,i=this.splitBusinessHourSegs(e.businessHourSegs,r),a=this.splitBgEventSegs(e.bgEventSegs,r),s=this.splitFgEventSegs(e.fgEventSegs,r),o=this.splitDateSelectionSegs(e.dateSelectionSegs,r),l=this.splitEventDrag(e.eventDrag,r),u=this.splitEventResize(e.eventResize,r),d=r>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return Je(I_,{unit:"day"},(f,p)=>Je(Hi,null,e.cells.map((h,g)=>Je(MZ,{ref:this.rowRefs.createRef(g),key:h.length?h[0].date.toISOString():g,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:p,dateProfile:e.dateProfile,cells:h,renderIntro:e.renderRowIntro,businessHourSegs:i[g],eventSelection:e.eventSelection,bgEventSegs:a[g],fgEventSegs:s[g],dateSelectionSegs:o[g],eventDrag:l[g],eventResize:u[g],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:d,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new C5(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new C5(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:r,rowPositions:i}=this,a=r.leftToIndex(e),s=i.topToIndex(n);if(s!=null&&a!=null){let o=this.props.cells[s][a];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(s,a),allDay:!0},o.extraDateSpan),dayEl:this.getCellEl(s,a),rect:{left:r.lefts[a],right:r.rights[a],top:i.tops[s],bottom:i.bottoms[s]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let r=this.props.cells[e][n].date,i=Ka(r,1);return{start:r,end:i}}}function NHe(t,e){return a2(t.filter(PHe),e)}function PHe(t){return t.eventRange.def.allDay}let kHe=class extends Np{constructor(){super(...arguments),this.elRef=dd(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:r,expandRows:i}=e,a=r===!0||n===!0;a&&!i&&(a=!1,n=null,r=null);let s=["fc-daygrid-body",a?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",i?"":"fc-daygrid-body-natural"];return Je("div",{ref:this.elRef,className:s.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},Je("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:i?e.clientHeight:""}},e.colGroupNode,Je("tbody",{role:"presentation"},Je(EHe,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=THe(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),r=n.closest(".fc-scroller"),i=e.getBoundingClientRect().top-n.getBoundingClientRect().top;r.scrollTop=i?i+1:0}this.needsScrollReset=!1}}};function THe(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${aBe(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${DD(e.currentDate)}"]`)),n}class DHe extends uUe{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class IHe extends Np{constructor(){super(...arguments),this.slicer=new DHe,this.tableRef=dd()}render(){let{props:e,context:n}=this;return Je(kHe,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class OHe extends hHe{constructor(){super(...arguments),this.buildDayTableModel=yr(MHe),this.headerRef=dd(),this.tableRef=dd()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:r}=this,i=this.buildDayTableModel(r.dateProfile,n),a=e.dayHeaders&&Je(sUe,{ref:this.headerRef,dateProfile:r.dateProfile,dates:i.headerDates,datesRepDistinctDays:i.rowCnt===1}),s=o=>Je(IHe,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:i,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:o.tableColGroupNode,tableMinWidth:o.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:o.clientWidth,clientHeight:o.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(a,s,i.colCnt,e.dayMinWidth):this.renderSimpleLayout(a,s)}}function MHe(t,e){let n=new lUe(t.renderRange,e);return new cUe(n,/year|month|week/.test(t.currentRangeUnit))}class RHe extends VQ{buildRenderRange(e,n,r){let i=super.buildRenderRange(e,n,r),{props:a}=this;return LHe({currentRange:i,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:a.fixedWeekCount,dateEnv:a.dateEnv})}}function LHe(t){let{dateEnv:e,currentRange:n}=t,{start:r,end:i}=n,a;if(t.snapToWeek&&(r=e.startOfWeek(r),a=e.startOfWeek(i),a.valueOf()!==i.valueOf()&&(i=gz(a,1))),t.fixedWeekCount){let s=e.startOfWeek(e.startOfMonth(Ka(n.end,-1))),o=Math.ceil(K9e(s,i));i=gz(i,6-o)}return{start:r,end:i}}var FHe=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';CQ(FHe);var RZ=Uf({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:OHe,dateProfileGeneratorClass:RHe},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}}),LZ={code:"es",week:{dow:1,doy:4},buttonText:{prev:"Ant",next:"Sig",today:"Hoy",year:"Año",month:"Mes",week:"Semana",day:"Día",list:"Agenda"},buttonHints:{prev:"$0 antes",next:"$0 siguiente",today(t){return t==="Día"?"Hoy":(t==="Semana"?"Esta":"Este")+" "+t.toLocaleLowerCase()}},viewHint(t){return"Vista "+(t==="Semana"?"de la":"del")+" "+t.toLocaleLowerCase()},weekText:"Sm",weekTextLong:"Semana",allDayText:"Todo el día",moreLinkText:"más",moreLinkHint(t){return`Mostrar ${t} eventos más`},noEventsText:"No hay eventos para mostrar",navLinkHint:"Ir al $0",closeHint:"Cerrar",timeHint:"La hora",eventHint:"Evento"};const zHe=(t,e)=>{const n=[],r=new Date,i=r.getFullYear();return t.forEach(a=>{const s=a.category==="Tratamiento"?"#007AFF":"#AF52DE";if(e==="Maternidad"&&a.trigger.type==="age"&&a.trigger.days)a.trigger.days.forEach(o=>{const l=new Date;l.setDate(r.getDate()+o),n.push({title:a.name,start:l,backgroundColor:s,borderColor:s})});else if(e==="Adultos"&&a.trigger.type==="fixed_date_period"&&a.trigger.month&&a.trigger.week){const o=(a.trigger.week-1)*7+1,l=new Date(i,a.trigger.month-1,o);n.push({title:a.name,start:l,backgroundColor:s,borderColor:s})}}),n},$He=({isOpen:t,onClose:e,activities:n,targetGroup:r})=>{const i=be.useMemo(()=>zHe(n,r),[n,r]);return c.jsx(sn,{isOpen:t,onClose:e,title:"",children:c.jsxs(Wi.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-2xl mx-auto p-4 sm:p-0",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white leading-none",children:"Previsualización del Plan"}),c.jsx("p",{className:"text-zinc-400 mt-2",children:r==="Maternidad"?"Este calendario simula las fechas de las actividades asumiendo un nacimiento el día de hoy.":"Este calendario muestra la distribución de las actividades a lo largo del año actual."})]}),c.jsx("div",{className:"h-[55vh] sm:h-[60vh] text-white",children:c.jsx(ZD,{plugins:[RZ],initialView:"dayGridMonth",locale:LZ,events:i,height:"100%",headerToolbar:{left:"prev,next",center:"title",right:"today"}})}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{onClick:e,className:"px-6 py-3 bg-brand-blue text-white font-bold rounded-xl w-full sm:w-auto",children:"Cerrar"})})]})})},BHe=({targetGroup:t,activityType:e,onSaveActivity:n,existingActivity:r,clearEditing:i})=>{const{products:a,addProduct:s}=Kt(),[o,l]=I.useState(""),[u,d]=I.useState(""),[f,p]=I.useState(""),[h,g]=I.useState(!1),[m,v]=I.useState(null),[y,b]=I.useState(new Set),[S,A]=I.useState(""),[C,D]=I.useState(null),j=["0","8","15","21","30","45","60","75","90","105","120"],M=e==="Control"?t==="Maternidad"?["Cura de Ombligo","Descorne","Castración","Hematología","Coprología","FAMACHA"]:["Hematología","Coprología","Arreglo Podal","FAMACHA"]:t==="Maternidad"?["Coxidioestático","Desparasitación","Vacuna Clostridial"]:["Desparasitación","Vacuna Leptospirosis","Vacuna Clostridial","Vacuna Rabia"],L=I.useMemo(()=>a.reduce((le,se)=>{const $=se.category||"Otro";return le[$]||(le[$]=[]),le[$].push(se),le},{}),[a]);I.useEffect(()=>{r?(l(r.name),e==="Tratamiento"&&(d(r.productId||""),p(r.complementaryProductId||"")),t==="Maternidad"&&r.trigger.days&&b(new Set(r.trigger.days.map(String))),t==="Adultos"&&r.trigger.month&&r.trigger.week&&b(new Set([`${r.trigger.month}-${r.trigger.week}`]))):V()},[r,e,t]);const V=()=>{l(""),d(""),p(""),b(new Set),A(""),v(null),i()},K=le=>{le.trim()&&b(se=>{const $=new Set(se);return $.has(le)?$.delete(le):$.add(le),$})},Z=()=>{S&&!isNaN(Number(S))&&(K(S),A(""))},Y=async le=>{await s(le),g(!1)},H=()=>{if(v(null),!o.trim()){v("El nombre es obligatorio.");return}if(e==="Tratamiento"&&!u){v("Debe seleccionar un producto principal.");return}if(y.size===0){v("Debe seleccionar al menos un tiempo de aplicación.");return}const le=[],se={category:e,name:o};if(e==="Tratamiento"&&(u&&(se.productId=u),f&&(se.complementaryProductId=f)),t==="Maternidad"){const $={type:"age",days:Array.from(y).map(Number).sort((X,te)=>X-te)};le.push({...se,trigger:$})}else Array.from(y).forEach($=>{const[X,te]=$.split("-").map(Number),oe={type:"fixed_date_period",month:X,week:te};le.push({...se,trigger:oe})});le.forEach($=>n($,!!r)),V()},ee=Array.from(y).filter(le=>!j.includes(le));return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Añadir ",e]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{list:"activity-names-list",value:o,onChange:le=>l(le.target.value),placeholder:`Nombre del ${e}...`,className:"w-full bg-zinc-800 p-3 rounded-lg text-base"}),c.jsx("datalist",{id:"activity-names-list",children:M.map(le=>c.jsx("option",{value:le},le))}),e==="Control"&&c.jsx("button",{type:"button",onClick:()=>alert("Funcionalidad para crear nuevos tipos de control en desarrollo."),className:"flex-shrink-0 p-3 bg-brand-orange/80 text-white rounded-lg",children:c.jsx(ol,{size:20})})]}),e==="Tratamiento"&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:u,onChange:le=>d(le.target.value),className:"w-full bg-zinc-800 p-3 rounded-lg text-base appearance-none",children:[c.jsx("option",{value:"",disabled:!0,children:"Producto Principal..."}),Object.entries(L).map(([le,se])=>c.jsx("optgroup",{label:le,children:se.map($=>c.jsx("option",{value:$.id,children:$.name},$.id))},le))]}),c.jsx("button",{type:"button",onClick:()=>g(!0),className:"flex-shrink-0 p-3 bg-brand-orange text-white rounded-lg",children:c.jsx(ol,{size:20})})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:f,onChange:le=>p(le.target.value),className:"w-full bg-zinc-800 p-3 rounded-lg text-base appearance-none",children:[c.jsx("option",{value:"",children:"Producto Complementario (Opcional)..."}),Object.entries(L).map(([le,se])=>c.jsx("optgroup",{label:le,children:se.map($=>c.jsx("option",{value:$.id,children:$.name},$.id))},le))]}),c.jsx("button",{type:"button",onClick:()=>g(!0),className:"flex-shrink-0 p-3 bg-brand-orange/50 text-white rounded-lg",children:c.jsx(ol,{size:20})})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-base font-medium text-zinc-400",children:"Tiempos de Aplicación (Selecciona uno o varios)"}),t==="Maternidad"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.map(le=>c.jsx("button",{type:"button",onClick:()=>K(le),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors ${y.has(le)?"bg-zinc-200 text-black":"bg-zinc-700 text-zinc-300"}`,children:le==="0"?"Nacimiento":`${le} días`},le)),ee.map(le=>c.jsxs("button",{type:"button",onClick:()=>K(le),className:"flex items-center gap-1.5 px-4 py-2 text-sm font-semibold rounded-lg bg-zinc-200 text-black",children:[le," días ",c.jsx(Ic,{size:16})]},`manual-${le}`))]}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx("input",{type:"number",value:S,onChange:le=>A(le.target.value),placeholder:"Día manual...",className:"w-full bg-zinc-800 p-3 rounded-lg text-base"}),c.jsx("button",{type:"button",onClick:Z,className:"px-5 py-3 bg-zinc-700 text-white font-semibold rounded-lg text-sm hover:bg-zinc-600",children:"Agregar"})]})]}):c.jsx("div",{className:"p-2 bg-zinc-800 rounded-lg",children:c.jsx(G1,{mode:"wait",children:C?c.jsxs(Wi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",onClick:()=>D(null),className:"p-2 text-zinc-400 hover:bg-zinc-700 rounded-md",children:c.jsx(ji,{size:16})}),c.jsx("h4",{className:"font-bold text-white",children:new Date(0,C-1).toLocaleString("es-VE",{month:"long"})})]}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(le=>{const se=`${C}-${le}`,$=y.has(se);return c.jsxs("button",{type:"button",onClick:()=>K(se),className:`py-3 px-2 text-sm font-semibold rounded-md transition-colors ${$?"bg-teal-500 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:["Semana ",le]},le)})})]},"weeks-view"):c.jsx(Wi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-4 gap-2",children:[...Array(12)].map((le,se)=>{const $=se+1,X=new Date(0,se).toLocaleString("es-VE",{month:"short"}),te=Array.from(y).some(oe=>oe.startsWith(`${$}-`));return c.jsxs("button",{type:"button",onClick:()=>D($),className:"relative text-center py-3 px-2 text-sm font-semibold rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-300 transition-colors",children:[te&&c.jsx("span",{className:"absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-brand-green rounded-full"}),X.charAt(0).toUpperCase()+X.slice(1)]},$)})},"months-view")})})]}),m&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2",children:[c.jsx(dr,{size:16})," ",m]}),c.jsx("button",{type:"button",onClick:H,className:"w-full py-3 bg-brand-orange text-black font-bold rounded-lg text-base mt-4",children:r?"Actualizar Actividad":"Añadir a la Lista"}),c.jsx(sn,{isOpen:h,onClose:()=>g(!1),title:"Crear Producto",children:c.jsx(jD,{onSave:Y,onCancel:()=>g(!1)})})]})},VHe=({onSave:t,onCancel:e})=>{const[n,r]=I.useState(1),[i,a]=I.useState(""),[s,o]=I.useState(""),[l,u]=I.useState("Maternidad"),[d,f]=I.useState(new Set),[p,h]=I.useState([]),[g,m]=I.useState(null),[v,y]=I.useState(null),[b,S]=I.useState(!1),[A,C]=I.useState("Tratamiento"),[D,j]=I.useState(!1),N=["Cabritonas","Cabras","Reproductores","Machos de Levante"],P=V=>{f(K=>{const Z=new Set(K);return Z.has(V)?Z.delete(V):Z.add(V),Z})},O=(V,K)=>{h(K&&g?Z=>Z.map(Y=>Y.tempId===g.tempId?{...V,tempId:Y.tempId}:Y):Z=>[...Z,{...V,tempId:Date.now()}])},T=V=>{h(K=>K.filter(Z=>Z.tempId!==V))},M=async()=>{if(!i.trim()){y("El nombre del plan es obligatorio.");return}if(l==="Adultos"&&d.size===0){y("Debe seleccionar al menos una categoría de adulto.");return}if(p.length===0){y("Debe añadir al menos una actividad al plan.");return}y(null),S(!0);try{const V=p.map(({tempId:Z,...Y})=>Y),K={name:i,description:s,targetGroup:l,adultsSubgroup:l==="Adultos"?Array.from(d):void 0};await t(K,V)}catch{y("No se pudo guardar el plan."),S(!1)}},L=()=>n===1?c.jsxs(Wi.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3},className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Crear Plan Sanitario"}),c.jsx("p",{className:"text-zinc-400",children:"Paso 1: Define tu plan"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{type:"text",value:i,onChange:V=>a(V.target.value),placeholder:"Nombre del Plan",className:"w-full bg-zinc-800 p-3 rounded-xl text-base"}),c.jsx("input",{type:"text",value:s,onChange:V=>o(V.target.value),placeholder:"Descripción (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-base"}),c.jsxs("div",{children:[c.jsx("label",{className:"text-base font-medium text-zinc-400 mb-2 block",children:"Grupo Objetivo"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("button",{type:"button",onClick:()=>u("Maternidad"),className:`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${l==="Maternidad"?"bg-teal-500/20 border-teal-500 scale-105":"bg-zinc-800/50 border-zinc-700"}`,children:[c.jsx(due,{className:"w-8 h-8 text-teal-400"}),c.jsx("span",{className:"font-semibold text-white",children:"Maternidad"})]}),c.jsxs("button",{type:"button",onClick:()=>u("Adultos"),className:`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${l==="Adultos"?"bg-pink-500/20 border-pink-500 scale-105":"bg-zinc-800/50 border-zinc-700"}`,children:[c.jsx(pue,{className:"w-8 h-8 text-pink-400"}),c.jsx("span",{className:"font-semibold text-white",children:"Rebaño Adulto"})]})]})]})]}),v&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2 mt-4",children:[c.jsx(dr,{size:16})," ",v]}),c.jsxs("div",{className:"flex flex-col sm:flex-row-reverse sm:justify-start gap-3 pt-4",children:[c.jsx("button",{onClick:()=>{i.trim()?(r(2),y(null)):y("El nombre del plan es obligatorio.")},className:"w-full sm:w-auto px-5 py-3 bg-brand-orange text-black font-bold rounded-xl flex items-center justify-center gap-2",children:"Siguiente"}),c.jsx("button",{onClick:e,className:"w-full sm:w-auto px-5 py-3 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-xl",children:"Cancelar"})]})]},"step1"):n===2?c.jsxs(Wi.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:i||"Nuevo Plan"}),c.jsxs("p",{className:"text-zinc-400",children:["Paso 2: Añade las actividades para el grupo: ",c.jsx("span",{className:"font-semibold text-white",children:l})]})]}),c.jsx(G1,{children:l==="Adultos"&&c.jsxs(Wi.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[c.jsx("label",{className:"text-base font-medium text-zinc-400 mb-2 block",children:"Categorías (Selecciona una o varias)"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(V=>c.jsx("button",{type:"button",onClick:()=>P(V),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors ${d.has(V)?"bg-pink-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:V},V))})]})}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h3",{className:"text-xl font-semibold text-zinc-300",children:["Actividades del Plan (",p.length,")"]}),c.jsx("div",{className:"min-h-[100px] max-h-60 overflow-y-auto pr-2 border border-brand-border rounded-xl p-2 space-y-2",children:c.jsx(G1,{children:p.length>0?p.map(V=>{var K;return c.jsxs(Wi.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`flex justify-between items-center bg-zinc-800 p-3 rounded-lg border-l-4 ${V.category==="Tratamiento"?"border-blue-500":"border-purple-500"}`,children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:V.name}),c.jsxs("p",{className:"text-xs text-zinc-400",children:[((K=V.trigger.days)==null?void 0:K.map(Z=>Z===0?"Nacer":Z).join(", "))||"Tiempos no definidos"," días"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>m({activity:V,tempId:V.tempId}),className:"p-1 text-zinc-400 hover:text-brand-orange",children:c.jsx(Of,{size:16})}),c.jsx("button",{onClick:()=>T(V.tempId),className:"p-1 text-zinc-400 hover:text-brand-red",children:c.jsx(Gl,{size:16})})]})]},V.tempId)}):c.jsx("div",{className:"text-center py-6 text-zinc-500",children:c.jsx("p",{children:"Añade actividades para empezar a construir tu plan."})})})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"relative flex w-full max-w-sm mx-auto justify-between rounded-lg bg-zinc-800 p-1 mb-6",children:[c.jsxs("button",{type:"button",onClick:()=>C("Tratamiento"),className:"relative z-10 w-1/2 py-2 text-sm font-semibold text-white flex items-center justify-center gap-2",children:[c.jsx(hue,{})," Tratamiento"]}),c.jsxs("button",{type:"button",onClick:()=>C("Control"),className:"relative z-10 w-1/2 py-2 text-sm font-semibold text-white flex items-center justify-center gap-2",children:[c.jsx(fue,{})," Control"]}),c.jsx(Wi.div,{layoutId:"add-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${A==="Control"?"left-1/2":"left-1"}`})]}),c.jsx(BHe,{targetGroup:l,activityType:A,onSaveActivity:O,existingActivity:g?g.activity:null,clearEditing:()=>m(null)})]}),v&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2 mt-4",children:[c.jsx(dr,{size:16})," ",v]}),c.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-between items-center pt-6 gap-4",children:[c.jsxs("button",{onClick:()=>r(1),className:"w-full sm:w-auto px-5 py-3 text-zinc-300 font-semibold rounded-xl flex items-center justify-center gap-2 hover:bg-zinc-700",children:[c.jsx(ji,{size:16})," Atrás"]}),c.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>j(!0),className:"flex-1 px-5 py-3 bg-brand-blue text-white font-bold rounded-xl flex items-center justify-center gap-2",children:[c.jsx(RW,{size:16})," Previsualizar"]}),c.jsx("button",{onClick:M,disabled:b,className:"flex-1 px-5 py-3 bg-brand-green text-white font-bold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:b?"Guardando...":c.jsxs(c.Fragment,{children:[c.jsx(Ga,{size:16})," Guardar"]})})]})]})]},"step2"):null;return c.jsxs("div",{className:"w-full p-4",children:[c.jsx(G1,{mode:"wait",children:L()}),c.jsx($He,{isOpen:D,onClose:()=>j(!1),activities:p,targetGroup:l})]})},UHe=({plan:t,onClick:e,onDelete:n,isDeleting:r})=>{const i=gp(),a=I.useRef(!1),s=(o,l)=>{const u=l.offset.x,d=l.velocity.x;if(Math.abs(u)<5&&!a.current){e();return}u<-80/2||d<-500?i.start({x:-80}):i.start({x:0}),setTimeout(()=>{a.current=!1},100)};return c.jsxs("div",{className:`relative w-full overflow-hidden rounded-2xl bg-dashboard-surface border border-brand-border transition-opacity ${r?"opacity-50":"opacity-100"}`,children:[c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:c.jsxs("button",{onClick:n,onPointerDown:o=>o.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white transition-colors hover:bg-red-600",children:[c.jsx(Gl,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})}),c.jsx(Wi.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{a.current=!0},onDragEnd:s,onTap:()=>{!a.current&&!r&&e()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),c.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:t.description||`Plan para ${t.targetGroup}`})]}),r?c.jsx(jc,{className:"animate-spin text-zinc-400"}):c.jsx(qi,{className:"text-zinc-600"})]})})]})};function WHe({navigateTo:t}){const{healthPlans:e,deleteHealthPlan:n,addHealthPlanWithActivities:r}=Kt(),[i,a]=I.useState(!1),[s,o]=I.useState(null),[l,u]=I.useState(null),d=async(p,h)=>{await r(p,h),a(!1)},f=async()=>{if(s!=null&&s.id){u(s.id),o(null);try{await n(s.id)}catch(p){console.error("Error al eliminar el plan:",p)}finally{u(null)}}};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Planificador Sanitario"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Define tus Protocolos y Planes"})]}),c.jsxs("button",{onClick:()=>a(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:opacity-90 text-black font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(Ki,{size:18})," Crear Nuevo Plan Sanitario"]}),c.jsx("div",{className:"space-y-3 pt-4",children:e.length>0?e.map(p=>c.jsx(UHe,{plan:p,onClick:()=>t({name:"plan-detail",planId:p.id}),onDelete:()=>o(p),isDeleting:l===p.id},p.id)):c.jsxs("div",{className:"text-center py-10 bg-dashboard-surface rounded-2xl flex flex-col items-center gap-4",children:[c.jsx(sT,{size:48,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-400 font-semibold",children:"Aún no has creado ningún plan."}),c.jsx("p",{className:"text-zinc-500 text-sm",children:"Usa el botón de arriba para empezar."})]})})]}),c.jsx(sn,{isOpen:i,onClose:()=>a(!1),title:"",children:c.jsx(VHe,{onSave:d,onCancel:()=>a(!1)})}),c.jsx(yv,{isOpen:!!s,onClose:()=>o(null),onConfirm:f,title:`Eliminar Plan "${s==null?void 0:s.name}"`,message:"¿Estás seguro? Al eliminar el plan, también se eliminarán todas sus actividades asociadas. Esta acción no se puede deshacer."})]})}YD.touchMouseIgnoreWait=500;let sk=0,j5=0,ok=!1;class FZ{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&HHe(n)&&this.tryStart(n)){let r=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let r=this.createEventFromMouse(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let r=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let i=n.target;this.shouldIgnoreMove||i.addEventListener("touchmove",this.handleTouchMove),i.addEventListener("touchend",this.handleTouchEnd),i.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let r=this.createEventFromTouch(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=n=>{if(this.isDragging){let r=n.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,qHe()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,i=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:i,deltaX:r-this.origPageX,deltaY:i-this.origPageY})}},this.containerEl=e,this.emitter=new D_,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),KHe()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),GHe()}tryStart(e){let n=this.querySubjectEl(e),r=e.target;return n&&(!this.handleSelector||$s(r,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){ok=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?$s(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return sk||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(ok=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let r=0,i=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,i=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:i}}createEventFromTouch(e,n){let r=e.touches,i,a,s=0,o=0;return r&&r.length?(i=r[0].pageX,a=r[0].pageY):(i=e.pageX,a=e.pageY),n?(this.origPageX=i,this.origPageY=a):(s=i-this.origPageX,o=a-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:a,deltaX:s,deltaY:o}}}function HHe(t){return t.button===0&&!t.ctrlKey}function qHe(){sk+=1,setTimeout(()=>{sk-=1},YD.touchMouseIgnoreWait)}function KHe(){j5+=1,j5===1&&window.addEventListener("touchmove",zZ,{passive:!1})}function GHe(){j5-=1,j5||window.removeEventListener("touchmove",zZ,{passive:!1})}function zZ(t){ok&&t.preventDefault()}class YHe{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let r=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(e,n){let r=this.mirrorEl,i=this.sourceEl.getBoundingClientRect();r.style.transition="top "+n+"ms,left "+n+"ms",B0(r,{left:i.left,top:i.top}),P9e(r,()=>{r.style.transition="",e()})}cleanup(){this.mirrorEl&&(PD(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&B0(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),B0(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class $Z extends GD{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class BZ extends $Z{constructor(e,n){super(new ZVe(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return XVe(this.scrollController.el)}}class XHe extends $Z{constructor(e){super(new JVe,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const qz=typeof performance=="function"?performance.now:Date.now;class QHe{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=qz();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let r=e-window.scrollX,i=n-window.scrollY,a=this.pointerScreenY===null?0:i-this.pointerScreenY,s=this.pointerScreenX===null?0:r-this.pointerScreenX;a<0?this.everMovedUp=!0:a>0&&(this.everMovedDown=!0),s<0?this.everMovedLeft=!0:s>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(qz()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:r}=e,{edgeThreshold:i}=this,a=i-e.distance,s=a*a/(i*i)*this.maxVelocity*n,o=1;switch(e.name){case"left":o=-1;case"right":r.setScrollLeft(r.getScrollLeft()+s*o);break;case"top":o=-1;case"bottom":r.setScrollTop(r.getScrollTop()+s*o);break}}computeBestEdge(e,n){let{edgeThreshold:r}=this,i=null,a=this.scrollCaches||[];for(let s of a){let o=s.clientRect,l=e-o.left,u=o.right-e,d=n-o.top,f=o.bottom-n;l>=0&&u>=0&&d>=0&&f>=0&&(d<=r&&this.everMovedUp&&s.canScrollUp()&&(!i||i.distance>d)&&(i={scrollCache:s,name:"top",distance:d}),f<=r&&this.everMovedDown&&s.canScrollDown()&&(!i||i.distance>f)&&(i={scrollCache:s,name:"bottom",distance:f}),l<=r&&this.everMovedLeft&&s.canScrollLeft()&&(!i||i.distance>l)&&(i={scrollCache:s,name:"left",distance:l}),u<=r&&this.everMovedRight&&s.canScrollRight()&&(!i||i.distance>u)&&(i={scrollCache:s,name:"right",distance:u}))}return i}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new XHe(!1):new BZ(n,!1))}queryScrollEls(e){let n=[];for(let r of this.scrollQuery)typeof r=="object"?n.push(r):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(r)));return n}}class ex extends tUe{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=i=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,k9e(document.body),D9e(document.body),i.isTouch||i.origEvent.preventDefault(),this.emitter.trigger("pointerdown",i),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(i.subjectEl,i.pageX,i.pageY),this.startDelay(i),this.minDistance||this.handleDistanceSurpassed(i)))},this.onPointerMove=i=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",i),!this.isDistanceSurpassed){let a=this.minDistance,s,{deltaX:o,deltaY:l}=i;s=o*o+l*l,s>=a*a&&this.handleDistanceSurpassed(i)}this.isDragging&&(i.origEvent.type!=="scroll"&&(this.mirror.handleMove(i.pageX,i.pageY),this.autoScroller.handleMove(i.pageX,i.pageY)),this.emitter.trigger("dragmove",i))}},this.onPointerUp=i=>{this.isInteracting&&(this.isInteracting=!1,T9e(document.body),I9e(document.body),this.emitter.trigger("pointerup",i),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(i)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new FZ(e);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),n&&(r.selector=n),this.mirror=new YHe,this.autoScroller=new QHe}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class ZHe{constructor(e){this.el=e,this.origRect=KD(e),this.scrollCaches=oZ(e).map(n=>new BZ(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let r={left:e,top:n};for(let i of this.scrollCaches)if(!JHe(i.getEventTarget())&&!zVe(r,i.clientRect))return!1;return!0}}function JHe(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class O_{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:i}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(i.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):i.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new D_}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},r=n,i=e.subjectEl,a;i instanceof HTMLElement&&(a=KD(i),r=$Ve(r,a));let s=this.initialHit=this.queryHitForOffset(r.left,r.top);if(s){if(this.useSubjectCenter&&a){let o=iZ(a,s.rect);o&&(r=BVe(o))}this.coordAdjust=VVe(r,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!M_(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))}prepareHits(){this.offsetTrackers=Cp(this.droppableStore,e=>(e.component.prepareHits(),new ZHe(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:r,offsetTrackers:i}=this,a=null;for(let s in r){let o=r[s].component,l=i[s];if(l&&l.isWithinClipping(e,n)){let u=l.computeLeft(),d=l.computeTop(),f=e-u,p=n-d,{origRect:h}=l,g=h.right-h.left,m=h.bottom-h.top;if(f>=0&&f<g&&p>=0&&p<m){let v=o.queryHit(f,p,g,m);v&&k_(v.dateProfile.activeRange,v.dateSpan.range)&&(this.disablePointCheck||l.el.contains(l.el.getRootNode().elementFromPoint(f+u-window.scrollX,p+d-window.scrollY)))&&(!a||v.layer>a.layer)&&(v.componentId=s,v.context=o.context,v.rect.left+=u,v.rect.right+=u,v.rect.top+=d,v.rect.bottom+=d,a=v)}}}return a}}function M_(t,e){return!t&&!e?!0:!!t!=!!e?!1:NVe(t.dateSpan,e.dateSpan)}function VZ(t,e){let n={};for(let r of e.pluginHooks.datePointTransforms)Object.assign(n,r(t,e));return Object.assign(n,eqe(t,e.dateEnv)),n}function eqe(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class tqe extends wv{constructor(e){super(e),this.handlePointerDown=r=>{let{dragging:i}=this,a=r.origEvent.target;i.setIgnoreMove(!this.component.isValidDateDownEl(a))},this.handleDragEnd=r=>{let{component:i}=this,{pointer:a}=this.dragging;if(!a.wasTouchScroll){let{initialHit:s,finalHit:o}=this.hitDragging;if(s&&o&&M_(s,o)){let{context:l}=i,u=Object.assign(Object.assign({},VZ(s.dateSpan,l)),{dayEl:s.dayEl,jsEvent:r.origEvent,view:l.viewApi||l.calendarApi.view});l.emitter.trigger("dateClick",u)}}},this.dragging=new ex(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new O_(this.dragging,HD(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class nqe extends wv{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=s=>{let{component:o,dragging:l}=this,{options:u}=o.context,d=u.selectable&&o.isValidDateDownEl(s.origEvent.target);l.setIgnoreMove(!d),l.delay=s.isTouch?rqe(o):null},this.handleDragStart=s=>{this.component.context.calendarApi.unselect(s)},this.handleHitUpdate=(s,o)=>{let{context:l}=this.component,u=null,d=!1;if(s){let f=this.hitDragging.initialHit;s.componentId===f.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(f,s)||(u=iqe(f,s,l.pluginHooks.dateSelectionTransformers)),(!u||!dUe(u,s.dateProfile,l))&&(d=!0,u=null)}u?l.dispatch({type:"SELECT_DATES",selection:u}):o||l.dispatch({type:"UNSELECT_DATES"}),d?kD():TD(),o||(this.dragSelection=u)},this.handlePointerUp=s=>{this.dragSelection&&(XQ(this.dragSelection,s,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:r}=n.context,i=this.dragging=new ex(e.el);i.touchScrollAllowed=!1,i.minDistance=r.selectMinDistance||0,i.autoScroller.isEnabled=r.dragScroll;let a=this.hitDragging=new O_(this.dragging,HD(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function rqe(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function iqe(t,e,n){let r=t.dateSpan,i=e.dateSpan,a=[r.range.start,r.range.end,i.range.start,i.range.end];a.sort(F9e);let s={};for(let o of n){let l=o(t,e);if(l===!1)return null;l&&Object.assign(s,l)}return s.range={start:a[0],end:a[3]},s.allDay=r.allDay,s}class tx extends wv{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let o=s.origEvent.target,{component:l,dragging:u}=this,{mirror:d}=u,{options:f}=l.context,p=l.context;this.subjectEl=s.subjectEl;let h=this.subjectSeg=Hg(s.subjectEl),m=(this.eventRange=h.eventRange).instance.instanceId;this.relevantEvents=BD(p.getCurrentData().eventStore,m),u.minDistance=s.isTouch?0:f.eventDragMinDistance,u.delay=s.isTouch&&m!==l.props.eventSelection?sqe(l):null,f.fixedMirrorParent?d.parentNode=f.fixedMirrorParent:d.parentNode=$s(o,".fc"),d.revertDuration=f.dragRevertDuration;let v=l.isValidSegDownEl(o)&&!$s(o,".fc-event-resizer");u.setIgnoreMove(!v),this.isDragging=v&&s.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=s=>{let o=this.component.context,l=this.eventRange,u=l.instance.instanceId;s.isTouch?u!==this.component.props.eventSelection&&o.dispatch({type:"SELECT_EVENT",eventInstanceId:u}):o.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(o.calendarApi.unselect(s),o.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Ci(o,l.def,l.instance),jsEvent:s.origEvent,view:o.viewApi}))},this.handleHitUpdate=(s,o)=>{if(!this.isDragging)return;let l=this.relevantEvents,u=this.hitDragging.initialHit,d=this.component.context,f=null,p=null,h=null,g=!1,m={affectedEvents:l,mutatedEvents:_c(),isEvent:!0};if(s){f=s.context;let v=f.options;d===f||v.editable&&v.droppable?(p=aqe(u,s,this.eventRange.instance.range.start,f.getCurrentData().pluginHooks.eventDragMutationMassagers),p&&(h=WD(l,f.getCurrentData().eventUiBases,p,f),m.mutatedEvents=h,dZ(m,s.dateProfile,f)||(g=!0,p=null,h=null,m.mutatedEvents=_c()))):f=null}this.displayDrag(f,m),g?kD():TD(),o||(d===f&&M_(u,s)&&(p=null),this.dragging.setMirrorNeedsRevert(!p),this.dragging.setMirrorIsVisible(!s||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=f,this.validMutation=p,this.mutatedRelevantEvents=h)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=s=>{if(this.isDragging){let o=this.component.context,l=o.viewApi,{receivingContext:u,validMutation:d}=this,f=this.eventRange.def,p=this.eventRange.instance,h=new Ci(o,f,p),g=this.relevantEvents,m=this.mutatedRelevantEvents,{finalHit:v}=this.hitDragging;if(this.clearDrag(),o.emitter.trigger("eventDragStop",{el:this.subjectEl,event:h,jsEvent:s.origEvent,view:l}),d){if(u===o){let y=new Ci(o,m.defs[f.defId],p?m.instances[p.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:m});let b={oldEvent:h,event:y,relatedEvents:$h(m,o,p),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:g})}},S={};for(let A of o.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(S,A(d,o));o.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},b),S),{el:s.subjectEl,delta:d.datesDelta,jsEvent:s.origEvent,view:l})),o.emitter.trigger("eventChange",b)}else if(u){let y={event:h,relatedEvents:$h(g,o,p),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:g})}};o.emitter.trigger("eventLeave",Object.assign(Object.assign({},y),{draggedEl:s.subjectEl,view:l})),o.dispatch({type:"REMOVE_EVENTS",eventStore:g}),o.emitter.trigger("eventRemove",y);let b=m.defs[f.defId],S=m.instances[p.instanceId],A=new Ci(u,b,S);u.dispatch({type:"MERGE_EVENTS",eventStore:m});let C={event:A,relatedEvents:$h(m,u,S),revert(){u.dispatch({type:"REMOVE_EVENTS",eventStore:m})}};u.emitter.trigger("eventAdd",C),s.isTouch&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:p.instanceId}),u.emitter.trigger("drop",Object.assign(Object.assign({},VZ(v.dateSpan,u)),{draggedEl:s.subjectEl,jsEvent:s.origEvent,view:v.context.viewApi})),u.emitter.trigger("eventReceive",Object.assign(Object.assign({},C),{draggedEl:s.subjectEl,view:v.context.viewApi}))}}else o.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:r}=n.context,i=this.dragging=new ex(e.el);i.pointer.selector=tx.SELECTOR,i.touchScrollAllowed=!1,i.autoScroller.isEnabled=r.dragScroll;let a=this.hitDragging=new O_(this.dragging,rk);a.useSubjectCenter=e.useEventCenter,a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("pointerup",this.handlePointerUp),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let r=this.component.context,i=this.receivingContext;i&&i!==e&&(i===r?i.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:_c(),isEvent:!0}}):i.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}tx.SELECTOR=".fc-event-draggable, .fc-event-resizable";function aqe(t,e,n,r){let i=t.dateSpan,a=e.dateSpan,s=i.range.start,o=a.range.start,l={};i.allDay!==a.allDay&&(l.allDay=a.allDay,l.hasEnd=e.context.options.allDayMaintainDuration,a.allDay?s=Ai(n):s=n);let u=bm(s,o,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);u.milliseconds&&(l.allDay=!1);let d={datesDelta:u,standardProps:l};for(let f of r)f(d,t,e);return d}function sqe(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class oqe extends wv{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let{component:s}=this,o=this.querySegEl(a),l=Hg(o),u=this.eventRange=l.eventRange;this.dragging.minDistance=s.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(a.origEvent.target)||a.isTouch&&this.component.props.eventSelection!==u.instance.instanceId)},this.handleDragStart=a=>{let{context:s}=this.component,o=this.eventRange;this.relevantEvents=BD(s.getCurrentData().eventStore,this.eventRange.instance.instanceId);let l=this.querySegEl(a);this.draggingSegEl=l,this.draggingSeg=Hg(l),s.calendarApi.unselect(),s.emitter.trigger("eventResizeStart",{el:l,event:new Ci(s,o.def,o.instance),jsEvent:a.origEvent,view:s.viewApi})},this.handleHitUpdate=(a,s,o)=>{let{context:l}=this.component,u=this.relevantEvents,d=this.hitDragging.initialHit,f=this.eventRange.instance,p=null,h=null,g=!1,m={affectedEvents:u,mutatedEvents:_c(),isEvent:!0};a&&(a.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,a)||(p=lqe(d,a,o.subjectEl.classList.contains("fc-event-resizer-start"),f.range))),p&&(h=WD(u,l.getCurrentData().eventUiBases,p,l),m.mutatedEvents=h,dZ(m,a.dateProfile,l)||(g=!0,p=null,h=null,m.mutatedEvents=null)),h?l.dispatch({type:"SET_EVENT_RESIZE",state:m}):l.dispatch({type:"UNSET_EVENT_RESIZE"}),g?kD():TD(),s||(p&&M_(d,a)&&(p=null),this.validMutation=p,this.mutatedRelevantEvents=h)},this.handleDragEnd=a=>{let{context:s}=this.component,o=this.eventRange.def,l=this.eventRange.instance,u=new Ci(s,o,l),d=this.relevantEvents,f=this.mutatedRelevantEvents;if(s.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:u,jsEvent:a.origEvent,view:s.viewApi}),this.validMutation){let p=new Ci(s,f.defs[o.defId],l?f.instances[l.instanceId]:null);s.dispatch({type:"MERGE_EVENTS",eventStore:f});let h={oldEvent:u,event:p,relatedEvents:$h(f,s,l),revert(){s.dispatch({type:"MERGE_EVENTS",eventStore:d})}};s.emitter.trigger("eventResize",Object.assign(Object.assign({},h),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Cr(0),endDelta:this.validMutation.endDelta||Cr(0),jsEvent:a.origEvent,view:s.viewApi})),s.emitter.trigger("eventChange",h)}else s.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,r=this.dragging=new ex(e.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=n.context.options.dragScroll;let i=this.hitDragging=new O_(this.dragging,HD(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return $s(e.subjectEl,".fc-event")}}function lqe(t,e,n,r){let i=t.context.dateEnv,a=t.dateSpan.range.start,s=e.dateSpan.range.start,o=bm(a,s,i,t.largeUnit);if(n){if(i.add(r.start,o)<r.end)return{startDelta:o}}else if(i.add(r.end,o)>r.start)return{endDelta:o};return null}class cqe{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let i=this.context.options.unselectCancel,a=PQ(r.origEvent);this.matchesCancel=!!$s(a,i),this.matchesEvent=!!$s(a,tx.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:i}=this,{documentPointer:a}=this,s=i.getCurrentData();if(!a.wasTouchScroll){if(s.dateSelection&&!this.isRecentPointerDateSelect){let o=i.options.unselectAuto;o&&(!o||!this.matchesCancel)&&i.calendarApi.unselect(r)}s.eventSelection&&!this.matchesEvent&&i.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new FZ(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const uqe={fixedMirrorParent:Ze},dqe={dateClick:Ze,eventDragStart:Ze,eventDragStop:Ze,eventDrop:Ze,eventResizeStart:Ze,eventResizeStop:Ze,eventResize:Ze,drop:Ze,eventReceive:Ze,eventLeave:Ze};YD.dataAttrPrefix="";var fqe=Uf({name:"@fullcalendar/interaction",componentInteractions:[tqe,nqe,tx,oqe],calendarInteractions:[cqe],elementDraggingImpl:ex,optionRefiners:uqe,listenerRefiners:dqe});const hqe=(t,e,n)=>{const r=(n-1)*7+1;return new Date(Date.UTC(t,e-1,r))},pqe=()=>{const{animals:t,healthPlans:e,planActivities:n,healthEvents:r,parturitions:i,appConfig:a}=Kt(),{forecastBySeason:s}=AD(),o=I.useMemo(()=>{const u=new Date;u.setUTCHours(0,0,0,0);const d=u.getUTCFullYear(),f=new Date(u.getTime()+90*24*60*60*1e3),p=[],h=t.filter(g=>g.status==="Activo"&&!g.isReference);for(const g of e){const m=h.filter(y=>{var S,A;const b=Sc(y.birthDate);if(b<0)return!1;if(g.targetGroup==="Maternidad")return b<=120;if(g.targetGroup==="Adultos"){if(b<=120)return!1;const C=g.adultsSubgroup&&g.adultsSubgroup.length>0,D=g.targetLots&&g.targetLots.length>0;if(!C&&!D)return!0;const j=Bf(y,i),N=C&&((S=g.adultsSubgroup)==null?void 0:S.includes(j)),P=D&&((A=g.targetLots)==null?void 0:A.includes(y.location));if(C&&D)return N||P;if(C)return N;if(D)return P}return!1}),v=n.filter(y=>y.healthPlanId===g.id);for(const y of m)for(const b of v){const S=(A,C)=>{if(!A||!C)return;if(A.setUTCHours(0,0,0,0),!r.some(j=>j.animalId!==y.id||j.activityId!==b.id?!1:b.trigger.type==="age"?new Date(j.date+"T00:00:00Z").getTime()===A.getTime():new Date(j.date+"T00:00:00Z").getUTCFullYear()===A.getUTCFullYear())&&A<=f){let j="Próxima";const N=Math.ceil((A.getTime()-u.getTime())/864e5);N<0&&Math.abs(N)>a.diasAlertaAtraso?j="Atrasada":N===0&&(j="Para Hoy"),p.push({key:C,animal:y,plan:g,activity:b,dueDate:A,status:j})}};if(b.trigger.type==="age"&&b.trigger.days)for(const A of b.trigger.days){const C=new Date(y.birthDate+"T00:00:00Z");C.setUTCDate(C.getUTCDate()+A),S(C,`${y.id}-${b.id}-${A}`)}else if(b.trigger.type==="fixed_date_period"&&b.trigger.month&&b.trigger.week){const A=hqe(d,b.trigger.month,b.trigger.week),C=`${y.id}-${b.id}-${d}`;S(A,C)}else if(b.trigger.type==="birthing_season_event"&&b.trigger.offsetDays!==void 0){const A=s.find(C=>C.events.some(D=>D.animal.id===y.id));if(A&&A.projectedStartDate){const C=new Date(A.projectedStartDate);C.setUTCDate(C.getUTCDate()+b.trigger.offsetDays);const D=C,j=`${y.id}-${b.id}-${A.seasonId}`;S(D,j)}}}}return p.sort((g,m)=>g.dueDate.getTime()-m.dueDate.getTime())},[t,e,n,r,i,s,a.diasAlertaAtraso]);return{...I.useMemo(()=>({overdue:o.filter(u=>u.status==="Atrasada"),today:o.filter(u=>u.status==="Para Hoy"),upcoming:o.filter(u=>u.status==="Próxima")}),[o]),allTasks:o}},mqe=({task:t,onSave:e,onCancel:n})=>{const{addHealthEvent:r,products:i,bodyWeighings:a,appConfig:s}=Kt(),[o,l]=I.useState(new Date().toISOString().split("T")[0]),[u,d]=I.useState(""),[f,p]=I.useState(null),[h,g]=I.useState(!1),{animal:m,activity:v}=t,y=m.name?String(m.name).toUpperCase().trim():"",b=I.useMemo(()=>i.find(j=>j.id===v.productId),[i,v.productId]),S=I.useMemo(()=>a.filter(j=>j.animalId===m.id).sort((j,N)=>new Date(N.date).getTime()-new Date(j.date).getTime())[0],[a,m.id]),{doseApplied:A,calculatedCost:C}=I.useMemo(()=>{if(!b||!S)return{doseApplied:void 0,calculatedCost:void 0};let j=0;if(b.dosageType==="fixed"&&b.dosageFixed?j=b.dosageFixed:b.dosageType==="per_kg"&&b.dosagePerKg_ml&&b.dosagePerKg_kg&&(j=S.kg/b.dosagePerKg_kg*b.dosagePerKg_ml),j===0)return{doseApplied:void 0,calculatedCost:void 0};let N=0;const P=b.presentationUnit==="L"?(b.presentationValue||0)*1e3:b.presentationValue||0;if(b.price&&P>0){const O=b.price/P;N=j*O}return{doseApplied:parseFloat(j.toFixed(2)),calculatedCost:parseFloat(N.toFixed(2))}},[b,S]),D=async j=>{j.preventDefault(),g(!0),p(null);const N=(b==null?void 0:b.withdrawalDaysMilk)??s.diasRetiroLecheDefault,P=(b==null?void 0:b.withdrawalDaysMeat)??s.diasRetiroCarneDefault;try{await r({animalId:m.id,lotName:m.location,date:o,activityId:v.id,type:v.name,productUsed:b==null?void 0:b.id,doseApplied:A,unit:"ml",calculatedCost:C,notes:u,executedBy:"self",diasRetiroLeche:N,diasRetiroCarne:P}),e()}catch(O){console.error(O),p("No se pudo registrar el evento. Inténtelo de nuevo.")}finally{g(!1)}};return c.jsxs("form",{onSubmit:D,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-zinc-400 text-sm",children:"Animal:"}),c.jsx("p",{className:"font-mono font-semibold text-lg text-white truncate",children:m.id.toUpperCase()}),y&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:y})]}),c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-semibold text-zinc-400 text-sm",children:"Actividad:"})," ",c.jsx("span",{className:"font-bold text-base text-white",children:v.name})]}),b&&c.jsxs("p",{children:[c.jsx("span",{className:"font-semibold text-zinc-400 text-sm",children:"Producto:"})," ",c.jsx("span",{className:"font-bold text-base text-white",children:b.name})]})]}),c.jsxs("div",{className:"p-4 bg-black/20 rounded-xl space-y-2",children:[c.jsx("h3",{className:"font-semibold text-white",children:"Detalles del Registro"}),S?c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-zinc-300",children:["Basado en el último peso registrado de ",c.jsxs("span",{className:"font-bold text-white",children:[S.kg," kg"]}),"."]}),A!==void 0&&c.jsxs("p",{className:"text-sm text-zinc-300",children:["Dosis Calculada: ",c.jsxs("span",{className:"font-bold text-teal-400",children:[A," ml"]})]}),C!==void 0&&c.jsxs("p",{className:"text-sm text-zinc-300",children:["Costo Estimado: ",c.jsxs("span",{className:"font-bold text-amber-400",children:["$",C.toFixed(2)]})]})]}):c.jsx("p",{className:"text-sm text-amber-400",children:"Advertencia: No se encontró un peso reciente para este animal. La dosis y el costo no se pueden calcular automáticamente."})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),c.jsx("input",{id:"date",type:"date",value:o,onChange:j=>l(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Notas (Opcional)"}),c.jsx("textarea",{id:"notes",value:u,onChange:j=>d(j.target.value),placeholder:"Anotaciones sobre la aplicación, etc.",rows:3,className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),f&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(dr,{size:18}),c.jsx("span",{children:f})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsxs("button",{type:"submit",disabled:h,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[h&&c.jsx(jc,{size:18,className:"animate-spin"}),h?"Guardando...":"Confirmar Registro"]})]})]})},gqe=({animals:t,selectedAnimalIds:e,onChange:n})=>{const r=i=>{const a=Array.from(i.target.selectedOptions,s=>s.value);n(a)};return c.jsx("select",{multiple:!0,value:e,onChange:r,className:"w-full h-40 bg-zinc-800 p-3 rounded-xl font-mono text-white",children:t.map(i=>{const a=i.name?String(i.name).toUpperCase().trim():"";return c.jsxs("option",{value:i.id,className:"py-1",children:[i.id.toUpperCase()," ",a&&` - ${a}`]},i.id)})})},vqe=({onSaveSuccess:t,onCancel:e})=>{const{addHealthEvent:n,products:r,animals:i,bodyWeighings:a}=Kt(),[s,o]=I.useState([]),[l,u]=I.useState(new Date().toISOString().split("T")[0]),[d,f]=I.useState(""),[p,h]=I.useState(void 0),[g,m]=I.useState(""),[v,y]=I.useState(null),[b,S]=I.useState(!1),A=I.useMemo(()=>r.find(j=>j.id===p),[r,p]),C=I.useMemo(()=>i.filter(j=>j.status==="Activo"&&!j.isReference).sort((j,N)=>j.id.localeCompare(N.id)),[i]),D=async j=>{if(j.preventDefault(),s.length===0||!d.trim()){y("Debe seleccionar al menos un animal y especificar el tipo de actividad.");return}S(!0),y(null);try{const N=s.map(P=>{const O=i.find(V=>V.id===P);if(!O)return null;const T=a.filter(V=>V.animalId===P).sort((V,K)=>new Date(K.date).getTime()-new Date(V.date).getTime())[0];let M,L;if(A&&T){let V=0;if(A.dosageType==="fixed"&&A.dosageFixed?V=A.dosageFixed:A.dosageType==="per_kg"&&A.dosagePerKg_ml&&A.dosagePerKg_kg&&(V=T.kg/A.dosagePerKg_kg*A.dosagePerKg_ml),V>0){M=parseFloat(V.toFixed(2));const K=A.presentationUnit==="L"?(A.presentationValue||0)*1e3:A.presentationValue||0;if(A.price&&K>0){const Z=A.price/K;L=parseFloat((V*Z).toFixed(2))}}}return{animalId:P,lotName:O.location,date:l,type:d,productUsed:p,doseApplied:M,unit:"ml",calculatedCost:L,notes:g,executedBy:"self"}});for(const P of N)P&&await n(P);t()}catch(N){console.error(N),y("No se pudo registrar el evento. Inténtelo de nuevo.")}finally{S(!1)}};return c.jsxs("form",{onSubmit:D,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Animal(es) (mantén Ctrl/Cmd para seleccionar varios)"}),c.jsx(gqe,{animals:C,selectedAnimalIds:s,onChange:o}),c.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:[s.length," animal(es) seleccionado(s)."]})]}),c.jsx("input",{type:"text",value:d,onChange:j=>f(j.target.value),placeholder:"Tipo de Actividad (Ej: Tratamiento por Neumonía)",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),c.jsxs("select",{value:p||"",onChange:j=>h(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[c.jsx("option",{value:"",children:"Seleccionar Producto (Opcional)..."}),r.map(j=>c.jsx("option",{value:j.id,children:j.name},j.id))]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"unplanned-date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),c.jsx("input",{id:"unplanned-date",type:"date",value:l,onChange:j=>u(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),c.jsx("textarea",{value:g,onChange:j=>m(j.target.value),placeholder:"Notas (Opcional)",rows:3,className:"w-full bg-zinc-800 p-3 rounded-xl"}),v&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(dr,{size:18}),c.jsx("span",{children:v})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsxs("button",{type:"submit",disabled:b,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[b&&c.jsx(jc,{size:18,className:"animate-spin"}),b?"Guardando...":"Registrar Evento"]})]})]})},yqe=t=>{const{task:e}=t.event.extendedProps;if(!e)return c.jsx("div",{children:"Evento inválido"});const{animal:n,activity:r}=e,i=n.name?String(n.name).toUpperCase().trim():"";return c.jsxs("div",{className:"p-1 overflow-hidden w-full",style:{whiteSpace:"normal"},children:[c.jsx("p",{className:"font-mono font-semibold text-xs text-white truncate",children:n.id.toUpperCase()}),i&&c.jsx("p",{className:"text-[10px] font-normal text-zinc-300 truncate",children:i}),c.jsx("p",{className:"text-[10px] text-zinc-400 truncate",children:r.name})]})};function Kz(){const{allTasks:t}=pqe(),[e,n]=I.useState(null),[r,i]=I.useState(!1),a=I.useRef(null),[s,o]=I.useState("dayGridMonth"),[l,u]=I.useState(""),d=I.useMemo(()=>t.map(m=>({id:m.key,title:`${m.animal.id} - ${m.activity.name}`,start:m.dueDate,allDay:!0,extendedProps:{task:m},backgroundColor:m.status==="Atrasada"?"#FF3B30":m.status==="Para Hoy"?"#34C759":"#007AFF",borderColor:m.status==="Atrasada"?"#FF3B30":m.status==="Para Hoy"?"#34C759":"#007AFF"})),[t]),f=m=>{n(m.event.extendedProps.task)},p=()=>{n(null),i(!1)},h=m=>{var v;(v=a.current)==null||v.getApi().changeView(m),o(m)},g=m=>{u(m.view.title)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full h-full max-w-4xl mx-auto p-4 flex flex-col",children:[c.jsxs("header",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold tracking-tight text-white leading-tight",children:"Calendario Sanitario"}),c.jsx("p",{className:"text-base sm:text-lg text-zinc-400",children:"Vista completa de actividades"})]}),c.jsxs("button",{onClick:()=>i(!0),className:"flex-shrink-0 flex items-center justify-center gap-2 bg-brand-blue text-white font-semibold py-2 px-4 rounded-lg transition-colors text-sm w-full sm:w-auto",children:[c.jsx(Ki,{size:16})," Registrar Actividad"]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-4 gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>{var m;return(m=a.current)==null?void 0:m.getApi().prev()},className:"p-2 bg-zinc-700 rounded-md hover:bg-zinc-600",children:c.jsx(ji,{size:16})}),c.jsx("button",{onClick:()=>{var m;return(m=a.current)==null?void 0:m.getApi().next()},className:"p-2 bg-zinc-700 rounded-md hover:bg-zinc-600",children:c.jsx(qi,{size:16})}),c.jsx("h2",{className:"text-xl font-semibold text-white capitalize w-40 text-center",children:l})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>{var m;return(m=a.current)==null?void 0:m.getApi().today()},className:"px-4 py-1.5 bg-zinc-700 rounded-md hover:bg-zinc-600 text-sm font-semibold",children:"Hoy"}),c.jsxs("div",{className:"relative flex justify-between rounded-lg bg-zinc-700 p-1 text-sm font-semibold",children:[c.jsx("button",{onClick:()=>h("dayGridMonth"),className:"relative z-10 w-20 py-1 rounded-md",children:"Mes"}),c.jsx("button",{onClick:()=>h("dayGridWeek"),className:"relative z-10 w-20 py-1 rounded-md",children:"Semana"}),c.jsx(Wi.div,{layoutId:"calendar-view-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-20 rounded-md bg-zinc-500 ${s==="dayGridWeek"?"left-[calc(50%_-_2px)]":"left-1"}`})]})]})]}),c.jsx("div",{className:"flex-grow",children:c.jsx(ZD,{ref:a,plugins:[RZ,fqe],initialView:s,locale:LZ,events:d,eventClick:f,height:"100%",headerToolbar:!1,datesSet:g,eventContent:yqe})})]}),e&&c.jsx(sn,{isOpen:!!e,onClose:()=>n(null),title:`Registrar: ${e.activity.name}`,children:c.jsx(mqe,{task:e,onSave:p,onCancel:()=>n(null)})}),c.jsx(sn,{isOpen:r,onClose:()=>i(!1),title:"Registrar Actividad No Planificada",children:c.jsx(vqe,{onSaveSuccess:p,onCancel:()=>i(!1)})})]})}const rj=({legend:t,children:e})=>c.jsxs("fieldset",{className:"bg-black/20 rounded-2xl p-4 border border-zinc-700 space-y-4",children:[c.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-400",children:t}),e]}),bqe=["Coxidioestático","Desparasitación","Vacuna Clostridial"],xqe=["Desparasitación","Vacuna Leptospirosis","Vacuna Clostridial","Vacuna Rabia"],wqe=["Cura de ombligo","Revisión de Mucosas (FAMACHA)","Descorne","Castración"],Sqe=["Revisión de Mucosas (FAMACHA)","Recorte de Pezuñas","Toma de muestra de Hematología y Coprología"],_qe=[1,8,15,21,30,45,60,90,120],Aqe=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],Cqe=[{value:1,label:"1ra Semana"},{value:2,label:"2da Semana"},{value:3,label:"3ra Semana"},{value:4,label:"4ta Semana"}],jqe=({healthPlanId:t,targetGroup:e,onSave:n,onCancel:r,existingActivity:i})=>{const{products:a,addProduct:s}=Kt(),[o,l]=I.useState("Tratamiento"),[u,d]=I.useState(""),[f,p]=I.useState(void 0),[h,g]=I.useState(void 0),[m,v]=I.useState(e==="Maternidad"?"age":"fixed_date_period"),[y,b]=I.useState(""),[S,A]=I.useState("1"),[C,D]=I.useState("1"),[j,N]=I.useState(""),[P,O]=I.useState(!1),[T,M]=I.useState(null),L=e==="Maternidad"?o==="Tratamiento"?bqe:wqe:o==="Tratamiento"?xqe:Sqe;I.useEffect(()=>{var Z;i&&(l(i.category),d(i.name),p(i.productId),g(i.complementaryProductId),v(i.trigger.type),i.trigger.type==="age"&&b(String(((Z=i.trigger.days)==null?void 0:Z[0])||"")),i.trigger.type==="fixed_date_period"&&(A(String(i.trigger.month||"1")),D(String(i.trigger.week||"1"))),i.trigger.type==="birthing_season_event"&&N(String(i.trigger.offsetDays||"")))},[i]);const V=async Z=>{await s(Z),O(!1)},K=async Z=>{if(Z.preventDefault(),M(null),!u.trim()){M("El nombre es obligatorio.");return}if(o==="Tratamiento"&&!f){M("Debe seleccionar un producto principal.");return}let Y;if(e==="Maternidad"){const ee=parseInt(y,10);if(isNaN(ee)||ee<0){M("Los días de nacido deben ser un número válido.");return}Y={type:"age",days:[ee]}}else if(m==="fixed_date_period")Y={type:"fixed_date_period",month:parseInt(S,10),week:parseInt(C,10)};else{const ee=parseInt(j,10);if(isNaN(ee)){M("Debe introducir un número válido de días.");return}Y={type:"birthing_season_event",offsetDays:ee}}await n({healthPlanId:t,category:o,name:u,productId:f,complementaryProductId:h,trigger:Y})};return c.jsxs(c.Fragment,{children:[c.jsxs("form",{onSubmit:K,className:"space-y-6",children:[c.jsxs(rj,{legend:"Paso 1: Define la Actividad",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("button",{type:"button",onClick:()=>l("Tratamiento"),className:`p-4 rounded-2xl border-2 transition-colors flex flex-col items-center gap-2 ${o==="Tratamiento"?"bg-blue-500/20 border-blue-500":"bg-zinc-800/50 border-zinc-700 hover:border-zinc-500"}`,children:[c.jsx(hp,{className:"w-8 h-8 text-blue-400"}),c.jsx("span",{className:"font-semibold text-white",children:"Tratamiento"})]}),c.jsxs("button",{type:"button",onClick:()=>l("Control"),className:`p-4 rounded-2xl border-2 transition-colors flex flex-col items-center gap-2 ${o==="Control"?"bg-purple-500/20 border-purple-500":"bg-zinc-800/50 border-zinc-700 hover:border-zinc-500"}`,children:[c.jsx(MW,{className:"w-8 h-8 text-purple-400"}),c.jsx("span",{className:"font-semibold text-white",children:"Control"})]})]}),c.jsx("input",{list:"activity-names",value:u,onChange:Z=>d(Z.target.value),placeholder:`Nombre del ${o}...`,className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),c.jsx("datalist",{id:"activity-names",children:L.map(Z=>c.jsx("option",{value:Z},Z))})]}),o==="Tratamiento"&&c.jsxs(rj,{legend:"Paso 2: Selecciona los Productos",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:f||"",onChange:Z=>p(Z.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:[c.jsx("option",{value:"",children:"Producto Principal..."}),a.map(Z=>c.jsx("option",{value:Z.id,children:Z.name},Z.id))]}),c.jsx("button",{type:"button",onClick:()=>O(!0),className:"flex-shrink-0 p-3 bg-brand-orange text-white rounded-xl",children:c.jsx(ol,{size:20})})]}),c.jsxs("select",{value:h||"",onChange:Z=>g(Z.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[c.jsx("option",{value:"",children:"Producto Complementario (Opcional)..."}),a.map(Z=>c.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),c.jsx(rj,{legend:`Paso ${o==="Tratamiento"?"3":"2"}: ¿Cuándo se ejecuta?`,children:e==="Maternidad"?c.jsxs("div",{className:"animate-fade-in",children:[c.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"A los Días de Nacido"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:_qe.map(Z=>c.jsxs("button",{type:"button",onClick:()=>b(String(Z)),className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors ${y===String(Z)?"bg-teal-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:[Z," días"]},Z))}),c.jsx("div",{className:"flex items-center gap-2 mt-4",children:c.jsx("input",{type:"number",value:y,onChange:Z=>b(Z.target.value),placeholder:"O escribe los días...",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("select",{value:m,onChange:Z=>v(Z.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:[c.jsx("option",{value:"fixed_date_period",children:"Por Fecha Fija Anual"}),c.jsx("option",{value:"birthing_season_event",children:"Relativo a Temporada de Partos"})]}),m==="fixed_date_period"&&c.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-fade-in",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"triggerMonth",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Mes"}),c.jsx("select",{id:"triggerMonth",value:S,onChange:Z=>A(Z.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:Aqe.map(Z=>c.jsx("option",{value:Z.value,children:Z.label},Z.value))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"triggerWeek",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Semana"}),c.jsx("select",{id:"triggerWeek",value:C,onChange:Z=>D(Z.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:Cqe.map(Z=>c.jsx("option",{value:Z.value,children:Z.label},Z.value))})]})]}),m==="birthing_season_event"&&c.jsxs("div",{className:"animate-fade-in",children:[c.jsx("label",{htmlFor:"triggerOffsetDays",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Días antes (-) / después (+) del inicio de la temporada"}),c.jsx("input",{id:"triggerOffsetDays",type:"number",value:j,onChange:Z=>N(Z.target.value),placeholder:"Ej: -30 (para 30 días antes)",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})]})]})}),T&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(dr,{size:18})," ",c.jsx("span",{children:T})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:i?"Actualizar Actividad":"Añadir al Plan"})]})]}),c.jsx(sn,{isOpen:P,onClose:()=>O(!1),title:"Crear Nuevo Producto",children:c.jsx(jD,{onSave:V,onCancel:()=>O(!1)})})]})},Eqe=({activity:t,onEdit:e,onDelete:n})=>{const{products:r}=Kt(),i=r.find(d=>d.id===t.productId),a=r.find(d=>d.id===t.complementaryProductId),s=gp(),o=I.useRef(!1),l=(d,f)=>{const p=f.offset.x,h=f.velocity.x;p<-160/2||h<-500?s.start({x:-160}):s.start({x:0}),setTimeout(()=>{o.current=!1},100)},u=()=>{var f;const{trigger:d}=t;switch(d.type){case"age":return`Días: ${((f=d.days)==null?void 0:f.join(", "))||"N/A"}`;case"fixed_date_period":const p=new Date(2024,d.month-1,1).toLocaleString("es-VE",{month:"long"});return`${d.week}a semana de ${p}`;case"birthing_season_event":const h=d.offsetDays>=0?"días después":"días antes";return`${Math.abs(d.offsetDays)} ${h} del inicio de la temporada de partos`;default:return"Tiempo no especificado"}};return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-black/20 border border-zinc-700",children:[c.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[c.jsxs("button",{onClick:e,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(Of,{size:20}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),c.jsxs("button",{onClick:n,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[c.jsx(Gl,{size:20}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),c.jsxs(Wi.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{o.current=!0},onDragEnd:l,animate:s,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-grab bg-ios-modal-bg/50 p-4",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),c.jsx("p",{className:`text-sm font-semibold ${t.category==="Tratamiento"?"text-blue-400":"text-purple-400"}`,children:t.category}),i&&c.jsxs("p",{className:"text-xs text-zinc-400 mt-1",children:["Ppal: ",i.name]}),a&&c.jsxs("p",{className:"text-xs text-zinc-400",children:["Comp: ",a.name]})]}),t.category==="Tratamiento"?c.jsx(hp,{className:"text-blue-400"}):c.jsx(MW,{className:"text-purple-400"})]}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700 flex items-center text-zinc-300",children:[c.jsx(so,{size:16,className:"mr-2"}),c.jsx("span",{className:"text-sm font-semibold",children:u()})]})]})]})};function Nqe({planId:t,onBack:e}){const{healthPlans:n,planActivities:r,addPlanActivity:i,updatePlanActivity:a,deletePlanActivity:s}=Kt(),[o,l]=I.useState(!1),[u,d]=I.useState(void 0),[f,p]=I.useState(null),h=I.useMemo(()=>n.find(S=>S.id===t),[n,t]),g=I.useMemo(()=>h?r.filter(S=>S.healthPlanId===t).sort((S,A)=>{var C,D;return(((C=S.trigger.days)==null?void 0:C[0])||0)-(((D=A.trigger.days)==null?void 0:D[0])||0)}):[],[r,t,h]),m=S=>{d(S),l(!0)},v=()=>{l(!1),d(void 0)},y=async S=>{u!=null&&u.id?await a(u.id,S):await i({...S,healthPlanId:t}),v()},b=async()=>{f!=null&&f.id&&await s(f.id),p(null)};return h?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in px-4",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:h.name}),c.jsx("p",{className:"text-lg text-zinc-400",children:h.targetGroup})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Actividades del Plan"}),c.jsxs("button",{onClick:()=>m(),className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[c.jsx(Ki,{size:16})," Añadir Actividad"]})]}),g.length>0?c.jsx("div",{className:"space-y-3",children:g.map(S=>c.jsx(Eqe,{activity:S,onEdit:()=>m(S),onDelete:()=>p(S)},S.id))}):c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:[c.jsx("p",{className:"text-zinc-500 font-semibold",children:"Este plan aún no tiene actividades."}),c.jsx("p",{className:"text-zinc-500 text-sm",children:"Añade tratamientos o controles para empezar."})]})]})]}),c.jsx(sn,{isOpen:o,onClose:v,title:u?"Editar Actividad":"Añadir Actividad al Plan",children:c.jsx(jqe,{healthPlanId:h.id,targetGroup:h.targetGroup,onSave:y,onCancel:v,existingActivity:u})}),c.jsx(yv,{isOpen:!!f,onClose:()=>p(null),onConfirm:b,title:`Eliminar Actividad "${f==null?void 0:f.name}"`,message:"¿Estás seguro de que quieres eliminar esta actividad del plan? Esta acción no se puede deshacer."})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Plan no encontrado."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-amber",children:"Volver al Planificador"})]})}const Pqe=()=>{const{healthEvents:t,products:e,animals:n}=Kt();return I.useMemo(()=>{const i=new Date;i.setDate(i.getDate()-30),i.setHours(0,0,0,0);const s=t.filter(v=>new Date(v.date)>=i).reduce((v,y)=>v+(y.calculatedCost||0),0),o=n.filter(v=>v.status==="Activo").length,l=o>0?s/o:0,u=[],d={},f=new Date;f.setMonth(f.getMonth()-6),t.filter(v=>new Date(v.date)>=f).forEach(v=>{const y=v.date.substring(0,7);d[y]||(d[y]=0),d[y]+=v.calculatedCost||0}),Object.keys(d).sort().forEach(v=>{u.push({name:v,total:parseFloat(d[v].toFixed(2))})});const p={};t.forEach(v=>{const y=v.type||"Sin Categoría";p[y]||(p[y]=0),p[y]+=v.calculatedCost||0});const h=Object.keys(p).map(v=>({name:v,total:parseFloat(p[v].toFixed(2))})).sort((v,y)=>y.total-v.total),g={};t.forEach(v=>{g[v.animalId]||(g[v.animalId]=0),g[v.animalId]+=v.calculatedCost||0});const m=Object.keys(g).map(v=>({animalId:v,total:g[v]})).sort((v,y)=>y.total-v.total).slice(0,5);return{totalCostLast30Days:s,avgCostPerAnimal:l,monthlyCosts:u,costsByCategory:h,topCostAnimals:m}},[t,e,n])},Gz=({title:t,value:e,unit:n,icon:r})=>c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(r,{size:14}),c.jsx("span",{children:t})]}),c.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[e," ",c.jsx("span",{className:"text-xl text-zinc-400",children:n})]})]}),Yz=["#34C759","#FF9500","#007AFF","#AF52DE","#FF3B30","#5E5CE6","#5AC8FA","#FFCC00"];function kqe(){const{totalCostLast30Days:t,avgCostPerAnimal:e,monthlyCosts:n,costsByCategory:r,topCostAnimals:i}=Pqe(),a=s=>new Date(s+"-02T00:00:00Z").toLocaleString("es-VE",{month:"short",year:"2-digit"});return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[" ",c.jsxs("header",{className:"text-center pt-4",children:[" ",c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de Costos"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Módulo StockCare"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(Gz,{title:"Costo (Últimos 30 días)",value:`$${t.toFixed(2)}`,icon:No}),c.jsx(Gz,{title:"Costo Prom./Animal (30d)",value:`$${e.toFixed(2)}`,icon:ms})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[c.jsx(Ib,{size:20})," Costo Mensual (Últimos 6m)"]}),c.jsx("div",{className:"w-full h-56",children:c.jsx(ki,{children:c.jsxs(Po,{data:n,margin:{top:5,right:10,left:-20,bottom:5},children:[c.jsx(ii,{dataKey:"name",tickFormatter:a,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(ni,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},unit:"$"}),c.jsx(xr,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"},formatter:s=>`$${s.toFixed(2)}`}),c.jsx(Ti,{dataKey:"total",name:"Costo Total",fill:"#2dd4bf",radius:[4,4,0,0]})]})})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[c.jsx(Vce,{size:20})," Costos por Categoría"]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ki,{children:c.jsxs(WP,{children:[c.jsx(Ec,{data:r,dataKey:"total",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,fill:"#8884d8",children:r.map((s,o)=>c.jsx(hl,{fill:Yz[o%Yz.length]},`cell-${o}`))}),c.jsx(xr,{contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"},formatter:s=>`$${s.toFixed(2)}`}),c.jsx(Bl,{iconSize:10,wrapperStyle:{fontSize:"12px",color:"#a1a1aa"}})]})})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top 5 Animales (Costo Total)"}),c.jsx("div",{className:"space-y-2",children:i.length>0?i.map((s,o)=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-black/20 p-2 rounded-md",children:[c.jsxs("span",{className:"font-mono font-semibold text-base text-white",children:[o+1,". ",s.animalId]}),c.jsxs("span",{className:"font-bold text-teal-300",children:["$",s.total.toFixed(2)]})]},s.animalId)):c.jsx("p",{className:"text-sm text-zinc-500 text-center pt-8",children:"No hay datos suficientes."})})]})]})]})}function Tqe({onSwitchModule:t}){const{syncStatus:e}=Kt(),[n,r]=I.useState({name:"calendario"}),[i,a]=I.useState([]),s=[{id:"calendario",label:"Calendario",icon:Sce},{id:"planes",label:"Planes",icon:sT},{id:"inventario",label:"Inventario",icon:hp},{id:"costos",label:"Costos",icon:No}],o=f=>{a(p=>[...p,n]),r(f)},l=()=>{const f=i.pop();f?(a([...i]),r(f)):t("rebano")},u=f=>{a([]),r({name:f})},d=()=>{switch(n.name){case"calendario":return c.jsx(Kz,{});case"planes":return c.jsx(WHe,{navigateTo:o});case"inventario":return c.jsx(Z$e,{});case"costos":return c.jsx(kqe,{});case"plan-detail":return c.jsx(Nqe,{planId:n.planId,onBack:l});default:return c.jsx(Kz,{})}};return c.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col bg-brand-dark",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-brand-dark/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsx("button",{onClick:l,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(mS,{className:"text-teal-400"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),c.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"StockCare"})]})]}),c.jsx("div",{className:"w-8 flex justify-end",children:c.jsx(bv,{status:e})})]})}),c.jsx("main",{className:"flex-grow pt-16 pb-24",children:d()}),c.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around z-20",children:s.map(f=>c.jsxs("button",{onClick:()=>u(f.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${n.name===f.id?"text-teal-400":"text-gray-400 hover:text-teal-400"}`,children:[c.jsx(f.icon,{className:"w-6 h-6 mb-1"}),c.jsx("span",{className:"text-xs font-semibold",children:f.label})]},f.id))})]})}const Xz=.5,Dqe=()=>{const{animals:t,healthEvents:e,weighings:n,parturitions:r}=Kt();return I.useMemo(()=>{const o=[...t.filter(h=>h.status==="Activo"&&h.sex==="Hembra").map(h=>{const g=e.filter(D=>D.animalId===h.id).reduce((D,j)=>D+(j.calculatedCost||0),0),m=n.filter(D=>D.goatId===h.id),v=m.reduce((D,j)=>D+j.kg,0),y=v*Xz;let b=null,S=0;const A=r.filter(D=>D.goatId===h.id);v>0&&A.length>0&&(S=A.reduce((j,N)=>{const P=m.filter(L=>new Date(L.date)>=new Date(N.parturitionDate));if(P.length===0)return j;const O=new Date(N.parturitionDate),M=(new Date(P.sort((L,V)=>new Date(V.date).getTime()-new Date(L.date).getTime())[0].date).getTime()-O.getTime())/(1e3*60*60*24);return j+M},0),b=g/v);const C=y-g;return{animalId:h.id,totalRevenue:y,totalCosts:g,netProfit:C,costPerLiter:b,totalKgProduced:v,lactationDays:S}})].sort((h,g)=>g.netProfit-h.netProfit),l=o.reduce((h,g)=>h+g.totalRevenue,0),u=o.reduce((h,g)=>h+g.totalCosts,0),d=l-u,f=o.filter(h=>h.costPerLiter!==null&&h.costPerLiter>0).map(h=>h.costPerLiter),p=f.length>0?f.reduce((h,g)=>h+g,0)/f.length:0;return{animalsByProfitability:o,totalFarmRevenue:l,totalFarmCosts:u,totalFarmNetProfit:d,averageCostPerLiter:p,assumedMilkPrice:Xz}},[t,e,n,r])},v1=({title:t,value:e,unit:n,preValue:r,icon:i,colorClass:a})=>c.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border ${a||""}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(i,{size:14}),c.jsx("span",{children:t})]}),c.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[r&&c.jsx("span",{className:"text-3xl font-bold text-white",children:r}),e,n&&c.jsxs("span",{className:"text-xl text-zinc-400",children:[" ",n]})]})]}),Qz=({animalData:t,monedaSimbolo:e})=>{const n=t.netProfit>=0;return c.jsxs("div",{className:"w-full text-left bg-black/20 rounded-xl p-4 border border-zinc-700/80 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-xl text-white",children:t.animalId}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-zinc-400 mt-1",children:[c.jsxs("span",{children:["Ingresos: ",e,t.totalRevenue.toFixed(2)]}),c.jsxs("span",{children:["Costos: ",e,t.totalCosts.toFixed(2)]})]})]}),c.jsxs("div",{className:`text-right font-bold text-2xl ${n?"text-brand-green":"text-brand-red"}`,children:[n?"+":"",e,t.netProfit.toFixed(2)]})]})},Iqe=({active:t,payload:e,monedaSimbolo:n})=>t&&e&&e.length?c.jsxs("div",{className:"bg-black/60 backdrop-blur-md p-2 rounded-lg border border-zinc-700 text-white text-sm",children:[c.jsx("p",{className:"font-bold",children:e[0].payload.animalId}),c.jsxs("p",{style:{color:e[0].fill},children:["Rentabilidad: ",n,e[0].value.toFixed(2)]})]}):null;function Oqe(){const{appConfig:t}=Kt(),{monedaSimbolo:e,precioLecheLitro:n}=t,{animalsByProfitability:r,totalFarmRevenue:i,totalFarmCosts:a,totalFarmNetProfit:s,averageCostPerLiter:o}=Dqe(),l=r.slice(0,5),u=r.slice(-5).reverse();return r.length===0?c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4 flex flex-col items-center gap-4",children:[c.jsx(No,{size:48,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-400 font-semibold text-lg",children:"No hay datos suficientes"}),c.jsx("p",{className:"text-zinc-500 text-sm max-w-xs",children:"Registra pesajes lecheros y eventos de salud con costos para empezar a ver el análisis económico."})]}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis Económico"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Rentabilidad de la Finca"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(v1,{title:"Ingresos Totales (Leche)",preValue:e,value:i.toFixed(2),icon:og,colorClass:"border-green-500/30"}),c.jsx(v1,{title:"Costos Totales (Sanidad)",preValue:e,value:a.toFixed(2),icon:sg,colorClass:"border-red-500/30"})]}),c.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border ${s>=0?"border-green-500/50":"border-red-500/50"}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(No,{size:14}),c.jsx("span",{children:"Rentabilidad Neta (Ingresos - Costos)"})]}),c.jsxs("p",{className:`text-5xl font-bold mt-1 ${s>=0?"text-brand-green":"text-brand-red"}`,children:[s>=0?"+":"",e,s.toFixed(2)]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(v1,{title:"Costo / Litro de Leche",preValue:e,value:o.toFixed(3),icon:wf}),c.jsx(v1,{title:"Precio Leche (Config)",preValue:e,value:n.toFixed(2),unit:"/Kg",icon:ms})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[c.jsx(bce,{size:20})," Distribución de Rentabilidad"]}),c.jsx("div",{className:"w-full h-56",children:c.jsx(ki,{children:c.jsxs(Po,{data:r,margin:{top:5,right:0,left:0,bottom:5},children:[c.jsx(ii,{dataKey:"animalId",tick:!1,axisLine:!1}),c.jsx(xr,{content:c.jsx(Iqe,{monedaSimbolo:e}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),c.jsx(Ti,{dataKey:"netProfit",children:r.map(d=>c.jsx(hl,{fill:d.netProfit>=0?"#34C759":"#FF3B30"},d.animalId))})]})})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-zinc-300",children:"Ranking de Rentabilidad"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"font-semibold text-brand-green flex items-center gap-2",children:[c.jsx(og,{size:18})," Top 5 Animales Más Rentables"]}),l.map(d=>c.jsx(Qz,{animalData:d,monedaSimbolo:e},d.animalId))]}),c.jsxs("div",{className:"space-y-2 pt-4",children:[c.jsxs("h4",{className:"font-semibold text-brand-red flex items-center gap-2",children:[c.jsx(sg,{size:18})," Top 5 Animales Menos Rentables"]}),u.map(d=>c.jsx(Qz,{animalData:d,monedaSimbolo:e},d.animalId))]})]})]})}function Mqe({onSwitchModule:t}){const{syncStatus:e}=Kt();return c.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsx("button",{onClick:()=>t("rebano"),className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Salir del módulo",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(No,{className:"text-yellow-400"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),c.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Cents"})]})]}),c.jsx("div",{className:"w-8 flex justify-end",children:c.jsx(bv,{status:e})})]})}),c.jsx("main",{className:"flex-grow pt-16 pb-24",children:c.jsx(Oqe,{})}),c.jsx(Zb,{onSwitchModule:t})]})}const Rqe="modulepreload",Lqe=function(t,e){return new URL(t,e).href},Zz={},ij=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=Lqe(u,r),u in Zz)return;Zz[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!r)for(let g=s.length-1;g>=0;g--){const m=s[g];if(m.href===u&&(!d||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Rqe,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((g,m)=>{h.addEventListener("load",g),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Rr(t){"@babel/helpers - typeof";return Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(t)}var Tc=Uint8Array,il=Uint16Array,JD=Int32Array,eI=new Tc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tI=new Tc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Jz=new Tc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),UZ=function(t,e){for(var n=new il(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new JD(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},WZ=UZ(eI,2),Fqe=WZ.b,lk=WZ.r;Fqe[28]=258,lk[258]=28;var zqe=UZ(tI,0),e$=zqe.r,ck=new il(32768);for(var yi=0;yi<32768;++yi){var Od=(yi&43690)>>1|(yi&21845)<<1;Od=(Od&52428)>>2|(Od&13107)<<2,Od=(Od&61680)>>4|(Od&3855)<<4,ck[yi]=((Od&65280)>>8|(Od&255)<<8)>>1}var q0=function(t,e,n){for(var r=t.length,i=0,a=new il(e);i<r;++i)t[i]&&++a[t[i]-1];var s=new il(e);for(i=1;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(n){o=new il(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],d=e-t[i],f=s[t[i]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)o[ck[f]>>l]=u}else for(o=new il(r),i=0;i<r;++i)t[i]&&(o[i]=ck[s[t[i]-1]++]>>15-t[i]);return o},ap=new Tc(288);for(var yi=0;yi<144;++yi)ap[yi]=8;for(var yi=144;yi<256;++yi)ap[yi]=9;for(var yi=256;yi<280;++yi)ap[yi]=7;for(var yi=280;yi<288;++yi)ap[yi]=8;var E5=new Tc(32);for(var yi=0;yi<32;++yi)E5[yi]=5;var $qe=q0(ap,9,0),Bqe=q0(E5,5,0),HZ=function(t){return(t+7)/8|0},Vqe=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Tc(t.subarray(e,n))},Iu=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Yv=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},aj=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,a=n.slice();if(!i)return{t:KZ,l:0};if(i==1){var s=new Tc(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(C,D){return C.f-D.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],u=0,d=1,f=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=i-1;)o=n[n[u].f<n[f].f?u++:f++],l=n[u!=d&&n[u].f<n[f].f?u++:f++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=a[0].s,r=1;r<i;++r)a[r].s>p&&(p=a[r].s);var h=new il(p+1),g=uk(n[d-1],h,0);if(g>e){var r=0,m=0,v=g-e,y=1<<v;for(a.sort(function(D,j){return h[j.s]-h[D.s]||D.f-j.f});r<i;++r){var b=a[r].s;if(h[b]>e)m+=y-(1<<g-h[b]),h[b]=e;else break}for(m>>=v;m>0;){var S=a[r].s;h[S]<e?m-=1<<e-h[S]++-1:++r}for(;r>=0&&m;--r){var A=a[r].s;h[A]==e&&(--h[A],++m)}g=e}return{t:new Tc(h),l:g}},uk=function(t,e,n){return t.s==-1?Math.max(uk(t.l,e,n+1),uk(t.r,e,n+1)):e[t.s]=n},t$=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new il(++e),r=0,i=t[0],a=1,s=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=t[o]}return{c:n.subarray(0,r),n:e}},Xv=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},qZ=function(t,e,n){var r=n.length,i=HZ(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<r;++a)t[i+a+4]=n[a];return(i+4+r)*8},n$=function(t,e,n,r,i,a,s,o,l,u,d){Iu(e,d++,n),++i[256];for(var f=aj(i,15),p=f.t,h=f.l,g=aj(a,15),m=g.t,v=g.l,y=t$(p),b=y.c,S=y.n,A=t$(m),C=A.c,D=A.n,j=new il(19),N=0;N<b.length;++N)++j[b[N]&31];for(var N=0;N<C.length;++N)++j[C[N]&31];for(var P=aj(j,7),O=P.t,T=P.l,M=19;M>4&&!O[Jz[M-1]];--M);var L=u+5<<3,V=Xv(i,ap)+Xv(a,E5)+s,K=Xv(i,p)+Xv(a,m)+s+14+3*M+Xv(j,O)+2*j[16]+3*j[17]+7*j[18];if(l>=0&&L<=V&&L<=K)return qZ(e,d,t.subarray(l,l+u));var Z,Y,H,ee;if(Iu(e,d,1+(K<V)),d+=2,K<V){Z=q0(p,h,0),Y=p,H=q0(m,v,0),ee=m;var le=q0(O,T,0);Iu(e,d,S-257),Iu(e,d+5,D-1),Iu(e,d+10,M-4),d+=14;for(var N=0;N<M;++N)Iu(e,d+3*N,O[Jz[N]]);d+=3*M;for(var se=[b,C],$=0;$<2;++$)for(var X=se[$],N=0;N<X.length;++N){var te=X[N]&31;Iu(e,d,le[te]),d+=O[te],te>15&&(Iu(e,d,X[N]>>5&127),d+=X[N]>>12)}}else Z=$qe,Y=ap,H=Bqe,ee=E5;for(var N=0;N<o;++N){var oe=r[N];if(oe>255){var te=oe>>18&31;Yv(e,d,Z[te+257]),d+=Y[te+257],te>7&&(Iu(e,d,oe>>23&31),d+=eI[te]);var me=oe&31;Yv(e,d,H[me]),d+=ee[me],me>3&&(Yv(e,d,oe>>5&8191),d+=tI[me])}else Yv(e,d,Z[oe]),d+=Y[oe]}return Yv(e,d,Z[256]),d+Y[256]},Uqe=new JD([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),KZ=new Tc(0),Wqe=function(t,e,n,r,i,a){var s=a.z||t.length,o=new Tc(r+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(r,o.length-i),u=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var f=Uqe[e-1],p=f>>13,h=f&8191,g=(1<<n)-1,m=a.p||new il(32768),v=a.h||new il(g+1),y=Math.ceil(n/3),b=2*y,S=function(Fe){return(t[Fe]^t[Fe+1]<<y^t[Fe+2]<<b)&g},A=new JD(25e3),C=new il(288),D=new il(32),j=0,N=0,P=a.i||0,O=0,T=a.w||0,M=0;P+2<s;++P){var L=S(P),V=P&32767,K=v[L];if(m[V]=K,v[L]=V,T<=P){var Z=s-P;if((j>7e3||O>24576)&&(Z>423||!u)){d=n$(t,l,0,A,C,D,N,O,M,P-M,d),O=j=N=0,M=P;for(var Y=0;Y<286;++Y)C[Y]=0;for(var Y=0;Y<30;++Y)D[Y]=0}var H=2,ee=0,le=h,se=V-K&32767;if(Z>2&&L==S(P-se))for(var $=Math.min(p,Z)-1,X=Math.min(32767,P),te=Math.min(258,Z);se<=X&&--le&&V!=K;){if(t[P+H]==t[P+H-se]){for(var oe=0;oe<te&&t[P+oe]==t[P+oe-se];++oe);if(oe>H){if(H=oe,ee=se,oe>$)break;for(var me=Math.min(se,oe-2),_e=0,Y=0;Y<me;++Y){var Ce=P-se+Y&32767,fe=m[Ce],xe=Ce-fe&32767;xe>_e&&(_e=xe,K=Ce)}}}V=K,K=m[V],se+=V-K&32767}if(ee){A[O++]=268435456|lk[H]<<18|e$[ee];var Se=lk[H]&31,ie=e$[ee]&31;N+=eI[Se]+tI[ie],++C[257+Se],++D[ie],T=P+H,++j}else A[O++]=t[P],++C[t[P]]}}for(P=Math.max(P,T);P<s;++P)A[O++]=t[P],++C[t[P]];d=n$(t,l,u,A,C,D,N,O,M,P-M,d),u||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=v,a.p=m,a.i=P,a.w=T)}else{for(var P=a.w||0;P<s+u;P+=65535){var He=P+65535;He>=s&&(l[d/8|0]=u,He=s),d=qZ(l,d+1,t.subarray(P,He))}a.i=s}return Vqe(o,0,r+HZ(d)+i)},GZ=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,a=n.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=r+=n[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Hqe=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),s=new Tc(a.length+t.length);s.set(a),s.set(t,a.length),t=s,i.w=a.length}return Wqe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},YZ=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},qqe=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=GZ();i.p(e.dictionary),YZ(t,2,i.d())}};function dk(t,e){e||(e={});var n=GZ();n.p(t);var r=Hqe(t,e,e.dictionary?6:2,4);return qqe(r,e),YZ(r,r.length-4,n.d()),r}var Kqe=typeof TextDecoder<"u"&&new TextDecoder,Gqe=0;try{Kqe.decode(KZ,{stream:!0}),Gqe=1}catch{}function Yqe(t){if(Array.isArray(t))return t}function Xqe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function r$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Qqe(t,e){if(t){if(typeof t=="string")return r$(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r$(t,e):void 0}}function Zqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i$(t,e){return Yqe(t)||Xqe(t,e)||Qqe(t,e)||Zqe()}function a$(t,e="utf8"){return new TextDecoder(e).decode(t)}const Jqe=new TextEncoder;function eKe(t){return Jqe.encode(t)}const tKe=1024*8,nKe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),sj={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class nI{constructor(e=tKe,n={}){In(this,"buffer");In(this,"byteLength");In(this,"byteOffset");In(this,"length");In(this,"offset");In(this,"lastWrittenByte");In(this,"littleEndian");In(this,"_data");In(this,"_mark");In(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,a=e.byteLength-i;let s=i;(ArrayBuffer.isView(e)||e instanceof nI)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=sj[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+r);if(this.littleEndian===nKe&&n!=="uint8"&&n!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+r));o.reverse();const l=new sj[n](o.buffer);return this.offset+=r,l.reverse(),l}const s=new sj[n](a);return this.offset+=r,s}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return a$(this.readBytes(e))}decodeText(e=1,n="utf8"){return a$(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(eKe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Sv(t){let e=t.length;for(;--e>=0;)t[e]=0}const rKe=3,iKe=258,XZ=29,aKe=256,sKe=aKe+1+XZ,QZ=30,oKe=512,lKe=new Array((sKe+2)*2);Sv(lKe);const cKe=new Array(QZ*2);Sv(cKe);const uKe=new Array(oKe);Sv(uKe);const dKe=new Array(iKe-rKe+1);Sv(dKe);const fKe=new Array(XZ);Sv(fKe);const hKe=new Array(QZ);Sv(hKe);const pKe=(t,e,n,r)=>{let i=t&65535|0,a=t>>>16&65535|0,s=0;for(;n!==0;){s=n>2e3?2e3:n,n-=s;do i=i+e[r++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};var fk=pKe;const mKe=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},gKe=new Uint32Array(mKe()),vKe=(t,e,n,r)=>{const i=gKe,a=r+n;t^=-1;for(let s=r;s<a;s++)t=t>>>8^i[(t^e[s])&255];return t^-1};var Hc=vKe,hk={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ZZ={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const yKe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var bKe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)yKe(n,r)&&(t[r]=n[r])}}return t},xKe=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,a=t.length;r<a;r++){let s=t[r];n.set(s,i),i+=s.length}return n},JZ={assign:bKe,flattenChunks:xKe};let eJ=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{eJ=!1}const mb=new Uint8Array(256);for(let t=0;t<256;t++)mb[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;mb[254]=mb[254]=1;var wKe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,a,s=t.length,o=0;for(i=0;i<s;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),a=0,i=0;a<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|n&63):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|n&63):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|n&63);return e};const SKe=(t,e)=>{if(e<65534&&t.subarray&&eJ)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var _Ke=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const a=new Array(n*2);for(i=0,r=0;r<n;){let s=t[r++];if(s<128){a[i++]=s;continue}let o=mb[s];if(o>4){a[i++]=65533,r+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&r<n;)s=s<<6|t[r++]&63,o--;if(o>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return SKe(a,i)},AKe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+mb[t[n]]>e?n:e},pk={string2buf:wKe,buf2string:_Ke,utf8border:AKe};function CKe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var jKe=CKe;const y1=16209,EKe=16191;var NKe=function(e,n){let r,i,a,s,o,l,u,d,f,p,h,g,m,v,y,b,S,A,C,D,j,N,P,O;const T=e.state;r=e.next_in,P=e.input,i=r+(e.avail_in-5),a=e.next_out,O=e.output,s=a-(n-e.avail_out),o=a+(e.avail_out-257),l=T.dmax,u=T.wsize,d=T.whave,f=T.wnext,p=T.window,h=T.hold,g=T.bits,m=T.lencode,v=T.distcode,y=(1<<T.lenbits)-1,b=(1<<T.distbits)-1;e:do{g<15&&(h+=P[r++]<<g,g+=8,h+=P[r++]<<g,g+=8),S=m[h&y];t:for(;;){if(A=S>>>24,h>>>=A,g-=A,A=S>>>16&255,A===0)O[a++]=S&65535;else if(A&16){C=S&65535,A&=15,A&&(g<A&&(h+=P[r++]<<g,g+=8),C+=h&(1<<A)-1,h>>>=A,g-=A),g<15&&(h+=P[r++]<<g,g+=8,h+=P[r++]<<g,g+=8),S=v[h&b];n:for(;;){if(A=S>>>24,h>>>=A,g-=A,A=S>>>16&255,A&16){if(D=S&65535,A&=15,g<A&&(h+=P[r++]<<g,g+=8,g<A&&(h+=P[r++]<<g,g+=8)),D+=h&(1<<A)-1,D>l){e.msg="invalid distance too far back",T.mode=y1;break e}if(h>>>=A,g-=A,A=a-s,D>A){if(A=D-A,A>d&&T.sane){e.msg="invalid distance too far back",T.mode=y1;break e}if(j=0,N=p,f===0){if(j+=u-A,A<C){C-=A;do O[a++]=p[j++];while(--A);j=a-D,N=O}}else if(f<A){if(j+=u+f-A,A-=f,A<C){C-=A;do O[a++]=p[j++];while(--A);if(j=0,f<C){A=f,C-=A;do O[a++]=p[j++];while(--A);j=a-D,N=O}}}else if(j+=f-A,A<C){C-=A;do O[a++]=p[j++];while(--A);j=a-D,N=O}for(;C>2;)O[a++]=N[j++],O[a++]=N[j++],O[a++]=N[j++],C-=3;C&&(O[a++]=N[j++],C>1&&(O[a++]=N[j++]))}else{j=a-D;do O[a++]=O[j++],O[a++]=O[j++],O[a++]=O[j++],C-=3;while(C>2);C&&(O[a++]=O[j++],C>1&&(O[a++]=O[j++]))}}else if(A&64){e.msg="invalid distance code",T.mode=y1;break e}else{S=v[(S&65535)+(h&(1<<A)-1)];continue n}break}}else if(A&64)if(A&32){T.mode=EKe;break e}else{e.msg="invalid literal/length code",T.mode=y1;break e}else{S=m[(S&65535)+(h&(1<<A)-1)];continue t}break}}while(r<i&&a<o);C=g>>3,r-=C,g-=C<<3,h&=(1<<g)-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=a<o?257+(o-a):257-(a-o),T.hold=h,T.bits=g};const zp=15,s$=852,o$=592,l$=0,oj=1,c$=2,PKe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),kKe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),TKe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),DKe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),IKe=(t,e,n,r,i,a,s,o)=>{const l=o.bits;let u=0,d=0,f=0,p=0,h=0,g=0,m=0,v=0,y=0,b=0,S,A,C,D,j,N=null,P;const O=new Uint16Array(zp+1),T=new Uint16Array(zp+1);let M=null,L,V,K;for(u=0;u<=zp;u++)O[u]=0;for(d=0;d<r;d++)O[e[n+d]]++;for(h=l,p=zp;p>=1&&O[p]===0;p--);if(h>p&&(h=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<p&&O[f]===0;f++);for(h<f&&(h=f),v=1,u=1;u<=zp;u++)if(v<<=1,v-=O[u],v<0)return-1;if(v>0&&(t===l$||p!==1))return-1;for(T[1]=0,u=1;u<zp;u++)T[u+1]=T[u]+O[u];for(d=0;d<r;d++)e[n+d]!==0&&(s[T[e[n+d]]++]=d);if(t===l$?(N=M=s,P=20):t===oj?(N=PKe,M=kKe,P=257):(N=TKe,M=DKe,P=0),b=0,d=0,u=f,j=a,g=h,m=0,C=-1,y=1<<h,D=y-1,t===oj&&y>s$||t===c$&&y>o$)return 1;for(;;){L=u-m,s[d]+1<P?(V=0,K=s[d]):s[d]>=P?(V=M[s[d]-P],K=N[s[d]-P]):(V=96,K=0),S=1<<u-m,A=1<<g,f=A;do A-=S,i[j+(b>>m)+A]=L<<24|V<<16|K|0;while(A!==0);for(S=1<<u-1;b&S;)S>>=1;if(S!==0?(b&=S-1,b+=S):b=0,d++,--O[u]===0){if(u===p)break;u=e[n+s[d]]}if(u>h&&(b&D)!==C){for(m===0&&(m=h),j+=f,g=u-m,v=1<<g;g+m<p&&(v-=O[g+m],!(v<=0));)g++,v<<=1;if(y+=1<<g,t===oj&&y>s$||t===c$&&y>o$)return 1;C=b&D,i[C]=h<<24|g<<16|j-a|0}}return b!==0&&(i[j+b]=u-m<<24|64<<16|0),o.bits=h,0};var K0=IKe;const OKe=0,tJ=1,nJ=2,{Z_FINISH:u$,Z_BLOCK:MKe,Z_TREES:b1,Z_OK:sp,Z_STREAM_END:RKe,Z_NEED_DICT:LKe,Z_STREAM_ERROR:Kl,Z_DATA_ERROR:rJ,Z_MEM_ERROR:iJ,Z_BUF_ERROR:FKe,Z_DEFLATED:d$}=ZZ,R_=16180,f$=16181,h$=16182,p$=16183,m$=16184,g$=16185,v$=16186,y$=16187,b$=16188,x$=16189,N5=16190,Ou=16191,lj=16192,w$=16193,cj=16194,S$=16195,_$=16196,A$=16197,C$=16198,x1=16199,w1=16200,j$=16201,E$=16202,N$=16203,P$=16204,k$=16205,uj=16206,T$=16207,D$=16208,xi=16209,aJ=16210,sJ=16211,zKe=852,$Ke=592,BKe=15,VKe=BKe,I$=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function UKe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Pp=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<R_||e.mode>sJ?1:0},oJ=t=>{if(Pp(t))return Kl;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=R_,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(zKe),e.distcode=e.distdyn=new Int32Array($Ke),e.sane=1,e.back=-1,sp},lJ=t=>{if(Pp(t))return Kl;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,oJ(t)},cJ=(t,e)=>{let n;if(Pp(t))return Kl;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Kl:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,lJ(t))},uJ=(t,e)=>{if(!t)return Kl;const n=new UKe;t.state=n,n.strm=t,n.window=null,n.mode=R_;const r=cJ(t,e);return r!==sp&&(t.state=null),r},WKe=t=>uJ(t,VKe);let O$=!0,dj,fj;const HKe=t=>{if(O$){dj=new Int32Array(512),fj=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(K0(tJ,t.lens,0,288,dj,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;K0(nJ,t.lens,0,32,fj,0,t.work,{bits:5}),O$=!1}t.lencode=dj,t.lenbits=9,t.distcode=fj,t.distbits=5},dJ=(t,e,n,r)=>{let i;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(e.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},qKe=(t,e)=>{let n,r,i,a,s,o,l,u,d,f,p,h,g,m,v=0,y,b,S,A,C,D,j,N;const P=new Uint8Array(4);let O,T;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Pp(t)||!t.output||!t.input&&t.avail_in!==0)return Kl;n=t.state,n.mode===Ou&&(n.mode=lj),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,o=t.avail_in,u=n.hold,d=n.bits,f=o,p=l,N=sp;e:for(;;)switch(n.mode){case R_:if(n.wrap===0){n.mode=lj;break}for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,P[0]=u&255,P[1]=u>>>8&255,n.check=Hc(n.check,P,2,0),u=0,d=0,n.mode=f$;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=xi;break}if((u&15)!==d$){t.msg="unknown compression method",n.mode=xi;break}if(u>>>=4,d-=4,j=(u&15)+8,n.wbits===0&&(n.wbits=j),j>15||j>n.wbits){t.msg="invalid window size",n.mode=xi;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=u&512?x$:Ou,u=0,d=0;break;case f$:for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.flags=u,(n.flags&255)!==d$){t.msg="unknown compression method",n.mode=xi;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=xi;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(P[0]=u&255,P[1]=u>>>8&255,n.check=Hc(n.check,P,2,0)),u=0,d=0,n.mode=h$;case h$:for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(P[0]=u&255,P[1]=u>>>8&255,P[2]=u>>>16&255,P[3]=u>>>24&255,n.check=Hc(n.check,P,4,0)),u=0,d=0,n.mode=p$;case p$:for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(P[0]=u&255,P[1]=u>>>8&255,n.check=Hc(n.check,P,2,0)),u=0,d=0,n.mode=m$;case m$:if(n.flags&1024){for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(P[0]=u&255,P[1]=u>>>8&255,n.check=Hc(n.check,P,2,0)),u=0,d=0}else n.head&&(n.head.extra=null);n.mode=g$;case g$:if(n.flags&1024&&(h=n.length,h>o&&(h=o),h&&(n.head&&(j=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+h),j)),n.flags&512&&n.wrap&4&&(n.check=Hc(n.check,r,h,a)),o-=h,a+=h,n.length-=h),n.length))break e;n.length=0,n.mode=v$;case v$:if(n.flags&2048){if(o===0)break e;h=0;do j=r[a+h++],n.head&&j&&n.length<65536&&(n.head.name+=String.fromCharCode(j));while(j&&h<o);if(n.flags&512&&n.wrap&4&&(n.check=Hc(n.check,r,h,a)),o-=h,a+=h,j)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=y$;case y$:if(n.flags&4096){if(o===0)break e;h=0;do j=r[a+h++],n.head&&j&&n.length<65536&&(n.head.comment+=String.fromCharCode(j));while(j&&h<o);if(n.flags&512&&n.wrap&4&&(n.check=Hc(n.check,r,h,a)),o-=h,a+=h,j)break e}else n.head&&(n.head.comment=null);n.mode=b$;case b$:if(n.flags&512){for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.wrap&4&&u!==(n.check&65535)){t.msg="header crc mismatch",n.mode=xi;break}u=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Ou;break;case x$:for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.adler=n.check=I$(u),u=0,d=0,n.mode=N5;case N5:if(n.havedict===0)return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=u,n.bits=d,LKe;t.adler=n.check=1,n.mode=Ou;case Ou:if(e===MKe||e===b1)break e;case lj:if(n.last){u>>>=d&7,d-=d&7,n.mode=uj;break}for(;d<3;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}switch(n.last=u&1,u>>>=1,d-=1,u&3){case 0:n.mode=w$;break;case 1:if(HKe(n),n.mode=x1,e===b1){u>>>=2,d-=2;break e}break;case 2:n.mode=_$;break;case 3:t.msg="invalid block type",n.mode=xi}u>>>=2,d-=2;break;case w$:for(u>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=xi;break}if(n.length=u&65535,u=0,d=0,n.mode=cj,e===b1)break e;case cj:n.mode=S$;case S$:if(h=n.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;i.set(r.subarray(a,a+h),s),o-=h,a+=h,l-=h,s+=h,n.length-=h;break}n.mode=Ou;break;case _$:for(;d<14;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.nlen=(u&31)+257,u>>>=5,d-=5,n.ndist=(u&31)+1,u>>>=5,d-=5,n.ncode=(u&15)+4,u>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=xi;break}n.have=0,n.mode=A$;case A$:for(;n.have<n.ncode;){for(;d<3;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.lens[M[n.have++]]=u&7,u>>>=3,d-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},N=K0(OKe,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,N){t.msg="invalid code lengths set",n.mode=xi;break}n.have=0,n.mode=C$;case C$:for(;n.have<n.nlen+n.ndist;){for(;v=n.lencode[u&(1<<n.lenbits)-1],y=v>>>24,b=v>>>16&255,S=v&65535,!(y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(S<16)u>>>=y,d-=y,n.lens[n.have++]=S;else{if(S===16){for(T=y+2;d<T;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(u>>>=y,d-=y,n.have===0){t.msg="invalid bit length repeat",n.mode=xi;break}j=n.lens[n.have-1],h=3+(u&3),u>>>=2,d-=2}else if(S===17){for(T=y+3;d<T;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=y,d-=y,j=0,h=3+(u&7),u>>>=3,d-=3}else{for(T=y+7;d<T;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=y,d-=y,j=0,h=11+(u&127),u>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=xi;break}for(;h--;)n.lens[n.have++]=j}}if(n.mode===xi)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=xi;break}if(n.lenbits=9,O={bits:n.lenbits},N=K0(tJ,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,N){t.msg="invalid literal/lengths set",n.mode=xi;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},N=K0(nJ,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,N){t.msg="invalid distances set",n.mode=xi;break}if(n.mode=x1,e===b1)break e;case x1:n.mode=w1;case w1:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=u,n.bits=d,NKe(t,p),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,o=t.avail_in,u=n.hold,d=n.bits,n.mode===Ou&&(n.back=-1);break}for(n.back=0;v=n.lencode[u&(1<<n.lenbits)-1],y=v>>>24,b=v>>>16&255,S=v&65535,!(y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(b&&!(b&240)){for(A=y,C=b,D=S;v=n.lencode[D+((u&(1<<A+C)-1)>>A)],y=v>>>24,b=v>>>16&255,S=v&65535,!(A+y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=A,d-=A,n.back+=A}if(u>>>=y,d-=y,n.back+=y,n.length=S,b===0){n.mode=k$;break}if(b&32){n.back=-1,n.mode=Ou;break}if(b&64){t.msg="invalid literal/length code",n.mode=xi;break}n.extra=b&15,n.mode=j$;case j$:if(n.extra){for(T=n.extra;d<T;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=E$;case E$:for(;v=n.distcode[u&(1<<n.distbits)-1],y=v>>>24,b=v>>>16&255,S=v&65535,!(y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(!(b&240)){for(A=y,C=b,D=S;v=n.distcode[D+((u&(1<<A+C)-1)>>A)],y=v>>>24,b=v>>>16&255,S=v&65535,!(A+y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=A,d-=A,n.back+=A}if(u>>>=y,d-=y,n.back+=y,b&64){t.msg="invalid distance code",n.mode=xi;break}n.offset=S,n.extra=b&15,n.mode=N$;case N$:if(n.extra){for(T=n.extra;d<T;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=xi;break}n.mode=P$;case P$:if(l===0)break e;if(h=p-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=xi;break}h>n.wnext?(h-=n.wnext,g=n.wsize-h):g=n.wnext-h,h>n.length&&(h=n.length),m=n.window}else m=i,g=s-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[s++]=m[g++];while(--h);n.length===0&&(n.mode=w1);break;case k$:if(l===0)break e;i[s++]=n.length,l--,n.mode=w1;break;case uj:if(n.wrap){for(;d<32;){if(o===0)break e;o--,u|=r[a++]<<d,d+=8}if(p-=l,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?Hc(n.check,i,p,s-p):fk(n.check,i,p,s-p)),p=l,n.wrap&4&&(n.flags?u:I$(u))!==n.check){t.msg="incorrect data check",n.mode=xi;break}u=0,d=0}n.mode=T$;case T$:if(n.wrap&&n.flags){for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.wrap&4&&u!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=xi;break}u=0,d=0}n.mode=D$;case D$:N=RKe;break e;case xi:N=rJ;break e;case aJ:return iJ;case sJ:default:return Kl}return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=u,n.bits=d,(n.wsize||p!==t.avail_out&&n.mode<xi&&(n.mode<uj||e!==u$))&&dJ(t,t.output,t.next_out,p-t.avail_out),f-=t.avail_in,p-=t.avail_out,t.total_in+=f,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?Hc(n.check,i,p,t.next_out-p):fk(n.check,i,p,t.next_out-p)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Ou?128:0)+(n.mode===x1||n.mode===cj?256:0),(f===0&&p===0||e===u$)&&N===sp&&(N=FKe),N},KKe=t=>{if(Pp(t))return Kl;let e=t.state;return e.window&&(e.window=null),t.state=null,sp},GKe=(t,e)=>{if(Pp(t))return Kl;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,sp):Kl},YKe=(t,e)=>{const n=e.length;let r,i,a;return Pp(t)||(r=t.state,r.wrap!==0&&r.mode!==N5)?Kl:r.mode===N5&&(i=1,i=fk(i,e,n,0),i!==r.check)?rJ:(a=dJ(t,e,n,n),a?(r.mode=aJ,iJ):(r.havedict=1,sp))};var XKe=lJ,QKe=cJ,ZKe=oJ,JKe=WKe,eGe=uJ,tGe=qKe,nGe=KKe,rGe=GKe,iGe=YKe,aGe="pako inflate (from Nodeca project)",Fu={inflateReset:XKe,inflateReset2:QKe,inflateResetKeep:ZKe,inflateInit:JKe,inflateInit2:eGe,inflate:tGe,inflateEnd:nGe,inflateGetHeader:rGe,inflateSetDictionary:iGe,inflateInfo:aGe};function sGe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var oGe=sGe;const fJ=Object.prototype.toString,{Z_NO_FLUSH:lGe,Z_FINISH:cGe,Z_OK:gb,Z_STREAM_END:hj,Z_NEED_DICT:pj,Z_STREAM_ERROR:uGe,Z_DATA_ERROR:M$,Z_MEM_ERROR:dGe}=ZZ;function nx(t){this.options=JZ.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jKe,this.strm.avail_out=0;let n=Fu.inflateInit2(this.strm,e.windowBits);if(n!==gb)throw new Error(hk[n]);if(this.header=new oGe,Fu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=pk.string2buf(e.dictionary):fJ.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Fu.inflateSetDictionary(this.strm,e.dictionary),n!==gb)))throw new Error(hk[n])}nx.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?cGe:lGe,fJ.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Fu.inflate(n,s),a===pj&&i&&(a=Fu.inflateSetDictionary(n,i),a===gb?a=Fu.inflate(n,s):a===M$&&(a=pj));n.avail_in>0&&a===hj&&n.state.wrap>0&&t[n.next_in]!==0;)Fu.inflateReset(n),a=Fu.inflate(n,s);switch(a){case uGe:case M$:case pj:case dGe:return this.onEnd(a),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(n.avail_out===0||a===hj))if(this.options.to==="string"){let l=pk.utf8border(n.output,n.next_out),u=n.next_out-l,d=pk.buf2string(n.output,l);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(l,l+u),0),this.onData(d)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===gb&&o===0)){if(a===hj)return a=Fu.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};nx.prototype.onData=function(t){this.chunks.push(t)};nx.prototype.onEnd=function(t){t===gb&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=JZ.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function fGe(t,e){const n=new nx(e);if(n.push(t),n.err)throw n.msg||hk[n.err];return n.result}var hGe=nx,pGe=fGe,mGe={Inflate:hGe,inflate:pGe};const{Inflate:gGe,inflate:vGe}=mGe;var R$=gGe,yGe=vGe;const hJ=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;hJ[t]=e}const L$=4294967295;function bGe(t,e,n){let r=t;for(let i=0;i<n;i++)r=hJ[(r^e[i])&255]^r>>>8;return r}function xGe(t,e){return(bGe(L$,t,e)^L$)>>>0}function F$(t,e,n){const r=t.readUint32(),i=xGe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function pJ(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function mJ(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function gJ(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function vJ(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=t[a]+(n[a]>>1)&255;for(;a<r;a++)e[a]=t[a]+(e[a-i]+n[a]>>1)&255}}function yJ(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=t[a]+n[a]&255;for(;a<r;a++)e[a]=t[a]+wGe(e[a-i],n[a],n[a-i])&255}}function wGe(t,e,n){const r=t+e-n,i=Math.abs(r-t),a=Math.abs(r-e),s=Math.abs(r-n);return i<=a&&i<=s?t:a<=s?e:n}function SGe(t,e,n,r,i,a){switch(t){case 0:pJ(e,n,i);break;case 1:mJ(e,n,i,a);break;case 2:gJ(e,n,r,i);break;case 3:vJ(e,n,r,i,a);break;case 4:yJ(e,n,r,i,a);break;default:throw new Error(`Unsupported filter: ${t}`)}}const _Ge=new Uint16Array([255]),AGe=new Uint8Array(_Ge.buffer),CGe=AGe[0]===255;function jGe(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*i,l=new Uint8Array(r*n*o);let u=0;for(let d=0;d<7;d++){const f=s[d],p=Math.ceil((n-f.x)/f.xStep),h=Math.ceil((r-f.y)/f.yStep);if(p<=0||h<=0)continue;const g=p*o,m=new Uint8Array(g);for(let v=0;v<h;v++){const y=e[u++],b=e.subarray(u,u+g);u+=g;const S=new Uint8Array(g);SGe(y,b,S,m,g,o),m.set(S);for(let A=0;A<p;A++){const C=f.x+A*f.xStep,D=f.y+v*f.yStep;if(!(C>=n||D>=r))for(let j=0;j<o;j++)l[(D*n+C)*o+j]=S[A*o+j]}}}if(a===16){const d=new Uint16Array(l.buffer);if(CGe)for(let f=0;f<d.length;f++)d[f]=EGe(d[f]);return d}else return l}function EGe(t){return(t&255)<<8|t>>8&255}const NGe=new Uint16Array([255]),PGe=new Uint8Array(NGe.buffer),kGe=PGe[0]===255,TGe=new Uint8Array(0);function z$(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,s=Math.ceil(a/8)*i,o=Math.ceil(a/8*i*n),l=new Uint8Array(r*o);let u=TGe,d=0,f,p;for(let h=0;h<r;h++){switch(f=e.subarray(d+1,d+1+o),p=l.subarray(h*o,(h+1)*o),e[d]){case 0:pJ(f,p,o);break;case 1:mJ(f,p,o,s);break;case 2:gJ(f,p,u,o);break;case 3:vJ(f,p,u,o,s);break;case 4:yJ(f,p,u,o,s);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=p,d+=o+1}if(a===16){const h=new Uint16Array(l.buffer);if(kGe)for(let g=0;g<h.length;g++)h[g]=DGe(h[g]);return h}else return l}function DGe(t){return(t&255)<<8|t>>8&255}const s2=Uint8Array.of(137,80,78,71,13,10,26,10);function $$(t){if(!IGe(t.readBytes(s2.length)))throw new Error("wrong PNG signature")}function IGe(t){if(t.length<s2.length)return!1;for(let e=0;e<s2.length;e++)if(t[e]!==s2[e])return!1;return!0}const OGe="tEXt",MGe=0,bJ=new TextDecoder("latin1");function RGe(t){if(FGe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const LGe=/^[\u0000-\u00FF]*$/;function FGe(t){if(!LGe.test(t))throw new Error("invalid latin1 text")}function zGe(t,e,n){const r=xJ(e);t[r]=$Ge(e,n-r.length-1)}function xJ(t){for(t.mark();t.readByte()!==MGe;);const e=t.offset;t.reset();const n=bJ.decode(t.readBytes(e-t.offset-1));return t.skip(1),RGe(n),n}function $Ge(t,e){return bJ.decode(t.readBytes(e))}const Xo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},mj={UNKNOWN:-1,DEFLATE:0},B$={UNKNOWN:-1,ADAPTIVE:0},gj={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},S1={NONE:0,BACKGROUND:1,PREVIOUS:2},vj={SOURCE:0,OVER:1};class BGe extends nI{constructor(n,r={}){super(n);In(this,"_checkCrc");In(this,"_inflator");In(this,"_png");In(this,"_apng");In(this,"_end");In(this,"_hasPalette");In(this,"_palette");In(this,"_hasTransparency");In(this,"_transparency");In(this,"_compressionMethod");In(this,"_filterMethod");In(this,"_interlaceMethod");In(this,"_colorType");In(this,"_isAnimated");In(this,"_numberOfFrames");In(this,"_numberOfPlays");In(this,"_frames");In(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new R$,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=mj.UNKNOWN,this._filterMethod=B$.UNKNOWN,this._interlaceMethod=gj.UNKNOWN,this._colorType=Xo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for($$(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for($$(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case OGe:zGe(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?F$(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?F$(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=VGe(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Xo.GREYSCALE:i=1;break;case Xo.TRUECOLOUR:i=3;break;case Xo.INDEXED_COLOUR:i=1;break;case Xo.GREYSCALE_ALPHA:i=2;break;case Xo.TRUECOLOUR_ALPHA:i=4;break;case Xo.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==mj.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<r;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Xo.GREYSCALE:case Xo.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Xo.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Xo.UNKNOWN:case Xo.GREYSCALE_ALPHA:case Xo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=xJ(this),i=this.readUint8();if(i!==mj.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:yGe(a)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=z$({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const a=this._apng.frames.at(n-1);this.disposeFrame(i,a,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case S1.NONE:break;case S1.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const o=(a*n.width+s)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case S1.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,a=(s,o)=>{const l=((s+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,u=(s*r.width+o)*this._png.channels;return{index:l,frameIndex:u}};switch(r.blendOp){case vj.SOURCE:for(let s=0;s<r.height;s++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++)n.data[l+d]=r.data[u+d]}break;case vj.OVER:for(let s=0;s<r.height;s++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++){const f=r.data[u+this._png.channels-1]/i,p=d%(this._png.channels-1)===0?1:r.data[u+d],h=Math.floor(f*p+(1-f)*n.data[l+d]);n.data[l+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==B$.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===gj.NO_INTERLACE)this._png.data=z$({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===gj.ADAM7)this._png.data=jGe({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:S1.NONE,blendOp:vj.SOURCE,data:n}),this._inflator=new R$,this._writingDataChunks=!1}}function VGe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var V$;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(V$||(V$={}));function UGe(t,e){return new BGe(t,e).decode()}var Pn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function yj(){Pn.console&&typeof Pn.console.log=="function"&&Pn.console.log.apply(Pn.console,arguments)}var Kr={log:yj,warn:function(t){Pn.console&&(typeof Pn.console.warn=="function"?Pn.console.warn.apply(Pn.console,arguments):yj.call(null,arguments))},error:function(t){Pn.console&&(typeof Pn.console.error=="function"?Pn.console.error.apply(Pn.console,arguments):yj(t))}};function bj(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){ph(r.response,e,n)},r.onerror=function(){Kr.error("could not download file")},r.send()}function U$(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function _1(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var ph=Pn.saveAs||((typeof window>"u"?"undefined":Rr(window))!=="object"||window!==Pn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Pn.URL||Pn.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?U$(i.href)?bj(t,e,n):_1(i,i.target="_blank"):_1(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){_1(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(U$(t))bj(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){_1(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:Rr(a)!=="object"&&(Kr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return bj(t,e,n);var i=t.type==="application/octet-stream",a=/constructor/i.test(Pn.HTMLElement)||Pn.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":Rr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var l=Pn.URL||Pn.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function wJ(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,a=n[r].process,s=i.exec(t);s&&(e=a(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}var o2=Pn.atob.bind(Pn),W$=Pn.btoa.bind(Pn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xj(t,e){var n=t[0],r=t[1],i=t[2],a=t[3];n=Ts(n,r,i,a,e[0],7,-680876936),a=Ts(a,n,r,i,e[1],12,-389564586),i=Ts(i,a,n,r,e[2],17,606105819),r=Ts(r,i,a,n,e[3],22,-1044525330),n=Ts(n,r,i,a,e[4],7,-176418897),a=Ts(a,n,r,i,e[5],12,1200080426),i=Ts(i,a,n,r,e[6],17,-1473231341),r=Ts(r,i,a,n,e[7],22,-45705983),n=Ts(n,r,i,a,e[8],7,1770035416),a=Ts(a,n,r,i,e[9],12,-1958414417),i=Ts(i,a,n,r,e[10],17,-42063),r=Ts(r,i,a,n,e[11],22,-1990404162),n=Ts(n,r,i,a,e[12],7,1804603682),a=Ts(a,n,r,i,e[13],12,-40341101),i=Ts(i,a,n,r,e[14],17,-1502002290),n=Ds(n,r=Ts(r,i,a,n,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Ds(a,n,r,i,e[6],9,-1069501632),i=Ds(i,a,n,r,e[11],14,643717713),r=Ds(r,i,a,n,e[0],20,-373897302),n=Ds(n,r,i,a,e[5],5,-701558691),a=Ds(a,n,r,i,e[10],9,38016083),i=Ds(i,a,n,r,e[15],14,-660478335),r=Ds(r,i,a,n,e[4],20,-405537848),n=Ds(n,r,i,a,e[9],5,568446438),a=Ds(a,n,r,i,e[14],9,-1019803690),i=Ds(i,a,n,r,e[3],14,-187363961),r=Ds(r,i,a,n,e[8],20,1163531501),n=Ds(n,r,i,a,e[13],5,-1444681467),a=Ds(a,n,r,i,e[2],9,-51403784),i=Ds(i,a,n,r,e[7],14,1735328473),n=Is(n,r=Ds(r,i,a,n,e[12],20,-1926607734),i,a,e[5],4,-378558),a=Is(a,n,r,i,e[8],11,-2022574463),i=Is(i,a,n,r,e[11],16,1839030562),r=Is(r,i,a,n,e[14],23,-35309556),n=Is(n,r,i,a,e[1],4,-1530992060),a=Is(a,n,r,i,e[4],11,1272893353),i=Is(i,a,n,r,e[7],16,-155497632),r=Is(r,i,a,n,e[10],23,-1094730640),n=Is(n,r,i,a,e[13],4,681279174),a=Is(a,n,r,i,e[0],11,-358537222),i=Is(i,a,n,r,e[3],16,-722521979),r=Is(r,i,a,n,e[6],23,76029189),n=Is(n,r,i,a,e[9],4,-640364487),a=Is(a,n,r,i,e[12],11,-421815835),i=Is(i,a,n,r,e[15],16,530742520),n=Os(n,r=Is(r,i,a,n,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Os(a,n,r,i,e[7],10,1126891415),i=Os(i,a,n,r,e[14],15,-1416354905),r=Os(r,i,a,n,e[5],21,-57434055),n=Os(n,r,i,a,e[12],6,1700485571),a=Os(a,n,r,i,e[3],10,-1894986606),i=Os(i,a,n,r,e[10],15,-1051523),r=Os(r,i,a,n,e[1],21,-2054922799),n=Os(n,r,i,a,e[8],6,1873313359),a=Os(a,n,r,i,e[15],10,-30611744),i=Os(i,a,n,r,e[6],15,-1560198380),r=Os(r,i,a,n,e[13],21,1309151649),n=Os(n,r,i,a,e[4],6,-145523070),a=Os(a,n,r,i,e[11],10,-1120210379),i=Os(i,a,n,r,e[2],15,718787259),r=Os(r,i,a,n,e[9],21,-343485551),t[0]=ef(n,t[0]),t[1]=ef(r,t[1]),t[2]=ef(i,t[2]),t[3]=ef(a,t[3])}function L_(t,e,n,r,i,a){return e=ef(ef(e,t),ef(r,a)),ef(e<<i|e>>>32-i,n)}function Ts(t,e,n,r,i,a,s){return L_(e&n|~e&r,t,e,i,a,s)}function Ds(t,e,n,r,i,a,s){return L_(e&r|n&~r,t,e,i,a,s)}function Is(t,e,n,r,i,a,s){return L_(e^n^r,t,e,i,a,s)}function Os(t,e,n,r,i,a,s){return L_(n^(e|~r),t,e,i,a,s)}function SJ(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)xj(r,WGe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(xj(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,xj(r,i),r}function WGe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var H$="0123456789abcdef".split("");function HGe(t){for(var e="",n=0;n<4;n++)e+=H$[t>>8*n+4&15]+H$[t>>8*n&15];return e}function qGe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function mk(t){return SJ(t).map(qGe).join("")}var KGe=function(t){for(var e=0;e<t.length;e++)t[e]=HGe(t[e]);return t.join("")}(SJ("hello"))!="5d41402abc4b2a76b9719d911017c592";function ef(t,e){if(KGe){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function gk(t,e){var n,r,i,a;if(t!==n){for(var s=(i=t,a=1+(256/t.length|0),new Array(a+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+s.charCodeAt(l))%256,o[l]=o[u],o[u]=d}n=t,r=o}else o=r;var f=e.length,p=0,h=0,g="";for(l=0;l<f;l++)h=(h+(d=o[p=(p+1)%256]))%256,o[p]=o[h],o[h]=d,s=o[(o[p]+o[h])%256],g+=String.fromCharCode(e.charCodeAt(l)^s);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var q$={print:4,modify:8,copy:16,"annot-forms":32};function Kp(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(q$.perm!==void 0)throw new Error("Invalid permission: "+o);i+=q$[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=mk(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=gk(this.encryptionKey,this.padding)}function Gp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function K$(t){if(Rr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!i],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[n]){var s=e[n][a];try{s[0].apply(t,r)}catch(o){Pn.console&&Kr.error("jsPDF PubSub Error",o.message,o)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function P5(t){if(!(this instanceof P5))return new P5(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function _J(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function vh(t,e,n,r,i){if(!(this instanceof vh))return new vh(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,_J.call(this,r,i)}function xm(t,e,n,r,i){if(!(this instanceof xm))return new xm(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,_J.call(this,r,i)}function hn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,l=16,u="S",d=null;Rr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),s=t.filters||(a===!0?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=K$;var g="1.3",m=h.__private__.getPdfVersion=function(){return g};h.__private__.setPdfVersion=function(R){g=R};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return v};var y=h.__private__.getPageFormat=function(R){return v[R]};i=i||"a4";var b="compat",S="advanced",A=b;function C(){this.saveGraphicsState(),he(new Oe(yt,0,0,-yt,0,Qa()*yt).toString()+" cm"),this.setFontSize(this.getFontSize()/yt),u="n",A=S}function D(){this.restoreGraphicsState(),u="S",A=b}var j=h.__private__.combineFontStyleAndFontWeight=function(R,Q){if(R=="bold"&&Q=="normal"||R=="bold"&&Q==400||R=="normal"&&Q=="italic"||R=="bold"&&Q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Q&&(R=Q==400||Q==="normal"?R==="italic"?"italic":"normal":Q!=700&&Q!=="bold"||R!=="normal"?(Q==700?"bold":Q)+""+R:"bold"),R};h.advancedAPI=function(R){var Q=A===b;return Q&&C.call(this),typeof R!="function"||(R(this),Q&&D.call(this)),this},h.compatAPI=function(R){var Q=A===S;return Q&&D.call(this),typeof R!="function"||(R(this),Q&&C.call(this)),this},h.isAdvancedAPI=function(){return A===S};var N,P=function(R){if(A!==S)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=h.roundToPrecision=h.__private__.roundToPrecision=function(R,Q){var ge=e||Q;if(isNaN(R)||isNaN(ge))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(ge).replace(/0+$/,"")};N=h.hpf=h.__private__.hpf=typeof l=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return O(R,l)}:l==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return O(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return O(R,16)};var T=h.f2=h.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return O(R,2)},M=h.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return O(R,3)},L=h.scale=h.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return A===b?R*yt:A===S?R:void 0},V=function(R){return L(function(Q){return A===b?Qa()-Q:A===S?Q:void 0}(R))};h.__private__.setPrecision=h.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(e=parseInt(R,10))};var K,Z="00000000000000000000000000000000",Y=h.__private__.getFileId=function(){return Z},H=h.__private__.setFileId=function(R){return Z=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(fr=new Kp(d.userPermissions,d.userPassword,d.ownerPassword,Z)),Z};h.setFileId=function(R){return H(R),this},h.getFileId=function(){return Y()};var ee=h.__private__.convertDateToPDFDate=function(R){var Q=R.getTimezoneOffset(),ge=Q<0?"+":"-",Ee=Math.floor(Math.abs(Q/60)),$e=Math.abs(Q%60),rt=[ge,te(Ee),"'",te($e),"'"].join("");return["D:",R.getFullYear(),te(R.getMonth()+1),te(R.getDate()),te(R.getHours()),te(R.getMinutes()),te(R.getSeconds()),rt].join("")},le=h.__private__.convertPDFDateToDate=function(R){var Q=parseInt(R.substr(2,4),10),ge=parseInt(R.substr(6,2),10)-1,Ee=parseInt(R.substr(8,2),10),$e=parseInt(R.substr(10,2),10),rt=parseInt(R.substr(12,2),10),at=parseInt(R.substr(14,2),10);return new Date(Q,ge,Ee,$e,rt,at,0)},se=h.__private__.setCreationDate=function(R){var Q;if(R===void 0&&(R=new Date),R instanceof Date)Q=ee(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Q=R}return K=Q},$=h.__private__.getCreationDate=function(R){var Q=K;return R==="jsDate"&&(Q=le(K)),Q};h.setCreationDate=function(R){return se(R),this},h.getCreationDate=function(R){return $(R)};var X,te=h.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},oe=h.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},me=0,_e=[],Ce=[],fe=0,xe=[],Se=[],ie=!1,He=Ce;h.__private__.setCustomOutputDestination=function(R){ie=!0,He=R};var Fe=function(R){ie||(He=R)};h.__private__.resetCustomOutputDestination=function(){ie=!1,He=Ce};var he=h.__private__.out=function(R){return R=R.toString(),fe+=R.length+1,He.push(R),He},Ye=h.__private__.write=function(R){return he(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},mt=h.__private__.getArrayBuffer=function(R){for(var Q=R.length,ge=new ArrayBuffer(Q),Ee=new Uint8Array(ge);Q--;)Ee[Q]=R.charCodeAt(Q);return ge},vt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return vt};var Qe=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(R){return Qe=A===S?R/yt:R,this};var Ot,ht=h.__private__.getFontSize=h.getFontSize=function(){return A===b?Qe:Qe*yt},dt=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(R){return dt=R,this},h.__private__.getR2L=h.getR2L=function(){return dt};var It,tn=h.__private__.setZoomMode=function(R){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))Ot=R;else if(isNaN(R)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');Ot=R}else Ot=parseInt(R,10)};h.__private__.getZoomMode=function(){return Ot};var Zt,$t=h.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');It=R};h.__private__.getPageMode=function(){return It};var on=h.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');Zt=R};h.__private__.getLayoutMode=function(){return Zt},h.__private__.setDisplayMode=h.setDisplayMode=function(R,Q,ge){return tn(R),on(Q),$t(ge),this};var lt={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(R){if(Object.keys(lt).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return lt[R]},h.__private__.getDocumentProperties=function(){return lt},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(R){for(var Q in lt)lt.hasOwnProperty(Q)&&R[Q]&&(lt[Q]=R[Q]);return this},h.__private__.setDocumentProperty=function(R,Q){if(Object.keys(lt).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return lt[R]=Q};var bt,yt,nt,Bt,ft,pt={},Rt={},Ct=[],Ht={},pn={},dn={},wt={},sr=null,mn=0,qt=[],Cn=new K$(h),ba=t.hotfixes||[],$r={},gs={},Re=[],Oe=function R(Q,ge,Ee,$e,rt,at){if(!(this instanceof R))return new R(Q,ge,Ee,$e,rt,at);isNaN(Q)&&(Q=1),isNaN(ge)&&(ge=0),isNaN(Ee)&&(Ee=0),isNaN($e)&&($e=1),isNaN(rt)&&(rt=0),isNaN(at)&&(at=0),this._matrix=[Q,ge,Ee,$e,rt,at]};Object.defineProperty(Oe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Oe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Oe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Oe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Oe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Oe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Oe.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Oe.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Oe.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Oe.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Oe.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Oe.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Oe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Oe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Oe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Oe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Oe.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(R)},Oe.prototype.multiply=function(R){var Q=R.sx*this.sx+R.shy*this.shx,ge=R.sx*this.shy+R.shy*this.sy,Ee=R.shx*this.sx+R.sy*this.shx,$e=R.shx*this.shy+R.sy*this.sy,rt=R.tx*this.sx+R.ty*this.shx+this.tx,at=R.tx*this.shy+R.ty*this.sy+this.ty;return new Oe(Q,ge,Ee,$e,rt,at)},Oe.prototype.decompose=function(){var R=this.sx,Q=this.shy,ge=this.shx,Ee=this.sy,$e=this.tx,rt=this.ty,at=Math.sqrt(R*R+Q*Q),Wt=(R/=at)*ge+(Q/=at)*Ee;ge-=R*Wt,Ee-=Q*Wt;var Yt=Math.sqrt(ge*ge+Ee*Ee);return Wt/=Yt,R*(Ee/=Yt)<Q*(ge/=Yt)&&(R=-R,Q=-Q,Wt=-Wt,at=-at),{scale:new Oe(at,0,0,Yt,0,0),translate:new Oe(1,0,0,1,$e,rt),rotate:new Oe(R,Q,-Q,R,0,0),skew:new Oe(1,0,Wt,1,0,0)}},Oe.prototype.toString=function(R){return this.join(" ")},Oe.prototype.inversed=function(){var R=this.sx,Q=this.shy,ge=this.shx,Ee=this.sy,$e=this.tx,rt=this.ty,at=1/(R*Ee-Q*ge),Wt=Ee*at,Yt=-Q*at,gn=-ge*at,bn=R*at;return new Oe(Wt,Yt,gn,bn,-Wt*$e-gn*rt,-Yt*$e-bn*rt)},Oe.prototype.applyToPoint=function(R){var Q=R.x*this.sx+R.y*this.shx+this.tx,ge=R.x*this.shy+R.y*this.sy+this.ty;return new qs(Q,ge)},Oe.prototype.applyToRectangle=function(R){var Q=this.applyToPoint(R),ge=this.applyToPoint(new qs(R.x+R.w,R.y+R.h));return new zo(Q.x,Q.y,ge.x-Q.x,ge.y-Q.y)},Oe.prototype.clone=function(){var R=this.sx,Q=this.shy,ge=this.shx,Ee=this.sy,$e=this.tx,rt=this.ty;return new Oe(R,Q,ge,Ee,$e,rt)},h.Matrix=Oe;var Ke=h.matrixMult=function(R,Q){return Q.multiply(R)},Et=new Oe(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Et;var ct=function(R,Q){if(!pn[R]){var ge=(Q instanceof vh?"Sh":"P")+(Object.keys(Ht).length+1).toString(10);Q.id=ge,pn[R]=ge,Ht[ge]=Q,Cn.publish("addPattern",Q)}};h.ShadingPattern=vh,h.TilingPattern=xm,h.addShadingPattern=function(R,Q){return P("addShadingPattern()"),ct(R,Q),this},h.beginTilingPattern=function(R){P("beginTilingPattern()"),Al(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},h.endTilingPattern=function(R,Q){P("endTilingPattern()"),Q.stream=Se[X].join(`
`),ct(R,Q),Cn.publish("endTilingPattern",Q),Re.pop().restore()};var Gt,yn=h.__private__.newObject=function(){var R=Gn();return Ft(R,!0),R},Gn=h.__private__.newObjectDeferred=function(){return me++,_e[me]=function(){return fe},me},Ft=function(R,Q){return Q=typeof Q=="boolean"&&Q,_e[R]=fe,Q&&he(R+" 0 obj"),R},qn=h.__private__.newAdditionalObject=function(){var R={objId:Gn(),content:""};return xe.push(R),R},Ri=Gn(),kr=Gn(),Br=h.__private__.decodeColorString=function(R){var Q=R.split(" ");if(Q.length!==2||Q[1]!=="g"&&Q[1]!=="G")Q.length!==5||Q[4]!=="k"&&Q[4]!=="K"||(Q=[(1-Q[0])*(1-Q[3]),(1-Q[1])*(1-Q[3]),(1-Q[2])*(1-Q[3]),"r"]);else{var ge=parseFloat(Q[0]);Q=[ge,ge,ge,"r"]}for(var Ee="#",$e=0;$e<3;$e++)Ee+=("0"+Math.floor(255*parseFloat(Q[$e])).toString(16)).slice(-2);return Ee},Tr=h.__private__.encodeColorString=function(R){var Q;typeof R=="string"&&(R={ch1:R});var ge=R.ch1,Ee=R.ch2,$e=R.ch3,rt=R.ch4,at=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ge=="string"&&ge.charAt(0)!=="#"){var Wt=new wJ(ge);if(Wt.ok)ge=Wt.toHex();else if(!/^\d*\.?\d*$/.test(ge))throw new Error('Invalid color "'+ge+'" passed to jsPDF.encodeColorString.')}if(typeof ge=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ge)&&(ge="#"+ge[1]+ge[1]+ge[2]+ge[2]+ge[3]+ge[3]),typeof ge=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ge)){var Yt=parseInt(ge.substr(1),16);ge=Yt>>16&255,Ee=Yt>>8&255,$e=255&Yt}if(Ee===void 0||rt===void 0&&ge===Ee&&Ee===$e)Q=typeof ge=="string"?ge+" "+at[0]:R.precision===2?T(ge/255)+" "+at[0]:M(ge/255)+" "+at[0];else if(rt===void 0||Rr(rt)==="object"){if(rt&&!isNaN(rt.a)&&rt.a===0)return["1.","1.","1.",at[1]].join(" ");Q=typeof ge=="string"?[ge,Ee,$e,at[1]].join(" "):R.precision===2?[T(ge/255),T(Ee/255),T($e/255),at[1]].join(" "):[M(ge/255),M(Ee/255),M($e/255),at[1]].join(" ")}else Q=typeof ge=="string"?[ge,Ee,$e,rt,at[2]].join(" "):R.precision===2?[T(ge),T(Ee),T($e),T(rt),at[2]].join(" "):[M(ge),M(Ee),M($e),M(rt),at[2]].join(" ");return Q},er=h.__private__.getFilters=function(){return s},Sr=h.__private__.putStream=function(R){var Q=(R=R||{}).data||"",ge=R.filters||er(),Ee=R.alreadyAppliedFilters||[],$e=R.addLength1||!1,rt=Q.length,at=R.objectId,Wt=function(Er){return Er};if(d!==null&&at===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Wt=fr.encryptor(at,0));var Yt={};ge===!0&&(ge=["FlateEncode"]);var gn=R.additionalKeyValues||[],bn=(Yt=hn.API.processDataByFilters!==void 0?hn.API.processDataByFilters(Q,ge):{data:Q,reverseChain:[]}).reverseChain+(Array.isArray(Ee)?Ee.join(" "):Ee.toString());if(Yt.data.length!==0&&(gn.push({key:"Length",value:Yt.data.length}),$e===!0&&gn.push({key:"Length1",value:rt})),bn.length!=0)if(bn.split("/").length-1==1)gn.push({key:"Filter",value:bn});else{gn.push({key:"Filter",value:"["+bn+"]"});for(var Xn=0;Xn<gn.length;Xn+=1)if(gn[Xn].key==="DecodeParms"){for(var lr=[],Vr=0;Vr<Yt.reverseChain.split("/").length-1;Vr+=1)lr.push("null");lr.push(gn[Xn].value),gn[Xn].value="["+lr.join(" ")+"]"}}he("<<");for(var hr=0;hr<gn.length;hr++)he("/"+gn[hr].key+" "+gn[hr].value);he(">>"),Yt.data.length!==0&&(he("stream"),he(Wt(Yt.data)),he("endstream"))},oi=h.__private__.putPage=function(R){var Q=R.number,ge=R.data,Ee=R.objId,$e=R.contentsObjId;Ft(Ee,!0),he("<</Type /Page"),he("/Parent "+R.rootDictionaryObjId+" 0 R"),he("/Resources "+R.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(N(R.mediaBox.bottomLeftX))+" "+parseFloat(N(R.mediaBox.bottomLeftY))+" "+N(R.mediaBox.topRightX)+" "+N(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&he("/CropBox ["+N(R.cropBox.bottomLeftX)+" "+N(R.cropBox.bottomLeftY)+" "+N(R.cropBox.topRightX)+" "+N(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&he("/BleedBox ["+N(R.bleedBox.bottomLeftX)+" "+N(R.bleedBox.bottomLeftY)+" "+N(R.bleedBox.topRightX)+" "+N(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&he("/TrimBox ["+N(R.trimBox.bottomLeftX)+" "+N(R.trimBox.bottomLeftY)+" "+N(R.trimBox.topRightX)+" "+N(R.trimBox.topRightY)+"]"),R.artBox!==null&&he("/ArtBox ["+N(R.artBox.bottomLeftX)+" "+N(R.artBox.bottomLeftY)+" "+N(R.artBox.topRightX)+" "+N(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&he("/UserUnit "+R.userUnit),Cn.publish("putPage",{objId:Ee,pageContext:qt[Q],pageNumber:Q,page:ge}),he("/Contents "+$e+" 0 R"),he(">>"),he("endobj");var rt=ge.join(`
`);return A===S&&(rt+=`
Q`),Ft($e,!0),Sr({data:rt,filters:er(),objectId:$e}),he("endobj"),Ee},vs=h.__private__.putPages=function(){var R,Q,ge=[];for(R=1;R<=mn;R++)qt[R].objId=Gn(),qt[R].contentsObjId=Gn();for(R=1;R<=mn;R++)ge.push(oi({number:R,data:Se[R],objId:qt[R].objId,contentsObjId:qt[R].contentsObjId,mediaBox:qt[R].mediaBox,cropBox:qt[R].cropBox,bleedBox:qt[R].bleedBox,trimBox:qt[R].trimBox,artBox:qt[R].artBox,userUnit:qt[R].userUnit,rootDictionaryObjId:Ri,resourceDictionaryObjId:kr}));Ft(Ri,!0),he("<</Type /Pages");var Ee="/Kids [";for(Q=0;Q<mn;Q++)Ee+=ge[Q]+" 0 R ";he(Ee+"]"),he("/Count "+mn),he(">>"),he("endobj"),Cn.publish("postPutPages")},xa=function(R){Cn.publish("putFont",{font:R,out:he,newObject:yn,putStream:Sr}),R.isAlreadyPutted!==!0&&(R.objectNumber=yn(),he("<<"),he("/Type /Font"),he("/BaseFont /"+Gp(R.postScriptName)),he("/Subtype /Type1"),typeof R.encoding=="string"&&he("/Encoding /"+R.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},Do=function(R){R.objectNumber=yn();var Q=[];Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Form"}),Q.push({key:"BBox",value:"["+[N(R.x),N(R.y),N(R.x+R.width),N(R.y+R.height)].join(" ")+"]"}),Q.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var ge=R.pages[1].join(`
`);Sr({data:ge,additionalKeyValues:Q,objectId:R.objectNumber}),he("endobj")},Io=function(R,Q){Q||(Q=21);var ge=yn(),Ee=function(at,Wt){var Yt,gn=[],bn=1/(Wt-1);for(Yt=0;Yt<1;Yt+=bn)gn.push(Yt);if(gn.push(1),at[0].offset!=0){var Xn={offset:0,color:at[0].color};at.unshift(Xn)}if(at[at.length-1].offset!=1){var lr={offset:1,color:at[at.length-1].color};at.push(lr)}for(var Vr="",hr=0,Er=0;Er<gn.length;Er++){for(Yt=gn[Er];Yt>at[hr+1].offset;)hr++;var Hr=at[hr].offset,Xr=(Yt-Hr)/(at[hr+1].offset-Hr),Ar=at[hr].color,Qi=at[hr+1].color;Vr+=oe(Math.round((1-Xr)*Ar[0]+Xr*Qi[0]).toString(16))+oe(Math.round((1-Xr)*Ar[1]+Xr*Qi[1]).toString(16))+oe(Math.round((1-Xr)*Ar[2]+Xr*Qi[2]).toString(16))}return Vr.trim()}(R.colors,Q),$e=[];$e.push({key:"FunctionType",value:"0"}),$e.push({key:"Domain",value:"[0.0 1.0]"}),$e.push({key:"Size",value:"["+Q+"]"}),$e.push({key:"BitsPerSample",value:"8"}),$e.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$e.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Sr({data:Ee,additionalKeyValues:$e,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ge}),he("endobj"),R.objectNumber=yn(),he("<< /ShadingType "+R.type),he("/ColorSpace /DeviceRGB");var rt="/Coords ["+N(parseFloat(R.coords[0]))+" "+N(parseFloat(R.coords[1]))+" ";R.type===2?rt+=N(parseFloat(R.coords[2]))+" "+N(parseFloat(R.coords[3])):rt+=N(parseFloat(R.coords[2]))+" "+N(parseFloat(R.coords[3]))+" "+N(parseFloat(R.coords[4]))+" "+N(parseFloat(R.coords[5])),he(rt+="]"),R.matrix&&he("/Matrix ["+R.matrix.toString()+"]"),he("/Function "+ge+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},_r=function(R,Q){var ge=Gn(),Ee=yn();Q.push({resourcesOid:ge,objectOid:Ee}),R.objectNumber=Ee;var $e=[];$e.push({key:"Type",value:"/Pattern"}),$e.push({key:"PatternType",value:"1"}),$e.push({key:"PaintType",value:"1"}),$e.push({key:"TilingType",value:"1"}),$e.push({key:"BBox",value:"["+R.boundingBox.map(N).join(" ")+"]"}),$e.push({key:"XStep",value:N(R.xStep)}),$e.push({key:"YStep",value:N(R.yStep)}),$e.push({key:"Resources",value:ge+" 0 R"}),R.matrix&&$e.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),Sr({data:R.stream,additionalKeyValues:$e,objectId:R.objectNumber}),he("endobj")},Oo=function(R){for(var Q in R.objectNumber=yn(),he("<<"),R)switch(Q){case"opacity":he("/ca "+T(R[Q]));break;case"stroke-opacity":he("/CA "+T(R[Q]))}he(">>"),he("endobj")},ca=function(R){Ft(R.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Q in he("/Font <<"),pt)pt.hasOwnProperty(Q)&&(f===!1||f===!0&&p.hasOwnProperty(Q))&&he("/"+Q+" "+pt[Q].objectNumber+" 0 R");he(">>")}(),function(){if(Object.keys(Ht).length>0){for(var Q in he("/Shading <<"),Ht)Ht.hasOwnProperty(Q)&&Ht[Q]instanceof vh&&Ht[Q].objectNumber>=0&&he("/"+Q+" "+Ht[Q].objectNumber+" 0 R");Cn.publish("putShadingPatternDict"),he(">>")}}(),function(Q){if(Object.keys(Ht).length>0){for(var ge in he("/Pattern <<"),Ht)Ht.hasOwnProperty(ge)&&Ht[ge]instanceof h.TilingPattern&&Ht[ge].objectNumber>=0&&Ht[ge].objectNumber<Q&&he("/"+ge+" "+Ht[ge].objectNumber+" 0 R");Cn.publish("putTilingPatternDict"),he(">>")}}(R.objectOid),function(){if(Object.keys(dn).length>0){var Q;for(Q in he("/ExtGState <<"),dn)dn.hasOwnProperty(Q)&&dn[Q].objectNumber>=0&&he("/"+Q+" "+dn[Q].objectNumber+" 0 R");Cn.publish("putGStateDict"),he(">>")}}(),function(){for(var Q in he("/XObject <<"),$r)$r.hasOwnProperty(Q)&&$r[Q].objectNumber>=0&&he("/"+Q+" "+$r[Q].objectNumber+" 0 R");Cn.publish("putXobjectDict"),he(">>")}(),he(">>"),he("endobj")},Fc=function(R){Rt[R.fontName]=Rt[R.fontName]||{},Rt[R.fontName][R.fontStyle]=R.id},Us=function(R,Q,ge,Ee,$e){var rt={id:"F"+(Object.keys(pt).length+1).toString(10),postScriptName:R,fontName:Q,fontStyle:ge,encoding:Ee,isStandardFont:$e||!1,metadata:{}};return Cn.publish("addFont",{font:rt,instance:this}),pt[rt.id]=rt,Fc(rt),rt.id},Ei=h.__private__.pdfEscape=h.pdfEscape=function(R,Q){return function(ge,Ee){var $e,rt,at,Wt,Yt,gn,bn,Xn,lr;if(at=(Ee=Ee||{}).sourceEncoding||"Unicode",Yt=Ee.outputEncoding,(Ee.autoencode||Yt)&&pt[bt].metadata&&pt[bt].metadata[at]&&pt[bt].metadata[at].encoding&&(Wt=pt[bt].metadata[at].encoding,!Yt&&pt[bt].encoding&&(Yt=pt[bt].encoding),!Yt&&Wt.codePages&&(Yt=Wt.codePages[0]),typeof Yt=="string"&&(Yt=Wt[Yt]),Yt)){for(bn=!1,gn=[],$e=0,rt=ge.length;$e<rt;$e++)(Xn=Yt[ge.charCodeAt($e)])?gn.push(String.fromCharCode(Xn)):gn.push(ge[$e]),gn[$e].charCodeAt(0)>>8&&(bn=!0);ge=gn.join("")}for($e=ge.length;bn===void 0&&$e!==0;)ge.charCodeAt($e-1)>>8&&(bn=!0),$e--;if(!bn)return ge;for(gn=Ee.noBOM?[]:[254,255],$e=0,rt=ge.length;$e<rt;$e++){if((lr=(Xn=ge.charCodeAt($e))>>8)>>8)throw new Error("Character at position "+$e+" of string '"+ge+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gn.push(lr),gn.push(Xn-(lr<<8))}return String.fromCharCode.apply(void 0,gn)}(R,Q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xa=h.__private__.beginPage=function(R){Se[++mn]=[],qt[mn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},zc(mn),Fe(Se[X])},yl=function(R,Q){var ge,Ee,$e;switch(n=Q||n,typeof R=="string"&&(ge=y(R.toLowerCase()),Array.isArray(ge)&&(Ee=ge[0],$e=ge[1])),Array.isArray(R)&&(Ee=R[0]*yt,$e=R[1]*yt),isNaN(Ee)&&(Ee=i[0],$e=i[1]),(Ee>14400||$e>14400)&&(Kr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ee=Math.min(14400,Ee),$e=Math.min(14400,$e)),i=[Ee,$e],n.substr(0,1)){case"l":$e>Ee&&(i=[$e,Ee]);break;case"p":Ee>$e&&(i=[$e,Ee])}Xa(i),Xi(Jl),he(co),or!==0&&he(or+" J"),ju!==0&&he(ju+" j"),Cn.publish("addPage",{pageNumber:mn})},Ws=function(R){R>0&&R<=mn&&(Se.splice(R,1),qt.splice(R,1),mn--,X>mn&&(X=mn),this.setPage(X))},zc=function(R){R>0&&R<=mn&&(X=R)},bl=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return Se.length-1},$c=function(R,Q,ge){var Ee,$e=void 0;return ge=ge||{},R=R!==void 0?R:pt[bt].fontName,Q=Q!==void 0?Q:pt[bt].fontStyle,Ee=R.toLowerCase(),Rt[Ee]!==void 0&&Rt[Ee][Q]!==void 0?$e=Rt[Ee][Q]:Rt[R]!==void 0&&Rt[R][Q]!==void 0?$e=Rt[R][Q]:ge.disableWarning===!1&&Kr.warn("Unable to look up font label for font '"+R+"', '"+Q+"'. Refer to getFontList() for available fonts."),$e||ge.noFallback||($e=Rt.times[Q])==null&&($e=Rt.times.normal),$e},kn=h.__private__.putInfo=function(){var R=yn(),Q=function(Ee){return Ee};for(var ge in d!==null&&(Q=fr.encryptor(R,0)),he("<<"),he("/Producer ("+Ei(Q("jsPDF "+hn.version))+")"),lt)lt.hasOwnProperty(ge)&&lt[ge]&&he("/"+ge.substr(0,1).toUpperCase()+ge.substr(1)+" ("+Ei(Q(lt[ge]))+")");he("/CreationDate ("+Ei(Q(K))+")"),he(">>"),he("endobj")},Bc=h.__private__.putCatalog=function(R){var Q=(R=R||{}).rootDictionaryObjId||Ri;switch(yn(),he("<<"),he("/Type /Catalog"),he("/Pages "+Q+" 0 R"),Ot||(Ot="fullwidth"),Ot){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ge=""+Ot;ge.substr(ge.length-1)==="%"&&(Ot=parseInt(Ot)/100),typeof Ot=="number"&&he("/OpenAction [3 0 R /XYZ null null "+T(Ot)+"]")}switch(Zt||(Zt="continuous"),Zt){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}It&&he("/PageMode /"+It),Cn.publish("putCatalog"),he(">>"),he("endobj")},Yr=h.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(me+1)),he("/Root "+me+" 0 R"),he("/Info "+(me-1)+" 0 R"),d!==null&&he("/Encrypt "+fr.oid+" 0 R"),he("/ID [ <"+Z+"> <"+Z+"> ]"),he(">>")},xl=h.__private__.putHeader=function(){he("%PDF-"+g),he("%ºß¬à")},Su=h.__private__.putXRef=function(){var R="0000000000";he("xref"),he("0 "+(me+1)),he("0000000000 65535 f ");for(var Q=1;Q<=me;Q++)typeof _e[Q]=="function"?he((R+_e[Q]()).slice(-10)+" 00000 n "):_e[Q]!==void 0?he((R+_e[Q]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},Yn=h.__private__.buildDocument=function(){var R;me=0,fe=0,Ce=[],_e=[],xe=[],Ri=Gn(),kr=Gn(),Fe(Ce),Cn.publish("buildDocument"),xl(),vs(),function(){Cn.publish("putAdditionalObjects");for(var ge=0;ge<xe.length;ge++){var Ee=xe[ge];Ft(Ee.objId,!0),he(Ee.content),he("endobj")}Cn.publish("postPutAdditionalObjects")}(),R=[],function(){for(var ge in pt)pt.hasOwnProperty(ge)&&(f===!1||f===!0&&p.hasOwnProperty(ge))&&xa(pt[ge])}(),function(){var ge;for(ge in dn)dn.hasOwnProperty(ge)&&Oo(dn[ge])}(),function(){for(var ge in $r)$r.hasOwnProperty(ge)&&Do($r[ge])}(),function(ge){var Ee;for(Ee in Ht)Ht.hasOwnProperty(Ee)&&(Ht[Ee]instanceof vh?Io(Ht[Ee]):Ht[Ee]instanceof xm&&_r(Ht[Ee],ge))}(R),Cn.publish("putResources"),R.forEach(ca),ca({resourcesOid:kr,objectOid:Number.MAX_SAFE_INTEGER}),Cn.publish("postPutResources"),d!==null&&(fr.oid=yn(),he("<<"),he("/Filter /Standard"),he("/V "+fr.v),he("/R "+fr.r),he("/U <"+fr.toHexString(fr.U)+">"),he("/O <"+fr.toHexString(fr.O)+">"),he("/P "+fr.P),he(">>"),he("endobj")),kn(),Bc();var Q=fe;return Su(),Yr(),he("startxref"),he(""+Q),he("%%EOF"),Fe(Se[X]),Ce.join(`
`)},ys=h.__private__.getBlob=function(R){return new Blob([mt(R)],{type:"application/pdf"})},ua=h.output=h.__private__.output=(Gt=function(R,Q){switch(typeof(Q=Q||{})=="string"?Q={filename:Q}:Q.filename=Q.filename||"generated.pdf",R){case void 0:return Yn();case"save":h.save(Q.filename);break;case"arraybuffer":return mt(Yn());case"blob":return ys(Yn());case"bloburi":case"bloburl":if(Pn.URL!==void 0&&typeof Pn.URL.createObjectURL=="function")return Pn.URL&&Pn.URL.createObjectURL(ys(Yn()))||void 0;Kr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ge="",Ee=Yn();try{ge=W$(Ee)}catch{ge=W$(unescape(encodeURIComponent(Ee)))}return"data:application/pdf;filename="+Q.filename+";base64,"+ge;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pn)==="[object Window]"){var $e="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",rt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Q.pdfObjectUrl&&($e=Q.pdfObjectUrl,rt="");var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+$e+'"'+rt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Q)+");<\/script></body></html>",Wt=Pn.open();return Wt!==null&&Wt.document.write(at),Wt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pn)==="[object Window]"){var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Q.filename+'" width="500px" height="400px" /></body></html>',gn=Pn.open();if(gn!==null){gn.document.write(Yt);var bn=this;gn.document.documentElement.querySelector("#pdfViewer").onload=function(){gn.document.title=Q.filename,gn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(bn.output("bloburl"))}}return gn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Q)+'"></iframe></body></html>',lr=Pn.open();if(lr!==null&&(lr.document.write(Xn),lr.document.title=Q.filename),lr||typeof safari>"u")return lr;break;case"datauri":case"dataurl":return Pn.document.location.href=this.output("datauristring",Q);default:return null}},Gt.foo=function(){try{return Gt.apply(this,arguments)}catch(ge){var R=ge.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var Q="Error in function "+R.split(`
`)[0].split("<")[0]+": "+ge.message;if(!Pn.console)throw new Error(Q);Pn.console.error(Q,ge),Pn.alert&&alert(Q)}},Gt.foo.bar=Gt,Gt.foo),bs=function(R){return Array.isArray(ba)===!0&&ba.indexOf(R)>-1};switch(r){case"pt":yt=1;break;case"mm":yt=72/25.4;break;case"cm":yt=72/2.54;break;case"in":yt=72;break;case"px":yt=bs("px_scaling")==1?.75:96/72;break;case"pc":case"em":yt=12;break;case"ex":yt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);yt=r}var fr=null;se(),H();var wa=h.__private__.getPageInfo=h.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:qt[R].objId,pageNumber:R,pageContext:qt[R]}},Mo=h.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Q in qt)if(qt[Q].objId===R)break;return wa(Q)},Ql=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:qt[X].objId,pageNumber:X,pageContext:qt[X]}};h.addPage=function(){return yl.apply(this,arguments),this},h.setPage=function(){return zc.apply(this,arguments),Fe.call(this,Se[X]),this},h.insertPage=function(R){return this.addPage(),this.movePage(X,R),this},h.movePage=function(R,Q){var ge,Ee;if(R>Q){ge=Se[R],Ee=qt[R];for(var $e=R;$e>Q;$e--)Se[$e]=Se[$e-1],qt[$e]=qt[$e-1];Se[Q]=ge,qt[Q]=Ee,this.setPage(Q)}else if(R<Q){ge=Se[R],Ee=qt[R];for(var rt=R;rt<Q;rt++)Se[rt]=Se[rt+1],qt[rt]=qt[rt+1];Se[Q]=ge,qt[Q]=Ee,this.setPage(Q)}return this},h.deletePage=function(){return Ws.apply(this,arguments),this},h.__private__.text=h.text=function(R,Q,ge,Ee,$e){var rt,at,Wt,Yt,gn,bn,Xn,lr,Vr,hr=(Ee=Ee||{}).scope||this;if(typeof R=="number"&&typeof Q=="number"&&(typeof ge=="string"||Array.isArray(ge))){var Er=ge;ge=Q,Q=R,R=Er}if(arguments[3]instanceof Oe==0?(Wt=arguments[4],Yt=arguments[5],Rr(Xn=arguments[3])==="object"&&Xn!==null||(typeof Wt=="string"&&(Yt=Wt,Wt=null),typeof Xn=="string"&&(Yt=Xn,Xn=null),typeof Xn=="number"&&(Wt=Xn,Xn=null),Ee={flags:Xn,angle:Wt,align:Yt})):(P("The transform parameter of text() with a Matrix value"),Vr=$e),isNaN(Q)||isNaN(ge)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return hr;var Hr,Xr="",Ar=typeof Ee.lineHeightFactor=="number"?Ee.lineHeightFactor:Lo,Qi=hr.internal.scaleFactor;function Uc(ke){return ke=ke.split("	").join(Array(Ee.TabLen||9).join(" ")),Ei(ke,Xn)}function Gs(ke){for(var je,Pe=ke.concat(),Ie=[],ze=Pe.length;ze--;)typeof(je=Pe.shift())=="string"?Ie.push(je):Array.isArray(ke)&&(je.length===1||je[1]===void 0&&je[2]===void 0)?Ie.push(je[0]):Ie.push([je[0],je[1],je[2]]);return Ie}function w(ke,je){var Pe;if(typeof ke=="string")Pe=je(ke)[0];else if(Array.isArray(ke)){for(var Ie,ze,Ve=ke.concat(),Xe=[],et=Ve.length;et--;)typeof(Ie=Ve.shift())=="string"?Xe.push(je(Ie)[0]):Array.isArray(Ie)&&typeof Ie[0]=="string"&&(ze=je(Ie[0],Ie[1],Ie[2]),Xe.push([ze[0],ze[1],ze[2]]));Pe=Xe}return Pe}var B=!1,q=!0;if(typeof R=="string")B=!0;else if(Array.isArray(R)){var ue=R.concat();at=[];for(var Be,Ge=ue.length;Ge--;)(typeof(Be=ue.shift())!="string"||Array.isArray(Be)&&typeof Be[0]!="string")&&(q=!1);B=q}if(B===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var Tt=Qe/hr.internal.scaleFactor,Qn=Tt*(Ar-1);switch(Ee.baseline){case"bottom":ge-=Qn;break;case"top":ge+=Tt-Qn;break;case"hanging":ge+=Tt-2*Qn;break;case"middle":ge+=Tt/2-Qn}if((bn=Ee.maxWidth||0)>0&&(typeof R=="string"?R=hr.splitTextToSize(R,bn):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(ke,je){return ke.concat(hr.splitTextToSize(je,bn))},[]))),rt={text:R,x:Q,y:ge,options:Ee,mutex:{pdfEscape:Ei,activeFontKey:bt,fonts:pt,activeFontSize:Qe}},Cn.publish("preProcessText",rt),R=rt.text,Wt=(Ee=rt.options).angle,Vr instanceof Oe==0&&Wt&&typeof Wt=="number"){Wt*=Math.PI/180,Ee.rotationDirection===0&&(Wt=-Wt),A===S&&(Wt=-Wt);var Qr=Math.cos(Wt),$n=Math.sin(Wt);Vr=new Oe(Qr,$n,-$n,Qr,0,0)}else Wt&&Wt instanceof Oe&&(Vr=Wt);A!==S||Vr||(Vr=Et),(gn=Ee.charSpace||_l)!==void 0&&(Xr+=N(L(gn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(lr=Ee.horizontalScale)!==void 0&&(Xr+=N(100*lr)+` Tz
`),Ee.lang;var Bn=-1,Dr=Ee.renderingMode!==void 0?Ee.renderingMode:Ee.stroke,Za=hr.internal.getCurrentPageInfo().pageContext;switch(Dr){case 0:case!1:case"fill":Bn=0;break;case 1:case!0:case"stroke":Bn=1;break;case 2:case"fillThenStroke":Bn=2;break;case 3:case"invisible":Bn=3;break;case 4:case"fillAndAddForClipping":Bn=4;break;case 5:case"strokeAndAddPathForClipping":Bn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bn=6;break;case 7:case"addToPathForClipping":Bn=7}var Aa=Za.usedRenderingMode!==void 0?Za.usedRenderingMode:-1;Bn!==-1?Xr+=Bn+` Tr
`:Aa!==-1&&(Xr+=`0 Tr
`),Bn!==-1&&(Za.usedRenderingMode=Bn),Yt=Ee.align||"left";var da,Vo=Qe*Ar,Kf=hr.internal.pageSize.getWidth(),Gf=pt[bt];gn=Ee.charSpace||_l,bn=Ee.maxWidth||0,Xn=Object.assign({autoencode:!0,noBOM:!0},Ee.flags);var Uo=[],Ja=function(ke){return hr.getStringUnitWidth(ke,{font:Gf,charSpace:gn,fontSize:Qe,doKerning:!1})*Qe/Qi};if(Object.prototype.toString.call(R)==="[object Array]"){var nr;at=Gs(R),Yt!=="left"&&(da=at.map(Ja));var za,Zi=0;if(Yt==="right"){Q-=da[0],R=[],Ge=at.length;for(var ic=0;ic<Ge;ic++)ic===0?(za=Wr(Q),nr=Fo(ge)):(za=L(Zi-da[ic]),nr=-Vo),R.push([at[ic],za,nr]),Zi=da[ic]}else if(Yt==="center"){Q-=da[0]/2,R=[],Ge=at.length;for(var El=0;El<Ge;El++)El===0?(za=Wr(Q),nr=Fo(ge)):(za=L((Zi-da[El])/2),nr=-Vo),R.push([at[El],za,nr]),Zi=da[El]}else if(Yt==="left"){R=[],Ge=at.length;for(var wd=0;wd<Ge;wd++)R.push(at[wd])}else if(Yt==="justify"&&Gf.encoding==="Identity-H"){R=[],Ge=at.length,bn=bn!==0?bn:Kf;for(var uo=0,li=0;li<Ge;li++)if(nr=li===0?Fo(ge):-Vo,za=li===0?Wr(Q):uo,li<Ge-1){var ac=L((bn-da[li])/(at[li].split(" ").length-1)),Ca=at[li].split(" ");R.push([Ca[0]+" ",za,nr]),uo=0;for(var Wo=1;Wo<Ca.length;Wo++){var _=(Ja(Ca[Wo-1]+" "+Ca[Wo])-Ja(Ca[Wo]))*Qi+ac;Wo==Ca.length-1?R.push([Ca[Wo],_,0]):R.push([Ca[Wo]+" ",_,0]),uo-=_}}else R.push([at[li],za,nr]);R.push(["",uo,0])}else{if(Yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],Ge=at.length,bn=bn!==0?bn:Kf,li=0;li<Ge;li++){nr=li===0?Fo(ge):-Vo,za=li===0?Wr(Q):0;var k=at[li].split(" ").length-1,z=k>0?(bn-da[li])/k:0;li<Ge-1?Uo.push(N(L(z))):Uo.push(0),R.push([at[li],za,nr])}}}(typeof Ee.R2L=="boolean"?Ee.R2L:dt)===!0&&(R=w(R,function(ke,je,Pe){return[ke.split("").reverse().join(""),je,Pe]})),rt={text:R,x:Q,y:ge,options:Ee,mutex:{pdfEscape:Ei,activeFontKey:bt,fonts:pt,activeFontSize:Qe}},Cn.publish("postProcessText",rt),R=rt.text,Hr=rt.mutex.isHex||!1;var W=pt[bt].encoding;W!=="WinAnsiEncoding"&&W!=="StandardEncoding"||(R=w(R,function(ke,je,Pe){return[Uc(ke),je,Pe]})),at=Gs(R),R=[];for(var G,ne,pe,we=Array.isArray(at[0])?1:0,Ne="",Te=function(ke,je,Pe){var Ie="";return Pe instanceof Oe?(Pe=typeof Ee.angle=="number"?Ke(Pe,new Oe(1,0,0,1,ke,je)):Ke(new Oe(1,0,0,1,ke,je),Pe),A===S&&(Pe=Ke(new Oe(1,0,0,-1,0,0),Pe)),Ie=Pe.join(" ")+` Tm
`):Ie=N(ke)+" "+N(je)+` Td
`,Ie},Me=0;Me<at.length;Me++){switch(Ne="",we){case 1:pe=(Hr?"<":"(")+at[Me][0]+(Hr?">":")"),G=parseFloat(at[Me][1]),ne=parseFloat(at[Me][2]);break;case 0:pe=(Hr?"<":"(")+at[Me]+(Hr?">":")"),G=Wr(Q),ne=Fo(ge)}Uo!==void 0&&Uo[Me]!==void 0&&(Ne=Uo[Me]+` Tw
`),Me===0?R.push(Ne+Te(G,ne,Vr)+pe):we===0?R.push(Ne+pe):we===1&&R.push(Ne+Te(G,ne,Vr)+pe)}R=we===0?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var Ae=`BT
/`;return Ae+=bt+" "+Qe+` Tf
`,Ae+=N(Qe*Ar)+` TL
`,Ae+=_a+`
`,Ae+=Xr,Ae+=R,he(Ae+="ET"),p[bt]=!0,hr};var Zl=h.__private__.clip=h.clip=function(R){return he(R==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return Zl("evenodd")},h.__private__.discardPath=h.discardPath=function(){return he("n"),this};var Hn=h.__private__.isValidStyle=function(R){var Q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(Q=!0),Q};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(R){return Hn(R)&&(u=R),this};var Hs=h.__private__.getStyle=h.getStyle=function(R){var Q=u;switch(R){case"D":case"S":Q="S";break;case"F":Q="f";break;case"FD":case"DF":Q="B";break;case"f":case"f*":case"B":case"B*":Q=R}return Q},Ro=h.close=function(){return he("h"),this};h.stroke=function(){return he("S"),this},h.fill=function(R){return xs("f",R),this},h.fillEvenOdd=function(R){return xs("f*",R),this},h.fillStroke=function(R){return xs("B",R),this},h.fillStrokeEvenOdd=function(R){return xs("B*",R),this};var xs=function(R,Q){Rr(Q)==="object"?Hf(Q,R):he(R)},Wn=function(R){R===null||A===S&&R===void 0||(R=Hs(R),he(R))};function _u(R,Q,ge,Ee,$e){var rt=new xm(Q||this.boundingBox,ge||this.xStep,Ee||this.yStep,this.gState,$e||this.matrix);rt.stream=this.stream;var at=R+"$$"+this.cloneIndex+++"$$";return ct(at,rt),rt}var Hf=function(R,Q){var ge=pn[R.key],Ee=Ht[ge];if(Ee instanceof vh)he("q"),he(qf(Q)),Ee.gState&&h.setGState(Ee.gState),he(R.matrix.toString()+" cm"),he("/"+ge+" sh"),he("Q");else if(Ee instanceof xm){var $e=new Oe(1,0,0,-1,0,Qa());R.matrix&&($e=$e.multiply(R.matrix||Et),ge=_u.call(Ee,R.key,R.boundingBox,R.xStep,R.yStep,$e).id),he("q"),he("/Pattern cs"),he("/"+ge+" scn"),Ee.gState&&h.setGState(Ee.gState),he(Q),he("Q")}},qf=function(R){switch(R){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Gi=h.moveTo=function(R,Q){return he(N(L(R))+" "+N(V(Q))+" m"),this},ws=h.lineTo=function(R,Q){return he(N(L(R))+" "+N(V(Q))+" l"),this},Sa=h.curveTo=function(R,Q,ge,Ee,$e,rt){return he([N(L(R)),N(V(Q)),N(L(ge)),N(V(Ee)),N(L($e)),N(V(rt)),"c"].join(" ")),this};h.__private__.line=h.line=function(R,Q,ge,Ee,$e){if(isNaN(R)||isNaN(Q)||isNaN(ge)||isNaN(Ee)||!Hn($e))throw new Error("Invalid arguments passed to jsPDF.line");return A===b?this.lines([[ge-R,Ee-Q]],R,Q,[1,1],$e||"S"):this.lines([[ge-R,Ee-Q]],R,Q,[1,1]).stroke()},h.__private__.lines=h.lines=function(R,Q,ge,Ee,$e,rt){var at,Wt,Yt,gn,bn,Xn,lr,Vr,hr,Er,Hr,Xr;if(typeof R=="number"&&(Xr=ge,ge=Q,Q=R,R=Xr),Ee=Ee||[1,1],rt=rt||!1,isNaN(Q)||isNaN(ge)||!Array.isArray(R)||!Array.isArray(Ee)||!Hn($e)||typeof rt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Gi(Q,ge),at=Ee[0],Wt=Ee[1],gn=R.length,Er=Q,Hr=ge,Yt=0;Yt<gn;Yt++)(bn=R[Yt]).length===2?(Er=bn[0]*at+Er,Hr=bn[1]*Wt+Hr,ws(Er,Hr)):(Xn=bn[0]*at+Er,lr=bn[1]*Wt+Hr,Vr=bn[2]*at+Er,hr=bn[3]*Wt+Hr,Er=bn[4]*at+Er,Hr=bn[5]*Wt+Hr,Sa(Xn,lr,Vr,hr,Er,Hr));return rt&&Ro(),Wn($e),this},h.path=function(R){for(var Q=0;Q<R.length;Q++){var ge=R[Q],Ee=ge.c;switch(ge.op){case"m":Gi(Ee[0],Ee[1]);break;case"l":ws(Ee[0],Ee[1]);break;case"c":Sa.apply(this,Ee);break;case"h":Ro()}}return this},h.__private__.rect=h.rect=function(R,Q,ge,Ee,$e){if(isNaN(R)||isNaN(Q)||isNaN(ge)||isNaN(Ee)||!Hn($e))throw new Error("Invalid arguments passed to jsPDF.rect");return A===b&&(Ee=-Ee),he([N(L(R)),N(V(Q)),N(L(ge)),N(L(Ee)),"re"].join(" ")),Wn($e),this},h.__private__.triangle=h.triangle=function(R,Q,ge,Ee,$e,rt,at){if(isNaN(R)||isNaN(Q)||isNaN(ge)||isNaN(Ee)||isNaN($e)||isNaN(rt)||!Hn(at))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ge-R,Ee-Q],[$e-ge,rt-Ee],[R-$e,Q-rt]],R,Q,[1,1],at,!0),this},h.__private__.roundedRect=h.roundedRect=function(R,Q,ge,Ee,$e,rt,at){if(isNaN(R)||isNaN(Q)||isNaN(ge)||isNaN(Ee)||isNaN($e)||isNaN(rt)||!Hn(at))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Wt=4/3*(Math.SQRT2-1);return $e=Math.min($e,.5*ge),rt=Math.min(rt,.5*Ee),this.lines([[ge-2*$e,0],[$e*Wt,0,$e,rt-rt*Wt,$e,rt],[0,Ee-2*rt],[0,rt*Wt,-$e*Wt,rt,-$e,rt],[2*$e-ge,0],[-$e*Wt,0,-$e,-rt*Wt,-$e,-rt],[0,2*rt-Ee],[0,-rt*Wt,$e*Wt,-rt,$e,-rt]],R+$e,Q,[1,1],at,!0),this},h.__private__.ellipse=h.ellipse=function(R,Q,ge,Ee,$e){if(isNaN(R)||isNaN(Q)||isNaN(ge)||isNaN(Ee)||!Hn($e))throw new Error("Invalid arguments passed to jsPDF.ellipse");var rt=4/3*(Math.SQRT2-1)*ge,at=4/3*(Math.SQRT2-1)*Ee;return Gi(R+ge,Q),Sa(R+ge,Q-at,R+rt,Q-Ee,R,Q-Ee),Sa(R-rt,Q-Ee,R-ge,Q-at,R-ge,Q),Sa(R-ge,Q+at,R-rt,Q+Ee,R,Q+Ee),Sa(R+rt,Q+Ee,R+ge,Q+at,R+ge,Q),Wn($e),this},h.__private__.circle=h.circle=function(R,Q,ge,Ee){if(isNaN(R)||isNaN(Q)||isNaN(ge)||!Hn(Ee))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,Q,ge,ge,Ee)},h.setFont=function(R,Q,ge){return ge&&(Q=j(Q,ge)),bt=$c(R,Q,{disableWarning:!1}),this};var Yi=h.__private__.getFont=h.getFont=function(){return pt[$c.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var R,Q,ge={};for(R in Rt)if(Rt.hasOwnProperty(R))for(Q in ge[R]=[],Rt[R])Rt[R].hasOwnProperty(Q)&&ge[R].push(Q);return ge},h.addFont=function(R,Q,ge,Ee,$e){var rt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&rt.indexOf(arguments[3])!==-1?$e=arguments[3]:arguments[3]&&rt.indexOf(arguments[3])==-1&&(ge=j(ge,Ee)),Us.call(this,R,Q,ge,$e=$e||"Identity-H")};var Lo,Jl=t.lineWidth||.200025,Xt=h.__private__.getLineWidth=h.getLineWidth=function(){return Jl},Xi=h.__private__.setLineWidth=h.setLineWidth=function(R){return Jl=R,he(N(L(R))+" w"),this};h.__private__.setLineDash=hn.API.setLineDash=hn.API.setLineDashPattern=function(R,Q){if(R=R||[],Q=Q||0,isNaN(Q)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(ge){return N(L(ge))}).join(" "),Q=N(L(Q)),he("["+R+"] "+Q+" d"),this};var ec=h.__private__.getLineHeight=h.getLineHeight=function(){return Qe*Lo};h.__private__.getLineHeight=h.getLineHeight=function(){return Qe*Lo};var tc=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(Lo=R),this},Au=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Lo};tc(t.lineHeight);var Wr=h.__private__.getHorizontalCoordinate=function(R){return L(R)},Fo=h.__private__.getVerticalCoordinate=function(R){return A===S?R:qt[X].mediaBox.topRightY-qt[X].mediaBox.bottomLeftY-L(R)},Ss=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(R){return N(Wr(R))},wl=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(R){return N(Fo(R))},co=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Br(co)},h.__private__.setStrokeColor=h.setDrawColor=function(R,Q,ge,Ee){return co=Tr({ch1:R,ch2:Q,ch3:ge,ch4:Ee,pdfColorType:"draw",precision:2}),he(co),this};var Sl=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Br(Sl)},h.__private__.setFillColor=h.setFillColor=function(R,Q,ge,Ee){return Sl=Tr({ch1:R,ch2:Q,ch3:ge,ch4:Ee,pdfColorType:"fill",precision:2}),he(Sl),this};var _a=t.textColor||"0 g",_s=h.__private__.getTextColor=h.getTextColor=function(){return Br(_a)};h.__private__.setTextColor=h.setTextColor=function(R,Q,ge,Ee){return _a=Tr({ch1:R,ch2:Q,ch3:ge,ch4:Ee,pdfColorType:"text",precision:3}),this};var _l=t.charSpace,Cu=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(_l||0)};h.__private__.setCharSpace=h.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _l=R,this};var or=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(R){var Q=h.CapJoinStyles[R];if(Q===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return or=Q,he(Q+" J"),this};var ju=0;h.__private__.setLineJoin=h.setLineJoin=function(R){var Q=h.CapJoinStyles[R];if(Q===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ju=Q,he(Q+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(N(L(R))+" M"),this},h.GState=P5,h.setGState=function(R){(R=typeof R=="string"?dn[wt[R]]:nc(null,R)).equals(sr)||(he("/"+R.id+" gs"),sr=R)};var nc=function(R,Q){if(!R||!wt[R]){var ge=!1;for(var Ee in dn)if(dn.hasOwnProperty(Ee)&&dn[Ee].equals(Q)){ge=!0;break}if(ge)Q=dn[Ee];else{var $e="GS"+(Object.keys(dn).length+1).toString(10);dn[$e]=Q,Q.id=$e}return R&&(wt[R]=Q.id),Cn.publish("addGState",Q),Q}};h.addGState=function(R,Q){return nc(R,Q),this},h.saveGraphicsState=function(){return he("q"),Ct.push({key:bt,size:Qe,color:_a}),this},h.restoreGraphicsState=function(){he("Q");var R=Ct.pop();return bt=R.key,Qe=R.size,_a=R.color,sr=null,this},h.setCurrentTransformationMatrix=function(R){return he(R.toString()+" cm"),this},h.comment=function(R){return he("#"+R),this};var qs=function(R,Q){var ge=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ge},set:function(rt){isNaN(rt)||(ge=parseFloat(rt))}});var Ee=Q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ee},set:function(rt){isNaN(rt)||(Ee=parseFloat(rt))}});var $e="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return $e},set:function(rt){$e=rt.toString()}}),this},zo=function(R,Q,ge,Ee){qs.call(this,R,Q),this.type="rect";var $e=ge||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return $e},set:function(at){isNaN(at)||($e=parseFloat(at))}});var rt=Ee||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return rt},set:function(at){isNaN(at)||(rt=parseFloat(at))}}),this},$o=function(){this.page=mn,this.currentPage=X,this.pages=Se.slice(0),this.pagesContext=qt.slice(0),this.x=nt,this.y=Bt,this.matrix=ft,this.width=As(X),this.height=Ks(X),this.outputDestination=He,this.id="",this.objectNumber=-1};$o.prototype.restore=function(){mn=this.page,X=this.currentPage,qt=this.pagesContext,Se=this.pages,nt=this.x,Bt=this.y,ft=this.matrix,rc(X,this.width),Fa(X,this.height),He=this.outputDestination};var Al=function(R,Q,ge,Ee,$e){Re.push(new $o),mn=X=0,Se=[],nt=R,Bt=Q,ft=$e,Xa([ge,Ee])};for(var Cl in h.beginFormObject=function(R,Q,ge,Ee,$e){return Al(R,Q,ge,Ee,$e),this},h.endFormObject=function(R){return function(Q){if(gs[Q])Re.pop().restore();else{var ge=new $o,Ee="Xo"+(Object.keys($r).length+1).toString(10);ge.id=Ee,gs[Q]=Ee,$r[Ee]=ge,Cn.publish("addFormObject",ge),Re.pop().restore()}}(R),this},h.doFormObject=function(R,Q){var ge=$r[gs[R]];return he("q"),he(Q.toString()+" cm"),he("/"+ge.id+" Do"),he("Q"),this},h.getFormObject=function(R){var Q=$r[gs[R]];return{x:Q.x,y:Q.y,width:Q.width,height:Q.height,matrix:Q.matrix}},h.save=function(R,Q){return R=R||"generated.pdf",(Q=Q||{}).returnPromise=Q.returnPromise||!1,Q.returnPromise===!1?(ph(ys(Yn()),R),typeof ph.unload=="function"&&Pn.setTimeout&&setTimeout(ph.unload,911),this):new Promise(function(ge,Ee){try{var $e=ph(ys(Yn()),R);typeof ph.unload=="function"&&Pn.setTimeout&&setTimeout(ph.unload,911),ge($e)}catch(rt){Ee(rt.message)}})},hn.API)hn.API.hasOwnProperty(Cl)&&(Cl==="events"&&hn.API.events.length?function(R,Q){var ge,Ee,$e;for($e=Q.length-1;$e!==-1;$e--)ge=Q[$e][0],Ee=Q[$e][1],R.subscribe.apply(R,[ge].concat(typeof Ee=="function"?[Ee]:Ee))}(Cn,hn.API.events):h[Cl]=hn.API[Cl]);function As(R){return qt[R].mediaBox.topRightX-qt[R].mediaBox.bottomLeftX}function rc(R,Q){qt[R].mediaBox.topRightX=Q+qt[R].mediaBox.bottomLeftX}function Ks(R){return qt[R].mediaBox.topRightY-qt[R].mediaBox.bottomLeftY}function Fa(R,Q){qt[R].mediaBox.topRightY=Q+qt[R].mediaBox.bottomLeftY}var jl=h.getPageWidth=function(R){return As(R=R||X)/yt},Bo=h.setPageWidth=function(R,Q){rc(R,Q*yt)},Qa=h.getPageHeight=function(R){return Ks(R=R||X)/yt},Vc=h.setPageHeight=function(R,Q){Fa(R,Q*yt)};return h.internal={pdfEscape:Ei,getStyle:Hs,getFont:Yi,getFontSize:ht,getCharSpace:Cu,getTextColor:_s,getLineHeight:ec,getLineHeightFactor:Au,getLineWidth:Xt,write:Ye,getHorizontalCoordinate:Wr,getVerticalCoordinate:Fo,getCoordinateString:Ss,getVerticalCoordinateString:wl,collections:{},newObject:yn,newAdditionalObject:qn,newObjectDeferred:Gn,newObjectDeferredBegin:Ft,getFilters:er,putStream:Sr,events:Cn,scaleFactor:yt,pageSize:{getWidth:function(){return jl(X)},setWidth:function(R){Bo(X,R)},getHeight:function(){return Qa(X)},setHeight:function(R){Vc(X,R)}},encryptionOptions:d,encryption:fr,getEncryptor:function(R){return d!==null?fr.encryptor(R,0):function(Q){return Q}},output:ua,getNumberOfPages:bl,pages:Se,out:he,f2:T,f3:M,getPageInfo:wa,getPageInfoByObjId:Mo,getCurrentPageInfo:Ql,getPDFVersion:m,Point:qs,Rectangle:zo,Matrix:Oe,hasHotfix:bs},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return jl(X)},set:function(R){Bo(X,R)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Qa(X)},set:function(R){Vc(X,R)},enumerable:!0,configurable:!0}),(function(R){for(var Q=0,ge=vt.length;Q<ge;Q++){var Ee=Us.call(this,R[Q][0],R[Q][1],R[Q][2],vt[Q][3],!0);f===!1&&(p[Ee]=!0);var $e=R[Q][0].split("-");Fc({id:Ee,fontName:$e[0],fontStyle:$e[1]||""})}Cn.publish("addFonts",{fonts:pt,dictionary:Rt})}).call(h,vt),bt="F1",yl(i,n),Cn.publish("initialized"),h}Kp.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Kp.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Kp.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Kp.prototype.processOwnerPassword=function(t,e){return gk(mk(e).substr(0,5),t)},Kp.prototype.encryptor=function(t,e){var n=mk(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return gk(n,r)}},P5.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Rr(t)!==Rr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},hn.API={events:[]},hn.version="3.0.3";var $i=hn.API,rI=1,kp=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$p=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},On=function(t){return t.toFixed(2)},Md=function(t){return t.toFixed(5)};$i.__acroform__={};var To=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},G$=function(t){return t*rI},qc=function(t){var e=new CJ,n=rn.internal.getHeight(t)||0,r=rn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(On(r)),Number(On(n))],e},GGe=$i.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},YGe=$i.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},XGe=$i.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},sa=$i.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return XGe(t,e-1)},oa=$i.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return GGe(t,e-1)},la=$i.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return YGe(t,e-1)},QGe=$i.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],a=t[1],s=t[2],o=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(i+s)||0,l.upperRight_Y=r(a)||0,[Number(On(l.lowerLeft_X)),Number(On(l.lowerLeft_Y)),Number(On(l.upperRight_X)),Number(On(l.upperRight_Y))]},ZGe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=vk(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+On(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=qc(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},vk=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(T){return T.split(`
`)}):i.map(function(T){return[T]});var a=n,s=rn.internal.getHeight(t)||0;s=s<0?-s:s;var o=rn.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(T,M,L){if(T+1<i.length){var V=M+" "+i[T+1][0];return A1(V,t,L).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var u,d,f=A1("3",t,a).height,p=t.multiline?s-a:(s-f)/2,h=p+=2,g=0,m=0,v=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+A1(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var y="",b=0,S=0;S<i.length;S++)if(i.hasOwnProperty(S)){var A=!1;if(i[S].length!==1&&v!==i[S].length-1){if((f+2)*(b+2)+2>s)continue e;y+=i[S][v],A=!0,m=S,S--}else{y=(y+=i[S][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var C=parseInt(S),D=l(C,y,a),j=S>=i.length-1;if(D&&!j){y+=" ",v=0;continue}if(D||j){if(j)m=C;else if(t.multiline&&(f+2)*(b+2)+2>s)continue e}else{if(!t.multiline||(f+2)*(b+2)+2>s)continue e;m=C}}for(var N="",P=g;P<=m;P++){var O=i[P];if(t.multiline){if(P===m){N+=O[v]+" ",v=(v+1)%O.length;continue}if(P===g){N+=O[O.length-1]+" ";continue}}N+=O[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,d=A1(N,t,a).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;default:u=2}e+=On(u)+" "+On(h)+` Td
`,e+="("+kp(N)+`) Tj
`,e+=-On(u)+` 0 Td
`,h=-(a+2),d=0,g=A?m:m+1,b++,y=""}break}return r.text=e,r.fontSize=a,r},A1=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},JGe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},eYe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},tYe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Rc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(JGe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");rI=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new jJ,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&eYe(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var a=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var o=r[s],l=[],u=o.Rect;if(o.Rect&&(o.Rect=QGe(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=rn.createDefaultAppearanceStream(o),Rr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=ZGe(o);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var h=o.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var g=h[s];typeof g=="function"&&(g=g.call(i,o)),f+="/"+s+" "+g+" ",i.internal.acroformPlugin.xForms.indexOf(g)>=0||i.internal.acroformPlugin.xForms.push(g)}}else typeof(g=h)=="function"&&(g=g.call(i,o)),f+="/"+s+" "+g,i.internal.acroformPlugin.xForms.indexOf(g)>=0||i.internal.acroformPlugin.xForms.push(g);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}a&&function(m,v){for(var y in m)if(m.hasOwnProperty(y)){var b=y,S=m[y];v.internal.newObjectDeferredBegin(S.objId,!0),Rr(S)==="object"&&typeof S.putStream=="function"&&S.putStream(),delete m[b]}}(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},AJ=$i.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(s){return s};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),Rr(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+kp(r(t[a].toString()))+")"):i+=t[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},wj=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+kp(r(t))+")"},nu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};nu.prototype.toString=function(){return this.objId+" 0 R"},nu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},nu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:AJ(i,this.objId,this.scope)}):i instanceof nu?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var CJ=function(){nu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};To(CJ,nu);var jJ=function(){nu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+kp(n(t))+")"}},set:function(n){t=n}})};To(jJ,nu);var Rc=function t(){nu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!sa(e,3)},set:function(y){y?this.F=oa(e,3):this.F=la(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof k5)return;a="FieldObject"+t.FieldNum++}var y=function(b){return b};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+kp(y(a))+")"},set:function(y){a=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(y){a=y}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/rI:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof k5||this instanceof Bh))return wj(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ua==0?wj(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof Ua==0?y.substr(0,1)==="("?$p(y.substr(1,y.length-2)):$p(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ua==1?$p(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Ua==1?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ua==0?wj(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof Ua==0?y.substr(0,1)==="("?$p(y.substr(1,y.length-2)):$p(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ua==1?$p(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Ua==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(y){y=!!y,m=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,1)},set:function(y){y?this.Ff=oa(this.Ff,1):this.Ff=la(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,2)},set:function(y){y?this.Ff=oa(this.Ff,2):this.Ff=la(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,3)},set:function(y){y?this.Ff=oa(this.Ff,3):this.Ff=la(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;default:v=0}}})};To(Rc,nu);var Lm=function(){Rc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return AJ(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(a,s,o){o||(o=1);for(var l,u=[];l=s.exec(a);)u.push(l[o]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,18)},set:function(n){n?this.Ff=oa(this.Ff,18):this.Ff=la(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=oa(this.Ff,19):this.Ff=la(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,20)},set:function(n){n?(this.Ff=oa(this.Ff,20),e.sort()):this.Ff=la(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,22)},set:function(n){n?this.Ff=oa(this.Ff,22):this.Ff=la(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,23)},set:function(n){n?this.Ff=oa(this.Ff,23):this.Ff=la(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,27)},set:function(n){n?this.Ff=oa(this.Ff,27):this.Ff=la(this.Ff,27)}}),this.hasAppearanceStream=!1};To(Lm,Rc);var Fm=function(){Lm.call(this),this.fontName="helvetica",this.combo=!1};To(Fm,Lm);var zm=function(){Fm.call(this),this.combo=!0};To(zm,Fm);var l2=function(){zm.call(this),this.edit=!0};To(l2,zm);var Ua=function(){Rc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,15)},set:function(n){n?this.Ff=oa(this.Ff,15):this.Ff=la(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,16)},set:function(n){n?this.Ff=oa(this.Ff,16):this.Ff=la(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,17)},set:function(n){n?this.Ff=oa(this.Ff,17):this.Ff=la(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,26)},set:function(n){n?this.Ff=oa(this.Ff,26):this.Ff=la(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+kp(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Rr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};To(Ua,Rc);var c2=function(){Ua.call(this),this.pushButton=!0};To(c2,Ua);var $m=function(){Ua.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};To($m,Ua);var k5=function(){var t,e;Rc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),r)s.push("/"+a+" ("+kp(i(r[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Rr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};To(k5,Rc),$m.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},$m.prototype.createOption=function(t){var e=new k5;return e.Parent=this,e.optionName=t,this.Kids.push(e),nYe.call(this.scope,e),e};var u2=function(){Ua.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rn.CheckBox.createAppearanceStream()};To(u2,Ua);var Bh=function(){Rc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,13)},set:function(e){e?this.Ff=oa(this.Ff,13):this.Ff=la(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,21)},set:function(e){e?this.Ff=oa(this.Ff,21):this.Ff=la(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,23)},set:function(e){e?this.Ff=oa(this.Ff,23):this.Ff=la(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,24)},set:function(e){e?this.Ff=oa(this.Ff,24):this.Ff=la(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,25)},set:function(e){e?this.Ff=oa(this.Ff,25):this.Ff=la(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,26)},set:function(e){e?this.Ff=oa(this.Ff,26):this.Ff=la(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};To(Bh,Rc);var d2=function(){Bh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!sa(this.Ff,14)},set:function(t){t?this.Ff=oa(this.Ff,14):this.Ff=la(this.Ff,14)}}),this.password=!0};To(d2,Bh);var rn={CheckBox:{createAppearanceStream:function(){return{N:{On:rn.CheckBox.YesNormal},D:{On:rn.CheckBox.YesPushDown,Off:rn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=qc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=vk(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+On(rn.internal.getWidth(t))+" "+On(rn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+On(a.fontSize)+" Tf "+i),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=qc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],a=rn.internal.getHeight(t),s=rn.internal.getWidth(t),o=vk(t,t.caption);return i.push("1 g"),i.push("0 0 "+On(s)+" "+On(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+On(s-1)+" "+On(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+On(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=qc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+On(rn.internal.getWidth(t))+" "+On(rn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:rn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=rn.RadioButton.Circle.YesNormal,e.D[t]=rn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=qc(t);e.scope=t.scope;var n=[],r=rn.internal.getWidth(t)<=rn.internal.getHeight(t)?rn.internal.getWidth(t)/4:rn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=rn.internal.Bezier_C,a=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Md(rn.internal.getWidth(t)/2)+" "+Md(rn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=qc(t);e.scope=t.scope;var n=[],r=rn.internal.getWidth(t)<=rn.internal.getHeight(t)?rn.internal.getWidth(t)/4:rn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*rn.internal.Bezier_C).toFixed(5)),s=Number((r*rn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Md(rn.internal.getWidth(t)/2)+" "+Md(rn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Md(rn.internal.getWidth(t)/2)+" "+Md(rn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=qc(t);e.scope=t.scope;var n=[],r=rn.internal.getWidth(t)<=rn.internal.getHeight(t)?rn.internal.getWidth(t)/4:rn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*rn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Md(rn.internal.getWidth(t)/2)+" "+Md(rn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:rn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=rn.RadioButton.Cross.YesNormal,e.D[t]=rn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=qc(t);e.scope=t.scope;var n=[],r=rn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+On(rn.internal.getWidth(t)-2)+" "+On(rn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(On(r.x1.x)+" "+On(r.x1.y)+" m"),n.push(On(r.x2.x)+" "+On(r.x2.y)+" l"),n.push(On(r.x4.x)+" "+On(r.x4.y)+" m"),n.push(On(r.x3.x)+" "+On(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=qc(t);e.scope=t.scope;var n=rn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+On(rn.internal.getWidth(t))+" "+On(rn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+On(rn.internal.getWidth(t)-2)+" "+On(rn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(On(n.x1.x)+" "+On(n.x1.y)+" m"),r.push(On(n.x2.x)+" "+On(n.x2.y)+" l"),r.push(On(n.x4.x)+" "+On(n.x4.y)+" m"),r.push(On(n.x3.x)+" "+On(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=qc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+On(rn.internal.getWidth(t))+" "+On(rn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};rn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=rn.internal.getWidth(t),n=rn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},rn.internal.getWidth=function(t){var e=0;return Rr(t)==="object"&&(e=G$(t.Rect[2])),e},rn.internal.getHeight=function(t){var e=0;return Rr(t)==="object"&&(e=G$(t.Rect[3])),e};var nYe=$i.addField=function(t){if(tYe(this,t),!(t instanceof Rc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};$i.AcroFormChoiceField=Lm,$i.AcroFormListBox=Fm,$i.AcroFormComboBox=zm,$i.AcroFormEditBox=l2,$i.AcroFormButton=Ua,$i.AcroFormPushButton=c2,$i.AcroFormRadioButton=$m,$i.AcroFormCheckBox=u2,$i.AcroFormTextField=Bh,$i.AcroFormPasswordField=d2,$i.AcroFormAppearance=rn,$i.AcroForm={ChoiceField:Lm,ListBox:Fm,ComboBox:zm,EditBox:l2,Button:Ua,PushButton:c2,RadioButton:$m,CheckBox:u2,TextField:Bh,PasswordField:d2,Appearance:rn},hn.AcroForm={ChoiceField:Lm,ListBox:Fm,ComboBox:zm,EditBox:l2,Button:Ua,PushButton:c2,RadioButton:$m,CheckBox:u2,TextField:Bh,PasswordField:d2,Appearance:rn};hn.AcroForm;function EJ(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(T,M){var L,V,K,Z,Y,H=n;if((M=M||n)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(D(T))for(Y in r)for(K=r[Y],L=0;L<K.length;L+=1){for(Z=!0,V=0;V<K[L].length;V+=1)if(K[L][V]!==void 0&&K[L][V]!==T[V]){Z=!1;break}if(Z===!0){H=Y;break}}else for(Y in r)for(K=r[Y],L=0;L<K.length;L+=1){for(Z=!0,V=0;V<K[L].length;V+=1)if(K[L][V]!==void 0&&K[L][V]!==T.charCodeAt(V)){Z=!1;break}if(Z===!0){H=Y;break}}return H===n&&M!==n&&(H=M),H},a=function T(M){for(var L=this.internal.write,V=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);M.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:M.width}),Z.push({key:"Height",value:M.height}),M.colorSpace===y.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(M.palette.length/3-1)+" "+("sMask"in M&&M.sMask!==void 0?M.objectId+2:M.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+M.colorSpace}),M.colorSpace===y.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:M.bitsPerComponent}),"decodeParameters"in M&&M.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+M.decodeParameters+">>"}),"transparency"in M&&Array.isArray(M.transparency)&&M.transparency.length>0){for(var Y="",H=0,ee=M.transparency.length;H<ee;H++)Y+=M.transparency[H]+" "+M.transparency[H]+" ";Z.push({key:"Mask",value:"["+Y+"]"})}M.sMask!==void 0&&Z.push({key:"SMask",value:M.objectId+1+" 0 R"});var le=M.filter!==void 0?["/"+M.filter]:void 0;if(V({data:M.data,additionalKeyValues:Z,alreadyAppliedFilters:le,objectId:M.objectId}),L("endobj"),"sMask"in M&&M.sMask!==void 0){var se,$=(se=M.sMaskBitsPerComponent)!==null&&se!==void 0?se:M.bitsPerComponent,X={width:M.width,height:M.height,colorSpace:"DeviceGray",bitsPerComponent:$,data:M.sMask};"filter"in M&&(X.decodeParameters="/Predictor ".concat(M.predictor," /Colors 1 /BitsPerComponent ").concat($," /Columns ").concat(M.width),X.filter=M.filter),T.call(this,X)}if(M.colorSpace===y.INDEXED){var te=this.internal.newObject();V({data:N(new Uint8Array(M.palette)),objectId:te}),L("endobj")}},s=function(){var T=this.internal.collections[e+"images"];for(var M in T)a.call(this,T[M])},o=function(){var T,M=this.internal.collections[e+"images"],L=this.internal.write;for(var V in M)L("/I"+(T=M[V]).index,T.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var T=this.internal.collections[e+"images"];return l.call(this),T},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(T){return typeof t["process"+T.toUpperCase()]=="function"},p=function(T){return Rr(T)==="object"&&T.nodeType===1},h=function(T,M){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var L=""+T.getAttribute("src");if(L.indexOf("data:image/")===0)return o2(unescape(L).split("base64,").pop());var V=t.loadFile(L,!0);if(V!==void 0)return V}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var K;switch(M){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;default:K="image/jpeg"}return o2(T.toDataURL(K,1).split("base64,").pop())}},g=function(T){var M=this.internal.collections[e+"images"];if(M){for(var L in M)if(T===M[L].alias)return M[L]}},m=function(T,M,L){return T||M||(T=-96,M=-96),T<0&&(T=-1*L.width*72/T/this.internal.scaleFactor),M<0&&(M=-1*L.height*72/M/this.internal.scaleFactor),T===0&&(T=M*L.width/L.height),M===0&&(M=T*L.height/L.width),[T,M]},v=function(T,M,L,V,K,Z){var Y=m.call(this,L,V,K),H=this.internal.getCoordinateString,ee=this.internal.getVerticalCoordinateString,le=u.call(this);if(L=Y[0],V=Y[1],le[K.index]=K,Z){Z*=Math.PI/180;var se=Math.cos(Z),$=Math.sin(Z),X=function(oe){return oe.toFixed(4)},te=[X(se),X($),X(-1*$),X(se),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,H(T),ee(M+V),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([H(L),"0","0",H(V),"0","0","cm"].join(" "))):this.internal.write([H(L),"0","0",H(V),H(T),ee(M+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},y=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=t.__addimage__.sHashCode=function(T){var M,L,V=0;if(typeof T=="string")for(L=T.length,M=0;M<L;M++)V=(V<<5)-V+T.charCodeAt(M),V|=0;else if(D(T))for(L=T.byteLength/2,M=0;M<L;M++)V=(V<<5)-V+T[M],V|=0;return V},A=t.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var M=!0;return T.length===0&&(M=!1),T.length%4!=0&&(M=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(M=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(M=!1),M},C=t.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var M=T.indexOf(",");return M<0?null:T.substring(0,M).trim().endsWith("base64")?T.substring(M+1):null};t.__addimage__.isArrayBuffer=function(T){return T instanceof ArrayBuffer};var D=t.__addimage__.isArrayBufferView=function(T){return T instanceof Int8Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array},j=t.__addimage__.binaryStringToUint8Array=function(T){for(var M=T.length,L=new Uint8Array(M),V=0;V<M;V++)L[V]=T.charCodeAt(V);return L},N=t.__addimage__.arrayBufferToBinaryString=function(T){for(var M="",L=D(T)?T:new Uint8Array(T),V=0;V<L.length;V+=8192)M+=String.fromCharCode.apply(null,L.subarray(V,V+8192));return M};t.addImage=function(){var T,M,L,V,K,Z,Y,H,ee;if(typeof arguments[1]=="number"?(M=n,L=arguments[1],V=arguments[2],K=arguments[3],Z=arguments[4],Y=arguments[5],H=arguments[6],ee=arguments[7]):(M=arguments[1],L=arguments[2],V=arguments[3],K=arguments[4],Z=arguments[5],Y=arguments[6],H=arguments[7],ee=arguments[8]),Rr(T=arguments[0])==="object"&&!p(T)&&"imageData"in T){var le=T;T=le.imageData,M=le.format||M||n,L=le.x||L||0,V=le.y||V||0,K=le.w||le.width||K,Z=le.h||le.height||Z,Y=le.alias||Y,H=le.compression||H,ee=le.rotation||le.angle||ee}var se=this.internal.getFilters();if(H===void 0&&se.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(L)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var $=P.call(this,T,M,Y,H);return v.call(this,L,V,K,Z,$,ee),this};var P=function(T,M,L,V){var K,Z,Y;if(typeof T=="string"&&i(T)===n){T=unescape(T);var H=O(T,!1);(H!==""||(H=t.loadFile(T,!0))!==void 0)&&(T=H)}if(p(T)&&(T=h(T,M)),M=i(T,M),!f(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(((Y=L)==null||Y.length===0)&&(L=function(ee){return typeof ee=="string"||D(ee)?S(ee):D(ee.data)?S(ee.data):null}(T)),(K=g.call(this,L))||(T instanceof Uint8Array||M==="RGBA"||(Z=T,T=j(T)),K=this["process"+M.toUpperCase()](T,d.call(this),L,function(ee){return ee&&typeof ee=="string"&&(ee=ee.toUpperCase()),ee in t.image_compression?ee:b.NONE}(V),Z)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},O=t.__addimage__.convertBase64ToBinaryString=function(T,M){M=typeof M!="boolean"||M;var L,V="";if(typeof T=="string"){var K;L=(K=C(T))!==null&&K!==void 0?K:T;try{V=o2(L)}catch(Z){if(M)throw A(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};t.getImageProperties=function(T){var M,L,V="";if(p(T)&&(T=h(T)),typeof T=="string"&&i(T)===n&&((V=O(T,!1))===""&&(V=t.loadFile(T)||""),T=V),L=i(T),!f(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(T instanceof Uint8Array||(T=j(T)),!(M=this["process"+L.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return M.fileType=L,M}})(hn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};hn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((r=u[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){r=u[p];var h=this.internal.pdfEscape,g=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(m.objId),b=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+h(y(r.contents))+")",a+=" /Popup "+v.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+h(y(b))+") >>",m.content=a;var S=m.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+S,r.open&&(a+=" /Open true"),a+=" >>",v.content=a,this.internal.write(m.objId,"0 R",v.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+o(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var A=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(g(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var C=this.annotations._nameMap[r.options.name];r.options.pageNumber=C.page,r.options.top=C.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(g(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var D=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+D+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,a,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+a)},options:s,type:"link"})},t.textWithLink=function(n,r,i,a){var s,o,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(n,o).length;s=Math.ceil(u*d)}else o=l,s=u;return this.text(n,r,i,a),i+=.2*u,a.align==="center"&&(r-=l/2),a.align==="right"&&(r-=l),this.link(r,i-u,o,s,a),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(hn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(m){return e[m.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},o=t.__arabicParser__.isArabicEndLetter=function(m){return s(m)&&a(m)&&e[m.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(m){return s(m)&&i.indexOf(m.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return s(m)&&a(m)&&e[m.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(m){return s(m)&&a(m)&&e[m.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(m){return s(m)&&a(m)&&e[m.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(m){return s(m)&&a(m)&&e[m.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(m){var v=0,y=n,b="",S=0;for(v=0;v<m.length;v+=1)y[m.charCodeAt(v)]!==void 0?(S++,typeof(y=y[m.charCodeAt(v)])=="number"&&(b+=String.fromCharCode(y),y=n,S=0),v===m.length-1&&(y=n,b+=m.charAt(v-(S-1)),v-=S-1,S=0)):(y=n,b+=m.charAt(v-S),v-=S,S=0);return b};t.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&r[m.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(m,v,y){return s(m)?a(m)===!1?-1:!u(m)||!s(v)&&!s(y)||!s(y)&&o(v)||o(m)&&!s(v)||o(m)&&l(v)||o(m)&&o(v)?0:d(m)&&s(v)&&!o(v)&&s(y)&&u(y)?3:o(m)||!s(y)?1:2:-1},h=function(m){var v=0,y=0,b=0,S="",A="",C="",D=(m=m||"").split("\\s+"),j=[];for(v=0;v<D.length;v+=1){for(j.push(""),y=0;y<D[v].length;y+=1)S=D[v][y],A=D[v][y-1],C=D[v][y+1],s(S)?(b=p(S,A,C),j[v]+=b!==-1?String.fromCharCode(e[S.charCodeAt(0)][b]):S):j[v]+=S;j[v]=f(j[v])}return j.join(" ")},g=t.__arabicParser__.processArabic=t.processArabic=function(){var m,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var b=0;for(y=[],b=0;b<v.length;b+=1)Array.isArray(v[b])?y.push([h(v[b][0]),v[b][1],v[b][2]]):y.push([h(v[b])]);m=y}else m=h(v);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};t.events.push(["preProcessText",g])}(hn.API),hn.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(hn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(m){l=m}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(m){p=m}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(m){g=m}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,g=0,m=0,v=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=u.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,A){return S.concat(v.splitTextToSize(A,y))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)h<(m=this.getStringUnitWidth(l[b],{font:f})*d)&&(h=m);return h!==0&&(g=l.length),{w:h/=p,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,h&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,f,p){if(r.call(this),!d)throw new Error("No data for PDF table.");var h,g,m,v,y=[],b=[],S=[],A={},C={},D=[],j=[],N=(p=p||{}).autoSize||!1,P=p.printHeaders!==!1,O=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,T=p.margins||Object.assign({width:this.getPageWidth()},e),M=typeof p.padding=="number"?p.padding:3,L=p.headerBackgroundColor||"#c8c8c8",V=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=P,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=M,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=V,this.setFontSize(O),f==null)b=y=Object.keys(d[0]),S=y.map(function(){return"left"});else if(Array.isArray(f)&&Rr(f[0])==="object")for(y=f.map(function(le){return le.name}),b=f.map(function(le){return le.prompt||le.name||""}),S=f.map(function(le){return le.align||"left"}),h=0;h<f.length;h+=1)C[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(b=y=f,S=y.map(function(){return"left"}));if(N||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<y.length;h+=1){for(A[v=y[h]]=d.map(function(le){return le[v]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(b[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=A[v],this.setFont(void 0,"normal"),m=0;m<g.length;m+=1)D.push(this.getTextDimensions(g[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);C[v]=Math.max.apply(null,D)+M+M,D=[]}if(P){var K={};for(h=0;h<y.length;h+=1)K[y[h]]={},K[y[h]].text=b[h],K[y[h]].align=S[h];var Z=o.call(this,K,C);j=y.map(function(le){return new a(l,u,C[le],Z,K[le].text,void 0,K[le].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var Y=f.reduce(function(le,se){return le[se.name]=se.align,le},{});for(h=0;h<d.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:d[h]},this);var H=o.call(this,d[h],C);for(m=0;m<y.length;m+=1){var ee=d[h][y[m]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:m,data:ee},this),s.call(this,new a(l,u,C[y[m]],H,ee,h+2,Y[y[m]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(h){var g=l[h];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/p+d+d},this).reduce(function(h,g){return Math.max(h,g)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=l;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(g)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(hn.API);var NJ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},PJ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],yk=EJ(PJ),kJ=[100,200,300,400,500,600,700,800,900],rYe=EJ(kJ);function Sj(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return NJ[a=a||"normal"]?a:"normal"}(t.style),r=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(t.weight),i=function(a){return typeof yk[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function Y$(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var iYe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},X$={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Q$(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Z$(t){return t.trimLeft()}function aYe(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function sYe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var C1,J$,e9,Bp,j1,t9,n9,r9,_j=["times"];function i9(t,e,n,r,i){var a=4,s=s9;switch(i){case hn.API.image_compression.FAST:a=1,s=a9;break;case hn.API.image_compression.MEDIUM:a=6,s=o9;break;case hn.API.image_compression.SLOW:a=9,s=l9}t=function(l,u,d,f){for(var p,h=l.length/u,g=new Uint8Array(l.length+h),m=[oYe,a9,s9,o9,l9],v=0;v<h;v+=1){var y=v*u,b=l.subarray(y,y+u);if(f)g.set(f(b,d,p),y+v);else{for(var S=m.length,A=[],C=0;C<S;C+=1)A[C]=m[C](b,d,p);var D=cYe(A.concat());g.set(A[D],y+v)}p=b}return g}(t,e,Math.ceil(n*r/8),s);var o=dk(t,{level:a});return hn.API.__addimage__.arrayBufferToBinaryString(o)}function oYe(t){var e=Array.apply([],t);return e.unshift(0),e}function a9(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var a=t[i-e]||0;r[i+1]=t[i]-a+256&255}return r}function s9(t,e,n){var r=t.length,i=[];i[0]=2;for(var a=0;a<r;a+=1){var s=n&&n[a]||0;i[a+1]=t[a]-s+256&255}return i}function o9(t,e,n){var r=t.length,i=[];i[0]=3;for(var a=0;a<r;a+=1){var s=t[a-e]||0,o=n&&n[a]||0;i[a+1]=t[a]+256-(s+o>>>1)&255}return i}function l9(t,e,n){var r=t.length,i=[];i[0]=4;for(var a=0;a<r;a+=1){var s=lYe(t[a-e]||0,n&&n[a]||0,n&&n[a-e]||0);i[a+1]=t[a]-s+256&255}return i}function lYe(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),a=Math.abs(t+e-n-n);return r<=i&&r<=a?t:i<=a?e:n}function cYe(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Aj(t,e,n){var r=e*n,i=Math.floor(r/8),a=16-(r-8*i+n),s=(1<<n)-1;return TJ(t,i)>>a&s}function c9(t,e,n,r){var i=n*r,a=Math.floor(i/8),s=16-(i-8*a+r),o=(1<<r)-1,l=(e&o)<<s;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var p=f>>8&255;u.setUint8(d,p)}})(t,a,TJ(t,a)&~(o<<s)&65535|l)}function TJ(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function uYe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,s=1<<1+(7&i);t[e++],t[e++];var o=null,l=null;a&&(o=e,l=s,e+=3*s);var u=!0,d=[],f=0,p=null,h=0,g=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,g=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((T=t[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var m=t[e++];f=t[e++]|t[e++]<<8,p=t[e++],1&m||(p=null),h=m>>2&7,e++;break;case 254:for(;;){if(!((T=t[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,A=t[e++],C=A>>6&1,D=1<<1+(7&A),j=o,N=l,P=!1;A>>7&&(P=!0,j=e,N=D,e+=3*D);var O=e;for(e++;;){var T;if(!((T=t[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}d.push({x:v,y,width:b,height:S,has_local_palette:P,palette_offset:j,palette_size:N,data_offset:O,data_length:e-O,transparent_index:p,interlaced:!!C,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(M){if(M<0||M>=d.length)throw new Error("Frame index out of range.");return d[M]},this.decodeAndBlitFrameBGRA=function(M,L){var V=this.frameInfo(M),K=V.width*V.height,Z=new Uint8Array(K);u9(t,V.data_offset,Z,K);var Y=V.palette_offset,H=V.transparent_index;H===null&&(H=256);var ee=V.width,le=n-ee,se=ee,$=4*(V.y*n+V.x),X=4*((V.y+V.height)*n+V.x),te=$,oe=4*le;V.interlaced===!0&&(oe+=4*n*7);for(var me=8,_e=0,Ce=Z.length;_e<Ce;++_e){var fe=Z[_e];if(se===0&&(se=ee,(te+=oe)>=X&&(oe=4*le+4*n*(me-1),te=$+(ee+le)*(me<<1),me>>=1)),fe===H)te+=4;else{var xe=t[Y+3*fe],Se=t[Y+3*fe+1],ie=t[Y+3*fe+2];L[te++]=ie,L[te++]=Se,L[te++]=xe,L[te++]=255}--se}},this.decodeAndBlitFrameRGBA=function(M,L){var V=this.frameInfo(M),K=V.width*V.height,Z=new Uint8Array(K);u9(t,V.data_offset,Z,K);var Y=V.palette_offset,H=V.transparent_index;H===null&&(H=256);var ee=V.width,le=n-ee,se=ee,$=4*(V.y*n+V.x),X=4*((V.y+V.height)*n+V.x),te=$,oe=4*le;V.interlaced===!0&&(oe+=4*n*7);for(var me=8,_e=0,Ce=Z.length;_e<Ce;++_e){var fe=Z[_e];if(se===0&&(se=ee,(te+=oe)>=X&&(oe=4*le+4*n*(me-1),te=$+(ee+le)*(me<<1),me>>=1)),fe===H)te+=4;else{var xe=t[Y+3*fe],Se=t[Y+3*fe+1],ie=t[Y+3*fe+2];L[te++]=xe,L[te++]=Se,L[te++]=ie,L[te++]=255}--se}}}function u9(t,e,n,r){for(var i=t[e++],a=1<<i,s=a+1,o=s+1,l=i+1,u=(1<<l)-1,d=0,f=0,p=0,h=t[e++],g=new Int32Array(4096),m=null;;){for(;d<16&&h!==0;)f|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<l)break;var v=f&u;if(f>>=l,d-=l,v!==a){if(v===s)break;for(var y=v<o?v:m,b=0,S=y;S>a;)S=g[S]>>8,++b;var A=S;if(p+b+(y!==v?1:0)>r)return void Kr.log("Warning, gif stream longer than expected.");n[p++]=A;var C=p+=b;for(y!==v&&(n[p++]=A),S=y;b--;)S=g[S],n[--C]=255&S,S>>=8;m!==null&&o<4096&&(g[o++]=m<<8|A,o>=u+1&&l<12&&(++l,u=u<<1|1)),m=v}else o=s+1,u=(1<<(l=i+1))-1,m=null}return p!==r&&Kr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Cj(t){var e,n,r,i,a,s=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),p=new Array(65535),h=new Array(64),g=new Array(64),m=[],v=0,y=7,b=new Array(64),S=new Array(64),A=new Array(64),C=new Array(256),D=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z($,X){for(var te=0,oe=0,me=new Array,_e=1;_e<=16;_e++){for(var Ce=1;Ce<=$[_e];Ce++)me[X[oe]]=[],me[X[oe]][0]=te,me[X[oe]][1]=_e,oe++,te++;te*=2}return me}function Y($){for(var X=$[0],te=$[1]-1;te>=0;)X&1<<te&&(v|=1<<y),te--,--y<0&&(v==255?(H(255),H(0)):H(v),y=7,v=0)}function H($){m.push($)}function ee($){H($>>8&255),H(255&$)}function le($,X,te,oe,me){for(var _e,Ce=me[0],fe=me[240],xe=function(Qe,Ot){var ht,dt,It,tn,Zt,$t,on,lt,bt,yt,nt=0;for(bt=0;bt<8;++bt){ht=Qe[nt],dt=Qe[nt+1],It=Qe[nt+2],tn=Qe[nt+3],Zt=Qe[nt+4],$t=Qe[nt+5],on=Qe[nt+6];var Bt=ht+(lt=Qe[nt+7]),ft=ht-lt,pt=dt+on,Rt=dt-on,Ct=It+$t,Ht=It-$t,pn=tn+Zt,dn=tn-Zt,wt=Bt+pn,sr=Bt-pn,mn=pt+Ct,qt=pt-Ct;Qe[nt]=wt+mn,Qe[nt+4]=wt-mn;var Cn=.707106781*(qt+sr);Qe[nt+2]=sr+Cn,Qe[nt+6]=sr-Cn;var ba=.382683433*((wt=dn+Ht)-(qt=Rt+ft)),$r=.5411961*wt+ba,gs=1.306562965*qt+ba,Re=.707106781*(mn=Ht+Rt),Oe=ft+Re,Ke=ft-Re;Qe[nt+5]=Ke+$r,Qe[nt+3]=Ke-$r,Qe[nt+1]=Oe+gs,Qe[nt+7]=Oe-gs,nt+=8}for(nt=0,bt=0;bt<8;++bt){ht=Qe[nt],dt=Qe[nt+8],It=Qe[nt+16],tn=Qe[nt+24],Zt=Qe[nt+32],$t=Qe[nt+40],on=Qe[nt+48];var Et=ht+(lt=Qe[nt+56]),ct=ht-lt,Gt=dt+on,yn=dt-on,Gn=It+$t,Ft=It-$t,qn=tn+Zt,Ri=tn-Zt,kr=Et+qn,Br=Et-qn,Tr=Gt+Gn,er=Gt-Gn;Qe[nt]=kr+Tr,Qe[nt+32]=kr-Tr;var Sr=.707106781*(er+Br);Qe[nt+16]=Br+Sr,Qe[nt+48]=Br-Sr;var oi=.382683433*((kr=Ri+Ft)-(er=yn+ct)),vs=.5411961*kr+oi,xa=1.306562965*er+oi,Do=.707106781*(Tr=Ft+yn),Io=ct+Do,_r=ct-Do;Qe[nt+40]=_r+vs,Qe[nt+24]=_r-vs,Qe[nt+8]=Io+xa,Qe[nt+56]=Io-xa,nt++}for(bt=0;bt<64;++bt)yt=Qe[bt]*Ot[bt],h[bt]=yt>0?yt+.5|0:yt-.5|0;return h}($,X),Se=0;Se<64;++Se)g[j[Se]]=xe[Se];var ie=g[0]-te;te=g[0],ie==0?Y(oe[0]):(Y(oe[p[_e=32767+ie]]),Y(f[_e]));for(var He=63;He>0&&g[He]==0;)He--;if(He==0)return Y(Ce),te;for(var Fe,he=1;he<=He;){for(var Ye=he;g[he]==0&&he<=He;)++he;var mt=he-Ye;if(mt>=16){Fe=mt>>4;for(var vt=1;vt<=Fe;++vt)Y(fe);mt&=15}_e=32767+g[he],Y(me[(mt<<4)+p[_e]]),Y(f[_e]),he++}return He!=63&&Y(Ce),te}function se($){$=Math.min(Math.max($,1),100),a!=$&&(function(X){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],oe=0;oe<64;oe++){var me=s((te[oe]*X+50)/100);me=Math.min(Math.max(me,1),255),o[j[oe]]=me}for(var _e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ce=0;Ce<64;Ce++){var fe=s((_e[Ce]*X+50)/100);fe=Math.min(Math.max(fe,1),255),l[j[Ce]]=fe}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,ie=0;ie<8;ie++)for(var He=0;He<8;He++)u[Se]=1/(o[j[Se]]*xe[ie]*xe[He]*8),d[Se]=1/(l[j[Se]]*xe[ie]*xe[He]*8),Se++}($<50?Math.floor(5e3/$):Math.floor(200-2*$)),a=$)}this.encode=function($,X){X&&se(X),m=new Array,v=0,y=7,ee(65496),ee(65504),ee(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),ee(1),ee(1),H(0),H(0),function(){ee(65499),ee(132),H(0);for(var dt=0;dt<64;dt++)H(o[dt]);H(1);for(var It=0;It<64;It++)H(l[It])}(),function(dt,It){ee(65472),ee(17),H(8),ee(It),ee(dt),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}($.width,$.height),function(){ee(65476),ee(418),H(0);for(var dt=0;dt<16;dt++)H(N[dt+1]);for(var It=0;It<=11;It++)H(P[It]);H(16);for(var tn=0;tn<16;tn++)H(O[tn+1]);for(var Zt=0;Zt<=161;Zt++)H(T[Zt]);H(1);for(var $t=0;$t<16;$t++)H(M[$t+1]);for(var on=0;on<=11;on++)H(L[on]);H(17);for(var lt=0;lt<16;lt++)H(V[lt+1]);for(var bt=0;bt<=161;bt++)H(K[bt])}(),ee(65498),ee(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var te=0,oe=0,me=0;v=0,y=7,this.encode.displayName="_encode_";for(var _e,Ce,fe,xe,Se,ie,He,Fe,he,Ye=$.data,mt=$.width,vt=$.height,Qe=4*mt,Ot=0;Ot<vt;){for(_e=0;_e<Qe;){for(Se=Qe*Ot+_e,He=-1,Fe=0,he=0;he<64;he++)ie=Se+(Fe=he>>3)*Qe+(He=4*(7&he)),Ot+Fe>=vt&&(ie-=Qe*(Ot+1+Fe-vt)),_e+He>=Qe&&(ie-=_e+He-Qe+4),Ce=Ye[ie++],fe=Ye[ie++],xe=Ye[ie++],b[he]=(D[Ce]+D[fe+256|0]+D[xe+512|0]>>16)-128,S[he]=(D[Ce+768|0]+D[fe+1024|0]+D[xe+1280|0]>>16)-128,A[he]=(D[Ce+1280|0]+D[fe+1536|0]+D[xe+1792|0]>>16)-128;te=le(b,u,te,e,r),oe=le(S,d,oe,n,i),me=le(A,d,me,n,i),_e+=32}Ot+=8}if(y>=0){var ht=[];ht[1]=y+1,ht[0]=(1<<y+1)-1,Y(ht)}return ee(65497),new Uint8Array(m)},t=t||50,function(){for(var $=String.fromCharCode,X=0;X<256;X++)C[X]=$(X)}(),e=Z(N,P),n=Z(M,L),r=Z(O,T),i=Z(V,K),function(){for(var $=1,X=2,te=1;te<=15;te++){for(var oe=$;oe<X;oe++)p[32767+oe]=te,f[32767+oe]=[],f[32767+oe][1]=te,f[32767+oe][0]=oe;for(var me=-(X-1);me<=-$;me++)p[32767+me]=te,f[32767+me]=[],f[32767+me][1]=te,f[32767+me][0]=X-1+me;$<<=1,X<<=1}}(),function(){for(var $=0;$<256;$++)D[$]=19595*$,D[$+256|0]=38470*$,D[$+512|0]=7471*$+32768,D[$+768|0]=-11059*$,D[$+1024|0]=-21709*$,D[$+1280|0]=32768*$+8421375,D[$+1536|0]=-27439*$,D[$+1792|0]=-5329*$}(),se(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function dc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function d9(t){function e(P){if(!P)throw Error("assert :P")}function n(P,O,T){for(var M=0;4>M;M++)if(P[O+M]!=T.charCodeAt(M))return!0;return!1}function r(P,O,T,M,L){for(var V=0;V<L;V++)P[O+V]=T[M+V]}function i(P,O,T,M){for(var L=0;L<M;L++)P[O+L]=T}function a(P){return new Int32Array(P)}function s(P,O){for(var T=[],M=0;M<P;M++)T.push(new O);return T}function o(P,O){var T=[];return function M(L,V,K){for(var Z=K[V],Y=0;Y<Z&&(L.push(K.length>V+1?[]:new O),!(K.length<V+1));Y++)M(L[Y],V+1,K)}(T,0,P),T}var l=function(){var P=this;function O(x,E){for(var F=1<<E-1>>>0;x&F;)F>>>=1;return F?(x&F-1)+F:x}function T(x,E,F,U,J){e(!(U%F));do x[E+(U-=F)]=J;while(0<U)}function M(x,E,F,U,J){if(e(2328>=J),512>=J)var re=a(512);else if((re=a(J))==null)return 0;return function(ae,ce,de,ve,De,qe){var ye,Le,Ue=ce,it=1<<de,We=a(16),ot=a(16);for(e(De!=0),e(ve!=null),e(ae!=null),e(0<de),Le=0;Le<De;++Le){if(15<ve[Le])return 0;++We[ve[Le]]}if(We[0]==De)return 0;for(ot[1]=0,ye=1;15>ye;++ye){if(We[ye]>1<<ye)return 0;ot[ye+1]=ot[ye]+We[ye]}for(Le=0;Le<De;++Le)ye=ve[Le],0<ve[Le]&&(qe[ot[ye]++]=Le);if(ot[15]==1)return(ve=new L).g=0,ve.value=qe[0],T(ae,Ue,1,it,ve),it;var ut,jt=-1,xt=it-1,fn=0,nn=1,Vn=1,ln=1<<de;for(Le=0,ye=1,De=2;ye<=de;++ye,De<<=1){if(nn+=Vn<<=1,0>(Vn-=We[ye]))return 0;for(;0<We[ye];--We[ye])(ve=new L).g=ye,ve.value=qe[Le++],T(ae,Ue+fn,De,ln,ve),fn=O(fn,ye)}for(ye=de+1,De=2;15>=ye;++ye,De<<=1){if(nn+=Vn<<=1,0>(Vn-=We[ye]))return 0;for(;0<We[ye];--We[ye]){if(ve=new L,(fn&xt)!=jt){for(Ue+=ln,ut=1<<(jt=ye)-de;15>jt&&!(0>=(ut-=We[jt]));)++jt,ut<<=1;it+=ln=1<<(ut=jt-de),ae[ce+(jt=fn&xt)].g=ut+de,ae[ce+jt].value=Ue-ce-jt}ve.g=ye-de,ve.value=qe[Le++],T(ae,Ue+(fn>>de),De,ln,ve),fn=O(fn,ye)}}return nn!=2*ot[15]-1?0:it}(x,E,F,U,J,re)}function L(){this.value=this.g=0}function V(){this.value=this.g=0}function K(){this.G=s(5,L),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Ja,V)}function Z(x,E,F,U){e(x!=null),e(E!=null),e(2147483648>U),x.Ca=254,x.I=0,x.b=-8,x.Ka=0,x.oa=E,x.pa=F,x.Jd=E,x.Yc=F+U,x.Zc=4<=U?F+U-4+1:F,Ce(x)}function Y(x,E){for(var F=0;0<E--;)F|=xe(x,128)<<E;return F}function H(x,E){var F=Y(x,E);return fe(x)?-F:F}function ee(x,E,F,U){var J,re=0;for(e(x!=null),e(E!=null),e(4294967288>U),x.Sb=U,x.Ra=0,x.u=0,x.h=0,4<U&&(U=4),J=0;J<U;++J)re+=E[F+J]<<8*J;x.Ra=re,x.bb=U,x.oa=E,x.pa=F}function le(x){for(;8<=x.u&&x.bb<x.Sb;)x.Ra>>>=8,x.Ra+=x.oa[x.pa+x.bb]<<Zi-8>>>0,++x.bb,x.u-=8;oe(x)&&(x.h=1,x.u=0)}function se(x,E){if(e(0<=E),!x.h&&E<=za){var F=te(x)&nr[E];return x.u+=E,le(x),F}return x.h=1,x.u=0}function $(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function X(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(x){return x.Ra>>>(x.u&Zi-1)>>>0}function oe(x){return e(x.bb<=x.Sb),x.h||x.bb==x.Sb&&x.u>Zi}function me(x,E){x.u=E,x.h=oe(x)}function _e(x){x.u>=ic&&(e(x.u>=ic),le(x))}function Ce(x){e(x!=null&&x.oa!=null),x.pa<x.Zc?(x.I=(x.oa[x.pa++]|x.I<<8)>>>0,x.b+=8):(e(x!=null&&x.oa!=null),x.pa<x.Yc?(x.b+=8,x.I=x.oa[x.pa++]|x.I<<8):x.Ka?x.b=0:(x.I<<=8,x.b+=8,x.Ka=1))}function fe(x){return Y(x,1)}function xe(x,E){var F=x.Ca;0>x.b&&Ce(x);var U=x.b,J=F*E>>>8,re=(x.I>>>U>J)+0;for(re?(F-=J,x.I-=J+1<<U>>>0):F=J+1,U=F,J=0;256<=U;)J+=8,U>>=8;return U=7^J+El[U],x.b-=U,x.Ca=(F<<U)-1,re}function Se(x,E,F){x[E+0]=F>>24&255,x[E+1]=F>>16&255,x[E+2]=F>>8&255,x[E+3]=255&F}function ie(x,E){return x[E+0]|x[E+1]<<8}function He(x,E){return ie(x,E)|x[E+2]<<16}function Fe(x,E){return ie(x,E)|ie(x,E+2)<<16}function he(x,E){var F=1<<E;return e(x!=null),e(0<E),x.X=a(F),x.X==null?0:(x.Mb=32-E,x.Xa=E,1)}function Ye(x,E){e(x!=null),e(E!=null),e(x.Xa==E.Xa),r(E.X,0,x.X,0,1<<E.Xa)}function mt(){this.X=[],this.Xa=this.Mb=0}function vt(x,E,F,U){e(F!=null),e(U!=null);var J=F[0],re=U[0];return J==0&&(J=(x*re+E/2)/E),re==0&&(re=(E*J+x/2)/x),0>=J||0>=re?0:(F[0]=J,U[0]=re,1)}function Qe(x,E){return x+(1<<E)-1>>>E}function Ot(x,E){return((4278255360&x)+(4278255360&E)>>>0&4278255360)+((16711935&x)+(16711935&E)>>>0&16711935)>>>0}function ht(x,E){P[E]=function(F,U,J,re,ae,ce,de){var ve;for(ve=0;ve<ae;++ve){var De=P[x](ce[de+ve-1],J,re+ve);ce[de+ve]=Ot(F[U+ve],De)}}}function dt(){this.ud=this.hd=this.jd=0}function It(x,E){return((4278124286&(x^E))>>>1)+(x&E)>>>0}function tn(x){return 0<=x&&256>x?x:0>x?0:255<x?255:void 0}function Zt(x,E){return tn(x+(x-E+.5>>1))}function $t(x,E,F){return Math.abs(E-F)-Math.abs(x-F)}function on(x,E,F,U,J,re,ae){for(U=re[ae-1],F=0;F<J;++F)re[ae+F]=U=Ot(x[E+F],U)}function lt(x,E,F,U,J){var re;for(re=0;re<F;++re){var ae=x[E+re],ce=ae>>8&255,de=16711935&(de=(de=16711935&ae)+((ce<<16)+ce));U[J+re]=(4278255360&ae)+de>>>0}}function bt(x,E){E.jd=255&x,E.hd=x>>8&255,E.ud=x>>16&255}function yt(x,E,F,U,J,re){var ae;for(ae=0;ae<U;++ae){var ce=E[F+ae],de=ce>>>8,ve=ce,De=255&(De=(De=ce>>>16)+((x.jd<<24>>24)*(de<<24>>24)>>>5));ve=255&(ve=(ve+=(x.hd<<24>>24)*(de<<24>>24)>>>5)+((x.ud<<24>>24)*(De<<24>>24)>>>5)),J[re+ae]=(4278255360&ce)+(De<<16)+ve}}function nt(x,E,F,U,J){P[E]=function(re,ae,ce,de,ve,De,qe,ye,Le){for(de=qe;de<ye;++de)for(qe=0;qe<Le;++qe)ve[De++]=J(ce[U(re[ae++])])},P[x]=function(re,ae,ce,de,ve,De,qe){var ye=8>>re.b,Le=re.Ea,Ue=re.K[0],it=re.w;if(8>ye)for(re=(1<<re.b)-1,it=(1<<ye)-1;ae<ce;++ae){var We,ot=0;for(We=0;We<Le;++We)We&re||(ot=U(de[ve++])),De[qe++]=J(Ue[ot&it]),ot>>=ye}else P["VP8LMapColor"+F](de,ve,Ue,it,De,qe,ae,ce,Le)}}function Bt(x,E,F,U,J){for(F=E+F;E<F;){var re=x[E++];U[J++]=re>>16&255,U[J++]=re>>8&255,U[J++]=255&re}}function ft(x,E,F,U,J){for(F=E+F;E<F;){var re=x[E++];U[J++]=re>>16&255,U[J++]=re>>8&255,U[J++]=255&re,U[J++]=re>>24&255}}function pt(x,E,F,U,J){for(F=E+F;E<F;){var re=(ae=x[E++])>>16&240|ae>>12&15,ae=240&ae|ae>>28&15;U[J++]=re,U[J++]=ae}}function Rt(x,E,F,U,J){for(F=E+F;E<F;){var re=(ae=x[E++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;U[J++]=re,U[J++]=ae}}function Ct(x,E,F,U,J){for(F=E+F;E<F;){var re=x[E++];U[J++]=255&re,U[J++]=re>>8&255,U[J++]=re>>16&255}}function Ht(x,E,F,U,J,re){if(re==0)for(F=E+F;E<F;)Se(U,((re=x[E++])[0]>>24|re[1]>>8&65280|re[2]<<8&16711680|re[3]<<24)>>>0),J+=32;else r(U,J,x,E,F)}function pn(x,E){P[E][0]=P[x+"0"],P[E][1]=P[x+"1"],P[E][2]=P[x+"2"],P[E][3]=P[x+"3"],P[E][4]=P[x+"4"],P[E][5]=P[x+"5"],P[E][6]=P[x+"6"],P[E][7]=P[x+"7"],P[E][8]=P[x+"8"],P[E][9]=P[x+"9"],P[E][10]=P[x+"10"],P[E][11]=P[x+"11"],P[E][12]=P[x+"12"],P[E][13]=P[x+"13"],P[E][14]=P[x+"0"],P[E][15]=P[x+"0"]}function dn(x){return x==$_||x==B_||x==ox||x==V_}function wt(){this.eb=[],this.size=this.A=this.fb=0}function sr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function mn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new wt,this.f.kb=new sr,this.sd=null}function qt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Cn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ba(x){return alert("todo:WebPSamplerProcessPlane"),x.T}function $r(x,E){var F=x.T,U=E.ba.f.RGBA,J=U.eb,re=U.fb+x.ka*U.A,ae=Nl[E.ba.S],ce=x.y,de=x.O,ve=x.f,De=x.N,qe=x.ea,ye=x.W,Le=E.cc,Ue=E.dc,it=E.Mc,We=E.Nc,ot=x.ka,ut=x.ka+x.T,jt=x.U,xt=jt+1>>1;for(ot==0?ae(ce,de,null,null,ve,De,qe,ye,ve,De,qe,ye,J,re,null,null,jt):(ae(E.ec,E.fc,ce,de,Le,Ue,it,We,ve,De,qe,ye,J,re-U.A,J,re,jt),++F);ot+2<ut;ot+=2)Le=ve,Ue=De,it=qe,We=ye,De+=x.Rc,ye+=x.Rc,re+=2*U.A,ae(ce,(de+=2*x.fa)-x.fa,ce,de,Le,Ue,it,We,ve,De,qe,ye,J,re-U.A,J,re,jt);return de+=x.fa,x.j+ut<x.o?(r(E.ec,E.fc,ce,de,jt),r(E.cc,E.dc,ve,De,xt),r(E.Mc,E.Nc,qe,ye,xt),F--):1&ut||ae(ce,de,null,null,ve,De,qe,ye,ve,De,qe,ye,J,re+U.A,null,null,jt),F}function gs(x,E,F){var U=x.F,J=[x.J];if(U!=null){var re=x.U,ae=E.ba.S,ce=ae==sx||ae==ox;E=E.ba.f.RGBA;var de=[0],ve=x.ka;de[0]=x.T,x.Kb&&(ve==0?--de[0]:(--ve,J[0]-=x.width),x.j+x.ka+x.T==x.o&&(de[0]=x.o-x.j-ve));var De=E.eb;ve=E.fb+ve*E.A,x=Dn(U,J[0],x.width,re,de,De,ve+(ce?0:3),E.A),e(F==de),x&&dn(ae)&&Lt(De,ve,ce,re,de,E.A)}return 0}function Re(x){var E=x.ma,F=E.ba.S,U=11>F,J=F==ix||F==ax||F==sx||F==z_||F==12||dn(F);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!Kf(E.Oa,x,J?11:12))return 0;if(J&&dn(F)&&Uc(),x.da)alert("todo:use_scaling");else{if(U){if(E.Ib=ba,x.Kb){if(F=x.U+1>>1,E.memory=a(x.U+2*F),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+x.U,E.Mc=E.cc,E.Nc=E.dc+F,E.Ib=$r,Uc()}}else alert("todo:EmitYUV");J&&(E.Jb=gs,U&&Ar())}if(U&&!hI){for(x=0;256>x;++x)pee[x]=89858*(x-128)+cx>>lx,vee[x]=-22014*(x-128)+cx,gee[x]=-45773*(x-128),mee[x]=113618*(x-128)+cx>>lx;for(x=Av;x<H_;++x)E=76283*(x-16)+cx>>lx,yee[x-Av]=Bn(E,255),bee[x-Av]=Bn(E+8>>4,15);hI=1}return 1}function Oe(x){var E=x.ma,F=x.U,U=x.T;return e(!(1&x.ka)),0>=F||0>=U?0:(F=E.Ib(x,E),E.Jb!=null&&E.Jb(x,E,F),E.Dc+=F,1)}function Ke(x){x.ma.memory=null}function Et(x,E,F,U){return se(x,8)!=47?0:(E[0]=se(x,14)+1,F[0]=se(x,14)+1,U[0]=se(x,1),se(x,3)!=0?0:!x.h)}function ct(x,E){if(4>x)return x+1;var F=x-2>>1;return(2+(1&x)<<F)+se(E,F)+1}function Gt(x,E){return 120<E?E-120:1<=(F=((F=eee[E-1])>>4)*x+(8-(15&F)))?F:1;var F}function yn(x,E,F){var U=te(F),J=x[E+=255&U].g-8;return 0<J&&(me(F,F.u+8),U=te(F),E+=x[E].value,E+=U&(1<<J)-1),me(F,F.u+x[E].g),x[E].value}function Gn(x,E,F){return F.g+=x.g,F.value+=x.value<<E>>>0,e(8>=F.g),x.g}function Ft(x,E,F){var U=x.xc;return e((E=U==0?0:x.vc[x.md*(F>>U)+(E>>U)])<x.Wb),x.Ya[E]}function qn(x,E,F,U){var J=x.ab,re=x.c*E,ae=x.C;E=ae+E;var ce=F,de=U;for(U=x.Ta,F=x.Ua;0<J--;){var ve=x.gc[J],De=ae,qe=E,ye=ce,Le=de,Ue=(de=U,ce=F,ve.Ea);switch(e(De<qe),e(qe<=ve.nc),ve.hc){case 2:li(ye,Le,(qe-De)*Ue,de,ce);break;case 0:var it=De,We=qe,ot=de,ut=ce,jt=(ln=ve).Ea;it==0&&(wd(ye,Le,null,null,1,ot,ut),on(ye,Le+1,0,0,jt-1,ot,ut+1),Le+=jt,ut+=jt,++it);for(var xt=1<<ln.b,fn=xt-1,nn=Qe(jt,ln.b),Vn=ln.K,ln=ln.w+(it>>ln.b)*nn;it<We;){var rr=Vn,Na=ln,Un=1;for(uo(ye,Le,ot,ut-jt,1,ot,ut);Un<jt;){var cn=(Un&~fn)+xt;cn>jt&&(cn=jt),(0,k[rr[Na++]>>8&15])(ye,Le+ +Un,ot,ut+Un-jt,cn-Un,ot,ut+Un),Un=cn}Le+=jt,ut+=jt,++it&fn||(ln+=nn)}qe!=ve.nc&&r(de,ce-Ue,de,ce+(qe-De-1)*Ue,Ue);break;case 1:for(Ue=ye,We=Le,jt=(ye=ve.Ea)-(ut=ye&~(ot=(Le=1<<ve.b)-1)),it=Qe(ye,ve.b),xt=ve.K,ve=ve.w+(De>>ve.b)*it;De<qe;){for(fn=xt,nn=ve,Vn=new dt,ln=We+ut,rr=We+ye;We<ln;)bt(fn[nn++],Vn),z(Vn,Ue,We,Le,de,ce),We+=Le,ce+=Le;We<rr&&(bt(fn[nn++],Vn),z(Vn,Ue,We,jt,de,ce),We+=jt,ce+=jt),++De&ot||(ve+=it)}break;case 3:if(ye==de&&Le==ce&&0<ve.b){for(We=de,ye=Ue=ce+(qe-De)*Ue-(ut=(qe-De)*Qe(ve.Ea,ve.b)),Le=de,ot=ce,it=[],ut=(jt=ut)-1;0<=ut;--ut)it[ut]=Le[ot+ut];for(ut=jt-1;0<=ut;--ut)We[ye+ut]=it[ut];ac(ve,De,qe,de,Ue,de,ce)}else ac(ve,De,qe,ye,Le,de,ce)}ce=U,de=F}de!=F&&r(U,F,ce,de,re)}function Ri(x,E){var F=x.V,U=x.Ba+x.c*x.C,J=E-x.C;if(e(E<=x.l.o),e(16>=J),0<J){var re=x.l,ae=x.Ta,ce=x.Ua,de=re.width;if(qn(x,J,F,U),J=ce=[ce],e((F=x.C)<(U=E)),e(re.v<re.va),U>re.o&&(U=re.o),F<re.j){var ve=re.j-F;F=re.j,J[0]+=ve*de}if(F>=U?F=0:(J[0]+=4*re.v,re.ka=F-re.j,re.U=re.va-re.v,re.T=U-F,F=1),F){if(ce=ce[0],11>(F=x.ca).S){var De=F.f.RGBA,qe=(U=F.S,J=re.U,re=re.T,ve=De.eb,De.A),ye=re;for(De=De.fb+x.Ma*De.A;0<ye--;){var Le=ae,Ue=ce,it=J,We=ve,ot=De;switch(U){case rx:W(Le,Ue,it,We,ot);break;case ix:G(Le,Ue,it,We,ot);break;case $_:G(Le,Ue,it,We,ot),Lt(We,ot,0,it,1,0);break;case iI:we(Le,Ue,it,We,ot);break;case ax:Ht(Le,Ue,it,We,ot,1);break;case B_:Ht(Le,Ue,it,We,ot,1),Lt(We,ot,0,it,1,0);break;case sx:Ht(Le,Ue,it,We,ot,0);break;case ox:Ht(Le,Ue,it,We,ot,0),Lt(We,ot,1,it,1,0);break;case z_:ne(Le,Ue,it,We,ot);break;case V_:ne(Le,Ue,it,We,ot),Ut(We,ot,it,1,0);break;case aI:pe(Le,Ue,it,We,ot);break;default:e(0)}ce+=de,De+=qe}x.Ma+=re}else alert("todo:EmitRescaledRowsYUVA");e(x.Ma<=F.height)}}x.C=E,e(x.C<=x.i)}function kr(x){var E;if(0<x.ua)return 0;for(E=0;E<x.Wb;++E){var F=x.Ya[E].G,U=x.Ya[E].H;if(0<F[1][U[1]+0].g||0<F[2][U[2]+0].g||0<F[3][U[3]+0].g)return 0}return 1}function Br(x,E,F,U,J,re){if(x.Z!=0){var ae=x.qd,ce=x.rd;for(e(Ad[x.Z]!=null);E<F;++E)Ad[x.Z](ae,ce,U,J,U,J,re),ae=U,ce=J,J+=re;x.qd=ae,x.rd=ce}}function Tr(x,E){var F=x.l.ma,U=F.Z==0||F.Z==1?x.l.j:x.C;if(U=x.C<U?U:x.C,e(E<=x.l.o),E>U){var J=x.l.width,re=F.ca,ae=F.tb+J*U,ce=x.V,de=x.Ba+x.c*U,ve=x.gc;e(x.ab==1),e(ve[0].hc==3),Wo(ve[0],U,E,ce,de,re,ae),Br(F,U,E,re,ae,J)}x.C=x.Ma=E}function er(x,E,F,U,J,re,ae){var ce=x.$/U,de=x.$%U,ve=x.m,De=x.s,qe=F+x.$,ye=qe;J=F+U*J;var Le=F+U*re,Ue=280+De.ua,it=x.Pb?ce:16777216,We=0<De.ua?De.Wa:null,ot=De.wc,ut=qe<Le?Ft(De,de,ce):null;e(x.C<re),e(Le<=J);var jt=!1;e:for(;;){for(;jt||qe<Le;){var xt=0;if(ce>=it){var fn=qe-F;e((it=x).Pb),it.wd=it.m,it.xd=fn,0<it.s.ua&&Ye(it.s.Wa,it.s.vb),it=ce+nee}if(de&ot||(ut=Ft(De,de,ce)),e(ut!=null),ut.Qb&&(E[qe]=ut.qb,jt=!0),!jt)if(_e(ve),ut.jc){xt=ve,fn=E;var nn=qe,Vn=ut.pd[te(xt)&Ja-1];e(ut.jc),256>Vn.g?(me(xt,xt.u+Vn.g),fn[nn]=Vn.value,xt=0):(me(xt,xt.u+Vn.g-256),e(256<=Vn.value),xt=Vn.value),xt==0&&(jt=!0)}else xt=yn(ut.G[0],ut.H[0],ve);if(ve.h)break;if(jt||256>xt){if(!jt)if(ut.nd)E[qe]=(ut.qb|xt<<8)>>>0;else{if(_e(ve),jt=yn(ut.G[1],ut.H[1],ve),_e(ve),fn=yn(ut.G[2],ut.H[2],ve),nn=yn(ut.G[3],ut.H[3],ve),ve.h)break;E[qe]=(nn<<24|jt<<16|xt<<8|fn)>>>0}if(jt=!1,++qe,++de>=U&&(de=0,++ce,ae!=null&&ce<=re&&!(ce%16)&&ae(x,ce),We!=null))for(;ye<qe;)xt=E[ye++],We.X[(506832829*xt&4294967295)>>>We.Mb]=xt}else if(280>xt){if(xt=ct(xt-256,ve),fn=yn(ut.G[4],ut.H[4],ve),_e(ve),fn=Gt(U,fn=ct(fn,ve)),ve.h)break;if(qe-F<fn||J-qe<xt)break e;for(nn=0;nn<xt;++nn)E[qe+nn]=E[qe+nn-fn];for(qe+=xt,de+=xt;de>=U;)de-=U,++ce,ae!=null&&ce<=re&&!(ce%16)&&ae(x,ce);if(e(qe<=J),de&ot&&(ut=Ft(De,de,ce)),We!=null)for(;ye<qe;)xt=E[ye++],We.X[(506832829*xt&4294967295)>>>We.Mb]=xt}else{if(!(xt<Ue))break e;for(jt=xt-280,e(We!=null);ye<qe;)xt=E[ye++],We.X[(506832829*xt&4294967295)>>>We.Mb]=xt;xt=qe,e(!(jt>>>(fn=We).Xa)),E[xt]=fn.X[jt],jt=!0}jt||e(ve.h==oe(ve))}if(x.Pb&&ve.h&&qe<J)e(x.m.h),x.a=5,x.m=x.wd,x.$=x.xd,0<x.s.ua&&Ye(x.s.vb,x.s.Wa);else{if(ve.h)break e;ae!=null&&ae(x,ce>re?re:ce),x.a=0,x.$=qe-F}return 1}return x.a=3,0}function Sr(x){e(x!=null),x.vc=null,x.yc=null,x.Ya=null;var E=x.Wa;E!=null&&(E.X=null),x.vb=null,e(x!=null)}function oi(){var x=new Yt;return x==null?null:(x.a=0,x.xb=lI,pn("Predictor","VP8LPredictors"),pn("Predictor","VP8LPredictors_C"),pn("PredictorAdd","VP8LPredictorsAdd"),pn("PredictorAdd","VP8LPredictorsAdd_C"),li=lt,z=yt,W=Bt,G=ft,ne=pt,pe=Rt,we=Ct,P.VP8LMapColor32b=Ca,P.VP8LMapColor8b=_,x)}function vs(x,E,F,U,J){var re=1,ae=[x],ce=[E],de=U.m,ve=U.s,De=null,qe=0;e:for(;;){if(F)for(;re&&se(de,1);){var ye=ae,Le=ce,Ue=U,it=1,We=Ue.m,ot=Ue.gc[Ue.ab],ut=se(We,2);if(Ue.Oc&1<<ut)re=0;else{switch(Ue.Oc|=1<<ut,ot.hc=ut,ot.Ea=ye[0],ot.nc=Le[0],ot.K=[null],++Ue.ab,e(4>=Ue.ab),ut){case 0:case 1:ot.b=se(We,3)+2,it=vs(Qe(ot.Ea,ot.b),Qe(ot.nc,ot.b),0,Ue,ot.K),ot.K=ot.K[0];break;case 3:var jt,xt=se(We,8)+1,fn=16<xt?0:4<xt?1:2<xt?2:3;if(ye[0]=Qe(ot.Ea,fn),ot.b=fn,jt=it=vs(xt,1,0,Ue,ot.K)){var nn,Vn=xt,ln=ot,rr=1<<(8>>ln.b),Na=a(rr);if(Na==null)jt=0;else{var Un=ln.K[0],cn=ln.w;for(Na[0]=ln.K[0][0],nn=1;nn<1*Vn;++nn)Na[nn]=Ot(Un[cn+nn],Na[nn-1]);for(;nn<4*rr;++nn)Na[nn]=0;ln.K[0]=null,ln.K[0]=Na,jt=1}}it=jt;break;case 2:break;default:e(0)}re=it}}if(ae=ae[0],ce=ce[0],re&&se(de,1)&&!(re=1<=(qe=se(de,4))&&11>=qe)){U.a=3;break e}var zt;if(zt=re)t:{var ea,Fn,cr,ui=U,es=ae,Ys=ce,Li=qe,js=F,Xs=ui.m,Pa=ui.s,pr=[null],Ir=1,Fi=0,Or=tee[Li];n:for(;;){if(js&&se(Xs,1)){var ts=se(Xs,3)+2,oc=Qe(es,ts),ta=Qe(Ys,ts),fo=oc*ta;if(!vs(oc,ta,0,ui,pr))break n;for(pr=pr[0],Pa.xc=ts,ea=0;ea<fo;++ea){var qr=pr[ea]>>8&65535;pr[ea]=qr,qr>=Ir&&(Ir=qr+1)}}if(Xs.h)break n;for(Fn=0;5>Fn;++Fn){var ka=sI[Fn];!Fn&&0<Li&&(ka+=1<<Li),Fi<ka&&(Fi=ka)}var Ho=s(Ir*Or,L),Qs=Ir,qo=s(Qs,K);if(qo==null)var Ko=null;else e(65536>=Qs),Ko=qo;var ho=a(Fi);if(Ko==null||ho==null||Ho==null){ui.a=1;break n}var Go=Ho;for(ea=cr=0;ea<Ir;++ea){var Zr=Ko[ea],Yo=Zr.G,lc=Zr.H,Yf=0,Nu=1,ns=0;for(Fn=0;5>Fn;++Fn){ka=sI[Fn],Yo[Fn]=Go,lc[Fn]=cr,!Fn&&0<Li&&(ka+=1<<Li);i:{var dx,q_=ka,fx=ui,Cv=ho,See=Go,_ee=cr,K_=0,Cd=fx.m,Aee=se(Cd,1);if(i(Cv,0,0,q_),Aee){var Cee=se(Cd,1)+1,jee=se(Cd,1),gI=se(Cd,jee==0?1:8);Cv[gI]=1,Cee==2&&(Cv[gI=se(Cd,8)]=1);var hx=1}else{var vI=a(19),yI=se(Cd,4)+4;if(19<yI){fx.a=3;var px=0;break i}for(dx=0;dx<yI;++dx)vI[JJ[dx]]=se(Cd,3);var G_=void 0,jv=void 0,bI=fx,Eee=vI,mx=q_,xI=Cv,Y_=0,jd=bI.m,wI=8,SI=s(128,L);r:for(;M(SI,0,7,Eee,19);){if(se(jd,1)){var Nee=2+2*se(jd,3);if((G_=2+se(jd,Nee))>mx)break r}else G_=mx;for(jv=0;jv<mx&&G_--;){_e(jd);var _I=SI[0+(127&te(jd))];me(jd,jd.u+_I.g);var Tp=_I.value;if(16>Tp)xI[jv++]=Tp,Tp!=0&&(wI=Tp);else{var Pee=Tp==16,AI=Tp-16,kee=QJ[AI],CI=se(jd,XJ[AI])+kee;if(jv+CI>mx)break r;for(var Tee=Pee?wI:0;0<CI--;)xI[jv++]=Tee}}Y_=1;break r}Y_||(bI.a=3),hx=Y_}(hx=hx&&!Cd.h)&&(K_=M(See,_ee,8,Cv,q_)),hx&&K_!=0?px=K_:(fx.a=3,px=0)}if(px==0)break n;if(Nu&&ZJ[Fn]==1&&(Nu=Go[cr].g==0),Yf+=Go[cr].g,cr+=px,3>=Fn){var Ev,X_=ho[0];for(Ev=1;Ev<ka;++Ev)ho[Ev]>X_&&(X_=ho[Ev]);ns+=X_}}if(Zr.nd=Nu,Zr.Qb=0,Nu&&(Zr.qb=(Yo[3][lc[3]+0].value<<24|Yo[1][lc[1]+0].value<<16|Yo[2][lc[2]+0].value)>>>0,Yf==0&&256>Yo[0][lc[0]+0].value&&(Zr.Qb=1,Zr.qb+=Yo[0][lc[0]+0].value<<8)),Zr.jc=!Zr.Qb&&6>ns,Zr.jc){var gx,Pu=Zr;for(gx=0;gx<Ja;++gx){var Ed=gx,Nd=Pu.pd[Ed],vx=Pu.G[0][Pu.H[0]+Ed];256<=vx.value?(Nd.g=vx.g+256,Nd.value=vx.value):(Nd.g=0,Nd.value=0,Ed>>=Gn(vx,8,Nd),Ed>>=Gn(Pu.G[1][Pu.H[1]+Ed],16,Nd),Ed>>=Gn(Pu.G[2][Pu.H[2]+Ed],0,Nd),Gn(Pu.G[3][Pu.H[3]+Ed],24,Nd))}}}Pa.vc=pr,Pa.Wb=Ir,Pa.Ya=Ko,Pa.yc=Ho,zt=1;break t}zt=0}if(!(re=zt)){U.a=3;break e}if(0<qe){if(ve.ua=1<<qe,!he(ve.Wa,qe)){U.a=1,re=0;break e}}else ve.ua=0;var Q_=U,jI=ae,Dee=ce,Z_=Q_.s,J_=Z_.xc;if(Q_.c=jI,Q_.i=Dee,Z_.md=Qe(jI,J_),Z_.wc=J_==0?-1:(1<<J_)-1,F){U.xb=cee;break e}if((De=a(ae*ce))==null){U.a=1,re=0;break e}re=(re=er(U,De,0,ae,ce,ce,null))&&!de.h;break e}return re?(J!=null?J[0]=De:(e(De==null),e(F)),U.$=0,F||Sr(ve)):Sr(ve),re}function xa(x,E){var F=x.c*x.i,U=F+E+16*E;return e(x.c<=E),x.V=a(U),x.V==null?(x.Ta=null,x.Ua=0,x.a=1,0):(x.Ta=x.V,x.Ua=x.Ba+F+E,1)}function Do(x,E){var F=x.C,U=E-F,J=x.V,re=x.Ba+x.c*F;for(e(E<=x.l.o);0<U;){var ae=16<U?16:U,ce=x.l.ma,de=x.l.width,ve=de*ae,De=ce.ca,qe=ce.tb+de*F,ye=x.Ta,Le=x.Ua;qn(x,ae,J,re),Zn(ye,Le,De,qe,ve),Br(ce,F,F+ae,De,qe,de),U-=ae,J+=ae*x.c,F+=ae}e(F==E),x.C=x.Ma=E}function Io(){this.ub=this.yd=this.td=this.Rb=0}function _r(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Oo(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function ca(){this.Yb=function(){var x=[];return function E(F,U,J){for(var re=J[U],ae=0;ae<re&&(F.push(J.length>U+1?[]:0),!(J.length<U+1));ae++)E(F[ae],U+1,J)}(x,0,[3,11]),x}()}function Fc(){this.jb=a(3),this.Wc=o([4,8],ca),this.Xc=o([4,17],ca)}function Us(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ei(){this.ld=this.La=this.dd=this.tc=0}function Xa(){this.Na=this.la=0}function yl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ws(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ei),this.Y=0,this.ya=Array(new Ws),this.aa=0,this.l=new kn}function bl(){this.y=a(16),this.f=a(8),this.ea=a(8)}function $c(){this.cb=this.a=0,this.sc="",this.m=new $,this.Od=new Io,this.Kc=new _r,this.ed=new Us,this.Qa=new Oo,this.Ic=this.$c=this.Aa=0,this.D=new zc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,$),this.ia=0,this.pb=s(4,yl),this.Pa=new Fc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new bl),this.Hd=0,this.rb=Array(new Xa),this.sb=0,this.wa=Array(new Ei),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ws),this.L=this.aa=0,this.gd=o([4,2],Ei),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function kn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bc(){var x=new $c;return x!=null&&(x.a=0,x.sc="OK",x.cb=0,x.Xb=0,_v||(_v=Yn)),x}function Yr(x,E,F){return x.a==0&&(x.a=E,x.sc=F,x.cb=0),0}function xl(x,E,F){return 3<=F&&x[E+0]==157&&x[E+1]==1&&x[E+2]==42}function Su(x,E){if(x==null)return 0;if(x.a=0,x.sc="OK",E==null)return Yr(x,2,"null VP8Io passed to VP8GetHeaders()");var F=E.data,U=E.w,J=E.ha;if(4>J)return Yr(x,7,"Truncated header.");var re=F[U+0]|F[U+1]<<8|F[U+2]<<16,ae=x.Od;if(ae.Rb=!(1&re),ae.td=re>>1&7,ae.yd=re>>4&1,ae.ub=re>>5,3<ae.td)return Yr(x,3,"Incorrect keyframe parameters.");if(!ae.yd)return Yr(x,4,"Frame not displayable.");U+=3,J-=3;var ce=x.Kc;if(ae.Rb){if(7>J)return Yr(x,7,"cannot parse picture header");if(!xl(F,U,J))return Yr(x,3,"Bad code word");ce.c=16383&(F[U+4]<<8|F[U+3]),ce.Td=F[U+4]>>6,ce.i=16383&(F[U+6]<<8|F[U+5]),ce.Ud=F[U+6]>>6,U+=7,J-=7,x.za=ce.c+15>>4,x.Ub=ce.i+15>>4,E.width=ce.c,E.height=ce.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,i((re=x.Pa).jb,0,255,re.jb.length),e((re=x.Qa)!=null),re.Cb=0,re.Bb=0,re.Fb=1,i(re.Zb,0,0,re.Zb.length),i(re.Lb,0,0,re.Lb)}if(ae.ub>J)return Yr(x,7,"bad partition length");Z(re=x.m,F,U,ae.ub),U+=ae.ub,J-=ae.ub,ae.Rb&&(ce.Ld=fe(re),ce.Kd=fe(re)),ce=x.Qa;var de,ve=x.Pa;if(e(re!=null),e(ce!=null),ce.Cb=fe(re),ce.Cb){if(ce.Bb=fe(re),fe(re)){for(ce.Fb=fe(re),de=0;4>de;++de)ce.Zb[de]=fe(re)?H(re,7):0;for(de=0;4>de;++de)ce.Lb[de]=fe(re)?H(re,6):0}if(ce.Bb)for(de=0;3>de;++de)ve.jb[de]=fe(re)?Y(re,8):255}else ce.Bb=0;if(re.Ka)return Yr(x,3,"cannot parse segment header");if((ce=x.ed).zd=fe(re),ce.Tb=Y(re,6),ce.wb=Y(re,3),ce.Pc=fe(re),ce.Pc&&fe(re)){for(ve=0;4>ve;++ve)fe(re)&&(ce.vd[ve]=H(re,6));for(ve=0;4>ve;++ve)fe(re)&&(ce.od[ve]=H(re,6))}if(x.L=ce.Tb==0?0:ce.zd?1:2,re.Ka)return Yr(x,3,"cannot parse filter header");var De=J;if(J=de=U,U=de+De,ce=De,x.Xb=(1<<Y(x.m,2))-1,De<3*(ve=x.Xb))F=7;else{for(de+=3*ve,ce-=3*ve,De=0;De<ve;++De){var qe=F[J+0]|F[J+1]<<8|F[J+2]<<16;qe>ce&&(qe=ce),Z(x.Jc[+De],F,de,qe),de+=qe,ce-=qe,J+=3}Z(x.Jc[+ve],F,de,ce),F=de<U?0:5}if(F!=0)return Yr(x,F,"cannot parse partitions");for(F=Y(de=x.m,7),J=fe(de)?H(de,4):0,U=fe(de)?H(de,4):0,ce=fe(de)?H(de,4):0,ve=fe(de)?H(de,4):0,de=fe(de)?H(de,4):0,De=x.Qa,qe=0;4>qe;++qe){if(De.Cb){var ye=De.Zb[qe];De.Fb||(ye+=F)}else{if(0<qe){x.pb[qe]=x.pb[0];continue}ye=F}var Le=x.pb[qe];Le.Sc[0]=U_[Bn(ye+J,127)],Le.Sc[1]=W_[Bn(ye+0,127)],Le.Eb[0]=2*U_[Bn(ye+U,127)],Le.Eb[1]=101581*W_[Bn(ye+ce,127)]>>16,8>Le.Eb[1]&&(Le.Eb[1]=8),Le.Qc[0]=U_[Bn(ye+ve,117)],Le.Qc[1]=W_[Bn(ye+de,127)],Le.lc=ye+de}if(!ae.Rb)return Yr(x,4,"Not a key frame.");for(fe(re),ae=x.Pa,F=0;4>F;++F){for(J=0;8>J;++J)for(U=0;3>U;++U)for(ce=0;11>ce;++ce)ve=xe(re,oee[F][J][U][ce])?Y(re,8):aee[F][J][U][ce],ae.Wc[F][J].Yb[U][ce]=ve;for(J=0;17>J;++J)ae.Xc[F][J]=ae.Wc[F][lee[J]]}return x.kc=fe(re),x.kc&&(x.Bd=Y(re,8)),x.cb=1}function Yn(x,E,F,U,J,re,ae){var ce=E[J].Yb[F];for(F=0;16>J;++J){if(!xe(x,ce[F+0]))return J;for(;!xe(x,ce[F+1]);)if(ce=E[++J].Yb[0],F=0,J==16)return 16;var de=E[J+1].Yb;if(xe(x,ce[F+2])){var ve=x,De=0;if(xe(ve,(ye=ce)[(qe=F)+3]))if(xe(ve,ye[qe+6])){for(ce=0,qe=2*(De=xe(ve,ye[qe+8]))+(ye=xe(ve,ye[qe+9+De])),De=0,ye=ree[qe];ye[ce];++ce)De+=De+xe(ve,ye[ce]);De+=3+(8<<qe)}else xe(ve,ye[qe+7])?(De=7+2*xe(ve,165),De+=xe(ve,145)):De=5+xe(ve,159);else De=xe(ve,ye[qe+4])?3+xe(ve,ye[qe+5]):2;ce=de[2]}else De=1,ce=de[1];de=ae+iee[J],0>(ve=x).b&&Ce(ve);var qe,ye=ve.b,Le=(qe=ve.Ca>>1)-(ve.I>>ye)>>31;--ve.b,ve.Ca+=Le,ve.Ca|=1,ve.I-=(qe+1&Le)<<ye,re[de]=((De^Le)-Le)*U[(0<J)+0]}return 16}function ys(x){var E=x.rb[x.sb-1];E.la=0,E.Na=0,i(x.zc,0,0,x.zc.length),x.ja=0}function ua(x,E,F,U,J){J=x[E+F+32*U]+(J>>3),x[E+F+32*U]=-256&J?0>J?0:255:J}function bs(x,E,F,U,J,re){ua(x,E,0,F,U+J),ua(x,E,1,F,U+re),ua(x,E,2,F,U-re),ua(x,E,3,F,U-J)}function fr(x){return(20091*x>>16)+x}function wa(x,E,F,U){var J,re=0,ae=a(16);for(J=0;4>J;++J){var ce=x[E+0]+x[E+8],de=x[E+0]-x[E+8],ve=(35468*x[E+4]>>16)-fr(x[E+12]),De=fr(x[E+4])+(35468*x[E+12]>>16);ae[re+0]=ce+De,ae[re+1]=de+ve,ae[re+2]=de-ve,ae[re+3]=ce-De,re+=4,E++}for(J=re=0;4>J;++J)ce=(x=ae[re+0]+4)+ae[re+8],de=x-ae[re+8],ve=(35468*ae[re+4]>>16)-fr(ae[re+12]),ua(F,U,0,0,ce+(De=fr(ae[re+4])+(35468*ae[re+12]>>16))),ua(F,U,1,0,de+ve),ua(F,U,2,0,de-ve),ua(F,U,3,0,ce-De),re++,U+=32}function Mo(x,E,F,U){var J=x[E+0]+4,re=35468*x[E+4]>>16,ae=fr(x[E+4]),ce=35468*x[E+1]>>16;bs(F,U,0,J+ae,x=fr(x[E+1]),ce),bs(F,U,1,J+re,x,ce),bs(F,U,2,J-re,x,ce),bs(F,U,3,J-ae,x,ce)}function Ql(x,E,F,U,J){wa(x,E,F,U),J&&wa(x,E+16,F,U+4)}function Zl(x,E,F,U){Te(x,E+0,F,U,1),Te(x,E+32,F,U+128,1)}function Hn(x,E,F,U){var J;for(x=x[E+0]+4,J=0;4>J;++J)for(E=0;4>E;++E)ua(F,U,E,J,x)}function Hs(x,E,F,U){x[E+0]&&ke(x,E+0,F,U),x[E+16]&&ke(x,E+16,F,U+4),x[E+32]&&ke(x,E+32,F,U+128),x[E+48]&&ke(x,E+48,F,U+128+4)}function Ro(x,E,F,U){var J,re=a(16);for(J=0;4>J;++J){var ae=x[E+0+J]+x[E+12+J],ce=x[E+4+J]+x[E+8+J],de=x[E+4+J]-x[E+8+J],ve=x[E+0+J]-x[E+12+J];re[0+J]=ae+ce,re[8+J]=ae-ce,re[4+J]=ve+de,re[12+J]=ve-de}for(J=0;4>J;++J)ae=(x=re[0+4*J]+3)+re[3+4*J],ce=re[1+4*J]+re[2+4*J],de=re[1+4*J]-re[2+4*J],ve=x-re[3+4*J],F[U+0]=ae+ce>>3,F[U+16]=ve+de>>3,F[U+32]=ae-ce>>3,F[U+48]=ve-de>>3,U+=64}function xs(x,E,F){var U,J=E-32,re=Ji,ae=255-x[J-1];for(U=0;U<F;++U){var ce,de=re,ve=ae+x[E-1];for(ce=0;ce<F;++ce)x[E+ce]=de[ve+x[J+ce]];E+=32}}function Wn(x,E){xs(x,E,4)}function _u(x,E){xs(x,E,8)}function Hf(x,E){xs(x,E,16)}function qf(x,E){var F;for(F=0;16>F;++F)r(x,E+32*F,x,E-32,16)}function Gi(x,E){var F;for(F=16;0<F;--F)i(x,E,x[E-1],16),E+=32}function ws(x,E,F){var U;for(U=0;16>U;++U)i(E,F+32*U,x,16)}function Sa(x,E){var F,U=16;for(F=0;16>F;++F)U+=x[E-1+32*F]+x[E+F-32];ws(U>>5,x,E)}function Yi(x,E){var F,U=8;for(F=0;16>F;++F)U+=x[E-1+32*F];ws(U>>4,x,E)}function Lo(x,E){var F,U=8;for(F=0;16>F;++F)U+=x[E+F-32];ws(U>>4,x,E)}function Jl(x,E){ws(128,x,E)}function Xt(x,E,F){return x+2*E+F+2>>2}function Xi(x,E){var F,U=E-32;for(U=new Uint8Array([Xt(x[U-1],x[U+0],x[U+1]),Xt(x[U+0],x[U+1],x[U+2]),Xt(x[U+1],x[U+2],x[U+3]),Xt(x[U+2],x[U+3],x[U+4])]),F=0;4>F;++F)r(x,E+32*F,U,0,U.length)}function ec(x,E){var F=x[E-1],U=x[E-1+32],J=x[E-1+64],re=x[E-1+96];Se(x,E+0,16843009*Xt(x[E-1-32],F,U)),Se(x,E+32,16843009*Xt(F,U,J)),Se(x,E+64,16843009*Xt(U,J,re)),Se(x,E+96,16843009*Xt(J,re,re))}function tc(x,E){var F,U=4;for(F=0;4>F;++F)U+=x[E+F-32]+x[E-1+32*F];for(U>>=3,F=0;4>F;++F)i(x,E+32*F,U,4)}function Au(x,E){var F=x[E-1+0],U=x[E-1+32],J=x[E-1+64],re=x[E-1-32],ae=x[E+0-32],ce=x[E+1-32],de=x[E+2-32],ve=x[E+3-32];x[E+0+96]=Xt(U,J,x[E-1+96]),x[E+1+96]=x[E+0+64]=Xt(F,U,J),x[E+2+96]=x[E+1+64]=x[E+0+32]=Xt(re,F,U),x[E+3+96]=x[E+2+64]=x[E+1+32]=x[E+0+0]=Xt(ae,re,F),x[E+3+64]=x[E+2+32]=x[E+1+0]=Xt(ce,ae,re),x[E+3+32]=x[E+2+0]=Xt(de,ce,ae),x[E+3+0]=Xt(ve,de,ce)}function Wr(x,E){var F=x[E+1-32],U=x[E+2-32],J=x[E+3-32],re=x[E+4-32],ae=x[E+5-32],ce=x[E+6-32],de=x[E+7-32];x[E+0+0]=Xt(x[E+0-32],F,U),x[E+1+0]=x[E+0+32]=Xt(F,U,J),x[E+2+0]=x[E+1+32]=x[E+0+64]=Xt(U,J,re),x[E+3+0]=x[E+2+32]=x[E+1+64]=x[E+0+96]=Xt(J,re,ae),x[E+3+32]=x[E+2+64]=x[E+1+96]=Xt(re,ae,ce),x[E+3+64]=x[E+2+96]=Xt(ae,ce,de),x[E+3+96]=Xt(ce,de,de)}function Fo(x,E){var F=x[E-1+0],U=x[E-1+32],J=x[E-1+64],re=x[E-1-32],ae=x[E+0-32],ce=x[E+1-32],de=x[E+2-32],ve=x[E+3-32];x[E+0+0]=x[E+1+64]=re+ae+1>>1,x[E+1+0]=x[E+2+64]=ae+ce+1>>1,x[E+2+0]=x[E+3+64]=ce+de+1>>1,x[E+3+0]=de+ve+1>>1,x[E+0+96]=Xt(J,U,F),x[E+0+64]=Xt(U,F,re),x[E+0+32]=x[E+1+96]=Xt(F,re,ae),x[E+1+32]=x[E+2+96]=Xt(re,ae,ce),x[E+2+32]=x[E+3+96]=Xt(ae,ce,de),x[E+3+32]=Xt(ce,de,ve)}function Ss(x,E){var F=x[E+0-32],U=x[E+1-32],J=x[E+2-32],re=x[E+3-32],ae=x[E+4-32],ce=x[E+5-32],de=x[E+6-32],ve=x[E+7-32];x[E+0+0]=F+U+1>>1,x[E+1+0]=x[E+0+64]=U+J+1>>1,x[E+2+0]=x[E+1+64]=J+re+1>>1,x[E+3+0]=x[E+2+64]=re+ae+1>>1,x[E+0+32]=Xt(F,U,J),x[E+1+32]=x[E+0+96]=Xt(U,J,re),x[E+2+32]=x[E+1+96]=Xt(J,re,ae),x[E+3+32]=x[E+2+96]=Xt(re,ae,ce),x[E+3+64]=Xt(ae,ce,de),x[E+3+96]=Xt(ce,de,ve)}function wl(x,E){var F=x[E-1+0],U=x[E-1+32],J=x[E-1+64],re=x[E-1+96];x[E+0+0]=F+U+1>>1,x[E+2+0]=x[E+0+32]=U+J+1>>1,x[E+2+32]=x[E+0+64]=J+re+1>>1,x[E+1+0]=Xt(F,U,J),x[E+3+0]=x[E+1+32]=Xt(U,J,re),x[E+3+32]=x[E+1+64]=Xt(J,re,re),x[E+3+64]=x[E+2+64]=x[E+0+96]=x[E+1+96]=x[E+2+96]=x[E+3+96]=re}function co(x,E){var F=x[E-1+0],U=x[E-1+32],J=x[E-1+64],re=x[E-1+96],ae=x[E-1-32],ce=x[E+0-32],de=x[E+1-32],ve=x[E+2-32];x[E+0+0]=x[E+2+32]=F+ae+1>>1,x[E+0+32]=x[E+2+64]=U+F+1>>1,x[E+0+64]=x[E+2+96]=J+U+1>>1,x[E+0+96]=re+J+1>>1,x[E+3+0]=Xt(ce,de,ve),x[E+2+0]=Xt(ae,ce,de),x[E+1+0]=x[E+3+32]=Xt(F,ae,ce),x[E+1+32]=x[E+3+64]=Xt(U,F,ae),x[E+1+64]=x[E+3+96]=Xt(J,U,F),x[E+1+96]=Xt(re,J,U)}function Sl(x,E){var F;for(F=0;8>F;++F)r(x,E+32*F,x,E-32,8)}function _a(x,E){var F;for(F=0;8>F;++F)i(x,E,x[E-1],8),E+=32}function _s(x,E,F){var U;for(U=0;8>U;++U)i(E,F+32*U,x,8)}function _l(x,E){var F,U=8;for(F=0;8>F;++F)U+=x[E+F-32]+x[E-1+32*F];_s(U>>4,x,E)}function Cu(x,E){var F,U=4;for(F=0;8>F;++F)U+=x[E+F-32];_s(U>>3,x,E)}function or(x,E){var F,U=4;for(F=0;8>F;++F)U+=x[E-1+32*F];_s(U>>3,x,E)}function ju(x,E){_s(128,x,E)}function nc(x,E,F){var U=x[E-F],J=x[E+0],re=3*(J-U)+Sd[1020+x[E-2*F]-x[E+F]],ae=fa[112+(re+4>>3)];x[E-F]=Ji[255+U+fa[112+(re+3>>3)]],x[E+0]=Ji[255+J-ae]}function qs(x,E,F,U){var J=x[E+0],re=x[E+F];return Cs[255+x[E-2*F]-x[E-F]]>U||Cs[255+re-J]>U}function zo(x,E,F,U){return 4*Cs[255+x[E-F]-x[E+0]]+Cs[255+x[E-2*F]-x[E+F]]<=U}function $o(x,E,F,U,J){var re=x[E-3*F],ae=x[E-2*F],ce=x[E-F],de=x[E+0],ve=x[E+F],De=x[E+2*F],qe=x[E+3*F];return 4*Cs[255+ce-de]+Cs[255+ae-ve]>U?0:Cs[255+x[E-4*F]-re]<=J&&Cs[255+re-ae]<=J&&Cs[255+ae-ce]<=J&&Cs[255+qe-De]<=J&&Cs[255+De-ve]<=J&&Cs[255+ve-de]<=J}function Al(x,E,F,U){var J=2*U+1;for(U=0;16>U;++U)zo(x,E+U,F,J)&&nc(x,E+U,F)}function Cl(x,E,F,U){var J=2*U+1;for(U=0;16>U;++U)zo(x,E+U*F,1,J)&&nc(x,E+U*F,1)}function As(x,E,F,U){var J;for(J=3;0<J;--J)Al(x,E+=4*F,F,U)}function rc(x,E,F,U){var J;for(J=3;0<J;--J)Cl(x,E+=4,F,U)}function Ks(x,E,F,U,J,re,ae,ce){for(re=2*re+1;0<J--;){if($o(x,E,F,re,ae))if(qs(x,E,F,ce))nc(x,E,F);else{var de=x,ve=E,De=F,qe=de[ve-2*De],ye=de[ve-De],Le=de[ve+0],Ue=de[ve+De],it=de[ve+2*De],We=27*(ut=Sd[1020+3*(Le-ye)+Sd[1020+qe-Ue]])+63>>7,ot=18*ut+63>>7,ut=9*ut+63>>7;de[ve-3*De]=Ji[255+de[ve-3*De]+ut],de[ve-2*De]=Ji[255+qe+ot],de[ve-De]=Ji[255+ye+We],de[ve+0]=Ji[255+Le-We],de[ve+De]=Ji[255+Ue-ot],de[ve+2*De]=Ji[255+it-ut]}E+=U}}function Fa(x,E,F,U,J,re,ae,ce){for(re=2*re+1;0<J--;){if($o(x,E,F,re,ae))if(qs(x,E,F,ce))nc(x,E,F);else{var de=x,ve=E,De=F,qe=de[ve-De],ye=de[ve+0],Le=de[ve+De],Ue=fa[112+(4+(it=3*(ye-qe))>>3)],it=fa[112+(it+3>>3)],We=Ue+1>>1;de[ve-2*De]=Ji[255+de[ve-2*De]+We],de[ve-De]=Ji[255+qe+it],de[ve+0]=Ji[255+ye-Ue],de[ve+De]=Ji[255+Le-We]}E+=U}}function jl(x,E,F,U,J,re){Ks(x,E,F,1,16,U,J,re)}function Bo(x,E,F,U,J,re){Ks(x,E,1,F,16,U,J,re)}function Qa(x,E,F,U,J,re){var ae;for(ae=3;0<ae;--ae)Fa(x,E+=4*F,F,1,16,U,J,re)}function Vc(x,E,F,U,J,re){var ae;for(ae=3;0<ae;--ae)Fa(x,E+=4,1,F,16,U,J,re)}function R(x,E,F,U,J,re,ae,ce){Ks(x,E,J,1,8,re,ae,ce),Ks(F,U,J,1,8,re,ae,ce)}function Q(x,E,F,U,J,re,ae,ce){Ks(x,E,1,J,8,re,ae,ce),Ks(F,U,1,J,8,re,ae,ce)}function ge(x,E,F,U,J,re,ae,ce){Fa(x,E+4*J,J,1,8,re,ae,ce),Fa(F,U+4*J,J,1,8,re,ae,ce)}function Ee(x,E,F,U,J,re,ae,ce){Fa(x,E+4,1,J,8,re,ae,ce),Fa(F,U+4,1,J,8,re,ae,ce)}function $e(){this.ba=new mn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Cn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function at(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Wt(){this.ua=0,this.Wa=new mt,this.vb=new mt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new L}function Yt(){this.xb=this.a=0,this.l=new kn,this.ca=new mn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new X,this.Pb=0,this.wd=new X,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Wt,this.ab=0,this.gc=s(4,at),this.Oc=0}function gn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new kn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function bn(x,E,F,U,J,re,ae){for(x=x==null?0:x[E+0],E=0;E<ae;++E)J[re+E]=x+F[U+E]&255,x=J[re+E]}function Xn(x,E,F,U,J,re,ae){var ce;if(x==null)bn(null,null,F,U,J,re,ae);else for(ce=0;ce<ae;++ce)J[re+ce]=x[E+ce]+F[U+ce]&255}function lr(x,E,F,U,J,re,ae){if(x==null)bn(null,null,F,U,J,re,ae);else{var ce,de=x[E+0],ve=de,De=de;for(ce=0;ce<ae;++ce)ve=De+(de=x[E+ce])-ve,De=F[U+ce]+(-256&ve?0>ve?0:255:ve)&255,ve=de,J[re+ce]=De}}function Vr(x,E,F,U){var J=E.width,re=E.o;if(e(x!=null&&E!=null),0>F||0>=U||F+U>re)return null;if(!x.Cc){if(x.ga==null){var ae;if(x.ga=new gn,(ae=x.ga==null)||(ae=E.width*E.o,e(x.Gb.length==0),x.Gb=a(ae),x.Uc=0,x.Gb==null?ae=0:(x.mb=x.Gb,x.nb=x.Uc,x.rc=null,ae=1),ae=!ae),!ae){ae=x.ga;var ce=x.Fa,de=x.P,ve=x.qc,De=x.mb,qe=x.nb,ye=de+1,Le=ve-1,Ue=ae.l;if(e(ce!=null&&De!=null&&E!=null),Ad[0]=null,Ad[1]=bn,Ad[2]=Xn,Ad[3]=lr,ae.ca=De,ae.tb=qe,ae.c=E.width,ae.i=E.height,e(0<ae.c&&0<ae.i),1>=ve)E=0;else if(ae.$a=3&ce[de+0],ae.Z=ce[de+0]>>2&3,ae.Lc=ce[de+0]>>4&3,de=ce[de+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||de)E=0;else if(Ue.put=Oe,Ue.ac=Re,Ue.bc=Ke,Ue.ma=ae,Ue.width=E.width,Ue.height=E.height,Ue.Da=E.Da,Ue.v=E.v,Ue.va=E.va,Ue.j=E.j,Ue.o=E.o,ae.$a)e:{e(ae.$a==1),E=oi();t:for(;;){if(E==null){E=0;break e}if(e(ae!=null),ae.mc=E,E.c=ae.c,E.i=ae.i,E.l=ae.l,E.l.ma=ae,E.l.width=ae.c,E.l.height=ae.i,E.a=0,ee(E.m,ce,ye,Le),!vs(ae.c,ae.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&kr(E.s)?(ae.ic=1,ce=E.c*E.i,E.Ta=null,E.Ua=0,E.V=a(ce),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(ae.ic=0,E=xa(E,ae.c)),!E))break t;E=1;break e}ae.mc=null,E=0}else E=Le>=ae.c*ae.i;ae=!E}if(ae)return null;x.ga.Lc!=1?x.Ga=0:U=re-F}e(x.ga!=null),e(F+U<=re);e:{if(E=(ce=x.ga).c,re=ce.l.o,ce.$a==0){if(ye=x.rc,Le=x.Vc,Ue=x.Fa,de=x.P+1+F*E,ve=x.mb,De=x.nb+F*E,e(de<=x.P+x.qc),ce.Z!=0)for(e(Ad[ce.Z]!=null),ae=0;ae<U;++ae)Ad[ce.Z](ye,Le,Ue,de,ve,De,E),ye=ve,Le=De,De+=E,de+=E;else for(ae=0;ae<U;++ae)r(ve,De,Ue,de,E),ye=ve,Le=De,De+=E,de+=E;x.rc=ye,x.Vc=Le}else{if(e(ce.mc!=null),E=F+U,e((ae=ce.mc)!=null),e(E<=ae.i),ae.C>=E)E=1;else if(ce.ic||Ar(),ce.ic){ce=ae.V,ye=ae.Ba,Le=ae.c;var it=ae.i,We=(Ue=1,de=ae.$/Le,ve=ae.$%Le,De=ae.m,qe=ae.s,ae.$),ot=Le*it,ut=Le*E,jt=qe.wc,xt=We<ut?Ft(qe,ve,de):null;e(We<=ot),e(E<=it),e(kr(qe));t:for(;;){for(;!De.h&&We<ut;){if(ve&jt||(xt=Ft(qe,ve,de)),e(xt!=null),_e(De),256>(it=yn(xt.G[0],xt.H[0],De)))ce[ye+We]=it,++We,++ve>=Le&&(ve=0,++de<=E&&!(de%16)&&Tr(ae,de));else{if(!(280>it)){Ue=0;break t}it=ct(it-256,De);var fn,nn=yn(xt.G[4],xt.H[4],De);if(_e(De),!(We>=(nn=Gt(Le,nn=ct(nn,De)))&&ot-We>=it)){Ue=0;break t}for(fn=0;fn<it;++fn)ce[ye+We+fn]=ce[ye+We+fn-nn];for(We+=it,ve+=it;ve>=Le;)ve-=Le,++de<=E&&!(de%16)&&Tr(ae,de);We<ut&&ve&jt&&(xt=Ft(qe,ve,de))}e(De.h==oe(De))}Tr(ae,de>E?E:de);break t}!Ue||De.h&&We<ot?(Ue=0,ae.a=De.h?5:3):ae.$=We,E=Ue}else E=er(ae,ae.V,ae.Ba,ae.c,ae.i,E,Do);if(!E){U=0;break e}}F+U>=re&&(x.Cc=1),U=1}if(!U)return null;if(x.Cc&&((U=x.ga)!=null&&(U.mc=null),x.ga=null,0<x.Ga))return alert("todo:WebPDequantizeLevels"),null}return x.nb+F*J}function hr(x,E,F,U,J,re){for(;0<J--;){var ae,ce=x,de=E+(F?1:0),ve=x,De=E+(F?0:3);for(ae=0;ae<U;++ae){var qe=ve[De+4*ae];qe!=255&&(qe*=32897,ce[de+4*ae+0]=ce[de+4*ae+0]*qe>>23,ce[de+4*ae+1]=ce[de+4*ae+1]*qe>>23,ce[de+4*ae+2]=ce[de+4*ae+2]*qe>>23)}E+=re}}function Er(x,E,F,U,J){for(;0<U--;){var re;for(re=0;re<F;++re){var ae=x[E+2*re+0],ce=15&(ve=x[E+2*re+1]),de=4369*ce,ve=(240&ve|ve>>4)*de>>16;x[E+2*re+0]=(240&ae|ae>>4)*de>>16&240|(15&ae|ae<<4)*de>>16>>4&15,x[E+2*re+1]=240&ve|ce}E+=J}}function Hr(x,E,F,U,J,re,ae,ce){var de,ve,De=255;for(ve=0;ve<J;++ve){for(de=0;de<U;++de){var qe=x[E+de];re[ae+4*de]=qe,De&=qe}E+=F,ae+=ce}return De!=255}function Xr(x,E,F,U,J){var re;for(re=0;re<J;++re)F[U+re]=x[E+re]>>8}function Ar(){Lt=hr,Ut=Er,Dn=Hr,Zn=Xr}function Qi(x,E,F){P[x]=function(U,J,re,ae,ce,de,ve,De,qe,ye,Le,Ue,it,We,ot,ut,jt){var xt,fn=jt-1>>1,nn=ce[de+0]|ve[De+0]<<16,Vn=qe[ye+0]|Le[Ue+0]<<16;e(U!=null);var ln=3*nn+Vn+131074>>2;for(E(U[J+0],255&ln,ln>>16,it,We),re!=null&&(ln=3*Vn+nn+131074>>2,E(re[ae+0],255&ln,ln>>16,ot,ut)),xt=1;xt<=fn;++xt){var rr=ce[de+xt]|ve[De+xt]<<16,Na=qe[ye+xt]|Le[Ue+xt]<<16,Un=nn+rr+Vn+Na+524296,cn=Un+2*(rr+Vn)>>3;ln=cn+nn>>1,nn=(Un=Un+2*(nn+Na)>>3)+rr>>1,E(U[J+2*xt-1],255&ln,ln>>16,it,We+(2*xt-1)*F),E(U[J+2*xt-0],255&nn,nn>>16,it,We+(2*xt-0)*F),re!=null&&(ln=Un+Vn>>1,nn=cn+Na>>1,E(re[ae+2*xt-1],255&ln,ln>>16,ot,ut+(2*xt-1)*F),E(re[ae+2*xt+0],255&nn,nn>>16,ot,ut+(2*xt+0)*F)),nn=rr,Vn=Na}1&jt||(ln=3*nn+Vn+131074>>2,E(U[J+jt-1],255&ln,ln>>16,it,We+(jt-1)*F),re!=null&&(ln=3*Vn+nn+131074>>2,E(re[ae+jt-1],255&ln,ln>>16,ot,ut+(jt-1)*F)))}}function Uc(){Nl[rx]=uee,Nl[ix]=cI,Nl[iI]=dee,Nl[ax]=uI,Nl[sx]=dI,Nl[z_]=fI,Nl[aI]=fee,Nl[$_]=cI,Nl[B_]=uI,Nl[ox]=dI,Nl[V_]=fI}function Gs(x){return x&-16384?0>x?0:255:x>>hee}function w(x,E){return Gs((19077*x>>8)+(26149*E>>8)-14234)}function B(x,E,F){return Gs((19077*x>>8)-(6419*E>>8)-(13320*F>>8)+8708)}function q(x,E){return Gs((19077*x>>8)+(33050*E>>8)-17685)}function ue(x,E,F,U,J){U[J+0]=w(x,F),U[J+1]=B(x,E,F),U[J+2]=q(x,E)}function Be(x,E,F,U,J){U[J+0]=q(x,E),U[J+1]=B(x,E,F),U[J+2]=w(x,F)}function Ge(x,E,F,U,J){var re=B(x,E,F);E=re<<3&224|q(x,E)>>3,U[J+0]=248&w(x,F)|re>>5,U[J+1]=E}function Tt(x,E,F,U,J){var re=240&q(x,E)|15;U[J+0]=240&w(x,F)|B(x,E,F)>>4,U[J+1]=re}function Qn(x,E,F,U,J){U[J+0]=255,ue(x,E,F,U,J+1)}function Qr(x,E,F,U,J){Be(x,E,F,U,J),U[J+3]=255}function $n(x,E,F,U,J){ue(x,E,F,U,J),U[J+3]=255}function Bn(x,E){return 0>x?0:x>E?E:x}function Dr(x,E,F){P[x]=function(U,J,re,ae,ce,de,ve,De,qe){for(var ye=De+(-2&qe)*F;De!=ye;)E(U[J+0],re[ae+0],ce[de+0],ve,De),E(U[J+1],re[ae+0],ce[de+0],ve,De+F),J+=2,++ae,++de,De+=2*F;1&qe&&E(U[J+0],re[ae+0],ce[de+0],ve,De)}}function Za(x,E,F){return F==0?x==0?E==0?6:5:E==0?4:0:F}function Aa(x,E,F,U,J){switch(x>>>30){case 3:Te(E,F,U,J,0);break;case 2:Me(E,F,U,J);break;case 1:ke(E,F,U,J)}}function da(x,E){var F,U,J=E.M,re=E.Nb,ae=x.oc,ce=x.pc+40,de=x.oc,ve=x.pc+584,De=x.oc,qe=x.pc+600;for(F=0;16>F;++F)ae[ce+32*F-1]=129;for(F=0;8>F;++F)de[ve+32*F-1]=129,De[qe+32*F-1]=129;for(0<J?ae[ce-1-32]=de[ve-1-32]=De[qe-1-32]=129:(i(ae,ce-32-1,127,21),i(de,ve-32-1,127,9),i(De,qe-32-1,127,9)),U=0;U<x.za;++U){var ye=E.ya[E.aa+U];if(0<U){for(F=-1;16>F;++F)r(ae,ce+32*F-4,ae,ce+32*F+12,4);for(F=-1;8>F;++F)r(de,ve+32*F-4,de,ve+32*F+4,4),r(De,qe+32*F-4,De,qe+32*F+4,4)}var Le=x.Gd,Ue=x.Hd+U,it=ye.ad,We=ye.Hc;if(0<J&&(r(ae,ce-32,Le[Ue].y,0,16),r(de,ve-32,Le[Ue].f,0,8),r(De,qe-32,Le[Ue].ea,0,8)),ye.Za){var ot=ae,ut=ce-32+16;for(0<J&&(U>=x.za-1?i(ot,ut,Le[Ue].y[15],4):r(ot,ut,Le[Ue+1].y,0,4)),F=0;4>F;F++)ot[ut+128+F]=ot[ut+256+F]=ot[ut+384+F]=ot[ut+0+F];for(F=0;16>F;++F,We<<=2)ot=ae,ut=ce+pI[F],sc[ye.Ob[F]](ot,ut),Aa(We,it,16*+F,ot,ut)}else if(ot=Za(U,J,ye.Ob[0]),_d[ot](ae,ce),We!=0)for(F=0;16>F;++F,We<<=2)Aa(We,it,16*+F,ae,ce+pI[F]);for(F=ye.Gc,ot=Za(U,J,ye.Dd),Eu[ot](de,ve),Eu[ot](De,qe),We=it,ot=de,ut=ve,255&(ye=0|F)&&(170&ye?Ae(We,256,ot,ut):je(We,256,ot,ut)),ye=De,We=qe,255&(F>>=8)&&(170&F?Ae(it,320,ye,We):je(it,320,ye,We)),J<x.Ub-1&&(r(Le[Ue].y,0,ae,ce+480,16),r(Le[Ue].f,0,de,ve+224,8),r(Le[Ue].ea,0,De,qe+224,8)),F=8*re*x.B,Le=x.sa,Ue=x.ta+16*U+16*re*x.R,it=x.qa,ye=x.ra+8*U+F,We=x.Ha,ot=x.Ia+8*U+F,F=0;16>F;++F)r(Le,Ue+F*x.R,ae,ce+32*F,16);for(F=0;8>F;++F)r(it,ye+F*x.B,de,ve+32*F,8),r(We,ot+F*x.B,De,qe+32*F,8)}}function Vo(x,E,F,U,J,re,ae,ce,de){var ve=[0],De=[0],qe=0,ye=de!=null?de.kd:0,Le=de??new rt;if(x==null||12>F)return 7;Le.data=x,Le.w=E,Le.ha=F,E=[E],F=[F],Le.gb=[Le.gb];e:{var Ue=E,it=F,We=Le.gb;if(e(x!=null),e(it!=null),e(We!=null),We[0]=0,12<=it[0]&&!n(x,Ue[0],"RIFF")){if(n(x,Ue[0]+8,"WEBP")){We=3;break e}var ot=Fe(x,Ue[0]+4);if(12>ot||4294967286<ot){We=3;break e}if(ye&&ot>it[0]-8){We=7;break e}We[0]=ot,Ue[0]+=12,it[0]-=12}We=0}if(We!=0)return We;for(ot=0<Le.gb[0],F=F[0];;){e:{var ut=x;it=E,We=F;var jt=ve,xt=De,fn=Ue=[0];if((ln=qe=[qe])[0]=0,8>We[0])We=7;else{if(!n(ut,it[0],"VP8X")){if(Fe(ut,it[0]+4)!=10){We=3;break e}if(18>We[0]){We=7;break e}var nn=Fe(ut,it[0]+8),Vn=1+He(ut,it[0]+12);if(2147483648<=Vn*(ut=1+He(ut,it[0]+15))){We=3;break e}fn!=null&&(fn[0]=nn),jt!=null&&(jt[0]=Vn),xt!=null&&(xt[0]=ut),it[0]+=18,We[0]-=18,ln[0]=1}We=0}}if(qe=qe[0],Ue=Ue[0],We!=0)return We;if(it=!!(2&Ue),!ot&&qe)return 3;if(re!=null&&(re[0]=!!(16&Ue)),ae!=null&&(ae[0]=it),ce!=null&&(ce[0]=0),ae=ve[0],Ue=De[0],qe&&it&&de==null){We=0;break}if(4>F){We=7;break}if(ot&&qe||!ot&&!qe&&!n(x,E[0],"ALPH")){F=[F],Le.na=[Le.na],Le.P=[Le.P],Le.Sa=[Le.Sa];e:{nn=x,We=E,ot=F;var ln=Le.gb;jt=Le.na,xt=Le.P,fn=Le.Sa,Vn=22,e(nn!=null),e(ot!=null),ut=We[0];var rr=ot[0];for(e(jt!=null),e(fn!=null),jt[0]=null,xt[0]=null,fn[0]=0;;){if(We[0]=ut,ot[0]=rr,8>rr){We=7;break e}var Na=Fe(nn,ut+4);if(4294967286<Na){We=3;break e}var Un=8+Na+1&-2;if(Vn+=Un,0<ln&&Vn>ln){We=3;break e}if(!n(nn,ut,"VP8 ")||!n(nn,ut,"VP8L")){We=0;break e}if(rr[0]<Un){We=7;break e}n(nn,ut,"ALPH")||(jt[0]=nn,xt[0]=ut+8,fn[0]=Na),ut+=Un,rr-=Un}}if(F=F[0],Le.na=Le.na[0],Le.P=Le.P[0],Le.Sa=Le.Sa[0],We!=0)break}F=[F],Le.Ja=[Le.Ja],Le.xa=[Le.xa];e:if(ln=x,We=E,ot=F,jt=Le.gb[0],xt=Le.Ja,fn=Le.xa,nn=We[0],ut=!n(ln,nn,"VP8 "),Vn=!n(ln,nn,"VP8L"),e(ln!=null),e(ot!=null),e(xt!=null),e(fn!=null),8>ot[0])We=7;else{if(ut||Vn){if(ln=Fe(ln,nn+4),12<=jt&&ln>jt-12){We=3;break e}if(ye&&ln>ot[0]-8){We=7;break e}xt[0]=ln,We[0]+=8,ot[0]-=8,fn[0]=Vn}else fn[0]=5<=ot[0]&&ln[nn+0]==47&&!(ln[nn+4]>>5),xt[0]=ot[0];We=0}if(F=F[0],Le.Ja=Le.Ja[0],Le.xa=Le.xa[0],E=E[0],We!=0)break;if(4294967286<Le.Ja)return 3;if(ce==null||it||(ce[0]=Le.xa?2:1),ae=[ae],Ue=[Ue],Le.xa){if(5>F){We=7;break}ce=ae,ye=Ue,it=re,x==null||5>F?x=0:5<=F&&x[E+0]==47&&!(x[E+4]>>5)?(ot=[0],ln=[0],jt=[0],ee(xt=new X,x,E,F),Et(xt,ot,ln,jt)?(ce!=null&&(ce[0]=ot[0]),ye!=null&&(ye[0]=ln[0]),it!=null&&(it[0]=jt[0]),x=1):x=0):x=0}else{if(10>F){We=7;break}ce=Ue,x==null||10>F||!xl(x,E+3,F-3)?x=0:(ye=x[E+0]|x[E+1]<<8|x[E+2]<<16,it=16383&(x[E+7]<<8|x[E+6]),x=16383&(x[E+9]<<8|x[E+8]),1&ye||3<(ye>>1&7)||!(ye>>4&1)||ye>>5>=Le.Ja||!it||!x?x=0:(ae&&(ae[0]=it),ce&&(ce[0]=x),x=1))}if(!x||(ae=ae[0],Ue=Ue[0],qe&&(ve[0]!=ae||De[0]!=Ue)))return 3;de!=null&&(de[0]=Le,de.offset=E-de.w,e(4294967286>E-de.w),e(de.offset==de.ha-F));break}return We==0||We==7&&qe&&de==null?(re!=null&&(re[0]|=Le.na!=null&&0<Le.na.length),U!=null&&(U[0]=ae),J!=null&&(J[0]=Ue),0):We}function Kf(x,E,F){var U=E.width,J=E.height,re=0,ae=0,ce=U,de=J;if(E.Da=x!=null&&0<x.Da,E.Da&&(ce=x.cd,de=x.bd,re=x.v,ae=x.j,11>F||(re&=-2,ae&=-2),0>re||0>ae||0>=ce||0>=de||re+ce>U||ae+de>J))return 0;if(E.v=re,E.j=ae,E.va=re+ce,E.o=ae+de,E.U=ce,E.T=de,E.da=x!=null&&0<x.da,E.da){if(!vt(ce,de,F=[x.ib],re=[x.hb]))return 0;E.ib=F[0],E.hb=re[0]}return E.ob=x!=null&&x.ob,E.Kb=x==null||!x.Sd,E.da&&(E.ob=E.ib<3*U/4&&E.hb<3*J/4,E.Kb=0),1}function Gf(x){if(x==null)return 2;if(11>x.S){var E=x.f.RGBA;E.fb+=(x.height-1)*E.A,E.A=-E.A}else E=x.f.kb,x=x.height,E.O+=(x-1)*E.fa,E.fa=-E.fa,E.N+=(x-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(x-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(x-1)*E.lb,E.lb=-E.lb);return 0}function Uo(x,E,F,U){if(U==null||0>=x||0>=E)return 2;if(F!=null){if(F.Da){var J=F.cd,re=F.bd,ae=-2&F.v,ce=-2&F.j;if(0>ae||0>ce||0>=J||0>=re||ae+J>x||ce+re>E)return 2;x=J,E=re}if(F.da){if(!vt(x,E,J=[F.ib],re=[F.hb]))return 2;x=J[0],E=re[0]}}U.width=x,U.height=E;e:{var de=U.width,ve=U.height;if(x=U.S,0>=de||0>=ve||!(x>=rx&&13>x))x=2;else{if(0>=U.Rd&&U.sd==null){ae=re=J=E=0;var De=(ce=de*mI[x])*ve;if(11>x||(re=(ve+1)/2*(E=(de+1)/2),x==12&&(ae=(J=de)*ve)),(ve=a(De+2*re+ae))==null){x=1;break e}U.sd=ve,11>x?((de=U.f.RGBA).eb=ve,de.fb=0,de.A=ce,de.size=De):((de=U.f.kb).y=ve,de.O=0,de.fa=ce,de.Fd=De,de.f=ve,de.N=0+De,de.Ab=E,de.Cd=re,de.ea=ve,de.W=0+De+re,de.Db=E,de.Ed=re,x==12&&(de.F=ve,de.J=0+De+2*re),de.Tc=ae,de.lb=J)}if(E=1,J=U.S,re=U.width,ae=U.height,J>=rx&&13>J)if(11>J)x=U.f.RGBA,E&=(ce=Math.abs(x.A))*(ae-1)+re<=x.size,E&=ce>=re*mI[J],E&=x.eb!=null;else{x=U.f.kb,ce=(re+1)/2,De=(ae+1)/2,de=Math.abs(x.fa),ve=Math.abs(x.Ab);var qe=Math.abs(x.Db),ye=Math.abs(x.lb),Le=ye*(ae-1)+re;E&=de*(ae-1)+re<=x.Fd,E&=ve*(De-1)+ce<=x.Cd,E=(E&=qe*(De-1)+ce<=x.Ed)&de>=re&ve>=ce&qe>=ce,E&=x.y!=null,E&=x.f!=null,E&=x.ea!=null,J==12&&(E&=ye>=re,E&=Le<=x.Tc,E&=x.F!=null)}else E=0;x=E?0:2}}return x!=0||F!=null&&F.fd&&(x=Gf(U)),x}var Ja=64,nr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],za=24,Zi=32,ic=8,El=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ht("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(x){return x},P.Predictor2=function(x,E,F){return E[F+0]},P.Predictor3=function(x,E,F){return E[F+1]},P.Predictor4=function(x,E,F){return E[F-1]},P.Predictor5=function(x,E,F){return It(It(x,E[F+1]),E[F+0])},P.Predictor6=function(x,E,F){return It(x,E[F-1])},P.Predictor7=function(x,E,F){return It(x,E[F+0])},P.Predictor8=function(x,E,F){return It(E[F-1],E[F+0])},P.Predictor9=function(x,E,F){return It(E[F+0],E[F+1])},P.Predictor10=function(x,E,F){return It(It(x,E[F-1]),It(E[F+0],E[F+1]))},P.Predictor11=function(x,E,F){var U=E[F+0];return 0>=$t(U>>24&255,x>>24&255,(E=E[F-1])>>24&255)+$t(U>>16&255,x>>16&255,E>>16&255)+$t(U>>8&255,x>>8&255,E>>8&255)+$t(255&U,255&x,255&E)?U:x},P.Predictor12=function(x,E,F){var U=E[F+0];return(tn((x>>24&255)+(U>>24&255)-((E=E[F-1])>>24&255))<<24|tn((x>>16&255)+(U>>16&255)-(E>>16&255))<<16|tn((x>>8&255)+(U>>8&255)-(E>>8&255))<<8|tn((255&x)+(255&U)-(255&E)))>>>0},P.Predictor13=function(x,E,F){var U=E[F-1];return(Zt((x=It(x,E[F+0]))>>24&255,U>>24&255)<<24|Zt(x>>16&255,U>>16&255)<<16|Zt(x>>8&255,U>>8&255)<<8|Zt(255&x,255&U))>>>0};var wd=P.PredictorAdd0;P.PredictorAdd1=on,ht("Predictor2","PredictorAdd2"),ht("Predictor3","PredictorAdd3"),ht("Predictor4","PredictorAdd4"),ht("Predictor5","PredictorAdd5"),ht("Predictor6","PredictorAdd6"),ht("Predictor7","PredictorAdd7"),ht("Predictor8","PredictorAdd8"),ht("Predictor9","PredictorAdd9"),ht("Predictor10","PredictorAdd10"),ht("Predictor11","PredictorAdd11"),ht("Predictor12","PredictorAdd12"),ht("Predictor13","PredictorAdd13");var uo=P.PredictorAdd2;nt("ColorIndexInverseTransform","MapARGB","32b",function(x){return x>>8&255},function(x){return x}),nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(x){return x},function(x){return x>>8&255});var li,ac=P.ColorIndexInverseTransform,Ca=P.MapARGB,Wo=P.VP8LColorIndexInverseTransformAlpha,_=P.MapAlpha,k=P.VP8LPredictorsAdd=[];k.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var z,W,G,ne,pe,we,Ne,Te,Me,Ae,ke,je,Pe,Ie,ze,Ve,Xe,et,tt,_t,Mt,Nt,Dt,Vt,Lt,Ut,Dn,Zn,Nn=a(511),ci=a(2041),jn=a(225),ja=a(767),Ea=0,Sd=ci,fa=jn,Ji=ja,Cs=Nn,rx=0,ix=1,iI=2,ax=3,sx=4,z_=5,aI=6,$_=7,B_=8,ox=9,V_=10,XJ=[2,3,7],QJ=[3,3,11],sI=[280,256,256,256,40],ZJ=[0,1,1,1,0],JJ=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],eee=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],tee=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],nee=8,U_=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],W_=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],_v=null,ree=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],iee=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],oI=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],aee=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],see=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],oee=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],lee=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_d=[],sc=[],Eu=[],cee=1,lI=2,Ad=[],Nl=[];Qi("UpsampleRgbLinePair",ue,3),Qi("UpsampleBgrLinePair",Be,3),Qi("UpsampleRgbaLinePair",$n,4),Qi("UpsampleBgraLinePair",Qr,4),Qi("UpsampleArgbLinePair",Qn,4),Qi("UpsampleRgba4444LinePair",Tt,2),Qi("UpsampleRgb565LinePair",Ge,2);var uee=P.UpsampleRgbLinePair,dee=P.UpsampleBgrLinePair,cI=P.UpsampleRgbaLinePair,uI=P.UpsampleBgraLinePair,dI=P.UpsampleArgbLinePair,fI=P.UpsampleRgba4444LinePair,fee=P.UpsampleRgb565LinePair,lx=16,cx=1<<lx-1,Av=-227,H_=482,hee=6,hI=0,pee=a(256),mee=a(256),gee=a(256),vee=a(256),yee=a(H_-Av),bee=a(H_-Av);Dr("YuvToRgbRow",ue,3),Dr("YuvToBgrRow",Be,3),Dr("YuvToRgbaRow",$n,4),Dr("YuvToBgraRow",Qr,4),Dr("YuvToArgbRow",Qn,4),Dr("YuvToRgba4444Row",Tt,2),Dr("YuvToRgb565Row",Ge,2);var pI=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ux=[0,2,8],xee=[8,7,6,4,4,2,2,2,1,1,1,1],wee=1;this.WebPDecodeRGBA=function(x,E,F,U,J){var re=ix,ae=new $e,ce=new mn;ae.ba=ce,ce.S=re,ce.width=[ce.width],ce.height=[ce.height];var de=ce.width,ve=ce.height,De=new qt;if(De==null||x==null)var qe=2;else e(De!=null),qe=Vo(x,E,F,De.width,De.height,De.Pd,De.Qd,De.format,null);if(qe!=0?de=0:(de!=null&&(de[0]=De.width[0]),ve!=null&&(ve[0]=De.height[0]),de=1),de){ce.width=ce.width[0],ce.height=ce.height[0],U!=null&&(U[0]=ce.width),J!=null&&(J[0]=ce.height);e:{if(U=new kn,(J=new rt).data=x,J.w=E,J.ha=F,J.kd=1,E=[0],e(J!=null),((x=Vo(J.data,J.w,J.ha,null,null,null,E,null,J))==0||x==7)&&E[0]&&(x=4),(E=x)==0){if(e(ae!=null),U.data=J.data,U.w=J.w+J.offset,U.ha=J.ha-J.offset,U.put=Oe,U.ac=Re,U.bc=Ke,U.ma=ae,J.xa){if((x=oi())==null){ae=1;break e}if(function(ye,Le){var Ue=[0],it=[0],We=[0];t:for(;;){if(ye==null)return 0;if(Le==null)return ye.a=2,0;if(ye.l=Le,ye.a=0,ee(ye.m,Le.data,Le.w,Le.ha),!Et(ye.m,Ue,it,We)){ye.a=3;break t}if(ye.xb=lI,Le.width=Ue[0],Le.height=it[0],!vs(Ue[0],it[0],1,ye,null))break t;return 1}return e(ye.a!=0),0}(x,U)){if(U=(E=Uo(U.width,U.height,ae.Oa,ae.ba))==0){t:{U=x;n:for(;;){if(U==null){U=0;break t}if(e(U.s.yc!=null),e(U.s.Ya!=null),e(0<U.s.Wb),e((F=U.l)!=null),e((J=F.ma)!=null),U.xb!=0){if(U.ca=J.ba,U.tb=J.tb,e(U.ca!=null),!Kf(J.Oa,F,ax)){U.a=2;break n}if(!xa(U,F.width)||F.da)break n;if((F.da||dn(U.ca.S))&&Ar(),11>U.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),U.ca.f.kb.F!=null&&Ar()),U.Pb&&0<U.s.ua&&U.s.vb.X==null&&!he(U.s.vb,U.s.Wa.Xa)){U.a=1;break n}U.xb=0}if(!er(U,U.V,U.Ba,U.c,U.i,F.o,Ri))break n;J.Dc=U.Ma,U=1;break t}e(U.a!=0),U=0}U=!U}U&&(E=x.a)}else E=x.a}else{if((x=new Bc)==null){ae=1;break e}if(x.Fa=J.na,x.P=J.P,x.qc=J.Sa,Su(x,U)){if((E=Uo(U.width,U.height,ae.Oa,ae.ba))==0){if(x.Aa=0,F=ae.Oa,e((J=x)!=null),F!=null){if(0<(de=0>(de=F.Md)?0:100<de?255:255*de/100)){for(ve=De=0;4>ve;++ve)12>(qe=J.pb[ve]).lc&&(qe.ia=de*xee[0>qe.lc?0:qe.lc]>>3),De|=qe.ia;De&&(alert("todo:VP8InitRandom"),J.ia=1)}J.Ga=F.Id,100<J.Ga?J.Ga=100:0>J.Ga&&(J.Ga=0)}(function(ye,Le){if(ye==null)return 0;if(Le==null)return Yr(ye,2,"NULL VP8Io parameter in VP8Decode().");if(!ye.cb&&!Su(ye,Le))return 0;if(e(ye.cb),Le.ac==null||Le.ac(Le)){Le.ob&&(ye.L=0);var Ue=ux[ye.L];if(ye.L==2?(ye.yb=0,ye.zb=0):(ye.yb=Le.v-Ue>>4,ye.zb=Le.j-Ue>>4,0>ye.yb&&(ye.yb=0),0>ye.zb&&(ye.zb=0)),ye.Va=Le.o+15+Ue>>4,ye.Hb=Le.va+15+Ue>>4,ye.Hb>ye.za&&(ye.Hb=ye.za),ye.Va>ye.Ub&&(ye.Va=ye.Ub),0<ye.L){var it=ye.ed;for(Ue=0;4>Ue;++Ue){var We;if(ye.Qa.Cb){var ot=ye.Qa.Lb[Ue];ye.Qa.Fb||(ot+=it.Tb)}else ot=it.Tb;for(We=0;1>=We;++We){var ut=ye.gd[Ue][We],jt=ot;if(it.Pc&&(jt+=it.vd[0],We&&(jt+=it.od[0])),0<(jt=0>jt?0:63<jt?63:jt)){var xt=jt;0<it.wb&&(xt=4<it.wb?xt>>2:xt>>1)>9-it.wb&&(xt=9-it.wb),1>xt&&(xt=1),ut.dd=xt,ut.tc=2*jt+xt,ut.ld=40<=jt?2:15<=jt?1:0}else ut.tc=0;ut.La=We}}}Ue=0}else Yr(ye,6,"Frame setup failed"),Ue=ye.a;if(Ue=Ue==0){if(Ue){ye.$c=0,0<ye.Aa||(ye.Ic=wee);t:{Ue=ye.Ic,it=4*(xt=ye.za);var fn=32*xt,nn=xt+1,Vn=0<ye.L?xt*(0<ye.Aa?2:1):0,ln=(ye.Aa==2?2:1)*xt;if((ut=it+832+(We=3*(16*Ue+ux[ye.L])/2*fn)+(ot=ye.Fa!=null&&0<ye.Fa.length?ye.Kc.c*ye.Kc.i:0))!=ut)Ue=0;else{if(ut>ye.Vb){if(ye.Vb=0,ye.Ec=a(ut),ye.Fc=0,ye.Ec==null){Ue=Yr(ye,1,"no memory during frame initialization.");break t}ye.Vb=ut}ut=ye.Ec,jt=ye.Fc,ye.Ac=ut,ye.Bc=jt,jt+=it,ye.Gd=s(fn,bl),ye.Hd=0,ye.rb=s(nn+1,Xa),ye.sb=1,ye.wa=Vn?s(Vn,Ei):null,ye.Y=0,ye.D.Nb=0,ye.D.wa=ye.wa,ye.D.Y=ye.Y,0<ye.Aa&&(ye.D.Y+=xt),e(!0),ye.oc=ut,ye.pc=jt,jt+=832,ye.ya=s(ln,Ws),ye.aa=0,ye.D.ya=ye.ya,ye.D.aa=ye.aa,ye.Aa==2&&(ye.D.aa+=xt),ye.R=16*xt,ye.B=8*xt,xt=(fn=ux[ye.L])*ye.R,fn=fn/2*ye.B,ye.sa=ut,ye.ta=jt+xt,ye.qa=ye.sa,ye.ra=ye.ta+16*Ue*ye.R+fn,ye.Ha=ye.qa,ye.Ia=ye.ra+8*Ue*ye.B+fn,ye.$c=0,jt+=We,ye.mb=ot?ut:null,ye.nb=ot?jt:null,e(jt+ot<=ye.Fc+ye.Vb),ys(ye),i(ye.Ac,ye.Bc,0,it),Ue=1}}if(Ue){if(Le.ka=0,Le.y=ye.sa,Le.O=ye.ta,Le.f=ye.qa,Le.N=ye.ra,Le.ea=ye.Ha,Le.Vd=ye.Ia,Le.fa=ye.R,Le.Rc=ye.B,Le.F=null,Le.J=0,!Ea){for(Ue=-255;255>=Ue;++Ue)Nn[255+Ue]=0>Ue?-Ue:Ue;for(Ue=-1020;1020>=Ue;++Ue)ci[1020+Ue]=-128>Ue?-128:127<Ue?127:Ue;for(Ue=-112;112>=Ue;++Ue)jn[112+Ue]=-16>Ue?-16:15<Ue?15:Ue;for(Ue=-255;510>=Ue;++Ue)ja[255+Ue]=0>Ue?0:255<Ue?255:Ue;Ea=1}Ne=Ro,Te=Ql,Ae=Zl,ke=Hn,je=Hs,Me=Mo,Pe=jl,Ie=Bo,ze=R,Ve=Q,Xe=Qa,et=Vc,tt=ge,_t=Ee,Mt=Al,Nt=Cl,Dt=As,Vt=rc,sc[0]=tc,sc[1]=Wn,sc[2]=Xi,sc[3]=ec,sc[4]=Au,sc[5]=Fo,sc[6]=Wr,sc[7]=Ss,sc[8]=co,sc[9]=wl,_d[0]=Sa,_d[1]=Hf,_d[2]=qf,_d[3]=Gi,_d[4]=Yi,_d[5]=Lo,_d[6]=Jl,Eu[0]=_l,Eu[1]=_u,Eu[2]=Sl,Eu[3]=_a,Eu[4]=or,Eu[5]=Cu,Eu[6]=ju,Ue=1}else Ue=0}Ue&&(Ue=function(rr,Na){for(rr.M=0;rr.M<rr.Va;++rr.M){var Un,cn=rr.Jc[rr.M&rr.Xb],zt=rr.m,ea=rr;for(Un=0;Un<ea.za;++Un){var Fn=zt,cr=ea,ui=cr.Ac,es=cr.Bc+4*Un,Ys=cr.zc,Li=cr.ya[cr.aa+Un];if(cr.Qa.Bb?Li.$b=xe(Fn,cr.Pa.jb[0])?2+xe(Fn,cr.Pa.jb[2]):xe(Fn,cr.Pa.jb[1]):Li.$b=0,cr.kc&&(Li.Ad=xe(Fn,cr.Bd)),Li.Za=!xe(Fn,145)+0,Li.Za){var js=Li.Ob,Xs=0;for(cr=0;4>cr;++cr){var Pa,pr=Ys[0+cr];for(Pa=0;4>Pa;++Pa){pr=see[ui[es+Pa]][pr];for(var Ir=oI[xe(Fn,pr[0])];0<Ir;)Ir=oI[2*Ir+xe(Fn,pr[Ir])];pr=-Ir,ui[es+Pa]=pr}r(js,Xs,ui,es,4),Xs+=4,Ys[0+cr]=pr}}else pr=xe(Fn,156)?xe(Fn,128)?1:3:xe(Fn,163)?2:0,Li.Ob[0]=pr,i(ui,es,pr,4),i(Ys,0,pr,4);Li.Dd=xe(Fn,142)?xe(Fn,114)?xe(Fn,183)?1:3:2:0}if(ea.m.Ka)return Yr(rr,7,"Premature end-of-partition0 encountered.");for(;rr.ja<rr.za;++rr.ja){if(ea=cn,Fn=(zt=rr).rb[zt.sb-1],ui=zt.rb[zt.sb+zt.ja],Un=zt.ya[zt.aa+zt.ja],es=zt.kc?Un.Ad:0)Fn.la=ui.la=0,Un.Za||(Fn.Na=ui.Na=0),Un.Hc=0,Un.Gc=0,Un.ia=0;else{var Fi,Or;if(Fn=ui,ui=ea,es=zt.Pa.Xc,Ys=zt.ya[zt.aa+zt.ja],Li=zt.pb[Ys.$b],cr=Ys.ad,js=0,Xs=zt.rb[zt.sb-1],pr=Pa=0,i(cr,js,0,384),Ys.Za)var ts=0,oc=es[3];else{Ir=a(16);var ta=Fn.Na+Xs.Na;if(ta=_v(ui,es[1],ta,Li.Eb,0,Ir,0),Fn.Na=Xs.Na=(0<ta)+0,1<ta)Ne(Ir,0,cr,js);else{var fo=Ir[0]+3>>3;for(Ir=0;256>Ir;Ir+=16)cr[js+Ir]=fo}ts=1,oc=es[0]}var qr=15&Fn.la,ka=15&Xs.la;for(Ir=0;4>Ir;++Ir){var Ho=1&ka;for(fo=Or=0;4>fo;++fo)qr=qr>>1|(Ho=(ta=_v(ui,oc,ta=Ho+(1&qr),Li.Sc,ts,cr,js))>ts)<<7,Or=Or<<2|(3<ta?3:1<ta?2:cr[js+0]!=0),js+=16;qr>>=4,ka=ka>>1|Ho<<7,Pa=(Pa<<8|Or)>>>0}for(oc=qr,ts=ka>>4,Fi=0;4>Fi;Fi+=2){for(Or=0,qr=Fn.la>>4+Fi,ka=Xs.la>>4+Fi,Ir=0;2>Ir;++Ir){for(Ho=1&ka,fo=0;2>fo;++fo)ta=Ho+(1&qr),qr=qr>>1|(Ho=0<(ta=_v(ui,es[2],ta,Li.Qc,0,cr,js)))<<3,Or=Or<<2|(3<ta?3:1<ta?2:cr[js+0]!=0),js+=16;qr>>=2,ka=ka>>1|Ho<<5}pr|=Or<<4*Fi,oc|=qr<<4<<Fi,ts|=(240&ka)<<Fi}Fn.la=oc,Xs.la=ts,Ys.Hc=Pa,Ys.Gc=pr,Ys.ia=43690&pr?0:Li.ia,es=!(Pa|pr)}if(0<zt.L&&(zt.wa[zt.Y+zt.ja]=zt.gd[Un.$b][Un.Za],zt.wa[zt.Y+zt.ja].La|=!es),ea.Ka)return Yr(rr,7,"Premature end-of-file encountered.")}if(ys(rr),zt=Na,ea=1,Un=(cn=rr).D,Fn=0<cn.L&&cn.M>=cn.zb&&cn.M<=cn.Va,cn.Aa==0)t:{if(Un.M=cn.M,Un.uc=Fn,da(cn,Un),ea=1,Un=(Or=cn.D).Nb,Fn=(pr=ux[cn.L])*cn.R,ui=pr/2*cn.B,Ir=16*Un*cn.R,fo=8*Un*cn.B,es=cn.sa,Ys=cn.ta-Fn+Ir,Li=cn.qa,cr=cn.ra-ui+fo,js=cn.Ha,Xs=cn.Ia-ui+fo,ka=(qr=Or.M)==0,Pa=qr>=cn.Va-1,cn.Aa==2&&da(cn,Or),Or.uc)for(Ho=(ta=cn).D.M,e(ta.D.uc),Or=ta.yb;Or<ta.Hb;++Or){ts=Or,oc=Ho;var Qs=(qo=(ns=ta).D).Nb;Fi=ns.R;var qo=qo.wa[qo.Y+ts],Ko=ns.sa,ho=ns.ta+16*Qs*Fi+16*ts,Go=qo.dd,Zr=qo.tc;if(Zr!=0)if(e(3<=Zr),ns.L==1)0<ts&&Nt(Ko,ho,Fi,Zr+4),qo.La&&Vt(Ko,ho,Fi,Zr),0<oc&&Mt(Ko,ho,Fi,Zr+4),qo.La&&Dt(Ko,ho,Fi,Zr);else{var Yo=ns.B,lc=ns.qa,Yf=ns.ra+8*Qs*Yo+8*ts,Nu=ns.Ha,ns=ns.Ia+8*Qs*Yo+8*ts;Qs=qo.ld,0<ts&&(Ie(Ko,ho,Fi,Zr+4,Go,Qs),Ve(lc,Yf,Nu,ns,Yo,Zr+4,Go,Qs)),qo.La&&(et(Ko,ho,Fi,Zr,Go,Qs),_t(lc,Yf,Nu,ns,Yo,Zr,Go,Qs)),0<oc&&(Pe(Ko,ho,Fi,Zr+4,Go,Qs),ze(lc,Yf,Nu,ns,Yo,Zr+4,Go,Qs)),qo.La&&(Xe(Ko,ho,Fi,Zr,Go,Qs),tt(lc,Yf,Nu,ns,Yo,Zr,Go,Qs))}}if(cn.ia&&alert("todo:DitherRow"),zt.put!=null){if(Or=16*qr,qr=16*(qr+1),ka?(zt.y=cn.sa,zt.O=cn.ta+Ir,zt.f=cn.qa,zt.N=cn.ra+fo,zt.ea=cn.Ha,zt.W=cn.Ia+fo):(Or-=pr,zt.y=es,zt.O=Ys,zt.f=Li,zt.N=cr,zt.ea=js,zt.W=Xs),Pa||(qr-=pr),qr>zt.o&&(qr=zt.o),zt.F=null,zt.J=null,cn.Fa!=null&&0<cn.Fa.length&&Or<qr&&(zt.J=Vr(cn,zt,Or,qr-Or),zt.F=cn.mb,zt.F==null&&zt.F.length==0)){ea=Yr(cn,3,"Could not decode alpha data.");break t}Or<zt.j&&(pr=zt.j-Or,Or=zt.j,e(!(1&pr)),zt.O+=cn.R*pr,zt.N+=cn.B*(pr>>1),zt.W+=cn.B*(pr>>1),zt.F!=null&&(zt.J+=zt.width*pr)),Or<qr&&(zt.O+=zt.v,zt.N+=zt.v>>1,zt.W+=zt.v>>1,zt.F!=null&&(zt.J+=zt.v),zt.ka=Or-zt.j,zt.U=zt.va-zt.v,zt.T=qr-Or,ea=zt.put(zt))}Un+1!=cn.Ic||Pa||(r(cn.sa,cn.ta-Fn,es,Ys+16*cn.R,Fn),r(cn.qa,cn.ra-ui,Li,cr+8*cn.B,ui),r(cn.Ha,cn.Ia-ui,js,Xs+8*cn.B,ui))}if(!ea)return Yr(rr,6,"Output aborted.")}return 1}(ye,Le)),Le.bc!=null&&Le.bc(Le),Ue&=1}return Ue?(ye.cb=0,Ue):0})(x,U)||(E=x.a)}}else E=x.a}E==0&&ae.Oa!=null&&ae.Oa.fd&&(E=Gf(ae.ba))}ae=E}re=ae!=0?null:11>re?ce.f.RGBA.eb:ce.f.kb.y}else re=null;return re};var mI=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(P,O){for(var T="",M=0;M<4;M++)T+=String.fromCharCode(P[O++]);return T}function d(P,O){return P[O+0]|P[O+1]<<8}function f(P,O){return(P[O+0]|P[O+1]<<8|P[O+2]<<16)>>>0}function p(P,O){return(P[O+0]|P[O+1]<<8|P[O+2]<<16|P[O+3]<<24)>>>0}new l;var h=[0],g=[0],m=[],v=new l,y=t,b=function(P,O){var T={},M=0,L=!1,V=0,K=0;if(T.frames=[],!function($,X){for(var te=0;te<4;te++)if($[X+te]!="RIFF".charCodeAt(te))return!0;return!1}(P,O)){for(p(P,O+=4),O+=8;O<P.length;){var Z=u(P,O),Y=p(P,O+=4);O+=4;var H=Y+(1&Y);switch(Z){case"VP8 ":case"VP8L":T.frames[M]===void 0&&(T.frames[M]={}),(se=T.frames[M]).src_off=L?K:O-8,se.src_size=V+Y+8,M++,L&&(L=!1,V=0,K=0);break;case"VP8X":(se=T.header={}).feature_flags=P[O];var ee=O+4;se.canvas_width=1+f(P,ee),ee+=3,se.canvas_height=1+f(P,ee),ee+=3;break;case"ALPH":L=!0,V=H+8,K=O-8;break;case"ANIM":(se=T.header).bgcolor=p(P,O),ee=O+4,se.loop_count=d(P,ee),ee+=2;break;case"ANMF":var le,se;(se=T.frames[M]={}).offset_x=2*f(P,O),O+=3,se.offset_y=2*f(P,O),O+=3,se.width=1+f(P,O),O+=3,se.height=1+f(P,O),O+=3,se.duration=f(P,O),O+=3,le=P[O++],se.dispose=1&le,se.blend=le>>1&1}Z!="ANMF"&&(O+=H)}return T}}(y,0);b.response=y,b.rgbaoutput=!0,b.dataurl=!1;var S=b.header?b.header:null,A=b.frames?b.frames:null;if(S){S.loop_counter=S.loop_count,h=[S.canvas_height],g=[S.canvas_width];for(var C=0;C<A.length&&A[C].blend!=0;C++);}var D=A[0],j=v.WebPDecodeRGBA(y,D.src_off,D.src_size,g,h);D.rgba=j,D.imgwidth=g[0],D.imgheight=h[0];for(var N=0;N<g[0]*h[0]*4;N++)m[N]=j[N];return this.width=g,this.height=h,this.data=m,this}(function(t){var e,n,r,i,a,s,o,l,u,d=function($){return $=$||{},this.isStrokeTransparent=$.isStrokeTransparent||!1,this.strokeOpacity=$.strokeOpacity||1,this.strokeStyle=$.strokeStyle||"#000000",this.fillStyle=$.fillStyle||"#000000",this.isFillTransparent=$.isFillTransparent||!1,this.fillOpacity=$.fillOpacity||1,this.font=$.font||"10px sans-serif",this.textBaseline=$.textBaseline||"alphabetic",this.textAlign=$.textAlign||"left",this.lineWidth=$.lineWidth||1,this.lineJoin=$.lineJoin||"miter",this.lineCap=$.lineCap||"butt",this.path=$.path||[],this.transform=$.transform!==void 0?$.transform.clone():new l,this.globalCompositeOperation=$.globalCompositeOperation||"normal",this.globalAlpha=$.globalAlpha||1,this.clip_path=$.clip_path||[],this.currentPoint=$.currentPoint||new s,this.miterLimit=$.miterLimit||10,this.lastPoint=$.lastPoint||new s,this.lineDashOffset=$.lineDashOffset||0,this.lineDash=$.lineDash||[],this.margin=$.margin||[0,0,0,0],this.prevPageLastElemOffset=$.prevPageLastElemOffset||0,this.ignoreClearRect=typeof $.ignoreClearRect!="boolean"||$.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var f=function($){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=$;Object.defineProperty(this,"pdf",{get:function(){return X}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(Fe){te=!!Fe}});var oe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return oe},set:function(Fe){oe=!!Fe}});var me=0;Object.defineProperty(this,"posX",{get:function(){return me},set:function(Fe){isNaN(Fe)||(me=Fe)}});var _e=0;Object.defineProperty(this,"posY",{get:function(){return _e},set:function(Fe){isNaN(Fe)||(_e=Fe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Fe){var he;typeof Fe=="number"?he=[Fe,Fe,Fe,Fe]:((he=new Array(4))[0]=Fe[0],he[1]=Fe.length>=2?Fe[1]:he[0],he[2]=Fe.length>=3?Fe[2]:he[0],he[3]=Fe.length>=4?Fe[3]:he[1]),u.margin=he}});var Ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ce},set:function(Fe){Ce=Fe}});var fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return fe},set:function(Fe){fe=Fe}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(Fe){xe=Fe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Fe){Fe instanceof d&&(u=Fe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Fe){u.path=Fe}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(Fe){Se=Fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Fe){var he;he=p(Fe),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Fe){var he=p(Fe);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Fe){["butt","round","square"].indexOf(Fe)!==-1&&(this.ctx.lineCap=Fe,this.pdf.setLineCap(Fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Fe){isNaN(Fe)||(this.ctx.lineWidth=Fe,this.pdf.setLineWidth(Fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Fe){["bevel","round","miter"].indexOf(Fe)!==-1&&(this.ctx.lineJoin=Fe,this.pdf.setLineJoin(Fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Fe){isNaN(Fe)||(this.ctx.miterLimit=Fe,this.pdf.setMiterLimit(Fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Fe){this.ctx.textBaseline=Fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Fe){["right","end","center","left","start"].indexOf(Fe)!==-1&&(this.ctx.textAlign=Fe)}});var ie=null,He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(Fe){ie=null,He=Fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Fe){var he;if(this.ctx.font=Fe,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Fe))!==null){var Ye=he[1];he[2];var mt=he[3],vt=he[4];he[5];var Qe=he[6],Ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(vt)[2];vt=Math.floor(Ot==="px"?parseFloat(vt)*this.pdf.internal.scaleFactor:Ot==="em"?parseFloat(vt)*this.pdf.getFontSize():parseFloat(vt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(vt);var ht=function(yt){var nt,Bt,ft=[],pt=yt.trim();if(pt==="")return _j;if(pt in X$)return[X$[pt]];for(;pt!=="";){switch(Bt=null,nt=(pt=Z$(pt)).charAt(0)){case'"':case"'":Bt=aYe(pt.substring(1),nt);break;default:Bt=sYe(pt)}if(Bt===null||(ft.push(Bt[0]),(pt=Z$(Bt[1]))!==""&&pt.charAt(0)!==","))return _j;pt=pt.replace(/^,/,"")}return ft}(Qe);if(this.fontFaces){var dt=function(yt,nt){if(ie===null){var Bt=function(ft){var pt=[];return Object.keys(ft).forEach(function(Rt){ft[Rt].forEach(function(Ct){var Ht=null;switch(Ct){case"bold":Ht={family:Rt,weight:"bold"};break;case"italic":Ht={family:Rt,style:"italic"};break;case"bolditalic":Ht={family:Rt,weight:"bold",style:"italic"};break;case"":case"normal":Ht={family:Rt}}Ht!==null&&(Ht.ref={name:Rt,style:Ct},pt.push(Ht))})}),pt}(yt.getFontList());ie=function(ft){for(var pt={},Rt=0;Rt<ft.length;++Rt){var Ct=Sj(ft[Rt]),Ht=Ct.family,pn=Ct.stretch,dn=Ct.style,wt=Ct.weight;pt[Ht]=pt[Ht]||{},pt[Ht][pn]=pt[Ht][pn]||{},pt[Ht][pn][dn]=pt[Ht][pn][dn]||{},pt[Ht][pn][dn][wt]=Ct}return pt}(Bt.concat(nt))}return ie}(this.pdf,this.fontFaces),It=ht.map(function(yt){return{family:yt,stretch:"normal",weight:mt,style:Ye}}),tn=function(yt,nt,Bt){for(var ft=(Bt=Bt||{}).defaultFontFamily||"times",pt=Object.assign({},iYe,Bt.genericFontFamilies||{}),Rt=null,Ct=null,Ht=0;Ht<nt.length;++Ht)if(pt[(Rt=Sj(nt[Ht])).family]&&(Rt.family=pt[Rt.family]),yt.hasOwnProperty(Rt.family)){Ct=yt[Rt.family];break}if(!(Ct=Ct||yt[ft]))throw new Error("Could not find a font-family for the rule '"+Q$(Rt)+"' and default family '"+ft+"'.");if(Ct=function(pn,dn){if(dn[pn])return dn[pn];var wt=yk[pn],sr=wt<=yk.normal?-1:1,mn=Y$(dn,PJ,wt,sr);if(!mn)throw new Error("Could not find a matching font-stretch value for "+pn);return mn}(Rt.stretch,Ct),Ct=function(pn,dn){if(dn[pn])return dn[pn];for(var wt=NJ[pn],sr=0;sr<wt.length;++sr)if(dn[wt[sr]])return dn[wt[sr]];throw new Error("Could not find a matching font-style for "+pn)}(Rt.style,Ct),!(Ct=function(pn,dn){if(dn[pn])return dn[pn];if(pn===400&&dn[500])return dn[500];if(pn===500&&dn[400])return dn[400];var wt=rYe[pn],sr=Y$(dn,kJ,wt,pn<400?-1:1);if(!sr)throw new Error("Could not find a matching font-weight for value "+pn);return sr}(Rt.weight,Ct)))throw new Error("Failed to resolve a font for the rule '"+Q$(Rt)+"'.");return Ct}(dt,It);this.pdf.setFont(tn.ref.name,tn.ref.style)}else{var Zt="";(mt==="bold"||parseInt(mt,10)>=700||Ye==="bold")&&(Zt="bold"),Ye==="italic"&&(Zt+="italic"),Zt.length===0&&(Zt="normal");for(var $t="",on={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<ht.length;lt++){if(this.pdf.internal.getFont(ht[lt],Zt,{noFallback:!0,disableWarning:!0})!==void 0){$t=ht[lt];break}if(Zt==="bolditalic"&&this.pdf.internal.getFont(ht[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)$t=ht[lt],Zt="bold";else if(this.pdf.internal.getFont(ht[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){$t=ht[lt],Zt="normal";break}}if($t===""){for(var bt=0;bt<ht.length;bt++)if(on[ht[bt]]){$t=on[ht[bt]];break}}$t=$t===""?"Times":$t,this.pdf.setFont($t,Zt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Fe){this.ctx.globalCompositeOperation=Fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Fe){this.ctx.globalAlpha=Fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Fe){this.ctx.lineDashOffset=Fe,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Fe){this.ctx.lineDash=Fe,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Fe){this.ctx.ignoreClearRect=!!Fe}})};f.prototype.setLineDash=function($){this.lineDash=$},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){A.call(this,"fill",!1)},f.prototype.stroke=function(){A.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function($,X){if(isNaN($)||isNaN(X))throw Kr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new s($,X));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new s($,X)},f.prototype.closePath=function(){var $=new s(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&Rr(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){$=new s(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s($.x,$.y)},f.prototype.lineTo=function($,X){if(isNaN($)||isNaN(X))throw Kr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new s($,X));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new s(te.x,te.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},f.prototype.quadraticCurveTo=function($,X,te,oe){if(isNaN(te)||isNaN(oe)||isNaN($)||isNaN(X))throw Kr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var me=this.ctx.transform.applyToPoint(new s(te,oe)),_e=this.ctx.transform.applyToPoint(new s($,X));this.path.push({type:"qct",x1:_e.x,y1:_e.y,x:me.x,y:me.y}),this.ctx.lastPoint=new s(me.x,me.y)},f.prototype.bezierCurveTo=function($,X,te,oe,me,_e){if(isNaN(me)||isNaN(_e)||isNaN($)||isNaN(X)||isNaN(te)||isNaN(oe))throw Kr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ce=this.ctx.transform.applyToPoint(new s(me,_e)),fe=this.ctx.transform.applyToPoint(new s($,X)),xe=this.ctx.transform.applyToPoint(new s(te,oe));this.path.push({type:"bct",x1:fe.x,y1:fe.y,x2:xe.x,y2:xe.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new s(Ce.x,Ce.y)},f.prototype.arc=function($,X,te,oe,me,_e){if(isNaN($)||isNaN(X)||isNaN(te)||isNaN(oe)||isNaN(me))throw Kr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_e=!!_e,!this.ctx.transform.isIdentity){var Ce=this.ctx.transform.applyToPoint(new s($,X));$=Ce.x,X=Ce.y;var fe=this.ctx.transform.applyToPoint(new s(0,te)),xe=this.ctx.transform.applyToPoint(new s(0,0));te=Math.sqrt(Math.pow(fe.x-xe.x,2)+Math.pow(fe.y-xe.y,2))}Math.abs(me-oe)>=2*Math.PI&&(oe=0,me=2*Math.PI),this.path.push({type:"arc",x:$,y:X,radius:te,startAngle:oe,endAngle:me,counterclockwise:_e})},f.prototype.arcTo=function($,X,te,oe,me){throw new Error("arcTo not implemented.")},f.prototype.rect=function($,X,te,oe){if(isNaN($)||isNaN(X)||isNaN(te)||isNaN(oe))throw Kr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo($,X),this.lineTo($+te,X),this.lineTo($+te,X+oe),this.lineTo($,X+oe),this.lineTo($,X),this.lineTo($+te,X),this.lineTo($,X)},f.prototype.fillRect=function($,X,te,oe){if(isNaN($)||isNaN(X)||isNaN(te)||isNaN(oe))throw Kr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var me={};this.lineCap!=="butt"&&(me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect($,X,te,oe),this.fill(),me.hasOwnProperty("lineCap")&&(this.lineCap=me.lineCap),me.hasOwnProperty("lineJoin")&&(this.lineJoin=me.lineJoin)}},f.prototype.strokeRect=function($,X,te,oe){if(isNaN($)||isNaN(X)||isNaN(te)||isNaN(oe))throw Kr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect($,X,te,oe),this.stroke())},f.prototype.clearRect=function($,X,te,oe){if(isNaN($)||isNaN(X)||isNaN(te)||isNaN(oe))throw Kr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect($,X,te,oe))},f.prototype.save=function($){$=typeof $!="boolean"||$;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),$){this.ctx.fontSize=this.pdf.internal.getFontSize();var oe=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=oe}},f.prototype.restore=function($){$=typeof $!="boolean"||$;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(X),$&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function($){var X,te,oe,me;if($.isCanvasGradient===!0&&($=$.getColor()),!$)return{r:0,g:0,b:0,a:0,style:$};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test($))X=0,te=0,oe=0,me=0;else{var _e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec($);if(_e!==null)X=parseInt(_e[1]),te=parseInt(_e[2]),oe=parseInt(_e[3]),me=1;else if((_e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec($))!==null)X=parseInt(_e[1]),te=parseInt(_e[2]),oe=parseInt(_e[3]),me=parseFloat(_e[4]);else{if(me=1,typeof $=="string"&&$.charAt(0)!=="#"){var Ce=new wJ($);$=Ce.ok?Ce.toHex():"#000000"}$.length===4?(X=$.substring(1,2),X+=X,te=$.substring(2,3),te+=te,oe=$.substring(3,4),oe+=oe):(X=$.substring(1,3),te=$.substring(3,5),oe=$.substring(5,7)),X=parseInt(X,16),te=parseInt(te,16),oe=parseInt(oe,16)}}return{r:X,g:te,b:oe,a:me,style:$}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function($,X,te,oe){if(isNaN(X)||isNaN(te)||typeof $!="string")throw Kr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(oe=isNaN(oe)?void 0:oe,!h.call(this)){var me=H(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;M.call(this,{text:$,x:X,y:te,scale:_e,angle:me,align:this.textAlign,maxWidth:oe})}},f.prototype.strokeText=function($,X,te,oe){if(isNaN(X)||isNaN(te)||typeof $!="string")throw Kr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){oe=isNaN(oe)?void 0:oe;var me=H(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;M.call(this,{text:$,x:X,y:te,scale:_e,renderingMode:"stroke",angle:me,align:this.textAlign,maxWidth:oe})}},f.prototype.measureText=function($){if(typeof $!="string")throw Kr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,te=this.pdf.internal.scaleFactor,oe=X.internal.getFontSize(),me=X.getStringUnitWidth($)*oe/X.internal.scaleFactor;return new function(_e){var Ce=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this}({width:me*=Math.round(96*te/72*1e4)/1e4})},f.prototype.scale=function($,X){if(isNaN($)||isNaN(X))throw Kr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new l($,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.rotate=function($){if(isNaN($))throw Kr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new l(Math.cos($),Math.sin($),-Math.sin($),Math.cos($),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.translate=function($,X){if(isNaN($)||isNaN(X))throw Kr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new l(1,0,0,1,$,X);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.transform=function($,X,te,oe,me,_e){if(isNaN($)||isNaN(X)||isNaN(te)||isNaN(oe)||isNaN(me)||isNaN(_e))throw Kr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ce=new l($,X,te,oe,me,_e);this.ctx.transform=this.ctx.transform.multiply(Ce)},f.prototype.setTransform=function($,X,te,oe,me,_e){$=isNaN($)?1:$,X=isNaN(X)?0:X,te=isNaN(te)?0:te,oe=isNaN(oe)?1:oe,me=isNaN(me)?0:me,_e=isNaN(_e)?0:_e,this.ctx.transform=new l($,X,te,oe,me,_e)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function($,X,te,oe,me,_e,Ce,fe,xe){var Se=this.pdf.getImageProperties($),ie=1,He=1,Fe=1,he=1;oe!==void 0&&fe!==void 0&&(Fe=fe/oe,he=xe/me,ie=Se.width/oe*fe/oe,He=Se.height/me*xe/me),_e===void 0&&(_e=X,Ce=te,X=0,te=0),oe!==void 0&&fe===void 0&&(fe=oe,xe=me),oe===void 0&&fe===void 0&&(fe=Se.width,xe=Se.height);for(var Ye,mt=this.ctx.transform.decompose(),vt=H(mt.rotate.shx),Qe=new l,Ot=(Qe=(Qe=(Qe=Qe.multiply(mt.translate)).multiply(mt.skew)).multiply(mt.scale)).applyToRectangle(new o(_e-X*Fe,Ce-te*he,oe*ie,me*He)),ht=v.call(this,Ot),dt=[],It=0;It<ht.length;It+=1)dt.indexOf(ht[It])===-1&&dt.push(ht[It]);if(S(dt),this.autoPaging)for(var tn=dt[0],Zt=dt[dt.length-1],$t=tn;$t<Zt+1;$t++){this.pdf.setPage($t);var on=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],lt=$t===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nt=$t===1?0:bt+($t-2)*yt;if(this.ctx.clip_path.length!==0){var Bt=this.path;Ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Ye,this.posX+this.margin[3],-nt+lt+this.ctx.prevPageLastElemOffset),C.call(this,"fill",!0),this.path=Bt}var ft=JSON.parse(JSON.stringify(Ot));ft=b([ft],this.posX+this.margin[3],-nt+lt+this.ctx.prevPageLastElemOffset)[0];var pt=($t>tn||$t<Zt)&&m.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],on,yt,null).clip().discardPath()),this.pdf.addImage($,"JPEG",ft.x,ft.y,ft.w,ft.h,null,null,vt),pt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage($,"JPEG",Ot.x,Ot.y,Ot.w,Ot.h,null,null,vt)};var v=function($,X,te){var oe=[];X=X||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var me=this.posY+this.ctx.prevPageLastElemOffset;switch($.type){default:case"mt":case"lt":oe.push(Math.floor(($.y+me)/te)+1);break;case"arc":oe.push(Math.floor(($.y+me-$.radius)/te)+1),oe.push(Math.floor(($.y+me+$.radius)/te)+1);break;case"qct":var _e=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x,$.y);oe.push(Math.floor((_e.y+me)/te)+1),oe.push(Math.floor((_e.y+_e.h+me)/te)+1);break;case"bct":var Ce=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x2,$.y2,$.x,$.y);oe.push(Math.floor((Ce.y+me)/te)+1),oe.push(Math.floor((Ce.y+Ce.h+me)/te)+1);break;case"rect":oe.push(Math.floor(($.y+me)/te)+1),oe.push(Math.floor(($.y+$.h+me)/te)+1)}for(var fe=0;fe<oe.length;fe+=1)for(;this.pdf.internal.getNumberOfPages()<oe[fe];)y.call(this);return oe},y=function(){var $=this.fillStyle,X=this.strokeStyle,te=this.font,oe=this.lineCap,me=this.lineWidth,_e=this.lineJoin;this.pdf.addPage(),this.fillStyle=$,this.strokeStyle=X,this.font=te,this.lineCap=oe,this.lineWidth=me,this.lineJoin=_e},b=function($,X,te){for(var oe=0;oe<$.length;oe++)switch($[oe].type){case"bct":$[oe].x2+=X,$[oe].y2+=te;case"qct":$[oe].x1+=X,$[oe].y1+=te;default:$[oe].x+=X,$[oe].y+=te}return $},S=function($){return $.sort(function(X,te){return X-te})},A=function($,X){for(var te,oe,me=this.fillStyle,_e=this.strokeStyle,Ce=this.lineCap,fe=this.lineWidth,xe=Math.abs(fe*this.ctx.transform.scaleX),Se=this.lineJoin,ie=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),Fe=[],he=0;he<He.length;he++)if(He[he].x!==void 0)for(var Ye=v.call(this,He[he]),mt=0;mt<Ye.length;mt+=1)Fe.indexOf(Ye[mt])===-1&&Fe.push(Ye[mt]);for(var vt=0;vt<Fe.length;vt++)for(;this.pdf.internal.getNumberOfPages()<Fe[vt];)y.call(this);if(S(Fe),this.autoPaging)for(var Qe=Fe[0],Ot=Fe[Fe.length-1],ht=Qe;ht<Ot+1;ht++){this.pdf.setPage(ht),this.fillStyle=me,this.strokeStyle=_e,this.lineCap=Ce,this.lineWidth=xe,this.lineJoin=Se;var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],It=ht===1?this.posY+this.margin[0]:this.margin[0],tn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$t=ht===1?0:tn+(ht-2)*Zt;if(this.ctx.clip_path.length!==0){var on=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(te,this.posX+this.margin[3],-$t+It+this.ctx.prevPageLastElemOffset),C.call(this,$,!0),this.path=on}if(oe=JSON.parse(JSON.stringify(ie)),this.path=b(oe,this.posX+this.margin[3],-$t+It+this.ctx.prevPageLastElemOffset),X===!1||ht===0){var lt=(ht>Qe||ht<Ot)&&m.call(this);lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,Zt,null).clip().discardPath()),C.call(this,$,X),lt&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}else this.lineWidth=xe,C.call(this,$,X),this.lineWidth=fe;this.path=ie},C=function($,X){if(($!=="stroke"||X||!g.call(this))&&($==="stroke"||X||!h.call(this))){for(var te,oe,me=[],_e=this.path,Ce=0;Ce<_e.length;Ce++){var fe=_e[Ce];switch(fe.type){case"begin":me.push({begin:!0});break;case"close":me.push({close:!0});break;case"mt":me.push({start:fe,deltas:[],abs:[]});break;case"lt":var xe=me.length;if(_e[Ce-1]&&!isNaN(_e[Ce-1].x)&&(te=[fe.x-_e[Ce-1].x,fe.y-_e[Ce-1].y],xe>0)){for(;xe>=0;xe--)if(me[xe-1].close!==!0&&me[xe-1].begin!==!0){me[xe-1].deltas.push(te),me[xe-1].abs.push(fe);break}}break;case"bct":te=[fe.x1-_e[Ce-1].x,fe.y1-_e[Ce-1].y,fe.x2-_e[Ce-1].x,fe.y2-_e[Ce-1].y,fe.x-_e[Ce-1].x,fe.y-_e[Ce-1].y],me[me.length-1].deltas.push(te);break;case"qct":var Se=_e[Ce-1].x+2/3*(fe.x1-_e[Ce-1].x),ie=_e[Ce-1].y+2/3*(fe.y1-_e[Ce-1].y),He=fe.x+2/3*(fe.x1-fe.x),Fe=fe.y+2/3*(fe.y1-fe.y),he=fe.x,Ye=fe.y;te=[Se-_e[Ce-1].x,ie-_e[Ce-1].y,He-_e[Ce-1].x,Fe-_e[Ce-1].y,he-_e[Ce-1].x,Ye-_e[Ce-1].y],me[me.length-1].deltas.push(te);break;case"arc":me.push({deltas:[],abs:[],arc:!0}),Array.isArray(me[me.length-1].abs)&&me[me.length-1].abs.push(fe)}}oe=X?null:$==="stroke"?"stroke":"fill";for(var mt=!1,vt=0;vt<me.length;vt++)if(me[vt].arc)for(var Qe=me[vt].abs,Ot=0;Ot<Qe.length;Ot++){var ht=Qe[Ot];ht.type==="arc"?N.call(this,ht.x,ht.y,ht.radius,ht.startAngle,ht.endAngle,ht.counterclockwise,void 0,X,!mt):L.call(this,ht.x,ht.y),mt=!0}else if(me[vt].close===!0)this.pdf.internal.out("h"),mt=!1;else if(me[vt].begin!==!0){var dt=me[vt].start.x,It=me[vt].start.y;V.call(this,me[vt].deltas,dt,It),mt=!0}oe&&P.call(this,oe),X&&O.call(this)}},D=function($){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return $-te;case"top":return $+X-te;case"hanging":return $+X-2*te;case"middle":return $+X/2-te;default:return $}},j=function($){return $+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var $=function(){};return $.colorStops=[],$.addColorStop=function(X,te){this.colorStops.push([X,te])},$.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},$.isCanvasGradient=!0,$},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function($,X,te,oe,me,_e,Ce,fe,xe){for(var Se=Z.call(this,te,oe,me,_e),ie=0;ie<Se.length;ie++){var He=Se[ie];ie===0&&(xe?T.call(this,He.x1+$,He.y1+X):L.call(this,He.x1+$,He.y1+X)),K.call(this,$,X,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}fe?O.call(this):P.call(this,Ce)},P=function($){switch($){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},T=function($,X){this.pdf.internal.out(n($)+" "+r(X)+" m")},M=function($){var X;switch($.align){case"right":case"end":X="right";break;case"center":X="center";break;default:X="left"}var te=this.pdf.getTextDimensions($.text),oe=D.call(this,$.y),me=j.call(this,oe)-te.h,_e=this.ctx.transform.applyToPoint(new s($.x,oe)),Ce=this.ctx.transform.decompose(),fe=new l;fe=(fe=(fe=fe.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale);for(var xe,Se,ie,He=this.ctx.transform.applyToRectangle(new o($.x,oe,te.w,te.h)),Fe=fe.applyToRectangle(new o($.x,me,te.w,te.h)),he=v.call(this,Fe),Ye=[],mt=0;mt<he.length;mt+=1)Ye.indexOf(he[mt])===-1&&Ye.push(he[mt]);if(S(Ye),this.autoPaging)for(var vt=Ye[0],Qe=Ye[Ye.length-1],Ot=vt;Ot<Qe+1;Ot++){this.pdf.setPage(Ot);var ht=Ot===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[2],tn=It-this.margin[0],Zt=this.pdf.internal.pageSize.width-this.margin[1],$t=Zt-this.margin[3],on=Ot===1?0:dt+(Ot-2)*tn;if(this.ctx.clip_path.length!==0){var lt=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(xe,this.posX+this.margin[3],-1*on+ht),C.call(this,"fill",!0),this.path=lt}var bt=b([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-on+ht+this.ctx.prevPageLastElemOffset)[0];$.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*$.scale),ie=this.lineWidth,this.lineWidth=ie*$.scale);var yt=this.autoPaging!=="text";if(yt||bt.y+bt.h<=It){if(yt||bt.y>=ht&&bt.x<=Zt){var nt=yt?$.text:this.pdf.splitTextToSize($.text,$.maxWidth||Zt-bt.x)[0],Bt=b([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-on+ht+this.ctx.prevPageLastElemOffset)[0],ft=yt&&(Ot>vt||Ot<Qe)&&m.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$t,tn,null).clip().discardPath()),this.pdf.text(nt,Bt.x,Bt.y,{angle:$.angle,align:X,renderingMode:$.renderingMode}),ft&&this.pdf.restoreGraphicsState()}}else bt.y<It&&(this.ctx.prevPageLastElemOffset+=It-bt.y);$.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=ie)}else $.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*$.scale),ie=this.lineWidth,this.lineWidth=ie*$.scale),this.pdf.text($.text,_e.x+this.posX,_e.y+this.posY,{angle:$.angle,align:X,renderingMode:$.renderingMode,maxWidth:$.maxWidth}),$.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=ie)},L=function($,X,te,oe){te=te||0,oe=oe||0,this.pdf.internal.out(n($+te)+" "+r(X+oe)+" l")},V=function($,X,te){return this.pdf.lines($,X,te,null,null)},K=function($,X,te,oe,me,_e,Ce,fe){this.pdf.internal.out([e(i(te+$)),e(a(oe+X)),e(i(me+$)),e(a(_e+X)),e(i(Ce+$)),e(a(fe+X)),"c"].join(" "))},Z=function($,X,te,oe){for(var me=2*Math.PI,_e=Math.PI/2;X>te;)X-=me;var Ce=Math.abs(te-X);Ce<me&&oe&&(Ce=me-Ce);for(var fe=[],xe=oe?-1:1,Se=X;Ce>1e-5;){var ie=Se+xe*Math.min(Ce,_e);fe.push(Y.call(this,$,Se,ie)),Ce-=Math.abs(ie-Se),Se=ie}return fe},Y=function($,X,te){var oe=(te-X)/2,me=$*Math.cos(oe),_e=$*Math.sin(oe),Ce=me,fe=-_e,xe=Ce*Ce+fe*fe,Se=xe+Ce*me+fe*_e,ie=4/3*(Math.sqrt(2*xe*Se)-Se)/(Ce*_e-fe*me),He=Ce-ie*fe,Fe=fe+ie*Ce,he=He,Ye=-Fe,mt=oe+X,vt=Math.cos(mt),Qe=Math.sin(mt);return{x1:$*Math.cos(X),y1:$*Math.sin(X),x2:He*vt-Fe*Qe,y2:He*Qe+Fe*vt,x3:he*vt-Ye*Qe,y3:he*Qe+Ye*vt,x4:$*Math.cos(te),y4:$*Math.sin(te)}},H=function($){return 180*$/Math.PI},ee=function($,X,te,oe,me,_e){var Ce=$+.5*(te-$),fe=X+.5*(oe-X),xe=me+.5*(te-me),Se=_e+.5*(oe-_e),ie=Math.min($,me,Ce,xe),He=Math.max($,me,Ce,xe),Fe=Math.min(X,_e,fe,Se),he=Math.max(X,_e,fe,Se);return new o(ie,Fe,He-ie,he-Fe)},le=function($,X,te,oe,me,_e,Ce,fe){var xe,Se,ie,He,Fe,he,Ye,mt,vt,Qe,Ot,ht,dt,It,tn=te-$,Zt=oe-X,$t=me-te,on=_e-oe,lt=Ce-me,bt=fe-_e;for(Se=0;Se<41;Se++)vt=(Ye=(ie=$+(xe=Se/40)*tn)+xe*((Fe=te+xe*$t)-ie))+xe*(Fe+xe*(me+xe*lt-Fe)-Ye),Qe=(mt=(He=X+xe*Zt)+xe*((he=oe+xe*on)-He))+xe*(he+xe*(_e+xe*bt-he)-mt),Se==0?(Ot=vt,ht=Qe,dt=vt,It=Qe):(Ot=Math.min(Ot,vt),ht=Math.min(ht,Qe),dt=Math.max(dt,vt),It=Math.max(It,Qe));return new o(Math.round(Ot),Math.round(ht),Math.round(dt-Ot),Math.round(It-ht))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var $,X,te=($=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:$,lineDashOffset:X}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(hn.API),function(t){var e=function(s){var o,l,u,d,f,p,h,g,m,v;for(l=[],u=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>u;u+=4)(f=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(v=f%85))/85)-(m=f%85))/85)-(g=f%85))/85)-(h=f%85))/85)%85,l.push(p+33,h+33,g+33,m+33,v+33)):l.push(122);return function(y,b){for(var S=b;S>0;S--)y.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var o,l,u,d,f,p=String,h="length",g=255,m="charCodeAt",v="slice",y="replace";for(s[v](-2),s=s[v](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),u=[],d=0,f=(s+=o="uuuuu"[v](s[h]%5||5))[h];f>d;d+=5)l=52200625*(s[m](d)-33)+614125*(s[m](d+1)-33)+7225*(s[m](d+2)-33)+85*(s[m](d+3)-33)+(s[m](d+4)-33),u.push(g&l>>24,g&l>>16,g&l>>8,g&l);return function(b,S){for(var A=S;A>0;A--)b.pop()}(u,o[h]),p.fromCharCode.apply(p,u)},r=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",u=0;u<s.length;u+=2)l+=String.fromCharCode("0x"+(s[u]+s[u+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return(o=dk(o)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(s,o){var l=0,u=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=a(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(hn.API),function(t){t.loadFile=function(e,n,r){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,u,d){var f=new XMLHttpRequest,p=0,h=function(g){var m=g.length,v=[],y=String.fromCharCode;for(p=0;p<m;p+=1)v.push(y(255&g.charCodeAt(p)));return v.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(i,a,s)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(hn.API),function(t){function e(){return(Pn.html2canvas?Promise.resolve(Pn.html2canvas):ij(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Pn.DOMPurify?Promise.resolve(Pn.DOMPurify):ij(()=>import("./purify.es-B6FQ9oRL.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=Rr(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var u=document.createElement(o);for(var d in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[d]=l.style[d];return u},a=function o(l,u){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),f=l.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(o(f,u));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},s=function o(l){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),u);return(d=d.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(n).then(function(u){return this.set({src:i("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var g=d[h],m=g.src.find(function(v){return v.format==="truetype"});m&&u.addFont(m.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var u=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(u):u})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(o=o||hn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,u,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,u,d){return this.setProgress(o?this.progress.val+o:null,l||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,l){var u=this;return this.thenCore(o,l,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,f).then(function(p){return u.updateProgress(1),p})})},s.prototype.thenCore=function(o,l,u){u=u||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),l&&(l=l.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:s.convert(Object.assign({},d),Promise.prototype),p=u.call(f,o,l);return s.convert(p,d.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(u){l=l.thenCore(u)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,hn.getPageSize=function(o,l,u){if(Rr(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,u=d.format||u}l=l||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var g,m=0,v=0;if(h.hasOwnProperty(p))m=h[p][1]/f,v=h[p][0]/f;else try{m=u[1],v=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",v>m&&(g=v,v=m,m=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",m>v&&(g=v,v=m,m=g)}return{width:v,height:m,unit:l,k:f,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Sj):null;var u=new s(l);return l.worker?u:u.from(o).doCallback()}}(hn.API),hn.API.addJS=function(t){return e9=t,this.internal.events.subscribe("postPutResources",function(){C1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(C1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),J$=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+e9+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){C1!==void 0&&J$!==void 0&&this.internal.out("/Names <</JavaScript "+C1+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],o=r.exec(s);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var f=n.internal.newObject();d.push(f);var p=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<d.length;a++)n.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+h+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,a){var s={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var s=r.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(hn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,a,s,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(f){for(var p,h=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,m={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=h,e.indexOf(f.charCodeAt(v+1))!==-1){p=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),m={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:p,numcomponents:f.charCodeAt(v+9)};break}h=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return m}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}}(hn.API),hn.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,a=UGe(t,{checkCrc:!0}),s=a.width,o=a.height,l=a.channels,u=a.palette,d=a.depth;i=u&&l===1?function(N){for(var P=N.width,O=N.height,T=N.data,M=N.palette,L=N.depth,V=!1,K=[],Z=[],Y=void 0,H=!1,ee=0,le=0;le<M.length;le++){var se=i$(M[le],4),$=se[0],X=se[1],te=se[2],oe=se[3];K.push($,X,te),oe!=null&&(oe===0?(ee++,Z.length<1&&Z.push(le)):oe<255&&(H=!0))}if(H||ee>1){V=!0,Z=void 0;var me=P*O;Y=new Uint8Array(me);for(var _e=new DataView(T.buffer),Ce=0;Ce<me;Ce++){var fe=Aj(_e,Ce,L),xe=i$(M[fe],4)[3];Y[Ce]=xe}}else ee===0&&(Z=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:V?8:void 0,colorBytes:T,alphaBytes:Y,needSMask:V,palette:K,mask:Z}}(a):l===2||l===4?function(N){for(var P=N.data,O=N.width,T=N.height,M=N.channels,L=N.depth,V=M===2?"DeviceGray":"DeviceRGB",K=M-1,Z=O*T,Y=K,H=Z*Y,ee=1*Z,le=Math.ceil(H*L/8),se=Math.ceil(ee*L/8),$=new Uint8Array(le),X=new Uint8Array(se),te=new DataView(P.buffer),oe=new DataView($.buffer),me=new DataView(X.buffer),_e=!1,Ce=0;Ce<Z;Ce++){for(var fe=Ce*M,xe=0;xe<Y;xe++)c9(oe,Aj(te,fe+xe,L),Ce*Y+xe,L);var Se=Aj(te,fe+Y,L);Se<(1<<L)-1&&(_e=!0),c9(me,Se,1*Ce,L)}return{colorSpace:V,colorsPerPixel:K,sMaskBitsPerComponent:_e?L:void 0,colorBytes:$,alphaBytes:X,needSMask:_e}}(a):function(N){var P=N.data,O=N.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:O,colorsPerPixel:O==="DeviceGray"?1:3,colorBytes:P instanceof Uint16Array?function(T){for(var M=T.length,L=new Uint8Array(2*M),V=new DataView(L.buffer,L.byteOffset,L.byteLength),K=0;K<M;K++)V.setUint16(2*K,T[K],!1);return L}(P):P,needSMask:!1}}(a);var f,p,h,g=i,m=g.colorSpace,v=g.colorsPerPixel,y=g.sMaskBitsPerComponent,b=g.colorBytes,S=g.alphaBytes,A=g.needSMask,C=g.palette,D=g.mask,j=null;return r!==hn.API.image_compression.NONE&&typeof dk=="function"?(j=function(N){var P;switch(N){case hn.API.image_compression.FAST:P=11;break;case hn.API.image_compression.MEDIUM:P=13;break;case hn.API.image_compression.SLOW:P=14;break;default:P=12}return P}(r),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(j," /Colors ").concat(v," /BitsPerComponent ").concat(d," /Columns ").concat(s),t=i9(b,Math.ceil(s*v*d/8),v,d,r),A&&(h=i9(S,Math.ceil(s*y/8),1,y,r))):(f=void 0,p=void 0,t=b,A&&(h=S)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:n,data:t,index:e,filter:f,decodeParameters:p,transparency:D,palette:C,sMask:h,predictor:j,width:s,height:o,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:m}}},function(t){t.processGIF89A=function(e,n,r,i){var a=new uYe(e),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:s,height:o},d=new Cj(100).encode(u,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(hn.API),dc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},dc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Kr.log("bit decode error:"+n)}},dc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}n!==0&&(this.pos+=4-n)}},dc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},dc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},dc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=u}this.pos+=t}},dc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&n)/n*255|0,u=(s>>11)/e*255|0,d=i*this.width*4+4*a;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},dc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},dc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=s}},dc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var a=new dc(e,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},u=new Cj(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(hn.API),d9.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var a=new d9(e),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},u=new Cj(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(hn.API),hn.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,l=0,u=0;u<i;u+=4){var d=r[u],f=r[u+1],p=r[u+2],h=r[u+3];a[o++]=d,a[o++]=f,a[o++]=p,s[l++]=h}var g=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:g,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},hn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bp=hn.API,j1=Bp.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,p=0,h=t.length,g=0,m=o[0]||l,v=[];for(n=0;n<h;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?v.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/a)||0)/1e3):(p=f&&Rr(u[r])==="object"&&!isNaN(parseInt(u[r][g],10))?u[r][g]/d:0,v.push((o[r]||m)/l+p)),g=r;return v},t9=Bp.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Bp.processArabic&&(t=Bp.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:j1.apply(this,arguments).reduce(function(a,s){return a+s},0)},n9=function(t,e,n,r){for(var i=[],a=0,s=t.length,o=0;a!==s&&o+e[a]<n;)o+=e[a],a++;i.push(t.slice(0,a));var l=a;for(o=0;a!==s;)o+e[a]>r&&(i.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&i.push(t.slice(l,a)),i},r9=function(t,e,n){n||(n={});var r,i,a,s,o,l,u,d=[],f=[d],p=n.textIndent||0,h=0,g=0,m=t.split(" "),v=j1.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?m[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),b=[];m.map(function(A){(A=A.split(/\s*\n/)).length>1?b=b.concat(A.map(function(C,D){return(D&&C.length?`
`:"")+C})):b.push(A[0])}),m=b,l=t9.apply(this,[y,n])}for(a=0,s=m.length;a<s;a++){var S=0;if(r=m[a],l&&r[0]==`
`&&(r=r.substr(1),S=1),p+h+(g=(i=j1.apply(this,[r,n])).reduce(function(A,C){return A+C},0))>e||S){if(g>e){for(o=n9.apply(this,[r,i,e-(p+h),e]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);g=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(A,C){return A+C},0)}else d=[r];f.push(d),p=g+l,h=v}else d.push(r),p+=h+g,h=v}return u=l?function(A,C){return(C?y:"")+A.join(" ")}:function(A){return A.join(" ")},f.map(u)},Bp.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var o,l,u=[];for(o=0,l=r.length;o<l;o++)u=u.concat(r9.apply(this,[r[o],s,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},a=0;a<16;a++)r[n[a]]=e[a],i[e[a]]=n[a];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var h,g,m,v,y=["{"];for(var b in p){if(h=p[b],isNaN(parseInt(b,10))?g="'"+b+"'":(b=parseInt(b,10),g=(g=s(b).slice(2)).slice(0,-1)+i[g.slice(-1)]),typeof h=="number")h<0?(m=s(h).slice(3),v="-"):(m=s(h).slice(2),v=""),m=v+m.slice(0,-1)+i[m.slice(-1)];else{if(Rr(h)!=="object")throw new Error("Don't know what to do with value type "+Rr(h)+".");m=o(h)}y.push(g+m)}return y.push("}"),y.join("")},l=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,g,m,v,y={},b=1,S=y,A=[],C="",D="",j=p.length-1,N=1;N<j;N+=1)(v=p[N])=="'"?h?(m=h.join(""),h=void 0):h=[]:h?h.push(v):v=="{"?(A.push([S,m]),S={},m=void 0):v=="}"?((g=A.pop())[0][g[1]]=S,m=void 0,S=g[0]):v=="-"?b=-1:m===void 0?r.hasOwnProperty(v)?(C+=r[v],m=parseInt(C,16)*b,b=1,C=""):C+=v:r.hasOwnProperty(v)?(D+=r[v],S[m]=parseInt(D,16)*b,b=1,m=void 0,D=""):D+=v;return y},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var h=p.font,g=f.Unicode[h.postScriptName];g&&(h.metadata.Unicode={},h.metadata.Unicode.widths=g.widths,h.metadata.Unicode.kerning=g.kerning);var m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode.encoding=m,h.encoding=m.codePages[0])}])}(hn.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=n.charCodeAt(a);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,a=n.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(o2(o)),s.metadata=t.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])}(hn),hn.API.addSvgAsImage=function(t,e,n,r,i,a,s,o){if(isNaN(e)||isNaN(n))throw Kr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Kr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Pn.canvg?Promise.resolve(Pn.canvg):ij(()=>import("./index.es-CIRfnSYC.js"),[],import.meta.url)).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){f.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,s,o)})},hn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},hn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],u=0,d=0,f=0;function p(g,m){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===m&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=o.length;for(f=0;f<h;f+=1)n[o[f]].value=n[o[f]].defaultValue,n[o[f]].explicitSet=!1}if(Rr(t)==="object"){for(i in t)if(a=t[i],p(o,i)&&a!==void 0){if(n[i].type==="boolean"&&typeof a=="boolean")n[i].value=a;else if(n[i].type==="name"&&p(n[i].valueSet,a))n[i].value=a;else if(n[i].type==="integer"&&Number.isInteger(a))n[i].value=a;else if(n[i].type==="array"){for(u=0;u<a.length;u+=1)if(r=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(r=!1);r===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,m=[];for(g in n)n[g].explicitSet===!0&&(n[g].type==="name"?m.push("/"+g+" /"+n[g].value):m.push("/"+g+" "+n[g].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+s.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+a+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(hn.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,s){for(var o,l=s.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,p=a.length;f<p;++f){if(o=s.metadata.characterToGlyph(a.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},r=function(a){var s,o,l,u,d,f,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,p=(o=Object.keys(a).sort(function(h,g){return h-g})).length;f<p;f++)s=o[f],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(u=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",g=0;g<p.length;g++)h+=String.fromCharCode(p[g]);var m=u();d({data:h,addLength1:!0,objectId:m}),l("endobj");var v=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var y=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Gp(o.fontName)),l("/FontFile2 "+m+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var b=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Gp(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+t.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+v+" 0 R"),l("/BaseFont /"+Gp(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,p="",h=0;h<f.length;h++)p+=String.fromCharCode(f[h]);var g=u();d({data:p,addLength1:!0,objectId:g}),l("endobj");var m=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var v=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+g+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Gp(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+Gp(o.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,o=a.text||"",l=a.x,u=a.y,d=a.options||{},f=a.mutex||{},p=f.pdfEscape,h=f.activeFontKey,g=f.fonts,m=h,v="",y=0,b="",S=g[m].encoding;if(g[m].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:f};for(b=o,m=h,Array.isArray(o)&&(b=o[0]),y=0;y<b.length;y+=1)g[m].metadata.hasOwnProperty("cmap")&&(s=g[m].metadata.cmap.unicode.codeMap[b[y].charCodeAt(0)]),s||b[y].charCodeAt(0)<256&&g[m].metadata.hasOwnProperty("Unicode")?v+=b[y]:v+="";var A="";return parseInt(m.slice(1))<14||S==="WinAnsiEncoding"?A=p(v,m).split("").map(function(C){return C.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(A=n(v,g[m])),f.isHex=!0,{text:A,x:l,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(a){var s=a.text||"",o=[],l={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?o.push([i(Object.assign({},l,{text:s[u][0]})).text,s[u][1],s[u][2]]):o.push(i(Object.assign({},l,{text:s[u]})).text);a.text=o}else a.text=i(Object.assign({},l,{text:s})).text}])}(hn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(hn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,a,s,o,l,u,d,f=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,S=0;this.__bidiEngine__={};var A=function(T){var M=T.charCodeAt(),L=M>>8,V=m[L];return V!==void 0?f[256*V+(255&M)]:L===252||L===253?"AL":y.test(L)?"L":L===8?"R":"N"},C=function(T){for(var M,L=0;L<T.length;L++){if((M=A(T.charAt(L)))==="L")return!1;if(M==="R")return!0}return!1},D=function(T,M,L,V){var K,Z,Y,H,ee=M[V];switch(ee){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"N":case"AN":break;case"EN":b&&(ee="AN");break;case"AL":b=!0,ee="R";break;case"WS":case"BN":ee="N";break;case"CS":V<1||V+1>=M.length||(K=L[V-1])!=="EN"&&K!=="AN"||(Z=M[V+1])!=="EN"&&Z!=="AN"?ee="N":b&&(Z="AN"),ee=Z===K?Z:"N";break;case"ES":ee=(K=V>0?L[V-1]:"B")==="EN"&&V+1<M.length&&M[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&L[V-1]==="EN"){ee="EN";break}if(b){ee="N";break}for(Y=V+1,H=M.length;Y<H&&M[Y]==="ET";)Y++;ee=Y<H&&M[Y]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(H=M.length,Y=V+1;Y<H&&M[Y]==="NSM";)Y++;if(Y<H){var le=T[V],se=le>=1425&&le<=2303||le===64286;if(K=M[Y],se&&(K==="R"||K==="AL")){ee="R";break}}}ee=V<1||(K=M[V-1])==="B"?"N":L[V-1];break;case"B":b=!1,i=!0,ee=S;break;case"S":a=!0,ee="N"}return ee},j=function(T,M,L){var V=T.split("");return L&&N(V,L,{hiLevel:S}),V.reverse(),M&&M.reverse(),V.join("")},N=function(T,M,L){var V,K,Z,Y,H,ee=-1,le=T.length,se=0,$=[],X=S?h:p,te=[];for(b=!1,i=!1,a=!1,K=0;K<le;K++)te[K]=A(T[K]);for(Z=0;Z<le;Z++){if(H=se,$[Z]=D(T,te,$,Z),V=240&(se=X[H][g[$[Z]]]),se&=15,M[Z]=Y=X[se][5],V>0)if(V===16){for(K=ee;K<Z;K++)M[K]=1;ee=-1}else ee=-1;if(X[se][6])ee===-1&&(ee=Z);else if(ee>-1){for(K=ee;K<Z;K++)M[K]=Y;ee=-1}te[Z]==="B"&&(M[Z]=0),L.hiLevel|=Y}a&&function(oe,me,_e){for(var Ce=0;Ce<_e;Ce++)if(oe[Ce]==="S"){me[Ce]=S;for(var fe=Ce-1;fe>=0&&oe[fe]==="WS";fe--)me[fe]=S}}(te,M,le)},P=function(T,M,L,V,K){if(!(K.hiLevel<T)){if(T===1&&S===1&&!i)return M.reverse(),void(L&&L.reverse());for(var Z,Y,H,ee,le=M.length,se=0;se<le;){if(V[se]>=T){for(H=se+1;H<le&&V[H]>=T;)H++;for(ee=se,Y=H-1;ee<Y;ee++,Y--)Z=M[ee],M[ee]=M[Y],M[Y]=Z,L&&(Z=L[ee],L[ee]=L[Y],L[Y]=Z);se=H}se++}}},O=function(T,M,L){var V=T.split(""),K={hiLevel:S};return L||(L=[]),N(V,L,K),function(Z,Y,H){if(H.hiLevel!==0&&d)for(var ee,le=0;le<Z.length;le++)Y[le]===1&&(ee=v.indexOf(Z[le]))>=0&&(Z[le]=v[ee+1])}(V,L,K),P(2,V,M,L,K),P(1,V,M,L,K),V.join("")};return this.__bidiEngine__.doBidiReorder=function(T,M,L){if(function(K,Z){if(Z)for(var Y=0;Y<K.length;Y++)Z[Y]=Y;o===void 0&&(o=C(K)),u===void 0&&(u=C(K))}(T,M),s||!l||u)if(s&&l&&o^u)S=o?1:0,T=j(T,M,L);else if(!s&&l&&u)S=o?1:0,T=O(T,M,L),T=j(T,M);else if(!s||o||l||u){if(s&&!l&&o^u)T=j(T,M),o?(S=0,T=O(T,M,L)):(S=1,T=O(T,M,L),T=j(T,M));else if(s&&o&&!l&&u)S=1,T=O(T,M,L),T=j(T,M);else if(!s&&!l&&o^u){var V=d;o?(S=1,T=O(T,M,L),S=0,d=!1,T=O(T,M,L),d=V):(S=0,T=O(T,M,L),T=j(T,M),S=1,d=!1,T=O(T,M,L),d=V,T=j(T,M))}}else S=0,T=O(T,M,L);else S=o?1:0,T=O(T,M,L);return T},this.__bidiEngine__.setOptions=function(T){T&&(s=T.isInputVisual,l=T.isOutputVisual,o=T.isInputRtl,u=T.isOutputRtl,d=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(s=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?s.push([n.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):s.push([n.doBidiReorder(i[o])]);r.text=s}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(hn),hn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Nf(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new CYe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new dYe(this.contents),this.head=new hYe(this),this.name=new yYe(this),this.cmap=new DJ(this),this.toUnicode={},this.hhea=new pYe(this),this.maxp=new bYe(this),this.hmtx=new xYe(this),this.post=new gYe(this),this.os2=new mYe(this),this.loca=new AYe(this),this.glyf=new wYe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,u;for(u=[],s=0,o=(l=this.bbox).length;s<o;s++)e=l[s],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,a,s,o;for(s=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)i=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return s*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Lc,Nf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,a,s,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*a+65536*s+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),dYe=function(){var t;function e(n){var r,i,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,a,s,o,l,u,d,f,p,h,g,m;for(m in h=Object.keys(n).length,l=Math.log(2),f=16*Math.floor(Math.log(h)/l),s=Math.floor(f/l),d=16*h-f,(i=new Nf).writeInt(this.scalarType),i.writeShort(h),i.writeShort(f),i.writeShort(s),i.writeShort(d),a=16*h,u=i.pos+a,o=null,g=[],n)for(p=n[m],i.writeString(m),i.writeInt(t(p)),i.writeInt(u),i.writeInt(p.length),g=g.concat(p),m==="head"&&(o=u),u+=p.length;u%4;)g.push(0),u++;return i.write(g),r=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(r),i.data},t=function(n){var r,i,a,s;for(n=IJ.call(n);n.length%4;)n.push(0);for(a=new Nf(n),i=0,r=0,s=n.length;r<s;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),fYe={}.hasOwnProperty,wu=function(t,e){for(var n in e)fYe.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Lc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var hYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wu(t,Lc),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Nf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),f9=function(){function t(e,n){var r,i,a,s,o,l,u,d,f,p,h,g,m,v,y,b,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(h=e.readUInt16(),p=h/2,e.pos+=6,a=function(){var A,C;for(C=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)C.push(e.readUInt16());return C}(),e.pos+=2,m=function(){var A,C;for(C=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)C.push(e.readUInt16());return C}(),u=function(){var A,C;for(C=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)C.push(e.readUInt16());return C}(),d=function(){var A,C;for(C=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)C.push(e.readUInt16());return C}(),i=(this.length-e.pos+this.offset)/2,o=function(){var A,C;for(C=[],l=A=0;0<=i?A<i:A>i;l=0<=i?++A:--A)C.push(e.readUInt16());return C}(),l=y=0,S=a.length;y<S;l=++y)for(v=a[l],r=b=g=m[l];g<=v?b<=v:b>=v;r=g<=v?++b:--b)d[l]===0?s=r+u[l]:(s=o[d[l]/2+(r-g)-(p-l)]||0)!==0&&(s+=u[l]),this.codeMap[r]=65535&s}e.pos=f}return t.encode=function(e,n){var r,i,a,s,o,l,u,d,f,p,h,g,m,v,y,b,S,A,C,D,j,N,P,O,T,M,L,V,K,Z,Y,H,ee,le,se,$,X,te,oe,me,_e,Ce,fe,xe,Se,ie;switch(V=new Nf,s=Object.keys(e).sort(function(He,Fe){return He-Fe}),n){case"macroman":for(m=0,v=function(){var He=[];for(g=0;g<256;++g)He.push(0);return He}(),b={0:0},a={},K=0,ee=s.length;K<ee;K++)b[fe=e[i=s[K]]]==null&&(b[fe]=++m),a[i]={old:e[i],new:b[e[i]]},v[i]=b[e[i]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(v),{charMap:a,subtable:V.data,maxGlyphID:m+1};case"unicode":for(M=[],f=[],S=0,b={},r={},y=u=null,Z=0,le=s.length;Z<le;Z++)b[C=e[i=s[Z]]]==null&&(b[C]=++S),r[i]={old:C,new:b[C]},o=b[C]-i,y!=null&&o===u||(y&&f.push(y),M.push(i),u=o),y=i;for(y&&f.push(y),f.push(65535),M.push(65535),O=2*(P=M.length),N=2*Math.pow(Math.log(P)/Math.LN2,2),p=Math.log(N/2)/Math.LN2,j=2*P-N,l=[],D=[],h=[],g=Y=0,se=M.length;Y<se;g=++Y){if(T=M[g],d=f[g],T===65535){l.push(0),D.push(0);break}if(T-(L=r[T].new)>=32768)for(l.push(0),D.push(2*(h.length+P-g)),i=H=T;T<=d?H<=d:H>=d;i=T<=d?++H:--H)h.push(r[i].new);else l.push(L-T),D.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*P+2*h.length),V.writeUInt16(0),V.writeUInt16(O),V.writeUInt16(N),V.writeUInt16(p),V.writeUInt16(j),_e=0,$=f.length;_e<$;_e++)i=f[_e],V.writeUInt16(i);for(V.writeUInt16(0),Ce=0,X=M.length;Ce<X;Ce++)i=M[Ce],V.writeUInt16(i);for(xe=0,te=l.length;xe<te;xe++)o=l[xe],V.writeUInt16(o);for(Se=0,oe=D.length;Se<oe;Se++)A=D[Se],V.writeUInt16(A);for(ie=0,me=h.length;ie<me;ie++)m=h[ie],V.writeUInt16(m);return{charMap:r,subtable:V.data,maxGlyphID:S+1}}},t}(),DJ=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wu(t,Lc),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new f9(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=f9.encode(e,n),(i=new Nf).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),pYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wu(t,Lc),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),mYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wu(t,Lc),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),gYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wu(t,Lc),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,o,l;for(l=[],a=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;a=0<=o?++s:--s)l.push(e.readUInt32());return l}).call(this)}},t}(),vYe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},yYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wu(t,Lc),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,a,s,o,l,u,d,f,p;for(e.pos=this.offset,e.readShort(),n=e.readShort(),o=e.readShort(),r=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},a=d=0,f=r.length;d<f;a=++d)i=r[a],e.pos=i.offset,u=e.readString(i.length),s=new vYe(u,i),l[p=i.nameID]==null&&(l[p]=[]),l[i.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),bYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wu(t,Lc),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),xYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wu(t,Lc),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,a,s,o,l;for(e.pos=this.offset,this.metrics=[],n=0,o=this.file.hhea.numberOfMetrics;0<=o?n<o:n>o;n=0<=o?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,p;for(p=[],u=0,d=(f=this.metrics).length;u<d;u++)a=f[u],p.push(a.advance);return p}).call(this),r=this.widths[this.widths.length-1],l=[],n=s=0;0<=i?s<i:s>i;n=0<=i?++s:--s)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),IJ=[].slice,wYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wu(t,Lc),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,a,s,o,l,u,d,f;return e in this.cache?this.cache[e]:(a=this.file.loca,n=this.file.contents,r=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,s=(o=new Nf(n.read(i))).readShort(),u=o.readShort(),f=o.readShort(),l=o.readShort(),d=o.readShort(),this.cache[e]=s===-1?new _Ye(o,u,f,l,d):new SYe(o,s,u,f,l,d),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,a,s,o,l;for(s=[],a=[],o=0,l=n.length;o<l;o++)i=e[n[o]],a.push(s.length),i&&(s=s.concat(i.encode(r)));return a.push(s.length),{table:s,offsets:a}},t}(),SYe=function(){function t(e,n,r,i,a,s){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),_Ye=function(){function t(e,n,r,i,a){var s,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Nf(IJ.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),AYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wu(t,Lc),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,s=0;s<r.length;++s)if(r[s]=i,a<n.length&&n[a]==s){++a,r[s]=i;var o=this.offsets[s],l=this.offsets[s+1]-o;l>0&&(i+=l)}for(var u=new Array(4*r.length),d=0;d<r.length;++d)u[4*d+3]=255&r[d],u[4*d+2]=(65280&r[d])>>8,u[4*d+1]=(16711680&r[d])>>16,u[4*d]=(4278190080&r[d])>>24;return u},t}(),CYe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,a;for(n in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,a,s,o,l;for(i={},s=0,o=e.length;s<o;s++)i[a=e[s]]=this.font.glyf.glyphFor(a);for(a in n=[],i)(r=i[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in l=this.glyphsFor(n))r=l[a],i[a]=r;return i},t.prototype.encode=function(e,n){var r,i,a,s,o,l,u,d,f,p,h,g,m,v,y;for(i in r=DJ.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),h={0:0},y=r.charMap)h[(l=y[i]).old]=l.new;for(g in p=r.maxGlyphID,s)g in h||(h[g]=p++);return d=function(b){var S,A;for(S in A={},b)A[b[S]]=S;return A}(h),f=Object.keys(d).sort(function(b,S){return b-S}),m=function(){var b,S,A;for(A=[],b=0,S=f.length;b<S;b++)o=f[b],A.push(d[o]);return A}(),a=this.font.glyf.encode(s,m,h),u=this.font.loca.encode(a.offsets,m),v={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},t}();hn.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,a,s;if(Array.isArray(n))return"["+function(){var o,l,u;for(u=[],o=0,l=n.length;o<l;o++)r=n[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in a=["<<"],n)s=n[i],a.push("/"+i+" "+e.convert(s));return a.push(">>"),a.join(`
`)}return""+n},e}();function OJ(t,e,n,r,i){r=r||{};var a=1.15,s=i.internal.scaleFactor,o=i.internal.getFontSize()/s,l=i.getLineHeightFactor?i.getLineHeightFactor():a,u=o*l,d=/\r\n|\r|\n/g,f="",p=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(f=typeof t=="string"?t.split(d):t,p=f.length||1),n+=o*(2-a),r.valign==="middle"?n-=p/2*u:r.valign==="bottom"&&(n-=p*u),r.halign==="center"||r.halign==="right"){var h=o;if(r.halign==="center"&&(h*=.5),f&&p>=1){for(var g=0;g<f.length;g++)i.text(f[g],e-i.getStringUnitWidth(f[g])*h,n),n+=u;return i}e-=i.getStringUnitWidth(t)*h}return r.halign==="justify"?i.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,e,n),i}var h9={},Bm=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:h9=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,i,a;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,l=s.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var d=t.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=t.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,i,a){return this.jsPDFDocument.rect(e,n,r,i,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return h9||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),bk=function(t,e){return bk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},bk(t,e)};function MJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var RJ=function(t){MJ(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function jYe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function EYe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function T5(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(a){return n.getTextWidth(a)}).reduce(function(a,s){return Math.max(a,s)},0);return i}function LJ(t,e,n,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:a});var s=FJ(i,!1);s&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,s)}function FJ(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function F_(t,e){var n,r,i,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function zJ(t,e){var n=F_(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function NYe(t,e,n,r,i){var a={},s=1.3333333333333333,o=jj(e,function(S){return i.getComputedStyle(S).backgroundColor});o!=null&&(a.fillColor=o);var l=jj(e,function(S){return i.getComputedStyle(S).color});l!=null&&(a.textColor=l);var u=kYe(r,n);u&&(a.cellPadding=u);var d="borderTopColor",f=s*n,p=r.borderTopWidth;if(r.borderBottomWidth===p&&r.borderRightWidth===p&&r.borderLeftWidth===p){var h=(parseFloat(p)||0)/f;h&&(a.lineWidth=h)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/f,right:(parseFloat(r.borderRightWidth)||0)/f,bottom:(parseFloat(r.borderBottomWidth)||0)/f,left:(parseFloat(r.borderLeftWidth)||0)/f},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var g=jj(e,function(S){return i.getComputedStyle(S)[d]});g!=null&&(a.lineColor=g);var m=["left","right","center","justify"];m.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),m=["middle","bottom","top"],m.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var v=parseInt(r.fontSize||"");isNaN(v)||(a.fontSize=v/s);var y=PYe(r);y&&(a.fontStyle=y);var b=(r.fontFamily||"").toLowerCase();return t.indexOf(b)!==-1&&(a.font=b),a}function PYe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function jj(t,e){var n=$J(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function $J(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:$J(t.parentElement,e):n}function kYe(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=n.map(function(o){return parseInt(o||"0")/r}),s=F_(a,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function BJ(t,e,n,r,i){var a,s;r===void 0&&(r=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=n.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],f=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:f,foot:p};for(var h=0;h<o.rows.length;h++){var g=o.rows[h],m=(s=(a=g==null?void 0:g.parentElement)===null||a===void 0?void 0:a.tagName)===null||s===void 0?void 0:s.toLowerCase(),v=TYe(l,u,n,g,r,i);v&&(m==="thead"?d.push(v):m==="tfoot"?p.push(v):f.push(v))}return{head:d,body:f,foot:p}}function TYe(t,e,n,r,i,a){for(var s=new RJ(r),o=0;o<r.cells.length;o++){var l=r.cells[o],u=n.getComputedStyle(l);if(i||u.display!=="none"){var d=void 0;a&&(d=NYe(t,l,e,u,n)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:DYe(l)})}}var f=n.getComputedStyle(r);if(s.length>0&&(i||f.display!=="none"))return s}function DYe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function IYe(t,e,n){for(var r=0,i=[t,e,n];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function qu(t,e,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function VJ(t,e){var n=new Bm(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();IYe(i,r,e);var a=qu({},i,r,e),s;typeof window<"u"&&(s=window);var o=OYe(i,r,e),l=MYe(i,r,e),u=RYe(n,a),d=FYe(n,a,s);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function OYe(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],f=n[l];r.columnStyles=qu({},u,d,f)}else{var p=[t,e,n],h=p.map(function(g){return g[l]||{}});r[l]=qu({},h[0],h[1],h[2])}},a=0,s=Object.keys(r);a<s.length;a++){var o=s[a];i(o)}return r}function MYe(t,e,n){for(var r=[t,e,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,s=r;a<s.length;a++){var o=s[a];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function RYe(t,e){var n,r,i,a,s,o,l,u,d,f,p,h,g=F_(e.margin,40/t.scaleFactor()),m=(n=LYe(t,e.startY))!==null&&n!==void 0?n:g.top,v;e.showFoot===!0?v="everyPage":e.showFoot===!1?v="never":v=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var y;e.showHead===!0?y="everyPage":e.showHead===!1?y="never":y=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var b=(a=e.useCss)!==null&&a!==void 0?a:!1,S=e.theme||(b?"plain":"striped"),A=!!e.horizontalPageBreak,C=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:b,theme:S,startY:m,margin:g,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:A,horizontalPageBreakRepeat:C,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function LYe(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),a=!1;if(n&&n.startPageNumber){var s=n.startPageNumber+n.pageNumber-1;a=s===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function FYe(t,e,n){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(n){var o=BJ(t,e.html,n,s,e.useCss)||{};r=o.head||r,i=o.body||r,a=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||zYe(r,i,a);return{columns:l,head:r,body:i,foot:a}}function zYe(t,e,n){var r=t[0]||e[0]||n[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var s=1,o;Array.isArray(r)?o=r[parseInt(a)]:o=r[a],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var l=0;l<s;l++){var u=void 0;Array.isArray(r)?u=i.length:u=a+(l>0?"_".concat(l):"");var d={dataKey:u};i.push(d)}}),i}var xk=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),$Ye=function(t){MJ(e,t);function e(n,r,i,a,s,o){var l=t.call(this,n,r,o)||this;return l.cell=i,l.row=a,l.column=s,l.section=a.section,l}return e}(xk),BYe=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,i,a,s){for(var o=0,l=n;o<l.length;o++){var u=l[o],d=new $Ye(e,this,r,i,a,s),f=u(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],f)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new xk(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new xk(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),UJ=function(){function t(e,n,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof RJ&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=n.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(i,a){var s=r.cells[a.index];if(!s)return 0;var o=n.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),u=l+o;return u>i?u:i},0)},t}(),WJ=function(){function t(e,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*n,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=F_(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),VYe=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],s=a.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(n=Math.max(n,s.styles.cellWidth))}return n},t}();function UYe(t,e){WYe(t,e);var n=[],r=0;e.columns.forEach(function(a){var s=a.getMaxCustomCellWidth(e);s?a.width=s:(a.width=a.wrappedWidth,n.push(a)),r+=a.width});var i=e.getWidth(t.pageSize().width)-r;i&&(i=wk(n,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=wk(n,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),qYe(e),KYe(e,t),HYe(e)}function WYe(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,i=zJ(t,e);e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],u=a.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,a,l,null);var f=u.padding("horizontal");u.contentWidth=T5(u.text,u.styles,t)+f;var p=T5(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/n;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],u=a.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function wk(t,e,n){for(var r=e,i=t.reduce(function(h,g){return h+g.wrappedWidth},0),a=0;a<t.length;a++){var s=t[a],o=s.wrappedWidth/i,l=r*o,u=s.width+l,d=n(s),f=u<d?d:u;e-=f-s.width,s.width=f}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(h){return e<0?h.width>n(h):!0});p.length&&(e=wk(p,e,n))}return e}function HYe(t){for(var e={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var a=r[i],s=0,o=t.columns;s<o.length;s++){var l=o[s],u=e[l.index];if(n>1)n--,delete a.cells[l.index];else if(u)u.cell.height+=a.height,n=u.cell.colSpan,delete a.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var f=r.length-i,p=d.rowSpan>f?f:d.rowSpan;e[l.index]={cell:d,left:p,row:a}}}}}function qYe(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],i=null,a=0,s=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(s-=1,s>1&&t.columns[o+1])a+=l.width,delete r.cells[l.index];else if(i){var u=i;delete r.cells[l.index],i=null,u.width=l.width+a}else{var u=r.cells[l.index];if(!u)continue;if(s=u.colSpan,a=0,u.colSpan>1){i=u,a+=l.width;continue}u.width=l.width+a}}}function KYe(t,e){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var a=i[r],s=0,o=t.columns;s<o.length;s++){var l=o[s],u=a.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=p9(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=p9(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<p*u.rowSpan?n={height:p,count:u.rowSpan}:n&&n.count>0&&n.height>p&&(p=n.height),p>a.height&&(a.height=p)}}n.count--}}function p9(t,e,n,r,i){return t.map(function(a){return GYe(a,e,n,r,i)})}function GYe(t,e,n,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=T5(t,n,r))return t;for(;e<T5(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function HJ(t,e){var n=new Bm(t),r=YYe(e,n.scaleFactor()),i=new BYe(e,r);return UYe(n,i),n.applyStyles(n.userStyles),i}function YYe(t,e){var n=t.content,r=QYe(n.columns);if(n.head.length===0){var i=m9(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=m9(r,"foot");i&&n.foot.push(i)}var a=t.settings.theme,s=t.styles;return{columns:r,head:Ej("head",n.head,r,s,a,e),body:Ej("body",n.body,r,s,a,e),foot:Ej("foot",n.foot,r,s,a,e)}}function Ej(t,e,n,r,i,a){var s={},o=e.map(function(l,u){for(var d=0,f={},p=0,h=0,g=0,m=n;g<m.length;g++){var v=m[g];if(s[v.index]==null||s[v.index].left===0)if(h===0){var y=void 0;Array.isArray(l)?y=l[v.index-p-d]:y=l[v.dataKey];var b={};typeof y=="object"&&!Array.isArray(y)&&(b=(y==null?void 0:y.styles)||{});var S=ZYe(t,v,u,i,r,a,b),A=new WJ(y,S,t);f[v.dataKey]=A,f[v.index]=A,h=A.colSpan-1,s[v.index]={left:A.rowSpan-1,times:h}}else h--,p++;else s[v.index].left--,h=s[v.index].times,d++}return new UJ(l,u,t,f)});return o}function m9(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var i=XYe(e,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function XYe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function QYe(t){return t.map(function(e,n){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:n:i=n,new VYe(i,e,n)})}function ZYe(t,e,n,r,i,a,s){var o=EYe(r),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var u=qu({},o.table,o[t],i.styles,l),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},f=t==="body"?d:{},p=t==="body"&&n%2===0?qu({},o.alternateRow,i.alternateRowStyles):{},h=jYe(a),g=qu({},h,u,p,f);return qu(g,s)}function JYe(t,e,n){var r;n===void 0&&(n={});var i=zJ(t,e),a=new Map,s=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var h=e.columns.find(function(g){return g.dataKey===p||g.index===p});h&&!a.has(h.index)&&(a.set(h.index,!0),s.push(h.index),o.push(e.columns[h.index]),i-=h.wrappedWidth)});for(var u=!0,d=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(a.has(d)){d++;continue}var f=e.columns[d].wrappedWidth;if(u||i>=f)u=!1,s.push(d),o.push(e.columns[d]),i-=f;else break;d++}return{colIndexes:s,columns:o,lastIndex:d-1}}function eXe(t,e){for(var n=[],r=0;r<e.columns.length;r++){var i=JYe(t,e,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function qJ(t,e){var n=e.settings,r=n.startY,i=n.margin,a={x:i.left,y:r},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+i.bottom+s;if(n.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(p,h){return p+h.height},0);o+=u}var d=new Bm(t);(n.pageBreak==="always"||n.startY!=null&&o>d.pageSize().height)&&(GJ(d),a.y=i.top),e.callWillDrawPageHooks(d,a);var f=qu({},a);e.startPageNumber=d.pageNumber(),n.horizontalPageBreak?tXe(d,e,f,a):(d.applyStyles(d.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(p){return fd(d,e,p,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(p,h){var g=h===e.body.length-1;D5(d,e,p,g,f,a,e.columns)}),d.applyStyles(d.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(p){return fd(d,e,p,a,e.columns)})),LJ(d,e,f,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function tXe(t,e,n,r){var i=eXe(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?G0(t,e,n,r,u.columns,!0):g9(t,e,r,u.columns),nXe(t,e,n,r,u.columns),Nj(t,e,r,u.columns)});else for(var s=-1,o=i[0],l=function(){var u=s;if(o){t.applyStyles(t.userStyles);var d=o.columns;s>=0?G0(t,e,n,r,d,!0):g9(t,e,r,d),u=v9(t,e,s+1,r,d),Nj(t,e,r,d)}var f=u-s;i.slice(1).forEach(function(p){t.applyStyles(t.userStyles),G0(t,e,n,r,p.columns,!0),v9(t,e,s+1,r,p.columns,f),Nj(t,e,r,p.columns)}),s=u};s<e.body.length-1;)l()}function g9(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return fd(t,e,a,n,r)})}function nXe(t,e,n,r,i){t.applyStyles(t.userStyles),e.body.forEach(function(a,s){var o=s===e.body.length-1;D5(t,e,a,o,n,r,i)})}function v9(t,e,n,r,i,a){t.applyStyles(t.userStyles),a=a??e.body.length;var s=Math.min(n+a,e.body.length),o=-1;return e.body.slice(n,s).forEach(function(l,u){var d=n+u===e.body.length-1,f=KJ(t,e,d,r);l.canEntireRowFit(f,i)&&(fd(t,e,l,r,i),o=n+u)}),o}function Nj(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return fd(t,e,a,n,r)})}function rXe(t,e,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function iXe(t,e,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var a=0,s=0,o=n.columns;s<o.length;s++){var l=o[s],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new WJ(u.raw,u.styles,u.section);d=qu(d,u),d.text=[];var f=rXe(u,e,r);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var p=r.scaleFactor(),h=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,h),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,h),d.contentHeight>a&&(a=d.contentHeight),i[l.index]=d}}var g=new UJ(t.raw,-1,t.section,i,!0);g.height=a;for(var m=0,v=n.columns;m<v.length;m++){var l=v[m],d=g.cells[l.index];d&&(d.height=g.height);var u=t.cells[l.index];u&&(u.height=t.height)}return g}function aXe(t,e,n,r){var i=t.pageSize().height,a=r.settings.margin,s=a.top+a.bottom,o=i-s;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),u=l<n;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(r.columns),f=e.getMaxCellHeight(r.columns)>o;return f?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function D5(t,e,n,r,i,a,s){var o=KJ(t,e,r,a);if(n.canEntireRowFit(o,s))fd(t,e,n,a,s);else if(aXe(t,n,o,e)){var l=iXe(n,o,e,t);fd(t,e,n,a,s),G0(t,e,i,a,s),D5(t,e,l,r,i,a,s)}else G0(t,e,i,a,s),D5(t,e,n,r,i,a,s)}function fd(t,e,n,r,i){r.x=e.settings.margin.left;for(var a=0,s=i;a<s.length;a++){var o=s[a],l=n.cells[o.index];if(!l){r.x+=o.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,n,o,r);if(u===!1){r.x+=o.width;continue}sXe(t,l,r);var d=l.getTextPos();OJ(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,o,r),r.x+=o.width}r.y+=n.height}function sXe(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=FJ(r.lineWidth,r.fillColor);i&&t.rect(e.x,n.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),oXe(t,e,n,r.lineWidth))}function oXe(t,e,n,r){var i,a,s,o;r.top&&(i=n.x,a=n.y,s=n.x+e.width,o=n.y,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,a,s,o)),r.bottom&&(i=n.x,a=n.y+e.height,s=n.x+e.width,o=n.y+e.height,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,a,s,o)),r.left&&(i=n.x,a=n.y,s=n.x,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,i,a,s,o)),r.right&&(i=n.x+e.width,a=n.y,s=n.x+e.width,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,i,a,s,o));function l(u,d,f,p,h){t.getDocument().setLineWidth(u),t.getDocument().line(d,f,p,h,"S")}}function KJ(t,e,n,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-i}function G0(t,e,n,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return fd(t,e,o,r,i)}),e.callEndPageHooks(t,r);var s=e.settings.margin;LJ(t,e,n,r),GJ(t),e.pageNumber++,r.x=s.left,r.y=s.top,n.y=s.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return fd(t,e,o,r,i)}),t.applyStyles(t.userStyles))}function GJ(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function lXe(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=VJ(this,r),a=HJ(this,i);return qJ(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,i){OJ(e,n,r,i,this)},t.API.autoTableSetDefaults=function(e){return Bm.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Bm.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Bm(this),a=BJ(i,e,window,n,!1),s=a.head,o=a.body,l=((r=s[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var Pj;function cXe(t,e){var n=VJ(t,e),r=HJ(t,n);qJ(t,r)}try{if(typeof window<"u"&&window){var y9=window,b9=y9.jsPDF||((Pj=y9.jspdf)===null||Pj===void 0?void 0:Pj.jsPDF);b9&&lXe(b9)}}catch(t){console.error("Could not apply autoTable plugin",t)}const uXe=(t,e)=>I.useMemo(()=>{if(!t)return[];const r=[],i=e*12,a=12,s=30.44,o=Math.ceil(t.diasGestacion/s),l=Math.ceil(t.diasLactanciaObjetivo/s),u=6,d=12,f=[],p=a/t.temporadasMontaPorAno;for(let T=0;T<t.temporadasMontaPorAno;T++){const M=Math.round(1+T*p);f.push(M>12?M-12:M)}const h=Math.max(1,Math.ceil(t.distribucionPartosDias/s)),g=Math.max(h,Math.ceil(t.duracionMontaDias/s)),m=g-h,v=t.distribucionPartosPorcentaje/100,y=1-v,b=t.mortalidadCrias/100/u,S=t.mortalidadLevante/100/(d-u),A=t.mortalidadCabras/100/a,C=t.tasaReemplazo/100/a,D=t.comprasVientresAnual/a,j=15,N=t.initialCabras+t.initialCabritonas+t.initialCabritas+t.initialPadres,P={monthIndex:0,year:0,monthInYear:0,startCabras:t.initialCabras,startCabritonas:t.initialCabritonas,startCabritas:t.initialCabritas,startPadres:t.initialPadres,startTotal:N,endCabras:t.initialCabras,endCabritonas:t.initialCabritonas,endCabritas:t.initialCabritas,endPadres:t.initialPadres,endTotal:N,nacimientosHembras:0,nacimientosMachos:0,hembrasEntrandoALactancia:0,muertesCrías:0,muertesLevante:0,muertesAdultas:0,descartesAdultas:0,ventasCabritos:0,comprasVientres:0,cabritasACabritonas:0,cabritonasACabras:0,ingresosVentaLeche:0,ingresosVentaCabritos:0,ingresosVentaDescartes:0,ingresosTotales:0,litrosLecheProducidos:0,hembrasEnProduccion:0};r.push(P);const O={};for(let T=1;T<=i;T++){const M=r[T-1],L=Math.floor((T-1)/a)+1,V=(T-1)%a+1,K={monthIndex:T,year:L,monthInYear:V,startCabras:M.endCabras,startCabritonas:M.endCabritonas,startCabritas:M.endCabritas,startPadres:M.endPadres,startTotal:M.endTotal,endCabras:0,endCabritonas:0,endCabritas:0,endPadres:M.endPadres,endTotal:0,nacimientosHembras:0,nacimientosMachos:0,hembrasEntrandoALactancia:0,muertesCrías:0,muertesLevante:0,muertesAdultas:0,descartesAdultas:0,ventasCabritos:0,comprasVientres:0,cabritasACabritonas:0,cabritonasACabras:0,ingresosVentaLeche:0,ingresosVentaCabritos:0,ingresosVentaDescartes:0,ingresosTotales:0,litrosLecheProducidos:0,hembrasEnProduccion:0};if(f.includes(V)){const te=(K.startCabras+K.startCabritonas)*(t.porcentajePrenez/100),oe=T+o;for(let me=0;me<g;me++){const _e=oe+me;let Ce=0;me<h&&h>0?Ce=te*v/h:m>0&&(Ce=te*y/m),Ce=isNaN(Ce)?0:Ce,O[_e]=(O[_e]||0)+Ce}}const Z=Math.round(O[T]||0);if(delete O[T],Z>0){K.hembrasEntrandoALactancia=Z;const X=Z*(t.porcentajeProlificidad/100);K.nacimientosHembras=X*.5,K.nacimientosMachos=X*.5}const Y=X=>{const te=T-X,oe=te<=0?P:r[te];if(!oe||X<=0)return{cabritas:0,cabritonas:0};let me=oe.nacimientosHembras;for(let _e=1;_e<X;_e++)te+_e<T&&(_e<=u?me*=1-b:_e<=d&&(me*=1-S));return me=Math.round(me),X<=u?{cabritas:me,cabritonas:0}:X<=d?{cabritas:0,cabritonas:me}:{cabritas:0,cabritonas:0}},H=Y(u+1);K.cabritasACabritonas=H.cabritas;const ee=Y(d+1);K.cabritonasACabras=ee.cabritonas,K.muertesCrías=K.startCabritas*b,K.muertesLevante=K.startCabritonas*S,K.muertesAdultas=K.startCabras*A,K.descartesAdultas=K.startCabras*C,K.endCabritas=K.startCabritas+K.nacimientosHembras-K.muertesCrías-K.cabritasACabritonas,K.endCabritonas=K.startCabritonas-K.muertesLevante+K.cabritasACabritonas-K.cabritonasACabras+D,K.endCabras=K.startCabras-K.muertesAdultas-K.descartesAdultas+K.cabritonasACabras,K.endCabritas=Math.max(0,Math.round(K.endCabritas)),K.endCabritonas=Math.max(0,Math.round(K.endCabritonas)),K.endCabras=Math.max(0,Math.round(K.endCabras)),K.endPadres=K.startPadres,K.endTotal=K.endCabras+K.endCabritonas+K.endCabritas+K.endPadres;let le=0;for(let X=0;X<l;X++){const te=T-X;if(te>=0&&te<r.length){let me=r[te].hembrasEntrandoALactancia;for(let _e=0;_e<X;_e++)me*=1-A;le+=me}}K.hembrasEnProduccion=Math.round(le),K.litrosLecheProducidos=K.hembrasEnProduccion*t.litrosPromedioPorAnimal*s,K.ingresosVentaLeche=K.litrosLecheProducidos*t.precioLecheLitro;const $=K.nacimientosMachos*(1-b)*(t.eliminacionCabritos/100);K.ventasCabritos=Math.round($),K.ingresosVentaCabritos=$*j*t.precioVentaCabritoKg,K.ingresosVentaDescartes=K.descartesAdultas*t.precioVentaDescarteAdulto,K.comprasVientres=Math.round(D),K.ingresosTotales=K.ingresosVentaLeche+K.ingresosVentaCabritos+K.ingresosVentaDescartes,r.push(K)}return r},[t,e]),dXe=t=>({cashFlow:I.useMemo(()=>{const n=[];return t.forEach(r=>{const a=r.ingresosVentaLeche/2;n.push({name:`Y${r.year}M${r.monthInYear}-Q1`,ingresoLeche:parseFloat(a.toFixed(2))}),n.push({name:`Y${r.year}M${r.monthInYear}-Q2`,ingresoLeche:parseFloat(a.toFixed(2))})}),n},[t])}),E1=({title:t,value:e,icon:n,unit:r,color:i="text-white"})=>c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[" ",c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[" ",c.jsx(n,{size:14})," ",c.jsx("span",{children:t})," "]})," ",c.jsxs("p",{className:`text-3xl font-bold ${i} mt-1`,children:[" ",e," ",c.jsx("span",{className:"text-xl text-zinc-400",children:r})," "]})," "]}),N1=({options:t,value:e,onChange:n})=>c.jsxs("div",{className:"flex bg-brand-glass rounded-xl p-1 border border-brand-border",children:[" ",t.map(r=>c.jsxs("button",{onClick:()=>n(r.value),className:`w-full py-2 text-sm font-semibold rounded-lg transition-colors ${e===r.value?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[" ",r.label," "]},String(r.value)))," "]}),P1=({active:t,payload:e,label:n,titleFormatter:r,monedaSimbolo:i})=>{if(t&&e&&e.length&&n!==void 0){const a=r?r(n):`Mes ${n}`,s=(o,l)=>typeof o!="number"?o??"N/A":i&&(l.toLowerCase().includes("ingreso")||l.toLowerCase().includes("venta"))?`${i}${o.toFixed(0)}`:o.toFixed(0);return c.jsxs("div",{className:"bg-black/70 backdrop-blur-md p-3 rounded-xl border border-zinc-700 shadow-lg",children:[c.jsx("p",{className:"text-base font-bold text-white mb-2",children:a}),c.jsx("div",{className:"space-y-1",children:e.map((o,l)=>c.jsxs("div",{className:"flex items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:o.stroke||o.fill}}),c.jsxs("span",{className:"text-sm text-zinc-300",children:[o.name,":"]})]}),c.jsx("span",{className:"text-sm font-semibold text-white",children:s(o.value,o.dataKey)})]},`${o.dataKey}-${l}`))})]})}return null},x9=({items:t})=>c.jsxs("div",{className:"absolute top-4 left-4 p-2 flex flex-wrap items-center gap-4 bg-black/30 backdrop-blur-sm rounded-lg z-10",children:[" ",t.map(e=>c.jsxs("div",{className:"flex items-center gap-1.5",children:[" ",c.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}})," ",c.jsx("span",{className:"text-xs text-zinc-200 font-medium",children:e.name})," "]},e.name))," "]}),fXe=t=>{const e=[];return!t||t.length===0||Array.from(new Set(t.map(r=>r.year))).filter(r=>r>0).forEach(r=>{const i=t.filter(s=>s.year===r),a=i[i.length-1];a&&e.push({year:r,name:`Año ${r}`,Cabras:a.endCabras,Levante:a.endCabritonas,Crías:a.endCabritas,Litros:i.reduce((s,o)=>s+o.litrosLecheProducidos,0),Hembras:Math.round(i.reduce((s,o)=>s+o.hembrasEnProduccion,0)/i.length),ingresosVentaLeche:i.reduce((s,o)=>s+o.ingresosVentaLeche,0),ingresosVentaCabritos:i.reduce((s,o)=>s+o.ingresosVentaCabritos,0),ingresosVentaDescartes:i.reduce((s,o)=>s+o.ingresosVentaDescartes,0),ingresosTotales:i.reduce((s,o)=>s+o.ingresosTotales,0)})}),e},w9=(t,e)=>{const n={};return t.forEach(r=>{const i=r.name.match(/Y(\d+)/),a=r.name.match(/M(\d+)/);if(!i||!a)return;const s=parseInt(i[1]),o=parseInt(a[1]),l=Math.ceil(o/6);let u="";e==="semestral"?u=`Año ${s}-S${l}`:u=`Año ${s}`,n[u]=(n[u]||0)+r.ingresoLeche}),Object.entries(n).map(([r,i])=>({name:r,ingresoLeche:parseFloat(i.toFixed(0))}))},hXe=(t,e,n)=>{const r=[];if(!t||t.length===0||!n)return r;const i=e*2;for(let a=1;a<=i;a++){const s=Math.ceil(a/2),o=(a-1)*6+1,l=a*6,u=t.filter(m=>m.monthIndex>=o&&m.monthIndex<=l);if(u.length===0)continue;const d=u[0],f=u[u.length-1],p=u.reduce((m,v)=>m+v.ingresosVentaCabritos,0),h=n.precioVentaCabritoKg>0?p/n.precioVentaCabritoKg/15:0,g=u.reduce((m,v)=>m+v.descartesAdultas,0);r.push({semesterIndex:a,year:s,name:`S${a} (A${s})`,startCabras:d.startCabras,startCabritonas:d.startCabritonas,startCabritas:d.startCabritas,startPadres:d.startPadres,nacimientosH:u.reduce((m,v)=>m+v.nacimientosHembras,0),nacimientosM:u.reduce((m,v)=>m+v.nacimientosMachos,0),muertesCrias:u.reduce((m,v)=>m+v.muertesCrías,0),muertesLevante:u.reduce((m,v)=>m+v.muertesLevante,0),muertesAdultas:u.reduce((m,v)=>m+v.muertesAdultas,0),ventasCabritos:h,ventasDescartes:g,descartesAdultas:g,comprasVientres:u.reduce((m,v)=>m+v.comprasVientres,0),promocionCriasLevante:u.reduce((m,v)=>m+v.cabritasACabritonas,0),promocionLevanteAdultas:u.reduce((m,v)=>m+v.cabritonasACabras,0),endCabras:f.endCabras,endCabritonas:f.endCabritonas,endCabritas:f.endCabritas,endPadres:f.endPadres,endTotal:f.endTotal,Cabras:f.endCabras,Levante:f.endCabritonas,Crías:f.endCabritas,Litros:u.reduce((m,v)=>m+v.litrosLecheProducidos,0),Hembras:u.length>0?Math.round(u.reduce((m,v)=>m+v.hembrasEnProduccion,0)/u.length):0,ingresosVentaLeche:u.reduce((m,v)=>m+v.ingresosVentaLeche,0),ingresosVentaCabritos:p,ingresosVentaDescartes:u.reduce((m,v)=>m+v.ingresosVentaDescartes,0),ingresosTotales:u.reduce((m,v)=>m+v.ingresosTotales,0)})}return r},pXe=t=>{const e={};return t.forEach(n=>{const r=n.name.match(/Y(\d+)/),i=n.name.match(/M(\d+)/);if(!r||!i)return;const a=parseInt(r[1]),s=parseInt(i[1]),o=(a-1)*12+s,l=`Año ${a}-M${s}`;e[l]||(e[l]={name:l,ingresoLeche:0,monthIndex:o}),e[l].ingresoLeche+=n.ingresoLeche}),Object.values(e).sort((n,r)=>n.monthIndex-r.monthIndex).map(n=>({name:n.name,ingresoLeche:parseFloat(n.ingresoLeche.toFixed(0))}))};function S9({simulationConfig:t,mode:e}){const[n,r]=I.useState(3),[i,a]=I.useState("anual"),[s,o]=I.useState("semestral"),[l,u]=I.useState("anual-detailed"),d=uXe(t,n),f=d.length>0?d[0]:null,{cashFlow:p}=dXe(d.slice(1)),{monedaSimbolo:h,nombreFinca:g}=t,m=f?f.startTotal:0,v=d.length>1?d[d.length-1]:f,y=v?v.endTotal:m,b=v?v.endCabras:f?f.startCabras:0,S=d.slice(1).reduce((Y,H)=>Y+H.ingresosTotales,0),A=I.useMemo(()=>fXe(d.slice(1)),[d]),C=I.useMemo(()=>hXe(d.slice(1),n,t),[d,n,t]),D=I.useMemo(()=>pXe(p),[p]),j=I.useMemo(()=>w9(p,"semestral"),[p]),N=I.useMemo(()=>w9(p,"anual"),[p]),P=i==="anual"?A:C,O=i==="anual"?A:C,T=i==="anual"?A:C;let M=[];s==="anual"?M=N:s==="semestral"?M=j:s==="mensual"?M=D:M=p;const L=Y=>Y.startsWith("Año")?Y:Y.replace("S","Semestre ").replace(" (A"," (Año "),V=Y=>s==="quincenal"||s==="mensual"?Y.substring(Y.indexOf("M")):s==="semestral"?Y.substring(Y.indexOf("-S")+1):Y,K=Y=>{if(s==="quincenal"){const H=Y.split("-");if(H.length<2)return Y;const ee=H[0],le=H[1],se=ee.substring(1,ee.indexOf("M")),$=ee.substring(ee.indexOf("M")+1);return`Año ${se} Mes ${$} - ${le}`}if(s==="mensual"){const H=Y.split("-");if(H.length<2)return Y;const ee=H[0].replace("Año ",""),le=H[1].replace("M","");return`Año ${ee} Mes ${le}`}return Y},Z=()=>{const Y=new hn({orientation:"landscape"}),H=[];let ee=[];const le=`Proyección Evolución Rebaño - ${g} (${n} Años)`,se=e==="simulacion"?"Modo: Simulación":"Modo: Proyección Real";Y.text(le,14,15),Y.setFontSize(10),Y.text(se,14,20),l==="anual-detailed"?(ee=[["Año","Sem","I.Cabras","I.Lev","I.Crías","I.Padr","Nac.H","Nac.M","M.Cría","M.Lev","M.Adul","V.Cabri","V.Desc","Comp.V","C→L","L→A","F.Cabras","F.Lev","F.Crías","F.Padr","F.Total","L.Leche",`Ing.Tot (${h})`]],f&&H.push(["Inicial","",f.startCabras,f.startCabritonas,f.startCabritas,f.startPadres,"-","-","-","-","-","-","-","-","-","-",f.endCabras,f.endCabritonas,f.endCabritas,f.endPadres,f.endTotal,"-","-"]),C.forEach($=>{H.push([$.year,$.semesterIndex%2===1?1:2,$.startCabras,$.startCabritonas,$.startCabritas,$.startPadres,Math.round($.nacimientosH),Math.round($.nacimientosM),Math.round($.muertesCrias),Math.round($.muertesLevante),Math.round($.muertesAdultas),Math.round($.ventasCabritos),Math.round($.ventasDescartes),Math.round($.comprasVientres),Math.round($.promocionCriasLevante),Math.round($.promocionLevanteAdultas),$.endCabras,$.endCabritonas,$.endCabritas,$.endPadres,$.endTotal,Math.round($.Litros),$.ingresosTotales.toFixed(0)])})):(ee=[["Semestre","Año","Fin Cabras","Fin Levante","Fin Crías","Fin Padres","Fin Total","L. Leche",`Ing. Total (${h})`]],f&&H.push(["Inicial","",f.endCabras,f.endCabritonas,f.endCabritas,f.endPadres,f.endTotal,"-","-"]),C.forEach($=>{H.push([`S${$.semesterIndex}`,$.year,$.endCabras,$.endCabritonas,$.endCabritas,$.endPadres,$.endTotal,Math.round($.Litros),$.ingresosTotales.toFixed(0)])})),cXe(Y,{head:ee,body:H,startY:25,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:6,halign:"center",cellPadding:1},styles:{fontSize:6,cellPadding:1,overflow:"linebreak"},columnStyles:{}}),Y.save(`proyeccion_evolucion_${l==="anual-detailed"?"anual_det":"sem_res"}.pdf`)};return c.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6 animate-fade-in p-4",children:[c.jsx("h2",{className:"text-center text-xl font-semibold text-indigo-400 -mb-4",children:e==="simulacion"?"Resultados de Simulación":"Proyección Basada en Datos Reales"}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[c.jsx(N1,{value:n,onChange:r,options:[{label:"1 Año",value:1},{label:"3 Años",value:3},{label:"5 Años",value:5},{label:"10 Años",value:10}]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(so,{size:16,className:"text-zinc-400"}),c.jsx("p",{className:"text-sm font-semibold text-zinc-400 whitespace-nowrap",children:"Vista Gráficos:"}),c.jsx(N1,{value:i,onChange:a,options:[{label:"Semestral",value:"semestral"},{label:"Anual",value:"anual"}]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsx(E1,{title:"Población Inicial",value:m,icon:hu,unit:"Animales"}),c.jsx(E1,{title:`Población Final (${i==="anual"?`Año ${n}`:`Sem. ${n*2}`})`,value:y,icon:ms,unit:"Animales",color:y>=m?"text-brand-green":"text-brand-red"}),c.jsx(E1,{title:"Vientres Finales",value:b,icon:tv,unit:"Cabras"}),c.jsx(E1,{title:`Ingresos Totales (${n} Años Est.)`,value:S.toFixed(0),icon:No,unit:h,color:"text-brand-green"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border h-80 relative",children:[c.jsxs("h3",{className:"text-sm font-semibold text-zinc-300 absolute top-4 left-4 z-20",children:["Composición Rebaño (",i==="anual"?"Anual":"Semestral",")"]}),c.jsx(x9,{items:[{name:"Cabras",color:"#34C759"},{name:"Levante",color:"#FF9500"},{name:"Crías",color:"#007AFF"}]}),c.jsx(ki,{width:"100%",height:"100%",children:c.jsxs(__,{data:P,margin:{top:50,right:10,left:-25,bottom:0},children:[c.jsxs("defs",{children:[" ",c.jsxs("linearGradient",{id:"colorCabras",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:"#34C759",stopOpacity:.7}),c.jsx("stop",{offset:"95%",stopColor:"#34C759",stopOpacity:.1})]})," ",c.jsxs("linearGradient",{id:"colorCabritonas",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:"#FF9500",stopOpacity:.7}),c.jsx("stop",{offset:"95%",stopColor:"#FF9500",stopOpacity:.1})]})," ",c.jsxs("linearGradient",{id:"colorCabritas",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:"#007AFF",stopOpacity:.7}),c.jsx("stop",{offset:"95%",stopColor:"#007AFF",stopOpacity:.1})]})," "]}),c.jsx(Jc,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)",vertical:!1}),c.jsx(ii,{dataKey:"name",interval:"preserveStartEnd",minTickGap:20,tick:{fill:"rgba(255,255,255,0.7)",fontSize:10,fontFamily:"sans-serif"},axisLine:!1,tickLine:!1}),c.jsx(ni,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12,fontFamily:"sans-serif"},axisLine:!1,tickLine:!1}),c.jsx(xr,{content:c.jsx(P1,{titleFormatter:L})}),c.jsx(Bs,{type:"monotone",dataKey:"Cabras",name:"Cabras",stackId:"1",stroke:"#34C759",fill:"url(#colorCabras)",strokeWidth:2}),c.jsx(Bs,{type:"monotone",dataKey:"Levante",name:"Levante",stackId:"1",stroke:"#FF9500",fill:"url(#colorCabritonas)",strokeWidth:2}),c.jsx(Bs,{type:"monotone",dataKey:"Crías",name:"Crías",stackId:"1",stroke:"#007AFF",fill:"url(#colorCabritas)",strokeWidth:2})]})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border h-80 relative",children:[c.jsxs("h3",{className:"text-sm font-semibold text-zinc-300 absolute top-4 right-4 z-20",children:["Producción Leche (",i==="anual"?"Anual":"Semestral",")"]}),c.jsx(x9,{items:[{name:"Litros",color:"#A0A0A0"},{name:"Hembras Prod.",color:"#FF2D55"}]}),c.jsx(ki,{width:"100%",height:"100%",children:c.jsxs(bLe,{data:O,margin:{top:50,right:10,left:-25,bottom:0},children:[c.jsx(Jc,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)",vertical:!1}),c.jsx(ii,{dataKey:"name",interval:"preserveStartEnd",minTickGap:20,tick:{fill:"rgba(255,255,255,0.7)",fontSize:10,fontFamily:"sans-serif"},axisLine:!1,tickLine:!1}),c.jsx(ni,{yAxisId:"left",orientation:"left",stroke:"#A0A0A0",tick:{fill:"rgba(200,200,200,0.7)",fontSize:12},axisLine:!1,tickLine:!1}),c.jsx(ni,{yAxisId:"right",orientation:"right",stroke:"#FF2D55",tick:{fill:"rgba(255, 100, 100, 0.7)",fontSize:12},axisLine:!1,tickLine:!1}),c.jsx(xr,{content:c.jsx(P1,{titleFormatter:L})}),c.jsx(Bs,{yAxisId:"left",type:"monotone",dataKey:"Litros",name:"Litros",stroke:"#A0A0A0",fill:"rgba(200,200,200,0.1)",strokeWidth:2}),c.jsx(ud,{yAxisId:"right",type:"monotone",dataKey:"Hembras",name:"Hembras Prod.",stroke:"#FF2D55",strokeWidth:2,dot:!1,activeDot:{r:4}})]})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border h-80",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h3",{className:"text-sm font-semibold text-zinc-300",children:"Flujo de Caja (Leche)"}),c.jsx(N1,{value:s,onChange:o,options:[{label:"Q",value:"quincenal"},{label:"M",value:"mensual"},{label:"S",value:"semestral"},{label:"A",value:"anual"}]})]}),c.jsx(ki,{width:"100%",height:"calc(100% - 30px)",children:c.jsxs(Po,{data:M,margin:{top:5,right:10,left:-25,bottom:0},children:[c.jsx(Jc,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)",vertical:!1}),c.jsx(ii,{dataKey:"name",tickFormatter:V,interval:"preserveStartEnd",minTickGap:s==="quincenal"?0:s==="mensual"?5:10,tick:{fill:"rgba(255,255,255,0.7)",fontSize:s==="quincenal"?7:s==="mensual"?9:10,fontFamily:"sans-serif"},axisLine:!1,tickLine:!1}),c.jsx(ni,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12,fontFamily:"sans-serif"},axisLine:!1,tickLine:!1}),c.jsx(xr,{content:c.jsx(P1,{titleFormatter:K,monedaSimbolo:h}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),c.jsx(Ti,{dataKey:"ingresoLeche",name:`Ingreso (${h})`,fill:"#34C759"})]})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border h-80 relative",children:[c.jsxs("h3",{className:"text-sm font-semibold text-zinc-300 absolute top-4 left-4 z-20",children:["Ingresos Totales (",i==="anual"?"Anual":"Semestral",")"]}),c.jsx(ki,{width:"100%",height:"100%",children:c.jsxs(Po,{data:T,margin:{top:20,right:10,left:-25,bottom:0},children:[c.jsx(Jc,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)",vertical:!1}),c.jsx(ii,{dataKey:"name",interval:"preserveStartEnd",minTickGap:20,tick:{fill:"rgba(255,255,255,0.7)",fontSize:10,fontFamily:"sans-serif"},axisLine:!1,tickLine:!1}),c.jsx(ni,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12,fontFamily:"sans-serif"},axisLine:!1,tickLine:!1}),c.jsx(xr,{content:c.jsx(P1,{titleFormatter:L,monedaSimbolo:h})}),c.jsx(Bl,{wrapperStyle:{fontSize:"10px",paddingTop:"10px"}}),c.jsx(Ti,{dataKey:"ingresosVentaLeche",name:"V. Leche",stackId:"a",fill:"#34C759"}),c.jsx(Ti,{dataKey:"ingresosVentaCabritos",name:"V. Cabritos",stackId:"a",fill:"#007AFF"}),c.jsx(Ti,{dataKey:"ingresosVentaDescartes",name:"V. Descartes",stackId:"a",fill:"#FF9500"})]})})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl border border-brand-border overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Datos Detallados"}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(N1,{value:l,onChange:u,options:[{label:"Anual Det.",value:"anual-detailed"},{label:"Semestral Res.",value:"semestral-summary"}]}),c.jsxs("button",{onClick:Z,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-semibold px-3 py-1.5 rounded-lg",title:"Exportar tabla a PDF",children:[c.jsx(Mce,{size:16})," PDF"]})]})]}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"w-full min-w-max text-left",children:[l==="anual-detailed"&&c.jsx("thead",{className:"border-b border-brand-border bg-black/20 sticky top-0 z-10",children:c.jsxs("tr",{className:"text-[10px] text-zinc-400 uppercase font-sans",children:[c.jsx("th",{className:"p-2 sticky left-0 bg-black/20",children:"Año"}),c.jsx("th",{className:"p-2 sticky left-12 bg-black/20",children:"Sem"}),c.jsx("th",{className:"p-2 text-right",children:"I.Cabras"}),c.jsx("th",{className:"p-2 text-right",children:"I.Lev"}),c.jsx("th",{className:"p-2 text-right",children:"I.Crías"}),c.jsx("th",{className:"p-2 text-right",children:"I.Padr"}),c.jsx("th",{className:"p-2 text-right text-sky-400",children:"Nac.H"}),c.jsx("th",{className:"p-2 text-right text-sky-400",children:"Nac.M"}),c.jsx("th",{className:"p-2 text-right text-red-400",children:"M.Cría"}),c.jsx("th",{className:"p-2 text-right text-red-400",children:"M.Lev"}),c.jsx("th",{className:"p-2 text-right text-red-400",children:"M.Adul"}),c.jsx("th",{className:"p-2 text-right text-orange-400",children:"V.Cabri"}),c.jsx("th",{className:"p-2 text-right text-orange-400",children:"V.Desc"}),c.jsx("th",{className:"p-2 text-right text-purple-400",children:"Comp.V"}),c.jsx("th",{className:"p-2 text-right text-green-400",children:"C→L"}),c.jsx("th",{className:"p-2 text-right text-green-400",children:"L→A"}),c.jsx("th",{className:"p-2 text-right font-bold",children:"F.Cabras"}),c.jsx("th",{className:"p-2 text-right font-bold",children:"F.Lev"}),c.jsx("th",{className:"p-2 text-right font-bold",children:"F.Crías"}),c.jsx("th",{className:"p-2 text-right font-bold",children:"F.Padr"}),c.jsx("th",{className:"p-2 text-right font-bold",children:"F.Total"}),c.jsx("th",{className:"p-2 text-right text-teal-300",children:"L.Leche"}),c.jsxs("th",{className:"p-2 text-right text-emerald-300",children:["Ing.Tot (",h,")"]})]})}),l==="semestral-summary"&&c.jsx("thead",{className:"border-b border-brand-border bg-black/20 sticky top-0 z-10",children:c.jsxs("tr",{className:"text-[10px] text-zinc-400 uppercase font-sans",children:[c.jsx("th",{className:"p-2 sticky left-0 bg-black/20",children:"Semestre"}),c.jsx("th",{className:"p-2 text-right font-bold",children:"Fin Cabras"}),c.jsx("th",{className:"p-2 text-right font-bold",children:"Fin Levante"}),c.jsx("th",{className:"p-2 text-right font-bold",children:"Fin Crías"}),c.jsx("th",{className:"p-2 text-right font-bold",children:"Fin Padres"}),c.jsx("th",{className:"p-2 text-right font-bold",children:"Fin Total"}),c.jsx("th",{className:"p-2 text-right text-teal-300",children:"L. Leche"}),c.jsxs("th",{className:"p-2 text-right text-emerald-300",children:["Ing. Total (",h,")"]})]})}),c.jsxs("tbody",{className:"divide-y divide-brand-border text-xs",children:[f&&c.jsx("tr",{className:"bg-zinc-800/50 group",children:l==="anual-detailed"?c.jsxs(c.Fragment,{children:[c.jsx("td",{className:"p-2 font-semibold text-white sticky left-0 bg-zinc-800/50",colSpan:2,children:"Inicial"}),c.jsx("td",{className:"p-2 text-right font-mono text-white",children:f.startCabras}),c.jsx("td",{className:"p-2 text-right font-mono text-white",children:f.startCabritonas}),c.jsx("td",{className:"p-2 text-right font-mono text-white",children:f.startCabritas}),c.jsx("td",{className:"p-2 text-right font-mono text-white",children:f.startPadres}),c.jsx("td",{colSpan:10,className:"p-2 text-center font-mono text-zinc-500",children:"-"}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:f.endCabras}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:f.endCabritonas}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:f.endCabritas}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:f.endPadres}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:f.endTotal}),c.jsx("td",{className:"p-2 text-right font-mono text-zinc-500",children:"-"}),c.jsx("td",{className:"p-2 text-right font-mono text-zinc-500",children:"-"})]}):c.jsxs(c.Fragment,{children:[c.jsx("td",{className:"p-2 font-semibold text-white sticky left-0 bg-zinc-800/50",children:"Inicial"}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:f.endCabras}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:f.endCabritonas}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:f.endCabritas}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:f.endPadres}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:f.endTotal}),c.jsx("td",{className:"p-2 text-right font-mono text-zinc-500",children:"-"}),c.jsx("td",{className:"p-2 text-right font-mono text-zinc-500",children:"-"})]})}),C.map(Y=>c.jsx("tr",{className:`hover:bg-zinc-800/60 group ${l==="anual-detailed"&&Y.semesterIndex%2===0?"border-b-2 border-b-zinc-600":""}`,children:l==="anual-detailed"?c.jsxs(c.Fragment,{children:[c.jsx("td",{className:"p-2 font-semibold text-white sticky left-0 bg-brand-glass group-hover:bg-zinc-800/60",children:Y.year}),c.jsx("td",{className:"p-2 font-semibold text-white sticky left-12 bg-brand-glass group-hover:bg-zinc-800/60",children:Y.semesterIndex%2===1?1:2}),c.jsx("td",{className:"p-2 text-right font-mono text-zinc-400",children:Y.startCabras}),c.jsx("td",{className:"p-2 text-right font-mono text-zinc-400",children:Y.startCabritonas}),c.jsx("td",{className:"p-2 text-right font-mono text-zinc-400",children:Y.startCabritas}),c.jsx("td",{className:"p-2 text-right font-mono text-zinc-400",children:Y.startPadres}),c.jsx("td",{className:"p-2 text-right font-mono text-sky-400",children:Math.round(Y.nacimientosH)}),c.jsx("td",{className:"p-2 text-right font-mono text-sky-400",children:Math.round(Y.nacimientosM)}),c.jsx("td",{className:"p-2 text-right font-mono text-red-400",children:Math.round(Y.muertesCrias)}),c.jsx("td",{className:"p-2 text-right font-mono text-red-400",children:Math.round(Y.muertesLevante)}),c.jsx("td",{className:"p-2 text-right font-mono text-red-400",children:Math.round(Y.muertesAdultas)}),c.jsx("td",{className:"p-2 text-right font-mono text-orange-400",children:Math.round(Y.ventasCabritos)}),c.jsx("td",{className:"p-2 text-right font-mono text-orange-400",children:Math.round(Y.ventasDescartes)}),c.jsx("td",{className:"p-2 text-right font-mono text-purple-400",children:Math.round(Y.comprasVientres)}),c.jsx("td",{className:"p-2 text-right font-mono text-green-400",children:Math.round(Y.promocionCriasLevante)}),c.jsx("td",{className:"p-2 text-right font-mono text-green-400",children:Math.round(Y.promocionLevanteAdultas)}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:Y.endCabras}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:Y.endCabritonas}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:Y.endCabritas}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:Y.endPadres}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:Y.endTotal}),c.jsx("td",{className:"p-2 text-right font-mono text-teal-300",children:Math.round(Y.Litros)}),c.jsx("td",{className:"p-2 text-right font-mono text-emerald-300",children:Y.ingresosTotales.toFixed(0)})]}):c.jsxs(c.Fragment,{children:[c.jsx("td",{className:"p-2 font-semibold text-white sticky left-0 bg-brand-glass group-hover:bg-zinc-800/60",children:`S${Y.semesterIndex} (A${Y.year})`}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:Y.endCabras}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:Y.endCabritonas}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:Y.endCabritas}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:Y.endPadres}),c.jsx("td",{className:"p-2 text-right font-mono font-bold text-white",children:Y.endTotal}),c.jsx("td",{className:"p-2 text-right font-mono text-teal-300",children:Math.round(Y.Litros)}),c.jsx("td",{className:"p-2 text-right font-mono text-emerald-300",children:Y.ingresosTotales.toFixed(0)})]})},Y.semesterIndex))]})]})})]})]})}const Qv=({title:t,icon:e,children:n,defaultOpen:r=!1})=>{const[i,a]=I.useState(r);return c.jsxs("div",{className:"mb-4",children:[c.jsxs("button",{type:"button",onClick:()=>a(!i),className:"text-sm font-semibold text-zinc-400 uppercase tracking-wide flex items-center justify-between gap-2 mb-2 px-4 w-full",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(e,{size:16}),t]}),c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-4 h-4 transition-transform ${i?"rotate-180":"rotate-0"}`,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})]}),i&&c.jsx("div",{className:"bg-brand-glass rounded-2xl border border-brand-border divide-y divide-brand-border overflow-hidden animate-fade-in",children:n})]})},na=be.forwardRef(({label:t,unit:e,...n},r)=>c.jsxs("div",{className:"p-3 bg-ios-modal-bg flex justify-between items-center",children:[c.jsx("label",{htmlFor:n.id||n.name,className:"text-white text-base",children:t}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{ref:r,...n,className:"w-24 bg-zinc-700/80 rounded-lg p-2 text-white text-right font-mono text-base focus:outline-none focus:ring-2 focus:ring-brand-orange"}),e&&c.jsx("span",{className:"text-zinc-400 w-8 text-left",children:e})]})]}));function mXe({initialConfig:t,onSimulate:e}){const[n,r]=I.useState(t);I.useEffect(()=>{const s=n.initialCabras+n.initialCabritonas,o=Math.max(1,Math.ceil(s/30));n.initialPadres!==o&&r(l=>({...l,initialPadres:o}))},[n.initialCabras,n.initialCabritonas,n.initialPadres]);const i=s=>{const{name:o,value:l,type:u}=s.target;let d=l;u==="number"&&(d=l===""?0:parseFloat(l),isNaN(d)&&(d=0)),r(f=>({...f,[o]:d}))},a=s=>{s.preventDefault(),e(n)};return c.jsxs("form",{onSubmit:a,className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in p-4 pb-32",children:[" ",c.jsxs("header",{className:"text-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Modo Simulación"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Define tus parámetros de partida"})]}),c.jsxs(Qv,{title:"Población Inicial",icon:hu,defaultOpen:!0,children:[c.jsx(na,{label:"Cabras (Adultas)",type:"number",name:"initialCabras",value:n.initialCabras,onChange:i,min:"0",step:"1",unit:"N°"}),c.jsx(na,{label:"Levante (1-2a)",type:"number",name:"initialCabritonas",value:n.initialCabritonas,onChange:i,min:"0",step:"1",unit:"N°"}),c.jsx(na,{label:"Crías (0-1a)",type:"number",name:"initialCabritas",value:n.initialCabritas,onChange:i,min:"0",step:"1",unit:"N°"}),c.jsx(na,{label:"Reproductores",type:"number",name:"initialPadres",value:n.initialPadres,onChange:i,min:"1",step:"1",unit:"N°"}),c.jsx("p",{className:"text-xs text-zinc-500 px-3 py-2 text-center",children:"Nota: Reproductores calculados automáticamente (1/30 hembras)."}),c.jsx(na,{label:"Compras Vientres/Año",type:"number",name:"comprasVientresAnual",value:n.comprasVientresAnual,onChange:i,min:"0",step:"1",unit:"N°"})]}),c.jsxs(Qv,{title:"Manejo Reproductivo",icon:QM,defaultOpen:!0,children:[c.jsxs("div",{className:"p-3 bg-ios-modal-bg flex justify-between items-center",children:[c.jsx("label",{className:"text-white text-base",children:"Temporadas Monta/Año"}),c.jsx("div",{className:"flex bg-zinc-700/80 rounded-lg p-1",children:[1,2,3,4].map(s=>c.jsx("button",{type:"button",onClick:()=>r(o=>({...o,temporadasMontaPorAno:s})),className:`px-3 py-1 text-sm rounded ${n.temporadasMontaPorAno===s?"bg-brand-orange text-black font-semibold":"text-white"}`,children:s},s))})]}),c.jsx(na,{label:"Duración Monta",type:"number",name:"duracionMontaDias",value:n.duracionMontaDias,onChange:i,min:"1",step:"1",unit:"días"}),c.jsx(na,{label:"Días Gestación",type:"number",name:"diasGestacion",value:n.diasGestacion,onChange:i,min:"140",max:"160",step:"1",unit:"días"}),c.jsx(na,{label:"Concentración Partos",type:"number",name:"distribucionPartosPorcentaje",value:n.distribucionPartosPorcentaje,onChange:i,min:"0",max:"100",step:"1",unit:"%"}),c.jsx(na,{label:"Duración 1ra Fase Partos",type:"number",name:"distribucionPartosDias",value:n.distribucionPartosDias,onChange:i,min:"1",step:"1",unit:"días"})]}),c.jsxs(Qv,{title:"Manejo Productivo",icon:QM,children:[c.jsx(na,{label:"Producción Leche (Prom.)",type:"number",name:"litrosPromedioPorAnimal",value:n.litrosPromedioPorAnimal,onChange:i,min:"0",step:"0.1",unit:"L/día"}),c.jsx(na,{label:"Días de Lactancia",type:"number",name:"diasLactanciaObjetivo",value:n.diasLactanciaObjetivo,onChange:i,min:"1",step:"1",unit:"días"})]}),c.jsxs(Qv,{title:"Índices Biológicos",icon:qW,children:[c.jsx(na,{label:"% de Preñez",type:"number",name:"porcentajePrenez",value:n.porcentajePrenez,onChange:i,min:"0",max:"100",step:"1",unit:"%"}),c.jsx(na,{label:"% Prolificidad",type:"number",name:"porcentajeProlificidad",value:n.porcentajeProlificidad,onChange:i,min:"0",step:"1",unit:"%"}),c.jsx(na,{label:"% Mortalidad Crías (0-6m)",type:"number",name:"mortalidadCrias",value:n.mortalidadCrias,onChange:i,min:"0",max:"100",step:"1",unit:"%"}),c.jsx(na,{label:"% Mortalidad Levante (6-12m)",type:"number",name:"mortalidadLevante",value:n.mortalidadLevante,onChange:i,min:"0",max:"100",step:"1",unit:"%"}),c.jsx(na,{label:"% Mortalidad Cabras (>12m)",type:"number",name:"mortalidadCabras",value:n.mortalidadCabras,onChange:i,min:"0",max:"100",step:"1",unit:"%"}),c.jsx(na,{label:"% Reemplazo (Anual)",type:"number",name:"tasaReemplazo",value:n.tasaReemplazo,onChange:i,min:"0",max:"100",step:"1",unit:"%"}),c.jsx(na,{label:"% Eliminación Cabritos",type:"number",name:"eliminacionCabritos",value:n.eliminacionCabritos,onChange:i,min:"0",max:"100",step:"1",unit:"%"})]}),c.jsxs(Qv,{title:"Parámetros Económicos",icon:No,children:[c.jsx(na,{label:"Precio Venta Leche",type:"number",name:"precioLecheLitro",value:n.precioLecheLitro,onChange:i,min:"0",step:"0.01",unit:`${n.monedaSimbolo}/L`}),c.jsx(na,{label:"Precio Venta Cabrito",type:"number",name:"precioVentaCabritoKg",value:n.precioVentaCabritoKg,onChange:i,min:"0",step:"0.01",unit:`${n.monedaSimbolo}/Kg`}),c.jsx(na,{label:"Precio Venta Descarte",type:"number",name:"precioVentaDescarteAdulto",value:n.precioVentaDescarteAdulto,onChange:i,min:"0",step:"1",unit:n.monedaSimbolo})]}),c.jsx("div",{className:"fixed bottom-16 left-0 right-0 p-4 bg-brand-dark/80 backdrop-blur-lg border-t border-brand-border z-10",style:{paddingBottom:"calc(1rem + env(safe-area-inset-bottom))"},children:c.jsxs("button",{type:"submit",className:"w-full max-w-2xl mx-auto bg-brand-orange text-black font-bold py-4 rounded-xl text-lg flex items-center justify-center gap-2 hover:bg-orange-400 transition-colors",children:[c.jsx(ms,{size:20}),"Correr Simulación"]})})]})}const YJ=()=>c.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#1C1C1E] animate-fade-in",children:[c.jsxs("div",{className:"relative flex items-center justify-center w-24 h-24",children:[c.jsx(tv,{className:"text-brand-orange w-12 h-12"}),c.jsx("div",{className:"absolute inset-0",children:c.jsx(BW,{className:"w-24 h-24 text-zinc-700 animate-spin-slow"})})]}),c.jsx("p",{className:"mt-4 text-lg font-medium text-zinc-400 tracking-wider",children:"Cargando datos..."})]});function gXe({onSwitchModule:t}){const{syncStatus:e,appConfig:n,animals:r,parturitions:i,isLoading:a}=Kt(),[s,o]=I.useState("setup"),[l,u]=I.useState(null),[d,f]=I.useState(null),p=I.useCallback(()=>{if(a||!n||!r||r.length===0)return console.warn("prepareRealConfig: Datos insuficientes o cargando."),null;let v=0,y=0,b=0,S=0;r.filter(D=>D.status==="Activo"&&!D.isReference).forEach(D=>{const j=D.lifecycleStage;j==="Cabra Adulta"||j==="Cabra Multípara"||j==="Cabra Primípara"?v++:j==="Cabritona"?y++:j==="Cabrita"?b++:j==="Macho Cabrío"&&S++}),S=Math.max(1,S);const C={...n,initialCabras:v,initialCabritonas:y,initialCabritas:b,initialPadres:S,temporadasMontaPorAno:1,duracionMontaDias:45,distribucionPartosPorcentaje:60,distribucionPartosDias:20,litrosPromedioPorAnimal:1.5,comprasVientresAnual:0};return console.log("Real config prepared:",C),C},[n,r,i,a]);I.useEffect(()=>{if(s==="real-results"){const v=p();JSON.stringify(v)!==JSON.stringify(d)&&f(v)}},[n,r,i,a,s]);const h=v=>{console.log("Running simulation with config:",v),u(v),o("sim-results")},g=v=>{if(console.log(`handleViewChange: Clic en botón '${v}'. Vista actual: ${s}`),v==="real-results"&&!d){console.log("handleViewChange: Intentando preparar config real para vista 'Real'...");const y=p();f(y),y||console.error("handleViewChange: No se pudo preparar config real.")}o(v),console.log("handleViewChange: Nuevo estado de activeView debería ser:",v)},m=[{view:"setup",label:"Setup",icon:hT},{view:"sim-results",label:"Simulación",icon:xce},{view:"real-results",label:"Real",icon:Ga}];return console.log("Renderizando EvolucionShell. Vista activa:",s),console.log("simConfig:",l?"LISTO":"NO LISTO"),console.log("realConfig:",d?"LISTO":"NO LISTO"),console.log("isDataLoading:",a),c.jsxs("div",{className:"font-sans text-gray-200 min-h-screen animate-fade-in",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s!=="setup"&&c.jsx("button",{onClick:()=>{console.log("Clic en botón Volver"),g("setup")},className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors flex-shrink-0","aria-label":"Volver a Configuración",children:c.jsx(ji,{size:24})}),c.jsx(ms,{className:`text-indigo-400 ${s==="setup"?"":"hidden sm:block"} flex-shrink-0`,size:28}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none truncate",children:"GanaderoOS"}),c.jsxs("p",{className:"text-xs text-zinc-400 leading-none truncate",children:["Evolución - ",s==="setup"?"Configurar Simulación":s==="sim-results"?"Resultados Simulación":"Proyección Real"]})]})]}),c.jsx("div",{className:"flex items-center gap-4 flex-shrink-0",children:c.jsx(bv,{status:e})})]})}),c.jsxs("main",{className:"pt-16 pb-16",children:[s==="setup"&&c.jsx(mXe,{initialConfig:l||d||p()||{...n,initialCabras:0,initialCabritonas:0,initialCabritas:0,initialPadres:1,temporadasMontaPorAno:1,litrosPromedioPorAnimal:1,duracionMontaDias:45,distribucionPartosPorcentaje:60,distribucionPartosDias:20,comprasVientresAnual:0},onSimulate:h}),s==="sim-results"&&l&&c.jsx(S9,{simulationConfig:l,mode:"simulacion"},"sim-results"),s==="sim-results"&&!l&&c.jsx("div",{className:"text-center p-10 text-zinc-400",children:"Primero configura y corre una simulación en la pestaña 'Setup'."}),s==="real-results"&&d&&c.jsx(S9,{simulationConfig:d,mode:"real"},"real-results"),s==="real-results"&&!d&&a&&c.jsx(YJ,{}),s==="real-results"&&!d&&!a&&c.jsx("div",{className:"text-center p-10 text-zinc-400",children:"No hay suficientes datos reales (animales activos o configuración) para generar la proyección. Revisa los permisos de Firebase si persiste."})]}),c.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-20 bg-black/50 backdrop-blur-xl border-t border-white/20 flex justify-around h-16",children:m.map(v=>{const y=v.view==="sim-results"&&!l||v.view==="real-results"&&!d,b=s===v.view;return c.jsxs("button",{onClick:()=>g(v.view),disabled:y,className:`relative flex flex-col items-center justify-center pt-3 pb-2 w-full transition-colors ${b?"text-indigo-400 font-semibold":"text-gray-500 hover:text-white"} ${y?"opacity-40 cursor-not-allowed":""}`,"aria-current":b?"page":void 0,children:[c.jsx(v.icon,{className:"w-6 h-6"}),c.jsx("span",{className:"text-xs font-semibold mt-1",children:v.label})]},v.view)})}),c.jsx("div",{style:{position:"fixed",bottom:"calc(4rem + 1rem)",right:"1rem",zIndex:40},children:c.jsx(Zb,{onSwitchModule:t})})]})}function vXe(){const{currentUser:t,isLoading:e}=PW(),{isLoading:n}=Kt(),[r,i]=I.useState("rebano"),[a,s]=I.useState({page:null,sourceModule:void 0}),[o,l]=I.useState({lactokeeper:{name:"dashboard"}});I.useEffect(()=>{r!=="rebano"&&s({page:null,sourceModule:void 0})},[r]);const u=I.useCallback(p=>{i(p)},[]),d=I.useCallback((p,h)=>{s({page:p,sourceModule:h}),i("rebano")},[]),f=I.useCallback(p=>{l(h=>({...h,lactokeeper:p}))},[]);if(e||t&&n)return c.jsx(YJ,{});if(!t)return c.jsx(uue,{});switch(r){case"lactokeeper":return c.jsx(z$e,{initialPage:o.lactokeeper,onPageStateChange:f,navigateToRebano:d,onSwitchModule:u});case"kilos":return c.jsx(X$e,{navigateToRebano:d,onSwitchModule:u});case"salud":return c.jsx(Tqe,{onSwitchModule:u});case"cents":return c.jsx(Mqe,{onSwitchModule:u});case"evolucion":return c.jsx(gXe,{onSwitchModule:u});case"rebano":default:return c.jsx(x$e,{initialState:a,onSwitchModule:u})}}kj.createRoot(document.getElementById("root")).render(c.jsx(be.StrictMode,{children:c.jsx(rce,{children:c.jsx(fce,{children:c.jsx(vXe,{})})})}));export{Rr as _,Yp as c,Pr as g};
