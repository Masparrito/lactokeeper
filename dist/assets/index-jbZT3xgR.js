var Tee=Object.defineProperty;var Dee=(t,e,n)=>e in t?Tee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Mn=(t,e,n)=>Dee(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Zp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var w$={exports:{}},P5={},S$={exports:{}},ir={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb=Symbol.for("react.element"),Iee=Symbol.for("react.portal"),Oee=Symbol.for("react.fragment"),Mee=Symbol.for("react.strict_mode"),Ree=Symbol.for("react.profiler"),Lee=Symbol.for("react.provider"),Fee=Symbol.for("react.context"),zee=Symbol.for("react.forward_ref"),$ee=Symbol.for("react.suspense"),Bee=Symbol.for("react.memo"),Vee=Symbol.for("react.lazy"),CI=Symbol.iterator;function Uee(t){return t===null||typeof t!="object"?null:(t=CI&&t[CI]||t["@@iterator"],typeof t=="function"?t:null)}var _$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A$=Object.assign,C$={};function qg(t,e,n){this.props=t,this.context=e,this.refs=C$,this.updater=n||_$}qg.prototype.isReactComponent={};qg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function j$(){}j$.prototype=qg.prototype;function vP(t,e,n){this.props=t,this.context=e,this.refs=C$,this.updater=n||_$}var yP=vP.prototype=new j$;yP.constructor=vP;A$(yP,qg.prototype);yP.isPureReactComponent=!0;var jI=Array.isArray,N$=Object.prototype.hasOwnProperty,bP={current:null},E$={key:!0,ref:!0,__self:!0,__source:!0};function k$(t,e,n){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)N$.call(e,r)&&!E$.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:pb,type:t,key:a,ref:s,props:i,_owner:bP.current}}function Hee(t,e){return{$$typeof:pb,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xP(t){return typeof t=="object"&&t!==null&&t.$$typeof===pb}function Wee(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var NI=/\/+/g;function q_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Wee(""+t.key):e.toString(36)}function E1(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case pb:case Iee:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+q_(s,0):r,jI(i)?(n="",t!=null&&(n=t.replace(NI,"$&/")+"/"),E1(i,e,n,"",function(u){return u})):i!=null&&(xP(i)&&(i=Hee(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(NI,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",jI(t))for(var o=0;o<t.length;o++){a=t[o];var l=r+q_(a,o);s+=E1(a,e,n,l,i)}else if(l=Uee(t),typeof l=="function")for(t=l.call(t),o=0;!(a=t.next()).done;)a=a.value,l=r+q_(a,o++),s+=E1(a,e,n,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function vx(t,e,n){if(t==null)return t;var r=[],i=0;return E1(t,r,"","",function(a){return e.call(n,a,i++)}),r}function qee(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lo={current:null},k1={transition:null},Kee={ReactCurrentDispatcher:lo,ReactCurrentBatchConfig:k1,ReactCurrentOwner:bP};function P$(){throw Error("act(...) is not supported in production builds of React.")}ir.Children={map:vx,forEach:function(t,e,n){vx(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vx(t,function(){e++}),e},toArray:function(t){return vx(t,function(e){return e})||[]},only:function(t){if(!xP(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ir.Component=qg;ir.Fragment=Oee;ir.Profiler=Ree;ir.PureComponent=vP;ir.StrictMode=Mee;ir.Suspense=$ee;ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kee;ir.act=P$;ir.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=A$({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=bP.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)N$.call(e,l)&&!E$.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:pb,type:t.type,key:i,ref:a,props:r,_owner:s}};ir.createContext=function(t){return t={$$typeof:Fee,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Lee,_context:t},t.Consumer=t};ir.createElement=k$;ir.createFactory=function(t){var e=k$.bind(null,t);return e.type=t,e};ir.createRef=function(){return{current:null}};ir.forwardRef=function(t){return{$$typeof:zee,render:t}};ir.isValidElement=xP;ir.lazy=function(t){return{$$typeof:Vee,_payload:{_status:-1,_result:t},_init:qee}};ir.memo=function(t,e){return{$$typeof:Bee,type:t,compare:e===void 0?null:e}};ir.startTransition=function(t){var e=k1.transition;k1.transition={};try{t()}finally{k1.transition=e}};ir.unstable_act=P$;ir.useCallback=function(t,e){return lo.current.useCallback(t,e)};ir.useContext=function(t){return lo.current.useContext(t)};ir.useDebugValue=function(){};ir.useDeferredValue=function(t){return lo.current.useDeferredValue(t)};ir.useEffect=function(t,e){return lo.current.useEffect(t,e)};ir.useId=function(){return lo.current.useId()};ir.useImperativeHandle=function(t,e,n){return lo.current.useImperativeHandle(t,e,n)};ir.useInsertionEffect=function(t,e){return lo.current.useInsertionEffect(t,e)};ir.useLayoutEffect=function(t,e){return lo.current.useLayoutEffect(t,e)};ir.useMemo=function(t,e){return lo.current.useMemo(t,e)};ir.useReducer=function(t,e,n){return lo.current.useReducer(t,e,n)};ir.useRef=function(t){return lo.current.useRef(t)};ir.useState=function(t){return lo.current.useState(t)};ir.useSyncExternalStore=function(t,e,n){return lo.current.useSyncExternalStore(t,e,n)};ir.useTransition=function(){return lo.current.useTransition()};ir.version="18.3.1";S$.exports=ir;var I=S$.exports;const xe=Mr(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gee=I,Yee=Symbol.for("react.element"),Xee=Symbol.for("react.fragment"),Qee=Object.prototype.hasOwnProperty,Zee=Gee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jee={key:!0,ref:!0,__self:!0,__source:!0};function T$(t,e,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Qee.call(e,r)&&!Jee.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Yee,type:t,key:a,ref:s,props:i,_owner:Zee.current}}P5.Fragment=Xee;P5.jsx=T$;P5.jsxs=T$;w$.exports=P5;var c=w$.exports,Aj={},D$={exports:{}},yl={},I$={exports:{}},O$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ee){var le=q.length;q.push(ee);e:for(;0<le;){var se=le-1>>>1,$=q[se];if(0<i($,ee))q[se]=ee,q[le]=$,le=se;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var ee=q[0],le=q.pop();if(le!==ee){q[0]=le;e:for(var se=0,$=q.length,G=$>>>1;se<G;){var te=2*(se+1)-1,oe=q[te],ge=te+1,_e=q[ge];if(0>i(oe,le))ge<$&&0>i(_e,oe)?(q[se]=_e,q[ge]=le,se=ge):(q[se]=oe,q[te]=le,se=te);else if(ge<$&&0>i(_e,le))q[se]=_e,q[ge]=le,se=ge;else break e}}return ee}function i(q,ee){var le=q.sortIndex-ee.sortIndex;return le!==0?le:q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,f=null,p=3,h=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(q){for(var ee=n(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=q)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(u)}}function A(q){if(g=!1,S(q),!m)if(n(l)!==null)m=!0,Y(C);else{var ee=n(u);ee!==null&&J(A,ee.startTime-q)}}function C(q,ee){m=!1,g&&(g=!1,y(E),E=-1),h=!0;var le=p;try{for(S(ee),f=n(l);f!==null&&(!(f.expirationTime>ee)||q&&!D());){var se=f.callback;if(typeof se=="function"){f.callback=null,p=f.priorityLevel;var $=se(f.expirationTime<=ee);ee=t.unstable_now(),typeof $=="function"?f.callback=$:f===n(l)&&r(l),S(ee)}else r(l);f=n(l)}if(f!==null)var G=!0;else{var te=n(u);te!==null&&J(A,te.startTime-ee),G=!1}return G}finally{f=null,p=le,h=!1}}var T=!1,j=null,E=-1,k=5,O=-1;function D(){return!(t.unstable_now()-O<k)}function M(){if(j!==null){var q=t.unstable_now();O=q;var ee=!0;try{ee=j(!0,q)}finally{ee?L():(T=!1,j=null)}}else T=!1}var L;if(typeof b=="function")L=function(){b(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Q=V.port2;V.port1.onmessage=M,L=function(){Q.postMessage(null)}}else L=function(){v(M,0)};function Y(q){j=q,T||(T=!0,L())}function J(q,ee){E=v(function(){q(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,Y(C))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(q){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var le=p;p=ee;try{return q()}finally{p=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ee){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var le=p;p=q;try{return ee()}finally{p=le}},t.unstable_scheduleCallback=function(q,ee,le){var se=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?se+le:se):le=se,q){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=le+$,q={id:d++,callback:ee,priorityLevel:q,startTime:le,expirationTime:$,sortIndex:-1},le>se?(q.sortIndex=le,e(u,q),n(l)===null&&q===n(u)&&(g?(y(E),E=-1):g=!0,J(A,le-se))):(q.sortIndex=$,e(l,q),m||h||(m=!0,Y(C))),q},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(q){var ee=p;return function(){var le=p;p=ee;try{return q.apply(this,arguments)}finally{p=le}}}})(O$);I$.exports=O$;var ete=I$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tte=I,fl=ete;function Pt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M$=new Set,W0={};function lp(t,e){Wm(t,e),Wm(t+"Capture",e)}function Wm(t,e){for(W0[t]=e,t=0;t<e.length;t++)M$.add(e[t])}var Ju=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cj=Object.prototype.hasOwnProperty,nte=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,EI={},kI={};function rte(t){return Cj.call(kI,t)?!0:Cj.call(EI,t)?!1:nte.test(t)?kI[t]=!0:(EI[t]=!0,!1)}function ite(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ate(t,e,n,r){if(e===null||typeof e>"u"||ite(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function co(t,e,n,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var gs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gs[t]=new co(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gs[e]=new co(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gs[t]=new co(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gs[t]=new co(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gs[t]=new co(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gs[t]=new co(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gs[t]=new co(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gs[t]=new co(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gs[t]=new co(t,5,!1,t.toLowerCase(),null,!1,!1)});var wP=/[\-:]([a-z])/g;function SP(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wP,SP);gs[e]=new co(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wP,SP);gs[e]=new co(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wP,SP);gs[e]=new co(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gs[t]=new co(t,1,!1,t.toLowerCase(),null,!1,!1)});gs.xlinkHref=new co("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gs[t]=new co(t,1,!1,t.toLowerCase(),null,!0,!0)});function _P(t,e,n,r){var i=gs.hasOwnProperty(e)?gs[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ate(e,n,i,r)&&(n=null),r||i===null?rte(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hd=tte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yx=Symbol.for("react.element"),Jp=Symbol.for("react.portal"),em=Symbol.for("react.fragment"),AP=Symbol.for("react.strict_mode"),jj=Symbol.for("react.profiler"),R$=Symbol.for("react.provider"),L$=Symbol.for("react.context"),CP=Symbol.for("react.forward_ref"),Nj=Symbol.for("react.suspense"),Ej=Symbol.for("react.suspense_list"),jP=Symbol.for("react.memo"),Fd=Symbol.for("react.lazy"),F$=Symbol.for("react.offscreen"),PI=Symbol.iterator;function Nv(t){return t===null||typeof t!="object"?null:(t=PI&&t[PI]||t["@@iterator"],typeof t=="function"?t:null)}var Pi=Object.assign,K_;function Xv(t){if(K_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);K_=e&&e[1]||""}return`
`+K_+t}var G_=!1;function Y_(t,e){if(!t||G_)return"";G_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=o);break}}}finally{G_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xv(t):""}function ste(t){switch(t.tag){case 5:return Xv(t.type);case 16:return Xv("Lazy");case 13:return Xv("Suspense");case 19:return Xv("SuspenseList");case 0:case 2:case 15:return t=Y_(t.type,!1),t;case 11:return t=Y_(t.type.render,!1),t;case 1:return t=Y_(t.type,!0),t;default:return""}}function kj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case em:return"Fragment";case Jp:return"Portal";case jj:return"Profiler";case AP:return"StrictMode";case Nj:return"Suspense";case Ej:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case L$:return(t.displayName||"Context")+".Consumer";case R$:return(t._context.displayName||"Context")+".Provider";case CP:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jP:return e=t.displayName||null,e!==null?e:kj(t.type)||"Memo";case Fd:e=t._payload,t=t._init;try{return kj(t(e))}catch{}}return null}function ote(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kj(e);case 8:return e===AP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function z$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lte(t){var e=z$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bx(t){t._valueTracker||(t._valueTracker=lte(t))}function $$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=z$(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function d2(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pj(t,e){var n=e.checked;return Pi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function TI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function B$(t,e){e=e.checked,e!=null&&_P(t,"checked",e,!1)}function Tj(t,e){B$(t,e);var n=pf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dj(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dj(t,e.type,pf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function DI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dj(t,e,n){(e!=="number"||d2(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qv=Array.isArray;function Am(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pf(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ij(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Pt(91));return Pi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function II(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Pt(92));if(Qv(n)){if(1<n.length)throw Error(Pt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pf(n)}}function V$(t,e){var n=pf(e.value),r=pf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function OI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function U$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?U$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xx,H$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xx=xx||document.createElement("div"),xx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function q0(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var u0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cte=["Webkit","ms","Moz","O"];Object.keys(u0).forEach(function(t){cte.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),u0[e]=u0[t]})});function W$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||u0.hasOwnProperty(t)&&u0[t]?(""+e).trim():e+"px"}function q$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=W$(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ute=Pi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mj(t,e){if(e){if(ute[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Pt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Pt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Pt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Pt(62))}}function Rj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lj=null;function NP(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fj=null,Cm=null,jm=null;function MI(t){if(t=vb(t)){if(typeof Fj!="function")throw Error(Pt(280));var e=t.stateNode;e&&(e=M5(e),Fj(t.stateNode,t.type,e))}}function K$(t){Cm?jm?jm.push(t):jm=[t]:Cm=t}function G$(){if(Cm){var t=Cm,e=jm;if(jm=Cm=null,MI(t),e)for(t=0;t<e.length;t++)MI(e[t])}}function Y$(t,e){return t(e)}function X$(){}var X_=!1;function Q$(t,e,n){if(X_)return t(e,n);X_=!0;try{return Y$(t,e,n)}finally{X_=!1,(Cm!==null||jm!==null)&&(X$(),G$())}}function K0(t,e){var n=t.stateNode;if(n===null)return null;var r=M5(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Pt(231,e,typeof n));return n}var zj=!1;if(Ju)try{var Ev={};Object.defineProperty(Ev,"passive",{get:function(){zj=!0}}),window.addEventListener("test",Ev,Ev),window.removeEventListener("test",Ev,Ev)}catch{zj=!1}function dte(t,e,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var d0=!1,f2=null,h2=!1,$j=null,fte={onError:function(t){d0=!0,f2=t}};function hte(t,e,n,r,i,a,s,o,l){d0=!1,f2=null,dte.apply(fte,arguments)}function pte(t,e,n,r,i,a,s,o,l){if(hte.apply(this,arguments),d0){if(d0){var u=f2;d0=!1,f2=null}else throw Error(Pt(198));h2||(h2=!0,$j=u)}}function cp(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Z$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function RI(t){if(cp(t)!==t)throw Error(Pt(188))}function mte(t){var e=t.alternate;if(!e){if(e=cp(t),e===null)throw Error(Pt(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return RI(i),t;if(a===r)return RI(i),e;a=a.sibling}throw Error(Pt(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(Pt(189))}}if(n.alternate!==r)throw Error(Pt(190))}if(n.tag!==3)throw Error(Pt(188));return n.stateNode.current===n?t:e}function J$(t){return t=mte(t),t!==null?eB(t):null}function eB(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=eB(t);if(e!==null)return e;t=t.sibling}return null}var tB=fl.unstable_scheduleCallback,LI=fl.unstable_cancelCallback,gte=fl.unstable_shouldYield,vte=fl.unstable_requestPaint,ia=fl.unstable_now,yte=fl.unstable_getCurrentPriorityLevel,EP=fl.unstable_ImmediatePriority,nB=fl.unstable_UserBlockingPriority,p2=fl.unstable_NormalPriority,bte=fl.unstable_LowPriority,rB=fl.unstable_IdlePriority,T5=null,iu=null;function xte(t){if(iu&&typeof iu.onCommitFiberRoot=="function")try{iu.onCommitFiberRoot(T5,t,void 0,(t.current.flags&128)===128)}catch{}}var wc=Math.clz32?Math.clz32:_te,wte=Math.log,Ste=Math.LN2;function _te(t){return t>>>=0,t===0?32:31-(wte(t)/Ste|0)|0}var wx=64,Sx=4194304;function Zv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function m2(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=Zv(o):(a&=s,a!==0&&(r=Zv(a)))}else s=n&~i,s!==0?r=Zv(s):a!==0&&(r=Zv(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wc(e),i=1<<n,r|=t[n],e&=~i;return r}function Ate(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cte(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-wc(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=Ate(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}function Bj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iB(){var t=wx;return wx<<=1,!(wx&4194240)&&(wx=64),t}function Q_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mb(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wc(e),t[e]=n}function jte(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wc(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function kP(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wc(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Vr=0;function aB(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sB,PP,oB,lB,cB,Vj=!1,_x=[],ef=null,tf=null,nf=null,G0=new Map,Y0=new Map,Bd=[],Nte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function FI(t,e){switch(t){case"focusin":case"focusout":ef=null;break;case"dragenter":case"dragleave":tf=null;break;case"mouseover":case"mouseout":nf=null;break;case"pointerover":case"pointerout":G0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Y0.delete(e.pointerId)}}function kv(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=vb(e),e!==null&&PP(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ete(t,e,n,r,i){switch(e){case"focusin":return ef=kv(ef,t,e,n,r,i),!0;case"dragenter":return tf=kv(tf,t,e,n,r,i),!0;case"mouseover":return nf=kv(nf,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return G0.set(a,kv(G0.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Y0.set(a,kv(Y0.get(a)||null,t,e,n,r,i)),!0}return!1}function uB(t){var e=mh(t.target);if(e!==null){var n=cp(e);if(n!==null){if(e=n.tag,e===13){if(e=Z$(n),e!==null){t.blockedOn=e,cB(t.priority,function(){oB(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function P1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uj(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lj=r,n.target.dispatchEvent(r),Lj=null}else return e=vb(n),e!==null&&PP(e),t.blockedOn=n,!1;e.shift()}return!0}function zI(t,e,n){P1(t)&&n.delete(e)}function kte(){Vj=!1,ef!==null&&P1(ef)&&(ef=null),tf!==null&&P1(tf)&&(tf=null),nf!==null&&P1(nf)&&(nf=null),G0.forEach(zI),Y0.forEach(zI)}function Pv(t,e){t.blockedOn===e&&(t.blockedOn=null,Vj||(Vj=!0,fl.unstable_scheduleCallback(fl.unstable_NormalPriority,kte)))}function X0(t){function e(i){return Pv(i,t)}if(0<_x.length){Pv(_x[0],t);for(var n=1;n<_x.length;n++){var r=_x[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ef!==null&&Pv(ef,t),tf!==null&&Pv(tf,t),nf!==null&&Pv(nf,t),G0.forEach(e),Y0.forEach(e),n=0;n<Bd.length;n++)r=Bd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Bd.length&&(n=Bd[0],n.blockedOn===null);)uB(n),n.blockedOn===null&&Bd.shift()}var Nm=hd.ReactCurrentBatchConfig,g2=!0;function Pte(t,e,n,r){var i=Vr,a=Nm.transition;Nm.transition=null;try{Vr=1,TP(t,e,n,r)}finally{Vr=i,Nm.transition=a}}function Tte(t,e,n,r){var i=Vr,a=Nm.transition;Nm.transition=null;try{Vr=4,TP(t,e,n,r)}finally{Vr=i,Nm.transition=a}}function TP(t,e,n,r){if(g2){var i=Uj(t,e,n,r);if(i===null)oA(t,e,r,v2,n),FI(t,r);else if(Ete(i,t,e,n,r))r.stopPropagation();else if(FI(t,r),e&4&&-1<Nte.indexOf(t)){for(;i!==null;){var a=vb(i);if(a!==null&&sB(a),a=Uj(t,e,n,r),a===null&&oA(t,e,r,v2,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else oA(t,e,r,null,n)}}var v2=null;function Uj(t,e,n,r){if(v2=null,t=NP(r),t=mh(t),t!==null)if(e=cp(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Z$(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return v2=t,null}function dB(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yte()){case EP:return 1;case nB:return 4;case p2:case bte:return 16;case rB:return 536870912;default:return 16}default:return 16}}var Hd=null,DP=null,T1=null;function fB(){if(T1)return T1;var t,e=DP,n=e.length,r,i="value"in Hd?Hd.value:Hd.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return T1=i.slice(t,1<r?1-r:void 0)}function D1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ax(){return!0}function $I(){return!1}function bl(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ax:$I,this.isPropagationStopped=$I,this}return Pi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ax)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ax)},persist:function(){},isPersistent:Ax}),e}var Kg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},IP=bl(Kg),gb=Pi({},Kg,{view:0,detail:0}),Dte=bl(gb),Z_,J_,Tv,D5=Pi({},gb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OP,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tv&&(Tv&&t.type==="mousemove"?(Z_=t.screenX-Tv.screenX,J_=t.screenY-Tv.screenY):J_=Z_=0,Tv=t),Z_)},movementY:function(t){return"movementY"in t?t.movementY:J_}}),BI=bl(D5),Ite=Pi({},D5,{dataTransfer:0}),Ote=bl(Ite),Mte=Pi({},gb,{relatedTarget:0}),eA=bl(Mte),Rte=Pi({},Kg,{animationName:0,elapsedTime:0,pseudoElement:0}),Lte=bl(Rte),Fte=Pi({},Kg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zte=bl(Fte),$te=Pi({},Kg,{data:0}),VI=bl($te),Bte={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vte={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ute={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hte(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ute[t])?!!e[t]:!1}function OP(){return Hte}var Wte=Pi({},gb,{key:function(t){if(t.key){var e=Bte[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=D1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vte[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OP,charCode:function(t){return t.type==="keypress"?D1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?D1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qte=bl(Wte),Kte=Pi({},D5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UI=bl(Kte),Gte=Pi({},gb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OP}),Yte=bl(Gte),Xte=Pi({},Kg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qte=bl(Xte),Zte=Pi({},D5,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jte=bl(Zte),ene=[9,13,27,32],MP=Ju&&"CompositionEvent"in window,f0=null;Ju&&"documentMode"in document&&(f0=document.documentMode);var tne=Ju&&"TextEvent"in window&&!f0,hB=Ju&&(!MP||f0&&8<f0&&11>=f0),HI=" ",WI=!1;function pB(t,e){switch(t){case"keyup":return ene.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mB(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tm=!1;function nne(t,e){switch(t){case"compositionend":return mB(e);case"keypress":return e.which!==32?null:(WI=!0,HI);case"textInput":return t=e.data,t===HI&&WI?null:t;default:return null}}function rne(t,e){if(tm)return t==="compositionend"||!MP&&pB(t,e)?(t=fB(),T1=DP=Hd=null,tm=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hB&&e.locale!=="ko"?null:e.data;default:return null}}var ine={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ine[t.type]:e==="textarea"}function gB(t,e,n,r){K$(r),e=y2(e,"onChange"),0<e.length&&(n=new IP("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var h0=null,Q0=null;function ane(t){NB(t,0)}function I5(t){var e=im(t);if($$(e))return t}function sne(t,e){if(t==="change")return e}var vB=!1;if(Ju){var tA;if(Ju){var nA="oninput"in document;if(!nA){var KI=document.createElement("div");KI.setAttribute("oninput","return;"),nA=typeof KI.oninput=="function"}tA=nA}else tA=!1;vB=tA&&(!document.documentMode||9<document.documentMode)}function GI(){h0&&(h0.detachEvent("onpropertychange",yB),Q0=h0=null)}function yB(t){if(t.propertyName==="value"&&I5(Q0)){var e=[];gB(e,Q0,t,NP(t)),Q$(ane,e)}}function one(t,e,n){t==="focusin"?(GI(),h0=e,Q0=n,h0.attachEvent("onpropertychange",yB)):t==="focusout"&&GI()}function lne(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return I5(Q0)}function cne(t,e){if(t==="click")return I5(e)}function une(t,e){if(t==="input"||t==="change")return I5(e)}function dne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nc=typeof Object.is=="function"?Object.is:dne;function Z0(t,e){if(Nc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Cj.call(e,i)||!Nc(t[i],e[i]))return!1}return!0}function YI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function XI(t,e){var n=YI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=YI(n)}}function bB(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bB(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xB(){for(var t=window,e=d2();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=d2(t.document)}return e}function RP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fne(t){var e=xB(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bB(n.ownerDocument.documentElement,n)){if(r!==null&&RP(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=XI(n,a);var s=XI(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hne=Ju&&"documentMode"in document&&11>=document.documentMode,nm=null,Hj=null,p0=null,Wj=!1;function QI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wj||nm==null||nm!==d2(r)||(r=nm,"selectionStart"in r&&RP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),p0&&Z0(p0,r)||(p0=r,r=y2(Hj,"onSelect"),0<r.length&&(e=new IP("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nm)))}function Cx(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rm={animationend:Cx("Animation","AnimationEnd"),animationiteration:Cx("Animation","AnimationIteration"),animationstart:Cx("Animation","AnimationStart"),transitionend:Cx("Transition","TransitionEnd")},rA={},wB={};Ju&&(wB=document.createElement("div").style,"AnimationEvent"in window||(delete rm.animationend.animation,delete rm.animationiteration.animation,delete rm.animationstart.animation),"TransitionEvent"in window||delete rm.transitionend.transition);function O5(t){if(rA[t])return rA[t];if(!rm[t])return t;var e=rm[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wB)return rA[t]=e[n];return t}var SB=O5("animationend"),_B=O5("animationiteration"),AB=O5("animationstart"),CB=O5("transitionend"),jB=new Map,ZI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cf(t,e){jB.set(t,e),lp(e,[t])}for(var iA=0;iA<ZI.length;iA++){var aA=ZI[iA],pne=aA.toLowerCase(),mne=aA[0].toUpperCase()+aA.slice(1);Cf(pne,"on"+mne)}Cf(SB,"onAnimationEnd");Cf(_B,"onAnimationIteration");Cf(AB,"onAnimationStart");Cf("dblclick","onDoubleClick");Cf("focusin","onFocus");Cf("focusout","onBlur");Cf(CB,"onTransitionEnd");Wm("onMouseEnter",["mouseout","mouseover"]);Wm("onMouseLeave",["mouseout","mouseover"]);Wm("onPointerEnter",["pointerout","pointerover"]);Wm("onPointerLeave",["pointerout","pointerover"]);lp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lp("onBeforeInput",["compositionend","keypress","textInput","paste"]);lp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gne=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jv));function JI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pte(r,e,void 0,t),t.currentTarget=null}function NB(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;JI(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;JI(i,o,u),a=l}}}if(h2)throw t=$j,h2=!1,$j=null,t}function fi(t,e){var n=e[Xj];n===void 0&&(n=e[Xj]=new Set);var r=t+"__bubble";n.has(r)||(EB(e,t,2,!1),n.add(r))}function sA(t,e,n){var r=0;e&&(r|=4),EB(n,t,r,e)}var jx="_reactListening"+Math.random().toString(36).slice(2);function J0(t){if(!t[jx]){t[jx]=!0,M$.forEach(function(n){n!=="selectionchange"&&(gne.has(n)||sA(n,!1,t),sA(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jx]||(e[jx]=!0,sA("selectionchange",!1,e))}}function EB(t,e,n,r){switch(dB(e)){case 1:var i=Pte;break;case 4:i=Tte;break;default:i=TP}n=i.bind(null,e,n,t),i=void 0,!zj||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function oA(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=mh(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}Q$(function(){var u=a,d=NP(n),f=[];e:{var p=jB.get(t);if(p!==void 0){var h=IP,m=t;switch(t){case"keypress":if(D1(n)===0)break e;case"keydown":case"keyup":h=qte;break;case"focusin":m="focus",h=eA;break;case"focusout":m="blur",h=eA;break;case"beforeblur":case"afterblur":h=eA;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=BI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Ote;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Yte;break;case SB:case _B:case AB:h=Lte;break;case CB:h=Qte;break;case"scroll":h=Dte;break;case"wheel":h=Jte;break;case"copy":case"cut":case"paste":h=zte;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=UI}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?p!==null?p+"Capture":null:p;g=[];for(var b=u,S;b!==null;){S=b;var A=S.stateNode;if(S.tag===5&&A!==null&&(S=A,y!==null&&(A=K0(b,y),A!=null&&g.push(ey(b,A,S)))),v)break;b=b.return}0<g.length&&(p=new h(p,m,null,n,d),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&n!==Lj&&(m=n.relatedTarget||n.fromElement)&&(mh(m)||m[ed]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=u,m=m?mh(m):null,m!==null&&(v=cp(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(g=BI,A="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=UI,A="onPointerLeave",y="onPointerEnter",b="pointer"),v=h==null?p:im(h),S=m==null?p:im(m),p=new g(A,b+"leave",h,n,d),p.target=v,p.relatedTarget=S,A=null,mh(d)===u&&(g=new g(y,b+"enter",m,n,d),g.target=S,g.relatedTarget=v,A=g),v=A,h&&m)t:{for(g=h,y=m,b=0,S=g;S;S=Op(S))b++;for(S=0,A=y;A;A=Op(A))S++;for(;0<b-S;)g=Op(g),b--;for(;0<S-b;)y=Op(y),S--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=Op(g),y=Op(y)}g=null}else g=null;h!==null&&eO(f,p,h,g,!1),m!==null&&v!==null&&eO(f,v,m,g,!0)}}e:{if(p=u?im(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var C=sne;else if(qI(p))if(vB)C=une;else{C=lne;var T=one}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=cne);if(C&&(C=C(t,u))){gB(f,C,n,d);break e}T&&T(t,p,u),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Dj(p,"number",p.value)}switch(T=u?im(u):window,t){case"focusin":(qI(T)||T.contentEditable==="true")&&(nm=T,Hj=u,p0=null);break;case"focusout":p0=Hj=nm=null;break;case"mousedown":Wj=!0;break;case"contextmenu":case"mouseup":case"dragend":Wj=!1,QI(f,n,d);break;case"selectionchange":if(hne)break;case"keydown":case"keyup":QI(f,n,d)}var j;if(MP)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else tm?pB(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(hB&&n.locale!=="ko"&&(tm||E!=="onCompositionStart"?E==="onCompositionEnd"&&tm&&(j=fB()):(Hd=d,DP="value"in Hd?Hd.value:Hd.textContent,tm=!0)),T=y2(u,E),0<T.length&&(E=new VI(E,t,null,n,d),f.push({event:E,listeners:T}),j?E.data=j:(j=mB(n),j!==null&&(E.data=j)))),(j=tne?nne(t,n):rne(t,n))&&(u=y2(u,"onBeforeInput"),0<u.length&&(d=new VI("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=j))}NB(f,e)})}function ey(t,e,n){return{instance:t,listener:e,currentTarget:n}}function y2(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=K0(t,n),a!=null&&r.unshift(ey(t,a,i)),a=K0(t,e),a!=null&&r.push(ey(t,a,i))),t=t.return}return r}function Op(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eO(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=K0(n,a),l!=null&&s.unshift(ey(n,l,o))):i||(l=K0(n,a),l!=null&&s.push(ey(n,l,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var vne=/\r\n?/g,yne=/\u0000|\uFFFD/g;function tO(t){return(typeof t=="string"?t:""+t).replace(vne,`
`).replace(yne,"")}function Nx(t,e,n){if(e=tO(e),tO(t)!==e&&n)throw Error(Pt(425))}function b2(){}var qj=null,Kj=null;function Gj(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yj=typeof setTimeout=="function"?setTimeout:void 0,bne=typeof clearTimeout=="function"?clearTimeout:void 0,nO=typeof Promise=="function"?Promise:void 0,xne=typeof queueMicrotask=="function"?queueMicrotask:typeof nO<"u"?function(t){return nO.resolve(null).then(t).catch(wne)}:Yj;function wne(t){setTimeout(function(){throw t})}function lA(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),X0(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);X0(e)}function rf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rO(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gg=Math.random().toString(36).slice(2),Qc="__reactFiber$"+Gg,ty="__reactProps$"+Gg,ed="__reactContainer$"+Gg,Xj="__reactEvents$"+Gg,Sne="__reactListeners$"+Gg,_ne="__reactHandles$"+Gg;function mh(t){var e=t[Qc];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ed]||n[Qc]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rO(t);t!==null;){if(n=t[Qc])return n;t=rO(t)}return e}t=n,n=t.parentNode}return null}function vb(t){return t=t[Qc]||t[ed],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function im(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Pt(33))}function M5(t){return t[ty]||null}var Qj=[],am=-1;function jf(t){return{current:t}}function yi(t){0>am||(t.current=Qj[am],Qj[am]=null,am--)}function ii(t,e){am++,Qj[am]=t.current,t.current=e}var mf={},Ws=jf(mf),_o=jf(!1),$h=mf;function qm(t,e){var n=t.type.contextTypes;if(!n)return mf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ao(t){return t=t.childContextTypes,t!=null}function x2(){yi(_o),yi(Ws)}function iO(t,e,n){if(Ws.current!==mf)throw Error(Pt(168));ii(Ws,e),ii(_o,n)}function kB(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Pt(108,ote(t)||"Unknown",i));return Pi({},n,r)}function w2(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mf,$h=Ws.current,ii(Ws,t),ii(_o,_o.current),!0}function aO(t,e,n){var r=t.stateNode;if(!r)throw Error(Pt(169));n?(t=kB(t,e,$h),r.__reactInternalMemoizedMergedChildContext=t,yi(_o),yi(Ws),ii(Ws,t)):yi(_o),ii(_o,n)}var Fu=null,R5=!1,cA=!1;function PB(t){Fu===null?Fu=[t]:Fu.push(t)}function Ane(t){R5=!0,PB(t)}function Nf(){if(!cA&&Fu!==null){cA=!0;var t=0,e=Vr;try{var n=Fu;for(Vr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fu=null,R5=!1}catch(i){throw Fu!==null&&(Fu=Fu.slice(t+1)),tB(EP,Nf),i}finally{Vr=e,cA=!1}}return null}var sm=[],om=0,S2=null,_2=0,Ll=[],Fl=0,Bh=null,$u=1,Bu="";function eh(t,e){sm[om++]=_2,sm[om++]=S2,S2=t,_2=e}function TB(t,e,n){Ll[Fl++]=$u,Ll[Fl++]=Bu,Ll[Fl++]=Bh,Bh=t;var r=$u;t=Bu;var i=32-wc(r)-1;r&=~(1<<i),n+=1;var a=32-wc(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,$u=1<<32-wc(e)+i|n<<i|r,Bu=a+t}else $u=1<<a|n<<i|r,Bu=t}function LP(t){t.return!==null&&(eh(t,1),TB(t,1,0))}function FP(t){for(;t===S2;)S2=sm[--om],sm[om]=null,_2=sm[--om],sm[om]=null;for(;t===Bh;)Bh=Ll[--Fl],Ll[Fl]=null,Bu=Ll[--Fl],Ll[Fl]=null,$u=Ll[--Fl],Ll[Fl]=null}var al=null,nl=null,wi=!1,bc=null;function DB(t,e){var n=$l(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sO(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,al=t,nl=rf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,al=t,nl=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bh!==null?{id:$u,overflow:Bu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$l(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,al=t,nl=null,!0):!1;default:return!1}}function Zj(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jj(t){if(wi){var e=nl;if(e){var n=e;if(!sO(t,e)){if(Zj(t))throw Error(Pt(418));e=rf(n.nextSibling);var r=al;e&&sO(t,e)?DB(r,n):(t.flags=t.flags&-4097|2,wi=!1,al=t)}}else{if(Zj(t))throw Error(Pt(418));t.flags=t.flags&-4097|2,wi=!1,al=t}}}function oO(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;al=t}function Ex(t){if(t!==al)return!1;if(!wi)return oO(t),wi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gj(t.type,t.memoizedProps)),e&&(e=nl)){if(Zj(t))throw IB(),Error(Pt(418));for(;e;)DB(t,e),e=rf(e.nextSibling)}if(oO(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Pt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nl=rf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nl=null}}else nl=al?rf(t.stateNode.nextSibling):null;return!0}function IB(){for(var t=nl;t;)t=rf(t.nextSibling)}function Km(){nl=al=null,wi=!1}function zP(t){bc===null?bc=[t]:bc.push(t)}var Cne=hd.ReactCurrentBatchConfig;function Dv(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Pt(309));var r=n.stateNode}if(!r)throw Error(Pt(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(Pt(284));if(!n._owner)throw Error(Pt(290,t))}return t}function kx(t,e){throw t=Object.prototype.toString.call(e),Error(Pt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lO(t){var e=t._init;return e(t._payload)}function OB(t){function e(y,b){if(t){var S=y.deletions;S===null?(y.deletions=[b],y.flags|=16):S.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=lf(y,b),y.index=0,y.sibling=null,y}function a(y,b,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<b?(y.flags|=2,b):S):(y.flags|=2,b)):(y.flags|=1048576,b)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,b,S,A){return b===null||b.tag!==6?(b=gA(S,y.mode,A),b.return=y,b):(b=i(b,S),b.return=y,b)}function l(y,b,S,A){var C=S.type;return C===em?d(y,b,S.props.children,A,S.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fd&&lO(C)===b.type)?(A=i(b,S.props),A.ref=Dv(y,b,S),A.return=y,A):(A=z1(S.type,S.key,S.props,null,y.mode,A),A.ref=Dv(y,b,S),A.return=y,A)}function u(y,b,S,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=vA(S,y.mode,A),b.return=y,b):(b=i(b,S.children||[]),b.return=y,b)}function d(y,b,S,A,C){return b===null||b.tag!==7?(b=Eh(S,y.mode,A,C),b.return=y,b):(b=i(b,S),b.return=y,b)}function f(y,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=gA(""+b,y.mode,S),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case yx:return S=z1(b.type,b.key,b.props,null,y.mode,S),S.ref=Dv(y,null,b),S.return=y,S;case Jp:return b=vA(b,y.mode,S),b.return=y,b;case Fd:var A=b._init;return f(y,A(b._payload),S)}if(Qv(b)||Nv(b))return b=Eh(b,y.mode,S,null),b.return=y,b;kx(y,b)}return null}function p(y,b,S,A){var C=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:o(y,b,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case yx:return S.key===C?l(y,b,S,A):null;case Jp:return S.key===C?u(y,b,S,A):null;case Fd:return C=S._init,p(y,b,C(S._payload),A)}if(Qv(S)||Nv(S))return C!==null?null:d(y,b,S,A,null);kx(y,S)}return null}function h(y,b,S,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(S)||null,o(b,y,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case yx:return y=y.get(A.key===null?S:A.key)||null,l(b,y,A,C);case Jp:return y=y.get(A.key===null?S:A.key)||null,u(b,y,A,C);case Fd:var T=A._init;return h(y,b,S,T(A._payload),C)}if(Qv(A)||Nv(A))return y=y.get(S)||null,d(b,y,A,C,null);kx(b,A)}return null}function m(y,b,S,A){for(var C=null,T=null,j=b,E=b=0,k=null;j!==null&&E<S.length;E++){j.index>E?(k=j,j=null):k=j.sibling;var O=p(y,j,S[E],A);if(O===null){j===null&&(j=k);break}t&&j&&O.alternate===null&&e(y,j),b=a(O,b,E),T===null?C=O:T.sibling=O,T=O,j=k}if(E===S.length)return n(y,j),wi&&eh(y,E),C;if(j===null){for(;E<S.length;E++)j=f(y,S[E],A),j!==null&&(b=a(j,b,E),T===null?C=j:T.sibling=j,T=j);return wi&&eh(y,E),C}for(j=r(y,j);E<S.length;E++)k=h(j,y,E,S[E],A),k!==null&&(t&&k.alternate!==null&&j.delete(k.key===null?E:k.key),b=a(k,b,E),T===null?C=k:T.sibling=k,T=k);return t&&j.forEach(function(D){return e(y,D)}),wi&&eh(y,E),C}function g(y,b,S,A){var C=Nv(S);if(typeof C!="function")throw Error(Pt(150));if(S=C.call(S),S==null)throw Error(Pt(151));for(var T=C=null,j=b,E=b=0,k=null,O=S.next();j!==null&&!O.done;E++,O=S.next()){j.index>E?(k=j,j=null):k=j.sibling;var D=p(y,j,O.value,A);if(D===null){j===null&&(j=k);break}t&&j&&D.alternate===null&&e(y,j),b=a(D,b,E),T===null?C=D:T.sibling=D,T=D,j=k}if(O.done)return n(y,j),wi&&eh(y,E),C;if(j===null){for(;!O.done;E++,O=S.next())O=f(y,O.value,A),O!==null&&(b=a(O,b,E),T===null?C=O:T.sibling=O,T=O);return wi&&eh(y,E),C}for(j=r(y,j);!O.done;E++,O=S.next())O=h(j,y,E,O.value,A),O!==null&&(t&&O.alternate!==null&&j.delete(O.key===null?E:O.key),b=a(O,b,E),T===null?C=O:T.sibling=O,T=O);return t&&j.forEach(function(M){return e(y,M)}),wi&&eh(y,E),C}function v(y,b,S,A){if(typeof S=="object"&&S!==null&&S.type===em&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case yx:e:{for(var C=S.key,T=b;T!==null;){if(T.key===C){if(C=S.type,C===em){if(T.tag===7){n(y,T.sibling),b=i(T,S.props.children),b.return=y,y=b;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fd&&lO(C)===T.type){n(y,T.sibling),b=i(T,S.props),b.ref=Dv(y,T,S),b.return=y,y=b;break e}n(y,T);break}else e(y,T);T=T.sibling}S.type===em?(b=Eh(S.props.children,y.mode,A,S.key),b.return=y,y=b):(A=z1(S.type,S.key,S.props,null,y.mode,A),A.ref=Dv(y,b,S),A.return=y,y=A)}return s(y);case Jp:e:{for(T=S.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){n(y,b.sibling),b=i(b,S.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=vA(S,y.mode,A),b.return=y,y=b}return s(y);case Fd:return T=S._init,v(y,b,T(S._payload),A)}if(Qv(S))return m(y,b,S,A);if(Nv(S))return g(y,b,S,A);kx(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(n(y,b.sibling),b=i(b,S),b.return=y,y=b):(n(y,b),b=gA(S,y.mode,A),b.return=y,y=b),s(y)):n(y,b)}return v}var Gm=OB(!0),MB=OB(!1),A2=jf(null),C2=null,lm=null,$P=null;function BP(){$P=lm=C2=null}function VP(t){var e=A2.current;yi(A2),t._currentValue=e}function eN(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Em(t,e){C2=t,$P=lm=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bo=!0),t.firstContext=null)}function Ul(t){var e=t._currentValue;if($P!==t)if(t={context:t,memoizedValue:e,next:null},lm===null){if(C2===null)throw Error(Pt(308));lm=t,C2.dependencies={lanes:0,firstContext:t}}else lm=lm.next=t;return e}var gh=null;function UP(t){gh===null?gh=[t]:gh.push(t)}function RB(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,UP(e)):(n.next=i.next,i.next=n),e.interleaved=n,td(t,r)}function td(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zd=!1;function HP(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LB(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function af(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Sr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,td(t,n)}return i=r.interleaved,i===null?(e.next=e,UP(r)):(e.next=i.next,i.next=e),r.interleaved=e,td(t,n)}function I1(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kP(t,n)}}function cO(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function j2(t,e,n,r){var i=t.updateQueue;zd=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,d=u=l=null,o=a;do{var p=o.lane,h=o.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,g=o;switch(p=e,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(h,f,p);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,p=typeof m=="function"?m.call(h,f,p):m,p==null)break e;f=Pi({},f,p);break e;case 2:zd=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=h,l=f):d=d.next=h,s|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Uh|=s,t.lanes=s,t.memoizedState=f}}function uO(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Pt(191,i));i.call(r)}}}var yb={},au=jf(yb),ny=jf(yb),ry=jf(yb);function vh(t){if(t===yb)throw Error(Pt(174));return t}function WP(t,e){switch(ii(ry,e),ii(ny,t),ii(au,yb),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Oj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Oj(e,t)}yi(au),ii(au,e)}function Ym(){yi(au),yi(ny),yi(ry)}function FB(t){vh(ry.current);var e=vh(au.current),n=Oj(e,t.type);e!==n&&(ii(ny,t),ii(au,n))}function qP(t){ny.current===t&&(yi(au),yi(ny))}var Ei=jf(0);function N2(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uA=[];function KP(){for(var t=0;t<uA.length;t++)uA[t]._workInProgressVersionPrimary=null;uA.length=0}var O1=hd.ReactCurrentDispatcher,dA=hd.ReactCurrentBatchConfig,Vh=0,ki=null,Ra=null,qa=null,E2=!1,m0=!1,iy=0,jne=0;function ks(){throw Error(Pt(321))}function GP(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nc(t[n],e[n]))return!1;return!0}function YP(t,e,n,r,i,a){if(Vh=a,ki=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,O1.current=t===null||t.memoizedState===null?Pne:Tne,t=n(r,i),m0){a=0;do{if(m0=!1,iy=0,25<=a)throw Error(Pt(301));a+=1,qa=Ra=null,e.updateQueue=null,O1.current=Dne,t=n(r,i)}while(m0)}if(O1.current=k2,e=Ra!==null&&Ra.next!==null,Vh=0,qa=Ra=ki=null,E2=!1,e)throw Error(Pt(300));return t}function XP(){var t=iy!==0;return iy=0,t}function Yc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qa===null?ki.memoizedState=qa=t:qa=qa.next=t,qa}function Hl(){if(Ra===null){var t=ki.alternate;t=t!==null?t.memoizedState:null}else t=Ra.next;var e=qa===null?ki.memoizedState:qa.next;if(e!==null)qa=e,Ra=t;else{if(t===null)throw Error(Pt(310));Ra=t,t={memoizedState:Ra.memoizedState,baseState:Ra.baseState,baseQueue:Ra.baseQueue,queue:Ra.queue,next:null},qa===null?ki.memoizedState=qa=t:qa=qa.next=t}return qa}function ay(t,e){return typeof e=="function"?e(t):e}function fA(t){var e=Hl(),n=e.queue;if(n===null)throw Error(Pt(311));n.lastRenderedReducer=t;var r=Ra,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var d=u.lane;if((Vh&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,s=r):l=l.next=f,ki.lanes|=d,Uh|=d}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,Nc(r,e.memoizedState)||(bo=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,ki.lanes|=a,Uh|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hA(t){var e=Hl(),n=e.queue;if(n===null)throw Error(Pt(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);Nc(a,e.memoizedState)||(bo=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function zB(){}function $B(t,e){var n=ki,r=Hl(),i=e(),a=!Nc(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,QP(UB.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||qa!==null&&qa.memoizedState.tag&1){if(n.flags|=2048,sy(9,VB.bind(null,n,r,i,e),void 0,null),Xa===null)throw Error(Pt(349));Vh&30||BB(n,e,i)}return i}function BB(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ki.updateQueue,e===null?(e={lastEffect:null,stores:null},ki.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function VB(t,e,n,r){e.value=n,e.getSnapshot=r,HB(e)&&WB(t)}function UB(t,e,n){return n(function(){HB(e)&&WB(t)})}function HB(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nc(t,n)}catch{return!0}}function WB(t){var e=td(t,1);e!==null&&Sc(e,t,1,-1)}function dO(t){var e=Yc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ay,lastRenderedState:t},e.queue=t,t=t.dispatch=kne.bind(null,ki,t),[e.memoizedState,t]}function sy(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ki.updateQueue,e===null?(e={lastEffect:null,stores:null},ki.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qB(){return Hl().memoizedState}function M1(t,e,n,r){var i=Yc();ki.flags|=t,i.memoizedState=sy(1|e,n,void 0,r===void 0?null:r)}function L5(t,e,n,r){var i=Hl();r=r===void 0?null:r;var a=void 0;if(Ra!==null){var s=Ra.memoizedState;if(a=s.destroy,r!==null&&GP(r,s.deps)){i.memoizedState=sy(e,n,a,r);return}}ki.flags|=t,i.memoizedState=sy(1|e,n,a,r)}function fO(t,e){return M1(8390656,8,t,e)}function QP(t,e){return L5(2048,8,t,e)}function KB(t,e){return L5(4,2,t,e)}function GB(t,e){return L5(4,4,t,e)}function YB(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function XB(t,e,n){return n=n!=null?n.concat([t]):null,L5(4,4,YB.bind(null,e,t),n)}function ZP(){}function QB(t,e){var n=Hl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&GP(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ZB(t,e){var n=Hl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&GP(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function JB(t,e,n){return Vh&21?(Nc(n,e)||(n=iB(),ki.lanes|=n,Uh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bo=!0),t.memoizedState=n)}function Nne(t,e){var n=Vr;Vr=n!==0&&4>n?n:4,t(!0);var r=dA.transition;dA.transition={};try{t(!1),e()}finally{Vr=n,dA.transition=r}}function eV(){return Hl().memoizedState}function Ene(t,e,n){var r=of(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tV(t))nV(e,n);else if(n=RB(t,e,n,r),n!==null){var i=so();Sc(n,t,r,i),rV(n,e,r)}}function kne(t,e,n){var r=of(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tV(t))nV(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Nc(o,s)){var l=e.interleaved;l===null?(i.next=i,UP(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=RB(t,e,i,r),n!==null&&(i=so(),Sc(n,t,r,i),rV(n,e,r))}}function tV(t){var e=t.alternate;return t===ki||e!==null&&e===ki}function nV(t,e){m0=E2=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rV(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kP(t,n)}}var k2={readContext:Ul,useCallback:ks,useContext:ks,useEffect:ks,useImperativeHandle:ks,useInsertionEffect:ks,useLayoutEffect:ks,useMemo:ks,useReducer:ks,useRef:ks,useState:ks,useDebugValue:ks,useDeferredValue:ks,useTransition:ks,useMutableSource:ks,useSyncExternalStore:ks,useId:ks,unstable_isNewReconciler:!1},Pne={readContext:Ul,useCallback:function(t,e){return Yc().memoizedState=[t,e===void 0?null:e],t},useContext:Ul,useEffect:fO,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,M1(4194308,4,YB.bind(null,e,t),n)},useLayoutEffect:function(t,e){return M1(4194308,4,t,e)},useInsertionEffect:function(t,e){return M1(4,2,t,e)},useMemo:function(t,e){var n=Yc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ene.bind(null,ki,t),[r.memoizedState,t]},useRef:function(t){var e=Yc();return t={current:t},e.memoizedState=t},useState:dO,useDebugValue:ZP,useDeferredValue:function(t){return Yc().memoizedState=t},useTransition:function(){var t=dO(!1),e=t[0];return t=Nne.bind(null,t[1]),Yc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ki,i=Yc();if(wi){if(n===void 0)throw Error(Pt(407));n=n()}else{if(n=e(),Xa===null)throw Error(Pt(349));Vh&30||BB(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,fO(UB.bind(null,r,a,t),[t]),r.flags|=2048,sy(9,VB.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Yc(),e=Xa.identifierPrefix;if(wi){var n=Bu,r=$u;n=(r&~(1<<32-wc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=iy++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jne++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Tne={readContext:Ul,useCallback:QB,useContext:Ul,useEffect:QP,useImperativeHandle:XB,useInsertionEffect:KB,useLayoutEffect:GB,useMemo:ZB,useReducer:fA,useRef:qB,useState:function(){return fA(ay)},useDebugValue:ZP,useDeferredValue:function(t){var e=Hl();return JB(e,Ra.memoizedState,t)},useTransition:function(){var t=fA(ay)[0],e=Hl().memoizedState;return[t,e]},useMutableSource:zB,useSyncExternalStore:$B,useId:eV,unstable_isNewReconciler:!1},Dne={readContext:Ul,useCallback:QB,useContext:Ul,useEffect:QP,useImperativeHandle:XB,useInsertionEffect:KB,useLayoutEffect:GB,useMemo:ZB,useReducer:hA,useRef:qB,useState:function(){return hA(ay)},useDebugValue:ZP,useDeferredValue:function(t){var e=Hl();return Ra===null?e.memoizedState=t:JB(e,Ra.memoizedState,t)},useTransition:function(){var t=hA(ay)[0],e=Hl().memoizedState;return[t,e]},useMutableSource:zB,useSyncExternalStore:$B,useId:eV,unstable_isNewReconciler:!1};function mc(t,e){if(t&&t.defaultProps){e=Pi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tN(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var F5={isMounted:function(t){return(t=t._reactInternals)?cp(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=so(),i=of(t),a=Gu(r,i);a.payload=e,n!=null&&(a.callback=n),e=af(t,a,i),e!==null&&(Sc(e,t,i,r),I1(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=so(),i=of(t),a=Gu(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=af(t,a,i),e!==null&&(Sc(e,t,i,r),I1(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=so(),r=of(t),i=Gu(n,r);i.tag=2,e!=null&&(i.callback=e),e=af(t,i,r),e!==null&&(Sc(e,t,r,n),I1(e,t,r))}};function hO(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!Z0(n,r)||!Z0(i,a):!0}function iV(t,e,n){var r=!1,i=mf,a=e.contextType;return typeof a=="object"&&a!==null?a=Ul(a):(i=Ao(e)?$h:Ws.current,r=e.contextTypes,a=(r=r!=null)?qm(t,i):mf),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=F5,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function pO(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&F5.enqueueReplaceState(e,e.state,null)}function nN(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},HP(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Ul(a):(a=Ao(e)?$h:Ws.current,i.context=qm(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(tN(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&F5.enqueueReplaceState(i,i.state,null),j2(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Xm(t,e){try{var n="",r=e;do n+=ste(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function pA(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rN(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ine=typeof WeakMap=="function"?WeakMap:Map;function aV(t,e,n){n=Gu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){T2||(T2=!0,hN=r),rN(t,e)},n}function sV(t,e,n){n=Gu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){rN(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){rN(t,e),typeof r!="function"&&(sf===null?sf=new Set([this]):sf.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function mO(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ine;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Kne.bind(null,t,e,n),e.then(t,t))}function gO(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vO(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gu(-1,1),e.tag=2,af(n,e,1))),n.lanes|=1),t)}var One=hd.ReactCurrentOwner,bo=!1;function to(t,e,n,r){e.child=t===null?MB(e,null,n,r):Gm(e,t.child,n,r)}function yO(t,e,n,r,i){n=n.render;var a=e.ref;return Em(e,i),r=YP(t,e,n,r,a,i),n=XP(),t!==null&&!bo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nd(t,e,i)):(wi&&n&&LP(e),e.flags|=1,to(t,e,r,i),e.child)}function bO(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!s4(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,oV(t,e,a,r,i)):(t=z1(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Z0,n(s,r)&&t.ref===e.ref)return nd(t,e,i)}return e.flags|=1,t=lf(a,r),t.ref=e.ref,t.return=e,e.child=t}function oV(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Z0(a,r)&&t.ref===e.ref)if(bo=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(bo=!0);else return e.lanes=t.lanes,nd(t,e,i)}return iN(t,e,n,r,i)}function lV(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ii(um,Jo),Jo|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ii(um,Jo),Jo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ii(um,Jo),Jo|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,ii(um,Jo),Jo|=r;return to(t,e,i,n),e.child}function cV(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function iN(t,e,n,r,i){var a=Ao(n)?$h:Ws.current;return a=qm(e,a),Em(e,i),n=YP(t,e,n,r,a,i),r=XP(),t!==null&&!bo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nd(t,e,i)):(wi&&r&&LP(e),e.flags|=1,to(t,e,n,i),e.child)}function xO(t,e,n,r,i){if(Ao(n)){var a=!0;w2(e)}else a=!1;if(Em(e,i),e.stateNode===null)R1(t,e),iV(e,n,r),nN(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ul(u):(u=Ao(n)?$h:Ws.current,u=qm(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&pO(e,s,r,u),zd=!1;var p=e.memoizedState;s.state=p,j2(e,r,s,i),l=e.memoizedState,o!==r||p!==l||_o.current||zd?(typeof d=="function"&&(tN(e,n,d,r),l=e.memoizedState),(o=zd||hO(e,n,o,r,p,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,LB(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:mc(e.type,o),s.props=u,f=e.pendingProps,p=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ul(l):(l=Ao(n)?$h:Ws.current,l=qm(e,l));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||p!==l)&&pO(e,s,r,l),zd=!1,p=e.memoizedState,s.state=p,j2(e,r,s,i);var m=e.memoizedState;o!==f||p!==m||_o.current||zd?(typeof h=="function"&&(tN(e,n,h,r),m=e.memoizedState),(u=zd||hO(e,n,u,r,p,m,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return aN(t,e,n,r,a,i)}function aN(t,e,n,r,i,a){cV(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&aO(e,n,!1),nd(t,e,a);r=e.stateNode,One.current=e;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Gm(e,t.child,null,a),e.child=Gm(e,null,o,a)):to(t,e,o,a),e.memoizedState=r.state,i&&aO(e,n,!0),e.child}function uV(t){var e=t.stateNode;e.pendingContext?iO(t,e.pendingContext,e.pendingContext!==e.context):e.context&&iO(t,e.context,!1),WP(t,e.containerInfo)}function wO(t,e,n,r,i){return Km(),zP(i),e.flags|=256,to(t,e,n,r),e.child}var sN={dehydrated:null,treeContext:null,retryLane:0};function oN(t){return{baseLanes:t,cachePool:null,transitions:null}}function dV(t,e,n){var r=e.pendingProps,i=Ei.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ii(Ei,i&1),t===null)return Jj(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,a?(r=e.mode,a=e.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=B5(s,r,0,null),t=Eh(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=oN(n),e.memoizedState=sN,t):JP(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Mne(t,e,s,r,o,i,n);if(a){a=r.fallback,s=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=lf(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=lf(o,a):(a=Eh(a,s,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,s=t.child.memoizedState,s=s===null?oN(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~n,e.memoizedState=sN,r}return a=t.child,t=a.sibling,r=lf(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function JP(t,e){return e=B5({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Px(t,e,n,r){return r!==null&&zP(r),Gm(e,t.child,null,n),t=JP(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mne(t,e,n,r,i,a,s){if(n)return e.flags&256?(e.flags&=-257,r=pA(Error(Pt(422))),Px(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=B5({mode:"visible",children:r.children},i,0,null),a=Eh(a,i,s,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Gm(e,t.child,null,s),e.child.memoizedState=oN(s),e.memoizedState=sN,a);if(!(e.mode&1))return Px(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(Pt(419)),r=pA(a,r,void 0),Px(t,e,s,r)}if(o=(s&t.childLanes)!==0,bo||o){if(r=Xa,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,td(t,i),Sc(r,t,i,-1))}return a4(),r=pA(Error(Pt(421))),Px(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Gne.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,nl=rf(i.nextSibling),al=e,wi=!0,bc=null,t!==null&&(Ll[Fl++]=$u,Ll[Fl++]=Bu,Ll[Fl++]=Bh,$u=t.id,Bu=t.overflow,Bh=e),e=JP(e,r.children),e.flags|=4096,e)}function SO(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),eN(t.return,e,n)}function mA(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function fV(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(to(t,e,r.children,n),r=Ei.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&SO(t,n,e);else if(t.tag===19)SO(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ii(Ei,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&N2(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),mA(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&N2(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}mA(e,!0,n,null,a);break;case"together":mA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function R1(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nd(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Uh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Pt(153));if(e.child!==null){for(t=e.child,n=lf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=lf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Rne(t,e,n){switch(e.tag){case 3:uV(e),Km();break;case 5:FB(e);break;case 1:Ao(e.type)&&w2(e);break;case 4:WP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ii(A2,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ii(Ei,Ei.current&1),e.flags|=128,null):n&e.child.childLanes?dV(t,e,n):(ii(Ei,Ei.current&1),t=nd(t,e,n),t!==null?t.sibling:null);ii(Ei,Ei.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fV(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ii(Ei,Ei.current),r)break;return null;case 22:case 23:return e.lanes=0,lV(t,e,n)}return nd(t,e,n)}var hV,lN,pV,mV;hV=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lN=function(){};pV=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vh(au.current);var a=null;switch(n){case"input":i=Pj(t,i),r=Pj(t,r),a=[];break;case"select":i=Pi({},i,{value:void 0}),r=Pi({},r,{value:void 0}),a=[];break;case"textarea":i=Ij(t,i),r=Ij(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=b2)}Mj(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(W0.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(W0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&fi("scroll",t),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};mV=function(t,e,n,r){n!==r&&(e.flags|=4)};function Iv(t,e){if(!wi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ps(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Lne(t,e,n){var r=e.pendingProps;switch(FP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ps(e),null;case 1:return Ao(e.type)&&x2(),Ps(e),null;case 3:return r=e.stateNode,Ym(),yi(_o),yi(Ws),KP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ex(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bc!==null&&(gN(bc),bc=null))),lN(t,e),Ps(e),null;case 5:qP(e);var i=vh(ry.current);if(n=e.type,t!==null&&e.stateNode!=null)pV(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Pt(166));return Ps(e),null}if(t=vh(au.current),Ex(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Qc]=e,r[ty]=a,t=(e.mode&1)!==0,n){case"dialog":fi("cancel",r),fi("close",r);break;case"iframe":case"object":case"embed":fi("load",r);break;case"video":case"audio":for(i=0;i<Jv.length;i++)fi(Jv[i],r);break;case"source":fi("error",r);break;case"img":case"image":case"link":fi("error",r),fi("load",r);break;case"details":fi("toggle",r);break;case"input":TI(r,a),fi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},fi("invalid",r);break;case"textarea":II(r,a),fi("invalid",r)}Mj(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Nx(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Nx(r.textContent,o,t),i=["children",""+o]):W0.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&fi("scroll",r)}switch(n){case"input":bx(r),DI(r,a,!0);break;case"textarea":bx(r),OI(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=b2)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=U$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Qc]=e,t[ty]=r,hV(t,e,!1,!1),e.stateNode=t;e:{switch(s=Rj(n,r),n){case"dialog":fi("cancel",t),fi("close",t),i=r;break;case"iframe":case"object":case"embed":fi("load",t),i=r;break;case"video":case"audio":for(i=0;i<Jv.length;i++)fi(Jv[i],t);i=r;break;case"source":fi("error",t),i=r;break;case"img":case"image":case"link":fi("error",t),fi("load",t),i=r;break;case"details":fi("toggle",t),i=r;break;case"input":TI(t,r),i=Pj(t,r),fi("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pi({},r,{value:void 0}),fi("invalid",t);break;case"textarea":II(t,r),i=Ij(t,r),fi("invalid",t);break;default:i=r}Mj(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?q$(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&H$(t,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&q0(t,l):typeof l=="number"&&q0(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(W0.hasOwnProperty(a)?l!=null&&a==="onScroll"&&fi("scroll",t):l!=null&&_P(t,a,l,s))}switch(n){case"input":bx(t),DI(t,r,!1);break;case"textarea":bx(t),OI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pf(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Am(t,!!r.multiple,a,!1):r.defaultValue!=null&&Am(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=b2)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ps(e),null;case 6:if(t&&e.stateNode!=null)mV(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Pt(166));if(n=vh(ry.current),vh(au.current),Ex(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qc]=e,(a=r.nodeValue!==n)&&(t=al,t!==null))switch(t.tag){case 3:Nx(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nx(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qc]=e,e.stateNode=r}return Ps(e),null;case 13:if(yi(Ei),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wi&&nl!==null&&e.mode&1&&!(e.flags&128))IB(),Km(),e.flags|=98560,a=!1;else if(a=Ex(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Pt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Pt(317));a[Qc]=e}else Km(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ps(e),a=!1}else bc!==null&&(gN(bc),bc=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ei.current&1?Fa===0&&(Fa=3):a4())),e.updateQueue!==null&&(e.flags|=4),Ps(e),null);case 4:return Ym(),lN(t,e),t===null&&J0(e.stateNode.containerInfo),Ps(e),null;case 10:return VP(e.type._context),Ps(e),null;case 17:return Ao(e.type)&&x2(),Ps(e),null;case 19:if(yi(Ei),a=e.memoizedState,a===null)return Ps(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)Iv(a,!1);else{if(Fa!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=N2(t),s!==null){for(e.flags|=128,Iv(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ii(Ei,Ei.current&1|2),e.child}t=t.sibling}a.tail!==null&&ia()>Qm&&(e.flags|=128,r=!0,Iv(a,!1),e.lanes=4194304)}else{if(!r)if(t=N2(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Iv(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!wi)return Ps(e),null}else 2*ia()-a.renderingStartTime>Qm&&n!==1073741824&&(e.flags|=128,r=!0,Iv(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(n=a.last,n!==null?n.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ia(),e.sibling=null,n=Ei.current,ii(Ei,r?n&1|2:n&1),e):(Ps(e),null);case 22:case 23:return i4(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Jo&1073741824&&(Ps(e),e.subtreeFlags&6&&(e.flags|=8192)):Ps(e),null;case 24:return null;case 25:return null}throw Error(Pt(156,e.tag))}function Fne(t,e){switch(FP(e),e.tag){case 1:return Ao(e.type)&&x2(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ym(),yi(_o),yi(Ws),KP(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qP(e),null;case 13:if(yi(Ei),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Pt(340));Km()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yi(Ei),null;case 4:return Ym(),null;case 10:return VP(e.type._context),null;case 22:case 23:return i4(),null;case 24:return null;default:return null}}var Tx=!1,$s=!1,zne=typeof WeakSet=="function"?WeakSet:Set,tn=null;function cm(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Bi(t,e,r)}else n.current=null}function cN(t,e,n){try{n()}catch(r){Bi(t,e,r)}}var _O=!1;function $ne(t,e){if(qj=g2,t=xB(),RP(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,u=0,d=0,f=t,p=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(o=s+i),f!==a||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===t)break t;if(p===n&&++u===i&&(o=s),p===a&&++d===r&&(l=s),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kj={focusedElem:t,selectionRange:n},g2=!1,tn=e;tn!==null;)if(e=tn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,tn=t;else for(;tn!==null;){e=tn;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:mc(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pt(163))}}catch(A){Bi(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,tn=t;break}tn=e.return}return m=_O,_O=!1,m}function g0(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&cN(e,n,a)}i=i.next}while(i!==r)}}function z5(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function uN(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gV(t){var e=t.alternate;e!==null&&(t.alternate=null,gV(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qc],delete e[ty],delete e[Xj],delete e[Sne],delete e[_ne])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vV(t){return t.tag===5||t.tag===3||t.tag===4}function AO(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vV(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=b2));else if(r!==4&&(t=t.child,t!==null))for(dN(t,e,n),t=t.sibling;t!==null;)dN(t,e,n),t=t.sibling}function fN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fN(t,e,n),t=t.sibling;t!==null;)fN(t,e,n),t=t.sibling}var cs=null,gc=!1;function kd(t,e,n){for(n=n.child;n!==null;)yV(t,e,n),n=n.sibling}function yV(t,e,n){if(iu&&typeof iu.onCommitFiberUnmount=="function")try{iu.onCommitFiberUnmount(T5,n)}catch{}switch(n.tag){case 5:$s||cm(n,e);case 6:var r=cs,i=gc;cs=null,kd(t,e,n),cs=r,gc=i,cs!==null&&(gc?(t=cs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cs.removeChild(n.stateNode));break;case 18:cs!==null&&(gc?(t=cs,n=n.stateNode,t.nodeType===8?lA(t.parentNode,n):t.nodeType===1&&lA(t,n),X0(t)):lA(cs,n.stateNode));break;case 4:r=cs,i=gc,cs=n.stateNode.containerInfo,gc=!0,kd(t,e,n),cs=r,gc=i;break;case 0:case 11:case 14:case 15:if(!$s&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&cN(n,e,s),i=i.next}while(i!==r)}kd(t,e,n);break;case 1:if(!$s&&(cm(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Bi(n,e,o)}kd(t,e,n);break;case 21:kd(t,e,n);break;case 22:n.mode&1?($s=(r=$s)||n.memoizedState!==null,kd(t,e,n),$s=r):kd(t,e,n);break;default:kd(t,e,n)}}function CO(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zne),e.forEach(function(r){var i=Yne.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function dc(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:cs=o.stateNode,gc=!1;break e;case 3:cs=o.stateNode.containerInfo,gc=!0;break e;case 4:cs=o.stateNode.containerInfo,gc=!0;break e}o=o.return}if(cs===null)throw Error(Pt(160));yV(a,s,i),cs=null,gc=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Bi(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bV(e,t),e=e.sibling}function bV(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dc(e,t),qc(t),r&4){try{g0(3,t,t.return),z5(3,t)}catch(g){Bi(t,t.return,g)}try{g0(5,t,t.return)}catch(g){Bi(t,t.return,g)}}break;case 1:dc(e,t),qc(t),r&512&&n!==null&&cm(n,n.return);break;case 5:if(dc(e,t),qc(t),r&512&&n!==null&&cm(n,n.return),t.flags&32){var i=t.stateNode;try{q0(i,"")}catch(g){Bi(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=n!==null?n.memoizedProps:a,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&B$(i,a),Rj(o,s);var u=Rj(o,a);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?q$(i,f):d==="dangerouslySetInnerHTML"?H$(i,f):d==="children"?q0(i,f):_P(i,d,f,u)}switch(o){case"input":Tj(i,a);break;case"textarea":V$(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?Am(i,!!a.multiple,h,!1):p!==!!a.multiple&&(a.defaultValue!=null?Am(i,!!a.multiple,a.defaultValue,!0):Am(i,!!a.multiple,a.multiple?[]:"",!1))}i[ty]=a}catch(g){Bi(t,t.return,g)}}break;case 6:if(dc(e,t),qc(t),r&4){if(t.stateNode===null)throw Error(Pt(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(g){Bi(t,t.return,g)}}break;case 3:if(dc(e,t),qc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{X0(e.containerInfo)}catch(g){Bi(t,t.return,g)}break;case 4:dc(e,t),qc(t);break;case 13:dc(e,t),qc(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(n4=ia())),r&4&&CO(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?($s=(u=$s)||d,dc(e,t),$s=u):dc(e,t),qc(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(tn=t,d=t.child;d!==null;){for(f=tn=d;tn!==null;){switch(p=tn,h=p.child,p.tag){case 0:case 11:case 14:case 15:g0(4,p,p.return);break;case 1:cm(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Bi(r,n,g)}}break;case 5:cm(p,p.return);break;case 22:if(p.memoizedState!==null){NO(f);continue}}h!==null?(h.return=p,tn=h):NO(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=W$("display",s))}catch(g){Bi(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Bi(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:dc(e,t),qc(t),r&4&&CO(t);break;case 21:break;default:dc(e,t),qc(t)}}function qc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vV(n)){var r=n;break e}n=n.return}throw Error(Pt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(q0(i,""),r.flags&=-33);var a=AO(t);fN(t,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=AO(t);dN(t,o,s);break;default:throw Error(Pt(161))}}catch(l){Bi(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bne(t,e,n){tn=t,xV(t)}function xV(t,e,n){for(var r=(t.mode&1)!==0;tn!==null;){var i=tn,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Tx;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||$s;o=Tx;var u=$s;if(Tx=s,($s=l)&&!u)for(tn=i;tn!==null;)s=tn,l=s.child,s.tag===22&&s.memoizedState!==null?EO(i):l!==null?(l.return=s,tn=l):EO(i);for(;a!==null;)tn=a,xV(a),a=a.sibling;tn=i,Tx=o,$s=u}jO(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,tn=a):jO(t)}}function jO(t){for(;tn!==null;){var e=tn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$s||z5(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$s)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:mc(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&uO(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uO(e,s,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&X0(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pt(163))}$s||e.flags&512&&uN(e)}catch(p){Bi(e,e.return,p)}}if(e===t){tn=null;break}if(n=e.sibling,n!==null){n.return=e.return,tn=n;break}tn=e.return}}function NO(t){for(;tn!==null;){var e=tn;if(e===t){tn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,tn=n;break}tn=e.return}}function EO(t){for(;tn!==null;){var e=tn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{z5(4,e)}catch(l){Bi(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Bi(e,i,l)}}var a=e.return;try{uN(e)}catch(l){Bi(e,a,l)}break;case 5:var s=e.return;try{uN(e)}catch(l){Bi(e,s,l)}}}catch(l){Bi(e,e.return,l)}if(e===t){tn=null;break}var o=e.sibling;if(o!==null){o.return=e.return,tn=o;break}tn=e.return}}var Vne=Math.ceil,P2=hd.ReactCurrentDispatcher,e4=hd.ReactCurrentOwner,Vl=hd.ReactCurrentBatchConfig,Sr=0,Xa=null,ga=null,ps=0,Jo=0,um=jf(0),Fa=0,oy=null,Uh=0,$5=0,t4=0,v0=null,vo=null,n4=0,Qm=1/0,Ru=null,T2=!1,hN=null,sf=null,Dx=!1,Wd=null,D2=0,y0=0,pN=null,L1=-1,F1=0;function so(){return Sr&6?ia():L1!==-1?L1:L1=ia()}function of(t){return t.mode&1?Sr&2&&ps!==0?ps&-ps:Cne.transition!==null?(F1===0&&(F1=iB()),F1):(t=Vr,t!==0||(t=window.event,t=t===void 0?16:dB(t.type)),t):1}function Sc(t,e,n,r){if(50<y0)throw y0=0,pN=null,Error(Pt(185));mb(t,n,r),(!(Sr&2)||t!==Xa)&&(t===Xa&&(!(Sr&2)&&($5|=n),Fa===4&&Vd(t,ps)),Co(t,r),n===1&&Sr===0&&!(e.mode&1)&&(Qm=ia()+500,R5&&Nf()))}function Co(t,e){var n=t.callbackNode;Cte(t,e);var r=m2(t,t===Xa?ps:0);if(r===0)n!==null&&LI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&LI(n),e===1)t.tag===0?Ane(kO.bind(null,t)):PB(kO.bind(null,t)),xne(function(){!(Sr&6)&&Nf()}),n=null;else{switch(aB(r)){case 1:n=EP;break;case 4:n=nB;break;case 16:n=p2;break;case 536870912:n=rB;break;default:n=p2}n=EV(n,wV.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wV(t,e){if(L1=-1,F1=0,Sr&6)throw Error(Pt(327));var n=t.callbackNode;if(km()&&t.callbackNode!==n)return null;var r=m2(t,t===Xa?ps:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=I2(t,r);else{e=r;var i=Sr;Sr|=2;var a=_V();(Xa!==t||ps!==e)&&(Ru=null,Qm=ia()+500,Nh(t,e));do try{Wne();break}catch(o){SV(t,o)}while(!0);BP(),P2.current=a,Sr=i,ga!==null?e=0:(Xa=null,ps=0,e=Fa)}if(e!==0){if(e===2&&(i=Bj(t),i!==0&&(r=i,e=mN(t,i))),e===1)throw n=oy,Nh(t,0),Vd(t,r),Co(t,ia()),n;if(e===6)Vd(t,r);else{if(i=t.current.alternate,!(r&30)&&!Une(i)&&(e=I2(t,r),e===2&&(a=Bj(t),a!==0&&(r=a,e=mN(t,a))),e===1))throw n=oy,Nh(t,0),Vd(t,r),Co(t,ia()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Pt(345));case 2:th(t,vo,Ru);break;case 3:if(Vd(t,r),(r&130023424)===r&&(e=n4+500-ia(),10<e)){if(m2(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){so(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Yj(th.bind(null,t,vo,Ru),e);break}th(t,vo,Ru);break;case 4:if(Vd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-wc(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=ia()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vne(r/1960))-r,10<r){t.timeoutHandle=Yj(th.bind(null,t,vo,Ru),r);break}th(t,vo,Ru);break;case 5:th(t,vo,Ru);break;default:throw Error(Pt(329))}}}return Co(t,ia()),t.callbackNode===n?wV.bind(null,t):null}function mN(t,e){var n=v0;return t.current.memoizedState.isDehydrated&&(Nh(t,e).flags|=256),t=I2(t,e),t!==2&&(e=vo,vo=n,e!==null&&gN(e)),t}function gN(t){vo===null?vo=t:vo.push.apply(vo,t)}function Une(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Nc(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vd(t,e){for(e&=~t4,e&=~$5,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wc(e),r=1<<n;t[n]=-1,e&=~r}}function kO(t){if(Sr&6)throw Error(Pt(327));km();var e=m2(t,0);if(!(e&1))return Co(t,ia()),null;var n=I2(t,e);if(t.tag!==0&&n===2){var r=Bj(t);r!==0&&(e=r,n=mN(t,r))}if(n===1)throw n=oy,Nh(t,0),Vd(t,e),Co(t,ia()),n;if(n===6)throw Error(Pt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,th(t,vo,Ru),Co(t,ia()),null}function r4(t,e){var n=Sr;Sr|=1;try{return t(e)}finally{Sr=n,Sr===0&&(Qm=ia()+500,R5&&Nf())}}function Hh(t){Wd!==null&&Wd.tag===0&&!(Sr&6)&&km();var e=Sr;Sr|=1;var n=Vl.transition,r=Vr;try{if(Vl.transition=null,Vr=1,t)return t()}finally{Vr=r,Vl.transition=n,Sr=e,!(Sr&6)&&Nf()}}function i4(){Jo=um.current,yi(um)}function Nh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bne(n)),ga!==null)for(n=ga.return;n!==null;){var r=n;switch(FP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&x2();break;case 3:Ym(),yi(_o),yi(Ws),KP();break;case 5:qP(r);break;case 4:Ym();break;case 13:yi(Ei);break;case 19:yi(Ei);break;case 10:VP(r.type._context);break;case 22:case 23:i4()}n=n.return}if(Xa=t,ga=t=lf(t.current,null),ps=Jo=e,Fa=0,oy=null,t4=$5=Uh=0,vo=v0=null,gh!==null){for(e=0;e<gh.length;e++)if(n=gh[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}gh=null}return t}function SV(t,e){do{var n=ga;try{if(BP(),O1.current=k2,E2){for(var r=ki.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}E2=!1}if(Vh=0,qa=Ra=ki=null,m0=!1,iy=0,e4.current=null,n===null||n.return===null){Fa=1,oy=e,ga=null;break}e:{var a=t,s=n.return,o=n,l=e;if(e=ps,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=gO(s);if(h!==null){h.flags&=-257,vO(h,s,o,a,e),h.mode&1&&mO(a,u,e),e=h,l=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){mO(a,u,e),a4();break e}l=Error(Pt(426))}}else if(wi&&o.mode&1){var v=gO(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),vO(v,s,o,a,e),zP(Xm(l,o));break e}}a=l=Xm(l,o),Fa!==4&&(Fa=2),v0===null?v0=[a]:v0.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=aV(a,l,e);cO(a,y);break e;case 1:o=l;var b=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(sf===null||!sf.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var A=sV(a,o,e);cO(a,A);break e}}a=a.return}while(a!==null)}CV(n)}catch(C){e=C,ga===n&&n!==null&&(ga=n=n.return);continue}break}while(!0)}function _V(){var t=P2.current;return P2.current=k2,t===null?k2:t}function a4(){(Fa===0||Fa===3||Fa===2)&&(Fa=4),Xa===null||!(Uh&268435455)&&!($5&268435455)||Vd(Xa,ps)}function I2(t,e){var n=Sr;Sr|=2;var r=_V();(Xa!==t||ps!==e)&&(Ru=null,Nh(t,e));do try{Hne();break}catch(i){SV(t,i)}while(!0);if(BP(),Sr=n,P2.current=r,ga!==null)throw Error(Pt(261));return Xa=null,ps=0,Fa}function Hne(){for(;ga!==null;)AV(ga)}function Wne(){for(;ga!==null&&!gte();)AV(ga)}function AV(t){var e=NV(t.alternate,t,Jo);t.memoizedProps=t.pendingProps,e===null?CV(t):ga=e,e4.current=null}function CV(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Fne(n,e),n!==null){n.flags&=32767,ga=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fa=6,ga=null;return}}else if(n=Lne(n,e,Jo),n!==null){ga=n;return}if(e=e.sibling,e!==null){ga=e;return}ga=e=t}while(e!==null);Fa===0&&(Fa=5)}function th(t,e,n){var r=Vr,i=Vl.transition;try{Vl.transition=null,Vr=1,qne(t,e,n,r)}finally{Vl.transition=i,Vr=r}return null}function qne(t,e,n,r){do km();while(Wd!==null);if(Sr&6)throw Error(Pt(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Pt(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(jte(t,a),t===Xa&&(ga=Xa=null,ps=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dx||(Dx=!0,EV(p2,function(){return km(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Vl.transition,Vl.transition=null;var s=Vr;Vr=1;var o=Sr;Sr|=4,e4.current=null,$ne(t,n),bV(n,t),fne(Kj),g2=!!qj,Kj=qj=null,t.current=n,Bne(n),vte(),Sr=o,Vr=s,Vl.transition=a}else t.current=n;if(Dx&&(Dx=!1,Wd=t,D2=i),a=t.pendingLanes,a===0&&(sf=null),xte(n.stateNode),Co(t,ia()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(T2)throw T2=!1,t=hN,hN=null,t;return D2&1&&t.tag!==0&&km(),a=t.pendingLanes,a&1?t===pN?y0++:(y0=0,pN=t):y0=0,Nf(),null}function km(){if(Wd!==null){var t=aB(D2),e=Vl.transition,n=Vr;try{if(Vl.transition=null,Vr=16>t?16:t,Wd===null)var r=!1;else{if(t=Wd,Wd=null,D2=0,Sr&6)throw Error(Pt(331));var i=Sr;for(Sr|=4,tn=t.current;tn!==null;){var a=tn,s=a.child;if(tn.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(tn=u;tn!==null;){var d=tn;switch(d.tag){case 0:case 11:case 15:g0(8,d,a)}var f=d.child;if(f!==null)f.return=d,tn=f;else for(;tn!==null;){d=tn;var p=d.sibling,h=d.return;if(gV(d),d===u){tn=null;break}if(p!==null){p.return=h,tn=p;break}tn=h}}}var m=a.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}tn=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,tn=s;else e:for(;tn!==null;){if(a=tn,a.flags&2048)switch(a.tag){case 0:case 11:case 15:g0(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,tn=y;break e}tn=a.return}}var b=t.current;for(tn=b;tn!==null;){s=tn;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,tn=S;else e:for(s=b;tn!==null;){if(o=tn,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:z5(9,o)}}catch(C){Bi(o,o.return,C)}if(o===s){tn=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,tn=A;break e}tn=o.return}}if(Sr=i,Nf(),iu&&typeof iu.onPostCommitFiberRoot=="function")try{iu.onPostCommitFiberRoot(T5,t)}catch{}r=!0}return r}finally{Vr=n,Vl.transition=e}}return!1}function PO(t,e,n){e=Xm(n,e),e=aV(t,e,1),t=af(t,e,1),e=so(),t!==null&&(mb(t,1,e),Co(t,e))}function Bi(t,e,n){if(t.tag===3)PO(t,t,n);else for(;e!==null;){if(e.tag===3){PO(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sf===null||!sf.has(r))){t=Xm(n,t),t=sV(e,t,1),e=af(e,t,1),t=so(),e!==null&&(mb(e,1,t),Co(e,t));break}}e=e.return}}function Kne(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=so(),t.pingedLanes|=t.suspendedLanes&n,Xa===t&&(ps&n)===n&&(Fa===4||Fa===3&&(ps&130023424)===ps&&500>ia()-n4?Nh(t,0):t4|=n),Co(t,e)}function jV(t,e){e===0&&(t.mode&1?(e=Sx,Sx<<=1,!(Sx&130023424)&&(Sx=4194304)):e=1);var n=so();t=td(t,e),t!==null&&(mb(t,e,n),Co(t,n))}function Gne(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jV(t,n)}function Yne(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Pt(314))}r!==null&&r.delete(e),jV(t,n)}var NV;NV=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_o.current)bo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bo=!1,Rne(t,e,n);bo=!!(t.flags&131072)}else bo=!1,wi&&e.flags&1048576&&TB(e,_2,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;R1(t,e),t=e.pendingProps;var i=qm(e,Ws.current);Em(e,n),i=YP(null,e,r,t,i,n);var a=XP();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ao(r)?(a=!0,w2(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,HP(e),i.updater=F5,e.stateNode=i,i._reactInternals=e,nN(e,r,t,n),e=aN(null,e,r,!0,a,n)):(e.tag=0,wi&&a&&LP(e),to(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(R1(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Qne(r),t=mc(r,t),i){case 0:e=iN(null,e,r,t,n);break e;case 1:e=xO(null,e,r,t,n);break e;case 11:e=yO(null,e,r,t,n);break e;case 14:e=bO(null,e,r,mc(r.type,t),n);break e}throw Error(Pt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mc(r,i),iN(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mc(r,i),xO(t,e,r,i,n);case 3:e:{if(uV(e),t===null)throw Error(Pt(387));r=e.pendingProps,a=e.memoizedState,i=a.element,LB(t,e),j2(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Xm(Error(Pt(423)),e),e=wO(t,e,r,n,i);break e}else if(r!==i){i=Xm(Error(Pt(424)),e),e=wO(t,e,r,n,i);break e}else for(nl=rf(e.stateNode.containerInfo.firstChild),al=e,wi=!0,bc=null,n=MB(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Km(),r===i){e=nd(t,e,n);break e}to(t,e,r,n)}e=e.child}return e;case 5:return FB(e),t===null&&Jj(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,Gj(r,i)?s=null:a!==null&&Gj(r,a)&&(e.flags|=32),cV(t,e),to(t,e,s,n),e.child;case 6:return t===null&&Jj(e),null;case 13:return dV(t,e,n);case 4:return WP(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Gm(e,null,r,n):to(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mc(r,i),yO(t,e,r,i,n);case 7:return to(t,e,e.pendingProps,n),e.child;case 8:return to(t,e,e.pendingProps.children,n),e.child;case 12:return to(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,ii(A2,r._currentValue),r._currentValue=s,a!==null)if(Nc(a.value,s)){if(a.children===i.children&&!_o.current){e=nd(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=Gu(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),eN(a.return,n,e),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Pt(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),eN(s,n,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}to(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Em(e,n),i=Ul(i),r=r(i),e.flags|=1,to(t,e,r,n),e.child;case 14:return r=e.type,i=mc(r,e.pendingProps),i=mc(r.type,i),bO(t,e,r,i,n);case 15:return oV(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mc(r,i),R1(t,e),e.tag=1,Ao(r)?(t=!0,w2(e)):t=!1,Em(e,n),iV(e,r,i),nN(e,r,i,n),aN(null,e,r,!0,t,n);case 19:return fV(t,e,n);case 22:return lV(t,e,n)}throw Error(Pt(156,e.tag))};function EV(t,e){return tB(t,e)}function Xne(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $l(t,e,n,r){return new Xne(t,e,n,r)}function s4(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qne(t){if(typeof t=="function")return s4(t)?1:0;if(t!=null){if(t=t.$$typeof,t===CP)return 11;if(t===jP)return 14}return 2}function lf(t,e){var n=t.alternate;return n===null?(n=$l(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function z1(t,e,n,r,i,a){var s=2;if(r=t,typeof t=="function")s4(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case em:return Eh(n.children,i,a,e);case AP:s=8,i|=8;break;case jj:return t=$l(12,n,e,i|2),t.elementType=jj,t.lanes=a,t;case Nj:return t=$l(13,n,e,i),t.elementType=Nj,t.lanes=a,t;case Ej:return t=$l(19,n,e,i),t.elementType=Ej,t.lanes=a,t;case F$:return B5(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R$:s=10;break e;case L$:s=9;break e;case CP:s=11;break e;case jP:s=14;break e;case Fd:s=16,r=null;break e}throw Error(Pt(130,t==null?t:typeof t,""))}return e=$l(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Eh(t,e,n,r){return t=$l(7,t,r,e),t.lanes=n,t}function B5(t,e,n,r){return t=$l(22,t,r,e),t.elementType=F$,t.lanes=n,t.stateNode={isHidden:!1},t}function gA(t,e,n){return t=$l(6,t,null,e),t.lanes=n,t}function vA(t,e,n){return e=$l(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zne(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q_(0),this.expirationTimes=Q_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function o4(t,e,n,r,i,a,s,o,l){return t=new Zne(t,e,n,o,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=$l(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},HP(a),t}function Jne(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function kV(t){if(!t)return mf;t=t._reactInternals;e:{if(cp(t)!==t||t.tag!==1)throw Error(Pt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ao(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Pt(171))}if(t.tag===1){var n=t.type;if(Ao(n))return kB(t,n,e)}return e}function PV(t,e,n,r,i,a,s,o,l){return t=o4(n,r,!0,t,i,a,s,o,l),t.context=kV(null),n=t.current,r=so(),i=of(n),a=Gu(r,i),a.callback=e??null,af(n,a,i),t.current.lanes=i,mb(t,i,r),Co(t,r),t}function V5(t,e,n,r){var i=e.current,a=so(),s=of(i);return n=kV(n),e.context===null?e.context=n:e.pendingContext=n,e=Gu(a,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=af(i,e,s),t!==null&&(Sc(t,i,s,a),I1(t,i,s)),s}function O2(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function TO(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function l4(t,e){TO(t,e),(t=t.alternate)&&TO(t,e)}function ere(){return null}var TV=typeof reportError=="function"?reportError:function(t){console.error(t)};function c4(t){this._internalRoot=t}U5.prototype.render=c4.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Pt(409));V5(t,e,null,null)};U5.prototype.unmount=c4.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hh(function(){V5(null,t,null,null)}),e[ed]=null}};function U5(t){this._internalRoot=t}U5.prototype.unstable_scheduleHydration=function(t){if(t){var e=lB();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bd.length&&e!==0&&e<Bd[n].priority;n++);Bd.splice(n,0,t),n===0&&uB(t)}};function u4(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function H5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function DO(){}function tre(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=O2(s);a.call(u)}}var s=PV(e,r,t,0,null,!1,!1,"",DO);return t._reactRootContainer=s,t[ed]=s.current,J0(t.nodeType===8?t.parentNode:t),Hh(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=O2(l);o.call(u)}}var l=o4(t,0,!1,null,null,!1,!1,"",DO);return t._reactRootContainer=l,t[ed]=l.current,J0(t.nodeType===8?t.parentNode:t),Hh(function(){V5(e,l,n,r)}),l}function W5(t,e,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=O2(s);o.call(l)}}V5(e,s,t,i)}else s=tre(n,e,t,i,r);return O2(s)}sB=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zv(e.pendingLanes);n!==0&&(kP(e,n|1),Co(e,ia()),!(Sr&6)&&(Qm=ia()+500,Nf()))}break;case 13:Hh(function(){var r=td(t,1);if(r!==null){var i=so();Sc(r,t,1,i)}}),l4(t,1)}};PP=function(t){if(t.tag===13){var e=td(t,134217728);if(e!==null){var n=so();Sc(e,t,134217728,n)}l4(t,134217728)}};oB=function(t){if(t.tag===13){var e=of(t),n=td(t,e);if(n!==null){var r=so();Sc(n,t,e,r)}l4(t,e)}};lB=function(){return Vr};cB=function(t,e){var n=Vr;try{return Vr=t,e()}finally{Vr=n}};Fj=function(t,e,n){switch(e){case"input":if(Tj(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=M5(r);if(!i)throw Error(Pt(90));$$(r),Tj(r,i)}}}break;case"textarea":V$(t,n);break;case"select":e=n.value,e!=null&&Am(t,!!n.multiple,e,!1)}};Y$=r4;X$=Hh;var nre={usingClientEntryPoint:!1,Events:[vb,im,M5,K$,G$,r4]},Ov={findFiberByHostInstance:mh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rre={bundleType:Ov.bundleType,version:Ov.version,rendererPackageName:Ov.rendererPackageName,rendererConfig:Ov.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hd.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=J$(t),t===null?null:t.stateNode},findFiberByHostInstance:Ov.findFiberByHostInstance||ere,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ix=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ix.isDisabled&&Ix.supportsFiber)try{T5=Ix.inject(rre),iu=Ix}catch{}}yl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nre;yl.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u4(e))throw Error(Pt(200));return Jne(t,e,null,n)};yl.createRoot=function(t,e){if(!u4(t))throw Error(Pt(299));var n=!1,r="",i=TV;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=o4(t,1,!1,null,null,n,!1,r,i),t[ed]=e.current,J0(t.nodeType===8?t.parentNode:t),new c4(e)};yl.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Pt(188)):(t=Object.keys(t).join(","),Error(Pt(268,t)));return t=J$(e),t=t===null?null:t.stateNode,t};yl.flushSync=function(t){return Hh(t)};yl.hydrate=function(t,e,n){if(!H5(e))throw Error(Pt(200));return W5(null,t,e,!0,n)};yl.hydrateRoot=function(t,e,n){if(!u4(t))throw Error(Pt(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=TV;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=PV(e,null,t,1,n??null,i,!1,a,s),t[ed]=e.current,J0(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new U5(e)};yl.render=function(t,e,n){if(!H5(e))throw Error(Pt(200));return W5(null,t,e,!1,n)};yl.unmountComponentAtNode=function(t){if(!H5(t))throw Error(Pt(40));return t._reactRootContainer?(Hh(function(){W5(null,null,t,!1,function(){t._reactRootContainer=null,t[ed]=null})}),!0):!1};yl.unstable_batchedUpdates=r4;yl.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!H5(n))throw Error(Pt(200));if(t==null||t._reactInternals===void 0)throw Error(Pt(38));return W5(t,e,n,!1,r)};yl.version="18.3.1-next-f1338f8080-20240426";function DV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DV)}catch(t){console.error(t)}}DV(),D$.exports=yl;var ly=D$.exports,IO=ly;Aj.createRoot=IO.createRoot,Aj.hydrateRoot=IO.hydrateRoot;var OO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ire=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},OV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=a>>2,f=(a&3)<<4|o>>4;let p=(o&15)<<2|u>>6,h=u&63;l||(h=64,s||(p=64)),r.push(n[d],n[f],n[p],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IV(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ire(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||f==null)throw new are;const p=a<<2|o>>4;if(r.push(p),u!==64){const h=o<<4&240|u>>2;if(r.push(h),f!==64){const m=u<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class are extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sre=function(t){const e=IV(t);return OV.encodeByteArray(e,!0)},MV=function(t){return sre(t).replace(/\./g,"")},RV=function(t){try{return OV.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ore(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lre=()=>ore().__FIREBASE_DEFAULTS__,cre=()=>{if(typeof process>"u"||typeof OO>"u")return;const t=OO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ure=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RV(t[1]);return e&&JSON.parse(e)},d4=()=>{try{return lre()||cre()||ure()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dre=()=>{var t;return(t=d4())===null||t===void 0?void 0:t.config},fre=t=>{var e;return(e=d4())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hre{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pre(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ko())}function mre(){var t;const e=(t=d4())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gre(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vre(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bre(){const t=ko();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xre(){return!mre()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wre(){try{return typeof indexedDB=="object"}catch{return!1}}function Sre(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _re="FirebaseError";class pd extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_re,Object.setPrototypeOf(this,pd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bb.prototype.create)}}class bb{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?Are(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new pd(i,o,r)}}function Are(t,e){return t.replace(Cre,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Cre=/\{\$([^}]+)}/g;function cy(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(MO(a)&&MO(s)){if(!cy(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function MO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function e0(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function t0(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function jre(t,e){const n=new Nre(t,e);return n.subscribe.bind(n)}class Nre{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ere(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=yA),i.error===void 0&&(i.error=yA),i.complete===void 0&&(i.complete=yA);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ere(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yA(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t){return t&&t._delegate?t._delegate:t}class Wh{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kre{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hre;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Tre(e))try{this.getOrInitializeService({instanceIdentifier:nh})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=nh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nh){return this.instances.has(e)}getOptions(e=nh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=nh){return this.component?this.component.multipleInstances?e:nh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pre(t){return t===nh?void 0:t}function Tre(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(cr||(cr={}));const Ire={debug:cr.DEBUG,verbose:cr.VERBOSE,info:cr.INFO,warn:cr.WARN,error:cr.ERROR,silent:cr.SILENT},Ore=cr.INFO,Mre={[cr.DEBUG]:"log",[cr.VERBOSE]:"log",[cr.INFO]:"info",[cr.WARN]:"warn",[cr.ERROR]:"error"},Rre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Mre[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class f4{constructor(e){this.name=e,this._logLevel=Ore,this._logHandler=Rre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in cr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ire[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,cr.DEBUG,...e),this._logHandler(this,cr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,cr.VERBOSE,...e),this._logHandler(this,cr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,cr.INFO,...e),this._logHandler(this,cr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,cr.WARN,...e),this._logHandler(this,cr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,cr.ERROR,...e),this._logHandler(this,cr.ERROR,...e)}}const Lre=(t,e)=>e.some(n=>t instanceof n);let RO,LO;function Fre(){return RO||(RO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zre(){return LO||(LO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FV=new WeakMap,vN=new WeakMap,zV=new WeakMap,bA=new WeakMap,h4=new WeakMap;function $re(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(cf(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&FV.set(n,t)}).catch(()=>{}),h4.set(e,t),e}function Bre(t){if(vN.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});vN.set(t,e)}let yN={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vN.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zV.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cf(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Vre(t){yN=t(yN)}function Ure(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xA(this),e,...n);return zV.set(r,e.sort?e.sort():[e]),cf(r)}:zre().includes(t)?function(...e){return t.apply(xA(this),e),cf(FV.get(this))}:function(...e){return cf(t.apply(xA(this),e))}}function Hre(t){return typeof t=="function"?Ure(t):(t instanceof IDBTransaction&&Bre(t),Lre(t,Fre())?new Proxy(t,yN):t)}function cf(t){if(t instanceof IDBRequest)return $re(t);if(bA.has(t))return bA.get(t);const e=Hre(t);return e!==t&&(bA.set(t,e),h4.set(e,t)),e}const xA=t=>h4.get(t);function Wre(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=cf(s);return r&&s.addEventListener("upgradeneeded",l=>{r(cf(s.result),l.oldVersion,l.newVersion,cf(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const qre=["get","getKey","getAll","getAllKeys","count"],Kre=["put","add","delete","clear"],wA=new Map;function FO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wA.get(e))return wA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Kre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qre.includes(n)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&l.done]))[0]};return wA.set(e,a),a}Vre(t=>({...t,get:(e,n,r)=>FO(e,n)||t.get(e,n,r),has:(e,n)=>!!FO(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Yre(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Yre(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bN="@firebase/app",zO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new f4("@firebase/app"),Xre="@firebase/app-compat",Qre="@firebase/analytics-compat",Zre="@firebase/analytics",Jre="@firebase/app-check-compat",eie="@firebase/app-check",tie="@firebase/auth",nie="@firebase/auth-compat",rie="@firebase/database",iie="@firebase/data-connect",aie="@firebase/database-compat",sie="@firebase/functions",oie="@firebase/functions-compat",lie="@firebase/installations",cie="@firebase/installations-compat",uie="@firebase/messaging",die="@firebase/messaging-compat",fie="@firebase/performance",hie="@firebase/performance-compat",pie="@firebase/remote-config",mie="@firebase/remote-config-compat",gie="@firebase/storage",vie="@firebase/storage-compat",yie="@firebase/firestore",bie="@firebase/vertexai-preview",xie="@firebase/firestore-compat",wie="firebase",Sie="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ie="[DEFAULT]",Aie={[bN]:"fire-core",[Xre]:"fire-core-compat",[Zre]:"fire-analytics",[Qre]:"fire-analytics-compat",[eie]:"fire-app-check",[Jre]:"fire-app-check-compat",[tie]:"fire-auth",[nie]:"fire-auth-compat",[rie]:"fire-rtdb",[iie]:"fire-data-connect",[aie]:"fire-rtdb-compat",[sie]:"fire-fn",[oie]:"fire-fn-compat",[lie]:"fire-iid",[cie]:"fire-iid-compat",[uie]:"fire-fcm",[die]:"fire-fcm-compat",[fie]:"fire-perf",[hie]:"fire-perf-compat",[pie]:"fire-rc",[mie]:"fire-rc-compat",[gie]:"fire-gcs",[vie]:"fire-gcs-compat",[yie]:"fire-fst",[xie]:"fire-fst-compat",[bie]:"fire-vertex","fire-js":"fire-js",[wie]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=new Map,Cie=new Map,wN=new Map;function $O(t,e){try{t.container.addComponent(e)}catch(n){rd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zm(t){const e=t.name;if(wN.has(e))return rd.debug(`There were multiple attempts to register component ${e}.`),!1;wN.set(e,t);for(const n of xN.values())$O(n,t);for(const n of Cie.values())$O(n,t);return!0}function $V(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qd(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kh=new bb("app","Firebase",jie);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=Sie;function Eie(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_ie,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw kh.create("bad-app-name",{appName:String(i)});if(n||(n=dre()),!n)throw kh.create("no-options");const a=xN.get(i);if(a){if(cy(n,a.options)&&cy(r,a.config))return a;throw kh.create("duplicate-app",{appName:i})}const s=new Dre(i);for(const l of wN.values())s.addComponent(l);const o=new Nie(n,r,s);return xN.set(i,o),o}function uf(t,e,n){var r;let i=(r=Aie[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rd.warn(o.join(" "));return}Zm(new Wh(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kie="firebase-heartbeat-database",Pie=1,uy="firebase-heartbeat-store";let SA=null;function BV(){return SA||(SA=Wre(kie,Pie,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uy)}catch(n){console.warn(n)}}}}).catch(t=>{throw kh.create("idb-open",{originalErrorMessage:t.message})})),SA}async function Tie(t){try{const n=(await BV()).transaction(uy),r=await n.objectStore(uy).get(VV(t));return await n.done,r}catch(e){if(e instanceof pd)rd.warn(e.message);else{const n=kh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rd.warn(n.message)}}}async function BO(t,e){try{const r=(await BV()).transaction(uy,"readwrite");await r.objectStore(uy).put(e,VV(t)),await r.done}catch(n){if(n instanceof pd)rd.warn(n.message);else{const r=kh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rd.warn(r.message)}}}function VV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Die=1024,Iie=30*24*60*60*1e3;class Oie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Rie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=VO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=Iie}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rd.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=VO(),{heartbeatsToSend:r,unsentEntries:i}=Mie(this._heartbeatsCache.heartbeats),a=MV(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return rd.warn(n),""}}}function VO(){return new Date().toISOString().substring(0,10)}function Mie(t,e=Die){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),UO(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),UO(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Rie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wre()?Sre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Tie(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return BO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return BO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function UO(t){return MV(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lie(t){Zm(new Wh("platform-logger",e=>new Gre(e),"PRIVATE")),Zm(new Wh("heartbeat",e=>new Oie(e),"PRIVATE")),uf(bN,zO,t),uf(bN,zO,"esm2017"),uf("fire-js","")}Lie("");function UV(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function HV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Fie=HV,WV=new bb("auth","Firebase",HV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=new f4("@firebase/auth");function zie(t,...e){M2.logLevel<=cr.WARN&&M2.warn(`Auth (${q5}): ${t}`,...e)}function $1(t,...e){M2.logLevel<=cr.ERROR&&M2.error(`Auth (${q5}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t,...e){throw m4(t,...e)}function p4(t,...e){return m4(t,...e)}function qV(t,e,n){const r=Object.assign(Object.assign({},Fie()),{[e]:n});return new bb("auth","Firebase",r).create(e,{appName:t.name})}function Ph(t){return qV(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function m4(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return WV.create(t,...e)}function wr(t,e,...n){if(!t)throw m4(e,...n)}function Vu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $1(e),new Error(e)}function R2(t,e){t||Vu(e)}function $ie(){return HO()==="http:"||HO()==="https:"}function HO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bie(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($ie()||vre()||"connection"in navigator)?navigator.onLine:!0}function Vie(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.shortDelay=e,this.longDelay=n,R2(n>e,"Short delay should be less than long delay!"),this.isMobile=pre()||yre()}get(){return Bie()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uie(t,e){R2(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wie=new xb(3e4,6e4);function up(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function dp(t,e,n,r,i={}){return GV(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=LV(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},a);return gre()||(u.referrerPolicy="no-referrer"),KV.fetch()(YV(t,t.config.apiHost,n,o),u)})}async function GV(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hie),e);try{const i=new Kie(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Ox(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ox(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Ox(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Ox(t,"user-disabled",s);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw qV(t,d,u);Jm(t,d)}}catch(i){if(i instanceof pd)throw i;Jm(t,"network-request-failed",{message:String(i)})}}async function K5(t,e,n,r,i={}){const a=await dp(t,e,n,r,i);return"mfaPendingCredential"in a&&Jm(t,"multi-factor-auth-required",{_serverResponse:a}),a}function YV(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Uie(t.config,i):`${t.config.apiScheme}://${i}`}function qie(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kie{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(p4(this.auth,"network-request-failed")),Wie.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ox(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=p4(t,e,r);return i.customData._tokenResponse=n,i}function WO(t){return t!==void 0&&t.enterprise!==void 0}class Gie{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qie(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Yie(t,e){return dp(t,"GET","/v2/recaptchaConfig",up(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xie(t,e){return dp(t,"POST","/v1/accounts:delete",e)}async function XV(t,e){return dp(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Qie(t,e=!1){const n=vs(t),r=await n.getIdToken(e),i=QV(r);wr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:b0(_A(i.auth_time)),issuedAtTime:b0(_A(i.iat)),expirationTime:b0(_A(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function _A(t){return Number(t)*1e3}function QV(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $1("JWT malformed, contained fewer than 3 sections"),null;try{const i=RV(n);return i?JSON.parse(i):($1("Failed to decode base64 JWT payload"),null)}catch(i){return $1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function qO(t){const e=QV(t);return wr(e,"internal-error"),wr(typeof e.exp<"u","internal-error"),wr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pd&&Zie(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Zie({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jie{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=b0(this.lastLoginAt),this.creationTime=b0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(t){var e;const n=t.auth,r=await t.getIdToken(),i=await SN(t,XV(n,{idToken:r}));wr(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?ZV(a.providerUserInfo):[],o=tae(t.providerData,s),l=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),d=l?u:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new _N(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function eae(t){const e=vs(t);await L2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tae(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ZV(t){return t.map(e=>{var{providerId:n}=e,r=UV(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nae(t,e){const n=await GV(t,{},async()=>{const r=LV({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=YV(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",KV.fetch()(s,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rae(t,e){return dp(t,"POST","/v2/accounts:revokeToken",up(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){wr(e.idToken,"internal-error"),wr(typeof e.idToken<"u","internal-error"),wr(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){wr(e.length!==0,"internal-error");const n=qO(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(wr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await nae(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Pm;return r&&(wr(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(wr(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(wr(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pm,this.toJSON())}_performRefresh(){return Vu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t,e){wr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Uu{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=UV(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jie(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new _N(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await SN(this,this.stsTokenManager.getToken(this.auth,e));return wr(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Qie(this,e)}reload(){return eae(this)}_assign(e){this!==e&&(wr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Uu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){wr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await L2(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qd(this.auth.app))return Promise.reject(Ph(this.auth));const e=await this.getIdToken();return await SN(this,Xie(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,s,o,l,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,h=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,m=(s=n.photoURL)!==null&&s!==void 0?s:void 0,g=(o=n.tenantId)!==null&&o!==void 0?o:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,b=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:A,isAnonymous:C,providerData:T,stsTokenManager:j}=n;wr(S&&j,e,"internal-error");const E=Pm.fromJSON(this.name,j);wr(typeof S=="string",e,"internal-error"),Pd(f,e.name),Pd(p,e.name),wr(typeof A=="boolean",e,"internal-error"),wr(typeof C=="boolean",e,"internal-error"),Pd(h,e.name),Pd(m,e.name),Pd(g,e.name),Pd(v,e.name),Pd(y,e.name),Pd(b,e.name);const k=new Uu({uid:S,auth:e,email:p,emailVerified:A,displayName:f,isAnonymous:C,photoURL:m,phoneNumber:h,tenantId:g,stsTokenManager:E,createdAt:y,lastLoginAt:b});return T&&Array.isArray(T)&&(k.providerData=T.map(O=>Object.assign({},O))),v&&(k._redirectEventId=v),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Pm;i.updateFromServerResponse(n);const a=new Uu({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await L2(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];wr(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?ZV(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Pm;o.updateFromIdToken(r);const l=new Uu({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new _N(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=new Map;function yh(t){R2(t instanceof Function,"Expected a class definition");let e=KO.get(t);return e?(R2(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,KO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JV.type="NONE";const GO=JV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t,e,n){return`firebase:${t}:${e}:${n}`}class Tm{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=AA(this.userKey,i.apiKey,a),this.fullPersistenceKey=AA("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Uu._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Tm(yh(GO),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||yh(GO);const s=AA(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(s);if(d){const f=Uu._fromJSON(e,d);u!==a&&(o=f),a=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new Tm(a,e,r):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new Tm(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iae(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nU(e))return"Blackberry";if(rU(e))return"Webos";if(aae(e))return"Safari";if((e.includes("chrome/")||sae(e))&&!e.includes("edge/"))return"Chrome";if(tU(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function iae(t=ko()){return/firefox\//i.test(t)}function aae(t=ko()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sae(t=ko()){return/crios\//i.test(t)}function eU(t=ko()){return/iemobile/i.test(t)}function tU(t=ko()){return/android/i.test(t)}function nU(t=ko()){return/blackberry/i.test(t)}function rU(t=ko()){return/webos/i.test(t)}function oae(t=ko()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lae(){return bre()&&document.documentMode===10}function cae(t=ko()){return oae(t)||tU(t)||rU(t)||nU(t)||/windows phone/i.test(t)||eU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(t,e=[]){let n;switch(t){case"Browser":n=YO(ko());break;case"Worker":n=`${YO(ko())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${q5}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uae{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dae(t,e={}){return dp(t,"GET","/v2/passwordPolicy",up(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fae=6;class hae{constructor(e){var n,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:fae,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,s,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pae{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new XO(this),this.idTokenSubscription=new XO(this),this.beforeStateQueue=new uae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yh(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Tm.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await XV(this,{idToken:e}),r=await Uu._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qd(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return wr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await L2(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Vie()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qd(this.app))return Promise.reject(Ph(this));const n=e?vs(e):null;return n&&wr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&wr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qd(this.app)?Promise.reject(Ph(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qd(this.app)?Promise.reject(Ph(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yh(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dae(this),n=new hae(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bb("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rae(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yh(e)||this._popupRedirectResolver;wr(n,this,"argument-error"),this.redirectPersistenceManager=await Tm.create(this,[yh(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(wr(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return wr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zie(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function wb(t){return vs(t)}class XO{constructor(e){this.auth=e,this.observer=null,this.addObserver=jre(n=>this.observer=n)}get next(){return wr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g4={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mae(t){g4=t}function gae(t){return g4.loadJS(t)}function vae(){return g4.recaptchaEnterpriseScript}const yae="recaptcha-enterprise",bae="NO_RECAPTCHA";class xae{constructor(e){this.type=yae,this.auth=wb(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{Yie(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Gie(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(l=>{o(l)})})}function i(a,s,o){const l=window.grecaptcha;WO(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(bae)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&WO(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=vae();l.length!==0&&(l+=o),gae(l).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function QO(t,e,n,r=!1){const i=new xae(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function AN(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await QO(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await QO(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wae(t,e){const n=$V(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(cy(a,e??{}))return i;Jm(i,"already-initialized")}return n.initialize({options:e})}function Sae(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yh);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ae{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vu("not implemented")}_getIdTokenResponse(e){return Vu("not implemented")}_linkToIdToken(e,n){return Vu("not implemented")}_getReauthenticationResolver(e){return Vu("not implemented")}}async function Aae(t,e){return dp(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cae(t,e){return K5(t,"POST","/v1/accounts:signInWithPassword",up(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jae(t,e){return K5(t,"POST","/v1/accounts:signInWithEmailLink",up(t,e))}async function Nae(t,e){return K5(t,"POST","/v1/accounts:signInWithEmailLink",up(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy extends _ae{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new dy(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new dy(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return AN(e,n,"signInWithPassword",Cae);case"emailLink":return jae(e,{email:this._email,oobCode:this._password});default:Jm(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return AN(e,r,"signUpPassword",Aae);case"emailLink":return Nae(e,{idToken:n,email:this._email,oobCode:this._password});default:Jm(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eae(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kae(t){const e=e0(t0(t)).link,n=e?e0(t0(e)).deep_link_id:null,r=e0(t0(t)).deep_link_id;return(r?e0(t0(r)).link:null)||r||n||e||t}class v4{constructor(e){var n,r,i,a,s,o;const l=e0(t0(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,f=Eae((i=l.mode)!==null&&i!==void 0?i:null);wr(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(a=l.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=kae(e);try{return new v4(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(){this.providerId=Yg.PROVIDER_ID}static credential(e,n){return dy._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=v4.parseLink(n);return wr(r,"argument-error"),dy._fromEmailAndCode(e,r.code,r.tenantId)}}Yg.PROVIDER_ID="password";Yg.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pae(t,e){return K5(t,"POST","/v1/accounts:signUp",up(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Uu._fromIdTokenResponse(e,r,i),s=ZO(r);return new fy({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=ZO(r);return new fy({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function ZO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2 extends pd{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,F2.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new F2(e,n,r,i)}}function Tae(t,e,n,r){return n._getIdTokenResponse(t).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?F2._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dae(t,e,n=!1){if(qd(t.app))return Promise.reject(Ph(t));const r="signIn",i=await Tae(t,r,e),a=await fy._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Iae(t,e){return Dae(wb(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aU(t){const e=wb(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Oae(t,e,n){if(qd(t.app))return Promise.reject(Ph(t));const r=wb(t),s=await AN(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pae).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&aU(t),l}),o=await fy._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function Mae(t,e,n){return qd(t.app)?Promise.reject(Ph(t)):Iae(vs(t),Yg.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&aU(t),r})}function Rae(t,e,n,r){return vs(t).onAuthStateChanged(e,n,r)}const JO="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(JO,"1"),this.storage.removeItem(JO),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lae=1e3,Fae=10;class oU extends sU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cae(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);lae()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Fae):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Lae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oU.type="LOCAL";const zae=oU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ae extends sU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$ae.type="SESSION";new xb(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new xb(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new xb(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new xb(5e3,15e3);var eM="@firebase/auth",tM="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bae{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){wr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vae(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Uae(t){Zm(new Wh("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;wr(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iU(t)},u=new pae(r,i,a,l);return Sae(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zm(new Wh("auth-internal",e=>{const n=wb(e.getProvider("auth").getImmediate());return(r=>new Bae(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),uf(eM,tM,Vae(t)),uf(eM,tM,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hae=5*60;fre("authIdTokenMaxAge");function Wae(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mae({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=p4("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Wae().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Uae("Browser");var qae="firebase",Kae="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uf(qae,Kae,"app");var nM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Th,lU;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,E){function k(){}k.prototype=E.prototype,j.D=E.prototype,j.prototype=new k,j.prototype.constructor=j,j.C=function(O,D,M){for(var L=Array(arguments.length-2),V=2;V<arguments.length;V++)L[V-2]=arguments[V];return E.prototype[D].apply(O,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,E,k){k||(k=0);var O=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)O[D]=E.charCodeAt(k++)|E.charCodeAt(k++)<<8|E.charCodeAt(k++)<<16|E.charCodeAt(k++)<<24;else for(D=0;16>D;++D)O[D]=E[k++]|E[k++]<<8|E[k++]<<16|E[k++]<<24;E=j.g[0],k=j.g[1],D=j.g[2];var M=j.g[3],L=E+(M^k&(D^M))+O[0]+3614090360&4294967295;E=k+(L<<7&4294967295|L>>>25),L=M+(D^E&(k^D))+O[1]+3905402710&4294967295,M=E+(L<<12&4294967295|L>>>20),L=D+(k^M&(E^k))+O[2]+606105819&4294967295,D=M+(L<<17&4294967295|L>>>15),L=k+(E^D&(M^E))+O[3]+3250441966&4294967295,k=D+(L<<22&4294967295|L>>>10),L=E+(M^k&(D^M))+O[4]+4118548399&4294967295,E=k+(L<<7&4294967295|L>>>25),L=M+(D^E&(k^D))+O[5]+1200080426&4294967295,M=E+(L<<12&4294967295|L>>>20),L=D+(k^M&(E^k))+O[6]+2821735955&4294967295,D=M+(L<<17&4294967295|L>>>15),L=k+(E^D&(M^E))+O[7]+4249261313&4294967295,k=D+(L<<22&4294967295|L>>>10),L=E+(M^k&(D^M))+O[8]+1770035416&4294967295,E=k+(L<<7&4294967295|L>>>25),L=M+(D^E&(k^D))+O[9]+2336552879&4294967295,M=E+(L<<12&4294967295|L>>>20),L=D+(k^M&(E^k))+O[10]+4294925233&4294967295,D=M+(L<<17&4294967295|L>>>15),L=k+(E^D&(M^E))+O[11]+2304563134&4294967295,k=D+(L<<22&4294967295|L>>>10),L=E+(M^k&(D^M))+O[12]+1804603682&4294967295,E=k+(L<<7&4294967295|L>>>25),L=M+(D^E&(k^D))+O[13]+4254626195&4294967295,M=E+(L<<12&4294967295|L>>>20),L=D+(k^M&(E^k))+O[14]+2792965006&4294967295,D=M+(L<<17&4294967295|L>>>15),L=k+(E^D&(M^E))+O[15]+1236535329&4294967295,k=D+(L<<22&4294967295|L>>>10),L=E+(D^M&(k^D))+O[1]+4129170786&4294967295,E=k+(L<<5&4294967295|L>>>27),L=M+(k^D&(E^k))+O[6]+3225465664&4294967295,M=E+(L<<9&4294967295|L>>>23),L=D+(E^k&(M^E))+O[11]+643717713&4294967295,D=M+(L<<14&4294967295|L>>>18),L=k+(M^E&(D^M))+O[0]+3921069994&4294967295,k=D+(L<<20&4294967295|L>>>12),L=E+(D^M&(k^D))+O[5]+3593408605&4294967295,E=k+(L<<5&4294967295|L>>>27),L=M+(k^D&(E^k))+O[10]+38016083&4294967295,M=E+(L<<9&4294967295|L>>>23),L=D+(E^k&(M^E))+O[15]+3634488961&4294967295,D=M+(L<<14&4294967295|L>>>18),L=k+(M^E&(D^M))+O[4]+3889429448&4294967295,k=D+(L<<20&4294967295|L>>>12),L=E+(D^M&(k^D))+O[9]+568446438&4294967295,E=k+(L<<5&4294967295|L>>>27),L=M+(k^D&(E^k))+O[14]+3275163606&4294967295,M=E+(L<<9&4294967295|L>>>23),L=D+(E^k&(M^E))+O[3]+4107603335&4294967295,D=M+(L<<14&4294967295|L>>>18),L=k+(M^E&(D^M))+O[8]+1163531501&4294967295,k=D+(L<<20&4294967295|L>>>12),L=E+(D^M&(k^D))+O[13]+2850285829&4294967295,E=k+(L<<5&4294967295|L>>>27),L=M+(k^D&(E^k))+O[2]+4243563512&4294967295,M=E+(L<<9&4294967295|L>>>23),L=D+(E^k&(M^E))+O[7]+1735328473&4294967295,D=M+(L<<14&4294967295|L>>>18),L=k+(M^E&(D^M))+O[12]+2368359562&4294967295,k=D+(L<<20&4294967295|L>>>12),L=E+(k^D^M)+O[5]+4294588738&4294967295,E=k+(L<<4&4294967295|L>>>28),L=M+(E^k^D)+O[8]+2272392833&4294967295,M=E+(L<<11&4294967295|L>>>21),L=D+(M^E^k)+O[11]+1839030562&4294967295,D=M+(L<<16&4294967295|L>>>16),L=k+(D^M^E)+O[14]+4259657740&4294967295,k=D+(L<<23&4294967295|L>>>9),L=E+(k^D^M)+O[1]+2763975236&4294967295,E=k+(L<<4&4294967295|L>>>28),L=M+(E^k^D)+O[4]+1272893353&4294967295,M=E+(L<<11&4294967295|L>>>21),L=D+(M^E^k)+O[7]+4139469664&4294967295,D=M+(L<<16&4294967295|L>>>16),L=k+(D^M^E)+O[10]+3200236656&4294967295,k=D+(L<<23&4294967295|L>>>9),L=E+(k^D^M)+O[13]+681279174&4294967295,E=k+(L<<4&4294967295|L>>>28),L=M+(E^k^D)+O[0]+3936430074&4294967295,M=E+(L<<11&4294967295|L>>>21),L=D+(M^E^k)+O[3]+3572445317&4294967295,D=M+(L<<16&4294967295|L>>>16),L=k+(D^M^E)+O[6]+76029189&4294967295,k=D+(L<<23&4294967295|L>>>9),L=E+(k^D^M)+O[9]+3654602809&4294967295,E=k+(L<<4&4294967295|L>>>28),L=M+(E^k^D)+O[12]+3873151461&4294967295,M=E+(L<<11&4294967295|L>>>21),L=D+(M^E^k)+O[15]+530742520&4294967295,D=M+(L<<16&4294967295|L>>>16),L=k+(D^M^E)+O[2]+3299628645&4294967295,k=D+(L<<23&4294967295|L>>>9),L=E+(D^(k|~M))+O[0]+4096336452&4294967295,E=k+(L<<6&4294967295|L>>>26),L=M+(k^(E|~D))+O[7]+1126891415&4294967295,M=E+(L<<10&4294967295|L>>>22),L=D+(E^(M|~k))+O[14]+2878612391&4294967295,D=M+(L<<15&4294967295|L>>>17),L=k+(M^(D|~E))+O[5]+4237533241&4294967295,k=D+(L<<21&4294967295|L>>>11),L=E+(D^(k|~M))+O[12]+1700485571&4294967295,E=k+(L<<6&4294967295|L>>>26),L=M+(k^(E|~D))+O[3]+2399980690&4294967295,M=E+(L<<10&4294967295|L>>>22),L=D+(E^(M|~k))+O[10]+4293915773&4294967295,D=M+(L<<15&4294967295|L>>>17),L=k+(M^(D|~E))+O[1]+2240044497&4294967295,k=D+(L<<21&4294967295|L>>>11),L=E+(D^(k|~M))+O[8]+1873313359&4294967295,E=k+(L<<6&4294967295|L>>>26),L=M+(k^(E|~D))+O[15]+4264355552&4294967295,M=E+(L<<10&4294967295|L>>>22),L=D+(E^(M|~k))+O[6]+2734768916&4294967295,D=M+(L<<15&4294967295|L>>>17),L=k+(M^(D|~E))+O[13]+1309151649&4294967295,k=D+(L<<21&4294967295|L>>>11),L=E+(D^(k|~M))+O[4]+4149444226&4294967295,E=k+(L<<6&4294967295|L>>>26),L=M+(k^(E|~D))+O[11]+3174756917&4294967295,M=E+(L<<10&4294967295|L>>>22),L=D+(E^(M|~k))+O[2]+718787259&4294967295,D=M+(L<<15&4294967295|L>>>17),L=k+(M^(D|~E))+O[9]+3951481745&4294967295,j.g[0]=j.g[0]+E&4294967295,j.g[1]=j.g[1]+(D+(L<<21&4294967295|L>>>11))&4294967295,j.g[2]=j.g[2]+D&4294967295,j.g[3]=j.g[3]+M&4294967295}r.prototype.u=function(j,E){E===void 0&&(E=j.length);for(var k=E-this.blockSize,O=this.B,D=this.h,M=0;M<E;){if(D==0)for(;M<=k;)i(this,j,M),M+=this.blockSize;if(typeof j=="string"){for(;M<E;)if(O[D++]=j.charCodeAt(M++),D==this.blockSize){i(this,O),D=0;break}}else for(;M<E;)if(O[D++]=j[M++],D==this.blockSize){i(this,O),D=0;break}}this.h=D,this.o+=E},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var E=1;E<j.length-8;++E)j[E]=0;var k=8*this.o;for(E=j.length-8;E<j.length;++E)j[E]=k&255,k/=256;for(this.u(j),j=Array(16),E=k=0;4>E;++E)for(var O=0;32>O;O+=8)j[k++]=this.g[E]>>>O&255;return j};function a(j,E){var k=o;return Object.prototype.hasOwnProperty.call(k,j)?k[j]:k[j]=E(j)}function s(j,E){this.h=E;for(var k=[],O=!0,D=j.length-1;0<=D;D--){var M=j[D]|0;O&&M==E||(k[D]=M,O=!1)}this.g=k}var o={};function l(j){return-128<=j&&128>j?a(j,function(E){return new s([E|0],0>E?-1:0)}):new s([j|0],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return f;if(0>j)return v(u(-j));for(var E=[],k=1,O=0;j>=k;O++)E[O]=j/k|0,k*=4294967296;return new s(E,0)}function d(j,E){if(j.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(j.charAt(0)=="-")return v(d(j.substring(1),E));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(E,8)),O=f,D=0;D<j.length;D+=8){var M=Math.min(8,j.length-D),L=parseInt(j.substring(D,D+M),E);8>M?(M=u(Math.pow(E,M)),O=O.j(M).add(u(L))):(O=O.j(k),O=O.add(u(L)))}return O}var f=l(0),p=l(1),h=l(16777216);t=s.prototype,t.m=function(){if(g(this))return-v(this).m();for(var j=0,E=1,k=0;k<this.g.length;k++){var O=this.i(k);j+=(0<=O?O:4294967296+O)*E,E*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(m(this))return"0";if(g(this))return"-"+v(this).toString(j);for(var E=u(Math.pow(j,6)),k=this,O="";;){var D=A(k,E).g;k=y(k,D.j(E));var M=((0<k.g.length?k.g[0]:k.h)>>>0).toString(j);if(k=D,m(k))return M+O;for(;6>M.length;)M="0"+M;O=M+O}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function m(j){if(j.h!=0)return!1;for(var E=0;E<j.g.length;E++)if(j.g[E]!=0)return!1;return!0}function g(j){return j.h==-1}t.l=function(j){return j=y(this,j),g(j)?-1:m(j)?0:1};function v(j){for(var E=j.g.length,k=[],O=0;O<E;O++)k[O]=~j.g[O];return new s(k,~j.h).add(p)}t.abs=function(){return g(this)?v(this):this},t.add=function(j){for(var E=Math.max(this.g.length,j.g.length),k=[],O=0,D=0;D<=E;D++){var M=O+(this.i(D)&65535)+(j.i(D)&65535),L=(M>>>16)+(this.i(D)>>>16)+(j.i(D)>>>16);O=L>>>16,M&=65535,L&=65535,k[D]=L<<16|M}return new s(k,k[k.length-1]&-2147483648?-1:0)};function y(j,E){return j.add(v(E))}t.j=function(j){if(m(this)||m(j))return f;if(g(this))return g(j)?v(this).j(v(j)):v(v(this).j(j));if(g(j))return v(this.j(v(j)));if(0>this.l(h)&&0>j.l(h))return u(this.m()*j.m());for(var E=this.g.length+j.g.length,k=[],O=0;O<2*E;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(var D=0;D<j.g.length;D++){var M=this.i(O)>>>16,L=this.i(O)&65535,V=j.i(D)>>>16,Q=j.i(D)&65535;k[2*O+2*D]+=L*Q,b(k,2*O+2*D),k[2*O+2*D+1]+=M*Q,b(k,2*O+2*D+1),k[2*O+2*D+1]+=L*V,b(k,2*O+2*D+1),k[2*O+2*D+2]+=M*V,b(k,2*O+2*D+2)}for(O=0;O<E;O++)k[O]=k[2*O+1]<<16|k[2*O];for(O=E;O<2*E;O++)k[O]=0;return new s(k,0)};function b(j,E){for(;(j[E]&65535)!=j[E];)j[E+1]+=j[E]>>>16,j[E]&=65535,E++}function S(j,E){this.g=j,this.h=E}function A(j,E){if(m(E))throw Error("division by zero");if(m(j))return new S(f,f);if(g(j))return E=A(v(j),E),new S(v(E.g),v(E.h));if(g(E))return E=A(j,v(E)),new S(v(E.g),E.h);if(30<j.g.length){if(g(j)||g(E))throw Error("slowDivide_ only works with positive integers.");for(var k=p,O=E;0>=O.l(j);)k=C(k),O=C(O);var D=T(k,1),M=T(O,1);for(O=T(O,2),k=T(k,2);!m(O);){var L=M.add(O);0>=L.l(j)&&(D=D.add(k),M=L),O=T(O,1),k=T(k,1)}return E=y(j,D.j(E)),new S(D,E)}for(D=f;0<=j.l(E);){for(k=Math.max(1,Math.floor(j.m()/E.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),M=u(k),L=M.j(E);g(L)||0<L.l(j);)k-=O,M=u(k),L=M.j(E);m(M)&&(M=p),D=D.add(M),j=y(j,L)}return new S(D,j)}t.A=function(j){return A(this,j).h},t.and=function(j){for(var E=Math.max(this.g.length,j.g.length),k=[],O=0;O<E;O++)k[O]=this.i(O)&j.i(O);return new s(k,this.h&j.h)},t.or=function(j){for(var E=Math.max(this.g.length,j.g.length),k=[],O=0;O<E;O++)k[O]=this.i(O)|j.i(O);return new s(k,this.h|j.h)},t.xor=function(j){for(var E=Math.max(this.g.length,j.g.length),k=[],O=0;O<E;O++)k[O]=this.i(O)^j.i(O);return new s(k,this.h^j.h)};function C(j){for(var E=j.g.length+1,k=[],O=0;O<E;O++)k[O]=j.i(O)<<1|j.i(O-1)>>>31;return new s(k,j.h)}function T(j,E){var k=E>>5;E%=32;for(var O=j.g.length-k,D=[],M=0;M<O;M++)D[M]=0<E?j.i(M+k)>>>E|j.i(M+k+1)<<32-E:j.i(M+k);return new s(D,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lU=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Th=s}).apply(typeof nM<"u"?nM:typeof self<"u"?self:typeof window<"u"?window:{});var Mx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cU,n0,uU,B1,CN,dU,fU,hU;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,B,W){return w==Array.prototype||w==Object.prototype||(w[B]=W.value),w};function n(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mx=="object"&&Mx];for(var B=0;B<w.length;++B){var W=w[B];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}var r=n(this);function i(w,B){if(B)e:{var W=r;w=w.split(".");for(var ue=0;ue<w.length-1;ue++){var Be=w[ue];if(!(Be in W))break e;W=W[Be]}w=w[w.length-1],ue=W[w],B=B(ue),B!=ue&&B!=null&&e(W,w,{configurable:!0,writable:!0,value:B})}}function a(w,B){w instanceof String&&(w+="");var W=0,ue=!1,Be={next:function(){if(!ue&&W<w.length){var Ye=W++;return{value:B(Ye,w[Ye]),done:!1}}return ue=!0,{done:!0,value:void 0}}};return Be[Symbol.iterator]=function(){return Be},Be}i("Array.prototype.values",function(w){return w||function(){return a(this,function(B,W){return W})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(w){var B=typeof w;return B=B!="object"?B:w?Array.isArray(w)?"array":B:"null",B=="array"||B=="object"&&typeof w.length=="number"}function u(w){var B=typeof w;return B=="object"&&w!=null||B=="function"}function d(w,B,W){return w.call.apply(w.bind,arguments)}function f(w,B,W){if(!w)throw Error();if(2<arguments.length){var ue=Array.prototype.slice.call(arguments,2);return function(){var Be=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Be,ue),w.apply(B,Be)}}return function(){return w.apply(B,arguments)}}function p(w,B,W){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function h(w,B){var W=Array.prototype.slice.call(arguments,1);return function(){var ue=W.slice();return ue.push.apply(ue,arguments),w.apply(this,ue)}}function m(w,B){function W(){}W.prototype=B.prototype,w.aa=B.prototype,w.prototype=new W,w.prototype.constructor=w,w.Qb=function(ue,Be,Ye){for(var Tt=Array(arguments.length-2),tr=2;tr<arguments.length;tr++)Tt[tr-2]=arguments[tr];return B.prototype[Be].apply(ue,Tt)}}function g(w){const B=w.length;if(0<B){const W=Array(B);for(let ue=0;ue<B;ue++)W[ue]=w[ue];return W}return[]}function v(w,B){for(let W=1;W<arguments.length;W++){const ue=arguments[W];if(l(ue)){const Be=w.length||0,Ye=ue.length||0;w.length=Be+Ye;for(let Tt=0;Tt<Ye;Tt++)w[Be+Tt]=ue[Tt]}else w.push(ue)}}class y{constructor(B,W){this.i=B,this.j=W,this.h=0,this.g=null}get(){let B;return 0<this.h?(this.h--,B=this.g,this.g=B.next,B.next=null):B=this.i(),B}}function b(w){return/^[\s\xa0]*$/.test(w)}function S(){var w=o.navigator;return w&&(w=w.userAgent)?w:""}function A(w){return A[" "](w),w}A[" "]=function(){};var C=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function T(w,B,W){for(const ue in w)B.call(W,w[ue],ue,w)}function j(w,B){for(const W in w)B.call(void 0,w[W],W,w)}function E(w){const B={};for(const W in w)B[W]=w[W];return B}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(w,B){let W,ue;for(let Be=1;Be<arguments.length;Be++){ue=arguments[Be];for(W in ue)w[W]=ue[W];for(let Ye=0;Ye<k.length;Ye++)W=k[Ye],Object.prototype.hasOwnProperty.call(ue,W)&&(w[W]=ue[W])}}function D(w){var B=1;w=w.split(":");const W=[];for(;0<B&&w.length;)W.push(w.shift()),B--;return w.length&&W.push(w.join(":")),W}function M(w){o.setTimeout(()=>{throw w},0)}function L(){var w=ee;let B=null;return w.g&&(B=w.g,w.g=w.g.next,w.g||(w.h=null),B.next=null),B}class V{constructor(){this.h=this.g=null}add(B,W){const ue=Q.get();ue.set(B,W),this.h?this.h.next=ue:this.g=ue,this.h=ue}}var Q=new y(()=>new Y,w=>w.reset());class Y{constructor(){this.next=this.g=this.h=null}set(B,W){this.h=B,this.g=W,this.next=null}reset(){this.next=this.g=this.h=null}}let J,q=!1,ee=new V,le=()=>{const w=o.Promise.resolve(void 0);J=()=>{w.then(se)}};var se=()=>{for(var w;w=L();){try{w.h.call(w.g)}catch(W){M(W)}var B=Q;B.j(w),100>B.h&&(B.h++,w.next=B.g,B.g=w)}q=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(w,B){this.type=w,this.g=this.target=B,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var w=!1,B=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const W=()=>{};o.addEventListener("test",W,B),o.removeEventListener("test",W,B)}catch{}return w}();function oe(w,B){if(G.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var W=this.type=w.type,ue=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=B,B=w.relatedTarget){if(C){e:{try{A(B.nodeName);var Be=!0;break e}catch{}Be=!1}Be||(B=null)}}else W=="mouseover"?B=w.fromElement:W=="mouseout"&&(B=w.toElement);this.relatedTarget=B,ue?(this.clientX=ue.clientX!==void 0?ue.clientX:ue.pageX,this.clientY=ue.clientY!==void 0?ue.clientY:ue.pageY,this.screenX=ue.screenX||0,this.screenY=ue.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:ge[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&oe.aa.h.call(this)}}m(oe,G);var ge={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function fe(w,B,W,ue,Be){this.listener=w,this.proxy=null,this.src=B,this.type=W,this.capture=!!ue,this.ha=Be,this.key=++Ce,this.da=this.fa=!1}function be(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function we(w){this.src=w,this.g={},this.h=0}we.prototype.add=function(w,B,W,ue,Be){var Ye=w.toString();w=this.g[Ye],w||(w=this.g[Ye]=[],this.h++);var Tt=He(w,B,ue,Be);return-1<Tt?(B=w[Tt],W||(B.fa=!1)):(B=new fe(B,this.src,Ye,!!ue,Be),B.fa=W,w.push(B)),B};function ie(w,B){var W=B.type;if(W in w.g){var ue=w.g[W],Be=Array.prototype.indexOf.call(ue,B,void 0),Ye;(Ye=0<=Be)&&Array.prototype.splice.call(ue,Be,1),Ye&&(be(B),w.g[W].length==0&&(delete w.g[W],w.h--))}}function He(w,B,W,ue){for(var Be=0;Be<w.length;++Be){var Ye=w[Be];if(!Ye.da&&Ye.listener==B&&Ye.capture==!!W&&Ye.ha==ue)return Be}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),he={};function We(w,B,W,ue,Be){if(Array.isArray(B)){for(var Ye=0;Ye<B.length;Ye++)We(w,B[Ye],W,ue,Be);return null}return W=Qt(W),w&&w[_e]?w.K(B,W,u(ue)?!!ue.capture:!1,Be):pt(w,B,W,!1,ue,Be)}function pt(w,B,W,ue,Be,Ye){if(!B)throw Error("Invalid event type");var Tt=u(Be)?!!Be.capture:!!Be,tr=Dt(w);if(tr||(w[Me]=tr=new we(w)),W=tr.add(B,W,ue,Tt,Ye),W.proxy)return W;if(ue=gt(),W.proxy=ue,ue.src=w,ue.listener=W,w.addEventListener)te||(Be=Tt),Be===void 0&&(Be=!1),w.addEventListener(B.toString(),ue,Be);else if(w.attachEvent)w.attachEvent(ft(B.toString()),ue);else if(w.addListener&&w.removeListener)w.addListener(ue);else throw Error("addEventListener and attachEvent are unavailable.");return W}function gt(){function w(W){return B.call(w.src,w.listener,W)}const B=ut;return w}function Xe(w,B,W,ue,Be){if(Array.isArray(B))for(var Ye=0;Ye<B.length;Ye++)Xe(w,B[Ye],W,ue,Be);else ue=u(ue)?!!ue.capture:!!ue,W=Qt(W),w&&w[_e]?(w=w.i,B=String(B).toString(),B in w.g&&(Ye=w.g[B],W=He(Ye,W,ue,Be),-1<W&&(be(Ye[W]),Array.prototype.splice.call(Ye,W,1),Ye.length==0&&(delete w.g[B],w.h--)))):w&&(w=Dt(w))&&(B=w.g[B.toString()],w=-1,B&&(w=He(B,W,ue,Be)),(W=-1<w?B[w]:null)&&Ot(W))}function Ot(w){if(typeof w!="number"&&w&&!w.da){var B=w.src;if(B&&B[_e])ie(B.i,w);else{var W=w.type,ue=w.proxy;B.removeEventListener?B.removeEventListener(W,ue,w.capture):B.detachEvent?B.detachEvent(ft(W),ue):B.addListener&&B.removeListener&&B.removeListener(ue),(W=Dt(B))?(ie(W,w),W.h==0&&(W.src=null,B[Me]=null)):be(w)}}}function ft(w){return w in he?he[w]:he[w]="on"+w}function ut(w,B){if(w.da)w=!0;else{B=new oe(B,this);var W=w.listener,ue=w.ha||w.src;w.fa&&Ot(w),w=W.call(ue,B)}return w}function Dt(w){return w=w[Me],w instanceof we?w:null}var Yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qt(w){return typeof w=="function"?w:(w[Yt]||(w[Yt]=function(B){return w.handleEvent(B)}),w[Yt])}function Ft(){$.call(this),this.i=new we(this),this.M=this,this.F=null}m(Ft,$),Ft.prototype[_e]=!0,Ft.prototype.removeEventListener=function(w,B,W,ue){Xe(this,w,B,W,ue)};function sn(w,B){var W,ue=w.F;if(ue)for(W=[];ue;ue=ue.F)W.push(ue);if(w=w.M,ue=B.type||B,typeof B=="string")B=new G(B,w);else if(B instanceof G)B.target=B.target||w;else{var Be=B;B=new G(ue,w),O(B,Be)}if(Be=!0,W)for(var Ye=W.length-1;0<=Ye;Ye--){var Tt=B.g=W[Ye];Be=at(Tt,ue,!0,B)&&Be}if(Tt=B.g=w,Be=at(Tt,ue,!0,B)&&Be,Be=at(Tt,ue,!1,B)&&Be,W)for(Ye=0;Ye<W.length;Ye++)Tt=B.g=W[Ye],Be=at(Tt,ue,!1,B)&&Be}Ft.prototype.N=function(){if(Ft.aa.N.call(this),this.i){var w=this.i,B;for(B in w.g){for(var W=w.g[B],ue=0;ue<W.length;ue++)be(W[ue]);delete w.g[B],w.h--}}this.F=null},Ft.prototype.K=function(w,B,W,ue){return this.i.add(String(w),B,!1,W,ue)},Ft.prototype.L=function(w,B,W,ue){return this.i.add(String(w),B,!0,W,ue)};function at(w,B,W,ue){if(B=w.i.g[String(B)],!B)return!0;B=B.concat();for(var Be=!0,Ye=0;Ye<B.length;++Ye){var Tt=B[Ye];if(Tt&&!Tt.da&&Tt.capture==W){var tr=Tt.listener,ei=Tt.ha||Tt.src;Tt.fa&&ie(w.i,Tt),Be=tr.call(ei,ue)!==!1&&Be}}return Be&&!ue.defaultPrevented}function vt(w,B,W){if(typeof w=="function")W&&(w=p(w,W));else if(w&&typeof w.handleEvent=="function")w=p(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(B)?-1:o.setTimeout(w,B||0)}function xt(w){w.g=vt(()=>{w.g=null,w.i&&(w.i=!1,xt(w))},w.l);const B=w.h;w.h=null,w.m.apply(null,B)}class tt extends ${constructor(B,W){super(),this.m=B,this.l=W,this.h=null,this.i=!1,this.g=null}j(B){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zt(w){$.call(this),this.h=w,this.g={}}m(zt,$);var ht=[];function mt(w){T(w.g,function(B,W){this.g.hasOwnProperty(W)&&Ot(B)},w),w.g={}}zt.prototype.N=function(){zt.aa.N.call(this),mt(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mt=o.JSON.stringify,_t=o.JSON.parse,Ht=class{stringify(w){return o.JSON.stringify(w,void 0)}parse(w){return o.JSON.parse(w,void 0)}};function gn(){}gn.prototype.h=null;function on(w){return w.h||(w.h=w.i())}function wt(){}var Xn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fn(){G.call(this,"d")}m(fn,G);function qt(){G.call(this,"c")}m(qt,G);var Sn={},Oi=null;function Nr(){return Oi=Oi||new Ft}Sn.La="serverreachability";function wa(w){G.call(this,Sn.La,w)}m(wa,G);function Re(w){const B=Nr();sn(B,new wa(B))}Sn.STAT_EVENT="statevent";function Ie(w,B){G.call(this,Sn.STAT_EVENT,w),this.stat=B}m(Ie,G);function Ke(w){const B=Nr();sn(B,new Ie(B,w))}Sn.Ma="timingevent";function At(w,B){G.call(this,Sn.Ma,w),this.size=B}m(At,G);function lt(w,B){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){w()},B)}function Gt(){this.g=!0}Gt.prototype.xa=function(){this.g=!1};function vn(w,B,W,ue,Be,Ye){w.info(function(){if(w.g)if(Ye)for(var Tt="",tr=Ye.split("&"),ei=0;ei<tr.length;ei++){var Bn=tr[ei].split("=");if(1<Bn.length){var Vn=Bn[0];Bn=Bn[1];var Lr=Vn.split("_");Tt=2<=Lr.length&&Lr[1]=="type"?Tt+(Vn+"="+Bn+"&"):Tt+(Vn+"=redacted&")}}else Tt=null;else Tt=Ye;return"XMLHTTP REQ ("+ue+") [attempt "+Be+"]: "+B+`
`+W+`
`+Tt})}function qn(w,B,W,ue,Be,Ye,Tt){w.info(function(){return"XMLHTTP RESP ("+ue+") [ attempt "+Be+"]: "+B+`
`+W+`
`+Ye+" "+Tt})}function $t(w,B,W,ue){w.info(function(){return"XMLHTTP TEXT ("+B+"): "+bi(w,W)+(ue?" "+ue:"")})}function Kn(w,B){w.info(function(){return"TIMEOUT: "+B})}Gt.prototype.info=function(){};function bi(w,B){if(!w.g)return B;if(!B)return null;try{var W=JSON.parse(B);if(W){for(w=0;w<W.length;w++)if(Array.isArray(W[w])){var ue=W[w];if(!(2>ue.length)){var Be=ue[1];if(Array.isArray(Be)&&!(1>Be.length)){var Ye=Be[0];if(Ye!="noop"&&Ye!="stop"&&Ye!="close")for(var Tt=1;Tt<Be.length;Tt++)Be[Tt]=""}}}}return Mt(W)}catch{return B}}var _n={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vr;function Qn(){}m(Qn,gn),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},vr=new Qn;function sr(w,B,W,ue){this.j=w,this.i=B,this.l=W,this.R=ue||1,this.U=new zt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rr}function Rr(){this.i=null,this.g="",this.h=!1}var bs={},Sa={};function Do(w,B,W){w.L=1,w.v=Gs(_a(B)),w.m=W,w.P=!0,Io(w,null)}function Io(w,B){w.F=Date.now(),ua(w),w.A=_a(w.v);var W=w.A,ue=w.R;Array.isArray(ue)||(ue=[String(ue)]),Jt(W.i,"t",ue),w.C=0,W=w.j.J,w.h=new Rr,w.g=Dr(w.j,W?B:null,!w.m),0<w.O&&(w.M=new tt(p(w.Y,w,w.g),w.O)),B=w.U,W=w.g,ue=w.ca;var Be="readystatechange";Array.isArray(Be)||(Be&&(ht[0]=Be.toString()),Be=ht);for(var Ye=0;Ye<Be.length;Ye++){var Tt=We(W,Be[Ye],ue||B.handleEvent,!1,B.h||B);if(!Tt)break;B.g[Tt.key]=Tt}B=w.H?E(w.H):{},w.m?(w.u||(w.u="POST"),B["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,B)):(w.u="GET",w.g.ea(w.A,w.u,null,B)),Re(),vn(w.i,w.u,w.A,w.l,w.R,w.m)}sr.prototype.ca=function(w){w=w.target;const B=this.M;B&&js(w)==3?B.j():this.Y(w)},sr.prototype.Y=function(w){try{if(w==this.g)e:{const Lr=js(this.g);var B=this.g.Ba();const ns=this.g.Z();if(!(3>Lr)&&(Lr!=3||this.g&&(this.h.h||this.g.oa()||ac(this.g)))){this.J||Lr!=4||B==7||(B==8||0>=ns?Re(3):Re(2)),qs(this);var W=this.g.Z();this.X=W;t:if(Er(this)){var ue=ac(this.g);w="";var Be=ue.length,Ye=js(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){es(this),Ni(this);var Tt="";break t}this.h.i=new o.TextDecoder}for(B=0;B<Be;B++)this.h.h=!0,w+=this.h.i.decode(ue[B],{stream:!(Ye&&B==Be-1)});ue.length=0,this.h.g+=w,this.C=0,Tt=this.h.g}else Tt=this.g.oa();if(this.o=W==200,qn(this.i,this.u,this.A,this.l,this.R,Lr,W),this.o){if(this.T&&!this.K){t:{if(this.g){var tr,ei=this.g;if((tr=ei.g?ei.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(tr)){var Bn=tr;break t}}Bn=null}if(W=Bn)$t(this.i,this.l,W,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wl(this,W);else{this.o=!1,this.s=3,Ke(12),es(this),Ni(this);break e}}if(this.P){W=!0;let ja;for(;!this.J&&this.C<Tt.length;)if(ja=Oo(this,Tt),ja==Sa){Lr==4&&(this.s=4,Ke(14),W=!1),$t(this.i,this.l,null,"[Incomplete Response]");break}else if(ja==bs){this.s=4,Ke(15),$t(this.i,this.l,Tt,"[Invalid Chunk]"),W=!1;break}else $t(this.i,this.l,ja,null),wl(this,ja);if(Er(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lr!=4||Tt.length!=0||this.h.h||(this.s=1,Ke(16),W=!1),this.o=this.o&&W,!W)$t(this.i,this.l,Tt,"[Invalid Chunked Response]"),es(this),Ni(this);else if(0<Tt.length&&!this.W){this.W=!0;var Vn=this.j;Vn.g==this&&Vn.ba&&!Vn.M&&(Vn.j.info("Great, no buffering proxy detected. Bytes received: "+Tt.length),Kt(Vn),Vn.M=!0,Ke(11))}}else $t(this.i,this.l,Tt,null),wl(this,Tt);Lr==4&&es(this),this.o&&!this.J&&(Lr==4?xn(this.j,this):(this.o=!1,ua(this)))}else Xs(this.g),W==400&&0<Tt.indexOf("Unknown SID")?(this.s=3,Ke(12)):(this.s=0,Ke(13)),es(this),Ni(this)}}}catch{}finally{}};function Er(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function Oo(w,B){var W=w.C,ue=B.indexOf(`
`,W);return ue==-1?Sa:(W=Number(B.substring(W,ue)),isNaN(W)?bs:(ue+=1,ue+W>B.length?Sa:(B=B.slice(ue,ue+W),w.C=ue+W,B)))}sr.prototype.cancel=function(){this.J=!0,es(this)};function ua(w){w.S=Date.now()+w.I,$c(w,w.I)}function $c(w,B){if(w.B!=null)throw Error("WatchDog timer not null");w.B=lt(p(w.ba,w),B)}function qs(w){w.B&&(o.clearTimeout(w.B),w.B=null)}sr.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(Kn(this.i,this.A),this.L!=2&&(Re(),Ke(17)),es(this),this.s=2,Ni(this)):$c(this,this.S-w)};function Ni(w){w.j.G==0||w.J||xn(w.j,w)}function es(w){qs(w);var B=w.M;B&&typeof B.ma=="function"&&B.ma(),w.M=null,mt(w.U),w.g&&(B=w.g,w.g=null,B.abort(),B.ma())}function wl(w,B){try{var W=w.j;if(W.G!=0&&(W.g==w||Tn(W.h,w))){if(!w.K&&Tn(W.h,w)&&W.G==3){try{var ue=W.Da.g.parse(B)}catch{ue=null}if(Array.isArray(ue)&&ue.length==3){var Be=ue;if(Be[0]==0){e:if(!W.u){if(W.g)if(W.g.F+3e3<w.F)yn(W),ts(W);else break e;st(W),Ke(18)}}else W.za=Be[1],0<W.za-W.T&&37500>Be[2]&&W.F&&W.v==0&&!W.C&&(W.C=lt(p(W.Za,W),6e3));if(1>=Vc(W.h)&&W.ca){try{W.ca()}catch{}W.ca=void 0}}else fr(W,11)}else if((w.K||W.g==w)&&yn(W),!b(B))for(Be=W.Da.g.parse(B),B=0;B<Be.length;B++){let Bn=Be[B];if(W.T=Bn[0],Bn=Bn[1],W.G==2)if(Bn[0]=="c"){W.K=Bn[1],W.ia=Bn[2];const Vn=Bn[3];Vn!=null&&(W.la=Vn,W.j.info("VER="+W.la));const Lr=Bn[4];Lr!=null&&(W.Aa=Lr,W.j.info("SVER="+W.Aa));const ns=Bn[5];ns!=null&&typeof ns=="number"&&0<ns&&(ue=1.5*ns,W.L=ue,W.j.info("backChannelRequestTimeoutMs_="+ue)),ue=W;const ja=w.g;if(ja){const fa=ja.g?ja.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fa){var Ye=ue.h;Ye.g||fa.indexOf("spdy")==-1&&fa.indexOf("quic")==-1&&fa.indexOf("h2")==-1||(Ye.j=Ye.l,Ye.g=new Set,Ye.h&&(Uc(Ye,Ye.h),Ye.h=null))}if(ue.D){const Vo=ja.g?ja.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(ue.ya=Vo,Yn(ue.I,ue.D,Vo))}}W.G=3,W.l&&W.l.ua(),W.ba&&(W.R=Date.now()-w.F,W.j.info("Handshake RTT: "+W.R+"ms")),ue=W;var Tt=w;if(ue.qa=br(ue,ue.J?ue.ia:null,ue.W),Tt.K){Zr(ue.h,Tt);var tr=Tt,ei=ue.L;ei&&(tr.I=ei),tr.B&&(qs(tr),ua(tr)),ue.g=Tt}else rt(ue);0<W.i.length&&R(W)}else Bn[0]!="stop"&&Bn[0]!="close"||fr(W,7);else W.G==3&&(Bn[0]=="stop"||Bn[0]=="close"?Bn[0]=="stop"?fr(W,7):Bo(W):Bn[0]!="noop"&&W.l&&W.l.ta(Bn),W.v=0)}}Re(4)}catch{}}var Ks=class{constructor(w,B){this.g=w,this.map=B}};function Bc(w){this.l=w||10,o.PerformanceNavigationTiming?(w=o.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sl(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function Vc(w){return w.h?1:w.g?w.g.size:0}function Tn(w,B){return w.h?w.h==B:w.g?w.g.has(B):!1}function Uc(w,B){w.g?w.g.add(B):w.h=B}function Zr(w,B){w.h&&w.h==B?w.h=null:w.g&&w.g.has(B)&&w.g.delete(B)}Bc.prototype.cancel=function(){if(this.i=_l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function _l(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let B=w.i;for(const W of w.g.values())B=B.concat(W.D);return B}return g(w.i)}function _u(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(l(w)){for(var B=[],W=w.length,ue=0;ue<W;ue++)B.push(w[ue]);return B}B=[],W=0;for(ue in w)B[W++]=w[ue];return B}function Jn(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(l(w)||typeof w=="string"){var B=[];w=w.length;for(var W=0;W<w;W++)B.push(W);return B}B=[],W=0;for(const ue in w)B[W++]=ue;return B}}}function xs(w,B){if(w.forEach&&typeof w.forEach=="function")w.forEach(B,void 0);else if(l(w)||typeof w=="string")Array.prototype.forEach.call(w,B,void 0);else for(var W=Jn(w),ue=_u(w),Be=ue.length,Ye=0;Ye<Be;Ye++)B.call(void 0,ue[Ye],W&&W[Ye],w)}var da=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ws(w,B){if(w){w=w.split("&");for(var W=0;W<w.length;W++){var ue=w[W].indexOf("="),Be=null;if(0<=ue){var Ye=w[W].substring(0,ue);Be=w[W].substring(ue+1)}else Ye=w[W];B(Ye,Be?decodeURIComponent(Be.replace(/\+/g," ")):"")}}}function yr(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof yr){this.h=w.h,Mo(this,w.j),this.o=w.o,this.g=w.g,Jl(this,w.s),this.l=w.l;var B=w.i,W=new Aa;W.i=B.i,B.g&&(W.g=new Map(B.g),W.h=B.h),ec(this,W),this.m=w.m}else w&&(B=String(w).match(da))?(this.h=!1,Mo(this,B[1]||"",!0),this.o=Ro(B[2]||""),this.g=Ro(B[3]||"",!0),Jl(this,B[4]),this.l=Ro(B[5]||"",!0),ec(this,B[6]||"",!0),this.m=Ro(B[7]||"")):(this.h=!1,this.i=new Aa(null,this.h))}yr.prototype.toString=function(){var w=[],B=this.j;B&&w.push(Ss(B,Au,!0),":");var W=this.g;return(W||B=="file")&&(w.push("//"),(B=this.o)&&w.push(Ss(B,Au,!0),"@"),w.push(encodeURIComponent(String(W)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),W=this.s,W!=null&&w.push(":",String(W))),(W=this.l)&&(this.g&&W.charAt(0)!="/"&&w.push("/"),w.push(Ss(W,W.charAt(0)=="/"?Vf:Bf,!0))),(W=this.i.toString())&&w.push("?",W),(W=this.m)&&w.push("#",Ss(W,_s)),w.join("")};function _a(w){return new yr(w)}function Mo(w,B,W){w.j=W?Ro(B,!0):B,w.j&&(w.j=w.j.replace(/:$/,""))}function Jl(w,B){if(B){if(B=Number(B),isNaN(B)||0>B)throw Error("Bad port number "+B);w.s=B}else w.s=null}function ec(w,B,W){B instanceof Aa?(w.i=B,nc(w.i,w.h)):(W||(B=Ss(B,Gi)),w.i=new Aa(B,w.h))}function Yn(w,B,W){w.i.set(B,W)}function Gs(w){return Yn(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function Ro(w,B){return w?B?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function Ss(w,B,W){return typeof w=="string"?(w=encodeURI(w).replace(B,Gn),W&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function Gn(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var Au=/[#\/\?@]/g,Bf=/[#\?:]/g,Vf=/[#\?]/g,Gi=/[#\?@]/g,_s=/#/g;function Aa(w,B){this.h=this.g=null,this.i=w||null,this.j=!!B}function Yi(w){w.g||(w.g=new Map,w.h=0,w.i&&ws(w.i,function(B,W){w.add(decodeURIComponent(B.replace(/\+/g," ")),W)}))}t=Aa.prototype,t.add=function(w,B){Yi(this),this.i=null,w=Xi(this,w);var W=this.g.get(w);return W||this.g.set(w,W=[]),W.push(B),this.h+=1,this};function Lo(w,B){Yi(w),B=Xi(w,B),w.g.has(B)&&(w.i=null,w.h-=w.g.get(B).length,w.g.delete(B))}function tc(w,B){return Yi(w),B=Xi(w,B),w.g.has(B)}t.forEach=function(w,B){Yi(this),this.g.forEach(function(W,ue){W.forEach(function(Be){w.call(B,Be,ue,this)},this)},this)},t.na=function(){Yi(this);const w=Array.from(this.g.values()),B=Array.from(this.g.keys()),W=[];for(let ue=0;ue<B.length;ue++){const Be=w[ue];for(let Ye=0;Ye<Be.length;Ye++)W.push(B[ue])}return W},t.V=function(w){Yi(this);let B=[];if(typeof w=="string")tc(this,w)&&(B=B.concat(this.g.get(Xi(this,w))));else{w=Array.from(this.g.values());for(let W=0;W<w.length;W++)B=B.concat(w[W])}return B},t.set=function(w,B){return Yi(this),this.i=null,w=Xi(this,w),tc(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[B]),this.h+=1,this},t.get=function(w,B){return w?(w=this.V(w),0<w.length?String(w[0]):B):B};function Jt(w,B,W){Lo(w,B),0<W.length&&(w.i=null,w.g.set(Xi(w,B),g(W)),w.h+=W.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],B=Array.from(this.g.keys());for(var W=0;W<B.length;W++){var ue=B[W];const Ye=encodeURIComponent(String(ue)),Tt=this.V(ue);for(ue=0;ue<Tt.length;ue++){var Be=Ye;Tt[ue]!==""&&(Be+="="+encodeURIComponent(String(Tt[ue]))),w.push(Be)}}return this.i=w.join("&")};function Xi(w,B){return B=String(B),w.j&&(B=B.toLowerCase()),B}function nc(w,B){B&&!w.j&&(Yi(w),w.i=null,w.g.forEach(function(W,ue){var Be=ue.toLowerCase();ue!=Be&&(Lo(this,ue),Jt(this,Be,W))},w)),w.j=B}function rc(w,B){const W=new Gt;if(o.Image){const ue=new Image;ue.onload=h(Kr,W,"TestLoadImage: loaded",!0,B,ue),ue.onerror=h(Kr,W,"TestLoadImage: error",!1,B,ue),ue.onabort=h(Kr,W,"TestLoadImage: abort",!1,B,ue),ue.ontimeout=h(Kr,W,"TestLoadImage: timeout",!1,B,ue),o.setTimeout(function(){ue.ontimeout&&ue.ontimeout()},1e4),ue.src=w}else B(!1)}function Cu(w,B){const W=new Gt,ue=new AbortController,Be=setTimeout(()=>{ue.abort(),Kr(W,"TestPingServer: timeout",!1,B)},1e4);fetch(w,{signal:ue.signal}).then(Ye=>{clearTimeout(Be),Ye.ok?Kr(W,"TestPingServer: ok",!0,B):Kr(W,"TestPingServer: server error",!1,B)}).catch(()=>{clearTimeout(Be),Kr(W,"TestPingServer: error",!1,B)})}function Kr(w,B,W,ue,Be){try{Be&&(Be.onload=null,Be.onerror=null,Be.onabort=null,Be.ontimeout=null),ue(W)}catch{}}function Fo(){this.g=new Ht}function As(w,B,W){const ue=W||"";try{xs(w,function(Be,Ye){let Tt=Be;u(Be)&&(Tt=Mt(Be)),B.push(ue+Ye+"="+encodeURIComponent(Tt))})}catch(Be){throw B.push(ue+"type="+encodeURIComponent("_badmap")),Be}}function Al(w){this.l=w.Ub||null,this.j=w.eb||!1}m(Al,gn),Al.prototype.g=function(){return new uo(this.l,this.j)},Al.prototype.i=function(w){return function(){return w}}({});function uo(w,B){Ft.call(this),this.D=w,this.o=B,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(uo,Ft),t=uo.prototype,t.open=function(w,B){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=B,this.readyState=1,Cs(this)},t.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const B={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(B.body=w),(this.D||o).fetch(new Request(this.A,B)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ca(this)),this.readyState=0},t.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cl(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cl(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}t.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var B=w.value?w.value:new Uint8Array(0);(B=this.v.decode(B,{stream:!w.done}))&&(this.response=this.responseText+=B)}w.done?Ca(this):Cs(this),this.readyState==3&&Cl(this)}},t.Ra=function(w){this.g&&(this.response=this.responseText=w,Ca(this))},t.Qa=function(w){this.g&&(this.response=w,Ca(this))},t.ga=function(){this.g&&Ca(this)};function Ca(w){w.readyState=4,w.l=null,w.j=null,w.v=null,Cs(w)}t.setRequestHeader=function(w,B){this.u.append(w,B)},t.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],B=this.h.entries();for(var W=B.next();!W.done;)W=W.value,w.push(W[0]+": "+W[1]),W=B.next();return w.join(`\r
`)};function Cs(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(uo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function jl(w){let B="";return T(w,function(W,ue){B+=ue,B+=":",B+=W,B+=`\r
`}),B}function ju(w,B,W){e:{for(ue in W){var ue=!1;break e}ue=!0}ue||(W=jl(W),typeof w=="string"?W!=null&&encodeURIComponent(String(W)):Yn(w,B,W))}function dr(w){Ft.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(dr,Ft);var Nu=/^https?$/i,ic=["POST","PUT"];t=dr.prototype,t.Ha=function(w){this.J=w},t.ea=function(w,B,W,ue){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);B=B?B.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vr.g(),this.v=this.o?on(this.o):on(vr),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(B,String(w),!0),this.B=!1}catch(Ye){Ys(this,Ye);return}if(w=W||"",W=new Map(this.headers),ue)if(Object.getPrototypeOf(ue)===Object.prototype)for(var Be in ue)W.set(Be,ue[Be]);else if(typeof ue.keys=="function"&&typeof ue.get=="function")for(const Ye of ue.keys())W.set(Ye,ue.get(Ye));else throw Error("Unknown input type for opt_headers: "+String(ue));ue=Array.from(W.keys()).find(Ye=>Ye.toLowerCase()=="content-type"),Be=o.FormData&&w instanceof o.FormData,!(0<=Array.prototype.indexOf.call(ic,B,void 0))||ue||Be||W.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ye,Tt]of W)this.g.setRequestHeader(Ye,Tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{El(this),this.u=!0,this.g.send(w),this.u=!1}catch(Ye){Ys(this,Ye)}};function Ys(w,B){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=B,w.m=5,zo(w),Nl(w)}function zo(w){w.A||(w.A=!0,sn(w,"complete"),sn(w,"error"))}t.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,sn(this,"complete"),sn(this,"abort"),Nl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nl(this,!0)),dr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$o(this):this.bb())},t.bb=function(){$o(this)};function $o(w){if(w.h&&typeof s<"u"&&(!w.v[1]||js(w)!=4||w.Z()!=2)){if(w.u&&js(w)==4)vt(w.Ea,0,w);else if(sn(w,"readystatechange"),js(w)==4){w.h=!1;try{const Tt=w.Z();e:switch(Tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break e;default:B=!1}var W;if(!(W=B)){var ue;if(ue=Tt===0){var Be=String(w.D).match(da)[1]||null;!Be&&o.self&&o.self.location&&(Be=o.self.location.protocol.slice(0,-1)),ue=!Nu.test(Be?Be.toLowerCase():"")}W=ue}if(W)sn(w,"complete"),sn(w,"success");else{w.m=6;try{var Ye=2<js(w)?w.g.statusText:""}catch{Ye=""}w.l=Ye+" ["+w.Z()+"]",zo(w)}}finally{Nl(w)}}}}function Nl(w,B){if(w.g){El(w);const W=w.g,ue=w.v[0]?()=>{}:null;w.g=null,w.v=null,B||sn(w,"ready");try{W.onreadystatechange=ue}catch{}}}function El(w){w.I&&(o.clearTimeout(w.I),w.I=null)}t.isActive=function(){return!!this.g};function js(w){return w.g?w.g.readyState:0}t.Z=function(){try{return 2<js(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(w){if(this.g){var B=this.g.responseText;return w&&B.indexOf(w)==0&&(B=B.substring(w.length)),_t(B)}};function ac(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function Xs(w){const B={};w=(w.g&&2<=js(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let ue=0;ue<w.length;ue++){if(b(w[ue]))continue;var W=D(w[ue]);const Be=W[0];if(W=W[1],typeof W!="string")continue;W=W.trim();const Ye=B[Be]||[];B[Be]=Ye,Ye.push(W)}j(B,function(ue){return ue.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Va(w,B,W){return W&&W.internalChannelParams&&W.internalChannelParams[w]||B}function kl(w){this.Aa=0,this.i=[],this.j=new Gt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Va("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Va("baseRetryDelayMs",5e3,w),this.cb=Va("retryDelaySeedMs",1e4,w),this.Wa=Va("forwardChannelMaxRetries",2,w),this.wa=Va("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new Bc(w&&w.concurrentRequestLimit),this.Da=new Fo,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=kl.prototype,t.la=8,t.G=1,t.connect=function(w,B,W,ue){Ke(0),this.W=w,this.H=B||{},W&&ue!==void 0&&(this.H.OSID=W,this.H.OAID=ue),this.F=this.X,this.I=br(this,null,this.W),R(this)};function Bo(w){if(Hc(w),w.G==3){var B=w.U++,W=_a(w.I);if(Yn(W,"SID",w.K),Yn(W,"RID",B),Yn(W,"TYPE","terminate"),Ne(w,W),B=new sr(w,w.j,B),B.L=2,B.v=Gs(_a(W)),W=!1,o.navigator&&o.navigator.sendBeacon)try{W=o.navigator.sendBeacon(B.v.toString(),"")}catch{}!W&&o.Image&&(new Image().src=B.v,W=!0),W||(B.g=Dr(B.j,null),B.g.ea(B.v)),B.F=Date.now(),ua(B)}Wr(w)}function ts(w){w.g&&(Kt(w),w.g.cancel(),w.g=null)}function Hc(w){ts(w),w.u&&(o.clearTimeout(w.u),w.u=null),yn(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&o.clearTimeout(w.s),w.s=null)}function R(w){if(!Sl(w.h)&&!w.s){w.s=!0;var B=w.Ga;J||le(),q||(J(),q=!0),ee.add(B,w),w.B=0}}function X(w,B){return Vc(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=B.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=lt(p(w.Ga,w,B),er(w,w.B)),w.B++,!0)}t.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const Be=new sr(this,this.j,w);let Ye=this.o;if(this.S&&(Ye?(Ye=E(Ye),O(Ye,this.S)):Ye=this.S),this.m!==null||this.O||(Be.H=Ye,Ye=null),this.P)e:{for(var B=0,W=0;W<this.i.length;W++){t:{var ue=this.i[W];if("__data__"in ue.map&&(ue=ue.map.__data__,typeof ue=="string")){ue=ue.length;break t}ue=void 0}if(ue===void 0)break;if(B+=ue,4096<B){B=W;break e}if(B===4096||W===this.i.length-1){B=W+1;break e}}B=1e3}else B=1e3;B=$e(this,Be,B),W=_a(this.I),Yn(W,"RID",w),Yn(W,"CVER",22),this.D&&Yn(W,"X-HTTP-Session-Id",this.D),Ne(this,W),Ye&&(this.O?B="headers="+encodeURIComponent(String(jl(Ye)))+"&"+B:this.m&&ju(W,this.m,Ye)),Uc(this.h,Be),this.Ua&&Yn(W,"TYPE","init"),this.P?(Yn(W,"$req",B),Yn(W,"SID","null"),Be.T=!0,Do(Be,W,null)):Do(Be,W,B),this.G=2}}else this.G==3&&(w?me(this,w):this.i.length==0||Sl(this.h)||me(this))};function me(w,B){var W;B?W=B.l:W=w.U++;const ue=_a(w.I);Yn(ue,"SID",w.K),Yn(ue,"RID",W),Yn(ue,"AID",w.T),Ne(w,ue),w.m&&w.o&&ju(ue,w.m,w.o),W=new sr(w,w.j,W,w.B+1),w.m===null&&(W.H=w.o),B&&(w.i=B.D.concat(w.i)),B=$e(w,W,1e3),W.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),Uc(w.h,W),Do(W,ue,B)}function Ne(w,B){w.H&&T(w.H,function(W,ue){Yn(B,ue,W)}),w.l&&xs({},function(W,ue){Yn(B,ue,W)})}function $e(w,B,W){W=Math.min(w.i.length,W);var ue=w.l?p(w.l.Na,w.l,w):null;e:{var Be=w.i;let Ye=-1;for(;;){const Tt=["count="+W];Ye==-1?0<W?(Ye=Be[0].g,Tt.push("ofs="+Ye)):Ye=0:Tt.push("ofs="+Ye);let tr=!0;for(let ei=0;ei<W;ei++){let Bn=Be[ei].g;const Vn=Be[ei].map;if(Bn-=Ye,0>Bn)Ye=Math.max(0,Be[ei].g-100),tr=!1;else try{As(Vn,Tt,"req"+Bn+"_")}catch{ue&&ue(Vn)}}if(tr){ue=Tt.join("&");break e}}}return w=w.i.splice(0,W),B.D=w,ue}function rt(w){if(!w.g&&!w.u){w.Y=1;var B=w.Fa;J||le(),q||(J(),q=!0),ee.add(B,w),w.v=0}}function st(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=lt(p(w.Fa,w),er(w,w.v)),w.v++,!0)}t.Fa=function(){if(this.u=null,Zt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=lt(p(this.ab,this),w)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ke(10),ts(this),Zt(this))};function Kt(w){w.A!=null&&(o.clearTimeout(w.A),w.A=null)}function Zt(w){w.g=new sr(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var B=_a(w.qa);Yn(B,"RID","rpc"),Yn(B,"SID",w.K),Yn(B,"AID",w.T),Yn(B,"CI",w.F?"0":"1"),!w.F&&w.ja&&Yn(B,"TO",w.ja),Yn(B,"TYPE","xmlhttp"),Ne(w,B),w.m&&w.o&&ju(B,w.m,w.o),w.L&&(w.g.I=w.L);var W=w.g;w=w.ia,W.L=1,W.v=Gs(_a(B)),W.m=null,W.P=!0,Io(W,w)}t.Za=function(){this.C!=null&&(this.C=null,ts(this),st(this),Ke(19))};function yn(w){w.C!=null&&(o.clearTimeout(w.C),w.C=null)}function xn(w,B){var W=null;if(w.g==B){yn(w),Kt(w),w.g=null;var ue=2}else if(Tn(w.h,B))W=B.D,Zr(w.h,B),ue=1;else return;if(w.G!=0){if(B.o)if(ue==1){W=B.m?B.m.length:0,B=Date.now()-B.F;var Be=w.B;ue=Nr(),sn(ue,new At(ue,W)),R(w)}else rt(w);else if(Be=B.s,Be==3||Be==0&&0<B.X||!(ue==1&&X(w,B)||ue==2&&st(w)))switch(W&&0<W.length&&(B=w.h,B.i=B.i.concat(W)),Be){case 1:fr(w,5);break;case 4:fr(w,10);break;case 3:fr(w,6);break;default:fr(w,2)}}}function er(w,B){let W=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(W*=2),W*B}function fr(w,B){if(w.j.info("Error code "+B),B==2){var W=p(w.fb,w),ue=w.Xa;const Be=!ue;ue=new yr(ue||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Mo(ue,"https"),Gs(ue),Be?rc(ue.toString(),W):Cu(ue.toString(),W)}else Ke(2);w.G=0,w.l&&w.l.sa(B),Wr(w),Hc(w)}t.fb=function(w){w?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function Wr(w){if(w.G=0,w.ka=[],w.l){const B=_l(w.h);(B.length!=0||w.i.length!=0)&&(v(w.ka,B),v(w.ka,w.i),w.h.i.length=0,g(w.i),w.i.length=0),w.l.ra()}}function br(w,B,W){var ue=W instanceof yr?_a(W):new yr(W);if(ue.g!="")B&&(ue.g=B+"."+ue.g),Jl(ue,ue.s);else{var Be=o.location;ue=Be.protocol,B=B?B+"."+Be.hostname:Be.hostname,Be=+Be.port;var Ye=new yr(null);ue&&Mo(Ye,ue),B&&(Ye.g=B),Be&&Jl(Ye,Be),W&&(Ye.l=W),ue=Ye}return W=w.D,B=w.ya,W&&B&&Yn(ue,W,B),Yn(ue,"VER",w.la),Ne(w,ue),ue}function Dr(w,B,W){if(B&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return B=w.Ca&&!w.pa?new dr(new Al({eb:W})):new dr(w.pa),B.Ha(w.J),B}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gr(){}t=Gr.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Jr(){}Jr.prototype.g=function(w,B){return new kr(w,B)};function kr(w,B){Ft.call(this),this.g=new kl(B),this.l=w,this.h=B&&B.messageUrlParams||null,w=B&&B.messageHeaders||null,B&&B.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=B&&B.initMessageHeaders||null,B&&B.messageContentType&&(w?w["X-WebChannel-Content-Type"]=B.messageContentType:w={"X-WebChannel-Content-Type":B.messageContentType}),B&&B.va&&(w?w["X-WebChannel-Client-Profile"]=B.va:w={"X-WebChannel-Client-Profile":B.va}),this.g.S=w,(w=B&&B.Sb)&&!b(w)&&(this.g.m=w),this.v=B&&B.supportsCrossDomainXhr||!1,this.u=B&&B.sendRawJson||!1,(B=B&&B.httpSessionIdParam)&&!b(B)&&(this.g.D=B,w=this.h,w!==null&&B in w&&(w=this.h,B in w&&delete w[B])),this.j=new Qs(this)}m(kr,Ft),kr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kr.prototype.close=function(){Bo(this.g)},kr.prototype.o=function(w){var B=this.g;if(typeof w=="string"){var W={};W.__data__=w,w=W}else this.u&&(W={},W.__data__=Mt(w),w=W);B.i.push(new Ks(B.Ya++,w)),B.G==3&&R(B)},kr.prototype.N=function(){this.g.l=null,delete this.j,Bo(this.g),delete this.g,kr.aa.N.call(this)};function Qi(w){fn.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var B=w.__sm__;if(B){e:{for(const W in B){w=W;break e}w=void 0}(this.i=w)&&(w=this.i,B=B!==null&&w in B?B[w]:void 0),this.data=B}else this.data=w}m(Qi,fn);function Wc(){qt.call(this),this.status=1}m(Wc,qt);function Qs(w){this.g=w}m(Qs,Gr),Qs.prototype.ua=function(){sn(this.g,"a")},Qs.prototype.ta=function(w){sn(this.g,new Qi(w))},Qs.prototype.sa=function(w){sn(this.g,new Wc)},Qs.prototype.ra=function(){sn(this.g,"b")},Jr.prototype.createWebChannel=Jr.prototype.g,kr.prototype.send=kr.prototype.o,kr.prototype.open=kr.prototype.m,kr.prototype.close=kr.prototype.close,hU=function(){return new Jr},fU=function(){return Nr()},dU=Sn,CN={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_n.NO_ERROR=0,_n.TIMEOUT=8,_n.HTTP_ERROR=6,B1=_n,gr.COMPLETE="complete",uU=gr,wt.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",Ft.prototype.listen=Ft.prototype.K,n0=wt,dr.prototype.listenOnce=dr.prototype.L,dr.prototype.getLastError=dr.prototype.Ka,dr.prototype.getLastErrorCode=dr.prototype.Ba,dr.prototype.getStatus=dr.prototype.Z,dr.prototype.getResponseJson=dr.prototype.Oa,dr.prototype.getResponseText=dr.prototype.oa,dr.prototype.send=dr.prototype.ea,dr.prototype.setWithCredentials=dr.prototype.Ha,cU=dr}).apply(typeof Mx<"u"?Mx:typeof self<"u"?self:typeof window<"u"?window:{});const rM="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}go.UNAUTHENTICATED=new go(null),go.GOOGLE_CREDENTIALS=new go("google-credentials-uid"),go.FIRST_PARTY=new go("first-party-uid"),go.MOCK_USER=new go("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new f4("@firebase/firestore");function Mv(){return qh.logLevel}function ln(t,...e){if(qh.logLevel<=cr.DEBUG){const n=e.map(y4);qh.debug(`Firestore (${Xg}): ${t}`,...n)}}function id(t,...e){if(qh.logLevel<=cr.ERROR){const n=e.map(y4);qh.error(`Firestore (${Xg}): ${t}`,...n)}}function hy(t,...e){if(qh.logLevel<=cr.WARN){const n=e.map(y4);qh.warn(`Firestore (${Xg}): ${t}`,...n)}}function y4(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t="Unexpected state"){const e=`FIRESTORE (${Xg}) INTERNAL ASSERTION FAILED: `+t;throw id(e),new Error(e)}function Ur(t,e){t||Dn()}function Fn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class en extends pd{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gae{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yae{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(go.UNAUTHENTICATED))}shutdown(){}}class Xae{constructor(e){this.t=e,this.currentUser=go.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ur(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new Dh;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Dh,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{ln("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ln("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Dh)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ln("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ur(typeof r.accessToken=="string"),new Gae(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ur(e===null||typeof e=="string"),new go(e)}}class Qae{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=go.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Zae{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Qae(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(go.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jae{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ese{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ur(this.o===void 0);const r=a=>{a.error!=null&&ln("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.R;return this.R=a.token,ln("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ln("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ln("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ur(typeof n.token=="string"),this.R=n.token,new Jae(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tse(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=tse(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function Cr(t,e){return t<e?-1:t>e?1:0}function eg(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new en(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new en(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new en(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new en(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ya.fromMillis(Date.now())}static fromDate(e){return ya.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ya(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Cr(this.nanoseconds,e.nanoseconds):Cr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ln(e)}static min(){return new Ln(new ya(0,0))}static max(){return new Ln(new ya(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,r){n===void 0?n=0:n>e.length&&Dn(),r===void 0?r=e.length-n:r>e.length-n&&Dn(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return py.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof py?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),s=n.get(i);if(a<s)return-1;if(a>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class gi extends py{construct(e,n,r){return new gi(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new en(bt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new gi(n)}static emptyPath(){return new gi([])}}const nse=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fs extends py{construct(e,n,r){return new fs(e,n,r)}static isValidIdentifier(e){return nse.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new fs(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new en(bt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new en(bt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new en(bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new en(bt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fs(n)}static emptyPath(){return new fs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.path=e}static fromPath(e){return new bn(gi.fromString(e))}static fromName(e){return new bn(gi.fromString(e).popFirst(5))}static empty(){return new bn(gi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gi.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bn(new gi(e.slice()))}}function rse(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ln.fromTimestamp(r===1e9?new ya(n+1,0):new ya(n,r));return new gf(i,bn.empty(),e)}function ise(t){return new gf(t.readTime,t.key,-1)}class gf{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gf(Ln.min(),bn.empty(),-1)}static max(){return new gf(Ln.max(),bn.empty(),-1)}}function ase(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=bn.comparator(t.documentKey,e.documentKey),n!==0?n:Cr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sse="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ose{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sb(t){if(t.code!==bt.FAILED_PRECONDITION||t.message!==sse)throw t;ln("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Dn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new jt((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof jt?n:jt.resolve(n)}catch(n){return jt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):jt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):jt.reject(n)}static resolve(e){return new jt((n,r)=>{n(e)})}static reject(e){return new jt((n,r)=>{r(e)})}static waitFor(e){return new jt((n,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&n()},l=>r(l))}),s=!0,a===i&&n()})}static or(e){let n=jt.resolve(!1);for(const r of e)n=n.next(i=>i?jt.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new jt((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;n(e[u]).next(d=>{s[u]=d,++o,o===a&&r(s)},d=>i(d))}})}static doWhile(e,n){return new jt((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function lse(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _b(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}b4.oe=-1;function G5(t){return t==null}function z2(t){return t===0&&1/t==-1/0}function cse(t){return typeof t=="number"&&Number.isInteger(t)&&!z2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fp(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this.comparator=e,this.root=n||ds.EMPTY}insert(e,n){return new Ti(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new Ti(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rx(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rx(this.root,e,this.comparator,!0)}}class Rx{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ds{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??ds.RED,this.left=i??ds.EMPTY,this.right=a??ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new ds(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ds.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dn();const e=this.left.check();if(e!==this.right.check())throw Dn();return e+(this.isRed()?0:1)}}ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1;ds.EMPTY=new class{constructor(){this.size=0}get key(){throw Dn()}get value(){throw Dn()}get color(){throw Dn()}get left(){throw Dn()}get right(){throw Dn()}copy(e,n,r,i,a){return this}insert(e,n,r){return new ds(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.comparator=e,this.data=new Ti(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aM(this.data.getIterator())}getIteratorFrom(e){return new aM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ms)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ms(this.comparator);return n.data=e,n}}class aM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.fields=e,e.sort(fs.comparator)}static empty(){return new rl([])}unionWith(e){let n=new ms(fs.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rl(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return eg(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new gU("Invalid base64 string: "+a):a}}(e);return new ys(n)}static fromUint8Array(e){const n=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new ys(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Cr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ys.EMPTY_BYTE_STRING=new ys("");const use=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vf(t){if(Ur(!!t),typeof t=="string"){let e=0;const n=use.exec(t);if(Ur(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ra(t.seconds),nanos:ra(t.nanos)}}function ra(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kh(t){return typeof t=="string"?ys.fromBase64String(t):ys.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function w4(t){const e=t.mapValue.fields.__previous_value__;return x4(e)?w4(e):e}function my(t){const e=vf(t.mapValue.fields.__local_write_time__.timestampValue);return new ya(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dse{constructor(e,n,r,i,a,s,o,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u}}class gy{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new gy("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gy&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={mapValue:{}};function Gh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?x4(t)?4:hse(t)?9007199254740991:fse(t)?10:11:Dn()}function fu(t,e){if(t===e)return!0;const n=Gh(t);if(n!==Gh(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return my(t).isEqual(my(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=vf(i.timestampValue),o=vf(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Kh(i.bytesValue).isEqual(Kh(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return ra(i.geoPointValue.latitude)===ra(a.geoPointValue.latitude)&&ra(i.geoPointValue.longitude)===ra(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ra(i.integerValue)===ra(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=ra(i.doubleValue),o=ra(a.doubleValue);return s===o?z2(s)===z2(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return eg(t.arrayValue.values||[],e.arrayValue.values||[],fu);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(iM(s)!==iM(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!fu(s[l],o[l])))return!1;return!0}(t,e);default:return Dn()}}function vy(t,e){return(t.values||[]).find(n=>fu(n,e))!==void 0}function tg(t,e){if(t===e)return 0;const n=Gh(t),r=Gh(e);if(n!==r)return Cr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Cr(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=ra(a.integerValue||a.doubleValue),l=ra(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return sM(t.timestampValue,e.timestampValue);case 4:return sM(my(t),my(e));case 5:return Cr(t.stringValue,e.stringValue);case 6:return function(a,s){const o=Kh(a),l=Kh(s);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),l=s.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=Cr(o[u],l[u]);if(d!==0)return d}return Cr(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=Cr(ra(a.latitude),ra(s.latitude));return o!==0?o:Cr(ra(a.longitude),ra(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return oM(t.arrayValue,e.arrayValue);case 10:return function(a,s){var o,l,u,d;const f=a.fields||{},p=s.fields||{},h=(o=f.value)===null||o===void 0?void 0:o.arrayValue,m=(l=p.value)===null||l===void 0?void 0:l.arrayValue,g=Cr(((u=h==null?void 0:h.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return g!==0?g:oM(h,m)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===Lx.mapValue&&s===Lx.mapValue)return 0;if(a===Lx.mapValue)return 1;if(s===Lx.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=s.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=Cr(l[f],d[f]);if(p!==0)return p;const h=tg(o[l[f]],u[d[f]]);if(h!==0)return h}return Cr(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Dn()}}function sM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Cr(t,e);const n=vf(t),r=vf(e),i=Cr(n.seconds,r.seconds);return i!==0?i:Cr(n.nanos,r.nanos)}function oM(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=tg(n[i],r[i]);if(a)return a}return Cr(n.length,r.length)}function ng(t){return jN(t)}function jN(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vf(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kh(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return bn.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=jN(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${jN(n.fields[s])}`;return i+"}"}(t.mapValue):Dn()}function lM(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function NN(t){return!!t&&"integerValue"in t}function S4(t){return!!t&&"arrayValue"in t}function cM(t){return!!t&&"nullValue"in t}function uM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function V1(t){return!!t&&"mapValue"in t}function fse(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function x0(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fp(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=x0(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=x0(t.arrayValue.values[n]);return e}return Object.assign({},t)}function hse(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.value=e}static empty(){return new yo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!V1(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=x0(n)}setAll(e){let n=fs.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=x0(s):i.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());V1(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fu(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];V1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fp(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new yo(x0(this.value))}}function vU(t){const e=[];return fp(t.fields,(n,r)=>{const i=new fs([n]);if(V1(r)){const a=vU(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new rl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Bs(e,0,Ln.min(),Ln.min(),Ln.min(),yo.empty(),0)}static newFoundDocument(e,n,r,i){return new Bs(e,1,n,Ln.min(),r,i,0)}static newNoDocument(e,n){return new Bs(e,2,n,Ln.min(),Ln.min(),yo.empty(),0)}static newUnknownDocument(e,n){return new Bs(e,3,n,Ln.min(),Ln.min(),yo.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ln.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ln.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n){this.position=e,this.inclusive=n}}function dM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=bn.comparator(bn.fromName(s.referenceValue),n.key):r=tg(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function fM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fu(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n="asc"){this.field=e,this.dir=n}}function pse(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yU=class{};class va extends yU{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gse(e,n,r):n==="array-contains"?new bse(e,r):n==="in"?new xse(e,r):n==="not-in"?new wse(e,r):n==="array-contains-any"?new Sse(e,r):new va(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vse(e,r):new yse(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(tg(n,this.value)):n!==null&&Gh(this.value)===Gh(n)&&this.matchesComparison(tg(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Dn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ec extends yU{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ec(e,n)}matches(e){return bU(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bU(t){return t.op==="and"}function xU(t){return mse(t)&&bU(t)}function mse(t){for(const e of t.filters)if(e instanceof Ec)return!1;return!0}function EN(t){if(t instanceof va)return t.field.canonicalString()+t.op.toString()+ng(t.value);if(xU(t))return t.filters.map(e=>EN(e)).join(",");{const e=t.filters.map(n=>EN(n)).join(",");return`${t.op}(${e})`}}function wU(t,e){return t instanceof va?function(r,i){return i instanceof va&&r.op===i.op&&r.field.isEqual(i.field)&&fu(r.value,i.value)}(t,e):t instanceof Ec?function(r,i){return i instanceof Ec&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&wU(s,i.filters[o]),!0):!1}(t,e):void Dn()}function SU(t){return t instanceof va?function(n){return`${n.field.canonicalString()} ${n.op} ${ng(n.value)}`}(t):t instanceof Ec?function(n){return n.op.toString()+" {"+n.getFilters().map(SU).join(" ,")+"}"}(t):"Filter"}class gse extends va{constructor(e,n,r){super(e,n,r),this.key=bn.fromName(r.referenceValue)}matches(e){const n=bn.comparator(e.key,this.key);return this.matchesComparison(n)}}class vse extends va{constructor(e,n){super(e,"in",n),this.keys=_U("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yse extends va{constructor(e,n){super(e,"not-in",n),this.keys=_U("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _U(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>bn.fromName(r.referenceValue))}class bse extends va{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return S4(n)&&vy(n.arrayValue,this.value)}}class xse extends va{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vy(this.value.arrayValue,n)}}class wse extends va{constructor(e,n){super(e,"not-in",n)}matches(e){if(vy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!vy(this.value.arrayValue,n)}}class Sse extends va{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!S4(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vy(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _se{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.ue=null}}function hM(t,e=null,n=[],r=[],i=null,a=null,s=null){return new _se(t,e,n,r,i,a,s)}function _4(t){const e=Fn(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>EN(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),G5(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ng(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ng(r)).join(",")),e.ue=n}return e.ue}function A4(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pse(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wU(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fM(t.startAt,e.startAt)&&fM(t.endAt,e.endAt)}function kN(t){return bn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ase(t,e,n,r,i,a,s,o){return new Ab(t,e,n,r,i,a,s,o)}function C4(t){return new Ab(t)}function pM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AU(t){return t.collectionGroup!==null}function w0(t){const e=Fn(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new ms(fs.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new B2(a,r))}),n.has(fs.keyField().canonicalString())||e.ce.push(new B2(fs.keyField(),r))}return e.ce}function su(t){const e=Fn(t);return e.le||(e.le=Cse(e,w0(t))),e.le}function Cse(t,e){if(t.limitType==="F")return hM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new B2(i.field,a)});const n=t.endAt?new $2(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $2(t.startAt.position,t.startAt.inclusive):null;return hM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function PN(t,e){const n=t.filters.concat([e]);return new Ab(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function TN(t,e,n){return new Ab(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Y5(t,e){return A4(su(t),su(e))&&t.limitType===e.limitType}function CU(t){return`${_4(su(t))}|lt:${t.limitType}`}function Hp(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>SU(i)).join(", ")}]`),G5(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ng(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ng(i)).join(",")),`Target(${r})`}(su(t))}; limitType=${t.limitType})`}function X5(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):bn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of w0(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,o,l){const u=dM(s,o,l);return s.inclusive?u<=0:u<0}(r.startAt,w0(r),i)||r.endAt&&!function(s,o,l){const u=dM(s,o,l);return s.inclusive?u>=0:u>0}(r.endAt,w0(r),i))}(t,e)}function jse(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jU(t){return(e,n)=>{let r=!1;for(const i of w0(t)){const a=Nse(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Nse(t,e,n){const r=t.field.isKeyField()?bn.comparator(e.key,n.key):function(a,s,o){const l=s.data.field(a),u=o.data.field(a);return l!==null&&u!==null?tg(l,u):Dn()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Dn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fp(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return mU(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ese=new Ti(bn.comparator);function ad(){return Ese}const NU=new Ti(bn.comparator);function r0(...t){let e=NU;for(const n of t)e=e.insert(n.key,n);return e}function EU(t){let e=NU;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bh(){return S0()}function kU(){return S0()}function S0(){return new Qg(t=>t.toString(),(t,e)=>t.isEqual(e))}const kse=new Ti(bn.comparator),Pse=new ms(bn.comparator);function ar(...t){let e=Pse;for(const n of t)e=e.add(n);return e}const Tse=new ms(Cr);function Dse(){return Tse}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:z2(e)?"-0":e}}function PU(t){return{integerValue:""+t}}function Ise(t,e){return cse(e)?PU(e):j4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this._=void 0}}function Ose(t,e,n){return t instanceof yy?function(i,a){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&x4(a)&&(a=w4(a)),a&&(s.fields.__previous_value__=a),{mapValue:s}}(n,e):t instanceof by?DU(t,e):t instanceof xy?IU(t,e):function(i,a){const s=TU(i,a),o=mM(s)+mM(i.Pe);return NN(s)&&NN(i.Pe)?PU(o):j4(i.serializer,o)}(t,e)}function Mse(t,e,n){return t instanceof by?DU(t,e):t instanceof xy?IU(t,e):n}function TU(t,e){return t instanceof V2?function(r){return NN(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class yy extends Q5{}class by extends Q5{constructor(e){super(),this.elements=e}}function DU(t,e){const n=OU(e);for(const r of t.elements)n.some(i=>fu(i,r))||n.push(r);return{arrayValue:{values:n}}}class xy extends Q5{constructor(e){super(),this.elements=e}}function IU(t,e){let n=OU(e);for(const r of t.elements)n=n.filter(i=>!fu(i,r));return{arrayValue:{values:n}}}class V2 extends Q5{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function mM(t){return ra(t.integerValue||t.doubleValue)}function OU(t){return S4(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rse{constructor(e,n){this.field=e,this.transform=n}}function Lse(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof by&&i instanceof by||r instanceof xy&&i instanceof xy?eg(r.elements,i.elements,fu):r instanceof V2&&i instanceof V2?fu(r.Pe,i.Pe):r instanceof yy&&i instanceof yy}(t.transform,e.transform)}class Fse{constructor(e,n){this.version=e,this.transformResults=n}}class sl{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sl}static exists(e){return new sl(void 0,e)}static updateTime(e){return new sl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function U1(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Z5{}function MU(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new J5(t.key,sl.none()):new Cb(t.key,t.data,sl.none());{const n=t.data,r=yo.empty();let i=new ms(fs.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Ef(t.key,r,new rl(i.toArray()),sl.none())}}function zse(t,e,n){t instanceof Cb?function(i,a,s){const o=i.value.clone(),l=vM(i.fieldTransforms,a,s.transformResults);o.setAll(l),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ef?function(i,a,s){if(!U1(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=vM(i.fieldTransforms,a,s.transformResults),l=a.data;l.setAll(RU(i)),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function _0(t,e,n,r){return t instanceof Cb?function(a,s,o,l){if(!U1(a.precondition,s))return o;const u=a.value.clone(),d=yM(a.fieldTransforms,l,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ef?function(a,s,o,l){if(!U1(a.precondition,s))return o;const u=yM(a.fieldTransforms,l,s),d=s.data;return d.setAll(RU(a)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(a,s,o){return U1(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function $se(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=TU(r.transform,i||null);a!=null&&(n===null&&(n=yo.empty()),n.set(r.field,a))}return n||null}function gM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&eg(r,i,(a,s)=>Lse(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cb extends Z5{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ef extends Z5{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function RU(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function vM(t,e,n){const r=new Map;Ur(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,Mse(s,o,n[i]))}return r}function yM(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,Ose(a,s,e))}return r}class J5 extends Z5{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bse extends Z5{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vse{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&zse(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_0(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_0(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kU();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const l=MU(s,o);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ln.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ar())}isEqual(e){return this.batchId===e.batchId&&eg(this.mutations,e.mutations,(n,r)=>gM(n,r))&&eg(this.baseMutations,e.baseMutations,(n,r)=>gM(n,r))}}class N4{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ur(e.mutations.length===r.length);let i=function(){return kse}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new N4(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Use{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hse{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pa,pr;function Wse(t){switch(t){default:return Dn();case bt.CANCELLED:case bt.UNKNOWN:case bt.DEADLINE_EXCEEDED:case bt.RESOURCE_EXHAUSTED:case bt.INTERNAL:case bt.UNAVAILABLE:case bt.UNAUTHENTICATED:return!1;case bt.INVALID_ARGUMENT:case bt.NOT_FOUND:case bt.ALREADY_EXISTS:case bt.PERMISSION_DENIED:case bt.FAILED_PRECONDITION:case bt.ABORTED:case bt.OUT_OF_RANGE:case bt.UNIMPLEMENTED:case bt.DATA_LOSS:return!0}}function LU(t){if(t===void 0)return id("GRPC error has no .code"),bt.UNKNOWN;switch(t){case pa.OK:return bt.OK;case pa.CANCELLED:return bt.CANCELLED;case pa.UNKNOWN:return bt.UNKNOWN;case pa.DEADLINE_EXCEEDED:return bt.DEADLINE_EXCEEDED;case pa.RESOURCE_EXHAUSTED:return bt.RESOURCE_EXHAUSTED;case pa.INTERNAL:return bt.INTERNAL;case pa.UNAVAILABLE:return bt.UNAVAILABLE;case pa.UNAUTHENTICATED:return bt.UNAUTHENTICATED;case pa.INVALID_ARGUMENT:return bt.INVALID_ARGUMENT;case pa.NOT_FOUND:return bt.NOT_FOUND;case pa.ALREADY_EXISTS:return bt.ALREADY_EXISTS;case pa.PERMISSION_DENIED:return bt.PERMISSION_DENIED;case pa.FAILED_PRECONDITION:return bt.FAILED_PRECONDITION;case pa.ABORTED:return bt.ABORTED;case pa.OUT_OF_RANGE:return bt.OUT_OF_RANGE;case pa.UNIMPLEMENTED:return bt.UNIMPLEMENTED;case pa.DATA_LOSS:return bt.DATA_LOSS;default:return Dn()}}(pr=pa||(pa={}))[pr.OK=0]="OK",pr[pr.CANCELLED=1]="CANCELLED",pr[pr.UNKNOWN=2]="UNKNOWN",pr[pr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pr[pr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pr[pr.NOT_FOUND=5]="NOT_FOUND",pr[pr.ALREADY_EXISTS=6]="ALREADY_EXISTS",pr[pr.PERMISSION_DENIED=7]="PERMISSION_DENIED",pr[pr.UNAUTHENTICATED=16]="UNAUTHENTICATED",pr[pr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pr[pr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pr[pr.ABORTED=10]="ABORTED",pr[pr.OUT_OF_RANGE=11]="OUT_OF_RANGE",pr[pr.UNIMPLEMENTED=12]="UNIMPLEMENTED",pr[pr.INTERNAL=13]="INTERNAL",pr[pr.UNAVAILABLE=14]="UNAVAILABLE",pr[pr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qse(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kse=new Th([4294967295,4294967295],0);function bM(t){const e=qse().encode(t),n=new lU;return n.update(e),new Uint8Array(n.digest())}function xM(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Th([n,r],0),new Th([i,a],0)]}class E4{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new i0(`Invalid padding: ${n}`);if(r<0)throw new i0(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new i0(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new i0(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Th.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Th.fromNumber(r)));return i.compare(Kse)===1&&(i=new Th([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=bM(e),[r,i]=xM(n);for(let a=0;a<this.hashCount;a++){const s=this.Ee(r,i,a);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new E4(a,i,n);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.Ie===0)return;const n=bM(e),[r,i]=xM(n);for(let a=0;a<this.hashCount;a++){const s=this.Ee(r,i,a);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class i0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,jb.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new eS(Ln.min(),i,new Ti(Cr),ad(),ar())}}class jb{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new jb(r,n,ar(),ar(),ar())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class FU{constructor(e,n){this.targetId=e,this.me=n}}class zU{constructor(e,n,r=ys.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class wM{constructor(){this.fe=0,this.ge=_M(),this.pe=ys.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ar(),n=ar(),r=ar();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Dn()}}),new jb(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=_M()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ur(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Gse{constructor(e){this.Le=e,this.Be=new Map,this.ke=ad(),this.qe=SM(),this.Qe=new Ti(Cr)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Dn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(kN(a))if(r===0){const s=new bn(a.path);this.Ue(n,s,Bs.newNoDocument(s,Ln.min()))}else Ur(r===1);else{const s=this.Ye(n);if(s!==r){const o=this.Ze(e),l=o?this.Xe(o,e,s):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=Kh(r).toUint8Array()}catch(l){if(l instanceof gU)return hy("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new E4(s,i,a)}catch(l){return hy(l instanceof i0?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const s=this.Le.tt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,s)=>{const o=this.Je(s);if(o){if(a.current&&kN(o.target)){const l=new bn(o.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,Bs.newNoDocument(l,e))}a.be&&(n.set(s,a.ve()),a.Ce())}});let r=ar();this.qe.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ke.forEach((a,s)=>s.setReadTime(e));const i=new eS(e,n,this.Qe,this.ke,r);return this.ke=ad(),this.qe=SM(),this.Qe=new Ti(Cr),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new wM,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ms(Cr),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ln("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new wM),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function SM(){return new Ti(bn.comparator)}function _M(){return new Ti(bn.comparator)}const Yse={asc:"ASCENDING",desc:"DESCENDING"},Xse={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qse={and:"AND",or:"OR"};class Zse{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function DN(t,e){return t.useProto3Json||G5(e)?e:{value:e}}function U2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $U(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Jse(t,e){return U2(t,e.toTimestamp())}function ou(t){return Ur(!!t),Ln.fromTimestamp(function(n){const r=vf(n);return new ya(r.seconds,r.nanos)}(t))}function k4(t,e){return IN(t,e).canonicalString()}function IN(t,e){const n=function(i){return new gi(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BU(t){const e=gi.fromString(t);return Ur(qU(e)),e}function ON(t,e){return k4(t.databaseId,e.path)}function CA(t,e){const n=BU(e);if(n.get(1)!==t.databaseId.projectId)throw new en(bt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new en(bt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new bn(UU(n))}function VU(t,e){return k4(t.databaseId,e)}function eoe(t){const e=BU(t);return e.length===4?gi.emptyPath():UU(e)}function MN(t){return new gi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UU(t){return Ur(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function AM(t,e,n){return{name:ON(t,e),fields:n.value.mapValue.fields}}function toe(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Dn()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(Ur(d===void 0||typeof d=="string"),ys.fromBase64String(d||"")):(Ur(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ys.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(u){const d=u.code===void 0?bt.UNKNOWN:LU(u.code);return new en(d,u.message||"")}(s);n=new zU(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=CA(t,r.document.name),a=ou(r.document.updateTime),s=r.document.createTime?ou(r.document.createTime):Ln.min(),o=new yo({mapValue:{fields:r.document.fields}}),l=Bs.newFoundDocument(i,a,s,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new H1(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=CA(t,r.document),a=r.readTime?ou(r.readTime):Ln.min(),s=Bs.newNoDocument(i,a),o=r.removedTargetIds||[];n=new H1([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=CA(t,r.document),a=r.removedTargetIds||[];n=new H1([],a,i,null)}else{if(!("filter"in e))return Dn();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new Hse(i,a),o=r.targetId;n=new FU(o,s)}}return n}function noe(t,e){let n;if(e instanceof Cb)n={update:AM(t,e.key,e.value)};else if(e instanceof J5)n={delete:ON(t,e.key)};else if(e instanceof Ef)n={update:AM(t,e.key,e.data),updateMask:doe(e.fieldMask)};else{if(!(e instanceof Bse))return Dn();n={verify:ON(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof yy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof by)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof xy)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof V2)return{fieldPath:s.field.canonicalString(),increment:o.Pe};throw Dn()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:Jse(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Dn()}(t,e.precondition)),n}function roe(t,e){return t&&t.length>0?(Ur(e!==void 0),t.map(n=>function(i,a){let s=i.updateTime?ou(i.updateTime):ou(a);return s.isEqual(Ln.min())&&(s=ou(a)),new Fse(s,i.transformResults||[])}(n,e))):[]}function ioe(t,e){return{documents:[VU(t,e.path)]}}function aoe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VU(t,i);const a=function(u){if(u.length!==0)return WU(Ec.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const s=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:Wp(p.field),direction:loe(p.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=DN(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function soe(t){let e=eoe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ur(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(f){const p=HU(f);return p instanceof Ec&&xU(p)?p.getFilters():[p]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(p=>function(m){return new B2(qp(m.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(p))}(n.orderBy));let o=null;n.limit&&(o=function(f){let p;return p=typeof f=="object"?f.value:f,G5(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,h=f.values||[];return new $2(h,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,h=f.values||[];return new $2(h,p)}(n.endAt)),Ase(e,i,s,a,o,"F",l,u)}function ooe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dn()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HU(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qp(n.unaryFilter.field);return va.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qp(n.unaryFilter.field);return va.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=qp(n.unaryFilter.field);return va.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=qp(n.unaryFilter.field);return va.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Dn()}}(t):t.fieldFilter!==void 0?function(n){return va.create(qp(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dn()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ec.create(n.compositeFilter.filters.map(r=>HU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Dn()}}(n.compositeFilter.op))}(t):Dn()}function loe(t){return Yse[t]}function coe(t){return Xse[t]}function uoe(t){return Qse[t]}function Wp(t){return{fieldPath:t.canonicalString()}}function qp(t){return fs.fromServerFormat(t.fieldPath)}function WU(t){return t instanceof va?function(n){if(n.op==="=="){if(uM(n.value))return{unaryFilter:{field:Wp(n.field),op:"IS_NAN"}};if(cM(n.value))return{unaryFilter:{field:Wp(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uM(n.value))return{unaryFilter:{field:Wp(n.field),op:"IS_NOT_NAN"}};if(cM(n.value))return{unaryFilter:{field:Wp(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wp(n.field),op:coe(n.op),value:n.value}}}(t):t instanceof Ec?function(n){const r=n.getFilters().map(i=>WU(i));return r.length===1?r[0]:{compositeFilter:{op:uoe(n.op),filters:r}}}(t):Dn()}function doe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qU(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r,i,a=Ln.min(),s=Ln.min(),o=ys.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Kd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class foe{constructor(e){this.ct=e}}function hoe(t){const e=soe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?TN(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class poe{constructor(){this.un=new moe}addToCollectionParentIndex(e,n){return this.un.add(n),jt.resolve()}getCollectionParents(e,n){return jt.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return jt.resolve()}deleteFieldIndex(e,n){return jt.resolve()}deleteAllFieldIndexes(e){return jt.resolve()}createTargetIndexes(e,n){return jt.resolve()}getDocumentsMatchingTarget(e,n){return jt.resolve(null)}getIndexType(e,n){return jt.resolve(0)}getFieldIndexes(e,n){return jt.resolve([])}getNextCollectionGroupToUpdate(e){return jt.resolve(null)}getMinOffset(e,n){return jt.resolve(gf.min())}getMinOffsetFromCollectionGroup(e,n){return jt.resolve(gf.min())}updateCollectionGroup(e,n,r){return jt.resolve()}updateIndexEntries(e,n){return jt.resolve()}}class moe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ms(gi.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ms(gi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new rg(0)}static kn(){return new rg(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class goe{constructor(){this.changes=new Qg(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bs.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?jt.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class voe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yoe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_0(r.mutation,i,rl.empty(),ya.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ar()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ar()){const i=bh();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let s=r0();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=bh();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ar()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{n.set(s,o)})})}computeViews(e,n,r,i){let a=ad();const s=S0(),o=function(){return S0()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Ef)?a=a.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),_0(d.mutation,u,d.mutation.getFieldMask(),ya.now())):s.set(u.key,rl.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var f;return o.set(u,new voe(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,n){const r=S0();let i=new Ti((s,o)=>s-o),a=ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const o of s)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||rl.empty();d=o.applyToLocalView(u,d),r.set(l,d);const f=(i.get(o.batchId)||ar()).add(l);i=i.insert(o.batchId,f)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,f=kU();d.forEach(p=>{if(!a.has(p)){const h=MU(n.get(p),r.get(p));h!==null&&f.set(p,h),a=a.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return jt.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return bn.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):jt.resolve(bh());let o=-1,l=a;return s.next(u=>jt.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),a.get(d)?jt.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,ar())).next(d=>({batchId:o,changes:EU(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new bn(n)).next(r=>{let i=r0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=r0();return this.indexManager.getCollectionParents(e,a).next(o=>jt.forEach(o,l=>{const u=function(f,p){return new Ab(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,p)=>{s=s.insert(f,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(s=>{a.forEach((l,u)=>{const d=u.getKey();s.get(d)===null&&(s=s.insert(d,Bs.newInvalidDocument(d)))});let o=r0();return s.forEach((l,u)=>{const d=a.get(l);d!==void 0&&_0(d.mutation,u,rl.empty(),ya.now()),X5(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class boe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return jt.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ou(i.createTime)}}(n)),jt.resolve()}getNamedQuery(e,n){return jt.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:hoe(i.bundledQuery),readTime:ou(i.readTime)}}(n)),jt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xoe{constructor(){this.overlays=new Ti(bn.comparator),this.Ir=new Map}getOverlay(e,n){return jt.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bh();return jt.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.ht(e,n,a)}),jt.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),jt.resolve()}getOverlaysForCollection(e,n,r){const i=bh(),a=n.length+1,s=new bn(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>r&&i.set(l.getKey(),l)}return jt.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Ti((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=bh(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=bh(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=i)););return jt.resolve(o)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Use(n,r));let a=this.Ir.get(n);a===void 0&&(a=ar(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class woe{constructor(){this.sessionToken=ys.EMPTY_BYTE_STRING}getSessionToken(e){return jt.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,jt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.Tr=new ms(Ha.Er),this.dr=new ms(Ha.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ha(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ha(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new bn(new gi([])),r=new Ha(n,e),i=new Ha(n,e+1),a=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),a.push(s.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new bn(new gi([])),r=new Ha(n,e),i=new Ha(n,e+1);let a=ar();return this.dr.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const n=new Ha(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ha{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return bn.comparator(e.key,n.key)||Cr(e.wr,n.wr)}static Ar(e,n){return Cr(e.wr,n.wr)||bn.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Soe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ms(Ha.Er)}checkEmpty(e){return jt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Vse(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.br=this.br.add(new Ha(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return jt.resolve(s)}lookupMutationBatch(e,n){return jt.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return jt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return jt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return jt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ha(n,0),i=new Ha(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],s=>{const o=this.Dr(s.wr);a.push(o)}),jt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ms(Cr);return n.forEach(i=>{const a=new Ha(i,0),s=new Ha(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,s],o=>{r=r.add(o.wr)})}),jt.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;bn.isDocumentKey(a)||(a=a.child(""));const s=new Ha(new bn(a),0);let o=new ms(Cr);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.wr)),!0)},s),jt.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ur(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return jt.forEach(n.mutations,i=>{const a=new Ha(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ha(n,0),i=this.br.firstAfterOrEqual(r);return jt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,jt.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _oe{constructor(e){this.Mr=e,this.docs=function(){return new Ti(bn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return jt.resolve(r?r.document.mutableCopy():Bs.newInvalidDocument(n))}getEntries(e,n){let r=ad();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Bs.newInvalidDocument(i))}),jt.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ad();const s=n.path,o=new bn(s.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||ase(ise(d),r)<=0||(i.has(d.key)||X5(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return jt.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Dn()}Or(e,n){return jt.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Aoe(this)}getSize(e){return jt.resolve(this.size)}}class Aoe extends goe{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),jt.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Coe{constructor(e){this.persistence=e,this.Nr=new Qg(n=>_4(n),A4),this.lastRemoteSnapshotVersion=Ln.min(),this.highestTargetId=0,this.Lr=0,this.Br=new P4,this.targetCount=0,this.kr=rg.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),jt.resolve()}getLastRemoteSnapshotVersion(e){return jt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return jt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),jt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),jt.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new rg(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,jt.resolve()}updateTargetData(e,n){return this.Kn(n),jt.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,jt.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),jt.waitFor(a).next(()=>i)}getTargetCount(e){return jt.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return jt.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),jt.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),jt.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),jt.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return jt.resolve(r)}containsKey(e,n){return jt.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class joe{constructor(e,n){this.qr={},this.overlays={},this.Qr=new b4(0),this.Kr=!1,this.Kr=!0,this.$r=new woe,this.referenceDelegate=e(this),this.Ur=new Coe(this),this.indexManager=new poe,this.remoteDocumentCache=function(i){return new _oe(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new foe(n),this.Gr=new boe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xoe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Soe(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ln("MemoryPersistence","Starting transaction:",e);const i=new Noe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return jt.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Noe extends ose{constructor(e){super(),this.currentSequenceNumber=e}}class T4{constructor(e){this.persistence=e,this.Jr=new P4,this.Yr=null}static Zr(e){return new T4(e)}get Xr(){if(this.Yr)return this.Yr;throw Dn()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),jt.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),jt.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),jt.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jt.forEach(this.Xr,r=>{const i=bn.fromPath(r);return this.ei(e,i).next(a=>{a||n.removeEntry(i,Ln.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return jt.or([()=>jt.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ar(),i=ar();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new D4(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eoe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class koe{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xre()?8:lse(ko())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.Zi(e,n,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new Eoe;return this.Xi(e,n,s).next(o=>{if(a.result=o,this.zi)return this.es(e,n,s,o.size)})}).next(()=>a.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Mv()<=cr.DEBUG&&ln("QueryEngine","SDK will not create cache indexes for query:",Hp(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),jt.resolve()):(Mv()<=cr.DEBUG&&ln("QueryEngine","Query:",Hp(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Mv()<=cr.DEBUG&&ln("QueryEngine","The SDK decides to create cache indexes for query:",Hp(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,su(n))):jt.resolve())}Yi(e,n){if(pM(n))return jt.resolve(null);let r=su(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=TN(n,null,"F"),r=su(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=ar(...a);return this.Ji.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,o);return this.ns(n,u,s,l.readTime)?this.Yi(e,TN(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return pM(n)||i.isEqual(Ln.min())?jt.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const s=this.ts(n,a);return this.ns(n,s,r,i)?jt.resolve(null):(Mv()<=cr.DEBUG&&ln("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hp(n)),this.rs(e,s,n,rse(i,-1)).next(o=>o))})}ts(e,n){let r=new ms(jU(e));return n.forEach((i,a)=>{X5(e,a)&&(r=r.add(a))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return Mv()<=cr.DEBUG&&ln("QueryEngine","Using full collection scan to execute query:",Hp(n)),this.Ji.getDocumentsMatchingQuery(e,n,gf.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Poe{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ti(Cr),this._s=new Qg(a=>_4(a),A4),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yoe(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Toe(t,e,n,r){return new Poe(t,e,n,r)}async function KU(t,e){const n=Fn(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let l=ar();for(const u of i){s.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of a){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:o}))})})}function Doe(t,e){const n=Fn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const f=u.batch,p=f.keys();let h=jt.resolve();return p.forEach(m=>{h=h.next(()=>d.getEntry(l,m)).next(g=>{const v=u.docVersions.get(m);Ur(v!==null),g.version.compareTo(v)<0&&(f.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),d.addEntry(g)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=ar();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function GU(t){const e=Fn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Ioe(t,e){const n=Fn(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach((d,f)=>{const p=i.get(f);if(!p)return;o.push(n.Ur.removeMatchingKeys(a,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(a,d.addedDocuments,f)));let h=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?h=h.withResumeToken(ys.EMPTY_BYTE_STRING,Ln.min()).withLastLimboFreeSnapshotVersion(Ln.min()):d.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(d.resumeToken,r)),i=i.insert(f,h),function(g,v,y){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,h,d)&&o.push(n.Ur.updateTargetData(a,h))});let l=ad(),u=ar();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),o.push(Ooe(a,s,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(Ln.min())){const d=n.Ur.getLastRemoteSnapshotVersion(a).next(f=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(d)}return jt.waitFor(o).next(()=>s.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(n.os=i,a))}function Ooe(t,e,n){let r=ar(),i=ar();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let s=ad();return n.forEach((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Ln.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):ln("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function Moe(t,e){const n=Fn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Roe(t,e){const n=Fn(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(a=>a?(i=a,jt.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Kd(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function RN(t,e,n){const r=Fn(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!_b(s))throw s;ln("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function CM(t,e,n){const r=Fn(t);let i=Ln.min(),a=ar();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,d){const f=Fn(l),p=f._s.get(d);return p!==void 0?jt.resolve(f.os.get(p)):f.Ur.getTargetData(u,d)}(r,s,su(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:Ln.min(),n?a:ar())).next(o=>(Loe(r,jse(e),o),{documents:o,Ts:a})))}function Loe(t,e,n){let r=t.us.get(e)||Ln.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class jM{constructor(){this.activeTargetIds=Dse()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Foe{constructor(){this.so=new jM,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new jM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zoe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ln("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ln("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fx=null;function jA(){return Fx===null?Fx=function(){return 268435456+Math.round(2147483648*Math.random())}():Fx++,"0x"+Fx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $oe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Boe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="WebChannelConnection";class Voe extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,s){const o=jA(),l=this.xo(n,r.toUriEncodedString());ln("RestConnection",`Sending RPC '${n}' ${o}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,s),this.No(n,l,u,i).then(d=>(ln("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw hy("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,a,s,o){return this.Mo(n,r,i,a,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xg}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>n[s]=a),i&&i.headers.forEach((a,s)=>n[s]=a)}xo(n,r){const i=$oe[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=jA();return new Promise((s,o)=>{const l=new cU;l.setWithCredentials(!0),l.listenOnce(uU.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case B1.NO_ERROR:const d=l.getResponseJson();ln(Ts,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),s(d);break;case B1.TIMEOUT:ln(Ts,`RPC '${e}' ${a} timed out`),o(new en(bt.DEADLINE_EXCEEDED,"Request time out"));break;case B1.HTTP_ERROR:const f=l.getStatus();if(ln(Ts,`RPC '${e}' ${a} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const h=p==null?void 0:p.error;if(h&&h.status&&h.message){const m=function(v){const y=v.toLowerCase().replace(/_/g,"-");return Object.values(bt).indexOf(y)>=0?y:bt.UNKNOWN}(h.status);o(new en(m,h.message))}else o(new en(bt.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new en(bt.UNAVAILABLE,"Connection failed."));break;default:Dn()}}finally{ln(Ts,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(i);ln(Ts,`RPC '${e}' ${a} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=jA(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=hU(),o=fU(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=a.join("");ln(Ts,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=s.createWebChannel(d,l);let p=!1,h=!1;const m=new Boe({Io:v=>{h?ln(Ts,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(p||(ln(Ts,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),ln(Ts,`RPC '${e}' stream ${i} sending:`,v),f.send(v))},To:()=>f.close()}),g=(v,y,b)=>{v.listen(y,S=>{try{b(S)}catch(A){setTimeout(()=>{throw A},0)}})};return g(f,n0.EventType.OPEN,()=>{h||(ln(Ts,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),g(f,n0.EventType.CLOSE,()=>{h||(h=!0,ln(Ts,`RPC '${e}' stream ${i} transport closed`),m.So())}),g(f,n0.EventType.ERROR,v=>{h||(h=!0,hy(Ts,`RPC '${e}' stream ${i} transport errored:`,v),m.So(new en(bt.UNAVAILABLE,"The operation could not be completed")))}),g(f,n0.EventType.MESSAGE,v=>{var y;if(!h){const b=v.data[0];Ur(!!b);const S=b,A=S.error||((y=S[0])===null||y===void 0?void 0:y.error);if(A){ln(Ts,`RPC '${e}' stream ${i} received error:`,A);const C=A.status;let T=function(k){const O=pa[k];if(O!==void 0)return LU(O)}(C),j=A.message;T===void 0&&(T=bt.INTERNAL,j="Unknown error status: "+C+" with message "+A.message),h=!0,m.So(new en(T,j)),f.close()}else ln(Ts,`RPC '${e}' stream ${i} received:`,b),m.bo(b)}}),g(o,dU.STAT_EVENT,v=>{v.stat===CN.PROXY?ln(Ts,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===CN.NOPROXY&&ln(Ts,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function NA(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){return new Zse(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ln("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e,n,r,i,a,s,o,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new YU(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===bt.RESOURCE_EXHAUSTED?(id(n.toString()),id("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===bt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new en(bt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ln("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ln("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Uoe extends XU{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=toe(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ln.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Ln.min():s.readTime?ou(s.readTime):Ln.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=MN(this.serializer),n.addTarget=function(a,s){let o;const l=s.target;if(o=kN(l)?{documents:ioe(a,l)}:{query:aoe(a,l)._t},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=$U(a,s.resumeToken);const u=DN(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ln.min())>0){o.readTime=U2(a,s.snapshotVersion.toTimestamp());const u=DN(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=ooe(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=MN(this.serializer),n.removeTarget=e,this.a_(n)}}class Hoe extends XU{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ur(!!e.streamToken),this.lastStreamToken=e.streamToken,Ur(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ur(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=roe(e.writeResults,e.commitTime),r=ou(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=MN(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>noe(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Woe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new en(bt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Mo(e,IN(n,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new en(bt.UNKNOWN,a.toString())})}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Lo(e,IN(n,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new en(bt.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class qoe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(id(n),this.D_=!1):ln("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Koe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(s=>{r.enqueueAndForget(async()=>{hp(this)&&(ln("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Fn(l);u.L_.add(4),await Nb(u),u.q_.set("Unknown"),u.L_.delete(4),await nS(u)}(this))})}),this.q_=new qoe(r,i)}}async function nS(t){if(hp(t))for(const e of t.B_)await e(!0)}async function Nb(t){for(const e of t.B_)await e(!1)}function QU(t,e){const n=Fn(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),R4(n)?M4(n):Zg(n).r_()&&O4(n,e))}function I4(t,e){const n=Fn(t),r=Zg(n);n.N_.delete(e),r.r_()&&ZU(n,e),n.N_.size===0&&(r.r_()?r.o_():hp(n)&&n.q_.set("Unknown"))}function O4(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ln.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zg(t).A_(e)}function ZU(t,e){t.Q_.xe(e),Zg(t).R_(e)}function M4(t){t.Q_=new Gse({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Zg(t).start(),t.q_.v_()}function R4(t){return hp(t)&&!Zg(t).n_()&&t.N_.size>0}function hp(t){return Fn(t).L_.size===0}function JU(t){t.Q_=void 0}async function Goe(t){t.q_.set("Online")}async function Yoe(t){t.N_.forEach((e,n)=>{O4(t,e)})}async function Xoe(t,e){JU(t),R4(t)?(t.q_.M_(e),M4(t)):t.q_.set("Unknown")}async function Qoe(t,e,n){if(t.q_.set("Online"),e instanceof zU&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.N_.delete(o),i.Q_.removeTarget(o))}(t,e)}catch(r){ln("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await H2(t,r)}else if(e instanceof H1?t.Q_.Ke(e):e instanceof FU?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ln.min()))try{const r=await GU(t.localStore);n.compareTo(r)>=0&&await function(a,s){const o=a.Q_.rt(s);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach((l,u)=>{const d=a.N_.get(l);if(!d)return;a.N_.set(l,d.withResumeToken(ys.EMPTY_BYTE_STRING,d.snapshotVersion)),ZU(a,l);const f=new Kd(d.target,l,u,d.sequenceNumber);O4(a,f)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){ln("RemoteStore","Failed to raise snapshot:",r),await H2(t,r)}}async function H2(t,e,n){if(!_b(e))throw e;t.L_.add(1),await Nb(t),t.q_.set("Offline"),n||(n=()=>GU(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ln("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await nS(t)})}function eH(t,e){return e().catch(n=>H2(t,n,e))}async function rS(t){const e=Fn(t),n=yf(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Zoe(e);)try{const i=await Moe(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Joe(e,i)}catch(i){await H2(e,i)}tH(e)&&nH(e)}function Zoe(t){return hp(t)&&t.O_.length<10}function Joe(t,e){t.O_.push(e);const n=yf(t);n.r_()&&n.V_&&n.m_(e.mutations)}function tH(t){return hp(t)&&!yf(t).n_()&&t.O_.length>0}function nH(t){yf(t).start()}async function ele(t){yf(t).p_()}async function tle(t){const e=yf(t);for(const n of t.O_)e.m_(n.mutations)}async function nle(t,e,n){const r=t.O_.shift(),i=N4.from(r,e,n);await eH(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await rS(t)}async function rle(t,e){e&&yf(t).V_&&await async function(r,i){if(function(s){return Wse(s)&&s!==bt.ABORTED}(i.code)){const a=r.O_.shift();yf(r).s_(),await eH(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await rS(r)}}(t,e),tH(t)&&nH(t)}async function EM(t,e){const n=Fn(t);n.asyncQueue.verifyOperationInProgress(),ln("RemoteStore","RemoteStore received new credentials");const r=hp(n);n.L_.add(3),await Nb(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await nS(n)}async function ile(t,e){const n=Fn(t);e?(n.L_.delete(2),await nS(n)):e||(n.L_.add(2),await Nb(n),n.q_.set("Unknown"))}function Zg(t){return t.K_||(t.K_=function(n,r,i){const a=Fn(n);return a.w_(),new Uoe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Goe.bind(null,t),Ro:Yoe.bind(null,t),mo:Xoe.bind(null,t),d_:Qoe.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),R4(t)?M4(t):t.q_.set("Unknown")):(await t.K_.stop(),JU(t))})),t.K_}function yf(t){return t.U_||(t.U_=function(n,r,i){const a=Fn(n);return a.w_(),new Hoe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ele.bind(null,t),mo:rle.bind(null,t),f_:tle.bind(null,t),g_:nle.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await rS(t)):(await t.U_.stop(),t.O_.length>0&&(ln("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Dh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new L4(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new en(bt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F4(t,e){if(id("AsyncQueue",`${e}: ${t}`),_b(t))return new en(bt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this.comparator=e?(n,r)=>e(n,r)||bn.comparator(n.key,r.key):(n,r)=>bn.comparator(n.key,r.key),this.keyedMap=r0(),this.sortedSet=new Ti(this.comparator)}static emptySet(e){return new Dm(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Dm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Dm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this.W_=new Ti(bn.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Dn():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ig{constructor(e,n,r,i,a,s,o,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new ig(e,n,Dm.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Y5(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ale{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class sle{constructor(){this.queries=PM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Fn(n),a=i.queries;i.queries=PM(),a.forEach((s,o)=>{for(const l of o.j_)l.onError(r)})})(this,new en(bt.ABORTED,"Firestore shutting down"))}}function PM(){return new Qg(t=>CU(t),Y5)}async function ole(t,e){const n=Fn(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new ale,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=F4(s,`Initialization of query '${Hp(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&z4(n)}async function lle(t,e){const n=Fn(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.j_.indexOf(e);s>=0&&(a.j_.splice(s,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cle(t,e){const n=Fn(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.j_)o.X_(i)&&(r=!0);s.z_=i}}r&&z4(n)}function ule(t,e,n){const r=Fn(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function z4(t){t.Y_.forEach(e=>{e.next()})}var LN,TM;(TM=LN||(LN={})).ea="default",TM.Cache="cache";class dle{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ig(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ig.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==LN.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(e){this.key=e}}class iH{constructor(e){this.key=e}}class fle{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ar(),this.mutatedKeys=ar(),this.Aa=jU(e),this.Ra=new Dm(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new kM,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const p=i.get(d),h=X5(this.query,f)?f:null,m=!!p&&this.mutatedKeys.has(p.key),g=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let v=!1;p&&h?p.data.isEqual(h.data)?m!==g&&(r.track({type:3,doc:h}),v=!0):this.ga(p,h)||(r.track({type:2,doc:h}),v=!0,(l&&this.Aa(h,l)>0||u&&this.Aa(h,u)<0)&&(o=!0)):!p&&h?(r.track({type:0,doc:h}),v=!0):p&&!h&&(r.track({type:1,doc:p}),v=!0,(l||u)&&(o=!0)),v&&(h?(s=s.add(h),a=g?a.add(d):a.delete(d)):(s=s.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:o,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((d,f)=>function(h,m){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dn()}};return g(h)-g(m)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;const o=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new ig(this.query,e.Ra,a,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new kM,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ar(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new iH(r))}),this.da.forEach(r=>{e.has(r)||n.push(new rH(r))}),n}ba(e){this.Ta=e.Ts,this.da=ar();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ig.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class hle{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ple{constructor(e){this.key=e,this.va=!1}}class mle{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Qg(o=>CU(o),Y5),this.Ma=new Map,this.xa=new Set,this.Oa=new Ti(bn.comparator),this.Na=new Map,this.La=new P4,this.Ba={},this.ka=new Map,this.qa=rg.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function gle(t,e,n=!0){const r=uH(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await aH(r,e,n,!0),i}async function vle(t,e){const n=uH(t);await aH(n,e,!0,!1)}async function aH(t,e,n,r){const i=await Roe(t.localStore,su(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await yle(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&QU(t.remoteStore,i),o}async function yle(t,e,n,r,i){t.Ka=(f,p,h)=>async function(g,v,y,b){let S=v.view.ma(y);S.ns&&(S=await CM(g.localStore,v.query,!1).then(({documents:j})=>v.view.ma(j,S)));const A=b&&b.targetChanges.get(v.targetId),C=b&&b.targetMismatches.get(v.targetId)!=null,T=v.view.applyChanges(S,g.isPrimaryClient,A,C);return IM(g,v.targetId,T.wa),T.snapshot}(t,f,p,h);const a=await CM(t.localStore,e,!0),s=new fle(e,a.Ts),o=s.ma(a.documents),l=jb.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,l);IM(t,n,u.wa);const d=new hle(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function ble(t,e,n){const r=Fn(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(s=>!Y5(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await RN(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&I4(r.remoteStore,i.targetId),FN(r,i.targetId)}).catch(Sb)):(FN(r,i.targetId),await RN(r.localStore,i.targetId,!0))}async function xle(t,e){const n=Fn(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),I4(n.remoteStore,r.targetId))}async function wle(t,e,n){const r=Ele(t);try{const i=await function(s,o){const l=Fn(s),u=ya.now(),d=o.reduce((h,m)=>h.add(m.key),ar());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let m=ad(),g=ar();return l.cs.getEntries(h,d).next(v=>{m=v,m.forEach((y,b)=>{b.isValidDocument()||(g=g.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,m)).next(v=>{f=v;const y=[];for(const b of o){const S=$se(b,f.get(b.key).overlayedDocument);S!=null&&y.push(new Ef(b.key,S,vU(S.value.mapValue),sl.exists(!0)))}return l.mutationQueue.addMutationBatch(h,u,y,o)}).next(v=>{p=v;const y=v.applyToLocalDocumentSet(f,g);return l.documentOverlayCache.saveOverlays(h,v.batchId,y)})}).then(()=>({batchId:p.batchId,changes:EU(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new Ti(Cr)),u=u.insert(o,l),s.Ba[s.currentUser.toKey()]=u}(r,i.batchId,n),await Eb(r,i.changes),await rS(r.remoteStore)}catch(i){const a=F4(i,"Failed to persist write");n.reject(a)}}async function sH(t,e){const n=Fn(t);try{const r=await Ioe(n.localStore,e);e.targetChanges.forEach((i,a)=>{const s=n.Na.get(a);s&&(Ur(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Ur(s.va):i.removedDocuments.size>0&&(Ur(s.va),s.va=!1))}),await Eb(n,r,e)}catch(r){await Sb(r)}}function DM(t,e,n){const r=Fn(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((a,s)=>{const o=s.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const l=Fn(s);l.onlineState=o;let u=!1;l.queries.forEach((d,f)=>{for(const p of f.j_)p.Z_(o)&&(u=!0)}),u&&z4(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Sle(t,e,n){const r=Fn(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let s=new Ti(bn.comparator);s=s.insert(a,Bs.newNoDocument(a,Ln.min()));const o=ar().add(a),l=new eS(Ln.min(),new Map,new Ti(Cr),s,o);await sH(r,l),r.Oa=r.Oa.remove(a),r.Na.delete(e),$4(r)}else await RN(r.localStore,e,!1).then(()=>FN(r,e,n)).catch(Sb)}async function _le(t,e){const n=Fn(t),r=e.batch.batchId;try{const i=await Doe(n.localStore,e);lH(n,r,null),oH(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Eb(n,i)}catch(i){await Sb(i)}}async function Ale(t,e,n){const r=Fn(t);try{const i=await function(s,o){const l=Fn(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(f=>(Ur(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);lH(r,e,n),oH(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Eb(r,i)}catch(i){await Sb(i)}}function oH(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function lH(t,e,n){const r=Fn(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function FN(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||cH(t,r)})}function cH(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(I4(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),$4(t))}function IM(t,e,n){for(const r of n)r instanceof rH?(t.La.addReference(r.key,e),Cle(t,r)):r instanceof iH?(ln("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||cH(t,r.key)):Dn()}function Cle(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ln("SyncEngine","New document in limbo: "+n),t.xa.add(r),$4(t))}function $4(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new bn(gi.fromString(e)),r=t.qa.next();t.Na.set(r,new ple(n)),t.Oa=t.Oa.insert(n,r),QU(t.remoteStore,new Kd(su(C4(n.path)),r,"TargetPurposeLimboResolution",b4.oe))}}async function Eb(t,e,n){const r=Fn(t),i=[],a=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((o,l)=>{s.push(r.Ka(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=D4.Wi(l.targetId,u);a.push(f)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(l,u){const d=Fn(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>jt.forEach(u,p=>jt.forEach(p.$i,h=>d.persistence.referenceDelegate.addReference(f,p.targetId,h)).next(()=>jt.forEach(p.Ui,h=>d.persistence.referenceDelegate.removeReference(f,p.targetId,h)))))}catch(f){if(!_b(f))throw f;ln("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const h=d.os.get(p),m=h.snapshotVersion,g=h.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(p,g)}}}(r.localStore,a))}async function jle(t,e){const n=Fn(t);if(!n.currentUser.isEqual(e)){ln("SyncEngine","User change. New user:",e.toKey());const r=await KU(n.localStore,e);n.currentUser=e,function(a,s){a.ka.forEach(o=>{o.forEach(l=>{l.reject(new en(bt.CANCELLED,s))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Eb(n,r.hs)}}function Nle(t,e){const n=Fn(t),r=n.Na.get(e);if(r&&r.va)return ar().add(r.key);{let i=ar();const a=n.Ma.get(e);if(!a)return i;for(const s of a){const o=n.Fa.get(s);i=i.unionWith(o.view.Va)}return i}}function uH(t){const e=Fn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nle.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sle.bind(null,e),e.Ca.d_=cle.bind(null,e.eventManager),e.Ca.$a=ule.bind(null,e.eventManager),e}function Ele(t){const e=Fn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_le.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ale.bind(null,e),e}class W2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tS(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Toe(this.persistence,new koe,e.initialUser,this.serializer)}Ga(e){return new joe(T4.Zr,this.serializer)}Wa(e){return new Foe}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}W2.provider={build:()=>new W2};class zN{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>DM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jle.bind(null,this.syncEngine),await ile(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sle}()}createDatastore(e){const n=tS(e.databaseInfo.databaseId),r=function(a){return new Voe(a)}(e.databaseInfo);return function(a,s,o,l){return new Woe(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,s,o){return new Koe(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>DM(this.syncEngine,n,0),function(){return NM.D()?new NM:new zoe}())}createSyncEngine(e,n){return function(i,a,s,o,l,u,d){const f=new mle(i,a,s,o,l,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=Fn(i);ln("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Nb(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}zN.provider={build:()=>new zN};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kle{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):id("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ple{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=go.UNAUTHENTICATED,this.clientId=pU.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{ln("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ln("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=F4(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function EA(t,e){t.asyncQueue.verifyOperationInProgress(),ln("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await KU(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function OM(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Tle(t);ln("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>EM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>EM(e.remoteStore,i)),t._onlineComponents=e}async function Tle(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ln("FirestoreClient","Using user provided OfflineComponentProvider");try{await EA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===bt.FAILED_PRECONDITION||i.code===bt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;hy("Error using user provided cache. Falling back to memory cache: "+n),await EA(t,new W2)}}else ln("FirestoreClient","Using default OfflineComponentProvider"),await EA(t,new W2);return t._offlineComponents}async function dH(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ln("FirestoreClient","Using user provided OnlineComponentProvider"),await OM(t,t._uninitializedComponentsProvider._online)):(ln("FirestoreClient","Using default OnlineComponentProvider"),await OM(t,new zN))),t._onlineComponents}function Dle(t){return dH(t).then(e=>e.syncEngine)}async function MM(t){const e=await dH(t),n=e.eventManager;return n.onListen=gle.bind(null,e.syncEngine),n.onUnlisten=ble.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vle.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xle.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hH(t,e,n){if(!n)throw new en(bt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ile(t,e,n,r){if(e===!0&&r===!0)throw new en(bt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LM(t){if(!bn.isDocumentKey(t))throw new en(bt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FM(t){if(bn.isDocumentKey(t))throw new en(bt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function iS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Dn()}function Ih(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new en(bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=iS(t);throw new en(bt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new en(bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new en(bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ile("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fH((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new en(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new en(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new en(bt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class B4{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zM({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new en(bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new en(bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zM(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Yae;switch(r.type){case"firstParty":return new Zae(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new en(bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=RM.get(n);r&&(ln("ComponentProvider","Removing Datastore"),RM.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jg(this.firestore,e,this._query)}}class jo{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new df(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jo(this.firestore,e,this._key)}}class df extends Jg{constructor(e,n,r){super(e,n,C4(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jo(this.firestore,null,new bn(e))}withConverter(e){return new df(this.firestore,e,this._path)}}function Ole(t,e,...n){if(t=vs(t),hH("collection","path",e),t instanceof B4){const r=gi.fromString(e,...n);return FM(r),new df(t,null,r)}{if(!(t instanceof jo||t instanceof df))throw new en(bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gi.fromString(e,...n));return FM(r),new df(t.firestore,null,r)}}function Oa(t,e,...n){if(t=vs(t),arguments.length===1&&(e=pU.newId()),hH("doc","path",e),t instanceof B4){const r=gi.fromString(e,...n);return LM(r),new jo(t,null,new bn(r))}{if(!(t instanceof jo||t instanceof df))throw new en(bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gi.fromString(e,...n));return LM(r),new jo(t.firestore,t instanceof df?t.converter:null,new bn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new YU(this,"async_queue_retry"),this.Vu=()=>{const r=NA();r&&ln("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=NA();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=NA();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Dh;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_b(e))throw e;ln("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw id("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=L4.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&Dn()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function BM(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class ag extends B4{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $M,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $M(e),this._firestoreClient=void 0,await e}}}function Mle(t,e,n){n||(n="(default)");const r=$V(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(cy(a,e))return i;throw new en(bt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new en(bt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new en(bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function V4(t){if(t._terminated)throw new en(bt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Rle(t),t._firestoreClient}function Rle(t){var e,n,r;const i=t._freezeSettings(),a=function(o,l,u,d){return new dse(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fH(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Ple(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sg(ys.fromBase64String(e))}catch(n){throw new en(bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sg(ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new en(bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new en(bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new en(bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Cr(this._lat,e._lat)||Cr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lle=/^__.*__$/;class Fle{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ef(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cb(e,this.data,n,this.fieldTransforms)}}class pH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ef(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dn()}}class W4{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new W4(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return q2(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mH(this.Cu)&&Lle.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class zle{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||tS(e)}Qu(e,n,r,i=!1){return new W4({Cu:e,methodName:n,qu:r,path:fs.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function q4(t){const e=t._freezeSettings(),n=tS(t._databaseId);return new zle(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gH(t,e,n,r,i,a={}){const s=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);G4("Data must be an object, but it was:",s,r);const o=vH(r,s);let l,u;if(a.merge)l=new rl(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const d=[];for(const f of a.mergeFields){const p=$N(e,f,n);if(!s.contains(p))throw new en(bt.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);bH(d,p)||d.push(p)}l=new rl(d),u=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=s.fieldTransforms;return new Fle(new yo(o),l,u)}class oS extends sS{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oS}}class K4 extends sS{_toFieldTransform(e){return new Rse(e.path,new yy)}isEqual(e){return e instanceof K4}}function $le(t,e,n,r){const i=t.Qu(1,e,n);G4("Data must be an object, but it was:",i,r);const a=[],s=yo.empty();fp(r,(l,u)=>{const d=Y4(e,l,n);u=vs(u);const f=i.Nu(d);if(u instanceof oS)a.push(d);else{const p=kb(u,f);p!=null&&(a.push(d),s.set(d,p))}});const o=new rl(a);return new pH(s,o,i.fieldTransforms)}function Ble(t,e,n,r,i,a){const s=t.Qu(1,e,n),o=[$N(e,r,n)],l=[i];if(a.length%2!=0)throw new en(bt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)o.push($N(e,a[p])),l.push(a[p+1]);const u=[],d=yo.empty();for(let p=o.length-1;p>=0;--p)if(!bH(u,o[p])){const h=o[p];let m=l[p];m=vs(m);const g=s.Nu(h);if(m instanceof oS)u.push(h);else{const v=kb(m,g);v!=null&&(u.push(h),d.set(h,v))}}const f=new rl(u);return new pH(d,f,s.fieldTransforms)}function Vle(t,e,n,r=!1){return kb(n,t.Qu(r?4:3,e))}function kb(t,e){if(yH(t=vs(t)))return G4("Unsupported field value:",e,t),vH(t,e);if(t instanceof sS)return function(r,i){if(!mH(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let l=kb(o,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),s++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=vs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ise(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ya.fromDate(r);return{timestampValue:U2(i.serializer,a)}}if(r instanceof ya){const a=new ya(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:U2(i.serializer,a)}}if(r instanceof U4)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sg)return{bytesValue:$U(i.serializer,r._byteString)};if(r instanceof jo){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:k4(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof H4)return function(s,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return j4(o.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${iS(r)}`)}(t,e)}function vH(t,e){const n={};return mU(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fp(t,(r,i)=>{const a=kb(i,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function yH(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ya||t instanceof U4||t instanceof sg||t instanceof jo||t instanceof sS||t instanceof H4)}function G4(t,e,n){if(!yH(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=iS(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function $N(t,e,n){if((e=vs(e))instanceof aS)return e._internalPath;if(typeof e=="string")return Y4(t,e);throw q2("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ule=new RegExp("[~\\*/\\[\\]]");function Y4(t,e,n){if(e.search(Ule)>=0)throw q2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new aS(...e.split("."))._internalPath}catch{throw q2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function q2(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new en(bt.INVALID_ARGUMENT,o+t+l)}function bH(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new jo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Hle(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(X4("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Hle extends xH{data(){return super.data()}}function X4(t,e){return typeof e=="string"?Y4(t,e):e instanceof aS?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wle(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new en(bt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q4{}class qle extends Q4{}function Kle(t,e,...n){let r=[];e instanceof Q4&&r.push(e),r=r.concat(n),function(a){const s=a.filter(l=>l instanceof Z4).length,o=a.filter(l=>l instanceof lS).length;if(s>1||s>0&&o>0)throw new en(bt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class lS extends qle{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new lS(e,n,r)}_apply(e){const n=this._parse(e);return wH(e._query,n),new Jg(e.firestore,e.converter,PN(e._query,n))}_parse(e){const n=q4(e.firestore);return function(a,s,o,l,u,d,f){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new en(bt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){UM(f,d);const h=[];for(const m of f)h.push(VM(l,a,m));p={arrayValue:{values:h}}}else p=VM(l,a,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||UM(f,d),p=Vle(o,s,f,d==="in"||d==="not-in");return va.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gle(t,e,n){const r=e,i=X4("where",t);return lS._create(i,r,n)}class Z4 extends Q4{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Z4(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ec.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const l of o)wH(s,l),s=PN(s,l)}(e._query,n),new Jg(e.firestore,e.converter,PN(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function VM(t,e,n){if(typeof(n=vs(n))=="string"){if(n==="")throw new en(bt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AU(e)&&n.indexOf("/")!==-1)throw new en(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(gi.fromString(n));if(!bn.isDocumentKey(r))throw new en(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lM(t,new bn(r))}if(n instanceof jo)return lM(t,n._key);throw new en(bt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iS(n)}.`)}function UM(t,e){if(!Array.isArray(t)||t.length===0)throw new en(bt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wH(t,e){const n=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new en(bt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new en(bt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Yle{convertValue(e,n="none"){switch(Gh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ra(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Dn()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fp(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ra(s.doubleValue));return new H4(a)}convertGeoPoint(e){return new U4(ra(e.latitude),ra(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=w4(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(my(e));default:return null}}convertTimestamp(e){const n=vf(e);return new ya(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gi.fromString(e);Ur(qU(r));const i=new gy(r.get(1),r.get(3)),a=new bn(r.popFirst(5));return i.isEqual(n)||id(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SH(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _H extends xH{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new W1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(X4("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class W1 extends _H{data(e={}){return super.data(e)}}class Xle{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new a0(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new W1(this._firestore,this._userDataWriter,r.key,r,new a0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new en(bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const l=new W1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new a0(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new W1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new a0(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),d=s.indexOf(o.doc.key)),{type:Qle(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Qle(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dn()}}class AH extends Yle{constructor(e){super(),this.firestore=e}convertBytes(e){return new sg(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jo(this.firestore,null,n)}}function BN(t,e,n){t=Ih(t,jo);const r=Ih(t.firestore,ag),i=SH(t.converter,e,n);return J4(r,[gH(q4(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,sl.none())])}function qf(t){return J4(Ih(t.firestore,ag),[new J5(t._key,sl.none())])}function HM(t,...e){var n,r,i;t=vs(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||BM(e[s])||(a=e[s],s++);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(BM(e[s])){const f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,u,d;if(t instanceof jo)u=Ih(t.firestore,ag),d=C4(t._key.path),l={next:f=>{e[s]&&e[s](Zle(u,t,f))},error:e[s+1],complete:e[s+2]};else{const f=Ih(t,Jg);u=Ih(f.firestore,ag),d=f._query;const p=new AH(u);l={next:h=>{e[s]&&e[s](new Xle(u,p,f,h))},error:e[s+1],complete:e[s+2]},Wle(t._query)}return function(p,h,m,g){const v=new kle(g),y=new dle(h,v,m);return p.asyncQueue.enqueueAndForget(async()=>ole(await MM(p),y)),()=>{v.Za(),p.asyncQueue.enqueueAndForget(async()=>lle(await MM(p),y))}}(V4(u),d,o,l)}function J4(t,e){return function(r,i){const a=new Dh;return r.asyncQueue.enqueueAndForget(async()=>wle(await Dle(r),i,a)),a.promise}(V4(t),e)}function Zle(t,e,n){const r=n.docs.get(e._key),i=new AH(t);return new _H(t,i,e._key,r,new a0(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jle{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=q4(e)}set(e,n,r){this._verifyNotCommitted();const i=kA(e,this._firestore),a=SH(i.converter,n,r),s=gH(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,sl.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=kA(e,this._firestore);let s;return s=typeof(n=vs(n))=="string"||n instanceof aS?Ble(this._dataReader,"WriteBatch.update",a._key,n,r,i):$le(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,sl.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=kA(e,this._firestore);return this._mutations=this._mutations.concat(new J5(n._key,sl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new en(bt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kA(t,e){if((t=vs(t)).firestore!==e)throw new en(bt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function WM(){return new K4("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t){return V4(t=Ih(t,ag)),new Jle(t,e=>J4(t,e))}(function(e,n=!0){(function(i){Xg=i})(q5),Zm(new Wh("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new ag(new Xae(r.getProvider("auth-internal")),new ese(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new en(bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gy(u.options.projectId,d)}(s,i),s);return a=Object.assign({useFetchStreams:n},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),uf(rM,"4.7.3",e),uf(rM,"4.7.3","esm2017")})();const ece={apiKey:"AIzaSyCq3MZURc1tNUbpK7BDzKZKQoh8C3twzmA",authDomain:"lactokeeper.firebaseapp.com",projectId:"lactokeeper",storageBucket:"https://www.google.com/search?q=lactokeeper.appspot.com",messagingSenderId:"437430613715",appId:"1:437430613715:web:b4e56c7a0698c719ae8626"},CH=Eie(ece),og=wae(CH,{persistence:zae}),hi=Mle(CH,{}),jH=I.createContext({currentUser:null,isLoading:!0}),NH=()=>I.useContext(jH),tce=({children:t})=>{const[e,n]=I.useState(null),[r,i]=I.useState(!0);I.useEffect(()=>Rae(og,o=>{n(o),setTimeout(()=>i(!1),200)}),[]);const a=I.useMemo(()=>({currentUser:e,isLoading:r}),[e,r]);return c.jsx(jH.Provider,{value:a,children:t})};var EH={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Zp,function(){var n=function(_,P){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,H){z.__proto__=H}||function(z,H){for(var K in H)Object.prototype.hasOwnProperty.call(H,K)&&(z[K]=H[K])})(_,P)},r=function(){return(r=Object.assign||function(_){for(var P,z=1,H=arguments.length;z<H;z++)for(var K in P=arguments[z])Object.prototype.hasOwnProperty.call(P,K)&&(_[K]=P[K]);return _}).apply(this,arguments)};function i(_,P,z){for(var H,K=0,ne=P.length;K<ne;K++)!H&&K in P||((H=H||Array.prototype.slice.call(P,0,K))[K]=P[K]);return _.concat(H||Array.prototype.slice.call(P))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Zp,s=Object.keys,o=Array.isArray;function l(_,P){return typeof P!="object"||s(P).forEach(function(z){_[z]=P[z]}),_}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function f(_,P){return d.call(_,P)}function p(_,P){typeof P=="function"&&(P=P(u(_))),(typeof Reflect>"u"?s:Reflect.ownKeys)(P).forEach(function(z){m(_,z,P[z])})}var h=Object.defineProperty;function m(_,P,z,H){h(_,P,l(z&&f(z,"get")&&typeof z.get=="function"?{get:z.get,set:z.set,configurable:!0}:{value:z,configurable:!0,writable:!0},H))}function g(_){return{from:function(P){return _.prototype=Object.create(P.prototype),m(_.prototype,"constructor",_),{extend:p.bind(null,_.prototype)}}}}var v=Object.getOwnPropertyDescriptor,y=[].slice;function b(_,P,z){return y.call(_,P,z)}function S(_,P){return P(_)}function A(_){if(!_)throw new Error("Assertion Failed")}function C(_){a.setImmediate?setImmediate(_):setTimeout(_,0)}function T(_,P){if(typeof P=="string"&&f(_,P))return _[P];if(!P)return _;if(typeof P!="string"){for(var z=[],H=0,K=P.length;H<K;++H){var ne=T(_,P[H]);z.push(ne)}return z}var pe=P.indexOf(".");if(pe!==-1){var Se=_[P.substr(0,pe)];return Se==null?void 0:T(Se,P.substr(pe+1))}}function j(_,P,z){if(_&&P!==void 0&&!("isFrozen"in Object&&Object.isFrozen(_)))if(typeof P!="string"&&"length"in P){A(typeof z!="string"&&"length"in z);for(var H=0,K=P.length;H<K;++H)j(_,P[H],z[H])}else{var ne,pe,Se=P.indexOf(".");Se!==-1?(ne=P.substr(0,Se),(pe=P.substr(Se+1))===""?z===void 0?o(_)&&!isNaN(parseInt(ne))?_.splice(ne,1):delete _[ne]:_[ne]=z:j(Se=!(Se=_[ne])||!f(_,ne)?_[ne]={}:Se,pe,z)):z===void 0?o(_)&&!isNaN(parseInt(P))?_.splice(P,1):delete _[P]:_[P]=z}}function E(_){var P,z={};for(P in _)f(_,P)&&(z[P]=_[P]);return z}var k=[].concat;function O(_){return k.apply([],_)}var Ft="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(O([8,16,32,64].map(function(_){return["Int","Uint","Float"].map(function(P){return P+_+"Array"})}))).filter(function(_){return a[_]}),D=new Set(Ft.map(function(_){return a[_]})),M=null;function L(_){return M=new WeakMap,_=function P(z){if(!z||typeof z!="object")return z;var H=M.get(z);if(H)return H;if(o(z)){H=[],M.set(z,H);for(var K=0,ne=z.length;K<ne;++K)H.push(P(z[K]))}else if(D.has(z.constructor))H=z;else{var pe,Se=u(z);for(pe in H=Se===Object.prototype?{}:Object.create(Se),M.set(z,H),z)f(z,pe)&&(H[pe]=P(z[pe]))}return H}(_),M=null,_}var V={}.toString;function Q(_){return V.call(_).slice(8,-1)}var Y=typeof Symbol<"u"?Symbol.iterator:"@@iterator",J=typeof Y=="symbol"?function(_){var P;return _!=null&&(P=_[Y])&&P.apply(_)}:function(){return null};function q(_,P){return P=_.indexOf(P),0<=P&&_.splice(P,1),0<=P}var ee={};function le(_){var P,z,H,K;if(arguments.length===1){if(o(_))return _.slice();if(this===ee&&typeof _=="string")return[_];if(K=J(_)){for(z=[];!(H=K.next()).done;)z.push(H.value);return z}if(_==null)return[_];if(typeof(P=_.length)!="number")return[_];for(z=new Array(P);P--;)z[P]=_[P];return z}for(P=arguments.length,z=new Array(P);P--;)z[P]=arguments[P];return z}var se=typeof Symbol<"u"?function(_){return _[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Qt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Zi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Qt),$={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function G(_,P){this.name=_,this.message=P}function te(_,P){return _+". Errors: "+Object.keys(P).map(function(z){return P[z].toString()}).filter(function(z,H,K){return K.indexOf(z)===H}).join(`
`)}function oe(_,P,z,H){this.failures=P,this.failedKeys=H,this.successCount=z,this.message=te(_,P)}function ge(_,P){this.name="BulkError",this.failures=Object.keys(P).map(function(z){return P[z]}),this.failuresByPos=P,this.message=te(_,this.failures)}g(G).from(Error).extend({toString:function(){return this.name+": "+this.message}}),g(oe).from(G),g(ge).from(G);var _e=Zi.reduce(function(_,P){return _[P]=P+"Error",_},{}),Ce=G,fe=Zi.reduce(function(_,P){var z=P+"Error";function H(K,ne){this.name=z,K?typeof K=="string"?(this.message="".concat(K).concat(ne?`
 `+ne:""),this.inner=ne||null):typeof K=="object"&&(this.message="".concat(K.name," ").concat(K.message),this.inner=K):(this.message=$[P]||z,this.inner=null)}return g(H).from(Ce),_[P]=H,_},{});fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError;var be=Qt.reduce(function(_,P){return _[P+"Error"]=fe[P],_},{}),we=Zi.reduce(function(_,P){return["Syntax","Type","Range"].indexOf(P)===-1&&(_[P+"Error"]=fe[P]),_},{});function ie(){}function He(_){return _}function Me(_,P){return _==null||_===He?P:function(z){return P(_(z))}}function he(_,P){return function(){_.apply(this,arguments),P.apply(this,arguments)}}function We(_,P){return _===ie?P:function(){var z=_.apply(this,arguments);z!==void 0&&(arguments[0]=z);var H=this.onsuccess,K=this.onerror;this.onsuccess=null,this.onerror=null;var ne=P.apply(this,arguments);return H&&(this.onsuccess=this.onsuccess?he(H,this.onsuccess):H),K&&(this.onerror=this.onerror?he(K,this.onerror):K),ne!==void 0?ne:z}}function pt(_,P){return _===ie?P:function(){_.apply(this,arguments);var z=this.onsuccess,H=this.onerror;this.onsuccess=this.onerror=null,P.apply(this,arguments),z&&(this.onsuccess=this.onsuccess?he(z,this.onsuccess):z),H&&(this.onerror=this.onerror?he(H,this.onerror):H)}}function gt(_,P){return _===ie?P:function(z){var H=_.apply(this,arguments);l(z,H);var K=this.onsuccess,ne=this.onerror;return this.onsuccess=null,this.onerror=null,z=P.apply(this,arguments),K&&(this.onsuccess=this.onsuccess?he(K,this.onsuccess):K),ne&&(this.onerror=this.onerror?he(ne,this.onerror):ne),H===void 0?z===void 0?void 0:z:l(H,z)}}function Xe(_,P){return _===ie?P:function(){return P.apply(this,arguments)!==!1&&_.apply(this,arguments)}}function Ot(_,P){return _===ie?P:function(){var z=_.apply(this,arguments);if(z&&typeof z.then=="function"){for(var H=this,K=arguments.length,ne=new Array(K);K--;)ne[K]=arguments[K];return z.then(function(){return P.apply(H,ne)})}return P.apply(this,arguments)}}we.ModifyError=oe,we.DexieError=G,we.BulkError=ge;var ft=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ut(_){ft=_}var Dt={},Yt=100,Ft=typeof Promise>"u"?[]:function(){var _=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[_,u(_),_];var P=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[P,u(P),_]}(),Qt=Ft[0],Zi=Ft[1],Ft=Ft[2],Zi=Zi&&Zi.then,sn=Qt&&Qt.constructor,at=!!Ft,vt=function(_,P){Ht.push([_,P]),tt&&(queueMicrotask(wa),tt=!1)},xt=!0,tt=!0,zt=[],ht=[],mt=He,Mt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ie,pgp:!1,env:{},finalize:ie},_t=Mt,Ht=[],gn=0,on=[];function wt(_){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var P=this._PSD=_t;if(typeof _!="function"){if(_!==Dt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&qt(this,this._value))}this._state=null,this._value=null,++P.ref,function z(H,K){try{K(function(ne){if(H._state===null){if(ne===H)throw new TypeError("A promise cannot be resolved with itself.");var pe=H._lib&&Re();ne&&typeof ne.then=="function"?z(H,function(Se,Ee){ne instanceof wt?ne._then(Se,Ee):ne.then(Se,Ee)}):(H._state=!0,H._value=ne,Sn(H)),pe&&Ie()}},qt.bind(null,H))}catch(ne){qt(H,ne)}}(this,_)}var Xn={get:function(){var _=_t,P=Kn;function z(H,K){var ne=this,pe=!_.global&&(_!==_t||P!==Kn),Se=pe&&!vr(),Ee=new wt(function(Te,Le){Oi(ne,new fn(Do(H,_,pe,Se),Do(K,_,pe,Se),Te,Le,_))});return this._consoleTask&&(Ee._consoleTask=this._consoleTask),Ee}return z.prototype=Dt,z},set:function(_){m(this,"then",_&&_.prototype===Dt?Xn:{get:function(){return _},set:Xn.set})}};function fn(_,P,z,H,K){this.onFulfilled=typeof _=="function"?_:null,this.onRejected=typeof P=="function"?P:null,this.resolve=z,this.reject=H,this.psd=K}function qt(_,P){var z,H;ht.push(P),_._state===null&&(z=_._lib&&Re(),P=mt(P),_._state=!1,_._value=P,H=_,zt.some(function(K){return K._value===H._value})||zt.push(H),Sn(_),z&&Ie())}function Sn(_){var P=_._listeners;_._listeners=[];for(var z=0,H=P.length;z<H;++z)Oi(_,P[z]);var K=_._PSD;--K.ref||K.finalize(),gn===0&&(++gn,vt(function(){--gn==0&&Ke()},[]))}function Oi(_,P){if(_._state!==null){var z=_._state?P.onFulfilled:P.onRejected;if(z===null)return(_._state?P.resolve:P.reject)(_._value);++P.psd.ref,++gn,vt(Nr,[z,_,P])}else _._listeners.push(P)}function Nr(_,P,z){try{var H,K=P._value;!P._state&&ht.length&&(ht=[]),H=ft&&P._consoleTask?P._consoleTask.run(function(){return _(K)}):_(K),P._state||ht.indexOf(K)!==-1||function(ne){for(var pe=zt.length;pe;)if(zt[--pe]._value===ne._value)return zt.splice(pe,1)}(P),z.resolve(H)}catch(ne){z.reject(ne)}finally{--gn==0&&Ke(),--z.psd.ref||z.psd.finalize()}}function wa(){Sa(Mt,function(){Re()&&Ie()})}function Re(){var _=xt;return tt=xt=!1,_}function Ie(){var _,P,z;do for(;0<Ht.length;)for(_=Ht,Ht=[],z=_.length,P=0;P<z;++P){var H=_[P];H[0].apply(null,H[1])}while(0<Ht.length);tt=xt=!0}function Ke(){var _=zt;zt=[],_.forEach(function(H){H._PSD.onunhandled.call(null,H._value,H)});for(var P=on.slice(0),z=P.length;z;)P[--z]()}function At(_){return new wt(Dt,!1,_)}function lt(_,P){var z=_t;return function(){var H=Re(),K=_t;try{return Rr(z,!0),_.apply(this,arguments)}catch(ne){P&&P(ne)}finally{Rr(K,!1),H&&Ie()}}}p(wt.prototype,{then:Xn,_then:function(_,P){Oi(this,new fn(null,null,_,P,_t))},catch:function(_){if(arguments.length===1)return this.then(null,_);var P=_,z=arguments[1];return typeof P=="function"?this.then(null,function(H){return(H instanceof P?z:At)(H)}):this.then(null,function(H){return(H&&H.name===P?z:At)(H)})},finally:function(_){return this.then(function(P){return wt.resolve(_()).then(function(){return P})},function(P){return wt.resolve(_()).then(function(){return At(P)})})},timeout:function(_,P){var z=this;return _<1/0?new wt(function(H,K){var ne=setTimeout(function(){return K(new fe.Timeout(P))},_);z.then(H,K).finally(clearTimeout.bind(null,ne))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&m(wt.prototype,Symbol.toStringTag,"Dexie.Promise"),Mt.env=bs(),p(wt,{all:function(){var _=le.apply(null,arguments).map(Qn);return new wt(function(P,z){_.length===0&&P([]);var H=_.length;_.forEach(function(K,ne){return wt.resolve(K).then(function(pe){_[ne]=pe,--H||P(_)},z)})})},resolve:function(_){return _ instanceof wt?_:_&&typeof _.then=="function"?new wt(function(P,z){_.then(P,z)}):new wt(Dt,!0,_)},reject:At,race:function(){var _=le.apply(null,arguments).map(Qn);return new wt(function(P,z){_.map(function(H){return wt.resolve(H).then(P,z)})})},PSD:{get:function(){return _t},set:function(_){return _t=_}},totalEchoes:{get:function(){return Kn}},newPSD:_n,usePSD:Sa,scheduler:{get:function(){return vt},set:function(_){vt=_}},rejectionMapper:{get:function(){return mt},set:function(_){mt=_}},follow:function(_,P){return new wt(function(z,H){return _n(function(K,ne){var pe=_t;pe.unhandleds=[],pe.onunhandled=ne,pe.finalize=he(function(){var Se,Ee=this;Se=function(){Ee.unhandleds.length===0?K():ne(Ee.unhandleds[0])},on.push(function Te(){Se(),on.splice(on.indexOf(Te),1)}),++gn,vt(function(){--gn==0&&Ke()},[])},pe.finalize),_()},P,z,H)})}}),sn&&(sn.allSettled&&m(wt,"allSettled",function(){var _=le.apply(null,arguments).map(Qn);return new wt(function(P){_.length===0&&P([]);var z=_.length,H=new Array(z);_.forEach(function(K,ne){return wt.resolve(K).then(function(pe){return H[ne]={status:"fulfilled",value:pe}},function(pe){return H[ne]={status:"rejected",reason:pe}}).then(function(){return--z||P(H)})})})}),sn.any&&typeof AggregateError<"u"&&m(wt,"any",function(){var _=le.apply(null,arguments).map(Qn);return new wt(function(P,z){_.length===0&&z(new AggregateError([]));var H=_.length,K=new Array(H);_.forEach(function(ne,pe){return wt.resolve(ne).then(function(Se){return P(Se)},function(Se){K[pe]=Se,--H||z(new AggregateError(K))})})})}),sn.withResolvers&&(wt.withResolvers=sn.withResolvers));var Gt={awaits:0,echoes:0,id:0},vn=0,qn=[],$t=0,Kn=0,bi=0;function _n(_,P,z,H){var K=_t,ne=Object.create(K);return ne.parent=K,ne.ref=0,ne.global=!1,ne.id=++bi,Mt.env,ne.env=at?{Promise:wt,PromiseProp:{value:wt,configurable:!0,writable:!0},all:wt.all,race:wt.race,allSettled:wt.allSettled,any:wt.any,resolve:wt.resolve,reject:wt.reject}:{},P&&l(ne,P),++K.ref,ne.finalize=function(){--this.parent.ref||this.parent.finalize()},H=Sa(ne,_,z,H),ne.ref===0&&ne.finalize(),H}function gr(){return Gt.id||(Gt.id=++vn),++Gt.awaits,Gt.echoes+=Yt,Gt.id}function vr(){return!!Gt.awaits&&(--Gt.awaits==0&&(Gt.id=0),Gt.echoes=Gt.awaits*Yt,!0)}function Qn(_){return Gt.echoes&&_&&_.constructor===sn?(gr(),_.then(function(P){return vr(),P},function(P){return vr(),Er(P)})):_}function sr(){var _=qn[qn.length-1];qn.pop(),Rr(_,!1)}function Rr(_,P){var z,H=_t;(P?!Gt.echoes||$t++&&_===_t:!$t||--$t&&_===_t)||queueMicrotask(P?(function(K){++Kn,Gt.echoes&&--Gt.echoes!=0||(Gt.echoes=Gt.awaits=Gt.id=0),qn.push(_t),Rr(K,!0)}).bind(null,_):sr),_!==_t&&(_t=_,H===Mt&&(Mt.env=bs()),at&&(z=Mt.env.Promise,P=_.env,(H.global||_.global)&&(Object.defineProperty(a,"Promise",P.PromiseProp),z.all=P.all,z.race=P.race,z.resolve=P.resolve,z.reject=P.reject,P.allSettled&&(z.allSettled=P.allSettled),P.any&&(z.any=P.any))))}function bs(){var _=a.Promise;return at?{Promise:_,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:_.all,race:_.race,allSettled:_.allSettled,any:_.any,resolve:_.resolve,reject:_.reject}:{}}function Sa(_,P,z,H,K){var ne=_t;try{return Rr(_,!0),P(z,H,K)}finally{Rr(ne,!1)}}function Do(_,P,z,H){return typeof _!="function"?_:function(){var K=_t;z&&gr(),Rr(P,!0);try{return _.apply(this,arguments)}finally{Rr(K,!1),H&&queueMicrotask(vr)}}}function Io(_){Promise===sn&&Gt.echoes===0?$t===0?_():enqueueNativeMicroTask(_):setTimeout(_,0)}(""+Zi).indexOf("[native code]")===-1&&(gr=vr=ie);var Er=wt.reject,Oo="￿",ua="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",$c="String expected.",qs=[],Ni="__dbnames",es="readonly",wl="readwrite";function Ks(_,P){return _?P?function(){return _.apply(this,arguments)&&P.apply(this,arguments)}:_:P}var Bc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Sl(_){return typeof _!="string"||/\./.test(_)?function(P){return P}:function(P){return P[_]===void 0&&_ in P&&delete(P=L(P))[_],P}}function Vc(){throw fe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Tn(_,P){try{var z=Uc(_),H=Uc(P);if(z!==H)return z==="Array"?1:H==="Array"?-1:z==="binary"?1:H==="binary"?-1:z==="string"?1:H==="string"?-1:z==="Date"?1:H!=="Date"?NaN:-1;switch(z){case"number":case"Date":case"string":return P<_?1:_<P?-1:0;case"binary":return function(K,ne){for(var pe=K.length,Se=ne.length,Ee=pe<Se?pe:Se,Te=0;Te<Ee;++Te)if(K[Te]!==ne[Te])return K[Te]<ne[Te]?-1:1;return pe===Se?0:pe<Se?-1:1}(Zr(_),Zr(P));case"Array":return function(K,ne){for(var pe=K.length,Se=ne.length,Ee=pe<Se?pe:Se,Te=0;Te<Ee;++Te){var Le=Tn(K[Te],ne[Te]);if(Le!==0)return Le}return pe===Se?0:pe<Se?-1:1}(_,P)}}catch{}return NaN}function Uc(_){var P=typeof _;return P!="object"?P:ArrayBuffer.isView(_)?"binary":(_=Q(_),_==="ArrayBuffer"?"binary":_)}function Zr(_){return _ instanceof Uint8Array?_:ArrayBuffer.isView(_)?new Uint8Array(_.buffer,_.byteOffset,_.byteLength):new Uint8Array(_)}function _l(_,P,z){var H=_.schema.yProps;return H?(P&&0<z.numFailures&&(P=P.filter(function(K,ne){return!z.failures[ne]})),Promise.all(H.map(function(K){return K=K.updatesTable,P?_.db.table(K).where("k").anyOf(P).delete():_.db.table(K).clear()})).then(function(){return z})):z}var _u=(Jn.prototype._trans=function(_,P,z){var H=this._tx||_t.trans,K=this.name,ne=ft&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(_==="readonly"?"read":"write"," ").concat(this.name));function pe(Te,Le,Ae){if(!Ae.schema[K])throw new fe.NotFound("Table "+K+" not part of transaction");return P(Ae.idbtrans,Ae)}var Se=Re();try{var Ee=H&&H.db._novip===this.db._novip?H===_t.trans?H._promise(_,pe,z):_n(function(){return H._promise(_,pe,z)},{trans:H,transless:_t.transless||_t}):function Te(Le,Ae,Pe,je){if(Le.idbdb&&(Le._state.openComplete||_t.letThrough||Le._vip)){var ke=Le._createTransaction(Ae,Pe,Le._dbSchema);try{ke.create(),Le._state.PR1398_maxLoop=3}catch(Oe){return Oe.name===_e.InvalidState&&Le.isOpen()&&0<--Le._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Le.close({disableAutoOpen:!1}),Le.open().then(function(){return Te(Le,Ae,Pe,je)})):Er(Oe)}return ke._promise(Ae,function(Oe,ze){return _n(function(){return _t.trans=ke,je(Oe,ze,ke)})}).then(function(Oe){if(Ae==="readwrite")try{ke.idbtrans.commit()}catch{}return Ae==="readonly"?Oe:ke._completion.then(function(){return Oe})})}if(Le._state.openComplete)return Er(new fe.DatabaseClosed(Le._state.dbOpenError));if(!Le._state.isBeingOpened){if(!Le._state.autoOpen)return Er(new fe.DatabaseClosed);Le.open().catch(ie)}return Le._state.dbReadyPromise.then(function(){return Te(Le,Ae,Pe,je)})}(this.db,_,[this.name],pe);return ne&&(Ee._consoleTask=ne,Ee=Ee.catch(function(Te){return console.trace(Te),Er(Te)})),Ee}finally{Se&&Ie()}},Jn.prototype.get=function(_,P){var z=this;return _&&_.constructor===Object?this.where(_).first(P):_==null?Er(new fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(H){return z.core.get({trans:H,key:_}).then(function(K){return z.hook.reading.fire(K)})}).then(P)},Jn.prototype.where=function(_){if(typeof _=="string")return new this.db.WhereClause(this,_);if(o(_))return new this.db.WhereClause(this,"[".concat(_.join("+"),"]"));var P=s(_);if(P.length===1)return this.where(P[0]).equals(_[P[0]]);var z=this.schema.indexes.concat(this.schema.primKey).filter(function(Se){if(Se.compound&&P.every(function(Te){return 0<=Se.keyPath.indexOf(Te)})){for(var Ee=0;Ee<P.length;++Ee)if(P.indexOf(Se.keyPath[Ee])===-1)return!1;return!0}return!1}).sort(function(Se,Ee){return Se.keyPath.length-Ee.keyPath.length})[0];if(z&&this.db._maxKey!==Oo){var ne=z.keyPath.slice(0,P.length);return this.where(ne).equals(ne.map(function(Ee){return _[Ee]}))}!z&&ft&&console.warn("The query ".concat(JSON.stringify(_)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(P.join("+"),"]"));var H=this.schema.idxByName;function K(Se,Ee){return Tn(Se,Ee)===0}var pe=P.reduce(function(Ae,Ee){var Te=Ae[0],Le=Ae[1],Ae=H[Ee],Pe=_[Ee];return[Te||Ae,Te||!Ae?Ks(Le,Ae&&Ae.multi?function(je){return je=T(je,Ee),o(je)&&je.some(function(ke){return K(Pe,ke)})}:function(je){return K(Pe,T(je,Ee))}):Le]},[null,null]),ne=pe[0],pe=pe[1];return ne?this.where(ne.name).equals(_[ne.keyPath]).filter(pe):z?this.filter(pe):this.where(P).equals("")},Jn.prototype.filter=function(_){return this.toCollection().and(_)},Jn.prototype.count=function(_){return this.toCollection().count(_)},Jn.prototype.offset=function(_){return this.toCollection().offset(_)},Jn.prototype.limit=function(_){return this.toCollection().limit(_)},Jn.prototype.each=function(_){return this.toCollection().each(_)},Jn.prototype.toArray=function(_){return this.toCollection().toArray(_)},Jn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Jn.prototype.orderBy=function(_){return new this.db.Collection(new this.db.WhereClause(this,o(_)?"[".concat(_.join("+"),"]"):_))},Jn.prototype.reverse=function(){return this.toCollection().reverse()},Jn.prototype.mapToClass=function(_){var P,z=this.db,H=this.name;function K(){return P!==null&&P.apply(this,arguments)||this}(this.schema.mappedClass=_).prototype instanceof Vc&&(function(Ee,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Class extends value "+String(Te)+" is not a constructor or null");function Le(){this.constructor=Ee}n(Ee,Te),Ee.prototype=Te===null?Object.create(Te):(Le.prototype=Te.prototype,new Le)}(K,P=_),Object.defineProperty(K.prototype,"db",{get:function(){return z},enumerable:!1,configurable:!0}),K.prototype.table=function(){return H},_=K);for(var ne=new Set,pe=_.prototype;pe;pe=u(pe))Object.getOwnPropertyNames(pe).forEach(function(Ee){return ne.add(Ee)});function Se(Ee){if(!Ee)return Ee;var Te,Le=Object.create(_.prototype);for(Te in Ee)if(!ne.has(Te))try{Le[Te]=Ee[Te]}catch{}return Le}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Se,this.hook("reading",Se),_},Jn.prototype.defineClass=function(){return this.mapToClass(function(_){l(this,_)})},Jn.prototype.add=function(_,P){var z=this,H=this.schema.primKey,K=H.auto,ne=H.keyPath,pe=_;return ne&&K&&(pe=Sl(ne)(_)),this._trans("readwrite",function(Se){return z.core.mutate({trans:Se,type:"add",keys:P!=null?[P]:null,values:[pe]})}).then(function(Se){return Se.numFailures?wt.reject(Se.failures[0]):Se.lastResult}).then(function(Se){if(ne)try{j(_,ne,Se)}catch{}return Se})},Jn.prototype.update=function(_,P){return typeof _!="object"||o(_)?this.where(":id").equals(_).modify(P):(_=T(_,this.schema.primKey.keyPath),_===void 0?Er(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(_).modify(P))},Jn.prototype.put=function(_,P){var z=this,H=this.schema.primKey,K=H.auto,ne=H.keyPath,pe=_;return ne&&K&&(pe=Sl(ne)(_)),this._trans("readwrite",function(Se){return z.core.mutate({trans:Se,type:"put",values:[pe],keys:P!=null?[P]:null})}).then(function(Se){return Se.numFailures?wt.reject(Se.failures[0]):Se.lastResult}).then(function(Se){if(ne)try{j(_,ne,Se)}catch{}return Se})},Jn.prototype.delete=function(_){var P=this;return this._trans("readwrite",function(z){return P.core.mutate({trans:z,type:"delete",keys:[_]}).then(function(H){return _l(P,[_],H)}).then(function(H){return H.numFailures?wt.reject(H.failures[0]):void 0})})},Jn.prototype.clear=function(){var _=this;return this._trans("readwrite",function(P){return _.core.mutate({trans:P,type:"deleteRange",range:Bc}).then(function(z){return _l(_,null,z)})}).then(function(P){return P.numFailures?wt.reject(P.failures[0]):void 0})},Jn.prototype.bulkGet=function(_){var P=this;return this._trans("readonly",function(z){return P.core.getMany({keys:_,trans:z}).then(function(H){return H.map(function(K){return P.hook.reading.fire(K)})})})},Jn.prototype.bulkAdd=function(_,P,z){var H=this,K=Array.isArray(P)?P:void 0,ne=(z=z||(K?void 0:P))?z.allKeys:void 0;return this._trans("readwrite",function(pe){var Te=H.schema.primKey,Se=Te.auto,Te=Te.keyPath;if(Te&&K)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(K&&K.length!==_.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var Ee=_.length,Te=Te&&Se?_.map(Sl(Te)):_;return H.core.mutate({trans:pe,type:"add",keys:K,values:Te,wantResults:ne}).then(function(ke){var Ae=ke.numFailures,Pe=ke.results,je=ke.lastResult,ke=ke.failures;if(Ae===0)return ne?Pe:je;throw new ge("".concat(H.name,".bulkAdd(): ").concat(Ae," of ").concat(Ee," operations failed"),ke)})})},Jn.prototype.bulkPut=function(_,P,z){var H=this,K=Array.isArray(P)?P:void 0,ne=(z=z||(K?void 0:P))?z.allKeys:void 0;return this._trans("readwrite",function(pe){var Te=H.schema.primKey,Se=Te.auto,Te=Te.keyPath;if(Te&&K)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(K&&K.length!==_.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var Ee=_.length,Te=Te&&Se?_.map(Sl(Te)):_;return H.core.mutate({trans:pe,type:"put",keys:K,values:Te,wantResults:ne}).then(function(ke){var Ae=ke.numFailures,Pe=ke.results,je=ke.lastResult,ke=ke.failures;if(Ae===0)return ne?Pe:je;throw new ge("".concat(H.name,".bulkPut(): ").concat(Ae," of ").concat(Ee," operations failed"),ke)})})},Jn.prototype.bulkUpdate=function(_){var P=this,z=this.core,H=_.map(function(pe){return pe.key}),K=_.map(function(pe){return pe.changes}),ne=[];return this._trans("readwrite",function(pe){return z.getMany({trans:pe,keys:H,cache:"clone"}).then(function(Se){var Ee=[],Te=[];_.forEach(function(Ae,Pe){var je=Ae.key,ke=Ae.changes,Oe=Se[Pe];if(Oe){for(var ze=0,Ve=Object.keys(ke);ze<Ve.length;ze++){var Qe=Ve[ze],et=ke[Qe];if(Qe===P.schema.primKey.keyPath){if(Tn(et,je)!==0)throw new fe.Constraint("Cannot update primary key in bulkUpdate()")}else j(Oe,Qe,et)}ne.push(Pe),Ee.push(je),Te.push(Oe)}});var Le=Ee.length;return z.mutate({trans:pe,type:"put",keys:Ee,values:Te,updates:{keys:H,changeSpecs:K}}).then(function(Ae){var Pe=Ae.numFailures,je=Ae.failures;if(Pe===0)return Le;for(var ke=0,Oe=Object.keys(je);ke<Oe.length;ke++){var ze,Ve=Oe[ke],Qe=ne[Number(Ve)];Qe!=null&&(ze=je[Ve],delete je[Ve],je[Qe]=ze)}throw new ge("".concat(P.name,".bulkUpdate(): ").concat(Pe," of ").concat(Le," operations failed"),je)})})})},Jn.prototype.bulkDelete=function(_){var P=this,z=_.length;return this._trans("readwrite",function(H){return P.core.mutate({trans:H,type:"delete",keys:_}).then(function(K){return _l(P,_,K)})}).then(function(pe){var K=pe.numFailures,ne=pe.lastResult,pe=pe.failures;if(K===0)return ne;throw new ge("".concat(P.name,".bulkDelete(): ").concat(K," of ").concat(z," operations failed"),pe)})},Jn);function Jn(){}function xs(_){function P(pe,Se){if(Se){for(var Ee=arguments.length,Te=new Array(Ee-1);--Ee;)Te[Ee-1]=arguments[Ee];return z[pe].subscribe.apply(null,Te),_}if(typeof pe=="string")return z[pe]}var z={};P.addEventType=ne;for(var H=1,K=arguments.length;H<K;++H)ne(arguments[H]);return P;function ne(pe,Se,Ee){if(typeof pe!="object"){var Te;Se=Se||Xe;var Le={subscribers:[],fire:Ee=Ee||ie,subscribe:function(Ae){Le.subscribers.indexOf(Ae)===-1&&(Le.subscribers.push(Ae),Le.fire=Se(Le.fire,Ae))},unsubscribe:function(Ae){Le.subscribers=Le.subscribers.filter(function(Pe){return Pe!==Ae}),Le.fire=Le.subscribers.reduce(Se,Ee)}};return z[pe]=P[pe]=Le}s(Te=pe).forEach(function(Ae){var Pe=Te[Ae];if(o(Pe))ne(Ae,Te[Ae][0],Te[Ae][1]);else{if(Pe!=="asap")throw new fe.InvalidArgument("Invalid event config");var je=ne(Ae,He,function(){for(var ke=arguments.length,Oe=new Array(ke);ke--;)Oe[ke]=arguments[ke];je.subscribers.forEach(function(ze){C(function(){ze.apply(null,Oe)})})})}})}}function da(_,P){return g(P).from({prototype:_}),P}function ws(_,P){return!(_.filter||_.algorithm||_.or)&&(P?_.justLimit:!_.replayFilter)}function yr(_,P){_.filter=Ks(_.filter,P)}function _a(_,P,z){var H=_.replayFilter;_.replayFilter=H?function(){return Ks(H(),P())}:P,_.justLimit=z&&!H}function Mo(_,P){if(_.isPrimKey)return P.primaryKey;var z=P.getIndexByKeyPath(_.index);if(!z)throw new fe.Schema("KeyPath "+_.index+" on object store "+P.name+" is not indexed");return z}function Jl(_,P,z){var H=Mo(_,P.schema);return P.openCursor({trans:z,values:!_.keysOnly,reverse:_.dir==="prev",unique:!!_.unique,query:{index:H,range:_.range}})}function ec(_,P,z,H){var K=_.replayFilter?Ks(_.filter,_.replayFilter()):_.filter;if(_.or){var ne={},pe=function(Se,Ee,Te){var Le,Ae;K&&!K(Ee,Te,function(Pe){return Ee.stop(Pe)},function(Pe){return Ee.fail(Pe)})||((Ae=""+(Le=Ee.primaryKey))=="[object ArrayBuffer]"&&(Ae=""+new Uint8Array(Le)),f(ne,Ae)||(ne[Ae]=!0,P(Se,Ee,Te)))};return Promise.all([_.or._iterate(pe,z),Yn(Jl(_,H,z),_.algorithm,pe,!_.keysOnly&&_.valueMapper)])}return Yn(Jl(_,H,z),Ks(_.algorithm,K),P,!_.keysOnly&&_.valueMapper)}function Yn(_,P,z,H){var K=lt(H?function(ne,pe,Se){return z(H(ne),pe,Se)}:z);return _.then(function(ne){if(ne)return ne.start(function(){var pe=function(){return ne.continue()};P&&!P(ne,function(Se){return pe=Se},function(Se){ne.stop(Se),pe=ie},function(Se){ne.fail(Se),pe=ie})||K(ne.value,ne,function(Se){return pe=Se}),pe()})})}var Gs=(Ro.prototype.execute=function(_){var P=this["@@propmod"];if(P.add!==void 0){var z=P.add;if(o(z))return i(i([],o(_)?_:[],!0),z).sort();if(typeof z=="number")return(Number(_)||0)+z;if(typeof z=="bigint")try{return BigInt(_)+z}catch{return BigInt(0)+z}throw new TypeError("Invalid term ".concat(z))}if(P.remove!==void 0){var H=P.remove;if(o(H))return o(_)?_.filter(function(K){return!H.includes(K)}).sort():[];if(typeof H=="number")return Number(_)-H;if(typeof H=="bigint")try{return BigInt(_)-H}catch{return BigInt(0)-H}throw new TypeError("Invalid subtrahend ".concat(H))}return z=(z=P.replacePrefix)===null||z===void 0?void 0:z[0],z&&typeof _=="string"&&_.startsWith(z)?P.replacePrefix[1]+_.substring(z.length):_},Ro);function Ro(_){this["@@propmod"]=_}var Ss=(Gn.prototype._read=function(_,P){var z=this._ctx;return z.error?z.table._trans(null,Er.bind(null,z.error)):z.table._trans("readonly",_).then(P)},Gn.prototype._write=function(_){var P=this._ctx;return P.error?P.table._trans(null,Er.bind(null,P.error)):P.table._trans("readwrite",_,"locked")},Gn.prototype._addAlgorithm=function(_){var P=this._ctx;P.algorithm=Ks(P.algorithm,_)},Gn.prototype._iterate=function(_,P){return ec(this._ctx,_,P,this._ctx.table.core)},Gn.prototype.clone=function(_){var P=Object.create(this.constructor.prototype),z=Object.create(this._ctx);return _&&l(z,_),P._ctx=z,P},Gn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Gn.prototype.each=function(_){var P=this._ctx;return this._read(function(z){return ec(P,_,z,P.table.core)})},Gn.prototype.count=function(_){var P=this;return this._read(function(z){var H=P._ctx,K=H.table.core;if(ws(H,!0))return K.count({trans:z,query:{index:Mo(H,K.schema),range:H.range}}).then(function(pe){return Math.min(pe,H.limit)});var ne=0;return ec(H,function(){return++ne,!1},z,K).then(function(){return ne})}).then(_)},Gn.prototype.sortBy=function(_,P){var z=_.split(".").reverse(),H=z[0],K=z.length-1;function ne(Ee,Te){return Te?ne(Ee[z[Te]],Te-1):Ee[H]}var pe=this._ctx.dir==="next"?1:-1;function Se(Ee,Te){return Tn(ne(Ee,K),ne(Te,K))*pe}return this.toArray(function(Ee){return Ee.sort(Se)}).then(P)},Gn.prototype.toArray=function(_){var P=this;return this._read(function(z){var H=P._ctx;if(H.dir==="next"&&ws(H,!0)&&0<H.limit){var K=H.valueMapper,ne=Mo(H,H.table.core.schema);return H.table.core.query({trans:z,limit:H.limit,values:!0,query:{index:ne,range:H.range}}).then(function(Se){return Se=Se.result,K?Se.map(K):Se})}var pe=[];return ec(H,function(Se){return pe.push(Se)},z,H.table.core).then(function(){return pe})},_)},Gn.prototype.offset=function(_){var P=this._ctx;return _<=0||(P.offset+=_,ws(P)?_a(P,function(){var z=_;return function(H,K){return z===0||(z===1?--z:K(function(){H.advance(z),z=0}),!1)}}):_a(P,function(){var z=_;return function(){return--z<0}})),this},Gn.prototype.limit=function(_){return this._ctx.limit=Math.min(this._ctx.limit,_),_a(this._ctx,function(){var P=_;return function(z,H,K){return--P<=0&&H(K),0<=P}},!0),this},Gn.prototype.until=function(_,P){return yr(this._ctx,function(z,H,K){return!_(z.value)||(H(K),P)}),this},Gn.prototype.first=function(_){return this.limit(1).toArray(function(P){return P[0]}).then(_)},Gn.prototype.last=function(_){return this.reverse().first(_)},Gn.prototype.filter=function(_){var P;return yr(this._ctx,function(z){return _(z.value)}),(P=this._ctx).isMatch=Ks(P.isMatch,_),this},Gn.prototype.and=function(_){return this.filter(_)},Gn.prototype.or=function(_){return new this.db.WhereClause(this._ctx.table,_,this)},Gn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Gn.prototype.desc=function(){return this.reverse()},Gn.prototype.eachKey=function(_){var P=this._ctx;return P.keysOnly=!P.isMatch,this.each(function(z,H){_(H.key,H)})},Gn.prototype.eachUniqueKey=function(_){return this._ctx.unique="unique",this.eachKey(_)},Gn.prototype.eachPrimaryKey=function(_){var P=this._ctx;return P.keysOnly=!P.isMatch,this.each(function(z,H){_(H.primaryKey,H)})},Gn.prototype.keys=function(_){var P=this._ctx;P.keysOnly=!P.isMatch;var z=[];return this.each(function(H,K){z.push(K.key)}).then(function(){return z}).then(_)},Gn.prototype.primaryKeys=function(_){var P=this._ctx;if(P.dir==="next"&&ws(P,!0)&&0<P.limit)return this._read(function(H){var K=Mo(P,P.table.core.schema);return P.table.core.query({trans:H,values:!1,limit:P.limit,query:{index:K,range:P.range}})}).then(function(H){return H.result}).then(_);P.keysOnly=!P.isMatch;var z=[];return this.each(function(H,K){z.push(K.primaryKey)}).then(function(){return z}).then(_)},Gn.prototype.uniqueKeys=function(_){return this._ctx.unique="unique",this.keys(_)},Gn.prototype.firstKey=function(_){return this.limit(1).keys(function(P){return P[0]}).then(_)},Gn.prototype.lastKey=function(_){return this.reverse().firstKey(_)},Gn.prototype.distinct=function(){var _=this._ctx,_=_.index&&_.table.schema.idxByName[_.index];if(!_||!_.multi)return this;var P={};return yr(this._ctx,function(K){var H=K.primaryKey.toString(),K=f(P,H);return P[H]=!0,!K}),this},Gn.prototype.modify=function(_){var P=this,z=this._ctx;return this._write(function(H){var K,ne,pe;pe=typeof _=="function"?_:(K=s(_),ne=K.length,function(Ve){for(var Qe=!1,et=0;et<ne;++et){var nt=K[et],Ct=_[nt],Rt=T(Ve,nt);Ct instanceof Gs?(j(Ve,nt,Ct.execute(Rt)),Qe=!0):Rt!==Ct&&(j(Ve,nt,Ct),Qe=!0)}return Qe});var Se=z.table.core,Ae=Se.schema.primaryKey,Ee=Ae.outbound,Te=Ae.extractKey,Le=200,Ae=P.db._options.modifyChunkSize;Ae&&(Le=typeof Ae=="object"?Ae[Se.name]||Ae["*"]||200:Ae);function Pe(Ve,nt){var et=nt.failures,nt=nt.numFailures;ke+=Ve-nt;for(var Ct=0,Rt=s(et);Ct<Rt.length;Ct++){var Et=Rt[Ct];je.push(et[Et])}}var je=[],ke=0,Oe=[],ze=_===Au;return P.clone().primaryKeys().then(function(Ve){function Qe(nt){var Ct=Math.min(Le,Ve.length-nt),Rt=Ve.slice(nt,nt+Ct);return(ze?Promise.resolve([]):Se.getMany({trans:H,keys:Rt,cache:"immutable"})).then(function(Et){var It=[],Vt=[],Lt=Ee?[]:null,Ut=ze?Rt:[];if(!ze)for(var On=0;On<Ct;++On){var nr=Et[On],kn={value:L(nr),primKey:Ve[nt+On]};pe.call(kn,kn.value,kn)!==!1&&(kn.value==null?Ut.push(Ve[nt+On]):Ee||Tn(Te(nr),Te(kn.value))===0?(Vt.push(kn.value),Ee&&Lt.push(Ve[nt+On])):(Ut.push(Ve[nt+On]),It.push(kn.value)))}return Promise.resolve(0<It.length&&Se.mutate({trans:H,type:"add",values:It}).then(function(ci){for(var Nn in ci.failures)Ut.splice(parseInt(Nn),1);Pe(It.length,ci)})).then(function(){return(0<Vt.length||et&&typeof _=="object")&&Se.mutate({trans:H,type:"put",keys:Lt,values:Vt,criteria:et,changeSpec:typeof _!="function"&&_,isAdditionalChunk:0<nt}).then(function(ci){return Pe(Vt.length,ci)})}).then(function(){return(0<Ut.length||et&&ze)&&Se.mutate({trans:H,type:"delete",keys:Ut,criteria:et,isAdditionalChunk:0<nt}).then(function(ci){return _l(z.table,Ut,ci)}).then(function(ci){return Pe(Ut.length,ci)})}).then(function(){return Ve.length>nt+Ct&&Qe(nt+Le)})})}var et=ws(z)&&z.limit===1/0&&(typeof _!="function"||ze)&&{index:z.index,range:z.range};return Qe(0).then(function(){if(0<je.length)throw new oe("Error modifying one or more objects",je,ke,Oe);return Ve.length})})})},Gn.prototype.delete=function(){var _=this._ctx,P=_.range;return!ws(_)||_.table.schema.yProps||!_.isPrimKey&&P.type!==3?this.modify(Au):this._write(function(z){var H=_.table.core.schema.primaryKey,K=P;return _.table.core.count({trans:z,query:{index:H,range:K}}).then(function(ne){return _.table.core.mutate({trans:z,type:"deleteRange",range:K}).then(function(Ee){var Se=Ee.failures,Ee=Ee.numFailures;if(Ee)throw new oe("Could not delete some values",Object.keys(Se).map(function(Te){return Se[Te]}),ne-Ee);return ne-Ee})})})},Gn);function Gn(){}var Au=function(_,P){return P.value=null};function Bf(_,P){return _<P?-1:_===P?0:1}function Vf(_,P){return P<_?-1:_===P?0:1}function Gi(_,P,z){return _=_ instanceof tc?new _.Collection(_):_,_._ctx.error=new(z||TypeError)(P),_}function _s(_){return new _.Collection(_,function(){return Lo("")}).limit(0)}function Aa(_,P,z,H){var K,ne,pe,Se,Ee,Te,Le,Ae=z.length;if(!z.every(function(ke){return typeof ke=="string"}))return Gi(_,$c);function Pe(ke){K=ke==="next"?function(ze){return ze.toUpperCase()}:function(ze){return ze.toLowerCase()},ne=ke==="next"?function(ze){return ze.toLowerCase()}:function(ze){return ze.toUpperCase()},pe=ke==="next"?Bf:Vf;var Oe=z.map(function(ze){return{lower:ne(ze),upper:K(ze)}}).sort(function(ze,Ve){return pe(ze.lower,Ve.lower)});Se=Oe.map(function(ze){return ze.upper}),Ee=Oe.map(function(ze){return ze.lower}),Le=(Te=ke)==="next"?"":H}Pe("next"),_=new _.Collection(_,function(){return Yi(Se[0],Ee[Ae-1]+H)}),_._ondirectionchange=function(ke){Pe(ke)};var je=0;return _._addAlgorithm(function(ke,Oe,ze){var Ve=ke.key;if(typeof Ve!="string")return!1;var Qe=ne(Ve);if(P(Qe,Ee,je))return!0;for(var et=null,nt=je;nt<Ae;++nt){var Ct=function(Rt,Et,It,Vt,Lt,Ut){for(var On=Math.min(Rt.length,Vt.length),nr=-1,kn=0;kn<On;++kn){var ci=Et[kn];if(ci!==Vt[kn])return Lt(Rt[kn],It[kn])<0?Rt.substr(0,kn)+It[kn]+It.substr(kn+1):Lt(Rt[kn],Vt[kn])<0?Rt.substr(0,kn)+Vt[kn]+It.substr(kn+1):0<=nr?Rt.substr(0,nr)+Et[nr]+It.substr(nr+1):null;Lt(Rt[kn],ci)<0&&(nr=kn)}return On<Vt.length&&Ut==="next"?Rt+It.substr(Rt.length):On<Rt.length&&Ut==="prev"?Rt.substr(0,It.length):nr<0?null:Rt.substr(0,nr)+Vt[nr]+It.substr(nr+1)}(Ve,Qe,Se[nt],Ee[nt],pe,Te);Ct===null&&et===null?je=nt+1:(et===null||0<pe(et,Ct))&&(et=Ct)}return Oe(et!==null?function(){ke.continue(et+Le)}:ze),!1}),_}function Yi(_,P,z,H){return{type:2,lower:_,upper:P,lowerOpen:z,upperOpen:H}}function Lo(_){return{type:1,lower:_,upper:_}}var tc=(Object.defineProperty(Jt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Jt.prototype.between=function(_,P,z,H){z=z!==!1,H=H===!0;try{return 0<this._cmp(_,P)||this._cmp(_,P)===0&&(z||H)&&(!z||!H)?_s(this):new this.Collection(this,function(){return Yi(_,P,!z,!H)})}catch{return Gi(this,ua)}},Jt.prototype.equals=function(_){return _==null?Gi(this,ua):new this.Collection(this,function(){return Lo(_)})},Jt.prototype.above=function(_){return _==null?Gi(this,ua):new this.Collection(this,function(){return Yi(_,void 0,!0)})},Jt.prototype.aboveOrEqual=function(_){return _==null?Gi(this,ua):new this.Collection(this,function(){return Yi(_,void 0,!1)})},Jt.prototype.below=function(_){return _==null?Gi(this,ua):new this.Collection(this,function(){return Yi(void 0,_,!1,!0)})},Jt.prototype.belowOrEqual=function(_){return _==null?Gi(this,ua):new this.Collection(this,function(){return Yi(void 0,_)})},Jt.prototype.startsWith=function(_){return typeof _!="string"?Gi(this,$c):this.between(_,_+Oo,!0,!0)},Jt.prototype.startsWithIgnoreCase=function(_){return _===""?this.startsWith(_):Aa(this,function(P,z){return P.indexOf(z[0])===0},[_],Oo)},Jt.prototype.equalsIgnoreCase=function(_){return Aa(this,function(P,z){return P===z[0]},[_],"")},Jt.prototype.anyOfIgnoreCase=function(){var _=le.apply(ee,arguments);return _.length===0?_s(this):Aa(this,function(P,z){return z.indexOf(P)!==-1},_,"")},Jt.prototype.startsWithAnyOfIgnoreCase=function(){var _=le.apply(ee,arguments);return _.length===0?_s(this):Aa(this,function(P,z){return z.some(function(H){return P.indexOf(H)===0})},_,Oo)},Jt.prototype.anyOf=function(){var _=this,P=le.apply(ee,arguments),z=this._cmp;try{P.sort(z)}catch{return Gi(this,ua)}if(P.length===0)return _s(this);var H=new this.Collection(this,function(){return Yi(P[0],P[P.length-1])});H._ondirectionchange=function(ne){z=ne==="next"?_._ascending:_._descending,P.sort(z)};var K=0;return H._addAlgorithm(function(ne,pe,Se){for(var Ee=ne.key;0<z(Ee,P[K]);)if(++K===P.length)return pe(Se),!1;return z(Ee,P[K])===0||(pe(function(){ne.continue(P[K])}),!1)}),H},Jt.prototype.notEqual=function(_){return this.inAnyRange([[-1/0,_],[_,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Jt.prototype.noneOf=function(){var _=le.apply(ee,arguments);if(_.length===0)return new this.Collection(this);try{_.sort(this._ascending)}catch{return Gi(this,ua)}var P=_.reduce(function(z,H){return z?z.concat([[z[z.length-1][1],H]]):[[-1/0,H]]},null);return P.push([_[_.length-1],this.db._maxKey]),this.inAnyRange(P,{includeLowers:!1,includeUppers:!1})},Jt.prototype.inAnyRange=function(Ve,P){var z=this,H=this._cmp,K=this._ascending,ne=this._descending,pe=this._min,Se=this._max;if(Ve.length===0)return _s(this);if(!Ve.every(function(Qe){return Qe[0]!==void 0&&Qe[1]!==void 0&&K(Qe[0],Qe[1])<=0}))return Gi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var Ee=!P||P.includeLowers!==!1,Te=P&&P.includeUppers===!0,Le,Ae=K;function Pe(Qe,et){return Ae(Qe[0],et[0])}try{(Le=Ve.reduce(function(Qe,et){for(var nt=0,Ct=Qe.length;nt<Ct;++nt){var Rt=Qe[nt];if(H(et[0],Rt[1])<0&&0<H(et[1],Rt[0])){Rt[0]=pe(Rt[0],et[0]),Rt[1]=Se(Rt[1],et[1]);break}}return nt===Ct&&Qe.push(et),Qe},[])).sort(Pe)}catch{return Gi(this,ua)}var je=0,ke=Te?function(Qe){return 0<K(Qe,Le[je][1])}:function(Qe){return 0<=K(Qe,Le[je][1])},Oe=Ee?function(Qe){return 0<ne(Qe,Le[je][0])}:function(Qe){return 0<=ne(Qe,Le[je][0])},ze=ke,Ve=new this.Collection(this,function(){return Yi(Le[0][0],Le[Le.length-1][1],!Ee,!Te)});return Ve._ondirectionchange=function(Qe){Ae=Qe==="next"?(ze=ke,K):(ze=Oe,ne),Le.sort(Pe)},Ve._addAlgorithm(function(Qe,et,nt){for(var Ct,Rt=Qe.key;ze(Rt);)if(++je===Le.length)return et(nt),!1;return!ke(Ct=Rt)&&!Oe(Ct)||(z._cmp(Rt,Le[je][1])===0||z._cmp(Rt,Le[je][0])===0||et(function(){Ae===K?Qe.continue(Le[je][0]):Qe.continue(Le[je][1])}),!1)}),Ve},Jt.prototype.startsWithAnyOf=function(){var _=le.apply(ee,arguments);return _.every(function(P){return typeof P=="string"})?_.length===0?_s(this):this.inAnyRange(_.map(function(P){return[P,P+Oo]})):Gi(this,"startsWithAnyOf() only works with strings")},Jt);function Jt(){}function Xi(_){return lt(function(P){return nc(P),_(P.target.error),!1})}function nc(_){_.stopPropagation&&_.stopPropagation(),_.preventDefault&&_.preventDefault()}var rc="storagemutated",Cu="x-storagemutated-1",Kr=xs(null,rc),Fo=(As.prototype._lock=function(){return A(!_t.global),++this._reculock,this._reculock!==1||_t.global||(_t.lockOwnerFor=this),this},As.prototype._unlock=function(){if(A(!_t.global),--this._reculock==0)for(_t.global||(_t.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var _=this._blockedFuncs.shift();try{Sa(_[1],_[0])}catch{}}return this},As.prototype._locked=function(){return this._reculock&&_t.lockOwnerFor!==this},As.prototype.create=function(_){var P=this;if(!this.mode)return this;var z=this.db.idbdb,H=this.db._state.dbOpenError;if(A(!this.idbtrans),!_&&!z)switch(H&&H.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(H);case"MissingAPIError":throw new fe.MissingAPI(H.message,H);default:throw new fe.OpenFailed(H)}if(!this.active)throw new fe.TransactionInactive;return A(this._completion._state===null),(_=this.idbtrans=_||(this.db.core||z).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=lt(function(K){nc(K),P._reject(_.error)}),_.onabort=lt(function(K){nc(K),P.active&&P._reject(new fe.Abort(_.error)),P.active=!1,P.on("abort").fire(K)}),_.oncomplete=lt(function(){P.active=!1,P._resolve(),"mutatedParts"in _&&Kr.storagemutated.fire(_.mutatedParts)}),this},As.prototype._promise=function(_,P,z){var H=this;if(_==="readwrite"&&this.mode!=="readwrite")return Er(new fe.ReadOnly("Transaction is readonly"));if(!this.active)return Er(new fe.TransactionInactive);if(this._locked())return new wt(function(ne,pe){H._blockedFuncs.push([function(){H._promise(_,P,z).then(ne,pe)},_t])});if(z)return _n(function(){var ne=new wt(function(pe,Se){H._lock();var Ee=P(pe,Se,H);Ee&&Ee.then&&Ee.then(pe,Se)});return ne.finally(function(){return H._unlock()}),ne._lib=!0,ne});var K=new wt(function(ne,pe){var Se=P(ne,pe,H);Se&&Se.then&&Se.then(ne,pe)});return K._lib=!0,K},As.prototype._root=function(){return this.parent?this.parent._root():this},As.prototype.waitFor=function(_){var P,z=this._root(),H=wt.resolve(_);z._waitingFor?z._waitingFor=z._waitingFor.then(function(){return H}):(z._waitingFor=H,z._waitingQueue=[],P=z.idbtrans.objectStore(z.storeNames[0]),function ne(){for(++z._spinCount;z._waitingQueue.length;)z._waitingQueue.shift()();z._waitingFor&&(P.get(-1/0).onsuccess=ne)}());var K=z._waitingFor;return new wt(function(ne,pe){H.then(function(Se){return z._waitingQueue.push(lt(ne.bind(null,Se)))},function(Se){return z._waitingQueue.push(lt(pe.bind(null,Se)))}).finally(function(){z._waitingFor===K&&(z._waitingFor=null)})})},As.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new fe.Abort))},As.prototype.table=function(_){var P=this._memoizedTables||(this._memoizedTables={});if(f(P,_))return P[_];var z=this.schema[_];if(!z)throw new fe.NotFound("Table "+_+" not part of transaction");return z=new this.db.Table(_,z,this),z.core=this.db.core.table(_),P[_]=z},As);function As(){}function Al(_,P,z,H,K,ne,pe,Se){return{name:_,keyPath:P,unique:z,multi:H,auto:K,compound:ne,src:(z&&!pe?"&":"")+(H?"*":"")+(K?"++":"")+uo(P),type:Se}}function uo(_){return typeof _=="string"?_:_?"["+[].join.call(_,"+")+"]":""}function Cl(_,P,z){return{name:_,primKey:P,indexes:z,mappedClass:null,idxByName:(H=function(K){return[K.name,K]},z.reduce(function(K,ne,pe){return pe=H(ne,pe),pe&&(K[pe[0]]=pe[1]),K},{}))};var H}var Ca=function(_){try{return _.only([[]]),Ca=function(){return[[]]},[[]]}catch{return Ca=function(){return Oo},Oo}};function Cs(_){return _==null?function(){}:typeof _=="string"?(P=_).split(".").length===1?function(z){return z[P]}:function(z){return T(z,P)}:function(z){return T(z,_)};var P}function jl(_){return[].slice.call(_)}var ju=0;function dr(_){return _==null?":id":typeof _=="string"?_:"[".concat(_.join("+"),"]")}function Nu(_,P,Ee){function H(ze){if(ze.type===3)return null;if(ze.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var je=ze.lower,ke=ze.upper,Oe=ze.lowerOpen,ze=ze.upperOpen;return je===void 0?ke===void 0?null:P.upperBound(ke,!!ze):ke===void 0?P.lowerBound(je,!!Oe):P.bound(je,ke,!!Oe,!!ze)}function K(Pe){var je,ke=Pe.name;return{name:ke,schema:Pe,mutate:function(Oe){var ze=Oe.trans,Ve=Oe.type,Qe=Oe.keys,et=Oe.values,nt=Oe.range;return new Promise(function(Ct,Rt){Ct=lt(Ct);var Et=ze.objectStore(ke),It=Et.keyPath==null,Vt=Ve==="put"||Ve==="add";if(!Vt&&Ve!=="delete"&&Ve!=="deleteRange")throw new Error("Invalid operation type: "+Ve);var Lt,Ut=(Qe||et||{length:1}).length;if(Qe&&et&&Qe.length!==et.length)throw new Error("Given keys array must have same length as given values array.");if(Ut===0)return Ct({numFailures:0,failures:{},results:[],lastResult:void 0});function On(ha){++ci,nc(ha)}var nr=[],kn=[],ci=0;if(Ve==="deleteRange"){if(nt.type===4)return Ct({numFailures:ci,failures:kn,results:[],lastResult:void 0});nt.type===3?nr.push(Lt=Et.clear()):nr.push(Lt=Et.delete(H(nt)))}else{var It=Vt?It?[et,Qe]:[et,null]:[Qe,null],Nn=It[0],Ea=It[1];if(Vt)for(var ka=0;ka<Ut;++ka)nr.push(Lt=Ea&&Ea[ka]!==void 0?Et[Ve](Nn[ka],Ea[ka]):Et[Ve](Nn[ka])),Lt.onerror=On;else for(ka=0;ka<Ut;++ka)nr.push(Lt=Et[Ve](Nn[ka])),Lt.onerror=On}function Sd(ha){ha=ha.target.result,nr.forEach(function(Ji,Ns){return Ji.error!=null&&(kn[Ns]=Ji.error)}),Ct({numFailures:ci,failures:kn,results:Ve==="delete"?Qe:nr.map(function(Ji){return Ji.result}),lastResult:ha})}Lt.onerror=function(ha){On(ha),Sd(ha)},Lt.onsuccess=Sd})},getMany:function(Oe){var ze=Oe.trans,Ve=Oe.keys;return new Promise(function(Qe,et){Qe=lt(Qe);for(var nt,Ct=ze.objectStore(ke),Rt=Ve.length,Et=new Array(Rt),It=0,Vt=0,Lt=function(nr){nr=nr.target,Et[nr._pos]=nr.result,++Vt===It&&Qe(Et)},Ut=Xi(et),On=0;On<Rt;++On)Ve[On]!=null&&((nt=Ct.get(Ve[On]))._pos=On,nt.onsuccess=Lt,nt.onerror=Ut,++It);It===0&&Qe(Et)})},get:function(Oe){var ze=Oe.trans,Ve=Oe.key;return new Promise(function(Qe,et){Qe=lt(Qe);var nt=ze.objectStore(ke).get(Ve);nt.onsuccess=function(Ct){return Qe(Ct.target.result)},nt.onerror=Xi(et)})},query:(je=Te,function(Oe){return new Promise(function(ze,Ve){ze=lt(ze);var Qe,et,nt,It=Oe.trans,Ct=Oe.values,Rt=Oe.limit,Lt=Oe.query,Et=Rt===1/0?void 0:Rt,Vt=Lt.index,Lt=Lt.range,It=It.objectStore(ke),Vt=Vt.isPrimaryKey?It:It.index(Vt.name),Lt=H(Lt);if(Rt===0)return ze({result:[]});je?((Et=Ct?Vt.getAll(Lt,Et):Vt.getAllKeys(Lt,Et)).onsuccess=function(Ut){return ze({result:Ut.target.result})},Et.onerror=Xi(Ve)):(Qe=0,et=!Ct&&"openKeyCursor"in Vt?Vt.openKeyCursor(Lt):Vt.openCursor(Lt),nt=[],et.onsuccess=function(Ut){var On=et.result;return On?(nt.push(Ct?On.value:On.primaryKey),++Qe===Rt?ze({result:nt}):void On.continue()):ze({result:nt})},et.onerror=Xi(Ve))})}),openCursor:function(Oe){var ze=Oe.trans,Ve=Oe.values,Qe=Oe.query,et=Oe.reverse,nt=Oe.unique;return new Promise(function(Ct,Rt){Ct=lt(Ct);var Vt=Qe.index,Et=Qe.range,It=ze.objectStore(ke),It=Vt.isPrimaryKey?It:It.index(Vt.name),Vt=et?nt?"prevunique":"prev":nt?"nextunique":"next",Lt=!Ve&&"openKeyCursor"in It?It.openKeyCursor(H(Et),Vt):It.openCursor(H(Et),Vt);Lt.onerror=Xi(Rt),Lt.onsuccess=lt(function(Ut){var On,nr,kn,ci,Nn=Lt.result;Nn?(Nn.___id=++ju,Nn.done=!1,On=Nn.continue.bind(Nn),nr=(nr=Nn.continuePrimaryKey)&&nr.bind(Nn),kn=Nn.advance.bind(Nn),ci=function(){throw new Error("Cursor not stopped")},Nn.trans=ze,Nn.stop=Nn.continue=Nn.continuePrimaryKey=Nn.advance=function(){throw new Error("Cursor not started")},Nn.fail=lt(Rt),Nn.next=function(){var Ea=this,ka=1;return this.start(function(){return ka--?Ea.continue():Ea.stop()}).then(function(){return Ea})},Nn.start=function(Ea){function ka(){if(Lt.result)try{Ea()}catch(ha){Nn.fail(ha)}else Nn.done=!0,Nn.start=function(){throw new Error("Cursor behind last entry")},Nn.stop()}var Sd=new Promise(function(ha,Ji){ha=lt(ha),Lt.onerror=Xi(Ji),Nn.fail=Ji,Nn.stop=function(Ns){Nn.stop=Nn.continue=Nn.continuePrimaryKey=Nn.advance=ci,ha(Ns)}});return Lt.onsuccess=lt(function(ha){Lt.onsuccess=ka,ka()}),Nn.continue=On,Nn.continuePrimaryKey=nr,Nn.advance=kn,ka(),Sd},Ct(Nn)):Ct(null)},Rt)})},count:function(Oe){var ze=Oe.query,Ve=Oe.trans,Qe=ze.index,et=ze.range;return new Promise(function(nt,Ct){var Rt=Ve.objectStore(ke),Et=Qe.isPrimaryKey?Rt:Rt.index(Qe.name),Rt=H(et),Et=Rt?Et.count(Rt):Et.count();Et.onsuccess=lt(function(It){return nt(It.target.result)}),Et.onerror=Xi(Ct)})}}}var ne,pe,Se,Le=(pe=Ee,Se=jl((ne=_).objectStoreNames),{schema:{name:ne.name,tables:Se.map(function(Pe){return pe.objectStore(Pe)}).map(function(Pe){var je=Pe.keyPath,ze=Pe.autoIncrement,ke=o(je),Oe={},ze={name:Pe.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:je==null,compound:ke,keyPath:je,autoIncrement:ze,unique:!0,extractKey:Cs(je)},indexes:jl(Pe.indexNames).map(function(Ve){return Pe.index(Ve)}).map(function(nt){var Qe=nt.name,et=nt.unique,Ct=nt.multiEntry,nt=nt.keyPath,Ct={name:Qe,compound:o(nt),keyPath:nt,unique:et,multiEntry:Ct,extractKey:Cs(nt)};return Oe[dr(nt)]=Ct}),getIndexByKeyPath:function(Ve){return Oe[dr(Ve)]}};return Oe[":id"]=ze.primaryKey,je!=null&&(Oe[dr(je)]=ze.primaryKey),ze})},hasGetAll:0<Se.length&&"getAll"in pe.objectStore(Se[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Ee=Le.schema,Te=Le.hasGetAll,Le=Ee.tables.map(K),Ae={};return Le.forEach(function(Pe){return Ae[Pe.name]=Pe}),{stack:"dbcore",transaction:_.transaction.bind(_),table:function(Pe){if(!Ae[Pe])throw new Error("Table '".concat(Pe,"' not found"));return Ae[Pe]},MIN_KEY:-1/0,MAX_KEY:Ca(P),schema:Ee}}function ic(_,P,z,H){var K=z.IDBKeyRange;return z.indexedDB,{dbcore:(H=Nu(P,K,H),_.dbcore.reduce(function(ne,pe){return pe=pe.create,r(r({},ne),pe(ne))},H))}}function Ys(_,H){var z=H.db,H=ic(_._middlewares,z,_._deps,H);_.core=H.dbcore,_.tables.forEach(function(K){var ne=K.name;_.core.schema.tables.some(function(pe){return pe.name===ne})&&(K.core=_.core.table(ne),_[ne]instanceof _.Table&&(_[ne].core=K.core))})}function zo(_,P,z,H){z.forEach(function(K){var ne=H[K];P.forEach(function(pe){var Se=function Ee(Te,Le){return v(Te,Le)||(Te=u(Te))&&Ee(Te,Le)}(pe,K);(!Se||"value"in Se&&Se.value===void 0)&&(pe===_.Transaction.prototype||pe instanceof _.Transaction?m(pe,K,{get:function(){return this.table(K)},set:function(Ee){h(this,K,{value:Ee,writable:!0,configurable:!0,enumerable:!0})}}):pe[K]=new _.Table(K,ne))})})}function $o(_,P){P.forEach(function(z){for(var H in z)z[H]instanceof _.Table&&delete z[H]})}function Nl(_,P){return _._cfg.version-P._cfg.version}function El(_,P,z,H){var K=_._dbSchema;z.objectStoreNames.contains("$meta")&&!K.$meta&&(K.$meta=Cl("$meta",Hc("")[0],[]),_._storeNames.push("$meta"));var ne=_._createTransaction("readwrite",_._storeNames,K);ne.create(z),ne._completion.catch(H);var pe=ne._reject.bind(ne),Se=_t.transless||_t;_n(function(){return _t.trans=ne,_t.transless=Se,P!==0?(Ys(_,z),Te=P,((Ee=ne).storeNames.includes("$meta")?Ee.table("$meta").get("version").then(function(Le){return Le??Te}):wt.resolve(Te)).then(function(Le){return Pe=Le,je=ne,ke=z,Oe=[],Le=(Ae=_)._versions,ze=Ae._dbSchema=Bo(0,Ae.idbdb,ke),(Le=Le.filter(function(Ve){return Ve._cfg.version>=Pe})).length!==0?(Le.forEach(function(Ve){Oe.push(function(){var Qe=ze,et=Ve._cfg.dbschema;ts(Ae,Qe,ke),ts(Ae,et,ke),ze=Ae._dbSchema=et;var nt=ac(Qe,et);nt.add.forEach(function(Vt){Xs(ke,Vt[0],Vt[1].primKey,Vt[1].indexes)}),nt.change.forEach(function(Vt){if(Vt.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var Lt=ke.objectStore(Vt.name);Vt.add.forEach(function(Ut){return kl(Lt,Ut)}),Vt.change.forEach(function(Ut){Lt.deleteIndex(Ut.name),kl(Lt,Ut)}),Vt.del.forEach(function(Ut){return Lt.deleteIndex(Ut)})});var Ct=Ve._cfg.contentUpgrade;if(Ct&&Ve._cfg.version>Pe){Ys(Ae,ke),je._memoizedTables={};var Rt=E(et);nt.del.forEach(function(Vt){Rt[Vt]=Qe[Vt]}),$o(Ae,[Ae.Transaction.prototype]),zo(Ae,[Ae.Transaction.prototype],s(Rt),Rt),je.schema=Rt;var Et,It=se(Ct);return It&&gr(),nt=wt.follow(function(){var Vt;(Et=Ct(je))&&It&&(Vt=vr.bind(null,null),Et.then(Vt,Vt))}),Et&&typeof Et.then=="function"?wt.resolve(Et):nt.then(function(){return Et})}}),Oe.push(function(Qe){var et,nt,Ct=Ve._cfg.dbschema;et=Ct,nt=Qe,[].slice.call(nt.db.objectStoreNames).forEach(function(Rt){return et[Rt]==null&&nt.db.deleteObjectStore(Rt)}),$o(Ae,[Ae.Transaction.prototype]),zo(Ae,[Ae.Transaction.prototype],Ae._storeNames,Ae._dbSchema),je.schema=Ae._dbSchema}),Oe.push(function(Qe){Ae.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Ae.idbdb.version/10)===Ve._cfg.version?(Ae.idbdb.deleteObjectStore("$meta"),delete Ae._dbSchema.$meta,Ae._storeNames=Ae._storeNames.filter(function(et){return et!=="$meta"})):Qe.objectStore("$meta").put(Ve._cfg.version,"version"))})}),function Ve(){return Oe.length?wt.resolve(Oe.shift()(je.idbtrans)).then(Ve):wt.resolve()}().then(function(){Va(ze,ke)})):wt.resolve();var Ae,Pe,je,ke,Oe,ze}).catch(pe)):(s(K).forEach(function(Le){Xs(z,Le,K[Le].primKey,K[Le].indexes)}),Ys(_,z),void wt.follow(function(){return _.on.populate.fire(ne)}).catch(pe));var Ee,Te})}function js(_,P){Va(_._dbSchema,P),P.db.version%10!=0||P.objectStoreNames.contains("$meta")||P.db.createObjectStore("$meta").add(Math.ceil(P.db.version/10-1),"version");var z=Bo(0,_.idbdb,P);ts(_,_._dbSchema,P);for(var H=0,K=ac(z,_._dbSchema).change;H<K.length;H++){var ne=function(pe){if(pe.change.length||pe.recreate)return console.warn("Unable to patch indexes of table ".concat(pe.name," because it has changes on the type of index or primary key.")),{value:void 0};var Se=P.objectStore(pe.name);pe.add.forEach(function(Ee){ft&&console.debug("Dexie upgrade patch: Creating missing index ".concat(pe.name,".").concat(Ee.src)),kl(Se,Ee)})}(K[H]);if(typeof ne=="object")return ne.value}}function ac(_,P){var z,H={del:[],add:[],change:[]};for(z in _)P[z]||H.del.push(z);for(z in P){var K=_[z],ne=P[z];if(K){var pe={name:z,def:ne,recreate:!1,del:[],add:[],change:[]};if(""+(K.primKey.keyPath||"")!=""+(ne.primKey.keyPath||"")||K.primKey.auto!==ne.primKey.auto)pe.recreate=!0,H.change.push(pe);else{var Se=K.idxByName,Ee=ne.idxByName,Te=void 0;for(Te in Se)Ee[Te]||pe.del.push(Te);for(Te in Ee){var Le=Se[Te],Ae=Ee[Te];Le?Le.src!==Ae.src&&pe.change.push(Ae):pe.add.push(Ae)}(0<pe.del.length||0<pe.add.length||0<pe.change.length)&&H.change.push(pe)}}else H.add.push([z,ne])}return H}function Xs(_,P,z,H){var K=_.db.createObjectStore(P,z.keyPath?{keyPath:z.keyPath,autoIncrement:z.auto}:{autoIncrement:z.auto});return H.forEach(function(ne){return kl(K,ne)}),K}function Va(_,P){s(_).forEach(function(z){P.db.objectStoreNames.contains(z)||(ft&&console.debug("Dexie: Creating missing table",z),Xs(P,z,_[z].primKey,_[z].indexes))})}function kl(_,P){_.createIndex(P.name,P.keyPath,{unique:P.unique,multiEntry:P.multi})}function Bo(_,P,z){var H={};return b(P.objectStoreNames,0).forEach(function(K){for(var ne=z.objectStore(K),pe=Al(uo(Te=ne.keyPath),Te||"",!0,!1,!!ne.autoIncrement,Te&&typeof Te!="string",!0),Se=[],Ee=0;Ee<ne.indexNames.length;++Ee){var Le=ne.index(ne.indexNames[Ee]),Te=Le.keyPath,Le=Al(Le.name,Te,!!Le.unique,!!Le.multiEntry,!1,Te&&typeof Te!="string",!1);Se.push(Le)}H[K]=Cl(K,pe,Se)}),H}function ts(_,P,z){for(var H=z.db.objectStoreNames,K=0;K<H.length;++K){var ne=H[K],pe=z.objectStore(ne);_._hasGetAll="getAll"in pe;for(var Se=0;Se<pe.indexNames.length;++Se){var Ee=pe.indexNames[Se],Te=pe.index(Ee).keyPath,Le=typeof Te=="string"?Te:"["+b(Te).join("+")+"]";!P[ne]||(Te=P[ne].idxByName[Le])&&(Te.name=Ee,delete P[ne].idxByName[Le],P[ne].idxByName[Ee]=Te)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(_._hasGetAll=!1)}function Hc(_){return _.split(",").map(function(P,z){var ne=P.split(":"),H=(K=ne[1])===null||K===void 0?void 0:K.trim(),K=(P=ne[0].trim()).replace(/([&*]|\+\+)/g,""),ne=/^\[/.test(K)?K.match(/^\[(.*)\]$/)[1].split("+"):K;return Al(K,ne||null,/\&/.test(P),/\*/.test(P),/\+\+/.test(P),o(ne),z===0,H)})}var R=(X.prototype._createTableSchema=Cl,X.prototype._parseIndexSyntax=Hc,X.prototype._parseStoresSpec=function(_,P){var z=this;s(_).forEach(function(H){if(_[H]!==null){var K=z._parseIndexSyntax(_[H]),ne=K.shift();if(!ne)throw new fe.Schema("Invalid schema for table "+H+": "+_[H]);if(ne.unique=!0,ne.multi)throw new fe.Schema("Primary key cannot be multiEntry*");K.forEach(function(pe){if(pe.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!pe.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),K=z._createTableSchema(H,ne,K),P[H]=K}})},X.prototype.stores=function(z){var P=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,z):z;var z=P._versions,H={},K={};return z.forEach(function(ne){l(H,ne._cfg.storesSource),K=ne._cfg.dbschema={},ne._parseStoresSpec(H,K)}),P._dbSchema=K,$o(P,[P._allTables,P,P.Transaction.prototype]),zo(P,[P._allTables,P,P.Transaction.prototype,this._cfg.tables],s(K),K),P._storeNames=s(K),this},X.prototype.upgrade=function(_){return this._cfg.contentUpgrade=Ot(this._cfg.contentUpgrade||ie,_),this},X);function X(){}function me(_,P){var z=_._dbNamesDB;return z||(z=_._dbNamesDB=new rs(Ni,{addons:[],indexedDB:_,IDBKeyRange:P})).version(1).stores({dbnames:"name"}),z.table("dbnames")}function Ne(_){return _&&typeof _.databases=="function"}function $e(_){return _n(function(){return _t.letThrough=!0,_()})}function rt(_){return!("from"in _)}var st=function(_,P){if(!this){var z=new st;return _&&"d"in _&&l(z,_),z}l(this,arguments.length?{d:1,from:_,to:1<arguments.length?P:_}:{d:0})};function Kt(_,P,z){var H=Tn(P,z);if(!isNaN(H)){if(0<H)throw RangeError();if(rt(_))return l(_,{from:P,to:z,d:1});var K=_.l,H=_.r;if(Tn(z,_.from)<0)return K?Kt(K,P,z):_.l={from:P,to:z,d:1,l:null,r:null},er(_);if(0<Tn(P,_.to))return H?Kt(H,P,z):_.r={from:P,to:z,d:1,l:null,r:null},er(_);Tn(P,_.from)<0&&(_.from=P,_.l=null,_.d=H?H.d+1:1),0<Tn(z,_.to)&&(_.to=z,_.r=null,_.d=_.l?_.l.d+1:1),z=!_.r,K&&!_.l&&Zt(_,K),H&&z&&Zt(_,H)}}function Zt(_,P){rt(P)||function z(H,Ee){var ne=Ee.from,pe=Ee.to,Se=Ee.l,Ee=Ee.r;Kt(H,ne,pe),Se&&z(H,Se),Ee&&z(H,Ee)}(_,P)}function yn(_,P){var z=xn(P),H=z.next();if(H.done)return!1;for(var K=H.value,ne=xn(_),pe=ne.next(K.from),Se=pe.value;!H.done&&!pe.done;){if(Tn(Se.from,K.to)<=0&&0<=Tn(Se.to,K.from))return!0;Tn(K.from,Se.from)<0?K=(H=z.next(Se.from)).value:Se=(pe=ne.next(K.from)).value}return!1}function xn(_){var P=rt(_)?null:{s:0,n:_};return{next:function(z){for(var H=0<arguments.length;P;)switch(P.s){case 0:if(P.s=1,H)for(;P.n.l&&Tn(z,P.n.from)<0;)P={up:P,n:P.n.l,s:1};else for(;P.n.l;)P={up:P,n:P.n.l,s:1};case 1:if(P.s=2,!H||Tn(z,P.n.to)<=0)return{value:P.n,done:!1};case 2:if(P.n.r){P.s=3,P={up:P,n:P.n.r,s:0};continue}case 3:P=P.up}return{done:!0}}}}function er(_){var P,z,H=(((P=_.r)===null||P===void 0?void 0:P.d)||0)-(((z=_.l)===null||z===void 0?void 0:z.d)||0),K=1<H?"r":H<-1?"l":"";K&&(P=K=="r"?"l":"r",z=r({},_),H=_[K],_.from=H.from,_.to=H.to,_[K]=H[K],z[K]=H[P],(_[P]=z).d=fr(z)),_.d=fr(_)}function fr(z){var P=z.r,z=z.l;return(P?z?Math.max(P.d,z.d):P.d:z?z.d:0)+1}function Wr(_,P){return s(P).forEach(function(z){_[z]?Zt(_[z],P[z]):_[z]=function H(K){var ne,pe,Se={};for(ne in K)f(K,ne)&&(pe=K[ne],Se[ne]=!pe||typeof pe!="object"||D.has(pe.constructor)?pe:H(pe));return Se}(P[z])}),_}function br(_,P){return _.all||P.all||Object.keys(_).some(function(z){return P[z]&&yn(P[z],_[z])})}p(st.prototype,((Zi={add:function(_){return Zt(this,_),this},addKey:function(_){return Kt(this,_,_),this},addKeys:function(_){var P=this;return _.forEach(function(z){return Kt(P,z,z)}),this},hasKey:function(_){var P=xn(this).next(_).value;return P&&Tn(P.from,_)<=0&&0<=Tn(P.to,_)}})[Y]=function(){return xn(this)},Zi));var Dr={},Gr={},Jr=!1;function kr(_){Wr(Gr,_),Jr||(Jr=!0,setTimeout(function(){Jr=!1,Qi(Gr,!(Gr={}))},0))}function Qi(_,P){P===void 0&&(P=!1);var z=new Set;if(_.all)for(var H=0,K=Object.values(Dr);H<K.length;H++)Wc(pe=K[H],_,z,P);else for(var ne in _){var pe,Se=/^idb\:\/\/(.*)\/(.*)\//.exec(ne);Se&&(ne=Se[1],Se=Se[2],(pe=Dr["idb://".concat(ne,"/").concat(Se)])&&Wc(pe,_,z,P))}z.forEach(function(Ee){return Ee()})}function Wc(_,P,z,H){for(var K=[],ne=0,pe=Object.entries(_.queries.query);ne<pe.length;ne++){for(var Se=pe[ne],Ee=Se[0],Te=[],Le=0,Ae=Se[1];Le<Ae.length;Le++){var Pe=Ae[Le];br(P,Pe.obsSet)?Pe.subscribers.forEach(function(ze){return z.add(ze)}):H&&Te.push(Pe)}H&&K.push([Ee,Te])}if(H)for(var je=0,ke=K;je<ke.length;je++){var Oe=ke[je],Ee=Oe[0],Te=Oe[1];_.queries.query[Ee]=Te}}function Qs(_){var P=_._state,z=_._deps.indexedDB;if(P.isBeingOpened||_.idbdb)return P.dbReadyPromise.then(function(){return P.dbOpenError?Er(P.dbOpenError):_});P.isBeingOpened=!0,P.dbOpenError=null,P.openComplete=!1;var H=P.openCanceller,K=Math.round(10*_.verno),ne=!1;function pe(){if(P.openCanceller!==H)throw new fe.DatabaseClosed("db.open() was cancelled")}function Se(){return new wt(function(Pe,je){if(pe(),!z)throw new fe.MissingAPI;var ke=_.name,Oe=P.autoSchema||!K?z.open(ke):z.open(ke,K);if(!Oe)throw new fe.MissingAPI;Oe.onerror=Xi(je),Oe.onblocked=lt(_._fireOnBlocked),Oe.onupgradeneeded=lt(function(ze){var Ve;Le=Oe.transaction,P.autoSchema&&!_._options.allowEmptyDB?(Oe.onerror=nc,Le.abort(),Oe.result.close(),(Ve=z.deleteDatabase(ke)).onsuccess=Ve.onerror=lt(function(){je(new fe.NoSuchDatabase("Database ".concat(ke," doesnt exist")))})):(Le.onerror=Xi(je),ze=ze.oldVersion>Math.pow(2,62)?0:ze.oldVersion,Ae=ze<1,_.idbdb=Oe.result,ne&&js(_,Le),El(_,ze/10,Le,je))},je),Oe.onsuccess=lt(function(){Le=null;var ze,Ve,Qe,et,nt,Ct=_.idbdb=Oe.result,Rt=b(Ct.objectStoreNames);if(0<Rt.length)try{var Et=Ct.transaction((et=Rt).length===1?et[0]:et,"readonly");if(P.autoSchema)Ve=Ct,Qe=Et,(ze=_).verno=Ve.version/10,Qe=ze._dbSchema=Bo(0,Ve,Qe),ze._storeNames=b(Ve.objectStoreNames,0),zo(ze,[ze._allTables],s(Qe),Qe);else if(ts(_,_._dbSchema,Et),((nt=ac(Bo(0,(nt=_).idbdb,Et),nt._dbSchema)).add.length||nt.change.some(function(It){return It.add.length||It.change.length}))&&!ne)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ct.close(),K=Ct.version+1,ne=!0,Pe(Se());Ys(_,Et)}catch{}qs.push(_),Ct.onversionchange=lt(function(It){P.vcFired=!0,_.on("versionchange").fire(It)}),Ct.onclose=lt(function(It){_.on("close").fire(It)}),Ae&&(nt=_._deps,Et=ke,Ct=nt.indexedDB,nt=nt.IDBKeyRange,Ne(Ct)||Et===Ni||me(Ct,nt).put({name:Et}).catch(ie)),Pe()},je)}).catch(function(Pe){switch(Pe==null?void 0:Pe.name){case"UnknownError":if(0<P.PR1398_maxLoop)return P.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Se();break;case"VersionError":if(0<K)return K=0,Se()}return wt.reject(Pe)})}var Ee,Te=P.dbReadyResolve,Le=null,Ae=!1;return wt.race([H,(typeof navigator>"u"?wt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Pe){function je(){return indexedDB.databases().finally(Pe)}Ee=setInterval(je,100),je()}).finally(function(){return clearInterval(Ee)}):Promise.resolve()).then(Se)]).then(function(){return pe(),P.onReadyBeingFired=[],wt.resolve($e(function(){return _.on.ready.fire(_.vip)})).then(function Pe(){if(0<P.onReadyBeingFired.length){var je=P.onReadyBeingFired.reduce(Ot,ie);return P.onReadyBeingFired=[],wt.resolve($e(function(){return je(_.vip)})).then(Pe)}})}).finally(function(){P.openCanceller===H&&(P.onReadyBeingFired=null,P.isBeingOpened=!1)}).catch(function(Pe){P.dbOpenError=Pe;try{Le&&Le.abort()}catch{}return H===P.openCanceller&&_._close(),Er(Pe)}).finally(function(){P.openComplete=!0,Te()}).then(function(){var Pe;return Ae&&(Pe={},_.tables.forEach(function(je){je.schema.indexes.forEach(function(ke){ke.name&&(Pe["idb://".concat(_.name,"/").concat(je.name,"/").concat(ke.name)]=new st(-1/0,[[[]]]))}),Pe["idb://".concat(_.name,"/").concat(je.name,"/")]=Pe["idb://".concat(_.name,"/").concat(je.name,"/:dels")]=new st(-1/0,[[[]]])}),Kr(rc).fire(Pe),Qi(Pe,!0)),_})}function w(_){function P(ne){return _.next(ne)}var z=K(P),H=K(function(ne){return _.throw(ne)});function K(ne){return function(Ee){var Se=ne(Ee),Ee=Se.value;return Se.done?Ee:Ee&&typeof Ee.then=="function"?Ee.then(z,H):o(Ee)?Promise.all(Ee).then(z,H):z(Ee)}}return K(P)()}function B(_,P,z){for(var H=o(_)?_.slice():[_],K=0;K<z;++K)H.push(P);return H}var W={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(_){return r(r({},_),{table:function(P){var z=_.table(P),H=z.schema,K={},ne=[];function pe(Ae,Pe,je){var ke=dr(Ae),Oe=K[ke]=K[ke]||[],ze=Ae==null?0:typeof Ae=="string"?1:Ae.length,Ve=0<Pe,Ve=r(r({},je),{name:Ve?"".concat(ke,"(virtual-from:").concat(je.name,")"):je.name,lowLevelIndex:je,isVirtual:Ve,keyTail:Pe,keyLength:ze,extractKey:Cs(Ae),unique:!Ve&&je.unique});return Oe.push(Ve),Ve.isPrimaryKey||ne.push(Ve),1<ze&&pe(ze===2?Ae[0]:Ae.slice(0,ze-1),Pe+1,je),Oe.sort(function(Qe,et){return Qe.keyTail-et.keyTail}),Ve}P=pe(H.primaryKey.keyPath,0,H.primaryKey),K[":id"]=[P];for(var Se=0,Ee=H.indexes;Se<Ee.length;Se++){var Te=Ee[Se];pe(Te.keyPath,0,Te)}function Le(Ae){var Pe,je=Ae.query.index;return je.isVirtual?r(r({},Ae),{query:{index:je.lowLevelIndex,range:(Pe=Ae.query.range,je=je.keyTail,{type:Pe.type===1?2:Pe.type,lower:B(Pe.lower,Pe.lowerOpen?_.MAX_KEY:_.MIN_KEY,je),lowerOpen:!0,upper:B(Pe.upper,Pe.upperOpen?_.MIN_KEY:_.MAX_KEY,je),upperOpen:!0})}}):Ae}return r(r({},z),{schema:r(r({},H),{primaryKey:P,indexes:ne,getIndexByKeyPath:function(Ae){return(Ae=K[dr(Ae)])&&Ae[0]}}),count:function(Ae){return z.count(Le(Ae))},query:function(Ae){return z.query(Le(Ae))},openCursor:function(Ae){var Pe=Ae.query.index,je=Pe.keyTail,ke=Pe.isVirtual,Oe=Pe.keyLength;return ke?z.openCursor(Le(Ae)).then(function(Ve){return Ve&&ze(Ve)}):z.openCursor(Ae);function ze(Ve){return Object.create(Ve,{continue:{value:function(Qe){Qe!=null?Ve.continue(B(Qe,Ae.reverse?_.MAX_KEY:_.MIN_KEY,je)):Ae.unique?Ve.continue(Ve.key.slice(0,Oe).concat(Ae.reverse?_.MIN_KEY:_.MAX_KEY,je)):Ve.continue()}},continuePrimaryKey:{value:function(Qe,et){Ve.continuePrimaryKey(B(Qe,_.MAX_KEY,je),et)}},primaryKey:{get:function(){return Ve.primaryKey}},key:{get:function(){var Qe=Ve.key;return Oe===1?Qe[0]:Qe.slice(0,Oe)}},value:{get:function(){return Ve.value}}})}}})}})}};function ue(_,P,z,H){return z=z||{},H=H||"",s(_).forEach(function(K){var ne,pe,Se;f(P,K)?(ne=_[K],pe=P[K],typeof ne=="object"&&typeof pe=="object"&&ne&&pe?(Se=Q(ne))!==Q(pe)?z[H+K]=P[K]:Se==="Object"?ue(ne,pe,z,H+K+"."):ne!==pe&&(z[H+K]=P[K]):ne!==pe&&(z[H+K]=P[K])):z[H+K]=void 0}),s(P).forEach(function(K){f(_,K)||(z[H+K]=P[K])}),z}function Be(_,P){return P.type==="delete"?P.keys:P.keys||P.values.map(_.extractKey)}var Ye={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(_){return r(r({},_),{table:function(P){var z=_.table(P),H=z.schema.primaryKey;return r(r({},z),{mutate:function(K){var ne=_t.trans,pe=ne.table(P).hook,Se=pe.deleting,Ee=pe.creating,Te=pe.updating;switch(K.type){case"add":if(Ee.fire===ie)break;return ne._promise("readwrite",function(){return Le(K)},!0);case"put":if(Ee.fire===ie&&Te.fire===ie)break;return ne._promise("readwrite",function(){return Le(K)},!0);case"delete":if(Se.fire===ie)break;return ne._promise("readwrite",function(){return Le(K)},!0);case"deleteRange":if(Se.fire===ie)break;return ne._promise("readwrite",function(){return function Ae(Pe,je,ke){return z.query({trans:Pe,values:!1,query:{index:H,range:je},limit:ke}).then(function(Oe){var ze=Oe.result;return Le({type:"delete",keys:ze,trans:Pe}).then(function(Ve){return 0<Ve.numFailures?Promise.reject(Ve.failures[0]):ze.length<ke?{failures:[],numFailures:0,lastResult:void 0}:Ae(Pe,r(r({},je),{lower:ze[ze.length-1],lowerOpen:!0}),ke)})})}(K.trans,K.range,1e4)},!0)}return z.mutate(K);function Le(Ae){var Pe,je,ke,Oe=_t.trans,ze=Ae.keys||Be(H,Ae);if(!ze)throw new Error("Keys missing");return(Ae=Ae.type==="add"||Ae.type==="put"?r(r({},Ae),{keys:ze}):r({},Ae)).type!=="delete"&&(Ae.values=i([],Ae.values)),Ae.keys&&(Ae.keys=i([],Ae.keys)),Pe=z,ke=ze,((je=Ae).type==="add"?Promise.resolve([]):Pe.getMany({trans:je.trans,keys:ke,cache:"immutable"})).then(function(Ve){var Qe=ze.map(function(et,nt){var Ct,Rt,Et,It=Ve[nt],Vt={onerror:null,onsuccess:null};return Ae.type==="delete"?Se.fire.call(Vt,et,It,Oe):Ae.type==="add"||It===void 0?(Ct=Ee.fire.call(Vt,et,Ae.values[nt],Oe),et==null&&Ct!=null&&(Ae.keys[nt]=et=Ct,H.outbound||j(Ae.values[nt],H.keyPath,et))):(Ct=ue(It,Ae.values[nt]),(Rt=Te.fire.call(Vt,Ct,et,It,Oe))&&(Et=Ae.values[nt],Object.keys(Rt).forEach(function(Lt){f(Et,Lt)?Et[Lt]=Rt[Lt]:j(Et,Lt,Rt[Lt])}))),Vt});return z.mutate(Ae).then(function(et){for(var nt=et.failures,Ct=et.results,Rt=et.numFailures,et=et.lastResult,Et=0;Et<ze.length;++Et){var It=(Ct||ze)[Et],Vt=Qe[Et];It==null?Vt.onerror&&Vt.onerror(nt[Et]):Vt.onsuccess&&Vt.onsuccess(Ae.type==="put"&&Ve[Et]?Ae.values[Et]:It)}return{failures:nt,results:Ct,numFailures:Rt,lastResult:et}}).catch(function(et){return Qe.forEach(function(nt){return nt.onerror&&nt.onerror(et)}),Promise.reject(et)})})}}})}})}};function Tt(_,P,z){try{if(!P||P.keys.length<_.length)return null;for(var H=[],K=0,ne=0;K<P.keys.length&&ne<_.length;++K)Tn(P.keys[K],_[ne])===0&&(H.push(z?L(P.values[K]):P.values[K]),++ne);return H.length===_.length?H:null}catch{return null}}var tr={stack:"dbcore",level:-1,create:function(_){return{table:function(P){var z=_.table(P);return r(r({},z),{getMany:function(H){if(!H.cache)return z.getMany(H);var K=Tt(H.keys,H.trans._cache,H.cache==="clone");return K?wt.resolve(K):z.getMany(H).then(function(ne){return H.trans._cache={keys:H.keys,values:H.cache==="clone"?L(ne):ne},ne})},mutate:function(H){return H.type!=="add"&&(H.trans._cache=null),z.mutate(H)}})}}}};function ei(_,P){return _.trans.mode==="readonly"&&!!_.subscr&&!_.trans.explicit&&_.trans.db._options.cache!=="disabled"&&!P.schema.primaryKey.outbound}function Bn(_,P){switch(_){case"query":return P.values&&!P.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Vn={stack:"dbcore",level:0,name:"Observability",create:function(_){var P=_.schema.name,z=new st(_.MIN_KEY,_.MAX_KEY);return r(r({},_),{transaction:function(H,K,ne){if(_t.subscr&&K!=="readonly")throw new fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(_t.querier));return _.transaction(H,K,ne)},table:function(H){var K=_.table(H),ne=K.schema,pe=ne.primaryKey,Ae=ne.indexes,Se=pe.extractKey,Ee=pe.outbound,Te=pe.autoIncrement&&Ae.filter(function(je){return je.compound&&je.keyPath.includes(pe.keyPath)}),Le=r(r({},K),{mutate:function(je){function ke(Lt){return Lt="idb://".concat(P,"/").concat(H,"/").concat(Lt),et[Lt]||(et[Lt]=new st)}var Oe,ze,Ve,Qe=je.trans,et=je.mutatedParts||(je.mutatedParts={}),nt=ke(""),Ct=ke(":dels"),Rt=je.type,Vt=je.type==="deleteRange"?[je.range]:je.type==="delete"?[je.keys]:je.values.length<50?[Be(pe,je).filter(function(Lt){return Lt}),je.values]:[],Et=Vt[0],It=Vt[1],Vt=je.trans._cache;return o(Et)?(nt.addKeys(Et),(Vt=Rt==="delete"||Et.length===It.length?Tt(Et,Vt):null)||Ct.addKeys(Et),(Vt||It)&&(Oe=ke,ze=Vt,Ve=It,ne.indexes.forEach(function(Lt){var Ut=Oe(Lt.name||"");function On(kn){return kn!=null?Lt.extractKey(kn):null}function nr(kn){return Lt.multiEntry&&o(kn)?kn.forEach(function(ci){return Ut.addKey(ci)}):Ut.addKey(kn)}(ze||Ve).forEach(function(kn,Ea){var Nn=ze&&On(ze[Ea]),Ea=Ve&&On(Ve[Ea]);Tn(Nn,Ea)!==0&&(Nn!=null&&nr(Nn),Ea!=null&&nr(Ea))})}))):Et?(It={from:(It=Et.lower)!==null&&It!==void 0?It:_.MIN_KEY,to:(It=Et.upper)!==null&&It!==void 0?It:_.MAX_KEY},Ct.add(It),nt.add(It)):(nt.add(z),Ct.add(z),ne.indexes.forEach(function(Lt){return ke(Lt.name).add(z)})),K.mutate(je).then(function(Lt){return!Et||je.type!=="add"&&je.type!=="put"||(nt.addKeys(Lt.results),Te&&Te.forEach(function(Ut){for(var On=je.values.map(function(Nn){return Ut.extractKey(Nn)}),nr=Ut.keyPath.findIndex(function(Nn){return Nn===pe.keyPath}),kn=0,ci=Lt.results.length;kn<ci;++kn)On[kn][nr]=Lt.results[kn];ke(Ut.name).addKeys(On)})),Qe.mutatedParts=Wr(Qe.mutatedParts||{},et),Lt})}}),Ae=function(ke){var Oe=ke.query,ke=Oe.index,Oe=Oe.range;return[ke,new st((ke=Oe.lower)!==null&&ke!==void 0?ke:_.MIN_KEY,(Oe=Oe.upper)!==null&&Oe!==void 0?Oe:_.MAX_KEY)]},Pe={get:function(je){return[pe,new st(je.key)]},getMany:function(je){return[pe,new st().addKeys(je.keys)]},count:Ae,query:Ae,openCursor:Ae};return s(Pe).forEach(function(je){Le[je]=function(ke){var Oe=_t.subscr,ze=!!Oe,Ve=ei(_t,K)&&Bn(je,ke)?ke.obsSet={}:Oe;if(ze){var Qe=function(It){return It="idb://".concat(P,"/").concat(H,"/").concat(It),Ve[It]||(Ve[It]=new st)},et=Qe(""),nt=Qe(":dels"),Oe=Pe[je](ke),ze=Oe[0],Oe=Oe[1];if((je==="query"&&ze.isPrimaryKey&&!ke.values?nt:Qe(ze.name||"")).add(Oe),!ze.isPrimaryKey){if(je!=="count"){var Ct=je==="query"&&Ee&&ke.values&&K.query(r(r({},ke),{values:!1}));return K[je].apply(this,arguments).then(function(It){if(je==="query"){if(Ee&&ke.values)return Ct.then(function(On){return On=On.result,et.addKeys(On),It});var Vt=ke.values?It.result.map(Se):It.result;(ke.values?et:nt).addKeys(Vt)}else if(je==="openCursor"){var Lt=It,Ut=ke.values;return Lt&&Object.create(Lt,{key:{get:function(){return nt.addKey(Lt.primaryKey),Lt.key}},primaryKey:{get:function(){var On=Lt.primaryKey;return nt.addKey(On),On}},value:{get:function(){return Ut&&et.addKey(Lt.primaryKey),Lt.value}}})}return It})}nt.add(z)}}return K[je].apply(this,arguments)}}),Le}})}};function Lr(_,P,z){if(z.numFailures===0)return P;if(P.type==="deleteRange")return null;var H=P.keys?P.keys.length:"values"in P&&P.values?P.values.length:1;return z.numFailures===H?null:(P=r({},P),o(P.keys)&&(P.keys=P.keys.filter(function(K,ne){return!(ne in z.failures)})),"values"in P&&o(P.values)&&(P.values=P.values.filter(function(K,ne){return!(ne in z.failures)})),P)}function ns(_,P){return z=_,((H=P).lower===void 0||(H.lowerOpen?0<Tn(z,H.lower):0<=Tn(z,H.lower)))&&(_=_,(P=P).upper===void 0||(P.upperOpen?Tn(_,P.upper)<0:Tn(_,P.upper)<=0));var z,H}function ja(_,P,Pe,H,K,ne){if(!Pe||Pe.length===0)return _;var pe=P.query.index,Se=pe.multiEntry,Ee=P.query.range,Te=H.schema.primaryKey.extractKey,Le=pe.extractKey,Ae=(pe.lowLevelIndex||pe).extractKey,Pe=Pe.reduce(function(je,ke){var Oe=je,ze=[];if(ke.type==="add"||ke.type==="put")for(var Ve=new st,Qe=ke.values.length-1;0<=Qe;--Qe){var et,nt=ke.values[Qe],Ct=Te(nt);Ve.hasKey(Ct)||(et=Le(nt),(Se&&o(et)?et.some(function(Lt){return ns(Lt,Ee)}):ns(et,Ee))&&(Ve.addKey(Ct),ze.push(nt)))}switch(ke.type){case"add":var Rt=new st().addKeys(P.values?je.map(function(Ut){return Te(Ut)}):je),Oe=je.concat(P.values?ze.filter(function(Ut){return Ut=Te(Ut),!Rt.hasKey(Ut)&&(Rt.addKey(Ut),!0)}):ze.map(function(Ut){return Te(Ut)}).filter(function(Ut){return!Rt.hasKey(Ut)&&(Rt.addKey(Ut),!0)}));break;case"put":var Et=new st().addKeys(ke.values.map(function(Ut){return Te(Ut)}));Oe=je.filter(function(Ut){return!Et.hasKey(P.values?Te(Ut):Ut)}).concat(P.values?ze:ze.map(function(Ut){return Te(Ut)}));break;case"delete":var It=new st().addKeys(ke.keys);Oe=je.filter(function(Ut){return!It.hasKey(P.values?Te(Ut):Ut)});break;case"deleteRange":var Vt=ke.range;Oe=je.filter(function(Ut){return!ns(Te(Ut),Vt)})}return Oe},_);return Pe===_?_:(Pe.sort(function(je,ke){return Tn(Ae(je),Ae(ke))||Tn(Te(je),Te(ke))}),P.limit&&P.limit<1/0&&(Pe.length>P.limit?Pe.length=P.limit:_.length===P.limit&&Pe.length<P.limit&&(K.dirty=!0)),ne?Object.freeze(Pe):Pe)}function fa(_,P){return Tn(_.lower,P.lower)===0&&Tn(_.upper,P.upper)===0&&!!_.lowerOpen==!!P.lowerOpen&&!!_.upperOpen==!!P.upperOpen}function Vo(_,P){return function(z,H,K,ne){if(z===void 0)return H!==void 0?-1:0;if(H===void 0)return 1;if((H=Tn(z,H))===0){if(K&&ne)return 0;if(K)return 1;if(ne)return-1}return H}(_.lower,P.lower,_.lowerOpen,P.lowerOpen)<=0&&0<=function(z,H,K,ne){if(z===void 0)return H!==void 0?1:0;if(H===void 0)return-1;if((H=Tn(z,H))===0){if(K&&ne)return 0;if(K)return-1;if(ne)return 1}return H}(_.upper,P.upper,_.upperOpen,P.upperOpen)}function Uf(_,P,z,H){_.subscribers.add(z),H.addEventListener("abort",function(){var K,ne;_.subscribers.delete(z),_.subscribers.size===0&&(K=_,ne=P,setTimeout(function(){K.subscribers.size===0&&q(ne,K)},3e3))})}var Hf={stack:"dbcore",level:0,name:"Cache",create:function(_){var P=_.schema.name;return r(r({},_),{transaction:function(z,H,K){var ne,pe,Se=_.transaction(z,H,K);return H==="readwrite"&&(pe=(ne=new AbortController).signal,K=function(Ee){return function(){if(ne.abort(),H==="readwrite"){for(var Te=new Set,Le=0,Ae=z;Le<Ae.length;Le++){var Pe=Ae[Le],je=Dr["idb://".concat(P,"/").concat(Pe)];if(je){var ke=_.table(Pe),Oe=je.optimisticOps.filter(function(Ut){return Ut.trans===Se});if(Se._explicit&&Ee&&Se.mutatedParts)for(var ze=0,Ve=Object.values(je.queries.query);ze<Ve.length;ze++)for(var Qe=0,et=(Rt=Ve[ze]).slice();Qe<et.length;Qe++)br((Et=et[Qe]).obsSet,Se.mutatedParts)&&(q(Rt,Et),Et.subscribers.forEach(function(Ut){return Te.add(Ut)}));else if(0<Oe.length){je.optimisticOps=je.optimisticOps.filter(function(Ut){return Ut.trans!==Se});for(var nt=0,Ct=Object.values(je.queries.query);nt<Ct.length;nt++)for(var Rt,Et,It,Vt=0,Lt=(Rt=Ct[nt]).slice();Vt<Lt.length;Vt++)(Et=Lt[Vt]).res!=null&&Se.mutatedParts&&(Ee&&!Et.dirty?(It=Object.isFrozen(Et.res),It=ja(Et.res,Et.req,Oe,ke,Et,It),Et.dirty?(q(Rt,Et),Et.subscribers.forEach(function(Ut){return Te.add(Ut)})):It!==Et.res&&(Et.res=It,Et.promise=wt.resolve({result:It}))):(Et.dirty&&q(Rt,Et),Et.subscribers.forEach(function(Ut){return Te.add(Ut)})))}}}Te.forEach(function(Ut){return Ut()})}}},Se.addEventListener("abort",K(!1),{signal:pe}),Se.addEventListener("error",K(!1),{signal:pe}),Se.addEventListener("complete",K(!0),{signal:pe})),Se},table:function(z){var H=_.table(z),K=H.schema.primaryKey;return r(r({},H),{mutate:function(ne){var pe=_t.trans;if(K.outbound||pe.db._options.cache==="disabled"||pe.explicit||pe.idbtrans.mode!=="readwrite")return H.mutate(ne);var Se=Dr["idb://".concat(P,"/").concat(z)];return Se?(pe=H.mutate(ne),ne.type!=="add"&&ne.type!=="put"||!(50<=ne.values.length||Be(K,ne).some(function(Ee){return Ee==null}))?(Se.optimisticOps.push(ne),ne.mutatedParts&&kr(ne.mutatedParts),pe.then(function(Ee){0<Ee.numFailures&&(q(Se.optimisticOps,ne),(Ee=Lr(0,ne,Ee))&&Se.optimisticOps.push(Ee),ne.mutatedParts&&kr(ne.mutatedParts))}),pe.catch(function(){q(Se.optimisticOps,ne),ne.mutatedParts&&kr(ne.mutatedParts)})):pe.then(function(Ee){var Te=Lr(0,r(r({},ne),{values:ne.values.map(function(Le,Ae){var Pe;return Ee.failures[Ae]?Le:(Le=(Pe=K.keyPath)!==null&&Pe!==void 0&&Pe.includes(".")?L(Le):r({},Le),j(Le,K.keyPath,Ee.results[Ae]),Le)})}),Ee);Se.optimisticOps.push(Te),queueMicrotask(function(){return ne.mutatedParts&&kr(ne.mutatedParts)})}),pe):H.mutate(ne)},query:function(ne){if(!ei(_t,H)||!Bn("query",ne))return H.query(ne);var pe=((Te=_t.trans)===null||Te===void 0?void 0:Te.db._options.cache)==="immutable",Ae=_t,Se=Ae.requery,Ee=Ae.signal,Te=function(ke,Oe,ze,Ve){var Qe=Dr["idb://".concat(ke,"/").concat(Oe)];if(!Qe)return[];if(!(Oe=Qe.queries[ze]))return[null,!1,Qe,null];var et=Oe[(Ve.query?Ve.query.index.name:null)||""];if(!et)return[null,!1,Qe,null];switch(ze){case"query":var nt=et.find(function(Ct){return Ct.req.limit===Ve.limit&&Ct.req.values===Ve.values&&fa(Ct.req.query.range,Ve.query.range)});return nt?[nt,!0,Qe,et]:[et.find(function(Ct){return("limit"in Ct.req?Ct.req.limit:1/0)>=Ve.limit&&(!Ve.values||Ct.req.values)&&Vo(Ct.req.query.range,Ve.query.range)}),!1,Qe,et];case"count":return nt=et.find(function(Ct){return fa(Ct.req.query.range,Ve.query.range)}),[nt,!!nt,Qe,et]}}(P,z,"query",ne),Le=Te[0],Ae=Te[1],Pe=Te[2],je=Te[3];return Le&&Ae?Le.obsSet=ne.obsSet:(Ae=H.query(ne).then(function(ke){var Oe=ke.result;if(Le&&(Le.res=Oe),pe){for(var ze=0,Ve=Oe.length;ze<Ve;++ze)Object.freeze(Oe[ze]);Object.freeze(Oe)}else ke.result=L(Oe);return ke}).catch(function(ke){return je&&Le&&q(je,Le),Promise.reject(ke)}),Le={obsSet:ne.obsSet,promise:Ae,subscribers:new Set,type:"query",req:ne,dirty:!1},je?je.push(Le):(je=[Le],(Pe=Pe||(Dr["idb://".concat(P,"/").concat(z)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[ne.query.index.name||""]=je)),Uf(Le,je,Se,Ee),Le.promise.then(function(ke){return{result:ja(ke.result,ne,Pe==null?void 0:Pe.optimisticOps,H,Le,pe)}})}})}})}};function Uo(_,P){return new Proxy(_,{get:function(z,H,K){return H==="db"?P:Reflect.get(z,H,K)}})}var rs=(or.prototype.version=function(_){if(isNaN(_)||_<.1)throw new fe.Type("Given version is not a positive number");if(_=Math.round(10*_)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,_);var P=this._versions,z=P.filter(function(H){return H._cfg.version===_})[0];return z||(z=new this.Version(_),P.push(z),P.sort(Nl),z.stores({}),this._state.autoSchema=!1,z)},or.prototype._whenReady=function(_){var P=this;return this.idbdb&&(this._state.openComplete||_t.letThrough||this._vip)?_():new wt(function(z,H){if(P._state.openComplete)return H(new fe.DatabaseClosed(P._state.dbOpenError));if(!P._state.isBeingOpened){if(!P._state.autoOpen)return void H(new fe.DatabaseClosed);P.open().catch(ie)}P._state.dbReadyPromise.then(z,H)}).then(_)},or.prototype.use=function(_){var P=_.stack,z=_.create,H=_.level,K=_.name;return K&&this.unuse({stack:P,name:K}),_=this._middlewares[P]||(this._middlewares[P]=[]),_.push({stack:P,create:z,level:H??10,name:K}),_.sort(function(ne,pe){return ne.level-pe.level}),this},or.prototype.unuse=function(_){var P=_.stack,z=_.name,H=_.create;return P&&this._middlewares[P]&&(this._middlewares[P]=this._middlewares[P].filter(function(K){return H?K.create!==H:!!z&&K.name!==z})),this},or.prototype.open=function(){var _=this;return Sa(Mt,function(){return Qs(_)})},or.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var _=this._state,P=qs.indexOf(this);if(0<=P&&qs.splice(P,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}_.isBeingOpened||(_.dbReadyPromise=new wt(function(z){_.dbReadyResolve=z}),_.openCanceller=new wt(function(z,H){_.cancelOpen=H}))},or.prototype.close=function(z){var P=(z===void 0?{disableAutoOpen:!0}:z).disableAutoOpen,z=this._state;P?(z.isBeingOpened&&z.cancelOpen(new fe.DatabaseClosed),this._close(),z.autoOpen=!1,z.dbOpenError=new fe.DatabaseClosed):(this._close(),z.autoOpen=this._options.autoOpen||z.isBeingOpened,z.openComplete=!1,z.dbOpenError=null)},or.prototype.delete=function(_){var P=this;_===void 0&&(_={disableAutoOpen:!0});var z=0<arguments.length&&typeof arguments[0]!="object",H=this._state;return new wt(function(K,ne){function pe(){P.close(_);var Se=P._deps.indexedDB.deleteDatabase(P.name);Se.onsuccess=lt(function(){var Ee,Te,Le;Ee=P._deps,Te=P.name,Le=Ee.indexedDB,Ee=Ee.IDBKeyRange,Ne(Le)||Te===Ni||me(Le,Ee).delete(Te).catch(ie),K()}),Se.onerror=Xi(ne),Se.onblocked=P._fireOnBlocked}if(z)throw new fe.InvalidArgument("Invalid closeOptions argument to db.delete()");H.isBeingOpened?H.dbReadyPromise.then(pe):pe()})},or.prototype.backendDB=function(){return this.idbdb},or.prototype.isOpen=function(){return this.idbdb!==null},or.prototype.hasBeenClosed=function(){var _=this._state.dbOpenError;return _&&_.name==="DatabaseClosed"},or.prototype.hasFailed=function(){return this._state.dbOpenError!==null},or.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(or.prototype,"tables",{get:function(){var _=this;return s(this._allTables).map(function(P){return _._allTables[P]})},enumerable:!1,configurable:!0}),or.prototype.transaction=function(){var _=(function(P,z,H){var K=arguments.length;if(K<2)throw new fe.InvalidArgument("Too few arguments");for(var ne=new Array(K-1);--K;)ne[K-1]=arguments[K];return H=ne.pop(),[P,O(ne),H]}).apply(this,arguments);return this._transaction.apply(this,_)},or.prototype._transaction=function(_,P,z){var H=this,K=_t.trans;K&&K.db===this&&_.indexOf("!")===-1||(K=null);var ne,pe,Se=_.indexOf("?")!==-1;_=_.replace("!","").replace("?","");try{if(pe=P.map(function(Te){if(Te=Te instanceof H.Table?Te.name:Te,typeof Te!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Te}),_=="r"||_===es)ne=es;else{if(_!="rw"&&_!=wl)throw new fe.InvalidArgument("Invalid transaction mode: "+_);ne=wl}if(K){if(K.mode===es&&ne===wl){if(!Se)throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");K=null}K&&pe.forEach(function(Te){if(K&&K.storeNames.indexOf(Te)===-1){if(!Se)throw new fe.SubTransaction("Table "+Te+" not included in parent transaction.");K=null}}),Se&&K&&!K.active&&(K=null)}}catch(Te){return K?K._promise(null,function(Le,Ae){Ae(Te)}):Er(Te)}var Ee=(function Te(Le,Ae,Pe,je,ke){return wt.resolve().then(function(){var Oe=_t.transless||_t,ze=Le._createTransaction(Ae,Pe,Le._dbSchema,je);if(ze.explicit=!0,Oe={trans:ze,transless:Oe},je)ze.idbtrans=je.idbtrans;else try{ze.create(),ze.idbtrans._explicit=!0,Le._state.PR1398_maxLoop=3}catch(et){return et.name===_e.InvalidState&&Le.isOpen()&&0<--Le._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Le.close({disableAutoOpen:!1}),Le.open().then(function(){return Te(Le,Ae,Pe,null,ke)})):Er(et)}var Ve,Qe=se(ke);return Qe&&gr(),Oe=wt.follow(function(){var et;(Ve=ke.call(ze,ze))&&(Qe?(et=vr.bind(null,null),Ve.then(et,et)):typeof Ve.next=="function"&&typeof Ve.throw=="function"&&(Ve=w(Ve)))},Oe),(Ve&&typeof Ve.then=="function"?wt.resolve(Ve).then(function(et){return ze.active?et:Er(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Oe.then(function(){return Ve})).then(function(et){return je&&ze._resolve(),ze._completion.then(function(){return et})}).catch(function(et){return ze._reject(et),Er(et)})})}).bind(null,this,ne,pe,K,z);return K?K._promise(ne,Ee,"lock"):_t.trans?Sa(_t.transless,function(){return H._whenReady(Ee)}):this._whenReady(Ee)},or.prototype.table=function(_){if(!f(this._allTables,_))throw new fe.InvalidTable("Table ".concat(_," does not exist"));return this._allTables[_]},or);function or(_,P){var z=this;this._middlewares={},this.verno=0;var H=or.dependencies;this._options=P=r({addons:or.addons,autoOpen:!0,indexedDB:H.indexedDB,IDBKeyRange:H.IDBKeyRange,cache:"cloned"},P),this._deps={indexedDB:P.indexedDB,IDBKeyRange:P.IDBKeyRange},H=P.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var K,ne,pe,Se,Ee,Te={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ie,dbReadyPromise:null,cancelOpen:ie,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:P.autoOpen};Te.dbReadyPromise=new wt(function(Ae){Te.dbReadyResolve=Ae}),Te.openCanceller=new wt(function(Ae,Pe){Te.cancelOpen=Pe}),this._state=Te,this.name=_,this.on=xs(this,"populate","blocked","versionchange","close",{ready:[Ot,ie]}),this.once=function(Ae,Pe){var je=function(){for(var ke=[],Oe=0;Oe<arguments.length;Oe++)ke[Oe]=arguments[Oe];z.on(Ae).unsubscribe(je),Pe.apply(z,ke)};return z.on(Ae,je)},this.on.ready.subscribe=S(this.on.ready.subscribe,function(Ae){return function(Pe,je){or.vip(function(){var ke,Oe=z._state;Oe.openComplete?(Oe.dbOpenError||wt.resolve().then(Pe),je&&Ae(Pe)):Oe.onReadyBeingFired?(Oe.onReadyBeingFired.push(Pe),je&&Ae(Pe)):(Ae(Pe),ke=z,je||Ae(function ze(){ke.on.ready.unsubscribe(Pe),ke.on.ready.unsubscribe(ze)}))})}}),this.Collection=(K=this,da(Ss.prototype,function(Ve,ze){this.db=K;var je=Bc,ke=null;if(ze)try{je=ze()}catch(Qe){ke=Qe}var Oe=Ve._ctx,ze=Oe.table,Ve=ze.hook.reading.fire;this._ctx={table:ze,index:Oe.index,isPrimKey:!Oe.index||ze.schema.primKey.keyPath&&Oe.index===ze.schema.primKey.name,range:je,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ke,or:Oe.or,valueMapper:Ve!==He?Ve:null}})),this.Table=(ne=this,da(_u.prototype,function(Ae,Pe,je){this.db=ne,this._tx=je,this.name=Ae,this.schema=Pe,this.hook=ne._allTables[Ae]?ne._allTables[Ae].hook:xs(null,{creating:[We,ie],reading:[Me,He],updating:[gt,ie],deleting:[pt,ie]})})),this.Transaction=(pe=this,da(Fo.prototype,function(Ae,Pe,je,ke,Oe){var ze=this;Ae!=="readonly"&&Pe.forEach(function(Ve){Ve=(Ve=je[Ve])===null||Ve===void 0?void 0:Ve.yProps,Ve&&(Pe=Pe.concat(Ve.map(function(Qe){return Qe.updatesTable})))}),this.db=pe,this.mode=Ae,this.storeNames=Pe,this.schema=je,this.chromeTransactionDurability=ke,this.idbtrans=null,this.on=xs(this,"complete","error","abort"),this.parent=Oe||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new wt(function(Ve,Qe){ze._resolve=Ve,ze._reject=Qe}),this._completion.then(function(){ze.active=!1,ze.on.complete.fire()},function(Ve){var Qe=ze.active;return ze.active=!1,ze.on.error.fire(Ve),ze.parent?ze.parent._reject(Ve):Qe&&ze.idbtrans&&ze.idbtrans.abort(),Er(Ve)})})),this.Version=(Se=this,da(R.prototype,function(Ae){this.db=Se,this._cfg={version:Ae,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Ee=this,da(tc.prototype,function(Ae,Pe,je){if(this.db=Ee,this._ctx={table:Ae,index:Pe===":id"?null:Pe,or:je},this._cmp=this._ascending=Tn,this._descending=function(ke,Oe){return Tn(Oe,ke)},this._max=function(ke,Oe){return 0<Tn(ke,Oe)?ke:Oe},this._min=function(ke,Oe){return Tn(ke,Oe)<0?ke:Oe},this._IDBKeyRange=Ee._deps.IDBKeyRange,!this._IDBKeyRange)throw new fe.MissingAPI})),this.on("versionchange",function(Ae){0<Ae.newVersion?console.warn("Another connection wants to upgrade database '".concat(z.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(z.name,"'. Closing db now to resume the delete request.")),z.close({disableAutoOpen:!1})}),this.on("blocked",function(Ae){!Ae.newVersion||Ae.newVersion<Ae.oldVersion?console.warn("Dexie.delete('".concat(z.name,"') was blocked")):console.warn("Upgrade '".concat(z.name,"' blocked by other connection holding version ").concat(Ae.oldVersion/10))}),this._maxKey=Ca(P.IDBKeyRange),this._createTransaction=function(Ae,Pe,je,ke){return new z.Transaction(Ae,Pe,je,z._options.chromeTransactionDurability,ke)},this._fireOnBlocked=function(Ae){z.on("blocked").fire(Ae),qs.filter(function(Pe){return Pe.name===z.name&&Pe!==z&&!Pe._state.vcFired}).map(function(Pe){return Pe.on("versionchange").fire(Ae)})},this.use(tr),this.use(Hf),this.use(Vn),this.use(W),this.use(Ye);var Le=new Proxy(this,{get:function(Ae,Pe,je){if(Pe==="_vip")return!0;if(Pe==="table")return function(Oe){return Uo(z.table(Oe),Le)};var ke=Reflect.get(Ae,Pe,je);return ke instanceof _u?Uo(ke,Le):Pe==="tables"?ke.map(function(Oe){return Uo(Oe,Le)}):Pe==="_createTransaction"?function(){return Uo(ke.apply(this,arguments),Le)}:ke}});this.vip=Le,H.forEach(function(Ae){return Ae(z)})}var Ua,Zi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",sc=(Pl.prototype.subscribe=function(_,P,z){return this._subscribe(_&&typeof _!="function"?_:{next:_,error:P,complete:z})},Pl.prototype[Zi]=function(){return this},Pl);function Pl(_){this._subscribe=_}try{Ua={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Ua={indexedDB:null,IDBKeyRange:null}}function wd(_){var P,z=!1,H=new sc(function(K){var ne=se(_),pe,Se=!1,Ee={},Te={},Le={get closed(){return Se},unsubscribe:function(){Se||(Se=!0,pe&&pe.abort(),Ae&&Kr.storagemutated.unsubscribe(je))}};K.start&&K.start(Le);var Ae=!1,Pe=function(){return Io(ke)},je=function(Oe){Wr(Ee,Oe),br(Te,Ee)&&Pe()},ke=function(){var Oe,ze,Ve;!Se&&Ua.indexedDB&&(Ee={},Oe={},pe&&pe.abort(),pe=new AbortController,Ve=function(Qe){var et=Re();try{ne&&gr();var nt=_n(_,Qe);return nt=ne?nt.finally(vr):nt}finally{et&&Ie()}}(ze={subscr:Oe,signal:pe.signal,requery:Pe,querier:_,trans:null}),Promise.resolve(Ve).then(function(Qe){z=!0,P=Qe,Se||ze.signal.aborted||(Ee={},function(et){for(var nt in et)if(f(et,nt))return;return 1}(Te=Oe)||Ae||(Kr(rc,je),Ae=!0),Io(function(){return!Se&&K.next&&K.next(Qe)}))},function(Qe){z=!1,["DatabaseClosedError","AbortError"].includes(Qe==null?void 0:Qe.name)||Se||Io(function(){Se||K.error&&K.error(Qe)})}))};return setTimeout(Pe,0),Le});return H.hasValue=function(){return z},H.getValue=function(){return P},H}var fo=rs;function li(_){var P=Na;try{Na=!0,Kr.storagemutated.fire(_),Qi(_,!0)}finally{Na=P}}p(fo,r(r({},we),{delete:function(_){return new fo(_,{addons:[]}).delete()},exists:function(_){return new fo(_,{addons:[]}).open().then(function(P){return P.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(_){try{return P=fo.dependencies,z=P.indexedDB,P=P.IDBKeyRange,(Ne(z)?Promise.resolve(z.databases()).then(function(H){return H.map(function(K){return K.name}).filter(function(K){return K!==Ni})}):me(z,P).toCollection().primaryKeys()).then(_)}catch{return Er(new fe.MissingAPI)}var P,z},defineClass:function(){return function(_){l(this,_)}},ignoreTransaction:function(_){return _t.trans?Sa(_t.transless,_):_()},vip:$e,async:function(_){return function(){try{var P=w(_.apply(this,arguments));return P&&typeof P.then=="function"?P:wt.resolve(P)}catch(z){return Er(z)}}},spawn:function(_,P,z){try{var H=w(_.apply(z,P||[]));return H&&typeof H.then=="function"?H:wt.resolve(H)}catch(K){return Er(K)}},currentTransaction:{get:function(){return _t.trans||null}},waitFor:function(_,P){return P=wt.resolve(typeof _=="function"?fo.ignoreTransaction(_):_).timeout(P||6e4),_t.trans?_t.trans.waitFor(P):P},Promise:wt,debug:{get:function(){return ft},set:function(_){ut(_)}},derive:g,extend:l,props:p,override:S,Events:xs,on:Kr,liveQuery:wd,extendObservabilitySet:Wr,getByKeyPath:T,setByKeyPath:j,delByKeyPath:function(_,P){typeof P=="string"?j(_,P,void 0):"length"in P&&[].map.call(P,function(z){j(_,z,void 0)})},shallowClone:E,deepClone:L,getObjectDiff:ue,cmp:Tn,asap:C,minKey:-1/0,addons:[],connections:qs,errnames:_e,dependencies:Ua,cache:Dr,semVer:"4.2.0",version:"4.2.0".split(".").map(function(_){return parseInt(_)}).reduce(function(_,P,z){return _+P/Math.pow(10,2*z)})})),fo.maxKey=Ca(fo.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Kr(rc,function(_){Na||(_=new CustomEvent(Cu,{detail:_}),Na=!0,dispatchEvent(_),Na=!1)}),addEventListener(Cu,function(_){_=_.detail,Na||li(_)}));var oc,Na=!1,Ho=function(){};return typeof BroadcastChannel<"u"&&((Ho=function(){(oc=new BroadcastChannel(Cu)).onmessage=function(_){return _.data&&li(_.data)}})(),typeof oc.unref=="function"&&oc.unref(),Kr(rc,function(_){Na||oc.postMessage(_)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(_){if(!rs.disableBfCache&&_.persisted){ft&&console.debug("Dexie: handling persisted pagehide"),oc!=null&&oc.close();for(var P=0,z=qs;P<z.length;P++)z[P].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(_){!rs.disableBfCache&&_.persisted&&(ft&&console.debug("Dexie: handling persisted pageshow"),Ho(),li({all:new st(-1/0,[[]])}))})),wt.rejectionMapper=function(_,P){return!_||_ instanceof G||_ instanceof TypeError||_ instanceof SyntaxError||!_.name||!be[_.name]?_:(P=new be[_.name](P||_.message,_),"stack"in _&&m(P,"stack",{get:function(){return this.inner.stack}}),P)},ut(ft),r(rs,Object.freeze({__proto__:null,Dexie:rs,liveQuery:wd,Entity:Vc,cmp:Tn,PropModification:Gs,replacePrefix:function(_,P){return new Gs({replacePrefix:[_,P]})},add:function(_){return new Gs({add:_})},remove:function(_){return new Gs({remove:_})},default:rs,RangeSet:st,mergeRanges:Zt,rangesOverlap:yn}),{default:rs}),rs})})(EH);var nce=EH.exports;const VN=Mr(nce),qM=Symbol.for("Dexie"),lg=globalThis[qM]||(globalThis[qM]=VN);if(VN.semVer!==lg.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${VN.semVer} and ${lg.semVer}`);const{liveQuery:hXe,mergeRanges:pXe,rangesOverlap:mXe,RangeSet:gXe,cmp:vXe,Entity:yXe,PropModification:bXe,replacePrefix:xXe,add:wXe,remove:SXe,DexieYProvider:_Xe}=lg,kH="GanaderoOS_DB",PH=21;class rce extends lg{constructor(){super(kH);Mn(this,"animals");Mn(this,"fathers");Mn(this,"parturitions");Mn(this,"weighings");Mn(this,"lots");Mn(this,"origins");Mn(this,"breedingSeasons");Mn(this,"sireLots");Mn(this,"serviceRecords");Mn(this,"events");Mn(this,"feedingPlans");Mn(this,"bodyWeighings");Mn(this,"products");Mn(this,"healthPlans");Mn(this,"planActivities");Mn(this,"healthEvents");this.version(PH).stores({animals:"&id, userId, status, location, motherId, fatherId, sireLotId, _synced",fathers:"&id, userId, _synced",parturitions:"&id, userId, goatId, status, _synced",weighings:"&id, userId, goatId, date, _synced",lots:"&id, userId, &name, parentLotId, _synced",origins:"&id, userId, &name, _synced",breedingSeasons:"&id, userId, &name, status, _synced",sireLots:"&id, userId, seasonId, sireId, _synced",serviceRecords:"&id, userId, sireLotId, femaleId, _synced",events:"&id, userId, animalId, date, type, lotName, _synced",feedingPlans:"&id, userId, lotName, _synced",bodyWeighings:"&id, userId, animalId, date, _synced",products:"&id, userId, &name, category, _synced",healthPlans:"&id, userId, &name, targetGroup, _synced",planActivities:"&id, userId, healthPlanId, category, _synced",healthEvents:"&id, userId, animalId, date, activityId, _synced"})}}let A0=null;const ice=async()=>{if(A0)return A0;const t=new rce;try{return await t.open(),console.log("Base de datos local abierta con éxito (v"+PH+")."),A0=t,t}catch(e){return console.error("Error al abrir la base de datos local.",e),e.name==="VersionError"?console.log("Dexie intentará actualizar la estructura de la base de datos."):confirm("Error al iniciar la base de datos local. ¿Deseas forzar el reinicio? (Tus datos en la nube están seguros). La aplicación se recargará.")?(await lg.delete(kH),window.location.reload()):alert("La aplicación no puede continuar sin una base de datos funcional."),new Promise(()=>{})}},Zn=()=>{if(!A0)throw new Error("La base de datos no ha sido inicializada. Llama a initDB() primero.");return A0},os=[];for(let t=0;t<256;++t)os.push((t+256).toString(16).slice(1));function ace(t,e=0){return(os[t[e+0]]+os[t[e+1]]+os[t[e+2]]+os[t[e+3]]+"-"+os[t[e+4]]+os[t[e+5]]+"-"+os[t[e+6]]+os[t[e+7]]+"-"+os[t[e+8]]+os[t[e+9]]+"-"+os[t[e+10]]+os[t[e+11]]+os[t[e+12]]+os[t[e+13]]+os[t[e+14]]+os[t[e+15]]).toLowerCase()}let PA;const sce=new Uint8Array(16);function oce(){if(!PA){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");PA=crypto.getRandomValues.bind(crypto)}return PA(sce)}const lce=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),KM={randomUUID:lce};function cce(t,e,n){var i;t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??oce();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ace(r)}function Ds(t,e,n){return KM.randomUUID&&!t?KM.randomUUID():cce(t)}const Kp={nombreFinca:"Mi Finca",theme:"dark",porcentajePrenez:90,porcentajeProlificidad:120,mortalidadCrias:8,mortalidadLevante:3,mortalidadCabras:5,tasaReemplazo:20,eliminacionCabritos:100,pesoPrimerServicioKg:30,edadDesteteDias:90,pesoDesteteMetaKg:15,diasGestacion:150,diasLactanciaObjetivo:305,diasSecadoObjetivo:60,diasConfirmarPrenez:60,diasPreParto:15,diasAlertaAtraso:7,diasRetiroLecheDefault:7,diasRetiroCarneDefault:30,monedaSimbolo:"$",costoSacoAlimento:25,pesoSacoAlimentoKg:40,precioLecheLitro:.8,precioVentaCabritoKg:3.5,precioVentaDescarteAdulto:50},TH=I.createContext({}),Xt=()=>I.useContext(TH),Li=async(t,e,n)=>{try{const r=Object.entries(n).reduce((l,[u,d])=>(d!==void 0&&u!=="_synced"&&(l[u]=d),l),{}),i=Zn()[t],a=await i.get(e),s=!a||!a.createdAt||n.createdAt===WM(),o={...r};s&&!r.createdAt?o.createdAt=WM():(r.createdAt===null||r.createdAt===void 0)&&delete o.createdAt,await BN(Oa(hi,t,e),o,{merge:!0}),await i.update(e,{_synced:!0})}catch(r){console.error(`Firestore sync for ${t} (${e}) failed:`,r);const i=Zn()[t];try{await i.update(e,{_synced:!1})}catch(a){console.error(`Failed to update sync status locally for ${t} (${e}):`,a)}}},uce=({children:t})=>{const{currentUser:e}=NH(),[n,r]=I.useState([]),[i,a]=I.useState([]),[s,o]=I.useState([]),[l,u]=I.useState([]),[d,f]=I.useState([]),[p,h]=I.useState([]),[m,g]=I.useState([]),[v,y]=I.useState([]),[b,S]=I.useState([]),[A,C]=I.useState([]),[T,j]=I.useState([]),[E,k]=I.useState([]),[O,D]=I.useState([]),[M,L]=I.useState([]),[V,Q]=I.useState([]),[Y,J]=I.useState([]),[q,ee]=I.useState(!0),[le,se]=I.useState(navigator.onLine?"idle":"offline"),[$,G]=I.useState(Kp),[te,oe]=I.useState(!0),ge=I.useRef(null),_e=I.useRef([]),Ce=I.useRef(!1),fe=I.useCallback(async()=>{if(Ce.current||_e.current.length===0||!navigator.onLine){_e.current.length===0&&!Ce.current&&se("idle");return}Ce.current=!0,se("syncing");const Re=_e.current.shift();if(Re)try{await Re()}catch(Ie){console.error("Sync Queue: Error processing item:",Ie)}Ce.current=!1,_e.current.length>0?setTimeout(fe,100):(se("idle"),ge.current&&clearTimeout(ge.current),ge.current=setTimeout(()=>{_e.current.length===0&&!Ce.current&&se("idle")},2e3))},[]),be=I.useCallback(Re=>{_e.current.push(Re),Ce.current||fe()},[fe]),we=I.useCallback(async()=>{try{const Re=Zn(),[Ie,Ke,At,lt,Gt,vn,qn,$t,Kn,bi,_n,gr,vr,Qn,sr,Rr]=await Promise.all([Re.animals.toArray(),Re.fathers.toArray(),Re.weighings.toArray(),Re.parturitions.toArray(),Re.lots.toArray(),Re.origins.toArray(),Re.breedingSeasons.toArray(),Re.sireLots.toArray(),Re.serviceRecords.toArray(),Re.events.toArray(),Re.feedingPlans.toArray(),Re.bodyWeighings.toArray(),Re.products.toArray(),Re.healthPlans.toArray(),Re.planActivities.toArray(),Re.healthEvents.toArray()]);r(Ie),a(Ke),o(At),u(lt),f(Gt),h(vn),g(qn),y($t),S(Kn),C(bi),j(_n),k(gr),D(vr),L(Qn),Q(sr),J(Rr)}catch(Re){console.error("Error al cargar datos locales:",Re)}finally{ee(!1)}},[]);I.useEffect(()=>{let Re=[];const Ie=()=>{se("idle"),fe()},Ke=()=>se("offline");return window.addEventListener("online",Ie),window.addEventListener("offline",Ke),(async()=>{if(!e){ee(!1),oe(!1),r([]),a([]),o([]),u([]),f([]),h([]),g([]),y([]),S([]),C([]),j([]),k([]),D([]),L([]),Q([]),J([]),G(Kp);return}ee(!0),oe(!0);try{const lt=await ice();await we();const Gt=Oa(hi,"configuracion",e.uid),vn=HM(Gt,Kn=>{Kn.exists()?G(bi=>({...Kp,...bi,...Kn.data()})):(G(Kp),BN(Gt,Kp).catch(bi=>console.error("Failed to set default config",bi))),oe(!1)},Kn=>{console.error("Error fetching config:",Kn),oe(!1)});Re.push(vn);const qn=Kn=>Kle(Ole(hi,Kn),Gle("userId","==",e.uid)),$t=(Kn,bi)=>{const _n=HM(qn(Kn),async gr=>{if(gr.metadata.hasPendingWrites)return;const vr=gr.docChanges().map(Qn=>{const sr={id:Qn.doc.id,...Qn.doc.data()};return Object.keys(sr).forEach(Rr=>{sr[Rr]instanceof ya&&(sr[Rr]=sr[Rr].toMillis())}),{type:Qn.type,data:sr}});if(vr.length>0){navigator.onLine&&(se("syncing"),ge.current&&clearTimeout(ge.current),ge.current=setTimeout(()=>{_e.current.length===0&&!Ce.current&&se("idle")},2e3));try{await lt.transaction("rw",bi,async()=>{for(const Qn of vr)Qn.data._synced=!0,Qn.type==="added"||Qn.type==="modified"?await bi.put(Qn.data):Qn.type==="removed"&&await bi.delete(Qn.data.id)}),await we()}catch(Qn){console.error(`Dexie transaction error during sync for ${Kn}:`,Qn)}}},gr=>{gr.code==="permission-denied"?console.warn(`Permission denied for ${Kn}.`):console.error(`Firestore snapshot error for ${Kn}:`,gr)});Re.push(_n)};$t("animals",lt.animals),$t("fathers",lt.fathers),$t("parturitions",lt.parturitions),$t("weighings",lt.weighings),$t("lots",lt.lots),$t("origins",lt.origins),$t("breedingSeasons",lt.breedingSeasons),$t("sireLots",lt.sireLots),$t("serviceRecords",lt.serviceRecords),$t("events",lt.events),$t("feedingPlans",lt.feedingPlans),$t("bodyWeighings",lt.bodyWeighings),$t("products",lt.products),$t("healthPlans",lt.healthPlans),$t("planActivities",lt.planActivities),$t("healthEvents",lt.healthEvents)}catch(lt){console.error("Fallo crítico en la inicialización:",lt),ee(!1),oe(!1)}})(),()=>{Re.forEach(lt=>lt()),window.removeEventListener("online",Ie),window.removeEventListener("offline",Ke),ge.current&&clearTimeout(ge.current)}},[e==null?void 0:e.uid,we,fe]);const ie=I.useCallback(Re=>{e&&(async()=>{try{const Ie=Zn(),Ke={id:Ds(),...Re,userId:e.uid,_synced:!1};await Ie.events.put(Ke),be(()=>Li("events",Ke.id,Ke)),setTimeout(we,50)}catch(Ie){console.error("Error en registro de evento local:",Ie)}})()},[e,be,we]),He=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke=(Re.id?Re.id:`REF-${Date.now()}`).toUpperCase(),At={...Re,id:Ke,userId:e.uid,createdAt:Date.now(),_synced:!1};await Ie.animals.put(At);let lt="";if(At.birthDate&&At.birthDate!=="N/A")try{lt=` F.N.: ${new Date(At.birthDate+"T00:00:00Z").toLocaleDateString("es-VE",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"})}`}catch{lt=` F.N.: ${At.birthDate}.`}else lt=" F.N. desconocida.";const Gt=At.isReference?"Animal de Referencia":"Animal (Activo)";ie({animalId:At.id,date:new Date(At.createdAt).toISOString().split("T")[0],type:"Registro",details:`${Gt} registrado en el sistema.${lt}`,lotName:At.location}),we(),be(()=>Li("animals",At.id,At))},[e,be,we,ie]),Me=I.useCallback(async(Re,Ie)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Zn(),At=Re.toUpperCase(),lt=new Date().toISOString().split("T")[0],Gt=await Ke.animals.get(At);if(!Gt)throw new Error("Animal no encontrado para actualizar");Ie.birthDate&&Ie.birthDate!=="N/A"&&!Ie.lifecycleStage?Ie.lifecycleStage=dce(Ie.birthDate,Gt.sex):(Ie.birthDate==="N/A"||Ie.birthDate==="")&&!Ie.lifecycleStage&&(delete Ie.lifecycleStage,Ie.birthDate="N/A");const vn={...Ie,_synced:!1};await Ke.animals.update(At,vn),Ie.location!==void 0&&Ie.location!==Gt.location&&ie({animalId:At,date:lt,type:"Movimiento",details:`Movido de '${Gt.location||"Sin Asignar"}' a '${Ie.location||"Sin Asignar"}'`,lotName:Ie.location||""}),Ie.reproductiveStatus!==void 0&&Ie.reproductiveStatus!==Gt.reproductiveStatus&&ie({animalId:At,date:lt,type:"Cambio de Estado",details:`Estado reproductivo: ${Ie.reproductiveStatus}`}),Ie.status!==void 0&&Ie.status!==Gt.status&&ie({animalId:At,date:Ie.endDate||lt,type:"Cambio de Estado",details:`Animal dado de baja: ${Ie.status} ${Ie.cullReason?`(${Ie.cullReason})`:""}`}),Ie.weaningDate&&!Gt.weaningDate&&ie({animalId:At,date:Ie.weaningDate,type:"Cambio de Estado",details:`Destetado con ${Ie.weaningWeight||"N/A"} Kg`}),we();const qn=await Ke.animals.get(At);qn&&be(()=>Li("animals",At,qn))},[e,be,we,ie]),he=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke=Re.toUpperCase();await Ie.animals.delete(Ke),we(),be(()=>qf(Oa(hi,"animals",Ke)).catch(At=>console.error("Firestore delete sync failed:",At)))},[e,be,we]),We=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke=await Ie.parturitions.get(Re);if(!Ke)throw new Error("Parto no encontrado");const At={status:"en-secado",dryingStartDate:new Date().toISOString().split("T")[0],_synced:!1};await Ie.parturitions.update(Re,At),ie({animalId:Ke.goatId,date:At.dryingStartDate,type:"Cambio de Estado",details:`Inició proceso de secado (Lactancia de ${Ke.parturitionDate})`}),we();const lt=await Ie.parturitions.get(Re);lt&&be(()=>Li("parturitions",Re,lt))},[e,be,we,ie]),pt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke=await Ie.parturitions.get(Re);if(!Ke)throw new Error("Parto no encontrado");const At={status:"seca",_synced:!1};await Ie.parturitions.update(Re,At),ie({animalId:Ke.goatId,date:new Date().toISOString().split("T")[0],type:"Cambio de Estado",details:`Declarada Seca (Lactancia de ${Ke.parturitionDate})`}),we();const lt=await Ie.parturitions.get(Re);lt&&be(()=>Li("parturitions",Re,lt))},[e,be,we,ie]),gt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn();if(await Ie.lots.where("name").equalsIgnoreCase(Re.name).first())throw new Error(`El lote '${Re.name}' ya existe.`);const At={id:Ds(),name:Re.name,parentLotId:Re.parentLotId,userId:e.uid,_synced:!1};await Ie.lots.put(At),we(),be(()=>Li("lots",At.id,At))},[e,be,we]),Xe=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke=await Ie.lots.get(Re);if(Ke){if(await Ie.animals.where({location:Ke.name}).count()>0)throw new Error("No se puede eliminar un lote con animales asignados.");if(await Ie.lots.where({parentLotId:Re}).count()>0)throw new Error("No se puede eliminar un lote que contiene sub-lotes.")}await Ie.lots.delete(Re),we(),be(()=>qf(Oa(hi,"lots",Re)).catch(At=>console.error("Firestore delete sync failed:",At)))},[e,be,we]),Ot=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn();if(await Ie.origins.where("name").equalsIgnoreCase(Re).first())throw new Error(`El origen '${Re}' ya existe.`);const At={id:Ds(),name:Re,userId:e.uid,_synced:!1};await Ie.origins.put(At),we(),be(()=>Li("origins",At.id,At))},[e,be,we]),ft=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");await Zn().origins.delete(Re),we(),be(()=>qf(Oa(hi,"origins",Re)).catch(Ke=>console.error("Firestore delete sync failed:",Ke)))},[e,be,we]),ut=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke={id:Ds(),...Re,userId:e.uid,_synced:!1};await Ie.weighings.put(Ke),ie({animalId:Re.goatId,date:Re.date,type:"Pesaje Lechero",details:`Registro de ${Re.kg} Kg`}),we(),be(()=>Li("weighings",Ke.id,Ke))},[e,be,we,ie]),Dt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke={id:Ds(),...Re,userId:e.uid,_synced:!1};await Ie.bodyWeighings.put(Ke),ie({animalId:Re.animalId,date:Re.date,type:"Pesaje Corporal",details:`Registro de ${Re.kg} Kg`}),we(),be(()=>Li("bodyWeighings",Ke.id,Ke))},[e,be,we,ie]),Yt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke=await Ie.weighings.where({date:Re}).toArray();if(Ke.length===0)return;const At=Ke.map($t=>$t.id),lt=Ke.map($t=>$t.goatId),vn=(await Ie.events.where("date").equals(Re).and($t=>$t.type==="Pesaje Lechero"&&lt.includes($t.animalId)).toArray()).map($t=>$t.id);await Ie.transaction("rw",Ie.weighings,Ie.events,async()=>{await Ie.weighings.bulkDelete(At),await Ie.events.bulkDelete(vn)}),await we(),be(async()=>{const $t=Rv(hi);At.forEach(Kn=>$t.delete(Oa(hi,"weighings",Kn))),vn.forEach(Kn=>$t.delete(Oa(hi,"events",Kn))),await $t.commit()})},[e,be,we]),Qt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke=Re.id.toUpperCase();if(await Ie.fathers.where("id").equalsIgnoreCase(Ke).first())throw new Error(`El ID de padre '${Ke}' ya está en uso.`);const lt={...Re,id:Ke,userId:e.uid,_synced:!1};await Ie.fathers.put(lt),we(),be(()=>Li("fathers",lt.id,lt))},[e,be,we]),Ft=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke=Re.motherId.toUpperCase(),At=Re.parturitionOutcome==="Aborto"&&!Re.inducedLactation?"finalizada":"activa",lt=Ds(),Gt={id:lt,goatId:Ke,parturitionDate:Re.parturitionDate,sireId:Re.sireId,offspringCount:Re.offspringCount,parturitionType:Re.parturitionType,parturitionOutcome:Re.parturitionOutcome,status:At,userId:e.uid,_synced:!1,dryingStartDate:Re.inducedLactation&&Re.parturitionOutcome==="Aborto"?Re.parturitionDate:void 0,liveOffspring:Re.liveOffspring?Re.liveOffspring.map($t=>{var Kn;return{id:(Kn=$t.id)==null?void 0:Kn.toUpperCase(),sex:$t.sex,birthWeight:$t.birthWeight}}):void 0},vn=(Re.liveOffspring||[]).map($t=>({id:$t.id.toUpperCase(),sex:$t.sex,status:"Activo",birthDate:Re.parturitionDate,motherId:Ke,fatherId:Re.sireId,birthWeight:parseFloat($t.birthWeight)||void 0,userId:e.uid,createdAt:Date.now(),lifecycleStage:$t.sex==="Hembra"?"Cabrita":"Cabrito",location:"",reproductiveStatus:"No Aplica",isReference:!1,_synced:!1}));await Ie.transaction("rw",Ie.parturitions,Ie.animals,Ie.events,async()=>{await Ie.parturitions.put(Gt),ie({animalId:Ke,date:Re.parturitionDate,type:Re.parturitionOutcome==="Aborto"?"Aborto":"Parto",details:Re.parturitionOutcome==="Aborto"?`Aborto registrado con Semental: ${Re.sireId}. ${Re.inducedLactation?"Se induce lactancia.":""}`:`Parto ${Re.parturitionType} (${Re.offspringCount} crías) con Semental: ${Re.sireId}. Vivas: ${vn.length}.`}),vn.length>0&&(await Ie.animals.bulkPut(vn),vn.forEach($t=>{ie({animalId:$t.id,date:$t.birthDate,type:"Nacimiento",details:`Nacido con ${$t.birthWeight||"N/A"} Kg. Madre: ${$t.motherId}. Padre: ${$t.fatherId}.`})}))}),await we(),be(async()=>{const $t=Rv(hi);$t.set(Oa(hi,"parturitions",lt),Gt),vn.forEach(Kn=>$t.set(Oa(hi,"animals",Kn.id),Kn)),await $t.commit()})},[e,be,we,ie]),sn=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke={id:Ds(),...Re,userId:e.uid,_synced:!1};await Ie.serviceRecords.put(Ke);const At=await Ie.sireLots.get(Ke.sireLotId),lt=At?await Ie.fathers.get(At.sireId)||await Ie.animals.get(At.sireId):null;ie({animalId:Ke.femaleId,date:Ke.serviceDate,type:"Servicio",details:`Servicio registrado con Semental: ${(lt==null?void 0:lt.name)||(lt==null?void 0:lt.id)||(At==null?void 0:At.sireId)||"Desconocido"}`}),we(),be(()=>Li("serviceRecords",Ke.id,Ke))},[e,be,we,ie]),at=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke=await Ie.animals.where({location:Re.lotName}).toArray();if(Ke.length===0)return;const At=Ke.map(Gt=>({id:Ds(),animalId:Gt.id,date:Re.date,type:Re.type,details:Re.details,lotName:Re.lotName,userId:e.uid,notes:`Evento aplicado a todo el lote: ${Re.lotName}`,_synced:!1}));await Ie.events.bulkPut(At),we(),be(async()=>{const Gt=Rv(hi);At.forEach(vn=>Gt.set(Oa(hi,"events",vn.id),vn)),await Gt.commit()})},[e,be,we]),vt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke={id:Ds(),...Re,userId:e.uid,_synced:!1};await Ie.feedingPlans.put(Ke),we(),be(()=>Li("feedingPlans",Ke.id,Ke))},[e,be,we]),xt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke={id:Ds(),...Re,userId:e.uid,_synced:!1};return await Ie.breedingSeasons.put(Ke),we(),be(()=>Li("breedingSeasons",Ke.id,Ke)),Ke.id},[e,be,we]),tt=I.useCallback(async(Re,Ie)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Zn(),At={...Ie,_synced:!1};await Ke.breedingSeasons.update(Re,At),we();const lt=await Ke.breedingSeasons.get(Re);lt&&be(()=>Li("breedingSeasons",Re,lt))},[e,be,we]),zt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");await Zn().breedingSeasons.delete(Re),we(),be(()=>qf(Oa(hi,"breedingSeasons",Re)).catch(Ke=>console.error("Firestore delete sync failed:",Ke)))},[e,be,we]),ht=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke={id:Ds(),...Re,userId:e.uid,_synced:!1};return await Ie.sireLots.put(Ke),we(),be(()=>Li("sireLots",Ke.id,Ke)),Ke.id},[e,be,we]),mt=I.useCallback(async(Re,Ie)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Zn(),At={...Ie,_synced:!1};await Ke.sireLots.update(Re,At),we();const lt=await Ke.sireLots.get(Re);lt&&be(()=>Li("sireLots",Re,lt))},[e,be,we]),Mt=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");await Zn().sireLots.delete(Re),we(),be(()=>qf(Oa(hi,"sireLots",Re)).catch(Ke=>console.error("Firestore delete sync failed:",Ke)))},[e,be,we]),_t=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke={id:Ds(),...Re,userId:e.uid,_synced:!1};await Ie.products.put(Ke),we(),be(()=>Li("products",Ke.id,Ke))},[e,be,we]),Ht=I.useCallback(async(Re,Ie)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Zn(),At={...Ie,_synced:!1};await Ke.products.update(Re,At),we();const lt=await Ke.products.get(Re);lt&&be(()=>Li("products",Re,lt))},[e,be,we]),gn=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");await Zn().products.delete(Re),we(),be(()=>qf(Oa(hi,"products",Re)).catch(Ke=>console.error("Firestore delete sync failed:",Ke)))},[e,be,we]),on=I.useCallback(async(Re,Ie)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Zn(),At={id:Ds(),...Re,userId:e.uid,_synced:!1},lt=Ie.map(vn=>({id:Ds(),...vn,healthPlanId:At.id,userId:e.uid,_synced:!1}));await Ke.transaction("rw",Ke.healthPlans,Ke.planActivities,async()=>{await Ke.healthPlans.put(At),await Ke.planActivities.bulkPut(lt)}),we(),be(async()=>{const vn=Rv(hi);vn.set(Oa(hi,"healthPlans",At.id),At),lt.forEach(qn=>vn.set(Oa(hi,"planActivities",qn.id),qn)),await vn.commit()})},[e,be,we]),wt=I.useCallback(async(Re,Ie)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Zn(),At={...Ie,_synced:!1};await Ke.healthPlans.update(Re,At),we();const lt=await Ke.healthPlans.get(Re);lt&&be(()=>Li("healthPlans",Re,lt))},[e,be,we]),Xn=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),At=(await Ie.planActivities.where({healthPlanId:Re}).toArray()).map(Gt=>Gt.id);await Ie.transaction("rw",Ie.healthPlans,Ie.planActivities,async()=>{await Ie.planActivities.bulkDelete(At),await Ie.healthPlans.delete(Re)}),we(),be(async()=>{const Gt=Rv(hi);At.forEach(vn=>Gt.delete(Oa(hi,"planActivities",vn))),Gt.delete(Oa(hi,"healthPlans",Re)),await Gt.commit()})},[e,be,we]),fn=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke={id:Ds(),...Re,userId:e.uid,_synced:!1};await Ie.planActivities.put(Ke),we(),be(()=>Li("planActivities",Ke.id,Ke))},[e,be,we]),qt=I.useCallback(async(Re,Ie)=>{if(!e)throw new Error("Usuario no autenticado");const Ke=Zn(),At={...Ie,_synced:!1};await Ke.planActivities.update(Re,At),we();const lt=await Ke.planActivities.get(Re);lt&&be(()=>Li("planActivities",Re,lt))},[e,be,we]),Sn=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");await Zn().planActivities.delete(Re),we(),be(()=>qf(Oa(hi,"planActivities",Re)).catch(Ke=>console.error("Firestore delete sync failed:",Ke)))},[e,be,we]),Oi=I.useCallback(async Re=>{var At;if(!e)throw new Error("Usuario no autenticado");const Ie=Zn(),Ke={id:Ds(),...Re,userId:e.uid,_synced:!1};await Ie.healthEvents.put(Ke),ie({animalId:Ke.animalId,date:Ke.date,type:"Tratamiento",details:`${Ke.type}${Ke.productUsed?` con ${((At=O.find(lt=>lt.id===Ke.productUsed))==null?void 0:At.name)||"producto"}`:""}`,notes:Ke.notes,lotName:Ke.lotName}),we(),be(()=>Li("healthEvents",Ke.id,Ke))},[e,be,we,ie,O]),Nr=I.useCallback(async Re=>{if(!e)throw new Error("Usuario no autenticado");se("syncing");try{const Ie=Oa(hi,"configuracion",e.uid);await BN(Ie,Re,{merge:!0})}catch(Ie){throw console.error("Error al guardar configuración:",Ie),se("idle"),Ie}},[e]),wa=I.useMemo(()=>({animals:n,fathers:i,weighings:s,parturitions:l,lots:d,origins:p,breedingSeasons:m,sireLots:v,serviceRecords:b,events:A,feedingPlans:T,bodyWeighings:E,products:O,healthPlans:M,planActivities:V,healthEvents:Y,appConfig:$,isLoadingConfig:te,isLoading:q,syncStatus:le,fetchData:we,addAnimal:He,updateAnimal:Me,deleteAnimalPermanently:he,startDryingProcess:We,setLactationAsDry:pt,addLot:gt,deleteLot:Xe,addOrigin:Ot,deleteOrigin:ft,addBreedingSeason:xt,updateBreedingSeason:tt,deleteBreedingSeason:zt,addSireLot:ht,updateSireLot:mt,deleteSireLot:Mt,addServiceRecord:sn,addFeedingPlan:vt,addBatchEvent:at,addWeighing:ut,addBodyWeighing:Dt,deleteWeighingSession:Yt,addParturition:Ft,addFather:Qt,addProduct:_t,updateProduct:Ht,deleteProduct:gn,addHealthPlanWithActivities:on,updateHealthPlan:wt,deleteHealthPlan:Xn,addPlanActivity:fn,updatePlanActivity:qt,deletePlanActivity:Sn,addHealthEvent:Oi,updateAppConfig:Nr}),[n,i,s,l,d,p,m,v,b,A,T,E,O,M,V,Y,$,te,q,le,we,He,Me,he,We,pt,gt,Xe,Ot,ft,xt,tt,zt,ht,mt,Mt,sn,vt,at,ut,Dt,Yt,Ft,Qt,_t,Ht,gn,on,wt,Xn,fn,qt,Sn,Oi,Nr]);return c.jsx(TH.Provider,{value:wa,children:t})},dce=(t,e)=>{if(!t||t==="N/A"||!e)return"Indefinido";const n=new Date,r=new Date(t+"T00:00:00Z");if(isNaN(r.getTime()))return"Indefinido";const i=Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),a=Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),s=Math.floor((i-a)/(1e3*60*60*24));return e==="Hembra"?s<=60?"Cabrita":s<=365?"Cabritona":"Cabra Adulta":s<=60?"Cabrito":s<=365?"Macho de Levante":"Macho Cabrío"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fce=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DH=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hce={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pce=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},l)=>I.createElement("svg",{ref:l,...hce,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:DH("lucide",i),...o},[...s.map(([u,d])=>I.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(t,e)=>{const n=I.forwardRef(({className:r,...i},a)=>I.createElement(pce,{ref:a,iconNode:e,className:DH(`lucide-${fce(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=yt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=yt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=yt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=yt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mce=yt("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=yt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gce=yt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=yt("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=yt("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=yt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=yt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vce=yt("BarChart4",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=yt("BarChartHorizontal",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=yt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yce=yt("CalendarCheck2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bce=yt("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=yt("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=yt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=yt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xce=yt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wce=yt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=yt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sce=yt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=yt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ce=yt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ace=yt("ChevronsLeftRight",[["path",{d:"m9 7-5 5 5 5",key:"j5w590"}],["path",{d:"m15 7 5 5-5 5",key:"1bl6da"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=yt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cce=yt("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jce=yt("CircleOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.35 2.69A10 10 0 0 1 21.3 15.65",key:"1pfsoa"}],["path",{d:"M19.08 19.08A10 10 0 1 1 4.92 4.92",key:"1ablyi"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=yt("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nce=yt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=yt("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=yt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=yt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ece=yt("CloudCog",[["circle",{cx:"12",cy:"17",r:"3",key:"1spfwm"}],["path",{d:"M4.2 15.1A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.2",key:"zaobp"}],["path",{d:"m15.7 18.4-.9-.3",key:"4qxpbn"}],["path",{d:"m9.2 15.9-.9-.3",key:"17q7o2"}],["path",{d:"m10.6 20.7.3-.9",key:"1pf4s2"}],["path",{d:"m13.1 14.2.3-.9",key:"1mnuqm"}],["path",{d:"m13.6 20.7-.4-1",key:"1jpd1m"}],["path",{d:"m10.8 14.3-.4-1",key:"17ugyy"}],["path",{d:"m8.3 18.6 1-.4",key:"s42vdx"}],["path",{d:"m14.7 15.8 1-.4",key:"2wizun"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kce=yt("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pce=yt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tce=yt("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dce=yt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=yt("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ice=yt("Dna",[["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m17 6-2.5-2.5",key:"5cdfhj"}],["path",{d:"m14 8-1-1",key:"15nbz5"}],["path",{d:"m7 18 2.5 2.5",key:"16tu1a"}],["path",{d:"m3.5 14.5.5.5",key:"hapbhd"}],["path",{d:"m20 9 .5.5",key:"1n7z02"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m10 16 1.5 1.5",key:"11lckj"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=yt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oce=yt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=yt("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=yt("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=yt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mce=yt("Feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=yt("FileArchive",[["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v18",key:"1oywqq"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rce=yt("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=yt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=yt("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=yt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lce=yt("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=yt("GitCompareArrows",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"M12 18H7a2 2 0 0 1-2-2V9",key:"16sdep"}],["path",{d:"m9 15 3 3-3 3",key:"1m3kbl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=yt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fce=yt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=yt("HeartCrack",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"m12 13-1-1 2-2-3-3 2-2",key:"xjdxli"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zce=yt("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=yt("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=yt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=yt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=yt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=yt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=yt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=yt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=yt("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=yt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=yt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=yt("Milk",[["path",{d:"M8 2h8",key:"1ssgc1"}],["path",{d:"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2",key:"qtp12x"}],["path",{d:"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"ygeh44"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=yt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=yt("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=yt("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ce=yt("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=yt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=yt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=yt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bce=yt("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=yt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vce=yt("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uce=yt("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=yt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=yt("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=yt("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=yt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=yt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hce=yt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=yt("Sigma",[["path",{d:"M18 7V4H6l6 8-6 8h12v-3",key:"zis8ev"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=yt("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=yt("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=yt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wce=yt("SquareActivity",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=yt("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qce=yt("SquareMinus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=yt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=yt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kce=yt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=yt("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gce=yt("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yce=yt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=yt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xce=yt("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=yt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=yt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=yt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=yt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=yt("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=yt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qce=yt("Waypoints",[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=yt("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=yt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=yt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var QH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},YM=xe.createContext&&xe.createContext(QH),Zce=["attr","size","title"];function Jce(t,e){if(t==null)return{};var n=eue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Y2(){return Y2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y2.apply(this,arguments)}function XM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XM(Object(n),!0).forEach(function(r){tue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tue(t,e,n){return e=nue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nue(t){var e=rue(t,"string");return typeof e=="symbol"?e:e+""}function rue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZH(t){return t&&t.map((e,n)=>xe.createElement(e.tag,X2({key:n},e.attr),ZH(e.child)))}function xl(t){return e=>xe.createElement(iue,Y2({attr:X2({},t.attr)},e),ZH(t.child))}function iue(t){var e=n=>{var{attr:r,size:i,title:a}=t,s=Jce(t,Zce),o=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),xe.createElement("svg",Y2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:X2(X2({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&xe.createElement("title",null,a),t.children)};return YM!==void 0?xe.createElement(YM.Consumer,null,n=>e(n)):e(QH)}function JH(t){return xl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 23.38L89.844 89.845l-64.9 162.254 14.85 5.943c20.312-50.766 40.62-101.535 60.93-152.304l1.432-3.58L256 40.616l153.844 61.54 1.43 3.58 60.93 152.305 14.853-5.942-64.9-162.254C366.77 67.69 311.386 45.534 256 23.38zm0 36.624l-139.996 55.998L72.8 224h.2v263h78V329h-39v-18h297v176h30V224h.2c-14.402-36-28.802-72-43.204-107.998L256 60.004zM151 135h210v114H151V135zm23.563 18L199 201.873V153h-24.438zM313 153v48.873L337.438 153H313zm-144 29.127V231h24.438L169 182.127zm174 0L318.562 231H343v-48.873zm-98.73 18.69c-1.207-.02-2.31.02-3.288.128-2.823.31-10.76 3.708-16.86 7.3-2.796 1.645-5.23 3.22-7.122 4.484V231h78v-16.97c-4.193-1.675-10.334-4.02-17.578-6.368-11.206-3.63-24.71-6.71-33.152-6.846zM160 263h192v18H160v-18zm15.16 66L208 389.205 240.84 329h-65.68zm144 0L352 389.205 384.84 329h-65.68zM169 355.295v105.41L197.748 408 169 355.295zm78 0L218.252 408 247 460.705v-105.41zm66 0v105.41L341.748 408 313 355.295zm78 0L362.252 408 391 460.705v-105.41zm-183 71.5L175.16 487h65.68L208 426.795zm144 0L319.16 487h65.68L352 426.795z"},child:[]}]})(t)}function aue(t){return xl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M23 23v466h466v-18H41v-82.184l85.854-57.234 70.023 70.022 65.133-260.536L387.28 203.7 455.07 95.73l19.317 11.858 6.102-71.1-60.644 37.616 19.884 12.207-59.01 93.99-130.732-65.366-62.865 251.462-57.98-57.978L41 367.184V23H23z"},child:[]}]})(t)}function sue(t){return xl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M44.62 106a26 26 0 0 0-25.69 29.3c16 124 16 117.4 0 241.4A26 26 0 0 0 54.72 404l138.68-57.7c-1.2 9.5-2.4 18.9-3.9 30.4-2.5 19.8 17.3 35 35.8 27.3l252-124c9.7-4 16-13.5 16-24s-6.3-20-16-24l-252-124c-3.2-1.3-6.6-2-10.1-2-15.6.1-27.7 13.8-25.7 29.3 1.5 11.5 2.7 20.9 3.9 30.4L54.72 108a26 26 0 0 0-10.1-2z"},child:[]}]})(t)}function Db(t){return xl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M273 459l7.79-20 6.21 20 5.79-23.33-4.25-48c-7.76 7.94-17.54 17.85-29.74 30.27zm38.5-380.86a115.06 115.06 0 0 0-21.13-19.6c-17.315-11.88-35.418-18.913-55.08-22.14-18.751-3.067-37.99-2.743-56.33.12A203.86 203.86 0 0 0 133 49.42a184.2 184.2 0 0 0-29.62 15.36c-12.304 8.597-10.431 6.828.95 1.82a179.6 179.6 0 0 1 30.9-10c50.427-4.832 98.41-7.579 134.17 27.17a80 80 0 0 1 12.28 16c4.714 8.06 7.805 16.877 9.66 25.59l45.69 2.84c-5.032-17.752-15.256-37.574-25.53-50.06zm50.05 26.63c-8.531-13.217-18.495-25.428-29.66-34.88a78.24 78.24 0 0 0-15.79-10.38c2.67 2.68 5.22 5.45 7.61 8.32a138.13 138.13 0 0 1 9.13 12.11l.1.14.09.14c9.772 15.14 17.164 33.862 20.78 49.15l22.19 1.3a253.49 253.49 0 0 0-14.43-25.91zm29.89 43l70 179.4-11.82 28.37-65.77-37.94-8 13.86 67.56 39-4.327 5.754L394.12 372l-65.33-31.47a42.41 42.41 0 0 0-9.29-1.43c-5.71 0-9.52 2.06-12.71 6.62-2.53 3.61-78.5 80.52-147.64 150.28H16V243.73l92.85 3.85 96.61-33.26 10.13-11a214.71 214.71 0 0 1 38 24.27 18.57 18.57 0 0 0 11.61 3.93c13.792-1.574 22.025-9.12 32.83-17.83-3.267-21.244-6.724-43.71-9.56-62.1-6.463-2.155-12.926-4.308-19.39-6.46l4.39-4.78zm-37.25 65.02c-4.024-14.705-20.114-19.427-30.58-18.14-3.073.432-6.167 1.427-8.77 2.68.868 3.09 2.17 7.87 3.79 10.35 6.527 9.211 17.348 13.898 27.64 12.51 3.967-.672 8.94-3.676 7.92-7.4zm61.63 105.47l19 20 11.6-11-19-20zM475 172.99s-40.54-27.8-57-1.2l11.25 28.83zM294 382.05l13.4 22.28-.4-35.64c-3.29 3.45-7.53 7.82-12.95 13.36zm-30.6-167c5.858 1.872 17.61-6.048 17.33-8.01l-6.67-43.33-28-9.31c-17.65-2.861-58.224-4.989-67.27 9.28 39.596 39.732 39.526 16.87 84.61 51.37zm127.08 172.89c-15.313-7.704-30.838-14.996-46.28-22.44 5.153 29.387 10.895 58.672 15.75 88.11l25.26 37.33-2.6-34L400 469.61v-28.67l10.19-41.95 6.67-11.05z"},child:[]}]})(t)}function oue(t){return xl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M302.958 20.019l-93.916 46.564v35.404c31.305-15.522 62.61-31.047 93.916-46.568zm6.53 52.252l-95.4 47.3 63.036 78.137 95.397-47.303zm-111.915 55.492l-33.732 16.724h47.224zm-22.119 34.722l71.615 26.633-21.484-26.633zm-41.021 3.948v276.752l131.22 48.796v-276.75zm243.134 1.56c-31.306 15.521-62.61 31.044-93.916 46.567v275.863l93.916-46.567zM176.501 272.466s-15.3 15.085-9.889 24.203c4.167 7.02 21.889 5.418 21.889 5.418l15.549 3.848s17.72 10.374 21.887 5.416c5.41-6.44-9.887-29.098-9.887-29.098s35.91 33.492 29.662 47.318c-3.143 6.955-24.719-2.117-24.719-2.117s5.495 7.21 4.944 10.549c-1.001 6.062-13.774 9.916-13.774 9.916s1.111 21.24-6 25.168c-5.147 2.843-14.628.497-19.775-4.895-7.111-7.448-6-28.136-6-28.136s-12.775-10.177-13.776-16.735c-.55-3.611 4.944-8.103 4.944-8.103s-21.575-1.607-24.717-10.117c-6.247-16.919 29.662-32.635 29.662-32.635z"},child:[]}]})(t)}function lue(t){return xl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M90.52 390.06h38.497v16.583H65.443V390.06l31.933-28.182c2.852-2.578 4.96-5.098 6.328-7.56 1.368-2.46 2.05-5.018 2.05-7.675 0-4.1-1.386-7.402-4.16-9.902-2.733-2.5-6.386-3.75-10.956-3.75-3.516 0-7.363.763-11.543 2.286-4.18 1.485-8.652 3.71-13.418 6.68v-19.22c5.078-1.678 10.098-2.948 15.06-3.807 4.96-.9 9.823-1.35 14.588-1.35 10.47 0 18.594 2.306 24.375 6.915 5.82 4.61 8.73 11.035 8.73 19.277 0 4.766-1.23 9.22-3.69 13.36-2.46 4.1-7.637 9.61-15.528 16.523l-18.69 16.406m349.377 32.915c5.897 1.524 10.37 4.18 13.417 7.97 3.086 3.75 4.63 8.534 4.63 14.355 0 8.672-3.322 15.273-9.962 19.804-6.64 4.493-16.328 6.74-29.063 6.74-4.492 0-9.004-.372-13.535-1.115-4.492-.704-8.945-1.778-13.36-3.223v-17.403c4.22 2.11 8.4 3.71 12.54 4.805 4.18 1.054 8.28 1.58 12.304 1.58 5.978 0 10.548-1.034 13.712-3.104 3.203-2.07 4.805-5.04 4.805-8.907 0-3.985-1.64-6.993-4.922-9.024-3.242-2.07-8.047-3.105-14.414-3.106h-9.022v-14.53h9.492c5.664 0 9.883-.88 12.656-2.638 2.773-1.796 4.16-4.51 4.16-8.144 0-3.36-1.347-5.957-4.043-7.793-2.695-1.836-6.504-2.754-11.426-2.754-3.632 0-7.304.41-11.015 1.232-3.71.82-7.403 2.03-11.074 3.632V384.83c4.453-1.25 8.867-2.186 13.242-2.812 4.375-.624 8.672-.937 12.89-.937 11.368 0 19.864 1.876 25.49 5.626 5.663 3.71 8.495 9.316 8.495 16.816 0 5.118-1.348 9.317-4.043 12.598-2.696 3.242-6.68 5.527-11.953 6.856M236.062 230.74h19.922v-56.544l-20.45 4.22v-15.352l20.333-4.22h21.445v71.895h19.922v15.585h-61.172V230.74M496 496V352H352V128H176v160H16v208"},child:[]}]})(t)}function cue(t){return xl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M24.844 25.563c1.333 77.685 25.778 141.568 63.283 187.955 4.367-4.937 8.77-9.796 13.13-14.553a9.5 9.5 0 0 1 7.348-3.178 9.5 9.5 0 0 1 6.66 16.016c-22.957 25.048-46.51 52.82-58.777 76.95-6.132 12.067-9.31 23.07-9.037 31.874.17 5.474 1.374 10.174 4.26 14.562l16.552-22.684a9.5 9.5 0 0 1 7.898-4.008 9.5 9.5 0 0 1 7.45 15.207l-16.635 22.797c2.973.316 6.316-.284 10.474-1.75 8.174-2.882 18.38-9.868 28.734-19.672 20.704-19.608 42.15-50.057 56.953-77.644a9.5 9.5 0 0 1 9.9-4.885c6.228 1.017 22.147 2.215 35.78.573 6.816-.82 13.107-2.395 17.232-4.432 4.124-2.035 5.597-3.84 6.12-5.934a9.5 9.5 0 1 1 18.434 4.603c-2.193 8.78-8.967 14.825-16.145 18.37-7.18 3.542-15.245 5.277-23.372 6.256-12.798 1.542-25.47 1.082-34.522.143-2.816 5.038-5.806 10.122-8.937 15.192 29.03 14.058 60.48 21.354 92.34 21.115 22.055-.164 43.82-4.29 64.64-11.937-6.014-8.637-11.297-17.378-15.596-25.96A9.5 9.5 0 1 1 326 252.03c13.688 27.32 40.692 59.164 67.537 79.982 13.423 10.41 26.846 18.047 37.842 21.363 5.988 1.806 10.902 2.378 14.983 1.854l-10.996-13.093a9.5 9.5 0 0 1 7.06-15.715 9.5 9.5 0 0 1 7.49 3.494l12.054 14.352c3.226-4.725 4.71-9.948 5.042-16.102.513-9.534-2.39-21.344-8.18-34.158-11.578-25.63-34.297-54.796-57.053-79.625a9.5 9.5 0 0 1 7.322-16.01 9.5 9.5 0 0 1 6.685 3.172c3.1 3.384 6.205 6.848 9.29 10.37 37.514-47.34 61.834-111.574 62.892-186.352H24.843zm138.664 270.68c-4.952 14.607-8.863 29.266-11.043 42.61-2.476 15.154-2.608 28.608-.29 37.745 2.32 9.137 5.71 13.32 12.514 15.22 10.31 2.88 17.56 1.32 24.884-3.572 7.325-4.893 14.436-13.87 20.696-25.87 6.813-13.064 12.555-29.486 17.517-47.09-22.16-3.106-43.775-9.54-64.28-19.044zm173.04 6.083c-9.938 3.936-20.108 7.144-30.456 9.57.512.913 1.02 1.844 1.54 2.733 7.736 13.262 16.197 23.722 23.802 29.292 7.604 5.57 12.882 6.638 19.34 3.77 7.937-3.52 12.458-8.014 15.236-14.087-10.454-9.556-20.457-20.185-29.46-31.28z"},child:[]}]})(t)}const uue=()=>{const[t,e]=I.useState(!0),[n,r]=I.useState(""),[i,a]=I.useState(""),[s,o]=I.useState(null),[l,u]=I.useState(!1),d=async()=>{if(window.confirm("¿Estás seguro de que quieres forzar la eliminación de la base de datos local? Esto no afectará tus datos en la nube."))try{await lg.delete("GanaderoOS_DB"),alert("Base de datos local eliminada con éxito. La página se recargará."),window.location.reload()}catch(h){alert("Error al eliminar la base de datos."),console.error(h)}},f=h=>{if(h.code==="auth/network-request-failed")return"No hay conexión a internet. Se requiere conexión para iniciar sesión.";switch(h.code){case"auth/invalid-email":return"El formato del correo electrónico no es válido.";case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Correo electrónico o contraseña incorrectos.";case"auth/email-already-in-use":return"Este correo electrónico ya está registrado.";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres.";default:return console.error("Firebase Auth Error:",h),"Ocurrió un error inesperado. Por favor, intenta de nuevo."}},p=async h=>{h.preventDefault(),o(null),u(!0);try{t?await Mae(og,n,i):await Oae(og,n,i)}catch(m){o(f(m))}finally{u(!1)}};return c.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 font-sans",children:c.jsxs("div",{className:"w-full max-w-sm",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[c.jsx(Db,{className:"w-12 h-12 text-brand-orange"}),c.jsx("h1",{className:"text-4xl font-bold text-white",children:"GanaderoOS"})]}),c.jsx("p",{className:"text-zinc-400",children:"El sistema operativo para tu finca."})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-6 border border-brand-border",children:[c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full mb-6",children:[c.jsx("button",{onClick:()=>e(!0),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"bg-zinc-700 text-white":"text-zinc-400 hover:bg-zinc-800/50"}`,children:"Iniciar Sesión"}),c.jsx("button",{onClick:()=>e(!1),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"text-zinc-400 hover:bg-zinc-800/50":"bg-zinc-700 text-white"}`,children:"Registrarse"})]}),c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c.jsx("input",{type:"email",value:n,onChange:h=>r(h.target.value),placeholder:"Correo electrónico",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),c.jsx("input",{type:"password",value:i,onChange:h=>a(h.target.value),placeholder:"Contraseña",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),s&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(mr,{size:18}),c.jsx("span",{children:s})]}),c.jsx("button",{type:"submit",disabled:l,className:"w-full bg-brand-orange text-white font-bold py-3 rounded-xl transition-colors hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Procesando...":t?"Iniciar Sesión":"Crear Cuenta"})]})]}),c.jsxs("div",{className:"mt-6 text-center",children:[c.jsxs("button",{onClick:d,className:"flex items-center justify-center gap-2 mx-auto bg-brand-red/20 text-brand-red font-semibold py-2 px-4 rounded-lg border border-brand-red/50 hover:bg-brand-red/30 transition-colors",children:[c.jsx(Yl,{size:16}),"Forzar Reinicio de DB Local"]}),c.jsx("p",{className:"text-xs text-zinc-600 mt-2",children:"Si la app no carga, usa este botón."})]})]})})};function due(t){return xl({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 160c44.2 0 80-35.8 80-80S236.2 0 192 0s-80 35.8-80 80 35.8 80 80 80zm-53.4 248.8l25.6-32-61.5-51.2L56.8 383c-11.4 14.2-11.7 34.4-.8 49l48 64c7.9 10.5 19.9 16 32 16 8.3 0 16.8-2.6 24-8 17.7-13.2 21.2-38.3 8-56l-29.4-39.2zm142.7-83.2l-61.5 51.2 25.6 32L216 448c-13.2 17.7-9.7 42.8 8 56 7.2 5.4 15.6 8 24 8 12.2 0 24.2-5.5 32-16l48-64c10.9-14.6 10.6-34.8-.8-49l-45.9-57.4zM376.7 145c-12.7-18.1-37.6-22.4-55.7-9.8l-40.6 28.5c-52.7 37-124.2 37-176.8 0L63 135.3C44.9 122.6 20 127 7.3 145-5.4 163.1-1 188 17 200.7l40.6 28.5c17 11.9 35.4 20.9 54.4 27.9V288h160v-30.8c19-7 37.4-16 54.4-27.9l40.6-28.5c18.1-12.8 22.4-37.7 9.7-55.8z"},child:[]}]})(t)}function fue(t){return xl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function hue(t){return xl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M201.5 174.8l55.7 55.8c3.1 3.1 3.1 8.2 0 11.3l-11.3 11.3c-3.1 3.1-8.2 3.1-11.3 0l-55.7-55.8-45.3 45.3 55.8 55.8c3.1 3.1 3.1 8.2 0 11.3l-11.3 11.3c-3.1 3.1-8.2 3.1-11.3 0L111 265.2l-26.4 26.4c-17.3 17.3-25.6 41.1-23 65.4l7.1 63.6L2.3 487c-3.1 3.1-3.1 8.2 0 11.3l11.3 11.3c3.1 3.1 8.2 3.1 11.3 0l66.3-66.3 63.6 7.1c23.9 2.6 47.9-5.4 65.4-23l181.9-181.9-135.7-135.7-64.9 65zm308.2-93.3L430.5 2.3c-3.1-3.1-8.2-3.1-11.3 0l-11.3 11.3c-3.1 3.1-3.1 8.2 0 11.3l28.3 28.3-45.3 45.3-56.6-56.6-17-17c-3.1-3.1-8.2-3.1-11.3 0l-33.9 33.9c-3.1 3.1-3.1 8.2 0 11.3l17 17L424.8 223l17 17c3.1 3.1 8.2 3.1 11.3 0l33.9-34c3.1-3.1 3.1-8.2 0-11.3l-73.5-73.5 45.3-45.3 28.3 28.3c3.1 3.1 8.2 3.1 11.3 0l11.3-11.3c3.1-3.2 3.1-8.2 0-11.4z"},child:[]}]})(t)}function pue(t){return xl({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 336c-48.6 0-88 39.4-88 88s39.4 88 88 88 88-39.4 88-88-39.4-88-88-88zm0 112c-13.23 0-24-10.77-24-24s10.77-24 24-24 24 10.77 24 24-10.77 24-24 24zm80-288h-64v-40.2c0-14.12 4.7-27.76 13.15-38.84 4.42-5.8 3.55-14.06-1.32-19.49L534.2 37.3c-6.66-7.45-18.32-6.92-24.7.78C490.58 60.9 480 89.81 480 119.8V160H377.67L321.58 29.14A47.914 47.914 0 0 0 277.45 0H144c-26.47 0-48 21.53-48 48v146.52c-8.63-6.73-20.96-6.46-28.89 1.47L36 227.1c-8.59 8.59-8.59 22.52 0 31.11l5.06 5.06c-4.99 9.26-8.96 18.82-11.91 28.72H22c-12.15 0-22 9.85-22 22v44c0 12.15 9.85 22 22 22h7.14c2.96 9.91 6.92 19.46 11.91 28.73l-5.06 5.06c-8.59 8.59-8.59 22.52 0 31.11L67.1 476c8.59 8.59 22.52 8.59 31.11 0l5.06-5.06c9.26 4.99 18.82 8.96 28.72 11.91V490c0 12.15 9.85 22 22 22h44c12.15 0 22-9.85 22-22v-7.14c9.9-2.95 19.46-6.92 28.72-11.91l5.06 5.06c8.59 8.59 22.52 8.59 31.11 0l31.11-31.11c8.59-8.59 8.59-22.52 0-31.11l-5.06-5.06c4.99-9.26 8.96-18.82 11.91-28.72H330c12.15 0 22-9.85 22-22v-6h80.54c21.91-28.99 56.32-48 95.46-48 18.64 0 36.07 4.61 51.8 12.2l50.82-50.82c6-6 9.37-14.14 9.37-22.63V192c.01-17.67-14.32-32-31.99-32zM176 416c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm22-256h-38V64h106.89l41.15 96H198z"},child:[]}]})(t)}function mue(t){return xl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.28 445.86l-73.03-292.13c-3.8-15.19-16.44-25.72-30.87-25.72h-60.25c3.57-10.05 5.88-20.72 5.88-32 0-53.02-42.98-96-96-96s-96 42.98-96 96c0 11.28 2.3 21.95 5.88 32h-60.25c-14.43 0-27.08 10.54-30.87 25.72L1.72 445.86C-6.61 479.17 16.38 512 48.03 512h415.95c31.64 0 54.63-32.83 46.3-66.14zM256 128c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32z"},child:[]}]})(t)}const cn=({isOpen:t,onClose:e,title:n,children:r,size:i="default"})=>{if(!t)return null;const a=i==="fullscreen"?"items-end":"items-center",s={default:"max-w-md m-4 rounded-2xl",large:"max-w-xl m-4 rounded-2xl",fullscreen:"w-full h-[95vh] rounded-t-2xl flex flex-col"};return c.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center z-50 animate-fade-in ${a}`,onClick:e,children:c.jsxs("div",{className:`bg-ios-modal-bg border border-zinc-700/80 shadow-2xl text-white transform transition-all animate-slide-up ${s[i]}`,onClick:o=>o.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-zinc-800/80",children:[c.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:n}),c.jsx("button",{onClick:e,className:"p-1 rounded-full text-zinc-500 hover:text-white hover:bg-zinc-700/50 transition-colors",children:c.jsx(Xl,{size:20})})]}),c.jsx("div",{className:i==="fullscreen"?"flex-1 overflow-y-auto p-4":"overflow-y-auto max-h-[85vh] p-6",children:r})]})})},gue=({isOpen:t,onClose:e,editingLotId:n})=>{const{lots:r,addLot:i}=Xt(),[a,s]=I.useState(""),[o,l]=I.useState(""),[u,d]=I.useState(""),f=async()=>{if(a.trim()===""){d("El nombre del lote no puede estar vacío.");return}try{await i({name:a,parentLotId:o||void 0}),p()}catch(m){d(m.message||"No se pudo guardar el lote."),console.error(m)}},p=()=>{s(""),l(""),d(""),e()},h=r.filter(m=>!m.parentLotId&&m.id!==n);return c.jsx(cn,{isOpen:t,onClose:p,title:"Crear Nuevo Lote",children:c.jsxs("form",{onSubmit:m=>{m.preventDefault(),f()},className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la nueva ubicación o lote en tu finca."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"lotName",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Lote"}),c.jsx("input",{id:"lotName",type:"text",value:a,onChange:m=>s(m.target.value),placeholder:"Ej: Galpón 1",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"parentLot",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Sub-lote de (Opcional)"}),c.jsxs("select",{id:"parentLot",value:o,onChange:m=>l(m.target.value),className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0",children:[c.jsx("option",{value:"",children:"Ninguno (Es un Lote Principal)"}),h.map(m=>c.jsx("option",{value:m.id,children:m.name},m.id))]})]}),u&&c.jsx("p",{className:"text-sm text-brand-red text-center",children:u}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx("button",{type:"button",onClick:p,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Lote"})]})]})})},dT=I.createContext({});function gd(t){const e=I.useRef(null);return e.current===null&&(e.current=t()),e.current}const gS=I.createContext(null),vS=I.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class vue extends I.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function yue({children:t,isPresent:e}){const n=I.useId(),r=I.useRef(null),i=I.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=I.useContext(vS);return I.useInsertionEffect(()=>{const{width:s,height:o,top:l,left:u}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return a&&(d.nonce=a),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),c.jsx(vue,{isPresent:e,childRef:r,sizeRef:i,children:I.cloneElement(t,{ref:r})})}const bue=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s})=>{const o=gd(xue),l=I.useId(),u=I.useCallback(f=>{o.set(f,!0);for(const p of o.values())if(!p)return;r&&r()},[o,r]),d=I.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u,register:f=>(o.set(f,!1),()=>o.delete(f))}),a?[Math.random(),u]:[n,u]);return I.useMemo(()=>{o.forEach((f,p)=>o.set(p,!1))},[n]),I.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),s==="popLayout"&&(t=c.jsx(yue,{isPresent:n,children:t})),c.jsx(gS.Provider,{value:d,children:t})};function xue(){return new Map}function eW(t=!0){const e=I.useContext(gS);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=I.useId();I.useEffect(()=>{t&&i(a)},[t]);const s=I.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const zx=t=>t.key||"";function QM(t){const e=[];return I.Children.forEach(t,n=>{I.isValidElement(n)&&e.push(n)}),e}const fT=typeof window<"u",yS=fT?I.useLayoutEffect:I.useEffect,K1=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1})=>{const[o,l]=eW(s),u=I.useMemo(()=>QM(t),[t]),d=s&&!o?[]:u.map(zx),f=I.useRef(!0),p=I.useRef(u),h=gd(()=>new Map),[m,g]=I.useState(u),[v,y]=I.useState(u);yS(()=>{f.current=!1,p.current=u;for(let A=0;A<v.length;A++){const C=zx(v[A]);d.includes(C)?h.delete(C):h.get(C)!==!0&&h.set(C,!1)}},[v,d.length,d.join("-")]);const b=[];if(u!==m){let A=[...u];for(let C=0;C<v.length;C++){const T=v[C],j=zx(T);d.includes(j)||(A.splice(C,0,T),b.push(T))}a==="wait"&&b.length&&(A=b),y(QM(A)),g(u);return}const{forceRender:S}=I.useContext(dT);return c.jsx(c.Fragment,{children:v.map(A=>{const C=zx(A),T=s&&!o?!1:u===v||d.includes(C),j=()=>{if(h.has(C))h.set(C,!0);else return;let E=!0;h.forEach(k=>{k||(E=!1)}),E&&(S==null||S(),y(p.current),s&&(l==null||l()),r&&r())};return c.jsx(bue,{isPresent:T,initial:!f.current||n?void 0:!1,custom:T?void 0:e,presenceAffectsLayout:i,mode:a,onExitComplete:T?void 0:j,children:A},C)})})},ll=t=>t;let tW=ll;function hT(t){let e;return()=>(e===void 0&&(e=t()),e)}const dg=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Yu=t=>t*1e3,Xu=t=>t/1e3,wue={useManualTiming:!1};function Sue(t){let e=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(l.schedule(u),t()),u(s)}const l={schedule:(u,d=!1,f=!1)=>{const h=f&&r?e:n;return d&&a.add(u),h.has(u)||h.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(s=u,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const $x=["read","resolveKeyframes","update","preRender","render","postRender"],_ue=40;function nW(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=$x.reduce((y,b)=>(y[b]=Sue(a),y),{}),{read:o,resolveKeyframes:l,update:u,preRender:d,render:f,postRender:p}=s,h=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,_ue),1),i.timestamp=y,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),d.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(h))},m=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:$x.reduce((y,b)=>{const S=s[b];return y[b]=(A,C=!1,T=!1)=>(n||m(),S.schedule(A,C,T)),y},{}),cancel:y=>{for(let b=0;b<$x.length;b++)s[$x[b]].cancel(y)},state:i,steps:s}}const{schedule:si,cancel:sd,state:us,steps:IA}=nW(typeof requestAnimationFrame<"u"?requestAnimationFrame:ll,!0),rW=I.createContext({strict:!1}),ZM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fg={};for(const t in ZM)fg[t]={isEnabled:e=>ZM[t].some(n=>!!e[n])};function Aue(t){for(const e in t)fg[e]={...fg[e],...t[e]}}const Cue=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Q2(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Cue.has(t)}let iW=t=>!Q2(t);function jue(t){t&&(iW=e=>e.startsWith("on")?!Q2(e):t(e))}try{jue(require("@emotion/is-prop-valid").default)}catch{}function Nue(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(iW(i)||n===!0&&Q2(i)||!e&&!Q2(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Eue(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const bS=I.createContext({});function Sy(t){return typeof t=="string"||Array.isArray(t)}function xS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const pT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mT=["initial",...pT];function wS(t){return xS(t.animate)||mT.some(e=>Sy(t[e]))}function aW(t){return!!(wS(t)||t.variants)}function kue(t,e){if(wS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Sy(n)?n:void 0,animate:Sy(r)?r:void 0}}return t.inherit!==!1?e:{}}function Pue(t){const{initial:e,animate:n}=kue(t,I.useContext(bS));return I.useMemo(()=>({initial:e,animate:n}),[JM(e),JM(n)])}function JM(t){return Array.isArray(t)?t.join(" "):t}const Tue=Symbol.for("motionComponentSymbol");function dm(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Due(t,e,n){return I.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):dm(n)&&(n.current=r))},[e])}const gT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Iue="framerAppearId",sW="data-"+gT(Iue),{schedule:vT}=nW(queueMicrotask,!1),oW=I.createContext({});function Oue(t,e,n,r,i){var a,s;const{visualElement:o}=I.useContext(bS),l=I.useContext(rW),u=I.useContext(gS),d=I.useContext(vS).reducedMotion,f=I.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,h=I.useContext(oW);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&Mue(f.current,n,i,h);const m=I.useRef(!1);I.useInsertionEffect(()=>{p&&m.current&&p.update(n,u)});const g=n[sW],v=I.useRef(!!g&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,g))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,g)));return yS(()=>{p&&(m.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),vT.render(p.render),v.current&&p.animationState&&p.animationState.animateChanges())}),I.useEffect(()=>{p&&(!v.current&&p.animationState&&p.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),v.current=!1))}),p}function Mue(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:lW(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&dm(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function lW(t){if(t)return t.options.allowProjection!==!1?t.projection:lW(t.parent)}function Rue({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var a,s;t&&Aue(t);function o(u,d){let f;const p={...I.useContext(vS),...u,layoutId:Lue(u)},{isStatic:h}=p,m=Pue(u),g=r(u,h);if(!h&&fT){Fue();const v=zue(p);f=v.MeasureLayout,m.visualElement=Oue(i,g,p,e,v.ProjectionNode)}return c.jsxs(bS.Provider,{value:m,children:[f&&m.visualElement?c.jsx(f,{visualElement:m.visualElement,...p}):null,n(i,u,Due(g,m.visualElement,d),g,h,m.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(s=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&s!==void 0?s:""})`}`;const l=I.forwardRef(o);return l[Tue]=i,l}function Lue({layoutId:t}){const e=I.useContext(dT).id;return e&&t!==void 0?e+"-"+t:t}function Fue(t,e){I.useContext(rW).strict}function zue(t){const{drag:e,layout:n}=fg;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const $ue=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yT(t){return typeof t!="string"||t.includes("-")?!1:!!($ue.indexOf(t)>-1||/[A-Z]/u.test(t))}function eR(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function bT(t,e,n,r){if(typeof e=="function"){const[i,a]=eR(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=eR(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const qN=t=>Array.isArray(t),Bue=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Vue=t=>qN(t)?t[t.length-1]||0:t,hs=t=>!!(t&&t.getVelocity);function G1(t){const e=hs(t)?t.get():t;return Bue(e)?e.toValue():e}function Uue({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const s={latestValues:Hue(r,i,a,t),renderState:e()};return n&&(s.onMount=o=>n({props:r,current:o,...s}),s.onUpdate=o=>n(o)),s}const cW=t=>(e,n)=>{const r=I.useContext(bS),i=I.useContext(gS),a=()=>Uue(t,e,r,i);return n?a():gd(a)};function Hue(t,e,n,r){const i={},a=r(t,{});for(const p in a)i[p]=G1(a[p]);let{initial:s,animate:o}=t;const l=wS(t),u=aW(t);e&&u&&!l&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const f=d?o:s;if(f&&typeof f!="boolean"&&!xS(f)){const p=Array.isArray(f)?f:[f];for(let h=0;h<p.length;h++){const m=bT(t,p[h]);if(m){const{transitionEnd:g,transition:v,...y}=m;for(const b in y){let S=y[b];if(Array.isArray(S)){const A=d?S.length-1:0;S=S[A]}S!==null&&(i[b]=S)}for(const b in g)i[b]=g[b]}}}return i}const nv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gp=new Set(nv),uW=t=>e=>typeof e=="string"&&e.startsWith(t),dW=uW("--"),Wue=uW("var(--"),xT=t=>Wue(t)?que.test(t.split("/*")[0].trim()):!1,que=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fW=(t,e)=>e&&typeof t=="number"?e.transform(t):t,od=(t,e,n)=>n>e?e:n<t?t:n,rv={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},_y={...rv,transform:t=>od(0,1,t)},Bx={...rv,default:1},Ib=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rd=Ib("deg"),lu=Ib("%"),Cn=Ib("px"),Kue=Ib("vh"),Gue=Ib("vw"),tR={...lu,parse:t=>lu.parse(t)/100,transform:t=>lu.transform(t*100)},Yue={borderWidth:Cn,borderTopWidth:Cn,borderRightWidth:Cn,borderBottomWidth:Cn,borderLeftWidth:Cn,borderRadius:Cn,radius:Cn,borderTopLeftRadius:Cn,borderTopRightRadius:Cn,borderBottomRightRadius:Cn,borderBottomLeftRadius:Cn,width:Cn,maxWidth:Cn,height:Cn,maxHeight:Cn,top:Cn,right:Cn,bottom:Cn,left:Cn,padding:Cn,paddingTop:Cn,paddingRight:Cn,paddingBottom:Cn,paddingLeft:Cn,margin:Cn,marginTop:Cn,marginRight:Cn,marginBottom:Cn,marginLeft:Cn,backgroundPositionX:Cn,backgroundPositionY:Cn},Xue={rotate:Rd,rotateX:Rd,rotateY:Rd,rotateZ:Rd,scale:Bx,scaleX:Bx,scaleY:Bx,scaleZ:Bx,skew:Rd,skewX:Rd,skewY:Rd,distance:Cn,translateX:Cn,translateY:Cn,translateZ:Cn,x:Cn,y:Cn,z:Cn,perspective:Cn,transformPerspective:Cn,opacity:_y,originX:tR,originY:tR,originZ:Cn},nR={...rv,transform:Math.round},wT={...Yue,...Xue,zIndex:nR,size:Cn,fillOpacity:_y,strokeOpacity:_y,numOctaves:nR},Que={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Zue=nv.length;function Jue(t,e,n){let r="",i=!0;for(let a=0;a<Zue;a++){const s=nv[a],o=t[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=fW(o,wT[s]);if(!l){i=!1;const d=Que[s]||s;r+=`${d}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function ST(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const l in e){const u=e[l];if(gp.has(l)){s=!0;continue}else if(dW(l)){i[l]=u;continue}else{const d=fW(u,wT[l]);l.startsWith("origin")?(o=!0,a[l]=d):r[l]=d}}if(e.transform||(s||n?r.transform=Jue(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${l} ${u} ${d}`}}const ede={offset:"stroke-dashoffset",array:"stroke-dasharray"},tde={offset:"strokeDashoffset",array:"strokeDasharray"};function nde(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?ede:tde;t[a.offset]=Cn.transform(-r);const s=Cn.transform(e),o=Cn.transform(n);t[a.array]=`${s} ${o}`}function rR(t,e,n){return typeof t=="string"?t:Cn.transform(e+n*t)}function rde(t,e,n){const r=rR(e,t.x,t.width),i=rR(n,t.y,t.height);return`${r} ${i}`}function _T(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},d,f){if(ST(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:h,dimensions:m}=t;p.transform&&(m&&(h.transform=p.transform),delete p.transform),m&&(i!==void 0||a!==void 0||h.transform)&&(h.transformOrigin=rde(m,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),s!==void 0&&nde(p,s,o,l,!1)}const AT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),hW=()=>({...AT(),attrs:{}}),CT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function pW(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const mW=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gW(t,e,n,r){pW(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(mW.has(i)?i:gT(i),e.attrs[i])}const Z2={};function ide(t){Object.assign(Z2,t)}function vW(t,{layout:e,layoutId:n}){return gp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Z2[t]||t==="opacity")}function jT(t,e,n){var r;const{style:i}=t,a={};for(const s in i)(hs(i[s])||e.style&&hs(e.style[s])||vW(s,t)||((r=n==null?void 0:n.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function yW(t,e,n){const r=jT(t,e,n);for(const i in t)if(hs(t[i])||hs(e[i])){const a=nv.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function ade(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const iR=["x","y","width","height","cx","cy","r"],sde={useVisualState:cW({scrapeMotionValuesFromProps:yW,createRenderState:hW,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const o in i)if(gp.has(o)){a=!0;break}}if(!a)return;let s=!e;if(e)for(let o=0;o<iR.length;o++){const l=iR[o];t[l]!==e[l]&&(s=!0)}s&&si.read(()=>{ade(n,r),si.render(()=>{_T(r,i,CT(n.tagName),t.transformTemplate),gW(n,r)})})}})},ode={useVisualState:cW({scrapeMotionValuesFromProps:jT,createRenderState:AT})};function bW(t,e,n){for(const r in e)!hs(e[r])&&!vW(r,n)&&(t[r]=e[r])}function lde({transformTemplate:t},e){return I.useMemo(()=>{const n=AT();return ST(n,e,t),Object.assign({},n.vars,n.style)},[e])}function cde(t,e){const n=t.style||{},r={};return bW(r,n,t),Object.assign(r,lde(t,e)),r}function ude(t,e){const n={},r=cde(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function dde(t,e,n,r){const i=I.useMemo(()=>{const a=hW();return _T(a,e,CT(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};bW(a,t.style,t),i.style={...a,...i.style}}return i}function fde(t=!1){return(n,r,i,{latestValues:a},s)=>{const l=(yT(n)?dde:ude)(r,a,s,n),u=Nue(r,typeof n=="string",t),d=n!==I.Fragment?{...u,...l,ref:i}:{},{children:f}=r,p=I.useMemo(()=>hs(f)?f.get():f,[f]);return I.createElement(n,{...d,children:p})}}function hde(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...yT(r)?sde:ode,preloadedFeatures:t,useRender:fde(i),createVisualElement:e,Component:r};return Rue(s)}}function xW(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function SS(t,e,n){const r=t.getProps();return bT(r,e,n!==void 0?n:r.custom,t)}const pde=hT(()=>window.ScrollTimeline!==void 0);class mde{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(pde()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class gde extends mde{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function NT(t,e){return t?t[e]||t.default||t:void 0}const KN=2e4;function wW(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<KN;)e+=n,r=t.next(e);return e>=KN?1/0:e}function ET(t){return typeof t=="function"}function aR(t,e){t.timeline=e,t.onfinish=null}const kT=t=>Array.isArray(t)&&typeof t[0]=="number",vde={linearEasing:void 0};function yde(t,e){const n=hT(t);return()=>{var r;return(r=vde[e])!==null&&r!==void 0?r:n()}}const J2=yde(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),SW=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(dg(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function _W(t){return!!(typeof t=="function"&&J2()||!t||typeof t=="string"&&(t in GN||J2())||kT(t)||Array.isArray(t)&&t.every(_W))}const s0=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,GN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:s0([0,.65,.55,1]),circOut:s0([.55,0,1,.45]),backIn:s0([.31,.01,.66,-.59]),backOut:s0([.33,1.53,.69,.99])};function AW(t,e){if(t)return typeof t=="function"&&J2()?SW(t,e):kT(t)?s0(t):Array.isArray(t)?t.map(n=>AW(n,e)||GN.easeOut):GN[t]}const pc={x:!1,y:!1};function CW(){return pc.x||pc.y}function bde(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function jW(t,e){const n=bde(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function sR(t){return e=>{e.pointerType==="touch"||CW()||t(e)}}function xde(t,e,n={}){const[r,i,a]=jW(t,n),s=sR(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const d=sR(f=>{u(f),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,i)});return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const NW=(t,e)=>e?t===e?!0:NW(t,e.parentElement):!1,PT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,wde=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Sde(t){return wde.has(t.tagName)||t.tabIndex!==-1}const o0=new WeakSet;function oR(t){return e=>{e.key==="Enter"&&t(e)}}function OA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const _de=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=oR(()=>{if(o0.has(n))return;OA(n,"down");const i=oR(()=>{OA(n,"up")}),a=()=>OA(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function lR(t){return PT(t)&&!CW()}function Ade(t,e,n={}){const[r,i,a]=jW(t,n),s=o=>{const l=o.currentTarget;if(!lR(o)||o0.has(l))return;o0.add(l);const u=e(o),d=(h,m)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!lR(h)||!o0.has(l))&&(o0.delete(l),typeof u=="function"&&u(h,{success:m}))},f=h=>{d(h,n.useGlobalTarget||NW(l,h.target))},p=h=>{d(h,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(o=>{!Sde(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),o.addEventListener("focus",u=>_de(u,i),i)}),a}function Cde(t){return t==="x"||t==="y"?pc[t]?null:(pc[t]=!0,()=>{pc[t]=!1}):pc.x||pc.y?null:(pc.x=pc.y=!0,()=>{pc.x=pc.y=!1})}const EW=new Set(["width","height","top","left","right","bottom",...nv]);let Y1;function jde(){Y1=void 0}const cu={now:()=>(Y1===void 0&&cu.set(us.isProcessing||wue.useManualTiming?us.timestamp:performance.now()),Y1),set:t=>{Y1=t,queueMicrotask(jde)}};function TT(t,e){t.indexOf(e)===-1&&t.push(e)}function DT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Nde([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[a]=t.splice(e,1);t.splice(i,0,a)}return t}class IT{constructor(){this.subscriptions=[]}add(e){return TT(this.subscriptions,e),()=>DT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function kW(t,e){return e?t*(1e3/e):0}const cR=30,Ede=t=>!isNaN(parseFloat(t)),C0={current:void 0};class kde{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=cu.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=cu.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ede(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new IT);const r=this.events[e].add(n);return e==="change"?()=>{r(),si.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return C0.current&&C0.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=cu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>cR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,cR);return kW(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hg(t,e){return new kde(t,e)}function Pde(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,hg(n))}function OT(t,e){const n=SS(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=Vue(a[s]);Pde(t,s,o)}}function Tde(t){return!!(hs(t)&&t.add)}function YN(t,e){const n=t.getValue("willChange");if(Tde(n))return n.add(e)}function PW(t){return t.props[sW]}const TW=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Dde=1e-7,Ide=12;function Ode(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=TW(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>Dde&&++o<Ide);return s}function Ob(t,e,n,r){if(t===e&&n===r)return ll;const i=a=>Ode(a,0,1,t,n);return a=>a===0||a===1?a:TW(i(a),e,r)}const DW=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,IW=t=>e=>1-t(1-e),OW=Ob(.33,1.53,.69,.99),MT=IW(OW),MW=DW(MT),RW=t=>(t*=2)<1?.5*MT(t):.5*(2-Math.pow(2,-10*(t-1))),RT=t=>1-Math.sin(Math.acos(t)),LW=IW(RT),FW=DW(RT),zW=t=>/^0[^.\s]+$/u.test(t);function Mde(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||zW(t):!0}const j0=t=>Math.round(t*1e5)/1e5,LT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Rde(t){return t==null}const Lde=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,FT=(t,e)=>n=>!!(typeof n=="string"&&Lde.test(n)&&n.startsWith(t)||e&&!Rde(n)&&Object.prototype.hasOwnProperty.call(n,e)),$W=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(LT);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},Fde=t=>od(0,255,t),MA={...rv,transform:t=>Math.round(Fde(t))},xh={test:FT("rgb","red"),parse:$W("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+MA.transform(t)+", "+MA.transform(e)+", "+MA.transform(n)+", "+j0(_y.transform(r))+")"};function zde(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const XN={test:FT("#"),parse:zde,transform:xh.transform},fm={test:FT("hsl","hue"),parse:$W("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+lu.transform(j0(e))+", "+lu.transform(j0(n))+", "+j0(_y.transform(r))+")"},Ls={test:t=>xh.test(t)||XN.test(t)||fm.test(t),parse:t=>xh.test(t)?xh.parse(t):fm.test(t)?fm.parse(t):XN.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?xh.transform(t):fm.transform(t)},$de=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Bde(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(LT))===null||e===void 0?void 0:e.length)||0)+(((n=t.match($de))===null||n===void 0?void 0:n.length)||0)>0}const BW="number",VW="color",Vde="var",Ude="var(",uR="${}",Hde=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ay(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Hde,l=>(Ls.test(l)?(r.color.push(a),i.push(VW),n.push(Ls.parse(l))):l.startsWith(Ude)?(r.var.push(a),i.push(Vde),n.push(l)):(r.number.push(a),i.push(BW),n.push(parseFloat(l))),++a,uR)).split(uR);return{values:n,split:o,indexes:r,types:i}}function UW(t){return Ay(t).values}function HW(t){const{split:e,types:n}=Ay(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===BW?a+=j0(i[s]):o===VW?a+=Ls.transform(i[s]):a+=i[s]}return a}}const Wde=t=>typeof t=="number"?0:t;function qde(t){const e=UW(t);return HW(t)(e.map(Wde))}const wf={test:Bde,parse:UW,createTransformer:HW,getAnimatableNone:qde},Kde=new Set(["brightness","contrast","saturate","opacity"]);function Gde(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(LT)||[];if(!r)return t;const i=n.replace(r,"");let a=Kde.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const Yde=/\b([a-z-]*)\(.*?\)/gu,QN={...wf,getAnimatableNone:t=>{const e=t.match(Yde);return e?e.map(Gde).join(" "):t}},Xde={...wT,color:Ls,backgroundColor:Ls,outlineColor:Ls,fill:Ls,stroke:Ls,borderColor:Ls,borderTopColor:Ls,borderRightColor:Ls,borderBottomColor:Ls,borderLeftColor:Ls,filter:QN,WebkitFilter:QN},zT=t=>Xde[t];function WW(t,e){let n=zT(t);return n!==QN&&(n=wf),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Qde=new Set(["auto","none","0"]);function Zde(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!Qde.has(a)&&Ay(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=WW(n,i)}const dR=t=>t===rv||t===Cn,fR=(t,e)=>parseFloat(t.split(", ")[e]),hR=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return fR(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?fR(a[1],t):0}},Jde=new Set(["x","y","z"]),efe=nv.filter(t=>!Jde.has(t));function tfe(t){const e=[];return efe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const pg={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:hR(4,13),y:hR(5,14)};pg.translateX=pg.x;pg.translateY=pg.y;const Oh=new Set;let ZN=!1,JN=!1;function qW(){if(JN){const t=Array.from(Oh).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=tfe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}JN=!1,ZN=!1,Oh.forEach(t=>t.complete()),Oh.clear()}function KW(){Oh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(JN=!0)})}function nfe(){KW(),qW()}class $T{constructor(e,n,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Oh.add(this),ZN||(ZN=!0,si.read(KW),si.resolveKeyframes(qW))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Oh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Oh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const GW=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),rfe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ife(t){const e=rfe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function YW(t,e,n=1){const[r,i]=ife(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return GW(s)?parseFloat(s):s}return xT(i)?YW(i,e,n+1):i}const XW=t=>e=>e.test(t),afe={test:t=>t==="auto",parse:t=>t},QW=[rv,Cn,lu,Rd,Gue,Kue,afe],pR=t=>QW.find(XW(t));class ZW extends $T{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),xT(u))){const d=YW(u,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!EW.has(r)||e.length!==2)return;const[i,a]=e,s=pR(i),o=pR(a);if(s!==o)if(dR(s)&&dR(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)Mde(e[i])&&r.push(i);r.length&&Zde(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pg[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=pg[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const mR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wf.test(t)||t==="0")&&!t.startsWith("url("));function sfe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function ofe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=mR(i,e),o=mR(a,e);return!s||!o?!1:sfe(t)||(n==="spring"||ET(n))&&r}const lfe=t=>t!==null;function _S(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(lfe),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const cfe=40;class JW{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=cu.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>cfe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&nfe(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=cu.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!ofe(e,r,i,a))if(s)this.options.duration=0;else{l&&l(_S(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Si=(t,e,n)=>t+(e-t)*n;function RA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function ufe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=RA(l,o,t+1/3),a=RA(l,o,t),s=RA(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function ew(t,e){return n=>n>0?e:t}const LA=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},dfe=[XN,xh,fm],ffe=t=>dfe.find(e=>e.test(t));function gR(t){const e=ffe(t);if(!e)return!1;let n=e.parse(t);return e===fm&&(n=ufe(n)),n}const vR=(t,e)=>{const n=gR(t),r=gR(e);if(!n||!r)return ew(t,e);const i={...n};return a=>(i.red=LA(n.red,r.red,a),i.green=LA(n.green,r.green,a),i.blue=LA(n.blue,r.blue,a),i.alpha=Si(n.alpha,r.alpha,a),xh.transform(i))},hfe=(t,e)=>n=>e(t(n)),Mb=(...t)=>t.reduce(hfe),eE=new Set(["none","hidden"]);function pfe(t,e){return eE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function mfe(t,e){return n=>Si(t,e,n)}function BT(t){return typeof t=="number"?mfe:typeof t=="string"?xT(t)?ew:Ls.test(t)?vR:yfe:Array.isArray(t)?eq:typeof t=="object"?Ls.test(t)?vR:gfe:ew}function eq(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>BT(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function gfe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=BT(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function vfe(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const s=e.types[a],o=t.indexes[s][i[s]],l=(n=t.values[o])!==null&&n!==void 0?n:0;r[a]=l,i[s]++}return r}const yfe=(t,e)=>{const n=wf.createTransformer(e),r=Ay(t),i=Ay(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?eE.has(t)&&!i.values.length||eE.has(e)&&!r.values.length?pfe(t,e):Mb(eq(vfe(r,i),i.values),n):ew(t,e)};function tq(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Si(t,e,n):BT(t)(t,e)}const bfe=5;function nq(t,e,n){const r=Math.max(e-bfe,0);return kW(n-t(r),e-r)}const $i={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},FA=.001;function xfe({duration:t=$i.duration,bounce:e=$i.bounce,velocity:n=$i.velocity,mass:r=$i.mass}){let i,a,s=1-e;s=od($i.minDamping,$i.maxDamping,s),t=od($i.minDuration,$i.maxDuration,Xu(t)),s<1?(i=u=>{const d=u*s,f=d*t,p=d-n,h=tE(u,s),m=Math.exp(-f);return FA-p/h*m},a=u=>{const f=u*s*t,p=f*n+n,h=Math.pow(s,2)*Math.pow(u,2)*t,m=Math.exp(-f),g=tE(Math.pow(u,2),s);return(-i(u)+FA>0?-1:1)*((p-h)*m)/g}):(i=u=>{const d=Math.exp(-u*t),f=(u-n)*t+1;return-FA+d*f},a=u=>{const d=Math.exp(-u*t),f=(n-u)*(t*t);return d*f});const o=5/t,l=Sfe(i,a,o);if(t=Yu(t),isNaN(l))return{stiffness:$i.stiffness,damping:$i.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const wfe=12;function Sfe(t,e,n){let r=n;for(let i=1;i<wfe;i++)r=r-t(r)/e(r);return r}function tE(t,e){return t*Math.sqrt(1-e*e)}const _fe=["duration","bounce"],Afe=["stiffness","damping","mass"];function yR(t,e){return e.some(n=>t[n]!==void 0)}function Cfe(t){let e={velocity:$i.velocity,stiffness:$i.stiffness,damping:$i.damping,mass:$i.mass,isResolvedFromDuration:!1,...t};if(!yR(t,Afe)&&yR(t,_fe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*od(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:$i.mass,stiffness:i,damping:a}}else{const n=xfe(t);e={...e,...n,mass:$i.mass},e.isResolvedFromDuration=!0}return e}function rq(t=$i.visualDuration,e=$i.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:d,duration:f,velocity:p,isResolvedFromDuration:h}=Cfe({...n,velocity:-Xu(n.velocity||0)}),m=p||0,g=u/(2*Math.sqrt(l*d)),v=s-a,y=Xu(Math.sqrt(l/d)),b=Math.abs(v)<5;r||(r=b?$i.restSpeed.granular:$i.restSpeed.default),i||(i=b?$i.restDelta.granular:$i.restDelta.default);let S;if(g<1){const C=tE(y,g);S=T=>{const j=Math.exp(-g*y*T);return s-j*((m+g*y*v)/C*Math.sin(C*T)+v*Math.cos(C*T))}}else if(g===1)S=C=>s-Math.exp(-y*C)*(v+(m+y*v)*C);else{const C=y*Math.sqrt(g*g-1);S=T=>{const j=Math.exp(-g*y*T),E=Math.min(C*T,300);return s-j*((m+g*y*v)*Math.sinh(E)+C*v*Math.cosh(E))/C}}const A={calculatedDuration:h&&f||null,next:C=>{const T=S(C);if(h)o.done=C>=f;else{let j=0;g<1&&(j=C===0?Yu(m):nq(S,C,T));const E=Math.abs(j)<=r,k=Math.abs(s-T)<=i;o.done=E&&k}return o.value=o.done?s:T,o},toString:()=>{const C=Math.min(wW(A),KN),T=SW(j=>A.next(C*j).value,C,30);return C+"ms "+T}};return A}function bR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:d}){const f=t[0],p={done:!1,value:f},h=E=>o!==void 0&&E<o||l!==void 0&&E>l,m=E=>o===void 0?l:l===void 0||Math.abs(o-E)<Math.abs(l-E)?o:l;let g=n*e;const v=f+g,y=s===void 0?v:s(v);y!==v&&(g=y-f);const b=E=>-g*Math.exp(-E/r),S=E=>y+b(E),A=E=>{const k=b(E),O=S(E);p.done=Math.abs(k)<=u,p.value=p.done?y:O};let C,T;const j=E=>{h(p.value)&&(C=E,T=rq({keyframes:[p.value,m(p.value)],velocity:nq(S,E,p.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:E=>{let k=!1;return!T&&C===void 0&&(k=!0,A(E),j(E)),C!==void 0&&E>=C?T.next(E-C):(!k&&A(E),p)}}}const jfe=Ob(.42,0,1,1),Nfe=Ob(0,0,.58,1),iq=Ob(.42,0,.58,1),Efe=t=>Array.isArray(t)&&typeof t[0]!="number",kfe={linear:ll,easeIn:jfe,easeInOut:iq,easeOut:Nfe,circIn:RT,circInOut:FW,circOut:LW,backIn:MT,backInOut:MW,backOut:OW,anticipate:RW},xR=t=>{if(kT(t)){tW(t.length===4);const[e,n,r,i]=t;return Ob(e,n,r,i)}else if(typeof t=="string")return kfe[t];return t};function Pfe(t,e,n){const r=[],i=n||tq,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||ll:e;o=Mb(l,o)}r.push(o)}return r}function aq(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(tW(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Pfe(e,r,i),l=o.length,u=d=>{if(s&&d<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const p=dg(t[f],t[f+1],d);return o[f](p)};return n?d=>u(od(t[0],t[a-1],d)):u}function Tfe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=dg(0,e,r);t.push(Si(n,1,i))}}function Dfe(t){const e=[0];return Tfe(e,t.length-1),e}function Ife(t,e){return t.map(n=>n*e)}function Ofe(t,e){return t.map(()=>e||iq).splice(0,t.length-1)}function tw({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Efe(r)?r.map(xR):xR(r),a={done:!1,value:e[0]},s=Ife(n&&n.length===e.length?n:Dfe(e),t),o=aq(s,e,{ease:Array.isArray(i)?i:Ofe(e,i)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const Mfe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>si.update(e,!0),stop:()=>sd(e),now:()=>us.isProcessing?us.timestamp:cu.now()}},Rfe={decay:bR,inertia:bR,tween:tw,keyframes:tw,spring:rq},Lfe=t=>t/100;class VT extends JW{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,s=(i==null?void 0:i.KeyframeResolver)||$T,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new s(a,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=ET(n)?n:Rfe[n]||tw;let l,u;o!==tw&&typeof e[0]!="number"&&(l=Mb(Lfe,tq(e[0],e[1])),e=[0,100]);const d=o({...this.options,keyframes:e});a==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=wW(d));const{calculatedDuration:f}=d,p=f+i,h=p*(r+1)-i;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=r;if(this.startTime===null)return a.next(0);const{delay:p,repeat:h,repeatType:m,repeatDelay:g,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-p*(this.speed>=0?1:-1),b=this.speed>=0?y<0:y>d;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let S=this.currentTime,A=a;if(h){const E=Math.min(this.currentTime,d)/f;let k=Math.floor(E),O=E%1;!O&&E>=1&&(O=1),O===1&&k--,k=Math.min(k,h+1),!!(k%2)&&(m==="reverse"?(O=1-O,g&&(O-=g/f)):m==="mirror"&&(A=s)),S=od(0,1,O)*f}const C=b?{done:!1,value:l[0]}:A.next(S);o&&(C.value=o(C.value));let{done:T}=C;!b&&u!==null&&(T=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return j&&i!==void 0&&(C.value=_S(l,this.options,i)),v&&v(C.value),j&&this.finish(),C}get duration(){const{resolved:e}=this;return e?Xu(e.calculatedDuration):0}get time(){return Xu(this.currentTime)}set time(e){e=Yu(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Xu(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Mfe,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Ffe=new Set(["opacity","clipPath","filter","transform"]);function zfe(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const d=AW(o,i);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const $fe=hT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),nw=10,Bfe=2e4;function Vfe(t){return ET(t.type)||t.type==="spring"||!_W(t.ease)}function Ufe(t,e){const n=new VT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<Bfe;)r=n.sample(a),i.push(r.value),a+=nw;return{times:void 0,keyframes:i,duration:a-nw,ease:"linear"}}const sq={anticipate:RW,backInOut:MW,circInOut:FW};function Hfe(t){return t in sq}class wR extends JW{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new ZW(a,(s,o)=>this.onKeyframesResolved(s,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&J2()&&Hfe(a)&&(a=sq[a]),Vfe(this.options)){const{onComplete:f,onUpdate:p,motionValue:h,element:m,...g}=this.options,v=Ufe(e,g);e=v.keyframes,e.length===1&&(e[1]=e[0]),r=v.duration,i=v.times,a=v.ease,s="keyframes"}const d=zfe(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:a});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(aR(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;o.set(_S(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Xu(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Xu(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Yu(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ll;const{animation:r}=n;aR(r,e)}return ll}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:s,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:f,element:p,...h}=this.options,m=new VT({...h,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),g=Yu(this.time);u.setWithVelocity(m.sample(g-nw).value,m.sample(g).value,nw)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return $fe()&&r&&Ffe.has(r)&&!l&&!u&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}const Wfe={type:"spring",stiffness:500,damping:25,restSpeed:10},qfe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Kfe={type:"keyframes",duration:.8},Gfe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Yfe=(t,{keyframes:e})=>e.length>2?Kfe:gp.has(t)?t.startsWith("scale")?qfe(e[1]):Wfe:Gfe;function Xfe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const UT=(t,e,n,r={},i,a)=>s=>{const o=NT(r,t)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Yu(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:p=>{e.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};Xfe(o)||(d={...d,...Yfe(t,d)}),d.duration&&(d.duration=Yu(d.duration)),d.repeatDelay&&(d.repeatDelay=Yu(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!a&&e.get()!==void 0){const p=_S(d.keyframes,o);if(p!==void 0)return si.update(()=>{d.onUpdate(p),d.onComplete()}),new gde([])}return!a&&wR.supports(d)?new wR(d):new VT(d)};function Qfe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function oq(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const p=t.getValue(f,(a=t.latestValues[f])!==null&&a!==void 0?a:null),h=l[f];if(h===void 0||d&&Qfe(d,f))continue;const m={delay:n,...NT(s||{},f)};let g=!1;if(window.MotionHandoffAnimation){const y=PW(t);if(y){const b=window.MotionHandoffAnimation(y,f,si);b!==null&&(m.startTime=b,g=!0)}}YN(t,f),p.start(UT(f,p,h,t.shouldReduceMotion&&EW.has(f)?{type:!1}:m,t,g));const v=p.animation;v&&u.push(v)}return o&&Promise.all(u).then(()=>{si.update(()=>{o&&OT(t,o)})}),u}function nE(t,e,n={}){var r;const i=SS(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(oq(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=a;return Zfe(t,e,d+u,f,p,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function Zfe(t,e,n=0,r=0,i=1,a){const s=[],o=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(t.variantChildren).sort(Jfe).forEach((u,d)=>{u.notify("AnimationStart",e),s.push(nE(u,e,{...a,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(s)}function Jfe(t,e){return t.sortNodePosition(e)}function lq(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>nE(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=nE(t,e,n);else{const i=typeof e=="function"?SS(t,e,n.custom):e;r=Promise.all(oq(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const ehe=mT.length;function cq(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?cq(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<ehe;n++){const r=mT[n],i=t.props[r];(Sy(i)||i===!1)&&(e[r]=i)}return e}const the=[...pT].reverse(),nhe=pT.length;function rhe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>lq(t,n,r)))}function ihe(t){let e=rhe(t),n=SR(),r=!0;const i=l=>(u,d)=>{var f;const p=SS(t,d,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:h,transitionEnd:m,...g}=p;u={...u,...g,...m}}return u};function a(l){e=l(t)}function s(l){const{props:u}=t,d=cq(t.parent)||{},f=[],p=new Set;let h={},m=1/0;for(let v=0;v<nhe;v++){const y=the[v],b=n[y],S=u[y]!==void 0?u[y]:d[y],A=Sy(S),C=y===l?b.isActive:null;C===!1&&(m=v);let T=S===d[y]&&S!==u[y]&&A;if(T&&r&&t.manuallyAnimateOnMount&&(T=!1),b.protectedKeys={...h},!b.isActive&&C===null||!S&&!b.prevProp||xS(S)||typeof S=="boolean")continue;const j=ahe(b.prevProp,S);let E=j||y===l&&b.isActive&&!T&&A||v>m&&A,k=!1;const O=Array.isArray(S)?S:[S];let D=O.reduce(i(y),{});C===!1&&(D={});const{prevResolvedValues:M={}}=b,L={...M,...D},V=J=>{E=!0,p.has(J)&&(k=!0,p.delete(J)),b.needsAnimating[J]=!0;const q=t.getValue(J);q&&(q.liveStyle=!1)};for(const J in L){const q=D[J],ee=M[J];if(h.hasOwnProperty(J))continue;let le=!1;qN(q)&&qN(ee)?le=!xW(q,ee):le=q!==ee,le?q!=null?V(J):p.add(J):q!==void 0&&p.has(J)?V(J):b.protectedKeys[J]=!0}b.prevProp=S,b.prevResolvedValues=D,b.isActive&&(h={...h,...D}),r&&t.blockInitialAnimation&&(E=!1),E&&(!(T&&j)||k)&&f.push(...O.map(J=>({animation:J,options:{type:y}})))}if(p.size){const v={};p.forEach(y=>{const b=t.getBaseTarget(y),S=t.getValue(y);S&&(S.liveStyle=!0),v[y]=b??null}),f.push({animation:v})}let g=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(f):Promise.resolve()}function o(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var h;return(h=p.animationState)===null||h===void 0?void 0:h.setActive(l,u)}),n[l].isActive=u;const f=s(l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=SR(),r=!0}}}function ahe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xW(e,t):!1}function Kf(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SR(){return{animate:Kf(!0),whileInView:Kf(),whileHover:Kf(),whileTap:Kf(),whileDrag:Kf(),whileFocus:Kf(),exit:Kf()}}class Pf{constructor(e){this.isMounted=!1,this.node=e}update(){}}class she extends Pf{constructor(e){super(e),e.animationState||(e.animationState=ihe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();xS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let ohe=0;class lhe extends Pf{constructor(){super(...arguments),this.id=ohe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const che={animation:{Feature:she},exit:{Feature:lhe}};function Cy(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Rb(t){return{point:{x:t.pageX,y:t.pageY}}}const uhe=t=>e=>PT(e)&&t(e,Rb(e));function N0(t,e,n,r){return Cy(t,e,uhe(n),r)}const _R=(t,e)=>Math.abs(t-e);function dhe(t,e){const n=_R(t.x,e.x),r=_R(t.y,e.y);return Math.sqrt(n**2+r**2)}class uq{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=$A(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,h=dhe(f.offset,{x:0,y:0})>=3;if(!p&&!h)return;const{point:m}=f,{timestamp:g}=us;this.history.push({...m,timestamp:g});const{onStart:v,onMove:y}=this.handlers;p||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=zA(p,this.transformPagePoint),si.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:h,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=$A(f.type==="pointercancel"?this.lastMoveEventInfo:zA(p,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,v),m&&m(f,v)},!PT(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Rb(e),o=zA(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=us;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,$A(o,this.history)),this.removeListeners=Mb(N0(this.contextWindow,"pointermove",this.handlePointerMove),N0(this.contextWindow,"pointerup",this.handlePointerUp),N0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),sd(this.updatePoint)}}function zA(t,e){return e?{point:e(t.point)}:t}function AR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function $A({point:t},e){return{point:t,delta:AR(t,dq(e)),offset:AR(t,fhe(e)),velocity:hhe(e,.1)}}function fhe(t){return t[0]}function dq(t){return t[t.length-1]}function hhe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=dq(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Yu(e)));)n--;if(!r)return{x:0,y:0};const a=Xu(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const fq=1e-4,phe=1-fq,mhe=1+fq,hq=.01,ghe=0-hq,vhe=0+hq;function ml(t){return t.max-t.min}function yhe(t,e,n){return Math.abs(t-e)<=n}function CR(t,e,n,r=.5){t.origin=r,t.originPoint=Si(e.min,e.max,t.origin),t.scale=ml(n)/ml(e),t.translate=Si(n.min,n.max,t.origin)-t.originPoint,(t.scale>=phe&&t.scale<=mhe||isNaN(t.scale))&&(t.scale=1),(t.translate>=ghe&&t.translate<=vhe||isNaN(t.translate))&&(t.translate=0)}function E0(t,e,n,r){CR(t.x,e.x,n.x,r?r.originX:void 0),CR(t.y,e.y,n.y,r?r.originY:void 0)}function jR(t,e,n){t.min=n.min+e.min,t.max=t.min+ml(e)}function bhe(t,e,n){jR(t.x,e.x,n.x),jR(t.y,e.y,n.y)}function NR(t,e,n){t.min=e.min-n.min,t.max=t.min+ml(e)}function k0(t,e,n){NR(t.x,e.x,n.x),NR(t.y,e.y,n.y)}function xhe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Si(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Si(n,t,r.max):Math.min(t,n)),t}function ER(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function whe(t,{top:e,left:n,bottom:r,right:i}){return{x:ER(t.x,n,i),y:ER(t.y,e,r)}}function kR(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function She(t,e){return{x:kR(t.x,e.x),y:kR(t.y,e.y)}}function _he(t,e){let n=.5;const r=ml(t),i=ml(e);return i>r?n=dg(e.min,e.max-r,t.min):r>i&&(n=dg(t.min,t.max-i,e.min)),od(0,1,n)}function Ahe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const rE=.35;function Che(t=rE){return t===!1?t=0:t===!0&&(t=rE),{x:PR(t,"left","right"),y:PR(t,"top","bottom")}}function PR(t,e,n){return{min:TR(t,e),max:TR(t,n)}}function TR(t,e){return typeof t=="number"?t:t[e]||0}const DR=()=>({translate:0,scale:1,origin:0,originPoint:0}),hm=()=>({x:DR(),y:DR()}),IR=()=>({min:0,max:0}),na=()=>({x:IR(),y:IR()});function Rl(t){return[t("x"),t("y")]}function pq({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function jhe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Nhe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function BA(t){return t===void 0||t===1}function iE({scale:t,scaleX:e,scaleY:n}){return!BA(t)||!BA(e)||!BA(n)}function rh(t){return iE(t)||mq(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function mq(t){return OR(t.x)||OR(t.y)}function OR(t){return t&&t!=="0%"}function rw(t,e,n){const r=t-n,i=e*r;return n+i}function MR(t,e,n,r,i){return i!==void 0&&(t=rw(t,i,r)),rw(t,n,r)+e}function aE(t,e=0,n=1,r,i){t.min=MR(t.min,e,n,r,i),t.max=MR(t.max,e,n,r,i)}function gq(t,{x:e,y:n}){aE(t.x,e.translate,e.scale,e.originPoint),aE(t.y,n.translate,n.scale,n.originPoint)}const RR=.999999999999,LR=1.0000000000001;function Ehe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&mm(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,gq(t,s)),r&&rh(a.latestValues)&&mm(t,a.latestValues))}e.x<LR&&e.x>RR&&(e.x=1),e.y<LR&&e.y>RR&&(e.y=1)}function pm(t,e){t.min=t.min+e,t.max=t.max+e}function FR(t,e,n,r,i=.5){const a=Si(t.min,t.max,i);aE(t,e,n,a,r)}function mm(t,e){FR(t.x,e.x,e.scaleX,e.scale,e.originX),FR(t.y,e.y,e.scaleY,e.scale,e.originY)}function vq(t,e){return pq(Nhe(t.getBoundingClientRect(),e))}function khe(t,e,n){const r=vq(t,n),{scroll:i}=e;return i&&(pm(r.x,i.offset.x),pm(r.y,i.offset.y)),r}const yq=({current:t})=>t?t.ownerDocument.defaultView:null,Phe=new WeakMap;class The{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=na(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Rb(d).point)},a=(d,f)=>{const{drag:p,dragPropagation:h,onDragStart:m}=this.getProps();if(p&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Cde(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rl(v=>{let y=this.getAxisMotionValue(v).get()||0;if(lu.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const S=b.layout.layoutBox[v];S&&(y=ml(S)*(parseFloat(y)/100))}}this.originPoint[v]=y}),m&&si.postRender(()=>m(d,f)),YN(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(d,f)=>{const{dragPropagation:p,dragDirectionLock:h,onDirectionLock:m,onDrag:g}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:v}=f;if(h&&this.currentDirection===null){this.currentDirection=Dhe(v),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),g&&g(d,f)},o=(d,f)=>this.stop(d,f),l=()=>Rl(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new uq(e,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:yq(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&si.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Vx(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=xhe(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&dm(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=whe(i.layoutBox,n):this.constraints=!1,this.elastic=Che(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Rl(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Ahe(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!dm(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=khe(r,i.root,this.visualElement.getTransformPagePoint());let s=She(i.layout.layoutBox,a);if(n){const o=n(jhe(s));this.hasMutatedConstraints=!!o,o&&(s=pq(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Rl(d=>{if(!Vx(d,n,this.currentDirection))return;let f=l&&l[d]||{};s&&(f={min:0,max:0});const p=i?200:1e6,h=i?40:1e7,m={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return YN(this.visualElement,e),r.start(UT(e,r,0,n,this.visualElement,!1))}stopAnimation(){Rl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rl(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Rl(n=>{const{drag:r}=this.getProps();if(!Vx(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-Si(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!dm(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Rl(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=_he({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Rl(s=>{if(!Vx(s,e,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Si(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;Phe.set(this.visualElement,this);const e=this.visualElement.current,n=N0(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();dm(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),si.read(r);const s=Cy(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Rl(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=rE,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Vx(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Dhe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Ihe extends Pf{constructor(e){super(e),this.removeGroupControls=ll,this.removeListeners=ll,this.controls=new The(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ll}unmount(){this.removeGroupControls(),this.removeListeners()}}const zR=t=>(e,n)=>{t&&si.postRender(()=>t(e,n))};class Ohe extends Pf{constructor(){super(...arguments),this.removePointerDownListener=ll}onPointerDown(e){this.session=new uq(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yq(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:zR(e),onStart:zR(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&si.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=N0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const X1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $R(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Lv={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Cn.test(t))t=parseFloat(t);else return t;const n=$R(t,e.target.x),r=$R(t,e.target.y);return`${n}% ${r}%`}},Mhe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=wf.parse(t);if(i.length>5)return r;const a=wf.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=l;const u=Si(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class Rhe extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;ide(Lhe),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),X1.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||si.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),vT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bq(t){const[e,n]=eW(),r=I.useContext(dT);return c.jsx(Rhe,{...t,layoutGroup:r,switchLayoutGroup:I.useContext(oW),isPresent:e,safeToRemove:n})}const Lhe={borderRadius:{...Lv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lv,borderTopRightRadius:Lv,borderBottomLeftRadius:Lv,borderBottomRightRadius:Lv,boxShadow:Mhe};function Fhe(t,e,n){const r=hs(t)?t:hg(t);return r.start(UT("",r,e,n)),r.animation}function zhe(t){return t instanceof SVGElement&&t.tagName!=="svg"}const $he=(t,e)=>t.depth-e.depth;class Bhe{constructor(){this.children=[],this.isDirty=!1}add(e){TT(this.children,e),this.isDirty=!0}remove(e){DT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($he),this.isDirty=!1,this.children.forEach(e)}}function Vhe(t,e){const n=cu.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(sd(r),t(a-e))};return si.read(r,!0),()=>sd(r)}const xq=["TopLeft","TopRight","BottomLeft","BottomRight"],Uhe=xq.length,BR=t=>typeof t=="string"?parseFloat(t):t,VR=t=>typeof t=="number"||Cn.test(t);function Hhe(t,e,n,r,i,a){i?(t.opacity=Si(0,n.opacity!==void 0?n.opacity:1,Whe(r)),t.opacityExit=Si(e.opacity!==void 0?e.opacity:1,0,qhe(r))):a&&(t.opacity=Si(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<Uhe;s++){const o=`border${xq[s]}Radius`;let l=UR(e,o),u=UR(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||VR(l)===VR(u)?(t[o]=Math.max(Si(BR(l),BR(u),r),0),(lu.test(u)||lu.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Si(e.rotate||0,n.rotate||0,r))}function UR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Whe=wq(0,.5,LW),qhe=wq(.5,.95,ll);function wq(t,e,n){return r=>r<t?0:r>e?1:n(dg(t,e,r))}function HR(t,e){t.min=e.min,t.max=e.max}function Dl(t,e){HR(t.x,e.x),HR(t.y,e.y)}function WR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function qR(t,e,n,r,i){return t-=e,t=rw(t,1/n,r),i!==void 0&&(t=rw(t,1/i,r)),t}function Khe(t,e=0,n=1,r=.5,i,a=t,s=t){if(lu.test(e)&&(e=parseFloat(e),e=Si(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Si(a.min,a.max,r);t===a&&(o-=e),t.min=qR(t.min,e,n,o,i),t.max=qR(t.max,e,n,o,i)}function KR(t,e,[n,r,i],a,s){Khe(t,e[n],e[r],e[i],e.scale,a,s)}const Ghe=["x","scaleX","originX"],Yhe=["y","scaleY","originY"];function GR(t,e,n,r){KR(t.x,e,Ghe,n?n.x:void 0,r?r.x:void 0),KR(t.y,e,Yhe,n?n.y:void 0,r?r.y:void 0)}function YR(t){return t.translate===0&&t.scale===1}function Sq(t){return YR(t.x)&&YR(t.y)}function XR(t,e){return t.min===e.min&&t.max===e.max}function Xhe(t,e){return XR(t.x,e.x)&&XR(t.y,e.y)}function QR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function _q(t,e){return QR(t.x,e.x)&&QR(t.y,e.y)}function ZR(t){return ml(t.x)/ml(t.y)}function JR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Qhe{constructor(){this.members=[]}add(e){TT(this.members,e),e.scheduleRender()}remove(e){if(DT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zhe(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:p,skewX:h,skewY:m}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),h&&(r+=`skewX(${h}deg) `),m&&(r+=`skewY(${m}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const ih={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},l0=typeof window<"u"&&window.MotionDebug!==void 0,VA=["","X","Y","Z"],Jhe={visibility:"hidden"},eL=1e3;let epe=0;function UA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Aq(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=PW(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",si,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Aq(r)}function Cq({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=epe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,l0&&(ih.totalNodes=ih.resolvedTargetDeltas=ih.recalculatedProjection=0),this.nodes.forEach(rpe),this.nodes.forEach(lpe),this.nodes.forEach(cpe),this.nodes.forEach(ipe),l0&&window.MotionDebug.record(ih)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Bhe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new IT),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=zhe(s),this.instance=s;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Vhe(p,250),X1.hasAnimatedSinceResize&&(X1.hasAnimatedSinceResize=!1,this.nodes.forEach(nL))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||ppe,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=d.getProps(),b=!this.targetLayout||!_q(this.targetLayout,m)||h,S=!p&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,S);const A={...NT(g,"layout"),onPlay:v,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else p||nL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,sd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(upe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Aq(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tL);return}this.isUpdating||this.nodes.forEach(spe),this.isUpdating=!1,this.nodes.forEach(ope),this.nodes.forEach(tpe),this.nodes.forEach(npe),this.clearAllSnapshots();const o=cu.now();us.delta=od(0,1e3/60,o-us.timestamp),us.timestamp=o,us.isProcessing=!0,IA.update.process(us),IA.preRender.process(us),IA.render.process(us),us.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,vT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ape),this.sharedNodes.forEach(dpe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,si.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){si.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=na(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Sq(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&(o||rh(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),mpe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return na();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(gpe))){const{scroll:d}=this.root;d&&(pm(l.x,d.offset.x),pm(l.y,d.offset.y))}return l}removeElementScroll(s){var o;const l=na();if(Dl(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:p}=d;d!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Dl(l,s),pm(l.x,f.offset.x),pm(l.y,f.offset.y))}return l}applyTransform(s,o=!1){const l=na();Dl(l,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&mm(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),rh(d.latestValues)&&mm(l,d.latestValues)}return rh(this.latestValues)&&mm(l,this.latestValues),l}removeTransform(s){const o=na();Dl(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!rh(u.latestValues))continue;iE(u.latestValues)&&u.updateSnapshot();const d=na(),f=u.measurePageBox();Dl(d,f),GR(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return rh(this.latestValues)&&GR(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==us.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=us.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=na(),this.relativeTargetOrigin=na(),k0(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Dl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=na(),this.targetWithTransforms=na()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bhe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dl(this.target,this.layout.layoutBox),gq(this.target,this.targetDelta)):Dl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=na(),this.relativeTargetOrigin=na(),k0(this.relativeTargetOrigin,this.target,h.target),Dl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}l0&&ih.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||iE(this.parent.latestValues)||mq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===us.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Dl(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,h=this.treeScale.y;Ehe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=na());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(WR(this.prevProjectionDelta.x,this.projectionDelta.x),WR(this.prevProjectionDelta.y,this.projectionDelta.y)),E0(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==h||!JR(this.projectionDelta.x,this.prevProjectionDelta.x)||!JR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),l0&&ih.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hm(),this.projectionDelta=hm(),this.projectionDeltaWithTransform=hm()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},f=hm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const p=na(),h=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=h!==m,v=this.getStack(),y=!v||v.members.length<=1,b=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(hpe));this.animationProgress=0;let S;this.mixTargetDelta=A=>{const C=A/1e3;rL(f.x,s.x,C),rL(f.y,s.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(k0(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fpe(this.relativeTarget,this.relativeTargetOrigin,p,C),S&&Xhe(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=na()),Dl(S,this.relativeTarget)),g&&(this.animationValues=d,Hhe(d,u,this.latestValues,C,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(sd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=si.update(()=>{X1.hasAnimatedSinceResize=!0,this.currentAnimation=Fhe(0,eL,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(eL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&jq(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||na();const f=ml(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const p=ml(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+p}Dl(o,l),mm(o,d),E0(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Qhe),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&UA("z",s,u,this.animationValues);for(let d=0;d<VA.length;d++)UA(`rotate${VA[d]}`,s,u,this.animationValues),UA(`skew${VA[d]}`,s,u,this.animationValues);s.render();for(const d in u)s.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Jhe;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=G1(s==null?void 0:s.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=G1(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!rh(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Zhe(this.projectionDeltaWithTransform,this.treeScale,p),d&&(u.transform=d(p,u.transform));const{x:h,y:m}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(o=p.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const g in Z2){if(p[g]===void 0)continue;const{correct:v,applyTo:y}=Z2[g],b=u.transform==="none"?p[g]:v(p[g],f);if(y){const S=y.length;for(let A=0;A<S;A++)u[y[A]]=b}else u[g]=b}return this.options.layoutId&&(u.pointerEvents=f===this?G1(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(tL),this.root.sharedNodes.clear()}}}function tpe(t){t.updateLayout()}function npe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,s=n.source!==t.layout.source;a==="size"?Rl(f=>{const p=s?n.measuredBox[f]:n.layoutBox[f],h=ml(p);p.min=r[f].min,p.max=p.min+h}):jq(a,n.layoutBox,r)&&Rl(f=>{const p=s?n.measuredBox[f]:n.layoutBox[f],h=ml(r[f]);p.max=p.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+h)});const o=hm();E0(o,r,n.layoutBox);const l=hm();s?E0(l,t.applyTransform(i,!0),n.measuredBox):E0(l,r,n.layoutBox);const u=!Sq(o);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:h}=f;if(p&&h){const m=na();k0(m,n.layoutBox,p.layoutBox);const g=na();k0(g,r,h.layoutBox),_q(m,g)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=m,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function rpe(t){l0&&ih.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ipe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ape(t){t.clearSnapshot()}function tL(t){t.clearMeasurements()}function spe(t){t.isLayoutDirty=!1}function ope(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function nL(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function lpe(t){t.resolveTargetDelta()}function cpe(t){t.calcProjection()}function upe(t){t.resetSkewAndRotation()}function dpe(t){t.removeLeadSnapshot()}function rL(t,e,n){t.translate=Si(e.translate,0,n),t.scale=Si(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function iL(t,e,n,r){t.min=Si(e.min,n.min,r),t.max=Si(e.max,n.max,r)}function fpe(t,e,n,r){iL(t.x,e.x,n.x,r),iL(t.y,e.y,n.y,r)}function hpe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ppe={duration:.45,ease:[.4,0,.1,1]},aL=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),sL=aL("applewebkit/")&&!aL("chrome/")?Math.round:ll;function oL(t){t.min=sL(t.min),t.max=sL(t.max)}function mpe(t){oL(t.x),oL(t.y)}function jq(t,e,n){return t==="position"||t==="preserve-aspect"&&!yhe(ZR(e),ZR(n),.2)}function gpe(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const vpe=Cq({attachResizeListener:(t,e)=>Cy(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),HA={current:void 0},Nq=Cq({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!HA.current){const t=new vpe({});t.mount(window),t.setOptions({layoutScroll:!0}),HA.current=t}return HA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ype={pan:{Feature:Ohe},drag:{Feature:Ihe,ProjectionNode:Nq,MeasureLayout:bq}};function lL(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&si.postRender(()=>a(e,Rb(e)))}class bpe extends Pf{mount(){const{current:e}=this.node;e&&(this.unmount=xde(e,n=>(lL(this.node,n,"Start"),r=>lL(this.node,r,"End"))))}unmount(){}}class xpe extends Pf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mb(Cy(this.node.current,"focus",()=>this.onFocus()),Cy(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function cL(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&si.postRender(()=>a(e,Rb(e)))}class wpe extends Pf{mount(){const{current:e}=this.node;e&&(this.unmount=Ade(e,n=>(cL(this.node,n,"Start"),(r,{success:i})=>cL(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const sE=new WeakMap,WA=new WeakMap,Spe=t=>{const e=sE.get(t.target);e&&e(t)},_pe=t=>{t.forEach(Spe)};function Ape({root:t,...e}){const n=t||document;WA.has(n)||WA.set(n,{});const r=WA.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(_pe,{root:t,...e})),r[i]}function Cpe(t,e,n){const r=Ape(e);return sE.set(t,n),r.observe(t),()=>{sE.delete(t),r.unobserve(t)}}const jpe={some:0,all:1};class Npe extends Pf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:jpe[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=u?d:f;p&&p(l)};return Cpe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Epe(e,n))&&this.startObserver()}unmount(){}}function Epe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const kpe={inView:{Feature:Npe},tap:{Feature:wpe},focus:{Feature:xpe},hover:{Feature:bpe}},Ppe={layout:{ProjectionNode:Nq,MeasureLayout:bq}},oE={current:null},Eq={current:!1};function Tpe(){if(Eq.current=!0,!!fT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>oE.current=t.matches;t.addListener(e),e()}else oE.current=!1}const Dpe=[...QW,Ls,wf],Ipe=t=>Dpe.find(XW(t)),uL=new WeakMap;function Ope(t,e,n){for(const r in e){const i=e[r],a=n[r];if(hs(i))t.addValue(r,i);else if(hs(a))t.addValue(r,hg(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,hg(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const dL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Mpe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$T,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=cu.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,si.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:d}=s;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=wS(n),this.isVariantNode=aW(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in p){const m=p[h];l[h]!==void 0&&hs(m)&&m.set(l[h],!1)}}mount(e){this.current=e,uL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Eq.current||Tpe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){uL.delete(this.current),this.projection&&this.projection.unmount(),sd(this.notifyUpdate),sd(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=gp.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&si.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in fg){const n=fg[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):na()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dL.length;r++){const i=dL[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Ope(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=hg(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(GW(i)||zW(i))?i=parseFloat(i):!Ipe(i)&&wf.test(n)&&(i=WW(e,n)),this.setBaseTarget(e,hs(i)?i.get():i)),hs(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=bT(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!hs(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new IT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class kq extends Mpe{constructor(){super(...arguments),this.KeyframeResolver=ZW}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hs(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Rpe(t){return window.getComputedStyle(t)}class Lpe extends kq{constructor(){super(...arguments),this.type="html",this.renderInstance=pW}readValueFromInstance(e,n){if(gp.has(n)){const r=zT(n);return r&&r.default||0}else{const r=Rpe(e),i=(dW(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return vq(e,n)}build(e,n,r){ST(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return jT(e,n,r)}}class Fpe extends kq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=na}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(gp.has(n)){const r=zT(n);return r&&r.default||0}return n=mW.has(n)?n:gT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return yW(e,n,r)}build(e,n,r){_T(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){gW(e,n,r,i)}mount(e){this.isSVGTag=CT(e.tagName),super.mount(e)}}const zpe=(t,e)=>yT(t)?new Fpe(e):new Lpe(e,{allowProjection:t!==I.Fragment}),$pe=hde({...che,...kpe,...ype,...Ppe},zpe),Ui=Eue($pe);function Pq(t){const e=gd(()=>hg(t)),{isStatic:n}=I.useContext(vS);if(n){const[,r]=I.useState(t);I.useEffect(()=>e.on("change",r),[])}return e}function Tq(t,e){const n=Pq(e()),r=()=>n.set(e());return r(),yS(()=>{const i=()=>si.preRender(r,!1,!0),a=t.map(s=>s.on("change",i));return()=>{a.forEach(s=>s()),sd(r)}}),n}const Bpe=t=>t&&typeof t=="object"&&t.mix,Vpe=t=>Bpe(t)?t.mix:void 0;function Upe(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],a=t[2+n],s=t[3+n],o=aq(i,a,{mixer:Vpe(a[0]),...s});return e?o(r):o}function Hpe(t){C0.current=[],t();const e=Tq(C0.current,t);return C0.current=void 0,e}function Wpe(t,e,n,r){if(typeof t=="function")return Hpe(t);const i=typeof e=="function"?e:Upe(e,n,r);return Array.isArray(t)?fL(t,i):fL([t],([a])=>i(a))}function fL(t,e){const n=gd(()=>[]);return Tq(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function qpe(t){t.values.forEach(e=>e.stop())}function lE(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&OT(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{lE(a,e)})})}function Kpe(t,e){if(Array.isArray(e))return lE(t,e);if(typeof e=="string")return lE(t,[e]);OT(t,e)}function Gpe(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(lq(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{Kpe(r,n)})},stop(){t.forEach(n=>{qpe(n)})},mount(){return()=>{e.stop()}}};return e}function Ype(){const t=gd(Gpe);return yS(t.mount,[]),t}const vp=Ype;class Xpe{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}}const Qpe=()=>new Xpe;function HT(){return gd(Qpe)}const Dq=I.createContext(null);function Zpe(t,e,n,r){if(!r)return t;const i=t.findIndex(d=>d.value===e);if(i===-1)return t;const a=r>0?1:-1,s=t[i+a];if(!s)return t;const o=t[i],l=s.layout,u=Si(l.min,l.max,.5);return a===1&&o.layout.max+n>u||a===-1&&o.layout.min+n<u?Nde(t,i,i+a):t}function Jpe({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...a},s){const o=gd(()=>Ui[e]),l=[],u=I.useRef(!1),d={axis:n,registerItem:(f,p)=>{const h=l.findIndex(m=>f===m.value);h!==-1?l[h].layout=p[n]:l.push({value:f,layout:p[n]}),l.sort(tme)},updateOrder:(f,p,h)=>{if(u.current)return;const m=Zpe(l,f,p,h);l!==m&&(u.current=!0,r(m.map(eme).filter(g=>i.indexOf(g)!==-1)))}};return I.useEffect(()=>{u.current=!1}),c.jsx(o,{...a,ref:s,ignoreStrict:!0,children:c.jsx(Dq.Provider,{value:d,children:t})})}const WT=I.forwardRef(Jpe);function eme(t){return t.value}function tme(t,e){return t.layout.min-e.layout.min}function hL(t,e=0){return hs(t)?t:Pq(e)}function nme({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:a=!0,...s},o){const l=gd(()=>Ui[r]),u=I.useContext(Dq),d={x:hL(e.x),y:hL(e.y)},f=Wpe([d.x,d.y],([g,v])=>g||v?1:"unset"),{axis:p,registerItem:h,updateOrder:m}=u;return c.jsx(l,{drag:p,...s,dragSnapToOrigin:!0,style:{...e,x:d.x,y:d.y,zIndex:f},layout:a,onDrag:(g,v)=>{const{velocity:y}=v;y[p]&&m(n,d[p].get(),y[p]),i&&i(g,v)},onLayoutMeasure:g=>h(n,g),ref:o,ignoreStrict:!0,children:t})}const qT=I.forwardRef(nme),mu=({isOpen:t,onClose:e,title:n,actions:r})=>t?c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-end sm:items-center z-50 animate-fade-in",onClick:e,children:c.jsxs("div",{className:"w-full max-w-sm bg-ios-modal-bg rounded-t-2xl sm:rounded-2xl shadow-2xl text-white animate-slide-up",onClick:i=>i.stopPropagation(),children:[c.jsx("div",{className:"p-2",children:c.jsx("header",{className:"text-center p-2 rounded-lg bg-zinc-800/50",children:c.jsx("h2",{className:"text-sm font-semibold text-brand-light-gray",children:n})})}),c.jsx("div",{className:"p-2",children:c.jsx("div",{className:"bg-zinc-800/50 rounded-lg",children:r.map((i,a)=>c.jsxs("button",{onClick:()=>{i.onClick(),e()},className:`w-full flex items-center p-3 text-left transition-colors hover:bg-white/10 ${i.color||"text-brand-blue"} ${a>0?"border-t border-zinc-700/80":""}`,children:[c.jsx(i.icon,{size:22,className:"mr-4"}),c.jsx("span",{className:"text-lg font-medium text-white",children:i.label})]},a))})}),c.jsxs("div",{className:"p-2 mt-1",children:[c.jsx("button",{onClick:e,className:"w-full bg-zinc-700 p-3 text-lg font-bold text-white rounded-xl hover:bg-zinc-600 transition-colors",children:"Cancelar"}),"S           "]})]})}):null,rme=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?c.jsxs(cn,{isOpen:t,onClose:e,title:r,children:[" ",c.jsxs("div",{className:"space-y-6",children:[" ",c.jsx("p",{className:"text-zinc-300",children:i})," ",c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})," "]})," "]}):null,ime=({lotName:t,count:e,subLotsCount:n,dragControls:r,isSubLot:i})=>c.jsxs("div",{className:"w-full p-4 flex items-center",children:[!i&&c.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:a=>r.start(a),children:c.jsx(iT,{className:"text-zinc-500"})}),i&&c.jsx("div",{className:"w-4 flex-shrink-0"}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[t,n>0&&c.jsx("span",{title:`${n} sub-lotes`,className:"bg-zinc-700/80 p-1 rounded-full",children:c.jsx(BH,{size:12,className:"text-zinc-400"})})]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[c.jsx("span",{className:"font-semibold text-brand-orange",children:e})," ",e===1?"animal":"animales",n>0?" (directos)":""]})]})]}),pL=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i,isSubLot:a=!1})=>{var p,h;const s=vp(),o=I.useRef(!1),l=t.count>0||(((p=t.subLots)==null?void 0:p.length)||0)>0,u=t.name!=="Sin Asignar",f={drag:"x",dragConstraints:{left:-((l?80:0)+(u?80:0)),right:0},dragElastic:.1,onPanStart:()=>{o.current=!0},onPanEnd:()=>{setTimeout(()=>{o.current=!1},50)},onTap:()=>{o.current||r()},animate:s,transition:{type:"spring",stiffness:400,damping:40}};return c.jsxs("div",{className:`relative w-full overflow-hidden ${a?"rounded-lg":"rounded-2xl"} bg-brand-glass border border-brand-border`,children:[c.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[l&&c.jsxs("button",{onClick:e,onPointerDown:m=>m.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-orange text-white",children:[c.jsx(kf,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),u&&c.jsxs("button",{onClick:n,onPointerDown:m=>m.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[c.jsx(Yl,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Borrar"})]})]}),c.jsx(Ui.div,{...f,dragListener:!a&&i?!1:void 0,className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:c.jsx(ime,{lotName:t.name,count:t.count,subLotsCount:((h=t.subLots)==null?void 0:h.length)||0,dragControls:i,isSubLot:a})})]})},ame=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=HT();return c.jsxs(qT,{value:t,dragListener:!1,dragControls:i,className:"space-y-1",children:[c.jsx(pL,{lot:t,dragControls:i,onClick:()=>e({name:"lot-detail",lotName:t.name}),onEdit:()=>n(t),onDelete:()=>r(t),isSubLot:!1}),t.subLots&&t.subLots.length>0&&c.jsx("div",{className:"pl-6 space-y-1",children:t.subLots.map(a=>c.jsx(pL,{lot:a,onClick:()=>e({name:"lot-detail",lotName:a.name}),onEdit:()=>n(a),onDelete:()=>r(a),isSubLot:!0},a.id))})]},t.id)};function sme({navigateTo:t}){const{animals:e,lots:n,deleteLot:r}=Xt(),[i,a]=I.useState(!1),[s,o]=I.useState(null),[l,u]=I.useState(null),d=I.useMemo(()=>{const g=new Map;n.forEach(A=>g.set(A.name,0)),(e||[]).forEach(A=>{const C=A.location||"Sin Asignar";g.set(C,(g.get(C)||0)+1)});const v=n.map(A=>({id:A.id,name:A.name,count:g.get(A.name)||0,parentLotId:A.parentLotId})),y=new Map;v.forEach(A=>{A.parentLotId&&(y.has(A.parentLotId)||y.set(A.parentLotId,[]),y.get(A.parentLotId).push(A))});const b=v.filter(A=>!A.parentLotId).map(A=>({...A,subLots:y.get(A.id)||[]})),S=g.get("Sin Asignar")||0;return(S>0||b.length===0&&S>0)&&b.push({id:"unassigned",name:"Sin Asignar",count:S,parentLotId:void 0,subLots:[]}),b.sort((A,C)=>A.name.localeCompare(C.name))},[e,n]),[f,p]=I.useState(d);I.useEffect(()=>{p(d)},[d]);const h=[{label:"Mover Animales",icon:oT,onClick:()=>t({name:"lot-detail",lotName:(s==null?void 0:s.name)||""})}],m=()=>{l&&(r(l.id),u(null))};return f.length===0?c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[c.jsx(JH,{size:32,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-500 font-semibold",children:"No hay lotes físicos creados."}),c.jsx("p",{className:"text-xs text-zinc-600",children:"Usa el botón '+' para empezar a organizar tu rebaño."})]}):c.jsxs(c.Fragment,{children:[c.jsx(WT,{as:"div",axis:"y",values:f,onReorder:p,className:"space-y-3",children:f.map(g=>c.jsx(ame,{lot:g,navigateTo:t,onEdit:v=>{o(v),a(!0)},onDelete:v=>u(v)},g.id))}),c.jsx(mu,{isOpen:i,onClose:()=>a(!1),title:`Acciones para "${s==null?void 0:s.name}"`,actions:h}),c.jsx(rme,{isOpen:!!l,onClose:()=>u(null),onConfirm:m,title:"Eliminar Lote",message:`¿Estás seguro de que quieres eliminar el lote "${l==null?void 0:l.name}"? Esta acción no se puede deshacer.`})]})}const ome=({onSave:t,onCancel:e,existingSeason:n})=>{const[r,i]=I.useState(""),[a,s]=I.useState(""),[o,l]=I.useState("45"),[u,d]=I.useState(!1),[f,p]=I.useState(null),[h,m]=I.useState(!1);I.useEffect(()=>{if(n){i(n.name),s(n.startDate);const v=new Date(n.startDate),y=new Date(n.endDate),b=Math.abs(y.getTime()-v.getTime()),S=Math.ceil(b/(1e3*60*60*24));l(String(S)),d(n.requiresLightTreatment)}else s(new Date().toISOString().split("T")[0])},[n]);const g=async v=>{if(v.preventDefault(),p(null),!r.trim()||!a||!o){p("Todos los campos son obligatorios.");return}m(!0);const y=new Date(a),b=new Date(y);b.setDate(y.getDate()+parseInt(o,10));const S={name:r,startDate:a,endDate:b.toISOString().split("T")[0],requiresLightTreatment:u};try{await t(S)}catch(A){p("No se pudo guardar la temporada de monta."),console.error(A),m(!1)}};return c.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre de la Temporada"}),c.jsx("input",{id:"name",type:"text",value:r,onChange:v=>i(v.target.value),placeholder:"Ej: Monta de Otoño 2025",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),c.jsx("input",{id:"startDate",type:"date",value:a,onChange:v=>s(v.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Duración (días)"}),c.jsx("input",{id:"duration",type:"number",value:o,onChange:v=>l(v.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]})]}),c.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-zinc-700 flex items-center justify-between",children:[c.jsx("label",{htmlFor:"lightTreatment",className:"text-sm font-medium text-zinc-300",children:"¿Requiere Tratamiento de Luz?"}),c.jsx("input",{id:"lightTreatment",type:"checkbox",checked:u,onChange:v=>d(v.target.checked),className:"form-checkbox h-5 w-5 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]}),f&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(mr,{size:18}),c.jsx("span",{children:f})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:h,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:h?"Guardando...":"Guardar Temporada"})]})]})},lme=({season:t,dragControls:e})=>c.jsxs("div",{className:"w-full p-4 flex items-center",children:[c.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:n=>e.start(n),children:c.jsx(iT,{className:"text-zinc-500"})}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[t.name,t.requiresLightTreatment&&c.jsx("span",{title:"Requiere Tratamiento de Luz",children:c.jsx(Kce,{size:16,className:"text-yellow-400"})})]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[new Date(t.startDate+"T00:00:00").toLocaleDateString()," - ",new Date(t.endDate+"T00:00:00").toLocaleDateString()]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${t.status==="Activo"?"bg-green-500/80 text-white":"bg-zinc-600 text-zinc-300"}`,children:t.status}),c.jsx(Wi,{className:"text-zinc-600"})]})]}),cme=({season:t,onEdit:e,onClick:n,dragControls:r})=>{const i=vp(),a=I.useRef(!1);return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:c.jsxs("button",{onClick:e,onPointerDown:s=>s.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(kf,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]})}),c.jsx(Ui.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onPanStart:()=>{a.current=!0},onPanEnd:()=>{setTimeout(()=>{a.current=!1},50)},onTap:()=>{a.current||n()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:c.jsx(lme,{season:t,dragControls:r})})]})},ume=({season:t,navigateTo:e,onEdit:n})=>{const r=HT();return c.jsx(qT,{value:t,dragListener:!1,dragControls:r,children:c.jsx(cme,{season:t,dragControls:r,onClick:()=>e({name:"breeding-season-detail",seasonId:t.id}),onEdit:()=>n(t)})},t.id)};function dme({navigateTo:t}){const{breedingSeasons:e,addBreedingSeason:n,updateBreedingSeason:r}=Xt(),[i,a]=I.useState(!1),[s,o]=I.useState(void 0),l=I.useMemo(()=>[...e].sort((h,m)=>h.status==="Activo"&&m.status!=="Activo"?-1:h.status!=="Activo"&&m.status==="Activo"?1:new Date(m.startDate).getTime()-new Date(h.startDate).getTime()),[e]),[u,d]=I.useState(l);I.useEffect(()=>{d(l)},[l]);const f=h=>{o(h),a(!0)},p=async h=>{s?await r(s.id,{...h}):await n({...h,status:"Activo"}),a(!1),o(void 0)};return u.length===0?c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[c.jsx(Tb,{size:32,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-500 font-semibold",children:"No hay temporadas de monta creadas."}),c.jsx("p",{className:"text-xs text-zinc-600",children:"Usa el botón de abajo para empezar a planificar."})]}):c.jsxs(c.Fragment,{children:[c.jsx(WT,{as:"div",axis:"y",values:u,onReorder:d,className:"space-y-3",children:u.map(h=>c.jsx(ume,{season:h,navigateTo:t,onEdit:f},h.id))}),c.jsx("div",{className:"px-4 mt-4",children:c.jsxs("button",{onClick:()=>f(),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(qi,{size:20})," Crear Nueva Temporada"]})}),c.jsx(cn,{isOpen:i,onClose:()=>{a(!1),o(void 0)},title:s?"Editar Temporada de Monta":"Crear Temporada de Monta",children:c.jsx(ome,{onSave:p,onCancel:()=>{a(!1),o(void 0)},existingSeason:s})})]})}function Iq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Iq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $n(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Iq(t))&&(r&&(r+=" "),r+=e);return r}var fme=Array.isArray,Po=fme,hme=typeof Zp=="object"&&Zp&&Zp.Object===Object&&Zp,Oq=hme,pme=Oq,mme=typeof self=="object"&&self&&self.Object===Object&&self,gme=pme||mme||Function("return this")(),xu=gme,vme=xu,yme=vme.Symbol,Lb=yme,mL=Lb,Mq=Object.prototype,bme=Mq.hasOwnProperty,xme=Mq.toString,Fv=mL?mL.toStringTag:void 0;function wme(t){var e=bme.call(t,Fv),n=t[Fv];try{t[Fv]=void 0;var r=!0}catch{}var i=xme.call(t);return r&&(e?t[Fv]=n:delete t[Fv]),i}var Sme=wme,_me=Object.prototype,Ame=_me.toString;function Cme(t){return Ame.call(t)}var jme=Cme,gL=Lb,Nme=Sme,Eme=jme,kme="[object Null]",Pme="[object Undefined]",vL=gL?gL.toStringTag:void 0;function Tme(t){return t==null?t===void 0?Pme:kme:vL&&vL in Object(t)?Nme(t):Eme(t)}var vd=Tme;function Dme(t){return t!=null&&typeof t=="object"}var yd=Dme,Ime=vd,Ome=yd,Mme="[object Symbol]";function Rme(t){return typeof t=="symbol"||Ome(t)&&Ime(t)==Mme}var iv=Rme,Lme=Po,Fme=iv,zme=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$me=/^\w*$/;function Bme(t,e){if(Lme(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Fme(t)?!0:$me.test(t)||!zme.test(t)||e!=null&&t in Object(e)}var KT=Bme;function Vme(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Tf=Vme;const av=Mr(Tf);var Ume=vd,Hme=Tf,Wme="[object AsyncFunction]",qme="[object Function]",Kme="[object GeneratorFunction]",Gme="[object Proxy]";function Yme(t){if(!Hme(t))return!1;var e=Ume(t);return e==qme||e==Kme||e==Wme||e==Gme}var GT=Yme;const jn=Mr(GT);var Xme=xu,Qme=Xme["__core-js_shared__"],Zme=Qme,qA=Zme,yL=function(){var t=/[^.]+$/.exec(qA&&qA.keys&&qA.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Jme(t){return!!yL&&yL in t}var ege=Jme,tge=Function.prototype,nge=tge.toString;function rge(t){if(t!=null){try{return nge.call(t)}catch{}try{return t+""}catch{}}return""}var Rq=rge,ige=GT,age=ege,sge=Tf,oge=Rq,lge=/[\\^$.*+?()[\]{}|]/g,cge=/^\[object .+?Constructor\]$/,uge=Function.prototype,dge=Object.prototype,fge=uge.toString,hge=dge.hasOwnProperty,pge=RegExp("^"+fge.call(hge).replace(lge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mge(t){if(!sge(t)||age(t))return!1;var e=ige(t)?pge:cge;return e.test(oge(t))}var gge=mge;function vge(t,e){return t==null?void 0:t[e]}var yge=vge,bge=gge,xge=yge;function wge(t,e){var n=xge(t,e);return bge(n)?n:void 0}var yp=wge,Sge=yp,_ge=Sge(Object,"create"),AS=_ge,bL=AS;function Age(){this.__data__=bL?bL(null):{},this.size=0}var Cge=Age;function jge(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Nge=jge,Ege=AS,kge="__lodash_hash_undefined__",Pge=Object.prototype,Tge=Pge.hasOwnProperty;function Dge(t){var e=this.__data__;if(Ege){var n=e[t];return n===kge?void 0:n}return Tge.call(e,t)?e[t]:void 0}var Ige=Dge,Oge=AS,Mge=Object.prototype,Rge=Mge.hasOwnProperty;function Lge(t){var e=this.__data__;return Oge?e[t]!==void 0:Rge.call(e,t)}var Fge=Lge,zge=AS,$ge="__lodash_hash_undefined__";function Bge(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=zge&&e===void 0?$ge:e,this}var Vge=Bge,Uge=Cge,Hge=Nge,Wge=Ige,qge=Fge,Kge=Vge;function sv(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}sv.prototype.clear=Uge;sv.prototype.delete=Hge;sv.prototype.get=Wge;sv.prototype.has=qge;sv.prototype.set=Kge;var Gge=sv;function Yge(){this.__data__=[],this.size=0}var Xge=Yge;function Qge(t,e){return t===e||t!==t&&e!==e}var YT=Qge,Zge=YT;function Jge(t,e){for(var n=t.length;n--;)if(Zge(t[n][0],e))return n;return-1}var CS=Jge,eve=CS,tve=Array.prototype,nve=tve.splice;function rve(t){var e=this.__data__,n=eve(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():nve.call(e,n,1),--this.size,!0}var ive=rve,ave=CS;function sve(t){var e=this.__data__,n=ave(e,t);return n<0?void 0:e[n][1]}var ove=sve,lve=CS;function cve(t){return lve(this.__data__,t)>-1}var uve=cve,dve=CS;function fve(t,e){var n=this.__data__,r=dve(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var hve=fve,pve=Xge,mve=ive,gve=ove,vve=uve,yve=hve;function ov(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ov.prototype.clear=pve;ov.prototype.delete=mve;ov.prototype.get=gve;ov.prototype.has=vve;ov.prototype.set=yve;var jS=ov,bve=yp,xve=xu,wve=bve(xve,"Map"),XT=wve,xL=Gge,Sve=jS,_ve=XT;function Ave(){this.size=0,this.__data__={hash:new xL,map:new(_ve||Sve),string:new xL}}var Cve=Ave;function jve(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Nve=jve,Eve=Nve;function kve(t,e){var n=t.__data__;return Eve(e)?n[typeof e=="string"?"string":"hash"]:n.map}var NS=kve,Pve=NS;function Tve(t){var e=Pve(this,t).delete(t);return this.size-=e?1:0,e}var Dve=Tve,Ive=NS;function Ove(t){return Ive(this,t).get(t)}var Mve=Ove,Rve=NS;function Lve(t){return Rve(this,t).has(t)}var Fve=Lve,zve=NS;function $ve(t,e){var n=zve(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Bve=$ve,Vve=Cve,Uve=Dve,Hve=Mve,Wve=Fve,qve=Bve;function lv(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}lv.prototype.clear=Vve;lv.prototype.delete=Uve;lv.prototype.get=Hve;lv.prototype.has=Wve;lv.prototype.set=qve;var QT=lv,Lq=QT,Kve="Expected a function";function ZT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Kve);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(ZT.Cache||Lq),n}ZT.Cache=Lq;var Fq=ZT;const Gve=Mr(Fq);var Yve=Fq,Xve=500;function Qve(t){var e=Yve(t,function(r){return n.size===Xve&&n.clear(),r}),n=e.cache;return e}var Zve=Qve,Jve=Zve,e0e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t0e=/\\(\\)?/g,n0e=Jve(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(e0e,function(n,r,i,a){e.push(i?a.replace(t0e,"$1"):r||n)}),e}),r0e=n0e;function i0e(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var JT=i0e,wL=Lb,a0e=JT,s0e=Po,o0e=iv,SL=wL?wL.prototype:void 0,_L=SL?SL.toString:void 0;function zq(t){if(typeof t=="string")return t;if(s0e(t))return a0e(t,zq)+"";if(o0e(t))return _L?_L.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var l0e=zq,c0e=l0e;function u0e(t){return t==null?"":c0e(t)}var $q=u0e,d0e=Po,f0e=KT,h0e=r0e,p0e=$q;function m0e(t,e){return d0e(t)?t:f0e(t,e)?[t]:h0e(p0e(t))}var Bq=m0e,g0e=iv;function v0e(t){if(typeof t=="string"||g0e(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var ES=v0e,y0e=Bq,b0e=ES;function x0e(t,e){e=y0e(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[b0e(e[n++])];return n&&n==r?t:void 0}var e3=x0e,w0e=e3;function S0e(t,e,n){var r=t==null?void 0:w0e(t,e);return r===void 0?n:r}var Vq=S0e;const cl=Mr(Vq);function _0e(t){return t==null}var A0e=_0e;const In=Mr(A0e);var C0e=vd,j0e=Po,N0e=yd,E0e="[object String]";function k0e(t){return typeof t=="string"||!j0e(t)&&N0e(t)&&C0e(t)==E0e}var P0e=k0e;const Yh=Mr(P0e);var Uq={exports:{}},Hr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t3=Symbol.for("react.element"),n3=Symbol.for("react.portal"),kS=Symbol.for("react.fragment"),PS=Symbol.for("react.strict_mode"),TS=Symbol.for("react.profiler"),DS=Symbol.for("react.provider"),IS=Symbol.for("react.context"),T0e=Symbol.for("react.server_context"),OS=Symbol.for("react.forward_ref"),MS=Symbol.for("react.suspense"),RS=Symbol.for("react.suspense_list"),LS=Symbol.for("react.memo"),FS=Symbol.for("react.lazy"),D0e=Symbol.for("react.offscreen"),Hq;Hq=Symbol.for("react.module.reference");function Ql(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case t3:switch(t=t.type,t){case kS:case TS:case PS:case MS:case RS:return t;default:switch(t=t&&t.$$typeof,t){case T0e:case IS:case OS:case FS:case LS:case DS:return t;default:return e}}case n3:return e}}}Hr.ContextConsumer=IS;Hr.ContextProvider=DS;Hr.Element=t3;Hr.ForwardRef=OS;Hr.Fragment=kS;Hr.Lazy=FS;Hr.Memo=LS;Hr.Portal=n3;Hr.Profiler=TS;Hr.StrictMode=PS;Hr.Suspense=MS;Hr.SuspenseList=RS;Hr.isAsyncMode=function(){return!1};Hr.isConcurrentMode=function(){return!1};Hr.isContextConsumer=function(t){return Ql(t)===IS};Hr.isContextProvider=function(t){return Ql(t)===DS};Hr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===t3};Hr.isForwardRef=function(t){return Ql(t)===OS};Hr.isFragment=function(t){return Ql(t)===kS};Hr.isLazy=function(t){return Ql(t)===FS};Hr.isMemo=function(t){return Ql(t)===LS};Hr.isPortal=function(t){return Ql(t)===n3};Hr.isProfiler=function(t){return Ql(t)===TS};Hr.isStrictMode=function(t){return Ql(t)===PS};Hr.isSuspense=function(t){return Ql(t)===MS};Hr.isSuspenseList=function(t){return Ql(t)===RS};Hr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===kS||t===TS||t===PS||t===MS||t===RS||t===D0e||typeof t=="object"&&t!==null&&(t.$$typeof===FS||t.$$typeof===LS||t.$$typeof===DS||t.$$typeof===IS||t.$$typeof===OS||t.$$typeof===Hq||t.getModuleId!==void 0)};Hr.typeOf=Ql;Uq.exports=Hr;var I0e=Uq.exports,O0e=vd,M0e=yd,R0e="[object Number]";function L0e(t){return typeof t=="number"||M0e(t)&&O0e(t)==R0e}var Wq=L0e;const F0e=Mr(Wq);var z0e=Wq;function $0e(t){return z0e(t)&&t!=+t}var B0e=$0e;const cv=Mr(B0e);var ro=function(e){return e===0?0:e>0?1:-1},wh=function(e){return Yh(e)&&e.indexOf("%")===e.length-1},kt=function(e){return F0e(e)&&!cv(e)},V0e=function(e){return In(e)},za=function(e){return kt(e)||Yh(e)},U0e=0,bp=function(e){var n=++U0e;return"".concat(e||"").concat(n)},io=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!kt(e)&&!Yh(e))return r;var a;if(wh(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return cv(a)&&(a=r),i&&a>n&&(a=n),a},Ud=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},H0e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},La=function(e,n){return kt(e)&&kt(n)?function(r){return e+r*(n-e)}:function(){return n}};function iw(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):cl(r,e))===n})}var W0e=function(e,n){return kt(e)&&kt(n)?e-n:Yh(e)&&Yh(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Im(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function cE(t){"@babel/helpers - typeof";return cE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cE(t)}var q0e=["viewBox","children"],K0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],AL=["points","pathLength"],KA={svg:q0e,polygon:AL,polyline:AL},r3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],aw=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(I.isValidElement(e)&&(r=e.props),!av(r))return null;var i={};return Object.keys(r).forEach(function(a){r3.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},G0e=function(e,n,r){return function(i){return e(n,r,i),null}},Xh=function(e,n,r){if(!av(e)||cE(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];r3.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=G0e(s,n,r))}),i},Y0e=["children"],X0e=["children"];function CL(t,e){if(t==null)return{};var n=Q0e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Q0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uE(t){"@babel/helpers - typeof";return uE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uE(t)}var jL={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Qu=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},NL=null,GA=null,i3=function t(e){if(e===NL&&Array.isArray(GA))return GA;var n=[];return I.Children.forEach(e,function(r){In(r)||(I0e.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),GA=n,NL=e,n};function ul(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Qu(i)}):r=[Qu(e)],i3(t).forEach(function(i){var a=cl(i,"type.displayName")||cl(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function el(t,e){var n=ul(t,e);return n&&n[0]}var EL=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!kt(r)||r<=0||!kt(i)||i<=0)},Z0e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],J0e=function(e){return e&&e.type&&Yh(e.type)&&Z0e.indexOf(e.type)>=0},qq=function(e){return e&&uE(e)==="object"&&"clipDot"in e},eye=function(e,n,r,i){var a,s=(a=KA==null?void 0:KA[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!jn(e)&&(i&&s.includes(n)||K0e.includes(n))||r&&r3.includes(n)},mn=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(I.isValidElement(e)&&(i=e.props),!av(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;eye((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},dE=function t(e,n){if(e===n)return!0;var r=I.Children.count(e);if(r!==I.Children.count(n))return!1;if(r===0)return!0;if(r===1)return kL(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!kL(a,s))return!1}return!0},kL=function(e,n){if(In(e)&&In(n))return!0;if(!In(e)&&!In(n)){var r=e.props||{},i=r.children,a=CL(r,Y0e),s=n.props||{},o=s.children,l=CL(s,X0e);return i&&o?Im(a,l)&&dE(i,o):!i&&!o?Im(a,l):!1}return!1},PL=function(e,n){var r=[],i={};return i3(e).forEach(function(a,s){if(J0e(a))r.push(a);else if(a){var o=Qu(a.type),l=n[o]||{},u=l.handler,d=l.once;if(u&&(!d||!i[o])){var f=u(a,o,s);r.push(f),i[o]=!0}}}),r},tye=function(e){var n=e&&e.type;return n&&jL[n]?jL[n]:null},nye=function(e,n){return i3(n).indexOf(e)},rye=["children","width","height","viewBox","className","style","title","desc"];function fE(){return fE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fE.apply(this,arguments)}function iye(t,e){if(t==null)return{};var n=aye(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hE(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,l=t.desc,u=iye(t,rye),d=i||{width:n,height:r,x:0,y:0},f=$n("recharts-surface",a);return xe.createElement("svg",fE({},mn(u,!0,"svg"),{className:f,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),xe.createElement("title",null,o),xe.createElement("desc",null,l),e)}var sye=["children","className"];function pE(){return pE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pE.apply(this,arguments)}function oye(t,e){if(t==null)return{};var n=lye(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var rr=xe.forwardRef(function(t,e){var n=t.children,r=t.className,i=oye(t,sye),a=$n("recharts-layer",r);return xe.createElement("g",pE({className:a},mn(i,!0),{ref:e}),n)}),_c=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function cye(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var uye=cye,dye=uye;function fye(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:dye(t,e,n)}var hye=fye,pye="\\ud800-\\udfff",mye="\\u0300-\\u036f",gye="\\ufe20-\\ufe2f",vye="\\u20d0-\\u20ff",yye=mye+gye+vye,bye="\\ufe0e\\ufe0f",xye="\\u200d",wye=RegExp("["+xye+pye+yye+bye+"]");function Sye(t){return wye.test(t)}var Kq=Sye;function _ye(t){return t.split("")}var Aye=_ye,Gq="\\ud800-\\udfff",Cye="\\u0300-\\u036f",jye="\\ufe20-\\ufe2f",Nye="\\u20d0-\\u20ff",Eye=Cye+jye+Nye,kye="\\ufe0e\\ufe0f",Pye="["+Gq+"]",mE="["+Eye+"]",gE="\\ud83c[\\udffb-\\udfff]",Tye="(?:"+mE+"|"+gE+")",Yq="[^"+Gq+"]",Xq="(?:\\ud83c[\\udde6-\\uddff]){2}",Qq="[\\ud800-\\udbff][\\udc00-\\udfff]",Dye="\\u200d",Zq=Tye+"?",Jq="["+kye+"]?",Iye="(?:"+Dye+"(?:"+[Yq,Xq,Qq].join("|")+")"+Jq+Zq+")*",Oye=Jq+Zq+Iye,Mye="(?:"+[Yq+mE+"?",mE,Xq,Qq,Pye].join("|")+")",Rye=RegExp(gE+"(?="+gE+")|"+Mye+Oye,"g");function Lye(t){return t.match(Rye)||[]}var Fye=Lye,zye=Aye,$ye=Kq,Bye=Fye;function Vye(t){return $ye(t)?Bye(t):zye(t)}var Uye=Vye,Hye=hye,Wye=Kq,qye=Uye,Kye=$q;function Gye(t){return function(e){e=Kye(e);var n=Wye(e)?qye(e):void 0,r=n?n[0]:e.charAt(0),i=n?Hye(n,1).join(""):e.slice(1);return r[t]()+i}}var Yye=Gye,Xye=Yye,Qye=Xye("toUpperCase"),Zye=Qye;const zS=Mr(Zye);function ri(t){return function(){return t}}const eK=Math.cos,sw=Math.sin,Rc=Math.sqrt,ow=Math.PI,$S=2*ow,vE=Math.PI,yE=2*vE,ah=1e-6,Jye=yE-ah;function tK(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ebe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return tK;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class tbe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?tK:ebe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,u=i-n,d=s-e,f=o-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>ah)if(!(Math.abs(f*l-u*d)>ah)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-s,m=i-o,g=l*l+u*u,v=h*h+m*m,y=Math.sqrt(g),b=Math.sqrt(p),S=a*Math.tan((vE-Math.acos((g+p-v)/(2*y*b)))/2),A=S/b,C=S/y;Math.abs(A-1)>ah&&this._append`L${e+A*d},${n+A*f}`,this._append`A${a},${a},0,0,${+(f*h>d*m)},${this._x1=e+C*l},${this._y1=n+C*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,d=n+l,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ah||Math.abs(this._y1-d)>ah)&&this._append`L${u},${d}`,r&&(p<0&&(p=p%yE+yE),p>Jye?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:p>ah&&this._append`A${r},${r},0,${+(p>=vE)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function a3(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new tbe(e)}function s3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function nK(t){this._context=t}nK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function BS(t){return new nK(t)}function rK(t){return t[0]}function iK(t){return t[1]}function aK(t,e){var n=ri(!0),r=null,i=BS,a=null,s=a3(o);t=typeof t=="function"?t:t===void 0?rK:ri(t),e=typeof e=="function"?e:e===void 0?iK:ri(e);function o(l){var u,d=(l=s3(l)).length,f,p=!1,h;for(r==null&&(a=i(h=s())),u=0;u<=d;++u)!(u<d&&n(f=l[u],u,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(f,u,l),+e(f,u,l));if(h)return a=null,h+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:ri(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:ri(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ri(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}function Ux(t,e,n){var r=null,i=ri(!0),a=null,s=BS,o=null,l=a3(u);t=typeof t=="function"?t:t===void 0?rK:ri(+t),e=typeof e=="function"?e:ri(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?iK:ri(+n);function u(f){var p,h,m,g=(f=s3(f)).length,v,y=!1,b,S=new Array(g),A=new Array(g);for(a==null&&(o=s(b=l())),p=0;p<=g;++p){if(!(p<g&&i(v=f[p],p,f))===y)if(y=!y)h=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=p-1;m>=h;--m)o.point(S[m],A[m]);o.lineEnd(),o.areaEnd()}y&&(S[p]=+t(v,p,f),A[p]=+e(v,p,f),o.point(r?+r(v,p,f):S[p],n?+n(v,p,f):A[p]))}if(b)return o=null,b+""||null}function d(){return aK().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:ri(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:ri(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ri(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:ri(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:ri(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ri(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:ri(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}class sK{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function nbe(t){return new sK(t,!0)}function rbe(t){return new sK(t,!1)}const o3={draw(t,e){const n=Rc(e/ow);t.moveTo(n,0),t.arc(0,0,n,0,$S)}},ibe={draw(t,e){const n=Rc(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},oK=Rc(1/3),abe=oK*2,sbe={draw(t,e){const n=Rc(e/abe),r=n*oK;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},obe={draw(t,e){const n=Rc(e),r=-n/2;t.rect(r,r,n,n)}},lbe=.8908130915292852,lK=sw(ow/10)/sw(7*ow/10),cbe=sw($S/10)*lK,ube=-eK($S/10)*lK,dbe={draw(t,e){const n=Rc(e*lbe),r=cbe*n,i=ube*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=$S*a/5,o=eK(s),l=sw(s);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},YA=Rc(3),fbe={draw(t,e){const n=-Rc(e/(YA*3));t.moveTo(0,n*2),t.lineTo(-YA*n,-n),t.lineTo(YA*n,-n),t.closePath()}},Il=-.5,Ol=Rc(3)/2,bE=1/Rc(12),hbe=(bE/2+1)*3,pbe={draw(t,e){const n=Rc(e/hbe),r=n/2,i=n*bE,a=r,s=n*bE+n,o=-a,l=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(Il*r-Ol*i,Ol*r+Il*i),t.lineTo(Il*a-Ol*s,Ol*a+Il*s),t.lineTo(Il*o-Ol*l,Ol*o+Il*l),t.lineTo(Il*r+Ol*i,Il*i-Ol*r),t.lineTo(Il*a+Ol*s,Il*s-Ol*a),t.lineTo(Il*o+Ol*l,Il*l-Ol*o),t.closePath()}};function mbe(t,e){let n=null,r=a3(i);t=typeof t=="function"?t:ri(t||o3),e=typeof e=="function"?e:ri(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:ri(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:ri(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function lw(){}function cw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function cK(t){this._context=t}cK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gbe(t){return new cK(t)}function uK(t){this._context=t}uK.prototype={areaStart:lw,areaEnd:lw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:cw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vbe(t){return new uK(t)}function dK(t){this._context=t}dK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:cw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ybe(t){return new dK(t)}function fK(t){this._context=t}fK.prototype={areaStart:lw,areaEnd:lw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function bbe(t){return new fK(t)}function TL(t){return t<0?-1:1}function DL(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(TL(a)+TL(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function IL(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function XA(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function uw(t){this._context=t}uw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:XA(this,this._t0,IL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,XA(this,IL(this,n=DL(this,t,e)),n);break;default:XA(this,this._t0,n=DL(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function hK(t){this._context=new pK(t)}(hK.prototype=Object.create(uw.prototype)).point=function(t,e){uw.prototype.point.call(this,e,t)};function pK(t){this._context=t}pK.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function xbe(t){return new uw(t)}function wbe(t){return new hK(t)}function mK(t){this._context=t}mK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=OL(t),i=OL(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function OL(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Sbe(t){return new mK(t)}function VS(t,e){this._context=t,this._t=e}VS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function _be(t){return new VS(t,.5)}function Abe(t){return new VS(t,0)}function Cbe(t){return new VS(t,1)}function mg(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function xE(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function jbe(t,e){return t[e]}function Nbe(t){const e=[];return e.key=t,e}function Ebe(){var t=ri([]),e=xE,n=mg,r=jbe;function i(a){var s=Array.from(t.apply(this,arguments),Nbe),o,l=s.length,u=-1,d;for(const f of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+r(f,s[o].key,u,a)]).data=f;for(o=0,d=s3(e(s));o<l;++o)s[d[o]].index=o;return n(s,d),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:ri(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:ri(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?xE:typeof a=="function"?a:ri(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??mg,i):n},i}function kbe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}mg(t,e)}}function Pbe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}mg(t,e)}}function Tbe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,l=0,u=0;o<s;++o){for(var d=t[e[o]],f=d[r][1]||0,p=d[r-1][1]||0,h=(f-p)/2,m=0;m<o;++m){var g=t[e[m]],v=g[r][1]||0,y=g[r-1][1]||0;h+=v-y}l+=f,u+=h*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,mg(t,e)}}function jy(t){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(t)}var Dbe=["type","size","sizeType"];function wE(){return wE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wE.apply(this,arguments)}function ML(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(n),!0).forEach(function(r){Ibe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ML(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ibe(t,e,n){return e=Obe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Obe(t){var e=Mbe(t,"string");return jy(e)=="symbol"?e:e+""}function Mbe(t,e){if(jy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rbe(t,e){if(t==null)return{};var n=Lbe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var gK={symbolCircle:o3,symbolCross:ibe,symbolDiamond:sbe,symbolSquare:obe,symbolStar:dbe,symbolTriangle:fbe,symbolWye:pbe},Fbe=Math.PI/180,zbe=function(e){var n="symbol".concat(zS(e));return gK[n]||o3},$be=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Fbe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Bbe=function(e,n){gK["symbol".concat(zS(e))]=n},l3=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,l=Rbe(e,Dbe),u=RL(RL({},l),{},{type:r,size:a,sizeType:o}),d=function(){var v=zbe(r),y=mbe().type(v).size($be(a,o,r));return y()},f=u.className,p=u.cx,h=u.cy,m=mn(u,!0);return p===+p&&h===+h&&a===+a?xe.createElement("path",wE({},m,{className:$n("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};l3.registerSymbol=Bbe;function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}function SE(){return SE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SE.apply(this,arguments)}function LL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LL(Object(n),!0).forEach(function(r){Ny(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ube(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hbe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yK(r.key),r)}}function Wbe(t,e,n){return e&&Hbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qbe(t,e,n){return e=dw(e),Kbe(t,vK()?Reflect.construct(e,n||[],dw(t).constructor):e.apply(t,n))}function Kbe(t,e){if(e&&(gg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gbe(t)}function Gbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vK=function(){return!!t})()}function dw(t){return dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dw(t)}function Ybe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_E(t,e)}function _E(t,e){return _E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_E(t,e)}function Ny(t,e,n){return e=yK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yK(t){var e=Xbe(t,"string");return gg(e)=="symbol"?e:e+""}function Xbe(t,e){if(gg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ml=32,c3=function(t){function e(){return Ube(this,e),qbe(this,e,arguments)}return Ybe(e,t),Wbe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=Ml/2,s=Ml/6,o=Ml/3,l=r.inactive?i:r.color;if(r.type==="plainline")return xe.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Ml,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return xe.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Ml,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return xe.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ml/8,"h").concat(Ml,"v").concat(Ml*3/4,"h").concat(-Ml,"z"),className:"recharts-legend-icon"});if(xe.isValidElement(r.legendIcon)){var u=Vbe({},r);return delete u.legendIcon,xe.cloneElement(r.legendIcon,u)}return xe.createElement(l3,{fill:l,cx:a,cy:a,size:Ml,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,l=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Ml,height:Ml},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(h,m){var g=h.formatter||l,v=$n(Ny(Ny({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=jn(h.value)?null:h.value;_c(!jn(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=h.inactive?u:h.color;return xe.createElement("li",SE({className:v,style:f,key:"legend-item-".concat(m)},Xh(r.props,h,m)),xe.createElement(hE,{width:s,height:s,viewBox:d,style:p},r.renderIcon(h)),xe.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g?g(y,h,m):y))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return xe.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(I.PureComponent);Ny(c3,"displayName","Legend");Ny(c3,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Qbe=jS;function Zbe(){this.__data__=new Qbe,this.size=0}var Jbe=Zbe;function exe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var txe=exe;function nxe(t){return this.__data__.get(t)}var rxe=nxe;function ixe(t){return this.__data__.has(t)}var axe=ixe,sxe=jS,oxe=XT,lxe=QT,cxe=200;function uxe(t,e){var n=this.__data__;if(n instanceof sxe){var r=n.__data__;if(!oxe||r.length<cxe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new lxe(r)}return n.set(t,e),this.size=n.size,this}var dxe=uxe,fxe=jS,hxe=Jbe,pxe=txe,mxe=rxe,gxe=axe,vxe=dxe;function uv(t){var e=this.__data__=new fxe(t);this.size=e.size}uv.prototype.clear=hxe;uv.prototype.delete=pxe;uv.prototype.get=mxe;uv.prototype.has=gxe;uv.prototype.set=vxe;var bK=uv,yxe="__lodash_hash_undefined__";function bxe(t){return this.__data__.set(t,yxe),this}var xxe=bxe;function wxe(t){return this.__data__.has(t)}var Sxe=wxe,_xe=QT,Axe=xxe,Cxe=Sxe;function fw(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new _xe;++e<n;)this.add(t[e])}fw.prototype.add=fw.prototype.push=Axe;fw.prototype.has=Cxe;var xK=fw;function jxe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var wK=jxe;function Nxe(t,e){return t.has(e)}var SK=Nxe,Exe=xK,kxe=wK,Pxe=SK,Txe=1,Dxe=2;function Ixe(t,e,n,r,i,a){var s=n&Txe,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var f=-1,p=!0,h=n&Dxe?new Exe:void 0;for(a.set(t,e),a.set(e,t);++f<o;){var m=t[f],g=e[f];if(r)var v=s?r(g,m,f,e,t,a):r(m,g,f,t,e,a);if(v!==void 0){if(v)continue;p=!1;break}if(h){if(!kxe(e,function(y,b){if(!Pxe(h,b)&&(m===y||i(m,y,n,r,a)))return h.push(b)})){p=!1;break}}else if(!(m===g||i(m,g,n,r,a))){p=!1;break}}return a.delete(t),a.delete(e),p}var _K=Ixe,Oxe=xu,Mxe=Oxe.Uint8Array,Rxe=Mxe;function Lxe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Fxe=Lxe;function zxe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var u3=zxe,FL=Lb,zL=Rxe,$xe=YT,Bxe=_K,Vxe=Fxe,Uxe=u3,Hxe=1,Wxe=2,qxe="[object Boolean]",Kxe="[object Date]",Gxe="[object Error]",Yxe="[object Map]",Xxe="[object Number]",Qxe="[object RegExp]",Zxe="[object Set]",Jxe="[object String]",e1e="[object Symbol]",t1e="[object ArrayBuffer]",n1e="[object DataView]",$L=FL?FL.prototype:void 0,QA=$L?$L.valueOf:void 0;function r1e(t,e,n,r,i,a,s){switch(n){case n1e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case t1e:return!(t.byteLength!=e.byteLength||!a(new zL(t),new zL(e)));case qxe:case Kxe:case Xxe:return $xe(+t,+e);case Gxe:return t.name==e.name&&t.message==e.message;case Qxe:case Jxe:return t==e+"";case Yxe:var o=Vxe;case Zxe:var l=r&Hxe;if(o||(o=Uxe),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;r|=Wxe,s.set(t,e);var d=Bxe(o(t),o(e),r,i,a,s);return s.delete(t),d;case e1e:if(QA)return QA.call(t)==QA.call(e)}return!1}var i1e=r1e;function a1e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var AK=a1e,s1e=AK,o1e=Po;function l1e(t,e,n){var r=e(t);return o1e(t)?r:s1e(r,n(t))}var c1e=l1e;function u1e(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}var d1e=u1e;function f1e(){return[]}var h1e=f1e,p1e=d1e,m1e=h1e,g1e=Object.prototype,v1e=g1e.propertyIsEnumerable,BL=Object.getOwnPropertySymbols,y1e=BL?function(t){return t==null?[]:(t=Object(t),p1e(BL(t),function(e){return v1e.call(t,e)}))}:m1e,b1e=y1e;function x1e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var w1e=x1e,S1e=vd,_1e=yd,A1e="[object Arguments]";function C1e(t){return _1e(t)&&S1e(t)==A1e}var j1e=C1e,VL=j1e,N1e=yd,CK=Object.prototype,E1e=CK.hasOwnProperty,k1e=CK.propertyIsEnumerable,P1e=VL(function(){return arguments}())?VL:function(t){return N1e(t)&&E1e.call(t,"callee")&&!k1e.call(t,"callee")},d3=P1e,hw={exports:{}};function T1e(){return!1}var D1e=T1e;hw.exports;(function(t,e){var n=xu,r=D1e,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;t.exports=u})(hw,hw.exports);var jK=hw.exports,I1e=9007199254740991,O1e=/^(?:0|[1-9]\d*)$/;function M1e(t,e){var n=typeof t;return e=e??I1e,!!e&&(n=="number"||n!="symbol"&&O1e.test(t))&&t>-1&&t%1==0&&t<e}var f3=M1e,R1e=9007199254740991;function L1e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=R1e}var h3=L1e,F1e=vd,z1e=h3,$1e=yd,B1e="[object Arguments]",V1e="[object Array]",U1e="[object Boolean]",H1e="[object Date]",W1e="[object Error]",q1e="[object Function]",K1e="[object Map]",G1e="[object Number]",Y1e="[object Object]",X1e="[object RegExp]",Q1e="[object Set]",Z1e="[object String]",J1e="[object WeakMap]",e2e="[object ArrayBuffer]",t2e="[object DataView]",n2e="[object Float32Array]",r2e="[object Float64Array]",i2e="[object Int8Array]",a2e="[object Int16Array]",s2e="[object Int32Array]",o2e="[object Uint8Array]",l2e="[object Uint8ClampedArray]",c2e="[object Uint16Array]",u2e="[object Uint32Array]",pi={};pi[n2e]=pi[r2e]=pi[i2e]=pi[a2e]=pi[s2e]=pi[o2e]=pi[l2e]=pi[c2e]=pi[u2e]=!0;pi[B1e]=pi[V1e]=pi[e2e]=pi[U1e]=pi[t2e]=pi[H1e]=pi[W1e]=pi[q1e]=pi[K1e]=pi[G1e]=pi[Y1e]=pi[X1e]=pi[Q1e]=pi[Z1e]=pi[J1e]=!1;function d2e(t){return $1e(t)&&z1e(t.length)&&!!pi[F1e(t)]}var f2e=d2e;function h2e(t){return function(e){return t(e)}}var NK=h2e,pw={exports:{}};pw.exports;(function(t,e){var n=Oq,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o})(pw,pw.exports);var p2e=pw.exports,m2e=f2e,g2e=NK,UL=p2e,HL=UL&&UL.isTypedArray,v2e=HL?g2e(HL):m2e,EK=v2e,y2e=w1e,b2e=d3,x2e=Po,w2e=jK,S2e=f3,_2e=EK,A2e=Object.prototype,C2e=A2e.hasOwnProperty;function j2e(t,e){var n=x2e(t),r=!n&&b2e(t),i=!n&&!r&&w2e(t),a=!n&&!r&&!i&&_2e(t),s=n||r||i||a,o=s?y2e(t.length,String):[],l=o.length;for(var u in t)(e||C2e.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||S2e(u,l)))&&o.push(u);return o}var N2e=j2e,E2e=Object.prototype;function k2e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||E2e;return t===n}var P2e=k2e;function T2e(t,e){return function(n){return t(e(n))}}var kK=T2e,D2e=kK,I2e=D2e(Object.keys,Object),O2e=I2e,M2e=P2e,R2e=O2e,L2e=Object.prototype,F2e=L2e.hasOwnProperty;function z2e(t){if(!M2e(t))return R2e(t);var e=[];for(var n in Object(t))F2e.call(t,n)&&n!="constructor"&&e.push(n);return e}var $2e=z2e,B2e=GT,V2e=h3;function U2e(t){return t!=null&&V2e(t.length)&&!B2e(t)}var Fb=U2e,H2e=N2e,W2e=$2e,q2e=Fb;function K2e(t){return q2e(t)?H2e(t):W2e(t)}var US=K2e,G2e=c1e,Y2e=b1e,X2e=US;function Q2e(t){return G2e(t,X2e,Y2e)}var Z2e=Q2e,WL=Z2e,J2e=1,ewe=Object.prototype,twe=ewe.hasOwnProperty;function nwe(t,e,n,r,i,a){var s=n&J2e,o=WL(t),l=o.length,u=WL(e),d=u.length;if(l!=d&&!s)return!1;for(var f=l;f--;){var p=o[f];if(!(s?p in e:twe.call(e,p)))return!1}var h=a.get(t),m=a.get(e);if(h&&m)return h==e&&m==t;var g=!0;a.set(t,e),a.set(e,t);for(var v=s;++f<l;){p=o[f];var y=t[p],b=e[p];if(r)var S=s?r(b,y,p,e,t,a):r(y,b,p,t,e,a);if(!(S===void 0?y===b||i(y,b,n,r,a):S)){g=!1;break}v||(v=p=="constructor")}if(g&&!v){var A=t.constructor,C=e.constructor;A!=C&&"constructor"in t&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof C=="function"&&C instanceof C)&&(g=!1)}return a.delete(t),a.delete(e),g}var rwe=nwe,iwe=yp,awe=xu,swe=iwe(awe,"DataView"),owe=swe,lwe=yp,cwe=xu,uwe=lwe(cwe,"Promise"),dwe=uwe,fwe=yp,hwe=xu,pwe=fwe(hwe,"Set"),PK=pwe,mwe=yp,gwe=xu,vwe=mwe(gwe,"WeakMap"),ywe=vwe,AE=owe,CE=XT,jE=dwe,NE=PK,EE=ywe,TK=vd,dv=Rq,qL="[object Map]",bwe="[object Object]",KL="[object Promise]",GL="[object Set]",YL="[object WeakMap]",XL="[object DataView]",xwe=dv(AE),wwe=dv(CE),Swe=dv(jE),_we=dv(NE),Awe=dv(EE),sh=TK;(AE&&sh(new AE(new ArrayBuffer(1)))!=XL||CE&&sh(new CE)!=qL||jE&&sh(jE.resolve())!=KL||NE&&sh(new NE)!=GL||EE&&sh(new EE)!=YL)&&(sh=function(t){var e=TK(t),n=e==bwe?t.constructor:void 0,r=n?dv(n):"";if(r)switch(r){case xwe:return XL;case wwe:return qL;case Swe:return KL;case _we:return GL;case Awe:return YL}return e});var Cwe=sh,ZA=bK,jwe=_K,Nwe=i1e,Ewe=rwe,QL=Cwe,ZL=Po,JL=jK,kwe=EK,Pwe=1,e6="[object Arguments]",t6="[object Array]",Hx="[object Object]",Twe=Object.prototype,n6=Twe.hasOwnProperty;function Dwe(t,e,n,r,i,a){var s=ZL(t),o=ZL(e),l=s?t6:QL(t),u=o?t6:QL(e);l=l==e6?Hx:l,u=u==e6?Hx:u;var d=l==Hx,f=u==Hx,p=l==u;if(p&&JL(t)){if(!JL(e))return!1;s=!0,d=!1}if(p&&!d)return a||(a=new ZA),s||kwe(t)?jwe(t,e,n,r,i,a):Nwe(t,e,l,n,r,i,a);if(!(n&Pwe)){var h=d&&n6.call(t,"__wrapped__"),m=f&&n6.call(e,"__wrapped__");if(h||m){var g=h?t.value():t,v=m?e.value():e;return a||(a=new ZA),i(g,v,n,r,a)}}return p?(a||(a=new ZA),Ewe(t,e,n,r,i,a)):!1}var Iwe=Dwe,Owe=Iwe,r6=yd;function DK(t,e,n,r,i){return t===e?!0:t==null||e==null||!r6(t)&&!r6(e)?t!==t&&e!==e:Owe(t,e,n,r,DK,i)}var p3=DK,Mwe=bK,Rwe=p3,Lwe=1,Fwe=2;function zwe(t,e,n,r){var i=n.length,a=i,s=!r;if(t==null)return!a;for(t=Object(t);i--;){var o=n[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=n[i];var l=o[0],u=t[l],d=o[1];if(s&&o[2]){if(u===void 0&&!(l in t))return!1}else{var f=new Mwe;if(r)var p=r(u,d,l,t,e,f);if(!(p===void 0?Rwe(d,u,Lwe|Fwe,r,f):p))return!1}}return!0}var $we=zwe,Bwe=Tf;function Vwe(t){return t===t&&!Bwe(t)}var IK=Vwe,Uwe=IK,Hwe=US;function Wwe(t){for(var e=Hwe(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Uwe(i)]}return e}var qwe=Wwe;function Kwe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var OK=Kwe,Gwe=$we,Ywe=qwe,Xwe=OK;function Qwe(t){var e=Ywe(t);return e.length==1&&e[0][2]?Xwe(e[0][0],e[0][1]):function(n){return n===t||Gwe(n,t,e)}}var Zwe=Qwe;function Jwe(t,e){return t!=null&&e in Object(t)}var e5e=Jwe,t5e=Bq,n5e=d3,r5e=Po,i5e=f3,a5e=h3,s5e=ES;function o5e(t,e,n){e=t5e(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var s=s5e(e[r]);if(!(a=t!=null&&n(t,s)))break;t=t[s]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&a5e(i)&&i5e(s,i)&&(r5e(t)||n5e(t)))}var l5e=o5e,c5e=e5e,u5e=l5e;function d5e(t,e){return t!=null&&u5e(t,e,c5e)}var f5e=d5e,h5e=p3,p5e=Vq,m5e=f5e,g5e=KT,v5e=IK,y5e=OK,b5e=ES,x5e=1,w5e=2;function S5e(t,e){return g5e(t)&&v5e(e)?y5e(b5e(t),e):function(n){var r=p5e(n,t);return r===void 0&&r===e?m5e(n,t):h5e(e,r,x5e|w5e)}}var _5e=S5e;function A5e(t){return t}var fv=A5e;function C5e(t){return function(e){return e==null?void 0:e[t]}}var j5e=C5e,N5e=e3;function E5e(t){return function(e){return N5e(e,t)}}var k5e=E5e,P5e=j5e,T5e=k5e,D5e=KT,I5e=ES;function O5e(t){return D5e(t)?P5e(I5e(t)):T5e(t)}var M5e=O5e,R5e=Zwe,L5e=_5e,F5e=fv,z5e=Po,$5e=M5e;function B5e(t){return typeof t=="function"?t:t==null?F5e:typeof t=="object"?z5e(t)?L5e(t[0],t[1]):R5e(t):$5e(t)}var wu=B5e;function V5e(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var MK=V5e;function U5e(t){return t!==t}var H5e=U5e;function W5e(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var q5e=W5e,K5e=MK,G5e=H5e,Y5e=q5e;function X5e(t,e,n){return e===e?Y5e(t,e,n):K5e(t,G5e,n)}var Q5e=X5e,Z5e=Q5e;function J5e(t,e){var n=t==null?0:t.length;return!!n&&Z5e(t,e,0)>-1}var eSe=J5e;function tSe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var nSe=tSe;function rSe(){}var iSe=rSe,JA=PK,aSe=iSe,sSe=u3,oSe=1/0,lSe=JA&&1/sSe(new JA([,-0]))[1]==oSe?function(t){return new JA(t)}:aSe,cSe=lSe,uSe=xK,dSe=eSe,fSe=nSe,hSe=SK,pSe=cSe,mSe=u3,gSe=200;function vSe(t,e,n){var r=-1,i=dSe,a=t.length,s=!0,o=[],l=o;if(n)s=!1,i=fSe;else if(a>=gSe){var u=e?null:pSe(t);if(u)return mSe(u);s=!1,i=hSe,l=new uSe}else l=e?[]:o;e:for(;++r<a;){var d=t[r],f=e?e(d):d;if(d=n||d!==0?d:0,s&&f===f){for(var p=l.length;p--;)if(l[p]===f)continue e;e&&l.push(f),o.push(d)}else i(l,f,n)||(l!==o&&l.push(f),o.push(d))}return o}var ySe=vSe,bSe=wu,xSe=ySe;function wSe(t,e){return t&&t.length?xSe(t,bSe(e)):[]}var SSe=wSe;const i6=Mr(SSe);function RK(t,e,n){return e===!0?i6(t,n):jn(e)?i6(t,e):t}function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}var _Se=["ref"];function a6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a6(Object(n),!0).forEach(function(r){HS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ASe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,FK(r.key),r)}}function CSe(t,e,n){return e&&s6(t.prototype,e),n&&s6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jSe(t,e,n){return e=mw(e),NSe(t,LK()?Reflect.construct(e,n||[],mw(t).constructor):e.apply(t,n))}function NSe(t,e){if(e&&(vg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ESe(t)}function ESe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LK=function(){return!!t})()}function mw(t){return mw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mw(t)}function kSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kE(t,e)}function kE(t,e){return kE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kE(t,e)}function HS(t,e,n){return e=FK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FK(t){var e=PSe(t,"string");return vg(e)=="symbol"?e:e+""}function PSe(t,e){if(vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function TSe(t,e){if(t==null)return{};var n=DSe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ISe(t){return t.value}function OSe(t,e){if(xe.isValidElement(t))return xe.cloneElement(t,e);if(typeof t=="function")return xe.createElement(t,e);e.ref;var n=TSe(e,_Se);return xe.createElement(c3,n)}var o6=1,Ac=function(t){function e(){var n;ASe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=jSe(this,e,[].concat(i)),HS(n,"lastBoundingBox",{width:-1,height:-1}),n}return kSe(e,t),CSe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>o6||Math.abs(i.height-this.lastBoundingBox.height)>o6)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Tu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,l=i.margin,u=i.chartWidth,d=i.chartHeight,f,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var h=this.getBBoxSnapshot();f={left:((u||0)-h.width)/2}}else f=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var m=this.getBBoxSnapshot();p={top:((d||0)-m.height)/2}}else p=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Tu(Tu({},f),p)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=Tu(Tu({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return xe.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){r.wrapperNode=h}},OSe(a,Tu(Tu({},this.props),{},{payload:RK(d,u,ISe)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Tu(Tu({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&kt(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(I.PureComponent);HS(Ac,"displayName","Legend");HS(Ac,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var l6=Lb,MSe=d3,RSe=Po,c6=l6?l6.isConcatSpreadable:void 0;function LSe(t){return RSe(t)||MSe(t)||!!(c6&&t&&t[c6])}var FSe=LSe,zSe=AK,$Se=FSe;function zK(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=$Se),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?zK(o,e-1,n,r,i):zSe(i,o):r||(i[i.length]=o)}return i}var $K=zK;function BSe(t){return function(e,n,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var l=s[t?o:++i];if(n(a[l],l,a)===!1)break}return e}}var VSe=BSe,USe=VSe,HSe=USe(),WSe=HSe,qSe=WSe,KSe=US;function GSe(t,e){return t&&qSe(t,e,KSe)}var BK=GSe,YSe=Fb;function XSe(t,e){return function(n,r){if(n==null)return n;if(!YSe(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=Object(n);(e?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var QSe=XSe,ZSe=BK,JSe=QSe,e_e=JSe(ZSe),m3=e_e,t_e=m3,n_e=Fb;function r_e(t,e){var n=-1,r=n_e(t)?Array(t.length):[];return t_e(t,function(i,a,s){r[++n]=e(i,a,s)}),r}var VK=r_e;function i_e(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var a_e=i_e,u6=iv;function s_e(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=u6(t),s=e!==void 0,o=e===null,l=e===e,u=u6(e);if(!o&&!u&&!a&&t>e||a&&s&&l&&!o&&!u||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!u&&t<e||u&&n&&i&&!r&&!a||o&&n&&i||!s&&i||!l)return-1}return 0}var o_e=s_e,l_e=o_e;function c_e(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;++r<s;){var l=l_e(i[r],a[r]);if(l){if(r>=o)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var u_e=c_e,eC=JT,d_e=e3,f_e=wu,h_e=VK,p_e=a_e,m_e=NK,g_e=u_e,v_e=fv,y_e=Po;function b_e(t,e,n){e.length?e=eC(e,function(a){return y_e(a)?function(s){return d_e(s,a.length===1?a[0]:a)}:a}):e=[v_e];var r=-1;e=eC(e,m_e(f_e));var i=h_e(t,function(a,s,o){var l=eC(e,function(u){return u(a)});return{criteria:l,index:++r,value:a}});return p_e(i,function(a,s){return g_e(a,s,n)})}var x_e=b_e;function w_e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var S_e=w_e,__e=S_e,d6=Math.max;function A_e(t,e,n){return e=d6(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=d6(r.length-e,0),s=Array(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),__e(t,this,o)}}var C_e=A_e;function j_e(t){return function(){return t}}var N_e=j_e,E_e=yp,k_e=function(){try{var t=E_e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),UK=k_e,P_e=N_e,f6=UK,T_e=fv,D_e=f6?function(t,e){return f6(t,"toString",{configurable:!0,enumerable:!1,value:P_e(e),writable:!0})}:T_e,I_e=D_e,O_e=800,M_e=16,R_e=Date.now;function L_e(t){var e=0,n=0;return function(){var r=R_e(),i=M_e-(r-n);if(n=r,i>0){if(++e>=O_e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var F_e=L_e,z_e=I_e,$_e=F_e,B_e=$_e(z_e),V_e=B_e,U_e=fv,H_e=C_e,W_e=V_e;function q_e(t,e){return W_e(H_e(t,e,U_e),t+"")}var K_e=q_e,G_e=YT,Y_e=Fb,X_e=f3,Q_e=Tf;function Z_e(t,e,n){if(!Q_e(n))return!1;var r=typeof e;return(r=="number"?Y_e(n)&&X_e(e,n.length):r=="string"&&e in n)?G_e(n[e],t):!1}var WS=Z_e,J_e=$K,eAe=x_e,tAe=K_e,h6=WS,nAe=tAe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&h6(t,e[0],e[1])?e=[]:n>2&&h6(e[0],e[1],e[2])&&(e=[e[0]]),eAe(t,J_e(e,1),[])}),rAe=nAe;const g3=Mr(rAe);function Ey(t){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}function PE(){return PE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PE.apply(this,arguments)}function iAe(t,e){return lAe(t)||oAe(t,e)||sAe(t,e)||aAe()}function aAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sAe(t,e){if(t){if(typeof t=="string")return p6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p6(t,e)}}function p6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function lAe(t){if(Array.isArray(t))return t}function m6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m6(Object(n),!0).forEach(function(r){cAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cAe(t,e,n){return e=uAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uAe(t){var e=dAe(t,"string");return Ey(e)=="symbol"?e:e+""}function dAe(t,e){if(Ey(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ey(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fAe(t){return Array.isArray(t)&&za(t[0])&&za(t[1])?t.join(" ~ "):t}var hAe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,l=e.labelStyle,u=l===void 0?{}:l,d=e.payload,f=e.formatter,p=e.itemSorter,h=e.wrapperClassName,m=e.labelClassName,g=e.label,v=e.labelFormatter,y=e.accessibilityLayer,b=y===void 0?!1:y,S=function(){if(d&&d.length){var M={padding:0,margin:0},L=(p?g3(d,p):d).map(function(V,Q){if(V.type==="none")return null;var Y=tC({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},o),J=V.formatter||f||fAe,q=V.value,ee=V.name,le=q,se=ee;if(J&&le!=null&&se!=null){var $=J(q,ee,V,Q,d);if(Array.isArray($)){var G=iAe($,2);le=G[0],se=G[1]}else le=$}return xe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Q),style:Y},za(se)?xe.createElement("span",{className:"recharts-tooltip-item-name"},se):null,za(se)?xe.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,xe.createElement("span",{className:"recharts-tooltip-item-value"},le),xe.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return xe.createElement("ul",{className:"recharts-tooltip-item-list",style:M},L)}return null},A=tC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),C=tC({margin:0},u),T=!In(g),j=T?g:"",E=$n("recharts-default-tooltip",h),k=$n("recharts-tooltip-label",m);T&&v&&d!==void 0&&d!==null&&(j=v(g,d));var O=b?{role:"status","aria-live":"assertive"}:{};return xe.createElement("div",PE({className:E,style:A},O),xe.createElement("p",{className:k,style:C},xe.isValidElement(j)?j:"".concat(j)),S())};function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function Wx(t,e,n){return e=pAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pAe(t){var e=mAe(t,"string");return ky(e)=="symbol"?e:e+""}function mAe(t,e){if(ky(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zv="recharts-tooltip-wrapper",gAe={visibility:"hidden"};function vAe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return $n(zv,Wx(Wx(Wx(Wx({},"".concat(zv,"-right"),kt(n)&&e&&kt(e.x)&&n>=e.x),"".concat(zv,"-left"),kt(n)&&e&&kt(e.x)&&n<e.x),"".concat(zv,"-bottom"),kt(r)&&e&&kt(e.y)&&r>=e.y),"".concat(zv,"-top"),kt(r)&&e&&kt(e.y)&&r<e.y))}function g6(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(a&&kt(a[r]))return a[r];var d=n[r]-o-i,f=n[r]+i;if(e[r])return s[r]?d:f;if(s[r]){var p=d,h=l[r];return p<h?Math.max(f,l[r]):Math.max(d,l[r])}var m=f+o,g=l[r]+u;return m>g?Math.max(d,l[r]):Math.max(f,l[r])}function yAe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function bAe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,u,d,f;return s.height>0&&s.width>0&&n?(d=g6({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=g6({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=yAe({translateX:d,translateY:f,useTranslate3d:o})):u=gAe,{cssProperties:u,cssClasses:vAe({translateX:d,translateY:f,coordinate:n})}}function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function v6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function y6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v6(Object(n),!0).forEach(function(r){DE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WK(r.key),r)}}function SAe(t,e,n){return e&&wAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Ae(t,e,n){return e=gw(e),AAe(t,HK()?Reflect.construct(e,n||[],gw(t).constructor):e.apply(t,n))}function AAe(t,e){if(e&&(yg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CAe(t)}function CAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HK=function(){return!!t})()}function gw(t){return gw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gw(t)}function jAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TE(t,e)}function TE(t,e){return TE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TE(t,e)}function DE(t,e,n){return e=WK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WK(t){var e=NAe(t,"string");return yg(e)=="symbol"?e:e+""}function NAe(t,e){if(yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var b6=1,EAe=function(t){function e(){var n;xAe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=_Ae(this,e,[].concat(i)),DE(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),DE(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return jAe(e,t),SAe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>b6||Math.abs(r.height-this.state.lastBoundingBox.height)>b6)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,p=i.isAnimationActive,h=i.offset,m=i.position,g=i.reverseDirection,v=i.useTranslate3d,y=i.viewBox,b=i.wrapperStyle,S=bAe({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:h,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:y}),A=S.cssClasses,C=S.cssProperties,T=y6(y6({transition:p&&a?"transform ".concat(o,"ms ").concat(l):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return xe.createElement("div",{tabIndex:-1,className:A,style:T,ref:function(E){r.wrapperNode=E}},u)}}])}(I.PureComponent),kAe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Df={isSsr:kAe()};function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function x6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function w6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x6(Object(n),!0).forEach(function(r){v3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KK(r.key),r)}}function DAe(t,e,n){return e&&TAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IAe(t,e,n){return e=vw(e),OAe(t,qK()?Reflect.construct(e,n||[],vw(t).constructor):e.apply(t,n))}function OAe(t,e){if(e&&(bg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MAe(t)}function MAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qK=function(){return!!t})()}function vw(t){return vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vw(t)}function RAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IE(t,e)}function IE(t,e){return IE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IE(t,e)}function v3(t,e,n){return e=KK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KK(t){var e=LAe(t,"string");return bg(e)=="symbol"?e:e+""}function LAe(t,e){if(bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function FAe(t){return t.dataKey}function zAe(t,e){return xe.isValidElement(t)?xe.cloneElement(t,e):typeof t=="function"?xe.createElement(t,e):xe.createElement(hAe,e)}var Or=function(t){function e(){return PAe(this,e),IAe(this,e,arguments)}return RAe(e,t),DAe(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,p=i.isAnimationActive,h=i.offset,m=i.payload,g=i.payloadUniqBy,v=i.position,y=i.reverseDirection,b=i.useTranslate3d,S=i.viewBox,A=i.wrapperStyle,C=m??[];f&&C.length&&(C=RK(m.filter(function(j){return j.value!=null&&(j.hide!==!0||r.props.includeHidden)}),g,FAe));var T=C.length>0;return xe.createElement(EAe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:p,active:a,coordinate:d,hasPayload:T,offset:h,position:v,reverseDirection:y,useTranslate3d:b,viewBox:S,wrapperStyle:A},zAe(u,w6(w6({},this.props),{},{payload:C})))}}])}(I.PureComponent);v3(Or,"displayName","Tooltip");v3(Or,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Df.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var $Ae=xu,BAe=function(){return $Ae.Date.now()},VAe=BAe,UAe=/\s/;function HAe(t){for(var e=t.length;e--&&UAe.test(t.charAt(e)););return e}var WAe=HAe,qAe=WAe,KAe=/^\s+/;function GAe(t){return t&&t.slice(0,qAe(t)+1).replace(KAe,"")}var YAe=GAe,XAe=YAe,S6=Tf,QAe=iv,_6=NaN,ZAe=/^[-+]0x[0-9a-f]+$/i,JAe=/^0b[01]+$/i,eCe=/^0o[0-7]+$/i,tCe=parseInt;function nCe(t){if(typeof t=="number")return t;if(QAe(t))return _6;if(S6(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=S6(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=XAe(t);var n=JAe.test(t);return n||eCe.test(t)?tCe(t.slice(2),n?2:8):ZAe.test(t)?_6:+t}var GK=nCe,rCe=Tf,nC=VAe,A6=GK,iCe="Expected a function",aCe=Math.max,sCe=Math.min;function oCe(t,e,n){var r,i,a,s,o,l,u=0,d=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(iCe);e=A6(e)||0,rCe(n)&&(d=!!n.leading,f="maxWait"in n,a=f?aCe(A6(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p);function h(T){var j=r,E=i;return r=i=void 0,u=T,s=t.apply(E,j),s}function m(T){return u=T,o=setTimeout(y,e),d?h(T):s}function g(T){var j=T-l,E=T-u,k=e-j;return f?sCe(k,a-E):k}function v(T){var j=T-l,E=T-u;return l===void 0||j>=e||j<0||f&&E>=a}function y(){var T=nC();if(v(T))return b(T);o=setTimeout(y,g(T))}function b(T){return o=void 0,p&&r?h(T):(r=i=void 0,s)}function S(){o!==void 0&&clearTimeout(o),u=0,r=l=i=o=void 0}function A(){return o===void 0?s:b(nC())}function C(){var T=nC(),j=v(T);if(r=arguments,i=this,l=T,j){if(o===void 0)return m(l);if(f)return clearTimeout(o),o=setTimeout(y,e),h(l)}return o===void 0&&(o=setTimeout(y,e)),s}return C.cancel=S,C.flush=A,C}var lCe=oCe,cCe=lCe,uCe=Tf,dCe="Expected a function";function fCe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(dCe);return uCe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),cCe(t,e,{leading:r,maxWait:e,trailing:i})}var hCe=fCe;const YK=Mr(hCe);function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}function C6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C6(Object(n),!0).forEach(function(r){pCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pCe(t,e,n){return e=mCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mCe(t){var e=gCe(t,"string");return Py(e)=="symbol"?e:e+""}function gCe(t,e){if(Py(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Py(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vCe(t,e){return wCe(t)||xCe(t,e)||bCe(t,e)||yCe()}function yCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bCe(t,e){if(t){if(typeof t=="string")return j6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j6(t,e)}}function j6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function wCe(t){if(Array.isArray(t))return t}var ca=I.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,l=o===void 0?"100%":o,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,p=t.maxHeight,h=t.children,m=t.debounce,g=m===void 0?0:m,v=t.id,y=t.className,b=t.onResize,S=t.style,A=S===void 0?{}:S,C=I.useRef(null),T=I.useRef();T.current=b,I.useImperativeHandle(e,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var j=I.useState({containerWidth:i.width,containerHeight:i.height}),E=vCe(j,2),k=E[0],O=E[1],D=I.useCallback(function(L,V){O(function(Q){var Y=Math.round(L),J=Math.round(V);return Q.containerWidth===Y&&Q.containerHeight===J?Q:{containerWidth:Y,containerHeight:J}})},[]);I.useEffect(function(){var L=function(ee){var le,se=ee[0].contentRect,$=se.width,G=se.height;D($,G),(le=T.current)===null||le===void 0||le.call(T,$,G)};g>0&&(L=YK(L,g,{trailing:!0,leading:!1}));var V=new ResizeObserver(L),Q=C.current.getBoundingClientRect(),Y=Q.width,J=Q.height;return D(Y,J),V.observe(C.current),function(){V.disconnect()}},[D,g]);var M=I.useMemo(function(){var L=k.containerWidth,V=k.containerHeight;if(L<0||V<0)return null;_c(wh(s)||wh(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),_c(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Q=wh(s)?L:s,Y=wh(l)?V:l;n&&n>0&&(Q?Y=Q/n:Y&&(Q=Y*n),p&&Y>p&&(Y=p)),_c(Q>0||Y>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Q,Y,s,l,d,f,n);var J=!Array.isArray(h)&&Qu(h.type).endsWith("Chart");return xe.Children.map(h,function(q){return xe.isValidElement(q)?I.cloneElement(q,qx({width:Q,height:Y},J?{style:qx({height:"100%",width:"100%",maxHeight:Y,maxWidth:Q},q.props.style)}:{})):q})},[n,h,l,p,f,d,k,s]);return xe.createElement("div",{id:v?"".concat(v):void 0,className:$n("recharts-responsive-container",y),style:qx(qx({},A),{},{width:s,height:l,minWidth:d,minHeight:f,maxHeight:p}),ref:C},M)}),Wl=function(e){return null};Wl.displayName="Cell";function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}function N6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N6(Object(n),!0).forEach(function(r){SCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SCe(t,e,n){return e=_Ce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ce(t){var e=ACe(t,"string");return Ty(e)=="symbol"?e:e+""}function ACe(t,e){if(Ty(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mp={widthCache:{},cacheCount:0},CCe=2e3,jCe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},E6="recharts_measurement_span";function NCe(t){var e=OE({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var P0=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Df.isSsr)return{width:0,height:0};var r=NCe(n),i=JSON.stringify({text:e,copyStyle:r});if(Mp.widthCache[i])return Mp.widthCache[i];try{var a=document.getElementById(E6);a||(a=document.createElement("span"),a.setAttribute("id",E6),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=OE(OE({},jCe),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return Mp.widthCache[i]=l,++Mp.cacheCount>CCe&&(Mp.cacheCount=0,Mp.widthCache={}),l}catch{return{width:0,height:0}}},ECe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Dy(t){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dy(t)}function yw(t,e){return DCe(t)||TCe(t,e)||PCe(t,e)||kCe()}function kCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PCe(t,e){if(t){if(typeof t=="string")return k6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k6(t,e)}}function k6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function DCe(t){if(Array.isArray(t))return t}function ICe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MCe(r.key),r)}}function OCe(t,e,n){return e&&P6(t.prototype,e),n&&P6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function MCe(t){var e=RCe(t,"string");return Dy(e)=="symbol"?e:e+""}function RCe(t,e){if(Dy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var T6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,D6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,LCe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,FCe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,XK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},zCe=Object.keys(XK),gm="NaN";function $Ce(t,e){return t*XK[e]}var Kx=function(){function t(e,n){ICe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!LCe.test(n)&&(this.num=NaN,this.unit=""),zCe.includes(n)&&(this.num=$Ce(e,n),this.unit="px")}return OCe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=FCe.exec(n))!==null&&r!==void 0?r:[],a=yw(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])}();function QK(t){if(t.includes(gm))return gm;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=T6.exec(e))!==null&&n!==void 0?n:[],i=yw(r,4),a=i[1],s=i[2],o=i[3],l=Kx.parse(a??""),u=Kx.parse(o??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return gm;e=e.replace(T6,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,p=(f=D6.exec(e))!==null&&f!==void 0?f:[],h=yw(p,4),m=h[1],g=h[2],v=h[3],y=Kx.parse(m??""),b=Kx.parse(v??""),S=g==="+"?y.add(b):y.subtract(b);if(S.isNaN())return gm;e=e.replace(D6,S.toString())}return e}var I6=/\(([^()]*)\)/;function BCe(t){for(var e=t;e.includes("(");){var n=I6.exec(e),r=yw(n,2),i=r[1];e=e.replace(I6,QK(i))}return e}function VCe(t){var e=t.replace(/\s+/g,"");return e=BCe(e),e=QK(e),e}function UCe(t){try{return VCe(t)}catch{return gm}}function rC(t){var e=UCe(t.slice(5,-1));return e===gm?"":e}var HCe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],WCe=["dx","dy","angle","className","breakAll"];function ME(){return ME=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ME.apply(this,arguments)}function O6(t,e){if(t==null)return{};var n=qCe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function M6(t,e){return XCe(t)||YCe(t,e)||GCe(t,e)||KCe()}function KCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GCe(t,e){if(t){if(typeof t=="string")return R6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R6(t,e)}}function R6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function YCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function XCe(t){if(Array.isArray(t))return t}var ZK=/[ \f\n\r\t\v\u2028\u2029]+/,JK=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];In(n)||(r?a=n.toString().split(""):a=n.toString().split(ZK));var s=a.map(function(l){return{word:l,width:P0(l,i).width}}),o=r?0:P0(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},QCe=function(e,n,r,i,a){var s=e.maxLines,o=e.children,l=e.style,u=e.breakAll,d=kt(s),f=o,p=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Q.reduce(function(Y,J){var q=J.word,ee=J.width,le=Y[Y.length-1];if(le&&(i==null||a||le.width+ee+r<Number(i)))le.words.push(q),le.width+=ee+r;else{var se={words:[q],width:ee};Y.push(se)}return Y},[])},h=p(n),m=function(Q){return Q.reduce(function(Y,J){return Y.width>J.width?Y:J})};if(!d)return h;for(var g="…",v=function(Q){var Y=f.slice(0,Q),J=JK({breakAll:u,style:l,children:Y+g}).wordsWithComputedWidth,q=p(J),ee=q.length>s||m(q).width>Number(i);return[ee,q]},y=0,b=f.length-1,S=0,A;y<=b&&S<=f.length-1;){var C=Math.floor((y+b)/2),T=C-1,j=v(T),E=M6(j,2),k=E[0],O=E[1],D=v(C),M=M6(D,1),L=M[0];if(!k&&!L&&(y=C+1),k&&L&&(b=C-1),!k&&L){A=O;break}S++}return A||h},L6=function(e){var n=In(e)?[]:e.toString().split(ZK);return[{words:n}]},ZCe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!Df.isSsr){var l,u,d=JK({breakAll:s,children:i,style:a});if(d){var f=d.wordsWithComputedWidth,p=d.spaceWidth;l=f,u=p}else return L6(i);return QCe({breakAll:s,children:i,maxLines:o,style:a},l,u,n,r)}return L6(i)},F6="#808080",Qh=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,l=e.capHeight,u=l===void 0?"0.71em":l,d=e.scaleToFit,f=d===void 0?!1:d,p=e.textAnchor,h=p===void 0?"start":p,m=e.verticalAnchor,g=m===void 0?"end":m,v=e.fill,y=v===void 0?F6:v,b=O6(e,HCe),S=I.useMemo(function(){return ZCe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),A=b.dx,C=b.dy,T=b.angle,j=b.className,E=b.breakAll,k=O6(b,WCe);if(!za(r)||!za(a))return null;var O=r+(kt(A)?A:0),D=a+(kt(C)?C:0),M;switch(g){case"start":M=rC("calc(".concat(u,")"));break;case"middle":M=rC("calc(".concat((S.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:M=rC("calc(".concat(S.length-1," * -").concat(o,")"));break}var L=[];if(f){var V=S[0].width,Q=b.width;L.push("scale(".concat((kt(Q)?Q/V:1)/V,")"))}return T&&L.push("rotate(".concat(T,", ").concat(O,", ").concat(D,")")),L.length&&(k.transform=L.join(" ")),xe.createElement("text",ME({},mn(k,!0),{x:O,y:D,className:$n("recharts-text",j),textAnchor:h,fill:y.includes("url")?F6:y}),S.map(function(Y,J){var q=Y.words.join(E?"":" ");return xe.createElement("tspan",{x:O,dy:J===0?M:o,key:"".concat(q,"-").concat(J)},q)}))};function ff(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function JCe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function y3(t){let e,n,r;t.length!==2?(e=ff,n=(o,l)=>ff(t(o),l),r=(o,l)=>t(o)-l):(e=t===ff||t===JCe?t:eje,n=t,r=t);function i(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){const f=i(o,l,u,d-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function eje(){return 0}function eG(t){return t===null?NaN:+t}function*tje(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const nje=y3(ff),zb=nje.right;y3(eG).center;class z6 extends Map{constructor(e,n=aje){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get($6(this,e))}has(e){return super.has($6(this,e))}set(e,n){return super.set(rje(this,e),n)}delete(e){return super.delete(ije(this,e))}}function $6({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function rje({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ije({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function aje(t){return t!==null&&typeof t=="object"?t.valueOf():t}function sje(t=ff){if(t===ff)return tG;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function tG(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const oje=Math.sqrt(50),lje=Math.sqrt(10),cje=Math.sqrt(2);function bw(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=oje?10:a>=lje?5:a>=cje?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?bw(t,e,n*2):[o,l,u]}function RE(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?bw(e,t,n):bw(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function LE(t,e,n){return e=+e,t=+t,n=+n,bw(t,e,n)[2]}function FE(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?LE(e,t,n):LE(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function B6(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function V6(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function nG(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?tG:sje(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,d=Math.log(l),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*f/l+p)),m=Math.min(r,Math.floor(e+(l-u)*f/l+p));nG(t,e,h,m,i)}const a=t[e];let s=n,o=r;for($v(t,n,e),i(t[r],a)>0&&$v(t,n,r);s<o;){for($v(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?$v(t,n,o):(++o,$v(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function $v(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function uje(t,e,n){if(t=Float64Array.from(tje(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return V6(t);if(e>=1)return B6(t);var r,i=(r-1)*e,a=Math.floor(i),s=B6(nG(t,a).subarray(0,a+1)),o=V6(t.subarray(a+1));return s+(o-s)*(i-a)}}function dje(t,e,n=eG){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function fje(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Zl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function bd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const zE=Symbol("implicit");function b3(){var t=new z6,e=[],n=[],r=zE;function i(a){let s=t.get(a);if(s===void 0){if(r!==zE)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new z6;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return b3(e,n).unknown(r)},Zl.apply(i,arguments),i}function Iy(){var t=b3().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,u=0,d=.5;delete t.unknown;function f(){var p=e().length,h=i<r,m=h?i:r,g=h?r:i;a=(g-m)/Math.max(1,p-l+u*2),o&&(a=Math.floor(a)),m+=(g-m-a*(p-l))*d,s=a*(1-l),o&&(m=Math.round(m),s=Math.round(s));var v=fje(p).map(function(y){return m+a*y});return n(h?v.reverse():v)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(p){return arguments.length?(o=!!p,f()):o},t.padding=function(p){return arguments.length?(l=Math.min(1,u=+p),f()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),f()):l},t.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},t.copy=function(){return Iy(e(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(d)},Zl.apply(f(),arguments)}function rG(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return rG(e())},t}function T0(){return rG(Iy.apply(null,arguments).paddingInner(1))}function x3(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function iG(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function $b(){}var Oy=.7,xw=1/Oy,Om="\\s*([+-]?\\d+)\\s*",My="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",uu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hje=/^#([0-9a-f]{3,8})$/,pje=new RegExp(`^rgb\\(${Om},${Om},${Om}\\)$`),mje=new RegExp(`^rgb\\(${uu},${uu},${uu}\\)$`),gje=new RegExp(`^rgba\\(${Om},${Om},${Om},${My}\\)$`),vje=new RegExp(`^rgba\\(${uu},${uu},${uu},${My}\\)$`),yje=new RegExp(`^hsl\\(${My},${uu},${uu}\\)$`),bje=new RegExp(`^hsla\\(${My},${uu},${uu},${My}\\)$`),U6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};x3($b,Ry,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:H6,formatHex:H6,formatHex8:xje,formatHsl:wje,formatRgb:W6,toString:W6});function H6(){return this.rgb().formatHex()}function xje(){return this.rgb().formatHex8()}function wje(){return aG(this).formatHsl()}function W6(){return this.rgb().formatRgb()}function Ry(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=hje.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?q6(e):n===3?new xo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Gx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Gx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=pje.exec(t))?new xo(e[1],e[2],e[3],1):(e=mje.exec(t))?new xo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=gje.exec(t))?Gx(e[1],e[2],e[3],e[4]):(e=vje.exec(t))?Gx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=yje.exec(t))?Y6(e[1],e[2]/100,e[3]/100,1):(e=bje.exec(t))?Y6(e[1],e[2]/100,e[3]/100,e[4]):U6.hasOwnProperty(t)?q6(U6[t]):t==="transparent"?new xo(NaN,NaN,NaN,0):null}function q6(t){return new xo(t>>16&255,t>>8&255,t&255,1)}function Gx(t,e,n,r){return r<=0&&(t=e=n=NaN),new xo(t,e,n,r)}function Sje(t){return t instanceof $b||(t=Ry(t)),t?(t=t.rgb(),new xo(t.r,t.g,t.b,t.opacity)):new xo}function $E(t,e,n,r){return arguments.length===1?Sje(t):new xo(t,e,n,r??1)}function xo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}x3(xo,$E,iG($b,{brighter(t){return t=t==null?xw:Math.pow(xw,t),new xo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Oy:Math.pow(Oy,t),new xo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xo(Mh(this.r),Mh(this.g),Mh(this.b),ww(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K6,formatHex:K6,formatHex8:_je,formatRgb:G6,toString:G6}));function K6(){return`#${Sh(this.r)}${Sh(this.g)}${Sh(this.b)}`}function _je(){return`#${Sh(this.r)}${Sh(this.g)}${Sh(this.b)}${Sh((isNaN(this.opacity)?1:this.opacity)*255)}`}function G6(){const t=ww(this.opacity);return`${t===1?"rgb(":"rgba("}${Mh(this.r)}, ${Mh(this.g)}, ${Mh(this.b)}${t===1?")":`, ${t})`}`}function ww(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Mh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Sh(t){return t=Mh(t),(t<16?"0":"")+t.toString(16)}function Y6(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xc(t,e,n,r)}function aG(t){if(t instanceof xc)return new xc(t.h,t.s,t.l,t.opacity);if(t instanceof $b||(t=Ry(t)),!t)return new xc;if(t instanceof xc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new xc(s,o,l,t.opacity)}function Aje(t,e,n,r){return arguments.length===1?aG(t):new xc(t,e,n,r??1)}function xc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}x3(xc,Aje,iG($b,{brighter(t){return t=t==null?xw:Math.pow(xw,t),new xc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Oy:Math.pow(Oy,t),new xc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new xo(iC(t>=240?t-240:t+120,i,r),iC(t,i,r),iC(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new xc(X6(this.h),Yx(this.s),Yx(this.l),ww(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ww(this.opacity);return`${t===1?"hsl(":"hsla("}${X6(this.h)}, ${Yx(this.s)*100}%, ${Yx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function X6(t){return t=(t||0)%360,t<0?t+360:t}function Yx(t){return Math.max(0,Math.min(1,t||0))}function iC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const w3=t=>()=>t;function Cje(t,e){return function(n){return t+n*e}}function jje(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Nje(t){return(t=+t)==1?sG:function(e,n){return n-e?jje(e,n,t):w3(isNaN(e)?n:e)}}function sG(t,e){var n=e-t;return n?Cje(t,n):w3(isNaN(t)?e:t)}const Q6=function t(e){var n=Nje(e);function r(i,a){var s=n((i=$E(i)).r,(a=$E(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),u=sG(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function Eje(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function kje(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Pje(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=hv(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Tje(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Sw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Dje(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=hv(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var BE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aC=new RegExp(BE.source,"g");function Ije(t){return function(){return t}}function Oje(t){return function(e){return t(e)+""}}function Mje(t,e){var n=BE.lastIndex=aC.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=BE.exec(t))&&(i=aC.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Sw(r,i)})),n=aC.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Oje(l[0].x):Ije(e):(e=l.length,function(u){for(var d=0,f;d<e;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function hv(t,e){var n=typeof e,r;return e==null||n==="boolean"?w3(e):(n==="number"?Sw:n==="string"?(r=Ry(e))?(e=r,Q6):Mje:e instanceof Ry?Q6:e instanceof Date?Tje:kje(e)?Eje:Array.isArray(e)?Pje:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Dje:Sw)(t,e)}function S3(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Rje(t,e){e===void 0&&(e=t,t=hv);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function Lje(t){return function(){return t}}function _w(t){return+t}var Z6=[0,1];function ao(t){return t}function VE(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Lje(isNaN(e)?NaN:.5)}function Fje(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function zje(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=VE(i,r),a=n(s,a)):(r=VE(r,i),a=n(a,s)),function(o){return a(r(o))}}function $je(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=VE(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=zb(t,o,1,r)-1;return a[l](i[l](o))}}function Bb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function qS(){var t=Z6,e=Z6,n=hv,r,i,a,s=ao,o,l,u;function d(){var p=Math.min(t.length,e.length);return s!==ao&&(s=Fje(t[0],t[p-1])),o=p>2?$je:zje,l=u=null,f}function f(p){return p==null||isNaN(p=+p)?a:(l||(l=o(t.map(r),e,n)))(r(s(p)))}return f.invert=function(p){return s(i((u||(u=o(e,t.map(r),Sw)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,_w),d()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),n=S3,d()},f.clamp=function(p){return arguments.length?(s=p?!0:ao,d()):s!==ao},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,h){return r=p,i=h,d()}}function _3(){return qS()(ao,ao)}function Bje(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Aw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function xg(t){return t=Aw(Math.abs(t)),t?t[1]:NaN}function Vje(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Uje(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Hje=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ly(t){if(!(e=Hje.exec(t)))throw new Error("invalid format: "+t);var e;return new A3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ly.prototype=A3.prototype;function A3(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}A3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Wje(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var oG;function qje(t,e){var n=Aw(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(oG=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Aw(t,Math.max(0,e+a-1))[0]}function J6(t,e){var n=Aw(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const e8={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Bje,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>J6(t*100,e),r:J6,s:qje,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function t8(t){return t}var n8=Array.prototype.map,r8=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Kje(t){var e=t.grouping===void 0||t.thousands===void 0?t8:Vje(n8.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?t8:Uje(n8.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Ly(f);var p=f.fill,h=f.align,m=f.sign,g=f.symbol,v=f.zero,y=f.width,b=f.comma,S=f.precision,A=f.trim,C=f.type;C==="n"?(b=!0,C="g"):e8[C]||(S===void 0&&(S=12),A=!0,C="g"),(v||p==="0"&&h==="=")&&(v=!0,p="0",h="=");var T=g==="$"?n:g==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",j=g==="$"?r:/[%p]/.test(C)?s:"",E=e8[C],k=/[defgprs%]/.test(C);S=S===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function O(D){var M=T,L=j,V,Q,Y;if(C==="c")L=E(D)+L,D="";else{D=+D;var J=D<0||1/D<0;if(D=isNaN(D)?l:E(Math.abs(D),S),A&&(D=Wje(D)),J&&+D==0&&m!=="+"&&(J=!1),M=(J?m==="("?m:o:m==="-"||m==="("?"":m)+M,L=(C==="s"?r8[8+oG/3]:"")+L+(J&&m==="("?")":""),k){for(V=-1,Q=D.length;++V<Q;)if(Y=D.charCodeAt(V),48>Y||Y>57){L=(Y===46?i+D.slice(V+1):D.slice(V))+L,D=D.slice(0,V);break}}}b&&!v&&(D=e(D,1/0));var q=M.length+D.length+L.length,ee=q<y?new Array(y-q+1).join(p):"";switch(b&&v&&(D=e(ee+D,ee.length?y-L.length:1/0),ee=""),h){case"<":D=M+D+L+ee;break;case"=":D=M+ee+D+L;break;case"^":D=ee.slice(0,q=ee.length>>1)+M+D+L+ee.slice(q);break;default:D=ee+M+D+L;break}return a(D)}return O.toString=function(){return f+""},O}function d(f,p){var h=u((f=Ly(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(xg(p)/3)))*3,g=Math.pow(10,-m),v=r8[8+m/3];return function(y){return h(g*y)+v}}return{format:u,formatPrefix:d}}var Xx,C3,lG;Gje({thousands:",",grouping:[3],currency:["$",""]});function Gje(t){return Xx=Kje(t),C3=Xx.format,lG=Xx.formatPrefix,Xx}function Yje(t){return Math.max(0,-xg(Math.abs(t)))}function Xje(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xg(e)/3)))*3-xg(Math.abs(t)))}function Qje(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xg(e)-xg(t))+1}function cG(t,e,n,r){var i=FE(t,e,n),a;switch(r=Ly(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Xje(i,s))&&(r.precision=a),lG(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Qje(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Yje(i))&&(r.precision=a-(r.type==="%")*2);break}}return C3(r)}function If(t){var e=t.domain;return t.ticks=function(n){var r=e();return RE(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return cG(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=LE(s,o,n),u===l)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function Cw(){var t=_3();return t.copy=function(){return Bb(t,Cw())},Zl.apply(t,arguments),If(t)}function uG(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,_w),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return uG(t).unknown(e)},t=arguments.length?Array.from(t,_w):[0,1],If(n)}function dG(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function i8(t){return Math.log(t)}function a8(t){return Math.exp(t)}function Zje(t){return-Math.log(-t)}function Jje(t){return-Math.exp(-t)}function eNe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function tNe(t){return t===10?eNe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function nNe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function s8(t){return(e,n)=>-t(-e,n)}function j3(t){const e=t(i8,a8),n=e.domain;let r=10,i,a;function s(){return i=nNe(r),a=tNe(r),n()[0]<0?(i=s8(i),a=s8(a),t(Zje,Jje)):t(i8,a8),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const l=n();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=i(u),h=i(d),m,g;const v=o==null?10:+o;let y=[];if(!(r%1)&&h-p<v){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(m=1;m<r;++m)if(g=p<0?m/a(-p):m*a(p),!(g<u)){if(g>d)break;y.push(g)}}else for(;p<=h;++p)for(m=r-1;m>=1;--m)if(g=p>0?m/a(-p):m*a(p),!(g<u)){if(g>d)break;y.push(g)}y.length*2<v&&(y=RE(u,d,v))}else y=RE(p,h,Math.min(h-p,v)).map(a);return f?y.reverse():y},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Ly(l)).precision==null&&(l.trim=!0),l=C3(l)),o===1/0)return l;const u=Math.max(1,r*o/e.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?l(d):""}},e.nice=()=>n(dG(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function fG(){const t=j3(qS()).domain([1,10]);return t.copy=()=>Bb(t,fG()).base(t.base()),Zl.apply(t,arguments),t}function o8(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function l8(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function N3(t){var e=1,n=t(o8(e),l8(e));return n.constant=function(r){return arguments.length?t(o8(e=+r),l8(e)):e},If(n)}function hG(){var t=N3(qS());return t.copy=function(){return Bb(t,hG()).constant(t.constant())},Zl.apply(t,arguments)}function c8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function rNe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function iNe(t){return t<0?-t*t:t*t}function E3(t){var e=t(ao,ao),n=1;function r(){return n===1?t(ao,ao):n===.5?t(rNe,iNe):t(c8(n),c8(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},If(e)}function k3(){var t=E3(qS());return t.copy=function(){return Bb(t,k3()).exponent(t.exponent())},Zl.apply(t,arguments),t}function aNe(){return k3.apply(null,arguments).exponent(.5)}function u8(t){return Math.sign(t)*t*t}function sNe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function pG(){var t=_3(),e=[0,1],n=!1,r;function i(a){var s=sNe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(u8(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,_w)).map(u8)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return pG(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Zl.apply(i,arguments),If(i)}function mG(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=dje(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[zb(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(ff),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return mG().domain(t).range(e).unknown(r)},Zl.apply(a,arguments)}function gG(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[zb(r,l,0,n)]:a}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return gG().domain([t,e]).range(i).unknown(a)},Zl.apply(If(s),arguments)}function vG(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[zb(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return vG().domain(t).range(e).unknown(n)},Zl.apply(i,arguments)}const sC=new Date,oC=new Date;function Ba(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return l},i.filter=a=>Ba(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(sC.setTime(+a),oC.setTime(+s),t(sC),t(oC),Math.floor(n(sC,oC))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const jw=Ba(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);jw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ba(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):jw);jw.range;const Hu=1e3,Bl=Hu*60,Wu=Bl*60,ld=Wu*24,P3=ld*7,d8=ld*30,lC=ld*365,_h=Ba(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Hu)},(t,e)=>(e-t)/Hu,t=>t.getUTCSeconds());_h.range;const T3=Ba(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hu)},(t,e)=>{t.setTime(+t+e*Bl)},(t,e)=>(e-t)/Bl,t=>t.getMinutes());T3.range;const D3=Ba(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Bl)},(t,e)=>(e-t)/Bl,t=>t.getUTCMinutes());D3.range;const I3=Ba(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hu-t.getMinutes()*Bl)},(t,e)=>{t.setTime(+t+e*Wu)},(t,e)=>(e-t)/Wu,t=>t.getHours());I3.range;const O3=Ba(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Wu)},(t,e)=>(e-t)/Wu,t=>t.getUTCHours());O3.range;const Vb=Ba(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Bl)/ld,t=>t.getDate()-1);Vb.range;const KS=Ba(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ld,t=>t.getUTCDate()-1);KS.range;const yG=Ba(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ld,t=>Math.floor(t/ld));yG.range;function xp(t){return Ba(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Bl)/P3)}const GS=xp(0),Nw=xp(1),oNe=xp(2),lNe=xp(3),wg=xp(4),cNe=xp(5),uNe=xp(6);GS.range;Nw.range;oNe.range;lNe.range;wg.range;cNe.range;uNe.range;function wp(t){return Ba(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/P3)}const YS=wp(0),Ew=wp(1),dNe=wp(2),fNe=wp(3),Sg=wp(4),hNe=wp(5),pNe=wp(6);YS.range;Ew.range;dNe.range;fNe.range;Sg.range;hNe.range;pNe.range;const M3=Ba(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());M3.range;const R3=Ba(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());R3.range;const cd=Ba(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());cd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ba(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});cd.range;const ud=Ba(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ud.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ba(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ud.range;function bG(t,e,n,r,i,a){const s=[[_h,1,Hu],[_h,5,5*Hu],[_h,15,15*Hu],[_h,30,30*Hu],[a,1,Bl],[a,5,5*Bl],[a,15,15*Bl],[a,30,30*Bl],[i,1,Wu],[i,3,3*Wu],[i,6,6*Wu],[i,12,12*Wu],[r,1,ld],[r,2,2*ld],[n,1,P3],[e,1,d8],[e,3,3*d8],[t,1,lC]];function o(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:l(u,d,f),m=h?h.range(u,+d+1):[];return p?m.reverse():m}function l(u,d,f){const p=Math.abs(d-u)/f,h=y3(([,,v])=>v).right(s,p);if(h===s.length)return t.every(FE(u/lC,d/lC,f));if(h===0)return jw.every(Math.max(FE(u,d,f),1));const[m,g]=s[p/s[h-1][2]<s[h][2]/p?h-1:h];return m.every(g)}return[o,l]}const[mNe,gNe]=bG(ud,R3,YS,yG,O3,D3),[vNe,yNe]=bG(cd,M3,GS,Vb,I3,T3);function cC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function uC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function bNe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,u=Vv(i),d=Uv(i),f=Vv(a),p=Uv(a),h=Vv(s),m=Uv(s),g=Vv(o),v=Uv(o),y=Vv(l),b=Uv(l),S={a:J,A:q,b:ee,B:le,c:null,d:v8,e:v8,f:VNe,g:ZNe,G:eEe,H:zNe,I:$Ne,j:BNe,L:xG,m:UNe,M:HNe,p:se,q:$,Q:x8,s:w8,S:WNe,u:qNe,U:KNe,V:GNe,w:YNe,W:XNe,x:null,X:null,y:QNe,Y:JNe,Z:tEe,"%":b8},A={a:G,A:te,b:oe,B:ge,c:null,d:y8,e:y8,f:aEe,g:mEe,G:vEe,H:nEe,I:rEe,j:iEe,L:SG,m:sEe,M:oEe,p:_e,q:Ce,Q:x8,s:w8,S:lEe,u:cEe,U:uEe,V:dEe,w:fEe,W:hEe,x:null,X:null,y:pEe,Y:gEe,Z:yEe,"%":b8},C={a:O,A:D,b:M,B:L,c:V,d:m8,e:m8,f:MNe,g:p8,G:h8,H:g8,I:g8,j:TNe,L:ONe,m:PNe,M:DNe,p:k,q:kNe,Q:LNe,s:FNe,S:INe,u:ANe,U:CNe,V:jNe,w:_Ne,W:NNe,x:Q,X:Y,y:p8,Y:h8,Z:ENe,"%":RNe};S.x=T(n,S),S.X=T(r,S),S.c=T(e,S),A.x=T(n,A),A.X=T(r,A),A.c=T(e,A);function T(fe,be){return function(we){var ie=[],He=-1,Me=0,he=fe.length,We,pt,gt;for(we instanceof Date||(we=new Date(+we));++He<he;)fe.charCodeAt(He)===37&&(ie.push(fe.slice(Me,He)),(pt=f8[We=fe.charAt(++He)])!=null?We=fe.charAt(++He):pt=We==="e"?" ":"0",(gt=be[We])&&(We=gt(we,pt)),ie.push(We),Me=He+1);return ie.push(fe.slice(Me,He)),ie.join("")}}function j(fe,be){return function(we){var ie=Bv(1900,void 0,1),He=E(ie,fe,we+="",0),Me,he;if(He!=we.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(be&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(Me=uC(Bv(ie.y,0,1)),he=Me.getUTCDay(),Me=he>4||he===0?Ew.ceil(Me):Ew(Me),Me=KS.offset(Me,(ie.V-1)*7),ie.y=Me.getUTCFullYear(),ie.m=Me.getUTCMonth(),ie.d=Me.getUTCDate()+(ie.w+6)%7):(Me=cC(Bv(ie.y,0,1)),he=Me.getDay(),Me=he>4||he===0?Nw.ceil(Me):Nw(Me),Me=Vb.offset(Me,(ie.V-1)*7),ie.y=Me.getFullYear(),ie.m=Me.getMonth(),ie.d=Me.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),he="Z"in ie?uC(Bv(ie.y,0,1)).getUTCDay():cC(Bv(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(he+5)%7:ie.w+ie.U*7-(he+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,uC(ie)):cC(ie)}}function E(fe,be,we,ie){for(var He=0,Me=be.length,he=we.length,We,pt;He<Me;){if(ie>=he)return-1;if(We=be.charCodeAt(He++),We===37){if(We=be.charAt(He++),pt=C[We in f8?be.charAt(He++):We],!pt||(ie=pt(fe,we,ie))<0)return-1}else if(We!=we.charCodeAt(ie++))return-1}return ie}function k(fe,be,we){var ie=u.exec(be.slice(we));return ie?(fe.p=d.get(ie[0].toLowerCase()),we+ie[0].length):-1}function O(fe,be,we){var ie=h.exec(be.slice(we));return ie?(fe.w=m.get(ie[0].toLowerCase()),we+ie[0].length):-1}function D(fe,be,we){var ie=f.exec(be.slice(we));return ie?(fe.w=p.get(ie[0].toLowerCase()),we+ie[0].length):-1}function M(fe,be,we){var ie=y.exec(be.slice(we));return ie?(fe.m=b.get(ie[0].toLowerCase()),we+ie[0].length):-1}function L(fe,be,we){var ie=g.exec(be.slice(we));return ie?(fe.m=v.get(ie[0].toLowerCase()),we+ie[0].length):-1}function V(fe,be,we){return E(fe,e,be,we)}function Q(fe,be,we){return E(fe,n,be,we)}function Y(fe,be,we){return E(fe,r,be,we)}function J(fe){return s[fe.getDay()]}function q(fe){return a[fe.getDay()]}function ee(fe){return l[fe.getMonth()]}function le(fe){return o[fe.getMonth()]}function se(fe){return i[+(fe.getHours()>=12)]}function $(fe){return 1+~~(fe.getMonth()/3)}function G(fe){return s[fe.getUTCDay()]}function te(fe){return a[fe.getUTCDay()]}function oe(fe){return l[fe.getUTCMonth()]}function ge(fe){return o[fe.getUTCMonth()]}function _e(fe){return i[+(fe.getUTCHours()>=12)]}function Ce(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var be=T(fe+="",S);return be.toString=function(){return fe},be},parse:function(fe){var be=j(fe+="",!1);return be.toString=function(){return fe},be},utcFormat:function(fe){var be=T(fe+="",A);return be.toString=function(){return fe},be},utcParse:function(fe){var be=j(fe+="",!0);return be.toString=function(){return fe},be}}}var f8={"-":"",_:" ",0:"0"},Ja=/^\s*\d+/,xNe=/^%/,wNe=/[\\^$*+?|[\]().{}]/g;function jr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function SNe(t){return t.replace(wNe,"\\$&")}function Vv(t){return new RegExp("^(?:"+t.map(SNe).join("|")+")","i")}function Uv(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function _Ne(t,e,n){var r=Ja.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ANe(t,e,n){var r=Ja.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function CNe(t,e,n){var r=Ja.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function jNe(t,e,n){var r=Ja.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function NNe(t,e,n){var r=Ja.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function h8(t,e,n){var r=Ja.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function p8(t,e,n){var r=Ja.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ENe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function kNe(t,e,n){var r=Ja.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function PNe(t,e,n){var r=Ja.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function m8(t,e,n){var r=Ja.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function TNe(t,e,n){var r=Ja.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function g8(t,e,n){var r=Ja.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function DNe(t,e,n){var r=Ja.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function INe(t,e,n){var r=Ja.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ONe(t,e,n){var r=Ja.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function MNe(t,e,n){var r=Ja.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function RNe(t,e,n){var r=xNe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function LNe(t,e,n){var r=Ja.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function FNe(t,e,n){var r=Ja.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function v8(t,e){return jr(t.getDate(),e,2)}function zNe(t,e){return jr(t.getHours(),e,2)}function $Ne(t,e){return jr(t.getHours()%12||12,e,2)}function BNe(t,e){return jr(1+Vb.count(cd(t),t),e,3)}function xG(t,e){return jr(t.getMilliseconds(),e,3)}function VNe(t,e){return xG(t,e)+"000"}function UNe(t,e){return jr(t.getMonth()+1,e,2)}function HNe(t,e){return jr(t.getMinutes(),e,2)}function WNe(t,e){return jr(t.getSeconds(),e,2)}function qNe(t){var e=t.getDay();return e===0?7:e}function KNe(t,e){return jr(GS.count(cd(t)-1,t),e,2)}function wG(t){var e=t.getDay();return e>=4||e===0?wg(t):wg.ceil(t)}function GNe(t,e){return t=wG(t),jr(wg.count(cd(t),t)+(cd(t).getDay()===4),e,2)}function YNe(t){return t.getDay()}function XNe(t,e){return jr(Nw.count(cd(t)-1,t),e,2)}function QNe(t,e){return jr(t.getFullYear()%100,e,2)}function ZNe(t,e){return t=wG(t),jr(t.getFullYear()%100,e,2)}function JNe(t,e){return jr(t.getFullYear()%1e4,e,4)}function eEe(t,e){var n=t.getDay();return t=n>=4||n===0?wg(t):wg.ceil(t),jr(t.getFullYear()%1e4,e,4)}function tEe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+jr(e/60|0,"0",2)+jr(e%60,"0",2)}function y8(t,e){return jr(t.getUTCDate(),e,2)}function nEe(t,e){return jr(t.getUTCHours(),e,2)}function rEe(t,e){return jr(t.getUTCHours()%12||12,e,2)}function iEe(t,e){return jr(1+KS.count(ud(t),t),e,3)}function SG(t,e){return jr(t.getUTCMilliseconds(),e,3)}function aEe(t,e){return SG(t,e)+"000"}function sEe(t,e){return jr(t.getUTCMonth()+1,e,2)}function oEe(t,e){return jr(t.getUTCMinutes(),e,2)}function lEe(t,e){return jr(t.getUTCSeconds(),e,2)}function cEe(t){var e=t.getUTCDay();return e===0?7:e}function uEe(t,e){return jr(YS.count(ud(t)-1,t),e,2)}function _G(t){var e=t.getUTCDay();return e>=4||e===0?Sg(t):Sg.ceil(t)}function dEe(t,e){return t=_G(t),jr(Sg.count(ud(t),t)+(ud(t).getUTCDay()===4),e,2)}function fEe(t){return t.getUTCDay()}function hEe(t,e){return jr(Ew.count(ud(t)-1,t),e,2)}function pEe(t,e){return jr(t.getUTCFullYear()%100,e,2)}function mEe(t,e){return t=_G(t),jr(t.getUTCFullYear()%100,e,2)}function gEe(t,e){return jr(t.getUTCFullYear()%1e4,e,4)}function vEe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Sg(t):Sg.ceil(t),jr(t.getUTCFullYear()%1e4,e,4)}function yEe(){return"+0000"}function b8(){return"%"}function x8(t){return+t}function w8(t){return Math.floor(+t/1e3)}var Rp,AG,CG;bEe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bEe(t){return Rp=bNe(t),AG=Rp.format,Rp.parse,CG=Rp.utcFormat,Rp.utcParse,Rp}function xEe(t){return new Date(t)}function wEe(t){return t instanceof Date?+t:+new Date(+t)}function L3(t,e,n,r,i,a,s,o,l,u){var d=_3(),f=d.invert,p=d.domain,h=u(".%L"),m=u(":%S"),g=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),b=u("%b %d"),S=u("%B"),A=u("%Y");function C(T){return(l(T)<T?h:o(T)<T?m:s(T)<T?g:a(T)<T?v:r(T)<T?i(T)<T?y:b:n(T)<T?S:A)(T)}return d.invert=function(T){return new Date(f(T))},d.domain=function(T){return arguments.length?p(Array.from(T,wEe)):p().map(xEe)},d.ticks=function(T){var j=p();return t(j[0],j[j.length-1],T??10)},d.tickFormat=function(T,j){return j==null?C:u(j)},d.nice=function(T){var j=p();return(!T||typeof T.range!="function")&&(T=e(j[0],j[j.length-1],T??10)),T?p(dG(j,T)):d},d.copy=function(){return Bb(d,L3(t,e,n,r,i,a,s,o,l,u))},d}function SEe(){return Zl.apply(L3(vNe,yNe,cd,M3,GS,Vb,I3,T3,_h,AG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _Ee(){return Zl.apply(L3(mNe,gNe,ud,R3,YS,KS,O3,D3,_h,CG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function XS(){var t=0,e=1,n,r,i,a,s=ao,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(p){var h,m;return arguments.length?([h,m]=p,s=f(h,m),u):[s(0),s(1)]}}return u.range=d(hv),u.rangeRound=d(S3),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Of(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function jG(){var t=If(XS()(ao));return t.copy=function(){return Of(t,jG())},bd.apply(t,arguments)}function NG(){var t=j3(XS()).domain([1,10]);return t.copy=function(){return Of(t,NG()).base(t.base())},bd.apply(t,arguments)}function EG(){var t=N3(XS());return t.copy=function(){return Of(t,EG()).constant(t.constant())},bd.apply(t,arguments)}function F3(){var t=E3(XS());return t.copy=function(){return Of(t,F3()).exponent(t.exponent())},bd.apply(t,arguments)}function AEe(){return F3.apply(null,arguments).exponent(.5)}function kG(){var t=[],e=ao;function n(r){if(r!=null&&!isNaN(r=+r))return e((zb(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ff),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>uje(t,a/r))},n.copy=function(){return kG(e).domain(t)},bd.apply(n,arguments)}function QS(){var t=0,e=.5,n=1,r=1,i,a,s,o,l,u=ao,d,f=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+d(g))-a)*(r*g<r*a?o:l),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e,n]=g,i=d(t=+t),a=d(e=+e),s=d(n=+n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,h):[t,e,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function m(g){return function(v){var y,b,S;return arguments.length?([y,b,S]=v,u=Rje(g,[y,b,S]),h):[u(0),u(.5),u(1)]}}return h.range=m(hv),h.rangeRound=m(S3),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return d=g,i=g(t),a=g(e),s=g(n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,h}}function PG(){var t=If(QS()(ao));return t.copy=function(){return Of(t,PG())},bd.apply(t,arguments)}function TG(){var t=j3(QS()).domain([.1,1,10]);return t.copy=function(){return Of(t,TG()).base(t.base())},bd.apply(t,arguments)}function DG(){var t=N3(QS());return t.copy=function(){return Of(t,DG()).constant(t.constant())},bd.apply(t,arguments)}function z3(){var t=E3(QS());return t.copy=function(){return Of(t,z3()).exponent(t.exponent())},bd.apply(t,arguments)}function CEe(){return z3.apply(null,arguments).exponent(.5)}const S8=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Iy,scaleDiverging:PG,scaleDivergingLog:TG,scaleDivergingPow:z3,scaleDivergingSqrt:CEe,scaleDivergingSymlog:DG,scaleIdentity:uG,scaleImplicit:zE,scaleLinear:Cw,scaleLog:fG,scaleOrdinal:b3,scalePoint:T0,scalePow:k3,scaleQuantile:mG,scaleQuantize:gG,scaleRadial:pG,scaleSequential:jG,scaleSequentialLog:NG,scaleSequentialPow:F3,scaleSequentialQuantile:kG,scaleSequentialSqrt:AEe,scaleSequentialSymlog:EG,scaleSqrt:aNe,scaleSymlog:hG,scaleThreshold:vG,scaleTime:SEe,scaleUtc:_Ee,tickFormat:cG},Symbol.toStringTag,{value:"Module"}));var jEe=iv;function NEe(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(s!=null&&(o===void 0?s===s&&!jEe(s):n(s,o)))var o=s,l=a}return l}var ZS=NEe;function EEe(t,e){return t>e}var IG=EEe,kEe=ZS,PEe=IG,TEe=fv;function DEe(t){return t&&t.length?kEe(t,TEe,PEe):void 0}var IEe=DEe;const Gd=Mr(IEe);function OEe(t,e){return t<e}var OG=OEe,MEe=ZS,REe=OG,LEe=fv;function FEe(t){return t&&t.length?MEe(t,LEe,REe):void 0}var zEe=FEe;const JS=Mr(zEe);var $Ee=JT,BEe=wu,VEe=VK,UEe=Po;function HEe(t,e){var n=UEe(t)?$Ee:VEe;return n(t,BEe(e))}var WEe=HEe,qEe=$K,KEe=WEe;function GEe(t,e){return qEe(KEe(t,e),1)}var YEe=GEe;const XEe=Mr(YEe);var QEe=p3;function ZEe(t,e){return QEe(t,e)}var JEe=ZEe;const Zh=Mr(JEe);var pv=1e9,eke={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},B3,_i=!0,ql="[DecimalError] ",Rh=ql+"Invalid argument: ",$3=ql+"Exponent out of range: ",mv=Math.floor,oh=Math.pow,tke=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,tl,Wa=1e7,mi=7,MG=9007199254740991,kw=mv(MG/mi),nn={};nn.absoluteValue=nn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};nn.comparedTo=nn.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};nn.decimalPlaces=nn.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*mi;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};nn.dividedBy=nn.div=function(t){return Zu(this,new this.constructor(t))};nn.dividedToIntegerBy=nn.idiv=function(t){var e=this,n=e.constructor;return Qr(Zu(e,new n(t),0,1),n.precision)};nn.equals=nn.eq=function(t){return!this.cmp(t)};nn.exponent=function(){return xa(this)};nn.greaterThan=nn.gt=function(t){return this.cmp(t)>0};nn.greaterThanOrEqualTo=nn.gte=function(t){return this.cmp(t)>=0};nn.isInteger=nn.isint=function(){return this.e>this.d.length-2};nn.isNegative=nn.isneg=function(){return this.s<0};nn.isPositive=nn.ispos=function(){return this.s>0};nn.isZero=function(){return this.s===0};nn.lessThan=nn.lt=function(t){return this.cmp(t)<0};nn.lessThanOrEqualTo=nn.lte=function(t){return this.cmp(t)<1};nn.logarithm=nn.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(tl))throw Error(ql+"NaN");if(n.s<1)throw Error(ql+(n.s?"NaN":"-Infinity"));return n.eq(tl)?new r(0):(_i=!1,e=Zu(Fy(n,a),Fy(t,a),a),_i=!0,Qr(e,i))};nn.minus=nn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?FG(e,t):RG(e,(t.s=-t.s,t))};nn.modulo=nn.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(ql+"NaN");return n.s?(_i=!1,e=Zu(n,t,0,1).times(t),_i=!0,n.minus(e)):Qr(new r(n),i)};nn.naturalExponential=nn.exp=function(){return LG(this)};nn.naturalLogarithm=nn.ln=function(){return Fy(this)};nn.negated=nn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};nn.plus=nn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?RG(e,t):FG(e,(t.s=-t.s,t))};nn.precision=nn.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Rh+t);if(e=xa(i)+1,r=i.d.length-1,n=r*mi+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};nn.squareRoot=nn.sqrt=function(){var t,e,n,r,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(ql+"NaN")}for(t=xa(o),_i=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=eu(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=mv((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(a=r,r=a.plus(Zu(o,a,s+2)).times(.5),eu(a.d).slice(0,s)===(e=eu(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Qr(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return _i=!0,Qr(r,n)};nn.times=nn.mul=function(t){var e,n,r,i,a,s,o,l,u,d=this,f=d.constructor,p=d.d,h=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,l=p.length,u=h.length,l<u&&(a=p,p=h,h=a,s=l,l=u,u=s),a=[],s=l+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)o=a[i]+h[r]*p[i-r-1]+e,a[i--]=o%Wa|0,e=o/Wa|0;a[i]=(a[i]+e)%Wa|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,_i?Qr(t,f.precision):t};nn.toDecimalPlaces=nn.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(gu(t,0,pv),e===void 0?e=r.rounding:gu(e,0,8),Qr(n,t+xa(n)+1,e))};nn.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Jh(r,!0):(gu(t,0,pv),e===void 0?e=i.rounding:gu(e,0,8),r=Qr(new i(r),t+1,e),n=Jh(r,!0,t+1)),n};nn.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Jh(i):(gu(t,0,pv),e===void 0?e=a.rounding:gu(e,0,8),r=Qr(new a(i),t+xa(i)+1,e),n=Jh(r.abs(),!1,t+xa(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};nn.toInteger=nn.toint=function(){var t=this,e=t.constructor;return Qr(new e(t),xa(t)+1,e.rounding)};nn.toNumber=function(){return+this};nn.toPower=nn.pow=function(t){var e,n,r,i,a,s,o=this,l=o.constructor,u=12,d=+(t=new l(t));if(!t.s)return new l(tl);if(o=new l(o),!o.s){if(t.s<1)throw Error(ql+"Infinity");return o}if(o.eq(tl))return o;if(r=l.precision,t.eq(tl))return Qr(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=d<0?-d:d)<=MG){for(i=new l(tl),e=Math.ceil(r/mi+4),_i=!1;n%2&&(i=i.times(o),A8(i.d,e)),n=mv(n/2),n!==0;)o=o.times(o),A8(o.d,e);return _i=!0,t.s<0?new l(tl).div(i):Qr(i,r)}}else if(a<0)throw Error(ql+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,_i=!1,i=t.times(Fy(o,r+u)),_i=!0,i=LG(i),i.s=a,i};nn.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=xa(i),r=Jh(i,n<=a.toExpNeg||n>=a.toExpPos)):(gu(t,1,pv),e===void 0?e=a.rounding:gu(e,0,8),i=Qr(new a(i),t,e),n=xa(i),r=Jh(i,t<=n||n<=a.toExpNeg,t)),r};nn.toSignificantDigits=nn.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(gu(t,1,pv),e===void 0?e=r.rounding:gu(e,0,8)),Qr(new r(n),t,e)};nn.toString=nn.valueOf=nn.val=nn.toJSON=nn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=xa(t),n=t.constructor;return Jh(t,e<=n.toExpNeg||e>=n.toExpPos)};function RG(t,e){var n,r,i,a,s,o,l,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),_i?Qr(e,f):e;if(l=t.d,u=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,o=u.length):(r=u,i=s,o=l.length),s=Math.ceil(f/mi),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,r=u,u=l,l=r),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/Wa|0,l[a]%=Wa;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,_i?Qr(e,f):e}function gu(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Rh+t)}function eu(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=mi-r.length,n&&(a+=$d(n)),a+=r;s=t[e],r=s+"",n=mi-r.length,n&&(a+=$d(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Zu=function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Wa|0,s=a/Wa|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Wa+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,l,u,d,f,p,h,m,g,v,y,b,S,A,C,T,j,E,k=r.constructor,O=r.s==i.s?1:-1,D=r.d,M=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(ql+"Division by zero");for(l=r.e-i.e,j=M.length,C=D.length,h=new k(O),m=h.d=[],u=0;M[u]==(D[u]||0);)++u;if(M[u]>(D[u]||0)&&--l,a==null?b=a=k.precision:s?b=a+(xa(r)-xa(i))+1:b=a,b<0)return new k(0);if(b=b/mi+2|0,u=0,j==1)for(d=0,M=M[0],b++;(u<C||d)&&b--;u++)S=d*Wa+(D[u]||0),m[u]=S/M|0,d=S%M|0;else{for(d=Wa/(M[0]+1)|0,d>1&&(M=t(M,d),D=t(D,d),j=M.length,C=D.length),A=j,g=D.slice(0,j),v=g.length;v<j;)g[v++]=0;E=M.slice(),E.unshift(0),T=M[0],M[1]>=Wa/2&&++T;do d=0,o=e(M,g,j,v),o<0?(y=g[0],j!=v&&(y=y*Wa+(g[1]||0)),d=y/T|0,d>1?(d>=Wa&&(d=Wa-1),f=t(M,d),p=f.length,v=g.length,o=e(f,g,p,v),o==1&&(d--,n(f,j<p?E:M,p))):(d==0&&(o=d=1),f=M.slice()),p=f.length,p<v&&f.unshift(0),n(g,f,v),o==-1&&(v=g.length,o=e(M,g,j,v),o<1&&(d++,n(g,j<v?E:M,v))),v=g.length):o===0&&(d++,g=[0]),m[u++]=d,o&&g[0]?g[v++]=D[A]||0:(g=[D[A]],v=1);while((A++<C||g[0]!==void 0)&&b--)}return m[0]||m.shift(),h.e=l,Qr(h,s?a+xa(h)+1:a)}}();function LG(t,e){var n,r,i,a,s,o,l=0,u=0,d=t.constructor,f=d.precision;if(xa(t)>16)throw Error($3+xa(t));if(!t.s)return new d(tl);for(_i=!1,o=f,s=new d(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(oh(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new d(tl),d.precision=o;;){if(i=Qr(i.times(t),o),n=n.times(++l),s=a.plus(Zu(i,n,o)),eu(s.d).slice(0,o)===eu(a.d).slice(0,o)){for(;u--;)a=Qr(a.times(a),o);return d.precision=f,e==null?(_i=!0,Qr(a,f)):a}a=s}}function xa(t){for(var e=t.e*mi,n=t.d[0];n>=10;n/=10)e++;return e}function dC(t,e,n){if(e>t.LN10.sd())throw _i=!0,n&&(t.precision=n),Error(ql+"LN10 precision limit exceeded");return Qr(new t(t.LN10),e)}function $d(t){for(var e="";t--;)e+="0";return e}function Fy(t,e){var n,r,i,a,s,o,l,u,d,f=1,p=10,h=t,m=h.d,g=h.constructor,v=g.precision;if(h.s<1)throw Error(ql+(h.s?"NaN":"-Infinity"));if(h.eq(tl))return new g(0);if(e==null?(_i=!1,u=v):u=e,h.eq(10))return e==null&&(_i=!0),dC(g,u);if(u+=p,g.precision=u,n=eu(m),r=n.charAt(0),a=xa(h),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=eu(h.d),r=n.charAt(0),f++;a=xa(h),r>1?(h=new g("0."+n),a++):h=new g(r+"."+n.slice(1))}else return l=dC(g,u+2,v).times(a+""),h=Fy(new g(r+"."+n.slice(1)),u-p).plus(l),g.precision=v,e==null?(_i=!0,Qr(h,v)):h;for(o=s=h=Zu(h.minus(tl),h.plus(tl),u),d=Qr(h.times(h),u),i=3;;){if(s=Qr(s.times(d),u),l=o.plus(Zu(s,new g(i),u)),eu(l.d).slice(0,u)===eu(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(dC(g,u+2,v).times(a+""))),o=Zu(o,new g(f),u),g.precision=v,e==null?(_i=!0,Qr(o,v)):o;o=l,i+=2}}function _8(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=mv(n/mi),t.d=[],r=(n+1)%mi,n<0&&(r+=mi),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=mi;r<i;)t.d.push(+e.slice(r,r+=mi));e=e.slice(r),r=mi-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),_i&&(t.e>kw||t.e<-kw))throw Error($3+n)}else t.s=0,t.e=0,t.d=[0];return t}function Qr(t,e,n){var r,i,a,s,o,l,u,d,f=t.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=mi,i=e,u=f[d=0];else{if(d=Math.ceil((r+1)/mi),a=f.length,d>=a)return t;for(u=a=f[d],s=1;a>=10;a/=10)s++;r%=mi,i=r-mi+s}if(n!==void 0&&(a=oh(10,s-i-1),o=u/a%10|0,l=e<0||f[d+1]!==void 0||u%a,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?u/oh(10,s-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(a=xa(t),f.length=1,e=e-a-1,f[0]=oh(10,(mi-e%mi)%mi),t.e=mv(-e/mi)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,a=1,d--):(f.length=d+1,a=oh(10,mi-r),f[d]=i>0?(u/oh(10,s-i)%oh(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==Wa&&(f[0]=1,++t.e);break}else{if(f[d]+=a,f[d]!=Wa)break;f[d--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(_i&&(t.e>kw||t.e<-kw))throw Error($3+xa(t));return t}function FG(t,e){var n,r,i,a,s,o,l,u,d,f,p=t.constructor,h=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),_i?Qr(e,h):e;if(l=t.d,f=e.d,r=e.e,u=t.e,l=l.slice(),s=u-r,s){for(d=s<0,d?(n=l,s=-s,o=f.length):(n=f,r=u,o=l.length),i=Math.max(Math.ceil(h/mi),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}s=0}for(d&&(n=l,l=f,f=n,e.s=-e.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=Wa-1;--l[a],l[i]+=Wa}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,_i?Qr(e,h):e):new p(0)}function Jh(t,e,n){var r,i=xa(t),a=eu(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+$d(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+$d(-i-1)+a,n&&(r=n-s)>0&&(a+=$d(r))):i>=s?(a+=$d(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+$d(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=$d(r))),t.s<0?"-"+a:a}function A8(t,e){if(t.length>e)return t.length=e,!0}function zG(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Rh+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return _8(s,a.toString())}else if(typeof a!="string")throw Error(Rh+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,tke.test(a))_8(s,a);else throw Error(Rh+a)}if(i.prototype=nn,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=zG,i.config=i.set=nke,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function nke(t){if(!t||typeof t!="object")throw Error(ql+"Object expected");var e,n,r,i=["precision",1,pv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(mv(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Rh+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Rh+n+": "+r);return this}var B3=zG(eke);tl=new B3(1);const qr=B3;function rke(t){return oke(t)||ske(t)||ake(t)||ike()}function ike(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ake(t,e){if(t){if(typeof t=="string")return UE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UE(t,e)}}function ske(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function oke(t){if(Array.isArray(t))return UE(t)}function UE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var lke=function(e){return e},$G={},BG=function(e){return e===$G},C8=function(e){return function n(){return arguments.length===0||arguments.length===1&&BG(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},cke=function t(e,n){return e===1?n:C8(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==$G}).length;return s>=e?n.apply(void 0,i):t(e-s,C8(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=i.map(function(f){return BG(f)?l.shift():f});return n.apply(void 0,rke(d).concat(l))}))})},e_=function(e){return cke(e.length,e)},HE=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},uke=e_(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),dke=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return lke;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},WE=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},VG=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,l){return o===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function fke(t){var e;return t===0?e=1:e=Math.floor(new qr(t).abs().log(10).toNumber())+1,e}function hke(t,e,n){for(var r=new qr(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var pke=e_(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),mke=e_(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),gke=e_(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const t_={rangeStep:hke,getDigitCount:fke,interpolateNumber:pke,uninterpolateNumber:mke,uninterpolateTruncation:gke};function qE(t){return bke(t)||yke(t)||UG(t)||vke()}function vke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yke(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function bke(t){if(Array.isArray(t))return KE(t)}function zy(t,e){return Ske(t)||wke(t,e)||UG(t,e)||xke()}function xke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UG(t,e){if(t){if(typeof t=="string")return KE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KE(t,e)}}function KE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wke(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function Ske(t){if(Array.isArray(t))return t}function HG(t){var e=zy(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function WG(t,e,n){if(t.lte(0))return new qr(0);var r=t_.getDigitCount(t.toNumber()),i=new qr(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new qr(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=o.mul(i);return e?l:new qr(Math.ceil(l))}function _ke(t,e,n){var r=1,i=new qr(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new qr(10).pow(t_.getDigitCount(t)-1),i=new qr(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new qr(Math.floor(t)))}else t===0?i=new qr(Math.floor((e-1)/2)):n||(i=new qr(Math.floor(t)));var s=Math.floor((e-1)/2),o=dke(uke(function(l){return i.add(new qr(l-s).mul(r)).toNumber()}),HE);return o(0,e)}function qG(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new qr(0),tickMin:new qr(0),tickMax:new qr(0)};var a=WG(new qr(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new qr(0):(s=new qr(t).add(e).div(2),s=s.sub(new qr(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),l=Math.ceil(new qr(e).sub(s).div(a).toNumber()),u=o+l+1;return u>n?qG(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,o=e>0?o:o+(n-u)),{step:a,tickMin:s.sub(new qr(o).mul(a)),tickMax:s.add(new qr(l).mul(a))})}function Ake(t){var e=zy(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=HG([n,r]),l=zy(o,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(qE(HE(0,i-1).map(function(){return 1/0}))):[].concat(qE(HE(0,i-1).map(function(){return-1/0})),[d]);return n>r?WE(f):f}if(u===d)return _ke(u,i,a);var p=qG(u,d,s,a),h=p.step,m=p.tickMin,g=p.tickMax,v=t_.rangeStep(m,g.add(new qr(.1).mul(h)),h);return n>r?WE(v):v}function Cke(t,e){var n=zy(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=HG([r,i]),o=zy(s,2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var d=Math.max(e,2),f=WG(new qr(u).sub(l).div(d-1),a,0),p=[].concat(qE(t_.rangeStep(new qr(l),new qr(u).sub(new qr(.99).mul(f)),f)),[u]);return r>i?WE(p):p}var jke=VG(Ake),Nke=VG(Cke),Eke="Invariant failed";function ep(t,e){throw new Error(Eke)}var kke=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function Pw(){return Pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pw.apply(this,arguments)}function Pke(t,e){return Oke(t)||Ike(t,e)||Dke(t,e)||Tke()}function Tke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dke(t,e){if(t){if(typeof t=="string")return j8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j8(t,e)}}function j8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ike(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Oke(t){if(Array.isArray(t))return t}function Mke(t,e){if(t==null)return{};var n=Rke(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Rke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Lke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YG(r.key),r)}}function zke(t,e,n){return e&&Fke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $ke(t,e,n){return e=Tw(e),Bke(t,KG()?Reflect.construct(e,n||[],Tw(t).constructor):e.apply(t,n))}function Bke(t,e){if(e&&(_g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vke(t)}function Vke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KG=function(){return!!t})()}function Tw(t){return Tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tw(t)}function Uke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GE(t,e)}function GE(t,e){return GE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},GE(t,e)}function GG(t,e,n){return e=YG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YG(t){var e=Hke(t,"string");return _g(e)=="symbol"?e:e+""}function Hke(t,e){if(_g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_g(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ub=function(t){function e(){return Lke(this,e),$ke(this,e,arguments)}return Uke(e,t),zke(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,l=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,p=Mke(r,kke),h=mn(p,!1);this.props.direction==="x"&&d.type!=="number"&&ep();var m=l.map(function(g){var v=u(g,o),y=v.x,b=v.y,S=v.value,A=v.errorVal;if(!A)return null;var C=[],T,j;if(Array.isArray(A)){var E=Pke(A,2);T=E[0],j=E[1]}else T=j=A;if(a==="vertical"){var k=d.scale,O=b+i,D=O+s,M=O-s,L=k(S-T),V=k(S+j);C.push({x1:V,y1:D,x2:V,y2:M}),C.push({x1:L,y1:O,x2:V,y2:O}),C.push({x1:L,y1:D,x2:L,y2:M})}else if(a==="horizontal"){var Q=f.scale,Y=y+i,J=Y-s,q=Y+s,ee=Q(S-T),le=Q(S+j);C.push({x1:J,y1:le,x2:q,y2:le}),C.push({x1:Y,y1:ee,x2:Y,y2:le}),C.push({x1:J,y1:ee,x2:q,y2:ee})}return xe.createElement(rr,Pw({className:"recharts-errorBar",key:"bar-".concat(C.map(function(se){return"".concat(se.x1,"-").concat(se.x2,"-").concat(se.y1,"-").concat(se.y2)}))},h),C.map(function(se){return xe.createElement("line",Pw({},se,{key:"line-".concat(se.x1,"-").concat(se.x2,"-").concat(se.y1,"-").concat(se.y2)}))}))});return xe.createElement(rr,{className:"recharts-errorBars"},m)}}])}(xe.Component);GG(Ub,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});GG(Ub,"displayName","ErrorBar");function $y(t){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$y(t)}function N8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N8(Object(n),!0).forEach(function(r){Wke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wke(t,e,n){return e=qke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qke(t){var e=Kke(t,"string");return $y(e)=="symbol"?e:e+""}function Kke(t,e){if($y(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($y(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XG=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=el(n,Ac);if(!s)return null;var o=Ac.defaultProps,l=o!==void 0?Gf(Gf({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(d,f){var p=f.item,h=f.props,m=h.sectors||h.data||[];return d.concat(m.map(function(g){return{type:s.props.iconType||p.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var f=d.item,p=f.type.defaultProps,h=p!==void 0?Gf(Gf({},p),f.props):{},m=h.dataKey,g=h.name,v=h.legendType,y=h.hide;return{inactive:y,dataKey:m,type:l.iconType||v||"square",color:V3(f),value:g||m,payload:h}}),Gf(Gf(Gf({},l),Ac.getWithHeight(s,i)),{},{payload:u,item:s})};function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function E8(t){return Qke(t)||Xke(t)||Yke(t)||Gke()}function Gke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yke(t,e){if(t){if(typeof t=="string")return YE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YE(t,e)}}function Xke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qke(t){if(Array.isArray(t))return YE(t)}function YE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k8(Object(n),!0).forEach(function(r){Mm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mm(t,e,n){return e=Zke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zke(t){var e=Jke(t,"string");return By(e)=="symbol"?e:e+""}function Jke(t,e){if(By(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(By(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function la(t,e,n){return In(t)||In(e)?n:za(e)?cl(t,e,n):jn(e)?e(t):n}function D0(t,e,n,r){var i=XEe(t,function(o){return la(o,e)});if(n==="number"){var a=i.filter(function(o){return kt(o)||parseFloat(o)});return a.length?[JS(a),Gd(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!In(o)}):i;return s.map(function(o){return za(o)||o instanceof Date?o:""})}var ePe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,f=i[u].coordinate,p=u>=o-1?i[0].coordinate:i[u+1].coordinate,h=void 0;if(ro(f-d)!==ro(p-f)){var m=[];if(ro(p-f)===ro(l[1]-l[0])){h=p;var g=f+l[1]-l[0];m[0]=Math.min(g,(g+d)/2),m[1]=Math.max(g,(g+d)/2)}else{h=d;var v=p+l[1]-l[0];m[0]=Math.min(f,(v+f)/2),m[1]=Math.max(f,(v+f)/2)}var y=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(e>y[0]&&e<=y[1]||e>=m[0]&&e<=m[1]){s=i[u].index;break}}else{var b=Math.min(d,p),S=Math.max(d,p);if(e>(b+f)/2&&e<=(S+f)/2){s=i[u].index;break}}}else for(var A=0;A<o;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){s=r[A].index;break}return s},V3=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Vi(Vi({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},tPe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),l=0,u=o.length;l<u;l++)for(var d=a[o[l]].stackGroups,f=Object.keys(d),p=0,h=f.length;p<h;p++){var m=d[f[p]],g=m.items,v=m.cateAxisId,y=g.filter(function(j){return Qu(j.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,S=b!==void 0?Vi(Vi({},b),y[0].props):y[0].props,A=S.barSize,C=S[v];s[C]||(s[C]=[]);var T=In(A)?n:A;s[C].push({item:y[0],stackList:y.slice(1),barSize:In(T)?void 0:io(T,r,0)})}}return s},nPe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,l=s.length;if(l<1)return null;var u=io(n,i,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var p=!1,h=i/l,m=s.reduce(function(A,C){return A+C.barSize||0},0);m+=(l-1)*u,m>=i&&(m-=(l-1)*u,u=0),m>=i&&h>0&&(p=!0,h*=.9,m=l*h);var g=(i-m)/2>>0,v={offset:g-u,size:0};d=s.reduce(function(A,C){var T={item:C.item,position:{offset:v.offset+v.size+u,size:p?h:C.barSize}},j=[].concat(E8(A),[T]);return v=j[j.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(E){j.push({item:E,position:v})}),j},f)}else{var y=io(r,i,0,!0);i-2*y-(l-1)*u<=0&&(u=0);var b=(i-2*y-(l-1)*u)/l;b>1&&(b>>=0);var S=o===+o?Math.min(b,o):b;d=s.reduce(function(A,C,T){var j=[].concat(E8(A),[{item:C.item,position:{offset:y+(b+u)*T+(b-S)/2,size:S}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(E){j.push({item:E,position:j[j.length-1].position})}),j},f)}return d},rPe=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,l=s-(o.left||0)-(o.right||0),u=XG({children:a,legendWidth:l});if(u){var d=i||{},f=d.width,p=d.height,h=u.align,m=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&h!=="center"&&kt(e[h]))return Vi(Vi({},e),{},Mm({},h,e[h]+(f||0)));if((g==="horizontal"||g==="vertical"&&h==="center")&&m!=="middle"&&kt(e[m]))return Vi(Vi({},e),{},Mm({},m,e[m]+(p||0)))}return e},iPe=function(e,n,r){return In(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},QG=function(e,n,r,i,a){var s=n.props.children,o=ul(s,Ub).filter(function(u){return iPe(i,a,u.props.direction)});if(o&&o.length){var l=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=la(d,r);if(In(f))return u;var p=Array.isArray(f)?[JS(f),Gd(f)]:[f,f],h=l.reduce(function(m,g){var v=la(d,g,0),y=p[0]-Math.abs(Array.isArray(v)?v[0]:v),b=p[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(y,m[0]),Math.max(b,m[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},aPe=function(e,n,r,i,a){var s=n.map(function(o){return QG(e,o,r,a,i)}).filter(function(o){return!In(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},ZG=function(e,n,r,i,a){var s=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&QG(e,l,u,i)||D0(e,u,r,a)});if(r==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,l.push(u[d]));return l},[])},JG=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},eY=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var a,s,o=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate});return a||o.push(n),s||o.push(r),o},qu=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?ro(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var p=a?a.indexOf(f):f;return{coordinate:i(p)+u,value:f,offset:u}});return d.filter(function(f){return!cv(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,p){return{coordinate:i(f)+u,value:f,index:p,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,p){return{coordinate:i(f)+u,value:a?a[f]:f,index:p,offset:u}})},fC=new WeakMap,Qx=function(e,n){if(typeof n!="function")return e;fC.has(e)||fC.set(e,new WeakMap);var r=fC.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},tY=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:Iy(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:Cw(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:T0(),realScaleType:"point"}:a==="category"?{scale:Iy(),realScaleType:"band"}:{scale:Cw(),realScaleType:"linear"};if(Yh(i)){var l="scale".concat(zS(i));return{scale:(S8[l]||T0)(),realScaleType:S8[l]?l:"point"}}return jn(i)?{scale:i}:{scale:T0(),realScaleType:"point"}},P8=1e-4,nY=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-P8,s=Math.max(i[0],i[1])+P8,o=e(n[0]),l=e(n[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([n[0],n[r-1]])}},sPe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},oPe=function(e,n){if(!n||n.length!==2||!kt(n[0])||!kt(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!kt(e[0])||e[0]<r)&&(a[0]=r),(!kt(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},lPe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var l=cv(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},cPe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=cv(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},uPe={sign:lPe,expand:kbe,none:mg,silhouette:Pbe,wiggle:Tbe,positive:cPe},dPe=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=uPe[r],s=Ebe().keys(i).value(function(o,l){return+la(o,l,0)}).order(xE).offset(a);return s(e)},fPe=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,l={},u=o.reduce(function(f,p){var h,m=(h=p.type)!==null&&h!==void 0&&h.defaultProps?Vi(Vi({},p.type.defaultProps),p.props):p.props,g=m.stackId,v=m.hide;if(v)return f;var y=m[r],b=f[y]||{hasStack:!1,stackGroups:{}};if(za(g)){var S=b.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};S.items.push(p),b.hasStack=!0,b.stackGroups[g]=S}else b.stackGroups[bp("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return Vi(Vi({},f),{},Mm({},y,b))},l),d={};return Object.keys(u).reduce(function(f,p){var h=u[p];if(h.hasStack){var m={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(g,v){var y=h.stackGroups[v];return Vi(Vi({},g),{},Mm({},v,{numericAxisId:r,cateAxisId:i,items:y.items,stackedData:dPe(e,y.items,a)}))},m)}return Vi(Vi({},f),{},Mm({},p,h))},d)},rY=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=jke(u,a,o);return e.domain([JS(d),Gd(d)]),{niceTicks:d}}if(a&&i==="number"){var f=e.domain(),p=Nke(f,a,o);return{niceTicks:p}}return null};function Dw(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!In(i[e.dataKey])){var o=iw(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=la(i,In(s)?e.dataKey:s);return In(l)?null:e.scale(l)}var T8=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=la(s,n.dataKey,n.domain[o]);return In(l)?null:n.scale(l)-a/2+i},hPe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},pPe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Vi(Vi({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(za(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},mPe=function(e){return e.reduce(function(n,r){return[JS(r.concat([n[0]]).filter(kt)),Gd(r.concat([n[1]]).filter(kt))]},[1/0,-1/0])},iY=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,l=o.reduce(function(u,d){var f=mPe(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},D8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,I8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,XE=function(e,n,r){if(jn(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(kt(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(D8.test(e[0])){var a=+D8.exec(e[0])[1];i[0]=n[0]-a}else jn(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(kt(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(I8.test(e[1])){var s=+I8.exec(e[1])[1];i[1]=n[1]+s}else jn(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Iw=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=g3(n,function(f){return f.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var u=a[o],d=a[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},O8=function(e,n,r){return!e||!e.length||Zh(e,cl(r,"type.defaultProps.domain"))?n:e},aY=function(e,n){var r=e.type.defaultProps?Vi(Vi({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,l=r.tooltipType,u=r.chartType,d=r.hide;return Vi(Vi({},mn(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:V3(e),value:la(n,i),type:l,payload:n,chartType:u,hide:d})};function Vy(t){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vy(t)}function M8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M8(Object(n),!0).forEach(function(r){sY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sY(t,e,n){return e=gPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gPe(t){var e=vPe(t,"string");return Vy(e)=="symbol"?e:e+""}function vPe(t,e){if(Vy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yPe(t,e){return SPe(t)||wPe(t,e)||xPe(t,e)||bPe()}function bPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xPe(t,e){if(t){if(typeof t=="string")return R8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R8(t,e)}}function R8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function SPe(t){if(Array.isArray(t))return t}var Ow=Math.PI/180,_Pe=function(e){return e*180/Math.PI},ai=function(e,n,r,i){return{x:e+Math.cos(-Ow*i)*r,y:n+Math.sin(-Ow*i)*r}},oY=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},APe=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.startAngle,u=e.endAngle,d=io(e.cx,s,s/2),f=io(e.cy,o,o/2),p=oY(s,o,r),h=io(e.innerRadius,p,0),m=io(e.outerRadius,p,p*.8),g=Object.keys(n);return g.reduce(function(v,y){var b=n[y],S=b.domain,A=b.reversed,C;if(In(b.range))i==="angleAxis"?C=[l,u]:i==="radiusAxis"&&(C=[h,m]),A&&(C=[C[1],C[0]]);else{C=b.range;var T=C,j=yPe(T,2);l=j[0],u=j[1]}var E=tY(b,a),k=E.realScaleType,O=E.scale;O.domain(S).range(C),nY(O);var D=rY(O,Lu(Lu({},b),{},{realScaleType:k})),M=Lu(Lu(Lu({},b),D),{},{range:C,radius:m,realScaleType:k,scale:O,cx:d,cy:f,innerRadius:h,outerRadius:m,startAngle:l,endAngle:u});return Lu(Lu({},v),{},sY({},y,M))},{})},CPe=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},jPe=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=CPe({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var l=(r-a)/o,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:o,angle:_Pe(u),angleInRadian:u}},NPe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},EPe=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},L8=function(e,n){var r=e.x,i=e.y,a=jPe({x:r,y:i},n),s=a.radius,o=a.angle,l=n.innerRadius,u=n.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var d=NPe(n),f=d.startAngle,p=d.endAngle,h=o,m;if(f<=p){for(;h>p;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=p}else{for(;h>f;)h-=360;for(;h<p;)h+=360;m=h>=p&&h<=f}return m?Lu(Lu({},n),{},{radius:s,angle:EPe(h,n)}):null},lY=function(e){return!I.isValidElement(e)&&!jn(e)&&typeof e!="boolean"?e.className:""};function Uy(t){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(t)}var kPe=["offset"];function PPe(t){return OPe(t)||IPe(t)||DPe(t)||TPe()}function TPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DPe(t,e){if(t){if(typeof t=="string")return QE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QE(t,e)}}function IPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OPe(t){if(Array.isArray(t))return QE(t)}function QE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function MPe(t,e){if(t==null)return{};var n=RPe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function F8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ma(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F8(Object(n),!0).forEach(function(r){LPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LPe(t,e,n){return e=FPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FPe(t){var e=zPe(t,"string");return Uy(e)=="symbol"?e:e+""}function zPe(t,e){if(Uy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hy(){return Hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hy.apply(this,arguments)}var $Pe=function(e){var n=e.value,r=e.formatter,i=In(e.children)?n:e.children;return jn(r)?r(i):i},BPe=function(e,n){var r=ro(n-e),i=Math.min(Math.abs(n-e),360);return r*i},VPe=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,l=a,u=l.cx,d=l.cy,f=l.innerRadius,p=l.outerRadius,h=l.startAngle,m=l.endAngle,g=l.clockWise,v=(f+p)/2,y=BPe(h,m),b=y>=0?1:-1,S,A;i==="insideStart"?(S=h+b*s,A=g):i==="insideEnd"?(S=m-b*s,A=!g):i==="end"&&(S=m+b*s,A=g),A=y<=0?A:!A;var C=ai(u,d,v,S),T=ai(u,d,v,S+(A?1:-1)*359),j="M".concat(C.x,",").concat(C.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(A?0:1,`,
    `).concat(T.x,",").concat(T.y),E=In(e.id)?bp("recharts-radial-line-"):e.id;return xe.createElement("text",Hy({},r,{dominantBaseline:"central",className:$n("recharts-radial-bar-label",o)}),xe.createElement("defs",null,xe.createElement("path",{id:E,d:j})),xe.createElement("textPath",{xlinkHref:"#".concat(E)},n))},UPe=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,l=a.innerRadius,u=a.outerRadius,d=a.startAngle,f=a.endAngle,p=(d+f)/2;if(i==="outside"){var h=ai(s,o,u+r,p),m=h.x,g=h.y;return{x:m,y:g,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,y=ai(s,o,v,p),b=y.x,S=y.y;return{x:b,y:S,textAnchor:"middle",verticalAnchor:"middle"}},HPe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,l=s.y,u=s.width,d=s.height,f=d>=0?1:-1,p=f*i,h=f>0?"end":"start",m=f>0?"start":"end",g=u>=0?1:-1,v=g*i,y=g>0?"end":"start",b=g>0?"start":"end";if(a==="top"){var S={x:o+u/2,y:l-f*i,textAnchor:"middle",verticalAnchor:h};return Ma(Ma({},S),r?{height:Math.max(l-r.y,0),width:u}:{})}if(a==="bottom"){var A={x:o+u/2,y:l+d+p,textAnchor:"middle",verticalAnchor:m};return Ma(Ma({},A),r?{height:Math.max(r.y+r.height-(l+d),0),width:u}:{})}if(a==="left"){var C={x:o-v,y:l+d/2,textAnchor:y,verticalAnchor:"middle"};return Ma(Ma({},C),r?{width:Math.max(C.x-r.x,0),height:d}:{})}if(a==="right"){var T={x:o+u+v,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return Ma(Ma({},T),r?{width:Math.max(r.x+r.width-T.x,0),height:d}:{})}var j=r?{width:u,height:d}:{};return a==="insideLeft"?Ma({x:o+v,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},j):a==="insideRight"?Ma({x:o+u-v,y:l+d/2,textAnchor:y,verticalAnchor:"middle"},j):a==="insideTop"?Ma({x:o+u/2,y:l+p,textAnchor:"middle",verticalAnchor:m},j):a==="insideBottom"?Ma({x:o+u/2,y:l+d-p,textAnchor:"middle",verticalAnchor:h},j):a==="insideTopLeft"?Ma({x:o+v,y:l+p,textAnchor:b,verticalAnchor:m},j):a==="insideTopRight"?Ma({x:o+u-v,y:l+p,textAnchor:y,verticalAnchor:m},j):a==="insideBottomLeft"?Ma({x:o+v,y:l+d-p,textAnchor:b,verticalAnchor:h},j):a==="insideBottomRight"?Ma({x:o+u-v,y:l+d-p,textAnchor:y,verticalAnchor:h},j):av(a)&&(kt(a.x)||wh(a.x))&&(kt(a.y)||wh(a.y))?Ma({x:o+io(a.x,u),y:l+io(a.y,d),textAnchor:"end",verticalAnchor:"end"},j):Ma({x:o+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},WPe=function(e){return"cx"in e&&kt(e.cx)};function Ga(t){var e=t.offset,n=e===void 0?5:e,r=MPe(t,kPe),i=Ma({offset:n},r),a=i.viewBox,s=i.position,o=i.value,l=i.children,u=i.content,d=i.className,f=d===void 0?"":d,p=i.textBreakAll;if(!a||In(o)&&In(l)&&!I.isValidElement(u)&&!jn(u))return null;if(I.isValidElement(u))return I.cloneElement(u,i);var h;if(jn(u)){if(h=I.createElement(u,i),I.isValidElement(h))return h}else h=$Pe(i);var m=WPe(a),g=mn(i,!0);if(m&&(s==="insideStart"||s==="insideEnd"||s==="end"))return VPe(i,h,g);var v=m?UPe(i):HPe(i);return xe.createElement(Qh,Hy({className:$n("recharts-label",f)},g,v,{breakAll:p}),h)}Ga.displayName="Label";var cY=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,l=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,p=e.y,h=e.top,m=e.left,g=e.width,v=e.height,y=e.clockWise,b=e.labelViewBox;if(b)return b;if(kt(g)&&kt(v)){if(kt(f)&&kt(p))return{x:f,y:p,width:g,height:v};if(kt(h)&&kt(m))return{x:h,y:m,width:g,height:v}}return kt(f)&&kt(p)?{x:f,y:p,width:0,height:0}:kt(n)&&kt(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||l||o||0,clockWise:y}:e.viewBox?e.viewBox:{}},qPe=function(e,n){return e?e===!0?xe.createElement(Ga,{key:"label-implicit",viewBox:n}):za(e)?xe.createElement(Ga,{key:"label-implicit",viewBox:n,value:e}):I.isValidElement(e)?e.type===Ga?I.cloneElement(e,{key:"label-implicit",viewBox:n}):xe.createElement(Ga,{key:"label-implicit",content:e,viewBox:n}):jn(e)?xe.createElement(Ga,{key:"label-implicit",content:e,viewBox:n}):av(e)?xe.createElement(Ga,Hy({viewBox:n},e,{key:"label-implicit"})):null:null},KPe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=cY(e),s=ul(i,Ga).map(function(l,u){return I.cloneElement(l,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var o=qPe(e.label,n||a);return[o].concat(PPe(s))};Ga.parseViewBox=cY;Ga.renderCallByParent=KPe;function GPe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var YPe=GPe;const XPe=Mr(YPe);function Wy(t){"@babel/helpers - typeof";return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wy(t)}var QPe=["valueAccessor"],ZPe=["data","dataKey","clockWise","id","textBreakAll"];function JPe(t){return r4e(t)||n4e(t)||t4e(t)||e4e()}function e4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t4e(t,e){if(t){if(typeof t=="string")return ZE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZE(t,e)}}function n4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function r4e(t){if(Array.isArray(t))return ZE(t)}function ZE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mw.apply(this,arguments)}function z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z8(Object(n),!0).forEach(function(r){i4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i4e(t,e,n){return e=a4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a4e(t){var e=s4e(t,"string");return Wy(e)=="symbol"?e:e+""}function s4e(t,e){if(Wy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B8(t,e){if(t==null)return{};var n=o4e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function o4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var l4e=function(e){return Array.isArray(e.value)?XPe(e.value):e.value};function No(t){var e=t.valueAccessor,n=e===void 0?l4e:e,r=B8(t,QPe),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,l=r.textBreakAll,u=B8(r,ZPe);return!i||!i.length?null:xe.createElement(rr,{className:"recharts-label-list"},i.map(function(d,f){var p=In(a)?n(d,f):la(d&&d.payload,a),h=In(o)?{}:{id:"".concat(o,"-").concat(f)};return xe.createElement(Ga,Mw({},mn(d,!0),u,h,{parentViewBox:d.parentViewBox,value:p,textBreakAll:l,viewBox:Ga.parseViewBox(In(s)?d:$8($8({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}No.displayName="LabelList";function c4e(t,e){return t?t===!0?xe.createElement(No,{key:"labelList-implicit",data:e}):xe.isValidElement(t)||jn(t)?xe.createElement(No,{key:"labelList-implicit",data:e,content:t}):av(t)?xe.createElement(No,Mw({data:e},t,{key:"labelList-implicit"})):null:null}function u4e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=ul(r,No).map(function(s,o){return I.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=c4e(t.label,e);return[a].concat(JPe(i))}No.renderCallByParent=u4e;function qy(t){"@babel/helpers - typeof";return qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qy(t)}function JE(){return JE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JE.apply(this,arguments)}function V8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V8(Object(n),!0).forEach(function(r){d4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d4e(t,e,n){return e=f4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f4e(t){var e=h4e(t,"string");return qy(e)=="symbol"?e:e+""}function h4e(t,e){if(qy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p4e=function(e,n){var r=ro(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Zx=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,d=l*(o?1:-1)+i,f=Math.asin(l/d)/Ow,p=u?a:a+s*f,h=ai(n,r,d,p),m=ai(n,r,i,p),g=u?a-s*f:a,v=ai(n,r,d*Math.cos(f*Ow),g);return{center:h,circleTangency:m,lineTangency:v,theta:f}},uY=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,l=p4e(s,o),u=s+l,d=ai(n,r,a,s),f=ai(n,r,a,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var h=ai(n,r,i,s),m=ai(n,r,i,u);p+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},m4e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=ro(d-u),p=Zx({cx:n,cy:r,radius:a,angle:u,sign:f,cornerRadius:s,cornerIsExternal:l}),h=p.circleTangency,m=p.lineTangency,g=p.theta,v=Zx({cx:n,cy:r,radius:a,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:l}),y=v.circleTangency,b=v.lineTangency,S=v.theta,A=l?Math.abs(u-d):Math.abs(u-d)-g-S;if(A<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):uY({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var C="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(A>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var T=Zx({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),j=T.circleTangency,E=T.lineTangency,k=T.theta,O=Zx({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),D=O.circleTangency,M=O.lineTangency,L=O.theta,V=l?Math.abs(u-d):Math.abs(u-d)-k-L;if(V<0&&s===0)return"".concat(C,"L").concat(n,",").concat(r,"Z");C+="L".concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(V>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,"Z")}else C+="L".concat(n,",").concat(r,"Z");return C},g4e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},dY=function(e){var n=U8(U8({},g4e),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,p=n.className;if(s<a||d===f)return null;var h=$n("recharts-sector",p),m=s-a,g=io(o,m,0,!0),v;return g>0&&Math.abs(d-f)<360?v=m4e({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}):v=uY({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:f}),xe.createElement("path",JE({},mn(n,!0),{className:h,d:v,role:"img"}))};function Ky(t){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(t)}function ek(){return ek=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ek.apply(this,arguments)}function H8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function W8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H8(Object(n),!0).forEach(function(r){v4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v4e(t,e,n){return e=y4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y4e(t){var e=b4e(t,"string");return Ky(e)=="symbol"?e:e+""}function b4e(t,e){if(Ky(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q8={curveBasisClosed:vbe,curveBasisOpen:ybe,curveBasis:gbe,curveBumpX:nbe,curveBumpY:rbe,curveLinearClosed:bbe,curveLinear:BS,curveMonotoneX:xbe,curveMonotoneY:wbe,curveNatural:Sbe,curveStep:_be,curveStepAfter:Cbe,curveStepBefore:Abe},Jx=function(e){return e.x===+e.x&&e.y===+e.y},Hv=function(e){return e.x},Wv=function(e){return e.y},x4e=function(e,n){if(jn(e))return e;var r="curve".concat(zS(e));return(r==="curveMonotone"||r==="curveBump")&&n?q8["".concat(r).concat(n==="vertical"?"Y":"X")]:q8[r]||BS},w4e=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,l=e.connectNulls,u=l===void 0?!1:l,d=x4e(r,o),f=u?a.filter(function(g){return Jx(g)}):a,p;if(Array.isArray(s)){var h=u?s.filter(function(g){return Jx(g)}):s,m=f.map(function(g,v){return W8(W8({},g),{},{base:h[v]})});return o==="vertical"?p=Ux().y(Wv).x1(Hv).x0(function(g){return g.base.x}):p=Ux().x(Hv).y1(Wv).y0(function(g){return g.base.y}),p.defined(Jx).curve(d),p(m)}return o==="vertical"&&kt(s)?p=Ux().y(Wv).x1(Hv).x0(s):kt(s)?p=Ux().x(Hv).y1(Wv).y0(s):p=aK().x(Hv).y(Wv),p.defined(Jx).curve(d),p(f)},Lh=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?w4e(e):i;return I.createElement("path",ek({},mn(e,!1),aw(e),{className:$n("recharts-curve",n),d:s,ref:a}))},fY={exports:{}},S4e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_4e=S4e,A4e=_4e;function hY(){}function pY(){}pY.resetWarningCache=hY;var C4e=function(){function t(r,i,a,s,o,l){if(l!==A4e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:pY,resetWarningCache:hY};return n.PropTypes=n,n};fY.exports=C4e();var j4e=fY.exports;const Ir=Mr(j4e);var N4e=Object.getOwnPropertyNames,E4e=Object.getOwnPropertySymbols,k4e=Object.prototype.hasOwnProperty;function K8(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function e1(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);var l=t(n,r,i);return a.delete(n),a.delete(r),l}}function P4e(t){return t!=null?t[Symbol.toStringTag]:void 0}function G8(t){return N4e(t).concat(E4e(t))}var T4e=Object.hasOwn||function(t,e){return k4e.call(t,e)};function Sp(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var D4e="__v",I4e="__o",O4e="_owner",Y8=Object.getOwnPropertyDescriptor,X8=Object.keys;function M4e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function R4e(t,e){return Sp(t.getTime(),e.getTime())}function L4e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function F4e(t,e){return t===e}function Q8(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),s,o,l=0;(s=a.next())&&!s.done;){for(var u=e.entries(),d=!1,f=0;(o=u.next())&&!o.done;){if(i[f]){f++;continue}var p=s.value,h=o.value;if(n.equals(p[0],h[0],l,f,t,e,n)&&n.equals(p[1],h[1],p[0],h[0],t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1;l++}return!0}var z4e=Sp;function $4e(t,e,n){var r=X8(t),i=r.length;if(X8(e).length!==i)return!1;for(;i-- >0;)if(!mY(t,e,n,r[i]))return!1;return!0}function qv(t,e,n){var r=G8(t),i=r.length;if(G8(e).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=r[i],!mY(t,e,n,a)||(s=Y8(t,a),o=Y8(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function B4e(t,e){return Sp(t.valueOf(),e.valueOf())}function V4e(t,e){return t.source===e.source&&t.flags===e.flags}function Z8(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),s,o;(s=a.next())&&!s.done;){for(var l=e.values(),u=!1,d=0;(o=l.next())&&!o.done;){if(!i[d]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function U4e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function H4e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function mY(t,e,n,r){return(r===O4e||r===I4e||r===D4e)&&(t.$$typeof||e.$$typeof)?!0:T4e(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var W4e="[object Arguments]",q4e="[object Boolean]",K4e="[object Date]",G4e="[object Error]",Y4e="[object Map]",X4e="[object Number]",Q4e="[object Object]",Z4e="[object RegExp]",J4e="[object Set]",eTe="[object String]",tTe="[object URL]",nTe=Array.isArray,J8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,e7=Object.assign,rTe=Object.prototype.toString.call.bind(Object.prototype.toString);function iTe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,p=t.areUrlsEqual,h=t.unknownTagComparators;return function(g,v,y){if(g===v)return!0;if(g==null||v==null)return!1;var b=typeof g;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?s(g,v,y):b==="function"?i(g,v,y):!1;var S=g.constructor;if(S!==v.constructor)return!1;if(S===Object)return o(g,v,y);if(nTe(g))return e(g,v,y);if(J8!=null&&J8(g))return f(g,v,y);if(S===Date)return n(g,v,y);if(S===RegExp)return u(g,v,y);if(S===Map)return a(g,v,y);if(S===Set)return d(g,v,y);var A=rTe(g);if(A===K4e)return n(g,v,y);if(A===Z4e)return u(g,v,y);if(A===Y4e)return a(g,v,y);if(A===J4e)return d(g,v,y);if(A===Q4e)return typeof g.then!="function"&&typeof v.then!="function"&&o(g,v,y);if(A===tTe)return p(g,v,y);if(A===G4e)return r(g,v,y);if(A===W4e)return o(g,v,y);if(A===q4e||A===X4e||A===eTe)return l(g,v,y);if(h){var C=h[A];if(!C){var T=P4e(g);T&&(C=h[T])}if(C)return C(g,v,y)}return!1}}function aTe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?qv:M4e,areDatesEqual:R4e,areErrorsEqual:L4e,areFunctionsEqual:F4e,areMapsEqual:r?K8(Q8,qv):Q8,areNumbersEqual:z4e,areObjectsEqual:r?qv:$4e,arePrimitiveWrappersEqual:B4e,areRegExpsEqual:V4e,areSetsEqual:r?K8(Z8,qv):Z8,areTypedArraysEqual:r?qv:U4e,areUrlsEqual:H4e,unknownTagComparators:void 0};if(n&&(i=e7({},i,n(i))),e){var a=e1(i.areArraysEqual),s=e1(i.areMapsEqual),o=e1(i.areObjectsEqual),l=e1(i.areSetsEqual);i=e7({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}function sTe(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function oTe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(l,u){var d=r(),f=d.cache,p=f===void 0?e?new WeakMap:void 0:f,h=d.meta;return n(l,u,{cache:p,equals:i,meta:h,strict:a})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,u){return n(l,u,s)}}var lTe=Mf();Mf({strict:!0});Mf({circular:!0});Mf({circular:!0,strict:!0});Mf({createInternalComparator:function(){return Sp}});Mf({strict:!0,createInternalComparator:function(){return Sp}});Mf({circular:!0,createInternalComparator:function(){return Sp}});Mf({circular:!0,createInternalComparator:function(){return Sp},strict:!0});function Mf(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,s=a===void 0?!1:a,o=aTe(t),l=iTe(o),u=r?r(l):sTe(l);return oTe({circular:n,comparator:l,createState:i,equals:u,strict:s})}function cTe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function t7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):cTe(i)};requestAnimationFrame(r)}function tk(t){"@babel/helpers - typeof";return tk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tk(t)}function uTe(t){return pTe(t)||hTe(t)||fTe(t)||dTe()}function dTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fTe(t,e){if(t){if(typeof t=="string")return n7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n7(t,e)}}function n7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pTe(t){if(Array.isArray(t))return t}function mTe(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=uTe(s),l=o[0],u=o.slice(1);if(typeof l=="number"){t7(i.bind(null,u),l);return}i(l),t7(i.bind(null,u));return}tk(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Gy(t){"@babel/helpers - typeof";return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gy(t)}function r7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function i7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r7(Object(n),!0).forEach(function(r){gY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gY(t,e,n){return e=gTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gTe(t){var e=vTe(t,"string");return Gy(e)==="symbol"?e:String(e)}function vTe(t,e){if(Gy(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yTe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},bTe=function(e){return e},xTe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},I0=function(e,n){return Object.keys(n).reduce(function(r,i){return i7(i7({},r),{},gY({},i,e(i,n[i])))},{})},a7=function(e,n,r){return e.map(function(i){return"".concat(xTe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function wTe(t,e){return ATe(t)||_Te(t,e)||vY(t,e)||STe()}function STe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Te(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function ATe(t){if(Array.isArray(t))return t}function CTe(t){return ETe(t)||NTe(t)||vY(t)||jTe()}function jTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vY(t,e){if(t){if(typeof t=="string")return nk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nk(t,e)}}function NTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ETe(t){if(Array.isArray(t))return nk(t)}function nk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Rw=1e-4,yY=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},bY=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},s7=function(e,n){return function(r){var i=yY(e,n);return bY(i,r)}},kTe=function(e,n){return function(r){var i=yY(e,n),a=[].concat(CTe(i.map(function(s,o){return s*o}).slice(1)),[0]);return bY(a,r)}},o7=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=wTe(u,4);i=d[0],a=d[1],s=d[2],o=d[3]}}}var f=s7(i,s),p=s7(a,o),h=kTe(i,s),m=function(y){return y>1?1:y<0?0:y},g=function(y){for(var b=y>1?1:y,S=b,A=0;A<8;++A){var C=f(S)-b,T=h(S);if(Math.abs(C-b)<Rw||T<Rw)return p(S);S=m(S-C/T)}return p(S)};return g.isStepper=!1,g},PTe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,l=function(d,f,p){var h=-(d-f)*r,m=p*a,g=p+(h-m)*o/1e3,v=p*o/1e3+d;return Math.abs(v-f)<Rw&&Math.abs(g)<Rw?[f,0]:[v,g]};return l.isStepper=!0,l.dt=o,l},TTe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return o7(i);case"spring":return PTe();default:if(i.split("(")[0]==="cubic-bezier")return o7(i)}return typeof i=="function"?i:null};function Yy(t){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yy(t)}function l7(t){return OTe(t)||ITe(t)||xY(t)||DTe()}function DTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ITe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OTe(t){if(Array.isArray(t))return ik(t)}function c7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ls(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c7(Object(n),!0).forEach(function(r){rk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rk(t,e,n){return e=MTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MTe(t){var e=RTe(t,"string");return Yy(e)==="symbol"?e:String(e)}function RTe(t,e){if(Yy(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LTe(t,e){return $Te(t)||zTe(t,e)||xY(t,e)||FTe()}function FTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xY(t,e){if(t){if(typeof t=="string")return ik(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ik(t,e)}}function ik(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function $Te(t){if(Array.isArray(t))return t}var Lw=function(e,n,r){return e+(n-e)*r},ak=function(e){var n=e.from,r=e.to;return n!==r},BTe=function t(e,n,r){var i=I0(function(a,s){if(ak(s)){var o=e(s.from,s.to,s.velocity),l=LTe(o,2),u=l[0],d=l[1];return ls(ls({},s),{},{from:u,velocity:d})}return s},n);return r<1?I0(function(a,s){return ak(s)?ls(ls({},s),{},{velocity:Lw(s.velocity,i[a].velocity,r),from:Lw(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const VTe=function(t,e,n,r,i){var a=yTe(t,e),s=a.reduce(function(v,y){return ls(ls({},v),{},rk({},y,[t[y],e[y]]))},{}),o=a.reduce(function(v,y){return ls(ls({},v),{},rk({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,u,d,f=function(){return null},p=function(){return I0(function(y,b){return b.from},o)},h=function(){return!Object.values(o).filter(ak).length},m=function(y){u||(u=y);var b=y-u,S=b/n.dt;o=BTe(n,o,S),i(ls(ls(ls({},t),e),p())),u=y,h()||(l=requestAnimationFrame(f))},g=function(y){d||(d=y);var b=(y-d)/r,S=I0(function(C,T){return Lw.apply(void 0,l7(T).concat([n(b)]))},s);if(i(ls(ls(ls({},t),e),S)),b<1)l=requestAnimationFrame(f);else{var A=I0(function(C,T){return Lw.apply(void 0,l7(T).concat([n(1)]))},s);i(ls(ls(ls({},t),e),A))}};return f=n.isStepper?m:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}var UTe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function HTe(t,e){if(t==null)return{};var n=WTe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WTe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function hC(t){return YTe(t)||GTe(t)||KTe(t)||qTe()}function qTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KTe(t,e){if(t){if(typeof t=="string")return sk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sk(t,e)}}function GTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function YTe(t){if(Array.isArray(t))return sk(t)}function sk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u7(Object(n),!0).forEach(function(r){c0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c0(t,e,n){return e=wY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wY(r.key),r)}}function ZTe(t,e,n){return e&&QTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wY(t){var e=JTe(t,"string");return Ag(e)==="symbol"?e:String(e)}function JTe(t,e){if(Ag(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ag(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function e3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ok(t,e)}function ok(t,e){return ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ok(t,e)}function t3e(t){var e=n3e();return function(){var r=Fw(t),i;if(e){var a=Fw(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return lk(this,i)}}function lk(t,e){if(e&&(Ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ck(t)}function ck(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fw(t){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fw(t)}var Pc=function(t){e3e(n,t);var e=t3e(n);function n(r,i){var a;XTe(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,l=s.attributeName,u=s.from,d=s.to,f=s.steps,p=s.children,h=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(ck(a)),a.changeStyle=a.changeStyle.bind(ck(a)),!o||h<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:d}),lk(a);if(f&&f.length)a.state={style:f[0].style};else if(u){if(typeof p=="function")return a.state={style:u},lk(a);a.state={style:l?c0({},l,u):u}}else a.state={style:{}};return a}return ZTe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,d=a.to,f=a.from,p=this.state.style;if(o){if(!s){var h={style:l?c0({},l,d):d};this.state&&p&&(l&&p[l]!==d||!l&&p!==d)&&this.setState(h);return}if(!(lTe(i.to,d)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||u?f:i.to;if(this.state&&p){var v={style:l?c0({},l,g):g};(l&&p[l]!==g||!l&&p!==g)&&this.setState(v)}this.runAnimation(fc(fc({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,l=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,p=i.onAnimationStart,h=VTe(s,o,TTe(u),l,this.changeStyle),m=function(){a.stopJSAnimation=h()};this.manager.start([p,d,m,l,f])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,l=i.onAnimationStart,u=s[0],d=u.style,f=u.duration,p=f===void 0?0:f,h=function(g,v,y){if(y===0)return g;var b=v.duration,S=v.easing,A=S===void 0?"ease":S,C=v.style,T=v.properties,j=v.onAnimationEnd,E=y>0?s[y-1]:v,k=T||Object.keys(C);if(typeof A=="function"||A==="spring")return[].concat(hC(g),[a.runJSAnimation.bind(a,{from:E.style,to:C,duration:b,easing:A}),b]);var O=a7(k,b,A),D=fc(fc(fc({},E.style),C),{},{transition:O});return[].concat(hC(g),[D,b,j]).filter(bTe)};return this.manager.start([l].concat(hC(s.reduce(h,[d,Math.max(p,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=mTe());var a=i.begin,s=i.duration,o=i.attributeName,l=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,p=i.steps,h=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var g=o?c0({},o,l):l,v=a7(Object.keys(g),s,u);m.start([d,a,fc(fc({},g),{},{transition:v}),s,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=HTe(i,UTe),u=I.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!o||u===0||s<=0)return a;var f=function(h){var m=h.props,g=m.style,v=g===void 0?{}:g,y=m.className,b=I.cloneElement(h,fc(fc({},l),{},{style:fc(fc({},v),d),className:y}));return b};return u===1?f(I.Children.only(a)):xe.createElement("div",null,I.Children.map(a,function(p){return f(p)}))}}]),n}(I.PureComponent);Pc.displayName="Animate";Pc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Pc.propTypes={from:Ir.oneOfType([Ir.object,Ir.string]),to:Ir.oneOfType([Ir.object,Ir.string]),attributeName:Ir.string,duration:Ir.number,begin:Ir.number,easing:Ir.oneOfType([Ir.string,Ir.func]),steps:Ir.arrayOf(Ir.shape({duration:Ir.number.isRequired,style:Ir.object.isRequired,easing:Ir.oneOfType([Ir.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ir.func]),properties:Ir.arrayOf("string"),onAnimationEnd:Ir.func})),children:Ir.oneOfType([Ir.node,Ir.func]),isActive:Ir.bool,canBegin:Ir.bool,onAnimationEnd:Ir.func,shouldReAnimate:Ir.bool,onAnimationStart:Ir.func,onAnimationReStart:Ir.func};function Xy(t){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xy(t)}function zw(){return zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zw.apply(this,arguments)}function r3e(t,e){return o3e(t)||s3e(t,e)||a3e(t,e)||i3e()}function i3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a3e(t,e){if(t){if(typeof t=="string")return d7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d7(t,e)}}function d7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function o3e(t){if(Array.isArray(t))return t}function f7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f7(Object(n),!0).forEach(function(r){l3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l3e(t,e,n){return e=c3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c3e(t){var e=u3e(t,"string");return Xy(e)=="symbol"?e:e+""}function u3e(t,e){if(Xy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p7=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var f=[0,0,0,0],p=0,h=4;p<h;p++)f[p]=a[p]>s?s:a[p];d="M".concat(e,",").concat(n+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+l*f[0],",").concat(n)),d+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*f[1])),d+="L ".concat(e+r,",").concat(n+i-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-l*f[2],",").concat(n+i)),d+="L ".concat(e+l*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*f[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);d="M ".concat(e,",").concat(n+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+l*m,",").concat(n,`
            L `).concat(e+r-l*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*m,`
            L `).concat(e+r,",").concat(n+i-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r-l*m,",").concat(n+i,`
            L `).concat(e+l*m,",").concat(n+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*m," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},d3e=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var u=Math.min(a,a+o),d=Math.max(a,a+o),f=Math.min(s,s+l),p=Math.max(s,s+l);return r>=u&&r<=d&&i>=f&&i<=p}return!1},f3e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},U3=function(e){var n=h7(h7({},f3e),e),r=I.useRef(),i=I.useState(-1),a=r3e(i,2),s=a[0],o=a[1];I.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var l=n.x,u=n.y,d=n.width,f=n.height,p=n.radius,h=n.className,m=n.animationEasing,g=n.animationDuration,v=n.animationBegin,y=n.isAnimationActive,b=n.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var S=$n("recharts-rectangle",h);return b?xe.createElement(Pc,{canBegin:s>0,from:{width:d,height:f,x:l,y:u},to:{width:d,height:f,x:l,y:u},duration:g,animationEasing:m,isActive:b},function(A){var C=A.width,T=A.height,j=A.x,E=A.y;return xe.createElement(Pc,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,isActive:y,easing:m},xe.createElement("path",zw({},mn(n,!0),{className:S,d:p7(j,E,C,T,p),ref:r})))}):xe.createElement("path",zw({},mn(n,!0),{className:S,d:p7(l,u,d,f,p)}))},h3e=["points","className","baseLinePoints","connectNulls"];function vm(){return vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vm.apply(this,arguments)}function p3e(t,e){if(t==null)return{};var n=m3e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function m3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function m7(t){return b3e(t)||y3e(t)||v3e(t)||g3e()}function g3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v3e(t,e){if(t){if(typeof t=="string")return uk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uk(t,e)}}function y3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function b3e(t){if(Array.isArray(t))return uk(t)}function uk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var g7=function(e){return e&&e.x===+e.x&&e.y===+e.y},x3e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){g7(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),g7(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},O0=function(e,n){var r=x3e(e);n&&(r=[r.reduce(function(a,s){return[].concat(m7(a),m7(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,o,l){return"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},w3e=function(e,n,r){var i=O0(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(O0(n.reverse(),r).slice(1))},S3e=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,s=p3e(e,h3e);if(!n||!n.length)return null;var o=$n("recharts-polygon",r);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",u=w3e(n,i,a);return xe.createElement("g",{className:o},xe.createElement("path",vm({},mn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),l?xe.createElement("path",vm({},mn(s,!0),{fill:"none",d:O0(n,a)})):null,l?xe.createElement("path",vm({},mn(s,!0),{fill:"none",d:O0(i,a)})):null)}var d=O0(n,a);return xe.createElement("path",vm({},mn(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:o,d}))};function dk(){return dk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dk.apply(this,arguments)}var Hb=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=$n("recharts-dot",a);return n===+n&&r===+r&&i===+i?I.createElement("circle",dk({},mn(e,!1),aw(e),{className:s,cx:n,cy:r,r:i})):null};function Qy(t){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qy(t)}var _3e=["x","y","top","left","width","height","className"];function fk(){return fk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fk.apply(this,arguments)}function v7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function A3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v7(Object(n),!0).forEach(function(r){C3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C3e(t,e,n){return e=j3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j3e(t){var e=N3e(t,"string");return Qy(e)=="symbol"?e:e+""}function N3e(t,e){if(Qy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function E3e(t,e){if(t==null)return{};var n=k3e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function k3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var P3e=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},T3e=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,l=e.left,u=l===void 0?0:l,d=e.width,f=d===void 0?0:d,p=e.height,h=p===void 0?0:p,m=e.className,g=E3e(e,_3e),v=A3e({x:r,y:a,top:o,left:u,width:f,height:h},g);return!kt(r)||!kt(a)||!kt(f)||!kt(h)||!kt(o)||!kt(u)?null:xe.createElement("path",fk({},mn(v,!0),{className:$n("recharts-cross",m),d:P3e(r,a,f,h,o,u)}))},D3e=ZS,I3e=IG,O3e=wu;function M3e(t,e){return t&&t.length?D3e(t,O3e(e),I3e):void 0}var R3e=M3e;const L3e=Mr(R3e);var F3e=ZS,z3e=wu,$3e=OG;function B3e(t,e){return t&&t.length?F3e(t,z3e(e),$3e):void 0}var V3e=B3e;const U3e=Mr(V3e);var H3e=["cx","cy","angle","ticks","axisLine"],W3e=["ticks","tick","angle","tickFormatter","stroke"];function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function M0(){return M0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M0.apply(this,arguments)}function y7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y7(Object(n),!0).forEach(function(r){n_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b7(t,e){if(t==null)return{};var n=q3e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function q3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function K3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_Y(r.key),r)}}function G3e(t,e,n){return e&&x7(t.prototype,e),n&&x7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y3e(t,e,n){return e=$w(e),X3e(t,SY()?Reflect.construct(e,n||[],$w(t).constructor):e.apply(t,n))}function X3e(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q3e(t)}function Q3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SY=function(){return!!t})()}function $w(t){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$w(t)}function Z3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hk(t,e)}function hk(t,e){return hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hk(t,e)}function n_(t,e,n){return e=_Y(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Y(t){var e=J3e(t,"string");return Cg(e)=="symbol"?e:e+""}function J3e(t,e){if(Cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var r_=function(t){function e(){return K3e(this,e),Y3e(this,e,arguments)}return Z3e(e,t),G3e(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,o=a.cx,l=a.cy;return ai(o,l,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=L3e(o,function(d){return d.coordinate||0}),u=U3e(o,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=r.axisLine,u=b7(r,H3e),d=o.reduce(function(m,g){return[Math.min(m[0],g.coordinate),Math.max(m[1],g.coordinate)]},[1/0,-1/0]),f=ai(i,a,d[0],s),p=ai(i,a,d[1],s),h=Yf(Yf(Yf({},mn(u,!1)),{},{fill:"none"},mn(l,!1)),{},{x1:f.x,y1:f.y,x2:p.x,y2:p.y});return xe.createElement("line",M0({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,l=i.tickFormatter,u=i.stroke,d=b7(i,W3e),f=this.getTickTextAnchor(),p=mn(d,!1),h=mn(s,!1),m=a.map(function(g,v){var y=r.getTickValueCoord(g),b=Yf(Yf(Yf(Yf({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(y.x,", ").concat(y.y,")")},p),{},{stroke:"none",fill:u},h),{},{index:v},y),{},{payload:g});return xe.createElement(rr,M0({className:$n("recharts-polar-radius-axis-tick",lY(s)),key:"tick-".concat(g.coordinate)},Xh(r.props,g,v)),e.renderTickItem(s,b,l?l(g.value,v):g.value))});return xe.createElement(rr,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:xe.createElement(rr,{className:$n("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),Ga.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return xe.isValidElement(r)?s=xe.cloneElement(r,i):jn(r)?s=r(i):s=xe.createElement(Qh,M0({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(I.PureComponent);n_(r_,"displayName","PolarRadiusAxis");n_(r_,"axisType","radiusAxis");n_(r_,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function fh(){return fh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fh.apply(this,arguments)}function w7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w7(Object(n),!0).forEach(function(r){i_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CY(r.key),r)}}function tDe(t,e,n){return e&&S7(t.prototype,e),n&&S7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nDe(t,e,n){return e=Bw(e),rDe(t,AY()?Reflect.construct(e,n||[],Bw(t).constructor):e.apply(t,n))}function rDe(t,e){if(e&&(jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iDe(t)}function iDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AY=function(){return!!t})()}function Bw(t){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bw(t)}function aDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pk(t,e)}function pk(t,e){return pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pk(t,e)}function i_(t,e,n){return e=CY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CY(t){var e=sDe(t,"string");return jg(e)=="symbol"?e:e+""}function sDe(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oDe=Math.PI/180,_7=1e-5,a_=function(t){function e(){return eDe(this,e),nDe(this,e,arguments)}return aDe(e,t),tDe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.orientation,u=i.tickSize,d=u||8,f=ai(a,s,o,r.coordinate),p=ai(a,s,o+(l==="inner"?-1:1)*d,r.coordinate);return{x1:f.x,y1:f.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*oDe),s;return a>_7?s=i==="outer"?"start":"end":a<-_7?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,o=r.axisLine,l=r.axisLineType,u=Xf(Xf({},mn(this.props,!1)),{},{fill:"none"},mn(o,!1));if(l==="circle")return xe.createElement(Hb,fh({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var d=this.props.ticks,f=d.map(function(p){return ai(i,a,s,p.coordinate)});return xe.createElement(S3e,fh({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,l=i.tickFormatter,u=i.stroke,d=mn(this.props,!1),f=mn(s,!1),p=Xf(Xf({},d),{},{fill:"none"},mn(o,!1)),h=a.map(function(m,g){var v=r.getTickLineCoord(m),y=r.getTickTextAnchor(m),b=Xf(Xf(Xf({textAnchor:y},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:m,x:v.x2,y:v.y2});return xe.createElement(rr,fh({className:$n("recharts-polar-angle-axis-tick",lY(s)),key:"tick-".concat(m.coordinate)},Xh(r.props,m,g)),o&&xe.createElement("line",fh({className:"recharts-polar-angle-axis-tick-line"},p,v)),s&&e.renderTickItem(s,b,l?l(m.value,g):m.value))});return xe.createElement(rr,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:xe.createElement(rr,{className:$n("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return xe.isValidElement(r)?s=xe.cloneElement(r,i):jn(r)?s=r(i):s=xe.createElement(Qh,fh({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(I.PureComponent);i_(a_,"displayName","PolarAngleAxis");i_(a_,"axisType","angleAxis");i_(a_,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var lDe=kK,cDe=lDe(Object.getPrototypeOf,Object),uDe=cDe,dDe=vd,fDe=uDe,hDe=yd,pDe="[object Object]",mDe=Function.prototype,gDe=Object.prototype,jY=mDe.toString,vDe=gDe.hasOwnProperty,yDe=jY.call(Object);function bDe(t){if(!hDe(t)||dDe(t)!=pDe)return!1;var e=fDe(t);if(e===null)return!0;var n=vDe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&jY.call(n)==yDe}var xDe=bDe;const wDe=Mr(xDe);var SDe=vd,_De=yd,ADe="[object Boolean]";function CDe(t){return t===!0||t===!1||_De(t)&&SDe(t)==ADe}var jDe=CDe;const NDe=Mr(jDe);function Zy(t){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(t)}function Vw(){return Vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vw.apply(this,arguments)}function EDe(t,e){return DDe(t)||TDe(t,e)||PDe(t,e)||kDe()}function kDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PDe(t,e){if(t){if(typeof t=="string")return A7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A7(t,e)}}function A7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TDe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function DDe(t){if(Array.isArray(t))return t}function C7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C7(Object(n),!0).forEach(function(r){IDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IDe(t,e,n){return e=ODe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ODe(t){var e=MDe(t,"string");return Zy(e)=="symbol"?e:e+""}function MDe(t,e){if(Zy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N7=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},RDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},LDe=function(e){var n=j7(j7({},RDe),e),r=I.useRef(),i=I.useState(-1),a=EDe(i,2),s=a[0],o=a[1];I.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&o(S)}catch{}},[]);var l=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,p=n.height,h=n.className,m=n.animationEasing,g=n.animationDuration,v=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||p!==+p||d===0&&f===0||p===0)return null;var b=$n("recharts-trapezoid",h);return y?xe.createElement(Pc,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:p,x:l,y:u},to:{upperWidth:d,lowerWidth:f,height:p,x:l,y:u},duration:g,animationEasing:m,isActive:y},function(S){var A=S.upperWidth,C=S.lowerWidth,T=S.height,j=S.x,E=S.y;return xe.createElement(Pc,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,easing:m},xe.createElement("path",Vw({},mn(n,!0),{className:b,d:N7(j,E,A,C,T),ref:r})))}):xe.createElement("g",null,xe.createElement("path",Vw({},mn(n,!0),{className:b,d:N7(l,u,d,f,p)})))},FDe=["option","shapeType","propTransformer","activeClassName","isActive"];function Jy(t){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jy(t)}function zDe(t,e){if(t==null)return{};var n=$De(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $De(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function E7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E7(Object(n),!0).forEach(function(r){BDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BDe(t,e,n){return e=VDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VDe(t){var e=UDe(t,"string");return Jy(e)=="symbol"?e:e+""}function UDe(t,e){if(Jy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HDe(t,e){return Uw(Uw({},e),t)}function WDe(t,e){return t==="symbols"}function k7(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return xe.createElement(U3,n);case"trapezoid":return xe.createElement(LDe,n);case"sector":return xe.createElement(dY,n);case"symbols":if(WDe(e))return xe.createElement(l3,n);break;default:return null}}function qDe(t){return I.isValidElement(t)?t.props:t}function NY(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?HDe:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,l=zDe(t,FDe),u;if(I.isValidElement(e))u=I.cloneElement(e,Uw(Uw({},l),qDe(e)));else if(jn(e))u=e(l);else if(wDe(e)&&!NDe(e)){var d=i(e,l);u=xe.createElement(k7,{shapeType:n,elementProps:d})}else{var f=l;u=xe.createElement(k7,{shapeType:n,elementProps:f})}return o?xe.createElement(rr,{className:s},u):u}function s_(t,e){return e!=null&&"trapezoids"in t.props}function o_(t,e){return e!=null&&"sectors"in t.props}function eb(t,e){return e!=null&&"points"in t.props}function KDe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function GDe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function YDe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function XDe(t,e){var n;return s_(t,e)?n=KDe:o_(t,e)?n=GDe:eb(t,e)&&(n=YDe),n}function QDe(t,e){var n;return s_(t,e)?n="trapezoids":o_(t,e)?n="sectors":eb(t,e)&&(n="points"),n}function ZDe(t,e){if(s_(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(o_(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return eb(t,e)?e.payload:{}}function JDe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=QDe(n,e),a=ZDe(n,e),s=r.filter(function(l,u){var d=Zh(a,l),f=n.props[i].filter(function(m){var g=XDe(n,e);return g(m,e)}),p=n.props[i].indexOf(f[f.length-1]),h=u===p;return d&&h}),o=r.indexOf(s[s.length-1]);return o}var Q1;function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function ym(){return ym=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ym.apply(this,arguments)}function P7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ni(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P7(Object(n),!0).forEach(function(r){zl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kY(r.key),r)}}function tIe(t,e,n){return e&&T7(t.prototype,e),n&&T7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nIe(t,e,n){return e=Hw(e),rIe(t,EY()?Reflect.construct(e,n||[],Hw(t).constructor):e.apply(t,n))}function rIe(t,e){if(e&&(Ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iIe(t)}function iIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EY=function(){return!!t})()}function Hw(t){return Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hw(t)}function aIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mk(t,e)}function mk(t,e){return mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mk(t,e)}function zl(t,e,n){return e=kY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kY(t){var e=sIe(t,"string");return Ng(e)=="symbol"?e:e+""}function sIe(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ng(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tc=function(t){function e(n){var r;return eIe(this,e),r=nIe(this,e,[n]),zl(r,"pieRef",null),zl(r,"sectorRefs",[]),zl(r,"id",bp("recharts-pie-")),zl(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),jn(i)&&i()}),zl(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),jn(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return aIe(e,t),tIe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,l=a.dataKey,u=a.valueKey,d=mn(this.props,!1),f=mn(s,!1),p=mn(o,!1),h=s&&s.offsetRadius||20,m=r.map(function(g,v){var y=(g.startAngle+g.endAngle)/2,b=ai(g.cx,g.cy,g.outerRadius+h,y),S=ni(ni(ni(ni({},d),g),{},{stroke:"none"},f),{},{index:v,textAnchor:e.getTextAnchor(b.x,g.cx)},b),A=ni(ni(ni(ni({},d),g),{},{fill:"none",stroke:g.fill},p),{},{index:v,points:[ai(g.cx,g.cy,g.outerRadius,y),b]}),C=l;return In(l)&&In(u)?C="value":In(l)&&(C=u),xe.createElement(rr,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},o&&e.renderLabelLineItem(o,A,"line"),e.renderLabelItem(s,S,la(g,C)))});return xe.createElement(rr,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,l=a.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(d),p=l&&i.hasActiveIndex()?l:null,h=f?s:p,m=ni(ni({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return xe.createElement(rr,ym({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Xh(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),xe.createElement(NY,ym({option:h,isActive:f,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,p=f.prevSectors,h=f.prevIsAnimationActive;return xe.createElement(Pc,{begin:o,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var g=m.t,v=[],y=a&&a[0],b=y.startAngle;return a.forEach(function(S,A){var C=p&&p[A],T=A>0?cl(S,"paddingAngle",0):0;if(C){var j=La(C.endAngle-C.startAngle,S.endAngle-S.startAngle),E=ni(ni({},S),{},{startAngle:b+T,endAngle:b+j(g)+T});v.push(E),b=E.endAngle}else{var k=S.endAngle,O=S.startAngle,D=La(0,k-O),M=D(g),L=ni(ni({},S),{},{startAngle:b+T,endAngle:b+M+T});v.push(L),b=L.endAngle}}),xe.createElement(rr,null,r.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!Zh(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,l=i.label,u=i.cx,d=i.cy,f=i.innerRadius,p=i.outerRadius,h=i.isAnimationActive,m=this.state.isAnimationFinished;if(a||!s||!s.length||!kt(u)||!kt(d)||!kt(f)||!kt(p))return null;var g=$n("recharts-pie",o);return xe.createElement(rr,{tabIndex:this.props.rootTabIndex,className:g,ref:function(y){r.pieRef=y}},this.renderSectors(),l&&this.renderLabels(s),Ga.renderCallByParent(this.props,null,!1),(!h||m)&&No.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(xe.isValidElement(r))return xe.cloneElement(r,i);if(jn(r))return r(i);var s=$n("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return xe.createElement(Lh,ym({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(xe.isValidElement(r))return xe.cloneElement(r,i);var s=a;if(jn(r)&&(s=r(i),xe.isValidElement(s)))return s;var o=$n("recharts-pie-label-text",typeof r!="boolean"&&!jn(r)?r.className:"");return xe.createElement(Qh,ym({},i,{alignmentBaseline:"middle",className:o}),s)}}])}(I.PureComponent);Q1=Tc;zl(Tc,"displayName","Pie");zl(Tc,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Df.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});zl(Tc,"parseDeltaAngle",function(t,e){var n=ro(e-t),r=Math.min(Math.abs(e-t),360);return n*r});zl(Tc,"getRealPieData",function(t){var e=t.data,n=t.children,r=mn(t,!1),i=ul(n,Wl);return e&&e.length?e.map(function(a,s){return ni(ni(ni({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return ni(ni({},r),a.props)}):[]});zl(Tc,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,s=oY(i,a),o=r+io(t.cx,i,i/2),l=n+io(t.cy,a,a/2),u=io(t.innerRadius,s,0),d=io(t.outerRadius,s,s*.8),f=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:l,innerRadius:u,outerRadius:d,maxRadius:f}});zl(Tc,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?ni(ni({},e.type.defaultProps),e.props):e.props,i=Q1.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,l=r.paddingAngle,u=r.dataKey,d=r.nameKey,f=r.valueKey,p=r.tooltipType,h=Math.abs(r.minAngle),m=Q1.parseCoordinateOfPie(r,n),g=Q1.parseDeltaAngle(s,o),v=Math.abs(g),y=u;In(u)&&In(f)?(_c(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):In(u)&&(_c(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var b=i.filter(function(E){return la(E,y,0)!==0}).length,S=(v>=360?b:b-1)*l,A=v-b*h-S,C=i.reduce(function(E,k){var O=la(k,y,0);return E+(kt(O)?O:0)},0),T;if(C>0){var j;T=i.map(function(E,k){var O=la(E,y,0),D=la(E,d,k),M=(kt(O)?O:0)/C,L;k?L=j.endAngle+ro(g)*l*(O!==0?1:0):L=s;var V=L+ro(g)*((O!==0?h:0)+M*A),Q=(L+V)/2,Y=(m.innerRadius+m.outerRadius)/2,J=[{name:D,value:O,payload:E,dataKey:y,type:p}],q=ai(m.cx,m.cy,Y,Q);return j=ni(ni(ni({percent:M,cornerRadius:a,name:D,tooltipPayload:J,midAngle:Q,middleRadius:Y,tooltipPosition:q},E),m),{},{value:la(E,y),startAngle:L,endAngle:V,payload:E,paddingAngle:ro(g)*l}),j})}return ni(ni({},m),{},{sectors:T,data:i})});var oIe=Math.ceil,lIe=Math.max;function cIe(t,e,n,r){for(var i=-1,a=lIe(oIe((e-t)/(n||1)),0),s=Array(a);a--;)s[r?a:++i]=t,t+=n;return s}var uIe=cIe,dIe=GK,D7=1/0,fIe=17976931348623157e292;function hIe(t){if(!t)return t===0?t:0;if(t=dIe(t),t===D7||t===-D7){var e=t<0?-1:1;return e*fIe}return t===t?t:0}var PY=hIe,pIe=uIe,mIe=WS,pC=PY;function gIe(t){return function(e,n,r){return r&&typeof r!="number"&&mIe(e,n,r)&&(n=r=void 0),e=pC(e),n===void 0?(n=e,e=0):n=pC(n),r=r===void 0?e<n?1:-1:pC(r),pIe(e,n,r,t)}}var vIe=gIe,yIe=vIe,bIe=yIe(),xIe=bIe;const Ww=Mr(xIe);function tb(t){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(t)}function I7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I7(Object(n),!0).forEach(function(r){TY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TY(t,e,n){return e=wIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wIe(t){var e=SIe(t,"string");return tb(e)=="symbol"?e:e+""}function SIe(t,e){if(tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Ie=["Webkit","Moz","O","ms"],AIe=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=_Ie.reduce(function(a,s){return O7(O7({},a),{},TY({},s+r,n))},{});return i[e]=n,i};function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function qw(){return qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qw.apply(this,arguments)}function M7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M7(Object(n),!0).forEach(function(r){Zo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IY(r.key),r)}}function jIe(t,e,n){return e&&R7(t.prototype,e),n&&R7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function NIe(t,e,n){return e=Kw(e),EIe(t,DY()?Reflect.construct(e,n||[],Kw(t).constructor):e.apply(t,n))}function EIe(t,e){if(e&&(Eg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kIe(t)}function kIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DY=function(){return!!t})()}function Kw(t){return Kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kw(t)}function PIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gk(t,e)}function gk(t,e){return gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gk(t,e)}function Zo(t,e,n){return e=IY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IY(t){var e=TIe(t,"string");return Eg(e)=="symbol"?e:e+""}function TIe(t,e){if(Eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var DIe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=T0().domain(Ww(0,l)).range([a,a+s-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},L7=function(e){return e.changedTouches&&!!e.changedTouches.length},kg=function(t){function e(n){var r;return CIe(this,e),r=NIe(this,e,[n]),Zo(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Zo(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Zo(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),Zo(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Zo(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Zo(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Zo(r,"handleSlideDragStart",function(i){var a=L7(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return PIe(e,t),jIe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,l=o.gap,u=o.data,d=u.length-1,f=Math.min(i,a),p=Math.max(i,a),h=e.getIndexInRange(s,f),m=e.getIndexInRange(s,p);return{startIndex:h-h%l,endIndex:m===d?d:m-m%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,l=la(a[r],o,r);return jn(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,l=this.props,u=l.x,d=l.width,f=l.travellerWidth,p=l.startIndex,h=l.endIndex,m=l.onChange,g=r.pageX-a;g>0?g=Math.min(g,u+d-f-o,u+d-f-s):g<0&&(g=Math.max(g,u-s,u-o));var v=this.getIndex({startX:s+g,endX:o+g});(v.startIndex!==p||v.endIndex!==h)&&m&&m(v),this.setState({startX:s+g,endX:o+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=L7(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,l=i.startX,u=this.state[s],d=this.props,f=d.x,p=d.width,h=d.travellerWidth,m=d.onChange,g=d.gap,v=d.data,y={startX:this.state.startX,endX:this.state.endX},b=r.pageX-a;b>0?b=Math.min(b,f+p-h-u):b<0&&(b=Math.max(b,f-u)),y[s]=u+b;var S=this.getIndex(y),A=S.startIndex,C=S.endIndex,T=function(){var E=v.length-1;return s==="startX"&&(o>l?A%g===0:C%g===0)||o<l&&C===E||s==="endX"&&(o>l?C%g===0:A%g===0)||o>l&&C===E};this.setState(Zo(Zo({},s,u+b),"brushMoveStartX",r.pageX),function(){m&&T()&&m(S)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,l=s.startX,u=s.endX,d=this.state[i],f=o.indexOf(d);if(f!==-1){var p=f+r;if(!(p===-1||p>=o.length)){var h=o[p];i==="startX"&&h>=u||i==="endX"&&h<=l||this.setState(Zo({},i,h),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.fill,u=r.stroke;return xe.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.data,u=r.children,d=r.padding,f=I.Children.only(u);return f?xe.cloneElement(f,{x:i,y:a,width:s,height:o,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,l=this.props,u=l.y,d=l.travellerWidth,f=l.height,p=l.traveller,h=l.ariaLabel,m=l.data,g=l.startIndex,v=l.endIndex,y=Math.max(r,this.props.x),b=mC(mC({},mn(this.props,!1)),{},{x:y,y:u,width:d,height:f}),S=h||"Min value: ".concat((a=m[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=m[v])===null||s===void 0?void 0:s.name);return xe.createElement(rr,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),o.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,b))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,l=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return xe.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:s,width:f,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,l=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,p=d.endX,h=5,m={pointerEvents:"none",fill:u};return xe.createElement(rr,{className:"recharts-brush-texts"},xe.createElement(Qh,qw({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-h,y:s+o/2},m),this.getTextOfTick(i)),xe.createElement(Qh,qw({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+l+h,y:s+o/2},m),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,l=r.y,u=r.width,d=r.height,f=r.alwaysShowText,p=this.state,h=p.startX,m=p.endX,g=p.isTextActive,v=p.isSlideMoving,y=p.isTravellerMoving,b=p.isTravellerFocused;if(!i||!i.length||!kt(o)||!kt(l)||!kt(u)||!kt(d)||u<=0||d<=0)return null;var S=$n("recharts-brush",a),A=xe.Children.count(s)===1,C=AIe("userSelect","none");return xe.createElement(rr,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(h,m),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(m,"endX"),(g||v||y||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,l=r.stroke,u=Math.floor(a+o/2)-1;return xe.createElement(xe.Fragment,null,xe.createElement("rect",{x:i,y:a,width:s,height:o,fill:l,stroke:"none"}),xe.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),xe.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return xe.isValidElement(r)?a=xe.cloneElement(r,i):jn(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,l=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return mC({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?DIe({data:a,width:s,x:o,travellerWidth:l,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+s-l]);var p=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);r[l]>i?o=l:s=l}return i>=r[o]?o:s}}])}(I.PureComponent);Zo(kg,"displayName","Brush");Zo(kg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var IIe=m3;function OIe(t,e){var n;return IIe(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var MIe=OIe,RIe=wK,LIe=wu,FIe=MIe,zIe=Po,$Ie=WS;function BIe(t,e,n){var r=zIe(t)?RIe:FIe;return n&&$Ie(t,e,n)&&(e=void 0),r(t,LIe(e))}var VIe=BIe;const UIe=Mr(VIe);var du=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},F7=UK;function HIe(t,e,n){e=="__proto__"&&F7?F7(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var WIe=HIe,qIe=WIe,KIe=BK,GIe=wu;function YIe(t,e){var n={};return e=GIe(e),KIe(t,function(r,i,a){qIe(n,i,e(r,i,a))}),n}var XIe=YIe;const QIe=Mr(XIe);function ZIe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var JIe=ZIe,eOe=m3;function tOe(t,e){var n=!0;return eOe(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var nOe=tOe,rOe=JIe,iOe=nOe,aOe=wu,sOe=Po,oOe=WS;function lOe(t,e,n){var r=sOe(t)?rOe:iOe;return n&&oOe(t,e,n)&&(e=void 0),r(t,aOe(e))}var cOe=lOe;const OY=Mr(cOe);var uOe=["x","y"];function nb(t){"@babel/helpers - typeof";return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nb(t)}function vk(){return vk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vk.apply(this,arguments)}function z7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z7(Object(n),!0).forEach(function(r){dOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dOe(t,e,n){return e=fOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fOe(t){var e=hOe(t,"string");return nb(e)=="symbol"?e:e+""}function hOe(t,e){if(nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pOe(t,e){if(t==null)return{};var n=mOe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gOe(t,e){var n=t.x,r=t.y,i=pOe(t,uOe),a="".concat(n),s=parseInt(a,10),o="".concat(r),l=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),p=parseInt(f,10);return Kv(Kv(Kv(Kv(Kv({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function $7(t){return xe.createElement(NY,vk({shapeType:"rectangle",propTransformer:gOe,activeClassName:"recharts-active-bar"},t))}var vOe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=kt(r)||V0e(r);return a?e(r,i):(a||ep(),n)}},yOe=["value","background"],MY;function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function bOe(t,e){if(t==null)return{};var n=xOe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Gw(){return Gw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gw.apply(this,arguments)}function B7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ma(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B7(Object(n),!0).forEach(function(r){Yd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LY(r.key),r)}}function SOe(t,e,n){return e&&V7(t.prototype,e),n&&V7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Oe(t,e,n){return e=Yw(e),AOe(t,RY()?Reflect.construct(e,n||[],Yw(t).constructor):e.apply(t,n))}function AOe(t,e){if(e&&(Pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return COe(t)}function COe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RY=function(){return!!t})()}function Yw(t){return Yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yw(t)}function jOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yk(t,e)}function yk(t,e){return yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yk(t,e)}function Yd(t,e,n){return e=LY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LY(t){var e=NOe(t,"string");return Pg(e)=="symbol"?e:e+""}function NOe(t,e){if(Pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $a=function(t){function e(){var n;wOe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=_Oe(this,e,[].concat(i)),Yd(n,"state",{isAnimationFinished:!1}),Yd(n,"id",bp("recharts-bar-")),Yd(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),Yd(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return jOe(e,t),SOe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,u=a.activeBar,d=mn(this.props,!1);return r&&r.map(function(f,p){var h=p===l,m=h?u:s,g=ma(ma(ma({},d),f),{},{isActive:h,option:m,index:p,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return xe.createElement(rr,Gw({className:"recharts-bar-rectangle"},Xh(i.props,f,p),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(p)}),xe.createElement($7,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,p=this.state.prevData;return xe.createElement(Pc,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,g=a.map(function(v,y){var b=p&&p[y];if(b){var S=La(b.x,v.x),A=La(b.y,v.y),C=La(b.width,v.width),T=La(b.height,v.height);return ma(ma({},v),{},{x:S(m),y:A(m),width:C(m),height:T(m)})}if(s==="horizontal"){var j=La(0,v.height),E=j(m);return ma(ma({},v),{},{y:v.y+v.height-E,height:E})}var k=La(0,v.width),O=k(m);return ma(ma({},v),{},{width:O})});return xe.createElement(rr,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Zh(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,l=mn(this.props.background,!1);return a.map(function(u,d){u.value;var f=u.background,p=bOe(u,yOe);if(!f)return null;var h=ma(ma(ma(ma(ma({},p),{},{fill:"#eee"},f),l),Xh(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return xe.createElement($7,Gw({key:"background-bar-".concat(d),option:r.props.background,isActive:d===o},h))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,f=ul(d,Ub);if(!f)return null;var p=u==="vertical"?s[0].height/2:s[0].width/2,h=function(v,y){var b=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:b,errorVal:la(v,y)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return xe.createElement(rr,m,f.map(function(g){return xe.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,offset:p,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,l=r.yAxis,u=r.left,d=r.top,f=r.width,p=r.height,h=r.isAnimationActive,m=r.background,g=r.id;if(i||!a||!a.length)return null;var v=this.state.isAnimationFinished,y=$n("recharts-bar",s),b=o&&o.allowDataOverflow,S=l&&l.allowDataOverflow,A=b||S,C=In(g)?this.id:g;return xe.createElement(rr,{className:y},b||S?xe.createElement("defs",null,xe.createElement("clipPath",{id:"clipPath-".concat(C)},xe.createElement("rect",{x:b?u:u-f/2,y:S?d:d-p/2,width:b?f:f*2,height:S?p:p*2}))):null,xe.createElement(rr,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(C,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,C),(!h||v)&&No.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(I.PureComponent);MY=$a;Yd($a,"displayName","Bar");Yd($a,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Df.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Yd($a,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,p=t.offset,h=sPe(r,n);if(!h)return null;var m=e.layout,g=n.type.defaultProps,v=g!==void 0?ma(ma({},g),n.props):n.props,y=v.dataKey,b=v.children,S=v.minPointSize,A=m==="horizontal"?s:a,C=u?A.scale.domain():null,T=hPe({numericAxis:A}),j=ul(b,Wl),E=f.map(function(k,O){var D,M,L,V,Q,Y;u?D=oPe(u[d+O],C):(D=la(k,y),Array.isArray(D)||(D=[T,D]));var J=vOe(S,MY.defaultProps.minPointSize)(D[1],O);if(m==="horizontal"){var q,ee=[s.scale(D[0]),s.scale(D[1])],le=ee[0],se=ee[1];M=T8({axis:a,ticks:o,bandSize:i,offset:h.offset,entry:k,index:O}),L=(q=se??le)!==null&&q!==void 0?q:void 0,V=h.size;var $=le-se;if(Q=Number.isNaN($)?0:$,Y={x:M,y:s.y,width:V,height:s.height},Math.abs(J)>0&&Math.abs(Q)<Math.abs(J)){var G=ro(Q||J)*(Math.abs(J)-Math.abs(Q));L-=G,Q+=G}}else{var te=[a.scale(D[0]),a.scale(D[1])],oe=te[0],ge=te[1];if(M=oe,L=T8({axis:s,ticks:l,bandSize:i,offset:h.offset,entry:k,index:O}),V=ge-oe,Q=h.size,Y={x:a.x,y:L,width:a.width,height:Q},Math.abs(J)>0&&Math.abs(V)<Math.abs(J)){var _e=ro(V||J)*(Math.abs(J)-Math.abs(V));V+=_e}}return ma(ma(ma({},k),{},{x:M,y:L,width:V,height:Q,value:u?D:D[1],payload:k,background:Y},j&&j[O]&&j[O].props),{},{tooltipPayload:[aY(n,k)],tooltipPosition:{x:M+V/2,y:L+Q/2}})});return ma({data:E,layout:m},p)});function rb(t){"@babel/helpers - typeof";return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rb(t)}function EOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,FY(r.key),r)}}function kOe(t,e,n){return e&&U7(t.prototype,e),n&&U7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function H7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H7(Object(n),!0).forEach(function(r){l_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l_(t,e,n){return e=FY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FY(t){var e=POe(t,"string");return rb(e)=="symbol"?e:e+""}function POe(t,e){if(rb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var H3=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.layout,u=e.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},p=!!el(u,$a);return d.reduce(function(h,m){var g=n[m],v=g.orientation,y=g.domain,b=g.padding,S=b===void 0?{}:b,A=g.mirror,C=g.reversed,T="".concat(v).concat(A?"Mirror":""),j,E,k,O,D;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var M=y[1]-y[0],L=1/0,V=g.categoricalDomain.sort(W0e);if(V.forEach(function(te,oe){oe>0&&(L=Math.min((te||0)-(V[oe-1]||0),L))}),Number.isFinite(L)){var Q=L/M,Y=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(j=Q*Y/2),g.padding==="no-gap"){var J=io(e.barCategoryGap,Q*Y),q=Q*Y/2;j=q-J-(q-J)/Y*J}}}i==="xAxis"?E=[r.left+(S.left||0)+(j||0),r.left+r.width-(S.right||0)-(j||0)]:i==="yAxis"?E=l==="horizontal"?[r.top+r.height-(S.bottom||0),r.top+(S.top||0)]:[r.top+(S.top||0)+(j||0),r.top+r.height-(S.bottom||0)-(j||0)]:E=g.range,C&&(E=[E[1],E[0]]);var ee=tY(g,a,p),le=ee.scale,se=ee.realScaleType;le.domain(y).range(E),nY(le);var $=rY(le,vc(vc({},g),{},{realScaleType:se}));i==="xAxis"?(D=v==="top"&&!A||v==="bottom"&&A,k=r.left,O=f[T]-D*g.height):i==="yAxis"&&(D=v==="left"&&!A||v==="right"&&A,k=f[T]-D*g.width,O=r.top);var G=vc(vc(vc({},g),$),{},{realScaleType:se,x:k,y:O,scale:le,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return G.bandSize=Iw(G,$),!g.hide&&i==="xAxis"?f[T]+=(D?-1:1)*G.height:g.hide||(f[T]+=(D?-1:1)*G.width),vc(vc({},h),{},l_({},m,G))},{})},zY=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},TOe=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return zY({x:n,y:r},{x:i,y:a})},$Y=function(){function t(e){EOe(this,t),this.scale=e}return kOe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();l_($Y,"EPS",1e-4);var W3=function(e){var n=Object.keys(e).reduce(function(r,i){return vc(vc({},r),{},l_({},i,$Y.create(e[i])))},{});return vc(vc({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return QIe(i,function(l,u){return n[u].apply(l,{bandAware:s,position:o})})},isInRange:function(i){return OY(i,function(a,s){return n[s].isInRange(a)})}})};function DOe(t){return(t%180+180)%180}var IOe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=DOe(i),s=a*Math.PI/180,o=Math.atan(r/n),l=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},OOe=wu,MOe=Fb,ROe=US;function LOe(t){return function(e,n,r){var i=Object(e);if(!MOe(e)){var a=OOe(n);e=ROe(e),n=function(o){return a(i[o],o,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:void 0}}var FOe=LOe,zOe=PY;function $Oe(t){var e=zOe(t),n=e%1;return e===e?n?e-n:e:0}var BOe=$Oe,VOe=MK,UOe=wu,HOe=BOe,WOe=Math.max;function qOe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:HOe(n);return i<0&&(i=WOe(r+i,0)),VOe(t,UOe(e),i)}var KOe=qOe,GOe=FOe,YOe=KOe,XOe=GOe(YOe),QOe=XOe;const ZOe=Mr(QOe);var JOe=Gve(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),q3=I.createContext(void 0),K3=I.createContext(void 0),BY=I.createContext(void 0),VY=I.createContext({}),UY=I.createContext(void 0),HY=I.createContext(0),WY=I.createContext(0),W7=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,l=e.width,u=e.height,d=JOe(a);return xe.createElement(q3.Provider,{value:r},xe.createElement(K3.Provider,{value:i},xe.createElement(VY.Provider,{value:a},xe.createElement(BY.Provider,{value:d},xe.createElement(UY.Provider,{value:s},xe.createElement(HY.Provider,{value:u},xe.createElement(WY.Provider,{value:l},o)))))))},eMe=function(){return I.useContext(UY)},qY=function(e){var n=I.useContext(q3);n==null&&ep();var r=n[e];return r==null&&ep(),r},tMe=function(){var e=I.useContext(q3);return Ud(e)},nMe=function(){var e=I.useContext(K3),n=ZOe(e,function(r){return OY(r.domain,Number.isFinite)});return n||Ud(e)},KY=function(e){var n=I.useContext(K3);n==null&&ep();var r=n[e];return r==null&&ep(),r},rMe=function(){var e=I.useContext(BY);return e},iMe=function(){return I.useContext(VY)},G3=function(){return I.useContext(WY)},Y3=function(){return I.useContext(HY)};function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function aMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YY(r.key),r)}}function oMe(t,e,n){return e&&sMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lMe(t,e,n){return e=Xw(e),cMe(t,GY()?Reflect.construct(e,n||[],Xw(t).constructor):e.apply(t,n))}function cMe(t,e){if(e&&(Tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uMe(t)}function uMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GY=function(){return!!t})()}function Xw(t){return Xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xw(t)}function dMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bk(t,e)}function bk(t,e){return bk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bk(t,e)}function q7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q7(Object(n),!0).forEach(function(r){X3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X3(t,e,n){return e=YY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YY(t){var e=fMe(t,"string");return Tg(e)=="symbol"?e:e+""}function fMe(t,e){if(Tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function hMe(t,e){return vMe(t)||gMe(t,e)||mMe(t,e)||pMe()}function pMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mMe(t,e){if(t){if(typeof t=="string")return G7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G7(t,e)}}function G7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gMe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function vMe(t){if(Array.isArray(t))return t}function xk(){return xk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xk.apply(this,arguments)}var yMe=function(e,n){var r;return xe.isValidElement(e)?r=xe.cloneElement(e,n):jn(e)?r=e(n):r=xe.createElement("line",xk({},n,{className:"recharts-reference-line-line"})),r},bMe=function(e,n,r,i,a,s,o,l,u){var d=a.x,f=a.y,p=a.width,h=a.height;if(r){var m=u.y,g=e.y.apply(m,{position:s});if(du(u,"discard")&&!e.y.isInRange(g))return null;var v=[{x:d+p,y:g},{x:d,y:g}];return l==="left"?v.reverse():v}if(n){var y=u.x,b=e.x.apply(y,{position:s});if(du(u,"discard")&&!e.x.isInRange(b))return null;var S=[{x:b,y:f+h},{x:b,y:f}];return o==="top"?S.reverse():S}if(i){var A=u.segment,C=A.map(function(T){return e.apply(T,{position:s})});return du(u,"discard")&&UIe(C,function(T){return!e.isInRange(T)})?null:C}return null};function xMe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,l=t.alwaysShow,u=eMe(),d=qY(i),f=KY(a),p=rMe();if(!u||!p)return null;_c(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=W3({x:d.scale,y:f.scale}),m=za(e),g=za(n),v=r&&r.length===2,y=bMe(h,m,g,v,p,t.position,d.orientation,f.orientation,t);if(!y)return null;var b=hMe(y,2),S=b[0],A=S.x,C=S.y,T=b[1],j=T.x,E=T.y,k=du(t,"hidden")?"url(#".concat(u,")"):void 0,O=K7(K7({clipPath:k},mn(t,!0)),{},{x1:A,y1:C,x2:j,y2:E});return xe.createElement(rr,{className:$n("recharts-reference-line",o)},yMe(s,O),Ga.renderCallByParent(t,TOe({x1:A,y1:C,x2:j,y2:E})))}var Wb=function(t){function e(){return aMe(this,e),lMe(this,e,arguments)}return dMe(e,t),oMe(e,[{key:"render",value:function(){return xe.createElement(xMe,this.props)}}])}(xe.Component);X3(Wb,"displayName","ReferenceLine");X3(Wb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function wk(){return wk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wk.apply(this,arguments)}function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function Y7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y7(Object(n),!0).forEach(function(r){c_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QY(r.key),r)}}function _Me(t,e,n){return e&&SMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function AMe(t,e,n){return e=Qw(e),CMe(t,XY()?Reflect.construct(e,n||[],Qw(t).constructor):e.apply(t,n))}function CMe(t,e){if(e&&(Dg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jMe(t)}function jMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XY=function(){return!!t})()}function Qw(t){return Qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qw(t)}function NMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sk(t,e)}function Sk(t,e){return Sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Sk(t,e)}function c_(t,e,n){return e=QY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QY(t){var e=EMe(t,"string");return Dg(e)=="symbol"?e:e+""}function EMe(t,e){if(Dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kMe=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=W3({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return du(e,"discard")&&!s.isInRange(o)?null:o},u_=function(t){function e(){return wMe(this,e),AMe(this,e,arguments)}return NMe(e,t),_Me(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,l=r.clipPathId,u=za(i),d=za(a);if(_c(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=kMe(this.props);if(!f)return null;var p=f.x,h=f.y,m=this.props,g=m.shape,v=m.className,y=du(this.props,"hidden")?"url(#".concat(l,")"):void 0,b=X7(X7({clipPath:y},mn(this.props,!0)),{},{cx:p,cy:h});return xe.createElement(rr,{className:$n("recharts-reference-dot",v)},e.renderDot(g,b),Ga.renderCallByParent(this.props,{x:p-s,y:h-s,width:2*s,height:2*s}))}}])}(xe.Component);c_(u_,"displayName","ReferenceDot");c_(u_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});c_(u_,"renderDot",function(t,e){var n;return xe.isValidElement(t)?n=xe.cloneElement(t,e):jn(t)?n=t(e):n=xe.createElement(Hb,wk({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function _k(){return _k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_k.apply(this,arguments)}function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function Q7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q7(Object(n),!0).forEach(function(r){d_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JY(r.key),r)}}function DMe(t,e,n){return e&&TMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IMe(t,e,n){return e=Zw(e),OMe(t,ZY()?Reflect.construct(e,n||[],Zw(t).constructor):e.apply(t,n))}function OMe(t,e){if(e&&(Ig(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MMe(t)}function MMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZY=function(){return!!t})()}function Zw(t){return Zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zw(t)}function RMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ak(t,e)}function Ak(t,e){return Ak=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ak(t,e)}function d_(t,e,n){return e=JY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JY(t){var e=LMe(t,"string");return Ig(e)=="symbol"?e:e+""}function LMe(t,e){if(Ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var FMe=function(e,n,r,i,a){var s=a.x1,o=a.x2,l=a.y1,u=a.y2,d=a.xAxis,f=a.yAxis;if(!d||!f)return null;var p=W3({x:d.scale,y:f.scale}),h={x:e?p.x.apply(s,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(l,{position:"start"}):p.y.rangeMin},m={x:n?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(u,{position:"end"}):p.y.rangeMax};return du(a,"discard")&&(!p.isInRange(h)||!p.isInRange(m))?null:zY(h,m)},f_=function(t){function e(){return PMe(this,e),IMe(this,e,arguments)}return RMe(e,t),DMe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,l=r.className,u=r.alwaysShow,d=r.clipPathId;_c(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=za(i),p=za(a),h=za(s),m=za(o),g=this.props.shape;if(!f&&!p&&!h&&!m&&!g)return null;var v=FMe(f,p,h,m,this.props);if(!v&&!g)return null;var y=du(this.props,"hidden")?"url(#".concat(d,")"):void 0;return xe.createElement(rr,{className:$n("recharts-reference-area",l)},e.renderRect(g,Z7(Z7({clipPath:y},mn(this.props,!0)),v)),Ga.renderCallByParent(this.props,v))}}])}(xe.Component);d_(f_,"displayName","ReferenceArea");d_(f_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});d_(f_,"renderRect",function(t,e){var n;return xe.isValidElement(t)?n=xe.cloneElement(t,e):jn(t)?n=t(e):n=xe.createElement(U3,_k({},e,{className:"recharts-reference-area-rect"})),n});function eX(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function zMe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return IOe(r,n)}function $Me(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function Jw(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function BMe(t,e){return eX(t,e+1)}function VMe(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,l=0,u=1,d=s,f=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:eX(r,u)};var g=l,v,y=function(){return v===void 0&&(v=n(m,g)),v},b=m.coordinate,S=l===0||Jw(t,b,y,d,o);S||(l=0,d=s,u+=1),S&&(d=b+t*(y()/2+i),l+=u)},p;u<=a.length;)if(p=f(),p)return p.v;return[]}function ib(t){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function J7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J7(Object(n),!0).forEach(function(r){UMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UMe(t,e,n){return e=HMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HMe(t){var e=WMe(t,"string");return ib(e)=="symbol"?e:e+""}function WMe(t,e){if(ib(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ib(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qMe(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,l=e.end,u=function(p){var h=a[p],m,g=function(){return m===void 0&&(m=n(h,p)),m};if(p===s-1){var v=t*(h.coordinate+t*g()/2-l);a[p]=h=Fs(Fs({},h),{},{tickCoord:v>0?h.coordinate-v*t:h.coordinate})}else a[p]=h=Fs(Fs({},h),{},{tickCoord:h.coordinate});var y=Jw(t,h.tickCoord,g,o,l);y&&(l=h.tickCoord-t*(g()/2+i),a[p]=Fs(Fs({},h),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return a}function KMe(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,l=e.start,u=e.end;if(a){var d=r[o-1],f=n(d,o-1),p=t*(d.coordinate+t*f/2-u);s[o-1]=d=Fs(Fs({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate});var h=Jw(t,d.tickCoord,function(){return f},l,u);h&&(u=d.tickCoord-t*(f/2+i),s[o-1]=Fs(Fs({},d),{},{isShow:!0}))}for(var m=a?o-1:o,g=function(b){var S=s[b],A,C=function(){return A===void 0&&(A=n(S,b)),A};if(b===0){var T=t*(S.coordinate-t*C()/2-l);s[b]=S=Fs(Fs({},S),{},{tickCoord:T<0?S.coordinate-T*t:S.coordinate})}else s[b]=S=Fs(Fs({},S),{},{tickCoord:S.coordinate});var j=Jw(t,S.tickCoord,C,l,u);j&&(l=S.tickCoord+t*(C()/2+i),s[b]=Fs(Fs({},S),{},{isShow:!0}))},v=0;v<m;v++)g(v);return s}function Q3(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,l=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(kt(l)||Df.isSsr)return BMe(i,typeof l=="number"&&kt(l)?l:0);var p=[],h=o==="top"||o==="bottom"?"width":"height",m=d&&h==="width"?P0(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(S,A){var C=jn(u)?u(S.value,A):S.value;return h==="width"?zMe(P0(C,{fontSize:e,letterSpacing:n}),m,f):P0(C,{fontSize:e,letterSpacing:n})[h]},v=i.length>=2?ro(i[1].coordinate-i[0].coordinate):1,y=$Me(a,v,h);return l==="equidistantPreserveStart"?VMe(v,y,g,i,s):(l==="preserveStart"||l==="preserveStartEnd"?p=KMe(v,y,g,i,s,l==="preserveStartEnd"):p=qMe(v,y,g,i,s),p.filter(function(b){return b.isShow}))}var GMe=["viewBox"],YMe=["viewBox"],XMe=["ticks"];function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function bm(){return bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bm.apply(this,arguments)}function eF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ia(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eF(Object(n),!0).forEach(function(r){Z3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gC(t,e){if(t==null)return{};var n=QMe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function QMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ZMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nX(r.key),r)}}function JMe(t,e,n){return e&&tF(t.prototype,e),n&&tF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eRe(t,e,n){return e=e5(e),tRe(t,tX()?Reflect.construct(e,n||[],e5(t).constructor):e.apply(t,n))}function tRe(t,e){if(e&&(Og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nRe(t)}function nRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tX=function(){return!!t})()}function e5(t){return e5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e5(t)}function rRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ck(t,e)}function Ck(t,e){return Ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ck(t,e)}function Z3(t,e,n){return e=nX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nX(t){var e=iRe(t,"string");return Og(e)=="symbol"?e:e+""}function iRe(t,e){if(Og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gv=function(t){function e(n){var r;return ZMe(this,e),r=eRe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return rRe(e,t),JMe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=gC(r,GMe),o=this.props,l=o.viewBox,u=gC(o,YMe);return!Im(a,l)||!Im(s,u)||!Im(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,p=i.tickMargin,h,m,g,v,y,b,S=f?-1:1,A=r.tickSize||d,C=kt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":h=m=r.coordinate,v=s+ +!f*l,g=v-S*A,b=g-S*p,y=C;break;case"left":g=v=r.coordinate,m=a+ +!f*o,h=m-S*A,y=h-S*p,b=C;break;case"right":g=v=r.coordinate,m=a+ +f*o,h=m+S*A,y=h+S*p,b=C;break;default:h=m=r.coordinate,v=s+ +f*l,g=v+S*A,b=g+S*p,y=C;break}return{line:{x1:h,y1:g,x2:m,y2:v},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.orientation,u=r.mirror,d=r.axisLine,f=Ia(Ia(Ia({},mn(this.props,!1)),mn(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!u||l==="bottom"&&u);f=Ia(Ia({},f),{},{x1:i,y1:a+p*o,x2:i+s,y2:a+p*o})}else{var h=+(l==="left"&&!u||l==="right"&&u);f=Ia(Ia({},f),{},{x1:i+h*s,y1:a,x2:i+h*s,y2:a+o})}return xe.createElement("line",bm({},f,{className:$n("recharts-cartesian-axis-line",cl(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,l=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,p=o.unit,h=Q3(Ia(Ia({},this.props),{},{ticks:r}),i,a),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=mn(this.props,!1),y=mn(d,!1),b=Ia(Ia({},v),{},{fill:"none"},mn(l,!1)),S=h.map(function(A,C){var T=s.getTickLineCoord(A),j=T.line,E=T.tick,k=Ia(Ia(Ia(Ia({textAnchor:m,verticalAnchor:g},v),{},{stroke:"none",fill:u},y),E),{},{index:C,payload:A,visibleTicksCount:h.length,tickFormatter:f});return xe.createElement(rr,bm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Xh(s.props,A,C)),l&&xe.createElement("line",bm({},b,j,{className:$n("recharts-cartesian-axis-tick-line",cl(l,"className"))})),d&&e.renderTickItem(d,k,"".concat(jn(f)?f(A.value,C):A.value).concat(p||"")))});return xe.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,l=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,p=f.ticks,h=gC(f,XMe),m=p;return jn(l)&&(m=p&&p.length>0?l(this.props):l(h)),s<=0||o<=0||!m||!m.length?null:xe.createElement(rr,{className:$n("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},a&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),Ga.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,o=$n(i.className,"recharts-cartesian-axis-tick-value");return xe.isValidElement(r)?s=xe.cloneElement(r,Ia(Ia({},i),{},{className:o})):jn(r)?s=r(Ia(Ia({},i),{},{className:o})):s=xe.createElement(Qh,bm({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(I.Component);Z3(gv,"displayName","CartesianAxis");Z3(gv,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var aRe=["x1","y1","x2","y2","key"],sRe=["offset"];function tp(t){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tp(t)}function nF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nF(Object(n),!0).forEach(function(r){oRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oRe(t,e,n){return e=lRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lRe(t){var e=cRe(t,"string");return tp(e)=="symbol"?e:e+""}function cRe(t,e){if(tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ah(){return Ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ah.apply(this,arguments)}function rF(t,e){if(t==null)return{};var n=uRe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var dRe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,l=e.ry;return xe.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function rX(t,e){var n;if(xe.isValidElement(t))n=xe.cloneElement(t,e);else if(jn(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,l=rF(e,aRe),u=mn(l,!1);u.offset;var d=rF(u,sRe);n=xe.createElement("line",Ah({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function fRe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=Vs(Vs({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return rX(i,u)});return xe.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function hRe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=Vs(Vs({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return rX(i,u)});return xe.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function pRe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var d=o.map(function(p){return Math.round(p+i-i)}).sort(function(p,h){return p-h});i!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var m=!d[h+1],g=m?i+s-p:d[h+1]-p;if(g<=0)return null;var v=h%e.length;return xe.createElement("rect",{key:"react-".concat(h),y:p,x:r,height:g,width:a,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return xe.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function mRe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(p){return Math.round(p+a-a)}).sort(function(p,h){return p-h});a!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var m=!d[h+1],g=m?a+o-p:d[h+1]-p;if(g<=0)return null;var v=h%r.length;return xe.createElement("rect",{key:"react-".concat(h),x:p,y:s,width:g,height:l,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return xe.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var gRe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return eY(Q3(Vs(Vs(Vs({},gv.defaultProps),r),{},{ticks:qu(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},vRe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return eY(Q3(Vs(Vs(Vs({},gv.defaultProps),r),{},{ticks:qu(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Lp={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Rf(t){var e,n,r,i,a,s,o=G3(),l=Y3(),u=iMe(),d=Vs(Vs({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Lp.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Lp.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Lp.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Lp.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Lp.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Lp.verticalFill,x:kt(t.x)?t.x:u.left,y:kt(t.y)?t.y:u.top,width:kt(t.width)?t.width:u.width,height:kt(t.height)?t.height:u.height}),f=d.x,p=d.y,h=d.width,m=d.height,g=d.syncWithTicks,v=d.horizontalValues,y=d.verticalValues,b=tMe(),S=nMe();if(!kt(h)||h<=0||!kt(m)||m<=0||!kt(f)||f!==+f||!kt(p)||p!==+p)return null;var A=d.verticalCoordinatesGenerator||gRe,C=d.horizontalCoordinatesGenerator||vRe,T=d.horizontalPoints,j=d.verticalPoints;if((!T||!T.length)&&jn(C)){var E=v&&v.length,k=C({yAxis:S?Vs(Vs({},S),{},{ticks:E?v:S.ticks}):void 0,width:o,height:l,offset:u},E?!0:g);_c(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(tp(k),"]")),Array.isArray(k)&&(T=k)}if((!j||!j.length)&&jn(A)){var O=y&&y.length,D=A({xAxis:b?Vs(Vs({},b),{},{ticks:O?y:b.ticks}):void 0,width:o,height:l,offset:u},O?!0:g);_c(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(tp(D),"]")),Array.isArray(D)&&(j=D)}return xe.createElement("g",{className:"recharts-cartesian-grid"},xe.createElement(dRe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),xe.createElement(fRe,Ah({},d,{offset:u,horizontalPoints:T,xAxis:b,yAxis:S})),xe.createElement(hRe,Ah({},d,{offset:u,verticalPoints:j,xAxis:b,yAxis:S})),xe.createElement(pRe,Ah({},d,{horizontalPoints:T})),xe.createElement(mRe,Ah({},d,{verticalPoints:j})))}Rf.displayName="CartesianGrid";var yRe=["type","layout","connectNulls","ref"],bRe=["key"];function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function iF(t,e){if(t==null)return{};var n=xRe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function R0(){return R0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R0.apply(this,arguments)}function aF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aF(Object(n),!0).forEach(function(r){yc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fp(t){return ARe(t)||_Re(t)||SRe(t)||wRe()}function wRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SRe(t,e){if(t){if(typeof t=="string")return jk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jk(t,e)}}function _Re(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ARe(t){if(Array.isArray(t))return jk(t)}function jk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function CRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aX(r.key),r)}}function jRe(t,e,n){return e&&sF(t.prototype,e),n&&sF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function NRe(t,e,n){return e=t5(e),ERe(t,iX()?Reflect.construct(e,n||[],t5(t).constructor):e.apply(t,n))}function ERe(t,e){if(e&&(Mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kRe(t)}function kRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iX=function(){return!!t})()}function t5(t){return t5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},t5(t)}function PRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nk(t,e)}function Nk(t,e){return Nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Nk(t,e)}function yc(t,e,n){return e=aX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aX(t){var e=TRe(t,"string");return Mg(e)=="symbol"?e:e+""}function TRe(t,e){if(Mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var np=function(t){function e(){var n;CRe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=NRe(this,e,[].concat(i)),yc(n,"state",{isAnimationFinished:!0,totalLength:0}),yc(n,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),yc(n,"getStrokeDasharray",function(s,o,l){var u=l.reduce(function(y,b){return y+b});if(!u)return n.generateSimpleStrokeDasharray(o,s);for(var d=Math.floor(s/u),f=s%u,p=o-s,h=[],m=0,g=0;m<l.length;g+=l[m],++m)if(g+l[m]>f){h=[].concat(Fp(l.slice(0,m)),[f-g]);break}var v=h.length%2===0?[0,p]:[p];return[].concat(Fp(e.repeat(l,d)),Fp(h),v).map(function(y){return"".concat(y,"px")}).join(", ")}),yc(n,"id",bp("recharts-line-")),yc(n,"pathRef",function(s){n.mainCurve=s}),yc(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),yc(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return PRe(e,t),jRe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,f=ul(d,Ub);if(!f)return null;var p=function(g,v){return{x:g.x,y:g.y,value:g.value,errorVal:la(g.payload,v)}},h={clipPath:r?"url(#clipPath-".concat(i,")"):null};return xe.createElement(rr,h,f.map(function(m){return xe.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,u=o.points,d=o.dataKey,f=mn(this.props,!1),p=mn(l,!0),h=u.map(function(g,v){var y=Qo(Qo(Qo({key:"dot-".concat(v),r:3},f),p),{},{index:v,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return e.renderDotItem(l,y)}),m={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return xe.createElement(rr,R0({className:"recharts-line-dots",key:"dots"},m),h)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,l=o.type,u=o.layout,d=o.connectNulls;o.ref;var f=iF(o,yRe),p=Qo(Qo(Qo({},mn(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:l,layout:u,connectNulls:d});return xe.createElement(Lh,R0({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,l=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,p=s.animationEasing,h=s.animationId,m=s.animateNewValues,g=s.width,v=s.height,y=this.state,b=y.prevPoints,S=y.totalLength;return xe.createElement(Pc,{begin:d,duration:f,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var C=A.t;if(b){var T=b.length/o.length,j=o.map(function(M,L){var V=Math.floor(L*T);if(b[V]){var Q=b[V],Y=La(Q.x,M.x),J=La(Q.y,M.y);return Qo(Qo({},M),{},{x:Y(C),y:J(C)})}if(m){var q=La(g*2,M.x),ee=La(v/2,M.y);return Qo(Qo({},M),{},{x:q(C),y:ee(C)})}return Qo(Qo({},M),{},{x:M.x,y:M.y})});return a.renderCurveStatically(j,r,i)}var E=La(0,S),k=E(C),O;if(l){var D="".concat(l).split(/[,\s]+/gim).map(function(M){return parseFloat(M)});O=a.getStrokeDasharray(k,S,D)}else O=a.generateSimpleStrokeDasharray(S,k);return a.renderCurveStatically(o,r,i,{strokeDasharray:O})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,l=this.state,u=l.prevPoints,d=l.totalLength;return o&&s&&s.length&&(!u&&d>0||!Zh(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,u=i.xAxis,d=i.yAxis,f=i.top,p=i.left,h=i.width,m=i.height,g=i.isAnimationActive,v=i.id;if(a||!o||!o.length)return null;var y=this.state.isAnimationFinished,b=o.length===1,S=$n("recharts-line",l),A=u&&u.allowDataOverflow,C=d&&d.allowDataOverflow,T=A||C,j=In(v)?this.id:v,E=(r=mn(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=E.r,O=k===void 0?3:k,D=E.strokeWidth,M=D===void 0?2:D,L=qq(s)?s:{},V=L.clipDot,Q=V===void 0?!0:V,Y=O*2+M;return xe.createElement(rr,{className:S},A||C?xe.createElement("defs",null,xe.createElement("clipPath",{id:"clipPath-".concat(j)},xe.createElement("rect",{x:A?p:p-h/2,y:C?f:f-m/2,width:A?h:h*2,height:C?m:m*2})),!Q&&xe.createElement("clipPath",{id:"clipPath-dots-".concat(j)},xe.createElement("rect",{x:p-Y/2,y:f-Y/2,width:h+Y,height:m+Y}))):null,!b&&this.renderCurve(T,j),this.renderErrorBar(T,j),(b||s)&&this.renderDots(T,Q,j),(!g||y)&&No.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Fp(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(Fp(s),Fp(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(xe.isValidElement(r))a=xe.cloneElement(r,i);else if(jn(r))a=r(i);else{var s=i.key,o=iF(i,bRe),l=$n("recharts-line-dot",typeof r!="boolean"?r.className:"");a=xe.createElement(Hb,R0({key:s},o,{className:l}))}return a}}])}(I.PureComponent);yc(np,"displayName","Line");yc(np,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Df.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});yc(np,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,s=t.dataKey,o=t.bandSize,l=t.displayedData,u=t.offset,d=e.layout,f=l.map(function(p,h){var m=la(p,s);return d==="horizontal"?{x:Dw({axis:n,ticks:i,bandSize:o,entry:p,index:h}),y:In(m)?null:r.scale(m),value:m,payload:p}:{x:In(m)?null:n.scale(m),y:Dw({axis:r,ticks:a,bandSize:o,entry:p,index:h}),value:m,payload:p}});return Qo({points:f,layout:d},u)});var DRe=["layout","type","stroke","connectNulls","isRange","ref"],IRe=["key"],sX;function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function oX(t,e){if(t==null)return{};var n=ORe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ORe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ch(){return Ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ch.apply(this,arguments)}function oF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ld(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oF(Object(n),!0).forEach(function(r){tu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cX(r.key),r)}}function RRe(t,e,n){return e&&lF(t.prototype,e),n&&lF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function LRe(t,e,n){return e=n5(e),FRe(t,lX()?Reflect.construct(e,n||[],n5(t).constructor):e.apply(t,n))}function FRe(t,e){if(e&&(Rg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zRe(t)}function zRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lX=function(){return!!t})()}function n5(t){return n5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},n5(t)}function $Re(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ek(t,e)}function Ek(t,e){return Ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ek(t,e)}function tu(t,e,n){return e=cX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cX(t){var e=BRe(t,"string");return Rg(e)=="symbol"?e:e+""}function BRe(t,e){if(Rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Us=function(t){function e(){var n;MRe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=LRe(this,e,[].concat(i)),tu(n,"state",{isAnimationFinished:!0}),tu(n,"id",bp("recharts-area-")),tu(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),jn(s)&&s()}),tu(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),jn(s)&&s()}),n}return $Re(e,t),RRe(e,[{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(s&&!o)return null;var l=this.props,u=l.dot,d=l.points,f=l.dataKey,p=mn(this.props,!1),h=mn(u,!0),m=d.map(function(v,y){var b=Ld(Ld(Ld({key:"dot-".concat(y),r:3},p),h),{},{index:y,cx:v.x,cy:v.y,dataKey:f,value:v.value,payload:v.payload,points:d});return e.renderDotItem(u,b)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return xe.createElement(rr,Ch({className:"recharts-area-dots"},g),m)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,l=s[0].x,u=s[s.length-1].x,d=r*Math.abs(l-u),f=Gd(s.map(function(p){return p.y||0}));return kt(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(Gd(a.map(function(p){return p.y||0})),f)),kt(f)?xe.createElement("rect",{x:l<u?l:l-d,y:0,width:d,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,l=s[0].y,u=s[s.length-1].y,d=r*Math.abs(l-u),f=Gd(s.map(function(p){return p.x||0}));return kt(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(Gd(a.map(function(p){return p.x||0})),f)),kt(f)?xe.createElement("rect",{x:0,y:l<u?l:l-d,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,s){var o=this.props,l=o.layout,u=o.type,d=o.stroke,f=o.connectNulls,p=o.isRange;o.ref;var h=oX(o,DRe);return xe.createElement(rr,{clipPath:a?"url(#clipPath-".concat(s,")"):null},xe.createElement(Lh,Ch({},mn(h,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&xe.createElement(Lh,Ch({},mn(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:r})),d!=="none"&&p&&xe.createElement(Lh,Ch({},mn(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,l=s.baseLine,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,p=s.animationEasing,h=s.animationId,m=this.state,g=m.prevPoints,v=m.prevBaseLine;return xe.createElement(Pc,{begin:d,duration:f,isActive:u,easing:p,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t;if(g){var S=g.length/o.length,A=o.map(function(E,k){var O=Math.floor(k*S);if(g[O]){var D=g[O],M=La(D.x,E.x),L=La(D.y,E.y);return Ld(Ld({},E),{},{x:M(b),y:L(b)})}return E}),C;if(kt(l)&&typeof l=="number"){var T=La(v,l);C=T(b)}else if(In(l)||cv(l)){var j=La(v,0);C=j(b)}else C=l.map(function(E,k){var O=Math.floor(k*S);if(v[O]){var D=v[O],M=La(D.x,E.x),L=La(D.y,E.y);return Ld(Ld({},E),{},{x:M(b),y:L(b)})}return E});return a.renderAreaStatically(A,C,r,i)}return xe.createElement(rr,null,xe.createElement("defs",null,xe.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(b))),xe.createElement(rr,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(o,l,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,s=a.points,o=a.baseLine,l=a.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,p=u.totalLength;return l&&s&&s.length&&(!d&&p>0||!Zh(d,s)||!Zh(f,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(s,o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,u=i.top,d=i.left,f=i.xAxis,p=i.yAxis,h=i.width,m=i.height,g=i.isAnimationActive,v=i.id;if(a||!o||!o.length)return null;var y=this.state.isAnimationFinished,b=o.length===1,S=$n("recharts-area",l),A=f&&f.allowDataOverflow,C=p&&p.allowDataOverflow,T=A||C,j=In(v)?this.id:v,E=(r=mn(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=E.r,O=k===void 0?3:k,D=E.strokeWidth,M=D===void 0?2:D,L=qq(s)?s:{},V=L.clipDot,Q=V===void 0?!0:V,Y=O*2+M;return xe.createElement(rr,{className:S},A||C?xe.createElement("defs",null,xe.createElement("clipPath",{id:"clipPath-".concat(j)},xe.createElement("rect",{x:A?d:d-h/2,y:C?u:u-m/2,width:A?h:h*2,height:C?m:m*2})),!Q&&xe.createElement("clipPath",{id:"clipPath-dots-".concat(j)},xe.createElement("rect",{x:d-Y/2,y:u-Y/2,width:h+Y,height:m+Y}))):null,b?null:this.renderArea(T,j),(s||b)&&this.renderDots(T,Q,j),(!g||y)&&No.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(I.PureComponent);sX=Us;tu(Us,"displayName","Area");tu(Us,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Df.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});tu(Us,"getBaseValue",function(t,e,n,r){var i=t.layout,a=t.baseValue,s=e.props.baseValue,o=s??a;if(kt(o)&&typeof o=="number")return o;var l=i==="horizontal"?r:n,u=l.scale.domain();if(l.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return o==="dataMin"?f:o==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});tu(Us,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,a=t.xAxisTicks,s=t.yAxisTicks,o=t.bandSize,l=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,p=t.offset,h=e.layout,m=u&&u.length,g=sX.getBaseValue(e,n,r,i),v=h==="horizontal",y=!1,b=f.map(function(A,C){var T;m?T=u[d+C]:(T=la(A,l),Array.isArray(T)?y=!0:T=[g,T]);var j=T[1]==null||m&&la(A,l)==null;return v?{x:Dw({axis:r,ticks:a,bandSize:o,entry:A,index:C}),y:j?null:i.scale(T[1]),value:T,payload:A}:{x:j?null:r.scale(T[1]),y:Dw({axis:i,ticks:s,bandSize:o,entry:A,index:C}),value:T,payload:A}}),S;return m||y?S=b.map(function(A){var C=Array.isArray(A.value)?A.value[0]:null;return v?{x:A.x,y:C!=null&&A.y!=null?i.scale(C):null}:{x:C!=null?r.scale(C):null,y:A.y}}):S=v?i.scale(g):r.scale(g),Ld({points:b,baseLine:S,layout:h,isRange:y},p)});tu(Us,"renderDotItem",function(t,e){var n;if(xe.isValidElement(t))n=xe.cloneElement(t,e);else if(jn(t))n=t(e);else{var r=$n("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=oX(e,IRe);n=xe.createElement(Hb,Ch({},a,{key:i,className:r}))}return n});function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function VRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function URe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fX(r.key),r)}}function HRe(t,e,n){return e&&URe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function WRe(t,e,n){return e=r5(e),qRe(t,uX()?Reflect.construct(e,n||[],r5(t).constructor):e.apply(t,n))}function qRe(t,e){if(e&&(Lg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KRe(t)}function KRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uX=function(){return!!t})()}function r5(t){return r5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r5(t)}function GRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kk(t,e)}function kk(t,e){return kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kk(t,e)}function dX(t,e,n){return e=fX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fX(t){var e=YRe(t,"string");return Lg(e)=="symbol"?e:e+""}function YRe(t,e){if(Lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Pk(){return Pk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pk.apply(this,arguments)}function XRe(t){var e=t.xAxisId,n=G3(),r=Y3(),i=qY(e);return i==null?null:I.createElement(gv,Pk({},i,{className:$n("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return qu(s,!0)}}))}var Di=function(t){function e(){return VRe(this,e),WRe(this,e,arguments)}return GRe(e,t),HRe(e,[{key:"render",value:function(){return I.createElement(XRe,this.props)}}])}(I.Component);dX(Di,"displayName","XAxis");dX(Di,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function QRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZRe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mX(r.key),r)}}function JRe(t,e,n){return e&&ZRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eLe(t,e,n){return e=i5(e),tLe(t,hX()?Reflect.construct(e,n||[],i5(t).constructor):e.apply(t,n))}function tLe(t,e){if(e&&(Fg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nLe(t)}function nLe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hX=function(){return!!t})()}function i5(t){return i5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},i5(t)}function rLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tk(t,e)}function Tk(t,e){return Tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Tk(t,e)}function pX(t,e,n){return e=mX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mX(t){var e=iLe(t,"string");return Fg(e)=="symbol"?e:e+""}function iLe(t,e){if(Fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Dk(){return Dk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dk.apply(this,arguments)}var aLe=function(e){var n=e.yAxisId,r=G3(),i=Y3(),a=KY(n);return a==null?null:I.createElement(gv,Dk({},a,{className:$n("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return qu(o,!0)}}))},Ki=function(t){function e(){return QRe(this,e),eLe(this,e,arguments)}return rLe(e,t),JRe(e,[{key:"render",value:function(){return I.createElement(aLe,this.props)}}])}(I.Component);pX(Ki,"displayName","YAxis");pX(Ki,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function cF(t){return cLe(t)||lLe(t)||oLe(t)||sLe()}function sLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oLe(t,e){if(t){if(typeof t=="string")return Ik(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ik(t,e)}}function lLe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cLe(t){if(Array.isArray(t))return Ik(t)}function Ik(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ok=function(e,n,r,i,a){var s=ul(e,Wb),o=ul(e,u_),l=[].concat(cF(s),cF(o)),u=ul(e,f_),d="".concat(i,"Id"),f=i[0],p=n;if(l.length&&(p=l.reduce(function(g,v){if(v.props[d]===r&&du(v.props,"extendDomain")&&kt(v.props[f])){var y=v.props[f];return[Math.min(g[0],y),Math.max(g[1],y)]}return g},p)),u.length){var h="".concat(f,"1"),m="".concat(f,"2");p=u.reduce(function(g,v){if(v.props[d]===r&&du(v.props,"extendDomain")&&kt(v.props[h])&&kt(v.props[m])){var y=v.props[h],b=v.props[m];return[Math.min(g[0],y,b),Math.max(g[1],y,b)]}return g},p)}return a&&a.length&&(p=a.reduce(function(g,v){return kt(v)?[Math.min(g[0],v),Math.max(g[1],v)]:g},p)),p},gX={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,f||l,p),m=n?n+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],h]:l._events[m].push(h):(l._events[m]=h,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,h=f.length,m=new Array(h);p<h;p++)m[p]=f[p].fn;return m},o.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,p,h,m){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],y=arguments.length,b,S;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,p),!0;case 5:return v.fn.call(v.context,d,f,p,h),!0;case 6:return v.fn.call(v.context,d,f,p,h,m),!0}for(S=1,b=new Array(y-1);S<y;S++)b[S-1]=arguments[S];v.fn.apply(v.context,b)}else{var A=v.length,C;for(S=0;S<A;S++)switch(v[S].once&&this.removeListener(u,v[S].fn,void 0,!0),y){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,d);break;case 3:v[S].fn.call(v[S].context,d,f);break;case 4:v[S].fn.call(v[S].context,d,f,p);break;default:if(!b)for(C=1,b=new Array(y-1);C<y;C++)b[C-1]=arguments[C];v[S].fn.apply(v[S].context,b)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,p){var h=n?n+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!p||m.once)&&(!f||m.context===f)&&s(this,h);else{for(var g=0,v=[],y=m.length;g<y;g++)(m[g].fn!==d||p&&!m[g].once||f&&m[g].context!==f)&&v.push(m[g]);v.length?this._events[h]=v.length===1?v[0]:v:s(this,h)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(gX);var uLe=gX.exports;const dLe=Mr(uLe);var vC=new dLe,yC="recharts.syncMouseEvents";function ab(t){"@babel/helpers - typeof";return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(t)}function fLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hLe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vX(r.key),r)}}function pLe(t,e,n){return e&&hLe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bC(t,e,n){return e=vX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vX(t){var e=mLe(t,"string");return ab(e)=="symbol"?e:e+""}function mLe(t,e){if(ab(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ab(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gLe=function(){function t(){fLe(this,t),bC(this,"activeIndex",0),bC(this,"coordinateList",[]),bC(this,"layout","horizontal")}return pLe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,l=n.layout,u=l===void 0?null:l,d=n.offset,f=d===void 0?null:d,p=n.mouseHandlerCallback,h=p===void 0?null:p;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=a+l+u,p=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])}();function vLe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&kt(r)&&kt(i))return!0}return!1}function yLe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function yX(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=ai(e,n,r,i),o=ai(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function bLe(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,p=ai(o,l,u,f),h=ai(o,l,d,f);r=p.x,i=p.y,a=h.x,s=h.y}else return yX(e);return[{x:r,y:i},{x:a,y:s}]}function sb(t){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(t)}function uF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uF(Object(n),!0).forEach(function(r){xLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xLe(t,e,n){return e=wLe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wLe(t){var e=SLe(t,"string");return sb(e)=="symbol"?e:e+""}function SLe(t,e){if(sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Le(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,l=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,p=t.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!a||!s||p!=="ScatterChart"&&i!=="axis")return null;var m,g=Lh;if(p==="ScatterChart")m=s,g=T3e;else if(p==="BarChart")m=yLe(f,s,l,d),g=U3;else if(f==="radial"){var v=yX(s),y=v.cx,b=v.cy,S=v.radius,A=v.startAngle,C=v.endAngle;m={cx:y,cy:b,startAngle:A,endAngle:C,innerRadius:S,outerRadius:S},g=dY}else m={points:bLe(f,s,l)},g=Lh;var T=t1(t1(t1(t1({stroke:"#ccc",pointerEvents:"none"},l),m),mn(h,!1)),{},{payload:o,payloadIndex:u,className:$n("recharts-tooltip-cursor",h.className)});return I.isValidElement(h)?I.cloneElement(h,T):I.createElement(g,T)}var ALe=["item"],CLe=["children","className","width","height","style","compact","title","desc"];function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function xm(){return xm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xm.apply(this,arguments)}function dF(t,e){return ELe(t)||NLe(t,e)||xX(t,e)||jLe()}function jLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NLe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function ELe(t){if(Array.isArray(t))return t}function fF(t,e){if(t==null)return{};var n=kLe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kLe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function PLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TLe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wX(r.key),r)}}function DLe(t,e,n){return e&&TLe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ILe(t,e,n){return e=a5(e),OLe(t,bX()?Reflect.construct(e,n||[],a5(t).constructor):e.apply(t,n))}function OLe(t,e){if(e&&(zg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MLe(t)}function MLe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bX=function(){return!!t})()}function a5(t){return a5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a5(t)}function RLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mk(t,e)}function Mk(t,e){return Mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Mk(t,e)}function $g(t){return zLe(t)||FLe(t)||xX(t)||LLe()}function LLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xX(t,e){if(t){if(typeof t=="string")return Rk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rk(t,e)}}function FLe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zLe(t){if(Array.isArray(t))return Rk(t)}function Rk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hF(Object(n),!0).forEach(function(r){An(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function An(t,e,n){return e=wX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wX(t){var e=$Le(t,"string");return zg(e)=="symbol"?e:e+""}function $Le(t,e){if(zg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BLe={xAxis:["bottom","top"],yAxis:["left","right"]},VLe={width:"100%",height:"100%"},SX={x:0,y:0};function n1(t){return t}var ULe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},HLe=function(e,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return ot(ot(ot({},i),ai(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,u=i.angle;return ot(ot(ot({},i),ai(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return SX},h_=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,l){var u=l.props.data;return u&&u.length?[].concat($g(o),$g(u)):o},[]);return s.length>0?s:e&&e.length&&kt(i)&&kt(a)?e.slice(i,a+1):[]};function _X(t){return t==="number"?[0,"auto"]:void 0}var Lk=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=h_(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(l,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var h=f===void 0?o:f;p=iw(h,s.dataKey,i)}else p=f&&f[r]||o[r];return p?[].concat($g(l),[aY(u,p)]):l},[])},pF=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=ULe(a,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,d=ePe(s,o,u,l);if(d>=0&&u){var f=u[d]&&u[d].value,p=Lk(e,n,d,f),h=HLe(r,o,d,a);return{activeTooltipIndex:d,activeLabel:f,activePayload:p,activeCoordinate:h}}return null},WLe=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,p=e.stackOffset,h=JG(d,a);return r.reduce(function(m,g){var v,y=g.type.defaultProps!==void 0?ot(ot({},g.type.defaultProps),g.props):g.props,b=y.type,S=y.dataKey,A=y.allowDataOverflow,C=y.allowDuplicatedCategory,T=y.scale,j=y.ticks,E=y.includeHidden,k=y[s];if(m[k])return m;var O=h_(e.data,{graphicalItems:i.filter(function($){var G,te=s in $.props?$.props[s]:(G=$.type.defaultProps)===null||G===void 0?void 0:G[s];return te===k}),dataStartIndex:l,dataEndIndex:u}),D=O.length,M,L,V;vLe(y.domain,A,b)&&(M=XE(y.domain,null,A),h&&(b==="number"||T!=="auto")&&(V=D0(O,S,"category")));var Q=_X(b);if(!M||M.length===0){var Y,J=(Y=y.domain)!==null&&Y!==void 0?Y:Q;if(S){if(M=D0(O,S,b),b==="category"&&h){var q=H0e(M);C&&q?(L=M,M=Ww(0,D)):C||(M=O8(J,M,g).reduce(function($,G){return $.indexOf(G)>=0?$:[].concat($g($),[G])},[]))}else if(b==="category")C?M=M.filter(function($){return $!==""&&!In($)}):M=O8(J,M,g).reduce(function($,G){return $.indexOf(G)>=0||G===""||In(G)?$:[].concat($g($),[G])},[]);else if(b==="number"){var ee=aPe(O,i.filter(function($){var G,te,oe=s in $.props?$.props[s]:(G=$.type.defaultProps)===null||G===void 0?void 0:G[s],ge="hide"in $.props?$.props.hide:(te=$.type.defaultProps)===null||te===void 0?void 0:te.hide;return oe===k&&(E||!ge)}),S,a,d);ee&&(M=ee)}h&&(b==="number"||T!=="auto")&&(V=D0(O,S,"category"))}else h?M=Ww(0,D):o&&o[k]&&o[k].hasStack&&b==="number"?M=p==="expand"?[0,1]:iY(o[k].stackGroups,l,u):M=ZG(O,i.filter(function($){var G=s in $.props?$.props[s]:$.type.defaultProps[s],te="hide"in $.props?$.props.hide:$.type.defaultProps.hide;return G===k&&(E||!te)}),b,d,!0);if(b==="number")M=Ok(f,M,k,a,j),J&&(M=XE(J,M,A));else if(b==="category"&&J){var le=J,se=M.every(function($){return le.indexOf($)>=0});se&&(M=le)}}return ot(ot({},m),{},An({},k,ot(ot({},y),{},{axisType:a,domain:M,categoricalDomain:V,duplicateDomain:L,originalDomain:(v=y.domain)!==null&&v!==void 0?v:Q,isCategorical:h,layout:d})))},{})},qLe=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,p=h_(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),h=p.length,m=JG(d,a),g=-1;return r.reduce(function(v,y){var b=y.type.defaultProps!==void 0?ot(ot({},y.type.defaultProps),y.props):y.props,S=b[s],A=_X("number");if(!v[S]){g++;var C;return m?C=Ww(0,h):o&&o[S]&&o[S].hasStack?(C=iY(o[S].stackGroups,l,u),C=Ok(f,C,S,a)):(C=XE(A,ZG(p,r.filter(function(T){var j,E,k=s in T.props?T.props[s]:(j=T.type.defaultProps)===null||j===void 0?void 0:j[s],O="hide"in T.props?T.props.hide:(E=T.type.defaultProps)===null||E===void 0?void 0:E.hide;return k===S&&!O}),"number",d),i.defaultProps.allowDataOverflow),C=Ok(f,C,S,a)),ot(ot({},v),{},An({},S,ot(ot({axisType:a},i.defaultProps),{},{hide:!0,orientation:cl(BLe,"".concat(a,".").concat(g%2),null),domain:C,originalDomain:A,isCategorical:m,layout:d})))}return v},{})},KLe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=e.children,f="".concat(i,"Id"),p=ul(d,a),h={};return p&&p.length?h=WLe(e,{axes:p,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(h=qLe(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:u})),h},GLe=function(e){var n=Ud(e),r=qu(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:g3(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Iw(n,r)}},mF=function(e){var n=e.children,r=e.defaultShowTooltip,i=el(n,kg),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},YLe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Qu(n&&n.type);return r&&r.indexOf("Bar")>=0})},gF=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},XLe=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,l=o===void 0?{}:o,u=r.width,d=r.height,f=r.children,p=r.margin||{},h=el(f,kg),m=el(f,Ac),g=Object.keys(l).reduce(function(C,T){var j=l[T],E=j.orientation;return!j.mirror&&!j.hide?ot(ot({},C),{},An({},E,C[E]+j.width)):C},{left:p.left||0,right:p.right||0}),v=Object.keys(s).reduce(function(C,T){var j=s[T],E=j.orientation;return!j.mirror&&!j.hide?ot(ot({},C),{},An({},E,cl(C,"".concat(E))+j.height)):C},{top:p.top||0,bottom:p.bottom||0}),y=ot(ot({},v),g),b=y.bottom;h&&(y.bottom+=h.props.height||kg.defaultProps.height),m&&n&&(y=rPe(y,i,r,n));var S=u-y.left-y.right,A=d-y.top-y.bottom;return ot(ot({brushBottom:b},y),{},{width:Math.max(S,0),height:Math.max(A,0)})},QLe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},p_=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,p=function(y,b){var S=b.graphicalItems,A=b.stackGroups,C=b.offset,T=b.updateId,j=b.dataStartIndex,E=b.dataEndIndex,k=y.barSize,O=y.layout,D=y.barGap,M=y.barCategoryGap,L=y.maxBarSize,V=gF(O),Q=V.numericAxisName,Y=V.cateAxisName,J=YLe(S),q=[];return S.forEach(function(ee,le){var se=h_(y.data,{graphicalItems:[ee],dataStartIndex:j,dataEndIndex:E}),$=ee.type.defaultProps!==void 0?ot(ot({},ee.type.defaultProps),ee.props):ee.props,G=$.dataKey,te=$.maxBarSize,oe=$["".concat(Q,"Id")],ge=$["".concat(Y,"Id")],_e={},Ce=l.reduce(function(ft,ut){var Dt=b["".concat(ut.axisType,"Map")],Yt=$["".concat(ut.axisType,"Id")];Dt&&Dt[Yt]||ut.axisType==="zAxis"||ep();var Qt=Dt[Yt];return ot(ot({},ft),{},An(An({},ut.axisType,Qt),"".concat(ut.axisType,"Ticks"),qu(Qt)))},_e),fe=Ce[Y],be=Ce["".concat(Y,"Ticks")],we=A&&A[oe]&&A[oe].hasStack&&pPe(ee,A[oe].stackGroups),ie=Qu(ee.type).indexOf("Bar")>=0,He=Iw(fe,be),Me=[],he=J&&tPe({barSize:k,stackGroups:A,totalSize:QLe(Ce,Y)});if(ie){var We,pt,gt=In(te)?L:te,Xe=(We=(pt=Iw(fe,be,!0))!==null&&pt!==void 0?pt:gt)!==null&&We!==void 0?We:0;Me=nPe({barGap:D,barCategoryGap:M,bandSize:Xe!==He?Xe:He,sizeList:he[ge],maxBarSize:gt}),Xe!==He&&(Me=Me.map(function(ft){return ot(ot({},ft),{},{position:ot(ot({},ft.position),{},{offset:ft.position.offset-Xe/2})})}))}var Ot=ee&&ee.type&&ee.type.getComposedData;Ot&&q.push({props:ot(ot({},Ot(ot(ot({},Ce),{},{displayedData:se,props:y,dataKey:G,item:ee,bandSize:He,barPosition:Me,offset:C,stackedData:we,layout:O,dataStartIndex:j,dataEndIndex:E}))),{},An(An(An({key:ee.key||"item-".concat(le)},Q,Ce[Q]),Y,Ce[Y]),"animationId",T)),childIndex:nye(ee,y.children),item:ee})}),q},h=function(y,b){var S=y.props,A=y.dataStartIndex,C=y.dataEndIndex,T=y.updateId;if(!EL({props:S}))return null;var j=S.children,E=S.layout,k=S.stackOffset,O=S.data,D=S.reverseStackOrder,M=gF(E),L=M.numericAxisName,V=M.cateAxisName,Q=ul(j,r),Y=fPe(O,Q,"".concat(L,"Id"),"".concat(V,"Id"),k,D),J=l.reduce(function($,G){var te="".concat(G.axisType,"Map");return ot(ot({},$),{},An({},te,KLe(S,ot(ot({},G),{},{graphicalItems:Q,stackGroups:G.axisType===L&&Y,dataStartIndex:A,dataEndIndex:C}))))},{}),q=XLe(ot(ot({},J),{},{props:S,graphicalItems:Q}),b==null?void 0:b.legendBBox);Object.keys(J).forEach(function($){J[$]=d(S,J[$],q,$.replace("Map",""),n)});var ee=J["".concat(V,"Map")],le=GLe(ee),se=p(S,ot(ot({},J),{},{dataStartIndex:A,dataEndIndex:C,updateId:T,graphicalItems:Q,stackGroups:Y,offset:q}));return ot(ot({formattedGraphicalItems:se,graphicalItems:Q,offset:q,stackGroups:Y},le),J)},m=function(v){function y(b){var S,A,C;return PLe(this,y),C=ILe(this,y,[b]),An(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),An(C,"accessibilityManager",new gLe),An(C,"handleLegendBBoxUpdate",function(T){if(T){var j=C.state,E=j.dataStartIndex,k=j.dataEndIndex,O=j.updateId;C.setState(ot({legendBBox:T},h({props:C.props,dataStartIndex:E,dataEndIndex:k,updateId:O},ot(ot({},C.state),{},{legendBBox:T}))))}}),An(C,"handleReceiveSyncEvent",function(T,j,E){if(C.props.syncId===T){if(E===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(j)}}),An(C,"handleBrushChange",function(T){var j=T.startIndex,E=T.endIndex;if(j!==C.state.dataStartIndex||E!==C.state.dataEndIndex){var k=C.state.updateId;C.setState(function(){return ot({dataStartIndex:j,dataEndIndex:E},h({props:C.props,dataStartIndex:j,dataEndIndex:E,updateId:k},C.state))}),C.triggerSyncEvent({dataStartIndex:j,dataEndIndex:E})}}),An(C,"handleMouseEnter",function(T){var j=C.getMouseInfo(T);if(j){var E=ot(ot({},j),{},{isTooltipActive:!0});C.setState(E),C.triggerSyncEvent(E);var k=C.props.onMouseEnter;jn(k)&&k(E,T)}}),An(C,"triggeredAfterMouseMove",function(T){var j=C.getMouseInfo(T),E=j?ot(ot({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(E),C.triggerSyncEvent(E);var k=C.props.onMouseMove;jn(k)&&k(E,T)}),An(C,"handleItemMouseEnter",function(T){C.setState(function(){return{isTooltipActive:!0,activeItem:T,activePayload:T.tooltipPayload,activeCoordinate:T.tooltipPosition||{x:T.cx,y:T.cy}}})}),An(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),An(C,"handleMouseMove",function(T){T.persist(),C.throttleTriggeredAfterMouseMove(T)}),An(C,"handleMouseLeave",function(T){C.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};C.setState(j),C.triggerSyncEvent(j);var E=C.props.onMouseLeave;jn(E)&&E(j,T)}),An(C,"handleOuterEvent",function(T){var j=tye(T),E=cl(C.props,"".concat(j));if(j&&jn(E)){var k,O;/.*touch.*/i.test(j)?O=C.getMouseInfo(T.changedTouches[0]):O=C.getMouseInfo(T),E((k=O)!==null&&k!==void 0?k:{},T)}}),An(C,"handleClick",function(T){var j=C.getMouseInfo(T);if(j){var E=ot(ot({},j),{},{isTooltipActive:!0});C.setState(E),C.triggerSyncEvent(E);var k=C.props.onClick;jn(k)&&k(E,T)}}),An(C,"handleMouseDown",function(T){var j=C.props.onMouseDown;if(jn(j)){var E=C.getMouseInfo(T);j(E,T)}}),An(C,"handleMouseUp",function(T){var j=C.props.onMouseUp;if(jn(j)){var E=C.getMouseInfo(T);j(E,T)}}),An(C,"handleTouchMove",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(T.changedTouches[0])}),An(C,"handleTouchStart",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&C.handleMouseDown(T.changedTouches[0])}),An(C,"handleTouchEnd",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&C.handleMouseUp(T.changedTouches[0])}),An(C,"handleDoubleClick",function(T){var j=C.props.onDoubleClick;if(jn(j)){var E=C.getMouseInfo(T);j(E,T)}}),An(C,"handleContextMenu",function(T){var j=C.props.onContextMenu;if(jn(j)){var E=C.getMouseInfo(T);j(E,T)}}),An(C,"triggerSyncEvent",function(T){C.props.syncId!==void 0&&vC.emit(yC,C.props.syncId,T,C.eventEmitterSymbol)}),An(C,"applySyncEvent",function(T){var j=C.props,E=j.layout,k=j.syncMethod,O=C.state.updateId,D=T.dataStartIndex,M=T.dataEndIndex;if(T.dataStartIndex!==void 0||T.dataEndIndex!==void 0)C.setState(ot({dataStartIndex:D,dataEndIndex:M},h({props:C.props,dataStartIndex:D,dataEndIndex:M,updateId:O},C.state)));else if(T.activeTooltipIndex!==void 0){var L=T.chartX,V=T.chartY,Q=T.activeTooltipIndex,Y=C.state,J=Y.offset,q=Y.tooltipTicks;if(!J)return;if(typeof k=="function")Q=k(q,T);else if(k==="value"){Q=-1;for(var ee=0;ee<q.length;ee++)if(q[ee].value===T.activeLabel){Q=ee;break}}var le=ot(ot({},J),{},{x:J.left,y:J.top}),se=Math.min(L,le.x+le.width),$=Math.min(V,le.y+le.height),G=q[Q]&&q[Q].value,te=Lk(C.state,C.props.data,Q),oe=q[Q]?{x:E==="horizontal"?q[Q].coordinate:se,y:E==="horizontal"?$:q[Q].coordinate}:SX;C.setState(ot(ot({},T),{},{activeLabel:G,activeCoordinate:oe,activePayload:te,activeTooltipIndex:Q}))}else C.setState(T)}),An(C,"renderCursor",function(T){var j,E=C.state,k=E.isTooltipActive,O=E.activeCoordinate,D=E.activePayload,M=E.offset,L=E.activeTooltipIndex,V=E.tooltipAxisBandSize,Q=C.getTooltipEventType(),Y=(j=T.props.active)!==null&&j!==void 0?j:k,J=C.props.layout,q=T.key||"_recharts-cursor";return xe.createElement(_Le,{key:q,activeCoordinate:O,activePayload:D,activeTooltipIndex:L,chartName:n,element:T,isActive:Y,layout:J,offset:M,tooltipAxisBandSize:V,tooltipEventType:Q})}),An(C,"renderPolarAxis",function(T,j,E){var k=cl(T,"type.axisType"),O=cl(C.state,"".concat(k,"Map")),D=T.type.defaultProps,M=D!==void 0?ot(ot({},D),T.props):T.props,L=O&&O[M["".concat(k,"Id")]];return I.cloneElement(T,ot(ot({},L),{},{className:$n(k,L.className),key:T.key||"".concat(j,"-").concat(E),ticks:qu(L,!0)}))}),An(C,"renderPolarGrid",function(T){var j=T.props,E=j.radialLines,k=j.polarAngles,O=j.polarRadius,D=C.state,M=D.radiusAxisMap,L=D.angleAxisMap,V=Ud(M),Q=Ud(L),Y=Q.cx,J=Q.cy,q=Q.innerRadius,ee=Q.outerRadius;return I.cloneElement(T,{polarAngles:Array.isArray(k)?k:qu(Q,!0).map(function(le){return le.coordinate}),polarRadius:Array.isArray(O)?O:qu(V,!0).map(function(le){return le.coordinate}),cx:Y,cy:J,innerRadius:q,outerRadius:ee,key:T.key||"polar-grid",radialLines:E})}),An(C,"renderLegend",function(){var T=C.state.formattedGraphicalItems,j=C.props,E=j.children,k=j.width,O=j.height,D=C.props.margin||{},M=k-(D.left||0)-(D.right||0),L=XG({children:E,formattedGraphicalItems:T,legendWidth:M,legendContent:u});if(!L)return null;var V=L.item,Q=fF(L,ALe);return I.cloneElement(V,ot(ot({},Q),{},{chartWidth:k,chartHeight:O,margin:D,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),An(C,"renderTooltip",function(){var T,j=C.props,E=j.children,k=j.accessibilityLayer,O=el(E,Or);if(!O)return null;var D=C.state,M=D.isTooltipActive,L=D.activeCoordinate,V=D.activePayload,Q=D.activeLabel,Y=D.offset,J=(T=O.props.active)!==null&&T!==void 0?T:M;return I.cloneElement(O,{viewBox:ot(ot({},Y),{},{x:Y.left,y:Y.top}),active:J,label:Q,payload:J?V:[],coordinate:L,accessibilityLayer:k})}),An(C,"renderBrush",function(T){var j=C.props,E=j.margin,k=j.data,O=C.state,D=O.offset,M=O.dataStartIndex,L=O.dataEndIndex,V=O.updateId;return I.cloneElement(T,{key:T.key||"_recharts-brush",onChange:Qx(C.handleBrushChange,T.props.onChange),data:k,x:kt(T.props.x)?T.props.x:D.left,y:kt(T.props.y)?T.props.y:D.top+D.height+D.brushBottom-(E.bottom||0),width:kt(T.props.width)?T.props.width:D.width,startIndex:M,endIndex:L,updateId:"brush-".concat(V)})}),An(C,"renderReferenceElement",function(T,j,E){if(!T)return null;var k=C,O=k.clipPathId,D=C.state,M=D.xAxisMap,L=D.yAxisMap,V=D.offset,Q=T.type.defaultProps||{},Y=T.props,J=Y.xAxisId,q=J===void 0?Q.xAxisId:J,ee=Y.yAxisId,le=ee===void 0?Q.yAxisId:ee;return I.cloneElement(T,{key:T.key||"".concat(j,"-").concat(E),xAxis:M[q],yAxis:L[le],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:O})}),An(C,"renderActivePoints",function(T){var j=T.item,E=T.activePoint,k=T.basePoint,O=T.childIndex,D=T.isRange,M=[],L=j.props.key,V=j.item.type.defaultProps!==void 0?ot(ot({},j.item.type.defaultProps),j.item.props):j.item.props,Q=V.activeDot,Y=V.dataKey,J=ot(ot({index:O,dataKey:Y,cx:E.x,cy:E.y,r:4,fill:V3(j.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},mn(Q,!1)),aw(Q));return M.push(y.renderActiveDot(Q,J,"".concat(L,"-activePoint-").concat(O))),k?M.push(y.renderActiveDot(Q,ot(ot({},J),{},{cx:k.x,cy:k.y}),"".concat(L,"-basePoint-").concat(O))):D&&M.push(null),M}),An(C,"renderGraphicChild",function(T,j,E){var k=C.filterFormatItem(T,j,E);if(!k)return null;var O=C.getTooltipEventType(),D=C.state,M=D.isTooltipActive,L=D.tooltipAxis,V=D.activeTooltipIndex,Q=D.activeLabel,Y=C.props.children,J=el(Y,Or),q=k.props,ee=q.points,le=q.isRange,se=q.baseLine,$=k.item.type.defaultProps!==void 0?ot(ot({},k.item.type.defaultProps),k.item.props):k.item.props,G=$.activeDot,te=$.hide,oe=$.activeBar,ge=$.activeShape,_e=!!(!te&&M&&J&&(G||oe||ge)),Ce={};O!=="axis"&&J&&J.props.trigger==="click"?Ce={onClick:Qx(C.handleItemMouseEnter,T.props.onClick)}:O!=="axis"&&(Ce={onMouseLeave:Qx(C.handleItemMouseLeave,T.props.onMouseLeave),onMouseEnter:Qx(C.handleItemMouseEnter,T.props.onMouseEnter)});var fe=I.cloneElement(T,ot(ot({},k.props),Ce));function be(ut){return typeof L.dataKey=="function"?L.dataKey(ut.payload):null}if(_e)if(V>=0){var we,ie;if(L.dataKey&&!L.allowDuplicatedCategory){var He=typeof L.dataKey=="function"?be:"payload.".concat(L.dataKey.toString());we=iw(ee,He,Q),ie=le&&se&&iw(se,He,Q)}else we=ee==null?void 0:ee[V],ie=le&&se&&se[V];if(ge||oe){var Me=T.props.activeIndex!==void 0?T.props.activeIndex:V;return[I.cloneElement(T,ot(ot(ot({},k.props),Ce),{},{activeIndex:Me})),null,null]}if(!In(we))return[fe].concat($g(C.renderActivePoints({item:k,activePoint:we,basePoint:ie,childIndex:V,isRange:le})))}else{var he,We=(he=C.getItemByXY(C.state.activeCoordinate))!==null&&he!==void 0?he:{graphicalItem:fe},pt=We.graphicalItem,gt=pt.item,Xe=gt===void 0?T:gt,Ot=pt.childIndex,ft=ot(ot(ot({},k.props),Ce),{},{activeIndex:Ot});return[I.cloneElement(Xe,ft),null,null]}return le?[fe,null,null]:[fe,null]}),An(C,"renderCustomized",function(T,j,E){return I.cloneElement(T,ot(ot({key:"recharts-customized-".concat(E)},C.props),C.state))}),An(C,"renderMap",{CartesianGrid:{handler:n1,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:n1},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:n1},YAxis:{handler:n1},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((S=b.id)!==null&&S!==void 0?S:bp("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=YK(C.triggeredAfterMouseMove,(A=b.throttleDelay)!==null&&A!==void 0?A:1e3/60),C.state={},C}return RLe(y,v),DLe(y,[{key:"componentDidMount",value:function(){var S,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,A=S.children,C=S.data,T=S.height,j=S.layout,E=el(A,Or);if(E){var k=E.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,D=Lk(this.state,C,k,O),M=this.state.tooltipTicks[k].coordinate,L=(this.state.offset.top+T)/2,V=j==="horizontal",Q=V?{x:M,y:L}:{y:M,x:L},Y=this.state.formattedGraphicalItems.find(function(q){var ee=q.item;return ee.type.name==="Scatter"});Y&&(Q=ot(ot({},Q),Y.props.points[k].tooltipPosition),D=Y.props.points[k].tooltipPayload);var J={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:O,activePayload:D,activeCoordinate:Q};this.setState(J),this.renderCursor(E),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var C,T;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0}})}return null}},{key:"componentDidUpdate",value:function(S){dE([el(S.children,Or)],[el(this.props.children,Or)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=el(this.props.children,Or);if(S&&typeof S.props.shared=="boolean"){var A=S.props.shared?"axis":"item";return o.indexOf(A)>=0?A:a}return a}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var A=this.container,C=A.getBoundingClientRect(),T=ECe(C),j={chartX:Math.round(S.pageX-T.left),chartY:Math.round(S.pageY-T.top)},E=C.width/A.offsetWidth||1,k=this.inRange(j.chartX,j.chartY,E);if(!k)return null;var O=this.state,D=O.xAxisMap,M=O.yAxisMap,L=this.getTooltipEventType(),V=pF(this.state,this.props.data,this.props.layout,k);if(L!=="axis"&&D&&M){var Q=Ud(D).scale,Y=Ud(M).scale,J=Q&&Q.invert?Q.invert(j.chartX):null,q=Y&&Y.invert?Y.invert(j.chartY):null;return ot(ot({},j),{},{xValue:J,yValue:q},V)}return V?ot(ot({},j),V):null}},{key:"inRange",value:function(S,A){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,T=this.props.layout,j=S/C,E=A/C;if(T==="horizontal"||T==="vertical"){var k=this.state.offset,O=j>=k.left&&j<=k.left+k.width&&E>=k.top&&E<=k.top+k.height;return O?{x:j,y:E}:null}var D=this.state,M=D.angleAxisMap,L=D.radiusAxisMap;if(M&&L){var V=Ud(M);return L8({x:j,y:E},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,A=this.getTooltipEventType(),C=el(S,Or),T={};C&&A==="axis"&&(C.props.trigger==="click"?T={onClick:this.handleClick}:T={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=aw(this.props,this.handleOuterEvent);return ot(ot({},j),T)}},{key:"addListener",value:function(){vC.on(yC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){vC.removeListener(yC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,A,C){for(var T=this.state.formattedGraphicalItems,j=0,E=T.length;j<E;j++){var k=T[j];if(k.item===S||k.props.key===S.key||A===Qu(k.item.type)&&C===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,A=this.state.offset,C=A.left,T=A.top,j=A.height,E=A.width;return xe.createElement("defs",null,xe.createElement("clipPath",{id:S},xe.createElement("rect",{x:C,y:T,height:j,width:E})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(A,C){var T=dF(C,2),j=T[0],E=T[1];return ot(ot({},A),{},An({},j,E.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(A,C){var T=dF(C,2),j=T[0],E=T[1];return ot(ot({},A),{},An({},j,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[S])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(S){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[S])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(S){var A=this.state,C=A.formattedGraphicalItems,T=A.activeItem;if(C&&C.length)for(var j=0,E=C.length;j<E;j++){var k=C[j],O=k.props,D=k.item,M=D.type.defaultProps!==void 0?ot(ot({},D.type.defaultProps),D.props):D.props,L=Qu(D.type);if(L==="Bar"){var V=(O.data||[]).find(function(q){return d3e(S,q)});if(V)return{graphicalItem:k,payload:V}}else if(L==="RadialBar"){var Q=(O.data||[]).find(function(q){return L8(S,q)});if(Q)return{graphicalItem:k,payload:Q}}else if(s_(k,T)||o_(k,T)||eb(k,T)){var Y=JDe({graphicalItem:k,activeTooltipItem:T,itemData:M.data}),J=M.activeIndex===void 0?Y:M.activeIndex;return{graphicalItem:ot(ot({},k),{},{childIndex:J}),payload:eb(k,T)?M.data[Y]:k.props.data[Y]}}}return null}},{key:"render",value:function(){var S=this;if(!EL(this))return null;var A=this.props,C=A.children,T=A.className,j=A.width,E=A.height,k=A.style,O=A.compact,D=A.title,M=A.desc,L=fF(A,CLe),V=mn(L,!1);if(O)return xe.createElement(W7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},xe.createElement(hE,xm({},V,{width:j,height:E,title:D,desc:M}),this.renderClipPath(),PL(C,this.renderMap)));if(this.props.accessibilityLayer){var Q,Y;V.tabIndex=(Q=this.props.tabIndex)!==null&&Q!==void 0?Q:0,V.role=(Y=this.props.role)!==null&&Y!==void 0?Y:"application",V.onKeyDown=function(q){S.accessibilityManager.keyboardEvent(q)},V.onFocus=function(){S.accessibilityManager.focus()}}var J=this.parseEventsOfWrapper();return xe.createElement(W7,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},xe.createElement("div",xm({className:$n("recharts-wrapper",T),style:ot({position:"relative",cursor:"default",width:j,height:E},k)},J,{ref:function(ee){S.container=ee}}),xe.createElement(hE,xm({},V,{width:j,height:E,title:D,desc:M,style:VLe}),this.renderClipPath(),PL(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(I.Component);An(m,"displayName",n),An(m,"defaultProps",ot({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),An(m,"getDerivedStateFromProps",function(v,y){var b=v.dataKey,S=v.data,A=v.children,C=v.width,T=v.height,j=v.layout,E=v.stackOffset,k=v.margin,O=y.dataStartIndex,D=y.dataEndIndex;if(y.updateId===void 0){var M=mF(v);return ot(ot(ot({},M),{},{updateId:0},h(ot(ot({props:v},M),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:S,prevWidth:C,prevHeight:T,prevLayout:j,prevStackOffset:E,prevMargin:k,prevChildren:A})}if(b!==y.prevDataKey||S!==y.prevData||C!==y.prevWidth||T!==y.prevHeight||j!==y.prevLayout||E!==y.prevStackOffset||!Im(k,y.prevMargin)){var L=mF(v),V={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},Q=ot(ot({},pF(y,S,j)),{},{updateId:y.updateId+1}),Y=ot(ot(ot({},L),V),Q);return ot(ot(ot({},Y),h(ot({props:v},Y),y)),{},{prevDataKey:b,prevData:S,prevWidth:C,prevHeight:T,prevLayout:j,prevStackOffset:E,prevMargin:k,prevChildren:A})}if(!dE(A,y.prevChildren)){var J,q,ee,le,se=el(A,kg),$=se&&(J=(q=se.props)===null||q===void 0?void 0:q.startIndex)!==null&&J!==void 0?J:O,G=se&&(ee=(le=se.props)===null||le===void 0?void 0:le.endIndex)!==null&&ee!==void 0?ee:D,te=$!==O||G!==D,oe=!In(S),ge=oe&&!te?y.updateId:y.updateId+1;return ot(ot({updateId:ge},h(ot(ot({props:v},y),{},{updateId:ge,dataStartIndex:$,dataEndIndex:G}),y)),{},{prevChildren:A,dataStartIndex:$,dataEndIndex:G})}return null}),An(m,"renderActiveDot",function(v,y,b){var S;return I.isValidElement(v)?S=I.cloneElement(v,y):jn(v)?S=v(y):S=xe.createElement(Hb,y),xe.createElement(rr,{className:"recharts-active-dot",key:b},S)});var g=I.forwardRef(function(y,b){return xe.createElement(m,xm({},y,{ref:b}))});return g.displayName=m.displayName,g},ZLe=p_({chartName:"LineChart",GraphicalChild:np,axisComponents:[{axisType:"xAxis",AxisComp:Di},{axisType:"yAxis",AxisComp:Ki}],formatAxisMap:H3}),gl=p_({chartName:"BarChart",GraphicalChild:$a,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Di},{axisType:"yAxis",AxisComp:Ki}],formatAxisMap:H3}),Fk=p_({chartName:"PieChart",GraphicalChild:Tc,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:a_},{axisType:"radiusAxis",AxisComp:r_}],formatAxisMap:APe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),m_=p_({chartName:"AreaChart",GraphicalChild:Us,axisComponents:[{axisType:"xAxis",AxisComp:Di},{axisType:"yAxis",AxisComp:Ki}],formatAxisMap:H3});const Tr={PREGNANT:{key:"PREGNANT",Icon:hl,color:"text-pink-400",label:"Preñada"},IN_SERVICE_CONFIRMED:{key:"IN_SERVICE_CONFIRMED",Icon:zce,color:"text-pink-500",label:"Servicio Visto"},IN_SERVICE:{key:"IN_SERVICE",Icon:hS,color:"text-red-400",label:"En Monta"},EMPTY:{key:"EMPTY",Icon:jce,color:"text-zinc-500",label:"Vacía"},SIRE_IN_SERVICE:{key:"SIRE_IN_SERVICE",Icon:Qce,color:"text-blue-400",label:"Reproductor Activo"},MILKING:{key:"MILKING",Icon:cue,color:"text-blue-300",label:"En Ordeño"},DRYING_OFF:{key:"DRYING_OFF",Icon:mp,color:"text-yellow-400",label:"Secando"},DRY:{key:"DRY",Icon:Gl,color:"text-zinc-400",label:"Seca"}},Cc=t=>{if(!t||t==="N/A")return-1;const e=new Date(t+"T00:00:00Z"),n=new Date,r=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));if(isNaN(e.getTime()))return-1;const i=r.getTime()-e.getTime(),a=Math.floor(i/(1e3*60*60*24));return Math.max(0,a)},Lc=t=>{const e=Cc(t);if(e<0)return"N/A";if(e<=60)return`${e} día${e!==1?"s":""}`;const n=30.4375,r=Math.floor(e/n);if(r<12){const s=Math.round(e%n);return`${r} mes${r!==1?"es":""}${s>0?` y ${s} día${s!==1?"s":""}`:""}`}const i=Math.floor(r/12),a=Math.round(r%12);return`${i} año${i!==1?"s":""}${a>0?` y ${a} mes${a!==1?"es":""}`:""}`},Lf=(t,e)=>{const n=Cc(t.birthDate);return n<0?"Indefinido":t.sex==="Hembra"?t.weaningDate||n>60?e.some(i=>i.goatId===t.id)?"Cabra":"Cabritona":"Cabrita":n>=365?"Macho Cabrío":t.weaningDate||n>60?"Macho de Levante":"Cabrito"},Ff=(t,e)=>{const n=new Date(t+"T00:00:00Z"),r=new Date(e+"T00:00:00Z");if(isNaN(n.getTime())||isNaN(r.getTime()))return 0;const i=r.getTime()-n.getTime(),a=Math.floor(i/(1e3*60*60*24));return Math.max(0,a)},JLe=(t,e)=>{const r=1+(e-50)/(e+50),i=t*Math.max(.5,r);return parseFloat(i.toFixed(2))},J3=(t,e)=>{if(e.length===0)return{overall:null,recent:null};const n=[...e].sort((s,o)=>new Date(s.date).getTime()-new Date(o.date).getTime()),r=n[n.length-1];let i=null;if(t&&t>0){const s=Cc(r.date)-Cc(new Date().toISOString().split("T")[0])+Cc(new Date(r.date).toISOString().split("T")[0]);s>0&&(i=(r.kg-t)/s)}let a=null;if(n.length>=2){const s=r,o=n[n.length-2],l=(new Date(s.date).getTime()-new Date(o.date).getTime())/(1e3*60*60*24);l>0&&(a=(s.kg-o.kg)/l)}return{overall:i,recent:a}},AX=(t,e,n)=>{const r=t.map(d=>({age:(new Date(d.date).getTime()-new Date(e).getTime())/864e5,kg:d.kg})).sort((d,f)=>d.age-f.age);if(r.length<1)return null;const i=r.filter(d=>d.age<=n).pop(),a=r.find(d=>d.age>=n);if(i&&i.age===n)return i.kg;if(a&&a.age===n)return a.kg;if(!i||!a)return null;if(i.age===a.age)return i.kg;const s=a.age-i.age;if(s===0)return i.kg;const o=a.kg-i.kg,l=n-i.age,u=i.kg+l/s*o;return parseFloat(u.toFixed(2))},e6e=(t,e,n)=>{if(e===0)return 100;const r=t/e*100,i=1+(180-Math.min(n,180))/180*.1;return Math.round(r*i)},t6e=t=>{if(!t.weaningWeight||!t.weaningDate||!t.birthWeight||!t.birthDate)return null;const e=(new Date(t.weaningDate).getTime()-new Date(t.birthDate).getTime())/(1e3*60*60*24);if(e<=0)return null;const n=(t.weaningWeight-t.birthWeight)/e,r=t.birthWeight+n*60;return parseFloat(r.toFixed(2))},n6e=(t,e)=>{const n=e.filter(r=>r.animalId===t.id);return AX(n,t.birthDate,210)},CX=(t,e,n,r,i)=>{const a=[];if(!t)return[];if(t.sex==="Hembra"){const o=e.filter(l=>l.goatId===t.id&&l.status!=="finalizada").sort((l,u)=>new Date(u.parturitionDate).getTime()-new Date(l.parturitionDate).getTime())[0];o&&(o.status==="activa"?a.push(Tr.MILKING):o.status==="en-secado"?a.push(Tr.DRYING_OFF):o.status==="seca"&&a.push(Tr.DRY))}if(t.reproductiveStatus==="Preñada"?a.push(Tr.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(l=>l.femaleId===t.id&&l.sireLotId===t.sireLotId)?a.push(Tr.IN_SERVICE_CONFIRMED):a.push(Tr.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push(Tr.EMPTY),t.sex==="Macho"){const o=i.filter(d=>d.status==="Activo"),l=new Set(o.map(d=>d.id));r.some(d=>d.sireId===t.id&&l.has(d.seasonId))&&a.push(Tr.SIRE_IN_SERVICE)}return Array.from(new Set(a.map(o=>o.key))).map(o=>Tr[o])},zk={A:"Alpina",S:"Saanen",N:"Anglo Nubian",AGC:"Canaria",C:"Canaria",T:"Toggenburger",CR:"Criolla"},$k=t=>{const e=new Map;if(!t)return e;const n=/(\d+(\.\d+)?)%?([A-Z]+)/g;let r;for(;(r=n.exec(t.toUpperCase()))!==null;){const i=parseFloat(r[1]),a=r[3],s=Object.keys(zk).includes(a);!isNaN(i)&&s&&e.set(a,(e.get(a)||0)+i)}return e},r6e=t=>t.size===0?"":Array.from(t.entries()).filter(([,n])=>n>0).sort((n,r)=>r[1]-n[1]).map(([n,r])=>`${parseFloat(r.toFixed(2))}%${n}`).join(" "),i6e=(t,e)=>{const n=$k(t),r=$k(e),i=new Map;return new Set([...n.keys(),...r.keys()]).forEach(s=>{const o=n.get(s)||0,l=r.get(s)||0;i.set(s,o/2+l/2)}),r6e(i)},eD=t=>{const e=$k(t);if(e.size===0)return"";const n=Array.from(e.entries()).sort((o,l)=>l[1]-o[1]);if(n.length===0)return"";const[r,i]=n[0],a=96.9,s=zk[r];for(const[o,l]of n)if(l>=a)return`${zk[o]} Pura`;return i>0?`Mestiza ${s}`:"Mestiza"},a6e=()=>{const{animals:t,parturitions:e,bodyWeighings:n,sireLots:r,breedingSeasons:i,weighings:a,appConfig:s}=Xt();return I.useMemo(()=>{const l=t.filter(se=>!se.isReference),u={cabras:[],cabritonas:[],cabritas:[],cabritos:[],machosLevante:[],reproductores:[]};l.forEach(se=>{switch(Lf(se,e)){case"Cabra":u.cabras.push(se);break;case"Cabritona":u.cabritonas.push(se);break;case"Cabrita":u.cabritas.push(se);break;case"Cabrito":u.cabritos.push(se);break;case"Macho de Levante":u.machosLevante.push(se);break;case"Macho Cabrío":u.reproductores.push(se);break}});const d=u.cabras.length+u.cabritonas.length+u.cabritas.length,f=e.filter(se=>se.status==="activa"&&u.cabras.some($=>$.id===se.goatId)).length,p=u.cabras.length-f,h=u.cabras.filter(se=>se.reproductiveStatus==="Preñada").length,m=u.cabras.filter(se=>se.reproductiveStatus==="Vacía"||se.reproductiveStatus==="Post-Parto"||se.reproductiveStatus==="Destetada").length,g=u.cabras.filter(se=>se.reproductiveStatus==="En Servicio").length,v=[{name:"Preñadas",value:h,color:"#34C759"},{name:"Vacías",value:m,color:"#FF9500"},{name:"En Monta",value:g,color:"#007AFF"}].filter(se=>se.value>0),y=new Date().getFullYear(),b=[];for(let se=0;se<2;se++){const $=new Date(y,se*6,1),G=new Date(y,(se+1)*6,0),te=a.filter(Ce=>{const fe=new Date(Ce.date+"T00:00:00");return fe>=$&&fe<=G}),oe=new Set(te.map(Ce=>Ce.goatId)),ge=u.cabras.filter(Ce=>!!e.find(be=>be.goatId===Ce.id&&new Date(be.parturitionDate)<=G)).length,_e=ge>0?oe.size/ge*100:0;b.push({name:`Semestre ${se+1}`,"En Ordeño (%)":parseFloat(_e.toFixed(1))})}const S=s.pesoPrimerServicioKg,A=S*.95,C=u.cabritonas.filter(se=>se.reproductiveStatus==="En Servicio").length,T=u.cabritonas.filter(se=>{const $=n.filter(G=>G.animalId===se.id).sort((G,te)=>new Date(te.date).getTime()-new Date(G.date).getTime())[0];return $?$.kg>=A&&$.kg<S||$.kg>=S&&se.reproductiveStatus!=="En Servicio"&&se.reproductiveStatus!=="Preñada":!1}).length,j=u.cabritonas.length-C-h,E=u.cabritas.length,k=u.cabritos.length,O=E+k,D=[{name:"Hembras",value:E,color:"#FF2D55"},{name:"Machos",value:k,color:"#007AFF"}].filter(se=>se.value>0),M=[...u.cabritas,...u.cabritos].map(se=>{const $=Cc(se.birthDate),G=n.filter(be=>be.animalId===se.id).sort((be,we)=>new Date(we.date).getTime()-new Date(be.date).getTime())[0],te=(G==null?void 0:G.kg)||0,oe=$>=52,ge=te>=9.5,_e=$>=45&&$<52,Ce=$>=40&&$<45||te>=8.5&&te<9.5;let fe="Amamantando";return oe&&ge?fe="Listo para Destete":_e?fe="En Fase Destete":Ce&&(fe="Próximo a Destete"),{id:se.id,status:fe}}),L=M.filter(se=>se.status==="En Fase Destete").length,V=M.filter(se=>se.status==="Próximo a Destete").length,Q=M.filter(se=>se.status==="Listo para Destete").length,Y=M.filter(se=>se.status==="Amamantando").length,J=[{name:"Listo",value:Q,color:"#34C759"},{name:"En Fase",value:L,color:"#FFD60A"},{name:"Próximo",value:V,color:"#FF9F0A"},{name:"Amamantando",value:Y,color:"#007AFF"}].filter(se=>se.value>0),q=new Set(i.filter(se=>se.status==="Activo").map(se=>se.id)),ee=r.filter(se=>q.has(se.seasonId)),le=u.reproductores.filter(se=>ee.some($=>$.sireId===se.id)).map(se=>{const $=ee.find(te=>te.sireId===se.id),G=t.filter(te=>te.sireLotId===$.id).length;return{...se,lotId:$.id,assignedFemales:G}});return{totalPoblacion:l.length,totalVientres:d,cabras:{total:u.cabras.length,enProduccion:f,secas:p,preñadas:h,vacias:m,enMonta:g,reproductiveStatusData:v,milkingPercentageData:b},cabritonas:{total:u.cabritonas.length,enMonta:C,disponibles:j,proximasAServicio:T},crias:{total:O,hembras:E,machos:k,criasEnMaternidadData:D,enFaseDestete:L,proximasADestete:V,listasParaDestete:Q,desteteStatusData:J},reproductores:{total:u.reproductores.length,activos:le}}},[t,e,n,r,i,a,s.pesoPrimerServicioKg])},ur=t=>{if(!t)return"N/A";const e=t.id,n=t.name,r=t.isReference,i=e?e.toUpperCase().trim():"ID_DESCONOCIDO",a=n?String(n).toUpperCase().trim():"";return r&&a.length>0&&i.startsWith("REF-")?a:a.length>0?`${i} ${a}`:i},r1=({title:t,value:e,icon:n,onClick:r})=>c.jsxs("button",{onClick:r,className:"bg-dashboard-surface backdrop-blur-xl rounded-2xl p-4 border border-brand-border/50 text-left hover:border-brand-orange/60 hover:bg-dashboard-surface-hover transition-all duration-200 w-full",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-medium text-brand-light-gray uppercase tracking-wider",children:t}),c.jsx(n,{className:"w-6 h-6 text-brand-orange"})]}),c.jsx("p",{className:"text-4xl font-semibold text-white mt-4",children:e})]}),Td=({title:t,children:e})=>c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-brand-light-gray mb-3 px-1",children:t}),c.jsx("div",{className:"bg-brand-glass backdrop-blur-lg rounded-xl p-4 border border-brand-border/50",children:e})]}),Dd=({label:t,value:e,unit:n,subLabel:r,icon:i})=>c.jsxs("div",{className:"flex justify-between items-center py-2.5",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[i&&c.jsx(i,{className:"w-5 h-5 text-zinc-400"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-base text-white",children:t}),r&&c.jsx("p",{className:"text-xs text-brand-medium-gray mt-0.5",children:r})]})]}),c.jsxs("div",{className:"flex items-baseline gap-1.5",children:[c.jsx("p",{className:"text-xl font-semibold text-white",children:e}),c.jsx("p",{className:"text-sm text-brand-medium-gray",children:n})]})]}),xC=({active:t,payload:e,label:n})=>t&&e&&e.length?c.jsxs("div",{className:"p-2 bg-zinc-800/80 backdrop-blur-md rounded-lg border border-zinc-700 text-white text-sm",children:[c.jsx("p",{className:"font-semibold mb-1",children:n||e[0].name}),e.map((r,i)=>c.jsxs("p",{style:{color:r.color},children:[r.name,": ",c.jsxs("span",{className:"font-bold",children:[r.value,r.unit]})]},`item-${i}`))]}):null;function vF({navigateTo:t}){const[e,n]=I.useState("physical"),[r,i]=I.useState(!1),[a,s]=I.useState(!1),[o,l]=I.useState(!1),[u,d]=I.useState(!1),[f,p]=I.useState(!1),h=a6e();return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-lg mx-auto space-y-6 pb-24 pt-4",children:[c.jsxs("div",{className:"text-center mb-6 px-4",children:[c.jsxs("p",{className:"text-base text-zinc-300 font-light",children:["Población Total del Rebaño: ",c.jsx("span",{className:"font-bold text-white",children:h.totalPoblacion})]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Total de Vientres: ",c.jsx("span",{className:"font-bold text-zinc-200",children:h.totalVientres})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4",children:[c.jsx(r1,{title:"Cabras",value:h.cabras.total,icon:fS,onClick:()=>s(!0)}),c.jsx(r1,{title:"Cabritonas",value:h.cabritonas.total,icon:ba,onClick:()=>l(!0)}),c.jsx(r1,{title:"Crías",value:h.crias.total,icon:hl,onClick:()=>d(!0)}),c.jsx(r1,{title:"Reproductores",value:h.reproductores.total,icon:Ice,onClick:()=>p(!0)})]}),c.jsx("div",{className:"pt-4 px-4",children:c.jsxs("div",{className:"relative bg-brand-glass rounded-xl p-1 border border-brand-border flex items-center",children:[c.jsxs("button",{onClick:()=>n("physical"),className:`w-1/2 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="physical"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[c.jsx(pu,{size:16})," ",c.jsx("span",{className:"text-sm font-semibold",children:"Lotes Físicos"}),c.jsx("span",{onClick:m=>{m.stopPropagation(),i(!0)},className:"ml-2 p-1 rounded-full hover:bg-brand-orange/50",children:c.jsx(qi,{size:18})})]}),c.jsxs("button",{onClick:()=>n("breeding"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="breeding"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[c.jsx(Tb,{size:16})," Lotes de Monta"]})]})}),c.jsxs("div",{className:"pt-0",children:[" ",e==="physical"&&c.jsx(sme,{navigateTo:t}),e==="breeding"&&c.jsx(dme,{navigateTo:t})]})]}),c.jsx(cn,{isOpen:a,onClose:()=>s(!1),title:"Análisis de Hembras Adultas",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs(Td,{title:"Estado Productivo y Reproductivo",children:[c.jsx(Dd,{icon:Lce,label:"En Producción",unit:"cabras",value:h.cabras.enProduccion,subLabel:`${(h.cabras.total>0?h.cabras.enProduccion/h.cabras.total*100:0).toFixed(0)}% del total`}),c.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),c.jsx(Dd,{icon:Gl,label:"Secas",unit:"cabras",value:h.cabras.secas,subLabel:`${(h.cabras.total>0?h.cabras.secas/h.cabras.total*100:0).toFixed(0)}% del total`}),c.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),c.jsx(Dd,{icon:GM,label:"En Monta Activa",unit:"cabras",value:h.cabras.enMonta})]}),c.jsx(Td,{title:"Estado Reproductivo (Vientres)",children:c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{width:"100%",height:"100%",children:c.jsxs(Fk,{children:[c.jsx(Tc,{data:h.cabras.reproductiveStatusData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:3,cornerRadius:5,children:h.cabras.reproductiveStatusData.map(m=>c.jsx(Wl,{fill:m.color,stroke:"none"},`cell-${m.name}`))}),c.jsx(Or,{content:c.jsx(xC,{})}),c.jsx(Ac,{iconSize:10,wrapperStyle:{fontSize:"12px",paddingTop:"10px"}})]})})})}),c.jsx(Td,{title:"Rendimiento Anual en Ordeño",children:c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{width:"100%",height:"100%",children:c.jsxs(gl,{data:h.cabras.milkingPercentageData,margin:{top:15,right:10,left:-20,bottom:0},children:[c.jsx(Di,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},axisLine:!1,tickLine:!1}),c.jsx(Ki,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},unit:"%",axisLine:!1,tickLine:!1}),c.jsx(Or,{content:c.jsx(xC,{unit:"%"}),cursor:{fill:"rgba(255, 255, 255, 0.08)"}}),c.jsx($a,{dataKey:"En Ordeño (%)",fill:"#FF9500",radius:[8,8,0,0],animationDuration:500})]})})})})]})}),c.jsx(cn,{isOpen:o,onClose:()=>l(!1),title:"Análisis de Cabritonas",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs(Td,{title:"Disponibilidad para Monta",children:[c.jsx(Dd,{icon:GM,label:"En Monta",unit:"cabritonas",value:h.cabritonas.enMonta,subLabel:`${(h.cabritonas.total>0?h.cabritonas.enMonta/h.cabritonas.total*100:0).toFixed(0)}% del total`}),c.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),c.jsx(Dd,{icon:pu,label:"Disponibles",unit:"cabritonas",value:h.cabritonas.disponibles})]}),c.jsx(Td,{title:"Próximas a Servicio",children:c.jsx(Dd,{icon:mue,label:"Con Peso Óptimo",unit:"cabritonas",value:h.cabritonas.proximasAServicio,subLabel:"(≥ 28.5 Kg y sin lote asignado)"})})]})}),c.jsx(cn,{isOpen:u,onClose:()=>d(!1),title:"Análisis de Crías en Maternidad",children:c.jsxs("div",{className:"space-y-5",children:[c.jsx(Td,{title:"Distribución por Sexo",children:c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{width:"100%",height:"100%",children:c.jsxs(Fk,{children:[c.jsx(Tc,{data:h.crias.criasEnMaternidadData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:3,cornerRadius:5,children:h.crias.criasEnMaternidadData.map(m=>c.jsx(Wl,{fill:m.color,stroke:"none"},`cell-${m.name}`))}),c.jsx(Or,{content:c.jsx(xC,{})}),c.jsx(Ac,{iconSize:10,wrapperStyle:{fontSize:"12px",paddingTop:"10px"}})]})})})}),c.jsxs(Td,{title:"Estado de Destete",children:[c.jsx(Dd,{icon:hl,label:"Listas para Destete",unit:"crías",value:h.crias.listasParaDestete,subLabel:"≥ 52 días y ≥ 9.5 Kg"}),c.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),c.jsx(Dd,{icon:Cce,label:"En Fase de Destete",unit:"crías",value:h.crias.enFaseDestete,subLabel:"45-52 días"})]})]})}),c.jsx(cn,{isOpen:f,onClose:()=>p(!1),title:"Estado de Reproductores",children:c.jsx("div",{className:"space-y-4",children:c.jsx(Td,{title:"Activos en Temporada de Monta",children:h.reproductores.activos.length>0?h.reproductores.activos.map((m,g)=>c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>{p(!1),t({name:"sire-lot-detail",lotId:m.lotId})},className:"w-full text-left p-2 rounded-lg flex justify-between items-center hover:bg-brand-glass transition-colors group",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-white",children:ur(m)}),c.jsx("p",{className:"text-xs text-brand-medium-gray",children:"Ver lote de monta asignado"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"text-base font-semibold text-brand-orange",children:[m.assignedFemales," hembras"]}),c.jsx(Wi,{className:"text-zinc-500 group-hover:text-white transition-colors"})]})]}),g<h.reproductores.activos.length-1&&c.jsx("div",{className:"border-b border-brand-border/50 mx-2"})]},m.id)):c.jsx("p",{className:"text-sm text-brand-medium-gray text-center py-4",children:"No hay reproductores activos en una temporada de monta actualmente."})})})}),c.jsx(gue,{isOpen:r,onClose:()=>i(!1)})]})}const s6e=()=>({isRelated:I.useCallback((e,n,r)=>{if(!e||!n)return!1;const i=r.find(a=>a.id===e);if(!i)return!1;if(i.fatherId===n)return!0;if(i.motherId){const a=r.find(s=>s.id===i.motherId);if(a&&a.fatherId===n)return!0}return!1},[])}),o6e=(t,e,n,r,i)=>{const a=[];if(!t)return[];if(t.sex==="Hembra"){const s=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,l)=>new Date(l.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];s&&(s.status==="activa"?a.push("MILKING"):s.status==="en-secado"?a.push("DRYING_OFF"):a.push("DRY"))}if(t.reproductiveStatus==="Preñada"?a.push("PREGNANT"):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?a.push("IN_SERVICE_CONFIRMED"):a.push("IN_SERVICE"):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push("EMPTY"),t.sex==="Macho"){const s=i.filter(u=>u.status==="Activo"),o=new Set(s.map(u=>u.id));r.some(u=>u.sireId===t.id&&o.has(u.seasonId))&&a.push("SIRE_IN_SERVICE")}return Array.from(new Set(a))},l6e=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],yF=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-zinc-400 mb-2",children:t}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{type:"button",onClick:()=>r("ALL"),className:`px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const a=i.Icon||null;return c.jsxs("button",{type:"button",onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-blue text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[a&&c.jsx(a,{size:14}),i.label]},i.key)})]})]}),c6e=({activeMode:t,setActiveMode:e})=>c.jsxs("div",{className:"flex bg-zinc-900 rounded-xl p-1 w-full flex-shrink-0",children:[c.jsxs("button",{onClick:()=>e("Activo"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${t==="Activo"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[c.jsx(pu,{size:16})," Activos"]}),c.jsxs("button",{onClick:()=>e("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${t==="Referencia"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[c.jsx(zH,{size:16})," Referencia"]})]}),u6e=({animal:t,isSelected:e,onToggle:n,inbreedingRisk:r})=>{const i=t.name?String(t.name).toUpperCase().trim():"";return c.jsx("div",{onClick:()=>n(t.id),className:`w-full text-left p-3 rounded-xl cursor-pointer transition-colors flex items-center justify-between min-h-[70px] 
        	 	 ${r?"bg-yellow-900/50 border border-yellow-500/60 hover:bg-yellow-800/50":"bg-zinc-800/50 hover:bg-zinc-700"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"flex-shrink-0",children:e?c.jsx(pS,{className:"text-brand-green",size:20}):c.jsx(mS,{className:"text-zinc-500",size:20})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),i&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:i}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})})]})]})})},g_=({isOpen:t,onClose:e,onSelect:n,animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,title:l,sireIdForInbreedingCheck:u,sessionType:d})=>{const{isRelated:f}=s6e(),[p,h]=I.useState(""),[m,g]=I.useState("Activo"),[v,y]=I.useState(new Set),[b,S]=I.useState(!1),[A,C]=I.useState("ALL"),[T,j]=I.useState("ALL"),[E,k]=I.useState("ALL"),[O,D]=I.useState("ALL"),M=()=>{C("ALL"),j("ALL"),k("ALL"),D("ALL")},L=I.useMemo(()=>r.map($=>({...$,statuses:o6e($,i,a,o,s),formattedAge:Lc($.birthDate),zootecnicCategory:Lf($,i)})),[r,i,a,o,s]);I.useEffect(()=>{t&&d&&(M(),d==="leche"&&j("MILKING"))},[t,d]);const V=I.useMemo(()=>{let $=L;if($=$.filter(G=>m==="Activo"?G.status==="Activo"&&!G.isReference&&!G.sireLotId:G.isReference),A!=="ALL"&&($=$.filter(G=>G.zootecnicCategory===A)),m==="Activo"?(T!=="ALL"&&($=$.filter(G=>G.statuses.includes(T))),E!=="ALL"&&($=$.filter(G=>G.statuses.includes(E)))):O!=="ALL"&&($=$.filter(G=>G.status===O)),d==="leche"&&($=$.filter(G=>G.statuses.includes("MILKING"))),p){const G=p.toLowerCase();$=$.filter(te=>te.id.toLowerCase().includes(G)||te.name&&te.name.toLowerCase().includes(G))}return $.sort((G,te)=>G.id.localeCompare(te.id))},[L,A,T,E,O,m,p,d]);I.useEffect(()=>{t&&d&&y(new Set(V.map($=>$.id)))},[V,t,d]);const Q=I.useMemo(()=>V.length>0&&V.every($=>v.has($.id)),[V,v]),Y=I.useMemo(()=>v.size>0&&!Q,[v,Q]),J=()=>{y(Q?new Set:new Set(V.map($=>$.id)))},q=$=>{y(G=>{const te=new Set(G);return te.has($)?te.delete($):te.add($),te})},ee=()=>{n(Array.from(v)),le()},le=()=>{y(new Set),h(""),S(!1),e()},se=l.replace("Añadir animales a:","Lote:");return c.jsxs(c.Fragment,{children:[c.jsx(cn,{isOpen:t,onClose:le,title:se,size:"fullscreen",children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx("div",{className:"flex-shrink-0 space-y-3 px-2 pt-4 pb-2",children:c.jsxs("div",{className:"relative",children:[c.jsx(hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),c.jsx("input",{type:"search",placeholder:"Buscar ID o Nombre...",value:p,onChange:$=>h($.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-orange"})]})}),c.jsxs("div",{className:"flex-grow overflow-y-auto space-y-2 px-2 min-h-[10rem]",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[c.jsxs("div",{onClick:J,className:"flex items-center gap-3 cursor-pointer p-1",children:[Q?c.jsx(pS,{className:"text-brand-green",size:20}):Y?c.jsx(qce,{className:"text-zinc-500",size:20}):c.jsx(mS,{className:"text-zinc-500",size:20}),c.jsxs("span",{className:"text-sm font-semibold text-zinc-300",children:[Q?"Deseleccionar Todos":"Seleccionar Todos"," (",V.length,")"]})]}),c.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-1.5 text-brand-blue font-semibold p-2 rounded-lg hover:bg-zinc-800",children:[c.jsx($H,{size:16}),"Filtros"]})]}),V.length>0?V.map($=>{const G=u?f($.id,u,r):!1;return c.jsx(u6e,{animal:$,isSelected:v.has($.id),onToggle:q,inbreedingRisk:G},$.id)}):c.jsx("p",{className:"text-zinc-500 text-center py-8",children:p?`No se encontraron resultados para "${p}"`:"No hay animales con estos filtros."})]}),c.jsx("div",{className:"flex-shrink-0 px-2 py-4 border-t border-zinc-700/50 bg-ios-modal-bg",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:le,className:"text-zinc-400 hover:text-white px-4 py-2",children:c.jsx("span",{className:"font-semibold",children:"Cancelar"})}),c.jsxs("button",{onClick:ee,disabled:v.size===0,className:"bg-brand-green hover:bg-green-600 text-white font-bold py-3 px-6 rounded-xl disabled:opacity-50 transition-colors",children:["Seleccionar (",v.size,")"]})]})})]})}),c.jsx(cn,{isOpen:b,onClose:()=>S(!1),title:"Filtros",size:"default",children:c.jsxs("div",{className:"space-y-4 px-4 pb-4",children:[c.jsx(c6e,{activeMode:m,setActiveMode:g}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Categoría Zootécnica"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>C("ALL"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${A==="ALL"?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:"Todos"}),l6e.map($=>c.jsx("button",{onClick:()=>C($),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${A===$?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:$},$))]})]}),m==="Activo"&&c.jsxs(c.Fragment,{children:[c.jsx(yF,{title:"Filtros Productivos",filters:["MILKING","DRYING_OFF","DRY"].map($=>Tr[$]).filter(Boolean),activeFilter:T,onFilterChange:j}),c.jsx(yF,{title:"Filtros Reproductivos",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map($=>Tr[$]).filter(Boolean),activeFilter:E,onFilterChange:k})]}),m==="Referencia"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Causa de Baja"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>D("ALL"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${O==="ALL"?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:"Todas"}),c.jsx("button",{onClick:()=>D("Venta"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${O==="Venta"?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:"Venta"}),c.jsx("button",{onClick:()=>D("Muerte"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${O==="Muerte"?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:"Muerte"}),c.jsx("button",{onClick:()=>D("Descarte"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${O==="Descarte"?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:"Descarte"})]})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-zinc-700/50",children:[c.jsxs("button",{onClick:M,className:"flex-shrink-0 p-2 rounded-xl border border-zinc-700 bg-zinc-800 text-zinc-300 hover:bg-zinc-700",children:[c.jsx(rT,{size:16})," ",c.jsx("span",{className:"ml-1 text-sm",children:"Limpiar Filtros"})]}),c.jsx("button",{onClick:()=>S(!1),className:"px-5 py-2 bg-brand-blue text-white font-bold rounded-lg",children:"Ver Resultados"})]})]})})]})},d6e=({isOpen:t,onClose:e,animalsToTransfer:n,fromLot:r})=>{const{lots:i,updateAnimal:a}=Xt(),[s,o]=I.useState(""),l=I.useMemo(()=>i.filter(d=>d.name!==r),[i,r]),u=async()=>{if(!s||n.length===0)return;const d=n.map(f=>a(f,{location:s}));try{await Promise.all(d),e()}catch(f){console.error("Error al transferir animales:",f)}};return c.jsx(cn,{isOpen:t,onClose:e,title:`Transferir ${n.length} animales`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:["Transferir desde: ",c.jsx("span",{className:"font-semibold text-white",children:r})]}),c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1 mt-4",children:"Hacia el lote:"}),c.jsxs("select",{value:s,onChange:d=>o(d.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[c.jsx("option",{value:"",children:"Seleccionar lote de destino..."}),l.map(d=>c.jsx("option",{value:d.name,children:d.name},d.id))]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:u,disabled:!s,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:"Confirmar Transferencia"})]})]})})};function zp(t,e,n){let r=n.initialDeps??[],i;function a(){var s,o,l,u;let d;n.key&&((s=n.debug)!=null&&s.call(n))&&(d=Date.now());const f=t();if(!(f.length!==r.length||f.some((m,g)=>r[g]!==m)))return i;r=f;let h;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(h=Date.now()),i=e(...f),n.key&&((l=n.debug)!=null&&l.call(n))){const m=Math.round((Date.now()-d)*100)/100,g=Math.round((Date.now()-h)*100)/100,v=g/16,y=(b,S)=>{for(b=String(b);b.length<S;)b=" "+b;return b};console.info(`%c⏱ ${y(g,5)} /${y(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*v,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(u=n==null?void 0:n.onChange)==null||u.call(n,i),i}return a.updateDeps=s=>{r=s},a}function bF(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const f6e=(t,e)=>Math.abs(t-e)<1.01,h6e=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},xF=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},p6e=t=>t,m6e=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},g6e=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=s=>{const{width:o,height:l}=s;e({width:Math.round(o),height:Math.round(l)})};if(i(xF(n)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(s=>{const o=()=>{const l=s[0];if(l!=null&&l.borderBoxSize){const u=l.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(xF(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(n,{box:"border-box"}),()=>{a.unobserve(n)}},wF={passive:!0},SF=typeof window>"u"?!0:"onscrollend"in window,v6e=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const a=t.options.useScrollendEvent&&SF?()=>{}:h6e(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),s=d=>()=>{const{horizontal:f,isRtl:p}=t.options;i=f?n.scrollLeft*(p&&-1||1):n.scrollTop,a(),e(i,d)},o=s(!0),l=s(!1);l(),n.addEventListener("scroll",o,wF);const u=t.options.useScrollendEvent&&SF;return u&&n.addEventListener("scrollend",l,wF),()=>{n.removeEventListener("scroll",o),u&&n.removeEventListener("scrollend",l)}},y6e=(t,e,n)=>{if(e!=null&&e.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},b6e=(t,{adjustments:e=0,behavior:n},r)=>{var i,a;const s=t+e;(a=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[r.options.horizontal?"left":"top"]:s,behavior:n})};class x6e{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const s=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var a;return(a=r())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=r())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:p6e,rangeExtractor:m6e,onChange:()=>{},measureElement:y6e,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=zp(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,a=new Map;for(let s=r-1;s>=0;s--){const o=n[s];if(i.has(o.lane))continue;const l=a.get(o.lane);if(l==null||o.end>l.end?a.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((s,o)=>s.end===o.end?s.index-o.index:s.end-o.end)[0]:void 0},this.getMeasurementOptions=zp(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,a,s)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s}),{key:!1}),this.getMeasurements=zp(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s},o)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let d=l;d<n;d++){const f=a(d),p=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d),h=p?p.end+this.options.gap:r+i,m=o.get(f),g=typeof m=="number"?m:this.options.estimateSize(d),v=h+g,y=p?p.lane:d%this.options.lanes;u[d]={index:d,start:h,size:g,end:v,key:f,lane:y}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=zp(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,a)=>this.range=n.length>0&&r>0?w6e({measurements:n,outerSize:r,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=zp(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,a,s)=>a===null||s===null?[]:n({startIndex:a,endIndex:s,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),a=this.measurementsCache[i];if(!a)return;const s=a.key,o=this.elementsCache.get(s);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(s,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const a=this.itemSizeCache.get(i.key)??i.size,s=r-a;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=zp(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let a=0,s=n.length;a<s;a++){const o=n[a],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return bF(r[jX(0,r.length-1,i=>bF(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const a=this.getSize(),s=this.getScrollOffset();r==="auto"&&(r=n>=s+a?"end":"start"),r==="center"?n+=(i-a)/2:r==="end"&&(n-=a);const o=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const a=this.getSize(),s=this.getScrollOffset();if(r==="auto")if(i.end>=s+a-this.options.scrollPaddingEnd)r="end";else if(i.start<=s+this.options.scrollPaddingStart)r="start";else return[s,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let a=0;const s=10,o=u=>{if(!this.targetWindow)return;const d=this.getOffsetForIndex(n,u);if(!d){console.warn("Failed to get offset for index:",n);return}const[f,p]=d;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const h=this.getScrollOffset(),m=this.getOffsetForIndex(n,p);if(!m){console.warn("Failed to get offset for index:",n);return}f6e(m[0],h)||l(p)})},l=u=>{this.targetWindow&&(a++,a<s?this.targetWindow.requestAnimationFrame(()=>o(u)):console.warn(`Failed to scroll to index ${n} after ${s} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const a=Array(this.options.lanes).fill(null);let s=r.length-1;for(;s>=0&&a.some(o=>o===null);){const o=r[s];a[o.lane]===null&&(a[o.lane]=o.end),s--}i=Math.max(...a.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const jX=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,a=n(i);if(a<r)t=i+1;else if(a>r)e=i-1;else return i}return t>0?t-1:0};function w6e({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,a=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:i};let s=jX(0,i,a,n),o=s;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(d=>d<n+e);){const d=t[o];l[d.lane]=d.end,o++}const u=Array(r).fill(n+e);for(;s>=0&&u.some(d=>d>=n);){const d=t[s];u[d.lane]=d.start,s--}s=Math.max(0,s-s%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:s,endIndex:o}}const _F=typeof document<"u"?I.useLayoutEffect:I.useEffect;function S6e(t){const e=I.useReducer(()=>({}),{})[1],n={...t,onChange:(i,a)=>{var s;a?ly.flushSync(e):e(),(s=t.onChange)==null||s.call(t,i,a)}},[r]=I.useState(()=>new x6e(n));return r.setOptions(n),_F(()=>r._didMount(),[]),_F(()=>r._willUpdate()),r}function NX(t){return S6e({observeElementRect:g6e,observeElementOffset:v6e,scrollToFn:b6e,...t})}const EX=({statuses:t})=>{if(!t||t.length===0)return null;const e=[...t].sort((n,r)=>{const i=["MILKING","DRYING_OFF","DRY","PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"];return i.indexOf(n.key)-i.indexOf(r.key)});return c.jsx("div",{className:"flex items-center space-x-1.5",children:e.map(({key:n,Icon:r,color:i,label:a})=>c.jsx("span",{title:a,children:c.jsx(r,{className:i,size:16,strokeWidth:2.5})},n))})},tD=({animal:t,onSelect:e,onOpenActions:n})=>{const r=vp(),i=I.useRef(!1),a=(l,u)=>{const d=u.offset.x,f=u.velocity.x;(d<-80/2||f<-500)&&n(t),r.start({x:0}),setTimeout(()=>{i.current=!1},50)},s=t.isReference?t.sex==="Macho"?"bg-blue-400":"bg-pink-400":null,o=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border min-h-[80px]",children:[c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:c.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(qi,{size:20}),c.jsx("span",{className:"text-[10px] mt-0.5 font-semibold",children:"Acciones"})]})}),s&&c.jsx("div",{className:`absolute top-2 right-2 w-2 h-2 rounded-full ${s} z-20`,title:t.sex}),c.jsx(Ui.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{i.current=!0},onDragEnd:a,onTap:()=>{i.current||e(t.id)},animate:r,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-3 flex items-center min-h-[80px]",children:c.jsxs("div",{className:"flex justify-between items-center w-full",children:[" ",c.jsxs("div",{className:"min-w-0 pr-3",children:[" ",c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),o&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:o}),c.jsxs("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:[c.jsxs("span",{children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]}),t.sireName&&c.jsxs("span",{className:"block sm:inline sm:ml-2",children:["(Rep: ",t.sireName,")"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[" ",c.jsx(EX,{statuses:t.statusObjects})," ",c.jsx(Wi,{className:"text-zinc-600 w-5 h-5"})," "]})]})})]})},nD=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=I.useState(""),[a,s]=I.useState(""),[o,l]=I.useState(""),{fathers:u}=Xt(),d=()=>{l("");const f=r.trim().toUpperCase(),p=a.trim();if(!f||!p){l("Ambos campos son obligatorios.");return}if(u.some(h=>h.id===f)){l("Este ID ya está en uso. Por favor, elige otro.");return}n({id:f,name:p}),i(""),s("")};return c.jsx(cn,{isOpen:t,onClose:e,title:"Añadir Nuevo Padre",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce un ID único y el nombre del nuevo semental."}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{type:"text",value:r,onChange:f=>i(f.target.value),placeholder:"ID del Padre (ej. P002)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"}),c.jsx("input",{type:"text",value:a,onChange:f=>s(f.target.value),placeholder:"Nombre del Padre (ej. Sansón)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),o&&c.jsx("p",{className:"text-sm text-brand-red",children:o}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 rounded-lg hover:bg-zinc-500 font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:d,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Padre"})]})]})})};function _r(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function vl(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function no(t,e){const n=_r(t);return isNaN(e)?vl(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Dc(t,e){const n=_r(t);if(isNaN(e))return vl(t,NaN);if(!e)return n;const r=n.getDate(),i=vl(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const rD=6048e5,_6e=864e5;let A6e={};function qb(){return A6e}function vu(t,e){var o,l,u,d;const n=qb(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=_r(t),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function rp(t){return vu(t,{weekStartsOn:1})}function kX(t){const e=_r(t),n=e.getFullYear(),r=vl(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=rp(r),a=vl(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const s=rp(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function Bg(t){const e=_r(t);return e.setHours(0,0,0,0),e}function s5(t){const e=_r(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function nu(t,e){const n=Bg(t),r=Bg(e),i=+n-s5(n),a=+r-s5(r);return Math.round((i-a)/_6e)}function C6e(t){const e=kX(t),n=vl(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),rp(n)}function Bk(t,e){const n=e*7;return no(t,n)}function j6e(t,e){return Dc(t,e*12)}function N6e(t){let e;return t.forEach(function(n){const r=_r(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function E6e(t){let e;return t.forEach(n=>{const r=_r(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function wo(t,e){const n=Bg(t),r=Bg(e);return+n==+r}function iD(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function k6e(t){if(!iD(t)&&typeof t!="number")return!1;const e=_r(t);return!isNaN(Number(e))}function ob(t,e){const n=_r(t),r=_r(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function P6e(t,e,n){const r=vu(t,n),i=vu(e,n),a=+r-s5(r),s=+i-s5(i);return Math.round((a-s)/rD)}function aD(t){const e=_r(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Eo(t){const e=_r(t);return e.setDate(1),e.setHours(0,0,0,0),e}function PX(t){const e=_r(t),n=vl(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function sD(t,e){var o,l,u,d;const n=qb(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=_r(t),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function TX(t){return sD(t,{weekStartsOn:1})}const T6e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},D6e=(t,e,n)=>{let r;const i=T6e[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Rm(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const I6e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},O6e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},M6e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},R6e={date:Rm({formats:I6e,defaultWidth:"full"}),time:Rm({formats:O6e,defaultWidth:"full"}),dateTime:Rm({formats:M6e,defaultWidth:"full"})},L6e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},F6e=(t,e,n,r)=>L6e[t];function Zc(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const z6e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$6e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},B6e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},V6e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},U6e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},H6e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},W6e=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},q6e={ordinalNumber:W6e,era:Zc({values:z6e,defaultWidth:"wide"}),quarter:Zc({values:$6e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Zc({values:B6e,defaultWidth:"wide"}),day:Zc({values:V6e,defaultWidth:"wide"}),dayPeriod:Zc({values:U6e,defaultWidth:"wide",formattingValues:H6e,defaultFormattingWidth:"wide"})};function Jc(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?G6e(o,f=>f.test(s)):K6e(o,f=>f.test(s));let u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}function K6e(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function G6e(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function DX(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const Y6e=/^(\d+)(th|st|nd|rd)?/i,X6e=/\d+/i,Q6e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Z6e={any:[/^b/i,/^(a|c)/i]},J6e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},e8e={any:[/1/i,/2/i,/3/i,/4/i]},t8e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},n8e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},r8e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},i8e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},a8e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},s8e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},o8e={ordinalNumber:DX({matchPattern:Y6e,parsePattern:X6e,valueCallback:t=>parseInt(t,10)}),era:Jc({matchPatterns:Q6e,defaultMatchWidth:"wide",parsePatterns:Z6e,defaultParseWidth:"any"}),quarter:Jc({matchPatterns:J6e,defaultMatchWidth:"wide",parsePatterns:e8e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Jc({matchPatterns:t8e,defaultMatchWidth:"wide",parsePatterns:n8e,defaultParseWidth:"any"}),day:Jc({matchPatterns:r8e,defaultMatchWidth:"wide",parsePatterns:i8e,defaultParseWidth:"any"}),dayPeriod:Jc({matchPatterns:a8e,defaultMatchWidth:"any",parsePatterns:s8e,defaultParseWidth:"any"})},IX={code:"en-US",formatDistance:D6e,formatLong:R6e,formatRelative:F6e,localize:q6e,match:o8e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function l8e(t){const e=_r(t);return nu(e,PX(e))+1}function OX(t){const e=_r(t),n=+rp(e)-+C6e(e);return Math.round(n/rD)+1}function MX(t,e){var d,f,p,h;const n=_r(t),r=n.getFullYear(),i=qb(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(p=i.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,s=vl(t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=vu(s,e),l=vl(t,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const u=vu(l,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function c8e(t,e){var o,l,u,d;const n=qb(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=MX(t,e),a=vl(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),vu(a,e)}function RX(t,e){const n=_r(t),r=+vu(n,e)-+c8e(n,e);return Math.round(r/rD)+1}function $r(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Id={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return $r(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):$r(n+1,2)},d(t,e){return $r(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return $r(t.getHours()%12||12,e.length)},H(t,e){return $r(t.getHours(),e.length)},m(t,e){return $r(t.getMinutes(),e.length)},s(t,e){return $r(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return $r(i,e.length)}},$p={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},AF={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Id.y(t,e)},Y:function(t,e,n,r){const i=MX(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return $r(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):$r(a,e.length)},R:function(t,e){const n=kX(t);return $r(n,e.length)},u:function(t,e){const n=t.getFullYear();return $r(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return $r(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return $r(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Id.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return $r(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=RX(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):$r(i,e.length)},I:function(t,e,n){const r=OX(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):$r(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Id.d(t,e)},D:function(t,e,n){const r=l8e(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):$r(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return $r(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return $r(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return $r(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=$p.noon:r===0?i=$p.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=$p.evening:r>=12?i=$p.afternoon:r>=4?i=$p.morning:i=$p.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Id.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Id.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):$r(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):$r(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Id.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Id.s(t,e)},S:function(t,e){return Id.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return jF(r);case"XXXX":case"XX":return lh(r);case"XXXXX":case"XXX":default:return lh(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return jF(r);case"xxxx":case"xx":return lh(r);case"xxxxx":case"xxx":default:return lh(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+CF(r,":");case"OOOO":default:return"GMT"+lh(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+CF(r,":");case"zzzz":default:return"GMT"+lh(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return $r(r,e.length)},T:function(t,e,n){const r=t.getTime();return $r(r,e.length)}};function CF(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+$r(a,2)}function jF(t,e){return t%60===0?(t>0?"-":"+")+$r(Math.abs(t)/60,2):lh(t,e)}function lh(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=$r(Math.trunc(r/60),2),a=$r(r%60,2);return n+i+e+a}const NF=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},LX=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},u8e=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return NF(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",NF(r,e)).replace("{{time}}",LX(i,e))},d8e={p:LX,P:u8e},f8e=/^D+$/,h8e=/^Y+$/,p8e=["D","DD","YY","YYYY"];function m8e(t){return f8e.test(t)}function g8e(t){return h8e.test(t)}function v8e(t,e,n){const r=y8e(t,e,n);if(console.warn(r),p8e.includes(t))throw new RangeError(r)}function y8e(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const b8e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,x8e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,w8e=/^'([^]*?)'?$/,S8e=/''/g,_8e=/[a-zA-Z]/;function _p(t,e,n){var d,f,p,h,m,g,v,y;const r=qb(),i=(n==null?void 0:n.locale)??r.locale??IX,a=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(p=r.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((g=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((y=(v=r.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??0,o=_r(t);if(!k6e(o))throw new RangeError("Invalid time value");let l=e.match(x8e).map(b=>{const S=b[0];if(S==="p"||S==="P"){const A=d8e[S];return A(b,i.formatLong)}return b}).join("").match(b8e).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const S=b[0];if(S==="'")return{isToken:!1,value:A8e(b)};if(AF[S])return{isToken:!0,value:b};if(S.match(_8e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(b=>{if(!b.isToken)return b.value;const S=b.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&g8e(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&m8e(S))&&v8e(S,e,String(t));const A=AF[S[0]];return A(o,S,i.localize,u)}).join("")}function A8e(t){const e=t.match(w8e);return e?e[1].replace(S8e,"'"):t}function C8e(t){const e=_r(t),n=e.getFullYear(),r=e.getMonth(),i=vl(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function j8e(t){return Math.trunc(+_r(t)/1e3)}function N8e(t){const e=_r(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function E8e(t,e){return P6e(N8e(t),Eo(t),e)+1}function Vk(t,e){const n=_r(t),r=_r(e);return n.getTime()>r.getTime()}function FX(t,e){const n=_r(t),r=_r(e);return+n<+r}function oD(t,e){const n=_r(t),r=_r(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function k8e(t,e){const n=_r(t),r=_r(e);return n.getFullYear()===r.getFullYear()}function wC(t,e){return no(t,-e)}function SC(t,e){const n=_r(t),r=n.getFullYear(),i=n.getDate(),a=vl(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const s=C8e(a);return n.setMonth(e,Math.min(i,s)),n}function EF(t,e){const n=_r(t);return isNaN(+n)?vl(t,NaN):(n.setFullYear(e),n)}const P8e={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},T8e=(t,e,n)=>{let r;const i=P8e[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},D8e={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},I8e={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},O8e={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},M8e={date:Rm({formats:D8e,defaultWidth:"full"}),time:Rm({formats:I8e,defaultWidth:"full"}),dateTime:Rm({formats:O8e,defaultWidth:"full"})},R8e={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},L8e={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},F8e=(t,e,n,r)=>e.getHours()!==1?L8e[t]:R8e[t],z8e={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},$8e={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},B8e={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},V8e={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},U8e={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},H8e={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},W8e=(t,e)=>Number(t)+"º",q8e={ordinalNumber:W8e,era:Zc({values:z8e,defaultWidth:"wide"}),quarter:Zc({values:$8e,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Zc({values:B8e,defaultWidth:"wide"}),day:Zc({values:V8e,defaultWidth:"wide"}),dayPeriod:Zc({values:U8e,defaultWidth:"wide",formattingValues:H8e,defaultFormattingWidth:"wide"})},K8e=/^(\d+)(º)?/i,G8e=/\d+/i,Y8e={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},X8e={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},Q8e={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Z8e={any:[/1/i,/2/i,/3/i,/4/i]},J8e={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},e7e={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},t7e={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},n7e={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},r7e={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},i7e={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},a7e={ordinalNumber:DX({matchPattern:K8e,parsePattern:G8e,valueCallback:function(t){return parseInt(t,10)}}),era:Jc({matchPatterns:Y8e,defaultMatchWidth:"wide",parsePatterns:X8e,defaultParseWidth:"any"}),quarter:Jc({matchPatterns:Q8e,defaultMatchWidth:"wide",parsePatterns:Z8e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Jc({matchPatterns:J8e,defaultMatchWidth:"wide",parsePatterns:e7e,defaultParseWidth:"any"}),day:Jc({matchPatterns:t7e,defaultMatchWidth:"wide",parsePatterns:n7e,defaultParseWidth:"any"}),dayPeriod:Jc({matchPatterns:r7e,defaultMatchWidth:"any",parsePatterns:i7e,defaultParseWidth:"any"})},Kb={code:"es",formatDistance:T8e,formatLong:M8e,formatRelative:F8e,localize:q8e,match:a7e,options:{weekStartsOn:1,firstWeekContainsDate:1}};var En=function(){return En=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},En.apply(this,arguments)};function s7e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zX(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Gb(t){return t.mode==="multiple"}function Yb(t){return t.mode==="range"}function v_(t){return t.mode==="single"}var o7e={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function l7e(t,e){return _p(t,"LLLL y",e)}function c7e(t,e){return _p(t,"d",e)}function u7e(t,e){return _p(t,"LLLL",e)}function d7e(t){return"".concat(t)}function f7e(t,e){return _p(t,"cccccc",e)}function h7e(t,e){return _p(t,"yyyy",e)}var p7e=Object.freeze({__proto__:null,formatCaption:l7e,formatDay:c7e,formatMonthCaption:u7e,formatWeekNumber:d7e,formatWeekdayName:f7e,formatYearCaption:h7e}),m7e=function(t,e,n){return _p(t,"do MMMM (EEEE)",n)},g7e=function(){return"Month: "},v7e=function(){return"Go to next month"},y7e=function(){return"Go to previous month"},b7e=function(t,e){return _p(t,"cccc",e)},x7e=function(t){return"Week n. ".concat(t)},w7e=function(){return"Year: "},S7e=Object.freeze({__proto__:null,labelDay:m7e,labelMonthDropdown:g7e,labelNext:v7e,labelPrevious:y7e,labelWeekNumber:x7e,labelWeekday:b7e,labelYearDropdown:w7e});function _7e(){var t="buttons",e=o7e,n=IX,r={},i={},a=1,s={},o=new Date;return{captionLayout:t,classNames:e,formatters:p7e,labels:S7e,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:s,today:o,mode:"default"}}function A7e(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,a=t.fromDate,s=t.toDate;return r?a=Eo(r):e&&(a=new Date(e,0,1)),i?s=aD(i):n&&(s=new Date(n,11,31)),{fromDate:a?Bg(a):void 0,toDate:s?Bg(s):void 0}}var $X=I.createContext(void 0);function C7e(t){var e,n=t.initialProps,r=_7e(),i=A7e(n),a=i.fromDate,s=i.toDate,o=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;o!=="buttons"&&(!a||!s)&&(o="buttons");var l;(v_(n)||Gb(n)||Yb(n))&&(l=n.onSelect);var u=En(En(En({},r),n),{captionLayout:o,classNames:En(En({},r.classNames),n.classNames),components:En({},n.components),formatters:En(En({},r.formatters),n.formatters),fromDate:a,labels:En(En({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:En(En({},r.modifiers),n.modifiers),modifiersClassNames:En(En({},r.modifiersClassNames),n.modifiersClassNames),onSelect:l,styles:En(En({},r.styles),n.styles),toDate:s});return c.jsx($X.Provider,{value:u,children:t.children})}function oi(){var t=I.useContext($X);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function BX(t){var e=oi(),n=e.locale,r=e.classNames,i=e.styles,a=e.formatters.formatCaption;return c.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function j7e(t){return c.jsx("svg",En({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:c.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function VX(t){var e,n,r=t.onChange,i=t.value,a=t.children,s=t.caption,o=t.className,l=t.style,u=oi(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:j7e;return c.jsxs("div",{className:o,style:l,children:[c.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),c.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:r,children:a}),c.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[s,c.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function N7e(t){var e,n=oi(),r=n.fromDate,i=n.toDate,a=n.styles,s=n.locale,o=n.formatters.formatMonthCaption,l=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return c.jsx(c.Fragment,{});if(!i)return c.jsx(c.Fragment,{});var f=[];if(k8e(r,i))for(var p=Eo(r),h=r.getMonth();h<=i.getMonth();h++)f.push(SC(p,h));else for(var p=Eo(new Date),h=0;h<=11;h++)f.push(SC(p,h));var m=function(v){var y=Number(v.target.value),b=SC(Eo(t.displayMonth),y);t.onChange(b)},g=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:VX;return c.jsx(g,{name:"months","aria-label":d(),className:l.dropdown_month,style:a.dropdown_month,onChange:m,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:s}),children:f.map(function(v){return c.jsx("option",{value:v.getMonth(),children:o(v,{locale:s})},v.getMonth())})})}function E7e(t){var e,n=t.displayMonth,r=oi(),i=r.fromDate,a=r.toDate,s=r.locale,o=r.styles,l=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,p=[];if(!i)return c.jsx(c.Fragment,{});if(!a)return c.jsx(c.Fragment,{});for(var h=i.getFullYear(),m=a.getFullYear(),g=h;g<=m;g++)p.push(EF(PX(new Date),g));var v=function(b){var S=EF(Eo(n),Number(b.target.value));t.onChange(S)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:VX;return c.jsx(y,{name:"years","aria-label":f(),className:l.dropdown_year,style:o.dropdown_year,onChange:v,value:n.getFullYear(),caption:d(n,{locale:s}),children:p.map(function(b){return c.jsx("option",{value:b.getFullYear(),children:d(b,{locale:s})},b.getFullYear())})})}function k7e(t,e){var n=I.useState(t),r=n[0],i=n[1],a=e===void 0?r:e;return[a,i]}function P7e(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,a=t.toDate,s=t.fromDate,o=t.numberOfMonths,l=o===void 0?1:o;if(a&&ob(a,i)<0){var u=-1*(l-1);i=Dc(a,u)}return s&&ob(i,s)<0&&(i=s),Eo(i)}function T7e(){var t=oi(),e=P7e(t),n=k7e(e,t.month),r=n[0],i=n[1],a=function(s){var o;if(!t.disableNavigation){var l=Eo(s);i(l),(o=t.onMonthChange)===null||o===void 0||o.call(t,l)}};return[r,a]}function D7e(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=Eo(t),a=Eo(Dc(i,r)),s=ob(a,i),o=[],l=0;l<s;l++){var u=Dc(i,l);o.push(u)}return n&&(o=o.reverse()),o}function I7e(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,s=r?a:1,o=Eo(t);if(!n)return Dc(o,s);var l=ob(n,t);if(!(l<a))return Dc(o,s)}}function O7e(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,s=r?a:1,o=Eo(t);if(!n)return Dc(o,-s);var l=ob(o,n);if(!(l<=0))return Dc(o,-s)}}var UX=I.createContext(void 0);function M7e(t){var e=oi(),n=T7e(),r=n[0],i=n[1],a=D7e(r,e),s=I7e(r,e),o=O7e(r,e),l=function(f){return a.some(function(p){return oD(f,p)})},u=function(f,p){l(f)||(p&&FX(f,p)?i(Dc(f,1+e.numberOfMonths*-1)):i(f))},d={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:u,previousMonth:o,nextMonth:s,isDateDisplayed:l};return c.jsx(UX.Provider,{value:d,children:t.children})}function Xb(){var t=I.useContext(UX);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function kF(t){var e,n=oi(),r=n.classNames,i=n.styles,a=n.components,s=Xb().goToMonth,o=function(d){s(Dc(d,t.displayIndex?-t.displayIndex:0))},l=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:BX,u=c.jsx(l,{id:t.id,displayMonth:t.displayMonth});return c.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[c.jsx("div",{className:r.vhidden,children:u}),c.jsx(N7e,{onChange:o,displayMonth:t.displayMonth}),c.jsx(E7e,{onChange:o,displayMonth:t.displayMonth})]})}function R7e(t){return c.jsx("svg",En({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:c.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function L7e(t){return c.jsx("svg",En({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:c.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var o5=I.forwardRef(function(t,e){var n=oi(),r=n.classNames,i=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var s=a.join(" "),o=En(En({},i.button_reset),i.button);return t.style&&Object.assign(o,t.style),c.jsx("button",En({},t,{ref:e,type:"button",className:s,style:o}))});function F7e(t){var e,n,r=oi(),i=r.dir,a=r.locale,s=r.classNames,o=r.styles,l=r.labels,u=l.labelPrevious,d=l.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return c.jsx(c.Fragment,{});var p=u(t.previousMonth,{locale:a}),h=[s.nav_button,s.nav_button_previous].join(" "),m=d(t.nextMonth,{locale:a}),g=[s.nav_button,s.nav_button_next].join(" "),v=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:L7e,y=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:R7e;return c.jsxs("div",{className:s.nav,style:o.nav,children:[!t.hidePrevious&&c.jsx(o5,{name:"previous-month","aria-label":p,className:h,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?c.jsx(v,{className:s.nav_icon,style:o.nav_icon}):c.jsx(y,{className:s.nav_icon,style:o.nav_icon})}),!t.hideNext&&c.jsx(o5,{name:"next-month","aria-label":m,className:g,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?c.jsx(y,{className:s.nav_icon,style:o.nav_icon}):c.jsx(v,{className:s.nav_icon,style:o.nav_icon})})]})}function PF(t){var e=oi().numberOfMonths,n=Xb(),r=n.previousMonth,i=n.nextMonth,a=n.goToMonth,s=n.displayMonths,o=s.findIndex(function(m){return oD(t.displayMonth,m)}),l=o===0,u=o===s.length-1,d=e>1&&(l||!u),f=e>1&&(u||!l),p=function(){r&&a(r)},h=function(){i&&a(i)};return c.jsx(F7e,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:i,previousMonth:r,onPreviousClick:p,onNextClick:h})}function z7e(t){var e,n=oi(),r=n.classNames,i=n.disableNavigation,a=n.styles,s=n.captionLayout,o=n.components,l=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:BX,u;return i?u=c.jsx(l,{id:t.id,displayMonth:t.displayMonth}):s==="dropdown"?u=c.jsx(kF,{displayMonth:t.displayMonth,id:t.id}):s==="dropdown-buttons"?u=c.jsxs(c.Fragment,{children:[c.jsx(kF,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),c.jsx(PF,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=c.jsxs(c.Fragment,{children:[c.jsx(l,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),c.jsx(PF,{displayMonth:t.displayMonth,id:t.id})]}),c.jsx("div",{className:r.caption,style:a.caption,children:u})}function $7e(t){var e=oi(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?c.jsx("tfoot",{className:i,style:r.tfoot,children:c.jsx("tr",{children:c.jsx("td",{colSpan:8,children:n})})}):c.jsx(c.Fragment,{})}function B7e(t,e,n){for(var r=n?rp(new Date):vu(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var s=no(r,a);i.push(s)}return i}function V7e(){var t=oi(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,s=t.ISOWeek,o=t.formatters.formatWeekdayName,l=t.labels.labelWeekday,u=B7e(i,a,s);return c.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&c.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,f){return c.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":l(d,{locale:i}),children:o(d,{locale:i})},f)})]})}function U7e(){var t,e=oi(),n=e.classNames,r=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:V7e;return c.jsx("thead",{style:r.head,className:n.head,children:c.jsx(a,{})})}function H7e(t){var e=oi(),n=e.locale,r=e.formatters.formatDay;return c.jsx(c.Fragment,{children:r(t.date,{locale:n})})}var lD=I.createContext(void 0);function W7e(t){if(!Gb(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return c.jsx(lD.Provider,{value:e,children:t.children})}return c.jsx(q7e,{initialProps:t.initialProps,children:t.children})}function q7e(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,a=e.max,s=function(u,d,f){var p,h;(p=e.onDayClick)===null||p===void 0||p.call(e,u,d,f);var m=!!(d.selected&&i&&(r==null?void 0:r.length)===i);if(!m){var g=!!(!d.selected&&a&&(r==null?void 0:r.length)===a);if(!g){var v=r?zX([],r):[];if(d.selected){var y=v.findIndex(function(b){return wo(u,b)});v.splice(y,1)}else v.push(u);(h=e.onSelect)===null||h===void 0||h.call(e,v,u,d,f)}}},o={disabled:[]};r&&o.disabled.push(function(u){var d=a&&r.length>a-1,f=r.some(function(p){return wo(p,u)});return!!(d&&!f)});var l={selected:r,onDayClick:s,modifiers:o};return c.jsx(lD.Provider,{value:l,children:n})}function cD(){var t=I.useContext(lD);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function K7e(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?wo(i,t)&&wo(r,t)?void 0:wo(i,t)?{from:i,to:void 0}:wo(r,t)?void 0:Vk(r,t)?{from:t,to:i}:{from:r,to:t}:i?Vk(t,i)?{from:i,to:t}:{from:t,to:i}:r?FX(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var uD=I.createContext(void 0);function G7e(t){if(!Yb(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return c.jsx(uD.Provider,{value:e,children:t.children})}return c.jsx(Y7e,{initialProps:t.initialProps,children:t.children})}function Y7e(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},a=i.from,s=i.to,o=e.min,l=e.max,u=function(h,m,g){var v,y;(v=e.onDayClick)===null||v===void 0||v.call(e,h,m,g);var b=K7e(h,r);(y=e.onSelect)===null||y===void 0||y.call(e,b,h,m,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],s?(d.range_end=[s],wo(a,s)||(d.range_middle=[{after:a,before:s}])):d.range_end=[a]):s&&(d.range_start=[s],d.range_end=[s]),o&&(a&&!s&&d.disabled.push({after:wC(a,o-1),before:no(a,o-1)}),a&&s&&d.disabled.push({after:a,before:no(a,o-1)}),!a&&s&&d.disabled.push({after:wC(s,o-1),before:no(s,o-1)})),l){if(a&&!s&&(d.disabled.push({before:no(a,-l+1)}),d.disabled.push({after:no(a,l-1)})),a&&s){var f=nu(s,a)+1,p=l-f;d.disabled.push({before:wC(a,p)}),d.disabled.push({after:no(s,p)})}!a&&s&&(d.disabled.push({before:no(s,-l+1)}),d.disabled.push({after:no(s,l-1)}))}return c.jsx(uD.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function dD(){var t=I.useContext(uD);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Z1(t){return Array.isArray(t)?zX([],t):t!==void 0?[t]:[]}function X7e(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=Z1(i)}),e}var Ic;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Ic||(Ic={}));var Q7e=Ic.Selected,Du=Ic.Disabled,Z7e=Ic.Hidden,J7e=Ic.Today,_C=Ic.RangeEnd,AC=Ic.RangeMiddle,CC=Ic.RangeStart,eFe=Ic.Outside;function tFe(t,e,n){var r,i=(r={},r[Q7e]=Z1(t.selected),r[Du]=Z1(t.disabled),r[Z7e]=Z1(t.hidden),r[J7e]=[t.today],r[_C]=[],r[AC]=[],r[CC]=[],r[eFe]=[],r);return t.fromDate&&i[Du].push({before:t.fromDate}),t.toDate&&i[Du].push({after:t.toDate}),Gb(t)?i[Du]=i[Du].concat(e.modifiers[Du]):Yb(t)&&(i[Du]=i[Du].concat(n.modifiers[Du]),i[CC]=n.modifiers[CC],i[AC]=n.modifiers[AC],i[_C]=n.modifiers[_C]),i}var HX=I.createContext(void 0);function nFe(t){var e=oi(),n=cD(),r=dD(),i=tFe(e,n,r),a=X7e(e.modifiers),s=En(En({},i),a);return c.jsx(HX.Provider,{value:s,children:t.children})}function WX(){var t=I.useContext(HX);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function rFe(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function iFe(t){return!!(t&&typeof t=="object"&&"from"in t)}function aFe(t){return!!(t&&typeof t=="object"&&"after"in t)}function sFe(t){return!!(t&&typeof t=="object"&&"before"in t)}function oFe(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function lFe(t,e){var n,r=e.from,i=e.to;if(r&&i){var a=nu(i,r)<0;a&&(n=[i,r],r=n[0],i=n[1]);var s=nu(t,r)>=0&&nu(i,t)>=0;return s}return i?wo(i,t):r?wo(r,t):!1}function cFe(t){return iD(t)}function uFe(t){return Array.isArray(t)&&t.every(iD)}function dFe(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(cFe(n))return wo(t,n);if(uFe(n))return n.includes(t);if(iFe(n))return lFe(t,n);if(oFe(n))return n.dayOfWeek.includes(t.getDay());if(rFe(n)){var r=nu(n.before,t),i=nu(n.after,t),a=r>0,s=i<0,o=Vk(n.before,n.after);return o?s&&a:a||s}return aFe(n)?nu(t,n.after)>0:sFe(n)?nu(n.before,t)>0:typeof n=="function"?n(t):!1})}function fD(t,e,n){var r=Object.keys(e).reduce(function(a,s){var o=e[s];return dFe(t,o)&&a.push(s),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),n&&!oD(t,n)&&(i.outside=!0),i}function fFe(t,e){for(var n=Eo(t[0]),r=aD(t[t.length-1]),i,a,s=n;s<=r;){var o=fD(s,e),l=!o.disabled&&!o.hidden;if(!l){s=no(s,1);continue}if(o.selected)return s;o.today&&!a&&(a=s),i||(i=s),s=no(s,1)}return a||i}var hFe=365;function qX(t,e){var n=e.moveBy,r=e.direction,i=e.context,a=e.modifiers,s=e.retry,o=s===void 0?{count:0,lastFocused:t}:s,l=i.weekStartsOn,u=i.fromDate,d=i.toDate,f=i.locale,p={day:no,week:Bk,month:Dc,year:j6e,startOfWeek:function(v){return i.ISOWeek?rp(v):vu(v,{locale:f,weekStartsOn:l})},endOfWeek:function(v){return i.ISOWeek?TX(v):sD(v,{locale:f,weekStartsOn:l})}},h=p[n](t,r==="after"?1:-1);r==="before"&&u?h=N6e([u,h]):r==="after"&&d&&(h=E6e([d,h]));var m=!0;if(a){var g=fD(h,a);m=!g.disabled&&!g.hidden}return m?h:o.count>hFe?o.lastFocused:qX(h,{moveBy:n,direction:r,context:i,modifiers:a,retry:En(En({},o),{count:o.count+1})})}var KX=I.createContext(void 0);function pFe(t){var e=Xb(),n=WX(),r=I.useState(),i=r[0],a=r[1],s=I.useState(),o=s[0],l=s[1],u=fFe(e.displayMonths,n),d=i??(o&&e.isDateDisplayed(o))?o:u,f=function(){l(i),a(void 0)},p=function(v){a(v)},h=oi(),m=function(v,y){if(i){var b=qX(i,{moveBy:v,direction:y,context:h,modifiers:n});wo(i,b)||(e.goToDate(b,i),p(b))}},g={focusedDay:i,focusTarget:d,blur:f,focus:p,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return c.jsx(KX.Provider,{value:g,children:t.children})}function hD(){var t=I.useContext(KX);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function mFe(t,e){var n=WX(),r=fD(t,n,e);return r}var pD=I.createContext(void 0);function gFe(t){if(!v_(t.initialProps)){var e={selected:void 0};return c.jsx(pD.Provider,{value:e,children:t.children})}return c.jsx(vFe,{initialProps:t.initialProps,children:t.children})}function vFe(t){var e=t.initialProps,n=t.children,r=function(a,s,o){var l,u,d;if((l=e.onDayClick)===null||l===void 0||l.call(e,a,s,o),s.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,s,o);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,s,o)},i={selected:e.selected,onDayClick:r};return c.jsx(pD.Provider,{value:i,children:n})}function GX(){var t=I.useContext(pD);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function yFe(t,e){var n=oi(),r=GX(),i=cD(),a=dD(),s=hD(),o=s.focusDayAfter,l=s.focusDayBefore,u=s.focusWeekAfter,d=s.focusWeekBefore,f=s.blur,p=s.focus,h=s.focusMonthBefore,m=s.focusMonthAfter,g=s.focusYearBefore,v=s.focusYearAfter,y=s.focusStartOfWeek,b=s.focusEndOfWeek,S=function(J){var q,ee,le,se;v_(n)?(q=r.onDayClick)===null||q===void 0||q.call(r,t,e,J):Gb(n)?(ee=i.onDayClick)===null||ee===void 0||ee.call(i,t,e,J):Yb(n)?(le=a.onDayClick)===null||le===void 0||le.call(a,t,e,J):(se=n.onDayClick)===null||se===void 0||se.call(n,t,e,J)},A=function(J){var q;p(t),(q=n.onDayFocus)===null||q===void 0||q.call(n,t,e,J)},C=function(J){var q;f(),(q=n.onDayBlur)===null||q===void 0||q.call(n,t,e,J)},T=function(J){var q;(q=n.onDayMouseEnter)===null||q===void 0||q.call(n,t,e,J)},j=function(J){var q;(q=n.onDayMouseLeave)===null||q===void 0||q.call(n,t,e,J)},E=function(J){var q;(q=n.onDayPointerEnter)===null||q===void 0||q.call(n,t,e,J)},k=function(J){var q;(q=n.onDayPointerLeave)===null||q===void 0||q.call(n,t,e,J)},O=function(J){var q;(q=n.onDayTouchCancel)===null||q===void 0||q.call(n,t,e,J)},D=function(J){var q;(q=n.onDayTouchEnd)===null||q===void 0||q.call(n,t,e,J)},M=function(J){var q;(q=n.onDayTouchMove)===null||q===void 0||q.call(n,t,e,J)},L=function(J){var q;(q=n.onDayTouchStart)===null||q===void 0||q.call(n,t,e,J)},V=function(J){var q;(q=n.onDayKeyUp)===null||q===void 0||q.call(n,t,e,J)},Q=function(J){var q;switch(J.key){case"ArrowLeft":J.preventDefault(),J.stopPropagation(),n.dir==="rtl"?o():l();break;case"ArrowRight":J.preventDefault(),J.stopPropagation(),n.dir==="rtl"?l():o();break;case"ArrowDown":J.preventDefault(),J.stopPropagation(),u();break;case"ArrowUp":J.preventDefault(),J.stopPropagation(),d();break;case"PageUp":J.preventDefault(),J.stopPropagation(),J.shiftKey?g():h();break;case"PageDown":J.preventDefault(),J.stopPropagation(),J.shiftKey?v():m();break;case"Home":J.preventDefault(),J.stopPropagation(),y();break;case"End":J.preventDefault(),J.stopPropagation(),b();break}(q=n.onDayKeyDown)===null||q===void 0||q.call(n,t,e,J)},Y={onClick:S,onFocus:A,onBlur:C,onKeyDown:Q,onKeyUp:V,onMouseEnter:T,onMouseLeave:j,onPointerEnter:E,onPointerLeave:k,onTouchCancel:O,onTouchEnd:D,onTouchMove:M,onTouchStart:L};return Y}function bFe(){var t=oi(),e=GX(),n=cD(),r=dD(),i=v_(t)?e.selected:Gb(t)?n.selected:Yb(t)?r.selected:void 0;return i}function xFe(t){return Object.values(Ic).includes(t)}function wFe(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(xFe(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function SFe(t,e){var n=En({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=En(En({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function _Fe(t,e,n){var r,i,a,s=oi(),o=hD(),l=mFe(t,e),u=yFe(t,l),d=bFe(),f=!!(s.onDayClick||s.mode!=="default");I.useEffect(function(){var T;l.outside||o.focusedDay&&f&&wo(o.focusedDay,t)&&((T=n.current)===null||T===void 0||T.focus())},[o.focusedDay,t,n,f,l.outside]);var p=wFe(s,l).join(" "),h=SFe(s,l),m=!!(l.outside&&!s.showOutsideDays||l.hidden),g=(a=(i=s.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:H7e,v=c.jsx(g,{date:t,displayMonth:e,activeModifiers:l}),y={style:h,className:p,children:v,role:"gridcell"},b=o.focusTarget&&wo(o.focusTarget,t)&&!l.outside,S=o.focusedDay&&wo(o.focusedDay,t),A=En(En(En({},y),(r={disabled:l.disabled,role:"gridcell"},r["aria-selected"]=l.selected,r.tabIndex=S||b?0:-1,r)),u),C={isButton:f,isHidden:m,activeModifiers:l,selectedDays:d,buttonProps:A,divProps:y};return C}function AFe(t){var e=I.useRef(null),n=_Fe(t.date,t.displayMonth,e);return n.isHidden?c.jsx("div",{role:"gridcell"}):n.isButton?c.jsx(o5,En({name:"day",ref:e},n.buttonProps)):c.jsx("div",En({},n.divProps))}function CFe(t){var e=t.number,n=t.dates,r=oi(),i=r.onWeekNumberClick,a=r.styles,s=r.classNames,o=r.locale,l=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:o});if(!i)return c.jsx("span",{className:s.weeknumber,style:a.weeknumber,children:d});var f=l(Number(e),{locale:o}),p=function(h){i(e,n,h)};return c.jsx(o5,{name:"week-number","aria-label":f,className:s.weeknumber,style:a.weeknumber,onClick:p,children:d})}function jFe(t){var e,n,r=oi(),i=r.styles,a=r.classNames,s=r.showWeekNumber,o=r.components,l=(e=o==null?void 0:o.Day)!==null&&e!==void 0?e:AFe,u=(n=o==null?void 0:o.WeekNumber)!==null&&n!==void 0?n:CFe,d;return s&&(d=c.jsx("td",{className:a.cell,style:i.cell,children:c.jsx(u,{number:t.weekNumber,dates:t.dates})})),c.jsxs("tr",{className:a.row,style:i.row,children:[d,t.dates.map(function(f){return c.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:c.jsx(l,{displayMonth:t.displayMonth,date:f})},j8e(f))})]})}function TF(t,e,n){for(var r=n!=null&&n.ISOWeek?TX(e):sD(e,n),i=n!=null&&n.ISOWeek?rp(t):vu(t,n),a=nu(r,i),s=[],o=0;o<=a;o++)s.push(no(i,o));var l=s.reduce(function(u,d){var f=n!=null&&n.ISOWeek?OX(d):RX(d,n),p=u.find(function(h){return h.weekNumber===f});return p?(p.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return l}function NFe(t,e){var n=TF(Eo(t),aD(t),e);if(e!=null&&e.useFixedWeeks){var r=E8e(t,e);if(r<6){var i=n[n.length-1],a=i.dates[i.dates.length-1],s=Bk(a,6-r),o=TF(Bk(a,1),s,e);n.push.apply(n,o)}}return n}function EFe(t){var e,n,r,i=oi(),a=i.locale,s=i.classNames,o=i.styles,l=i.hideHead,u=i.fixedWeeks,d=i.components,f=i.weekStartsOn,p=i.firstWeekContainsDate,h=i.ISOWeek,m=NFe(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:h,locale:a,weekStartsOn:f,firstWeekContainsDate:p}),g=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:U7e,v=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:jFe,y=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:$7e;return c.jsxs("table",{id:t.id,className:s.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!l&&c.jsx(g,{}),c.jsx("tbody",{className:s.tbody,style:o.tbody,children:m.map(function(b){return c.jsx(v,{displayMonth:t.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),c.jsx(y,{displayMonth:t.displayMonth})]})}function kFe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var PFe=kFe()?I.useLayoutEffect:I.useEffect,jC=!1,TFe=0;function DF(){return"react-day-picker-".concat(++TFe)}function DFe(t){var e,n=t??(jC?DF():null),r=I.useState(n),i=r[0],a=r[1];return PFe(function(){i===null&&a(DF())},[]),I.useEffect(function(){jC===!1&&(jC=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function IFe(t){var e,n,r=oi(),i=r.dir,a=r.classNames,s=r.styles,o=r.components,l=Xb().displayMonths,u=DFe(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[a.month],p=s.month,h=t.displayIndex===0,m=t.displayIndex===l.length-1,g=!h&&!m;i==="rtl"&&(e=[h,m],m=e[0],h=e[1]),h&&(f.push(a.caption_start),p=En(En({},p),s.caption_start)),m&&(f.push(a.caption_end),p=En(En({},p),s.caption_end)),g&&(f.push(a.caption_between),p=En(En({},p),s.caption_between));var v=(n=o==null?void 0:o.Caption)!==null&&n!==void 0?n:z7e;return c.jsxs("div",{className:f.join(" "),style:p,children:[c.jsx(v,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),c.jsx(EFe,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function OFe(t){var e=oi(),n=e.classNames,r=e.styles;return c.jsx("div",{className:n.months,style:r.months,children:t.children})}function MFe(t){var e,n,r=t.initialProps,i=oi(),a=hD(),s=Xb(),o=I.useState(!1),l=o[0],u=o[1];I.useEffect(function(){i.initialFocus&&a.focusTarget&&(l||(a.focus(a.focusTarget),u(!0)))},[i.initialFocus,l,a.focus,a.focusTarget,a]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var f=En(En({},i.styles.root),i.style),p=Object.keys(r).filter(function(m){return m.startsWith("data-")}).reduce(function(m,g){var v;return En(En({},m),(v={},v[g]=r[g],v))},{}),h=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:OFe;return c.jsx("div",En({className:d.join(" "),style:f,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:c.jsx(h,{children:s.displayMonths.map(function(m,g){return c.jsx(IFe,{displayIndex:g,displayMonth:m},g)})})}))}function RFe(t){var e=t.children,n=s7e(t,["children"]);return c.jsx(C7e,{initialProps:n,children:c.jsx(M7e,{children:c.jsx(gFe,{initialProps:n,children:c.jsx(W7e,{initialProps:n,children:c.jsx(G7e,{initialProps:n,children:c.jsx(nFe,{children:c.jsx(pFe,{children:e})})})})})})})}function Ap(t){return c.jsx(RFe,En({},t,{children:c.jsx(MFe,{initialProps:t})}))}const IF=[{count:1,name:"Simple"},{count:2,name:"Doble"},{count:3,name:"Triple"},{count:4,name:"Cuádruple"},{count:5,name:"Quíntuple"}],OF=140,MF=7,LFe=`
  .rdp {
    --rdp-cell-size: 40px; --rdp-accent-color: #FF9500; --rdp-background-color: transparent;
    --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: transparent;
    --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF; margin: 1em auto;
  }
  .rdp-caption_label { color: #FFF; font-weight: bold;}
  .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; }
  .rdp-day { color: #FFF;}
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
  .rdp-day_today { font-weight: bold; color: #FF9500; }
  .rdp-day_disabled { color: #505054; }
  .rdp-day_outside { color: #505054; }
  .rdp-caption_dropdowns { display: flex; gap: 10px; }
   .rdp-dropdown { background-color: #333; border: 1px solid #555; color: #FFF; padding: 4px 8px; border-radius: 6px; }
`,Cp=({isOpen:t,onClose:e,motherId:n})=>{const{animals:r,fathers:i,addFather:a,addParturition:s,parturitions:o}=Xt(),[l,u]=I.useState(1),[d,f]=I.useState(new Date().toISOString().split("T")[0]),[p,h]=I.useState(""),[m,g]=I.useState(1),[v,y]=I.useState([]),[b,S]=I.useState(!1),[A,C]=I.useState(!1),[T,j]=I.useState(!1),[E,k]=I.useState(""),O=I.useMemo(()=>r.find(ee=>ee.id===n),[r,n]),D=O!=null&&O.name?String(O.name).toUpperCase().trim():"";I.useEffect(()=>{t&&(u(1),f(new Date().toISOString().split("T")[0]),h(""),g(1),y([]),j(!1),k(""))},[t]);const M=()=>u(ee=>ee<4?ee+1:ee),L=()=>u(ee=>ee>1?ee-1:ee),V=ee=>{g(ee),y(Array.from({length:ee},(le,se)=>({id:`kid_${se}_${Date.now()}`,sex:"Hembra",status:"Viva",correlative:"",birthWeight:""}))),M()},Q=(ee,le,se)=>{const $=[...v];let G=se;le==="birthWeight"&&parseFloat(se)>MF&&(G=MF.toString()),$[ee]={...$[ee],[le]:G},y($)},Y=async()=>{var $;j(!0),k("");const ee=o.filter(G=>G.goatId.toUpperCase()===n.toUpperCase()),le=new Date(d).getTime();if(ee.some(G=>{const te=new Date(G.parturitionDate).getTime();return Math.abs(le-te)/(1e3*60*60*24)<OF})){k(`Ya existe un parto registrado para ${n} en una fecha demasiado cercana (menos de ${OF} días).`),j(!1);return}try{const G=i.find(_e=>_e.id===p);if(!G)throw new Error("Padre (semental) no encontrado en la base de datos.");const te=v.filter(_e=>_e.status==="Viva"),oe=v.some(_e=>_e.status==="Mortinato"),ge=te.map(_e=>({sex:_e.sex,birthWeight:_e.birthWeight,id:`${_e.sex==="Macho"?"X":ur(G).charAt(0).toUpperCase()||"?"}${_e.correlative}`}));await s({motherId:n.toUpperCase(),parturitionDate:d,sireId:p,parturitionType:(($=IF.find(_e=>_e.count===m))==null?void 0:$.name)||"Simple",offspringCount:v.length,liveOffspring:ge,parturitionOutcome:oe?"Con Mortinatos":"Normal",inducedLactation:!0}),M(),setTimeout(e,2e3)}catch(G){k(G.message||"Error al registrar el parto. Revisa los datos e IDs de las crías."),console.error(G),j(!1)}},J=I.useMemo(()=>i.find(ee=>ee.id===p),[p,i]),q=async ee=>{try{await a(ee),h(ee.id),S(!1)}catch(le){k(le.message||"No se pudo guardar el nuevo padre."),console.error("Error saving new father:",le)}};return t?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex flex-col justify-end z-50 animate-fade-in",onClick:e,children:c.jsxs("div",{className:"bg-ios-modal-bg w-full h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:ee=>ee.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[l>1&&l<4&&c.jsx("button",{onClick:L,className:"p-2 text-zinc-400 hover:text-white",children:c.jsx(ji,{size:24})}),c.jsx("h1",{className:"text-xl font-bold tracking-tight text-white mx-auto",children:l===4?"Éxito":"Registrar Parto"}),l<4?c.jsx("button",{onClick:e,className:"p-2 text-zinc-400 hover:text-white",children:c.jsx(Xl,{size:24})}):c.jsx("div",{className:"w-10"})]}),c.jsxs("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[l===1&&c.jsxs("div",{className:"space-y-6 max-w-md mx-auto",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:O==null?void 0:O.id.toUpperCase()}),D&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:D})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Fecha del Parto"}),c.jsxs("button",{type:"button",onClick:()=>C(!0),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg text-left flex justify-between items-center text-white",children:[c.jsx("span",{children:d?new Date(d+"T00:00:00Z").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}):"Seleccionar Fecha"}),c.jsx(oo,{className:"text-zinc-400",size:20})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Padre (Semental)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:p,onChange:ee=>h(ee.target.value),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg appearance-none text-white",children:[c.jsx("option",{value:"",className:"text-zinc-500",children:"Seleccionar Padre..."}),i.map(ee=>c.jsx("option",{value:ee.id,className:"text-white",children:ur(ee)},ee.id))]}),c.jsx("button",{type:"button",onClick:()=>S(!0),className:"flex-shrink-0 p-4 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(qi,{size:24})})]})]}),c.jsx("button",{onClick:M,disabled:!d||!p,className:"w-full bg-brand-orange text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:"Siguiente"})]}),l===2&&c.jsxs("div",{className:"space-y-6 text-center max-w-md mx-auto",children:[c.jsx("h2",{className:"text-2xl font-semibold text-white",children:"¿Cuántas crías nacieron?"}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:IF.map(ee=>c.jsx("button",{onClick:()=>V(ee.count),className:"bg-zinc-800 hover:bg-zinc-700 text-white font-bold py-8 rounded-2xl text-2xl transition-colors",children:ee.name},ee.count))})]}),l===3&&c.jsxs("div",{className:"space-y-4 max-w-xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:O==null?void 0:O.id.toUpperCase()}),D&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:D})]}),v.map((ee,le)=>{const se=ee.status==="Mortinato";return c.jsxs("div",{className:`bg-black/20 rounded-2xl p-4 border transition-colors ${se?"border-red-500/30":"border-zinc-700"} space-y-3`,children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("p",{className:"font-semibold text-brand-orange",children:["Cría ",le+1]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"w-32",children:c.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[c.jsx("button",{type:"button",onClick:()=>Q(le,"status","Viva"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${se?"text-zinc-400":"bg-green-600 text-white"}`,children:"Viva"}),c.jsx("button",{type:"button",onClick:()=>Q(le,"status","Mortinato"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${se?"bg-red-600 text-white":"text-zinc-400"}`,children:"Mortinato"})]})}),c.jsx("div",{className:"w-32",children:c.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[c.jsx("button",{type:"button",onClick:()=>Q(le,"sex","Hembra"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${ee.sex==="Hembra"?"bg-pink-500 text-white":"text-zinc-400"}`,children:"Hembra"}),c.jsx("button",{type:"button",onClick:()=>Q(le,"sex","Macho"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${ee.sex==="Macho"?"bg-blue-500 text-white":"text-zinc-400"}`,children:"Macho"})]})})]})]}),c.jsxs("div",{className:`grid grid-cols-2 gap-3 items-center transition-opacity ${se?"opacity-40 pointer-events-none":"opacity-100"}`,children:[c.jsxs("div",{className:"flex items-center bg-zinc-800 p-3 rounded-xl gap-2",children:[c.jsx("span",{className:"font-mono text-zinc-400 text-lg",children:ee.sex==="Macho"?"X":ur(J).charAt(0).toUpperCase()||"?"}),c.jsx("input",{autoFocus:le===0,value:ee.correlative,onChange:$=>Q(le,"correlative",$.target.value.toUpperCase()),placeholder:"ID",className:"w-full bg-transparent text-lg text-white focus:outline-none",disabled:se,required:!se})]}),c.jsx("input",{value:ee.birthWeight,onChange:$=>Q(le,"birthWeight",$.target.value),placeholder:"Peso (Kg)",type:"number",step:"0.1",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",disabled:se,required:!se})]})]},ee.id)}),c.jsx("button",{onClick:Y,disabled:T||v.some(ee=>ee.status==="Viva"&&(!ee.correlative||!ee.birthWeight)),className:"w-full bg-brand-green text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:T?"Guardando...":`Guardar Parto y ${m} Cría(s)`}),E&&c.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(mr,{size:18}),c.jsx("span",{children:E})]})]}),l===4&&c.jsxs("div",{className:"text-center flex flex-col justify-center items-center h-full",children:[c.jsx(Za,{size:80,className:"text-brand-green mb-4 animate-pulse"}),c.jsx("h2",{className:"text-3xl font-bold text-white",children:"¡Éxito!"}),c.jsxs("p",{className:"text-lg text-zinc-400",children:["El parto de ",c.jsx("span",{className:"font-mono font-bold text-white",children:O==null?void 0:O.id.toUpperCase()})," se ha registrado."]})]})]})]})}),c.jsxs(cn,{isOpen:A,onClose:()=>C(!1),title:"Seleccionar Fecha del Parto",children:[c.jsx("style",{children:LFe}),c.jsx("div",{className:"flex justify-center",children:c.jsx(Ap,{mode:"single",selected:new Date(d+"T00:00:00Z"),onSelect:ee=>{ee&&f(ee.toISOString().split("T")[0]),C(!1)},locale:Kb,disabled:{after:new Date},captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-2,toYear:new Date().getFullYear()})})]}),c.jsx(nD,{isOpen:b,onClose:()=>S(!1),onSave:q})]}):null},mD=({isOpen:t,animal:e,onClose:n,onLogToSession:r,onStartNewSession:i,onStartDrying:a,onSetDry:s})=>{const{parturitions:o,weighings:l}=Xt(),[u,d]=I.useState(!1),f=I.useMemo(()=>o.filter(m=>m.goatId===e.id&&(m.status==="activa"||m.status==="en-secado")).sort((m,g)=>new Date(g.parturitionDate).getTime()-new Date(m.parturitionDate).getTime())[0],[o,e.id]),p=I.useMemo(()=>{const m=l.map(v=>v.date);return[...new Set(m)].sort((v,y)=>new Date(y).getTime()-new Date(v).getTime()).slice(0,3)},[l]),h=e.name?String(e.name).toUpperCase().trim():"";return!f&&!u?c.jsx(cn,{isOpen:t,onClose:n,title:"Acción Requerida",children:c.jsxs("div",{className:"text-center space-y-4 text-white",children:[c.jsx(mr,{className:"mx-auto h-12 w-12 text-amber-400"}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:e.id.toUpperCase()}),h&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:h})]}),c.jsx("h3",{className:"text-lg font-medium",children:"Animal sin Parto Activo"}),c.jsx("p",{className:"text-sm text-zinc-400",children:"Para registrar un pesaje o gestionar el secado, el animal debe tener un parto activo."}),c.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(hl,{size:18})," Declarar Parto Ahora"]})]})}):u?c.jsx(Cp,{isOpen:!0,onClose:()=>{d(!1)},motherId:e.id}):c.jsx(cn,{isOpen:t,onClose:n,title:"Acciones de Leche",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-2",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:e.id.toUpperCase()}),h&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:h})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(aT,{size:16}),"Añadir a Sesión Reciente"]}),p.length>0?c.jsx("div",{className:"space-y-2",children:p.map(m=>c.jsxs("button",{onClick:()=>r(m),className:"w-full text-left bg-zinc-800/80 p-3 rounded-xl hover:bg-zinc-700 transition-colors flex justify-between items-center group",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(oo,{size:18,className:"text-zinc-500"}),c.jsx("span",{className:"text-base font-semibold text-white",children:new Date(m+"T00:00:00Z").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})})]}),c.jsx(Wi,{size:20,className:"text-zinc-600 group-hover:text-white transition-colors"})]},m))}):c.jsx("p",{className:"text-center text-sm text-zinc-500 py-4",children:"No hay sesiones recientes."})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(ol,{size:16}),"Iniciar Nueva Sesión de Pesaje"]}),c.jsxs("button",{onClick:i,className:"w-full text-left bg-brand-orange/20 border border-brand-orange/80 p-4 rounded-xl hover:bg-brand-orange/30 transition-colors flex justify-between items-center group",children:[c.jsx("span",{className:"text-lg font-bold text-white",children:"Construir Carga Masiva..."}),c.jsx(Wi,{size:20,className:"text-brand-orange group-hover:text-orange-300 transition-colors"})]}),c.jsx("p",{className:"text-xs text-zinc-500 text-center px-4 mt-2",children:"Esto te permitirá seleccionar un grupo de animales y registrar sus pesajes."})]}),f&&c.jsxs("div",{className:"pt-4 border-t border-brand-border",children:[c.jsx("h3",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Acciones de Lactancia"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>a(f.id),disabled:f.status!=="activa",className:"w-full flex items-center justify-center gap-2 bg-blue-600/20 text-blue-300 font-semibold py-3 px-3 rounded-lg hover:bg-blue-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(mp,{size:16})," ",f.status==="en-secado"?"Ya en Secado":"Iniciar Secado"]}),c.jsxs("button",{type:"button",onClick:()=>s(f.id),disabled:f.status==="seca"||f.status==="finalizada",className:"w-full flex items-center justify-center gap-2 bg-gray-600/20 text-gray-300 font-semibold py-3 px-3 rounded-lg hover:bg-gray-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Gl,{size:16})," ",f.status==="seca"?"Ya Seca":"Declarar Seca"]})]}),f.status==="en-secado"&&c.jsx("p",{className:"text-center text-xs text-zinc-400 mt-2",children:"El animal está en su período de secado."})]})]})})},gD=({isOpen:t,animal:e,onClose:n,onLogToSession:r,onStartNewSession:i,onSetReadyForMating:a})=>{const{bodyWeighings:s,parturitions:o}=Xt(),l=I.useMemo(()=>{const p=s.map(m=>m.date);return[...new Set(p)].sort((m,g)=>new Date(g).getTime()-new Date(m).getTime()).slice(0,3)},[s]),d=Lf(e,o)==="Cabritona"&&e.reproductiveStatus==="Vacía",f=e.name?String(e.name).toUpperCase().trim():"";return c.jsx(cn,{isOpen:t,onClose:n,title:"Pesaje Corporal",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-2",children:[" ",c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:e.id.toUpperCase()}),f&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:f})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(aT,{size:16}),"Añadir a Sesión Reciente"]}),l.length>0?c.jsx("div",{className:"space-y-2",children:l.map(p=>c.jsxs("button",{onClick:()=>r(p),className:"w-full text-left bg-zinc-800/80 p-3 rounded-xl hover:bg-zinc-700 transition-colors flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(oo,{size:18,className:"text-zinc-500"}),c.jsx("span",{className:"text-base font-semibold text-white",children:new Date(p+"T00:00:00Z").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})})]}),c.jsx(Wi,{size:20,className:"text-zinc-600"})]},p))}):c.jsx("p",{className:"text-center text-sm text-zinc-500 py-4",children:"No hay sesiones recientes."})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(ol,{size:16}),"Iniciar Nueva Sesión de Pesaje"]}),c.jsxs("button",{onClick:i,className:"w-full text-left bg-brand-green/20 border border-brand-green/80 p-4 rounded-xl hover:bg-brand-green/30 transition-colors flex justify-between items-center",children:[c.jsx("span",{className:"text-lg font-bold text-white",children:"Construir Carga Masiva..."}),c.jsx(Wi,{size:20,className:"text-brand-green"})]}),c.jsx("p",{className:"text-xs text-zinc-500 text-center px-4 mt-2",children:"Esto te permitirá seleccionar un grupo de animales y registrar sus pesos."})]}),d&&c.jsxs("div",{className:"pt-4 border-t border-brand-border",children:[c.jsx("h3",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Acciones de Desarrollo"}),c.jsx("div",{className:"flex",children:c.jsxs("button",{onClick:a,className:"w-full flex items-center justify-center gap-2 bg-pink-600/20 text-pink-300 font-semibold py-3 px-3 rounded-lg hover:bg-pink-600/40 transition-colors",children:[c.jsx(XH,{size:16})," Declarar en Peso de Monta"]})}),c.jsx("p",{className:"text-xs text-zinc-500 text-center px-4 mt-2",children:'Si el animal tiene el peso y la edad adecuados, esto lo marcará como "En Servicio".'})]})]})})},y_=({animal:t,onConfirm:e,onCancel:n,reason:r,isOpen:i})=>{const[a,s]=I.useState(new Date().toISOString().split("T")[0]),[o,l]=I.useState(""),[u,d]=I.useState(""),[f,p]=I.useState("Cría"),[h,m]=I.useState(""),[g,v]=I.useState(),[y,b]=I.useState(""),S=["Baja producción","Bajo índice de crecimiento","Inflamación articular","Linfadenitis caseosa","Sospecha de otras enfermedades"],A=t.name?String(t.name).toUpperCase().trim():"",C=()=>{const j={reason:r,date:a,salePrice:r==="Venta"&&parseFloat(o)||void 0,saleBuyer:r==="Venta"&&u||void 0,salePurpose:r==="Venta"?f:void 0,deathReason:r==="Muerte"&&h||void 0,cullReason:r==="Descarte"&&g||void 0,cullReasonDetails:r==="Descarte"&&g==="Sospecha de otras enfermedades"?y:void 0};e(j)},T=`Dar de baja por ${r}`;return i?c.jsx(cn,{isOpen:i,onClose:n,title:T,children:c.jsxs("div",{className:"space-y-4 text-white",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:t.id.toUpperCase()}),A&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:A})]}),c.jsxs("div",{className:"animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Evento"}),c.jsx("input",{type:"date",value:a,onChange:j=>s(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",max:new Date().toISOString().split("T")[0],required:!0})]}),r==="Venta"&&c.jsxs("div",{className:"space-y-4 animate-fade-in",children:[c.jsx("input",{type:"number",step:"0.01",value:o,onChange:j=>l(j.target.value),placeholder:"Precio de Venta (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"}),c.jsx("input",{type:"text",value:u,onChange:j=>d(j.target.value),placeholder:"Comprador (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"}),c.jsxs("select",{value:f,onChange:j=>p(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",children:[c.jsx("option",{value:"Cría",children:"Para Cría"}),c.jsx("option",{value:"Carne",children:"Para Carne"})]})]}),r==="Muerte"&&c.jsx("div",{className:"animate-fade-in",children:c.jsx("textarea",{value:h,onChange:j=>m(j.target.value),placeholder:"Causa / Descripción de la muerte...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",rows:3})}),r==="Descarte"&&c.jsxs("div",{className:"space-y-4 animate-fade-in",children:[c.jsxs("select",{value:g||"",onChange:j=>v(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",children:[c.jsx("option",{value:"",children:"Seleccione una causa..."}),S.map(j=>c.jsx("option",{value:j,children:j},j))]}),g==="Sospecha de otras enfermedades"&&c.jsx("input",{type:"text",value:y,onChange:j=>b(j.target.value),placeholder:"Especificar sospecha o síntomas...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"})]}),c.jsx("p",{className:"text-xs text-zinc-500 text-center pt-2",children:'El animal será movido a "Referencia".'}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[c.jsx("button",{onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsx("button",{onClick:C,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg",children:"Confirmar Baja"})]})]})}):null},vD=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{fathers:r,addFather:i,addParturition:a}=Xt(),[s,o]=I.useState(new Date().toISOString().split("T")[0]),[l,u]=I.useState(""),[d,f]=I.useState(!0),[p,h]=I.useState(!1),[m,g]=I.useState(null),[v,y]=I.useState(!1),b=t.name?String(t.name).toUpperCase().trim():"",S=async C=>{if(C.preventDefault(),!l){g({type:"error",text:"Debe seleccionar el padre (semental)."});return}h(!0),g(null);try{await a({motherId:t.id,parturitionDate:s,sireId:l,parturitionType:"Simple",offspringCount:0,liveOffspring:[],parturitionOutcome:"Aborto",inducedLactation:d}),g({type:"success",text:`Aborto registrado para ${t.id.toUpperCase()}.`}),setTimeout(e,1500)}catch(T){g({type:"error",text:T.message||"No se pudo registrar el aborto."}),h(!1)}},A=async C=>{try{await i(C),u(C.id),y(!1)}catch(T){console.error("Error saving new father:",T),g({type:"error",text:T.message||"No se pudo guardar el nuevo padre."})}};return c.jsxs(c.Fragment,{children:[c.jsx(cn,{isOpen:!v,onClose:n,title:"Registrar Aborto",children:c.jsxs("form",{onSubmit:S,className:"space-y-4",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:t.id.toUpperCase()}),b&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:b})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Aborto"}),c.jsx("input",{type:"date",value:s,onChange:C=>o(C.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",required:!0,max:new Date().toISOString().split("T")[0]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Padre (Semental Involucrado)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:l,onChange:C=>u(C.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",required:!0,children:[c.jsx("option",{value:"",children:"Seleccionar Padre..."}),r.map(C=>c.jsx("option",{value:C.id,children:ur(C)},C.id))]}),c.jsx("button",{type:"button",onClick:()=>y(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",title:"Añadir Nuevo Padre de Referencia",children:c.jsx(qi,{size:24})})]})]}),c.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-zinc-700 flex items-center justify-between",children:[c.jsx("label",{htmlFor:"inducedLactation",className:"text-sm font-medium text-zinc-300",children:"¿Se iniciará lactancia post-aborto?"}),c.jsx("input",{id:"inducedLactation",type:"checkbox",checked:d,onChange:C=>f(C.target.checked),className:"form-checkbox h-5 w-5 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]}),c.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Marcar esta opción iniciará una lactancia "atípica" para poder registrar los pesajes.'}),m&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${m.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[m.type==="success"?c.jsx(Za,{size:18}):c.jsx(mr,{size:18}),c.jsx("span",{children:m.text})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[c.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:p,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg disabled:opacity-50",children:p?"Guardando...":"Confirmar Aborto"})]})]})}),c.jsx(nD,{isOpen:v,onClose:()=>y(!1),onSave:A})]})},Vg=({animalId:t,weightType:e,onSaveSuccess:n,onCancel:r,sessionDate:i})=>{const{addBodyWeighing:a,addWeighing:s,animals:o}=Xt(),[l,u]=I.useState(i||new Date().toISOString().split("T")[0]),[d,f]=I.useState(""),[p,h]=I.useState(!1),[m,g]=I.useState(null),v=xe.useMemo(()=>o.find(S=>S.id===t),[o,t]),y=v!=null&&v.name?String(v.name).toUpperCase().trim():"";I.useEffect(()=>{i&&u(i)},[i]);const b=async S=>{S.preventDefault(),g(null),h(!0);const A=parseFloat(d);if(isNaN(A)||A<=0){g({type:"error",text:"Por favor, introduce un peso válido."}),h(!1);return}if(e==="corporal"&&A>150){g({type:"error",text:"El peso corporal parece irracionalmente alto."}),h(!1);return}if(e==="leche"&&A>8.5){g({type:"error",text:"La producción de leche parece irracionalmente alta."}),h(!1);return}try{e==="corporal"?await a({animalId:t,date:l,kg:A}):await s({goatId:t,date:l,kg:A}),g({type:"success",text:`Pesaje de ${t} guardado con éxito.`}),setTimeout(()=>{n()},1500)}catch(C){g({type:"error",text:C.message||"No se pudo guardar el pesaje."}),h(!1)}};return c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[c.jsxs("div",{className:"text-center mb-2",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:t.toUpperCase()}),y&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:y})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weighingDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Pesaje"}),c.jsx("input",{id:"weighingDate",type:"date",value:l,onChange:S=>u(S.target.value),disabled:!!i,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg disabled:opacity-70 disabled:bg-zinc-700",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weighingKg",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso (Kg)"}),c.jsx("input",{id:"weighingKg",type:"number",step:"0.1",value:d,onChange:S=>f(S.target.value),placeholder:"Ej: 3.5",autoFocus:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),m&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${m.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[m.type==="success"?c.jsx(Za,{size:18}):c.jsx(mr,{size:18}),c.jsx("span",{children:m.text})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:p,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:p?c.jsx(kc,{size:18,className:"animate-spin"}):"Guardar Pesaje"})]})]})},yD=({weightType:t,animalsToWeigh:e,onSaveSuccess:n,onCancel:r})=>{const{addWeighing:i,addBodyWeighing:a,parturitions:s,startDryingProcess:o,setLactationAsDry:l}=Xt(),[u,d]=I.useState(new Date().toISOString().split("T")[0]),[f,p]=I.useState({}),[h,m]=I.useState(!1),[g,v]=I.useState(null),[y,b]=I.useState(null),S=I.useMemo(()=>Object.values(f).filter(k=>k.trim()!==""&&!isNaN(parseFloat(k))).length,[f]),A=I.useMemo(()=>{const k=new Map;if(t==="leche"){const O=new Set(e.map(D=>D.id));s.filter(D=>O.has(D.goatId)&&(D.status==="activa"||D.status==="en-secado")).forEach(D=>{const M=k.get(D.goatId);(!M||new Date(D.parturitionDate)>new Date(M.parturitionDate))&&k.set(D.goatId,D)})}return k},[s,e,t]),C=(k,O)=>{p(D=>({...D,[k]:O}))},T=async k=>{const O=A.get(k);if(!(!O||O.status!=="activa")){v(k),b(null);try{await o(O.id),A.set(k,{...O,status:"en-secado"})}catch(D){b({type:"error",text:`Error al secar ${k}: ${D.message}`})}finally{v(null)}}},j=async k=>{const O=A.get(k);if(!(!O||O.status==="seca"||O.status==="finalizada")){v(k),b(null);try{await l(O.id),A.set(k,{...O,status:"seca"})}catch(D){b({type:"error",text:`Error al secar ${k}: ${D.message}`})}finally{v(null)}}},E=async k=>{k.preventDefault(),b(null),m(!0);const O=Object.entries(f).map(([D,M])=>({animalId:D,kg:parseFloat(M)})).filter(D=>!isNaN(D.kg)&&D.kg>0);if(O.length===0){b({type:"error",text:"No se han introducido pesos válidos."}),m(!1);return}try{const D=O.map(M=>t==="leche"?i({goatId:M.animalId,kg:M.kg,date:u}):a({animalId:M.animalId,kg:M.kg,date:u}));await Promise.all(D),b({type:"success",text:`${O.length} pesajes guardados con éxito.`}),setTimeout(()=>{n()},1500)}catch(D){b({type:"error",text:"Ocurrió un error al guardar los datos."}),m(!1),console.error("Error en escritura por lote de pesajes:",D)}};return c.jsxs("form",{onSubmit:E,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex-shrink-0 space-y-4 p-4 border-b border-brand-border",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:t==="leche"?"Sesión de Ordeño":"Sesión de Pesaje Corporal"}),c.jsx("input",{type:"date",value:u,onChange:k=>d(k.target.value),className:"bg-zinc-800 text-white p-2 rounded-lg text-sm"})]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Registrando ",S," / ",e.length," animales."]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto p-4 space-y-2",children:e.map(k=>{const O=k.name?String(k.name).toUpperCase().trim():"";if(t==="corporal")return c.jsxs("div",{className:"grid grid-cols-2 items-center gap-4 p-2 bg-black/20 rounded-lg",children:[c.jsxs("div",{className:"min-w-0 col-span-1",children:[c.jsx("label",{htmlFor:`weight-${k.id}`,className:"font-mono font-semibold text-base text-white truncate block cursor-pointer",children:k.id.toUpperCase()}),O&&c.jsx("p",{className:"text-sm font-normal text-zinc-400 truncate",children:O})]}),c.jsx("input",{id:`weight-${k.id}`,type:"number",step:"0.1",value:f[k.id]||"",onChange:L=>C(k.id,L.target.value),placeholder:"Kg",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center"})]},k.id);const D=A.get(k.id),M=g===k.id;return c.jsxs("div",{className:"grid grid-cols-3 items-center gap-2 p-2 bg-black/20 rounded-lg",children:[c.jsxs("div",{className:"min-w-0 col-span-1",children:[c.jsx("label",{htmlFor:`weight-${k.id}`,className:"font-mono font-semibold text-base text-white truncate block cursor-pointer",children:k.id.toUpperCase()}),O&&c.jsx("p",{className:"text-sm font-normal text-zinc-400 truncate",children:O})]}),c.jsx("input",{id:`weight-${k.id}`,type:"number",step:"0.1",value:f[k.id]||"",onChange:L=>C(k.id,L.target.value),placeholder:"Kg",disabled:!D||D.status==="seca"||h,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center col-span-1 disabled:opacity-50"}),c.jsx("div",{className:"col-span-1 flex items-center justify-end gap-1",children:M?c.jsx(kc,{className:"animate-spin text-zinc-400",size:20}):c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",onClick:()=>T(k.id),disabled:!D||D.status!=="activa"||h,title:"Iniciar Secado",className:"p-2 bg-blue-600/20 text-blue-300 rounded-lg hover:bg-blue-600/40 disabled:opacity-30 disabled:cursor-not-allowed",children:c.jsx(mp,{size:16})}),c.jsx("button",{type:"button",onClick:()=>j(k.id),disabled:!D||D.status==="seca"||D.status==="finalizada"||h,title:"Declarar Seca",className:"p-2 bg-gray-600/20 text-gray-300 rounded-lg hover:bg-gray-600/40 disabled:opacity-30 disabled:cursor-not-allowed",children:c.jsx(Gl,{size:16})})]})})]},k.id)})}),c.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-ios-modal-bg",children:[y&&c.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${y.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[y.type==="success"?c.jsx(Za,{size:18}):c.jsx(mr,{size:18}),c.jsx("span",{children:y.text})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsxs("button",{type:"submit",disabled:h||S===0||g!==null,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[h?c.jsx(kc,{size:18,className:"animate-spin"}):c.jsx(tv,{size:18}),"Guardar ",S>0?`(${S})`:""]})]})]})]})},bD=({weightType:t,onBack:e,onAnimalsSelected:n})=>{const{animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o}=Xt(),[l,u]=I.useState(!0),d=`Nueva Sesión de Peso ${t==="corporal"?"Corporal":"Lechero"}`,f=h=>{const m=r.filter(g=>h.includes(g.id));n(h,m),u(!1)},p=()=>{u(!1),e()};return c.jsx(g_,{isOpen:l,onClose:p,onSelect:f,animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,title:d,sessionType:t})},FFe=`
  .rdp {
    --rdp-cell-size: 40px; /* Size of day cells */
    --rdp-accent-color: #FF9500; /* Orange accent */
    --rdp-background-color: transparent; /* Transparent background */
    --rdp-accent-color-dark: #FF9500;
    --rdp-background-color-dark: transparent;
    --rdp-outline: 2px solid var(--rdp-accent-color); /* Outline for focused day */
    --rdp-border-radius: 12px; /* Rounded corners */
    color: #FFF; /* Default text color */
    margin: 1em auto; /* Centering */
  }
  .rdp-caption_label { color: #FFF; font-weight: bold; } /* Month/Year label */
  .rdp-nav_button { color: #FF9500; } /* Navigation arrows */
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; } /* Weekday names */
  .rdp-day { color: #FFF; } /* Day numbers */
  .rdp-day_today { font-weight: bold; color: #FF9500; } /* Today's date */
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; } /* Selected day */
  .rdp-day_disabled { color: #505054; } /* Disabled days */
  .rdp-day_outside { color: #505054; } /* Days outside current month */
  .rdp-caption_dropdowns { display: flex; gap: 10px; } /* Style dropdowns if used */
  .rdp-dropdown {
      background-color: #333; /* Dark background for dropdown */
      border: 1px solid #555;
      color: #FFF;
      padding: 4px 8px;
      border-radius: 6px;
  }
`,xD=({isOpen:t,onClose:e,onSave:n,animal:r})=>{if(!t)return null;const i=r.name?String(r.name).toUpperCase().trim():"",a=s=>{s&&n(s)};return c.jsxs(cn,{isOpen:t,onClose:e,title:"Registrar Servicio",children:[c.jsx("style",{children:FFe}),c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:r.id.toUpperCase()}),i&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:i})]}),c.jsx("div",{className:"flex justify-center pb-4",children:c.jsx(Ap,{mode:"single",onSelect:a,defaultMonth:new Date,locale:Kb,disabled:{after:new Date},captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()})})]})},zFe=({animal:t,isSelected:e,onSelect:n})=>{const r=t.name?String(t.name).toUpperCase().trim():"";return c.jsx("div",{onClick:()=>n(t.id),className:`w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border flex justify-between items-center transition-all cursor-pointer min-h-[80px] ${e?"border-brand-orange ring-2 ring-brand-orange/50":"border-brand-border"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[e?c.jsx(pS,{className:"text-brand-orange flex-shrink-0",size:20}):c.jsx(mS,{className:"text-zinc-500 flex-shrink-0",size:20}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),r&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:r}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[t.sex," | ",t.formattedAge]})})]})]})})};function $Fe({lotName:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,updateAnimal:l,addServiceRecord:u,startDryingProcess:d,setLactationAsDry:f,fathers:p}=Xt(),[h,m]=I.useState(!1),[g,v]=I.useState(!1),[y,b]=I.useState(new Set),[S,A]=I.useState(!1),[C,T]=I.useState(null),[j,E]=I.useState(!1),[k,O]=I.useState(null),[D,M]=I.useState(null),[L,V]=I.useState(null),[Q,Y]=I.useState([]),[J,q]=I.useState("corporal"),ee=I.useMemo(()=>{const We=new Map(o.map(gt=>[gt.id,gt])),pt=new Map(p.map(gt=>[gt.id,gt]));return r.filter(gt=>(gt.location||"Sin Asignar")===t&&!gt.isReference).sort((gt,Xe)=>gt.id.localeCompare(Xe.id)).map(gt=>{let Xe;if(gt.sireLotId){const Ot=We.get(gt.sireLotId);if(Ot){const ft=pt.get(Ot.sireId)||r.find(ut=>ut.id===Ot.sireId);Xe=ft?ur(ft):void 0}}return{...gt,formattedAge:Lc(gt.birthDate),statusObjects:CX(gt,i,a,o,s),sireName:Xe}})},[r,t,i,a,o,s,p]),le=I.useRef(null),se=NX({count:ee.length,getScrollElement:()=>le.current,estimateSize:()=>96,overscan:5}),$=We=>{b(pt=>{const gt=new Set(pt);return gt.has(We)?gt.delete(We):gt.add(We),gt})},G=async()=>{const We=Array.from(y).map(pt=>l(pt,{location:""}));try{await Promise.all(We),v(!1),b(new Set)}catch(pt){console.error("Error al quitar animales:",pt)}},te=async We=>{if(!t)return;const pt=We.map(gt=>l(gt,{location:t}));await Promise.all(pt),m(!1)},oe=We=>{if(!We)return[];const pt=[];return We.sex==="Hembra"&&(pt.push({label:"Declarar Parto",icon:hl,onClick:()=>{E(!1),O("parturition")}}),pt.push({label:"Declarar Aborto",icon:xf,onClick:()=>{E(!1),O("abortion")},color:"text-yellow-400"}),pt.push({label:"Acciones de Leche",icon:bf,onClick:()=>{E(!1),O("milkWeighingAction")}}),We.sireLotId&&pt.push({label:"Registrar Servicio",icon:hS,onClick:()=>{E(!1),O("service")},color:"text-pink-400"})),pt.push({label:"Acciones de Peso",icon:md,onClick:()=>{E(!1),O("bodyWeighingAction")}}),pt.push({label:"Dar de Baja",icon:Gl,onClick:()=>{E(!1),O("decommissionSheet")},color:"text-brand-red"}),pt},ge=[{label:"Por Venta",icon:pl,onClick:()=>{M("Venta"),O("decommission")}},{label:"Por Muerte",icon:xf,onClick:()=>{M("Muerte"),O("decommission")},color:"text-brand-red"},{label:"Por Descarte",icon:cS,onClick:()=>{M("Descarte"),O("decommission")},color:"text-brand-red"}],_e=We=>{T(We),E(!0)},Ce=()=>{O(null),T(null),V(null),Y([]),M(null)},fe=async We=>{if(!C)return;const pt={status:We.reason,isReference:!0,endDate:We.date};We.reason==="Venta"&&Object.assign(pt,{salePrice:We.salePrice,saleBuyer:We.saleBuyer,salePurpose:We.salePurpose}),We.reason==="Muerte"&&(pt.deathReason=We.deathReason),We.reason==="Descarte"&&Object.assign(pt,{cullReason:We.cullReason,cullReasonDetails:We.cullReasonDetails}),await l(C.id,pt),Ce()},be=(We,pt)=>{V(We),O(pt==="leche"?"logSimpleMilk":"logSimpleBody")},we=We=>{q(We),O(We==="leche"?"newMilkSession":"newBodySession")},ie=async()=>{C&&(await l(C.id,{reproductiveStatus:"En Servicio"}),Ce())},He=(We,pt)=>{Y(pt),O("bulkWeighing")},Me=()=>{Ce()},he=async We=>{if(!C||!C.sireLotId){console.error("Missing animal or sireLotId."),Ce();return}await u({sireLotId:C.sireLotId,femaleId:C.id,serviceDate:We.toISOString().split("T")[0]}),Ce()};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{ref:le,className:"w-full max-w-2xl mx-auto space-y-4 pb-4 animate-fade-in",style:{height:`calc(100vh - 64px - 65px - ${g&&y.size>0?"80px":"0px"})`,overflowY:"auto"},children:[c.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4 sticky top-0 bg-brand-dark/80 backdrop-blur-lg z-10 border-b border-brand-border",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:t}),c.jsxs("p",{className:"text-lg text-zinc-400",children:[ee.length," ",ee.length===1?"animal":"animales"]})]}),g?c.jsx("button",{onClick:()=>{v(!1),b(new Set)},className:"text-brand-orange font-semibold px-2 py-1",children:"Listo"}):c.jsx("button",{onClick:()=>v(!0),className:"p-2 -mr-2 text-zinc-400 hover:text-white",children:c.jsx(kf,{size:20})})]}),!g&&c.jsx("div",{className:"px-4 pt-4",children:c.jsxs("button",{onClick:()=>m(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[c.jsx(qi,{size:20})," Añadir Animales"]})}),c.jsx("div",{className:"pt-4",style:{height:"auto",position:"relative"},children:ee.length>0?c.jsx("div",{style:{height:`${se.getTotalSize()}px`,width:"100%",position:"relative"},children:se.getVirtualItems().map(We=>{const pt=ee[We.index];return c.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${We.size}px`,transform:`translateY(${We.start}px)`,padding:"0 1rem 1rem 1rem",boxSizing:"border-box"},children:g?c.jsx(zFe,{animal:pt,isSelected:y.has(pt.id),onSelect:$}):c.jsx(tD,{animal:pt,onSelect:gt=>n({name:"rebano-profile",animalId:gt}),onOpenActions:_e})},We.key)})}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:c.jsx("p",{className:"text-zinc-500",children:"Este lote está vacío."})})})]}),g&&y.size>0&&c.jsx("div",{className:"fixed bottom-16 left-0 right-0 bg-ios-modal-bg p-4 border-t border-brand-border animate-slide-up z-20",children:c.jsxs("div",{className:"max-w-2xl mx-auto flex gap-4",children:[c.jsxs("button",{onClick:G,className:"flex-1 flex items-center justify-center gap-2 bg-brand-red text-white font-bold py-3 rounded-xl",children:[c.jsx(Yl,{size:18})," Quitar del Lote"]}),c.jsxs("button",{onClick:()=>A(!0),className:"flex-1 flex items-center justify-center gap-2 bg-brand-blue text-white font-bold py-3 rounded-xl",children:[c.jsx(KH,{size:18})," Transferir"]})]})}),c.jsx(g_,{isOpen:h,onClose:()=>m(!1),onSelect:te,animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,title:`Añadir animales a: ${t}`}),c.jsx(d6e,{isOpen:S,onClose:()=>{A(!1),v(!1),b(new Set)},animalsToTransfer:Array.from(y),fromLot:t}),c.jsx(mu,{isOpen:j,onClose:()=>E(!1),title:`Acciones para ${ur(C)}`,actions:oe(C)}),c.jsx(mu,{isOpen:k==="decommissionSheet",onClose:Ce,title:"Causa de la Baja",actions:ge}),C&&c.jsxs(c.Fragment,{children:[k==="parturition"&&c.jsx(Cp,{isOpen:!0,onClose:Ce,motherId:C.id}),k==="abortion"&&c.jsx(vD,{animal:C,onCancel:Ce,onSaveSuccess:Ce}),k==="decommission"&&D&&c.jsx(y_,{isOpen:k==="decommission",animal:C,onCancel:Ce,onConfirm:fe,reason:D}),k==="service"&&c.jsx(xD,{isOpen:!0,onClose:Ce,onSave:he,animal:C}),k==="milkWeighingAction"&&c.jsx(mD,{isOpen:!0,animal:C,onClose:Ce,onLogToSession:We=>be(We,"leche"),onStartNewSession:()=>we("leche"),onStartDrying:d,onSetDry:f}),k==="bodyWeighingAction"&&c.jsx(gD,{isOpen:!0,animal:C,onClose:Ce,onLogToSession:We=>be(We,"corporal"),onStartNewSession:()=>we("corporal"),onSetReadyForMating:ie}),k==="logSimpleMilk"&&L&&c.jsx(cn,{isOpen:!0,onClose:Ce,title:`Añadir Pesaje Leche: ${ur(C)}`,children:c.jsx(Vg,{animalId:C.id,weightType:"leche",onSaveSuccess:Ce,onCancel:Ce,sessionDate:L})}),k==="logSimpleBody"&&L&&c.jsx(cn,{isOpen:!0,onClose:Ce,title:`Añadir Peso Corporal: ${ur(C)}`,children:c.jsx(Vg,{animalId:C.id,weightType:"corporal",onSaveSuccess:Ce,onCancel:Ce,sessionDate:L})}),(k==="newMilkSession"||k==="newBodySession")&&c.jsx(bD,{weightType:J,onBack:Ce,onAnimalsSelected:He}),k==="bulkWeighing"&&c.jsx(cn,{isOpen:!0,onClose:Ce,title:`Carga Masiva - ${J==="leche"?"Leche":"Corporal"}`,size:"fullscreen",children:c.jsx(yD,{weightType:J,animalsToWeigh:Q,onSaveSuccess:Me,onCancel:Ce})})]})]})}const BFe=({activeFilter:t,setActiveFilter:e})=>c.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[c.jsx("button",{onClick:()=>e("Activo"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Activo"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Activos"}),c.jsx("button",{onClick:()=>e("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"De Referencia"})]}),VFe=({activeFilter:t,setFilter:e})=>{const n=[{key:"all",label:"Todos"},{key:"Venta",label:"Vendidos"},{key:"Muerte",label:"Muertos"},{key:"Descarte",label:"Descartados"}];return c.jsxs("div",{className:"p-3 bg-black/20 rounded-lg",children:[c.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"Filtrar por estado:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(r=>c.jsx("button",{onClick:()=>e(r.key),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${t===r.key?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:r.label},r.key))})]})},l5=({isOpen:t,onClose:e,onSelect:n,animals:r,title:i,filterSex:a})=>{const[s,o]=I.useState(""),[l,u]=I.useState("Activo"),[d,f]=I.useState("all"),p=g=>{u(g),f("all")},h=I.useMemo(()=>r.filter(g=>{if(a&&g.sex&&g.sex!==a)return!1;const v=g.isReference;return l==="Referencia"?v?d!=="all"?g.status===d:!0:!1:!v}).filter(g=>{if(!s)return!0;const v=s.toLowerCase(),y=g.id.toLowerCase().includes(v),b=g.name&&g.name.toLowerCase().includes(v);return y||b}).sort((g,v)=>g.id.localeCompare(v.id)),[r,s,l,d,a]),m=g=>{n(g),o("")};return c.jsx(cn,{isOpen:t,onClose:e,title:i,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),c.jsx("input",{type:"search",placeholder:"Buscar ID o Nombre...",value:s,onChange:g=>o(g.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-orange"})]}),c.jsx(BFe,{activeFilter:l,setActiveFilter:p}),l==="Referencia"&&c.jsx("div",{className:"animate-fade-in",children:c.jsx(VFe,{activeFilter:d,setFilter:f})}),c.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:h.length>0?h.map(g=>{const v=g.name?String(g.name).toUpperCase().trim():"";return c.jsx("button",{onClick:()=>m(g.id),className:"w-full text-left p-3 bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:c.jsxs("div",{className:"min-w-0",children:[" ",c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:g.id.toUpperCase()}),v&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:v}),c.jsxs("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:[g.sex?`${g.sex}`:"",g.birthDate&&g.birthDate!=="N/A"?` | ${Lc(g.birthDate)}`:"",` | Lote: ${g.location||"N/A"}`]})]})},g.id)}):c.jsx("p",{className:"text-center text-zinc-500 py-8",children:"No se encontraron animales con estos filtros."})})]})})},YX=(t,e)=>{if(!t||!e)return"Indefinido";const n=new Date,r=new Date(t+"T00:00:00");if(isNaN(r.getTime()))return"Indefinido";const i=(n.getTime()-r.getTime())/(1e3*60*60*24);return e==="Hembra"?i<=60?"Cabrita":i<=365?"Cabritona":"Cabra Adulta":i<=60?"Cabrito":i<=365?"Macho de Levante":"Macho Cabrío"},wm=xe.forwardRef(({className:t,...e},n)=>c.jsx("input",{ref:n,...e,className:`w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange disabled:opacity-50 disabled:bg-brand-dark/50 ${t}`})),NC=xe.forwardRef(({children:t,...e},n)=>c.jsxs("div",{className:"relative w-full",children:[c.jsx("select",{ref:n,...e,className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white appearance-none focus:outline-none focus:ring-2 focus:ring-brand-orange",children:t}),c.jsx(wy,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"})]})),Lm=({title:t,children:e})=>c.jsxs("div",{className:"bg-brand-glass rounded-2xl border border-brand-border p-4 space-y-4",children:[c.jsx("h2",{className:"text-zinc-400 font-semibold text-sm uppercase tracking-wide",children:t}),e]}),Uk=({labelOn:t,labelOff:e,value:n,onChange:r})=>c.jsxs("div",{onClick:()=>r(!n),className:"w-full bg-brand-dark rounded-xl p-1 flex cursor-pointer",children:[c.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"bg-zinc-700 text-white":"text-zinc-400"}`,children:t}),c.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"text-zinc-400":"bg-zinc-700 text-white"}`,children:e})]}),UFe=({onSaveSuccess:t,onCancel:e})=>{const{addAnimal:n,animals:r,lots:i,fathers:a}=Xt(),[s,o]=I.useState("Activo"),[l,u]=I.useState("Hembra"),[d,f]=I.useState(""),[p,h]=I.useState(""),[m,g]=I.useState(""),[v,y]=I.useState("MN"),[b,S]=I.useState(""),[A,C]=I.useState(null),[T,j]=I.useState(null),[E,k]=I.useState(""),[O,D]=I.useState(""),[M,L]=I.useState(!1),[V,Q]=I.useState(""),[Y,J]=I.useState(null),[q,ee]=I.useState(null),[le,se]=I.useState("Indefinido"),[$,G]=I.useState(!1),[te,oe]=I.useState(!1),[ge,_e]=I.useState(!1),[Ce,fe]=I.useState(!1),[be,we]=I.useState(!1),[ie,He]=I.useState(null),Me=I.useMemo(()=>m?YX(m,l):"Indefinido",[m,l]),he=m?Me:le;I.useEffect(()=>{D(eD(E))},[E]);const We=I.useMemo(()=>r.filter(ut=>ut.sex==="Hembra"),[r]),pt=I.useMemo(()=>r.filter(ut=>ut.sex==="Macho"),[r]),gt=I.useMemo(()=>{const ut=pt,Dt=a.map(Yt=>({id:Yt.id,name:Yt.name,sex:"Macho",status:"Activo",isReference:!0,birthDate:"N/A",lifecycleStage:"Macho Cabrío",location:"Referencia",reproductiveStatus:"No Aplica",createdAt:0,lastWeighing:null}));return[...ut,...Dt]},[pt,a]);I.useEffect(()=>{const ut=r.find(Yt=>Yt.id===T),Dt=gt.find(Yt=>Yt.id===A);if(ut!=null&&ut.racialComposition&&(Dt!=null&&Dt.racialComposition)){const Yt=i6e(ut.racialComposition,Dt.racialComposition);k(Yt),L(!0)}else(!ut||!Dt)&&L(!1)},[T,A,r,gt]),I.useEffect(()=>{if(J(null),d&&s==="Activo"){const ut=r.some(Dt=>Dt.id.toLowerCase()===d.toLowerCase());ee(ut?`El ID "${d.toUpperCase()}" ya existe en el rebaño principal.`:null)}else ee(null)},[d,r,s]);const Xe=I.useMemo(()=>i,[i]),Ot=async ut=>{if(ut.preventDefault(),J(null),ee(null),s==="Activo"&&!d){J({type:"error",text:"El ID del animal es obligatorio para animales Activos."});return}if(d&&s==="Activo"&&r.some(Qt=>Qt.id.toLowerCase()===d.toLowerCase())){ee(`El ID "${d.toUpperCase()}" ya existe en el rebaño principal.`),J({type:"error",text:`El ID "${d.toUpperCase()}" ya existe.`});return}const Dt={id:d.toUpperCase()||`REF-${Date.now()}`,name:p||void 0,birthDate:m||"N/A",sex:l,isReference:s==="Referencia",status:"Activo",lifecycleStage:he,conceptionMethod:v||void 0,birthWeight:b?parseFloat(b):void 0,fatherId:A||void 0,motherId:T||void 0,racialComposition:E||void 0,breed:O||void 0,location:V||"",reproductiveStatus:l==="Hembra"?"Vacía":"No Aplica",createdAt:new Date().getTime(),lastWeighing:null};try{await n(Dt),J({type:"success",text:`Animal ${ur(Dt)} agregado con éxito.`}),setTimeout(t,1e3)}catch(Yt){J({type:"error",text:Yt.message||"No se pudo guardar el animal."}),console.error("Error al guardar animal:",Yt)}},ft=ut=>{ie==="father"?C(ut.id):ie==="mother"&&j(ut.id),He(null)};return c.jsxs(c.Fragment,{children:[c.jsxs("form",{onSubmit:Ot,className:"w-full space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:["ID Animal ",s==="Activo"?"(Obligatorio)":"(Opcional para Referencia)"]}),c.jsx("input",{type:"text",value:d,onClick:()=>fe(!0),readOnly:!0,placeholder:s==="Activo"?"T047":"Opcional...",className:`w-full bg-brand-glass border rounded-xl p-4 text-white text-center text-3xl font-mono tracking-widest placeholder-zinc-700 focus:outline-none focus:ring-2 cursor-pointer ${q?"border-brand-red ring-brand-red":"border-brand-border focus:ring-brand-orange"}`,required:s==="Activo"}),q&&c.jsxs("p",{className:"mt-2 text-sm text-brand-red flex items-center justify-center gap-1",children:[c.jsx(mr,{size:14})," ",q]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Nombre (Opcional)"}),c.jsx(wm,{type:"text",value:p,onChange:ut=>h(ut.target.value.toUpperCase()),placeholder:"Ej: PRINCESA"})]}),c.jsxs(Lm,{title:"Categoría",children:[c.jsx(Uk,{labelOn:"Hembra",labelOff:"Macho",value:l==="Hembra",onChange:ut=>u(ut?"Hembra":"Macho")}),c.jsx(Uk,{labelOn:"Activo",labelOff:"Referencia",value:s==="Activo",onChange:ut=>{o(ut?"Activo":"Referencia"),ut||ee(null)}})]}),c.jsxs(Lm,{title:"Genética y Nacimiento",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Fecha de Nacimiento (Opcional)"}),c.jsxs("button",{type:"button",onClick:()=>G(!0),className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white flex justify-between items-center",children:[c.jsx("span",{className:m?"text-white":"text-zinc-500",children:m?new Date(m+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Seleccionar fecha..."}),c.jsx(oo,{className:"text-zinc-400",size:20})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Estado (Categoría Zootécnica)"}),m?c.jsx(wm,{type:"text",value:Me,readOnly:!0,disabled:!0}):c.jsxs(NC,{value:le,onChange:ut=>se(ut.target.value),children:[c.jsx("option",{value:"Indefinido",children:"Seleccionar Categoría..."}),c.jsx("option",{value:"Cabrita",children:"Cabrita"}),c.jsx("option",{value:"Cabritona",children:"Cabritona"}),c.jsx("option",{value:"Cabra Adulta",children:"Cabra Adulta"}),c.jsx("option",{value:"Cabrito",children:"Cabrito"}),c.jsx("option",{value:"Macho de Levante",children:"Macho de Levante"}),c.jsx("option",{value:"Macho Cabrío",children:"Macho Cabrío (Reproductor)"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs(NC,{value:v,onChange:ut=>y(ut.target.value),children:[c.jsx("option",{value:"MN",children:"Monta Natural (MN)"}),c.jsx("option",{value:"IA",children:"Inseminación Artificial (IA)"}),c.jsx("option",{value:"TE",children:"Transferencia de Embriones (TE)"}),c.jsx("option",{value:"",children:"Otro/Desconocido"})]}),c.jsx(wm,{type:"number",step:"0.1",value:b,onChange:ut=>S(ut.target.value),placeholder:"Peso al Nacer (Kg)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Padre (Semental)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>_e(!0),className:"w-full text-left bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 flex justify-between items-center",children:[c.jsx("span",{className:A?"text-white":"text-zinc-500",children:A?ur(gt.find(ut=>ut.id===A))||A:"Seleccionar padre..."}),c.jsx(hu,{size:18,className:"text-zinc-400"})]}),c.jsx("button",{type:"button",onClick:()=>He("father"),className:"p-3 bg-brand-glass border border-brand-border rounded-xl text-brand-orange hover:bg-brand-orange/20 flex-shrink-0",children:c.jsx(qi,{size:20})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Madre"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>oe(!0),className:"w-full text-left bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 flex justify-between items-center",children:[c.jsx("span",{className:T?"text-white":"text-zinc-500",children:T?ur(We.find(ut=>ut.id===T))||T:"Seleccionar madre..."}),c.jsx(hu,{size:18,className:"text-zinc-400"})]}),c.jsx("button",{type:"button",onClick:()=>He("mother"),className:"p-3 bg-brand-glass border border-brand-border rounded-xl text-brand-orange hover:bg-brand-orange/20 flex-shrink-0",children:c.jsx(qi,{size:20})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Composición Racial (Ej: 50%A 50%S)"}),c.jsx("input",{type:"text",value:E,onClick:()=>{M||we(!0)},readOnly:!0,placeholder:"100%A ó 75%A 25%AGC",disabled:M,className:`w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange ${M?"opacity-50 bg-brand-dark/50":"cursor-pointer"}`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Raza (Auto-calculada)"}),c.jsx(wm,{type:"text",value:O,readOnly:!0,disabled:!0,placeholder:"Ej: Mestiza Alpina"})]})]}),c.jsxs(Lm,{title:"Manejo",children:[c.jsxs(NC,{value:V,onChange:ut=>Q(ut.target.value),children:[c.jsx("option",{value:"",children:"Ubicación / Lote (Opcional)..."}),Xe.map(ut=>c.jsx("option",{value:ut.name,children:ut.name},ut.id))]}),c.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Si no se asigna un lote, se podrá encontrar en el filtro "Última Carga".'})]}),c.jsxs("div",{className:"space-y-3 pt-4",children:[Y&&!q&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${Y.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",Y.type==="success"?c.jsx(Za,{size:18}):c.jsx(mr,{size:18})," ",c.jsx("span",{children:Y.text})," "]}),c.jsx("button",{type:"submit",disabled:!!q,className:`w-full text-white font-bold py-4 rounded-xl text-lg ${q?"bg-zinc-600 cursor-not-allowed":"bg-brand-green hover:bg-green-600"}`,children:"Guardar Animal"}),c.jsx("button",{type:"button",onClick:e,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-3 rounded-xl text-lg",children:"Cancelar"})]})]}),$&&c.jsx(XX,{onClose:()=>G(!1),onSelectDate:ut=>{ut&&g(ut.toISOString().split("T")[0]),G(!1)},currentValue:m?new Date(m+"T00:00:00"):new Date}),c.jsx(l5,{isOpen:te,onClose:()=>oe(!1),onSelect:ut=>{j(ut),oe(!1)},animals:We,title:"Seleccionar Madre",filterSex:"Hembra"}),c.jsx(l5,{isOpen:ge,onClose:()=>_e(!1),onSelect:ut=>{C(ut),_e(!1)},animals:gt,title:"Seleccionar Padre",filterSex:"Macho"}),Ce&&c.jsx(QX,{onClose:()=>fe(!1),onInput:ut=>f(ut.toUpperCase()),currentValue:d}),be&&c.jsx(ZX,{onClose:()=>we(!1),onInput:k,currentValue:E}),ie&&c.jsx(HFe,{type:ie,onClose:()=>He(null),onSave:ft})]})},XX=({onClose:t,onSelectDate:e,currentValue:n})=>c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm animate-fade-in",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-ios-modal-bg rounded-t-2xl p-4 shadow-lg animate-slide-up",onClick:r=>r.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 1rem)"},children:[c.jsx("div",{onClick:t,className:"w-16 h-1.5 bg-zinc-700 rounded-full mx-auto mb-4 cursor-pointer"}),c.jsx("div",{className:"flex justify-center [&_.rdp]:bg-transparent [&_.rdp]:text-white [&_.rdp-caption_select]:bg-brand-glass [&_.rdp-caption_select]:border-brand-border [&_.rdp-caption_select]:text-white [&_.rdp-caption_select]:rounded-lg [&_.rdp-day_selected]:bg-brand-orange [&_.rdp-day_selected]:text-white [&_.rdp-day_today]:text-brand-orange [&_.rdp-nav_button]:text-zinc-400 [&_.rdp-head_cell]:text-zinc-500 [&_.rdp-day]:text-zinc-200 [&_.rdp-day_outside]:text-zinc-600",children:c.jsx(Ap,{mode:"single",selected:n,onSelect:e,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear(),defaultMonth:n,locale:Kb})})]})}),QX=({onClose:t,onInput:e,currentValue:n})=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=["1","2","3","4","5","6","7","8","9","-","0","DEL"],a=o=>{if(o==="DEL"){s();return}o&&n.length<15&&e(n+o)},s=()=>{e(n.slice(0,-1))};return c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-[#333333] p-2 space-y-2",onClick:o=>o.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 0.5rem)"},children:[c.jsxs("div",{className:"flex flex-nowrap space-x-1.5 overflow-x-auto py-2 alphabet-scroller",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[c.jsx("style",{children:".alphabet-scroller::-webkit-scrollbar { display: none; }"}),r.map(o=>c.jsx("button",{onClick:()=>a(o),className:"flex-shrink-0 w-10 h-10 bg-[#555555] text-white rounded-md text-lg font-medium active:bg-zinc-500",children:o},o))]}),c.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:i.map(o=>c.jsx("button",{onClick:()=>a(o),className:"h-12 bg-[#555555] text-white rounded-md text-xl font-medium active:bg-zinc-500 flex items-center justify-center",children:o==="DEL"?c.jsx(uS,{size:20}):o},o))}),c.jsx("button",{onClick:t,className:"h-12 w-full bg-blue-600 text-white rounded-md text-lg font-semibold active:bg-blue-700",children:"Done"})]})})},ZX=({onClose:t,onInput:e,currentValue:n})=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=["1","2","3","4","5","6","7","8","9","%","0","DEL"],a=4,s=l=>{var g,v,y;if(l==="DEL"){o();return}if(n.length>=30)return;const u=n.split(" ").filter(b=>b!=="");let d=/[%A-Z]$/.test(n),f=n===""||n.endsWith(" ");if(u.length>=a&&f&&/\d/.test(l))return;let p=n;if(d&&/\d/.test(l))if(u.length<a)p+=" ";else return;if(l==="%"&&!/\d$/.test(p.slice(-1))&&!/[A-Z]$/.test(p.slice(-1))||l==="%"&&/%$/.test(p)||/[A-Z]/.test(l)&&!f&&!/\d$/.test(p.slice(-1))&&!/%$/.test(p.slice(-1))||/\d/.test(l)&&/[A-Z]$/.test(p))return;const h=((v=(g=p.split(" ").pop())==null?void 0:g.match(/\d+$/))==null?void 0:v[0])||"";if(!(l==="0"&&(f||/[%A-Z ]$/.test(p.slice(-1)))&&h.length===0)){if(l==="0"&&h==="0")return;/\d/.test(l)&&h==="0"&&(p=p.slice(0,-1))}const m=(y=(h+l).match(/\d+/))==null?void 0:y[0];m&&parseInt(m,10)>100||e(p+l)},o=()=>{e(n.slice(0,-1))};return c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-[#333333] p-2 space-y-2",onClick:l=>l.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 0.5rem)"},children:[c.jsxs("div",{className:"flex flex-nowrap space-x-1.5 overflow-x-auto py-2 alphabet-scroller",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[c.jsx("style",{children:".alphabet-scroller::-webkit-scrollbar { display: none; }"}),r.map(l=>c.jsx("button",{onClick:()=>s(l),className:"flex-shrink-0 w-10 h-10 bg-[#555555] text-white rounded-md text-lg font-medium active:bg-zinc-500",children:l},l))]}),c.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:i.map(l=>c.jsx("button",{onClick:()=>s(l),className:`h-12 bg-[#555555] text-white rounded-md text-xl font-medium active:bg-zinc-500 flex items-center justify-center ${l==="%"?"text-brand-orange":""}`,children:l==="DEL"?c.jsx(uS,{size:20}):l},l))}),c.jsx("button",{onClick:t,className:"h-12 w-full bg-blue-600 text-white rounded-md text-lg font-semibold active:bg-blue-700",children:"Done"})]})})},HFe=({type:t,onClose:e,onSave:n})=>{const{addAnimal:r,animals:i,fathers:a}=Xt(),[s,o]=I.useState("Referencia"),[l,u]=I.useState(""),[d,f]=I.useState(""),[p,h]=I.useState(""),[m,g]=I.useState(""),[v,y]=I.useState(""),[b,S]=I.useState(null),[A,C]=I.useState(!1),[T,j]=I.useState(!1),[E,k]=I.useState(!1);I.useEffect(()=>{y(eD(m))},[m]);const O=async()=>{if(S(null),s==="Activo"&&!l){S("El ID es obligatorio si el estado es Activo.");return}const D=l.toUpperCase()||`REF-${Date.now()}`,M=new Set([...i.map(Q=>Q.id.toLowerCase()),...a.map(Q=>Q.id.toLowerCase())]);if(l&&M.has(D.toLowerCase())){S("Este ID ya existe en la base de datos (rebaño o referencias).");return}const L=t==="mother"?"Hembra":"Macho",V={id:D,name:d.toUpperCase()||void 0,birthDate:p||"N/A",sex:L,isReference:s==="Referencia",status:"Activo",lifecycleStage:p?YX(p,L):L==="Hembra"?"Cabra Adulta":"Macho Cabrío",racialComposition:m||void 0,breed:v||void 0,location:"Referencia",reproductiveStatus:L==="Hembra"?"Vacía":"No Aplica",createdAt:new Date().getTime(),lastWeighing:null};try{await r(V),n(V)}catch(Q){S(Q.message||"Error al guardar el animal."),console.error("Error saving quick parent:",Q)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-[60] bg-black/50 backdrop-blur-sm animate-fade-in flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"w-full max-w-md bg-ios-modal-bg rounded-2xl shadow-lg animate-slide-up flex flex-col max-h-[85vh]",onClick:D=>D.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[c.jsx("div",{className:"w-10"}),c.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Agregar ",t==="mother"?"Madre":"Padre"," Rápido"]}),c.jsx("button",{onClick:e,className:"p-2 -mr-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50",children:c.jsx(Xl,{size:20})})]}),c.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto",children:[c.jsx(Lm,{title:"Categoría",children:c.jsx(Uk,{labelOn:"Activo",labelOff:"Referencia",value:s==="Activo",onChange:D=>o(D?"Activo":"Referencia")})}),c.jsxs(Lm,{title:"Identificación",children:[c.jsx("input",{type:"text",value:l,onClick:()=>C(!0),readOnly:!0,placeholder:s==="Activo"?"ID (Obligatorio)":"ID (Opcional)",className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange cursor-pointer"}),c.jsx(wm,{value:d,onChange:D=>f(D.target.value.toUpperCase()),placeholder:"Nombre (Opcional)"}),c.jsxs("button",{type:"button",onClick:()=>j(!0),className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-left flex justify-between items-center",children:[c.jsx("span",{className:p?"text-white":"text-zinc-500",children:p?new Date(p+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Fecha de Nacimiento (Opcional)"}),c.jsx(oo,{className:"text-zinc-400",size:20})]})]}),c.jsxs(Lm,{title:"Raza",children:[c.jsx("input",{type:"text",value:m,onClick:()=>k(!0),readOnly:!0,placeholder:"Composición Racial (Opcional)",className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange cursor-pointer"}),c.jsx(wm,{value:v,disabled:!0,readOnly:!0,placeholder:"Raza (Auto-calculada)"})]}),b&&c.jsx("p",{className:"text-sm text-brand-red text-center",children:b})]}),c.jsx("footer",{className:"p-4 border-t border-brand-border flex-shrink-0",children:c.jsxs("button",{onClick:O,className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:["Guardar ",t==="mother"?"Madre":"Padre"]})})]})}),A&&c.jsx(QX,{onClose:()=>C(!1),onInput:D=>u(D.toUpperCase()),currentValue:l}),T&&c.jsx(XX,{onClose:()=>j(!1),onSelectDate:D=>{D&&h(D.toISOString().split("T")[0]),j(!1)},currentValue:p?new Date(p+"T00:00:00"):new Date}),E&&c.jsx(ZX,{onClose:()=>k(!1),onInput:g,currentValue:m})]})};function WFe({onBack:t}){return c.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex flex-col justify-end animate-fade-in",onClick:t,children:c.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-4xl mx-auto h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:e=>e.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[c.jsx("div",{className:"w-10"})," ",c.jsx("h1",{className:"text-xl font-bold tracking-tight text-white",children:"Ingresar Nuevo Animal"}),c.jsx("button",{onClick:t,className:"p-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50 transition-colors","aria-label":"Cerrar",children:c.jsx(Xl,{size:24})})]}),c.jsx("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsx(UFe,{onSaveSuccess:t,onCancel:t})})})]})})}const wD=(t,e)=>{const[n,r]=I.useState(""),i=I.useMemo(()=>n?t.filter(a=>e.some(s=>{const o=a[s];return typeof o=="string"||typeof o=="number"?o.toString().toLowerCase().includes(n.toLowerCase()):!1})):t,[t,n,e]);return{searchTerm:n,setSearchTerm:r,filteredItems:i}},qFe=({title:t,subtitle:e,searchTerm:n,setSearchTerm:r})=>{const[i,a]=I.useState(!1),s=I.useRef(null);I.useEffect(()=>{var l;i&&((l=s.current)==null||l.focus())},[i]);const o=()=>{r(""),a(!1)};return c.jsxs("header",{className:"text-center pt-4 pb-4 relative overflow-hidden",children:[c.jsxs("div",{className:`transition-transform duration-300 ${i?"-translate-y-20":"translate-y-0"}`,children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:t}),c.jsx("p",{className:"text-md text-zinc-400",children:e})]}),c.jsx("div",{className:`absolute inset-0 transition-transform duration-300 flex items-center pt-2 ${i?"translate-y-0":"translate-y-20"}`,children:c.jsx("input",{ref:s,type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"Buscar por ID...",className:"w-full bg-zinc-800 text-white text-lg placeholder-zinc-500 p-3 rounded-xl border-2 border-transparent focus:border-amber-500 focus:ring-0 focus:outline-none"})}),c.jsx("div",{className:"absolute top-4 right-0 pt-1",children:c.jsx("button",{onClick:i?o:()=>a(!0),className:"p-2 text-zinc-400 hover:text-white transition-colors",children:i?c.jsx(Xl,{size:22}):c.jsx(hu,{size:22})})})]})},vv=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?c.jsx(cn,{isOpen:t,onClose:e,title:r,children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("p",{className:"text-zinc-300",children:i}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Confirmar"})]})]})}):null,KFe=(t,e,n,r,i)=>{if(!t||t.status!=="Activo"||t.isReference)return[];const a=[];if(t.sex==="Hembra"){const o=e.filter(l=>l.goatId===t.id&&l.status!=="finalizada").sort((l,u)=>new Date(u.parturitionDate).getTime()-new Date(l.parturitionDate).getTime())[0];o&&(o.status==="activa"?a.push(Tr.MILKING):o.status==="en-secado"?a.push(Tr.DRYING_OFF):o.status==="seca"&&a.push(Tr.DRY))}if(t.reproductiveStatus==="Preñada"?a.push(Tr.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(l=>l.femaleId===t.id&&l.sireLotId===t.sireLotId)?a.push(Tr.IN_SERVICE_CONFIRMED):a.push(Tr.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push(Tr.EMPTY),t.sex==="Macho"){const o=i.filter(d=>d.status==="Activo"),l=new Set(o.map(d=>d.id));r.some(d=>d.sireId===t.id&&l.has(d.seasonId))&&a.push(Tr.SIRE_IN_SERVICE)}return Array.from(new Set(a.map(o=>o.key))).map(o=>Tr[o]).filter(Boolean)},GFe=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],EC=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>c.jsxs("div",{children:[t&&c.jsx("label",{className:"block text-sm font-semibold text-zinc-400 mb-2",children:t}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>r("ALL"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n==="all"||n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const a=i.Icon||null;return c.jsxs("button",{onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[a&&c.jsx(a,{size:14}),i.label]},i.key)})]})]});function YFe({navigateTo:t,locationFilter:e}){const{animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,isLoading:o,updateAnimal:l,startDryingProcess:u,setLactationAsDry:d,addServiceRecord:f,fathers:p,deleteAnimalPermanently:h}=Xt(),[m,g]=I.useState(null),[v,y]=I.useState(!1),[b,S]=I.useState(null),[A,C]=I.useState(null),[T,j]=I.useState(null),[E,k]=I.useState([]),[O,D]=I.useState("corporal"),[M,L]=I.useState("Activos"),[V,Q]=I.useState("all"),[Y,J]=I.useState("Todos"),[q,ee]=I.useState(!1),[le,se]=I.useState("ALL"),[$,G]=I.useState("ALL"),[te,oe]=I.useState(!1),[ge,_e]=I.useState(!1),[Ce,fe]=I.useState(!1),be=I.useMemo(()=>{const ht=new Map(s.map(Mt=>[Mt.id,Mt])),mt=new Map(p.map(Mt=>[Mt.id,Mt]));return n.map(Mt=>{let _t;if(Mt.sireLotId){const Ht=ht.get(Mt.sireLotId);if(Ht){const gn=mt.get(Ht.sireId)||n.find(on=>on.id===Ht.sireId);_t=gn?ur(gn):void 0}}return{...Mt,statusObjects:KFe(Mt,r,i,s,a),formattedAge:Lc(Mt.birthDate),zootecnicCategory:Lf(Mt,r),sireName:_t}})},[n,r,i,s,a,p]),we=I.useMemo(()=>{let ht=M==="Activos"?be.filter(mt=>!mt.isReference):be.filter(mt=>mt.isReference);return e&&(ht=ht.filter(mt=>(mt.location||"Sin Asignar")===e)),q?ht.sort((mt,Mt)=>(Mt.endDate?new Date(Mt.endDate).getTime():Mt.createdAt||0)-(mt.endDate?new Date(mt.endDate).getTime():mt.createdAt||0)).slice(0,25):(M==="Activos"?(le!=="ALL"&&(ht=ht.filter(mt=>mt.statusObjects.some(Mt=>Mt.key===le))),$!=="ALL"&&(ht=ht.filter(mt=>mt.statusObjects.some(Mt=>Mt.key===$)))):V!=="all"&&(ht=ht.filter(mt=>mt.status===V)),Y!=="Todos"&&(ht=ht.filter(mt=>mt.zootecnicCategory===Y)),ht)},[be,M,q,e,Y,le,$,V]),{searchTerm:ie,setSearchTerm:He,filteredItems:Me}=wD(we,["id","name"]),he=()=>{J("Todos"),ee(!1),se("ALL"),G("ALL"),Q("all"),He(""),oe(!1),_e(!1)},We=ht=>{if(!ht)return[];if(ht.isReference)return[{label:"Reintegrar a Activos",icon:GH,onClick:vt},{label:"Eliminar Permanentemente",icon:Yl,onClick:()=>{y(!1),fe(!0)},color:"text-brand-red"}];const mt=[];return ht.sex==="Hembra"&&(mt.push({label:"Declarar Parto",icon:hl,onClick:()=>{y(!1),S("parturition")}}),mt.push({label:"Declarar Aborto",icon:xf,onClick:()=>{y(!1),S("abortion")},color:"text-yellow-400"}),mt.push({label:"Acciones de Leche",icon:bf,onClick:()=>{y(!1),S("milkWeighingAction")}}),ht.sireLotId&&mt.push({label:"Registrar Servicio",icon:hS,onClick:()=>{y(!1),S("service")},color:"text-pink-400"})),mt.push({label:"Acciones de Peso",icon:md,onClick:()=>{y(!1),S("bodyWeighingAction")}}),mt.push({label:"Mover a Lote",icon:oT,onClick:()=>t({name:"rebano-profile",animalId:ht.id,openAction:"move"})}),mt.push({label:"Dar de Baja",icon:Gl,onClick:()=>{y(!1),S("decommissionSheet")},color:"text-brand-red"}),mt},pt=[{label:"Por Venta",icon:pl,onClick:()=>{C("Venta"),S("decommission")}},{label:"Por Muerte",icon:xf,onClick:()=>{C("Muerte"),S("decommission")},color:"text-brand-red"},{label:"Por Descarte",icon:cS,onClick:()=>{C("Descarte"),S("decommission")},color:"text-brand-red"}],gt=ht=>{g(ht),y(!0)},Xe=()=>{S(null),g(null),j(null),k([]),C(null)},Ot=async ht=>{if(!m)return;const mt={status:ht.reason,isReference:!0,endDate:ht.date};ht.reason==="Venta"&&Object.assign(mt,{salePrice:ht.salePrice,saleBuyer:ht.saleBuyer,salePurpose:ht.salePurpose}),ht.reason==="Muerte"&&(mt.deathReason=ht.deathReason),ht.reason==="Descarte"&&Object.assign(mt,{cullReason:ht.cullReason,cullReasonDetails:ht.cullReasonDetails}),await l(m.id,mt),Xe()},ft=(ht,mt)=>{j(ht),S(mt==="leche"?"logSimpleMilk":"logSimpleBody")},ut=ht=>{D(ht),S(ht==="leche"?"newMilkSession":"newBodySession")},Dt=async()=>{m&&(await l(m.id,{reproductiveStatus:"En Servicio"}),Xe())},Yt=(ht,mt)=>{k(mt),S("bulkWeighing")},Qt=()=>{Xe()},Ft=ht=>{u(ht),Xe()},sn=ht=>{d(ht),Xe()},at=async ht=>{if(!m||!m.sireLotId){console.error("Missing animal or sireLotId."),Xe();return}await f({sireLotId:m.sireLotId,femaleId:m.id,serviceDate:ht.toISOString().split("T")[0]}),Xe()},vt=async()=>{!m||!m.isReference||(await l(m.id,{isReference:!1,status:"Activo",endDate:void 0,reproductiveStatus:"Vacía"}),y(!1),g(null))},xt=async()=>{!m||!m.isReference||(await h(m.id),fe(!1),y(!1),g(null))},tt=I.useRef(null),zt=NX({count:Me.length,getScrollElement:()=>tt.current,estimateSize:()=>96,overscan:5});return o?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando rebaño..."})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{ref:tt,className:"w-full max-w-2xl mx-auto space-y-4 pb-12",style:{height:"calc(100vh - 64px - 65px)",overflowY:"auto"},children:[c.jsx(qFe,{title:e||"Mi Rebaño",subtitle:`${Me.length} animales en la vista`,searchTerm:ie,setSearchTerm:He}),c.jsxs("div",{className:"space-y-4 px-4",children:[c.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[c.jsxs("button",{onClick:()=>{L("Activos"),he(),J("Todos")},className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${M==="Activos"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx(pu,{size:16})," Activos"]}),c.jsxs("button",{onClick:()=>{L("Referencia"),he()},className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${M==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx(zH,{size:16})," Referencia"]})]}),M==="Activos"?c.jsxs("div",{className:"space-y-4 animate-fade-in",children:[c.jsxs("button",{onClick:()=>t({name:"add-animal"}),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(qi,{size:18})," Ingresar Nuevo Animal"]}),c.jsxs("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>oe(!te),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[c.jsx("span",{children:"Filtros Productivos"}),c.jsx(wy,{className:`transition-transform ${te?"rotate-180":""}`,size:18})]}),te&&c.jsx("div",{className:"animate-fade-in",children:c.jsx(EC,{title:"",filters:["MILKING","DRYING_OFF","DRY"].map(ht=>Tr[ht]).filter(Boolean),activeFilter:le,onFilterChange:se})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>_e(!ge),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[c.jsx("span",{children:"Filtros Reproductivos"}),c.jsx(wy,{className:`transition-transform ${ge?"rotate-180":""}`,size:18})]}),ge&&c.jsx("div",{className:"animate-fade-in",children:c.jsx(EC,{title:"",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map(ht=>Tr[ht]).filter(Boolean),activeFilter:$,onFilterChange:G})})]})]})]}):c.jsx("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:c.jsx(EC,{title:"Filtrar por Causa de Baja",filters:[{key:"Venta",label:"Venta"},{key:"Muerte",label:"Muerte"},{key:"Descarte",label:"Descarte"}],activeFilter:V,onFilterChange:Q})}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("button",{onClick:()=>ee(!q),title:q?"Mostrar todos":"Mostrar última carga",className:`flex items-center gap-2 py-1 px-3 text-sm font-semibold rounded-lg transition-colors ${q?"text-brand-orange":"text-zinc-400 hover:text-brand-orange"}`,children:[c.jsx(aT,{size:16})," ",q?"Viendo Última Carga":"Última Carga"]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("button",{onClick:()=>t({name:"manage-lots"}),className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[c.jsx(cT,{size:14})," Gestionar Lotes"]}),c.jsxs("button",{onClick:he,className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[c.jsx(rT,{size:14})," Limpiar"]})]})]}),c.jsxs("select",{value:Y,onChange:ht=>J(ht.target.value),className:"w-full bg-brand-glass p-3 rounded-xl text-white border border-brand-border focus:border-brand-orange focus:ring-0 appearance-none",children:[c.jsx("option",{value:"Todos",children:"Todas las Categorías Zootécnicas"}),GFe.map(ht=>c.jsx("option",{value:ht,children:ht},ht))]})]}),c.jsx("div",{className:"pt-4",style:{height:"auto",position:"relative"},children:Me.length>0?c.jsx("div",{style:{height:`${zt.getTotalSize()}px`,width:"100%",position:"relative"},children:zt.getVirtualItems().map(ht=>{const mt=Me[ht.index];return c.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${ht.size}px`,transform:`translateY(${ht.start}px)`,padding:"0 1rem 1rem 1rem",boxSizing:"border-box"},children:c.jsx(tD,{animal:mt,onSelect:()=>t({name:"rebano-profile",animalId:mt.id}),onOpenActions:gt})},ht.key)})}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:c.jsx("p",{className:"text-zinc-400",children:ie?`No se encontraron resultados para "${ie}"`:"No hay animales que coincidan con los filtros."})})})]}),c.jsx(mu,{isOpen:v,onClose:()=>y(!1),title:`Acciones para ${ur(m)}`,actions:We(m)}),c.jsx(mu,{isOpen:b==="decommissionSheet",onClose:Xe,title:"Causa de la Baja",actions:pt}),m&&c.jsxs(c.Fragment,{children:[b==="parturition"&&c.jsx(Cp,{isOpen:!0,onClose:Xe,motherId:m.id}),b==="abortion"&&c.jsx(vD,{animal:m,onCancel:Xe,onSaveSuccess:Xe}),b==="decommission"&&A&&c.jsx(y_,{isOpen:b==="decommission",animal:m,onCancel:Xe,onConfirm:Ot,reason:A}),b==="service"&&c.jsx(xD,{isOpen:!0,onClose:Xe,onSave:at,animal:m}),b==="milkWeighingAction"&&c.jsx(mD,{isOpen:!0,animal:m,onClose:Xe,onLogToSession:ht=>ft(ht,"leche"),onStartNewSession:()=>ut("leche"),onStartDrying:Ft,onSetDry:sn}),b==="bodyWeighingAction"&&c.jsx(gD,{isOpen:!0,animal:m,onClose:Xe,onLogToSession:ht=>ft(ht,"corporal"),onStartNewSession:()=>ut("corporal"),onSetReadyForMating:Dt}),b==="logSimpleMilk"&&T&&c.jsx(cn,{isOpen:!0,onClose:Xe,title:`Añadir Pesaje Leche: ${ur(m)}`,children:c.jsx(Vg,{animalId:m.id,weightType:"leche",onSaveSuccess:Xe,onCancel:Xe,sessionDate:T})}),b==="logSimpleBody"&&T&&c.jsx(cn,{isOpen:!0,onClose:Xe,title:`Añadir Peso Corporal: ${ur(m)}`,children:c.jsx(Vg,{animalId:m.id,weightType:"corporal",onSaveSuccess:Xe,onCancel:Xe,sessionDate:T})}),(b==="newMilkSession"||b==="newBodySession")&&c.jsx(bD,{weightType:O,onBack:Xe,onAnimalsSelected:Yt}),b==="bulkWeighing"&&c.jsx(cn,{isOpen:!0,onClose:Xe,title:`Carga Masiva - ${O==="leche"?"Leche":"Corporal"}`,size:"fullscreen",children:c.jsx(yD,{weightType:O,animalsToWeigh:E,onSaveSuccess:Qt,onCancel:Xe})}),c.jsx(vv,{isOpen:Ce,onClose:()=>fe(!1),onConfirm:xt,title:`Eliminar ${ur(m)} Permanentemente`,message:"Esta acción borrará el registro del animal de la base de datos para siempre y no se puede deshacer. ¿Continuar?"})]})]})}const XFe=({isOpen:t,onClose:e,editingLotId:n})=>{const{lots:r,addLot:i}=Xt(),[a,s]=I.useState(""),[o,l]=I.useState(""),[u,d]=I.useState(""),f=async()=>{if(a.trim()===""){d("El nombre del lote no puede estar vacío.");return}try{await i({name:a,parentLotId:o||void 0}),p()}catch(m){d(m.message||"No se pudo guardar el lote."),console.error(m)}},p=()=>{s(""),l(""),d(""),e()},h=r.filter(m=>!m.parentLotId&&m.id!==n);return c.jsx(cn,{isOpen:t,onClose:p,title:"Crear Nuevo Lote",children:c.jsxs("form",{onSubmit:m=>{m.preventDefault(),f()},className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la nueva ubicación o lote en tu finca."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"lotName",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Lote"}),c.jsx("input",{id:"lotName",type:"text",value:a,onChange:m=>s(m.target.value),placeholder:"Ej: Galpón 1",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"parentLot",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Sub-lote de (Opcional)"}),c.jsxs("select",{id:"parentLot",value:o,onChange:m=>l(m.target.value),className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0",children:[c.jsx("option",{value:"",children:"Ninguno (Es un Lote Principal)"}),h.map(m=>c.jsx("option",{value:m.id,children:m.name},m.id))]})]}),u&&c.jsx("p",{className:"text-sm text-brand-red text-center",children:u}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx("button",{type:"button",onClick:p,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Lote"})]})]})})},QFe=({isOpen:t,onClose:e})=>{const{addOrigin:n}=Xt(),[r,i]=I.useState(""),[a,s]=I.useState(""),o=async()=>{if(r.trim()===""){s("El nombre del origen no puede estar vacío.");return}try{await n(r),i(""),s(""),e()}catch(u){s("No se pudo guardar el origen."),console.error(u)}},l=()=>{i(""),s(""),e()};return c.jsx(cn,{isOpen:t,onClose:l,title:"Crear Nuevo Origen",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la ganadería o finca de origen."}),c.jsx("div",{children:c.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"Ej: Agropecuaria La Bendición",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})}),a&&c.jsx("p",{className:"text-sm text-brand-red",children:a}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx("button",{onClick:l,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:o,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Origen"})]})]})})},ZFe=t=>{const{events:e}=Xt();return I.useMemo(()=>t?e.filter(a=>a.animalId===t).sort((a,s)=>new Date(s.date).getTime()-new Date(a.date).getTime()):[],[e,t])},JFe=({animalId:t,birthDate:e,onSave:n,onCancel:r})=>{const[i,a]=I.useState(new Date().toISOString().split("T")[0]),[s,o]=I.useState(""),[l,u]=I.useState(null),[d,f]=I.useState(!1),{animals:p}=Xt(),h=I.useMemo(()=>p.find(v=>v.id===t),[p,t]),m=h!=null&&h.name?String(h.name).toUpperCase().trim():"",g=async v=>{v.preventDefault(),u(null),f(!0);const y=parseFloat(s);if(!i||!s||isNaN(y)||y<=0){u("Por favor, introduce una fecha y un peso válidos."),f(!1);return}if(new Date(i)<new Date(e)){u("La fecha de destete no puede ser anterior a la fecha de nacimiento."),f(!1);return}try{await n({weaningDate:i,weaningWeight:y})}catch(b){u("No se pudo guardar el registro de destete."),console.error(b)}finally{f(!1)}};return c.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c.jsxs("div",{className:"text-center mb-2",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:t.toUpperCase()}),m&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:m})]}),c.jsx("p",{className:"text-sm text-zinc-400 text-center -mt-2",children:"Registra la fecha y el peso al momento del destete."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weaningDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Destete"}),c.jsx("input",{id:"weaningDate",type:"date",value:i,onChange:v=>a(v.target.value),className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0,max:new Date().toISOString().split("T")[0]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weaningWeight",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso al Destete (Kg)"}),c.jsx("input",{id:"weaningWeight",type:"number",step:"0.1",value:s,onChange:v=>o(v.target.value),placeholder:"Ej: 15.5",className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),l&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(mr,{size:18}),c.jsx("span",{children:l})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsxs("button",{type:"submit",disabled:d,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[d&&c.jsx(kc,{size:18,className:"animate-spin"}),d?"Guardando...":"Guardar Destete"]})]})]})},eze=t=>{const{animals:e}=Xt(),n=I.useMemo(()=>{const i=new Map;return e.forEach(a=>i.set(a.id,a)),i},[e]);return I.useMemo(()=>{const i=(s,o)=>{if(!s||o>3)return;const l=n.get(s);if(!l)return;const u=i(l.fatherId,o+1),d=i(l.motherId,o+1);return{animal:l,sire:u,dam:d}};return i(t,0)||null},[t,n])},mo=({animal:t,onClick:e})=>{const n="bg-zinc-800/80 p-1.5 rounded-lg border border-zinc-700/80 w-44 text-left shadow-md transition-colors text-xs px-2";if(!t)return c.jsxs("div",{className:`${n} bg-zinc-900/50 border-dashed text-center`,children:[" ",c.jsx("p",{className:"font-semibold text-zinc-500",children:"Desconocido"})]});const r=t.sex==="Hembra"?"text-pink-400":"text-blue-400",i=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>e(t.id),className:`${n} hover:border-brand-orange`,children:[c.jsx("p",{className:`font-mono font-semibold text-xs truncate ${r}`,children:t.id.toUpperCase()}),i&&c.jsx("p",{className:"text-[10px] text-zinc-300 truncate",children:i}),c.jsx("p",{className:"text-zinc-400 text-[10px]",children:t.sex})]})},tze=({rootNode:t,onAncestorClick:e})=>{var l,u,d,f,p,h,m,g,v,y,b,S,A,C,T,j,E,k,O,D,M,L,V,Q,Y,J,q,ee,le,se,$,G,te,oe;if(!t)return c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay datos de genealogía suficientes para mostrar el pedigrí."});const n="border-zinc-600",r=c.jsx("div",{className:`w-3 border-t-2 ${n}`}),i=c.jsx("div",{className:`h-20 border-r-2 ${n}`}),a=c.jsx("div",{className:`h-10 border-r-2 ${n}`}),s=c.jsx("div",{className:`h-6 border-r-2 ${n}`}),o=t.animal.name?String(t.animal.name).toUpperCase().trim():"";return c.jsxs("div",{className:"flex items-center justify-center p-4 overflow-x-auto min-w-max",children:[c.jsx("div",{className:"flex flex-col items-center justify-center",children:c.jsxs("div",{className:"bg-zinc-800/80 p-1.5 rounded-lg border border-zinc-700/80 w-44 text-left shadow-md text-xs px-2",children:[" ",c.jsx("p",{className:`font-mono font-semibold text-xs truncate ${t.animal.sex==="Hembra"?"text-pink-400":"text-blue-400"}`,children:t.animal.id.toUpperCase()}),o&&c.jsx("p",{className:"text-[10px] text-zinc-300 truncate",children:o}),c.jsx("p",{className:"text-zinc-400 text-[10px]",children:t.animal.sex})]})}),c.jsxs("div",{className:"flex flex-col items-center",children:[r,i,r]}),c.jsxs("div",{className:"flex flex-col items-center justify-around space-y-4",children:[c.jsx(mo,{animal:(l=t.sire)==null?void 0:l.animal,onClick:e}),c.jsx(mo,{animal:(u=t.dam)==null?void 0:u.animal,onClick:e})]}),c.jsxs("div",{className:"flex flex-col items-center justify-around space-y-4",children:[c.jsxs("div",{className:"flex items-center",children:[" ",r," ",a," ",r," "]}),c.jsxs("div",{className:"flex items-center",children:[" ",r," ",a," ",r," "]})]}),c.jsxs("div",{className:"flex flex-col items-center justify-between gap-[20px]",children:[c.jsx(mo,{animal:(f=(d=t.sire)==null?void 0:d.sire)==null?void 0:f.animal,onClick:e}),c.jsx(mo,{animal:(h=(p=t.sire)==null?void 0:p.dam)==null?void 0:h.animal,onClick:e}),c.jsx("div",{className:"h-[6px]"}),c.jsx(mo,{animal:(g=(m=t.dam)==null?void 0:m.sire)==null?void 0:g.animal,onClick:e}),c.jsx(mo,{animal:(y=(v=t.dam)==null?void 0:v.dam)==null?void 0:y.animal,onClick:e})]}),c.jsxs("div",{className:"flex flex-col items-center justify-between gap-[20px]",children:[c.jsxs("div",{className:"flex items-center",children:[" ",r," ",s," ",r," "]}),c.jsxs("div",{className:"flex items-center",children:[" ",r," ",s," ",r," "]}),c.jsx("div",{className:"h-[6px]"}),c.jsxs("div",{className:"flex items-center",children:[" ",r," ",s," ",r," "]}),c.jsxs("div",{className:"flex items-center",children:[" ",r," ",s," ",r," "]})]}),c.jsxs("div",{className:"flex flex-col items-center justify-between gap-[6px]",children:[c.jsx(mo,{animal:(A=(S=(b=t.sire)==null?void 0:b.sire)==null?void 0:S.sire)==null?void 0:A.animal,onClick:e}),c.jsx(mo,{animal:(j=(T=(C=t.sire)==null?void 0:C.sire)==null?void 0:T.dam)==null?void 0:j.animal,onClick:e}),c.jsx("div",{className:"h-[2px]"}),c.jsx(mo,{animal:(O=(k=(E=t.sire)==null?void 0:E.dam)==null?void 0:k.sire)==null?void 0:O.animal,onClick:e}),c.jsx(mo,{animal:(L=(M=(D=t.sire)==null?void 0:D.dam)==null?void 0:M.dam)==null?void 0:L.animal,onClick:e}),c.jsx("div",{className:"h-[8px]"}),c.jsx(mo,{animal:(Y=(Q=(V=t.dam)==null?void 0:V.sire)==null?void 0:Q.sire)==null?void 0:Y.animal,onClick:e}),c.jsx(mo,{animal:(ee=(q=(J=t.dam)==null?void 0:J.sire)==null?void 0:q.dam)==null?void 0:ee.animal,onClick:e}),c.jsx("div",{className:"h-[2px]"}),c.jsx(mo,{animal:($=(se=(le=t.dam)==null?void 0:le.dam)==null?void 0:se.sire)==null?void 0:$.animal,onClick:e}),c.jsx(mo,{animal:(oe=(te=(G=t.dam)==null?void 0:G.dam)==null?void 0:te.dam)==null?void 0:oe.animal,onClick:e})]})]})},nze=({isOpen:t,onClose:e,animalId:n,navigateTo:r})=>{const i=eze(n),{animals:a}=Xt(),s=a.find(u=>u.id===n),o=()=>{const u=document.querySelector(".pedigree-modal-header"),d=document.querySelector(".pedigree-modal-footer");u&&(u.style.display="none"),d&&(d.style.display="none"),window.print(),u&&(u.style.display=""),d&&(d.style.display="")},l=()=>{const u=document.querySelector(".pedigree-modal-header"),d=document.querySelector(".pedigree-modal-footer");u&&(u.style.display=""),d&&(d.style.display=""),e()};return c.jsxs(cn,{isOpen:t,onClose:l,title:`Genealogía de ${ur(s)}`,size:"large",children:[c.jsxs("div",{className:"pedigree-modal-header mb-4",children:[" "," "]}),c.jsxs("div",{className:"pedigree-chart-container",children:[" ",c.jsx(tze,{rootNode:i,onAncestorClick:u=>{e(),setTimeout(()=>r({name:"rebano-profile",animalId:u}),100)}})]}),c.jsxs("footer",{className:"pedigree-modal-footer mt-6 pt-4 border-t border-brand-border flex justify-end gap-3",children:[c.jsxs("button",{onClick:o,className:"flex items-center gap-2 bg-zinc-600 hover:bg-zinc-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:[c.jsx(Bce,{size:18})," Imprimir"]}),c.jsx("button",{onClick:l,className:"bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg",children:"Cerrar"})]}),c.jsx("style",{children:`
                    @media print {
                        body * {
                            visibility: hidden;
                        }
                        .pedigree-chart-container, .pedigree-chart-container * {
                            visibility: visible;
                        }
                        .pedigree-chart-container {
                            position: absolute;
                            left: 0;
                            top: 0;
                            width: 100%; /* Ajusta según necesidad */
                        }
                        /* Oculta los botones dentro del gráfico si los hubiera */
                        .pedigree-chart-container button {
                            display: none;
                        }
                         /* Ajusta el tamaño de fuente si es necesario */
                        .pedigree-chart-container p {
                           font-size: 10px; /* Ejemplo */
                        }
                    }
                `})]})},RF=xe.forwardRef(({className:t,...e},n)=>c.jsx("input",{ref:n,...e,className:`w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange disabled:opacity-50 disabled:bg-brand-dark/50 ${t}`})),JX=xe.forwardRef(({children:t,...e},n)=>c.jsxs("div",{className:"relative w-full",children:[c.jsx("select",{ref:n,...e,className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white appearance-none focus:outline-none focus:ring-2 focus:ring-brand-orange",children:t}),c.jsx(wy,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"})]})),kC=({title:t,children:e})=>c.jsxs("div",{className:"bg-brand-glass rounded-2xl border border-brand-border p-4 space-y-4",children:[c.jsx("h2",{className:"text-zinc-400 font-semibold text-sm uppercase tracking-wide",children:t}),e]}),rze=({labelOn:t,labelOff:e,value:n,onChange:r})=>c.jsxs("div",{onClick:()=>r(!n),className:"w-full bg-brand-dark rounded-xl p-1 flex cursor-pointer",children:[c.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"bg-zinc-700 text-white":"text-zinc-400"}`,children:t}),c.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"text-zinc-400":"bg-zinc-700 text-white"}`,children:e})]}),ize=({onClose:t,onSelectDate:e,currentValue:n})=>c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm animate-fade-in",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-ios-modal-bg rounded-t-2xl p-4 shadow-lg animate-slide-up",onClick:r=>r.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 1rem)"},children:[c.jsx("div",{onClick:t,className:"w-16 h-1.5 bg-zinc-700 rounded-full mx-auto mb-4 cursor-pointer"}),c.jsx("div",{className:"flex justify-center [&_.rdp]:bg-transparent [&_.rdp]:text-white [&_.rdp-caption_select]:bg-brand-glass [&_.rdp-caption_select]:border-brand-border [&_.rdp-caption_select]:text-white [&_.rdp-caption_select]:rounded-lg [&_.rdp-day_selected]:bg-brand-orange [&_.rdp-day_selected]:text-white [&_.rdp-day_today]:text-brand-orange [&_.rdp-nav_button]:text-zinc-400 [&_.rdp-head_cell]:text-zinc-500 [&_.rdp-day]:text-zinc-200 [&_.rdp-day_outside]:text-zinc-600",children:c.jsx(Ap,{mode:"single",selected:n,onSelect:e,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear(),defaultMonth:n,locale:Kb})})]})}),aze=({onClose:t,onInput:e,currentValue:n})=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=["1","2","3","4","5","6","7","8","9","-","0","DEL"],a=o=>{if(o==="DEL"){s();return}o&&n.length<15&&e(n+o)},s=()=>{e(n.slice(0,-1))};return c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-[#333333] p-2 space-y-2",onClick:o=>o.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 0.5rem)"},children:[c.jsxs("div",{className:"flex flex-nowrap space-x-1.5 overflow-x-auto py-2 alphabet-scroller",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[c.jsx("style",{children:".alphabet-scroller::-webkit-scrollbar { display: none; }"}),r.map(o=>c.jsx("button",{onClick:()=>a(o),className:"flex-shrink-0 w-10 h-10 bg-[#555555] text-white rounded-md text-lg font-medium active:bg-zinc-500",children:o},o))]}),c.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:i.map(o=>c.jsx("button",{onClick:()=>a(o),className:"h-12 bg-[#555555] text-white rounded-md text-xl font-medium active:bg-zinc-500 flex items-center justify-center",children:o==="DEL"?c.jsx(uS,{size:20}):o},o))}),c.jsx("button",{onClick:t,className:"h-12 w-full bg-blue-600 text-white rounded-md text-lg font-semibold active:bg-blue-700",children:"Done"})]})})},sze=({onClose:t,onInput:e,currentValue:n})=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=["1","2","3","4","5","6","7","8","9","%","0","DEL"],a=4,s=l=>{var g,v,y;if(l==="DEL"){o();return}if(n.length>=30)return;const u=n.split(" ").filter(b=>b!=="");let d=/[%A-Z]$/.test(n),f=n===""||n.endsWith(" ");if(u.length>=a&&f&&/\d/.test(l))return;let p=n;if(d&&/\d/.test(l))if(u.length<a)p+=" ";else return;if(l==="%"&&!/\d$/.test(p.slice(-1))&&!/[A-Z]$/.test(p.slice(-1))||l==="%"&&/%$/.test(p)||/[A-Z]/.test(l)&&!f&&!/\d$/.test(p.slice(-1))&&!/%$/.test(p.slice(-1))||/\d/.test(l)&&/[A-Z]$/.test(p))return;const h=((v=(g=p.split(" ").pop())==null?void 0:g.match(/\d+$/))==null?void 0:v[0])||"";if(!(l==="0"&&(f||/[%A-Z ]$/.test(p.slice(-1)))&&h.length===0)){if(l==="0"&&h==="0")return;/\d/.test(l)&&h==="0"&&(p=p.slice(0,-1))}const m=(y=(h+l).match(/\d+/))==null?void 0:y[0];m&&parseInt(m,10)>100||e(p+l)},o=()=>{e(n.slice(0,-1))};return c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50",onClick:t,children:c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-[#333333] p-2 space-y-2",onClick:l=>l.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 0.5rem)"},children:[c.jsxs("div",{className:"flex flex-nowrap space-x-1.5 overflow-x-auto py-2 alphabet-scroller",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[c.jsx("style",{children:".alphabet-scroller::-webkit-scrollbar { display: none; }"}),r.map(l=>c.jsx("button",{onClick:()=>s(l),className:"flex-shrink-0 w-10 h-10 bg-[#555555] text-white rounded-md text-lg font-medium active:bg-zinc-500",children:l},l))]}),c.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:i.map(l=>c.jsx("button",{onClick:()=>s(l),className:`h-12 bg-[#555555] text-white rounded-md text-xl font-medium active:bg-zinc-500 flex items-center justify-center ${l==="%"?"text-brand-orange":""}`,children:l==="DEL"?c.jsx(uS,{size:20}):l},l))}),c.jsx("button",{onClick:t,className:"h-12 w-full bg-blue-600 text-white rounded-md text-lg font-semibold active:bg-blue-700",children:"Done"})]})})},oze=({type:t,onClose:e,onSave:n})=>{const{animals:r,fathers:i}=Xt(),[a,s]=I.useState("Referencia"),[o,l]=I.useState(""),[u,d]=I.useState(""),[f,p]=I.useState(""),[h,m]=I.useState(""),[g,v]=I.useState(""),[y,b]=I.useState(null),[S,A]=I.useState(!1),[C,T]=I.useState(!1),[j,E]=I.useState(!1),k=(M,L)=>{if(!M||!L)return"Indefinido";const V=new Date,Q=new Date(M+"T00:00:00");if(isNaN(Q.getTime()))return"Indefinido";const Y=(V.getTime()-Q.getTime())/(1e3*60*60*24);return L==="Hembra"?Y<=60?"Cabrita":Y<=365?"Cabritona":"Cabra Adulta":Y<=60?"Cabrito":Y<=365?"Macho de Levante":"Macho Cabrío"};I.useEffect(()=>{v(eD(h))},[h]);const O=async()=>{if(b(null),a==="Activo"&&!o){b("El ID es obligatorio si el estado es Activo.");return}const M=o.toUpperCase()||`REF-${Date.now()}`,L=new Set([...r.map(Y=>Y.id.toLowerCase()),...i.map(Y=>Y.id.toLowerCase())]);if(o&&L.has(M.toLowerCase())){b("Este ID ya existe en la base de datos (rebaño o referencias).");return}const V=t==="mother"?"Hembra":"Macho",Q={id:M,name:u.toUpperCase()||void 0,birthDate:f||"N/A",sex:V,isReference:a==="Referencia",status:"Activo",lifecycleStage:f?k(f,V):V==="Hembra"?"Cabra Adulta":"Macho Cabrío",racialComposition:h||void 0,breed:g||void 0,location:"Referencia",reproductiveStatus:V==="Hembra"?"Vacía":"No Aplica",createdAt:new Date().getTime(),lastWeighing:null};try{n(Q)}catch(Y){b(Y.message||"Error al preparar datos del animal."),console.error("Error creating quick parent object:",Y)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm animate-fade-in flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"w-full max-w-md bg-ios-modal-bg rounded-2xl shadow-lg animate-slide-up flex flex-col max-h-[90vh]",onClick:M=>M.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[c.jsx("div",{className:"w-10"}),c.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Agregar ",t==="mother"?"Madre":"Padre"," Rápido"]}),c.jsx("button",{onClick:e,className:"p-2 -mr-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50",children:c.jsx(Xl,{size:20})})]}),c.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto",children:[c.jsx(kC,{title:"Categoría",children:c.jsx(rze,{labelOn:"Activo",labelOff:"Referencia",value:a==="Activo",onChange:M=>s(M?"Activo":"Referencia")})}),c.jsxs(kC,{title:"Identificación",children:[c.jsx("input",{type:"text",value:o,onClick:()=>A(!0),readOnly:!0,placeholder:a==="Activo"?"ID (Obligatorio)":"ID (Opcional)",className:`w-full bg-brand-glass border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 cursor-pointer font-mono ${y&&y.includes("ID ya existe")?"border-brand-red ring-brand-red":"border-brand-border focus:ring-brand-orange"}`}),c.jsx(RF,{value:u,onChange:M=>d(M.target.value.toUpperCase()),placeholder:"Nombre (Opcional)"}),c.jsxs("button",{type:"button",onClick:()=>T(!0),className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-left flex justify-between items-center",children:[c.jsx("span",{className:f?"text-white":"text-zinc-500",children:f?new Date(f+"T00:00:00Z").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}):"Fecha Nacimiento (Opcional)"}),c.jsx(oo,{className:"text-zinc-400",size:20})]})]}),c.jsxs(kC,{title:"Raza",children:[c.jsx("input",{type:"text",value:h,onClick:()=>E(!0),readOnly:!0,placeholder:"Composición Racial (Opcional)",className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange cursor-pointer"}),c.jsx(RF,{value:g,disabled:!0,readOnly:!0,placeholder:"Raza (Auto-calculada)"})]}),y&&c.jsx("p",{className:"text-sm text-brand-red text-center",children:y})]}),c.jsx("footer",{className:"p-4 border-t border-brand-border flex-shrink-0",children:c.jsx("button",{onClick:O,className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar"})})]})}),S&&c.jsx(aze,{onClose:()=>A(!1),onInput:M=>l(M.toUpperCase()),currentValue:o}),C&&c.jsx(ize,{onClose:()=>T(!1),onSelectDate:M=>{M&&p(M.toISOString().split("T")[0]),T(!1)},currentValue:f?new Date(f+"T00:00:00Z"):new Date}),j&&c.jsx(sze,{onClose:()=>E(!1),onInput:m,currentValue:h}),c.jsx("style",{children:" .rdp { --rdp-cell-size: 40px; --rdp-accent-color: #FF9500; --rdp-background-color: transparent; --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: transparent; --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF; margin: 1em auto; } .rdp-caption_label { color: #FFF; font-weight: bold;} .rdp-nav_button { color: #FF9500; } .rdp-head_cell { color: #8e8e93; font-size: 0.8em; } .rdp-day { color: #FFF;} .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; } .rdp-day_today { font-weight: bold; color: #FF9500; } .rdp-day_disabled { color: #505054; } .rdp-day_outside { color: #505054; } .rdp-caption_dropdowns { display: flex; gap: 10px; } .rdp-dropdown { background-color: #333; border: 1px solid #555; color: #FFF; padding: 4px 8px; border-radius: 6px; } "})]})},Iu=({label:t,value:e,isEditing:n,children:r})=>c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium text-zinc-400",children:t}),n&&r?r:c.jsx("dd",{className:`mt-1 text-lg font-semibold text-white truncate ${t==="ID"?"font-mono":""}`,children:e||"N/A"})]}),lze=({onOpenModal:t})=>c.jsx("div",{className:"text-center p-4 min-h-[150px] flex flex-col justify-center items-center",children:c.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 bg-brand-blue hover:bg-blue-700 text-white font-bold py-3 px-5 rounded-lg transition-colors",children:[c.jsx(FH,{size:20})," Ver Genealogía Completa"]})}),cze={Nacimiento:{icon:Mce,color:"bg-green-500/20 text-brand-green"},Registro:{icon:dS,color:"bg-blue-500/20 text-brand-blue"},Parto:{icon:hl,color:"bg-pink-500/20 text-pink-400"},Aborto:{icon:xf,color:"bg-yellow-500/20 text-yellow-400"},Movimiento:{icon:oT,color:"bg-blue-500/20 text-brand-blue"},"Cambio de Estado":{icon:Yce,color:"bg-purple-500/20 text-purple-400"},"Pesaje Lechero":{icon:qH,color:"bg-gray-500/20 text-gray-300"},"Pesaje Corporal":{icon:md,color:"bg-green-500/20 text-brand-green"},Servicio:{icon:fS,color:"bg-pink-500/20 text-pink-400"},Tratamiento:{icon:pp,color:"bg-red-500/20 text-brand-red"},Diagnóstico:{icon:Za,color:"bg-teal-500/20 text-teal-300"}},uze=({animal:t})=>{const e=ZFe(t==null?void 0:t.id);return t?!e||e.length===0?c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene eventos registrados."}):c.jsx("div",{className:"space-y-3",children:e.map(n=>{const r=cze[n.type]||{icon:dS,color:"bg-gray-500/20 text-gray-300"},i=r.icon;let a="Fecha desconocida",s="";if(n.type==="Registro"&&t.createdAt)a=new Date(t.createdAt).toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}),s="Registrado el: ";else if(n.date&&n.date!=="N/A")try{a=new Date(n.date+"T00:00:00Z").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}catch(o){console.error("Error formatting event date:",n.date,o),a=n.date}return c.jsxs("div",{className:"flex items-start gap-4 p-3 bg-black/20 rounded-lg",children:[c.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${r.color}`,children:c.jsx(i,{size:20})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:n.type}),c.jsx("p",{className:"text-sm text-zinc-300",children:n.details}),c.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:[s,a,n.lotName&&` | Lote: ${n.lotName}`]})]})]},n.id)})}):c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Cargando datos del animal..."})},dze=({offspring:t,navigateTo:e})=>t.length===0?c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene descendencia registrada."}):c.jsx("div",{className:"space-y-2",children:t.map(n=>{const r=n.name?String(n.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>e({name:"rebano-profile",animalId:n.id}),className:"w-full text-left p-3 bg-black/20 hover:bg-zinc-800/60 rounded-lg transition-colors flex justify-between items-center group",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:n.id.toUpperCase()}),r&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:r}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[n.sex," | ",Lc(n.birthDate)," | Lote: ",n.location||"N/A"]})})]}),c.jsx(Wi,{className:"text-zinc-600 group-hover:text-white transition-colors flex-shrink-0"})]},n.id)})}),fze=({animal:t,isEditing:e,editedData:n,setEditedData:r,origins:i,onAddOriginClick:a,onLocationClick:s})=>{const o=(u,d)=>{r(f=>({...f,[u]:d}))},l=Lc(t.birthDate);return c.jsxs("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-6",children:[c.jsx(Iu,{label:"ID",value:t.id}),c.jsx(Iu,{label:"Sexo",value:t.sex}),c.jsx(Iu,{label:"Fecha Nacimiento",value:t.birthDate!=="N/A"?new Date(t.birthDate+"T00:00:00Z").toLocaleDateString("es-VE",{timeZone:"UTC"}):"N/A",isEditing:e,children:c.jsx("input",{type:"date",value:n.birthDate==="N/A"?"":n.birthDate||"",onChange:u=>o("birthDate",u.target.value||"N/A"),className:"w-full bg-zinc-700 p-2 rounded-md mt-1 text-white"})}),c.jsx(Iu,{label:"Edad",value:l}),c.jsx(Iu,{label:"Ubicación / Lote",children:!e&&c.jsx("dd",{className:"mt-1 text-lg",children:c.jsx("button",{onClick:s,className:"font-semibold text-brand-orange hover:underline text-left",children:t.location||"Sin Asignar"})})}),c.jsx(Iu,{label:"Categoría",value:t.lifecycleStage}),c.jsx(Iu,{label:"Origen",value:t.origin,isEditing:e,children:c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsxs(JX,{value:n.origin||"",onChange:u=>o("origin",u.target.value),children:[c.jsx("option",{value:"",children:"Seleccionar Origen..."}),c.jsx("option",{value:"Finca Masparrito",children:"Finca Masparrito"}),i.map(u=>c.jsx("option",{value:u.name,children:u.name},u.id))]}),c.jsx("button",{type:"button",onClick:a,className:"p-2 bg-brand-orange hover:bg-orange-600 text-white rounded-md",children:c.jsx(ol,{size:20})})]})}),t.weaningDate&&c.jsx(Iu,{label:"Fecha de Destete",value:new Date(t.weaningDate+"T00:00:00Z").toLocaleDateString("es-VE",{timeZone:"UTC"})}),t.weaningWeight&&c.jsx(Iu,{label:"Peso al Destete",value:`${t.weaningWeight} Kg`})]})};function hze({animalId:t,onBack:e,navigateTo:n}){const{animals:r,lots:i,origins:a,parturitions:s,updateAnimal:o,deleteAnimalPermanently:l,fathers:u,addAnimal:d,appConfig:f}=Xt(),[p,h]=I.useState("main"),[m,g]=I.useState(!1),[v,y]=I.useState({}),[b,S]=I.useState("idle"),[A,C]=I.useState(!1),[T,j]=I.useState(!1),[E,k]=I.useState(!1),[O,D]=I.useState(!1),[M,L]=I.useState(""),[V,Q]=I.useState(!1),[Y,J]=I.useState(null),[q,ee]=I.useState(!1),[le,se]=I.useState(!1),[$,G]=I.useState(!1),[te,oe]=I.useState(!1),[ge,_e]=I.useState(!1),[Ce,fe]=I.useState(!1),[be,we]=I.useState(null),ie=I.useMemo(()=>r.find(tt=>tt.id===t),[r,t]),He=I.useMemo(()=>ie?ie.sex==="Hembra"?r.filter(tt=>tt.motherId===ie.id).sort((tt,zt)=>new Date(zt.birthDate).getTime()-new Date(tt.birthDate).getTime()):ie.sex==="Macho"?r.filter(tt=>tt.fatherId===ie.id).sort((tt,zt)=>new Date(zt.birthDate).getTime()-new Date(tt.birthDate).getTime()):[]:[],[r,ie]),Me=I.useMemo(()=>r.filter(tt=>tt.sex==="Hembra"),[r]),he=I.useMemo(()=>{const tt=r.filter(ht=>ht.sex==="Macho"),zt=u.map(ht=>({id:ht.id,name:ht.name,sex:"Macho",status:"Activo",isReference:!0,birthDate:"N/A",lifecycleStage:"Macho Cabrío",location:"Referencia",reproductiveStatus:"No Aplica",createdAt:0,lastWeighing:null}));return[...tt,...zt]},[r,u]),We=I.useMemo(()=>ie?Lf(ie,s):"",[ie,s]),pt=I.useMemo(()=>{if(!ie||ie.weaningDate||ie.isReference||ie.status!=="Activo")return!1;const tt=We;return tt!=="Cabrita"&&tt!=="Cabrito"?!1:Cc(ie.birthDate)>f.edadDesteteDias},[ie,We,f.edadDesteteDias]),gt=(ie==null?void 0:ie.breedingFailures)||0,Xe=gt>=2||pt?"border-brand-red ring-2 ring-brand-red/80":"border-brand-border";I.useEffect(()=>{ie&&(m&&y({birthDate:ie.birthDate,origin:ie.origin,fatherId:ie.fatherId,motherId:ie.motherId}),L(ie.location||""))},[ie,m]);const Ot=async()=>{if(ie){S("saving");try{await o(ie.id,v),S("success"),setTimeout(()=>{g(!1),S("idle")},1500)}catch(tt){console.error("Error al actualizar:",tt),S("idle")}}},ft=()=>{g(!1),y({})},ut=async()=>{if(ie)try{await o(ie.id,{location:M}),D(!1)}catch(tt){console.error("Error al actualizar ubicación:",tt)}},Dt=async tt=>{if(!ie||!Y)return;const zt={status:Y,isReference:!0,endDate:tt.date};Y==="Venta"&&Object.assign(zt,{salePrice:tt.salePrice,saleBuyer:tt.saleBuyer,salePurpose:tt.salePurpose}),Y==="Muerte"&&(zt.deathReason=tt.deathReason),Y==="Descarte"&&Object.assign(zt,{cullReason:tt.cullReason,cullReasonDetails:tt.cullReasonDetails}),await o(ie.id,zt),J(null)},Yt=async()=>{ie&&await o(ie.id,{isReference:!1,status:"Activo",endDate:void 0})},Qt=async()=>{ie&&(await l(ie.id),e())},Ft=async tt=>{ie&&(await o(ie.id,{weaningDate:tt.weaningDate,weaningWeight:tt.weaningWeight}),G(!1))},sn=async tt=>{try{await d(tt),be==="father"?y(zt=>({...zt,fatherId:tt.id})):be==="mother"&&y(zt=>({...zt,motherId:tt.id}))}catch(zt){console.error("Error saving quick parent:",zt)}finally{we(null)}},at=[{label:"Por Venta",icon:pl,onClick:()=>J("Venta")},{label:"Por Muerte",icon:xf,onClick:()=>J("Muerte"),color:"text-brand-red"},{label:"Por Descarte",icon:cS,onClick:()=>J("Descarte"),color:"text-brand-red"}],vt=[{label:"Reintegrar a Activos",icon:GH,onClick:Yt},{label:"Eliminar Permanentemente",icon:Yl,onClick:()=>se(!0),color:"text-brand-red"}];if(!ie)return c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]});const xt=ie.name?ie.name.toUpperCase().trim():"";return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[c.jsxs("header",{className:`bg-brand-glass backdrop-blur-xl rounded-b-2xl p-4 border-b border-x sticky top-0 z-10 transition-all ${Xe}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center min-w-0",children:[c.jsx("h1",{className:"text-2xl font-mono font-bold tracking-tight text-white truncate",children:ie.id.toUpperCase()}),xt&&c.jsx("p",{className:"text-sm text-zinc-300 truncate",children:xt})]}),c.jsxs("div",{className:"w-8 flex items-center justify-end gap-1",children:[pt&&c.jsx("span",{title:`Destete atrasado (Meta: ${f.edadDesteteDias} días)`,children:c.jsx(mr,{className:"text-brand-red",size:20})}),gt===1&&!pt&&c.jsx("span",{title:"1 fallo reproductivo reportado",children:c.jsx(mr,{className:"text-yellow-400",size:20})}),gt>=2&&!pt&&c.jsx("span",{title:`${gt} fallos reproductivos reportados`,children:c.jsx(mr,{className:"text-brand-red",size:20})})]})]}),c.jsx("p",{className:"text-center text-brand-orange font-semibold text-sm -mt-1 mb-3 uppercase tracking-wider",children:ie.isReference?"REFERENCIA":ie.status!=="Activo"?ie.status:ie.location||"Sin Asignar"}),pt&&c.jsxs("div",{className:"mb-3 p-3 bg-brand-red/20 border border-brand-red rounded-lg text-center",children:[c.jsx("p",{className:"text-red-300 text-sm font-semibold",children:"Destete Atrasado"}),c.jsxs("p",{className:"text-red-400 text-xs",children:["Este animal tiene ",Cc(ie.birthDate)," días (Meta: ",f.edadDesteteDias," días) y no ha sido destetado."]})]}),c.jsxs("div",{className:"flex justify-around bg-black/20 rounded-xl p-1",children:[ie.sex==="Hembra"&&c.jsxs(c.Fragment,{children:[" ",c.jsxs("button",{onClick:()=>n({name:"lactation-profile",animalId:ie.id}),className:"flex flex-col items-center p-2 text-blue-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(bf,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Leche"})]})," ",c.jsxs("button",{onClick:()=>k(!0),disabled:ie.isReference||ie.status!=="Activo",className:"flex flex-col items-center p-2 text-pink-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[c.jsx(hl,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Parto"})]})," "]}),(We==="Cabrita"||We==="Cabrito")&&!ie.weaningDate&&!ie.isReference&&ie.status==="Activo"&&c.jsxs("button",{onClick:()=>G(!0),className:"flex flex-col items-center p-2 text-yellow-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(gce,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Destetar"})]}),c.jsxs("button",{onClick:()=>n({name:"growth-profile",animalId:ie.id}),className:"flex flex-col items-center p-2 text-brand-green hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(md,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Peso"})]}),c.jsxs("button",{onClick:()=>alert("Función en desarrollo"),disabled:ie.isReference||ie.status!=="Activo",className:"flex flex-col items-center p-2 text-teal-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[c.jsx(pp,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Sanidad"})]}),c.jsxs("button",{onClick:()=>ie.isReference?ee(!0):D(!0),className:"flex flex-col items-center p-2 text-brand-blue hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(Uce,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Mover"})]}),ie.status==="Activo"&&!ie.isReference&&c.jsxs("button",{onClick:()=>Q(!0),className:"flex flex-col items-center p-2 text-amber-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(Gl,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Dar de baja"})]}),c.jsxs("button",{onClick:()=>g(!m),className:`flex flex-col items-center p-2 w-full rounded-lg transition-colors ${m?"text-green-400":"text-brand-orange"} hover:bg-zinc-700/50`,children:[c.jsx(kf,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Editar"})]})]})]}),c.jsxs("main",{className:"p-4 space-y-4",children:[c.jsxs("div",{className:"flex bg-brand-glass rounded-xl p-1 border border-brand-border",children:[c.jsx("button",{onClick:()=>h("main"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${p==="main"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Ficha"}),c.jsx("button",{onClick:()=>h("genetics"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${p==="genetics"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Genealogía"}),c.jsx("button",{onClick:()=>h("progeny"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${p==="progeny"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Progenie"}),c.jsx("button",{onClick:()=>h("events"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${p==="events"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Eventos"})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border min-h-[200px]",children:[p==="main"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx(fze,{animal:ie,isEditing:m,editedData:v,setEditedData:y,origins:a,onAddOriginClick:()=>j(!0),onLocationClick:()=>D(!0)}),m&&c.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-700",children:[c.jsx("h3",{className:"text-sm font-medium text-zinc-400",children:"Padres (Opcional)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>fe(!0),className:"w-full text-left bg-zinc-700 border border-zinc-600 rounded-xl p-3 text-white placeholder-zinc-500 flex justify-between items-center",children:[c.jsxs("span",{className:v.fatherId?"text-white":"text-zinc-500",children:["Padre: ",v.fatherId?ur(he.find(tt=>tt.id===v.fatherId))||v.fatherId:"Seleccionar..."]}),c.jsx(hu,{size:18,className:"text-zinc-400"})]}),c.jsx("button",{type:"button",onClick:()=>we("father"),className:"p-3 bg-zinc-700 border border-zinc-600 rounded-xl text-brand-orange hover:bg-brand-orange/20 flex-shrink-0",children:c.jsx(qi,{size:20})})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>_e(!0),className:"w-full text-left bg-zinc-700 border border-zinc-600 rounded-xl p-3 text-white placeholder-zinc-500 flex justify-between items-center",children:[c.jsxs("span",{className:v.motherId?"text-white":"text-zinc-500",children:["Madre: ",v.motherId?ur(Me.find(tt=>tt.id===v.motherId))||v.motherId:"Seleccionar..."]}),c.jsx(hu,{size:18,className:"text-zinc-400"})]}),c.jsx("button",{type:"button",onClick:()=>we("mother"),className:"p-3 bg-zinc-700 border border-zinc-600 rounded-xl text-brand-orange hover:bg-brand-orange/20 flex-shrink-0",children:c.jsx(qi,{size:20})})]})]}),m&&c.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-zinc-700",children:[c.jsxs("button",{onClick:ft,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2",children:[c.jsx(Xl,{size:18})," Cancelar"]}),c.jsxs("button",{onClick:Ot,disabled:b!=="idle",className:"bg-brand-green hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:opacity-50 min-w-[130px] justify-center",children:[b==="saving"&&c.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"}),b==="success"&&c.jsx(Za,{size:18}),b==="idle"&&c.jsx(tv,{size:18}),c.jsx("span",{className:"ml-2",children:b==="success"?"Guardado":"Guardar"})]})]})]}),p==="genetics"&&c.jsx(lze,{onOpenModal:()=>oe(!0)}),p==="progeny"&&c.jsx(dze,{offspring:He,navigateTo:n}),p==="events"&&c.jsx(uze,{animal:ie})]})]})]}),c.jsx(cn,{isOpen:O,onClose:()=>D(!1),title:`Cambiar Lote para ${ur(ie)}`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar nuevo lote"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(JX,{value:M,onChange:tt=>L(tt.target.value),children:[c.jsx("option",{value:"",children:"Sin Asignar"}),i.map(tt=>c.jsx("option",{value:tt.name,children:tt.name},tt.id))]}),c.jsx("button",{type:"button",onClick:()=>{D(!1),C(!0)},className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(ol,{size:24})})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{onClick:()=>D(!1),className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsx("button",{onClick:ut,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Cambio"})]})]})}),c.jsx(mu,{isOpen:V,onClose:()=>Q(!1),title:"Causa de la Baja",actions:at}),Y&&ie&&c.jsx(y_,{isOpen:!!Y,animal:ie,onCancel:()=>J(null),onConfirm:Dt,reason:Y}),c.jsx(mu,{isOpen:q,onClose:()=>ee(!1),title:"Acciones de Referencia",actions:vt}),c.jsx(vv,{isOpen:le,onClose:()=>se(!1),onConfirm:Qt,title:`¿Eliminar ${ur(ie)} Permanentemente?`,message:"Esta acción borrará el registro del animal de la base de datos para siempre y no se puede deshacer."}),c.jsx(XFe,{isOpen:A,onClose:()=>C(!1)}),c.jsx(QFe,{isOpen:T,onClose:()=>j(!1)}),c.jsx(Cp,{isOpen:E,onClose:()=>k(!1),motherId:ie.id}),c.jsxs(cn,{isOpen:$,onClose:()=>G(!1),title:`Registrar Destete de ${ur(ie)}`,children:[" ",c.jsx(JFe,{animalId:ie.id,birthDate:ie.birthDate,onSave:Ft,onCancel:()=>G(!1)})," "]}),c.jsx(nze,{isOpen:te,onClose:()=>oe(!1),animalId:ie.id,navigateTo:n}),c.jsx(l5,{isOpen:ge,onClose:()=>_e(!1),onSelect:tt=>{y(zt=>({...zt,motherId:tt})),_e(!1)},animals:Me,title:"Seleccionar Madre",filterSex:"Hembra"}),c.jsx(l5,{isOpen:Ce,onClose:()=>fe(!1),onSelect:tt=>{y(zt=>({...zt,fatherId:tt})),fe(!1)},animals:he,title:"Seleccionar Padre",filterSex:"Macho"}),be&&c.jsx(oze,{type:be,onClose:()=>we(null),onSave:sn})]})}const pze=({animal:t,parturition:e,onSelectAnimal:n})=>c.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate).toLocaleDateString()}`,e.status==="seca"&&"Lactancia finalizada"]})]}),c.jsx(Wi,{className:"text-zinc-600"})]});function mze({onSelectAnimal:t,defaultView:e="drying"}){const{animals:n,parturitions:r,isLoading:i}=Xt(),[a,s]=I.useState(e);I.useEffect(()=>{s(e)},[e]);const o=I.useMemo(()=>{const u=p=>n.find(h=>h.id===p),d=r.filter(p=>p.status==="en-secado").map(p=>({animal:u(p.goatId),parturition:p})).filter(p=>p.animal),f=r.filter(p=>p.status==="seca").map(p=>({animal:u(p.goatId),parturition:p})).filter(p=>p.animal);return{drying:d,dry:f}},[n,r]),l=o[a]||[];return i?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsxs("header",{className:"text-center pt-8 pb-4",children:[c.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Gestión de Rebaño"}),c.jsx("p",{className:"text-xl text-zinc-400",children:"Animales por Estado de Lactancia"})]}),c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border flex justify-between items-center",children:c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[c.jsxs("button",{onClick:()=>s("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${a==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",o.drying.length,")"]}),c.jsxs("button",{onClick:()=>s("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${a==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",o.dry.length,")"]})]})}),c.jsx("div",{className:"space-y-2",children:l.length>0?l.map(({animal:u,parturition:d})=>c.jsx(pze,{animal:u,parturition:d,onSelectAnimal:t},d.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function gze({onBack:t}){const{lots:e,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,addLot:o,deleteLot:l,updateAnimal:u}=Xt(),[d,f]=I.useState(""),[p,h]=I.useState(!1),[m,g]=I.useState(null),[v,y]=I.useState(""),b=I.useMemo(()=>{const j=new Map;return n.forEach(E=>{const k=E.location||"Sin Asignar";j.set(k,(j.get(k)||0)+1)}),e.map(E=>({...E,animalCount:j.get(E.name)||0})).sort((E,k)=>E.name.localeCompare(k.name))},[e,n]),S=async()=>{if(d.trim()!==""){y("");try{await o({name:d,parentLotId:void 0}),f("")}catch(j){y(j.message||"No se pudo crear el lote.")}}},A=async(j,E)=>{var k;if(E>0){y(`No se puede eliminar "${(k=e.find(O=>O.id===j))==null?void 0:k.name}". Reasigne los ${E} animales primero.`);return}if(y(""),window.confirm("¿Estás seguro de que quieres eliminar este lote? Esta acción no se puede deshacer."))try{await l(j)}catch(O){y(O.message||"No se pudo eliminar el lote.")}},C=j=>{g(j),h(!0)},T=async j=>{if(!m)return;const E=j.map(k=>u(k,{location:m}));await Promise.all(E),h(!1),g(null)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestionar Lotes Físicos"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Crea ubicaciones y asigna animales"})]}),c.jsx("div",{className:"w-8"})]}),c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Añadir Nuevo Lote"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:d,onChange:j=>f(j.target.value),placeholder:"Nombre del lote...",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),c.jsx("button",{onClick:S,className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(qi,{size:24})})]}),v&&c.jsx("p",{className:"text-sm text-brand-red text-center",children:v})]})}),c.jsxs("div",{className:"space-y-2 pt-4 px-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-2",children:"Lotes Existentes"}),b.length>0?b.map(j=>c.jsxs("div",{className:"w-full text-left bg-brand-glass rounded-2xl p-4 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:j.name}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[j.animalCount," ",j.animalCount===1?"animal":"animales"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>C(j.name),className:"flex items-center gap-2 bg-zinc-700/80 text-white font-semibold py-2 px-3 rounded-lg hover:bg-zinc-600/80 transition-colors",children:[c.jsx(pu,{size:16})," Asignar"]}),c.jsx("button",{onClick:()=>A(j.id,j.animalCount),className:"p-2 text-zinc-500 hover:text-brand-red transition-colors",children:c.jsx(Yl,{size:18})})]})]},j.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"Aún no has creado ningún lote."})})]})]}),c.jsx(g_,{isOpen:p,onClose:()=>h(!1),onSelect:T,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,title:`Asignar animales a: ${m}`})]})}const vze=({onSave:t,onCancel:e,editingLot:n})=>{const{fathers:r,addFather:i}=Xt(),[a,s]=I.useState(""),[o,l]=I.useState(!1),[u,d]=I.useState(null),[f,p]=I.useState(!1);I.useEffect(()=>{n&&n.sireId?s(n.sireId):s("")},[n]);const h=async v=>{await i(v),s(v.id),l(!1)},m=async v=>{if(v.preventDefault(),d(null),!a){d("Debes seleccionar un semental.");return}p(!0);try{await t(a)}catch(y){d("No se pudo guardar el lote."),console.error(y),p(!1)}},g=n?f?"Actualizando...":"Guardar Cambios":f?"Creando...":"Crear Lote";return c.jsxs(c.Fragment,{children:[c.jsxs("form",{onSubmit:m,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"sire",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar Semental"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{id:"sire",value:a,onChange:v=>s(v.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl font-mono text-white",required:!0,disabled:!!n,children:[c.jsx("option",{value:"",children:"Elegir reproductor..."}),r.map(v=>c.jsx("option",{value:v.id,children:ur(v)},v.id))]}),c.jsx("button",{type:"button",onClick:()=>l(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(qi,{size:24})})]})]}),u&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(mr,{size:18}),c.jsx("span",{children:u})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:f||!a,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:g})]})]}),c.jsx(nD,{isOpen:o,onClose:()=>l(!1),onSave:h})]})},yze=({isOpen:t,onClose:e,femalesToTransfer:n,originSeasonId:r,onConfirmTransfer:i})=>{const{animals:a,breedingSeasons:s,sireLots:o}=Xt(),[l,u]=I.useState(new Set),[d,f]=I.useState(""),[p,h]=I.useState(!1),[m,g]=I.useState("");I.useEffect(()=>{t&&(u(new Set(n)),f(""),g(""))},[t,n]);const v=I.useMemo(()=>s.find(C=>C.id===r),[s,r]),y=I.useMemo(()=>s.filter(C=>C.id!==r&&C.status==="Activo"),[s,r]),b=I.useMemo(()=>{const C=new Map(a.map(T=>[T.id,T]));return n.map(T=>C.get(T)).filter(T=>!!T).sort((T,j)=>T.id.localeCompare(j.id))},[n,a]),S=C=>{u(T=>{const j=new Set(T);return j.has(C)?j.delete(C):j.add(C),j})},A=async()=>{if(!d){g("Debes seleccionar una temporada de destino.");return}if(!o.some(T=>T.seasonId===d)){g("La temporada de destino no tiene lotes de reproductor. Crea uno primero.");return}if(l.size===0){g("Debes seleccionar al menos una hembra para transferir.");return}h(!0),g("");try{await i(d,Array.from(l)),h(!1),e()}catch(T){g(T.message||"Error al transferir los animales."),console.error("Error transferring animals:",T),h(!1)}};return t?c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-50 animate-fade-in p-4",onClick:e,children:c.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-lg rounded-2xl flex flex-col animate-slide-up max-h-[90vh]",onClick:C=>C.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 p-4 border-b border-brand-border",children:[c.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Transferir Animales"}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Desde la Temporada: ",(v==null?void 0:v.name)||"Cargando..."]})]}),c.jsxs("main",{className:"p-6 space-y-4 overflow-y-auto",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:["Animales a transferir (",l.size,"/",b.length,")"]}),c.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 p-2 bg-black/20 rounded-lg border border-zinc-700",children:b.length>0?b.map(C=>{const T=C.name?String(C.name).toUpperCase().trim():"";return c.jsxs("div",{onClick:()=>S(C.id),className:"flex items-center gap-3 p-2 rounded-md hover:bg-zinc-700 cursor-pointer transition-colors",children:[l.has(C.id)?c.jsx(pS,{className:"text-brand-orange flex-shrink-0"}):c.jsx(mS,{className:"text-zinc-500 flex-shrink-0"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:C.id.toUpperCase()}),T&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:T})]})]},C.id)}):c.jsx("p",{className:"text-sm text-zinc-500 text-center py-2",children:"No hay animales para transferir."})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"destination",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Transferir a la Temporada:"}),c.jsxs("select",{id:"destination",value:d,onChange:C=>f(C.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-white appearance-none",children:[c.jsx("option",{value:"",children:"Seleccionar temporada de destino..."}),y.map(C=>c.jsxs("option",{value:C.id,children:[C.name," (Activa)"]},C.id))]})]}),m&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(mr,{size:18}),c.jsx("span",{children:m})]})]}),c.jsxs("footer",{className:"flex-shrink-0 flex justify-end gap-4 p-4 border-t border-brand-border",children:[c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsx("button",{onClick:A,disabled:p||l.size===0||!d,className:"px-5 py-2 bg-brand-blue hover:bg-blue-700 text-white font-bold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Transfiriendo...":`Transferir ${l.size} Animal(es)`})]})]})}):null},bze=({sireName:t,animalCount:e,dragControls:n})=>c.jsxs("div",{className:"w-full p-4 flex items-center",children:[c.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:r=>n.start(r),children:c.jsx(iT,{className:"text-zinc-500"})}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[c.jsx(Db,{})," Lote: ",t]}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1 flex items-center gap-2",children:[c.jsx(pu,{size:14})," ",e," ",e===1?"hembra asignada":"hembras asignadas"]})]}),c.jsx(Wi,{className:"text-zinc-600"})]}),xze=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i})=>{const a=vp(),s=I.useRef(!1),o=(l,u)=>{const d=u.offset.x,f=u.velocity.x;Math.abs(d)<2&&Math.abs(f)<100||(d<-160/2||f<-500?a.start({x:-160}):a.start({x:0})),setTimeout(()=>{s.current=!1},100)};return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[c.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[c.jsxs("button",{onClick:e,onPointerDown:l=>l.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(kf,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),c.jsxs("button",{onClick:n,onPointerDown:l=>l.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[c.jsx(Yl,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),c.jsx(Ui.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{s.current=!0},onDragEnd:o,onTap:()=>{s.current||r()},animate:a,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:c.jsx(bze,{sireName:t.sireName,animalCount:t.animalCount,dragControls:i})})]})},wze=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=HT();return c.jsx(qT,{value:t,dragListener:!1,dragControls:i,children:c.jsx(xze,{lot:t,dragControls:i,onClick:()=>e({name:"sire-lot-detail",lotId:t.id}),onEdit:()=>n(t),onDelete:()=>r(t)})},t.id)};function Sze({seasonId:t,onBack:e,navigateTo:n}){const{breedingSeasons:r,sireLots:i,fathers:a,animals:s,serviceRecords:o,addSireLot:l,updateSireLot:u,deleteSireLot:d,updateAnimal:f}=Xt(),[p,h]=I.useState(!1),[m,g]=I.useState(void 0),[v,y]=I.useState(null),[b,S]=I.useState(null),[A,C]=I.useState(!1),[T,j]=I.useState(null),E=I.useMemo(()=>r.find(q=>q.id===t),[r,t]),k=I.useMemo(()=>i.filter(q=>q.seasonId===t).map(q=>{const ee=a.find($=>$.id===q.sireId),le=ee?ur(ee):"Desconocido",se=s.filter($=>$.sireLotId===q.id).length;return{...q,sireName:le,animalCount:se,sireId:q.sireId}}),[i,t,a,s]),[O,D]=I.useState(k);I.useEffect(()=>{D(k)},[k]);const M=I.useMemo(()=>{if(!E||E.status!=="Cerrado")return[];const q=new Set(k.map(se=>se.id)),ee=s.filter(se=>se.sireLotId&&q.has(se.sireLotId)),le=new Set(o.filter(se=>se.sireLotId&&q.has(se.sireLotId)).map(se=>se.femaleId));return ee.filter(se=>!le.has(se.id))},[E,k,s,o]),L=q=>{g(q),h(!0)},V=async q=>{m?await u(m.id,{sireId:q}):await l({seasonId:t,sireId:q}),h(!1),g(void 0)},Q=q=>{q.animalCount>0?S(`No se puede eliminar. Reasigna las ${q.animalCount} hembra(s) a otro lote primero.`):y(q)},Y=()=>{v&&(d(v.id),y(null))},J=async(q,ee)=>{j(null);const le=i.find($=>$.seasonId===q);if(!le){j("La temporada de destino no tiene lotes de reproductor. Por favor, crea uno primero."),C(!1);return}const se=ee.map($=>f($,{sireLotId:le.id,reproductiveStatus:"En Servicio"}));await Promise.all(se),C(!1)};return E?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:E.name}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de la Temporada"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"space-y-4 px-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Lotes de Reproductor"}),c.jsxs("button",{onClick:()=>L(),className:"flex items-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[c.jsx(qi,{size:16})," Añadir Lote"]})]}),O.length>0?c.jsx(WT,{as:"div",axis:"y",values:O,onReorder:D,className:"space-y-3",children:O.map(q=>c.jsx(wze,{lot:q,navigateTo:n,onEdit:L,onDelete:Q},q.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"Esta temporada aún no tiene lotes de reproductor."})})]}),E.status==="Cerrado"&&c.jsxs("div",{className:"space-y-4 px-4 pt-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Resultados: Hembras sin Servicio"}),M.length>0&&c.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 px-3 rounded-lg text-sm",children:[c.jsx(KH,{size:16})," Transferir"]})]}),c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-2",children:M.length>0?M.map(q=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/20 rounded-md",children:[c.jsx("span",{className:"font-semibold text-white",children:ur(q)}),c.jsxs("span",{className:"text-xs text-zinc-400",children:["Lote Físico: ",q.location||"N/A"]})]},q.id)):c.jsxs("div",{className:"text-center py-6 flex flex-col items-center gap-2",children:[c.jsx($ce,{size:32,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-400 font-semibold",children:"Todas las hembras tuvieron servicio en esta temporada."})]})})]})]}),c.jsx(cn,{isOpen:p,onClose:()=>{h(!1),g(void 0)},title:m?`Editar Lote de ${m.sireName}`:"Añadir Lote de Reproductor",children:c.jsx(vze,{onSave:V,onCancel:()=>{h(!1),g(void 0)},editingLot:m,seasonId:E.id})}),c.jsx(vv,{isOpen:!!v,onClose:()=>y(null),onConfirm:Y,title:`Eliminar Lote de ${v==null?void 0:v.sireName}`,message:"¿Estás seguro de que quieres eliminar este lote? Esta acción es irreversible."}),c.jsx(cn,{isOpen:!!b,onClose:()=>S(null),title:"Acción no permitida",children:c.jsxs("div",{className:"space-y-4 text-center",children:[" ",c.jsx(mr,{size:40,className:"mx-auto text-amber-400"})," ",c.jsx("p",{className:"text-zinc-300",children:b})," ",c.jsx("button",{onClick:()=>S(null),className:"mt-4 bg-brand-orange text-white font-semibold py-2 px-6 rounded-lg",children:"Entendido"})," "]})}),c.jsx(cn,{isOpen:!!T,onClose:()=>j(null),title:"Error de Transferencia",children:c.jsxs("div",{className:"space-y-4 text-center",children:[" ",c.jsx(mr,{size:40,className:"mx-auto text-amber-400"})," ",c.jsx("p",{className:"text-zinc-300",children:T})," ",c.jsx("button",{onClick:()=>j(null),className:"mt-4 bg-brand-orange text-white font-semibold py-2 px-6 rounded-lg",children:"Entendido"})," "]})}),c.jsx(yze,{isOpen:A,onClose:()=>C(!1),femalesToTransfer:M.map(q=>q.id),originSeasonId:E.id,onConfirmTransfer:J})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada no encontrada."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const _ze=(t,e,n,r,i)=>{if(!t||t.status!=="Activo"||t.isReference)return[];const a=[];if(t.sex==="Hembra"){const o=e.filter(l=>l.goatId===t.id&&l.status!=="finalizada").sort((l,u)=>new Date(u.parturitionDate).getTime()-new Date(l.parturitionDate).getTime())[0];o&&(o.status==="activa"?a.push(Tr.MILKING):o.status==="en-secado"?a.push(Tr.DRYING_OFF):o.status==="seca"&&a.push(Tr.DRY))}if(t.reproductiveStatus==="Preñada"?a.push(Tr.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(l=>l.femaleId===t.id&&l.sireLotId===t.sireLotId)?a.push(Tr.IN_SERVICE_CONFIRMED):a.push(Tr.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push(Tr.EMPTY),t.sex==="Macho"){const o=i.filter(d=>d.status==="Activo"),l=new Set(o.map(d=>d.id));r.some(d=>d.sireId===t.id&&l.has(d.seasonId))&&a.push(Tr.SIRE_IN_SERVICE)}return Array.from(new Set(a.map(o=>o.key))).map(o=>Tr[o]).filter(Boolean)};function Aze({lotId:t,navigateTo:e,onBack:n}){const{sireLots:r,fathers:i,animals:a,parturitions:s,serviceRecords:o,breedingSeasons:l,updateAnimal:u,addServiceRecord:d,startDryingProcess:f,setLactationAsDry:p}=Xt(),[h,m]=I.useState(!1),[g,v]=I.useState(""),[y,b]=I.useState(null),[S,A]=I.useState(!1),[C,T]=I.useState(null),[j,E]=I.useState(null),[k,O]=I.useState(null),[D,M]=I.useState([]),[L,V]=I.useState("corporal"),Q=I.useMemo(()=>r.find(ie=>ie.id===t),[r,t]),Y=I.useMemo(()=>{if(!Q)return;const ie=i.find(He=>He.id===Q.sireId);return ie?{...ie,isReference:!0}:a.find(He=>He.id===Q.sireId)},[i,a,Q]),J=I.useMemo(()=>Y?ur(Y):"Desconocido",[Y]),q=I.useMemo(()=>Q?a.filter(ie=>ie.sireLotId===Q.id&&!ie.isReference).sort((ie,He)=>ie.id.localeCompare(He.id)).map(ie=>({...ie,formattedAge:Lc(ie.birthDate),statusObjects:_ze(ie,s,o,r,l)})):[],[a,Q,s,o,r,l]),ee=I.useMemo(()=>{if(!g)return q;const ie=g.toLowerCase();return q.filter(He=>ur(He).toLowerCase().includes(ie))},[q,g]),le=async ie=>{if(!Q)return;const He=ie.map(Me=>u(Me,{sireLotId:Q.id,reproductiveStatus:"En Servicio"}));await Promise.all(He),m(!1)},se=async ie=>{!Q||!y||(await d({sireLotId:Q.id,femaleId:y.id,serviceDate:ie.toISOString().split("T")[0]}),oe())},$=ie=>{if(!ie)return[];const He=[];return He.push({label:"Registrar Servicio",icon:hS,onClick:()=>{A(!1),T("service")},color:"text-pink-400"}),He.push({label:"Declarar Parto",icon:hl,onClick:()=>{A(!1),T("parturition")}}),He.push({label:"Declarar Aborto",icon:xf,onClick:()=>{A(!1),T("abortion")},color:"text-yellow-400"}),He.push({label:"Acciones de Leche",icon:bf,onClick:()=>{A(!1),T("milkWeighingAction")}}),He.push({label:"Acciones de Peso",icon:md,onClick:()=>{A(!1),T("bodyWeighingAction")}}),He.push({label:"Dar de Baja",icon:Gl,onClick:()=>{A(!1),T("decommissionSheet")},color:"text-brand-red"}),He},G=[{label:"Por Venta",icon:pl,onClick:()=>{E("Venta"),T("decommission")}},{label:"Por Muerte",icon:xf,onClick:()=>{E("Muerte"),T("decommission")},color:"text-brand-red"},{label:"Por Descarte",icon:cS,onClick:()=>{E("Descarte"),T("decommission")},color:"text-brand-red"}],te=ie=>{b(ie),A(!0)},oe=()=>{T(null),b(null),O(null),M([]),E(null)},ge=async ie=>{if(!y)return;const He={status:ie.reason,isReference:!0,endDate:ie.date};ie.reason==="Venta"&&Object.assign(He,{salePrice:ie.salePrice,saleBuyer:ie.saleBuyer,salePurpose:ie.salePurpose}),ie.reason==="Muerte"&&(He.deathReason=ie.deathReason),ie.reason==="Descarte"&&Object.assign(He,{cullReason:ie.cullReason,cullReasonDetails:ie.cullReasonDetails}),await u(y.id,He),oe()},_e=(ie,He)=>{O(ie),T(He==="leche"?"logSimpleMilk":"logSimpleBody")},Ce=ie=>{V(ie),T(ie==="leche"?"newMilkSession":"newBodySession")},fe=async()=>{y&&(await u(y.id,{reproductiveStatus:"En Servicio"}),oe())},be=(ie,He)=>{M(He),T("bulkWeighing")},we=()=>{oe()};return Q?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4 sticky top-0 bg-brand-dark/80 backdrop-blur-lg z-10 border-b border-brand-border",children:[c.jsx("button",{onClick:n,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow min-w-0",children:[c.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white truncate",children:["Lote: ",c.jsx("span",{className:"font-mono",children:J})]}),c.jsxs("p",{className:"text-xs text-zinc-400 truncate",children:["Reproductor: ",Y?ur(Y):"Desconocido"]})]}),c.jsx("button",{onClick:()=>m(!0),className:"p-2 -mr-2 bg-brand-orange hover:bg-orange-600 text-white rounded-full transition-colors",children:c.jsx(qi,{size:24})})]}),c.jsxs("div",{className:"space-y-4 pt-4 px-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300",children:["Hembras Asignadas (",ee.length,")"]}),c.jsxs("div",{className:"relative w-40",children:[c.jsx(hu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),c.jsx("input",{type:"search",value:g,onChange:ie=>v(ie.target.value),placeholder:"Buscar ID o Nombre...",className:"w-full bg-zinc-800/80 rounded-lg pl-8 pr-2 py-1 text-white border-transparent focus:border-brand-amber focus:ring-0 text-sm"})]})]}),c.jsx("div",{className:"space-y-4",children:ee.length>0?ee.map(ie=>c.jsx(tD,{animal:ie,onSelect:He=>e({name:"rebano-profile",animalId:He}),onOpenActions:te},ie.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:g?"No se encontraron coincidencias.":"Aún no has asignado hembras a este lote."})})})]})]}),c.jsx(g_,{isOpen:h,onClose:()=>m(!1),onSelect:le,animals:a,parturitions:s,serviceRecords:o,breedingSeasons:l,sireLots:r,title:`Asignar Hembras al Lote de ${J}`,sireIdForInbreedingCheck:Q.sireId}),c.jsx(mu,{isOpen:S,onClose:()=>A(!1),title:`Acciones para ${ur(y)}`,actions:$(y)}),c.jsx(mu,{isOpen:C==="decommissionSheet",onClose:oe,title:"Causa de la Baja",actions:G}),y&&c.jsxs(c.Fragment,{children:[C==="service"&&c.jsx(xD,{isOpen:!0,onClose:oe,onSave:se,animal:y}),C==="parturition"&&c.jsx(Cp,{isOpen:!0,onClose:oe,motherId:y.id}),C==="abortion"&&c.jsx(vD,{animal:y,onCancel:oe,onSaveSuccess:oe}),C==="decommission"&&j&&c.jsx(y_,{isOpen:C==="decommission",animal:y,onCancel:oe,onConfirm:ge,reason:j}),C==="milkWeighingAction"&&c.jsx(mD,{isOpen:!0,animal:y,onClose:oe,onLogToSession:ie=>_e(ie,"leche"),onStartNewSession:()=>Ce("leche"),onStartDrying:f,onSetDry:p}),C==="bodyWeighingAction"&&c.jsx(gD,{isOpen:!0,animal:y,onClose:oe,onLogToSession:ie=>_e(ie,"corporal"),onStartNewSession:()=>Ce("corporal"),onSetReadyForMating:fe}),C==="logSimpleMilk"&&k&&c.jsx(cn,{isOpen:!0,onClose:oe,title:`Añadir Pesaje Leche: ${ur(y)}`,children:c.jsx(Vg,{animalId:y.id,weightType:"leche",onSaveSuccess:oe,onCancel:oe,sessionDate:k})}),C==="logSimpleBody"&&k&&c.jsx(cn,{isOpen:!0,onClose:oe,title:`Añadir Peso Corporal: ${ur(y)}`,children:c.jsx(Vg,{animalId:y.id,weightType:"corporal",onSaveSuccess:oe,onCancel:oe,sessionDate:k})}),(C==="newMilkSession"||C==="newBodySession")&&c.jsx(bD,{weightType:L,onBack:oe,onAnimalsSelected:be}),C==="bulkWeighing"&&c.jsx(cn,{isOpen:!0,onClose:oe,title:`Carga Masiva - ${L==="leche"?"Leche":"Corporal"}`,size:"fullscreen",children:c.jsx(yD,{weightType:L,animalsToWeigh:D,onSaveSuccess:we,onCancel:oe})})]})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Lote de Reproductor no encontrado."}),c.jsx("button",{onClick:n,className:"mt-4 text-brand-orange",children:"Volver"})]})}const Cze=t=>{const[e,n]=I.useState([]),[r,i]=I.useState([]),[a,s]=I.useState(!0);return I.useEffect(()=>{if(!t)return;(async()=>{s(!0);try{const u=Zn(),[d,f]=await Promise.all([u.weighings.where("goatId").equals(t).toArray(),u.parturitions.where("goatId").equals(t).toArray()]);n(d),i(f.sort((p,h)=>new Date(p.parturitionDate).getTime()-new Date(h.parturitionDate).getTime()))}catch(u){console.error(`Error al cargar datos para ${t}:`,u)}finally{s(!1)}})()},[t]),{...I.useMemo(()=>{if(r.length===0)return{allLactations:[],parturitionIntervals:[],lastWeighingDate:null};const l=r.map((f,p)=>{const h=new Date(f.parturitionDate),m=p<r.length-1?new Date(r[p+1].parturitionDate):new Date(9999,11,31),g=e.filter(T=>{const j=new Date(T.date);return j>=h&&j<m}),v=g.map(T=>({del:Ff(f.parturitionDate,T.date),kg:T.kg})).sort((T,j)=>T.del-j.del),y=g.reduce((T,j)=>T+j.kg,0),b=g.length>0?y/g.length:0,S=v.reduce((T,j)=>j.kg>T.kg?j:T,{kg:0,del:0}),A=v[v.length-1],C=A?A.del:0;return{parturitionDate:f.parturitionDate,weighings:g,lactationCurve:v,averageProduction:b,peakProduction:S,totalDays:C}}),u=r.slice(1).map((f,p)=>{const h=r[p],m=new Date(f.parturitionDate).getTime()-new Date(h.parturitionDate).getTime();return{period:`${h.parturitionDate.substring(0,4)} - ${f.parturitionDate.substring(0,4)}`,days:Math.round(m/(1e3*60*60*24))}}),d=e.sort((f,p)=>new Date(p.date).getTime()-new Date(f.date).getTime())[0];return{allLactations:l,parturitionIntervals:u,lastWeighingDate:(d==null?void 0:d.date)||null}},[e,r]),isLoading:a}},i1=(t,e,n)=>{const r={};return t.forEach(i=>{const a=e.filter(o=>o.goatId===i.goatId&&new Date(i.date)>=new Date(o.parturitionDate)).sort((o,l)=>new Date(l.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];if(!a)return;const s=Ff(a.parturitionDate,i.date);n!==void 0&&s>n||(r[s]||(r[s]={totalKg:0,count:0}),r[s].totalKg+=i.kg,r[s].count++)}),Object.entries(r).map(([i,a])=>({del:parseInt(i),kg:a.totalKg/a.count})).sort((i,a)=>i.del-a.del)},a1=(t,e)=>{let n=0,r=0;return t.forEach(i=>{const a=e.filter(s=>s.goatId===i).sort((s,o)=>new Date(s.parturitionDate).getTime()-new Date(o.parturitionDate).getTime());for(let s=1;s<a.length;s++){const o=a[s],l=a[s-1];if(l.dryingStartDate){const u=new Date(l.dryingStartDate),f=new Date(o.parturitionDate).getTime()-u.getTime(),p=Math.round(f/(1e3*60*60*24));p>=0&&(n+=p,r++)}}}),r===0?null:n/r},jze=(t,e,n,r)=>{const[i,a]=I.useState(null),[s,o]=I.useState(!1);return I.useEffect(()=>{if(!t.type||!t.animal){a(null),o(!1);return}const{type:l,animal:u,highlightedLactationDEL:d}=t;(async()=>{o(!0),a(null);let p=null;try{if(l==="PRIMIPARAS_AVG"||l==="MULTIPARAS_AVG"||l==="HERD_AVG"){const h=n.reduce((A,C)=>(A[C.goatId]=(A[C.goatId]||0)+1,A),{}),m=n.filter(A=>{const C=h[A.goatId]||0;return l==="PRIMIPARAS_AVG"?C===1:l==="MULTIPARAS_AVG"?C>1:!0}),g=new Set(m.map(A=>A.goatId)),v=r.filter(A=>g.has(A.goatId)),y=i1(v,m,d),b=a1(g,n);p={name:l==="PRIMIPARAS_AVG"?"Prom. Primíparas":l==="MULTIPARAS_AVG"?"Prom. Multíparas":"Prom. Rebaño",curve:y,averageRestInterval:b}}else if(l==="PEERS_AVG"){const h=new Date(u.birthDate),m=h.getFullYear(),g=Math.floor(h.getMonth()/6),v=new Set(e.filter(T=>{const j=new Date(T.birthDate);return j.getFullYear()===m&&Math.floor(j.getMonth()/6)===g&&T.id!==u.id}).map(T=>T.id)),y=new Set(n.filter(T=>v.has(T.goatId)).map(T=>T.goatId)),b=n.filter(T=>y.has(T.goatId)),S=r.filter(T=>y.has(T.goatId)),A=i1(S,b,d),C=a1(y,n);p={name:`Prom. Pares (${m}-S${g+1})`,curve:A,averageRestInterval:C}}else if(l==="DAM")if(u.motherId){const h=n.filter(y=>y.goatId===u.motherId),m=r.filter(y=>y.goatId===u.motherId),g=i1(m,h,d),v=a1(new Set([u.motherId]),n);p={name:`Prom. Madre (${u.motherId})`,curve:g,averageRestInterval:v}}else p={name:"Madre (Desconocida)",curve:[],averageRestInterval:null};else if(l==="PROGENY_AVG"){const h=new Set(e.filter(b=>b.motherId===u.id&&b.sex==="Hembra").map(b=>b.id)),m=n.filter(b=>h.has(b.goatId)),g=r.filter(b=>h.has(b.goatId)),v=i1(g,m,d),y=a1(h,n);p={name:"Prom. Hijas",curve:v,averageRestInterval:y}}else if(l==="SPECIFIC_LACTATION"&&t.specificLactationIndex!==void 0){const h=n.filter(g=>g.goatId===u.id).sort((g,v)=>new Date(g.parturitionDate).getTime()-new Date(v.parturitionDate).getTime());let m=null;if(t.specificLactationIndex>0&&t.specificLactationIndex<h.length){const g=h[t.specificLactationIndex-1];if(g.dryingStartDate){const v=new Date(g.dryingStartDate),b=new Date(h[t.specificLactationIndex].parturitionDate).getTime()-v.getTime();m=Math.round(b/(1e3*60*60*24))}}if(t.specificLactationIndex<h.length){const g=h[t.specificLactationIndex],v=t.specificLactationIndex+1<h.length?new Date(h[t.specificLactationIndex+1].parturitionDate):new Date(9999,11,31),b=r.filter(A=>{const C=new Date(A.date);return A.goatId===u.id&&C>=new Date(g.parturitionDate)&&C<v}).map(A=>({del:Ff(g.parturitionDate,A.date),kg:A.kg})).sort((A,C)=>A.del-C.del);p={name:`Lact. ${new Date(g.parturitionDate).getFullYear()} (#${t.specificLactationIndex+1})`,curve:b,averageRestInterval:m}}else p={name:"Lactancia no encontrada",curve:[],averageRestInterval:null}}}catch(h){console.error("Error calculating comparison data:",h),p={name:"Error",curve:[],averageRestInterval:null}}finally{a(p),o(!1)}})()},[t,e,n,r]),{comparativeData:i,isLoading:s}},s1=[{stroke:"#FF9500",fill:"url(#gradient0)"},{stroke:"#34C759",fill:"url(#gradient1)"},{stroke:"#007AFF",fill:"url(#gradient2)"},{stroke:"#AF52DE",fill:"url(#gradient3)"},{stroke:"#FF3B30",fill:"url(#gradient4)"},{stroke:"#5AC8FA",fill:"url(#gradient5)"},{stroke:"#FFCC00",fill:"url(#gradient6)"}],PC="#007AFF",LF="comparisonGradient",Nze=({active:t,payload:e,label:n})=>t&&e&&e.length?c.jsxs("div",{className:"bg-black/70 backdrop-blur-md p-3 rounded-lg border border-zinc-700 text-white shadow-xl",children:[c.jsxs("p",{className:"label text-zinc-400 text-sm font-medium mb-1",children:["DEL: ",n]}),e.map(r=>{var i;return c.jsxs("p",{style:{color:r.stroke||((i=r.payload)==null?void 0:i.stroke)},className:"font-semibold text-base flex justify-between items-center gap-4",children:[c.jsxs("span",{children:[r.name,":"]}),c.jsx("span",{children:typeof r.value=="number"?`${r.value.toFixed(2)} Kg`:"N/A"})]},r.name)})]}):null,Eze=({lactationsData:t,comparisonData:e,highlightedLactationDate:n,onLactationClick:r})=>{const[i,a]=I.useState(null),s=I.useMemo(()=>t?t.slice(-s1.length).reverse():[],[t]),o=I.useMemo(()=>new Map(s.map(g=>[`Lact. ${new Date(g.parturitionDate).getFullYear()}`,g.parturitionDate])),[s]),l=(g,v)=>{const y=o.get(g),b=p&&n===y,S=i===g,A=v.dataKey==="kg"&&e&&g===e.name;let C=1;return A?C=1:p?C=b?1:.7:i&&(C=S?1:.7),c.jsx("span",{style:{color:v.color,opacity:C,transition:"opacity 0.2s ease"},children:g})},u=I.useMemo(()=>{if(!s)return[];let g=s.flatMap(v=>v.lactationCurve);return e!=null&&e.curve&&(g=g.concat(e.curve)),g},[s,e]),d=I.useMemo(()=>!u||u.length===0?305:Math.max(...u.map(g=>g.del),0),[u]),f=I.useMemo(()=>!u||u.length===0?5:Math.max(...u.map(g=>g.kg),0),[u]),p=n!==null,h=PC,m=`url(#${LF})`;return s?s.length===0?c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay datos históricos de lactancia para mostrar."}):c.jsx("div",{className:"w-full h-72",children:c.jsx(ca,{children:c.jsxs(m_,{margin:{top:5,right:15,left:-25,bottom:5},onClick:g=>{(!g||!g.activePayload||g.activePayload.length===0)&&r(null)},children:[c.jsxs("defs",{children:[s1.map((g,v)=>c.jsxs("linearGradient",{id:`gradient${v}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:g.stroke,stopOpacity:.7}),c.jsx("stop",{offset:"95%",stopColor:g.stroke,stopOpacity:.15})]},`grad-${v}`)),c.jsxs("linearGradient",{id:LF,x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:PC,stopOpacity:.6})," ",c.jsx("stop",{offset:"95%",stopColor:PC,stopOpacity:.1})," "]})]}),c.jsx(Rf,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)",vertical:!1}),c.jsx(Di,{dataKey:"del",type:"number",domain:[0,d>0?d:305],tick:{fill:"rgba(255, 255, 255, 0.5)",fontSize:10},stroke:"rgba(255, 255, 255, 0.2)",axisLine:!1,tickLine:!1,name:"DEL"}),c.jsx(Ki,{orientation:"right",tick:{fill:"rgba(255, 255, 255, 0.5)",fontSize:10},stroke:"rgba(255, 255, 255, 0.2)",axisLine:!1,tickLine:!1,domain:[0,f>0?Math.ceil(f+.5):5],unit:"Kg",width:35}),c.jsx(Or,{content:c.jsx(Nze,{}),cursor:{stroke:"rgba(255,255,255,0.4)",strokeWidth:1.5}}),c.jsx(Ac,{verticalAlign:"top",height:36,iconType:"plainline",wrapperStyle:{fontSize:"12px",paddingBottom:"10px"},formatter:l,onMouseEnter:g=>a(g.value),onMouseLeave:()=>a(null)}),s.map((g,v)=>{const y=s1[v%s1.length],S=`Lact. ${new Date(g.parturitionDate).getFullYear()}`,A=n===g.parturitionDate,C=i===S,T=A||C,j=p?A?1:.7:C?1:.9,E=T?3.5:2.5,k=p?A?.7:.3:C?.8:.7;return c.jsxs(xe.Fragment,{children:[c.jsx(Us,{type:"monotone",data:g.lactationCurve,dataKey:"kg",name:S,stroke:"none",fill:y.fill,fillOpacity:k,activeDot:!1,style:{transition:"opacity 0.2s ease, fill-opacity 0.2s ease"}}),c.jsx(np,{type:"monotone",data:g.lactationCurve,dataKey:"kg",name:S,stroke:y.stroke,strokeWidth:E,dot:!1,activeDot:{r:5,strokeWidth:0},strokeOpacity:j,style:{transition:"opacity 0.2s ease, stroke-width 0.2s ease"},onClick:()=>{r(g.parturitionDate)},cursor:"pointer"})]},g.parturitionDate)}),e&&e.curve.length>0&&c.jsxs(xe.Fragment,{children:[c.jsx(Us,{type:"monotone",data:e.curve,dataKey:"kg",name:e.name,stroke:"none",fill:m,fillOpacity:p?.4:.6,style:{transition:"opacity 0.2s ease"}}),c.jsx(np,{type:"monotone",data:e.curve,dataKey:"kg",name:e.name,stroke:h,strokeWidth:2.5,strokeDasharray:"4 4",dot:!1,activeDot:{r:5,strokeWidth:0},strokeOpacity:1,style:{transition:"opacity 0.2s ease"}})]})]})})}):c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Cargando datos..."})},kze=({lactationNumber:t,lactationData:e,onClick:n})=>{const r=new Date(e.parturitionDate+"T00:00:00Z").getUTCFullYear();return c.jsxs("button",{onClick:n,className:"w-full text-left bg-black/20 rounded-2xl p-4 border border-zinc-700/80 hover:border-brand-blue/50 transition-colors group",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"font-bold text-lg text-white",children:["Lactancia #",t," ",c.jsxs("span",{className:"text-zinc-400 font-normal",children:["(",r,")"]})]}),c.jsx(Wi,{className:"text-zinc-500 group-hover:text-brand-blue transition-colors"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs text-zinc-400 flex items-center justify-center gap-1",children:[c.jsx(ev,{size:12}),"Promedio"]}),c.jsxs("p",{className:"text-xl font-semibold text-white",children:[e.averageProduction.toFixed(2),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:" Kg"})]})]}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs text-zinc-400 flex items-center justify-center gap-1",children:[c.jsx(ba,{size:12}),"Pico"]}),c.jsxs("p",{className:"text-xl font-semibold text-white",children:[e.peakProduction.kg.toFixed(2),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:" Kg"})]})]}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs text-zinc-400 flex items-center justify-center gap-1",children:[c.jsx(eT,{size:12}),"Duración"]}),c.jsxs("p",{className:"text-xl font-semibold text-white",children:[e.totalDays,c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:" días"})]})]})]})]})},TC=(t,e=2,n="Kg")=>t==null||isNaN(t)?"N/A":`${t.toFixed(e)} ${n}`,Pze=(t,e,n)=>{const r=n.find(s=>s.goatId===e&&s.parturitionDate===t.parturitionDate);if(!r)return null;const i=n.filter(s=>s.goatId===e&&new Date(s.parturitionDate)<new Date(r.parturitionDate)).sort((s,o)=>new Date(o.parturitionDate).getTime()-new Date(s.parturitionDate).getTime())[0];if(!i||!i.dryingStartDate)return null;const a=new Date(r.parturitionDate).getTime()-new Date(i.dryingStartDate).getTime();return Math.round(a/(1e3*60*60*24))},o1=({label:t,valueA:e,valueB:n,unit:r,decimals:i=2,invertColors:a=!1})=>{const s=e!=null,o=n!=null,l=s&&o;let u=null,d="N/A",f="text-zinc-400",p=sT;return l&&(u=e-n,Math.abs(u)<.01&&(u=0),d=`${u>0?"+":""}${u.toFixed(i)} ${r}`,u>0?(f=a?"text-brand-red":"text-brand-green",p=ug):u<0&&(f=a?"text-brand-green":"text-brand-red",p=cg)),c.jsxs("div",{className:"py-3 border-b border-zinc-700/50 flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-medium text-zinc-400",children:t}),c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsx("span",{className:"text-lg font-semibold text-white",children:TC(e,i,r)}),l?c.jsxs("span",{className:`text-sm font-medium flex items-center ${f}`,children:[c.jsx(p,{size:16,className:"mr-0.5"}),d,c.jsxs("span",{className:"text-zinc-500 ml-2 text-xs font-normal",children:["(vs ",TC(n,i,r),")"]})]}):c.jsxs("span",{className:"text-sm font-medium text-zinc-500",children:["vs ",TC(n,i,r)]})]})]})},Tze=({lactationA:t,comparisonB:e,allParturitions:n,animalId:r})=>{const i=e!=null&&e.curve.length?e.curve.reduce((d,f)=>d+f.kg,0)/e.curve.length:null,a=e!=null&&e.curve.length?e.curve.reduce((d,f)=>f.kg>d.kg?f:d,{kg:0,del:0}):null,s=e!=null&&e.curve.length?e.curve[e.curve.length-1].del:null,o=I.useMemo(()=>Pze(t,r,n),[t,r,n]),l=e==null?void 0:e.averageRestInterval,u=`Lact. ${new Date(t.parturitionDate).getFullYear()}`;return c.jsxs("div",{className:"mt-4 pt-4 border-t border-brand-border/50 text-white animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[c.jsx("span",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wide",children:"Métrica"}),c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsx("span",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:u}),c.jsxs("span",{className:"text-xs font-light text-zinc-400",children:["vs ",(e==null?void 0:e.name)||"..."]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(o1,{label:"Promedio",valueA:t.averageProduction,valueB:i,unit:"Kg",decimals:2}),c.jsx(o1,{label:"Pico",valueA:t.peakProduction.kg,valueB:a==null?void 0:a.kg,unit:"Kg",decimals:2}),c.jsx(o1,{label:"Duración (DEL)",valueA:t.totalDays,valueB:s,unit:"días",decimals:0}),c.jsx(o1,{label:"Descanso Previo",valueA:o,valueB:l,unit:"días",decimals:0,invertColors:!0})]})]})},Dze=({active:t,payload:e,label:n})=>{var r;return t&&e&&e.length?c.jsxs("div",{className:"bg-zinc-800/80 backdrop-blur-md p-3 rounded-lg border border-zinc-700 text-white shadow-xl",children:[c.jsxs("p",{className:"label text-zinc-400 text-sm font-medium mb-1",children:["DEL: ",n]}),c.jsxs("p",{className:"font-semibold text-base",style:{color:e[0].stroke||((r=e[0].payload)==null?void 0:r.stroke)||e[0].fill},children:[e[0].name,": ",e[0].value.toFixed(2)," Kg"]})]}):null};function eQ({animalId:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,weighings:a,startDryingProcess:s,setLactationAsDry:o}=Xt(),{allLactations:l,parturitionIntervals:u,lastWeighingDate:d,isLoading:f}=Cze(t),[p,h]=I.useState(!1),[m,g]=I.useState(null),[v,y]=I.useState(!1),[b,S]=I.useState(null),A=I.useMemo(()=>r.find(te=>te.id===t)||null,[r,t]),[C,T]=I.useState({type:null,animal:A,highlightedLactationDEL:void 0}),{comparativeData:j,isLoading:E}=jze(C,r,i,a),k=I.useMemo(()=>{if(l.length===0)return null;const te=l[l.length-1],oe=i.find(ge=>ge.parturitionDate===te.parturitionDate&&ge.goatId===t);return{...te,id:oe==null?void 0:oe.id,status:oe==null?void 0:oe.status}},[l,i,t]),O=I.useMemo(()=>{if(!k||k.status==="seca"||k.status==="finalizada")return"N/A";const te=k.status!=="activa"&&d?d:new Date().toISOString().split("T")[0];return Ff(k.parturitionDate,te)},[k,d]),D=I.useMemo(()=>!k||k.weighings.length===0?null:[...k.weighings].sort((oe,ge)=>new Date(ge.date).getTime()-new Date(oe.date).getTime())[0].kg,[k]),M=I.useMemo(()=>!v||!j||E||j.curve.length===0?null:{name:j.name,curve:j.curve},[v,j,E]),L=I.useMemo(()=>l.length>0?l[l.length-1]:null,[l]),V=I.useMemo(()=>u.length>0?u[u.length-1].days:0,[u]),Q=I.useMemo(()=>l.length<=1?[]:l.slice(0,-1).reverse(),[l]);if(f)return c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando perfil..."})});const Y=l.length===1,J=te=>{if(!te)return;const oe=l.find(ge=>ge.parturitionDate===te);return!oe||oe.lactationCurve.length===0?0:Math.max(...oe.lactationCurve.map(ge=>ge.del),0)},q=te=>{S(te);const oe=J(te);te?(y(!0),T(ge=>({...ge,animal:A,highlightedLactationDEL:oe}))):(y(!1),T({type:null,animal:null,highlightedLactationDEL:void 0}))},ee=()=>{const te=!v;if(y(te),te){let oe=b;!oe&&L&&(oe=L.parturitionDate,S(oe));const ge=J(oe);T(_e=>({..._e,animal:A,highlightedLactationDEL:ge}))}else S(null),T({type:null,animal:null,highlightedLactationDEL:void 0})},le=(te,oe)=>{T(ge=>{const _e=ge.type===te&&ge.specificLactationIndex===oe?null:te;let Ce=b;_e&&(y(!0),!Ce&&L&&(Ce=L.parturitionDate,S(Ce)));const fe=J(Ce);return{...ge,type:_e,animal:A,specificLactationIndex:te==="SPECIFIC_LACTATION"?oe:void 0,highlightedLactationDEL:fe}})},se=te=>{te&&te.lactationCurve.length>0&&(g(te),h(!0))},$=(te,oe)=>{const ge=C.type===te&&(te!=="SPECIFIC_LACTATION"||C.specificLactationIndex===oe);let _e="";return Y&&te==="PRIMIPARAS_AVG"&&(_e="ring-2 ring-amber-400"),!Y&&te==="MULTIPARAS_AVG"&&(_e="ring-2 ring-amber-400"),`px-2 py-1 text-xs rounded-md transition-colors ${ge?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${_e}`},G=b!==null;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 sticky top-0 z-10 bg-brand-dark/80 backdrop-blur-md -mx-4 px-4 border-b border-brand-border/50 mb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:t}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Perfil de Lactancia"})]}),c.jsx("button",{onClick:()=>n({name:"rebano-profile",animalId:t}),className:"p-2 -mr-2 text-zinc-400 hover:text-white transition-colors",title:"Ir a la ficha general del animal",children:c.jsx(dS,{size:24})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(ev,{size:14}),c.jsx("span",{children:"Promedio Actual"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[(L==null?void 0:L.averageProduction.toFixed(2))||"N/A"," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(ba,{size:14}),c.jsx("span",{children:"Pico Prod. Actual"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[(L==null?void 0:L.peakProduction.kg.toFixed(2))||"N/A"," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(eT,{size:14}),c.jsx("span",{children:"DEL Actual"})]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:O})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(Vce,{size:14}),c.jsx("span",{children:"Últ. Int. Partos"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[V||"N/A"," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"días"})]})]}),c.jsxs("button",{onClick:()=>se(L),disabled:!L||L.weighings.length===0,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors col-span-2 md:col-span-1 disabled:opacity-50 disabled:cursor-not-allowed relative group",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(yce,{size:14}),c.jsx("span",{children:"Últ. Pesaje"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[(D==null?void 0:D.toFixed(2))??"N/A"," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]}),c.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:d?new Date(d+"T00:00:00").toLocaleDateString():""}),c.jsx("div",{className:"absolute top-3 right-3 text-zinc-500 group-hover:text-brand-amber transition-colors",children:c.jsx(Pb,{size:18})})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border relative",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center border-b border-brand-border pb-2 mb-4 gap-2",children:[c.jsx("h3",{className:"text-zinc-400 font-semibold text-xs uppercase",children:"Historial de Lactancias"}),c.jsxs("div",{className:"flex items-center space-x-2 self-end sm:self-center",children:[G&&c.jsxs("button",{onClick:()=>q(null),className:"text-xs font-semibold text-zinc-400 hover:text-white animate-fade-in flex items-center gap-1 bg-zinc-700/50 px-2 py-1 rounded-md",title:"Quitar zoom",children:[c.jsx(Nce,{size:14}),"Ver Todo"]}),c.jsx("span",{className:"text-xs font-semibold text-zinc-300",children:"Comparar:"}),c.jsx("button",{onClick:ee,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${v?"bg-amber-500":"bg-zinc-700"}`,children:c.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${v?"translate-x-5":"translate-x-0"}`})})]})]}),v&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4 animate-fade-in p-2 bg-black/20 rounded-lg",children:[c.jsx("span",{className:"text-xs font-semibold text-zinc-300 w-full sm:w-auto",children:"Grupos:"}),c.jsx("button",{onClick:()=>le("PRIMIPARAS_AVG"),className:$("PRIMIPARAS_AVG"),children:"vs Primíparas"}),c.jsx("button",{onClick:()=>le("MULTIPARAS_AVG"),className:$("MULTIPARAS_AVG"),children:"vs Multíparas"}),c.jsx("button",{onClick:()=>le("HERD_AVG"),className:$("HERD_AVG"),children:"vs Rebaño"}),c.jsx("button",{onClick:()=>le("PEERS_AVG"),className:$("PEERS_AVG"),children:"vs Pares"}),c.jsx("span",{className:"text-xs font-semibold text-zinc-300 w-full sm:w-auto pt-2 sm:pt-0",children:"Familia:"}),c.jsx("button",{onClick:()=>le("DAM"),className:$("DAM"),disabled:!(A!=null&&A.motherId),children:"Madre"}),c.jsx("button",{onClick:()=>le("PROGENY_AVG"),className:$("PROGENY_AVG"),children:"Prom. Hijas"}),c.jsx("span",{className:"text-xs font-semibold text-zinc-300 w-full sm:w-auto pt-2 sm:pt-0",children:"Propias:"}),Q.map((te,oe)=>c.jsxs("button",{onClick:()=>le("SPECIFIC_LACTATION",l.length-2-oe),className:$("SPECIFIC_LACTATION",l.length-2-oe),children:["vs Lact. #",l.length-1-oe," (",new Date(te.parturitionDate).getFullYear(),")"]},te.parturitionDate))]}),c.jsx(Eze,{lactationsData:l,comparisonData:M,highlightedLactationDate:b,onLactationClick:q}),E&&c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm rounded-xl text-white",children:[c.jsx(kc,{className:"animate-spin mr-2"})," Calculando comparación..."]}),v&&j&&L&&!E&&c.jsx(Tze,{lactationA:l.find(te=>te.parturitionDate===b)||L,comparisonB:j,allParturitions:i,animalId:t})]}),Q.length>0&&c.jsxs("div",{className:"space-y-3 pt-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-1",children:"Lactancias Anteriores"}),Q.map((te,oe)=>c.jsx(kze,{lactationNumber:l.length-1-oe,lactationData:te,onClick:()=>se(te)},te.parturitionDate))]}),(k==null?void 0:k.id)&&k.status!=="finalizada"&&c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-zinc-400 font-semibold text-xs uppercase mb-3",children:"Gestión de Lactancia Actual"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[k.status==="activa"&&c.jsxs("button",{onClick:()=>s(k.id),className:"w-full flex items-center justify-center space-x-2 bg-blue-600/80 hover:bg-blue-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[c.jsx(mp,{size:20}),c.jsx("span",{children:"Iniciar Proceso de Secado"})]}),(k.status==="activa"||k.status==="en-secado")&&c.jsxs("button",{onClick:()=>o(k.id),className:"w-full flex items-center justify-center space-x-2 bg-gray-600/80 hover:bg-gray-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[c.jsx(Gl,{size:20}),c.jsx("span",{children:"Declarar Lactancia como Seca"})]}),k.status==="seca"&&c.jsx("div",{className:"w-full text-center p-3 bg-black/20 rounded-xl",children:c.jsx("p",{className:"font-semibold text-green-400",children:"Esta lactancia ha finalizado."})})]}),k.status==="en-secado"&&c.jsx("p",{className:"text-center text-xs text-zinc-400 mt-2",children:"El animal está en su período de secado."})]})]}),c.jsx(cn,{isOpen:p,onClose:()=>h(!1),title:`Curva Lactancia (${m?new Date(m.parturitionDate).getFullYear():"Actual"}) - ${t}`,children:m?c.jsx("div",{className:"w-full h-[320px] -ml-2 -mr-2",children:c.jsx(ca,{width:"100%",height:"100%",children:c.jsxs(m_,{data:m.lactationCurve,margin:{top:10,right:10,left:0,bottom:0},children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"colorLactation",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:"#FBBF24",stopOpacity:.8}),c.jsx("stop",{offset:"95%",stopColor:"#FBBF24",stopOpacity:0})]})}),c.jsx(Rf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)",vertical:!1}),c.jsx(Di,{dataKey:"del",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},tickLine:!1,axisLine:{stroke:"rgba(255,255,255,0.2)"}}),c.jsx(Ki,{orientation:"right",tickFormatter:te=>`${te.toFixed(1)} Kg`,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},tickLine:!1,axisLine:{stroke:"rgba(255,255,255,0.2)"}}),c.jsx(Or,{content:c.jsx(Dze,{})}),c.jsx(Us,{type:"monotone",dataKey:"kg",name:`${t} (${new Date(m.parturitionDate).getFullYear()})`,stroke:"#FBBF24",fill:"url(#colorLactation)",strokeWidth:2.5,dot:{r:3,fill:"#FBBF24",stroke:"#FBBF24",strokeWidth:1},activeDot:{r:5,fill:"#FFFFFF",stroke:"#FBBF24",strokeWidth:2}})]})})}):c.jsx("p",{className:"text-center text-zinc-400 py-8",children:"No hay datos para mostrar la curva seleccionada."})})]})}const Ize=({plan:t})=>c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("p",{className:"font-semibold text-white",children:t.details}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Iniciado el: ",new Date(t.startDate+"T00:00:00").toLocaleDateString("es-VE")]})]});function Oze({lotName:t,onBack:e}){const{feedingPlans:n,addFeedingPlan:r}=Xt(),[i,a]=I.useState(""),[s,o]=I.useState(new Date().toISOString().split("T")[0]),[l,u]=I.useState(null),d=I.useMemo(()=>n.filter(p=>p.lotName===t).sort((p,h)=>new Date(h.startDate).getTime()-new Date(p.startDate).getTime()),[n,t]),f=async p=>{if(p.preventDefault(),!i.trim()){u({type:"error",text:"Los detalles del plan no pueden estar vacíos."});return}try{await r({lotName:t,details:i,startDate:s}),u({type:"success",text:"Plan de alimentación guardado con éxito."}),a("")}catch(h){u({type:"error",text:"No se pudo guardar el plan."}),console.error(h)}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Alimentación: ",t]}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Planes de Nutrición del Lote"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("form",{onSubmit:f,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[c.jsx(qi,{size:20})," Asignar Nuevo Plan"]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"planDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Plan (Ej: 2kg de concentrado/día)"}),c.jsx("textarea",{id:"planDetails",rows:3,value:i,onChange:p=>a(p.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"planStartDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),c.jsx("input",{id:"planStartDate",type:"date",value:s,onChange:p=>o(p.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Plan"}),l&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${l.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[l.type==="success"?c.jsx(Za,{size:18}):c.jsx(mr,{size:18}),c.jsx("span",{children:l.text})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[c.jsx(tT,{size:20})," Historial de Planes"]}),d.length>0?c.jsx("div",{className:"space-y-2",children:d.map(p=>c.jsx(Ize,{plan:p},p.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay planes de alimentación registrados para este lote."})})]})]})}const Mze=({event:t})=>c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("p",{className:"font-semibold text-white",children:t.details}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Aplicado el: ",new Date(t.date+"T00:00:00").toLocaleDateString("es-VE")]})]});function Rze({lotName:t,onBack:e}){const{events:n,addBatchEvent:r}=Xt(),[i,a]=I.useState(""),[s,o]=I.useState(new Date().toISOString().split("T")[0]),[l,u]=I.useState(null),d=I.useMemo(()=>{const p=n.filter(h=>h.lotName===t&&h.type==="Tratamiento").reduce((h,m)=>{const g=`${m.date}-${m.details}`;return h[g]||(h[g]=m),h},{});return Object.values(p).sort((h,m)=>new Date(m.date).getTime()-new Date(h.date).getTime())},[n,t]),f=async p=>{if(p.preventDefault(),u(null),!i.trim()){u({type:"error",text:"Los detalles del tratamiento no pueden estar vacíos."});return}try{await r({lotName:t,details:i,date:s,type:"Tratamiento"}),u({type:"success",text:"Tratamiento registrado con éxito para todo el lote."}),a("")}catch(h){u({type:"error",text:"No se pudo registrar el tratamiento."}),console.error(h)}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Tratamientos: ",t]}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Sanidad Colectiva del Lote"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("form",{onSubmit:f,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[c.jsx(qi,{size:20})," Registrar Tratamiento al Lote"]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"treatmentDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Tratamiento (Ej: Vacuna Triple)"}),c.jsx("textarea",{id:"treatmentDetails",rows:3,value:i,onChange:p=>a(p.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"treatmentDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),c.jsx("input",{id:"treatmentDate",type:"date",value:s,onChange:p=>o(p.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Tratamiento"}),l&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${l.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[l.type==="success"?c.jsx(Za,{size:18}):c.jsx(mr,{size:18}),c.jsx("span",{children:l.text})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[c.jsx(Xce,{size:20})," Historial de Tratamientos del Lote"]}),d.length>0?c.jsx("div",{className:"space-y-2",children:d.map(p=>c.jsx(Mze,{event:p},p.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay tratamientos registrados para este lote."})})]})]})}const yu=({active:t,payload:e,label:n})=>{if(t&&e&&e.length){const r=e[0].payload.name==="Promedio Rebaño";return"range"in e[0].payload?c.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[c.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Rango: ",e[0].payload.range," Kg"]}),c.jsxs("p",{className:"font-bold text-base",children:["Nº de Cabras: ",e[0].value]})]}):c.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[c.jsx("p",{className:"label text-brand-light-gray text-sm",children:r?`Días en Leche (DEL): ${n}`:`DEL: ${n}`}),c.jsx("p",{className:"font-bold text-base",children:r?`Promedio: ${e[0].value.toFixed(2)} Kg`:`Producción: ${e[0].value.toFixed(2)} Kg`})]})}return null},Qf=({icon:t,label:e,value:n,unit:r,colorClass:i})=>c.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border ${i||""}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(t,{size:14}),c.jsx("span",{children:e})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[n," ",c.jsx("span",{className:"text-lg text-zinc-400",children:r})]})]});function Lze({animalId:t,onBack:e}){const{animals:n,bodyWeighings:r,appConfig:i}=Xt(),a=I.useMemo(()=>{const g=n.find(k=>k.id===t);if(!g)return null;const v=r.filter(k=>k.animalId===g.id).sort((k,O)=>new Date(k.date).getTime()-new Date(O.date).getTime()),y=J3(g.birthWeight,v),b=Lc(g.birthDate),S=v.length>0?v[v.length-1].kg:g.birthWeight||0,A=t6e(g),C=n6e(g,v),T=v.map(k=>({age:(new Date(k.date).getTime()-new Date(g.birthDate+"T00:00:00Z").getTime())/(1e3*60*60*24),[g.id]:k.kg}));g.birthWeight&&T.unshift({age:0,[g.id]:g.birthWeight});const E=[60,90,180,270].map(k=>({days:k,weight:AX(v,g.birthDate,k)}));return{animal:g,gdp:y,formattedAge:b,latestWeight:S,chartData:T,interpolatedWeights:E,weaningIndex:A,precocityIndex:C}},[t,n,r]);if(!a)return c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."})});const{animal:s,gdp:o,formattedAge:l,latestWeight:u,chartData:d,interpolatedWeights:f,weaningIndex:p,precocityIndex:h}=a,m=s.name?String(s.name).toUpperCase().trim():"";return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4 sticky top-0 bg-brand-dark/80 backdrop-blur-md z-10 border-b border-brand-border -mx-4 mb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow min-w-0",children:[c.jsx("h1",{className:"text-3xl font-mono font-bold tracking-tight text-white truncate",children:s.id.toUpperCase()}),m&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:m}),c.jsx("p",{className:"text-lg text-zinc-400 mt-1",children:"Perfil de Crecimiento"})," "]}),c.jsx("div",{className:"w-8"})," "]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 px-4",children:[c.jsx(Qf,{icon:md,label:"Peso Actual",value:u.toFixed(2),unit:"Kg"}),c.jsx(Qf,{icon:ba,label:"GDP General",value:o.overall?(o.overall*1e3).toFixed(0):"N/A",unit:"g/día"}),c.jsx(Qf,{icon:oo,label:"Edad Actual",value:l}),c.jsx(Qf,{icon:Fce,label:"Nº Pesajes",value:d.length>0?d.length-(s.birthWeight?1:0):0})]}),(p||h)&&c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 px-4",children:[p&&c.jsx(Qf,{icon:lue,label:"Índice Destete (60d)",value:p.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"}),c.jsx(Qf,{icon:wce,label:"Meta Destete (Config)",value:i.pesoDesteteMetaKg.toFixed(2),unit:"Kg",colorClass:"border-blue-400/50"}),h&&c.jsx(Qf,{icon:sue,label:"Índice Precocidad (7m)",value:h.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"})]}),c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Curva de Crecimiento"}),d.length>1?c.jsx("div",{className:"w-full h-64",children:c.jsx(ca,{children:c.jsxs(ZLe,{data:d,margin:{top:5,right:20,left:-10,bottom:5},children:[c.jsx(Rf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),c.jsx(Di,{dataKey:"age",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Edad (días)",position:"insideBottom",offset:-5,fill:"rgba(255,255,255,0.5)"}}),c.jsx(Ki,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Peso (Kg)",angle:-90,position:"insideRight",fill:"rgba(255,255,255,0.5)"},domain:["dataMin - 2","dataMax + 2"]}),c.jsx(Or,{content:c.jsx(yu,{})}),c.jsx(Ac,{verticalAlign:"top",height:36}),c.jsx(np,{type:"monotone",dataKey:s.id,name:ur(s),stroke:"#34C759",strokeWidth:2.5,dot:{r:4},activeDot:{r:6}})]})})}):c.jsx("p",{className:"text-center text-zinc-500 py-8",children:"No hay suficientes pesajes para mostrar la curva."})]})}),c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Hitos de Crecimiento (Pesos Estimados)"}),d.length>1?c.jsx("div",{className:"grid grid-cols-2 gap-4",children:f.map(({days:g,weight:v})=>c.jsxs("div",{className:"bg-black/20 p-3 rounded-lg text-center",children:[c.jsxs("p",{className:"text-sm text-zinc-400",children:["Peso a los ",g," días"]}),c.jsx("p",{className:"text-xl font-bold text-white",children:v?`${v.toFixed(2)} Kg`:"---"})]},g))}):c.jsx("p",{className:"text-center text-zinc-500 py-4",children:"Se necesitan más pesajes para estimar los hitos."})]})})]})}const Fze=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result.split(",")[1]),r.onerror=i=>n(i)}),zze=({onImageSelect:t})=>{const e=I.useRef(null),n=r=>{var i;(i=r.target.files)!=null&&i[0]&&t(r.target.files[0])};return c.jsxs("div",{className:"space-y-4 animate-fade-in",children:[c.jsx("input",{type:"file",ref:e,accept:"image/*",onChange:n,className:"hidden"}),c.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.setAttribute("capture","environment"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-blue-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(xce,{className:"w-12 h-12 mb-2 text-blue-400"}),c.jsx("span",{className:"text-lg font-semibold",children:"Tomar Foto"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Usa la cámara para escanear"})]}),c.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.removeAttribute("capture"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-green-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(Rce,{className:"w-12 h-12 mb-2 text-green-400"}),c.jsx("span",{className:"text-lg font-semibold",children:"Seleccionar Archivo"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Elige una foto de tu galería"})]})]})};function $ze({onBack:t}){const[e,n]=I.useState("capture"),[r,i]=I.useState(""),[a,s]=I.useState(""),o=async l=>{var u,d;n("loading"),i(""),s("");try{const f=await Fze(l),g=await fetch("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAsHrxI8e8prsvYNvx992YyC26n592GfWk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:f},features:[{type:"TEXT_DETECTION"}]}]})});if(!g.ok){const b=await g.json();throw new Error(b.error.message||"Error en la API de Google Vision.")}const y=(d=(u=(await g.json()).responses[0])==null?void 0:u.fullTextAnnotation)==null?void 0:d.text;if(y)s(y),n("verification");else throw new Error("No se pudo detectar texto en la imagen. Intenta con una foto más clara.")}catch(f){i(f.message||"Ocurrió un error inesperado."),n("error")}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Escanear Cuaderno"}),c.jsx("p",{className:"text-xl text-zinc-400",children:"Digitalización Asistida"})]}),c.jsx("div",{className:"w-8"})]}),e==="capture"&&c.jsx(zze,{onImageSelect:o}),e==="loading"&&c.jsxs("div",{className:"text-center py-20 animate-fade-in",children:[c.jsx(UH,{className:"w-12 h-12 text-amber-400 mx-auto animate-spin"}),c.jsx("p",{className:"mt-4 text-zinc-400",children:"Analizando imagen con IA..."})]}),e==="verification"&&c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider border-b border-brand-border pb-2",children:[c.jsx(dS,{}),c.jsx("span",{children:"Texto Reconocido"})]}),c.jsx("textarea",{readOnly:!0,value:a,className:"w-full h-48 bg-black/20 text-white p-3 rounded-lg border border-zinc-700"}),c.jsx("p",{className:"text-xs text-zinc-500 text-center",children:"Funcionalidad de autocompletado de pesajes próximamente."}),c.jsx("button",{onClick:()=>n("capture"),className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Escanear Otra Imagen"})]}),e==="error"&&c.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-6 text-center animate-fade-in",children:[c.jsx(mr,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),c.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Ocurrió un Error"}),c.jsx("p",{className:"text-red-300",children:r}),c.jsx("button",{onClick:()=>n("capture"),className:"mt-6 bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Intentar de Nuevo"})]})]})}const FF=152,SD=()=>{const{animals:t,breedingSeasons:e,sireLots:n,serviceRecords:r,fathers:i}=Xt();return{forecastBySeason:I.useMemo(()=>{var d;const s=[],o=e.filter(f=>f.status==="Activo");for(const f of o){const p=n.filter(g=>g.seasonId===f.id);if(p.length===0)continue;const h=new Set(p.map(g=>g.id)),m=t.filter(g=>g.sireLotId&&h.has(g.sireLotId));for(const g of m){const v=r.filter(S=>S.femaleId===g.id&&S.sireLotId===g.sireLotId&&new Date(S.serviceDate)>=new Date(f.startDate)&&new Date(S.serviceDate)<=new Date(f.endDate)).sort((S,A)=>new Date(A.serviceDate).getTime()-new Date(S.serviceDate).getTime())[0],y=n.find(S=>S.id===g.sireLotId);if(!y)continue;const b=((d=i.find(S=>S.id===y.sireId))==null?void 0:d.name)||"Desconocido";if(v){const S=new Date(v.serviceDate);S.setDate(S.getDate()+FF),s.push({animal:g,dueDate:S,type:"Confirmada",sireId:y.sireId,sireName:b,seasonId:f.id})}else{const A=new Date(f.startDate);A.setDate(A.getDate()+10+FF),s.push({animal:g,dueDate:A,type:"Probable",sireId:y.sireId,sireName:b,seasonId:f.id})}}}const l=s.reduce((f,p)=>{const{seasonId:h}=p;return f[h]||(f[h]=[]),f[h].push(p),f},{});let u=Object.entries(l).map(([f,p])=>{const h=e.find(y=>y.id===f),m=p.map(y=>y.dueDate.getTime()),g=new Date(Math.min(...m)),v=new Date(Math.max(...m));return{seasonId:f,seasonName:h.name,projectedStartDate:p.length>0?g:null,projectedEndDate:p.length>0?v:null,events:p.sort((y,b)=>y.dueDate.getTime()-b.dueDate.getTime()),totalEvents:p.length,confirmedEvents:p.filter(y=>y.type==="Confirmada").length,probableEvents:p.filter(y=>y.type==="Probable").length,daysSinceLastSeason:null}}).sort((f,p)=>f.projectedStartDate&&p.projectedStartDate?f.projectedStartDate.getTime()-p.projectedStartDate.getTime():f.projectedStartDate?-1:p.projectedStartDate?1:0);if(u.length>1){for(let f=1;f<u.length;f++)if(u[f].projectedStartDate&&u[f-1].projectedEndDate){const p=u[f].projectedStartDate,h=u[f-1].projectedEndDate,m=p.getTime()-h.getTime(),g=Math.ceil(m/(1e3*60*60*24));u[f].daysSinceLastSeason=g}}return u},[t,e,n,r,i])}},Bze=`
  .rdp { --rdp-cell-size: 45px; --rdp-accent-color: #FF9500; --rdp-background-color: #2C2C2E; --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: #2C2C2E; --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF; width: 100%; }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
  .day-confirmed { position: relative; }
  .day-confirmed::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #34C759; }
  .day-probable { position: relative; }
  .day-probable::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #FF9500; opacity: 0.7; }
`,Vze=({seasonForecast:t,onClick:e})=>{var n,r;return c.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border hover:border-brand-blue transition-colors",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.seasonName}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[(n=t.projectedStartDate)==null?void 0:n.toLocaleDateString("es-VE",{month:"long",day:"numeric"})," - ",(r=t.projectedEndDate)==null?void 0:r.toLocaleDateString("es-VE",{month:"long",day:"numeric",year:"numeric"})]})]}),t.daysSinceLastSeason!==null&&t.daysSinceLastSeason>0&&c.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[c.jsx("p",{className:"text-xs text-zinc-500",children:"Separación"}),c.jsxs("p",{className:"font-semibold text-white",children:[t.daysSinceLastSeason," días"]})]})]}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700/50 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"font-bold text-2xl text-white",children:t.totalEvents}),c.jsx("p",{className:"text-xs text-zinc-400",children:"Partos"})]}),c.jsxs("div",{className:"text-left text-xs",children:[c.jsxs("p",{className:"flex items-center gap-1 text-brand-green",children:[c.jsx(Za,{size:12})," Confirmados: ",t.confirmedEvents]}),c.jsxs("p",{className:"flex items-center gap-1 text-brand-orange",children:[c.jsx(nT,{size:12})," Probables: ",t.probableEvents]})]})]}),c.jsx(Wi,{className:"text-zinc-600"})]})]})},Uze=({forecastItem:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-white",children:t.animal.id}),c.jsxs("p",{className:"text-xs text-zinc-400",children:["Reproductor: ",t.sireName]})]}),c.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?c.jsx(Za,{size:16}):c.jsx(nT,{size:16}),c.jsx("span",{children:t.type})]})]});function Hze({navigateTo:t}){const{forecastBySeason:e}=SD(),[n,r]=I.useState("cards"),[i,a]=I.useState(void 0),[s,o]=I.useState(new Date),l=I.useMemo(()=>e.flatMap(f=>f.events),[e]),u=I.useMemo(()=>({confirmed:l.filter(f=>f.type==="Confirmada").map(f=>f.dueDate),probable:l.filter(f=>f.type==="Probable").map(f=>f.dueDate)}),[l]),d=I.useMemo(()=>i?l.filter(f=>f.dueDate.getFullYear()===i.getFullYear()&&f.dueDate.getMonth()===i.getMonth()&&f.dueDate.getDate()===i.getDate()):[],[l,i]);return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[c.jsx("style",{children:Bze}),c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Calendario de Partos"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Proyecciones del Rebaño"})]}),c.jsxs("div",{className:"flex justify-center p-1 bg-zinc-800 rounded-xl",children:[c.jsxs("button",{onClick:()=>r("cards"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="cards"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx(VH,{size:16})," Temporadas"]}),c.jsxs("button",{onClick:()=>r("calendar"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="calendar"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx(oo,{size:16})," Calendario"]})]}),n==="cards"&&c.jsx("div",{className:"space-y-3",children:e.length>0?e.map(f=>c.jsx(Vze,{seasonForecast:f,onClick:()=>t({name:"birthing-season-detail",seasonId:f.seasonId})},f.seasonId)):c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[c.jsx(hl,{size:32,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-400",children:"No hay temporadas de parto activas o proyectadas."})]})}),n==="calendar"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:c.jsx(Ap,{mode:"single",selected:i,onSelect:a,month:s,onMonthChange:o,locale:Kb,modifiers:{confirmed:u.confirmed,probable:u.probable},modifiersClassNames:{confirmed:"day-confirmed",probable:"day-probable"},showOutsideDays:!0})}),i&&c.jsxs("div",{className:"space-y-3 pt-2",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Proyecciones para el ",i.toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})]}),d.length>0?c.jsx("div",{className:"space-y-2",children:d.map(f=>c.jsx(Uze,{forecastItem:f,onClick:()=>t({name:"rebano-profile",animalId:f.animal.id})},f.animal.id))}):c.jsx("div",{className:"text-center py-6 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay partos proyectados para este día."})})]})]})]})}const Wze=({forecastItem:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-white",children:t.animal.id}),c.jsxs("p",{className:"text-xs text-zinc-400",children:["Reproductor: ",t.sireName]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?c.jsx(Za,{size:16}):c.jsx(nT,{size:16}),c.jsx("span",{children:t.type})]}),c.jsx(Wi,{className:"text-zinc-600"})]})]}),qze=t=>{const e=new Date(t.getUTCFullYear(),t.getUTCMonth(),1),n=e.getUTCDay()===0?6:e.getUTCDay()-1,r=t.getUTCDate(),i=Math.ceil((r+n)/7),a=t.toLocaleString("es-VE",{month:"short",timeZone:"UTC"});return`${a.charAt(0).toUpperCase()+a.slice(1)} - Sem ${i}`};function Kze({seasonId:t,onBack:e,navigateTo:n}){const{forecastBySeason:r}=SD(),i=I.useMemo(()=>r.find(s=>s.seasonId===t),[r,t]),a=I.useMemo(()=>{if(!i)return[];const s={};return i.events.forEach(o=>{const l=o.dueDate,u=qze(l);if(!s[u]){const d=l.getUTCDate(),f=l.getUTCDay()===0?6:l.getUTCDay()-1,p=new Date(l);p.setUTCDate(d-f),s[u]={count:0,startDate:p}}s[u].count++}),Object.entries(s).map(([o,l])=>({name:o,partos:l.count,startDate:l.startDate})).sort((o,l)=>o.startDate.getTime()-l.startDate.getTime())},[i]);return i?c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:i.seasonName}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de Proyección de Partos"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[c.jsx(Pb,{size:20})," Proyección Semanal de Partos"]}),c.jsx("div",{className:"w-full h-56",children:c.jsx(ca,{children:c.jsxs(gl,{data:a,margin:{top:5,right:10,left:-20,bottom:5},children:[c.jsx(Rf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),c.jsx(Di,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Ki,{allowDecimals:!1,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Or,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"}}),c.jsx($a,{dataKey:"partos",name:"Nº de Partos",fill:"#007AFF",radius:[4,4,0,0]})]})})})]}),c.jsxs("div",{className:"space-y-3 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Lista de Animales (",i.totalEvents,")"]}),c.jsxs("div",{className:"space-y-2",children:["M                   ",i.events.map(s=>c.jsx(Wze,{forecastItem:s,onClick:()=>n({name:"rebano-profile",animalId:s.animal.id})},s.animal.id))]})]})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada de Partos no encontrada."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const Zf=({title:t,icon:e,children:n})=>c.jsxs("div",{className:"mb-6",children:[c.jsxs("h2",{className:"text-sm font-semibold text-zinc-400 uppercase tracking-wide flex items-center gap-2 mb-2 px-4",children:[c.jsx(e,{size:16}),t]}),c.jsx("div",{className:"bg-brand-glass rounded-2xl border border-brand-border divide-y divide-brand-border overflow-hidden",children:n})]}),di=xe.forwardRef(({label:t,unit:e,...n},r)=>c.jsxs("div",{className:"p-3 bg-ios-modal-bg flex justify-between items-center",children:[c.jsx("label",{htmlFor:n.id||n.name,className:"text-white text-base",children:t}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{ref:r,...n,className:`w-24 bg-zinc-700/80 rounded-lg p-2 text-white text-right font-mono text-base focus:outline-none focus:ring-2 focus:ring-brand-orange ${n.type==="text"?"font-sans":""}`}),e&&c.jsx("span",{className:"text-zinc-400 w-6 text-left",children:e})]})]})),Gze=({label:t,value:e,onChange:n})=>c.jsxs("div",{className:"p-3 bg-ios-modal-bg flex justify-between items-center",children:[c.jsx("label",{className:"text-white text-base",children:t}),c.jsx("button",{type:"button",role:"switch","aria-checked":e,onClick:()=>n(!e),className:`relative inline-flex h-8 w-14 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out ${e?"bg-brand-green":"bg-zinc-700"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-7 w-7 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${e?"translate-x-6":"translate-x-0"}`})})]});function Yze({onBack:t}){const{appConfig:e,updateAppConfig:n,isLoadingConfig:r}=Xt(),[i,a]=I.useState(e||Kp),[s,o]=I.useState("idle");I.useEffect(()=>{e&&a(e)},[e]);const l=f=>{const{name:p,value:h,type:m}=f.target;let g=h;m==="number"&&(g=h===""?0:parseFloat(h)),m==="checkbox"&&(g=f.target.checked),a(v=>({...v,[p]:g}))},u=f=>{a(p=>({...p,theme:f?"dark":"light"}))},d=async()=>{o("saving");try{await n(i),o("success"),setTimeout(()=>{o("idle"),t()},1500)}catch(f){console.error("Error al guardar configuración:",f),o("idle")}};return r?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando configuración..."})}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-col",style:{height:"calc(100vh - 64px)"},children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between pt-8 pb-4 px-4 sticky top-0 bg-brand-dark/80 backdrop-blur-lg z-10 border-b border-brand-border",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Configuración"}),c.jsxs("button",{onClick:d,disabled:s!=="idle",className:`px-5 py-2 rounded-xl font-bold transition-colors text-lg flex items-center gap-2 ${s==="idle"?"bg-brand-orange text-black":s==="saving"?"bg-zinc-600 text-white":"bg-brand-green text-white"}`,children:[s==="idle"&&c.jsx(tv,{size:18}),s==="saving"&&c.jsx(kc,{size:18,className:"animate-spin"}),s==="success"&&c.jsx(Za,{size:18}),s==="saving"?"Guardando...":s==="success"?"Guardado":"Guardar"]})]}),c.jsxs("main",{className:"flex-1 overflow-y-auto pb-24 pt-4",children:[c.jsxs(Zf,{title:"General",icon:Tce,children:[c.jsx(di,{label:"Nombre de la Finca",type:"text",name:"nombreFinca",value:i.nombreFinca,onChange:l}),c.jsx(Gze,{label:"Modo Oscuro",value:i.theme==="dark",onChange:f=>u(f)})]}),c.jsxs(Zf,{title:"Índices Biológicos",icon:G2,children:[c.jsx(di,{label:"% de Preñez",type:"number",name:"porcentajePrenez",value:i.porcentajePrenez,onChange:l,unit:"%"}),c.jsx(di,{label:"% Prolificidad",type:"number",name:"porcentajeProlificidad",value:i.porcentajeProlificidad,onChange:l,unit:"%"}),c.jsx(di,{label:"% Mortalidad Crías (0-3m)",type:"number",name:"mortalidadCrias",value:i.mortalidadCrias,onChange:l,unit:"%"}),c.jsx(di,{label:"% Mortalidad Levante (3-12m)",type:"number",name:"mortalidadLevante",value:i.mortalidadLevante,onChange:l,unit:"%"}),c.jsx(di,{label:"% Mortalidad Cabras (Adultas)",type:"number",name:"mortalidadCabras",value:i.mortalidadCabras,onChange:l,unit:"%"}),c.jsx(di,{label:"% Reemplazo (Anual)",type:"number",name:"tasaReemplazo",value:i.tasaReemplazo,onChange:l,unit:"%"}),c.jsx(di,{label:"% Eliminación Cabritos",type:"number",name:"eliminacionCabritos",value:i.eliminacionCabritos,onChange:l,unit:"%"})]}),c.jsxs(Zf,{title:"Manejo Reproductivo",icon:hl,children:[c.jsx(di,{label:"Peso 1er Servicio",type:"number",name:"pesoPrimerServicioKg",value:i.pesoPrimerServicioKg,onChange:l,unit:"Kg"}),c.jsx(di,{label:"Días de Gestación",type:"number",name:"diasGestacion",value:i.diasGestacion,onChange:l,unit:"días"}),c.jsx(di,{label:"Días Confirmar Preñez",type:"number",name:"diasConfirmarPrenez",value:i.diasConfirmarPrenez,onChange:l,unit:"días"}),c.jsx(di,{label:"Días de Pre-parto",type:"number",name:"diasPreParto",value:i.diasPreParto,onChange:l,unit:"días"})]}),c.jsxs(Zf,{title:"Manejo Productivo (Leche)",icon:qH,children:[c.jsx(di,{label:"Días de Lactancia (Meta)",type:"number",name:"diasLactanciaObjetivo",value:i.diasLactanciaObjetivo,onChange:l,unit:"días"}),c.jsx(di,{label:"Días Secado (Meta)",type:"number",name:"diasSecadoObjetivo",value:i.diasSecadoObjetivo,onChange:l,unit:"días"})]}),c.jsxs(Zf,{title:"Manejo Crecimiento (Kilos)",icon:ba,children:[c.jsx(di,{label:"Edad Destete (Meta)",type:"number",name:"edadDesteteDias",value:i.edadDesteteDias,onChange:l,unit:"días"}),c.jsx(di,{label:"Peso Destete (Meta)",type:"number",name:"pesoDesteteMetaKg",value:i.pesoDesteteMetaKg,onChange:l,unit:"Kg"})]}),c.jsxs(Zf,{title:"Manejo Sanitario (StockCare)",icon:pp,children:[c.jsx(di,{label:"Días Alerta (Atraso)",type:"number",name:"diasAlertaAtraso",value:i.diasAlertaAtraso,onChange:l,unit:"días"}),c.jsx(di,{label:"Días Retiro Leche",type:"number",name:"diasRetiroLecheDefault",value:i.diasRetiroLecheDefault,onChange:l,unit:"días"}),c.jsx(di,{label:"Días Retiro Carne",type:"number",name:"diasRetiroCarneDefault",value:i.diasRetiroCarneDefault,onChange:l,unit:"días"})]}),c.jsxs(Zf,{title:"Economía (Cents)",icon:pl,children:[c.jsx(di,{label:"Símbolo Moneda",type:"text",name:"monedaSimbolo",value:i.monedaSimbolo,onChange:l}),c.jsx(di,{label:"Costo Saco Alimento",type:"number",name:"costoSacoAlimento",value:i.costoSacoAlimento,onChange:l,unit:i.monedaSimbolo}),c.jsx(di,{label:"Peso Saco Alimento",type:"number",name:"pesoSacoAlimentoKg",value:i.pesoSacoAlimentoKg,onChange:l,unit:"Kg"}),c.jsx(di,{label:"Precio Venta Leche",type:"number",name:"precioLecheLitro",value:i.precioLecheLitro,onChange:l,unit:`${i.monedaSimbolo}/L`}),c.jsx(di,{label:"Precio Venta Cabrito",type:"number",name:"precioVentaCabritoKg",value:i.precioVentaCabritoKg,onChange:l,unit:`${i.monedaSimbolo}/Kg`}),c.jsx(di,{label:"Precio Venta Descarte",type:"number",name:"precioVentaDescarteAdulto",value:i.precioVentaDescarteAdulto,onChange:l,unit:i.monedaSimbolo})]})]})]})}const Xze=[{id:"rebano",name:"Rebaño",icon:Db,color:"bg-amber-600"},{id:"lactokeeper",name:"LactoKeeper",icon:bf,color:"bg-brand-blue"},{id:"kilos",name:"Kilos",icon:md,color:"bg-brand-green"},{id:"salud",name:"StockCare",icon:fS,color:"bg-teal-500"},{id:"cents",name:"Cents",icon:pl,color:"bg-yellow-500"},{id:"evolucion",name:"Evolución",icon:ba,color:"bg-indigo-500"}],Qb=({onSwitchModule:t})=>{const[e,n]=I.useState(!1),r=i=>{n(!1),t(i)};return c.jsxs("div",{className:"fixed bottom-24 right-4 z-40 flex flex-col items-end gap-4",children:[c.jsx("div",{className:`flex flex-col items-end gap-4 transition-all duration-300 ease-in-out overflow-hidden ${e?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:Xze.map(i=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"bg-black/60 backdrop-blur-md text-white text-sm font-semibold px-3 py-1 rounded-md shadow-lg",children:i.name}),c.jsx("button",{onClick:()=>r(i.id),className:`w-14 h-14 rounded-full flex items-center justify-center text-white shadow-lg ${i.color} transform transition-transform hover:scale-110`,"aria-label":`Cambiar al módulo ${i.name}`,children:c.jsx(i.icon,{size:28})})]},i.id))}),c.jsx("button",{onClick:()=>n(!e),className:"w-16 h-16 rounded-full flex items-center justify-center text-black bg-brand-amber shadow-2xl shadow-black/50 transform transition-transform duration-200 hover:scale-110 pointer-events-auto","aria-label":"Seleccionar módulo",children:c.jsx("div",{className:`transform transition-transform duration-300 ${e?"rotate-180 scale-75":"rotate-0"}`,children:e?c.jsx(Xl,{size:32}):c.jsx(BH,{size:32})})})]})};function Qze(t){return xl({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224l0 32 0 160c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-88.2c9.9 6.6 20.6 12 32 16.1l0 24.2c0 8.8 7.2 16 16 16s16-7.2 16-16l0-16.9c5.3 .6 10.6 .9 16 .9s10.7-.3 16-.9l0 16.9c0 8.8 7.2 16 16 16s16-7.2 16-16l0-24.2c11.4-4 22.1-9.4 32-16.1l0 88.2c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-160 32 32 0 49.5c0 9.5 2.8 18.7 8.1 26.6L530 427c8.8 13.1 23.5 21 39.3 21c22.5 0 41.9-15.9 46.3-38l20.3-101.6c2.6-13-.3-26.5-8-37.3l-3.9-5.5 0-81.6c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 14.4-52.9-74.1C496 86.5 452.4 64 405.9 64L272 64l-16 0-64 0-48 0C77.7 64 24 117.7 24 184l0 54C9.4 249.8 0 267.8 0 288l0 17.6c0 8 6.4 14.4 14.4 14.4C46.2 320 72 294.2 72 262.4l0-6.4 0-32 0-40c0-24.3 12.1-45.8 30.5-58.9C98.3 135.9 96 147.7 96 160l0 64zM560 336a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zM166.6 166.6c-4.2-4.2-6.6-10-6.6-16c0-12.5 10.1-22.6 22.6-22.6l178.7 0c12.5 0 22.6 10.1 22.6 22.6c0 6-2.4 11.8-6.6 16l-23.4 23.4C332.2 211.8 302.7 224 272 224s-60.2-12.2-81.9-33.9l-23.4-23.4z"},child:[]}]})(t)}const Zze={idle:{Icon:Pce,color:"text-green-500",label:"Datos sincronizados"},syncing:{Icon:Ece,color:"text-amber-500 animate-spin-slow",label:"Sincronizando datos..."},offline:{Icon:kce,color:"text-red-500",label:"Sin conexión"}},yv=({status:t})=>{const{Icon:e,color:n,label:r}=Zze[t];return c.jsx("div",{className:"flex items-center gap-2",title:r,children:c.jsx(e,{className:`w-5 h-5 ${n}`})})};function Jze({initialState:t,onSwitchModule:e}){const{syncStatus:n}=Xt(),[r,i]=I.useState({name:"lots-dashboard"}),[a,s]=I.useState([]);I.useEffect(()=>{t&&t.page?(i(t.page),s([])):(i({name:"lots-dashboard"}),s([]))},[t]);const o=[{page:{name:"lots-dashboard"},label:"Lotes",icon:JH,mapsTo:["lots-dashboard","lot-detail","breeding-season-detail","sire-lot-detail","feeding-plan","batch-treatment"]},{page:{name:"herd"},label:"Rebaño",icon:Qze,mapsTo:["herd","rebano-profile","manage-lots","lactation-profile","growth-profile","configuracion"]},{page:{name:"farm-calendar"},label:"Calendario",icon:eT,mapsTo:["farm-calendar","birthing-season-detail"]},{page:{name:"add-animal"},label:"Añadir",icon:ol,mapsTo:["add-animal","ocr"]}],l=p=>{s(h=>[...h,r]),i(p)},u=()=>{const p=a.pop();p?(s([...a]),i(p)):t&&t.sourceModule?e(t.sourceModule):i({name:"lots-dashboard"})},d=p=>{s([]),i(p)},f=()=>{switch(r.name){case"lots-dashboard":return c.jsx(vF,{navigateTo:l});case"lot-detail":return c.jsx($Fe,{lotName:r.lotName,onBack:u,navigateTo:l});case"breeding-season-detail":return c.jsx(Sze,{seasonId:r.seasonId,onBack:u,navigateTo:l});case"sire-lot-detail":return c.jsx(Aze,{lotId:r.lotId,onBack:u,navigateTo:l});case"herd":return c.jsx(YFe,{navigateTo:l,locationFilter:r.locationFilter});case"manage-lots":return c.jsx(gze,{onBack:()=>d({name:"herd"})});case"management":return c.jsx(mze,{onSelectAnimal:p=>l({name:"rebano-profile",animalId:p})});case"add-animal":return c.jsx(WFe,{onBack:()=>d({name:"herd"})});case"rebano-profile":return c.jsx(hze,{animalId:r.animalId,onBack:u,navigateTo:l});case"lactation-profile":return c.jsx(eQ,{animalId:r.animalId,onBack:u,navigateTo:l});case"growth-profile":return c.jsx(Lze,{animalId:r.animalId,onBack:u});case"ocr":return c.jsx($ze,{onBack:u});case"feeding-plan":return c.jsx(Oze,{lotName:r.lotName,onBack:u});case"batch-treatment":return c.jsx(Rze,{lotName:r.lotName,onBack:u});case"farm-calendar":return c.jsx(Hze,{navigateTo:l});case"birthing-season-detail":return c.jsx(Kze,{seasonId:r.seasonId,onBack:u,navigateTo:l});case"configuracion":return c.jsx(Yze,{navigateTo:l,onBack:u});default:return c.jsx(vF,{navigateTo:l})}};return c.jsxs("div",{className:"font-sans text-gray-200 min-h-screen animate-fade-in",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Db,{className:"text-brand-orange",size:28}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),c.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Rebaño"})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(yv,{status:n}),c.jsx("button",{onClick:()=>l({name:"configuracion"}),className:"p-2 text-zinc-400 hover:text-white transition-colors",title:"Configuración",children:c.jsx(cT,{size:20})})]})]})}),c.jsx("main",{className:"pt-16 pb-16",children:f()})," ",c.jsx(Qb,{onSwitchModule:e}),c.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-20 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around h-16",children:[o.map(p=>{const h=p.mapsTo.includes(r.name);return c.jsxs("button",{onClick:()=>d(p.page),className:`relative flex flex-col items-center justify-center pt-3 pb-2 w-full transition-colors ${h?"text-amber-400":"text-gray-500 hover:text-white"}`,children:[c.jsx(p.icon,{className:"w-6 h-6"}),c.jsx("span",{className:"text-xs font-semibold mt-1",children:p.label})]},p.label)}),c.jsxs("button",{onClick:()=>og.signOut(),className:"relative flex flex-col items-center justify-center pt-3 pb-2 w-full text-gray-500 hover:text-red-400 transition-colors",children:[c.jsx(WH,{className:"w-6 h-6"}),c.jsx("span",{className:"text-xs font-semibold mt-1",children:"Salir"})]})]})]})}function zF({onNavigateToAnalysis:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=Xt(),[a,s]=I.useState("current"),[o,l]=I.useState(!1),[u,d]=I.useState(!1),f=I.useMemo(()=>{if(i||!n.length||!e.length)return{herdAverage:0,activeGoats:0,herdLactationCurve:[],gaussData:{distribution:[],mean:0,stdDev:0}};let p=0;if(n.length>0){const T=n.reduce((j,E)=>E.date>j?E.date:j,n[0].date);p=new Set(n.filter(j=>j.date===T).map(j=>j.goatId)).size}let h=n;if(a==="current"){const T=new Set(r.filter(j=>j.status==="activa").map(j=>j.goatId));h=n.filter(j=>T.has(j.goatId))}const m={};h.forEach(T=>{const j=r.filter(k=>k.goatId===T.goatId&&new Date(T.date)>=new Date(k.parturitionDate)).sort((k,O)=>new Date(O.parturitionDate).getTime()-new Date(k.parturitionDate).getTime())[0];if(!j)return;const E=Ff(j.parturitionDate,T.date);m[E]||(m[E]={totalKg:0,count:0}),m[E].totalKg+=T.kg,m[E].count++});const g=Object.entries(m).map(([T,j])=>({del:parseInt(T),kg:j.totalKg/j.count,name:"Promedio Rebaño"})).sort((T,j)=>T.del-j.del),v=e.map(T=>{const j=n.filter(k=>k.goatId===T.id);return j.length===0?null:{avg:j.reduce((k,O)=>k+O.kg,0)/j.length}}).filter(Boolean),y=v.length>0?v.reduce((T,j)=>T+j.avg,0)/v.length:0,b=v.length>0?Math.sqrt(v.reduce((T,j)=>T+Math.pow(j.avg-y,2),0)/v.length):0,S=[];if(v.length>0){const T=Math.floor(Math.min(...v.map(E=>E.avg))*4)/4,j=Math.ceil(Math.max(...v.map(E=>E.avg))*4)/4;for(let E=T;E<=j;E+=.25){const k=E,O=E+.25,D=v.filter(M=>M.avg>=k&&M.avg<O).length;D>0&&S.push({range:`${k.toFixed(2)}`,count:D})}}const A={distribution:S,mean:y,stdDev:b};return{herdAverage:n.length>0?n.reduce((T,j)=>T+j.kg,0)/n.length:0,activeGoats:p,herdLactationCurve:g,gaussData:A}},[e,n,r,i,a]);return i?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos del rebaño..."})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 px-4",children:[c.jsxs("header",{className:"text-center pt-4 pb-4",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Dashboard de Producción"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Análisis General de LactoKeeper"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[c.jsx(ev,{size:14}),c.jsx("span",{children:"Promedio Global"})]}),c.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[f.herdAverage.toFixed(2)," ",c.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"Kg"})]})]}),c.jsxs("button",{onClick:t,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[c.jsx(Wce,{}),c.jsx("span",{children:"Animales en Ordeño"})]}),c.jsx("p",{className:"text-4xl font-bold tracking-tight text-white",children:f.activeGoats})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[c.jsx(UN,{size:16}),c.jsx("span",{children:"Curva de Lactancia"}),c.jsx("button",{onClick:()=>l(!0),className:"text-zinc-500 hover:text-white transition-colors",children:c.jsx(K2,{size:14})})]}),c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-lg p-0.5",children:[c.jsx("button",{onClick:()=>s("current"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${a==="current"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Actual"}),c.jsx("button",{onClick:()=>s("historical"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${a==="historical"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Histórico"})]})]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{children:c.jsxs(m_,{data:f.herdLactationCurve,margin:{top:5,right:10,left:0,bottom:5},children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"lactationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#FF9500",stopOpacity:.7}),c.jsx("stop",{offset:"80%",stopColor:"#34C759",stopOpacity:.1})]})}),c.jsx(Di,{dataKey:"del",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),c.jsx(Ki,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,domain:["dataMin - 0.5","dataMax + 0.5"],width:30}),c.jsx(Or,{content:c.jsx(yu,{})}),c.jsx(Us,{type:"monotone",dataKey:"kg",stroke:"#FF9500",strokeWidth:2.5,fill:"url(#lactationGradient)"})]})})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[c.jsx(UN,{size:16}),c.jsx("span",{children:"Distribución del Rebaño"}),c.jsx("button",{onClick:()=>d(!0),className:"text-zinc-500 hover:text-white transition-colors",children:c.jsx(K2,{size:14})})]})}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{children:c.jsxs(gl,{data:f.gaussData.distribution,margin:{top:10,right:10,left:0,bottom:0},children:[c.jsx(Rf,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),c.jsx(Di,{dataKey:"range",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),c.jsx(Ki,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,allowDecimals:!1,width:30}),c.jsx(Or,{content:c.jsx(yu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx($a,{dataKey:"count",fill:"rgba(255, 255, 255, 0.4)",name:"Nº de Cabras"}),c.jsx(Wb,{x:f.gaussData.mean.toFixed(2),stroke:"#34C759",strokeWidth:2,label:{value:"μ",fill:"#34C759",position:"insideTopLeft"}})]})})})]})]}),c.jsx(cn,{isOpen:o,onClose:()=>l(!1),title:"¿Qué es la Curva de Lactancia del Rebaño?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:'Este gráfico revela la **"personalidad productiva"** de tu rebaño. No es un promedio simple, sino una línea de tiempo del rendimiento promedio.'}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"¿Cómo se Calcula?"}),c.jsx("p",{className:"text-sm",children:'Para cada "Día en Leche" (DEL) en el eje horizontal, el sistema agrupa los pesajes de **todos los animales** que han pasado por ese día de su ciclo y calcula el promedio.'}),c.jsxs("p",{className:"text-sm mt-2 bg-black/20 p-2 rounded-md",children:[c.jsx("strong",{children:"Ejemplo:"}),' El punto en "DEL 50" es el promedio de todos los pesajes que se hicieron a cualquier animal cuando estaba exactamente en su día 50 de lactancia.']})]}),c.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Te permite responder visualmente a preguntas clave como: ¿Cuándo ocurre el pico de producción del rebaño? y ¿Qué tan persistente es la lactancia después del pico?"})]})}),c.jsx(cn,{isOpen:u,onClose:()=>d(!1),title:"¿Qué es la Distribución del Rebaño?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:"Este gráfico, conocido como Campana de Gauss o distribución normal, clasifica el rendimiento promedio de cada animal en el rebaño."}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Media (μ)"}),c.jsx("p",{className:"text-sm",children:"La línea verde marcada como **μ** representa el **promedio de producción de todo el rebaño**. Es el punto de referencia central."})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Las Barras"}),c.jsx("p",{className:"text-sm",children:"Cada barra muestra cuántos animales caen dentro de un rango específico de producción. Una barra alta en el centro (cerca de μ) indica que la mayoría de tu rebaño tiene un rendimiento promedio y consistente."})]}),c.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Esta herramienta es clave para identificar rápidamente a los animales de élite (extremo derecho) y a los que podrían necesitar atención (extremo izquierdo)."})]})})]})}const c5=(t,e,n,r,i)=>I.useMemo(()=>{if(!t.length||!e.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const a=t.reduce((g,v)=>{const y=e.find(E=>E.id===v.goatId);if(!y)return g;const b=r.filter(E=>E.goatId===y.id&&new Date(E.parturitionDate)<=new Date(v.date)).sort((E,k)=>new Date(k.parturitionDate).getTime()-new Date(E.parturitionDate).getTime())[0];if(!b)return g;const S=Ff(b.parturitionDate,v.date),A=i?JLe(v.kg,S):v.kg,C=n.filter(E=>E.goatId===y.id).sort((E,k)=>new Date(k.date).getTime()-new Date(E.date).getTime());let T="single";const j=C.findIndex(E=>E.date===v.date);if(j!==-1&&j+1<C.length){const E=C[j+1],k=v.kg-E.kg,O=.15;k>O?T="up":k<-O?T="down":T="stable"}return g.push({...y,latestWeighing:v.kg,weighingId:v.id,del:S,score:A,trend:T,date:v.date}),g},[]);if(!a.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const s=i?"score":"latestWeighing",o=a.reduce((g,v)=>g+v[s],0)/a.length,l=Math.sqrt(a.reduce((g,v)=>g+Math.pow(v[s]-o,2),0)/a.length),u=o-.4*l,d=o+.4*l,f=a.map(g=>{const v=g[s];let y="Promedio";return l>.1&&(v<u?y="Pobre":v>d&&(y="Sobresaliente")),{...g,classification:y}}),p=[{name:"Pobre",count:f.filter(g=>g.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:f.filter(g=>g.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:f.filter(g=>g.classification==="Sobresaliente").length,fill:"#34C759"}],h=a.length>0?a.reduce((g,v)=>g+v.latestWeighing,0)/a.length:0,m=a.length>0?a.reduce((g,v)=>g+v.score,0)/a.length:0;return{classifiedAnimals:f,distribution:p,mean:h,stdDev:l,weightedMean:m}},[t,e,n,r,i]),e9e=({trend:t,isLongTrend:e})=>{if(!t||t==="single")return null;const n={up:{Icon:ug,color:"text-brand-green"},down:{Icon:cg,color:"text-brand-red"},stable:{Icon:sT,color:"text-zinc-400"}},{Icon:r,color:i}=n[t];return c.jsxs("div",{className:`flex items-center font-semibold text-sm ${i}`,children:[c.jsx(r,{size:18,strokeWidth:3}),e&&c.jsx("span",{className:"ml-0.5 font-bold",children:"+"})]})},_D=(t,e)=>I.useMemo(()=>{if(!t||!e)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};const r=e.filter(d=>d.goatId===t).sort((d,f)=>new Date(f.date).getTime()-new Date(d.date).getTime());if(r.length<1)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};if(r.length===1)return{trend:"single",difference:0,isLongTrend:!1,lastTwoWeighings:[r[0]]};const i=r[0],a=r[1],s=i.kg-a.kg,o=.15;let l;s>o?l="up":s<-o?l="down":l="stable";let u=!1;if(r.length>=3){const d=r[2],f=a.kg-d.kg,p=s>o&&f>o,h=s<-o&&f<-o;(p||h)&&(u=!0)}return{trend:l,difference:s,isLongTrend:u,lastTwoWeighings:[i,a]}},[t,e]),t9e=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{parturitions:r,addWeighing:i,startDryingProcess:a,setLactationAsDry:s}=Xt(),[o,l]=I.useState(new Date().toISOString().split("T")[0]),[u,d]=I.useState(""),[f,p]=I.useState(!1),[h,m]=I.useState(null),[g,v]=I.useState(!1),y=I.useMemo(()=>r.filter(j=>j.goatId===t.id&&(j.status==="activa"||j.status==="en-secado")).sort((j,E)=>new Date(E.parturitionDate).getTime()-new Date(j.parturitionDate).getTime())[0],[r,t.id]),b=y?Ff(y.parturitionDate,o):null,S=t.name?String(t.name).toUpperCase().trim():"",A=async j=>{if(j.preventDefault(),!y||y.status==="seca"||y.status==="finalizada"){m({type:"error",text:"No se puede guardar pesaje. El animal no tiene una lactancia activa o en secado."});return}m(null),p(!0);const E=parseFloat(u);if(isNaN(E)||E<=0){m({type:"error",text:"Por favor, introduce un peso válido."}),p(!1);return}if(E>8.5){m({type:"error",text:"La producción parece irracionalmente alta (> 8.5 Kg)."}),p(!1);return}try{await i({goatId:t.id,date:o,kg:E}),m({type:"success",text:`Pesaje de ${t.id.toUpperCase()} guardado.`}),setTimeout(e,1500)}catch(k){m({type:"error",text:k.message||"No se pudo guardar el pesaje."}),p(!1)}},C=async()=>{if(!(!y||y.status!=="activa")){p(!0),m(null);try{await a(y.id),m({type:"success",text:"Proceso de secado iniciado con éxito."}),setTimeout(e,1500)}catch(j){m({type:"error",text:j.message||"No se pudo iniciar el secado."}),p(!1)}}},T=async()=>{if(!(!y||y.status==="seca"||y.status==="finalizada")){p(!0),m(null);try{await s(y.id),m({type:"success",text:"Lactancia declarada como seca con éxito."}),setTimeout(e,1500)}catch(j){m({type:"error",text:j.message||"No se pudo finalizar la lactancia."}),p(!1)}}};return c.jsxs(c.Fragment,{children:[c.jsx(cn,{isOpen:!g,onClose:n,title:"Pesaje Lechero",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"font-mono font-semibold text-xl text-white truncate",children:t.id.toUpperCase()}),S&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:S})]}),y?c.jsxs("form",{onSubmit:A,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weighingDateMilk",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),c.jsx("input",{id:"weighingDateMilk",type:"date",value:o,onChange:j=>l(j.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-white",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Días en Leche (DEL)"}),c.jsx("div",{className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center font-bold text-white",children:b??"N/A"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weighingKgMilk",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Producción (Kg)"}),c.jsx("input",{id:"weighingKgMilk",type:"number",step:"0.1",value:u,onChange:j=>d(j.target.value),placeholder:"Ej: 3.5",autoFocus:!0,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-white",required:!0})]}),h&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${h.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[h.type==="success"?c.jsx(Za,{size:18}):c.jsx(mr,{size:18}),c.jsx("span",{children:h.text})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[c.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),c.jsxs("button",{type:"submit",disabled:f,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[c.jsx(tv,{size:18})," Guardar Pesaje"]})]}),c.jsxs("div",{className:"space-y-2 pt-4 border-t border-brand-border",children:[c.jsx("h4",{className:"text-sm font-semibold text-zinc-400",children:"Otras Acciones de Lactancia"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsxs("button",{type:"button",onClick:C,disabled:f||y.status!=="activa",className:"w-full flex items-center justify-center gap-2 bg-blue-600/20 text-blue-300 font-semibold py-3 px-3 rounded-lg hover:bg-blue-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(mp,{size:16})," ",y.status==="en-secado"?"Ya en Secado":"Iniciar Secado"]}),c.jsxs("button",{type:"button",onClick:T,disabled:f||y.status==="seca"||y.status==="finalizada",className:"w-full flex items-center justify-center gap-2 bg-gray-600/20 text-gray-300 font-semibold py-3 px-3 rounded-lg hover:bg-gray-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Gl,{size:16})," ",y.status==="seca"?"Ya Seca":"Declarar Seca"]})]})]})]}):c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx(mr,{className:"mx-auto h-12 w-12 text-amber-400"}),c.jsx("h3",{className:"text-lg font-medium text-white",children:"Animal sin Parto Activo"}),c.jsx("p",{className:"text-sm text-zinc-400",children:"Para registrar un pesaje o gestionar el secado, debe tener un parto activo."}),c.jsxs("button",{onClick:()=>v(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(hl,{size:18})," Declarar Parto"]})]})]})}),g&&c.jsx(Cp,{isOpen:g,onClose:()=>{v(!1)},motherId:t.id})]})},n9e=()=>{const{animals:t,parturitions:e,weighings:n,appConfig:r}=Xt();return I.useMemo(()=>{const a=new Date().toISOString().split("T")[0],s=new Set,o=r.diasLactanciaObjetivo-35,l=r.diasLactanciaObjetivo-5;return e.forEach(d=>{if(d.status==="activa"){const f=Ff(d.parturitionDate,a);f>=o&&f<=l&&s.add(d.goatId)}}),t.filter(d=>d.reproductiveStatus==="Preñada"&&!d.isReference).forEach(d=>{const f=n.filter(p=>p.goatId===d.id).sort((p,h)=>new Date(h.date).getTime()-new Date(p.date).getTime());if(f.length>=4){const p=f[0].kg,h=f[1].kg,m=f[2].kg,g=f[3].kg;p<h&&h<m&&m<g&&s.add(d.id)}}),e.forEach(d=>{d.status==="en-secado"&&s.add(d.goatId)}),Array.from(s)},[t,e,n,r.diasLactanciaObjetivo])},r9e=({isOpen:t,onClose:e,animalIds:n,onSelectAnimal:r})=>{const{animals:i,fathers:a}=Xt(),s=I.useMemo(()=>{const o=new Map(i.map(u=>[u.id,u])),l=new Map(a.map(u=>[u.id,u]));return n.map(u=>{const d=o.get(u);if(d)return d;const f=l.get(u);return f?{id:f.id,name:f.name,sex:"Macho",isReference:!0}:{id:u,name:void 0}}).sort((u,d)=>u.id.localeCompare(d.id))},[n,i,a]);return c.jsxs(cn,{isOpen:t,onClose:e,title:"Animales que Salieron del Ordeño",children:[c.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto pr-2",children:s.length>0?s.map(o=>{const l=o.name?String(o.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>{r(o.id),e()},className:"w-full text-left p-3 bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors flex justify-between items-center group",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:o.id.toUpperCase()}),l&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:l})]}),c.jsx(Wi,{className:"text-zinc-500 group-hover:text-white transition-colors flex-shrink-0"})]},o.id)}):c.jsx("p",{className:"text-center text-zinc-500 py-4",children:"No hay animales que hayan salido en este período."})}),c.jsx("div",{className:"flex justify-end mt-4 pt-4 border-t border-brand-border",children:c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cerrar"})})]})},i9e=({isOpen:t,onClose:e,onConfirm:n,dateToDelete:r})=>{const[i,a]=I.useState(""),s=r?new Date(r+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"",o=i===r;return I.useEffect(()=>{t&&a("")},[t]),c.jsx(cn,{isOpen:t,onClose:e,title:"Confirmar Eliminación",children:c.jsxs("div",{className:"space-y-4 text-white",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(mr,{className:"mx-auto h-12 w-12 text-brand-red"}),c.jsxs("p",{className:"text-lg font-semibold",children:["¿Eliminar todos los pesajes del ",c.jsx("span",{className:"font-bold",children:s}),"?"]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Esta acción es irreversible y eliminará ",r?"permanentemente":""," todos los registros de esta fecha."]})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"confirmDateInput",className:"block text-sm font-medium text-zinc-400 mb-1",children:["Para confirmar, escribe la fecha: ",c.jsx("strong",{className:"text-zinc-200",children:r})]}),c.jsx("input",{id:"confirmDateInput",type:"text",value:i,onChange:l=>a(l.target.value),placeholder:"YYYY-MM-DD",className:`w-full bg-zinc-800 p-3 rounded-xl text-lg text-center font-mono border-2 ${i&&!o?"border-red-500":"border-zinc-700"} focus:border-brand-red focus:ring-0`})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:n,disabled:!o,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Eliminar Permanentemente"})]})]})})},l1=({title:t,value:e,unit:n,icon:r,onClick:i})=>c.jsxs("button",{onClick:i,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-orange transition-colors w-full",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(r,{size:14}),c.jsx("span",{children:t})]}),c.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:[e," ",c.jsx("span",{className:"text-lg text-zinc-400",children:n})]})]}),DC=({animal:t,onSelectAnimal:e,onOpenActions:n,isNewEntry:r})=>{const{weighings:i}=Xt(),{trend:a,isLongTrend:s}=_D(t.id,i),o=vp(),l=I.useRef(!1),u={Sobresaliente:"bg-brand-green",Promedio:"bg-gray-500",Pobre:"bg-brand-red"},d=t.name?String(t.name).toUpperCase().trim():"",f=(p,h)=>{const m=h.offset.x,g=h.velocity.x;(m<-80/2||g<-500)&&n(t),o.start({x:0}),setTimeout(()=>{l.current=!1},100)};return c.jsxs("div",{className:"relative w-full overflow-hidden bg-brand-glass border-b border-brand-border/50 last:border-b-0",children:[c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:c.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(qi,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Acciones"})]})}),c.jsxs(Ui.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{l.current=!0},onDragEnd:f,onTap:()=>{l.current||e(t.id)},animate:o,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-3",children:[c.jsx("div",{className:`absolute top-3 right-3 w-2.5 h-2.5 rounded-full ${t.latestWeighing>0?u[t.classification]:"bg-transparent"}`,title:`Rendimiento: ${t.classification}`}),c.jsxs("div",{className:"flex justify-between items-center w-full",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),d&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:d}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})})]}),c.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"font-semibold text-base text-brand-orange",children:t.latestWeighing>0?`${t.latestWeighing.toFixed(2)} Kg`:"Sin Pesar"}),t.del>0&&c.jsxs("p",{className:"text-xs text-zinc-400",children:["DEL: ",t.del]})]}),c.jsx(EX,{statuses:t.statusObjects}),r?c.jsx("span",{title:"Primer Ingreso al Control Lechero",className:"w-6 h-6 flex items-center justify-center rounded-full bg-green-500/20 text-brand-green",children:c.jsx(HH,{size:16,strokeWidth:2.5})}):c.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:c.jsx(e9e,{trend:a,isLongTrend:s})}),c.jsx(Wi,{className:"text-zinc-600 w-5 h-5"})]})]})]})]})},a9e=({animalId:t})=>{var i,a;const{weighings:e}=Xt(),{lastTwoWeighings:n,difference:r}=_D(t,e);return n.length<2?c.jsx("p",{children:"No hay suficientes datos para comparar."}):c.jsxs("div",{className:"text-center text-white space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-zinc-400",children:["Pesaje Anterior (",new Date(n[1].date+"T00:00:00").toLocaleDateString(),")"]}),c.jsxs("p",{className:"text-2xl font-semibold",children:[((i=n[1])==null?void 0:i.kg.toFixed(2))||"N/A"," Kg"]})]}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-zinc-400",children:["Último Pesaje (",new Date(n[0].date+"T00:00:00").toLocaleDateString(),")"]}),c.jsxs("p",{className:"text-2xl font-semibold",children:[((a=n[0])==null?void 0:a.kg.toFixed(2))||"N/A"," Kg"]})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-zinc-400 text-base mb-1",children:"Diferencia"}),c.jsxs("p",{className:`text-3xl font-bold ${r>.15?"text-brand-green":r<-.15?"text-brand-red":"text-zinc-400"}`,children:[r>0?"+":"",r.toFixed(2)," Kg"]})]})]})},s9e=t=>{const{x:e,y:n,width:r,height:i,value:a,total:s}=t;if(s===0||a===0)return null;const o=(a/s*100).toFixed(0);return c.jsx("text",{x:e+r/2,y:n+i/2,fill:"#fff",textAnchor:"middle",dominantBaseline:"middle",fontSize:"14px",fontWeight:"bold",opacity:.8,children:`${o}%`})};function o9e({onSelectAnimal:t}){const{animals:e,parturitions:n,weighings:r,isLoading:i,serviceRecords:a,sireLots:s,breedingSeasons:o,startDryingProcess:l,setLactationAsDry:u,deleteWeighingSession:d}=Xt(),[f,p]=I.useState(!1),[h,m]=I.useState("all"),[g,v]=I.useState("all"),[y,b]=I.useState("all"),[S,A]=I.useState("all"),[C,T]=I.useState(null),[j,E]=I.useState(null),[k,O]=I.useState(!1),[D,M]=I.useState(!1),[L,V]=I.useState(!1),[Q,Y]=I.useState(!1),[J,q]=I.useState(null),[ee,le]=I.useState(!1),[se,$]=I.useState(0),G=n9e(),{weighingsByDate:te,availableDates:oe}=I.useMemo(()=>{const at={};r.forEach(xt=>{at[xt.date]||(at[xt.date]=[]),at[xt.date].push(xt)});const vt=Object.keys(at).sort((xt,tt)=>new Date(tt).getTime()-new Date(xt).getTime());return{weighingsByDate:at,availableDates:vt}},[r]),ge=oe[se],_e=I.useMemo(()=>{if(!ge)return[];const at=te[ge]||[],vt=new Map;return at.forEach(xt=>vt.set(xt.goatId,xt)),Array.from(vt.values())},[ge,te]),{classifiedAnimals:Ce,distribution:fe,mean:be,stdDev:we,weightedMean:ie}=c5(_e,e,r,n,f),He=I.useMemo(()=>{const at=new Map(e.map(vt=>[vt.id,vt]));return Ce.map(vt=>{const xt=at.get(vt.id);return{...xt,...vt,formattedAge:xt?Lc(xt.birthDate):"N/A",statusObjects:xt?CX(xt,n,a,s,o):[]}})},[Ce,e,n,a,s,o]),Me=I.useMemo(()=>{if(se+1<oe.length){const at=oe[se+1];return te[at]||[]}return[]},[se,oe,te]),he=c5(Me,e,r,n,!1),We=I.useMemo(()=>{const at=new Set(Ce.map(fn=>fn.id)),vt=new Set(he.classifiedAnimals.map(fn=>fn.id));let xt=new Set,tt=new Set;se===oe.length-1&&oe.length>0?xt=at:oe.length>0&&(xt=new Set([...at].filter(fn=>!vt.has(fn))),tt=new Set([...vt].filter(fn=>!at.has(fn))));const zt=oe.slice(Math.max(0,se-2),se+1).map(fn=>{const qt=te[fn]||[];if(qt.length===0)return{date:fn,avg:0};const Sn=qt.reduce((Oi,Nr)=>Oi+Nr.kg,0);return{date:new Date(fn+"T00:00:00").toLocaleDateString("es-VE",{month:"short",day:"numeric"}),avg:Sn/qt.length}}).reverse();let ht=null,mt=null,Mt=0,_t=0,Ht=1/0;if(He.length>0){Mt=He.reduce((qt,Sn)=>qt+Sn.latestWeighing,0);const fn=He.map(qt=>qt.latestWeighing);_t=Math.max(...fn),Ht=Math.min(...fn.filter(qt=>qt>0)),Ht===1/0&&(Ht=0),ht=He.find(qt=>qt.latestWeighing===_t)||null,mt=He.find(qt=>qt.latestWeighing===Ht)||null}const gn=be-we,on=be+we,wt=Ce.filter(fn=>fn.latestWeighing>=gn&&fn.latestWeighing<=on).length,Xn=Ce.length>0?wt/Ce.length*100:0;return{trendData:zt,kpi:{total:Mt,max:_t,min:Ht},topPerformer:ht,bottomPerformer:mt,consistency:{percentage:Xn},newAnimalIds:xt,exitingAnimalIds:tt}},[Ce,He,he.classifiedAnimals,oe,se,te,be,we]),{searchTerm:pt,setSearchTerm:gt,filteredItems:Xe}=wD(He,["id","name"]),Ot=I.useMemo(()=>{let at=pt?Xe:He;return h!=="all"&&(at=at.filter(vt=>vt.classification===h)),y==="new"&&(at=at.filter(vt=>We.newAnimalIds.has(vt.id))),g!=="all"&&(at=at.filter(vt=>{const{trend:xt}=_D(vt.id,r);return xt===g})),S!=="all"&&(at=at.filter(vt=>{const xt=vt.del;return S==="drying"?G.includes(vt.id):xt===0||xt===void 0?!1:S==="first"?xt>0&&xt<=100:S==="second"?xt>100&&xt<=200:S==="third"?xt>200&&xt<270:!1})),at.sort((vt,xt)=>xt.latestWeighing-vt.latestWeighing)},[pt,Xe,He,h,g,S,y,We.newAnimalIds,G,r]),ft=I.useMemo(()=>{const at=Ce.filter(zt=>!We.newAnimalIds.has(zt.id)).length;if(Ce.length===0)return{up:0,down:0,stable:0,new:0};if(at===0&&We.newAnimalIds.size>0)return{up:0,down:0,stable:0,new:100};if(at===0)return{up:0,down:0,stable:0,new:0};const vt=Ce.filter(zt=>zt.trend==="up").length,xt=Ce.filter(zt=>zt.trend==="down").length,tt=Ce.filter(zt=>zt.trend==="stable").length;return{up:vt/at*100,down:xt/at*100,stable:tt/at*100,new:We.newAnimalIds.size/Ce.length*100||0}},[Ce,We.newAnimalIds]),ut=()=>{m("all"),v("all"),A("all"),b("all"),gt("")},Dt=at=>{var vt;if((vt=at==null?void 0:at.payload)!=null&&vt.name){const xt=at.payload.name;m(tt=>tt===xt?"all":xt)}},Yt=at=>{q(at),Y(!0)},Qt=at=>{if(!at)return[];const vt=[],xt=n.find(tt=>tt.goatId===at.id&&(tt.status==="activa"||tt.status==="en-secado"));return vt.push({label:"Registrar/Editar Pesaje",icon:bf,onClick:()=>{Y(!1),T("milkWeighing")}}),xt&&(xt.status==="activa"&&vt.push({label:"Iniciar Secado",icon:mp,onClick:()=>{l(xt.id),Y(!1)},color:"text-blue-400"}),(xt.status==="activa"||xt.status==="en-secado")&&vt.push({label:"Declarar Seca",icon:Gl,onClick:()=>{u(xt.id),Y(!1)},color:"text-zinc-400"})),vt},Ft=()=>{T(null),q(null)},sn=async()=>{if(ge)try{await d(ge),$(0),le(!1)}catch(at){console.error("Error deleting session:",at)}};return i&&oe.length===0?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Calculando análisis..."})}):oe.length===0?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"No hay pesajes registrados."})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{className:"bg-brand-glass rounded-2xl p-3 border border-brand-border flex justify-between items-center",children:[c.jsx("button",{onClick:()=>$(at=>Math.min(at+1,oe.length-1)),disabled:se>=oe.length-1,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:c.jsx(Sce,{})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-lg font-semibold text-white",children:ge?new Date(ge+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Sin Datos"}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[_e.length," animales pesados"]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsxs("button",{onClick:()=>le(!0),className:"p-2 rounded-full text-zinc-500 hover:text-brand-red hover:bg-red-500/10 transition-colors mr-2",title:"Eliminar pesajes de este día",children:[" ",c.jsx(Yl,{size:18})," "]}),c.jsx("button",{onClick:()=>$(at=>Math.max(at-1,0)),disabled:se===0,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:c.jsx(Wi,{})})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(l1,{icon:bf,title:f?"Media Ponderada":"Media Prod.",value:(f?ie:be).toFixed(2),unit:"Kg",onClick:()=>T("media")}),c.jsx(l1,{icon:uT,title:"Prod. Total",value:We.kpi.total.toFixed(2),unit:"Kg",onClick:()=>T("total")}),c.jsx(l1,{icon:XH,title:"Consistencia",value:we.toFixed(2),unit:"σ",onClick:()=>T("stdDev")}),c.jsx(l1,{icon:ba,title:"Rango Prod.",value:`${We.kpi.min.toFixed(2)} - ${We.kpi.max.toFixed(2)}`,unit:"Kg",onClick:()=>T("rango")})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(UN,{className:"text-brand-orange w-[18px] h-[18px]"}),c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Análisis del Día"}),c.jsx("button",{onClick:()=>O(!0),className:"text-zinc-500 hover:text-white",children:c.jsx(K2,{size:14})})]}),c.jsxs("label",{className:"flex items-center space-x-2 text-sm text-zinc-300 cursor-pointer",children:[c.jsx(DA,{size:14,className:f?"text-brand-orange":"text-zinc-500"}),c.jsx("span",{children:"Ponderado a DEL"}),c.jsx("button",{type:"button",onClick:at=>{at.preventDefault(),at.stopPropagation(),M(!0)},className:"text-zinc-500 hover:text-white -ml-1",children:c.jsx(K2,{size:14})}),c.jsx("input",{type:"checkbox",checked:f,onChange:at=>p(at.target.checked),className:"form-checkbox h-4 w-4 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]})]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{children:c.jsxs(gl,{data:fe,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(Di,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Ki,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),c.jsx(Or,{content:c.jsx(yu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsxs($a,{dataKey:"count",onClick:Dt,cursor:"pointer",children:[fe.map(at=>c.jsx(Wl,{fill:at.fill,className:`${h!=="all"&&h!==at.name?"opacity-30":"opacity-100"} transition-opacity`},at.name)),c.jsx(No,{dataKey:"count",content:c.jsx(s9e,{total:Ce.length})})]})]})})}),c.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[c.jsxs("span",{children:["μ = ",be.toFixed(2)]})," | ",c.jsxs("span",{children:["σ = ",we.toFixed(2)]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center px-2 pt-2",children:[c.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[c.jsx("button",{onClick:()=>{v("all"),b("all")},className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors ${g==="all"&&y==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),c.jsxs("button",{onClick:()=>{v("up"),b("all")},disabled:ft.up===0&&Ce.length-We.newAnimalIds.size>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${g==="up"?"bg-brand-green/80 text-white":"bg-zinc-800/50 text-brand-green"} disabled:opacity-40`,children:[c.jsx(ug,{size:14})," ",c.jsxs("span",{children:[ft.up.toFixed(0),"%"]})]}),c.jsxs("button",{onClick:()=>{v("down"),b("all")},disabled:ft.down===0&&Ce.length-We.newAnimalIds.size>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${g==="down"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"} disabled:opacity-40`,children:[c.jsx(cg,{size:14})," ",c.jsxs("span",{children:[ft.down.toFixed(0),"%"]})]}),c.jsxs("button",{onClick:()=>{v("single"),b("all")},disabled:ft.new===0&&Ce.length>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${g==="single"?"bg-brand-blue/80 text-white":"bg-zinc-800/50 text-brand-blue"} disabled:opacity-40`,children:[c.jsx(DA,{size:14})," ",c.jsxs("span",{children:[ft.new.toFixed(0),"%"]})]})]}),c.jsx("button",{onClick:ut,title:"Limpiar todos los filtros",className:"text-zinc-500 hover:text-white",children:c.jsx(rT,{size:16})})]}),c.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[c.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Fase Lactancia:"}),c.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[c.jsx("button",{onClick:()=>A("all"),className:`px-2 py-1 text-xs font-semibold rounded-md ${S==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),c.jsx("button",{onClick:()=>A("first"),className:`px-2 py-1 text-xs font-semibold rounded-md ${S==="first"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"1er T"}),c.jsx("button",{onClick:()=>A("second"),className:`px-2 py-1 text-xs font-semibold rounded-md ${S==="second"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"2do T"}),c.jsx("button",{onClick:()=>A("third"),className:`px-2 py-1 text-xs font-semibold rounded-md ${S==="third"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"3er T"}),c.jsx("button",{onClick:()=>A("drying"),className:`px-2 py-1 text-xs font-semibold rounded-md ${S==="drying"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"}`,children:"A Secado"})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[c.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Movimientos:"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("button",{onClick:()=>b(at=>at==="new"?"all":"new"),disabled:We.newAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all ${y==="new"?"bg-brand-green text-white shadow-lg shadow-green-500/20":"bg-zinc-800/50 text-zinc-300"} ${We.newAnimalIds.size>0&&y!=="new"&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[c.jsx(HH,{size:14})," ",c.jsxs("span",{children:["Ingresos (",We.newAnimalIds.size,")"]})]}),c.jsxs("button",{onClick:()=>V(!0),disabled:We.exitingAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all bg-zinc-800/50 text-zinc-300 ${We.exitingAnimalIds.size>0&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[c.jsx(WH,{size:14})," ",c.jsxs("span",{children:["Salidas (",We.exitingAnimalIds.size,")"]})]})]})]})]}),c.jsxs("div",{className:"relative px-4",children:[c.jsx(hu,{className:"absolute left-7 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"}),c.jsx("input",{type:"search",placeholder:`Buscar ID o Nombre en ${Ot.length} animales...`,value:pt,onChange:at=>gt(at.target.value),className:"w-full bg-brand-glass border border-brand-border rounded-xl pl-10 pr-4 py-3 text-white focus:ring-2 focus:ring-brand-orange"})]})]}),c.jsx("div",{className:"pt-2 space-y-0 pb-4",children:Ot.length>0?c.jsx("div",{className:"bg-brand-glass rounded-2xl border border-brand-border overflow-hidden mx-4",children:Ot.map(at=>c.jsx(DC,{animal:at,onSelectAnimal:t,onOpenActions:Yt,isNewEntry:We.newAnimalIds.has(at.id)},at.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:c.jsx("p",{className:"text-zinc-400",children:pt?"No se encontraron resultados":"No hay animales con los filtros."})})})]}),c.jsx(cn,{isOpen:C==="media",onClose:()=>T(null),title:"Análisis de Producción Media",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsxs("p",{children:["La **Media de Producción** del día es **",be.toFixed(2)," Kg**. Representa el promedio simple."]}),c.jsxs("p",{children:["La **Media Ponderada** (",ie.toFixed(2)," Kg) premia la **persistencia lechera** (más valor a producción tardía)."]})]})}),c.jsx(cn,{isOpen:C==="total",onClose:()=>T(null),title:"Producción Total del Día",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("p",{className:"text-zinc-400",children:["La producción total registrada el ",ge?new Date(ge+"T00:00:00").toLocaleDateString("es-VE"):"-"," fue:"]}),c.jsxs("h2",{className:"text-5xl font-bold text-brand-orange my-2",children:[We.kpi.total.toFixed(2)," Kg"]})]})}),c.jsx(cn,{isOpen:C==="stdDev",onClose:()=>T(null),title:"Análisis de Consistencia (σ)",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsxs("p",{children:["La Desviación Estándar (σ) de **",we.toFixed(2),"** mide la dispersión. Un valor **bajo** es ideal (rebaño consistente)."]}),c.jsxs("div",{className:"bg-black/30 p-4 rounded-lg text-center",children:[c.jsx("p",{className:"text-sm uppercase text-zinc-400",children:"Rebaño dentro de 1σ"}),c.jsxs("p",{className:"text-4xl font-bold text-brand-orange my-1",children:[We.consistency.percentage.toFixed(0),"%"]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Cercanía al promedio de ",c.jsxs("span",{className:"font-bold text-white",children:[be.toFixed(2)," Kg"]}),"."]})]})]})}),c.jsx(cn,{isOpen:C==="rango",onClose:()=>T(null),title:"Extremos de Producción del Día",children:c.jsxs("div",{className:"space-y-4",children:[We.topPerformer&&c.jsxs("div",{className:"bg-green-900/40 border border-green-500/50 rounded-2xl p-4",children:[c.jsx("h3",{className:"font-semibold text-brand-green mb-2",children:"Producción Máxima"}),c.jsx(DC,{animal:We.topPerformer,onSelectAnimal:()=>{T(null),t(We.topPerformer.id)},onOpenActions:Yt,isNewEntry:We.newAnimalIds.has(We.topPerformer.id)})]}),We.bottomPerformer&&c.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-4",children:[c.jsx("h3",{className:"font-semibold text-brand-red mb-2",children:"Producción Mínima"}),c.jsx(DC,{animal:We.bottomPerformer,onSelectAnimal:()=>{T(null),t(We.bottomPerformer.id)},onOpenActions:Yt,isNewEntry:We.newAnimalIds.has(We.bottomPerformer.id)})]})]})}),c.jsx(cn,{isOpen:k,onClose:()=>O(!1),title:"¿Qué es el Análisis del Ordeño?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:"Clasifica animales (Pobre, Promedio, Sobresaliente) usando la media (μ) y desviación estándar (σ)."}),c.jsxs("div",{children:[c.jsxs("h4",{className:"font-semibold text-white mb-1",children:["Ponderado a DEL (",c.jsx(DA,{size:12,className:"inline-block mb-0.5"}),")"]}),c.jsx("p",{className:"text-sm",children:"Activa este cálculo para dar más valor a la producción temprana (persistencia)."})]})]})}),c.jsx(cn,{isOpen:D,onClose:()=>M(!1),title:"¿Qué es el Score Ponderado?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:"Ajusta la producción para premiar la **persistencia lechera**."}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Fórmula"}),c.jsx("div",{className:"bg-black/30 p-3 rounded-lg text-sm font-mono text-center text-orange-300",children:"Score = Kg × (1 + ((DEL - 50) / (DEL + 50)))"})]}),c.jsx("p",{className:"pt-2 border-t border-zinc-700/80 text-sm",children:"2 Kg en día **200** valen más que 2 Kg en día 40."})]})}),j&&c.jsx(cn,{isOpen:!!j,onClose:()=>E(null),title:`Tendencia de ${ur(j)}`,children:c.jsx(a9e,{animalId:j.id})}),c.jsx(r9e,{isOpen:L,onClose:()=>V(!1),animalIds:Array.from(We.exitingAnimalIds),onSelectAnimal:t}),c.jsx(mu,{isOpen:Q,onClose:()=>Y(!1),title:`Acciones para ${ur(J)}`,actions:Qt(J)}),C==="milkWeighing"&&J&&c.jsx(t9e,{animal:J,onCancel:Ft,onSaveSuccess:Ft}),ge&&c.jsx(i9e,{isOpen:ee,onClose:()=>le(!1),onConfirm:sn,dateToDelete:ge})]})}const l9e=t=>I.useMemo(()=>{if(t.length===0)return{monthlyData:[]};const n=t.reduce((i,a)=>{const s=a.date.substring(0,7);return i[s]||(i[s]=[]),i[s].push(a),i},{});let r=Object.entries(n).map(([i,a])=>{const s=new Date(`${i}-02T12:00:00Z`),o=s.toLocaleString("es-VE",{month:"long",timeZone:"UTC"}),l=s.getUTCFullYear(),u=a.length,d=a.reduce((f,p)=>f+p.kg,0);return{periodLabel:`${o.charAt(0).toUpperCase()+o.slice(1)} ${l}`,periodId:i,totalKg:d,averageKg:u>0?d/u:0,weighingCount:u,animalCount:new Set(a.map(f=>f.goatId)).size,weighingEvents:new Set(a.map(f=>f.date)).size,weighings:a,newAnimalsWeighings:[]}}).sort((i,a)=>a.periodId.localeCompare(i.periodId));return r=r.map((i,a,s)=>{const o=s[a+1];if(o){const l=o.averageKg?(i.averageKg-o.averageKg)/o.averageKg*100:void 0,u=o.animalCount?(i.animalCount-o.animalCount)/o.animalCount*100:void 0,d=new Set(o.weighings.map(g=>g.goatId)),f=new Set(i.weighings.map(g=>g.goatId)),p=new Set([...f].filter(g=>!d.has(g))),h=i.weighings.filter(g=>p.has(g.goatId)),m=[...d].filter(g=>!f.has(g)).length;return{...i,avgKgChange:l,animalCountChange:u,newAnimalsWeighings:h,previousAnimalCount:o.animalCount,exitingAnimalCount:m}}return{...i,newAnimalsWeighings:i.weighings,previousAnimalCount:0,exitingAnimalCount:0}}),{monthlyData:r,quarterlyData:[],yearlyData:[]}},[t]),J1=({value:t})=>{if(t===void 0||isNaN(t)||t===0)return c.jsx("div",{className:"w-16 h-5"});const e=t>0,n=e?"text-brand-green":"text-brand-red",r=e?ug:cg;return c.jsxs("span",{className:`flex items-center text-sm font-bold ${n} whitespace-nowrap`,children:[c.jsx(r,{size:16,className:"mr-0.5"}),t.toFixed(1),"%"]})},c9e=({stats:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[c.jsxs("div",{className:"min-w-0 mr-2",children:[c.jsx("p",{className:"font-bold text-lg text-white truncate",children:t.periodLabel}),c.jsxs("p",{className:"text-sm text-zinc-400 truncate",children:["Prom: ",t.averageKg.toFixed(2)," Kg | ",t.animalCount," animales"]})]}),c.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-2",children:[c.jsx(J1,{value:t.avgKgChange}),c.jsx(Wi,{className:"text-zinc-600 flex-shrink-0"})]})]}),tQ=({weighing:t,onSelectAnimal:e})=>{const n=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-black/20 rounded-lg p-3 border border-zinc-700/50 flex justify-between items-center hover:border-orange-400/50",children:[c.jsxs("div",{className:"min-w-0 pr-3 flex items-center gap-3",children:[" ",c.jsxs("div",{children:[" ",c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),n&&c.jsx("p",{className:"text-xs font-normal text-zinc-400 truncate",children:n})]}),c.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white whitespace-nowrap ${t.classification==="Pobre"?"bg-brand-red/80":t.classification==="Sobresaliente"?"bg-brand-green/80":"bg-gray-500/80"}`,children:t.classification})]}),c.jsxs("p",{className:"font-semibold text-lg text-white flex-shrink-0",children:[" ",t.latestWeighing.toFixed(2),c.jsx("span",{className:"text-base font-medium text-zinc-400 ml-1",children:"Kg"})," "]})]})},nQ=t=>{const{x:e,y:n,width:r,value:i,total:a}=t;if(a===0||i===0)return null;const s=(i/a*100).toFixed(0);return c.jsx("text",{x:e+r/2,y:n+20,fill:"#fff",textAnchor:"middle",fontSize:"12px",fontWeight:"bold",children:`${s}%`})},u9e=({isOpen:t,onClose:e,data:n,periodLabel:r,onSelectAnimal:i})=>{const{animals:a,weighings:s,parturitions:o}=Xt(),[l,u]=I.useState("all"),d=c5((n==null?void 0:n.newAnimalsWeighings)||[],a,s,o,!1),f=I.useMemo(()=>l==="all"?d.classifiedAnimals:d.classifiedAnimals.filter(h=>h.classification===l),[d.classifiedAnimals,l]),p=h=>{var m;if((m=h==null?void 0:h.payload)!=null&&m.name){const g=h.payload.name;u(v=>v===g?"all":g)}};return!t||!n?null:c.jsx(cn,{isOpen:t,onClose:e,title:`Análisis Nuevos Ingresos - ${r}`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(ev,{size:14}),"Promedio"]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[d.mean.toFixed(2),c.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]}),c.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(pu,{size:14}),"Animales"]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:d.classifiedAnimals.length})]})]}),c.jsx("div",{className:"bg-black/20 backdrop-blur-xl rounded-2xl p-4 border border-zinc-800/50",children:c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{children:c.jsxs(gl,{data:d.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(Di,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Ki,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Or,{content:c.jsx(yu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsxs($a,{dataKey:"count",onClick:p,cursor:"pointer",children:[d.distribution.map(h=>c.jsx(Wl,{fill:h.fill,className:`${l!=="all"&&l!==h.name?"opacity-30":"opacity-100"}`},h.name)),c.jsx(No,{dataKey:"count",content:c.jsx(nQ,{total:d.classifiedAnimals.length})})]})]})})})}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:f.sort((h,m)=>m.latestWeighing-h.latestWeighing).map(h=>c.jsx(tQ,{weighing:h,onSelectAnimal:i},h.weighingId||h.id))})]})})};function d9e({navigateToRebano:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=Xt(),[a,s]=I.useState(null),[o,l]=I.useState("all"),[u,d]=I.useState(!1),[f,p]=I.useState(null),{monthlyData:h}=l9e(n),m=c5((a==null?void 0:a.weighings)||[],e,n,r,!1),g=I.useMemo(()=>o==="all"?m.classifiedAnimals:m.classifiedAnimals.filter(y=>y.classification===o),[m.classifiedAnimals,o]),v=y=>{var b;if((b=y==null?void 0:y.payload)!=null&&b.name){const S=y.payload.name;l(A=>A===S?"all":S)}};return i?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando historial..."})}):a?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 animate-fade-in px-4",children:[c.jsxs("header",{className:"flex items-center pt-4 pb-4",children:[c.jsx("button",{onClick:()=>{s(null),l("all")},className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsx("div",{className:"text-center flex-grow",children:c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:a.periodLabel})}),c.jsx("div",{className:"w-8"})," "]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(ev,{size:14}),"Promedio / Animal"]}),c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsxs("p",{className:"text-2xl font-bold text-white",children:[a.averageKg.toFixed(2),c.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]}),c.jsx(J1,{value:a.avgKgChange})]})]}),c.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(oo,{size:14}),"Eventos de Pesaje"]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:a.weighingEvents})]}),c.jsxs("button",{onClick:()=>d(!0),className:"bg-brand-glass p-3 rounded-2xl text-left hover:border-brand-orange transition-colors border border-brand-border",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(pu,{size:14}),"Animales Ordeñados"]}),c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsx("p",{className:"text-2xl font-bold text-white",children:a.animalCount}),c.jsx(J1,{value:a.animalCountChange})]})]}),c.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(ba,{size:14}),"Total Registrado"]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[a.totalKg.toFixed(0),c.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 border-b border-brand-border pb-2 mb-4",children:[c.jsx(Pb,{className:"text-brand-orange",size:18}),c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Distribución del Período"})]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{children:c.jsxs(gl,{data:m.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(Di,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Ki,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Or,{content:c.jsx(yu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsxs($a,{dataKey:"count",onClick:v,cursor:"pointer",children:[m.distribution.map(y=>c.jsx(Wl,{fill:y.fill,className:`${o!=="all"&&o!==y.name?"opacity-30":"opacity-100"} transition-opacity`},y.name)),c.jsx(No,{dataKey:"count",content:c.jsx(nQ,{total:m.classifiedAnimals.length})})]})]})})}),c.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[c.jsxs("span",{children:["μ = ",m.mean.toFixed(2)," Kg"]})," | ",c.jsxs("span",{children:["σ = ",m.stdDev.toFixed(2)]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1 mt-4",children:["Pesajes del Período (",g.length,")"]}),g.length>0?g.sort((y,b)=>b.latestWeighing-y.latestWeighing).map(y=>c.jsx(tQ,{weighing:y,onSelectAnimal:b=>t({name:"lactation-profile",animalId:b})},y.weighingId||y.id)):c.jsx("div",{className:"text-center py-6 bg-brand-glass rounded-lg",children:c.jsx("p",{className:"text-zinc-500",children:"No hay pesajes que coincidan con el filtro."})})]})]}),c.jsx(cn,{isOpen:u,onClose:()=>d(!1),title:"Variación de Animales en Ordeño",children:c.jsxs("div",{className:"text-zinc-300 space-y-4",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"font-semibold text-white mb-1",children:[a.periodLabel," vs Mes Anterior"]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["El mes anterior tenías ",c.jsx("span",{className:"font-bold text-white",children:a.previousAnimalCount})," animales en ordeño. Este mes tienes ",c.jsx("span",{className:"font-bold text-white",children:a.animalCount}),"."]}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsxs("p",{children:["El cambio neto es de ",c.jsx("span",{className:"font-bold text-white",children:a.animalCount-(a.previousAnimalCount||0)})," animales"]}),c.jsx(J1,{value:a.animalCountChange})]})]}),c.jsxs("div",{className:"pt-4 border-t border-zinc-700/80",children:[a.exitingAnimalCount>0&&c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Salieron del ordeño: ",c.jsx("span",{className:"font-bold text-brand-red",children:a.exitingAnimalCount})," animales."]}),a.newAnimalsWeighings.length>0&&c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Nuevos ingresos: ",c.jsx("span",{className:"font-bold text-brand-green",children:new Set(a.newAnimalsWeighings.map(y=>y.goatId)).size})," animales."]}),a.newAnimalsWeighings.length>0&&c.jsxs("button",{onClick:()=>{p(a),d(!1)},className:"w-full mt-4 bg-brand-orange text-white font-semibold py-2 rounded-lg hover:bg-orange-600 transition-colors",children:["Analizar los ",new Set(a.newAnimalsWeighings.map(y=>y.goatId)).size," Nuevos Ingresos"]})]})]})}),c.jsx(u9e,{isOpen:!!f,onClose:()=>p(null),data:f,periodLabel:a.periodLabel,onSelectAnimal:y=>t({name:"lactation-profile",animalId:y})})]}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 px-4 pt-4",children:[c.jsx("header",{className:"text-center pb-4",children:c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Historial de Producción"})}),h.length>0?c.jsx("div",{className:"space-y-2",children:h.map(y=>c.jsx(c9e,{stats:y,onClick:()=>s(y)},y.periodId))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:c.jsx("p",{className:"text-zinc-400",children:"No hay datos históricos de pesajes registrados."})})]})}const f9e=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=I.useMemo(()=>{const a=new Date;return a.setHours(0,0,0,0),Array.from({length:7},(s,o)=>{const l=new Date(a);return l.setDate(a.getDate()-o),l})},[]),i=(a,s)=>{if(a.getTime()===s.getTime())return"Hoy";const o=new Date(s);return o.setDate(s.getDate()-1),a.getTime()===o.getTime()?"Ayer":a.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return c.jsxs("div",{className:"px-4",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(oo,{size:16}),"Fecha del Pesaje"]}),c.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[c.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[c.jsx(oo,{size:20}),c.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(a=>{const s=a.getTime()===t.getTime();return c.jsxs("button",{type:"button",onClick:()=>e(a),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${s?"bg-brand-orange text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[c.jsx("span",{className:"text-xs capitalize",children:i(a,r[0])}),c.jsx("span",{className:"font-bold text-2xl",children:a.getDate()}),c.jsx("span",{className:"text-xs",children:a.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},a.toISOString())})]})]})},h9e=({entry:t,onDelete:e,onRegister:n})=>{const r=!t.isRecognized;return c.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${r?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 min-w-0 pr-2",children:[r&&c.jsx(mr,{className:"text-amber-400 flex-shrink-0",size:18}),c.jsx("div",{className:"min-w-0",children:c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.animalId.toUpperCase()})})]}),c.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[r?c.jsx("button",{onClick:()=>n(t.animalId),className:"text-xs font-semibold bg-brand-orange text-white px-2 py-1 rounded-md hover:bg-orange-600",children:"Registrar Parto"}):c.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),c.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Xl,{size:16})})]})]})},p9e=({onSaveSuccess:t})=>{const{animals:e,weighings:n,fetchData:r,addWeighing:i}=Xt(),[a,s]=I.useState(""),[o,l]=I.useState(""),[u,d]=I.useState([]),[f,p]=I.useState(null),[h,m]=I.useState(()=>{const V=new Date;return V.setHours(0,0,0,0),V}),[g,v]=I.useState(!1),[y,b]=I.useState({isOpen:!1,motherId:""}),[S,A]=I.useState(!1),C=I.useRef(null),T=I.useRef(null),j=()=>{var ee;if(p(null),!a||!o)return;const V=a.toUpperCase().trim(),Q=parseFloat(o),Y=h.toISOString().split("T")[0];if(Q>100){p({type:"error",text:`El valor de ${Q} Kg es irracional. Verifique el dato.`});return}if(Q>8.5){p({type:"error",text:`Producción de ${Q} Kg es muy alta. Límite: 8.5 Kg.`});return}if(u.some(le=>le.animalId===V)){p({type:"error",text:`${V} ya tiene un pesaje en esta sesión.`});return}if(n.some(le=>le.goatId===V&&le.date===Y)){p({type:"error",text:`${V} ya tiene un pesaje guardado para esta fecha.`});return}const J=e.find(le=>le.id===V);if(J&&J.isReference){p({type:"error",text:`${V} es un animal de Referencia. No se pueden añadir pesajes.`});return}const q={tempId:Date.now(),animalId:V,name:J==null?void 0:J.name,kg:Q,date:Y,isRecognized:!!J};d(le=>[q,...le]),s(""),l(""),(ee=C.current)==null||ee.focus()},E=async()=>{p(null),A(!0);const{currentUser:V}=og;if(!V){p({type:"error",text:"Error de autenticación."}),A(!1);return}const Q=u.filter(Y=>!Y.isRecognized).length;if(Q>0){p({type:"error",text:`No se puede guardar. Tienes ${Q} animal(es) sin registrar.`}),A(!1);return}if(u.length===0){p({type:"error",text:"No hay pesajes para guardar."}),A(!1);return}try{const Y=u.map(J=>{const q={goatId:J.animalId,kg:J.kg,date:J.date};return i(q)});await Promise.all(Y),p({type:"success",text:`${u.length} pesajes guardados con éxito.`}),d([]),setTimeout(()=>{t(h.toISOString().split("T")[0])},1500)}catch(Y){p({type:"error",text:"Ocurrió un error al guardar localmente."}),console.error("Error en escritura local de pesajes:",Y),A(!1)}},k=V=>{var Q;V.key==="Enter"&&a&&(V.preventDefault(),(Q=T.current)==null||Q.focus())},O=V=>{V.key==="Enter"&&o&&(V.preventDefault(),j())},D=V=>{d(Q=>Q.filter(Y=>Y.tempId!==V))},M=V=>{V&&(V.setHours(0,0,0,0),m(V)),v(!1)},L=()=>{r(),d(V=>V.map(Q=>Q.animalId===y.motherId?{...Q,isRecognized:!0}:Q)),b({isOpen:!1,motherId:""})};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex-shrink-0 space-y-4 pt-4",children:[c.jsxs("div",{className:"text-center px-4",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Leche"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Ordeño"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(f9e,{selectedDate:h,onDateChange:m,onOpenCalendar:()=>v(!0)}),c.jsxs("div",{className:"flex items-center gap-2 px-4",children:[c.jsx("input",{ref:C,type:"text",value:a,onChange:V=>s(V.target.value),onKeyDown:k,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),c.jsx("input",{ref:T,type:"number",step:"0.01",value:o,onChange:V=>l(V.target.value),onKeyDown:O,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),c.jsx("button",{onClick:j,disabled:!a||!o||S,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:c.jsx(ol,{size:24})})]})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[u.length===0&&c.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),u.map(V=>c.jsx(h9e,{entry:V,onDelete:D,onRegister:Q=>b({isOpen:!0,motherId:Q})},V.tempId))]}),c.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[f&&c.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${f.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",f.type==="success"?c.jsx(Za,{size:18}):c.jsx(mr,{size:18})," ",c.jsx("span",{children:f.text})," "]}),c.jsxs("button",{onClick:E,disabled:S||u.length===0||u.some(V=>!V.isRecognized),className:"w-full flex items-center justify-center gap-2 bg-brand-orange/20 border border-brand-orange text-brand-orange hover:bg-brand-orange/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[S?c.jsx(kc,{size:24,className:"animate-spin"}):c.jsx(tv,{size:20}),S?"Guardando...":`Guardar ${u.length>0?`(${u.length})`:""} Pesajes`]})]})]}),c.jsx(cn,{isOpen:g,onClose:()=>v(!1),title:"Seleccionar Fecha",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(Ap,{mode:"single",selected:h,onSelect:M})})}),c.jsx(Cp,{isOpen:y.isOpen,onClose:L,motherId:y.motherId})]})};function m9e({onNavigate:t,onSaveSuccess:e}){const[n,r]=I.useState("options");return n==="rapid"?c.jsx(p9e,{onSaveSuccess:e}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pt-4",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white text-center",children:"Añadir Datos de Leche"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-orange text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(Tb,{className:"w-12 h-12 mb-2 text-brand-orange"}),c.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),c.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(YH,{className:"w-12 h-12 mb-2 text-brand-blue"}),c.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}const g9e=({animal:t,parturition:e,onSelectAnimal:n})=>c.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors min-h-[80px]",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),t.name&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:t.name.toUpperCase().trim()}),c.jsxs("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate+"T00:00:00Z").toLocaleDateString("es-VE",{timeZone:"UTC"})}`,e.status==="seca"&&"Lactancia finalizada"]})]}),c.jsx(Wi,{className:"text-zinc-600 w-5 h-5 flex-shrink-0"})]});function v9e({navigateToRebano:t}){const{animals:e,parturitions:n,isLoading:r}=Xt(),[i,a]=I.useState("drying"),s=I.useMemo(()=>{const l=f=>e.find(p=>p.id===f),u=n.filter(f=>f.status==="en-secado").sort((f,p)=>new Date(p.dryingStartDate).getTime()-new Date(f.dryingStartDate).getTime()).map(f=>({animal:l(f.goatId),parturition:f})).filter(f=>f.animal&&!f.animal.isReference),d=n.filter(f=>f.status==="seca").sort((f,p)=>new Date(p.dryingStartDate).getTime()-new Date(f.dryingStartDate).getTime()).map(f=>({animal:l(f.goatId),parturition:f})).filter(f=>f.animal&&!f.animal.isReference);return{drying:u,dry:d}},[e,n]),o=s[i]||[];return r?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 px-4",children:[c.jsxs("header",{className:"text-center pt-4 pb-4",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestión de Secado"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Animales por Estado de Lactancia"})]}),c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[c.jsxs("button",{onClick:()=>a("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${i==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",s.drying.length,")"]}),c.jsxs("button",{onClick:()=>a("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${i==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",s.dry.length,")"]})]})}),c.jsx("div",{className:"space-y-4",children:o.length>0?o.map(({animal:l,parturition:u})=>c.jsx(g9e,{animal:l,parturition:u,onSelectAnimal:d=>t({name:"lactation-profile",animalId:d})},u.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function y9e({initialPage:t,onPageStateChange:e,navigateToRebano:n,onSwitchModule:r}){const{syncStatus:i}=Xt(),[a,s]=I.useState(t||{name:"dashboard"}),[o,l]=I.useState([]);I.useEffect(()=>{e(a)},[a,e]),I.useEffect(()=>{s(t&&typeof t=="object"&&"name"in t?t:{name:"dashboard"})},[t]);const u=[{id:"dashboard",label:"Dashboard",icon:OH},{id:"analysis",label:"Análisis",icon:VH},{id:"history",label:"Historial",icon:RH},{id:"add-data",label:"Añadir",icon:ol},{id:"drying",label:"Secado",icon:mp}],d=g=>{l(v=>[...v,a]),s(g)},f=()=>{const g=o.pop();g?(s(g),l([...o])):a.name!=="dashboard"?s({name:"dashboard"}):r("rebano")},p=g=>{l([]),s({name:g})},h=g=>{n(g,"lactokeeper")},m=()=>{switch(a.name){case"dashboard":return c.jsx(zF,{onNavigateToAnalysis:()=>d({name:"analysis"})});case"analysis":return c.jsx(o9e,{onSelectAnimal:g=>d({name:"lactation-profile",animalId:g})});case"history":return c.jsx(d9e,{navigateToRebano:h});case"add-data":return c.jsx(m9e,{onNavigate:(g,v)=>h({name:g,...v}),onSaveSuccess:()=>d({name:"analysis"})});case"drying":return c.jsx(v9e,{navigateToRebano:h});case"lactation-profile":return c.jsx(eQ,{animalId:a.animalId,onBack:f,navigateTo:h});default:return c.jsx(zF,{onNavigateToAnalysis:()=>d({name:"analysis"})})}};return c.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col bg-brand-dark",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-brand-dark/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsx("button",{onClick:f,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(oue,{className:"text-brand-orange",size:28}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),c.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"LactoKeeper"})]})]}),c.jsx("div",{className:"w-8 flex justify-end",children:c.jsx(yv,{status:i})})]})}),c.jsx("main",{className:"flex-grow pt-16 pb-24",children:m()}),c.jsx(Qb,{onSwitchModule:r}),c.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around z-20 h-16",children:u.map(g=>c.jsxs("button",{onClick:()=>p(g.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${a.name===g.id?"text-brand-orange":"text-gray-400 hover:text-brand-orange"}`,children:[c.jsx(g.icon,{className:"w-6 h-6 mb-1"}),c.jsx("span",{className:"text-xs font-semibold",children:g.label})]},g.id))})]})}const b9e=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=I.useMemo(()=>{const a=new Date;return a.setHours(0,0,0,0),Array.from({length:7},(s,o)=>{const l=new Date(a);return l.setDate(a.getDate()-o),l})},[]),i=(a,s)=>{if(a.getTime()===s.getTime())return"Hoy";const o=new Date(s);return o.setDate(s.getDate()-1),a.getTime()===o.getTime()?"Ayer":a.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return c.jsxs("div",{className:"px-4",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(oo,{size:16}),"Fecha del Pesaje"]}),c.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[c.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[c.jsx(oo,{size:20}),c.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(a=>{const s=a.getTime()===t.getTime();return c.jsxs("button",{type:"button",onClick:()=>e(a),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${s?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[c.jsx("span",{className:"text-xs capitalize",children:i(a,r[0])}),c.jsx("span",{className:"font-bold text-2xl",children:a.getDate()}),c.jsx("span",{className:"text-xs",children:a.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},a.toISOString())})]})]})},x9e=({entry:t,onDelete:e})=>{const n=!t.isRecognized,r=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${n?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 min-w-0 pr-2",children:[n&&c.jsx(mr,{className:"text-amber-400 flex-shrink-0",size:18}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.animalId.toUpperCase()}),r&&c.jsx("p",{className:"text-sm font-normal text-zinc-400 truncate",children:r})]})]}),c.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[c.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),c.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Xl,{size:16})})]})]})},w9e=({onBack:t,onSaveSuccess:e})=>{const{animals:n,addBodyWeighing:r}=Xt(),[i,a]=I.useState(""),[s,o]=I.useState(""),[l,u]=I.useState([]),[d,f]=I.useState(null),[p,h]=I.useState(()=>{const O=new Date;return O.setHours(0,0,0,0),O}),[m,g]=I.useState(!1),[v,y]=I.useState(!1),b=I.useRef(null),S=I.useRef(null),A=()=>{var V,Q,Y,J,q;if(f(null),!i||!s)return;const O=i.toUpperCase().trim(),D=parseFloat(s);if(isNaN(D)||D<=0){f({type:"error",text:"Peso inválido."}),(V=S.current)==null||V.focus();return}if(D>150){f({type:"error",text:`El peso de ${D} Kg parece irracional. Verifique.`}),(Q=S.current)==null||Q.focus();return}if(l.some(ee=>ee.animalId===O)){f({type:"error",text:`${O} ya tiene un pesaje en esta sesión.`}),a(""),(Y=b.current)==null||Y.focus();return}const M=n.find(ee=>ee.id===O);if(M&&M.isReference){f({type:"error",text:`${O} es Referencia. No se pueden añadir pesajes.`}),a(""),(J=b.current)==null||J.focus();return}const L={tempId:Date.now(),animalId:O,name:M==null?void 0:M.name,kg:D,date:p.toISOString().split("T")[0],isRecognized:!!M};u(ee=>[L,...ee]),a(""),o(""),(q=b.current)==null||q.focus()},C=async()=>{f(null),y(!0);const{currentUser:O}=og;if(!O){f({type:"error",text:"Error de autenticación."}),y(!1);return}const D=l.filter(M=>!M.isRecognized).length;if(D>0){f({type:"error",text:`No se puede guardar. Tienes ${D} animal(es) sin registrar en el rebaño.`}),y(!1);return}if(l.length===0){f({type:"error",text:"No hay pesajes para guardar."}),y(!1);return}try{const M=l.map(L=>r({animalId:L.animalId,kg:L.kg,date:L.date}));await Promise.all(M),f({type:"success",text:`${l.length} pesajes guardados con éxito.`}),u([]),setTimeout(()=>e(p.toISOString().split("T")[0]),1500)}catch(M){f({type:"error",text:"Ocurrió un error al guardar los datos."}),console.error("Error en escritura de pesajes corporales:",M),y(!1)}},T=O=>{var D;O.key==="Enter"&&i&&(O.preventDefault(),(D=S.current)==null||D.focus())},j=O=>{O.key==="Enter"&&s&&(O.preventDefault(),A())},E=O=>{u(D=>D.filter(M=>M.tempId!==O))},k=O=>{O&&(O.setHours(0,0,0,0),h(O)),g(!1)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[c.jsxs("div",{className:"flex-shrink-0 space-y-4 pt-4",children:[c.jsxs("header",{className:"text-center px-4 flex items-center",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Peso"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Pesaje Corporal"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(b9e,{selectedDate:p,onDateChange:h,onOpenCalendar:()=>g(!0)}),c.jsxs("div",{className:"flex items-center gap-2 px-4",children:[c.jsx("input",{ref:b,type:"text",value:i,onChange:O=>a(O.target.value),onKeyDown:T,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),c.jsx("input",{ref:S,type:"number",step:"0.1",value:s,onChange:O=>o(O.target.value),onKeyDown:j,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),c.jsx("button",{onClick:A,disabled:!i||!s||v,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:c.jsx(ol,{size:24})})]})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[l.length===0&&c.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),l.map(O=>c.jsx(x9e,{entry:O,onDelete:E},O.tempId))]}),c.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[d&&c.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${d.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",d.type==="success"?c.jsx(Za,{size:18}):c.jsx(mr,{size:18})," ",c.jsx("span",{children:d.text})," "]}),c.jsxs("button",{onClick:C,disabled:v||l.length===0||l.some(O=>!O.isRecognized),className:"w-full flex items-center justify-center gap-2 bg-brand-green/20 border border-brand-green text-brand-green hover:bg-brand-green/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[v?c.jsx(kc,{size:20,className:"animate-spin"}):c.jsx(tv,{size:20}),v?"Guardando...":`Guardar ${l.length>0?`(${l.length})`:""} Pesajes`]})]})]}),c.jsx(cn,{isOpen:m,onClose:()=>g(!1),title:"Seleccionar Fecha",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(Ap,{mode:"single",selected:p,onSelect:k})})})]})};function S9e({onNavigate:t,onSaveSuccess:e}){const[n,r]=I.useState("options");return n==="rapid"?c.jsx(w9e,{onBack:()=>r("options"),onSaveSuccess:e}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pt-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Añadir Pesaje Corporal"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Carga de Datos de Crecimiento"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-green text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(Tb,{className:"w-12 h-12 mb-2 text-brand-green"}),c.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),c.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(YH,{className:"w-12 h-12 mb-2 text-brand-blue"}),c.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}const _9e=({gdp:t,averageGdp:e})=>{if(t===null||!e||e===0)return null;const n=t/e;return n>1.1?c.jsx(ba,{size:18,className:"text-brand-green"}):n<.9?c.jsx(ba,{size:18,className:"text-brand-red rotate-180"}):c.jsx(sT,{size:18,className:"text-zinc-500"})},A9e=({animal:t,onSelect:e,averageGdp:n})=>{const r={Sobresaliente:"text-brand-green",Promedio:"text-zinc-400",Pobre:"text-brand-red"},i=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors min-h-[80px]",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),i&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:i}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})})]}),c.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold text-white text-base",children:[t.gdp?`${t.gdp.toFixed(0)}`:"--",c.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),c.jsx("p",{className:`font-bold text-xs ${r[t.classification]}`,children:t.classification})]}),c.jsx(_9e,{gdp:t.gdp?t.gdp/1e3:null,averageGdp:n}),c.jsx(Wi,{className:"text-zinc-600 w-5 h-5"})]})]})};function $F({onSelectAnimal:t}){const{animals:e,bodyWeighings:n,parturitions:r}=Xt(),[i,a]=I.useState("all"),s=I.useMemo(()=>{const u=e.filter(O=>{if(O.status!=="Activo"||O.isReference||O.sireLotId)return!1;const D=Lf(O,r);return["Cabrita","Cabritona","Cabrito","Macho de Levante"].includes(D)});if(u.length===0)return{analyzedAnimals:[],distribution:[],averageGdp:0,gaussChartData:[],meanGdp:0,stdDev:0};let d=0,f=0;const p=u.map(O=>{const D=n.filter(J=>J.animalId===O.id),L=J3(O.birthWeight,D).overall??0,V=Cc(O.birthDate);L>0&&(d+=L,f++);const Q=f>0?d/f:0,Y=L>0?e6e(L,Q,V):0;return{...O,formattedAge:Lc(O.birthDate),ageInDays:V,gdpKgDay:L,score:Y}}),h=f>0?d/f:0,m=h,g=p.filter(O=>O.score>0).map(O=>O.score),v=g.length>0?g.reduce((O,D)=>O+D,0)/g.length:0,y=g.length>0?Math.sqrt(g.reduce((O,D)=>O+Math.pow(D-v,2),0)/g.length):0,b=v-.4*y,S=v+.4*y,C=p.sort((O,D)=>D.score-O.score).map(O=>{let D="Promedio";return O.score>0&&y>1&&(O.score<b?D="Pobre":O.score>S&&(D="Sobresaliente")),{...O,gdp:O.gdpKgDay*1e3,ageInDays:O.ageInDays,classification:D,formattedAge:O.formattedAge}}),T=[{name:"Pobre",count:C.filter(O=>O.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:C.filter(O=>O.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:C.filter(O=>O.classification==="Sobresaliente").length,fill:"#34C759"}],j=C.map(O=>O.gdp).filter(O=>O>0),E=[];let k=0;if(j.length>0){const O=Math.min(...j),D=Math.max(...j),M=Math.max(10,Math.ceil((D-O)/15));for(let V=Math.floor(O/M)*M;V<D;V+=M){const Q=V,Y=V+M,J=C.filter(q=>q.gdp>=Q&&q.gdp<Y).length;J>0&&E.push({name:`${Q}-${Y}`,count:J})}const L=m*1e3;k=j.length>0?Math.sqrt(j.reduce((V,Q)=>V+Math.pow(Q-L,2),0)/j.length):0}return{analyzedAnimals:C,distribution:T,averageGdp:h,gaussChartData:E,meanGdp:m*1e3,stdDev:k}},[e,n,r]),o=xe.useMemo(()=>i==="all"?s.analyzedAnimals:s.analyzedAnimals.filter(u=>u.classification===i),[s.analyzedAnimals,i]),l=u=>{var d;if((d=u==null?void 0:u.payload)!=null&&d.name){const f=u.payload.name;a(p=>p===f?"all":f)}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[c.jsxs("header",{className:"text-center pt-4",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de GDP"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Ganancia Diaria de Peso"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(ba,{size:14}),c.jsx("span",{children:"GDP Media"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[s.meanGdp.toFixed(0)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(uT,{size:14}),c.jsx("span",{children:"Desv. Estándar"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[s.stdDev.toFixed(0)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{children:c.jsxs(gl,{data:s.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(Di,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Ki,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),c.jsx(Or,{content:c.jsx(yu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx($a,{dataKey:"count",onClick:l,cursor:"pointer",children:s.distribution.map(u=>c.jsx(Wl,{fill:u.fill,className:`${i!=="all"&&i!==u.name?"opacity-30":"opacity-100"} transition-opacity`},u.name))})]})})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Campana de Gauss (g/día)"}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{children:c.jsxs(gl,{data:s.gaussChartData,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(Di,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},interval:0,angle:-30,textAnchor:"end",height:40}),c.jsx(Ki,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),c.jsx(Or,{content:c.jsx(yu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx($a,{dataKey:"count",fill:"rgba(52, 199, 89, 0.6)",name:"Nº Animales"})]})})}),c.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[c.jsxs("span",{children:["μ = ",s.meanGdp.toFixed(0)," g/día"]})," | ",c.jsxs("span",{children:["σ = ",s.stdDev.toFixed(0)," g/día"]})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:[i==="all"?"Animales en Crecimiento":`Animales (${i})`," (",o.length,")"]}),o.length>0?o.map(u=>c.jsx(A9e,{animal:u,onSelect:t,averageGdp:s.averageGdp},u.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay animales que coincidan con los filtros."})})]})]})}const C9e=()=>{const{animals:t,bodyWeighings:e,parturitions:n}=Xt();return I.useMemo(()=>{const a=t.filter(S=>{if(S.status!=="Activo"||S.isReference||S.sireLotId)return!1;const A=Lf(S,n);return["Cabrita","Cabritona","Cabrito","Macho de Levante"].includes(A)}).map(S=>{const A=e.filter(T=>T.animalId===S.id),C=J3(S.birthWeight,A);return{...S,gdp:C.overall,ageInDays:Cc(S.birthDate)}}).filter(S=>S.gdp!==null&&S.gdp>0);if(a.length<2)return{classifiedAnimals:[],distribution:[],gaussChartData:[],meanGdp:0,stdDev:0};const o=a.reduce((S,A)=>S+A.gdp,0)/a.length,l=Math.sqrt(a.reduce((S,A)=>S+Math.pow(A.gdp-o,2),0)/a.length),u=o-.4*l,d=o+.4*l,f=a.map(S=>{let A="Promedio";return l>.005&&(S.gdp<u?A="Pobre":S.gdp>d&&(A="Sobresaliente")),{...S,classification:A,gdp:S.gdp*1e3}}),p=[{name:"Pobre",count:f.filter(S=>S.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:f.filter(S=>S.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:f.filter(S=>S.classification==="Sobresaliente").length,fill:"#34C759"}],h=f.map(S=>S.gdp),m=Math.min(...h),g=Math.max(...h),v=10,y=(g-m)/v,b=Array.from({length:v},(S,A)=>{const C=m+A*y,T=C+y,j=f.filter(E=>E.gdp>=C&&E.gdp<T).length;return{name:`${C.toFixed(0)}`,count:j}});return{classifiedAnimals:f.sort((S,A)=>A.gdp-S.gdp),distribution:p,gaussChartData:b,meanGdp:o,stdDev:l}},[t,e,n])},j9e=({animal:t,onSelect:e})=>{const n={Sobresaliente:"bg-brand-green/80",Promedio:"bg-gray-500/80",Pobre:"bg-brand-red/80"},r=t.name?String(t.name).toUpperCase().trim():"";return c.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors min-h-[80px]",children:[c.jsxs("div",{className:"min-w-0 pr-3",children:[c.jsx("p",{className:"font-mono font-semibold text-base text-white truncate",children:t.id.toUpperCase()}),r&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:r}),c.jsx("div",{className:"text-xs text-zinc-500 mt-1 min-h-[1rem] truncate",children:c.jsxs("span",{children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})})]}),c.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold text-white text-base",children:[t.gdp?`${t.gdp.toFixed(0)}`:"--",c.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),c.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${n[t.classification]}`,children:t.classification})]}),c.jsx(Wi,{className:"text-zinc-600 w-5 h-5"})]})]})},N9e=t=>{const{x:e,y:n,width:r,value:i,total:a}=t;if(a===0||i===0)return null;const s=(i/a*100).toFixed(0);return c.jsx("text",{x:e+r/2,y:n+20,fill:"#fff",textAnchor:"middle",fontSize:"12px",fontWeight:"bold",children:`${s}%`})};function E9e({onSelectAnimal:t}){const{classifiedAnimals:e,distribution:n,gaussChartData:r,meanGdp:i,stdDev:a}=C9e(),s=I.useMemo(()=>e.map(m=>({...m,formattedAge:Lc(m.birthDate)})),[e]),{searchTerm:o,setSearchTerm:l,filteredItems:u}=wD(s,["id","name"]),[d,f]=I.useState("all"),p=xe.useMemo(()=>{let m=o?u:s;return d==="all"?m:m.filter(g=>g.classification===d)},[s,d,o,u]),h=m=>{var g;if((g=m==null?void 0:m.payload)!=null&&g.name){const v=m.payload.name;f(y=>y===v?"all":v)}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[c.jsxs("header",{className:"text-center pt-4",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de GDP"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Ganancia Diaria de Peso"})]}),c.jsxs("div",{className:"relative px-4",children:[c.jsx(hu,{className:"absolute left-7 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"}),c.jsx("input",{type:"search",placeholder:`Buscar ID o Nombre en ${p.length} animales...`,value:o,onChange:m=>l(m.target.value),className:"w-full bg-brand-glass border border-brand-border rounded-xl pl-10 pr-4 py-3 text-white focus:ring-2 focus:ring-brand-orange"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(ba,{size:14}),c.jsx("span",{children:"GDP Media"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[i.toFixed(0)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(uT,{size:14}),c.jsx("span",{children:"Desv. Estándar"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[a.toFixed(0)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{children:c.jsxs(gl,{data:n,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(Di,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Ki,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),c.jsx(Or,{content:c.jsx(yu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsxs($a,{dataKey:"count",onClick:h,cursor:"pointer",children:[n.map(m=>c.jsx(Wl,{fill:m.fill,className:`${d!=="all"&&d!==m.name?"opacity-30":"opacity-100"} transition-opacity`},m.name)),c.jsx(No,{dataKey:"count",content:N9e})]})]})})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Campana de Gauss (g/día)"}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{children:c.jsxs(gl,{data:r,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(Di,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},interval:0,angle:-30,textAnchor:"end",height:40}),c.jsx(Ki,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),c.jsx(Or,{content:c.jsx(yu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx($a,{dataKey:"count",fill:"rgba(52, 199, 89, 0.6)",name:"Nº Animales"})]})})}),c.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[c.jsxs("span",{children:["μ = ",i.toFixed(0)," g/día"]})," | ",c.jsxs("span",{children:["σ = ",a.toFixed(0)," g/día"]})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:[d==="all"?"Animales en Crecimiento":`Animales (${d})`," (",p.length,")"]}),p.length>0?p.map(m=>c.jsx(j9e,{animal:m,onSelect:t},m.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay animales que coincidan con los filtros."})})]})]})}function k9e({navigateToRebano:t,onSwitchModule:e}){const{syncStatus:n}=Xt(),[r,i]=I.useState("dashboard"),a=[{id:"dashboard",label:"Dashboard",icon:Pb},{id:"analysis",label:"Análisis",icon:aue},{id:"add-data",label:"Añadir",icon:ol}],s=()=>{r!=="dashboard"?i("dashboard"):e("rebano")},o=()=>{switch(r){case"dashboard":return c.jsx($F,{onSelectAnimal:l=>t({name:"growth-profile",animalId:l})});case"analysis":return c.jsx(E9e,{onSelectAnimal:l=>t({name:"growth-profile",animalId:l})});case"add-data":return c.jsx(S9e,{onNavigate:t,onSaveSuccess:()=>i("analysis")});default:return c.jsx($F,{onSelectAnimal:l=>t({name:"growth-profile",animalId:l})})}};return c.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsx("button",{onClick:s,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(md,{className:"text-brand-green"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),c.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Kilos"})]})]}),c.jsx("div",{className:"w-8 flex justify-end",children:c.jsx(yv,{status:n})})]})}),c.jsx("main",{className:"flex-grow pt-16 pb-24",children:o()}),c.jsx(Qb,{onSwitchModule:e}),c.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:a.map(l=>c.jsxs("button",{onClick:()=>i(l.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${r===l.id?"text-brand-green":"text-gray-400 hover:text-brand-green"}`,children:[c.jsx(l.icon,{className:"w-6 h-6 mb-1"}),c.jsx("span",{className:"text-xs font-semibold",children:l.label})]},l.id))})]})}const P9e=["Desparasitantes","Antibióticos","Vacunas","Vitaminas","Modificadores Orgánicos","Pomadas Tópicas","Analgésicos","Hormonas","Antiinflamatorios","Otro"],AD=({onSave:t,onCancel:e,existingProduct:n})=>{const[r,i]=I.useState(""),[a,s]=I.useState(""),[o,l]=I.useState("Otro"),[u,d]=I.useState(""),[f,p]=I.useState("ml"),[h,m]=I.useState(""),[g,v]=I.useState("Inyectable"),[y,b]=I.useState("Intramuscular"),[S,A]=I.useState("per_kg"),[C,T]=I.useState(""),[j,E]=I.useState(""),[k,O]=I.useState(""),[D,M]=I.useState(null);I.useEffect(()=>{n&&(i(n.name),s(n.laboratory||""),l(n.category||"Otro"),d(String(n.presentationValue||"")),p(n.presentationUnit||"ml"),m(String(n.price||"")),v(n.applicationType),n.applicationRoute&&b(n.applicationRoute),A(n.dosageType||"per_kg"),T(String(n.dosageFixed||"")),E(String(n.dosagePerKg_ml||"")),O(String(n.dosagePerKg_kg||"")))},[n]);const L=async V=>{if(V.preventDefault(),M(null),!r.trim()){M("El nombre es obligatorio.");return}if(S==="fixed"&&!C){M("La dosis fija es obligatoria.");return}if(S==="per_kg"&&(!j||!k)){M("Ambos campos de dosificación por Kg son obligatorios.");return}const Q={name:r,applicationType:g,dosageType:S,category:o};a&&(Q.laboratory=a),u&&(Q.presentationValue=parseFloat(u)),Q.presentationUnit=f,h&&(Q.price=parseFloat(h)),g==="Inyectable"&&(Q.applicationRoute=y),S==="fixed"&&(Q.dosageFixed=parseFloat(C)),S==="per_kg"&&(Q.dosagePerKg_ml=parseFloat(j),Q.dosagePerKg_kg=parseFloat(k));try{await t(Q)}catch(Y){M("No se pudo guardar el producto."),console.error(Y)}};return c.jsxs("form",{onSubmit:L,className:"space-y-4",children:[c.jsx("input",{type:"text",value:r,onChange:V=>i(V.target.value),placeholder:"Nombre o Marca Comercial",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),c.jsxs("select",{value:o,onChange:V=>l(V.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[c.jsx("option",{value:"",disabled:!0,children:"Seleccionar Categoría..."}),P9e.map(V=>c.jsx("option",{value:V,children:V},V))]}),c.jsx("input",{type:"text",value:a,onChange:V=>s(V.target.value),placeholder:"Laboratorio (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:u,onChange:V=>d(V.target.value),placeholder:"Presentación",className:"w-full bg-zinc-800 p-3 rounded-xl"}),c.jsxs("select",{value:f,onChange:V=>p(V.target.value),className:"bg-zinc-800 p-3 rounded-xl",children:[c.jsx("option",{value:"ml",children:"ml"}),c.jsx("option",{value:"L",children:"L"})]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400",children:"$"}),c.jsx("input",{type:"number",step:"0.01",value:h,onChange:V=>m(V.target.value),placeholder:"Precio",className:"w-full bg-zinc-800 p-3 pl-7 rounded-xl"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Vía de Administración"}),c.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[c.jsx("button",{type:"button",onClick:()=>v("Inyectable"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Inyectable"}),c.jsx("button",{type:"button",onClick:()=>v("Oral"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Oral"}),c.jsx(Ui.div,{layoutId:"app-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${g==="Oral"?"left-1/2":"left-1"}`})]})]}),g==="Inyectable"&&c.jsxs(Ui.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[c.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Ruta (Inyectable)"}),c.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[c.jsx("button",{type:"button",onClick:()=>b("Intramuscular"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Intramuscular"}),c.jsx("button",{type:"button",onClick:()=>b("Subcutáneo"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Subcutáneo"}),c.jsx(Ui.div,{layoutId:"app-route-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${y==="Subcutáneo"?"left-1/2":"left-1"}`})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Dosificación"}),c.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[c.jsx("button",{type:"button",onClick:()=>A("per_kg"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Por Kg PV"}),c.jsx("button",{type:"button",onClick:()=>A("fixed"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Dosis Única"}),c.jsx(Ui.div,{layoutId:"dosage-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${S==="fixed"?"left-1/2":"left-1"}`})]}),S==="per_kg"?c.jsxs("div",{className:"flex items-center justify-between gap-2 animate-fade-in",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"number",step:"0.1",value:j,onChange:V=>E(V.target.value),placeholder:"1",className:"w-full bg-zinc-800 p-3 pr-10 rounded-xl",required:!0}),c.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"ml"})]}),c.jsx("span",{className:"text-zinc-500 text-sm",children:"por cada"}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"number",step:"1",value:k,onChange:V=>O(V.target.value),placeholder:"50",className:"w-full bg-zinc-800 p-3 pr-10 rounded-xl",required:!0}),c.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"Kg"})]})]}):c.jsxs("div",{className:"relative animate-fade-in",children:[c.jsx("input",{type:"number",step:"0.1",value:C,onChange:V=>T(V.target.value),placeholder:"Ej: 2",className:"w-full bg-zinc-800 p-3 pr-24 rounded-xl",required:!0}),c.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"ml (dosis total)"})]})]}),D&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(mr,{size:18}),c.jsx("span",{children:D})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-brand-green text-white font-bold rounded-lg",children:n?"Actualizar Producto":"Guardar Producto"})]})]})};function T9e(){const{products:t,addProduct:e,updateProduct:n,deleteProduct:r}=Xt(),[i,a]=I.useState(!1),[s,o]=I.useState(void 0),[l,u]=I.useState(null),[d,f]=I.useState("Todos"),p=A=>{o(A),a(!0)},h=()=>{a(!1),o(void 0)},m=async A=>{s!=null&&s.id?await n(s.id,A):await e(A),h()},g=async()=>{l!=null&&l.id&&await r(l.id),u(null)},v=I.useMemo(()=>{const A=new Set(t.map(C=>C.category).filter(Boolean));return["Todos",...Array.from(A).sort()]},[t]),y=I.useMemo(()=>d==="Todos"?t:t.filter(A=>A.category===d),[t,d]),b=A=>{if(!A.price||!A.presentationValue||A.presentationValue===0)return"N/A";const C=A.presentationUnit==="L"?A.presentationValue*1e3:A.presentationValue;return C===0?"N/A":`$${(A.price/C).toFixed(3)} / ml`},S=A=>A.dosageType==="fixed"?`${A.dosageFixed} ml (fija)`:A.dosageType==="per_kg"?`${A.dosagePerKg_ml} ml / ${A.dosagePerKg_kg} Kg`:"No especificada";return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Inventario de Productos"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Gestión de Insumos Sanitarios"})]}),c.jsxs("button",{onClick:()=>p(),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:opacity-90 text-black font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(qi,{size:18})," Añadir Nuevo Producto"]}),c.jsxs("div",{className:"space-y-2 pt-4",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-zinc-300",children:[c.jsx($H,{size:18})," Filtrar por Categoría"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(A=>c.jsx("button",{onClick:()=>f(A),className:`px-3 py-1.5 text-sm font-semibold rounded-full transition-colors ${d===A?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:A},A))})]}),c.jsx("div",{className:"space-y-3 pt-4",children:y.length>0?y.map(A=>c.jsx("div",{className:"bg-dashboard-surface rounded-2xl p-4 border border-brand-border",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:A.name}),c.jsx("p",{className:"text-sm text-zinc-400",children:A.presentationValue?`${A.presentationValue} ${A.presentationUnit}`:"Sin presentación"}),c.jsxs("div",{className:"mt-2 flex items-center flex-wrap gap-x-4 gap-y-1 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(pp,{size:14})," ",S(A)]}),c.jsxs("span",{className:"flex items-center gap-1 font-semibold text-amber-400",children:[c.jsx(pl,{size:14})," ",b(A)]})]})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>p(A),className:"p-2 text-zinc-400 hover:text-brand-orange transition-colors",children:c.jsx(kf,{size:18})}),c.jsx("button",{onClick:()=>u(A),className:"p-2 text-zinc-400 hover:text-brand-red transition-colors",children:c.jsx(Yl,{size:18})})]})]})},A.id)):c.jsxs("div",{className:"text-center py-10 bg-dashboard-surface rounded-2xl",children:[c.jsx("p",{className:"text-zinc-500 font-semibold",children:"No se encontraron productos."}),c.jsx("p",{className:"text-zinc-500 text-sm",children:d==="Todos"?"Añade tu primer producto para empezar.":`No hay productos en la categoría "${d}".`})]})})]}),c.jsx(cn,{isOpen:i,onClose:h,title:s?"Editar Producto":"Añadir Producto",children:c.jsx(AD,{onSave:m,onCancel:h,existingProduct:s})}),c.jsx(vv,{isOpen:!!l,onClose:()=>u(null),onConfirm:g,title:"Eliminar Producto",message:`¿Estás seguro de que quieres eliminar "${l==null?void 0:l.name}"? Esta acción no se puede deshacer.`})]})}var b_,wn,rQ,iQ,Ug,hh,BF,aQ,sQ,u5={},oQ=[],D9e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Xd(t,e){for(var n in e)t[n]=e[n];return t}function lQ(t){var e=t.parentNode;e&&e.removeChild(t)}function Je(t,e,n){var r,i,a,s={};for(a in e)a=="key"?r=e[a]:a=="ref"?i=e[a]:s[a]=e[a];if(arguments.length>2&&(s.children=arguments.length>3?b_.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(a in t.defaultProps)s[a]===void 0&&(s[a]=t.defaultProps[a]);return e2(t,s,r,i,null)}function e2(t,e,n,r,i){var a={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++rQ};return i==null&&wn.vnode!=null&&wn.vnode(a),a}function dd(){return{current:null}}function Hi(t){return t.children}function I9e(t,e,n,r,i){var a;for(a in n)a==="children"||a==="key"||a in e||d5(t,a,null,n[a],r);for(a in e)i&&typeof e[a]!="function"||a==="children"||a==="key"||a==="value"||a==="checked"||n[a]===e[a]||d5(t,a,e[a],n[a],r)}function VF(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||D9e.test(e)?n:n+"px"}function d5(t,e,n,r,i){var a;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||VF(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||VF(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")a=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=n,n?r||t.addEventListener(e,a?HF:UF,a):t.removeEventListener(e,a?HF:UF,a);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function UF(t){Ug=!0;try{return this.l[t.type+!1](wn.event?wn.event(t):t)}finally{Ug=!1}}function HF(t){Ug=!0;try{return this.l[t.type+!0](wn.event?wn.event(t):t)}finally{Ug=!1}}function dl(t,e){this.props=t,this.context=e}function lb(t,e){if(e==null)return t.__?lb(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?lb(t):null}function cQ(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return cQ(t)}}function O9e(t){Ug?setTimeout(t):aQ(t)}function Hk(t){(!t.__d&&(t.__d=!0)&&hh.push(t)&&!f5.__r++||BF!==wn.debounceRendering)&&((BF=wn.debounceRendering)||O9e)(f5)}function f5(){var t,e,n,r,i,a,s,o;for(hh.sort(function(l,u){return l.__v.__b-u.__v.__b});t=hh.shift();)t.__d&&(e=hh.length,r=void 0,i=void 0,s=(a=(n=t).__v).__e,(o=n.__P)&&(r=[],(i=Xd({},a)).__v=a.__v+1,CD(o,a,i,n.__n,o.ownerSVGElement!==void 0,a.__h!=null?[s]:null,r,s??lb(a),a.__h),pQ(r,a),a.__e!=s&&cQ(a)),hh.length>e&&hh.sort(function(l,u){return l.__v.__b-u.__v.__b}));f5.__r=0}function uQ(t,e,n,r,i,a,s,o,l,u){var d,f,p,h,m,g,v,y=r&&r.__k||oQ,b=y.length;for(n.__k=[],d=0;d<e.length;d++)if((h=n.__k[d]=(h=e[d])==null||typeof h=="boolean"?null:typeof h=="string"||typeof h=="number"||typeof h=="bigint"?e2(null,h,null,null,h):Array.isArray(h)?e2(Hi,{children:h},null,null,null):h.__b>0?e2(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):h)!=null){if(h.__=n,h.__b=n.__b+1,(p=y[d])===null||p&&h.key==p.key&&h.type===p.type)y[d]=void 0;else for(f=0;f<b;f++){if((p=y[f])&&h.key==p.key&&h.type===p.type){y[f]=void 0;break}p=null}CD(t,h,p=p||u5,i,a,s,o,l,u),m=h.__e,(f=h.ref)&&p.ref!=f&&(v||(v=[]),p.ref&&v.push(p.ref,null,h),v.push(f,h.__c||m,h)),m!=null?(g==null&&(g=m),typeof h.type=="function"&&h.__k===p.__k?h.__d=l=dQ(h,l,t):l=fQ(t,h,p,y,m,l),typeof n.type=="function"&&(n.__d=l)):l&&p.__e==l&&l.parentNode!=t&&(l=lb(p))}for(n.__e=g,d=b;d--;)y[d]!=null&&(typeof n.type=="function"&&y[d].__e!=null&&y[d].__e==n.__d&&(n.__d=hQ(r).nextSibling),gQ(y[d],y[d]));if(v)for(d=0;d<v.length;d++)mQ(v[d],v[++d],v[++d])}function dQ(t,e,n){for(var r,i=t.__k,a=0;i&&a<i.length;a++)(r=i[a])&&(r.__=t,e=typeof r.type=="function"?dQ(r,e,n):fQ(n,r,r,i,r.__e,e));return e}function h5(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){h5(n,e)}):e.push(t)),e}function fQ(t,e,n,r,i,a){var s,o,l;if(e.__d!==void 0)s=e.__d,e.__d=void 0;else if(n==null||i!=a||i.parentNode==null)e:if(a==null||a.parentNode!==t)t.appendChild(i),s=null;else{for(o=a,l=0;(o=o.nextSibling)&&l<r.length;l+=1)if(o==i)break e;t.insertBefore(i,a),s=a}return s!==void 0?s:i.nextSibling}function hQ(t){var e,n,r;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(r=hQ(n)))return r}return null}function CD(t,e,n,r,i,a,s,o,l){var u,d,f,p,h,m,g,v,y,b,S,A,C,T,j,E=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(l=n.__h,o=e.__e=n.__e,e.__h=null,a=[o]),(u=wn.__b)&&u(e);try{e:if(typeof E=="function"){if(v=e.props,y=(u=E.contextType)&&r[u.__c],b=u?y?y.props.value:u.__:r,n.__c?g=(d=e.__c=n.__c).__=d.__E:("prototype"in E&&E.prototype.render?e.__c=d=new E(v,b):(e.__c=d=new dl(v,b),d.constructor=E,d.render=R9e),y&&y.sub(d),d.props=v,d.state||(d.state={}),d.context=b,d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),E.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Xd({},d.__s)),Xd(d.__s,E.getDerivedStateFromProps(v,d.__s))),p=d.props,h=d.state,d.__v=e,f)E.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(E.getDerivedStateFromProps==null&&v!==p&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,b),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,b)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(k){k&&(k.__=e)}),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[],d.__h.length&&s.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,b),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(p,h,m)})}if(d.context=b,d.props=v,d.__P=t,A=wn.__r,C=0,"prototype"in E&&E.prototype.render){for(d.state=d.__s,d.__d=!1,A&&A(e),u=d.render(d.props,d.state,d.context),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[]}else do d.__d=!1,A&&A(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++C<25);d.state=d.__s,d.getChildContext!=null&&(r=Xd(Xd({},r),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(m=d.getSnapshotBeforeUpdate(p,h)),j=u!=null&&u.type===Hi&&u.key==null?u.props.children:u,uQ(t,Array.isArray(j)?j:[j],e,n,r,i,a,s,o,l),d.base=e.__e,e.__h=null,d.__h.length&&s.push(d),g&&(d.__E=d.__=null),d.__e=!1}else a==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=M9e(n.__e,e,n,r,i,a,s,l);(u=wn.diffed)&&u(e)}catch(k){e.__v=null,(l||a!=null)&&(e.__e=o,e.__h=!!l,a[a.indexOf(o)]=null),wn.__e(k,e,n)}}function pQ(t,e){wn.__c&&wn.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){wn.__e(r,n.__v)}})}function M9e(t,e,n,r,i,a,s,o){var l,u,d,f=n.props,p=e.props,h=e.type,m=0;if(h==="svg"&&(i=!0),a!=null){for(;m<a.length;m++)if((l=a[m])&&"setAttribute"in l==!!h&&(h?l.localName===h:l.nodeType===3)){t=l,a[m]=null;break}}if(t==null){if(h===null)return document.createTextNode(p);t=i?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,p.is&&p),a=null,o=!1}if(h===null)f===p||o&&t.data===p||(t.data=p);else{if(a=a&&b_.call(t.childNodes),u=(f=n.props||u5).dangerouslySetInnerHTML,d=p.dangerouslySetInnerHTML,!o){if(a!=null)for(f={},m=0;m<t.attributes.length;m++)f[t.attributes[m].name]=t.attributes[m].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}if(I9e(t,p,f,i,o),d)e.__k=[];else if(m=e.props.children,uQ(t,Array.isArray(m)?m:[m],e,n,r,i&&h!=="foreignObject",a,s,a?a[0]:n.__k&&lb(n,0),o),a!=null)for(m=a.length;m--;)a[m]!=null&&lQ(a[m]);o||("value"in p&&(m=p.value)!==void 0&&(m!==t.value||h==="progress"&&!m||h==="option"&&m!==f.value)&&d5(t,"value",m,f.value,!1),"checked"in p&&(m=p.checked)!==void 0&&m!==t.checked&&d5(t,"checked",m,f.checked,!1))}return t}function mQ(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){wn.__e(r,n)}}function gQ(t,e,n){var r,i;if(wn.unmount&&wn.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||mQ(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){wn.__e(a,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&gQ(r[i],e,n||typeof t.type!="function");n||t.__e==null||lQ(t.__e),t.__=t.__e=t.__d=void 0}function R9e(t,e,n){return this.constructor(t,n)}function cb(t,e,n){var r,i,a;wn.__&&wn.__(t,e),i=(r=!1)?null:e.__k,a=[],CD(e,t=e.__k=Je(Hi,null,[t]),i||u5,u5,e.ownerSVGElement!==void 0,i?null:e.firstChild?b_.call(e.childNodes):null,a,i?i.__e:e.firstChild,r),pQ(a,t)}function L9e(t,e){var n={__c:e="__cC"+sQ++,__:t,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,a;return this.getChildContext||(i=[],(a={})[e]=this,this.getChildContext=function(){return a},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&i.some(function(o){o.__e=!0,Hk(o)})},this.sub=function(s){i.push(s);var o=s.componentWillUnmount;s.componentWillUnmount=function(){i.splice(i.indexOf(s),1),o&&o.call(s)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}b_=oQ.slice,wn={__e:function(t,e,n,r){for(var i,a,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(t)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),s=i.__d),s)return i.__E=i}catch(o){t=o}throw t}},rQ=0,iQ=function(t){return t!=null&&t.constructor===void 0},Ug=!1,dl.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Xd({},this.state),typeof t=="function"&&(t=t(Xd({},n),this.props)),t&&Xd(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Hk(this))},dl.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Hk(this))},dl.prototype.render=Hi,hh=[],aQ=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f5.__r=0,sQ=0;var Xc,IC,WF,vQ=[],OC=[],qF=wn.__b,KF=wn.__r,GF=wn.diffed,YF=wn.__c,XF=wn.unmount;function F9e(){for(var t;t=vQ.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(t2),t.__H.__h.forEach(Wk),t.__H.__h=[]}catch(e){t.__H.__h=[],wn.__e(e,t.__v)}}wn.__b=function(t){Xc=null,qF&&qF(t)},wn.__r=function(t){KF&&KF(t);var e=(Xc=t.__c).__H;e&&(IC===Xc?(e.__h=[],Xc.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=OC,n.__N=n.i=void 0})):(e.__h.forEach(t2),e.__h.forEach(Wk),e.__h=[])),IC=Xc},wn.diffed=function(t){GF&&GF(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(vQ.push(e)!==1&&WF===wn.requestAnimationFrame||((WF=wn.requestAnimationFrame)||z9e)(F9e)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==OC&&(n.__=n.__V),n.i=void 0,n.__V=OC})),IC=Xc=null},wn.__c=function(t,e){e.some(function(n){try{n.__h.forEach(t2),n.__h=n.__h.filter(function(r){return!r.__||Wk(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],wn.__e(r,n.__v)}}),YF&&YF(t,e)},wn.unmount=function(t){XF&&XF(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{t2(r)}catch(i){e=i}}),n.__H=void 0,e&&wn.__e(e,n.__v))};var QF=typeof requestAnimationFrame=="function";function z9e(t){var e,n=function(){clearTimeout(r),QF&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);QF&&(e=requestAnimationFrame(n))}function t2(t){var e=Xc,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Xc=e}function Wk(t){var e=Xc;t.__c=t.__(),Xc=e}function $9e(t,e){for(var n in e)t[n]=e[n];return t}function ZF(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function JF(t){this.props=t}(JF.prototype=new dl).isPureReactComponent=!0,JF.prototype.shouldComponentUpdate=function(t,e){return ZF(this.props,t)||ZF(this.state,e)};var ez=wn.__b;wn.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),ez&&ez(t)};var B9e=wn.__e;wn.__e=function(t,e,n,r){if(t.then){for(var i,a=e;a=a.__;)if((i=a.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e)}B9e(t,e,n,r)};var tz=wn.unmount;function yQ(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=$9e({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return yQ(r,e,n)})),t}function bQ(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return bQ(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function MC(){this.__u=0,this.t=null,this.__b=null}function xQ(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function c1(){this.u=null,this.o=null}wn.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),tz&&tz(t)},(MC.prototype=new dl).__c=function(t,e){var n=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var i=xQ(r.__v),a=!1,s=function(){a||(a=!0,n.__R=null,i?i(o):o())};n.__R=s;var o=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=bQ(u,u.__c.__P,u.__c.__O)}var d;for(r.setState({__a:r.__b=null});d=r.t.pop();)d.forceUpdate()}},l=e.__h===!0;r.__u++||l||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(s,s)},MC.prototype.componentWillUnmount=function(){this.t=[]},MC.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=yQ(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&Je(Hi,null,t.fallback);return i&&(i.__h=null),[Je(Hi,null,e.__a?null:t.children),i]};var nz=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function V9e(t){return this.getChildContext=function(){return t.context},t.children}function U9e(t){var e=this,n=t.i;e.componentWillUnmount=function(){cb(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),cb(Je(V9e,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function H9e(t,e){var n=Je(U9e,{__v:t,i:e});return n.containerInfo=e,n}(c1.prototype=new dl).__a=function(t){var e=this,n=xQ(e.__v),r=e.o.get(t);return r[0]++,function(i){var a=function(){e.props.revealOrder?(r.push(i),nz(e,t,r)):i()};n?n(a):a()}},c1.prototype.render=function(t){this.u=null,this.o=new Map;var e=h5(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},c1.prototype.componentDidUpdate=c1.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){nz(t,n,e)})};var W9e=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,q9e=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,K9e=typeof document<"u",G9e=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};dl.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(dl.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var rz=wn.event;function Y9e(){}function X9e(){return this.cancelBubble}function Q9e(){return this.defaultPrevented}wn.event=function(t){return rz&&(t=rz(t)),t.persist=Y9e,t.isPropagationStopped=X9e,t.isDefaultPrevented=Q9e,t.nativeEvent=t};var iz={configurable:!0,get:function(){return this.class}},az=wn.vnode;wn.vnode=function(t){var e=t.type,n=t.props,r=n;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var a in r={},n){var s=n[a];K9e&&a==="children"&&e==="noscript"||a==="value"&&"defaultValue"in n&&s==null||(a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&s===!0?s="":/ondoubleclick/i.test(a)?a="ondblclick":/^onchange(textarea|input)/i.test(a+e)&&!G9e(n.type)?a="oninput":/^onfocus$/i.test(a)?a="onfocusin":/^onblur$/i.test(a)?a="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(a)?a=a.toLowerCase():i&&q9e.test(a)?a=a.replace(/[A-Z0-9]/g,"-$&").toLowerCase():s===null&&(s=void 0),/^oninput$/i.test(a)&&(a=a.toLowerCase(),r[a]&&(a="oninputCapture")),r[a]=s)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=h5(n.children).forEach(function(o){o.props.selected=r.value.indexOf(o.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=h5(n.children).forEach(function(o){o.props.selected=r.multiple?r.defaultValue.indexOf(o.props.value)!=-1:r.defaultValue==o.props.value})),t.props=r,n.class!=n.className&&(iz.enumerable="className"in n,n.className!=null&&(r.class=n.className),Object.defineProperty(r,"className",iz))}t.$$typeof=W9e,az&&az(t)};var sz=wn.__r;wn.__r=function(t){sz&&sz(t),t.__c};const wQ=[],qk=new Map;function SQ(t){wQ.push(t),qk.forEach(e=>{AQ(e,t)})}function Z9e(t){t.isConnected&&t.getRootNode&&_Q(t.getRootNode())}function _Q(t){let e=qk.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=e$e();n&&(e.nonce=n);const r=t===document?document.head:t,i=t===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,i)}qk.set(t,e),J9e(e)}}function J9e(t){for(const e of wQ)AQ(t,e)}function AQ(t,e){const{sheet:n}=t,r=n.cssRules.length;e.split("}").forEach((i,a)=>{i=i.trim(),i&&n.insertRule(i+"}",r+a)})}let RC;function e$e(){return RC===void 0&&(RC=t$e()),RC}function t$e(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&_Q(document);var n$e=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';SQ(n$e);class jD{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:r}=this;e in r&&(n?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function ND(t){t.parentNode&&t.parentNode.removeChild(t)}function Hs(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(r$e(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function r$e(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function i$e(t,e){let n=t instanceof HTMLElement?[t]:t,r=[];for(let i=0;i<n.length;i+=1){let a=n[i].querySelectorAll(e);for(let s=0;s<a.length;s+=1)r.push(a[s])}return r}const a$e=/(top|left|right|bottom|width|height)$/i;function L0(t,e){for(let n in e)CQ(t,n,e[n])}function CQ(t,e,n){n==null?t.style[e]="":typeof n=="number"&&a$e.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function jQ(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let oz=0;function x_(){return oz+=1,"fc-dom-"+oz}function w_(t){t.preventDefault()}function s$e(t,e){return n=>{let r=Hs(n.target,t);r&&e.call(r,n,r)}}function NQ(t,e,n,r){let i=s$e(n,r);return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}function o$e(t,e,n,r){let i;return NQ(t,"mouseover",e,(a,s)=>{if(s!==i){i=s,n(a,s);let o=l=>{i=null,r(l,s),s.removeEventListener("mouseleave",o)};s.addEventListener("mouseleave",o)}})}const lz=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function l$e(t,e){let n=r=>{e(r),lz.forEach(i=>{t.removeEventListener(i,n)})};lz.forEach(r=>{t.addEventListener(r,n)})}function EQ(t){return Object.assign({onClick:t},kQ(t))}function kQ(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let cz=0;function jp(){return cz+=1,String(cz)}function ED(){document.body.classList.add("fc-not-allowed")}function kD(){document.body.classList.remove("fc-not-allowed")}function c$e(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",w_)}function u$e(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",w_)}function d$e(t){t.addEventListener("contextmenu",w_)}function f$e(t){t.removeEventListener("contextmenu",w_)}function h$e(t){let e=[],n=[],r,i;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),r=0;r<n.length;r+=1)i=n[r],typeof i=="string"?e.push(i.charAt(0)==="-"?{field:i.substring(1),order:-1}:{field:i,order:1}):typeof i=="function"&&e.push({func:i});return e}function p$e(t,e,n){let r,i;for(r=0;r<n.length;r+=1)if(i=m$e(t,e,n[r]),i)return i;return 0}function m$e(t,e,n){return n.func?n.func(t,e):g$e(t[n.field],e[n.field])*(n.order||1)}function g$e(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function LC(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function F0(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((r,i,a)=>r.replace("$"+a,i||""),t):n}function v$e(t,e){return t-e}function FC(t){return t%1===0}function y$e(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const b$e=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Pr(t,e){return typeof t=="string"?x$e(t):typeof t=="object"&&t?uz(t):typeof t=="number"?uz({[e||"milliseconds"]:t}):null}function x$e(t){let e=b$e.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function uz(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function w$e(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function S$e(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function _$e(t){return Fm(t)/365}function A$e(t){return Fm(t)/30}function Fm(t){return ub(t)/864e5}function ub(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function Kk(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function Sf(t,e,n){if(t===e)return!0;let r=t.length,i;if(r!==e.length)return!1;for(i=0;i<r;i+=1)if(!(n?n(t[i],e[i]):t[i]===e[i]))return!1;return!0}const C$e=["sun","mon","tue","wed","thu","fri","sat"];function dz(t,e){let n=Qd(t);return n[2]+=e*7,So(n)}function Qa(t,e){let n=Qd(t);return n[2]+=e,So(n)}function _f(t,e){let n=Qd(t);return n[6]+=e,So(n)}function j$e(t,e){return bv(t,e)/7}function bv(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function N$e(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function E$e(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function k$e(t,e){return(e.valueOf()-t.valueOf())/1e3}function P$e(t,e){let n=Ai(t),r=Ai(e);return{years:0,months:0,days:Math.round(bv(n,r)),milliseconds:e.valueOf()-r.valueOf()-(t.valueOf()-n.valueOf())}}function T$e(t,e){let n=p5(t,e);return n!==null&&n%7===0?n/7:null}function p5(t,e){return Zd(t)===Zd(e)?Math.round(bv(t,e)):null}function Ai(t){return So([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function D$e(t){return So([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function I$e(t){return So([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function O$e(t){return So([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function M$e(t,e,n){let r=t.getUTCFullYear(),i=zC(t,r,e,n);if(i<1)return zC(t,r-1,e,n);let a=zC(t,r+1,e,n);return a>=1?Math.min(i,a):i}function zC(t,e,n,r){let i=So([e,0,1+R$e(e,n,r)]),a=Ai(t),s=Math.round(bv(i,a));return Math.floor(s/7)+1}function R$e(t,e,n){let r=7+e-n;return-((7+So([t,0,r]).getUTCDay()-e)%7)+r-1}function fz(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function hz(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function Qd(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function So(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function PQ(t){return!isNaN(t.valueOf())}function Zd(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function L$e(t,e,n=!1){let r=t.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",TD(e,!0)))),r}function PD(t){return t.toISOString().replace(/T.*$/,"")}function F$e(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function TD(t,e=!1){let n=t<0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),a=Math.round(r%60);return e?`${n+LC(i,2)}:${LC(a,2)}`:`GMT${n}${i}${a?`:${LC(a,2)}`:""}`}function Ar(t,e,n){let r,i;return function(...a){if(!r)i=t.apply(this,a);else if(!Sf(r,a)){let s=t.apply(this,a);(!e||!e(s,i))&&(i=s)}return r=a,i}}function n2(t,e,n){let r,i;return a=>(r?Oc(r,a)||(i=t.call(this,a)):i=t.call(this,a),r=a,i)}const $C={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},m5={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},u1=/\s*([ap])\.?m\.?/i,z$e=/,/g,$$e=/\s+/g,B$e=/\u200e/g,V$e=/UTC|GMT/;class U$e{constructor(e){let n={},r={},i=9;for(let a in e)a in $C?(r[a]=e[a],$C[a]<9&&(i=Math.min($C[a],i))):(n[a]=e[a],a in m5&&(i=Math.min(m5[a],i)));this.standardDateProps=n,this.extendedSettings=r,this.smallestUnitNum=i,this.buildFormattingFunc=Ar(pz)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,r,i){let{standardDateProps:a,extendedSettings:s}=this,o=Y$e(e.marker,n.marker,r.calendarSystem);if(!o)return this.format(e,r);let l=o;l>1&&(a.year==="numeric"||a.year==="2-digit")&&(a.month==="numeric"||a.month==="2-digit")&&(a.day==="numeric"||a.day==="2-digit")&&(l=1);let u=this.format(e,r),d=this.format(n,r);if(u===d)return u;let f=X$e(a,l),p=pz(f,s,r),h=p(e),m=p(n),g=Q$e(u,h,d,m),v=s.separator||i||r.defaultSeparator||"";return g?g.before+h+v+m+g.after:u+v+d}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function pz(t,e,n){let r=Object.keys(t).length;return r===1&&t.timeZoneName==="short"?i=>TD(i.timeZoneOffset):r===0&&e.week?i=>G$e(n.computeWeekNumber(i.marker),n.weekText,n.weekTextLong,n.locale,e.week):H$e(t,e,n)}function H$e(t,e,n){t=Object.assign({},t),e=Object.assign({},e),W$e(t,e),t.timeZone="UTC";let r=new Intl.DateTimeFormat(n.locale.codes,t),i;if(e.omitZeroMinute){let a=Object.assign({},t);delete a.minute,i=new Intl.DateTimeFormat(n.locale.codes,a)}return a=>{let{marker:s}=a,o;i&&!s.getUTCMinutes()?o=i:o=r;let l=o.format(s);return q$e(l,a,t,e,n)}}function W$e(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function q$e(t,e,n,r,i){return t=t.replace(B$e,""),n.timeZoneName==="short"&&(t=K$e(t,i.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":TD(e.timeZoneOffset))),r.omitCommas&&(t=t.replace(z$e,"").trim()),r.omitZeroMinute&&(t=t.replace(":00","")),r.meridiem===!1?t=t.replace(u1,"").trim():r.meridiem==="narrow"?t=t.replace(u1,(a,s)=>s.toLocaleLowerCase()):r.meridiem==="short"?t=t.replace(u1,(a,s)=>`${s.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(t=t.replace(u1,a=>a.toLocaleLowerCase())),t=t.replace($$e," "),t=t.trim(),t}function K$e(t,e){let n=!1;return t=t.replace(V$e,()=>(n=!0,e)),n||(t+=` ${e}`),t}function G$e(t,e,n,r,i){let a=[];return i==="long"?a.push(n):(i==="short"||i==="narrow")&&a.push(e),(i==="long"||i==="short")&&a.push(" "),a.push(r.simpleNumberFormat.format(t)),r.options.direction==="rtl"&&a.reverse(),a.join("")}function Y$e(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:Zd(t)!==Zd(e)?1:0}function X$e(t,e){let n={};for(let r in t)(!(r in m5)||m5[r]<=e)&&(n[r]=t[r]);return n}function Q$e(t,e,n,r){let i=0;for(;i<t.length;){let a=t.indexOf(e,i);if(a===-1)break;let s=t.substr(0,a);i=a+e.length;let o=t.substr(i),l=0;for(;l<n.length;){let u=n.indexOf(r,l);if(u===-1)break;let d=n.substr(0,u);l=u+r.length;let f=n.substr(l);if(s===d&&o===f)return{before:s,after:o}}}return null}function mz(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function g5(t,e,n,r){let i=mz(t,n.calendarSystem),a=e?mz(e,n.calendarSystem):null;return{date:i,start:i,end:a,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}class Z$e{constructor(e){this.cmdStr=e}format(e,n,r){return n.cmdFormatter(this.cmdStr,g5(e,null,n,r))}formatRange(e,n,r,i){return r.cmdFormatter(this.cmdStr,g5(e,n,r,i))}}class J$e{constructor(e){this.func=e}format(e,n,r){return this.func(g5(e,null,n,r))}formatRange(e,n,r,i){return this.func(g5(e,n,r,i))}}function Ya(t){return typeof t=="object"&&t?new U$e(t):typeof t=="string"?new Z$e(t):typeof t=="function"?new J$e(t):null}const gz={navLinkDayClick:Ze,navLinkWeekClick:Ze,duration:Pr,bootstrapFontAwesome:Ze,buttonIcons:Ze,customButtons:Ze,defaultAllDayEventDuration:Pr,defaultTimedEventDuration:Pr,nextDayThreshold:Pr,scrollTime:Pr,scrollTimeReset:Boolean,slotMinTime:Pr,slotMaxTime:Pr,dayPopoverFormat:Ya,slotDuration:Pr,snapDuration:Pr,headerToolbar:Ze,footerToolbar:Ze,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Ya,dayHeaderClassNames:Ze,dayHeaderContent:Ze,dayHeaderDidMount:Ze,dayHeaderWillUnmount:Ze,dayCellClassNames:Ze,dayCellContent:Ze,dayCellDidMount:Ze,dayCellWillUnmount:Ze,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Ze,weekNumbers:Boolean,weekNumberClassNames:Ze,weekNumberContent:Ze,weekNumberDidMount:Ze,weekNumberWillUnmount:Ze,editable:Boolean,viewClassNames:Ze,viewDidMount:Ze,viewWillUnmount:Ze,nowIndicator:Boolean,nowIndicatorSnap:Ze,nowIndicatorClassNames:Ze,nowIndicatorContent:Ze,nowIndicatorDidMount:Ze,nowIndicatorWillUnmount:Ze,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Ze,locale:Ze,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Ze,eventOrder:h$e,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Ze,contentHeight:Ze,direction:String,weekNumberFormat:Ya,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Ze,initialDate:Ze,now:Ze,eventDataTransform:Ze,stickyHeaderDates:Ze,stickyFooterScrollbar:Ze,viewHeight:Ze,defaultAllDay:Boolean,eventSourceFailure:Ze,eventSourceSuccess:Ze,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Ze,eventConstraint:Ze,eventAllow:Ze,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Ze,eventContent:Ze,eventDidMount:Ze,eventWillUnmount:Ze,selectConstraint:Ze,selectOverlap:Ze,selectAllow:Ze,droppable:Boolean,unselectCancel:String,slotLabelFormat:Ze,slotLaneClassNames:Ze,slotLaneContent:Ze,slotLaneDidMount:Ze,slotLaneWillUnmount:Ze,slotLabelClassNames:Ze,slotLabelContent:Ze,slotLabelDidMount:Ze,slotLabelWillUnmount:Ze,dayMaxEvents:Ze,dayMaxEventRows:Ze,dayMinWidth:Number,slotLabelInterval:Pr,allDayText:String,allDayClassNames:Ze,allDayContent:Ze,allDayDidMount:Ze,allDayWillUnmount:Ze,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Ya,rerenderDelay:Number,moreLinkText:Ze,moreLinkHint:Ze,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Ze,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Pr,hiddenDays:Ze,fixedWeekCount:Boolean,validRange:Ze,visibleRange:Ze,titleFormat:Ze,eventInteractive:Boolean,noEventsText:String,viewHint:Ze,navLinkHint:Ze,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Ze,moreLinkClassNames:Ze,moreLinkContent:Ze,moreLinkDidMount:Ze,moreLinkWillUnmount:Ze,monthStartFormat:Ya,handleCustomRendering:Ze,customRenderingMetaMap:Ze,customRenderingReplaces:Boolean},z0={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},vz={datesSet:Ze,eventsSet:Ze,eventAdd:Ze,eventChange:Ze,eventRemove:Ze,windowResize:Ze,eventClick:Ze,eventMouseEnter:Ze,eventMouseLeave:Ze,select:Ze,unselect:Ze,loading:Ze,_unmount:Ze,_beforeprint:Ze,_afterprint:Ze,_noEventDrop:Ze,_noEventResize:Ze,_resize:Ze,_scrollRequest:Ze},yz={buttonText:Ze,buttonHints:Ze,views:Ze,plugins:Ze,initialEvents:Ze,events:Ze,eventSources:Ze},ch={headerToolbar:uh,footerToolbar:uh,buttonText:uh,buttonHints:uh,buttonIcons:uh,dateIncrement:uh,plugins:d1,events:d1,eventSources:d1,resources:d1};function uh(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?Oc(t,e):t===e}function d1(t,e){return Array.isArray(t)&&Array.isArray(e)?Sf(t,e):t===e}const eBe={type:String,component:Ze,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Ze,usesMinMaxTime:Boolean,classNames:Ze,content:Ze,didMount:Ze,willUnmount:Ze};function BC(t){return ID(t,ch)}function DD(t,e){let n={},r={};for(let i in e)i in t&&(n[i]=e[i](t[i]));for(let i in t)i in e||(r[i]=t[i]);return{refined:n,extra:r}}function Ze(t){return t}const{hasOwnProperty:v5}=Object.prototype;function ID(t,e){let n={};if(e){for(let r in e)if(e[r]===uh){let i=[];for(let a=t.length-1;a>=0;a-=1){let s=t[a][r];if(typeof s=="object"&&s)i.unshift(s);else if(s!==void 0){n[r]=s;break}}i.length&&(n[r]=ID(i))}}for(let r=t.length-1;r>=0;r-=1){let i=t[r];for(let a in i)a in n||(n[a]=i[a])}return n}function ip(t,e){let n={};for(let r in t)e(t[r],r)&&(n[r]=t[r]);return n}function Np(t,e){let n={};for(let r in t)n[r]=e(t[r],r);return n}function TQ(t){let e={};for(let n of t)e[n]=!0;return e}function OD(t){let e=[];for(let n in t)e.push(t[n]);return e}function Oc(t,e){if(t===e)return!0;for(let n in t)if(v5.call(t,n)&&!(n in e))return!1;for(let n in e)if(v5.call(e,n)&&t[n]!==e[n])return!1;return!0}const tBe=/^on[A-Z]/;function nBe(t,e){const n=rBe(t,e);for(let r of n)if(!tBe.test(r))return!1;return!0}function rBe(t,e){let n=[];for(let r in t)v5.call(t,r)&&(r in e||n.push(r));for(let r in e)v5.call(e,r)&&t[r]!==e[r]&&n.push(r);return n}function VC(t,e,n={}){if(t===e)return!0;for(let r in e)if(!(r in t&&iBe(t[r],e[r],n[r])))return!1;for(let r in t)if(!(r in e))return!1;return!0}function iBe(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function aBe(t,e=0,n,r=1){let i=[];n==null&&(n=Object.keys(t).length);for(let a=e;a<n;a+=r){let s=t[a];s!==void 0&&i.push(s)}return i}let DQ={};function sBe(t,e){DQ[t]=e}function oBe(t){return new DQ[t]}class lBe{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return So(e)}markerToArray(e){return Qd(e)}}sBe("gregory",lBe);const cBe=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function uBe(t){let e=cBe.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(PQ(n)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class dBe{constructor(e){let n=this.timeZone=e.timeZone,r=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=oBe(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):So(fz(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=So(e)),n===null||!PQ(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=uBe(e);if(n===null)return null;let{marker:r}=n,i=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):i=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:i}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n,this.calendarSystem.arrayToMarker(r)}addMonths(e,n){let r=this.calendarSystem.markerToArray(e);return r[1]+=n,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,n){let{calendarSystem:r}=this;return Zd(e)===Zd(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)&&r.getMarkerMonth(e)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:r}=this;return Zd(e)===Zd(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(e)+(r.getMarkerYear(n)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let r=this.diffWholeYears(e,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,n),r!==null?{unit:"month",value:r}:(r=T$e(e,n),r!==null?{unit:"week",value:r}:(r=p5(e,n),r!==null?{unit:"day",value:r}:(r=N$e(e,n),FC(r)?{unit:"hour",value:r}:(r=E$e(e,n),FC(r)?{unit:"minute",value:r}:(r=k$e(e,n),FC(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,r){let i;return r.years&&(i=this.diffWholeYears(e,n),i!==null)?i/_$e(r):r.months&&(i=this.diffWholeMonths(e,n),i!==null)?i/A$e(r):r.days&&(i=p5(e,n),i!==null)?i/Fm(r):(n.valueOf()-e.valueOf())/ub(r)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?Ai(e):n==="hour"?D$e(e):n==="minute"?I$e(e):n==="second"?O$e(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):M$e(e,this.weekDow,this.weekDoy)}format(e,n,r={}){return n.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,r,i={}){return i.isEndExclusive&&(n=_f(n,-1)),r.formatRange({marker:e,timeZoneOffset:i.forcedStartTzo!=null?i.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:i.forcedEndTzo!=null?i.forcedEndTzo:this.offsetForMarker(n)},this,i.defaultSeparator)}formatIso(e,n={}){let r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(e)),L$e(e,r,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?So(fz(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):So(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-hz(Qd(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Qd(e)):null}toDate(e,n){return this.timeZone==="local"?hz(Qd(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Qd(e))*1e3*60):new Date(e.valueOf()-(n||0))}}class Zb{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,r;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(r in e)n[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}Zb.prototype.classes={};Zb.prototype.iconClasses={};Zb.prototype.baseIconClass="";Zb.prototype.iconOverridePrefix="";function y5(t){t();let e=wn.debounceRendering,n=[];function r(i){n.push(i)}for(wn.debounceRendering=r,cb(Je(fBe,{}),document.createElement("div"));n.length;)n.shift()();wn.debounceRendering=e}class fBe extends dl{render(){return Je("div",{})}componentDidMount(){this.setState({})}}function IQ(t){let e=L9e(t),n=e.Provider;return e.Provider=function(){let r=!this.getChildContext,i=n.apply(this,arguments);if(r){let a=[];this.shouldComponentUpdate=s=>{this.props.value!==s.value&&a.forEach(o=>{o.context=s.value,o.forceUpdate()})},this.sub=s=>{a.push(s);let o=s.componentWillUnmount;s.componentWillUnmount=()=>{a.splice(a.indexOf(s),1),o&&o.call(s)}}}return i},e}class hBe{constructor(e,n,r,i){this.execFunc=e,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=i,this.handleScrollRequest=a=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},a),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Ep=IQ({});function pBe(t,e,n,r,i,a,s,o,l,u,d,f,p,h){return{dateEnv:i,nowManager:a,options:n,pluginHooks:o,emitter:d,dispatch:l,getCurrentData:u,calendarApi:f,viewSpec:t,viewApi:e,dateProfileGenerator:r,theme:s,isRtl:n.direction==="rtl",addResizeHandler(m){d.on("_resize",m)},removeResizeHandler(m){d.off("_resize",m)},createScrollResponder(m){return new hBe(m,d,Pr(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:p,unregisterInteractiveComponent:h}}class kp extends dl{shouldComponentUpdate(e,n){return!VC(this.props,e,this.propEquality)||!VC(this.state,n,this.stateEquality)}safeSetState(e){VC(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}kp.addPropsEquality=mBe;kp.addStateEquality=gBe;kp.contextType=Ep;kp.prototype.propEquality={};kp.prototype.stateEquality={};class Ii extends kp{}Ii.contextType=Ep;function mBe(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function gBe(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function bu(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class MD extends Ii{constructor(){super(...arguments),this.id=jp(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:r}=this.props;(!n.customRenderingReplaces||!Gk(r,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&bu(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:r}=n,{customGenerator:i,defaultGenerator:a,renderProps:s}=e,o=OQ(e,[],this.handleEl);let l=!1,u,d=[],f;if(i!=null){const p=typeof i=="function"?i(s,Je):i;if(p===!0)l=!0;else{const h=p&&typeof p=="object";h&&"html"in p?o.dangerouslySetInnerHTML={__html:p.html}:h&&"domNodes"in p?d=Array.prototype.slice.call(p.domNodes):(h?iQ(p):typeof p!="function")?u=p:f=p}}else l=!Gk(e.generatorName,r);return l&&a&&(u=a(s)),this.queuedDomNodes=d,this.currentGeneratorMeta=f,Je(e.elTag,o,u)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:r,context:i}=this,{handleCustomRendering:a,customRenderingMetaMap:s}=i.options;if(a){const o=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:s==null?void 0:s[r.generatorName];o&&a(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:o},r),{elClasses:(r.elClasses||[]).filter(vBe)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,r=this.base;if(!Sf(e,n)){n.forEach(ND);for(let i of e)r.appendChild(i);this.currentDomNodes=e}}}MD.addPropsEquality({elClasses:Sf,elStyle:Oc,elAttrs:nBe,renderProps:Oc});function Gk(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function OQ(t,e,n){const r=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(r.className=(t.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),t.elStyle&&(r.style=t.elStyle),r}function vBe(t){return!!t}const MQ=IQ(0);class xd extends dl{constructor(){super(...arguments),this.InnerContent=yBe.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(bu(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=bBe(e.classNameGenerator,e.renderProps);if(e.children){const r=OQ(e,n,this.handleEl),i=e.children(this.InnerContent,e.renderProps,r);return e.elTag?Je(e.elTag,r,i):i}else return Je(MD,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}xd.contextType=MQ;function yBe(t,e){const n=t.props;return Je(MD,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function bBe(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class bz extends Ii{render(){let{props:e,context:n}=this,{options:r}=n,i={view:n.viewApi};return Je(xd,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...RQ(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>e.children)}}function RQ(t){return[`fc-${t.type}-view`,"fc-view"]}function xBe(t,e){let n=null,r=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(r=e.createMarker(t.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function xz(t,e){let n=[],{start:r}=e,i,a;for(t.sort(wBe),i=0;i<t.length;i+=1)a=t[i],a.start>r&&n.push({start:r,end:a.start}),a.end>r&&(r=a.end);return r<e.end&&n.push({start:r,end:e.end}),n}function wBe(t,e){return t.start.valueOf()-e.start.valueOf()}function Hg(t,e){let{start:n,end:r}=t,i=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(n===null||r===null||n<r)&&(i={start:n,end:r}),i}function SBe(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function RD(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function S_(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function hf(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function _Be(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function LQ(t){let e=Math.floor(bv(t.start,t.end))||1,n=Ai(t.start),r=Qa(n,e);return{start:n,end:r}}function FQ(t,e=Pr(0)){let n=null,r=null;if(t.end){r=Ai(t.end);let i=t.end.valueOf()-r.valueOf();i&&i>=ub(e)&&(r=Qa(r,1))}return t.start&&(n=Ai(t.start),r&&r<=n&&(r=Qa(n,1))),{start:n,end:r}}function Sm(t,e,n,r){return r==="year"?Pr(n.diffWholeYears(t,e),"year"):r==="month"?Pr(n.diffWholeMonths(t,e),"month"):P$e(t,e)}class zQ{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,r){let{dateEnv:i}=this.props,a=i.subtract(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(a,-1,r)}buildNext(e,n,r){let{dateEnv:i}=this.props,a=i.add(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(a,1,r)}build(e,n,r=!0){let{props:i}=this,a,s,o,l,u,d;return a=this.buildValidRange(),a=this.trimHiddenDays(a),r&&(e=_Be(e,a)),s=this.buildCurrentRangeInfo(e,n),o=/^(year|month|week|day)$/.test(s.unit),l=this.buildRenderRange(this.trimHiddenDays(s.range),s.unit,o),l=this.trimHiddenDays(l),u=l,i.showNonCurrentDates||(u=Hg(u,s.range)),u=this.adjustActiveRange(u),u=Hg(u,a),d=RD(s.range,a),hf(l,e)||(e=l.start),{currentDate:e,validRange:a,currentRange:s.range,currentRangeUnit:s.unit,isRangeAllDay:o,activeRange:u,renderRange:l,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:d,dateIncrement:this.buildDateIncrement(s.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:r}=this,i=null,a=null,s=null,o;return r.duration?(i=r.duration,a=r.durationUnit,s=this.buildRangeFromDuration(e,n,i,a)):(o=this.props.dayCount)?(a="day",s=this.buildRangeFromDayCount(e,n,o)):(s=this.buildCustomVisibleRange(e))?a=r.dateEnv.greatestWholeUnit(s.start,s.end).unit:(i=this.getFallbackDuration(),a=Kk(i).unit,s=this.buildRangeFromDuration(e,n,i,a)),{duration:i,unit:a,range:s}}getFallbackDuration(){return Pr({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:r,slotMinTime:i,slotMaxTime:a}=this.props,{start:s,end:o}=e;return r&&(Fm(i)<0&&(s=Ai(s),s=n.add(s,i)),Fm(a)>1&&(o=Ai(o),o=Qa(o,-1),o=n.add(o,a))),{start:s,end:o}}buildRangeFromDuration(e,n,r,i){let{dateEnv:a,dateAlignment:s}=this.props,o,l,u;if(!s){let{dateIncrement:f}=this.props;f&&ub(f)<ub(r)?s=Kk(f).unit:s=i}Fm(r)<=1&&this.isHiddenDay(o)&&(o=this.skipHiddenDays(o,n),o=Ai(o));function d(){o=a.startOf(e,s),l=a.add(o,r),u={start:o,end:l}}return d(),this.trimHiddenDays(u)||(e=this.skipHiddenDays(e,n),d()),u}buildRangeFromDayCount(e,n,r){let{dateEnv:i,dateAlignment:a}=this.props,s=0,o=e,l;a&&(o=i.startOf(o,a)),o=Ai(o),o=this.skipHiddenDays(o,n),l=o;do l=Qa(l,1),this.isHiddenDay(l)||(s+=1);while(s<r);return{start:o,end:l}}buildCustomVisibleRange(e){let{props:n}=this,r=n.visibleRangeInput,i=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(e)):r,a=this.refineRange(i);return a&&(a.start==null||a.end==null)?null:a}buildRenderRange(e,n,r){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,r;return n||((r=this.props.dateAlignment)?Pr(1,r):e||Pr({days:1}))}refineRange(e){if(e){let n=xBe(e,this.props.dateEnv);return n&&(n=FQ(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],r=0,i;for(this.props.weekends===!1&&e.push(0,6),i=0;i<7;i+=1)(n[i]=e.indexOf(i)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:r}=e;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?n:0)+7)%7];)e=Qa(e,n);return e}}function LD(t,e,n,r){return{instanceId:jp(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:r??null}}function ABe(t,e,n,r){for(let i=0;i<r.length;i+=1){let a=r[i].parse(t,n);if(a){let{allDay:s}=t;return s==null&&(s=e,s==null&&(s=a.allDayGuess,s==null&&(s=!1))),{allDay:s,duration:a.duration,typeData:a.typeData,typeId:i}}}return null}function ap(t,e,n){let{dateEnv:r,pluginHooks:i,options:a}=n,{defs:s,instances:o}=t;o=ip(o,l=>!s[l.defId].recurringDef);for(let l in s){let u=s[l];if(u.recurringDef){let{duration:d}=u.recurringDef;d||(d=u.allDay?a.defaultAllDayEventDuration:a.defaultTimedEventDuration);let f=CBe(u,d,e,r,i.recurringTypes);for(let p of f){let h=LD(l,{start:p,end:r.add(p,d)});o[h.instanceId]=h}}}return{defs:s,instances:o}}function CBe(t,e,n,r,i){let s=i[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:r.subtract(n.start,e),end:n.end},r);return t.allDay&&(s=s.map(Ai)),s}const r2={id:String,groupId:String,title:String,url:String,interactive:Boolean},$Q={start:Ze,end:Ze,date:Ze,allDay:Boolean},jBe=Object.assign(Object.assign(Object.assign({},r2),$Q),{extendedProps:Ze});function BQ(t,e,n,r,i=FD(n),a,s){let{refined:o,extra:l}=VQ(t,n,i),u=EBe(e,n),d=ABe(o,u,n.dateEnv,n.pluginHooks.recurringTypes);if(d){let p=Yk(o,l,e?e.sourceId:"",d.allDay,!!d.duration,n,a);return p.recurringDef={typeId:d.typeId,typeData:d.typeData,duration:d.duration},{def:p,instance:null}}let f=NBe(o,u,n,r);if(f){let p=Yk(o,l,e?e.sourceId:"",f.allDay,f.hasEnd,n,a),h=LD(p.defId,f.range,f.forcedStartTzo,f.forcedEndTzo);return s&&p.publicId&&s[p.publicId]&&(h.instanceId=s[p.publicId]),{def:p,instance:h}}return null}function VQ(t,e,n=FD(e)){return DD(t,n)}function FD(t){return Object.assign(Object.assign(Object.assign({},b5),jBe),t.pluginHooks.eventRefiners)}function Yk(t,e,n,r,i,a,s){let o={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(s&&t.id?s[t.id]:"")||jp(),sourceId:n,allDay:r,hasEnd:i,interactive:t.interactive,ui:x5(t,a),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let l of a.pluginHooks.eventDefMemberAdders)Object.assign(o,l(t));return Object.freeze(o.ui.classNames),Object.freeze(o.extendedProps),o}function NBe(t,e,n,r){let{allDay:i}=t,a,s=null,o=!1,l,u=null,d=t.start!=null?t.start:t.date;if(a=n.dateEnv.createMarkerMeta(d),a)s=a.marker;else if(!r)return null;return t.end!=null&&(l=n.dateEnv.createMarkerMeta(t.end)),i==null&&(e!=null?i=e:i=(!a||a.isTimeUnspecified)&&(!l||l.isTimeUnspecified)),i&&s&&(s=Ai(s)),l&&(u=l.marker,i&&(u=Ai(u)),s&&u<=s&&(u=null)),u?o=!0:r||(o=n.options.forceEventDuration||!1,u=n.dateEnv.add(s,i?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:i,hasEnd:o,range:{start:s,end:u},forcedStartTzo:a?a.forcedTzo:null,forcedEndTzo:l?l.forcedTzo:null}}function EBe(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function db(t,e,n,r,i,a){let s=jc(),o=FD(n);for(let l of t){let u=BQ(l,e,n,r,o,i,a);u&&Xk(u,s)}return s}function Xk(t,e=jc()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function zD(t,e){let n=t.instances[e];if(n){let r=t.defs[n.defId],i=__(t,a=>kBe(r,a));return i.defs[r.defId]=r,i.instances[n.instanceId]=n,i}return jc()}function kBe(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function jc(){return{defs:{},instances:{}}}function $D(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function __(t,e){let n=ip(t.defs,e),r=ip(t.instances,i=>n[i.defId]);return{defs:n,instances:r}}function PBe(t,e){let{defs:n,instances:r}=t,i={},a={};for(let s in n)e.defs[s]||(i[s]=n[s]);for(let s in r)!e.instances[s]&&i[r[s].defId]&&(a[s]=r[s]);return{defs:i,instances:a}}function TBe(t,e){return Array.isArray(t)?db(t,null,e,!0):typeof t=="object"&&t?db([t],null,e,!0):t!=null?String(t):null}function wz(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const b5={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Ze,overlap:Ze,allow:Ze,className:wz,classNames:wz,color:String,backgroundColor:String,borderColor:String,textColor:String},DBe={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function x5(t,e){let n=TBe(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function IBe(t){return t.reduce(OBe,DBe)}function OBe(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const MBe={id:String,defaultAllDay:Boolean,url:String,format:String,events:Ze,eventDataTransform:Ze,success:Ze,failure:Ze};function UQ(t,e,n=HQ(e)){let r;if(typeof t=="string"?r={url:t}:typeof t=="function"||Array.isArray(t)?r={events:t}:typeof t=="object"&&t&&(r=t),r){let{refined:i,extra:a}=DD(r,n),s=RBe(i,e);if(s)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:i.defaultAllDay,eventDataTransform:i.eventDataTransform,success:i.success,failure:i.failure,publicId:i.id||"",sourceId:jp(),sourceDefId:s.sourceDefId,meta:s.meta,ui:x5(i,e),extendedProps:a}}return null}function HQ(t){return Object.assign(Object.assign(Object.assign({},b5),MBe),t.pluginHooks.eventSourceRefiners)}function RBe(t,e){let n=e.pluginHooks.eventSourceDefs;for(let r=n.length-1;r>=0;r-=1){let a=n[r].parseMeta(t);if(a)return{sourceDefId:r,meta:a}}return null}function LBe(t,e,n,r,i){switch(e.type){case"RECEIVE_EVENTS":return FBe(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"RESET_RAW_EVENTS":return zBe(t,n[e.sourceId],e.rawEvents,r.activeRange,i);case"ADD_EVENTS":return $Be(t,e.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return $D(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?ap(t,r.activeRange,i):t;case"REMOVE_EVENTS":return PBe(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return qQ(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return __(t,a=>!a.sourceId);case"REMOVE_ALL_EVENTS":return jc();default:return t}}function FBe(t,e,n,r,i,a){if(e&&n===e.latestFetchId){let s=db(WQ(i,e,a),e,a);return r&&(s=ap(s,r,a)),$D(qQ(t,e.sourceId),s)}return t}function zBe(t,e,n,r,i){const{defIdMap:a,instanceIdMap:s}=VBe(t);let o=db(WQ(n,e,i),e,i,!1,a,s);return ap(o,r,i)}function WQ(t,e,n){let r=n.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(t=Sz(t,i)),r&&(t=Sz(t,r)),t}function Sz(t,e){let n;if(!e)n=t;else{n=[];for(let r of t){let i=e(r);i?n.push(i):i==null&&n.push(r)}}return n}function $Be(t,e,n,r){return n&&(e=ap(e,n,r)),$D(t,e)}function _z(t,e,n){let{defs:r}=t,i=Np(t.instances,a=>r[a.defId].allDay?a:Object.assign(Object.assign({},a),{range:{start:n.createMarker(e.toDate(a.range.start,a.forcedStartTzo)),end:n.createMarker(e.toDate(a.range.end,a.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:a.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:a.forcedEndTzo}));return{defs:r,instances:i}}function qQ(t,e){return __(t,n=>n.sourceId!==e)}function BBe(t,e){return{defs:t.defs,instances:ip(t.instances,n=>!e[n.instanceId])}}function VBe(t){const{defs:e,instances:n}=t,r={},i={};for(let a in e){const s=e[a],{publicId:o}=s;o&&(r[o]=a)}for(let a in n){const s=n[a],o=e[s.defId],{publicId:l}=o;l&&(i[l]=a)}return{defIdMap:r,instanceIdMap:i}}class A_{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){UBe(this.handlers,e,n)}off(e,n){HBe(this.handlers,e,n)}trigger(e,...n){let r=this.handlers[e]||[],i=this.options&&this.options[e],a=[].concat(i||[],r);for(let s of a)s.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function UBe(t,e,n){(t[e]||(t[e]=[])).push(n)}function HBe(t,e,n){n?t[e]&&(t[e]=t[e].filter(r=>r!==n)):delete t[e]}const WBe={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function qBe(t,e){return db(KBe(t),null,e)}function KBe(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},WBe),n)),e}function KQ(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},BD(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function GBe(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function BD(t,e){let n={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(n,r(t,e));return Object.assign(n,cVe(t,e.dateEnv)),n}function Az(t,e,n){let{dateEnv:r,options:i}=n,a=e;return t?(a=Ai(a),a=r.add(a,i.defaultAllDayEventDuration)):a=r.add(a,i.defaultTimedEventDuration),a}function VD(t,e,n,r){let i=w5(t.defs,e),a=jc();for(let s in t.defs){let o=t.defs[s];a.defs[s]=YBe(o,i[s],n,r)}for(let s in t.instances){let o=t.instances[s],l=a.defs[o.defId];a.instances[s]=XBe(o,l,i[o.defId],n,r)}return a}function YBe(t,e,n,r){let i=n.standardProps||{};i.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(i.hasEnd=!0);let a=Object.assign(Object.assign(Object.assign({},t),i),{ui:Object.assign(Object.assign({},t.ui),i.ui)});n.extendedProps&&(a.extendedProps=Object.assign(Object.assign({},a.extendedProps),n.extendedProps));for(let s of r.pluginHooks.eventDefMutationAppliers)s(a,n,r);return!a.hasEnd&&r.options.forceEventDuration&&(a.hasEnd=!0),a}function XBe(t,e,n,r,i){let{dateEnv:a}=i,s=r.standardProps&&r.standardProps.allDay===!0,o=r.standardProps&&r.standardProps.hasEnd===!1,l=Object.assign({},t);return s&&(l.range=LQ(l.range)),r.datesDelta&&n.startEditable&&(l.range={start:a.add(l.range.start,r.datesDelta),end:a.add(l.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(l.range={start:a.add(l.range.start,r.startDelta),end:l.range.end}),r.endDelta&&n.durationEditable&&(l.range={start:l.range.start,end:a.add(l.range.end,r.endDelta)}),o&&(l.range={start:l.range.start,end:Az(e.allDay,l.range.start,i)}),e.allDay&&(l.range={start:Ai(l.range.start),end:Ai(l.range.end)}),l.range.end<l.range.start&&(l.range.end=Az(e.allDay,l.range.start,i)),l}class Gp{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Ci{constructor(e,n,r){this._context=e,this._def=n,this._instance=r||null}setProp(e,n){if(e in $Q)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=r2[e](n),this.mutate({standardProps:{publicId:n}});else if(e in r2)n=r2[e](n),this.mutate({standardProps:{[e]:n}});else if(e in b5){let r=b5[e](n);e==="color"?r={backgroundColor:n,borderColor:n}:e==="editable"?r={startEditable:n,durationEditable:n}:r={[e]:n},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:r}=this._context,i=r.createMarker(e);if(i&&this._instance){let a=this._instance.range,s=Sm(a.start,i,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:s}):this.mutate({startDelta:s})}}setEnd(e,n={}){let{dateEnv:r}=this._context,i;if(!(e!=null&&(i=r.createMarker(e),!i))&&this._instance)if(i){let a=Sm(this._instance.range.end,i,r,n.granularity);this.mutate({endDelta:a})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,r={}){let{dateEnv:i}=this._context,a={allDay:r.allDay},s=i.createMarker(e),o;if(s&&!(n!=null&&(o=i.createMarker(n),!o))&&this._instance){let l=this._instance.range;r.allDay===!0&&(l=LQ(l));let u=Sm(l.start,s,i,r.granularity);if(o){let d=Sm(l.end,o,i,r.granularity);w$e(u,d)?this.mutate({datesDelta:u,standardProps:a}):this.mutate({startDelta:u,endDelta:d,standardProps:a})}else a.hasEnd=!1,this.mutate({datesDelta:u,standardProps:a})}}moveStart(e){let n=Pr(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Pr(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Pr(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let r={allDay:e},{maintainDuration:i}=n;i==null&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:n}=this._context,r=this._instance,i=Ya(e);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let r=this._def,i=this._context,{eventStore:a}=i.getCurrentData(),s=zD(a,n.instanceId);s=VD(s,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);let l=new Ci(i,r,n);this._def=s.defs[r.defId],this._instance=s.instances[n.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:s}),i.emitter.trigger("eventChange",{oldEvent:l,event:this,relatedEvents:Fh(s,i,n),revert(){i.dispatch({type:"RESET_EVENTS",eventStore:a})}})}}remove(){let e=this._context,n=GQ(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new Gp(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:r}=n,{startStr:i,endStr:a}=this,s={allDay:n.allDay};return n.title&&(s.title=n.title),i&&(s.start=i),a&&(s.end=a),n.publicId&&(s.id=n.publicId),n.groupId&&(s.groupId=n.groupId),n.url&&(s.url=n.url),r.display&&r.display!=="auto"&&(s.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?s.color=r.backgroundColor:(r.backgroundColor&&(s.backgroundColor=r.backgroundColor),r.borderColor&&(s.borderColor=r.borderColor)),r.textColor&&(s.textColor=r.textColor),r.classNames.length&&(s.classNames=r.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(s,n.extendedProps):s.extendedProps=n.extendedProps),s}toJSON(){return this.toPlainObject()}}function GQ(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function Fh(t,e,n){let{defs:r,instances:i}=t,a=[],s=n?n.instanceId:"";for(let o in i){let l=i[o],u=r[l.defId];l.instanceId!==s&&a.push(new Ci(e,u,l))}return a}function Cz(t,e,n,r){let i={},a={},s={},o=[],l=[],u=w5(t.defs,e);for(let d in t.defs){let f=t.defs[d];u[f.defId].display==="inverse-background"&&(f.groupId?(i[f.groupId]=[],s[f.groupId]||(s[f.groupId]=f)):a[d]=[])}for(let d in t.instances){let f=t.instances[d],p=t.defs[f.defId],h=u[p.defId],m=f.range,g=!p.allDay&&r?FQ(m,r):m,v=Hg(g,n);v&&(h.display==="inverse-background"?p.groupId?i[p.groupId].push(v):a[f.defId].push(v):h.display!=="none"&&(h.display==="background"?o:l).push({def:p,ui:h,instance:f,range:v,isStart:g.start&&g.start.valueOf()===v.start.valueOf(),isEnd:g.end&&g.end.valueOf()===v.end.valueOf()}))}for(let d in i){let f=i[d],p=xz(f,n);for(let h of p){let m=s[d],g=u[m.defId];o.push({def:m,ui:g,instance:null,range:h,isStart:!1,isEnd:!1})}}for(let d in a){let f=a[d],p=xz(f,n);for(let h of p)o.push({def:t.defs[d],ui:u[d],instance:null,range:h,isStart:!1,isEnd:!1})}return{bg:o,fg:l}}function jz(t,e){t.fcSeg=e}function Wg(t){return t.fcSeg||t.parentNode.fcSeg||null}function w5(t,e){return Np(t,n=>YQ(n,e))}function YQ(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),IBe(n)}function QBe(t,e){let n=t.map(ZBe);return n.sort((r,i)=>p$e(r,i,e)),n.map(r=>r._seg)}function ZBe(t){let{eventRange:e}=t,n=e.def,r=e.instance?e.instance.range:e.range,i=r.start?r.start.valueOf():0,a=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:i,end:a,duration:a-i,allDay:Number(n.allDay),_seg:t})}function JBe(t,e){let{pluginHooks:n}=e,r=n.isDraggableTransformers,{def:i,ui:a}=t.eventRange,s=a.startEditable;for(let o of r)s=o(s,i,a,e);return s}function eVe(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function tVe(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function XQ(t,e,n,r,i,a,s){let{dateEnv:o,options:l}=n,{displayEventTime:u,displayEventEnd:d}=l,f=t.eventRange.def,p=t.eventRange.instance;u==null&&(u=r!==!1),d==null&&(d=i!==!1);let h=p.range.start,m=p.range.end,g=t.start||t.eventRange.range.start,v=t.end||t.eventRange.range.end,y=Ai(h).valueOf()===Ai(g).valueOf(),b=Ai(_f(m,-1)).valueOf()===Ai(_f(v,-1)).valueOf();return u&&!f.allDay&&(y||b)?(g=y?h:g,v=b?m:v,d&&f.hasEnd?o.formatRange(g,v,e,{forcedStartTzo:p.forcedStartTzo,forcedEndTzo:p.forcedEndTzo}):o.format(g,e,{forcedTzo:p.forcedStartTzo})):""}function $0(t,e,n){let r=t.eventRange.range;return{isPast:r.end<=e.start,isFuture:r.start>=e.end,isToday:e&&hf(e,r.start)}}function nVe(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function rVe(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function QQ(t,e){let{def:n,instance:r}=t.eventRange,{url:i}=n;if(i)return{href:i};let{emitter:a,options:s}=e,{eventInteractive:o}=s;return o==null&&(o=n.interactive,o==null&&(o=!!a.hasHandlers("eventClick"))),o?kQ(l=>{a.trigger("eventClick",{el:l.target,event:new Ci(e,n,r),jsEvent:l,view:e.viewApi})}):{}}const iVe={start:Ze,end:Ze,allDay:Boolean};function aVe(t,e,n){let r=sVe(t,e),{range:i}=r;if(!i.start)return null;if(!i.end){if(n==null)return null;i.end=e.add(i.start,n)}return r}function sVe(t,e){let{refined:n,extra:r}=DD(t,iVe),i=n.start?e.createMarkerMeta(n.start):null,a=n.end?e.createMarkerMeta(n.end):null,{allDay:s}=n;return s==null&&(s=i&&i.isTimeUnspecified&&(!a||a.isTimeUnspecified)),Object.assign({range:{start:i?i.marker:null,end:a?a.marker:null},allDay:s},r)}function oVe(t,e){return SBe(t.range,e.range)&&t.allDay===e.allDay&&lVe(t,e)}function lVe(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function cVe(t,e){return Object.assign(Object.assign({},JQ(t.range,e,t.allDay)),{allDay:t.allDay})}function ZQ(t,e,n){return Object.assign(Object.assign({},JQ(t,e,n)),{timeZone:e.timeZone})}function JQ(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function uVe(t,e,n){let r=VQ({editable:!1},n),i=Yk(r.refined,r.extra,"",t.allDay,!0,n);return{def:i,ui:YQ(i,e),instance:LD(i.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function dVe(t,e,n){let r=!1,i=function(o){r||(r=!0,e(o))},a=function(o){r||(r=!0,n(o))},s=t(i,a);s&&typeof s.then=="function"&&s.then(i,a)}class Nz extends Error{constructor(e,n){super(e),this.response=n}}function fVe(t,e,n){t=t.toUpperCase();const r={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(r.body=new URLSearchParams(n),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(i=>{if(i.ok)return i.json().then(a=>[a,i],()=>{throw new Nz("Failure parsing JSON",i)});throw new Nz("Request failed",i)})}let UC;function eZ(){return UC==null&&(UC=hVe()),UC}function hVe(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class pVe extends Ii{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{y5(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{y5(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:r}=this.state,i=r||n.height==="auto"||n.contentHeight==="auto",a=!i&&n.height!=null?n.height:"",s=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return eZ()||s.push("fc-liquid-hack"),e.children(s,a,i,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class xv{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function mVe(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function UD(t){return{[t.component.uid]:t}}const Qk={};class C_ extends dl{constructor(e,n){super(e,n),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,r=n.nowManager.getDateMarker(),{nowIndicatorSnap:i}=n.options;i==="auto"&&(i=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let a,s;return i?(a=n.dateEnv.startOf(r,e.unit),s=n.dateEnv.add(a,Pr(1,e.unit)).valueOf()-r.valueOf()):(a=r,s=1e3*60),s=Math.min(1e3*60*60*24,s),{state:{nowDate:a,todayRange:gVe(a)},waitMs:s}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}C_.contextType=Ep;function gVe(t){let e=Ai(t),n=Qa(e,1);return{start:e,end:n}}class vVe{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let r=this.getCurrentData(),i;n=n||"day",i=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),i?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:r}=this.getCurrentData(),i=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),a,s;for(let o in n)i.push(o);for(a=0;a<i.length;a+=1)if(s=n[i[a]],s&&s.singleUnit===e)return s;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),r=Pr(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),Ya(n))}formatRange(e,n,r){let{dateEnv:i}=this.getCurrentData();return i.formatRange(i.createMarker(e),i.createMarker(n),Ya(r),r)}formatIso(e,n){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:n})}select(e,n){let r;n==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:n};let i=this.getCurrentData(),a=aVe(r,i.dateEnv,Pr({days:1}));a&&(this.dispatch({type:"SELECT_DATES",selection:a}),KQ(a,null,i))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),GBe(e,n))}addEvent(e,n){if(e instanceof Ci){let s=e._def,o=e._instance;return this.getCurrentData().eventStore.defs[s.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Xk({def:s,instance:o})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),i;if(n instanceof Gp)i=n.internalEventSource;else if(typeof n=="boolean")n&&([i]=OD(r.eventSources));else if(n!=null){let s=this.getEventSourceById(n);if(!s)return console.warn(`Could not find an event source with ID "${n}"`),null;i=s.internalEventSource}let a=BQ(e,i,r,!1);if(a){let s=new Ci(r,a.def,a.def.recurringDef?null:a.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Xk(a)}),this.triggerEventAdd(s),s}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:GQ(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:r,instances:i}=n.eventStore;e=String(e);for(let a in r){let s=r[a];if(s.publicId===e){if(s.recurringDef)return new Ci(n,s,null);for(let o in i){let l=i[o];if(l.defId===s.defId)return new Ci(n,s,l)}}}return null}getEvents(){let e=this.getCurrentData();return Fh(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,r=[];for(let i in n)r.push(new Gp(e,n[i]));return r}getEventSourceById(e){let n=this.getCurrentData(),r=n.eventSources;e=String(e);for(let i in r)if(r[i].publicId===e)return new Gp(n,r[i]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof Gp)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=UQ(e,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new Gp(n,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Pr(e);n&&this.trigger("_scrollRequest",{time:n})}}function yVe(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function tZ(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function bVe(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function xVe(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function wVe(t,e){return{left:t.left-e.left,top:t.top-e.top}}function nZ(t,e,n,r){return{dow:t.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!hf(r.activeRange,t))),isOther:!!(r&&!hf(r.currentRange,t)),isToday:!!(e&&hf(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function HD(t,e){let n=["fc-day",`fc-day-${C$e[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const SVe=Ya({year:"numeric",month:"long",day:"numeric"}),_Ve=Ya({week:"long"});function Zk(t,e,n="day",r=!0){const{dateEnv:i,options:a,calendarApi:s}=t;let o=i.format(e,n==="week"?_Ve:SVe);if(a.navLinks){let l=i.toDate(e);const u=d=>{let f=n==="day"?a.navLinkDayClick:n==="week"?a.navLinkWeekClick:null;typeof f=="function"?f.call(s,i.toDate(e),d):(typeof f=="string"&&(n=f),s.zoomTo(e,n))};return Object.assign({title:F0(a.navLinkHint,[o,l],o),"data-navlink":""},r?EQ(u):{onClick:u})}return{"aria-label":o}}let HC=null;function AVe(){return HC===null&&(HC=CVe()),HC}function CVe(){let t=document.createElement("div");L0(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return ND(t),n}let WC;function jVe(){return WC||(WC=NVe()),WC}function NVe(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=rZ(t);return document.body.removeChild(t),e}function rZ(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function EVe(t,e=!1){let n=window.getComputedStyle(t),r=parseInt(n.borderLeftWidth,10)||0,i=parseInt(n.borderRightWidth,10)||0,a=parseInt(n.borderTopWidth,10)||0,s=parseInt(n.borderBottomWidth,10)||0,o=rZ(t),l=o.y-r-i,u=o.x-a-s,d={borderLeft:r,borderRight:i,borderTop:a,borderBottom:s,scrollbarBottom:u,scrollbarLeft:0,scrollbarRight:0};return AVe()&&n.direction==="rtl"?d.scrollbarLeft=l:d.scrollbarRight=l,e&&(d.paddingLeft=parseInt(n.paddingLeft,10)||0,d.paddingRight=parseInt(n.paddingRight,10)||0,d.paddingTop=parseInt(n.paddingTop,10)||0,d.paddingBottom=parseInt(n.paddingBottom,10)||0),d}function kVe(t,e=!1,n){let r=WD(t),i=EVe(t,e),a={left:r.left+i.borderLeft+i.scrollbarLeft,right:r.right-i.borderRight-i.scrollbarRight,top:r.top+i.borderTop,bottom:r.bottom-i.borderBottom-i.scrollbarBottom};return e&&(a.left+=i.paddingLeft,a.right-=i.paddingRight,a.top+=i.paddingTop,a.bottom-=i.paddingBottom),a}function WD(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function PVe(t){let e=iZ(t),n=t.getBoundingClientRect();for(let r of e){let i=tZ(n,r.getBoundingClientRect());if(i)n=i;else return null}return n}function iZ(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class S5{constructor(e,n,r,i){this.els=n;let a=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(a.left),i&&this.buildElVerticals(a.top)}buildElHorizontals(e){let n=[],r=[];for(let i of this.els){let a=i.getBoundingClientRect();n.push(a.left-e),r.push(a.right-e)}this.lefts=n,this.rights=r}buildElVerticals(e){let n=[],r=[];for(let i of this.els){let a=i.getBoundingClientRect();n.push(a.top-e),r.push(a.bottom-e)}this.tops=n,this.bottoms=r}leftToIndex(e){let{lefts:n,rights:r}=this,i=n.length,a;for(a=0;a<i;a+=1)if(e>=n[a]&&e<r[a])return a}topToIndex(e){let{tops:n,bottoms:r}=this,i=n.length,a;for(a=0;a<i;a+=1)if(e>=n[a]&&e<r[a])return a}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return f1(this.tops||[],e.tops||[])&&f1(this.bottoms||[],e.bottoms||[])&&f1(this.lefts||[],e.lefts||[])&&f1(this.rights||[],e.rights||[])}}function f1(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(Math.round(t[r])!==Math.round(e[r]))return!1;return!0}class qD{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class TVe extends qD{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class DVe extends qD{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Pp extends Ii{constructor(){super(...arguments),this.uid=jp()}prepareHits(){}queryHit(e,n,r,i){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Hs(e,".fc-event-mirror")}isValidDateDownEl(e){return!Hs(e,".fc-event:not(.fc-bg-event)")&&!Hs(e,".fc-more-link")&&!Hs(e,"a[data-navlink]")&&!Hs(e,".fc-popover")}}class IVe{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let r of e)this.insertEntry(r,n);return n}insertEntry(e,n){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,r){if(this.allowReslicing&&e.touchingEntry){const i=Object.assign(Object.assign({},n),{span:aZ(n.span,e.touchingEntry.span)});r.push(i),this.splitEntry(n,e.touchingEntry,r)}else r.push(n)}splitEntry(e,n,r){let i=e.span,a=n.span;i.start<a.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.start,end:a.start}},r),i.end>a.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.end,end:i.end}},r)}insertEntryAt(e,n){let{entriesByLevel:r,levelCoords:i}=this;n.lateral===-1?(qC(i,n.level,n.levelCoord),qC(r,n.level,[e])):qC(r[n.level],n.lateral,e),this.stackCnts[B0(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:r,strictOrder:i,stackCnts:a}=this,s=n.length,o=0,l=-1,u=-1,d=null,f=0;for(let m=0;m<s;m+=1){const g=n[m];if(!i&&g>=o+this.getEntryThickness(e))break;let v=r[m],y,b=kz(v,e.span.start,Ez),S=b[0]+b[1];for(;(y=v[S])&&y.span.start<e.span.end;){let A=g+this.getEntryThickness(y);A>o&&(o=A,d=y,l=m,u=S),A===o&&(f=Math.max(f,a[B0(y)]+1)),S+=1}}let p=0;if(d)for(p=l+1;p<s&&n[p]<o;)p+=1;let h=-1;return p<s&&n[p]===o&&(h=kz(r[p],e.span.end,Ez)[0]),{touchingLevel:l,touchingLateral:u,touchingEntry:d,stackCnt:f,levelCoord:o,level:p,lateral:h}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,r=e.length,i=[];for(let a=0;a<r;a+=1){let s=e[a],o=n[a];for(let l of s)i.push(Object.assign(Object.assign({},l),{thickness:this.getEntryThickness(l),levelCoord:o}))}return i}}function Ez(t){return t.span.end}function B0(t){return t.index+":"+t.span.start}function aZ(t,e){let n=Math.max(t.start,e.start),r=Math.min(t.end,e.end);return n<r?{start:n,end:r}:null}function qC(t,e,n){t.splice(e,0,n)}function kz(t,e,n){let r=0,i=t.length;if(!i||e<n(t[r]))return[0,0];if(e>n(t[i-1]))return[i,0];for(;r<i;){let a=Math.floor(r+(i-r)/2),s=n(t[a]);if(e<s)i=a;else if(e>s)r=a+1;else return[a,1]}return[r,0]}class OVe{constructor(e,n){this.emitter=new A_}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const KD={};function MVe(t,e){return!t||e>10?Ya({weekday:"short"}):e>1?Ya({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Ya({weekday:"long"})}const sZ="fc-col-header-cell";function oZ(t){return t.text}class RVe extends Ii{render(){let{dateEnv:e,options:n,theme:r,viewApi:i}=this.context,{props:a}=this,{date:s,dateProfile:o}=a,l=nZ(s,a.todayRange,null,o),u=[sZ].concat(HD(l,r)),d=e.format(s,a.dayHeaderFormat),f=!l.isDisabled&&a.colCnt>1?Zk(this.context,s):{},p=e.toDate(s);e.namedTimeZoneImpl&&(p=_f(p,36e5));let h=Object.assign(Object.assign(Object.assign({date:p,view:i},a.extraRenderProps),{text:d}),l);return Je(xd,{elTag:"th",elClasses:u,elAttrs:Object.assign({role:"columnheader",colSpan:a.colSpan,"data-date":l.isDisabled?void 0:PD(s)},a.extraDataAttrs),renderProps:h,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:oZ,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},m=>Je("div",{className:"fc-scrollgrid-sync-inner"},!l.isDisabled&&Je(m,{elTag:"a",elAttrs:f,elClasses:["fc-col-header-cell-cushion",a.isSticky&&"fc-sticky"]})))}}const LVe=Ya({weekday:"long"});class FVe extends Ii{render(){let{props:e}=this,{dateEnv:n,theme:r,viewApi:i,options:a}=this.context,s=Qa(new Date(2592e5),e.dow),o={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},l=n.format(s,e.dayHeaderFormat),u=Object.assign(Object.assign(Object.assign(Object.assign({date:s},o),{view:i}),e.extraRenderProps),{text:l});return Je(xd,{elTag:"th",elClasses:[sZ,...HD(o,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:u,generatorName:"dayHeaderContent",customGenerator:a.dayHeaderContent,defaultGenerator:oZ,classNameGenerator:a.dayHeaderClassNames,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},d=>Je("div",{className:"fc-scrollgrid-sync-inner"},Je(d,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(s,LVe)}})))}}class zVe extends Ii{constructor(){super(...arguments),this.createDayHeaderFormatter=Ar($Ve)}render(){let{context:e}=this,{dates:n,dateProfile:r,datesRepDistinctDays:i,renderIntro:a}=this.props,s=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,n.length);return Je(C_,{unit:"day"},(o,l)=>Je("tr",{role:"row"},a&&a("day"),n.map(u=>i?Je(RVe,{key:u.toISOString(),date:u,dateProfile:r,todayRange:l,colCnt:n.length,dayHeaderFormat:s}):Je(FVe,{key:u.getUTCDay(),dow:u.getUTCDay(),dayHeaderFormat:s}))))}}function $Ve(t,e,n){return t||MVe(e,n)}class BVe{constructor(e,n){let r=e.start,{end:i}=e,a=[],s=[],o=-1;for(;r<i;)n.isHiddenDay(r)?a.push(o+.5):(o+=1,a.push(o),s.push(r)),r=Qa(r,1);this.dates=s,this.indices=a,this.cnt=s.length}sliceRange(e){let n=this.getDateDayIndex(e.start),r=this.getDateDayIndex(Qa(e.end,-1)),i=Math.max(0,n),a=Math.min(this.cnt-1,r);return i=Math.ceil(i),a=Math.floor(a),i<=a?{firstIndex:i,lastIndex:a,isStart:n===i,isEnd:r===a}:null}getDateDayIndex(e){let{indices:n}=this,r=Math.floor(bv(this.dates[0],e));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]}}class VVe{constructor(e,n){let{dates:r}=e,i,a,s;if(n){for(a=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==a;i+=1);s=Math.ceil(r.length/i)}else s=1,i=r.length;this.rowCnt=s,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let r=[];for(let i=0;i<this.colCnt;i+=1)r.push(this.buildCell(n,i));e.push(r)}return e}buildCell(e,n){let r=this.daySeries.dates[e*this.colCnt+n];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,r=this.daySeries.sliceRange(e),i=[];if(r){let{firstIndex:a,lastIndex:s}=r,o=a;for(;o<=s;){let l=Math.floor(o/n),u=Math.min((l+1)*n,s+1);i.push({row:l,firstCol:o%n,lastCol:(u-1)%n,isStart:r.isStart&&o===a,isEnd:r.isEnd&&u-1===s}),o=u}}return i}}class UVe{constructor(){this.sliceBusinessHours=Ar(this._sliceBusinessHours),this.sliceDateSelection=Ar(this._sliceDateSpan),this.sliceEventStore=Ar(this._sliceEventStore),this.sliceEventDrag=Ar(this._sliceInteraction),this.sliceEventResize=Ar(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,r,i,...a){let{eventUiBases:s}=e,o=this.sliceEventStore(e.eventStore,s,n,r,...a);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,r,s,i,...a),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,r,i,...a),fgEventSegs:o.fg,bgEventSegs:o.bg,eventDrag:this.sliceEventDrag(e.eventDrag,s,n,r,...a),eventResize:this.sliceEventResize(e.eventResize,s,n,r,...a),eventSelection:e.eventSelection}}sliceNowDate(e,n,r,i,...a){return this._sliceDateSpan({range:{start:e,end:_f(e,1)},allDay:!1},n,r,{},i,...a)}_sliceBusinessHours(e,n,r,i,...a){return e?this._sliceEventStore(ap(e,h1(n,!!r),i),{},n,r,...a).bg:[]}_sliceEventStore(e,n,r,i,...a){if(e){let s=Cz(e,n,h1(r,!!i),i);return{bg:this.sliceEventRanges(s.bg,a),fg:this.sliceEventRanges(s.fg,a)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,r,i,...a){if(!e)return null;let s=Cz(e.mutatedEvents,n,h1(r,!!i),i);return{segs:this.sliceEventRanges(s.fg,a),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,r,i,a,...s){if(!e)return[];let o=h1(n,!!r),l=Hg(e.range,o);if(l){e=Object.assign(Object.assign({},e),{range:l});let u=uVe(e,i,a),d=this.sliceRange(e.range,...s);for(let f of d)f.eventRange=u;return d}return[]}sliceEventRanges(e,n){let r=[];for(let i of e)r.push(...this.sliceEventRange(i,n));return r}sliceEventRange(e,n){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:Qa(r.start,1)});let i=this.sliceRange(r,...n);for(let a of i)a.eventRange=e,a.isStart=e.isStart&&a.isStart,a.isEnd=e.isEnd&&a.isEnd;return i}}function h1(t,e){let n=t.activeRange;return e?n:{start:_f(n.start,t.slotMinTime.milliseconds),end:_f(n.end,t.slotMaxTime.milliseconds-864e5)}}function lZ(t,e,n){let{instances:r}=t.mutatedEvents;for(let i in r)if(!S_(e.validRange,r[i].range))return!1;return cZ({eventDrag:t},n)}function HVe(t,e,n){return S_(e.validRange,t.range)?cZ({dateSelection:t},n):!1}function cZ(t,e){let n=e.getCurrentData(),r=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||WVe)(r,e)}function WVe(t,e,n={},r){return!(t.eventDrag&&!qVe(t,e,n,r)||t.dateSelection&&!KVe(t,e,n,r))}function qVe(t,e,n,r){let i=e.getCurrentData(),a=t.eventDrag,s=a.mutatedEvents,o=s.defs,l=s.instances,u=w5(o,a.isEvent?t.eventUiBases:{"":i.selectionConfig});r&&(u=Np(u,r));let d=BBe(t.eventStore,a.affectedEvents.instances),f=d.defs,p=d.instances,h=w5(f,t.eventUiBases);for(let m in l){let g=l[m],v=g.range,y=u[g.defId],b=o[g.defId];if(!uZ(y.constraints,v,d,t.businessHours,e))return!1;let{eventOverlap:S}=e.options,A=typeof S=="function"?S:null;for(let T in p){let j=p[T];if(RD(v,j.range)&&(h[j.defId].overlap===!1&&a.isEvent||y.overlap===!1||A&&!A(new Ci(e,f[j.defId],j),new Ci(e,b,g))))return!1}let C=i.eventStore;for(let T of y.allows){let j=Object.assign(Object.assign({},n),{range:g.range,allDay:b.allDay}),E=C.defs[b.defId],k=C.instances[m],O;if(E?O=new Ci(e,E,k):O=new Ci(e,b),!T(BD(j,e),O))return!1}}return!0}function KVe(t,e,n,r){let i=t.eventStore,a=i.defs,s=i.instances,o=t.dateSelection,l=o.range,{selectionConfig:u}=e.getCurrentData();if(r&&(u=r(u)),!uZ(u.constraints,l,i,t.businessHours,e))return!1;let{selectOverlap:d}=e.options,f=typeof d=="function"?d:null;for(let p in s){let h=s[p];if(RD(l,h.range)&&(u.overlap===!1||f&&!f(new Ci(e,a[h.defId],h),null)))return!1}for(let p of u.allows){let h=Object.assign(Object.assign({},n),o);if(!p(BD(h,e),null))return!1}return!0}function uZ(t,e,n,r,i){for(let a of t)if(!YVe(GVe(a,e,n,r,i),e))return!1;return!0}function GVe(t,e,n,r,i){return t==="businessHours"?KC(ap(r,e,i)):typeof t=="string"?KC(__(n,a=>a.groupId===t)):typeof t=="object"&&t?KC(ap(t,e,i)):[]}function KC(t){let{instances:e}=t,n=[];for(let r in e)n.push(e[r].range);return n}function YVe(t,e){for(let n of t)if(S_(n,e))return!0;return!1}const p1=/^(visible|hidden)$/;class XVe extends Ii{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,bu(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:r}=e,i=n&&r,a=["fc-scroller"];return n&&(r?a.push("fc-scroller-liquid-absolute"):a.push("fc-scroller-liquid")),Je("div",{ref:this.handleEl,className:a.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:i&&-(e.overcomeLeft||0)||"",right:i&&-(e.overcomeRight||0)||"",bottom:i&&-(e.overcomeBottom||0)||"",marginLeft:!i&&-(e.overcomeLeft||0)||"",marginRight:!i&&-(e.overcomeRight||0)||"",marginBottom:!i&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(p1.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(p1.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return p1.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return p1.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class jh{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,r)=>{let{depths:i,currentMap:a}=this,s=!1,o=!1;n!==null?(s=r in a,a[r]=n,i[r]=(i[r]||0)+1,o=!0):(i[r]-=1,i[r]||(delete a[r],delete this.callbackMap[r],s=!0)),this.masterCallback&&(s&&this.masterCallback(null,String(r)),o&&this.masterCallback(n,String(r)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),n}collect(e,n,r){return aBe(this.currentMap,e,n,r)}getAll(){return OD(this.currentMap)}}function QVe(t){let e=i$e(t,".fc-scrollgrid-shrink"),n=0;for(let r of e)n=Math.max(n,y$e(r));return Math.ceil(n)}function dZ(t,e){return t.liquid&&e.liquid}function ZVe(t,e){return e.maxHeight!=null||dZ(t,e)}function JVe(t,e,n,r){let{expandRows:i}=n;return typeof e.content=="function"?e.content(n):Je("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:i?n.clientHeight:""}},n.tableColGroupNode,Je(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function eUe(t,e){return Sf(t,e,Oc)}function tUe(t,e){let n=[];for(let r of t){let i=r.span||1;for(let a=0;a<i;a+=1)n.push(Je("col",{style:{width:r.width==="shrink"?nUe(e):r.width||"",minWidth:r.minWidth||""}}))}return Je("colgroup",{},...n)}function nUe(t){return t??4}function rUe(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function iUe(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function aUe(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function sUe(t){return Je("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function Pz(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function oUe(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class fZ extends Ii{constructor(){super(...arguments),this.processCols=Ar(e=>e,eUe),this.renderMicroColGroup=Ar(tUe),this.scrollerRefs=new jh,this.scrollerElRefs=new jh(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:r}=this,i=e.sections||[],a=this.processCols(e.cols),s=this.renderMicroColGroup(a,n.shrinkWidth),o=iUe(e.liquid,r);e.collapsibleWidth&&o.push("fc-scrollgrid-collapsible");let l=i.length,u=0,d,f=[],p=[],h=[];for(;u<l&&(d=i[u]).type==="header";)f.push(this.renderSection(d,s,!0)),u+=1;for(;u<l&&(d=i[u]).type==="body";)p.push(this.renderSection(d,s,!1)),u+=1;for(;u<l&&(d=i[u]).type==="footer";)h.push(this.renderSection(d,s,!0)),u+=1;let m=!eZ();const g={role:"rowgroup"};return Je("table",{role:"grid",className:o.join(" "),style:{height:e.height}},!!(!m&&f.length)&&Je("thead",g,...f),!!(!m&&p.length)&&Je("tbody",g,...p),!!(!m&&h.length)&&Je("tfoot",g,...h),m&&Je("tbody",g,...f,...p,...h))}renderSection(e,n,r){return"outerContent"in e?Je(Hi,{key:e.key},e.outerContent):Je("tr",{key:e.key,role:"presentation",className:aUe(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,r))}renderChunkTd(e,n,r,i){if("outerContent"in r)return r.outerContent;let{props:a}=this,{forceYScrollbars:s,scrollerClientWidths:o,scrollerClientHeights:l}=this.state,u=ZVe(a,e),d=dZ(a,e),f=a.liquid?s?"scroll":u?"auto":"hidden":"visible",p=e.key,h=JVe(e,r,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!a.collapsibleWidth&&o[p]!==void 0?o[p]:null,clientHeight:l[p]!==void 0?l[p]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},i);return Je(i?"th":"td",{ref:r.elRef,role:"presentation"},Je("div",{className:`fc-scroller-harness${d?" fc-scroller-harness-liquid":""}`},Je(XVe,{ref:this.scrollerRefs.createRef(p),elRef:this.scrollerElRefs.createRef(p),overflowY:f,overflowX:a.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:d,liquidIsAbsolute:!0},h)))}_handleScrollerEl(e,n){let r=lUe(this.props.sections,n);r&&bu(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return rUe(this.props.cols)?QVe(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=jVe(),{scrollerRefs:n,scrollerElRefs:r}=this,i=!1,a={},s={};for(let o in n.currentMap){let l=n.currentMap[o];if(l&&l.needsYScrolling()){i=!0;break}}for(let o of this.props.sections){let l=o.key,u=r.currentMap[l];if(u){let d=u.parentNode;a[l]=Math.floor(d.getBoundingClientRect().width-(i?e.y:0)),s[l]=Math.floor(d.getBoundingClientRect().height)}}return{forceYScrollbars:i,scrollerClientWidths:a,scrollerClientHeights:s}}}fZ.addStateEquality({scrollerClientWidths:Oc,scrollerClientHeights:Oc});function lUe(t,e){for(let n of t)if(n.key===e)return n;return null}class GD extends Ii{constructor(){super(...arguments),this.buildPublicEvent=Ar((e,n,r)=>new Ci(e,n,r)),this.handleEl=e=>{this.el=e,bu(this.props.elRef,e),e&&jz(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{eventRange:a}=i,{ui:s}=a,o={event:this.buildPublicEvent(n,a.def,a.instance),view:n.viewApi,timeText:e.timeText,textColor:s.textColor,backgroundColor:s.backgroundColor,borderColor:s.borderColor,isDraggable:!e.disableDragging&&JBe(i,n),isStartResizable:!e.disableResizing&&eVe(i,n),isEndResizable:!e.disableResizing&&tVe(i),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!i.isStart,isEnd:!!i.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return Je(xd,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...nVe(o),...i.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:o,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&jz(this.el,this.props.seg)}}class hZ extends Ii{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{ui:a}=i.eventRange,s=r.eventTimeFormat||e.defaultTimeFormat,o=XQ(i,s,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return Je(GD,Object.assign({},e,{elTag:"a",elStyle:{borderColor:a.borderColor,backgroundColor:a.backgroundColor},elAttrs:QQ(i,n),defaultGenerator:cUe,timeText:o}),(l,u)=>Je(Hi,null,Je(l,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:u.textColor}}),!!u.isStartResizable&&Je("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!u.isEndResizable&&Je("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}hZ.addPropsEquality({seg:Oc});function cUe(t){return Je("div",{className:"fc-event-main-frame"},t.timeText&&Je("div",{className:"fc-event-time"},t.timeText),Je("div",{className:"fc-event-title-container"},Je("div",{className:"fc-event-title fc-sticky"},t.event.title||Je(Hi,null," "))))}const uUe=Ya({day:"numeric"});class pZ extends Ii{constructor(){super(...arguments),this.refineRenderProps=n2(dUe)}render(){let{props:e,context:n}=this,{options:r}=n,i=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:r.monthStartFormat});return Je(xd,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),i.isDisabled?{}:{"data-date":PD(e.date)}),elClasses:[...HD(i,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},e.children)}}function mZ(t){return!!(t.dayCellContent||Gk("dayCellContent",t))}function dUe(t){let{date:e,dateEnv:n,dateProfile:r,isMonthStart:i}=t,a=nZ(e,t.todayRange,null,r),s=t.showDayNumber?n.format(e,i?t.monthStartFormat:uUe):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},a),{isMonthStart:i,dayNumberText:s}),t.extraRenderProps)}class fUe extends Ii{render(){let{props:e}=this,{seg:n}=e;return Je(GD,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:hUe,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function hUe(t){let{title:e}=t.event;return e&&Je("div",{className:"fc-event-title"},t.event.title)}function pUe(t){return Je("div",{className:`fc-${t}`})}const mUe=t=>Je(Ep.Consumer,null,e=>{let{dateEnv:n,options:r}=e,{date:i}=t,a=r.weekNumberFormat||t.defaultFormat,s=n.computeWeekNumber(i),o=n.format(i,a),l={num:s,text:o,date:i};return Je(xd,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:l,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:gUe,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},t.children)});function gUe(t){return t.text}const GC=10;class vUe extends Ii{constructor(){super(...arguments),this.state={titleId:x_()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&bu(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=jQ(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:r,state:i}=this,a=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return H9e(Je("div",Object.assign({},r.extraAttrs,{id:r.id,className:a.join(" "),"aria-labelledby":i.titleId,ref:this.handleRootEl}),Je("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},Je("span",{className:"fc-popover-title",id:i.titleId},r.title),Je("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),Je("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:r}=this.props,{rootEl:i}=this,a=PVe(n);if(a){let s=i.getBoundingClientRect(),o=r?Hs(n,".fc-scrollgrid").getBoundingClientRect().top:a.top,l=e?a.right-s.width:a.left;o=Math.max(o,GC),l=Math.min(l,document.documentElement.clientWidth-GC-s.width),l=Math.max(l,GC);let u=i.offsetParent.getBoundingClientRect();L0(i,{top:o-u.top,left:l-u.left})}}}class yUe extends Pp{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:r}=this,{startDate:i,todayRange:a,dateProfile:s}=r,o=n.format(i,e.dayPopoverFormat);return Je(pZ,{elRef:this.handleRootEl,date:i,dateProfile:s,todayRange:a},(l,u,d)=>Je(vUe,{elRef:d.ref,id:r.id,title:o,extraClassNames:["fc-more-popover"].concat(d.className||[]),extraAttrs:d,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},mZ(e)&&Je(l,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,n,r,i){let{rootEl:a,props:s}=this;return e>=0&&e<r&&n>=0&&n<i?{dateProfile:s.dateProfile,dateSpan:Object.assign({allDay:!s.forceTimed,range:{start:s.startDate,end:s.endDate}},s.extraDateSpan),dayEl:a,rect:{left:0,top:0,right:r,bottom:i},layer:1}:null}}class bUe extends Ii{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:x_()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&bu(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:r}=this,{moreLinkClick:i}=r.options,a=Tz(n).start;function s(o){let{def:l,instance:u,range:d}=o.eventRange;return{event:new Ci(r,l,u),start:r.dateEnv.toDate(d.start),end:r.dateEnv.toDate(d.end),isStart:o.isStart,isEnd:o.isEnd}}typeof i=="function"&&(i=i({date:a,allDay:!!n.allDayDate,allSegs:n.allSegs.map(s),hiddenSegs:n.hiddenSegs.map(s),jsEvent:e,view:r.viewApi})),!i||i==="popover"?this.setState({isPopoverOpen:!0}):typeof i=="string"&&r.calendarApi.zoomTo(a,i)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return Je(Ep.Consumer,null,r=>{let{viewApi:i,options:a,calendarApi:s}=r,{moreLinkText:o}=a,{moreCnt:l}=e,u=Tz(e),d=typeof o=="function"?o.call(s,l):`+${l} ${o}`,f=F0(a.moreLinkHint,[l],d),p={num:l,shortText:`+${l}`,text:d,view:i};return Je(Hi,null,!!e.moreCnt&&Je(xd,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),EQ(this.handleClick)),{title:f,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:p,generatorName:"moreLinkContent",customGenerator:a.moreLinkContent,defaultGenerator:e.defaultGenerator||xUe,classNameGenerator:a.moreLinkClassNames,didMount:a.moreLinkDidMount,willUnmount:a.moreLinkWillUnmount},e.children),n.isPopoverOpen&&Je(yUe,{id:n.popoverId,startDate:u.start,endDate:u.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Hs(this.linkEl,".fc-view-harness"))}}function xUe(t){return t.text}function Tz(t){if(t.allDayDate)return{start:t.allDayDate,end:Qa(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:wUe(e),end:_Ue(e)}}function wUe(t){return t.reduce(SUe).eventRange.range.start}function SUe(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function _Ue(t){return t.reduce(AUe).eventRange.range.end}function AUe(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class CUe{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class jUe extends CUe{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let r=!1;e.isActive?(n.set(e.id,e),r=!0):n.has(e.id)&&(n.delete(e.id),r=!0),r&&this.set(n)}}const NUe=[],gZ={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},vZ=Object.assign(Object.assign({},gZ),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function EUe(t){let e=t.length>0?t[0].code:"en",n=NUe.concat(t),r={en:vZ};for(let i of n)r[i.code]=i;return{map:r,defaultCode:e}}function yZ(t,e){return typeof t=="object"&&!Array.isArray(t)?bZ(t.code,[t.code],t):kUe(t,e)}function kUe(t,e){let n=[].concat(t||[]),r=PUe(n,e)||vZ;return bZ(t,n,r)}function PUe(t,e){for(let n=0;n<t.length;n+=1){let r=t[n].toLocaleLowerCase().split("-");for(let i=r.length;i>0;i-=1){let a=r.slice(0,i).join("-");if(e[a])return e[a]}}return null}function bZ(t,e,n){let r=ID([gZ,n],["buttonText"]);delete r.code;let{week:i}=r;return delete r.week,{codeArg:t,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(t),options:r}}function zf(t){return{id:jp(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function TUe(t,e){let n={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(a){for(let s of a){const o=s.name,l=n[o];l===void 0?(n[o]=s.id,i(s.deps),r=IUe(r,s)):l!==s.id&&console.warn(`Duplicate plugin '${o}'`)}}return t&&i(t),i(e),r}function DUe(){let t=[],e=[],n;return(r,i)=>((!n||!Sf(r,t)||!Sf(i,e))&&(n=TUe(r,i)),t=r,e=i,n)}function IUe(t,e){return{premiumReleaseDate:OUe(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function OUe(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class $f extends Zb{}$f.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};$f.prototype.baseIconClass="fc-icon";$f.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};$f.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};$f.prototype.iconOverrideOption="buttonIcons";$f.prototype.iconOverrideCustomButtonOption="icon";$f.prototype.iconOverridePrefix="fc-icon-";function MUe(t,e){let n={},r;for(r in t)Jk(r,n,t,e);for(r in e)Jk(r,n,t,e);return n}function Jk(t,e,n,r){if(e[t])return e[t];let i=RUe(t,e,n,r);return i&&(e[t]=i),i}function RUe(t,e,n,r){let i=n[t],a=r[t],s=d=>i&&i[d]!==null?i[d]:a&&a[d]!==null?a[d]:null,o=s("component"),l=s("superType"),u=null;if(l){if(l===t)throw new Error("Can't have a custom view type that references itself");u=Jk(l,e,n,r)}return!o&&u&&(o=u.component),o?{type:t,component:o,defaults:Object.assign(Object.assign({},u?u.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},u?u.overrides:{}),a?a.rawOptions:{})}:null}function Dz(t){return Np(t,LUe)}function LUe(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=Iz(e):n&&!(n.prototype instanceof Ii)&&(n=Iz(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function Iz(t){return e=>Je(Ep.Consumer,null,n=>Je(xd,{elTag:"div",elClasses:RQ(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function FUe(t,e,n,r){let i=Dz(t),a=Dz(e.views),s=MUe(i,a);return Np(s,o=>zUe(o,a,e,n,r))}function zUe(t,e,n,r,i){let a=t.overrides.duration||t.defaults.duration||r.duration||n.duration,s=null,o="",l="",u={};if(a&&(s=$Ue(a),s)){let p=Kk(s);o=p.unit,p.value===1&&(l=o,u=e[o]?e[o].rawOptions:{})}let d=p=>{let h=p.buttonText||{},m=t.defaults.buttonTextKey;return m!=null&&h[m]!=null?h[m]:h[t.type]!=null?h[t.type]:h[l]!=null?h[l]:null},f=p=>{let h=p.buttonHints||{},m=t.defaults.buttonTextKey;return m!=null&&h[m]!=null?h[m]:h[t.type]!=null?h[t.type]:h[l]!=null?h[l]:null};return{type:t.type,component:t.component,duration:s,durationUnit:o,singleUnit:l,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},u),t.overrides),buttonTextOverride:d(r)||d(n)||t.overrides.buttonText,buttonTextDefault:d(i)||t.defaults.buttonText||d(z0)||t.type,buttonTitleOverride:f(r)||f(n)||t.overrides.buttonHint,buttonTitleDefault:f(i)||t.defaults.buttonHint||f(z0)}}let Oz={};function $Ue(t){let e=JSON.stringify(t),n=Oz[e];return n===void 0&&(n=Pr(t),Oz[e]=n),n}function BUe(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function VUe(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function UUe(t,e,n){let r=t.initialDate;return r!=null?e.createMarker(r):n.getDateMarker()}function HUe(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function WUe(t,e,n,r){let i;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||n);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(i=r.buildPrev(t,n),i.isValid)return i;break;case"NEXT":if(i=r.buildNext(t,n),i.isValid)return i;break}return t}function qUe(t,e,n){let r=e?e.activeRange:null;return wZ({},JUe(t,n),r,n)}function KUe(t,e,n,r){let i=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return wZ(t,e.sources,i,r);case"REMOVE_EVENT_SOURCE":return YUe(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?SZ(t,i,r):t;case"FETCH_EVENT_SOURCES":return YD(t,e.sourceIds?TQ(e.sourceIds):_Z(t,r),i,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return ZUe(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function GUe(t,e,n){let r=e?e.activeRange:null;return YD(t,_Z(t,n),r,!0,n)}function xZ(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function wZ(t,e,n,r){let i={};for(let a of e)i[a.sourceId]=a;return n&&(i=SZ(i,n,r)),Object.assign(Object.assign({},t),i)}function YUe(t,e){return ip(t,n=>n.sourceId!==e)}function SZ(t,e,n){return YD(t,ip(t,r=>XUe(r,e,n)),e,!1,n)}function XUe(t,e,n){return AZ(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function YD(t,e,n,r,i){let a={};for(let s in t){let o=t[s];e[s]?a[s]=QUe(o,n,r,i):a[s]=o}return a}function QUe(t,e,n,r){let{options:i,calendarApi:a}=r,s=r.pluginHooks.eventSourceDefs[t.sourceDefId],o=jp();return s.fetch({eventSource:t,range:e,isRefetch:n,context:r},l=>{let{rawEvents:u}=l;i.eventSourceSuccess&&(u=i.eventSourceSuccess.call(a,u,l.response)||u),t.success&&(u=t.success.call(a,u,l.response)||u),r.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:o,fetchRange:e,rawEvents:u})},l=>{let u=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(a,l),u=!0),t.failure&&(t.failure(l),u=!0),u||console.warn(l.message,l),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:o,fetchRange:e,error:l})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:o})}function ZUe(t,e,n,r){let i=t[e];return i&&n===i.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},i),{isFetching:!1,fetchRange:r})}):t}function _Z(t,e){return ip(t,n=>AZ(n,e))}function JUe(t,e){let n=HQ(e),r=[].concat(t.eventSources||[]),i=[];t.initialEvents&&r.unshift(t.initialEvents),t.events&&r.unshift(t.events);for(let a of r){let s=UQ(a,e,n);s&&i.push(s)}return i}function AZ(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function eHe(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function tHe(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function nHe(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function rHe(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function iHe(t,e,n,r,i){let a=t.headerToolbar?Mz(t.headerToolbar,t,e,n,r,i):null,s=t.footerToolbar?Mz(t.footerToolbar,t,e,n,r,i):null;return{header:a,footer:s}}function Mz(t,e,n,r,i,a){let s={},o=[],l=!1;for(let u in t){let d=t[u],f=aHe(d,e,n,r,i,a);s[u]=f.widgets,o.push(...f.viewsWithButtons),l=l||f.hasTitle}return{sectionWidgets:s,viewsWithButtons:o,hasTitle:l}}function aHe(t,e,n,r,i,a){let s=e.direction==="rtl",o=e.customButtons||{},l=n.buttonText||{},u=e.buttonText||{},d=n.buttonHints||{},f=e.buttonHints||{},p=t?t.split(" "):[],h=[],m=!1;return{widgets:p.map(v=>v.split(",").map(y=>{if(y==="title")return m=!0,{buttonName:y};let b,S,A,C,T,j;if(b=o[y])A=E=>{b.click&&b.click.call(E.target,E,E.target)},(C=r.getCustomButtonIconClass(b))||(C=r.getIconClass(y,s))||(T=b.text),j=b.hint||b.text;else if(S=i[y]){h.push(y),A=()=>{a.changeView(y)},(T=S.buttonTextOverride)||(C=r.getIconClass(y,s))||(T=S.buttonTextDefault);let E=S.buttonTextOverride||S.buttonTextDefault;j=F0(S.buttonTitleOverride||S.buttonTitleDefault||e.viewHint,[E,y],E)}else if(a[y])if(A=()=>{a[y]()},(T=l[y])||(C=r.getIconClass(y,s))||(T=u[y]),y==="prevYear"||y==="nextYear"){let E=y==="prevYear"?"prev":"next";j=F0(d[E]||f[E],[u.year||"year","year"],u[y])}else j=E=>F0(d[y]||f[y],[u[E]||E,E],u[y]);return{buttonName:y,buttonClick:A,buttonIcon:C,buttonText:T,buttonHint:j}})),viewsWithButtons:h,hasTitle:m}}class sHe{constructor(e,n,r){this.type=e,this.getCurrentData=n,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let oHe={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const lHe=zf({name:"array-event-source",eventSourceDefs:[oHe]});let cHe={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:r}=t.context,i=t.eventSource.meta;dVe(i.bind(null,ZQ(t.range,r)),a=>e({rawEvents:a}),n)}};const uHe=zf({name:"func-event-source",eventSourceDefs:[cHe]}),dHe={method:String,extraParams:Ze,startParam:String,endParam:String,timeZoneParam:String};let fHe={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:r}=t.eventSource,i=pHe(r,t.range,t.context);fVe(r.method,r.url,i).then(([a,s])=>{e({rawEvents:a,response:s})},n)}};const hHe=zf({name:"json-event-source",eventSourceRefiners:dHe,eventSourceDefs:[fHe]});function pHe(t,e,n){let{dateEnv:r,options:i}=n,a,s,o,l,u={};return a=t.startParam,a==null&&(a=i.startParam),s=t.endParam,s==null&&(s=i.endParam),o=t.timeZoneParam,o==null&&(o=i.timeZoneParam),typeof t.extraParams=="function"?l=t.extraParams():l=t.extraParams||{},Object.assign(u,l),u[a]=r.formatIso(e.start),u[s]=r.formatIso(e.end),r.timeZone!=="local"&&(u[o]=r.timeZone),u}const mHe={daysOfWeek:Ze,startTime:Pr,endTime:Pr,duration:Pr,startRecur:Ze,endRecur:Ze};let gHe={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},r;return t.duration&&(r=t.duration),!r&&t.startTime&&t.endTime&&(r=S$e(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:r,typeData:n}}return null},expand(t,e,n){let r=Hg(e,{start:t.startRecur,end:t.endRecur});return r?yHe(t.daysOfWeek,t.startTime,t.dateEnv,n,r):[]}};const vHe=zf({name:"simple-recurring-event",recurringTypes:[gHe],eventRefiners:mHe});function yHe(t,e,n,r,i){let a=t?TQ(t):null,s=Ai(i.start),o=i.end,l=[];for(e&&(e.milliseconds<0?o=Qa(o,1):e.milliseconds>=1e3*60*60*24&&(s=Qa(s,-1)));s<o;){let u;(!a||a[s.getUTCDay()])&&(e?u=r.add(s,e):u=s,l.push(r.createMarker(n.toDate(u)))),s=Qa(s,1)}return l}const bHe=zf({name:"change-handler",optionChangeHandlers:{events(t,e){Rz([t],e)},eventSources:Rz}});function Rz(t,e){let n=OD(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let r=[];for(let i of t){let a=!1;for(let s=0;s<n.length;s+=1)if(n[s]._raw===i){n.splice(s,1),a=!0;break}a||r.push(i)}for(let i of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:i.sourceId});for(let i of r)e.calendarApi.addEventSource(i)}function xHe(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},ZQ(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function wHe(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",Fh(t,e))}const SHe=[lHe,uHe,hHe,vHe,bHe,zf({name:"misc",isLoadingFuncs:[t=>xZ(t.eventSources)],propSetHandlers:{dateProfile:xHe,eventStore:wHe}})];class _He{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new jD(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],r;for(;r=e.shift();)this.runTask(r),n.push(r);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function AHe(t,e,n){let r;return/^(year|month)$/.test(t.currentRangeUnit)?r=t.currentRange:r=t.activeRange,n.formatRange(r.start,r.end,Ya(e.titleFormat||CHe(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function CHe(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=p5(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class Lz{constructor(){this.resetListeners=new Set}handleInput(e,n){const r=this.dateEnv;if(e!==r&&(typeof n=="function"?this.nowFn=n:r||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const i of this.resetListeners.values())i()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class jHe{constructor(e){this.computeCurrentViewData=Ar(this._computeCurrentViewData),this.organizeRawLocales=Ar(EUe),this.buildLocale=Ar(yZ),this.buildPluginHooks=DUe(),this.buildDateEnv=Ar(NHe),this.buildTheme=Ar(EHe),this.parseToolbars=Ar(iHe),this.buildViewSpecs=Ar(FUe),this.buildDateProfileGenerator=n2(kHe),this.buildViewApi=Ar(PHe),this.buildViewUiProps=n2(IHe),this.buildEventUiBySource=Ar(THe,Oc),this.buildEventUiBases=Ar(DHe),this.parseContextBusinessHours=n2(OHe),this.buildTitle=Ar(AHe),this.nowManager=new Lz,this.emitter=new A_,this.actionRunner=new _He(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=p=>{this.actionRunner.request(p)},this.props=e,this.actionRunner.pause(),this.nowManager=new Lz;let n={},r=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),i=r.calendarOptions.initialView||r.pluginHooks.initialView,a=this.computeCurrentViewData(i,r,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(a.options);let s={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},o=UUe(r.calendarOptions,r.dateEnv,this.nowManager),l=a.dateProfileGenerator.build(o);hf(l.activeRange,o)||(o=l.currentRange.start);for(let p of r.pluginHooks.contextInit)p(s);let u=qUe(r.calendarOptions,l,s),d={dynamicOptionOverrides:n,currentViewType:i,currentDate:o,dateProfile:l,businessHours:this.parseContextBusinessHours(s),eventSources:u,eventUiBases:{},eventStore:jc(),renderableEventStore:jc(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(s).selectionConfig},f=Object.assign(Object.assign({},s),d);for(let p of r.pluginHooks.reducers)Object.assign(d,p(null,null,f));YC(d,s)&&this.emitter.trigger("loading",!0),this.state=d,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:r}=this;n===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:r,emitter:i}=this,a=HUe(r.dynamicOptionOverrides,e),s=this.computeOptionsData(n.optionOverrides,a,n.calendarApi),o=BUe(r.currentViewType,e),l=this.computeCurrentViewData(o,s,n.optionOverrides,a);n.calendarApi.currentDataManager=this,i.setThisContext(n.calendarApi),i.setOptions(l.options);let u={nowManager:this.nowManager,dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},{currentDate:d,dateProfile:f}=r;this.data&&this.data.dateProfileGenerator!==l.dateProfileGenerator&&(f=l.dateProfileGenerator.build(d)),d=VUe(d,e),f=WUe(f,e,d,l.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!hf(f.currentRange,d))&&(d=f.currentRange.start);let p=KUe(r.eventSources,e,f,u),h=LBe(r.eventStore,e,p,f,u),g=xZ(p)&&!l.options.progressiveEventRendering&&r.renderableEventStore||h,{eventUiSingleBase:v,selectionConfig:y}=this.buildViewUiProps(u),b=this.buildEventUiBySource(p),S=this.buildEventUiBases(g.defs,v,b),A={dynamicOptionOverrides:a,currentViewType:o,currentDate:d,dateProfile:f,eventSources:p,eventStore:h,renderableEventStore:g,selectionConfig:y,eventUiBases:S,businessHours:this.parseContextBusinessHours(u),dateSelection:eHe(r.dateSelection,e),eventSelection:tHe(r.eventSelection,e),eventDrag:nHe(r.eventDrag,e),eventResize:rHe(r.eventResize,e)},C=Object.assign(Object.assign({},u),A);for(let E of s.pluginHooks.reducers)Object.assign(A,E(r,e,C));let T=YC(r,u),j=YC(A,u);!T&&j?i.trigger("loading",!0):T&&!j&&i.trigger("loading",!1),this.state=A,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,r=this.data,i=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),a=this.computeCurrentViewData(n.currentViewType,i,e.optionOverrides,n.dynamicOptionOverrides),s=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,a.options,i.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},i),a),n),o=i.pluginHooks.optionChangeHandlers,l=r&&r.calendarOptions,u=i.calendarOptions;if(l&&l!==u){l.timeZone!==u.timeZone&&(n.eventSources=s.eventSources=GUe(s.eventSources,n.dateProfile,s),n.eventStore=s.eventStore=_z(s.eventStore,r.dateEnv,s.dateEnv),n.renderableEventStore=s.renderableEventStore=_z(s.renderableEventStore,r.dateEnv,s.dateEnv));for(let d in o)(this.optionsForHandling.indexOf(d)!==-1||l[d]!==u[d])&&o[d](u[d],s)}this.optionsForHandling=[],e.onData&&e.onData(s)}computeOptionsData(e,n,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:i,pluginHooks:a,localeDefaults:s,availableLocaleData:o,extra:l}=this.processRawCalendarOptions(e,n);Fz(l);let u=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,a,o,i.defaultRangeSeparator),d=this.buildViewSpecs(a.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,s),f=this.buildTheme(i,a),p=this.parseToolbars(i,this.stableOptionOverrides,f,d,r);return this.stableCalendarOptionsData={calendarOptions:i,pluginHooks:a,dateEnv:u,viewSpecs:d,theme:f,toolbarConfig:p,localeDefaults:s,availableRawLocales:o.map}}processRawCalendarOptions(e,n){let{locales:r,locale:i}=BC([z0,e,n]),a=this.organizeRawLocales(r),s=a.map,o=this.buildLocale(i||a.defaultCode,s).options,l=this.buildPluginHooks(e.plugins||[],SHe),u=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},gz),vz),yz),l.listenerRefiners),l.optionRefiners),d={},f=BC([z0,o,e,n]),p={},h=this.currentCalendarOptionsInput,m=this.currentCalendarOptionsRefined,g=!1;for(let v in f)this.optionsForRefining.indexOf(v)===-1&&(f[v]===h[v]||ch[v]&&v in h&&ch[v](h[v],f[v]))?p[v]=m[v]:u[v]?(p[v]=u[v](f[v]),g=!0):d[v]=h[v];return g&&(this.currentCalendarOptionsInput=f,this.currentCalendarOptionsRefined=p,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:l,availableLocaleData:a,localeDefaults:o,extra:d}}_computeCurrentViewData(e,n,r,i){let a=n.viewSpecs[e];if(!a)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:s,extra:o}=this.processRawViewOptions(a,n.pluginHooks,n.localeDefaults,r,i);Fz(o),this.nowManager.handleInput(n.dateEnv,s.now);let l=this.buildDateProfileGenerator({dateProfileGeneratorClass:a.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:a.duration,durationUnit:a.durationUnit,usesMinMaxTime:a.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,showNonCurrentDates:s.showNonCurrentDates,dayCount:s.dayCount,dateAlignment:s.dateAlignment,dateIncrement:s.dateIncrement,hiddenDays:s.hiddenDays,weekends:s.weekends,validRangeInput:s.validRange,visibleRangeInput:s.visibleRange,fixedWeekCount:s.fixedWeekCount}),u=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:a,options:s,dateProfileGenerator:l,viewApi:u}}processRawViewOptions(e,n,r,i,a){let s=BC([z0,e.optionDefaults,r,i,e.optionOverrides,a]),o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},gz),vz),yz),eBe),n.listenerRefiners),n.optionRefiners),l={},u=this.currentViewOptionsInput,d=this.currentViewOptionsRefined,f=!1,p={};for(let h in s)s[h]===u[h]||ch[h]&&ch[h](s[h],u[h])?l[h]=d[h]:(s[h]===this.currentCalendarOptionsInput[h]||ch[h]&&ch[h](s[h],this.currentCalendarOptionsInput[h])?h in this.currentCalendarOptionsRefined&&(l[h]=this.currentCalendarOptionsRefined[h]):o[h]?l[h]=o[h](s[h]):p[h]=s[h],f=!0);return f&&(this.currentViewOptionsInput=s,this.currentViewOptionsRefined=l),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:p}}}function NHe(t,e,n,r,i,a,s,o){let l=yZ(e||s.defaultCode,s.map);return new dBe({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:a.namedTimeZonedImpl,locale:l,weekNumberCalculation:n,firstDay:r,weekText:i,cmdFormatter:a.cmdFormatter,defaultSeparator:o})}function EHe(t,e){let n=e.themeClasses[t.themeSystem]||$f;return new n(t)}function kHe(t){let e=t.dateProfileGeneratorClass||zQ;return new e(t)}function PHe(t,e,n){return new sHe(t,e,n)}function THe(t){return Np(t,e=>e.ui)}function DHe(t,e,n){let r={"":e};for(let i in t){let a=t[i];a.sourceId&&n[a.sourceId]&&(r[i]=n[a.sourceId])}return r}function IHe(t){let{options:e}=t;return{eventUiSingleBase:x5({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:x5({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function YC(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function OHe(t){return qBe(t.options.businessHours,t)}function Fz(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class MHe extends Ii{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return Je("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:r}=this.context,i=[],a=!0;for(let s of e){let{buttonName:o,buttonClick:l,buttonText:u,buttonIcon:d,buttonHint:f}=s;if(o==="title")a=!1,i.push(Je("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let p=o===n.activeButton,h=!n.isTodayEnabled&&o==="today"||!n.isPrevEnabled&&o==="prev"||!n.isNextEnabled&&o==="next",m=[`fc-${o}-button`,r.getClass("button")];p&&m.push(r.getClass("buttonActive")),i.push(Je("button",{type:"button",title:typeof f=="function"?f(n.navUnit):f,disabled:h,"aria-pressed":p,className:m.join(" "),onClick:l},u||(d?Je("span",{className:d,role:"img"}):"")))}}if(i.length>1){let s=a&&r.getClass("buttonGroup")||"";return Je("div",{className:s},...i)}return i[0]}}class zz extends Ii{render(){let{model:e,extraClassName:n}=this.props,r=!1,i,a,s=e.sectionWidgets,o=s.center;return s.left?(r=!0,i=s.left):i=s.start,s.right?(r=!0,a=s.right):a=s.end,Je("div",{className:[n||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",i||[]),this.renderSection("center",o||[]),this.renderSection("end",a||[]))}renderSection(e,n){let{props:r}=this;return Je(MHe,{key:e,widgetGroups:n,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class RHe extends Ii{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,bu(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:r}=e,i=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],a="",s="";return r?n.availableWidth!==null?a=n.availableWidth/r:s=`${1/r*100}%`:a=e.height||"",Je("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:i.join(" "),style:{height:a,paddingBottom:s}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class LHe extends xv{constructor(e){super(e),this.handleSegClick=(n,r)=>{let{component:i}=this,{context:a}=i,s=Wg(r);if(s&&i.isValidSegDownEl(n.target)){let o=Hs(n.target,".fc-event-forced-url"),l=o?o.querySelector("a[href]").href:"";a.emitter.trigger("eventClick",{el:r,event:new Ci(i.context,s.eventRange.def,s.eventRange.instance),jsEvent:n,view:a.viewApi}),l&&!n.defaultPrevented&&(window.location.href=l)}},this.destroy=NQ(e.el,"click",".fc-event",this.handleSegClick)}}class FHe extends xv{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,r)=>{Wg(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",n,r))},this.handleSegLeave=(n,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,r))},this.removeHoverListeners=o$e(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,r){let{component:i}=this,{context:a}=i,s=Wg(r);(!n||i.isValidSegDownEl(n.target))&&a.emitter.trigger(e,{el:r,event:new Ci(a,s.eventRange.def,s.eventRange.instance),jsEvent:n,view:a.viewApi})}}class zHe extends kp{constructor(){super(...arguments),this.buildViewContext=Ar(pBe),this.buildViewPropTransformers=Ar(BHe),this.buildToolbarProps=Ar($He),this.headerRef=dd(),this.footerRef=dd(),this.interactionsStore={},this.state={viewLabelId:x_()},this.registerInteractiveComponent=(e,n)=>{let r=mVe(e,n),s=[LHe,FHe].concat(this.props.pluginHooks.componentInteractions).map(o=>new o(r));this.interactionsStore[e.uid]=s,Qk[e.uid]=r},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let r of n)r.destroy();delete this.interactionsStore[e.uid]}delete Qk[e.uid]},this.resizeRunner=new jD(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:r}=e,i=!1,a="",s;e.isHeightAuto||e.forPrint?a="":r.height!=null?i=!0:r.contentHeight!=null?a=r.contentHeight:s=Math.max(r.aspectRatio,.5);let o=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),l=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return Je(Ep.Provider,{value:o},Je(C_,{unit:"day"},u=>{let d=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,u,e.viewTitle);return Je(Hi,null,n.header&&Je(zz,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:l},d)),Je(RHe,{liquid:i,height:a,aspectRatio:s,labeledById:l},this.renderView(e),this.buildAppendContent()),n.footer&&Je(zz,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},d)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let r in n)n[r](e[r],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:r}=n.pluginHooks;for(let i in r)n[i]!==e[i]&&r[i](n[i],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(r=>r(e));return Je(Hi,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:r}=e,i={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},a=this.buildViewPropTransformers(n.viewPropsTransformers);for(let o of a)Object.assign(i,o.transform(i,e));let s=r.component;return Je(s,Object.assign({},i))}}function $He(t,e,n,r,i,a){let s=n.build(i,void 0,!1),o=n.buildPrev(e,r,!1),l=n.buildNext(e,r,!1);return{title:a,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:s.isValid&&!hf(e.currentRange,i),isPrevEnabled:o.isValid,isNextEnabled:l.isValid}}function BHe(t){return t.map(e=>new e)}class VHe extends vVe{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;y5(()=>{cb(Je(pVe,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(i,a,s,o)=>(this.setClassNames(i),this.setHeight(a),Je(MQ.Provider,{value:this.customContentRenderId},Je(zHe,Object.assign({isHeightAuto:s,forPrint:o},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,cb(null,this.el),this.setClassNames([]),this.setHeight(""))},Z9e(e),this.el=e,this.renderRunner=new jD(this.handleRenderRequest),new jHe({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){y5(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!Sf(e,this.currentClassNames)){let{classList:n}=this.el;for(let r of this.currentClassNames)n.remove(r);for(let r of e)n.add(r);this.currentClassNames=e}}setHeight(e){CQ(this.el,"height",e)}}const UHe=parseInt(String(xe.version).split(".")[0]),HHe=UHe<18;class XD extends I.Component{constructor(){super(...arguments),this.elRef=I.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(xe.createElement(WHe,{key:n.id,customRendering:n}));return xe.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new jUe;this.handleCustomRendering=e.handle.bind(e),this.calendar=new VHe(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{ly.flushSync(()=>{})});let n;e.subscribe(r=>{const i=Date.now(),a=!n;(HHe||a||this.isUpdating||this.isUnmounting||i-n<100?CZ:ly.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{n=i,a?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}XD.act=CZ;class WHe extends I.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,r=typeof n=="function"?n(e.renderProps):n;return ly.createPortal(r,e.containerEl)}}function CZ(t){t()}class qHe extends Pp{constructor(){super(...arguments),this.headerElRef=dd()}renderSimpleLayout(e,n){let{props:r,context:i}=this,a=[],s=Pz(i.options);return e&&a.push({type:"header",key:"header",isSticky:s,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),a.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),Je(bz,{elClasses:["fc-daygrid"],viewSpec:i.viewSpec},Je(fZ,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:a}))}renderHScrollLayout(e,n,r,i){let a=this.context.pluginHooks.scrollGridImpl;if(!a)throw new Error("No ScrollGrid implementation");let{props:s,context:o}=this,l=!s.forPrint&&Pz(o.options),u=!s.forPrint&&oUe(o.options),d=[];return e&&d.push({type:"header",key:"header",isSticky:l,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),u&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:sUe}]}),Je(bz,{elClasses:["fc-daygrid"],viewSpec:o.viewSpec},Je(a,{liquid:!s.isHeightAuto&&!s.forPrint,forPrint:s.forPrint,collapsibleWidth:s.forPrint,colGroups:[{cols:[{span:r,minWidth:i}]}],sections:d}))}}function i2(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.row].push(r);return n}function m1(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.firstCol].push(r);return n}function $z(t,e){let n=[];if(t){for(let r=0;r<e;r+=1)n[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)n[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)n[r]=null;return n}const jZ=Ya({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function NZ(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class EZ extends Ii{render(){let{props:e}=this;return Je(hZ,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:jZ,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class kZ extends Ii{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,a=r.eventTimeFormat||jZ,s=XQ(i,a,n,!0,e.defaultDisplayEventEnd);return Je(GD,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:QQ(e.seg,n),defaultGenerator:KHe,timeText:s,isResizing:!1,isDateSelecting:!1}))}}function KHe(t){return Je(Hi,null,Je("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&Je("div",{className:"fc-event-time"},t.timeText),Je("div",{className:"fc-event-title"},t.event.title||Je(Hi,null," ")))}class GHe extends Ii{constructor(){super(...arguments),this.compileSegs=Ar(YHe)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return Je(bUe,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return Je(Hi,null,n.map(a=>{let s=a.eventRange.instance.instanceId;return Je("div",{className:"fc-daygrid-event-harness",key:s,style:{visibility:i[s]?"hidden":""}},NZ(a)?Je(kZ,Object.assign({seg:a,isDragging:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},$0(a,e.todayRange))):Je(EZ,Object.assign({seg:a,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},$0(a,e.todayRange))))}))}})}}function YHe(t){let e=[],n=[];for(let r of t)e.push(r.seg),r.isVisible||n.push(r.seg);return{allSegs:e,invisibleSegs:n}}const XHe=Ya({week:"narrow"});class QHe extends Pp{constructor(){super(...arguments),this.rootElRef=dd(),this.state={dayNumberId:x_()},this.handleRootEl=e=>{bu(this.rootElRef,e),bu(this.props.elRef,e)}}render(){let{context:e,props:n,state:r,rootElRef:i}=this,{options:a,dateEnv:s}=e,{date:o,dateProfile:l}=n;const u=n.showDayNumber&&JHe(o,l.currentRange,s);return Je(pZ,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:ZHe,date:o,dateProfile:l,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:u,extraRenderProps:n.extraRenderProps},(d,f)=>Je("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&Je(mUe,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Zk(e,o,"week"),date:o,defaultFormat:XHe}),!f.isDisabled&&(n.showDayNumber||mZ(a)||n.forceDayTop)?Je("div",{className:"fc-daygrid-day-top"},Je(d,{elTag:"a",elClasses:["fc-daygrid-day-number",u&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Zk(e,o)),{id:r.dayNumberId})})):n.showDayNumber?Je("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},Je("a",{className:"fc-daygrid-day-number"}," ")):void 0,Je("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,Je("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},Je(GHe,{allDayDate:o,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:i,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),Je("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function ZHe(t){return t.dayNumberText||Je(Hi,null," ")}function JHe(t,e,n){const{start:r,end:i}=e,a=_f(i,-1),s=n.getYear(r),o=n.getMonth(r),l=n.getYear(a),u=n.getMonth(a);return!(s===l&&o===u)&&(t.valueOf()===r.valueOf()||n.getDay(t)===1&&t.valueOf()<i.valueOf())}function PZ(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function TZ(t){return PZ(t)+":"+t.lastCol}function eWe(t,e,n,r,i,a,s){let o=new rWe(y=>{let b=t[y.index].eventRange.instance.instanceId+":"+y.span.start+":"+(y.span.end-1);return i[b]||1});o.allowReslicing=!0,o.strictOrder=r,e===!0||n===!0?(o.maxCoord=a,o.hiddenConsumes=!0):typeof e=="number"?o.maxStackCnt=e:typeof n=="number"&&(o.maxStackCnt=n,o.hiddenConsumes=!0);let l=[],u=[];for(let y=0;y<t.length;y+=1){let b=t[y],S=TZ(b);i[S]!=null?l.push({index:y,span:{start:b.firstCol,end:b.lastCol+1}}):u.push(b)}let d=o.addSegs(l),f=o.toRects(),{singleColPlacements:p,multiColPlacements:h,leftoverMargins:m}=tWe(f,t,s),g=[],v=[];for(let y of u){h[y.firstCol].push({seg:y,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let b=y.firstCol;b<=y.lastCol;b+=1)p[b].push({seg:zm(y,b,b+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let y=0;y<s.length;y+=1)g.push(0);for(let y of d){let b=t[y.index],S=y.span;h[S.start].push({seg:zm(b,S.start,S.end,s),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let A=S.start;A<S.end;A+=1)g[A]+=1,p[A].push({seg:zm(b,A,A+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let y=0;y<s.length;y+=1)v.push(m[y]);return{singleColPlacements:p,multiColPlacements:h,moreCnts:g,moreMarginTops:v}}function tWe(t,e,n){let r=nWe(t,n.length),i=[],a=[],s=[];for(let o=0;o<n.length;o+=1){let l=r[o],u=[],d=0,f=0;for(let h of l){let m=e[h.index];u.push({seg:zm(m,o,o+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:h.levelCoord-d}),d=h.levelCoord+h.thickness}let p=[];d=0,f=0;for(let h of l){let m=e[h.index],g=h.span.end-h.span.start>1,v=h.span.start===o;f+=h.levelCoord-d,d=h.levelCoord+h.thickness,g?(f+=h.thickness,v&&p.push({seg:zm(m,h.span.start,h.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:h.levelCoord,marginTop:0})):v&&(p.push({seg:zm(m,h.span.start,h.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:f}),f=0)}i.push(u),a.push(p),s.push(f)}return{singleColPlacements:i,multiColPlacements:a,leftoverMargins:s}}function nWe(t,e){let n=[];for(let r=0;r<e;r+=1)n.push([]);for(let r of t)for(let i=r.span.start;i<r.span.end;i+=1)n[i].push(r);return n}function zm(t,e,n,r){if(t.firstCol===e&&t.lastCol===n-1)return t;let i=t.eventRange,a=i.range,s=Hg(a,{start:r[e].date,end:Qa(r[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:i.def,ui:Object.assign(Object.assign({},i.ui),{durationEditable:!1}),instance:i.instance,range:s},isStart:t.isStart&&s.start.valueOf()===a.start.valueOf(),isEnd:t.isEnd&&s.end.valueOf()===a.end.valueOf()})}class rWe extends IVe{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:r}=this,i=a=>!this.forceHidden[B0(a)];for(let a=0;a<r.length;a+=1)r[a]=r[a].filter(i);return n}handleInvalidInsertion(e,n,r){const{entriesByLevel:i,forceHidden:a}=this,{touchingEntry:s,touchingLevel:o,touchingLateral:l}=e;if(this.hiddenConsumes&&s){const u=B0(s);if(!a[u])if(this.allowReslicing){const d=Object.assign(Object.assign({},s),{span:aZ(s.span,n.span)}),f=B0(d);a[f]=!0,i[o][l]=d,r.push(d),this.splitEntry(s,n,r)}else a[u]=!0,r.push(s)}super.handleInvalidInsertion(e,n,r)}}class DZ extends Pp{constructor(){super(...arguments),this.cellElRefs=new jh,this.frameElRefs=new jh,this.fgElRefs=new jh,this.segHarnessRefs=new jh,this.rootElRef=dd(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:r}=this,{options:i}=r,a=e.cells.length,s=m1(e.businessHourSegs,a),o=m1(e.bgEventSegs,a),l=m1(this.getHighlightSegs(),a),u=m1(this.getMirrorSegs(),a),{singleColPlacements:d,multiColPlacements:f,moreCnts:p,moreMarginTops:h}=eWe(QBe(e.fgEventSegs,i.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,i.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),m=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return Je("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((g,v)=>{let y=this.renderFgSegs(v,e.forPrint?d[v]:f[v],e.todayRange,m),b=this.renderFgSegs(v,iWe(u[v],f),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return Je(QHe,{key:g.key,elRef:this.cellElRefs.createRef(g.key),innerElRef:this.frameElRefs.createRef(g.key),dateProfile:e.dateProfile,date:g.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&v===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:g.extraRenderProps,extraDataAttrs:g.extraDataAttrs,extraClassNames:g.extraClassNames,extraDateSpan:g.extraDateSpan,moreCnt:p[v],moreMarginTop:h[v],singlePlacements:d[v],fgContentElRef:this.fgElRefs.createRef(g.key),fgContent:Je(Hi,null,Je(Hi,null,y),Je(Hi,null,b)),bgContent:Je(Hi,null,this.renderFillSegs(l[v],"highlight"),this.renderFillSegs(s[v],"non-business"),this.renderFillSegs(o[v],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let r=this.props;this.updateSizing(!Oc(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,r,i,a,s,o){let{context:l}=this,{eventSelection:u}=this.props,{framePositions:d}=this.state,f=this.props.cells.length===1,p=a||s||o,h=[];if(d)for(let m of n){let{seg:g}=m,{instanceId:v}=g.eventRange.instance,y=m.isVisible&&!i[v],b=m.isAbsolute,S="",A="";b&&(l.isRtl?(A=0,S=d.lefts[g.lastCol]-d.lefts[g.firstCol]):(S=0,A=d.rights[g.firstCol]-d.rights[g.lastCol])),h.push(Je("div",{className:"fc-daygrid-event-harness"+(b?" fc-daygrid-event-harness-abs":""),key:PZ(g),ref:p?null:this.segHarnessRefs.createRef(TZ(g)),style:{visibility:y?"":"hidden",marginTop:b?"":m.marginTop,top:b?m.absoluteTop:"",left:S,right:A}},NZ(g)?Je(kZ,Object.assign({seg:g,isDragging:a,isSelected:v===u,defaultDisplayEventEnd:f},$0(g,r))):Je(EZ,Object.assign({seg:g,isDragging:a,isResizing:s,isDateSelecting:o,isSelected:v===u,defaultDisplayEventEnd:f},$0(g,r)))))}return h}renderFillSegs(e,n){let{isRtl:r}=this.context,{todayRange:i}=this.props,{framePositions:a}=this.state,s=[];if(a)for(let o of e){let l=r?{right:0,left:a.lefts[o.lastCol]-a.lefts[o.firstCol]}:{left:0,right:a.rights[o.firstCol]-a.rights[o.lastCol]};s.push(Je("div",{key:rVe(o.eventRange),className:"fc-daygrid-bg-harness",style:l},n==="bg-event"?Je(fUe,Object.assign({seg:o},$0(o,i))):pUe(n)))}return Je(Hi,{},...s)}updateSizing(e){let{props:n,state:r,frameElRefs:i}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let l=n.cells.map(u=>i.currentMap[u.key]);if(l.length){let u=this.rootElRef.current,d=new S5(u,l,!0,!1);(!r.framePositions||!r.framePositions.similarTo(d))&&this.setState({framePositions:new S5(u,l,!0,!1)})}}const a=this.state.segHeights,s=this.querySegHeights(),o=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},a),s),maxContentHeight:o?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let r in e){let i=Math.round(e[r].getBoundingClientRect().height);n[r]=Math.max(n[r]||0,i)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}}DZ.addStateEquality({segHeights:Oc});function iWe(t,e){if(!t.length)return[];let n=aWe(e);return t.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}))}function aWe(t){let e={};for(let n of t)for(let r of n)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class sWe extends Pp{constructor(){super(...arguments),this.splitBusinessHourSegs=Ar(i2),this.splitBgEventSegs=Ar(oWe),this.splitFgEventSegs=Ar(i2),this.splitDateSelectionSegs=Ar(i2),this.splitEventDrag=Ar($z),this.splitEventResize=Ar($z),this.rowRefs=new jh}render(){let{props:e,context:n}=this,r=e.cells.length,i=this.splitBusinessHourSegs(e.businessHourSegs,r),a=this.splitBgEventSegs(e.bgEventSegs,r),s=this.splitFgEventSegs(e.fgEventSegs,r),o=this.splitDateSelectionSegs(e.dateSelectionSegs,r),l=this.splitEventDrag(e.eventDrag,r),u=this.splitEventResize(e.eventResize,r),d=r>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return Je(C_,{unit:"day"},(f,p)=>Je(Hi,null,e.cells.map((h,m)=>Je(DZ,{ref:this.rowRefs.createRef(m),key:h.length?h[0].date.toISOString():m,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:p,dateProfile:e.dateProfile,cells:h,renderIntro:e.renderRowIntro,businessHourSegs:i[m],eventSelection:e.eventSelection,bgEventSegs:a[m],fgEventSegs:s[m],dateSelectionSegs:o[m],eventDrag:l[m],eventResize:u[m],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:d,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new S5(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new S5(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:r,rowPositions:i}=this,a=r.leftToIndex(e),s=i.topToIndex(n);if(s!=null&&a!=null){let o=this.props.cells[s][a];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(s,a),allDay:!0},o.extraDateSpan),dayEl:this.getCellEl(s,a),rect:{left:r.lefts[a],right:r.rights[a],top:i.tops[s],bottom:i.bottoms[s]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let r=this.props.cells[e][n].date,i=Qa(r,1);return{start:r,end:i}}}function oWe(t,e){return i2(t.filter(lWe),e)}function lWe(t){return t.eventRange.def.allDay}let cWe=class extends Pp{constructor(){super(...arguments),this.elRef=dd(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:r,expandRows:i}=e,a=r===!0||n===!0;a&&!i&&(a=!1,n=null,r=null);let s=["fc-daygrid-body",a?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",i?"":"fc-daygrid-body-natural"];return Je("div",{ref:this.elRef,className:s.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},Je("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:i?e.clientHeight:""}},e.colGroupNode,Je("tbody",{role:"presentation"},Je(sWe,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=uWe(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),r=n.closest(".fc-scroller"),i=e.getBoundingClientRect().top-n.getBoundingClientRect().top;r.scrollTop=i?i+1:0}this.needsScrollReset=!1}}};function uWe(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${F$e(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${PD(e.currentDate)}"]`)),n}class dWe extends UVe{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class fWe extends Pp{constructor(){super(...arguments),this.slicer=new dWe,this.tableRef=dd()}render(){let{props:e,context:n}=this;return Je(cWe,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class hWe extends qHe{constructor(){super(...arguments),this.buildDayTableModel=Ar(pWe),this.headerRef=dd(),this.tableRef=dd()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:r}=this,i=this.buildDayTableModel(r.dateProfile,n),a=e.dayHeaders&&Je(zVe,{ref:this.headerRef,dateProfile:r.dateProfile,dates:i.headerDates,datesRepDistinctDays:i.rowCnt===1}),s=o=>Je(fWe,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:i,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:o.tableColGroupNode,tableMinWidth:o.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:o.clientWidth,clientHeight:o.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(a,s,i.colCnt,e.dayMinWidth):this.renderSimpleLayout(a,s)}}function pWe(t,e){let n=new BVe(t.renderRange,e);return new VVe(n,/year|month|week/.test(t.currentRangeUnit))}class mWe extends zQ{buildRenderRange(e,n,r){let i=super.buildRenderRange(e,n,r),{props:a}=this;return gWe({currentRange:i,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:a.fixedWeekCount,dateEnv:a.dateEnv})}}function gWe(t){let{dateEnv:e,currentRange:n}=t,{start:r,end:i}=n,a;if(t.snapToWeek&&(r=e.startOfWeek(r),a=e.startOfWeek(i),a.valueOf()!==i.valueOf()&&(i=dz(a,1))),t.fixedWeekCount){let s=e.startOfWeek(e.startOfMonth(Qa(n.end,-1))),o=Math.ceil(j$e(s,i));i=dz(i,6-o)}return{start:r,end:i}}var vWe=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';SQ(vWe);var IZ=zf({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:hWe,dateProfileGeneratorClass:mWe},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}}),OZ={code:"es",week:{dow:1,doy:4},buttonText:{prev:"Ant",next:"Sig",today:"Hoy",year:"Año",month:"Mes",week:"Semana",day:"Día",list:"Agenda"},buttonHints:{prev:"$0 antes",next:"$0 siguiente",today(t){return t==="Día"?"Hoy":(t==="Semana"?"Esta":"Este")+" "+t.toLocaleLowerCase()}},viewHint(t){return"Vista "+(t==="Semana"?"de la":"del")+" "+t.toLocaleLowerCase()},weekText:"Sm",weekTextLong:"Semana",allDayText:"Todo el día",moreLinkText:"más",moreLinkHint(t){return`Mostrar ${t} eventos más`},noEventsText:"No hay eventos para mostrar",navLinkHint:"Ir al $0",closeHint:"Cerrar",timeHint:"La hora",eventHint:"Evento"};const yWe=(t,e)=>{const n=[],r=new Date,i=r.getFullYear();return t.forEach(a=>{const s=a.category==="Tratamiento"?"#007AFF":"#AF52DE";if(e==="Maternidad"&&a.trigger.type==="age"&&a.trigger.days)a.trigger.days.forEach(o=>{const l=new Date;l.setDate(r.getDate()+o),n.push({title:a.name,start:l,backgroundColor:s,borderColor:s})});else if(e==="Adultos"&&a.trigger.type==="fixed_date_period"&&a.trigger.month&&a.trigger.week){const o=(a.trigger.week-1)*7+1,l=new Date(i,a.trigger.month-1,o);n.push({title:a.name,start:l,backgroundColor:s,borderColor:s})}}),n},bWe=({isOpen:t,onClose:e,activities:n,targetGroup:r})=>{const i=xe.useMemo(()=>yWe(n,r),[n,r]);return c.jsx(cn,{isOpen:t,onClose:e,title:"",children:c.jsxs(Ui.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-2xl mx-auto p-4 sm:p-0",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white leading-none",children:"Previsualización del Plan"}),c.jsx("p",{className:"text-zinc-400 mt-2",children:r==="Maternidad"?"Este calendario simula las fechas de las actividades asumiendo un nacimiento el día de hoy.":"Este calendario muestra la distribución de las actividades a lo largo del año actual."})]}),c.jsx("div",{className:"h-[55vh] sm:h-[60vh] text-white",children:c.jsx(XD,{plugins:[IZ],initialView:"dayGridMonth",locale:OZ,events:i,height:"100%",headerToolbar:{left:"prev,next",center:"title",right:"today"}})}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{onClick:e,className:"px-6 py-3 bg-brand-blue text-white font-bold rounded-xl w-full sm:w-auto",children:"Cerrar"})})]})})},xWe=({targetGroup:t,activityType:e,onSaveActivity:n,existingActivity:r,clearEditing:i})=>{const{products:a,addProduct:s}=Xt(),[o,l]=I.useState(""),[u,d]=I.useState(""),[f,p]=I.useState(""),[h,m]=I.useState(!1),[g,v]=I.useState(null),[y,b]=I.useState(new Set),[S,A]=I.useState(""),[C,T]=I.useState(null),j=["0","8","15","21","30","45","60","75","90","105","120"],M=e==="Control"?t==="Maternidad"?["Cura de Ombligo","Descorne","Castración","Hematología","Coprología","FAMACHA"]:["Hematología","Coprología","Arreglo Podal","FAMACHA"]:t==="Maternidad"?["Coxidioestático","Desparasitación","Vacuna Clostridial"]:["Desparasitación","Vacuna Leptospirosis","Vacuna Clostridial","Vacuna Rabia"],L=I.useMemo(()=>a.reduce((le,se)=>{const $=se.category||"Otro";return le[$]||(le[$]=[]),le[$].push(se),le},{}),[a]);I.useEffect(()=>{r?(l(r.name),e==="Tratamiento"&&(d(r.productId||""),p(r.complementaryProductId||"")),t==="Maternidad"&&r.trigger.days&&b(new Set(r.trigger.days.map(String))),t==="Adultos"&&r.trigger.month&&r.trigger.week&&b(new Set([`${r.trigger.month}-${r.trigger.week}`]))):V()},[r,e,t]);const V=()=>{l(""),d(""),p(""),b(new Set),A(""),v(null),i()},Q=le=>{le.trim()&&b(se=>{const $=new Set(se);return $.has(le)?$.delete(le):$.add(le),$})},Y=()=>{S&&!isNaN(Number(S))&&(Q(S),A(""))},J=async le=>{await s(le),m(!1)},q=()=>{if(v(null),!o.trim()){v("El nombre es obligatorio.");return}if(e==="Tratamiento"&&!u){v("Debe seleccionar un producto principal.");return}if(y.size===0){v("Debe seleccionar al menos un tiempo de aplicación.");return}const le=[],se={category:e,name:o};if(e==="Tratamiento"&&(u&&(se.productId=u),f&&(se.complementaryProductId=f)),t==="Maternidad"){const $={type:"age",days:Array.from(y).map(Number).sort((G,te)=>G-te)};le.push({...se,trigger:$})}else Array.from(y).forEach($=>{const[G,te]=$.split("-").map(Number),oe={type:"fixed_date_period",month:G,week:te};le.push({...se,trigger:oe})});le.forEach($=>n($,!!r)),V()},ee=Array.from(y).filter(le=>!j.includes(le));return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Añadir ",e]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{list:"activity-names-list",value:o,onChange:le=>l(le.target.value),placeholder:`Nombre del ${e}...`,className:"w-full bg-zinc-800 p-3 rounded-lg text-base"}),c.jsx("datalist",{id:"activity-names-list",children:M.map(le=>c.jsx("option",{value:le},le))}),e==="Control"&&c.jsx("button",{type:"button",onClick:()=>alert("Funcionalidad para crear nuevos tipos de control en desarrollo."),className:"flex-shrink-0 p-3 bg-brand-orange/80 text-white rounded-lg",children:c.jsx(ol,{size:20})})]}),e==="Tratamiento"&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:u,onChange:le=>d(le.target.value),className:"w-full bg-zinc-800 p-3 rounded-lg text-base appearance-none",children:[c.jsx("option",{value:"",disabled:!0,children:"Producto Principal..."}),Object.entries(L).map(([le,se])=>c.jsx("optgroup",{label:le,children:se.map($=>c.jsx("option",{value:$.id,children:$.name},$.id))},le))]}),c.jsx("button",{type:"button",onClick:()=>m(!0),className:"flex-shrink-0 p-3 bg-brand-orange text-white rounded-lg",children:c.jsx(ol,{size:20})})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:f,onChange:le=>p(le.target.value),className:"w-full bg-zinc-800 p-3 rounded-lg text-base appearance-none",children:[c.jsx("option",{value:"",children:"Producto Complementario (Opcional)..."}),Object.entries(L).map(([le,se])=>c.jsx("optgroup",{label:le,children:se.map($=>c.jsx("option",{value:$.id,children:$.name},$.id))},le))]}),c.jsx("button",{type:"button",onClick:()=>m(!0),className:"flex-shrink-0 p-3 bg-brand-orange/50 text-white rounded-lg",children:c.jsx(ol,{size:20})})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-base font-medium text-zinc-400",children:"Tiempos de Aplicación (Selecciona uno o varios)"}),t==="Maternidad"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.map(le=>c.jsx("button",{type:"button",onClick:()=>Q(le),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors ${y.has(le)?"bg-zinc-200 text-black":"bg-zinc-700 text-zinc-300"}`,children:le==="0"?"Nacimiento":`${le} días`},le)),ee.map(le=>c.jsxs("button",{type:"button",onClick:()=>Q(le),className:"flex items-center gap-1.5 px-4 py-2 text-sm font-semibold rounded-lg bg-zinc-200 text-black",children:[le," días ",c.jsx(Xl,{size:16})]},`manual-${le}`))]}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx("input",{type:"number",value:S,onChange:le=>A(le.target.value),placeholder:"Día manual...",className:"w-full bg-zinc-800 p-3 rounded-lg text-base"}),c.jsx("button",{type:"button",onClick:Y,className:"px-5 py-3 bg-zinc-700 text-white font-semibold rounded-lg text-sm hover:bg-zinc-600",children:"Agregar"})]})]}):c.jsx("div",{className:"p-2 bg-zinc-800 rounded-lg",children:c.jsx(K1,{mode:"wait",children:C?c.jsxs(Ui.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",onClick:()=>T(null),className:"p-2 text-zinc-400 hover:bg-zinc-700 rounded-md",children:c.jsx(ji,{size:16})}),c.jsx("h4",{className:"font-bold text-white",children:new Date(0,C-1).toLocaleString("es-VE",{month:"long"})})]}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(le=>{const se=`${C}-${le}`,$=y.has(se);return c.jsxs("button",{type:"button",onClick:()=>Q(se),className:`py-3 px-2 text-sm font-semibold rounded-md transition-colors ${$?"bg-teal-500 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:["Semana ",le]},le)})})]},"weeks-view"):c.jsx(Ui.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-4 gap-2",children:[...Array(12)].map((le,se)=>{const $=se+1,G=new Date(0,se).toLocaleString("es-VE",{month:"short"}),te=Array.from(y).some(oe=>oe.startsWith(`${$}-`));return c.jsxs("button",{type:"button",onClick:()=>T($),className:"relative text-center py-3 px-2 text-sm font-semibold rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-300 transition-colors",children:[te&&c.jsx("span",{className:"absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-brand-green rounded-full"}),G.charAt(0).toUpperCase()+G.slice(1)]},$)})},"months-view")})})]}),g&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2",children:[c.jsx(mr,{size:16})," ",g]}),c.jsx("button",{type:"button",onClick:q,className:"w-full py-3 bg-brand-orange text-black font-bold rounded-lg text-base mt-4",children:r?"Actualizar Actividad":"Añadir a la Lista"}),c.jsx(cn,{isOpen:h,onClose:()=>m(!1),title:"Crear Producto",children:c.jsx(AD,{onSave:J,onCancel:()=>m(!1)})})]})},wWe=({onSave:t,onCancel:e})=>{const[n,r]=I.useState(1),[i,a]=I.useState(""),[s,o]=I.useState(""),[l,u]=I.useState("Maternidad"),[d,f]=I.useState(new Set),[p,h]=I.useState([]),[m,g]=I.useState(null),[v,y]=I.useState(null),[b,S]=I.useState(!1),[A,C]=I.useState("Tratamiento"),[T,j]=I.useState(!1),E=["Cabritonas","Cabras","Reproductores","Machos de Levante"],k=V=>{f(Q=>{const Y=new Set(Q);return Y.has(V)?Y.delete(V):Y.add(V),Y})},O=(V,Q)=>{h(Q&&m?Y=>Y.map(J=>J.tempId===m.tempId?{...V,tempId:J.tempId}:J):Y=>[...Y,{...V,tempId:Date.now()}])},D=V=>{h(Q=>Q.filter(Y=>Y.tempId!==V))},M=async()=>{if(!i.trim()){y("El nombre del plan es obligatorio.");return}if(l==="Adultos"&&d.size===0){y("Debe seleccionar al menos una categoría de adulto.");return}if(p.length===0){y("Debe añadir al menos una actividad al plan.");return}y(null),S(!0);try{const V=p.map(({tempId:Y,...J})=>J),Q={name:i,description:s,targetGroup:l,adultsSubgroup:l==="Adultos"?Array.from(d):void 0};await t(Q,V)}catch{y("No se pudo guardar el plan."),S(!1)}},L=()=>n===1?c.jsxs(Ui.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3},className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Crear Plan Sanitario"}),c.jsx("p",{className:"text-zinc-400",children:"Paso 1: Define tu plan"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{type:"text",value:i,onChange:V=>a(V.target.value),placeholder:"Nombre del Plan",className:"w-full bg-zinc-800 p-3 rounded-xl text-base"}),c.jsx("input",{type:"text",value:s,onChange:V=>o(V.target.value),placeholder:"Descripción (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-base"}),c.jsxs("div",{children:[c.jsx("label",{className:"text-base font-medium text-zinc-400 mb-2 block",children:"Grupo Objetivo"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("button",{type:"button",onClick:()=>u("Maternidad"),className:`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${l==="Maternidad"?"bg-teal-500/20 border-teal-500 scale-105":"bg-zinc-800/50 border-zinc-700"}`,children:[c.jsx(due,{className:"w-8 h-8 text-teal-400"}),c.jsx("span",{className:"font-semibold text-white",children:"Maternidad"})]}),c.jsxs("button",{type:"button",onClick:()=>u("Adultos"),className:`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${l==="Adultos"?"bg-pink-500/20 border-pink-500 scale-105":"bg-zinc-800/50 border-zinc-700"}`,children:[c.jsx(pue,{className:"w-8 h-8 text-pink-400"}),c.jsx("span",{className:"font-semibold text-white",children:"Rebaño Adulto"})]})]})]})]}),v&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2 mt-4",children:[c.jsx(mr,{size:16})," ",v]}),c.jsxs("div",{className:"flex flex-col sm:flex-row-reverse sm:justify-start gap-3 pt-4",children:[c.jsx("button",{onClick:()=>{i.trim()?(r(2),y(null)):y("El nombre del plan es obligatorio.")},className:"w-full sm:w-auto px-5 py-3 bg-brand-orange text-black font-bold rounded-xl flex items-center justify-center gap-2",children:"Siguiente"}),c.jsx("button",{onClick:e,className:"w-full sm:w-auto px-5 py-3 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-xl",children:"Cancelar"})]})]},"step1"):n===2?c.jsxs(Ui.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:i||"Nuevo Plan"}),c.jsxs("p",{className:"text-zinc-400",children:["Paso 2: Añade las actividades para el grupo: ",c.jsx("span",{className:"font-semibold text-white",children:l})]})]}),c.jsx(K1,{children:l==="Adultos"&&c.jsxs(Ui.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[c.jsx("label",{className:"text-base font-medium text-zinc-400 mb-2 block",children:"Categorías (Selecciona una o varias)"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(V=>c.jsx("button",{type:"button",onClick:()=>k(V),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors ${d.has(V)?"bg-pink-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:V},V))})]})}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h3",{className:"text-xl font-semibold text-zinc-300",children:["Actividades del Plan (",p.length,")"]}),c.jsx("div",{className:"min-h-[100px] max-h-60 overflow-y-auto pr-2 border border-brand-border rounded-xl p-2 space-y-2",children:c.jsx(K1,{children:p.length>0?p.map(V=>{var Q;return c.jsxs(Ui.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`flex justify-between items-center bg-zinc-800 p-3 rounded-lg border-l-4 ${V.category==="Tratamiento"?"border-blue-500":"border-purple-500"}`,children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:V.name}),c.jsxs("p",{className:"text-xs text-zinc-400",children:[((Q=V.trigger.days)==null?void 0:Q.map(Y=>Y===0?"Nacer":Y).join(", "))||"Tiempos no definidos"," días"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>g({activity:V,tempId:V.tempId}),className:"p-1 text-zinc-400 hover:text-brand-orange",children:c.jsx(kf,{size:16})}),c.jsx("button",{onClick:()=>D(V.tempId),className:"p-1 text-zinc-400 hover:text-brand-red",children:c.jsx(Yl,{size:16})})]})]},V.tempId)}):c.jsx("div",{className:"text-center py-6 text-zinc-500",children:c.jsx("p",{children:"Añade actividades para empezar a construir tu plan."})})})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"relative flex w-full max-w-sm mx-auto justify-between rounded-lg bg-zinc-800 p-1 mb-6",children:[c.jsxs("button",{type:"button",onClick:()=>C("Tratamiento"),className:"relative z-10 w-1/2 py-2 text-sm font-semibold text-white flex items-center justify-center gap-2",children:[c.jsx(hue,{})," Tratamiento"]}),c.jsxs("button",{type:"button",onClick:()=>C("Control"),className:"relative z-10 w-1/2 py-2 text-sm font-semibold text-white flex items-center justify-center gap-2",children:[c.jsx(fue,{})," Control"]}),c.jsx(Ui.div,{layoutId:"add-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${A==="Control"?"left-1/2":"left-1"}`})]}),c.jsx(xWe,{targetGroup:l,activityType:A,onSaveActivity:O,existingActivity:m?m.activity:null,clearEditing:()=>g(null)})]}),v&&c.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2 mt-4",children:[c.jsx(mr,{size:16})," ",v]}),c.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-between items-center pt-6 gap-4",children:[c.jsxs("button",{onClick:()=>r(1),className:"w-full sm:w-auto px-5 py-3 text-zinc-300 font-semibold rounded-xl flex items-center justify-center gap-2 hover:bg-zinc-700",children:[c.jsx(ji,{size:16})," Atrás"]}),c.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>j(!0),className:"flex-1 px-5 py-3 bg-brand-blue text-white font-bold rounded-xl flex items-center justify-center gap-2",children:[c.jsx(FH,{size:16})," Previsualizar"]}),c.jsx("button",{onClick:M,disabled:b,className:"flex-1 px-5 py-3 bg-brand-green text-white font-bold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:b?"Guardando...":c.jsxs(c.Fragment,{children:[c.jsx(Za,{size:16})," Guardar"]})})]})]})]},"step2"):null;return c.jsxs("div",{className:"w-full p-4",children:[c.jsx(K1,{mode:"wait",children:L()}),c.jsx(bWe,{isOpen:T,onClose:()=>j(!1),activities:p,targetGroup:l})]})},SWe=({plan:t,onClick:e,onDelete:n,isDeleting:r})=>{const i=vp(),a=I.useRef(!1),s=(o,l)=>{const u=l.offset.x,d=l.velocity.x;if(Math.abs(u)<5&&!a.current){e();return}u<-80/2||d<-500?i.start({x:-80}):i.start({x:0}),setTimeout(()=>{a.current=!1},100)};return c.jsxs("div",{className:`relative w-full overflow-hidden rounded-2xl bg-dashboard-surface border border-brand-border transition-opacity ${r?"opacity-50":"opacity-100"}`,children:[c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:c.jsxs("button",{onClick:n,onPointerDown:o=>o.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white transition-colors hover:bg-red-600",children:[c.jsx(Yl,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})}),c.jsx(Ui.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{a.current=!0},onDragEnd:s,onTap:()=>{!a.current&&!r&&e()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),c.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:t.description||`Plan para ${t.targetGroup}`})]}),r?c.jsx(kc,{className:"animate-spin text-zinc-400"}):c.jsx(Wi,{className:"text-zinc-600"})]})})]})};function _We({navigateTo:t}){const{healthPlans:e,deleteHealthPlan:n,addHealthPlanWithActivities:r}=Xt(),[i,a]=I.useState(!1),[s,o]=I.useState(null),[l,u]=I.useState(null),d=async(p,h)=>{await r(p,h),a(!1)},f=async()=>{if(s!=null&&s.id){u(s.id),o(null);try{await n(s.id)}catch(p){console.error("Error al eliminar el plan:",p)}finally{u(null)}}};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Planificador Sanitario"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Define tus Protocolos y Planes"})]}),c.jsxs("button",{onClick:()=>a(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:opacity-90 text-black font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(qi,{size:18})," Crear Nuevo Plan Sanitario"]}),c.jsx("div",{className:"space-y-3 pt-4",children:e.length>0?e.map(p=>c.jsx(SWe,{plan:p,onClick:()=>t({name:"plan-detail",planId:p.id}),onDelete:()=>o(p),isDeleting:l===p.id},p.id)):c.jsxs("div",{className:"text-center py-10 bg-dashboard-surface rounded-2xl flex flex-col items-center gap-4",children:[c.jsx(tT,{size:48,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-400 font-semibold",children:"Aún no has creado ningún plan."}),c.jsx("p",{className:"text-zinc-500 text-sm",children:"Usa el botón de arriba para empezar."})]})})]}),c.jsx(cn,{isOpen:i,onClose:()=>a(!1),title:"",children:c.jsx(wWe,{onSave:d,onCancel:()=>a(!1)})}),c.jsx(vv,{isOpen:!!s,onClose:()=>o(null),onConfirm:f,title:`Eliminar Plan "${s==null?void 0:s.name}"`,message:"¿Estás seguro? Al eliminar el plan, también se eliminarán todas sus actividades asociadas. Esta acción no se puede deshacer."})]})}KD.touchMouseIgnoreWait=500;let eP=0,_5=0,tP=!1;class MZ{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&AWe(n)&&this.tryStart(n)){let r=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let r=this.createEventFromMouse(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let r=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let i=n.target;this.shouldIgnoreMove||i.addEventListener("touchmove",this.handleTouchMove),i.addEventListener("touchend",this.handleTouchEnd),i.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let r=this.createEventFromTouch(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=n=>{if(this.isDragging){let r=n.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,CWe()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,i=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:i,deltaX:r-this.origPageX,deltaY:i-this.origPageY})}},this.containerEl=e,this.emitter=new A_,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),jWe()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),NWe()}tryStart(e){let n=this.querySubjectEl(e),r=e.target;return n&&(!this.handleSelector||Hs(r,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){tP=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Hs(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return eP||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(tP=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let r=0,i=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,i=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:i}}createEventFromTouch(e,n){let r=e.touches,i,a,s=0,o=0;return r&&r.length?(i=r[0].pageX,a=r[0].pageY):(i=e.pageX,a=e.pageY),n?(this.origPageX=i,this.origPageY=a):(s=i-this.origPageX,o=a-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:a,deltaX:s,deltaY:o}}}function AWe(t){return t.button===0&&!t.ctrlKey}function CWe(){eP+=1,setTimeout(()=>{eP-=1},KD.touchMouseIgnoreWait)}function jWe(){_5+=1,_5===1&&window.addEventListener("touchmove",RZ,{passive:!1})}function NWe(){_5-=1,_5||window.removeEventListener("touchmove",RZ,{passive:!1})}function RZ(t){tP&&t.preventDefault()}class EWe{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let r=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(e,n){let r=this.mirrorEl,i=this.sourceEl.getBoundingClientRect();r.style.transition="top "+n+"ms,left "+n+"ms",L0(r,{left:i.left,top:i.top}),l$e(r,()=>{r.style.transition="",e()})}cleanup(){this.mirrorEl&&(ND(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&L0(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),L0(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class LZ extends qD{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class FZ extends LZ{constructor(e,n){super(new TVe(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return kVe(this.scrollController.el)}}class kWe extends LZ{constructor(e){super(new DVe,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const Bz=typeof performance=="function"?performance.now:Date.now;class PWe{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=Bz();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let r=e-window.scrollX,i=n-window.scrollY,a=this.pointerScreenY===null?0:i-this.pointerScreenY,s=this.pointerScreenX===null?0:r-this.pointerScreenX;a<0?this.everMovedUp=!0:a>0&&(this.everMovedDown=!0),s<0?this.everMovedLeft=!0:s>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(Bz()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:r}=e,{edgeThreshold:i}=this,a=i-e.distance,s=a*a/(i*i)*this.maxVelocity*n,o=1;switch(e.name){case"left":o=-1;case"right":r.setScrollLeft(r.getScrollLeft()+s*o);break;case"top":o=-1;case"bottom":r.setScrollTop(r.getScrollTop()+s*o);break}}computeBestEdge(e,n){let{edgeThreshold:r}=this,i=null,a=this.scrollCaches||[];for(let s of a){let o=s.clientRect,l=e-o.left,u=o.right-e,d=n-o.top,f=o.bottom-n;l>=0&&u>=0&&d>=0&&f>=0&&(d<=r&&this.everMovedUp&&s.canScrollUp()&&(!i||i.distance>d)&&(i={scrollCache:s,name:"top",distance:d}),f<=r&&this.everMovedDown&&s.canScrollDown()&&(!i||i.distance>f)&&(i={scrollCache:s,name:"bottom",distance:f}),l<=r&&this.everMovedLeft&&s.canScrollLeft()&&(!i||i.distance>l)&&(i={scrollCache:s,name:"left",distance:l}),u<=r&&this.everMovedRight&&s.canScrollRight()&&(!i||i.distance>u)&&(i={scrollCache:s,name:"right",distance:u}))}return i}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new kWe(!1):new FZ(n,!1))}queryScrollEls(e){let n=[];for(let r of this.scrollQuery)typeof r=="object"?n.push(r):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(r)));return n}}class Jb extends OVe{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=i=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,c$e(document.body),d$e(document.body),i.isTouch||i.origEvent.preventDefault(),this.emitter.trigger("pointerdown",i),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(i.subjectEl,i.pageX,i.pageY),this.startDelay(i),this.minDistance||this.handleDistanceSurpassed(i)))},this.onPointerMove=i=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",i),!this.isDistanceSurpassed){let a=this.minDistance,s,{deltaX:o,deltaY:l}=i;s=o*o+l*l,s>=a*a&&this.handleDistanceSurpassed(i)}this.isDragging&&(i.origEvent.type!=="scroll"&&(this.mirror.handleMove(i.pageX,i.pageY),this.autoScroller.handleMove(i.pageX,i.pageY)),this.emitter.trigger("dragmove",i))}},this.onPointerUp=i=>{this.isInteracting&&(this.isInteracting=!1,u$e(document.body),f$e(document.body),this.emitter.trigger("pointerup",i),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(i)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new MZ(e);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),n&&(r.selector=n),this.mirror=new EWe,this.autoScroller=new PWe}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class TWe{constructor(e){this.el=e,this.origRect=WD(e),this.scrollCaches=iZ(e).map(n=>new FZ(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let r={left:e,top:n};for(let i of this.scrollCaches)if(!DWe(i.getEventTarget())&&!yVe(r,i.clientRect))return!1;return!0}}function DWe(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class j_{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:i}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(i.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):i.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new A_}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},r=n,i=e.subjectEl,a;i instanceof HTMLElement&&(a=WD(i),r=bVe(r,a));let s=this.initialHit=this.queryHitForOffset(r.left,r.top);if(s){if(this.useSubjectCenter&&a){let o=tZ(a,s.rect);o&&(r=xVe(o))}this.coordAdjust=wVe(r,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!N_(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))}prepareHits(){this.offsetTrackers=Np(this.droppableStore,e=>(e.component.prepareHits(),new TWe(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:r,offsetTrackers:i}=this,a=null;for(let s in r){let o=r[s].component,l=i[s];if(l&&l.isWithinClipping(e,n)){let u=l.computeLeft(),d=l.computeTop(),f=e-u,p=n-d,{origRect:h}=l,m=h.right-h.left,g=h.bottom-h.top;if(f>=0&&f<m&&p>=0&&p<g){let v=o.queryHit(f,p,m,g);v&&S_(v.dateProfile.activeRange,v.dateSpan.range)&&(this.disablePointCheck||l.el.contains(l.el.getRootNode().elementFromPoint(f+u-window.scrollX,p+d-window.scrollY)))&&(!a||v.layer>a.layer)&&(v.componentId=s,v.context=o.context,v.rect.left+=u,v.rect.right+=u,v.rect.top+=d,v.rect.bottom+=d,a=v)}}}return a}}function N_(t,e){return!t&&!e?!0:!!t!=!!e?!1:oVe(t.dateSpan,e.dateSpan)}function zZ(t,e){let n={};for(let r of e.pluginHooks.datePointTransforms)Object.assign(n,r(t,e));return Object.assign(n,IWe(t,e.dateEnv)),n}function IWe(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class OWe extends xv{constructor(e){super(e),this.handlePointerDown=r=>{let{dragging:i}=this,a=r.origEvent.target;i.setIgnoreMove(!this.component.isValidDateDownEl(a))},this.handleDragEnd=r=>{let{component:i}=this,{pointer:a}=this.dragging;if(!a.wasTouchScroll){let{initialHit:s,finalHit:o}=this.hitDragging;if(s&&o&&N_(s,o)){let{context:l}=i,u=Object.assign(Object.assign({},zZ(s.dateSpan,l)),{dayEl:s.dayEl,jsEvent:r.origEvent,view:l.viewApi||l.calendarApi.view});l.emitter.trigger("dateClick",u)}}},this.dragging=new Jb(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new j_(this.dragging,UD(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class MWe extends xv{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=s=>{let{component:o,dragging:l}=this,{options:u}=o.context,d=u.selectable&&o.isValidDateDownEl(s.origEvent.target);l.setIgnoreMove(!d),l.delay=s.isTouch?RWe(o):null},this.handleDragStart=s=>{this.component.context.calendarApi.unselect(s)},this.handleHitUpdate=(s,o)=>{let{context:l}=this.component,u=null,d=!1;if(s){let f=this.hitDragging.initialHit;s.componentId===f.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(f,s)||(u=LWe(f,s,l.pluginHooks.dateSelectionTransformers)),(!u||!HVe(u,s.dateProfile,l))&&(d=!0,u=null)}u?l.dispatch({type:"SELECT_DATES",selection:u}):o||l.dispatch({type:"UNSELECT_DATES"}),d?ED():kD(),o||(this.dragSelection=u)},this.handlePointerUp=s=>{this.dragSelection&&(KQ(this.dragSelection,s,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:r}=n.context,i=this.dragging=new Jb(e.el);i.touchScrollAllowed=!1,i.minDistance=r.selectMinDistance||0,i.autoScroller.isEnabled=r.dragScroll;let a=this.hitDragging=new j_(this.dragging,UD(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function RWe(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function LWe(t,e,n){let r=t.dateSpan,i=e.dateSpan,a=[r.range.start,r.range.end,i.range.start,i.range.end];a.sort(v$e);let s={};for(let o of n){let l=o(t,e);if(l===!1)return null;l&&Object.assign(s,l)}return s.range={start:a[0],end:a[3]},s.allDay=r.allDay,s}class ex extends xv{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let o=s.origEvent.target,{component:l,dragging:u}=this,{mirror:d}=u,{options:f}=l.context,p=l.context;this.subjectEl=s.subjectEl;let h=this.subjectSeg=Wg(s.subjectEl),g=(this.eventRange=h.eventRange).instance.instanceId;this.relevantEvents=zD(p.getCurrentData().eventStore,g),u.minDistance=s.isTouch?0:f.eventDragMinDistance,u.delay=s.isTouch&&g!==l.props.eventSelection?zWe(l):null,f.fixedMirrorParent?d.parentNode=f.fixedMirrorParent:d.parentNode=Hs(o,".fc"),d.revertDuration=f.dragRevertDuration;let v=l.isValidSegDownEl(o)&&!Hs(o,".fc-event-resizer");u.setIgnoreMove(!v),this.isDragging=v&&s.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=s=>{let o=this.component.context,l=this.eventRange,u=l.instance.instanceId;s.isTouch?u!==this.component.props.eventSelection&&o.dispatch({type:"SELECT_EVENT",eventInstanceId:u}):o.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(o.calendarApi.unselect(s),o.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Ci(o,l.def,l.instance),jsEvent:s.origEvent,view:o.viewApi}))},this.handleHitUpdate=(s,o)=>{if(!this.isDragging)return;let l=this.relevantEvents,u=this.hitDragging.initialHit,d=this.component.context,f=null,p=null,h=null,m=!1,g={affectedEvents:l,mutatedEvents:jc(),isEvent:!0};if(s){f=s.context;let v=f.options;d===f||v.editable&&v.droppable?(p=FWe(u,s,this.eventRange.instance.range.start,f.getCurrentData().pluginHooks.eventDragMutationMassagers),p&&(h=VD(l,f.getCurrentData().eventUiBases,p,f),g.mutatedEvents=h,lZ(g,s.dateProfile,f)||(m=!0,p=null,h=null,g.mutatedEvents=jc()))):f=null}this.displayDrag(f,g),m?ED():kD(),o||(d===f&&N_(u,s)&&(p=null),this.dragging.setMirrorNeedsRevert(!p),this.dragging.setMirrorIsVisible(!s||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=f,this.validMutation=p,this.mutatedRelevantEvents=h)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=s=>{if(this.isDragging){let o=this.component.context,l=o.viewApi,{receivingContext:u,validMutation:d}=this,f=this.eventRange.def,p=this.eventRange.instance,h=new Ci(o,f,p),m=this.relevantEvents,g=this.mutatedRelevantEvents,{finalHit:v}=this.hitDragging;if(this.clearDrag(),o.emitter.trigger("eventDragStop",{el:this.subjectEl,event:h,jsEvent:s.origEvent,view:l}),d){if(u===o){let y=new Ci(o,g.defs[f.defId],p?g.instances[p.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:g});let b={oldEvent:h,event:y,relatedEvents:Fh(g,o,p),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:m})}},S={};for(let A of o.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(S,A(d,o));o.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},b),S),{el:s.subjectEl,delta:d.datesDelta,jsEvent:s.origEvent,view:l})),o.emitter.trigger("eventChange",b)}else if(u){let y={event:h,relatedEvents:Fh(m,o,p),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:m})}};o.emitter.trigger("eventLeave",Object.assign(Object.assign({},y),{draggedEl:s.subjectEl,view:l})),o.dispatch({type:"REMOVE_EVENTS",eventStore:m}),o.emitter.trigger("eventRemove",y);let b=g.defs[f.defId],S=g.instances[p.instanceId],A=new Ci(u,b,S);u.dispatch({type:"MERGE_EVENTS",eventStore:g});let C={event:A,relatedEvents:Fh(g,u,S),revert(){u.dispatch({type:"REMOVE_EVENTS",eventStore:g})}};u.emitter.trigger("eventAdd",C),s.isTouch&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:p.instanceId}),u.emitter.trigger("drop",Object.assign(Object.assign({},zZ(v.dateSpan,u)),{draggedEl:s.subjectEl,jsEvent:s.origEvent,view:v.context.viewApi})),u.emitter.trigger("eventReceive",Object.assign(Object.assign({},C),{draggedEl:s.subjectEl,view:v.context.viewApi}))}}else o.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:r}=n.context,i=this.dragging=new Jb(e.el);i.pointer.selector=ex.SELECTOR,i.touchScrollAllowed=!1,i.autoScroller.isEnabled=r.dragScroll;let a=this.hitDragging=new j_(this.dragging,Qk);a.useSubjectCenter=e.useEventCenter,a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("pointerup",this.handlePointerUp),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let r=this.component.context,i=this.receivingContext;i&&i!==e&&(i===r?i.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:jc(),isEvent:!0}}):i.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}ex.SELECTOR=".fc-event-draggable, .fc-event-resizable";function FWe(t,e,n,r){let i=t.dateSpan,a=e.dateSpan,s=i.range.start,o=a.range.start,l={};i.allDay!==a.allDay&&(l.allDay=a.allDay,l.hasEnd=e.context.options.allDayMaintainDuration,a.allDay?s=Ai(n):s=n);let u=Sm(s,o,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);u.milliseconds&&(l.allDay=!1);let d={datesDelta:u,standardProps:l};for(let f of r)f(d,t,e);return d}function zWe(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class $We extends xv{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let{component:s}=this,o=this.querySegEl(a),l=Wg(o),u=this.eventRange=l.eventRange;this.dragging.minDistance=s.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(a.origEvent.target)||a.isTouch&&this.component.props.eventSelection!==u.instance.instanceId)},this.handleDragStart=a=>{let{context:s}=this.component,o=this.eventRange;this.relevantEvents=zD(s.getCurrentData().eventStore,this.eventRange.instance.instanceId);let l=this.querySegEl(a);this.draggingSegEl=l,this.draggingSeg=Wg(l),s.calendarApi.unselect(),s.emitter.trigger("eventResizeStart",{el:l,event:new Ci(s,o.def,o.instance),jsEvent:a.origEvent,view:s.viewApi})},this.handleHitUpdate=(a,s,o)=>{let{context:l}=this.component,u=this.relevantEvents,d=this.hitDragging.initialHit,f=this.eventRange.instance,p=null,h=null,m=!1,g={affectedEvents:u,mutatedEvents:jc(),isEvent:!0};a&&(a.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,a)||(p=BWe(d,a,o.subjectEl.classList.contains("fc-event-resizer-start"),f.range))),p&&(h=VD(u,l.getCurrentData().eventUiBases,p,l),g.mutatedEvents=h,lZ(g,a.dateProfile,l)||(m=!0,p=null,h=null,g.mutatedEvents=null)),h?l.dispatch({type:"SET_EVENT_RESIZE",state:g}):l.dispatch({type:"UNSET_EVENT_RESIZE"}),m?ED():kD(),s||(p&&N_(d,a)&&(p=null),this.validMutation=p,this.mutatedRelevantEvents=h)},this.handleDragEnd=a=>{let{context:s}=this.component,o=this.eventRange.def,l=this.eventRange.instance,u=new Ci(s,o,l),d=this.relevantEvents,f=this.mutatedRelevantEvents;if(s.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:u,jsEvent:a.origEvent,view:s.viewApi}),this.validMutation){let p=new Ci(s,f.defs[o.defId],l?f.instances[l.instanceId]:null);s.dispatch({type:"MERGE_EVENTS",eventStore:f});let h={oldEvent:u,event:p,relatedEvents:Fh(f,s,l),revert(){s.dispatch({type:"MERGE_EVENTS",eventStore:d})}};s.emitter.trigger("eventResize",Object.assign(Object.assign({},h),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Pr(0),endDelta:this.validMutation.endDelta||Pr(0),jsEvent:a.origEvent,view:s.viewApi})),s.emitter.trigger("eventChange",h)}else s.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,r=this.dragging=new Jb(e.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=n.context.options.dragScroll;let i=this.hitDragging=new j_(this.dragging,UD(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Hs(e.subjectEl,".fc-event")}}function BWe(t,e,n,r){let i=t.context.dateEnv,a=t.dateSpan.range.start,s=e.dateSpan.range.start,o=Sm(a,s,i,t.largeUnit);if(n){if(i.add(r.start,o)<r.end)return{startDelta:o}}else if(i.add(r.end,o)>r.start)return{endDelta:o};return null}class VWe{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let i=this.context.options.unselectCancel,a=jQ(r.origEvent);this.matchesCancel=!!Hs(a,i),this.matchesEvent=!!Hs(a,ex.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:i}=this,{documentPointer:a}=this,s=i.getCurrentData();if(!a.wasTouchScroll){if(s.dateSelection&&!this.isRecentPointerDateSelect){let o=i.options.unselectAuto;o&&(!o||!this.matchesCancel)&&i.calendarApi.unselect(r)}s.eventSelection&&!this.matchesEvent&&i.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new MZ(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const UWe={fixedMirrorParent:Ze},HWe={dateClick:Ze,eventDragStart:Ze,eventDragStop:Ze,eventDrop:Ze,eventResizeStart:Ze,eventResizeStop:Ze,eventResize:Ze,drop:Ze,eventReceive:Ze,eventLeave:Ze};KD.dataAttrPrefix="";var WWe=zf({name:"@fullcalendar/interaction",componentInteractions:[OWe,MWe,ex,$We],calendarInteractions:[VWe],elementDraggingImpl:Jb,optionRefiners:UWe,listenerRefiners:HWe});const qWe=(t,e,n)=>{const r=(n-1)*7+1;return new Date(Date.UTC(t,e-1,r))},KWe=()=>{const{animals:t,healthPlans:e,planActivities:n,healthEvents:r,parturitions:i,appConfig:a}=Xt(),{forecastBySeason:s}=SD(),o=I.useMemo(()=>{const u=new Date;u.setUTCHours(0,0,0,0);const d=u.getUTCFullYear(),f=new Date(u.getTime()+90*24*60*60*1e3),p=[],h=t.filter(m=>m.status==="Activo"&&!m.isReference);for(const m of e){const g=h.filter(y=>{var S,A;const b=Cc(y.birthDate);if(b<0)return!1;if(m.targetGroup==="Maternidad")return b<=120;if(m.targetGroup==="Adultos"){if(b<=120)return!1;const C=m.adultsSubgroup&&m.adultsSubgroup.length>0,T=m.targetLots&&m.targetLots.length>0;if(!C&&!T)return!0;const j=Lf(y,i),E=C&&((S=m.adultsSubgroup)==null?void 0:S.includes(j)),k=T&&((A=m.targetLots)==null?void 0:A.includes(y.location));if(C&&T)return E||k;if(C)return E;if(T)return k}return!1}),v=n.filter(y=>y.healthPlanId===m.id);for(const y of g)for(const b of v){const S=(A,C)=>{if(!A||!C)return;if(A.setUTCHours(0,0,0,0),!r.some(j=>j.animalId!==y.id||j.activityId!==b.id?!1:b.trigger.type==="age"?new Date(j.date+"T00:00:00Z").getTime()===A.getTime():new Date(j.date+"T00:00:00Z").getUTCFullYear()===A.getUTCFullYear())&&A<=f){let j="Próxima";const E=Math.ceil((A.getTime()-u.getTime())/864e5);E<0&&Math.abs(E)>a.diasAlertaAtraso?j="Atrasada":E===0&&(j="Para Hoy"),p.push({key:C,animal:y,plan:m,activity:b,dueDate:A,status:j})}};if(b.trigger.type==="age"&&b.trigger.days)for(const A of b.trigger.days){const C=new Date(y.birthDate+"T00:00:00Z");C.setUTCDate(C.getUTCDate()+A),S(C,`${y.id}-${b.id}-${A}`)}else if(b.trigger.type==="fixed_date_period"&&b.trigger.month&&b.trigger.week){const A=qWe(d,b.trigger.month,b.trigger.week),C=`${y.id}-${b.id}-${d}`;S(A,C)}else if(b.trigger.type==="birthing_season_event"&&b.trigger.offsetDays!==void 0){const A=s.find(C=>C.events.some(T=>T.animal.id===y.id));if(A&&A.projectedStartDate){const C=new Date(A.projectedStartDate);C.setUTCDate(C.getUTCDate()+b.trigger.offsetDays);const T=C,j=`${y.id}-${b.id}-${A.seasonId}`;S(T,j)}}}}return p.sort((m,g)=>m.dueDate.getTime()-g.dueDate.getTime())},[t,e,n,r,i,s,a.diasAlertaAtraso]);return{...I.useMemo(()=>({overdue:o.filter(u=>u.status==="Atrasada"),today:o.filter(u=>u.status==="Para Hoy"),upcoming:o.filter(u=>u.status==="Próxima")}),[o]),allTasks:o}},GWe=({task:t,onSave:e,onCancel:n})=>{const{addHealthEvent:r,products:i,bodyWeighings:a,appConfig:s}=Xt(),[o,l]=I.useState(new Date().toISOString().split("T")[0]),[u,d]=I.useState(""),[f,p]=I.useState(null),[h,m]=I.useState(!1),{animal:g,activity:v}=t,y=g.name?String(g.name).toUpperCase().trim():"",b=I.useMemo(()=>i.find(j=>j.id===v.productId),[i,v.productId]),S=I.useMemo(()=>a.filter(j=>j.animalId===g.id).sort((j,E)=>new Date(E.date).getTime()-new Date(j.date).getTime())[0],[a,g.id]),{doseApplied:A,calculatedCost:C}=I.useMemo(()=>{if(!b||!S)return{doseApplied:void 0,calculatedCost:void 0};let j=0;if(b.dosageType==="fixed"&&b.dosageFixed?j=b.dosageFixed:b.dosageType==="per_kg"&&b.dosagePerKg_ml&&b.dosagePerKg_kg&&(j=S.kg/b.dosagePerKg_kg*b.dosagePerKg_ml),j===0)return{doseApplied:void 0,calculatedCost:void 0};let E=0;const k=b.presentationUnit==="L"?(b.presentationValue||0)*1e3:b.presentationValue||0;if(b.price&&k>0){const O=b.price/k;E=j*O}return{doseApplied:parseFloat(j.toFixed(2)),calculatedCost:parseFloat(E.toFixed(2))}},[b,S]),T=async j=>{j.preventDefault(),m(!0),p(null);const E=(b==null?void 0:b.withdrawalDaysMilk)??s.diasRetiroLecheDefault,k=(b==null?void 0:b.withdrawalDaysMeat)??s.diasRetiroCarneDefault;try{await r({animalId:g.id,lotName:g.location,date:o,activityId:v.id,type:v.name,productUsed:b==null?void 0:b.id,doseApplied:A,unit:"ml",calculatedCost:C,notes:u,executedBy:"self",diasRetiroLeche:E,diasRetiroCarne:k}),e()}catch(O){console.error(O),p("No se pudo registrar el evento. Inténtelo de nuevo.")}finally{m(!1)}};return c.jsxs("form",{onSubmit:T,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-zinc-400 text-sm",children:"Animal:"}),c.jsx("p",{className:"font-mono font-semibold text-lg text-white truncate",children:g.id.toUpperCase()}),y&&c.jsx("p",{className:"text-sm font-normal text-zinc-300 truncate",children:y})]}),c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-semibold text-zinc-400 text-sm",children:"Actividad:"})," ",c.jsx("span",{className:"font-bold text-base text-white",children:v.name})]}),b&&c.jsxs("p",{children:[c.jsx("span",{className:"font-semibold text-zinc-400 text-sm",children:"Producto:"})," ",c.jsx("span",{className:"font-bold text-base text-white",children:b.name})]})]}),c.jsxs("div",{className:"p-4 bg-black/20 rounded-xl space-y-2",children:[c.jsx("h3",{className:"font-semibold text-white",children:"Detalles del Registro"}),S?c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-zinc-300",children:["Basado en el último peso registrado de ",c.jsxs("span",{className:"font-bold text-white",children:[S.kg," kg"]}),"."]}),A!==void 0&&c.jsxs("p",{className:"text-sm text-zinc-300",children:["Dosis Calculada: ",c.jsxs("span",{className:"font-bold text-teal-400",children:[A," ml"]})]}),C!==void 0&&c.jsxs("p",{className:"text-sm text-zinc-300",children:["Costo Estimado: ",c.jsxs("span",{className:"font-bold text-amber-400",children:["$",C.toFixed(2)]})]})]}):c.jsx("p",{className:"text-sm text-amber-400",children:"Advertencia: No se encontró un peso reciente para este animal. La dosis y el costo no se pueden calcular automáticamente."})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),c.jsx("input",{id:"date",type:"date",value:o,onChange:j=>l(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Notas (Opcional)"}),c.jsx("textarea",{id:"notes",value:u,onChange:j=>d(j.target.value),placeholder:"Anotaciones sobre la aplicación, etc.",rows:3,className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),f&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(mr,{size:18}),c.jsx("span",{children:f})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsxs("button",{type:"submit",disabled:h,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[h&&c.jsx(kc,{size:18,className:"animate-spin"}),h?"Guardando...":"Confirmar Registro"]})]})]})},YWe=({animals:t,selectedAnimalIds:e,onChange:n})=>{const r=i=>{const a=Array.from(i.target.selectedOptions,s=>s.value);n(a)};return c.jsx("select",{multiple:!0,value:e,onChange:r,className:"w-full h-40 bg-zinc-800 p-3 rounded-xl font-mono text-white",children:t.map(i=>{const a=i.name?String(i.name).toUpperCase().trim():"";return c.jsxs("option",{value:i.id,className:"py-1",children:[i.id.toUpperCase()," ",a&&` - ${a}`]},i.id)})})},XWe=({onSaveSuccess:t,onCancel:e})=>{const{addHealthEvent:n,products:r,animals:i,bodyWeighings:a}=Xt(),[s,o]=I.useState([]),[l,u]=I.useState(new Date().toISOString().split("T")[0]),[d,f]=I.useState(""),[p,h]=I.useState(void 0),[m,g]=I.useState(""),[v,y]=I.useState(null),[b,S]=I.useState(!1),A=I.useMemo(()=>r.find(j=>j.id===p),[r,p]),C=I.useMemo(()=>i.filter(j=>j.status==="Activo"&&!j.isReference).sort((j,E)=>j.id.localeCompare(E.id)),[i]),T=async j=>{if(j.preventDefault(),s.length===0||!d.trim()){y("Debe seleccionar al menos un animal y especificar el tipo de actividad.");return}S(!0),y(null);try{const E=s.map(k=>{const O=i.find(V=>V.id===k);if(!O)return null;const D=a.filter(V=>V.animalId===k).sort((V,Q)=>new Date(Q.date).getTime()-new Date(V.date).getTime())[0];let M,L;if(A&&D){let V=0;if(A.dosageType==="fixed"&&A.dosageFixed?V=A.dosageFixed:A.dosageType==="per_kg"&&A.dosagePerKg_ml&&A.dosagePerKg_kg&&(V=D.kg/A.dosagePerKg_kg*A.dosagePerKg_ml),V>0){M=parseFloat(V.toFixed(2));const Q=A.presentationUnit==="L"?(A.presentationValue||0)*1e3:A.presentationValue||0;if(A.price&&Q>0){const Y=A.price/Q;L=parseFloat((V*Y).toFixed(2))}}}return{animalId:k,lotName:O.location,date:l,type:d,productUsed:p,doseApplied:M,unit:"ml",calculatedCost:L,notes:m,executedBy:"self"}});for(const k of E)k&&await n(k);t()}catch(E){console.error(E),y("No se pudo registrar el evento. Inténtelo de nuevo.")}finally{S(!1)}};return c.jsxs("form",{onSubmit:T,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Animal(es) (mantén Ctrl/Cmd para seleccionar varios)"}),c.jsx(YWe,{animals:C,selectedAnimalIds:s,onChange:o}),c.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:[s.length," animal(es) seleccionado(s)."]})]}),c.jsx("input",{type:"text",value:d,onChange:j=>f(j.target.value),placeholder:"Tipo de Actividad (Ej: Tratamiento por Neumonía)",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),c.jsxs("select",{value:p||"",onChange:j=>h(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[c.jsx("option",{value:"",children:"Seleccionar Producto (Opcional)..."}),r.map(j=>c.jsx("option",{value:j.id,children:j.name},j.id))]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"unplanned-date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),c.jsx("input",{id:"unplanned-date",type:"date",value:l,onChange:j=>u(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),c.jsx("textarea",{value:m,onChange:j=>g(j.target.value),placeholder:"Notas (Opcional)",rows:3,className:"w-full bg-zinc-800 p-3 rounded-xl"}),v&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(mr,{size:18}),c.jsx("span",{children:v})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsxs("button",{type:"submit",disabled:b,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[b&&c.jsx(kc,{size:18,className:"animate-spin"}),b?"Guardando...":"Registrar Evento"]})]})]})},QWe=t=>{const{task:e}=t.event.extendedProps;if(!e)return c.jsx("div",{children:"Evento inválido"});const{animal:n,activity:r}=e,i=n.name?String(n.name).toUpperCase().trim():"";return c.jsxs("div",{className:"p-1 overflow-hidden w-full",style:{whiteSpace:"normal"},children:[c.jsx("p",{className:"font-mono font-semibold text-xs text-white truncate",children:n.id.toUpperCase()}),i&&c.jsx("p",{className:"text-[10px] font-normal text-zinc-300 truncate",children:i}),c.jsx("p",{className:"text-[10px] text-zinc-400 truncate",children:r.name})]})};function Vz(){const{allTasks:t}=KWe(),[e,n]=I.useState(null),[r,i]=I.useState(!1),a=I.useRef(null),[s,o]=I.useState("dayGridMonth"),[l,u]=I.useState(""),d=I.useMemo(()=>t.map(g=>({id:g.key,title:`${g.animal.id} - ${g.activity.name}`,start:g.dueDate,allDay:!0,extendedProps:{task:g},backgroundColor:g.status==="Atrasada"?"#FF3B30":g.status==="Para Hoy"?"#34C759":"#007AFF",borderColor:g.status==="Atrasada"?"#FF3B30":g.status==="Para Hoy"?"#34C759":"#007AFF"})),[t]),f=g=>{n(g.event.extendedProps.task)},p=()=>{n(null),i(!1)},h=g=>{var v;(v=a.current)==null||v.getApi().changeView(g),o(g)},m=g=>{u(g.view.title)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full h-full max-w-4xl mx-auto p-4 flex flex-col",children:[c.jsxs("header",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold tracking-tight text-white leading-tight",children:"Calendario Sanitario"}),c.jsx("p",{className:"text-base sm:text-lg text-zinc-400",children:"Vista completa de actividades"})]}),c.jsxs("button",{onClick:()=>i(!0),className:"flex-shrink-0 flex items-center justify-center gap-2 bg-brand-blue text-white font-semibold py-2 px-4 rounded-lg transition-colors text-sm w-full sm:w-auto",children:[c.jsx(qi,{size:16})," Registrar Actividad"]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-4 gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>{var g;return(g=a.current)==null?void 0:g.getApi().prev()},className:"p-2 bg-zinc-700 rounded-md hover:bg-zinc-600",children:c.jsx(ji,{size:16})}),c.jsx("button",{onClick:()=>{var g;return(g=a.current)==null?void 0:g.getApi().next()},className:"p-2 bg-zinc-700 rounded-md hover:bg-zinc-600",children:c.jsx(Wi,{size:16})}),c.jsx("h2",{className:"text-xl font-semibold text-white capitalize w-40 text-center",children:l})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>{var g;return(g=a.current)==null?void 0:g.getApi().today()},className:"px-4 py-1.5 bg-zinc-700 rounded-md hover:bg-zinc-600 text-sm font-semibold",children:"Hoy"}),c.jsxs("div",{className:"relative flex justify-between rounded-lg bg-zinc-700 p-1 text-sm font-semibold",children:[c.jsx("button",{onClick:()=>h("dayGridMonth"),className:"relative z-10 w-20 py-1 rounded-md",children:"Mes"}),c.jsx("button",{onClick:()=>h("dayGridWeek"),className:"relative z-10 w-20 py-1 rounded-md",children:"Semana"}),c.jsx(Ui.div,{layoutId:"calendar-view-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-20 rounded-md bg-zinc-500 ${s==="dayGridWeek"?"left-[calc(50%_-_2px)]":"left-1"}`})]})]})]}),c.jsx("div",{className:"flex-grow",children:c.jsx(XD,{ref:a,plugins:[IZ,WWe],initialView:s,locale:OZ,events:d,eventClick:f,height:"100%",headerToolbar:!1,datesSet:m,eventContent:QWe})})]}),e&&c.jsx(cn,{isOpen:!!e,onClose:()=>n(null),title:`Registrar: ${e.activity.name}`,children:c.jsx(GWe,{task:e,onSave:p,onCancel:()=>n(null)})}),c.jsx(cn,{isOpen:r,onClose:()=>i(!1),title:"Registrar Actividad No Planificada",children:c.jsx(XWe,{onSaveSuccess:p,onCancel:()=>i(!1)})})]})}const XC=({legend:t,children:e})=>c.jsxs("fieldset",{className:"bg-black/20 rounded-2xl p-4 border border-zinc-700 space-y-4",children:[c.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-400",children:t}),e]}),ZWe=["Coxidioestático","Desparasitación","Vacuna Clostridial"],JWe=["Desparasitación","Vacuna Leptospirosis","Vacuna Clostridial","Vacuna Rabia"],eqe=["Cura de ombligo","Revisión de Mucosas (FAMACHA)","Descorne","Castración"],tqe=["Revisión de Mucosas (FAMACHA)","Recorte de Pezuñas","Toma de muestra de Hematología y Coprología"],nqe=[1,8,15,21,30,45,60,90,120],rqe=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],iqe=[{value:1,label:"1ra Semana"},{value:2,label:"2da Semana"},{value:3,label:"3ra Semana"},{value:4,label:"4ta Semana"}],aqe=({healthPlanId:t,targetGroup:e,onSave:n,onCancel:r,existingActivity:i})=>{const{products:a,addProduct:s}=Xt(),[o,l]=I.useState("Tratamiento"),[u,d]=I.useState(""),[f,p]=I.useState(void 0),[h,m]=I.useState(void 0),[g,v]=I.useState(e==="Maternidad"?"age":"fixed_date_period"),[y,b]=I.useState(""),[S,A]=I.useState("1"),[C,T]=I.useState("1"),[j,E]=I.useState(""),[k,O]=I.useState(!1),[D,M]=I.useState(null),L=e==="Maternidad"?o==="Tratamiento"?ZWe:eqe:o==="Tratamiento"?JWe:tqe;I.useEffect(()=>{var Y;i&&(l(i.category),d(i.name),p(i.productId),m(i.complementaryProductId),v(i.trigger.type),i.trigger.type==="age"&&b(String(((Y=i.trigger.days)==null?void 0:Y[0])||"")),i.trigger.type==="fixed_date_period"&&(A(String(i.trigger.month||"1")),T(String(i.trigger.week||"1"))),i.trigger.type==="birthing_season_event"&&E(String(i.trigger.offsetDays||"")))},[i]);const V=async Y=>{await s(Y),O(!1)},Q=async Y=>{if(Y.preventDefault(),M(null),!u.trim()){M("El nombre es obligatorio.");return}if(o==="Tratamiento"&&!f){M("Debe seleccionar un producto principal.");return}let J;if(e==="Maternidad"){const ee=parseInt(y,10);if(isNaN(ee)||ee<0){M("Los días de nacido deben ser un número válido.");return}J={type:"age",days:[ee]}}else if(g==="fixed_date_period")J={type:"fixed_date_period",month:parseInt(S,10),week:parseInt(C,10)};else{const ee=parseInt(j,10);if(isNaN(ee)){M("Debe introducir un número válido de días.");return}J={type:"birthing_season_event",offsetDays:ee}}await n({healthPlanId:t,category:o,name:u,productId:f,complementaryProductId:h,trigger:J})};return c.jsxs(c.Fragment,{children:[c.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[c.jsxs(XC,{legend:"Paso 1: Define la Actividad",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("button",{type:"button",onClick:()=>l("Tratamiento"),className:`p-4 rounded-2xl border-2 transition-colors flex flex-col items-center gap-2 ${o==="Tratamiento"?"bg-blue-500/20 border-blue-500":"bg-zinc-800/50 border-zinc-700 hover:border-zinc-500"}`,children:[c.jsx(pp,{className:"w-8 h-8 text-blue-400"}),c.jsx("span",{className:"font-semibold text-white",children:"Tratamiento"})]}),c.jsxs("button",{type:"button",onClick:()=>l("Control"),className:`p-4 rounded-2xl border-2 transition-colors flex flex-col items-center gap-2 ${o==="Control"?"bg-purple-500/20 border-purple-500":"bg-zinc-800/50 border-zinc-700 hover:border-zinc-500"}`,children:[c.jsx(LH,{className:"w-8 h-8 text-purple-400"}),c.jsx("span",{className:"font-semibold text-white",children:"Control"})]})]}),c.jsx("input",{list:"activity-names",value:u,onChange:Y=>d(Y.target.value),placeholder:`Nombre del ${o}...`,className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),c.jsx("datalist",{id:"activity-names",children:L.map(Y=>c.jsx("option",{value:Y},Y))})]}),o==="Tratamiento"&&c.jsxs(XC,{legend:"Paso 2: Selecciona los Productos",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:f||"",onChange:Y=>p(Y.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:[c.jsx("option",{value:"",children:"Producto Principal..."}),a.map(Y=>c.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),c.jsx("button",{type:"button",onClick:()=>O(!0),className:"flex-shrink-0 p-3 bg-brand-orange text-white rounded-xl",children:c.jsx(ol,{size:20})})]}),c.jsxs("select",{value:h||"",onChange:Y=>m(Y.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[c.jsx("option",{value:"",children:"Producto Complementario (Opcional)..."}),a.map(Y=>c.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),c.jsx(XC,{legend:`Paso ${o==="Tratamiento"?"3":"2"}: ¿Cuándo se ejecuta?`,children:e==="Maternidad"?c.jsxs("div",{className:"animate-fade-in",children:[c.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"A los Días de Nacido"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:nqe.map(Y=>c.jsxs("button",{type:"button",onClick:()=>b(String(Y)),className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors ${y===String(Y)?"bg-teal-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:[Y," días"]},Y))}),c.jsx("div",{className:"flex items-center gap-2 mt-4",children:c.jsx("input",{type:"number",value:y,onChange:Y=>b(Y.target.value),placeholder:"O escribe los días...",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("select",{value:g,onChange:Y=>v(Y.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:[c.jsx("option",{value:"fixed_date_period",children:"Por Fecha Fija Anual"}),c.jsx("option",{value:"birthing_season_event",children:"Relativo a Temporada de Partos"})]}),g==="fixed_date_period"&&c.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-fade-in",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"triggerMonth",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Mes"}),c.jsx("select",{id:"triggerMonth",value:S,onChange:Y=>A(Y.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:rqe.map(Y=>c.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"triggerWeek",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Semana"}),c.jsx("select",{id:"triggerWeek",value:C,onChange:Y=>T(Y.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:iqe.map(Y=>c.jsx("option",{value:Y.value,children:Y.label},Y.value))})]})]}),g==="birthing_season_event"&&c.jsxs("div",{className:"animate-fade-in",children:[c.jsx("label",{htmlFor:"triggerOffsetDays",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Días antes (-) / después (+) del inicio de la temporada"}),c.jsx("input",{id:"triggerOffsetDays",type:"number",value:j,onChange:Y=>E(Y.target.value),placeholder:"Ej: -30 (para 30 días antes)",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})]})]})}),D&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(mr,{size:18})," ",c.jsx("span",{children:D})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:i?"Actualizar Actividad":"Añadir al Plan"})]})]}),c.jsx(cn,{isOpen:k,onClose:()=>O(!1),title:"Crear Nuevo Producto",children:c.jsx(AD,{onSave:V,onCancel:()=>O(!1)})})]})},sqe=({activity:t,onEdit:e,onDelete:n})=>{const{products:r}=Xt(),i=r.find(d=>d.id===t.productId),a=r.find(d=>d.id===t.complementaryProductId),s=vp(),o=I.useRef(!1),l=(d,f)=>{const p=f.offset.x,h=f.velocity.x;p<-160/2||h<-500?s.start({x:-160}):s.start({x:0}),setTimeout(()=>{o.current=!1},100)},u=()=>{var f;const{trigger:d}=t;switch(d.type){case"age":return`Días: ${((f=d.days)==null?void 0:f.join(", "))||"N/A"}`;case"fixed_date_period":const p=new Date(2024,d.month-1,1).toLocaleString("es-VE",{month:"long"});return`${d.week}a semana de ${p}`;case"birthing_season_event":const h=d.offsetDays>=0?"días después":"días antes";return`${Math.abs(d.offsetDays)} ${h} del inicio de la temporada de partos`;default:return"Tiempo no especificado"}};return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-black/20 border border-zinc-700",children:[c.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[c.jsxs("button",{onClick:e,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(kf,{size:20}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),c.jsxs("button",{onClick:n,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[c.jsx(Yl,{size:20}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),c.jsxs(Ui.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{o.current=!0},onDragEnd:l,animate:s,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-grab bg-ios-modal-bg/50 p-4",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),c.jsx("p",{className:`text-sm font-semibold ${t.category==="Tratamiento"?"text-blue-400":"text-purple-400"}`,children:t.category}),i&&c.jsxs("p",{className:"text-xs text-zinc-400 mt-1",children:["Ppal: ",i.name]}),a&&c.jsxs("p",{className:"text-xs text-zinc-400",children:["Comp: ",a.name]})]}),t.category==="Tratamiento"?c.jsx(pp,{className:"text-blue-400"}):c.jsx(LH,{className:"text-purple-400"})]}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700 flex items-center text-zinc-300",children:[c.jsx(oo,{size:16,className:"mr-2"}),c.jsx("span",{className:"text-sm font-semibold",children:u()})]})]})]})};function oqe({planId:t,onBack:e}){const{healthPlans:n,planActivities:r,addPlanActivity:i,updatePlanActivity:a,deletePlanActivity:s}=Xt(),[o,l]=I.useState(!1),[u,d]=I.useState(void 0),[f,p]=I.useState(null),h=I.useMemo(()=>n.find(S=>S.id===t),[n,t]),m=I.useMemo(()=>h?r.filter(S=>S.healthPlanId===t).sort((S,A)=>{var C,T;return(((C=S.trigger.days)==null?void 0:C[0])||0)-(((T=A.trigger.days)==null?void 0:T[0])||0)}):[],[r,t,h]),g=S=>{d(S),l(!0)},v=()=>{l(!1),d(void 0)},y=async S=>{u!=null&&u.id?await a(u.id,S):await i({...S,healthPlanId:t}),v()},b=async()=>{f!=null&&f.id&&await s(f.id),p(null)};return h?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in px-4",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:h.name}),c.jsx("p",{className:"text-lg text-zinc-400",children:h.targetGroup})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Actividades del Plan"}),c.jsxs("button",{onClick:()=>g(),className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[c.jsx(qi,{size:16})," Añadir Actividad"]})]}),m.length>0?c.jsx("div",{className:"space-y-3",children:m.map(S=>c.jsx(sqe,{activity:S,onEdit:()=>g(S),onDelete:()=>p(S)},S.id))}):c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:[c.jsx("p",{className:"text-zinc-500 font-semibold",children:"Este plan aún no tiene actividades."}),c.jsx("p",{className:"text-zinc-500 text-sm",children:"Añade tratamientos o controles para empezar."})]})]})]}),c.jsx(cn,{isOpen:o,onClose:v,title:u?"Editar Actividad":"Añadir Actividad al Plan",children:c.jsx(aqe,{healthPlanId:h.id,targetGroup:h.targetGroup,onSave:y,onCancel:v,existingActivity:u})}),c.jsx(vv,{isOpen:!!f,onClose:()=>p(null),onConfirm:b,title:`Eliminar Actividad "${f==null?void 0:f.name}"`,message:"¿Estás seguro de que quieres eliminar esta actividad del plan? Esta acción no se puede deshacer."})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Plan no encontrado."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-amber",children:"Volver al Planificador"})]})}const lqe=()=>{const{healthEvents:t,products:e,animals:n}=Xt();return I.useMemo(()=>{const i=new Date;i.setDate(i.getDate()-30),i.setHours(0,0,0,0);const s=t.filter(v=>new Date(v.date)>=i).reduce((v,y)=>v+(y.calculatedCost||0),0),o=n.filter(v=>v.status==="Activo").length,l=o>0?s/o:0,u=[],d={},f=new Date;f.setMonth(f.getMonth()-6),t.filter(v=>new Date(v.date)>=f).forEach(v=>{const y=v.date.substring(0,7);d[y]||(d[y]=0),d[y]+=v.calculatedCost||0}),Object.keys(d).sort().forEach(v=>{u.push({name:v,total:parseFloat(d[v].toFixed(2))})});const p={};t.forEach(v=>{const y=v.type||"Sin Categoría";p[y]||(p[y]=0),p[y]+=v.calculatedCost||0});const h=Object.keys(p).map(v=>({name:v,total:parseFloat(p[v].toFixed(2))})).sort((v,y)=>y.total-v.total),m={};t.forEach(v=>{m[v.animalId]||(m[v.animalId]=0),m[v.animalId]+=v.calculatedCost||0});const g=Object.keys(m).map(v=>({animalId:v,total:m[v]})).sort((v,y)=>y.total-v.total).slice(0,5);return{totalCostLast30Days:s,avgCostPerAnimal:l,monthlyCosts:u,costsByCategory:h,topCostAnimals:g}},[t,e,n])},Uz=({title:t,value:e,unit:n,icon:r})=>c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(r,{size:14}),c.jsx("span",{children:t})]}),c.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[e," ",c.jsx("span",{className:"text-xl text-zinc-400",children:n})]})]}),Hz=["#34C759","#FF9500","#007AFF","#AF52DE","#FF3B30","#5E5CE6","#5AC8FA","#FFCC00"];function cqe(){const{totalCostLast30Days:t,avgCostPerAnimal:e,monthlyCosts:n,costsByCategory:r,topCostAnimals:i}=lqe(),a=s=>new Date(s+"-02T00:00:00Z").toLocaleString("es-VE",{month:"short",year:"2-digit"});return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[" ",c.jsxs("header",{className:"text-center pt-4",children:[" ",c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de Costos"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Módulo StockCare"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(Uz,{title:"Costo (Últimos 30 días)",value:`$${t.toFixed(2)}`,icon:pl}),c.jsx(Uz,{title:"Costo Prom./Animal (30d)",value:`$${e.toFixed(2)}`,icon:ba})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[c.jsx(Pb,{size:20})," Costo Mensual (Últimos 6m)"]}),c.jsx("div",{className:"w-full h-56",children:c.jsx(ca,{children:c.jsxs(gl,{data:n,margin:{top:5,right:10,left:-20,bottom:5},children:[c.jsx(Di,{dataKey:"name",tickFormatter:a,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Ki,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},unit:"$"}),c.jsx(Or,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"},formatter:s=>`$${s.toFixed(2)}`}),c.jsx($a,{dataKey:"total",name:"Costo Total",fill:"#2dd4bf",radius:[4,4,0,0]})]})})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[c.jsx(lT,{size:20})," Costos por Categoría"]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(ca,{children:c.jsxs(Fk,{children:[c.jsx(Tc,{data:r,dataKey:"total",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,fill:"#8884d8",children:r.map((s,o)=>c.jsx(Wl,{fill:Hz[o%Hz.length]},`cell-${o}`))}),c.jsx(Or,{contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"},formatter:s=>`$${s.toFixed(2)}`}),c.jsx(Ac,{iconSize:10,wrapperStyle:{fontSize:"12px",color:"#a1a1aa"}})]})})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top 5 Animales (Costo Total)"}),c.jsx("div",{className:"space-y-2",children:i.length>0?i.map((s,o)=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-black/20 p-2 rounded-md",children:[c.jsxs("span",{className:"font-mono font-semibold text-base text-white",children:[o+1,". ",s.animalId]}),c.jsxs("span",{className:"font-bold text-teal-300",children:["$",s.total.toFixed(2)]})]},s.animalId)):c.jsx("p",{className:"text-sm text-zinc-500 text-center pt-8",children:"No hay datos suficientes."})})]})]})]})}function uqe({onSwitchModule:t}){const{syncStatus:e}=Xt(),[n,r]=I.useState({name:"calendario"}),[i,a]=I.useState([]),s=[{id:"calendario",label:"Calendario",icon:bce},{id:"planes",label:"Planes",icon:tT},{id:"inventario",label:"Inventario",icon:pp},{id:"costos",label:"Costos",icon:pl}],o=f=>{a(p=>[...p,n]),r(f)},l=()=>{const f=i.pop();f?(a([...i]),r(f)):t("rebano")},u=f=>{a([]),r({name:f})},d=()=>{switch(n.name){case"calendario":return c.jsx(Vz,{});case"planes":return c.jsx(_We,{navigateTo:o});case"inventario":return c.jsx(T9e,{});case"costos":return c.jsx(cqe,{});case"plan-detail":return c.jsx(oqe,{planId:n.planId,onBack:l});default:return c.jsx(Vz,{})}};return c.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col bg-brand-dark",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-brand-dark/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsx("button",{onClick:l,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(fS,{className:"text-teal-400"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),c.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"StockCare"})]})]}),c.jsx("div",{className:"w-8 flex justify-end",children:c.jsx(yv,{status:e})})]})}),c.jsx("main",{className:"flex-grow pt-16 pb-24",children:d()}),c.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around z-20",children:s.map(f=>c.jsxs("button",{onClick:()=>u(f.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${n.name===f.id?"text-teal-400":"text-gray-400 hover:text-teal-400"}`,children:[c.jsx(f.icon,{className:"w-6 h-6 mb-1"}),c.jsx("span",{className:"text-xs font-semibold",children:f.label})]},f.id))})]})}const Wz=.5,dqe=()=>{const{animals:t,healthEvents:e,weighings:n,parturitions:r}=Xt();return I.useMemo(()=>{const o=[...t.filter(h=>h.status==="Activo"&&h.sex==="Hembra").map(h=>{const m=e.filter(T=>T.animalId===h.id).reduce((T,j)=>T+(j.calculatedCost||0),0),g=n.filter(T=>T.goatId===h.id),v=g.reduce((T,j)=>T+j.kg,0),y=v*Wz;let b=null,S=0;const A=r.filter(T=>T.goatId===h.id);v>0&&A.length>0&&(S=A.reduce((j,E)=>{const k=g.filter(L=>new Date(L.date)>=new Date(E.parturitionDate));if(k.length===0)return j;const O=new Date(E.parturitionDate),M=(new Date(k.sort((L,V)=>new Date(V.date).getTime()-new Date(L.date).getTime())[0].date).getTime()-O.getTime())/(1e3*60*60*24);return j+M},0),b=m/v);const C=y-m;return{animalId:h.id,totalRevenue:y,totalCosts:m,netProfit:C,costPerLiter:b,totalKgProduced:v,lactationDays:S}})].sort((h,m)=>m.netProfit-h.netProfit),l=o.reduce((h,m)=>h+m.totalRevenue,0),u=o.reduce((h,m)=>h+m.totalCosts,0),d=l-u,f=o.filter(h=>h.costPerLiter!==null&&h.costPerLiter>0).map(h=>h.costPerLiter),p=f.length>0?f.reduce((h,m)=>h+m,0)/f.length:0;return{animalsByProfitability:o,totalFarmRevenue:l,totalFarmCosts:u,totalFarmNetProfit:d,averageCostPerLiter:p,assumedMilkPrice:Wz}},[t,e,n,r])},g1=({title:t,value:e,unit:n,preValue:r,icon:i,colorClass:a})=>c.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border ${a||""}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(i,{size:14}),c.jsx("span",{children:t})]}),c.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[r&&c.jsx("span",{className:"text-3xl font-bold text-white",children:r}),e,n&&c.jsxs("span",{className:"text-xl text-zinc-400",children:[" ",n]})]})]}),qz=({animalData:t,monedaSimbolo:e})=>{const n=t.netProfit>=0;return c.jsxs("div",{className:"w-full text-left bg-black/20 rounded-xl p-4 border border-zinc-700/80 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-xl text-white",children:t.animalId}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-zinc-400 mt-1",children:[c.jsxs("span",{children:["Ingresos: ",e,t.totalRevenue.toFixed(2)]}),c.jsxs("span",{children:["Costos: ",e,t.totalCosts.toFixed(2)]})]})]}),c.jsxs("div",{className:`text-right font-bold text-2xl ${n?"text-brand-green":"text-brand-red"}`,children:[n?"+":"",e,t.netProfit.toFixed(2)]})]})},fqe=({active:t,payload:e,monedaSimbolo:n})=>t&&e&&e.length?c.jsxs("div",{className:"bg-black/60 backdrop-blur-md p-2 rounded-lg border border-zinc-700 text-white text-sm",children:[c.jsx("p",{className:"font-bold",children:e[0].payload.animalId}),c.jsxs("p",{style:{color:e[0].fill},children:["Rentabilidad: ",n,e[0].value.toFixed(2)]})]}):null;function hqe(){const{appConfig:t}=Xt(),{monedaSimbolo:e,precioLecheLitro:n}=t,{animalsByProfitability:r,totalFarmRevenue:i,totalFarmCosts:a,totalFarmNetProfit:s,averageCostPerLiter:o}=dqe(),l=r.slice(0,5),u=r.slice(-5).reverse();return r.length===0?c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4 flex flex-col items-center gap-4",children:[c.jsx(pl,{size:48,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-400 font-semibold text-lg",children:"No hay datos suficientes"}),c.jsx("p",{className:"text-zinc-500 text-sm max-w-xs",children:"Registra pesajes lecheros y eventos de salud con costos para empezar a ver el análisis económico."})]}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis Económico"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Rentabilidad de la Finca"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(g1,{title:"Ingresos Totales (Leche)",preValue:e,value:i.toFixed(2),icon:ug,colorClass:"border-green-500/30"}),c.jsx(g1,{title:"Costos Totales (Sanidad)",preValue:e,value:a.toFixed(2),icon:cg,colorClass:"border-red-500/30"})]}),c.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border ${s>=0?"border-green-500/50":"border-red-500/50"}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(pl,{size:14}),c.jsx("span",{children:"Rentabilidad Neta (Ingresos - Costos)"})]}),c.jsxs("p",{className:`text-5xl font-bold mt-1 ${s>=0?"text-brand-green":"text-brand-red"}`,children:[s>=0?"+":"",e,s.toFixed(2)]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(g1,{title:"Costo / Litro de Leche",preValue:e,value:o.toFixed(3),icon:bf}),c.jsx(g1,{title:"Precio Leche (Config)",preValue:e,value:n.toFixed(2),unit:"/Kg",icon:ba})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[c.jsx(vce,{size:20})," Distribución de Rentabilidad"]}),c.jsx("div",{className:"w-full h-56",children:c.jsx(ca,{children:c.jsxs(gl,{data:r,margin:{top:5,right:0,left:0,bottom:5},children:[c.jsx(Di,{dataKey:"animalId",tick:!1,axisLine:!1}),c.jsx(Or,{content:c.jsx(fqe,{monedaSimbolo:e}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),c.jsx($a,{dataKey:"netProfit",children:r.map(d=>c.jsx(Wl,{fill:d.netProfit>=0?"#34C759":"#FF3B30"},d.animalId))})]})})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-zinc-300",children:"Ranking de Rentabilidad"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"font-semibold text-brand-green flex items-center gap-2",children:[c.jsx(ug,{size:18})," Top 5 Animales Más Rentables"]}),l.map(d=>c.jsx(qz,{animalData:d,monedaSimbolo:e},d.animalId))]}),c.jsxs("div",{className:"space-y-2 pt-4",children:[c.jsxs("h4",{className:"font-semibold text-brand-red flex items-center gap-2",children:[c.jsx(cg,{size:18})," Top 5 Animales Menos Rentables"]}),u.map(d=>c.jsx(qz,{animalData:d,monedaSimbolo:e},d.animalId))]})]})]})}function pqe({onSwitchModule:t}){const{syncStatus:e}=Xt();return c.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsx("button",{onClick:()=>t("rebano"),className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Salir del módulo",children:c.jsx(ji,{size:24})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(pl,{className:"text-yellow-400"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),c.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Cents"})]})]}),c.jsx("div",{className:"w-8 flex justify-end",children:c.jsx(yv,{status:e})})]})}),c.jsx("main",{className:"flex-grow pt-16 pb-24",children:c.jsx(hqe,{})}),c.jsx(Qb,{onSwitchModule:t})]})}function Kz(t,e,n){const r=[];if(!t||t.length===0)return r;for(let i=0;i<t.length;i+=e){const a=t.slice(i,i+e);if(a.length===0)continue;const s=a[0],o=a[a.length-1];if(!s||!o)continue;const l=s.startTotal,u=o.endTotal,d=u-l,f=r[r.length-1],p=f?f.endTotal:l,h=p>0?d/p*100:0,m=A=>a.reduce((C,T)=>T&&typeof T[A]=="number"?C+T[A]:C,0),g=o.endCabras+o.endLevanteTardio,v=u>0?g/u*100:0,y=o.endCriaH+o.endLevanteTemprano+o.endLevanteMedio,b=u>0?y/u*100:0,S={startTotal:l,endTotal:u,netChange:d,growthRate:h,startCriaH:s.startCriaH,startCriaM:s.startCriaM,startLevanteTemprano:s.startLevanteTemprano,startLevanteMedio:s.startLevanteMedio,startLevanteTardio:s.startLevanteTardio,startCabras:s.startCabras,startPadres:s.startPadres,endCriaH:o.endCriaH,endCriaM:o.endCriaM,endLevanteTemprano:o.endLevanteTemprano,endLevanteMedio:o.endLevanteMedio,endLevanteTardio:o.endLevanteTardio,endCabras:o.endCabras,endPadres:o.endPadres,nacimientosH:m("nacimientosH"),nacimientosM:m("nacimientosM"),muertesCriaH:m("muertesCriaH"),muertesCriaM:m("muertesCriaM"),muertesLevanteTemprano:m("muertesLevanteTemprano"),muertesLevanteMedio:m("muertesLevanteMedio"),muertesLevanteTardio:m("muertesLevanteTardio"),muertesCabras:m("muertesCabras"),muertesPadres:m("muertesPadres"),muertesTotales:m("muertesTotales"),ventasCabritos:m("ventasCabritos"),ventasDescartes:m("ventasDescartes"),ventasTotales:m("ventasTotales"),comprasVientres:m("comprasVientres"),comprasPadres:m("comprasPadres"),comprasTotales:m("comprasTotales"),promocionCriaH:m("promocionCriaH"),promocionLevanteTemprano:m("promocionLevanteTemprano"),promocionLevanteMedio:m("promocionLevanteMedio"),promocionLevanteTardio:m("promocionLevanteTardio"),kpiProductivasCount:g,kpiProductivasPercent:v,kpiCrecimientoCount:y,kpiCrecimientoPercent:b,litrosLeche:m("litrosLeche"),ingresosTotales:m("ingresosTotales")};n==="Semestral"?r.push({...S,semestreIndex:i/6,year:s.year,periodLabel:`S${i/6%2+1} (Año ${s.year})`}):r.push({...S,year:s.year,periodLabel:`Año ${s.year}`})}return r}const mqe=(t,e)=>I.useMemo(()=>{const r={initialCabras:t.initialCabras??0,initialLevanteTardio:t.initialLevanteTardio??0,initialLevanteMedio:t.initialLevanteMedio??0,initialLevanteTemprano:t.initialLevanteTemprano??0,initialCriaH:t.initialCriaH??0,initialCriaM:t.initialCriaM??0,initialPadres:t.initialPadres??1,comprasVientresAnual:t.comprasVientresAnual??0,mesInicioMonta1:t.mesInicioMonta1,mesInicioMonta2:t.mesInicioMonta2,mesInicioMonta3:t.mesInicioMonta3,mesInicioMonta4:t.mesInicioMonta4,duracionMontaDias:t.duracionMontaDias??45,diasGestacion:t.diasGestacion??150,litrosPromedioPorAnimal:t.litrosPromedioPorAnimal??1.8,diasLactanciaObjetivo:t.diasLactanciaObjetivo??305,litrosPicoPorAnimal:t.litrosPicoPorAnimal??((t.diasLactanciaObjetivo??305)>=305?(t.litrosPromedioPorAnimal??1.8)*1.4:(t.litrosPromedioPorAnimal??1.8)*1.5),porcentajePrenez:t.porcentajePrenez??85,porcentajeProlificidad:t.porcentajeProlificidad??120,mortalidadCrias:t.mortalidadCrias??5,mortalidadLevante:t.mortalidadLevante??3,mortalidadCabras:t.mortalidadCabras??3,tasaReemplazo:t.tasaReemplazo??20,eliminacionCabritos:t.eliminacionCabritos??100,precioLecheLitro:t.precioLecheLitro??.5,precioVentaCabritoKg:t.precioVentaCabritoKg??3,precioVentaDescarteAdulto:t.precioVentaDescarteAdulto??50,monedaSimbolo:t.monedaSimbolo??"$"},i=[],a=e*12,s=30.44;let o=[],l=[],u=[],d=0;const f=Math.round(r.diasGestacion/s),p=6,h=r.mortalidadCrias/100/12,m=r.mortalidadLevante/100/12,g=r.mortalidadCabras/100/12,v=r.tasaReemplazo/100/12,y=r.comprasVientresAnual/12,b=new Set;[t.mesInicioMonta1,t.mesInicioMonta2,t.mesInicioMonta3,t.mesInicioMonta4].filter(Y=>typeof Y=="number"&&Y>0).forEach(Y=>b.add(Y));const S=[.8,1.4,1.4,1.3,1.2,1,.9,.8,.7,.5],A=[.7,1.5,1.5,1.3,1,.6,.4],C=r.diasLactanciaObjetivo>=305,T=C?S:A,j=C?1.4:1.5,E=T.length,k=r.litrosPromedioPorAnimal,O=r.litrosPicoPorAnimal,D=O>k&&k>0?O/k:j,M=j>1?(D-1)/(j-1):1,L=T.map(Y=>(Y-1)*M+1);for(let Y=0;Y<a;Y++){const J=i[Y-1],q=Math.floor(Y/12)+1,ee=Y%12+1,le=`Año ${q} - Mes ${ee}`,se=J?J.endCriaH:r.initialCriaH,$=J?J.endCriaM:r.initialCriaM,G=J?J.endLevanteTemprano:r.initialLevanteTemprano,te=J?J.endLevanteMedio:r.initialLevanteMedio,oe=J?J.endLevanteTardio:r.initialLevanteTardio,ge=J?J.endCabras:r.initialCabras,_e=J?J.endPadres:r.initialPadres,Ce=se+$+G+te+oe+ge+_e;let fe=0;const be=[];o=o.filter(_n=>_n.monthEnd===Y?(fe+=_n.size,be.push({id:_n.id,size:_n.size,monthEnd:Y+p}),u.push({id:_n.id,deliveries:_n.size,startMonth:Y}),!1):!0),l.push(...be),l=l.filter(_n=>_n.monthEnd>Y);const we=fe*(r.porcentajeProlificidad/100),ie=we*.5,He=we*.5;let Me=0,he=0;if(b.has(ee)){const _n=o.reduce((sr,Rr)=>sr+Rr.size,0),gr=l.reduce((sr,Rr)=>sr+Rr.size,0),vr=Math.max(0,ge-_n-gr),Qn=Math.max(0,oe*(1-m));Me=vr*(r.porcentajePrenez/100),he=Qn*(r.porcentajePrenez/100),Me>0&&o.push({id:++d,size:Me,monthEnd:Y+f}),he>0&&o.push({id:++d,size:he,monthEnd:Y+f})}const We=(se+ie)*h,pt=($+He)*h,gt=G*m,Xe=te*m,Ot=oe*m,ft=_e*g,ut=ge*g,Yt=(ge-ut)*v,Qt=ut+Yt,Ft=ge>0?Qt/ge:0;o.forEach(_n=>_n.size*=1-Ft),l.forEach(_n=>_n.size*=1-Ft);const sn=We+pt+gt+Xe+Ot+ut+ft,at=Math.max(0,$+He-pt),vt=at*(r.eliminacionCabritos/100),xt=vt+Yt,tt=y,zt=0,ht=tt+zt,mt=Math.max(0,se+ie-We),Mt=Math.max(0,G-gt),_t=Math.max(0,te-Xe),Ht=Math.max(0,oe-Ot),gn=Math.max(0,Ht-he),on=mt/3,wt=Mt/3,Xn=_t/6,fn=gn/6,qt=Math.max(0,mt-on),Sn=Math.max(0,at-vt),Oi=Math.max(0,Mt-wt+on),Nr=Math.max(0,_t-Xn+wt),wa=Math.max(0,Ht-he-fn+tt+Xn),Re=Math.max(0,ge-Qt+fn+he),Ie=Math.max(0,_e-ft+zt),Ke=qt+Sn+Oi+Nr+wa+Re+Ie;let At=0,lt=0;u.forEach(_n=>_n.deliveries*=1-Ft),u=u.filter(_n=>{const gr=Y-_n.startMonth;if(gr<E){const vr=L[gr]||0;return At+=_n.deliveries*r.litrosPromedioPorAnimal*s*vr,lt+=_n.deliveries,!0}return!1});const Gt=At,vn=lt,qn=Gt*r.precioLecheLitro,$t=vt*10*r.precioVentaCabritoKg,Kn=Yt*r.precioVentaDescarteAdulto,bi=qn+$t+Kn;i.push({monthIndex:Y,year:q,month:ee,periodLabel:le,startCriaH:se,startCriaM:$,startLevanteTemprano:G,startLevanteMedio:te,startLevanteTardio:oe,startCabras:ge,startPadres:_e,startTotal:Ce,partos:fe,nacimientosH:ie,nacimientosM:He,muertesCriaH:We,muertesCriaM:pt,muertesLevanteTemprano:gt,muertesLevanteMedio:Xe,muertesLevanteTardio:Ot,muertesCabras:ut,muertesPadres:ft,muertesTotales:sn,ventasCabritos:vt,ventasDescartes:Yt,ventasTotales:xt,comprasVientres:tt,comprasPadres:zt,comprasTotales:ht,promocionCriaH:on,promocionLevanteTemprano:wt,promocionLevanteMedio:Xn,promocionLevanteTardio:fn,endCriaH:qt,endCriaM:Sn,endLevanteTemprano:Oi,endLevanteMedio:Nr,endLevanteTardio:wa,endCabras:Re,endPadres:Ie,endTotal:Ke,litrosLeche:Gt,ingresosTotales:bi,hembrasProduccion:vn,ingresosLeche:qn})}const V=Kz(i,6,"Semestral"),Q=Kz(i,12,"Anual");return{monthlyData:i,semestralData:V,annualData:Q}},[t,e]),Gz=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],Yp=t=>!t||t.length===0?0:t.reduce((n,r)=>n+r,0)/t.length,gqe=t=>{if(!t||t.length<2)return 0;const e=Yp(t),n=t.reduce((r,i)=>r+Math.pow(i-e,2),0)/(t.length-1);return Math.sqrt(n)},vqe=(t,e)=>I.useMemo(()=>{var le,se;if(!t||t.length===0||!e||e.length===0)return{isLoading:!0,milkLinearityKpis:[],herdEfficiencyKpis:null,herdDynamicsKpis:null,horizonInYears:0};const r=e.length,i=e.map($=>{const G=$.year,oe=t.filter(We=>We.year===G).map(We=>We.litrosLeche),ge=oe.reduce((We,pt)=>We+pt,0),_e=Yp(oe),Ce=gqe(oe),fe=_e>0?Ce/_e*100:0,be=Math.max(...oe),we=oe.indexOf(be),ie=Gz[we%12],He=Math.min(...oe),Me=oe.indexOf(He),he=Gz[Me%12];return{year:G,monthlyProduction:oe,totalProduction:ge,avgMonthly:_e,peakMonthValue:be,peakMonthLabel:ie,valleyMonthValue:He,valleyMonthLabel:he,stdDev:Ce,cv:fe}}),a=e.reduce(($,G)=>$+G.litrosLeche,0),s=30.44,o=t.reduce(($,G)=>$+G.hembrasProduccion*s,0),l=a/(o||1),u=Yp(e.map($=>$.kpiProductivasCount)),d=a/r/(u||1),f={totalLitrosHorizonte:a,totalDiasLactancia:o,litrosPorDiaLactancia:l,avgVientresProductivosHorizonte:u,litrosPorVientrePorAnio:d},p=Yp(t.map($=>$.startCabras+$.startLevanteTardio)),h=Yp(t.map($=>$.startLevanteTemprano+$.startLevanteMedio+$.startLevanteTardio)),m=Yp(t.map($=>$.startCabras)),g=e.reduce(($,G)=>$+G.nacimientosH+G.nacimientosM,0),v=e.reduce(($,G)=>$+G.muertesCriaH+G.muertesCriaM,0),y=e.reduce(($,G)=>$+G.muertesLevanteTemprano+G.muertesLevanteMedio+G.muertesLevanteTardio,0),b=e.reduce(($,G)=>$+G.muertesCabras,0),S=e.reduce(($,G)=>$+G.promocionLevanteTardio,0),A=e.reduce(($,G)=>$+G.ventasDescartes,0),C=e.reduce(($,G)=>$+G.ventasCabritos,0),T=e.reduce(($,G)=>$+G.nacimientosM,0),j=e.reduce(($,G)=>$+G.muertesCriaM,0),E=t.reduce(($,G)=>$+G.partos,0),k=g/(p*r||1)*100,O=g/(E||1)*100,D=(((le=t[0])==null?void 0:le.startCriaH)??0)+(((se=t[0])==null?void 0:se.startCriaM)??0),M=v/(g+D||1)*100,L=y/(h*r||1)*100,V=b/(m*r||1)*100,Q=S/(m*r||1)*100,Y=A/(m*r||1)*100,J=T-j,q=C/(J||1)*100;return{isLoading:!1,milkLinearityKpis:i,herdEfficiencyKpis:f,herdDynamicsKpis:{tasaNatalidadReal:k,tasaProlificidadReal:O,mortalidadCriasReal:M,mortalidadLevanteReal:L,mortalidadCabrasReal:V,tasaReemplazoReal:Q,tasaDescarteReal:Y,tasaEliminacionCriasMReal:q},horizonInYears:r}},[t,e]),Wt=(t,e=0)=>t==null||isNaN(t)?"0":t.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:e}),nP=(t,e="$",n=2)=>t==null||isNaN(t)?`${e}0.00`:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:n,maximumFractionDigits:n}).format(t).replace("$",e),yqe="modulepreload",bqe=function(t,e){return new URL(t,e).href},Yz={},QC=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=bqe(u,r),u in Yz)return;Yz[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!r)for(let m=s.length-1;m>=0;m--){const g=s[m];if(g.href===u&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":yqe,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Br(t){"@babel/helpers - typeof";return Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(t)}var Mc=Uint8Array,il=Uint16Array,QD=Int32Array,ZD=new Mc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),JD=new Mc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xz=new Mc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$Z=function(t,e){for(var n=new il(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new QD(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},BZ=$Z(ZD,2),xqe=BZ.b,rP=BZ.r;xqe[28]=258,rP[258]=28;var wqe=$Z(JD,0),Qz=wqe.r,iP=new il(32768);for(var vi=0;vi<32768;++vi){var Od=(vi&43690)>>1|(vi&21845)<<1;Od=(Od&52428)>>2|(Od&13107)<<2,Od=(Od&61680)>>4|(Od&3855)<<4,iP[vi]=((Od&65280)>>8|(Od&255)<<8)>>1}var V0=function(t,e,n){for(var r=t.length,i=0,a=new il(e);i<r;++i)t[i]&&++a[t[i]-1];var s=new il(e);for(i=1;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(n){o=new il(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],d=e-t[i],f=s[t[i]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)o[iP[f]>>l]=u}else for(o=new il(r),i=0;i<r;++i)t[i]&&(o[i]=iP[s[t[i]-1]++]>>15-t[i]);return o},sp=new Mc(288);for(var vi=0;vi<144;++vi)sp[vi]=8;for(var vi=144;vi<256;++vi)sp[vi]=9;for(var vi=256;vi<280;++vi)sp[vi]=7;for(var vi=280;vi<288;++vi)sp[vi]=8;var A5=new Mc(32);for(var vi=0;vi<32;++vi)A5[vi]=5;var Sqe=V0(sp,9,0),_qe=V0(A5,5,0),VZ=function(t){return(t+7)/8|0},Aqe=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Mc(t.subarray(e,n))},Ou=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Gv=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},ZC=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,a=n.slice();if(!i)return{t:HZ,l:0};if(i==1){var s=new Mc(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(C,T){return C.f-T.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],u=0,d=1,f=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=i-1;)o=n[n[u].f<n[f].f?u++:f++],l=n[u!=d&&n[u].f<n[f].f?u++:f++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=a[0].s,r=1;r<i;++r)a[r].s>p&&(p=a[r].s);var h=new il(p+1),m=aP(n[d-1],h,0);if(m>e){var r=0,g=0,v=m-e,y=1<<v;for(a.sort(function(T,j){return h[j.s]-h[T.s]||T.f-j.f});r<i;++r){var b=a[r].s;if(h[b]>e)g+=y-(1<<m-h[b]),h[b]=e;else break}for(g>>=v;g>0;){var S=a[r].s;h[S]<e?g-=1<<e-h[S]++-1:++r}for(;r>=0&&g;--r){var A=a[r].s;h[A]==e&&(--h[A],++g)}m=e}return{t:new Mc(h),l:m}},aP=function(t,e,n){return t.s==-1?Math.max(aP(t.l,e,n+1),aP(t.r,e,n+1)):e[t.s]=n},Zz=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new il(++e),r=0,i=t[0],a=1,s=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=t[o]}return{c:n.subarray(0,r),n:e}},Yv=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},UZ=function(t,e,n){var r=n.length,i=VZ(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<r;++a)t[i+a+4]=n[a];return(i+4+r)*8},Jz=function(t,e,n,r,i,a,s,o,l,u,d){Ou(e,d++,n),++i[256];for(var f=ZC(i,15),p=f.t,h=f.l,m=ZC(a,15),g=m.t,v=m.l,y=Zz(p),b=y.c,S=y.n,A=Zz(g),C=A.c,T=A.n,j=new il(19),E=0;E<b.length;++E)++j[b[E]&31];for(var E=0;E<C.length;++E)++j[C[E]&31];for(var k=ZC(j,7),O=k.t,D=k.l,M=19;M>4&&!O[Xz[M-1]];--M);var L=u+5<<3,V=Yv(i,sp)+Yv(a,A5)+s,Q=Yv(i,p)+Yv(a,g)+s+14+3*M+Yv(j,O)+2*j[16]+3*j[17]+7*j[18];if(l>=0&&L<=V&&L<=Q)return UZ(e,d,t.subarray(l,l+u));var Y,J,q,ee;if(Ou(e,d,1+(Q<V)),d+=2,Q<V){Y=V0(p,h,0),J=p,q=V0(g,v,0),ee=g;var le=V0(O,D,0);Ou(e,d,S-257),Ou(e,d+5,T-1),Ou(e,d+10,M-4),d+=14;for(var E=0;E<M;++E)Ou(e,d+3*E,O[Xz[E]]);d+=3*M;for(var se=[b,C],$=0;$<2;++$)for(var G=se[$],E=0;E<G.length;++E){var te=G[E]&31;Ou(e,d,le[te]),d+=O[te],te>15&&(Ou(e,d,G[E]>>5&127),d+=G[E]>>12)}}else Y=Sqe,J=sp,q=_qe,ee=A5;for(var E=0;E<o;++E){var oe=r[E];if(oe>255){var te=oe>>18&31;Gv(e,d,Y[te+257]),d+=J[te+257],te>7&&(Ou(e,d,oe>>23&31),d+=ZD[te]);var ge=oe&31;Gv(e,d,q[ge]),d+=ee[ge],ge>3&&(Gv(e,d,oe>>5&8191),d+=JD[ge])}else Gv(e,d,Y[oe]),d+=J[oe]}return Gv(e,d,Y[256]),d+J[256]},Cqe=new QD([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),HZ=new Mc(0),jqe=function(t,e,n,r,i,a){var s=a.z||t.length,o=new Mc(r+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(r,o.length-i),u=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var f=Cqe[e-1],p=f>>13,h=f&8191,m=(1<<n)-1,g=a.p||new il(32768),v=a.h||new il(m+1),y=Math.ceil(n/3),b=2*y,S=function(Me){return(t[Me]^t[Me+1]<<y^t[Me+2]<<b)&m},A=new QD(25e3),C=new il(288),T=new il(32),j=0,E=0,k=a.i||0,O=0,D=a.w||0,M=0;k+2<s;++k){var L=S(k),V=k&32767,Q=v[L];if(g[V]=Q,v[L]=V,D<=k){var Y=s-k;if((j>7e3||O>24576)&&(Y>423||!u)){d=Jz(t,l,0,A,C,T,E,O,M,k-M,d),O=j=E=0,M=k;for(var J=0;J<286;++J)C[J]=0;for(var J=0;J<30;++J)T[J]=0}var q=2,ee=0,le=h,se=V-Q&32767;if(Y>2&&L==S(k-se))for(var $=Math.min(p,Y)-1,G=Math.min(32767,k),te=Math.min(258,Y);se<=G&&--le&&V!=Q;){if(t[k+q]==t[k+q-se]){for(var oe=0;oe<te&&t[k+oe]==t[k+oe-se];++oe);if(oe>q){if(q=oe,ee=se,oe>$)break;for(var ge=Math.min(se,oe-2),_e=0,J=0;J<ge;++J){var Ce=k-se+J&32767,fe=g[Ce],be=Ce-fe&32767;be>_e&&(_e=be,Q=Ce)}}}V=Q,Q=g[V],se+=V-Q&32767}if(ee){A[O++]=268435456|rP[q]<<18|Qz[ee];var we=rP[q]&31,ie=Qz[ee]&31;E+=ZD[we]+JD[ie],++C[257+we],++T[ie],D=k+q,++j}else A[O++]=t[k],++C[t[k]]}}for(k=Math.max(k,D);k<s;++k)A[O++]=t[k],++C[t[k]];d=Jz(t,l,u,A,C,T,E,O,M,k-M,d),u||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=v,a.p=g,a.i=k,a.w=D)}else{for(var k=a.w||0;k<s+u;k+=65535){var He=k+65535;He>=s&&(l[d/8|0]=u,He=s),d=UZ(l,d+1,t.subarray(k,He))}a.i=s}return Aqe(o,0,r+VZ(d)+i)},WZ=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,a=n.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=r+=n[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Nqe=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),s=new Mc(a.length+t.length);s.set(a),s.set(t,a.length),t=s,i.w=a.length}return jqe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},qZ=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Eqe=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=WZ();i.p(e.dictionary),qZ(t,2,i.d())}};function sP(t,e){e||(e={});var n=WZ();n.p(t);var r=Nqe(t,e,e.dictionary?6:2,4);return Eqe(r,e),qZ(r,r.length-4,n.d()),r}var kqe=typeof TextDecoder<"u"&&new TextDecoder,Pqe=0;try{kqe.decode(HZ,{stream:!0}),Pqe=1}catch{}function Tqe(t){if(Array.isArray(t))return t}function Dqe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function e9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Iqe(t,e){if(t){if(typeof t=="string")return e9(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e9(t,e):void 0}}function Oqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t9(t,e){return Tqe(t)||Dqe(t,e)||Iqe(t,e)||Oqe()}function n9(t,e="utf8"){return new TextDecoder(e).decode(t)}const Mqe=new TextEncoder;function Rqe(t){return Mqe.encode(t)}const Lqe=1024*8,Fqe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),JC={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class eI{constructor(e=Lqe,n={}){Mn(this,"buffer");Mn(this,"byteLength");Mn(this,"byteOffset");Mn(this,"length");Mn(this,"offset");Mn(this,"lastWrittenByte");Mn(this,"littleEndian");Mn(this,"_data");Mn(this,"_mark");Mn(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,a=e.byteLength-i;let s=i;(ArrayBuffer.isView(e)||e instanceof eI)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=JC[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+r);if(this.littleEndian===Fqe&&n!=="uint8"&&n!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+r));o.reverse();const l=new JC[n](o.buffer);return this.offset+=r,l.reverse(),l}const s=new JC[n](a);return this.offset+=r,s}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return n9(this.readBytes(e))}decodeText(e=1,n="utf8"){return n9(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(Rqe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function wv(t){let e=t.length;for(;--e>=0;)t[e]=0}const zqe=3,$qe=258,KZ=29,Bqe=256,Vqe=Bqe+1+KZ,GZ=30,Uqe=512,Hqe=new Array((Vqe+2)*2);wv(Hqe);const Wqe=new Array(GZ*2);wv(Wqe);const qqe=new Array(Uqe);wv(qqe);const Kqe=new Array($qe-zqe+1);wv(Kqe);const Gqe=new Array(KZ);wv(Gqe);const Yqe=new Array(GZ);wv(Yqe);const Xqe=(t,e,n,r)=>{let i=t&65535|0,a=t>>>16&65535|0,s=0;for(;n!==0;){s=n>2e3?2e3:n,n-=s;do i=i+e[r++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};var oP=Xqe;const Qqe=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},Zqe=new Uint32Array(Qqe()),Jqe=(t,e,n,r)=>{const i=Zqe,a=r+n;t^=-1;for(let s=r;s<a;s++)t=t>>>8^i[(t^e[s])&255];return t^-1};var Kc=Jqe,lP={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},YZ={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const eKe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var tKe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)eKe(n,r)&&(t[r]=n[r])}}return t},nKe=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,a=t.length;r<a;r++){let s=t[r];n.set(s,i),i+=s.length}return n},XZ={assign:tKe,flattenChunks:nKe};let QZ=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{QZ=!1}const fb=new Uint8Array(256);for(let t=0;t<256;t++)fb[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;fb[254]=fb[254]=1;var rKe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,a,s=t.length,o=0;for(i=0;i<s;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),a=0,i=0;a<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|n&63):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|n&63):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|n&63);return e};const iKe=(t,e)=>{if(e<65534&&t.subarray&&QZ)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var aKe=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const a=new Array(n*2);for(i=0,r=0;r<n;){let s=t[r++];if(s<128){a[i++]=s;continue}let o=fb[s];if(o>4){a[i++]=65533,r+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&r<n;)s=s<<6|t[r++]&63,o--;if(o>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return iKe(a,i)},sKe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+fb[t[n]]>e?n:e},cP={string2buf:rKe,buf2string:aKe,utf8border:sKe};function oKe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var lKe=oKe;const v1=16209,cKe=16191;var uKe=function(e,n){let r,i,a,s,o,l,u,d,f,p,h,m,g,v,y,b,S,A,C,T,j,E,k,O;const D=e.state;r=e.next_in,k=e.input,i=r+(e.avail_in-5),a=e.next_out,O=e.output,s=a-(n-e.avail_out),o=a+(e.avail_out-257),l=D.dmax,u=D.wsize,d=D.whave,f=D.wnext,p=D.window,h=D.hold,m=D.bits,g=D.lencode,v=D.distcode,y=(1<<D.lenbits)-1,b=(1<<D.distbits)-1;e:do{m<15&&(h+=k[r++]<<m,m+=8,h+=k[r++]<<m,m+=8),S=g[h&y];t:for(;;){if(A=S>>>24,h>>>=A,m-=A,A=S>>>16&255,A===0)O[a++]=S&65535;else if(A&16){C=S&65535,A&=15,A&&(m<A&&(h+=k[r++]<<m,m+=8),C+=h&(1<<A)-1,h>>>=A,m-=A),m<15&&(h+=k[r++]<<m,m+=8,h+=k[r++]<<m,m+=8),S=v[h&b];n:for(;;){if(A=S>>>24,h>>>=A,m-=A,A=S>>>16&255,A&16){if(T=S&65535,A&=15,m<A&&(h+=k[r++]<<m,m+=8,m<A&&(h+=k[r++]<<m,m+=8)),T+=h&(1<<A)-1,T>l){e.msg="invalid distance too far back",D.mode=v1;break e}if(h>>>=A,m-=A,A=a-s,T>A){if(A=T-A,A>d&&D.sane){e.msg="invalid distance too far back",D.mode=v1;break e}if(j=0,E=p,f===0){if(j+=u-A,A<C){C-=A;do O[a++]=p[j++];while(--A);j=a-T,E=O}}else if(f<A){if(j+=u+f-A,A-=f,A<C){C-=A;do O[a++]=p[j++];while(--A);if(j=0,f<C){A=f,C-=A;do O[a++]=p[j++];while(--A);j=a-T,E=O}}}else if(j+=f-A,A<C){C-=A;do O[a++]=p[j++];while(--A);j=a-T,E=O}for(;C>2;)O[a++]=E[j++],O[a++]=E[j++],O[a++]=E[j++],C-=3;C&&(O[a++]=E[j++],C>1&&(O[a++]=E[j++]))}else{j=a-T;do O[a++]=O[j++],O[a++]=O[j++],O[a++]=O[j++],C-=3;while(C>2);C&&(O[a++]=O[j++],C>1&&(O[a++]=O[j++]))}}else if(A&64){e.msg="invalid distance code",D.mode=v1;break e}else{S=v[(S&65535)+(h&(1<<A)-1)];continue n}break}}else if(A&64)if(A&32){D.mode=cKe;break e}else{e.msg="invalid literal/length code",D.mode=v1;break e}else{S=g[(S&65535)+(h&(1<<A)-1)];continue t}break}}while(r<i&&a<o);C=m>>3,r-=C,m-=C<<3,h&=(1<<m)-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=a<o?257+(o-a):257-(a-o),D.hold=h,D.bits=m};const Bp=15,r9=852,i9=592,a9=0,ej=1,s9=2,dKe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fKe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hKe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pKe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),mKe=(t,e,n,r,i,a,s,o)=>{const l=o.bits;let u=0,d=0,f=0,p=0,h=0,m=0,g=0,v=0,y=0,b=0,S,A,C,T,j,E=null,k;const O=new Uint16Array(Bp+1),D=new Uint16Array(Bp+1);let M=null,L,V,Q;for(u=0;u<=Bp;u++)O[u]=0;for(d=0;d<r;d++)O[e[n+d]]++;for(h=l,p=Bp;p>=1&&O[p]===0;p--);if(h>p&&(h=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<p&&O[f]===0;f++);for(h<f&&(h=f),v=1,u=1;u<=Bp;u++)if(v<<=1,v-=O[u],v<0)return-1;if(v>0&&(t===a9||p!==1))return-1;for(D[1]=0,u=1;u<Bp;u++)D[u+1]=D[u]+O[u];for(d=0;d<r;d++)e[n+d]!==0&&(s[D[e[n+d]]++]=d);if(t===a9?(E=M=s,k=20):t===ej?(E=dKe,M=fKe,k=257):(E=hKe,M=pKe,k=0),b=0,d=0,u=f,j=a,m=h,g=0,C=-1,y=1<<h,T=y-1,t===ej&&y>r9||t===s9&&y>i9)return 1;for(;;){L=u-g,s[d]+1<k?(V=0,Q=s[d]):s[d]>=k?(V=M[s[d]-k],Q=E[s[d]-k]):(V=96,Q=0),S=1<<u-g,A=1<<m,f=A;do A-=S,i[j+(b>>g)+A]=L<<24|V<<16|Q|0;while(A!==0);for(S=1<<u-1;b&S;)S>>=1;if(S!==0?(b&=S-1,b+=S):b=0,d++,--O[u]===0){if(u===p)break;u=e[n+s[d]]}if(u>h&&(b&T)!==C){for(g===0&&(g=h),j+=f,m=u-g,v=1<<m;m+g<p&&(v-=O[m+g],!(v<=0));)m++,v<<=1;if(y+=1<<m,t===ej&&y>r9||t===s9&&y>i9)return 1;C=b&T,i[C]=h<<24|m<<16|j-a|0}}return b!==0&&(i[j+b]=u-g<<24|64<<16|0),o.bits=h,0};var U0=mKe;const gKe=0,ZZ=1,JZ=2,{Z_FINISH:o9,Z_BLOCK:vKe,Z_TREES:y1,Z_OK:op,Z_STREAM_END:yKe,Z_NEED_DICT:bKe,Z_STREAM_ERROR:Kl,Z_DATA_ERROR:eJ,Z_MEM_ERROR:tJ,Z_BUF_ERROR:xKe,Z_DEFLATED:l9}=YZ,E_=16180,c9=16181,u9=16182,d9=16183,f9=16184,h9=16185,p9=16186,m9=16187,g9=16188,v9=16189,C5=16190,Mu=16191,tj=16192,y9=16193,nj=16194,b9=16195,x9=16196,w9=16197,S9=16198,b1=16199,x1=16200,_9=16201,A9=16202,C9=16203,j9=16204,N9=16205,rj=16206,E9=16207,k9=16208,xi=16209,nJ=16210,rJ=16211,wKe=852,SKe=592,_Ke=15,AKe=_Ke,P9=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function CKe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Tp=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<E_||e.mode>rJ?1:0},iJ=t=>{if(Tp(t))return Kl;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=E_,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(wKe),e.distcode=e.distdyn=new Int32Array(SKe),e.sane=1,e.back=-1,op},aJ=t=>{if(Tp(t))return Kl;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,iJ(t)},sJ=(t,e)=>{let n;if(Tp(t))return Kl;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Kl:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,aJ(t))},oJ=(t,e)=>{if(!t)return Kl;const n=new CKe;t.state=n,n.strm=t,n.window=null,n.mode=E_;const r=sJ(t,e);return r!==op&&(t.state=null),r},jKe=t=>oJ(t,AKe);let T9=!0,ij,aj;const NKe=t=>{if(T9){ij=new Int32Array(512),aj=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(U0(ZZ,t.lens,0,288,ij,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;U0(JZ,t.lens,0,32,aj,0,t.work,{bits:5}),T9=!1}t.lencode=ij,t.lenbits=9,t.distcode=aj,t.distbits=5},lJ=(t,e,n,r)=>{let i;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(e.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},EKe=(t,e)=>{let n,r,i,a,s,o,l,u,d,f,p,h,m,g,v=0,y,b,S,A,C,T,j,E;const k=new Uint8Array(4);let O,D;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Tp(t)||!t.output||!t.input&&t.avail_in!==0)return Kl;n=t.state,n.mode===Mu&&(n.mode=tj),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,o=t.avail_in,u=n.hold,d=n.bits,f=o,p=l,E=op;e:for(;;)switch(n.mode){case E_:if(n.wrap===0){n.mode=tj;break}for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,k[0]=u&255,k[1]=u>>>8&255,n.check=Kc(n.check,k,2,0),u=0,d=0,n.mode=c9;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=xi;break}if((u&15)!==l9){t.msg="unknown compression method",n.mode=xi;break}if(u>>>=4,d-=4,j=(u&15)+8,n.wbits===0&&(n.wbits=j),j>15||j>n.wbits){t.msg="invalid window size",n.mode=xi;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=u&512?v9:Mu,u=0,d=0;break;case c9:for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.flags=u,(n.flags&255)!==l9){t.msg="unknown compression method",n.mode=xi;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=xi;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,n.check=Kc(n.check,k,2,0)),u=0,d=0,n.mode=u9;case u9:for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,k[2]=u>>>16&255,k[3]=u>>>24&255,n.check=Kc(n.check,k,4,0)),u=0,d=0,n.mode=d9;case d9:for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,n.check=Kc(n.check,k,2,0)),u=0,d=0,n.mode=f9;case f9:if(n.flags&1024){for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,n.check=Kc(n.check,k,2,0)),u=0,d=0}else n.head&&(n.head.extra=null);n.mode=h9;case h9:if(n.flags&1024&&(h=n.length,h>o&&(h=o),h&&(n.head&&(j=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+h),j)),n.flags&512&&n.wrap&4&&(n.check=Kc(n.check,r,h,a)),o-=h,a+=h,n.length-=h),n.length))break e;n.length=0,n.mode=p9;case p9:if(n.flags&2048){if(o===0)break e;h=0;do j=r[a+h++],n.head&&j&&n.length<65536&&(n.head.name+=String.fromCharCode(j));while(j&&h<o);if(n.flags&512&&n.wrap&4&&(n.check=Kc(n.check,r,h,a)),o-=h,a+=h,j)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=m9;case m9:if(n.flags&4096){if(o===0)break e;h=0;do j=r[a+h++],n.head&&j&&n.length<65536&&(n.head.comment+=String.fromCharCode(j));while(j&&h<o);if(n.flags&512&&n.wrap&4&&(n.check=Kc(n.check,r,h,a)),o-=h,a+=h,j)break e}else n.head&&(n.head.comment=null);n.mode=g9;case g9:if(n.flags&512){for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.wrap&4&&u!==(n.check&65535)){t.msg="header crc mismatch",n.mode=xi;break}u=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Mu;break;case v9:for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.adler=n.check=P9(u),u=0,d=0,n.mode=C5;case C5:if(n.havedict===0)return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=u,n.bits=d,bKe;t.adler=n.check=1,n.mode=Mu;case Mu:if(e===vKe||e===y1)break e;case tj:if(n.last){u>>>=d&7,d-=d&7,n.mode=rj;break}for(;d<3;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}switch(n.last=u&1,u>>>=1,d-=1,u&3){case 0:n.mode=y9;break;case 1:if(NKe(n),n.mode=b1,e===y1){u>>>=2,d-=2;break e}break;case 2:n.mode=x9;break;case 3:t.msg="invalid block type",n.mode=xi}u>>>=2,d-=2;break;case y9:for(u>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=xi;break}if(n.length=u&65535,u=0,d=0,n.mode=nj,e===y1)break e;case nj:n.mode=b9;case b9:if(h=n.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;i.set(r.subarray(a,a+h),s),o-=h,a+=h,l-=h,s+=h,n.length-=h;break}n.mode=Mu;break;case x9:for(;d<14;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.nlen=(u&31)+257,u>>>=5,d-=5,n.ndist=(u&31)+1,u>>>=5,d-=5,n.ncode=(u&15)+4,u>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=xi;break}n.have=0,n.mode=w9;case w9:for(;n.have<n.ncode;){for(;d<3;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.lens[M[n.have++]]=u&7,u>>>=3,d-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},E=U0(gKe,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,E){t.msg="invalid code lengths set",n.mode=xi;break}n.have=0,n.mode=S9;case S9:for(;n.have<n.nlen+n.ndist;){for(;v=n.lencode[u&(1<<n.lenbits)-1],y=v>>>24,b=v>>>16&255,S=v&65535,!(y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(S<16)u>>>=y,d-=y,n.lens[n.have++]=S;else{if(S===16){for(D=y+2;d<D;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(u>>>=y,d-=y,n.have===0){t.msg="invalid bit length repeat",n.mode=xi;break}j=n.lens[n.have-1],h=3+(u&3),u>>>=2,d-=2}else if(S===17){for(D=y+3;d<D;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=y,d-=y,j=0,h=3+(u&7),u>>>=3,d-=3}else{for(D=y+7;d<D;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=y,d-=y,j=0,h=11+(u&127),u>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=xi;break}for(;h--;)n.lens[n.have++]=j}}if(n.mode===xi)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=xi;break}if(n.lenbits=9,O={bits:n.lenbits},E=U0(ZZ,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,E){t.msg="invalid literal/lengths set",n.mode=xi;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},E=U0(JZ,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,E){t.msg="invalid distances set",n.mode=xi;break}if(n.mode=b1,e===y1)break e;case b1:n.mode=x1;case x1:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=u,n.bits=d,uKe(t,p),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,o=t.avail_in,u=n.hold,d=n.bits,n.mode===Mu&&(n.back=-1);break}for(n.back=0;v=n.lencode[u&(1<<n.lenbits)-1],y=v>>>24,b=v>>>16&255,S=v&65535,!(y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(b&&!(b&240)){for(A=y,C=b,T=S;v=n.lencode[T+((u&(1<<A+C)-1)>>A)],y=v>>>24,b=v>>>16&255,S=v&65535,!(A+y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=A,d-=A,n.back+=A}if(u>>>=y,d-=y,n.back+=y,n.length=S,b===0){n.mode=N9;break}if(b&32){n.back=-1,n.mode=Mu;break}if(b&64){t.msg="invalid literal/length code",n.mode=xi;break}n.extra=b&15,n.mode=_9;case _9:if(n.extra){for(D=n.extra;d<D;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=A9;case A9:for(;v=n.distcode[u&(1<<n.distbits)-1],y=v>>>24,b=v>>>16&255,S=v&65535,!(y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(!(b&240)){for(A=y,C=b,T=S;v=n.distcode[T+((u&(1<<A+C)-1)>>A)],y=v>>>24,b=v>>>16&255,S=v&65535,!(A+y<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=A,d-=A,n.back+=A}if(u>>>=y,d-=y,n.back+=y,b&64){t.msg="invalid distance code",n.mode=xi;break}n.offset=S,n.extra=b&15,n.mode=C9;case C9:if(n.extra){for(D=n.extra;d<D;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=xi;break}n.mode=j9;case j9:if(l===0)break e;if(h=p-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=xi;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),g=n.window}else g=i,m=s-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[s++]=g[m++];while(--h);n.length===0&&(n.mode=x1);break;case N9:if(l===0)break e;i[s++]=n.length,l--,n.mode=x1;break;case rj:if(n.wrap){for(;d<32;){if(o===0)break e;o--,u|=r[a++]<<d,d+=8}if(p-=l,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?Kc(n.check,i,p,s-p):oP(n.check,i,p,s-p)),p=l,n.wrap&4&&(n.flags?u:P9(u))!==n.check){t.msg="incorrect data check",n.mode=xi;break}u=0,d=0}n.mode=E9;case E9:if(n.wrap&&n.flags){for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.wrap&4&&u!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=xi;break}u=0,d=0}n.mode=k9;case k9:E=yKe;break e;case xi:E=eJ;break e;case nJ:return tJ;case rJ:default:return Kl}return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=u,n.bits=d,(n.wsize||p!==t.avail_out&&n.mode<xi&&(n.mode<rj||e!==o9))&&lJ(t,t.output,t.next_out,p-t.avail_out),f-=t.avail_in,p-=t.avail_out,t.total_in+=f,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?Kc(n.check,i,p,t.next_out-p):oP(n.check,i,p,t.next_out-p)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Mu?128:0)+(n.mode===b1||n.mode===nj?256:0),(f===0&&p===0||e===o9)&&E===op&&(E=xKe),E},kKe=t=>{if(Tp(t))return Kl;let e=t.state;return e.window&&(e.window=null),t.state=null,op},PKe=(t,e)=>{if(Tp(t))return Kl;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,op):Kl},TKe=(t,e)=>{const n=e.length;let r,i,a;return Tp(t)||(r=t.state,r.wrap!==0&&r.mode!==C5)?Kl:r.mode===C5&&(i=1,i=oP(i,e,n,0),i!==r.check)?eJ:(a=lJ(t,e,n,n),a?(r.mode=nJ,tJ):(r.havedict=1,op))};var DKe=aJ,IKe=sJ,OKe=iJ,MKe=jKe,RKe=oJ,LKe=EKe,FKe=kKe,zKe=PKe,$Ke=TKe,BKe="pako inflate (from Nodeca project)",zu={inflateReset:DKe,inflateReset2:IKe,inflateResetKeep:OKe,inflateInit:MKe,inflateInit2:RKe,inflate:LKe,inflateEnd:FKe,inflateGetHeader:zKe,inflateSetDictionary:$Ke,inflateInfo:BKe};function VKe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var UKe=VKe;const cJ=Object.prototype.toString,{Z_NO_FLUSH:HKe,Z_FINISH:WKe,Z_OK:hb,Z_STREAM_END:sj,Z_NEED_DICT:oj,Z_STREAM_ERROR:qKe,Z_DATA_ERROR:D9,Z_MEM_ERROR:KKe}=YZ;function tx(t){this.options=XZ.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new lKe,this.strm.avail_out=0;let n=zu.inflateInit2(this.strm,e.windowBits);if(n!==hb)throw new Error(lP[n]);if(this.header=new UKe,zu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=cP.string2buf(e.dictionary):cJ.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=zu.inflateSetDictionary(this.strm,e.dictionary),n!==hb)))throw new Error(lP[n])}tx.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?WKe:HKe,cJ.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=zu.inflate(n,s),a===oj&&i&&(a=zu.inflateSetDictionary(n,i),a===hb?a=zu.inflate(n,s):a===D9&&(a=oj));n.avail_in>0&&a===sj&&n.state.wrap>0&&t[n.next_in]!==0;)zu.inflateReset(n),a=zu.inflate(n,s);switch(a){case qKe:case D9:case oj:case KKe:return this.onEnd(a),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(n.avail_out===0||a===sj))if(this.options.to==="string"){let l=cP.utf8border(n.output,n.next_out),u=n.next_out-l,d=cP.buf2string(n.output,l);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(l,l+u),0),this.onData(d)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===hb&&o===0)){if(a===sj)return a=zu.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};tx.prototype.onData=function(t){this.chunks.push(t)};tx.prototype.onEnd=function(t){t===hb&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=XZ.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function GKe(t,e){const n=new tx(e);if(n.push(t),n.err)throw n.msg||lP[n.err];return n.result}var YKe=tx,XKe=GKe,QKe={Inflate:YKe,inflate:XKe};const{Inflate:ZKe,inflate:JKe}=QKe;var I9=ZKe,eGe=JKe;const uJ=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;uJ[t]=e}const O9=4294967295;function tGe(t,e,n){let r=t;for(let i=0;i<n;i++)r=uJ[(r^e[i])&255]^r>>>8;return r}function nGe(t,e){return(tGe(O9,t,e)^O9)>>>0}function M9(t,e,n){const r=t.readUint32(),i=nGe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function dJ(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function fJ(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function hJ(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function pJ(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=t[a]+(n[a]>>1)&255;for(;a<r;a++)e[a]=t[a]+(e[a-i]+n[a]>>1)&255}}function mJ(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=t[a]+n[a]&255;for(;a<r;a++)e[a]=t[a]+rGe(e[a-i],n[a],n[a-i])&255}}function rGe(t,e,n){const r=t+e-n,i=Math.abs(r-t),a=Math.abs(r-e),s=Math.abs(r-n);return i<=a&&i<=s?t:a<=s?e:n}function iGe(t,e,n,r,i,a){switch(t){case 0:dJ(e,n,i);break;case 1:fJ(e,n,i,a);break;case 2:hJ(e,n,r,i);break;case 3:pJ(e,n,r,i,a);break;case 4:mJ(e,n,r,i,a);break;default:throw new Error(`Unsupported filter: ${t}`)}}const aGe=new Uint16Array([255]),sGe=new Uint8Array(aGe.buffer),oGe=sGe[0]===255;function lGe(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*i,l=new Uint8Array(r*n*o);let u=0;for(let d=0;d<7;d++){const f=s[d],p=Math.ceil((n-f.x)/f.xStep),h=Math.ceil((r-f.y)/f.yStep);if(p<=0||h<=0)continue;const m=p*o,g=new Uint8Array(m);for(let v=0;v<h;v++){const y=e[u++],b=e.subarray(u,u+m);u+=m;const S=new Uint8Array(m);iGe(y,b,S,g,m,o),g.set(S);for(let A=0;A<p;A++){const C=f.x+A*f.xStep,T=f.y+v*f.yStep;if(!(C>=n||T>=r))for(let j=0;j<o;j++)l[(T*n+C)*o+j]=S[A*o+j]}}}if(a===16){const d=new Uint16Array(l.buffer);if(oGe)for(let f=0;f<d.length;f++)d[f]=cGe(d[f]);return d}else return l}function cGe(t){return(t&255)<<8|t>>8&255}const uGe=new Uint16Array([255]),dGe=new Uint8Array(uGe.buffer),fGe=dGe[0]===255,hGe=new Uint8Array(0);function R9(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,s=Math.ceil(a/8)*i,o=Math.ceil(a/8*i*n),l=new Uint8Array(r*o);let u=hGe,d=0,f,p;for(let h=0;h<r;h++){switch(f=e.subarray(d+1,d+1+o),p=l.subarray(h*o,(h+1)*o),e[d]){case 0:dJ(f,p,o);break;case 1:fJ(f,p,o,s);break;case 2:hJ(f,p,u,o);break;case 3:pJ(f,p,u,o,s);break;case 4:mJ(f,p,u,o,s);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=p,d+=o+1}if(a===16){const h=new Uint16Array(l.buffer);if(fGe)for(let m=0;m<h.length;m++)h[m]=pGe(h[m]);return h}else return l}function pGe(t){return(t&255)<<8|t>>8&255}const a2=Uint8Array.of(137,80,78,71,13,10,26,10);function L9(t){if(!mGe(t.readBytes(a2.length)))throw new Error("wrong PNG signature")}function mGe(t){if(t.length<a2.length)return!1;for(let e=0;e<a2.length;e++)if(t[e]!==a2[e])return!1;return!0}const gGe="tEXt",vGe=0,gJ=new TextDecoder("latin1");function yGe(t){if(xGe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const bGe=/^[\u0000-\u00FF]*$/;function xGe(t){if(!bGe.test(t))throw new Error("invalid latin1 text")}function wGe(t,e,n){const r=vJ(e);t[r]=SGe(e,n-r.length-1)}function vJ(t){for(t.mark();t.readByte()!==vGe;);const e=t.offset;t.reset();const n=gJ.decode(t.readBytes(e-t.offset-1));return t.skip(1),yGe(n),n}function SGe(t,e){return gJ.decode(t.readBytes(e))}const Xo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},lj={UNKNOWN:-1,DEFLATE:0},F9={UNKNOWN:-1,ADAPTIVE:0},cj={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},w1={NONE:0,BACKGROUND:1,PREVIOUS:2},uj={SOURCE:0,OVER:1};class _Ge extends eI{constructor(n,r={}){super(n);Mn(this,"_checkCrc");Mn(this,"_inflator");Mn(this,"_png");Mn(this,"_apng");Mn(this,"_end");Mn(this,"_hasPalette");Mn(this,"_palette");Mn(this,"_hasTransparency");Mn(this,"_transparency");Mn(this,"_compressionMethod");Mn(this,"_filterMethod");Mn(this,"_interlaceMethod");Mn(this,"_colorType");Mn(this,"_isAnimated");Mn(this,"_numberOfFrames");Mn(this,"_numberOfPlays");Mn(this,"_frames");Mn(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new I9,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=lj.UNKNOWN,this._filterMethod=F9.UNKNOWN,this._interlaceMethod=cj.UNKNOWN,this._colorType=Xo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(L9(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(L9(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case gGe:wGe(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?M9(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?M9(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=AGe(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Xo.GREYSCALE:i=1;break;case Xo.TRUECOLOUR:i=3;break;case Xo.INDEXED_COLOUR:i=1;break;case Xo.GREYSCALE_ALPHA:i=2;break;case Xo.TRUECOLOUR_ALPHA:i=4;break;case Xo.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==lj.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<r;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Xo.GREYSCALE:case Xo.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Xo.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Xo.UNKNOWN:case Xo.GREYSCALE_ALPHA:case Xo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=vJ(this),i=this.readUint8();if(i!==lj.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:eGe(a)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=R9({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const a=this._apng.frames.at(n-1);this.disposeFrame(i,a,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case w1.NONE:break;case w1.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const o=(a*n.width+s)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case w1.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,a=(s,o)=>{const l=((s+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,u=(s*r.width+o)*this._png.channels;return{index:l,frameIndex:u}};switch(r.blendOp){case uj.SOURCE:for(let s=0;s<r.height;s++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++)n.data[l+d]=r.data[u+d]}break;case uj.OVER:for(let s=0;s<r.height;s++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++){const f=r.data[u+this._png.channels-1]/i,p=d%(this._png.channels-1)===0?1:r.data[u+d],h=Math.floor(f*p+(1-f)*n.data[l+d]);n.data[l+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==F9.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===cj.NO_INTERLACE)this._png.data=R9({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===cj.ADAM7)this._png.data=lGe({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:w1.NONE,blendOp:uj.SOURCE,data:n}),this._inflator=new I9,this._writingDataChunks=!1}}function AGe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var z9;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(z9||(z9={}));function CGe(t,e){return new _Ge(t,e).decode()}var Pn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function dj(){Pn.console&&typeof Pn.console.log=="function"&&Pn.console.log.apply(Pn.console,arguments)}var Xr={log:dj,warn:function(t){Pn.console&&(typeof Pn.console.warn=="function"?Pn.console.warn.apply(Pn.console,arguments):dj.call(null,arguments))},error:function(t){Pn.console&&(typeof Pn.console.error=="function"?Pn.console.error.apply(Pn.console,arguments):dj(t))}};function fj(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){dh(r.response,e,n)},r.onerror=function(){Xr.error("could not download file")},r.send()}function $9(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function S1(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var dh=Pn.saveAs||((typeof window>"u"?"undefined":Br(window))!=="object"||window!==Pn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Pn.URL||Pn.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?$9(i.href)?fj(t,e,n):S1(i,i.target="_blank"):S1(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){S1(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if($9(t))fj(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){S1(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:Br(a)!=="object"&&(Xr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return fj(t,e,n);var i=t.type==="application/octet-stream",a=/constructor/i.test(Pn.HTMLElement)||Pn.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":Br(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var l=Pn.URL||Pn.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function yJ(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,a=n[r].process,s=i.exec(t);s&&(e=a(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}var s2=Pn.atob.bind(Pn),B9=Pn.btoa.bind(Pn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function hj(t,e){var n=t[0],r=t[1],i=t[2],a=t[3];n=Is(n,r,i,a,e[0],7,-680876936),a=Is(a,n,r,i,e[1],12,-389564586),i=Is(i,a,n,r,e[2],17,606105819),r=Is(r,i,a,n,e[3],22,-1044525330),n=Is(n,r,i,a,e[4],7,-176418897),a=Is(a,n,r,i,e[5],12,1200080426),i=Is(i,a,n,r,e[6],17,-1473231341),r=Is(r,i,a,n,e[7],22,-45705983),n=Is(n,r,i,a,e[8],7,1770035416),a=Is(a,n,r,i,e[9],12,-1958414417),i=Is(i,a,n,r,e[10],17,-42063),r=Is(r,i,a,n,e[11],22,-1990404162),n=Is(n,r,i,a,e[12],7,1804603682),a=Is(a,n,r,i,e[13],12,-40341101),i=Is(i,a,n,r,e[14],17,-1502002290),n=Os(n,r=Is(r,i,a,n,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Os(a,n,r,i,e[6],9,-1069501632),i=Os(i,a,n,r,e[11],14,643717713),r=Os(r,i,a,n,e[0],20,-373897302),n=Os(n,r,i,a,e[5],5,-701558691),a=Os(a,n,r,i,e[10],9,38016083),i=Os(i,a,n,r,e[15],14,-660478335),r=Os(r,i,a,n,e[4],20,-405537848),n=Os(n,r,i,a,e[9],5,568446438),a=Os(a,n,r,i,e[14],9,-1019803690),i=Os(i,a,n,r,e[3],14,-187363961),r=Os(r,i,a,n,e[8],20,1163531501),n=Os(n,r,i,a,e[13],5,-1444681467),a=Os(a,n,r,i,e[2],9,-51403784),i=Os(i,a,n,r,e[7],14,1735328473),n=Ms(n,r=Os(r,i,a,n,e[12],20,-1926607734),i,a,e[5],4,-378558),a=Ms(a,n,r,i,e[8],11,-2022574463),i=Ms(i,a,n,r,e[11],16,1839030562),r=Ms(r,i,a,n,e[14],23,-35309556),n=Ms(n,r,i,a,e[1],4,-1530992060),a=Ms(a,n,r,i,e[4],11,1272893353),i=Ms(i,a,n,r,e[7],16,-155497632),r=Ms(r,i,a,n,e[10],23,-1094730640),n=Ms(n,r,i,a,e[13],4,681279174),a=Ms(a,n,r,i,e[0],11,-358537222),i=Ms(i,a,n,r,e[3],16,-722521979),r=Ms(r,i,a,n,e[6],23,76029189),n=Ms(n,r,i,a,e[9],4,-640364487),a=Ms(a,n,r,i,e[12],11,-421815835),i=Ms(i,a,n,r,e[15],16,530742520),n=Rs(n,r=Ms(r,i,a,n,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Rs(a,n,r,i,e[7],10,1126891415),i=Rs(i,a,n,r,e[14],15,-1416354905),r=Rs(r,i,a,n,e[5],21,-57434055),n=Rs(n,r,i,a,e[12],6,1700485571),a=Rs(a,n,r,i,e[3],10,-1894986606),i=Rs(i,a,n,r,e[10],15,-1051523),r=Rs(r,i,a,n,e[1],21,-2054922799),n=Rs(n,r,i,a,e[8],6,1873313359),a=Rs(a,n,r,i,e[15],10,-30611744),i=Rs(i,a,n,r,e[6],15,-1560198380),r=Rs(r,i,a,n,e[13],21,1309151649),n=Rs(n,r,i,a,e[4],6,-145523070),a=Rs(a,n,r,i,e[11],10,-1120210379),i=Rs(i,a,n,r,e[2],15,718787259),r=Rs(r,i,a,n,e[9],21,-343485551),t[0]=Jd(n,t[0]),t[1]=Jd(r,t[1]),t[2]=Jd(i,t[2]),t[3]=Jd(a,t[3])}function k_(t,e,n,r,i,a){return e=Jd(Jd(e,t),Jd(r,a)),Jd(e<<i|e>>>32-i,n)}function Is(t,e,n,r,i,a,s){return k_(e&n|~e&r,t,e,i,a,s)}function Os(t,e,n,r,i,a,s){return k_(e&r|n&~r,t,e,i,a,s)}function Ms(t,e,n,r,i,a,s){return k_(e^n^r,t,e,i,a,s)}function Rs(t,e,n,r,i,a,s){return k_(n^(e|~r),t,e,i,a,s)}function bJ(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)hj(r,jGe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(hj(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,hj(r,i),r}function jGe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var V9="0123456789abcdef".split("");function NGe(t){for(var e="",n=0;n<4;n++)e+=V9[t>>8*n+4&15]+V9[t>>8*n&15];return e}function EGe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function uP(t){return bJ(t).map(EGe).join("")}var kGe=function(t){for(var e=0;e<t.length;e++)t[e]=NGe(t[e]);return t.join("")}(bJ("hello"))!="5d41402abc4b2a76b9719d911017c592";function Jd(t,e){if(kGe){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function dP(t,e){var n,r,i,a;if(t!==n){for(var s=(i=t,a=1+(256/t.length|0),new Array(a+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+s.charCodeAt(l))%256,o[l]=o[u],o[u]=d}n=t,r=o}else o=r;var f=e.length,p=0,h=0,m="";for(l=0;l<f;l++)h=(h+(d=o[p=(p+1)%256]))%256,o[p]=o[h],o[h]=d,s=o[(o[p]+o[h])%256],m+=String.fromCharCode(e.charCodeAt(l)^s);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var U9={print:4,modify:8,copy:16,"annot-forms":32};function Xp(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(U9.perm!==void 0)throw new Error("Invalid permission: "+o);i+=U9[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=uP(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=dP(this.encryptionKey,this.padding)}function Qp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function H9(t){if(Br(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!i],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[n]){var s=e[n][a];try{s[0].apply(t,r)}catch(o){Pn.console&&Xr.error("jsPDF PubSub Error",o.message,o)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j5(t){if(!(this instanceof j5))return new j5(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function xJ(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ph(t,e,n,r,i){if(!(this instanceof ph))return new ph(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,xJ.call(this,r,i)}function _m(t,e,n,r,i){if(!(this instanceof _m))return new _m(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,xJ.call(this,r,i)}function pn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,l=16,u="S",d=null;Br(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),s=t.filters||(a===!0?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=H9;var m="1.3",g=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(R){m=R};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return v};var y=h.__private__.getPageFormat=function(R){return v[R]};i=i||"a4";var b="compat",S="advanced",A=b;function C(){this.saveGraphicsState(),he(new Ie(xt,0,0,-xt,0,ts()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),u="n",A=S}function T(){this.restoreGraphicsState(),u="S",A=b}var j=h.__private__.combineFontStyleAndFontWeight=function(R,X){if(R=="bold"&&X=="normal"||R=="bold"&&X==400||R=="normal"&&X=="italic"||R=="bold"&&X=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return X&&(R=X==400||X==="normal"?R==="italic"?"italic":"normal":X!=700&&X!=="bold"||R!=="normal"?(X==700?"bold":X)+""+R:"bold"),R};h.advancedAPI=function(R){var X=A===b;return X&&C.call(this),typeof R!="function"||(R(this),X&&T.call(this)),this},h.compatAPI=function(R){var X=A===S;return X&&T.call(this),typeof R!="function"||(R(this),X&&C.call(this)),this},h.isAdvancedAPI=function(){return A===S};var E,k=function(R){if(A!==S)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=h.roundToPrecision=h.__private__.roundToPrecision=function(R,X){var me=e||X;if(isNaN(R)||isNaN(me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(me).replace(/0+$/,"")};E=h.hpf=h.__private__.hpf=typeof l=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return O(R,l)}:l==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return O(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return O(R,16)};var D=h.f2=h.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return O(R,2)},M=h.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return O(R,3)},L=h.scale=h.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return A===b?R*xt:A===S?R:void 0},V=function(R){return L(function(X){return A===b?ts()-X:A===S?X:void 0}(R))};h.__private__.setPrecision=h.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(e=parseInt(R,10))};var Q,Y="00000000000000000000000000000000",J=h.__private__.getFileId=function(){return Y},q=h.__private__.setFileId=function(R){return Y=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(yr=new Xp(d.userPermissions,d.userPassword,d.ownerPassword,Y)),Y};h.setFileId=function(R){return q(R),this},h.getFileId=function(){return J()};var ee=h.__private__.convertDateToPDFDate=function(R){var X=R.getTimezoneOffset(),me=X<0?"+":"-",Ne=Math.floor(Math.abs(X/60)),$e=Math.abs(X%60),rt=[me,te(Ne),"'",te($e),"'"].join("");return["D:",R.getFullYear(),te(R.getMonth()+1),te(R.getDate()),te(R.getHours()),te(R.getMinutes()),te(R.getSeconds()),rt].join("")},le=h.__private__.convertPDFDateToDate=function(R){var X=parseInt(R.substr(2,4),10),me=parseInt(R.substr(6,2),10)-1,Ne=parseInt(R.substr(8,2),10),$e=parseInt(R.substr(10,2),10),rt=parseInt(R.substr(12,2),10),st=parseInt(R.substr(14,2),10);return new Date(X,me,Ne,$e,rt,st,0)},se=h.__private__.setCreationDate=function(R){var X;if(R===void 0&&(R=new Date),R instanceof Date)X=ee(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");X=R}return Q=X},$=h.__private__.getCreationDate=function(R){var X=Q;return R==="jsDate"&&(X=le(Q)),X};h.setCreationDate=function(R){return se(R),this},h.getCreationDate=function(R){return $(R)};var G,te=h.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},oe=h.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},ge=0,_e=[],Ce=[],fe=0,be=[],we=[],ie=!1,He=Ce;h.__private__.setCustomOutputDestination=function(R){ie=!0,He=R};var Me=function(R){ie||(He=R)};h.__private__.resetCustomOutputDestination=function(){ie=!1,He=Ce};var he=h.__private__.out=function(R){return R=R.toString(),fe+=R.length+1,He.push(R),He},We=h.__private__.write=function(R){return he(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},pt=h.__private__.getArrayBuffer=function(R){for(var X=R.length,me=new ArrayBuffer(X),Ne=new Uint8Array(me);X--;)Ne[X]=R.charCodeAt(X);return me},gt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return gt};var Xe=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(R){return Xe=A===S?R/xt:R,this};var Ot,ft=h.__private__.getFontSize=h.getFontSize=function(){return A===b?Xe:Xe*xt},ut=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(R){return ut=R,this},h.__private__.getR2L=h.getR2L=function(){return ut};var Dt,Yt=h.__private__.setZoomMode=function(R){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))Ot=R;else if(isNaN(R)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');Ot=R}else Ot=parseInt(R,10)};h.__private__.getZoomMode=function(){return Ot};var Qt,Ft=h.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');Dt=R};h.__private__.getPageMode=function(){return Dt};var sn=h.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');Qt=R};h.__private__.getLayoutMode=function(){return Qt},h.__private__.setDisplayMode=h.setDisplayMode=function(R,X,me){return Yt(R),sn(X),Ft(me),this};var at={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(R){if(Object.keys(at).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return at[R]},h.__private__.getDocumentProperties=function(){return at},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(R){for(var X in at)at.hasOwnProperty(X)&&R[X]&&(at[X]=R[X]);return this},h.__private__.setDocumentProperty=function(R,X){if(Object.keys(at).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return at[R]=X};var vt,xt,tt,zt,ht,mt={},Mt={},_t=[],Ht={},gn={},on={},wt={},Xn=null,fn=0,qt=[],Sn=new H9(h),Oi=t.hotfixes||[],Nr={},wa={},Re=[],Ie=function R(X,me,Ne,$e,rt,st){if(!(this instanceof R))return new R(X,me,Ne,$e,rt,st);isNaN(X)&&(X=1),isNaN(me)&&(me=0),isNaN(Ne)&&(Ne=0),isNaN($e)&&($e=1),isNaN(rt)&&(rt=0),isNaN(st)&&(st=0),this._matrix=[X,me,Ne,$e,rt,st]};Object.defineProperty(Ie.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Ie.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Ie.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Ie.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Ie.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Ie.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Ie.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Ie.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Ie.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Ie.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Ie.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Ie.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Ie.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ie.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ie.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ie.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ie.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(R)},Ie.prototype.multiply=function(R){var X=R.sx*this.sx+R.shy*this.shx,me=R.sx*this.shy+R.shy*this.sy,Ne=R.shx*this.sx+R.sy*this.shx,$e=R.shx*this.shy+R.sy*this.sy,rt=R.tx*this.sx+R.ty*this.shx+this.tx,st=R.tx*this.shy+R.ty*this.sy+this.ty;return new Ie(X,me,Ne,$e,rt,st)},Ie.prototype.decompose=function(){var R=this.sx,X=this.shy,me=this.shx,Ne=this.sy,$e=this.tx,rt=this.ty,st=Math.sqrt(R*R+X*X),Kt=(R/=st)*me+(X/=st)*Ne;me-=R*Kt,Ne-=X*Kt;var Zt=Math.sqrt(me*me+Ne*Ne);return Kt/=Zt,R*(Ne/=Zt)<X*(me/=Zt)&&(R=-R,X=-X,Kt=-Kt,st=-st),{scale:new Ie(st,0,0,Zt,0,0),translate:new Ie(1,0,0,1,$e,rt),rotate:new Ie(R,X,-X,R,0,0),skew:new Ie(1,0,Kt,1,0,0)}},Ie.prototype.toString=function(R){return this.join(" ")},Ie.prototype.inversed=function(){var R=this.sx,X=this.shy,me=this.shx,Ne=this.sy,$e=this.tx,rt=this.ty,st=1/(R*Ne-X*me),Kt=Ne*st,Zt=-X*st,yn=-me*st,xn=R*st;return new Ie(Kt,Zt,yn,xn,-Kt*$e-yn*rt,-Zt*$e-xn*rt)},Ie.prototype.applyToPoint=function(R){var X=R.x*this.sx+R.y*this.shx+this.tx,me=R.x*this.shy+R.y*this.sy+this.ty;return new Ys(X,me)},Ie.prototype.applyToRectangle=function(R){var X=this.applyToPoint(R),me=this.applyToPoint(new Ys(R.x+R.w,R.y+R.h));return new zo(X.x,X.y,me.x-X.x,me.y-X.y)},Ie.prototype.clone=function(){var R=this.sx,X=this.shy,me=this.shx,Ne=this.sy,$e=this.tx,rt=this.ty;return new Ie(R,X,me,Ne,$e,rt)},h.Matrix=Ie;var Ke=h.matrixMult=function(R,X){return X.multiply(R)},At=new Ie(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=At;var lt=function(R,X){if(!gn[R]){var me=(X instanceof ph?"Sh":"P")+(Object.keys(Ht).length+1).toString(10);X.id=me,gn[R]=me,Ht[me]=X,Sn.publish("addPattern",X)}};h.ShadingPattern=ph,h.TilingPattern=_m,h.addShadingPattern=function(R,X){return k("addShadingPattern()"),lt(R,X),this},h.beginTilingPattern=function(R){k("beginTilingPattern()"),Nl(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},h.endTilingPattern=function(R,X){k("endTilingPattern()"),X.stream=we[G].join(`
`),lt(R,X),Sn.publish("endTilingPattern",X),Re.pop().restore()};var Gt,vn=h.__private__.newObject=function(){var R=qn();return $t(R,!0),R},qn=h.__private__.newObjectDeferred=function(){return ge++,_e[ge]=function(){return fe},ge},$t=function(R,X){return X=typeof X=="boolean"&&X,_e[R]=fe,X&&he(R+" 0 obj"),R},Kn=h.__private__.newAdditionalObject=function(){var R={objId:qn(),content:""};return be.push(R),R},bi=qn(),_n=qn(),gr=h.__private__.decodeColorString=function(R){var X=R.split(" ");if(X.length!==2||X[1]!=="g"&&X[1]!=="G")X.length!==5||X[4]!=="k"&&X[4]!=="K"||(X=[(1-X[0])*(1-X[3]),(1-X[1])*(1-X[3]),(1-X[2])*(1-X[3]),"r"]);else{var me=parseFloat(X[0]);X=[me,me,me,"r"]}for(var Ne="#",$e=0;$e<3;$e++)Ne+=("0"+Math.floor(255*parseFloat(X[$e])).toString(16)).slice(-2);return Ne},vr=h.__private__.encodeColorString=function(R){var X;typeof R=="string"&&(R={ch1:R});var me=R.ch1,Ne=R.ch2,$e=R.ch3,rt=R.ch4,st=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof me=="string"&&me.charAt(0)!=="#"){var Kt=new yJ(me);if(Kt.ok)me=Kt.toHex();else if(!/^\d*\.?\d*$/.test(me))throw new Error('Invalid color "'+me+'" passed to jsPDF.encodeColorString.')}if(typeof me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(me)&&(me="#"+me[1]+me[1]+me[2]+me[2]+me[3]+me[3]),typeof me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(me)){var Zt=parseInt(me.substr(1),16);me=Zt>>16&255,Ne=Zt>>8&255,$e=255&Zt}if(Ne===void 0||rt===void 0&&me===Ne&&Ne===$e)X=typeof me=="string"?me+" "+st[0]:R.precision===2?D(me/255)+" "+st[0]:M(me/255)+" "+st[0];else if(rt===void 0||Br(rt)==="object"){if(rt&&!isNaN(rt.a)&&rt.a===0)return["1.","1.","1.",st[1]].join(" ");X=typeof me=="string"?[me,Ne,$e,st[1]].join(" "):R.precision===2?[D(me/255),D(Ne/255),D($e/255),st[1]].join(" "):[M(me/255),M(Ne/255),M($e/255),st[1]].join(" ")}else X=typeof me=="string"?[me,Ne,$e,rt,st[2]].join(" "):R.precision===2?[D(me),D(Ne),D($e),D(rt),st[2]].join(" "):[M(me),M(Ne),M($e),M(rt),st[2]].join(" ");return X},Qn=h.__private__.getFilters=function(){return s},sr=h.__private__.putStream=function(R){var X=(R=R||{}).data||"",me=R.filters||Qn(),Ne=R.alreadyAppliedFilters||[],$e=R.addLength1||!1,rt=X.length,st=R.objectId,Kt=function(Dr){return Dr};if(d!==null&&st===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Kt=yr.encryptor(st,0));var Zt={};me===!0&&(me=["FlateEncode"]);var yn=R.additionalKeyValues||[],xn=(Zt=pn.API.processDataByFilters!==void 0?pn.API.processDataByFilters(X,me):{data:X,reverseChain:[]}).reverseChain+(Array.isArray(Ne)?Ne.join(" "):Ne.toString());if(Zt.data.length!==0&&(yn.push({key:"Length",value:Zt.data.length}),$e===!0&&yn.push({key:"Length1",value:rt})),xn.length!=0)if(xn.split("/").length-1==1)yn.push({key:"Filter",value:xn});else{yn.push({key:"Filter",value:"["+xn+"]"});for(var er=0;er<yn.length;er+=1)if(yn[er].key==="DecodeParms"){for(var fr=[],Wr=0;Wr<Zt.reverseChain.split("/").length-1;Wr+=1)fr.push("null");fr.push(yn[er].value),yn[er].value="["+fr.join(" ")+"]"}}he("<<");for(var br=0;br<yn.length;br++)he("/"+yn[br].key+" "+yn[br].value);he(">>"),Zt.data.length!==0&&(he("stream"),he(Kt(Zt.data)),he("endstream"))},Rr=h.__private__.putPage=function(R){var X=R.number,me=R.data,Ne=R.objId,$e=R.contentsObjId;$t(Ne,!0),he("<</Type /Page"),he("/Parent "+R.rootDictionaryObjId+" 0 R"),he("/Resources "+R.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(E(R.mediaBox.bottomLeftX))+" "+parseFloat(E(R.mediaBox.bottomLeftY))+" "+E(R.mediaBox.topRightX)+" "+E(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&he("/CropBox ["+E(R.cropBox.bottomLeftX)+" "+E(R.cropBox.bottomLeftY)+" "+E(R.cropBox.topRightX)+" "+E(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&he("/BleedBox ["+E(R.bleedBox.bottomLeftX)+" "+E(R.bleedBox.bottomLeftY)+" "+E(R.bleedBox.topRightX)+" "+E(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&he("/TrimBox ["+E(R.trimBox.bottomLeftX)+" "+E(R.trimBox.bottomLeftY)+" "+E(R.trimBox.topRightX)+" "+E(R.trimBox.topRightY)+"]"),R.artBox!==null&&he("/ArtBox ["+E(R.artBox.bottomLeftX)+" "+E(R.artBox.bottomLeftY)+" "+E(R.artBox.topRightX)+" "+E(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&he("/UserUnit "+R.userUnit),Sn.publish("putPage",{objId:Ne,pageContext:qt[X],pageNumber:X,page:me}),he("/Contents "+$e+" 0 R"),he(">>"),he("endobj");var rt=me.join(`
`);return A===S&&(rt+=`
Q`),$t($e,!0),sr({data:rt,filters:Qn(),objectId:$e}),he("endobj"),Ne},bs=h.__private__.putPages=function(){var R,X,me=[];for(R=1;R<=fn;R++)qt[R].objId=qn(),qt[R].contentsObjId=qn();for(R=1;R<=fn;R++)me.push(Rr({number:R,data:we[R],objId:qt[R].objId,contentsObjId:qt[R].contentsObjId,mediaBox:qt[R].mediaBox,cropBox:qt[R].cropBox,bleedBox:qt[R].bleedBox,trimBox:qt[R].trimBox,artBox:qt[R].artBox,userUnit:qt[R].userUnit,rootDictionaryObjId:bi,resourceDictionaryObjId:_n}));$t(bi,!0),he("<</Type /Pages");var Ne="/Kids [";for(X=0;X<fn;X++)Ne+=me[X]+" 0 R ";he(Ne+"]"),he("/Count "+fn),he(">>"),he("endobj"),Sn.publish("postPutPages")},Sa=function(R){Sn.publish("putFont",{font:R,out:he,newObject:vn,putStream:sr}),R.isAlreadyPutted!==!0&&(R.objectNumber=vn(),he("<<"),he("/Type /Font"),he("/BaseFont /"+Qp(R.postScriptName)),he("/Subtype /Type1"),typeof R.encoding=="string"&&he("/Encoding /"+R.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},Do=function(R){R.objectNumber=vn();var X=[];X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Form"}),X.push({key:"BBox",value:"["+[E(R.x),E(R.y),E(R.x+R.width),E(R.y+R.height)].join(" ")+"]"}),X.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var me=R.pages[1].join(`
`);sr({data:me,additionalKeyValues:X,objectId:R.objectNumber}),he("endobj")},Io=function(R,X){X||(X=21);var me=vn(),Ne=function(st,Kt){var Zt,yn=[],xn=1/(Kt-1);for(Zt=0;Zt<1;Zt+=xn)yn.push(Zt);if(yn.push(1),st[0].offset!=0){var er={offset:0,color:st[0].color};st.unshift(er)}if(st[st.length-1].offset!=1){var fr={offset:1,color:st[st.length-1].color};st.push(fr)}for(var Wr="",br=0,Dr=0;Dr<yn.length;Dr++){for(Zt=yn[Dr];Zt>st[br+1].offset;)br++;var Gr=st[br].offset,Jr=(Zt-Gr)/(st[br+1].offset-Gr),kr=st[br].color,Qi=st[br+1].color;Wr+=oe(Math.round((1-Jr)*kr[0]+Jr*Qi[0]).toString(16))+oe(Math.round((1-Jr)*kr[1]+Jr*Qi[1]).toString(16))+oe(Math.round((1-Jr)*kr[2]+Jr*Qi[2]).toString(16))}return Wr.trim()}(R.colors,X),$e=[];$e.push({key:"FunctionType",value:"0"}),$e.push({key:"Domain",value:"[0.0 1.0]"}),$e.push({key:"Size",value:"["+X+"]"}),$e.push({key:"BitsPerSample",value:"8"}),$e.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$e.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sr({data:Ne,additionalKeyValues:$e,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:me}),he("endobj"),R.objectNumber=vn(),he("<< /ShadingType "+R.type),he("/ColorSpace /DeviceRGB");var rt="/Coords ["+E(parseFloat(R.coords[0]))+" "+E(parseFloat(R.coords[1]))+" ";R.type===2?rt+=E(parseFloat(R.coords[2]))+" "+E(parseFloat(R.coords[3])):rt+=E(parseFloat(R.coords[2]))+" "+E(parseFloat(R.coords[3]))+" "+E(parseFloat(R.coords[4]))+" "+E(parseFloat(R.coords[5])),he(rt+="]"),R.matrix&&he("/Matrix ["+R.matrix.toString()+"]"),he("/Function "+me+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},Er=function(R,X){var me=qn(),Ne=vn();X.push({resourcesOid:me,objectOid:Ne}),R.objectNumber=Ne;var $e=[];$e.push({key:"Type",value:"/Pattern"}),$e.push({key:"PatternType",value:"1"}),$e.push({key:"PaintType",value:"1"}),$e.push({key:"TilingType",value:"1"}),$e.push({key:"BBox",value:"["+R.boundingBox.map(E).join(" ")+"]"}),$e.push({key:"XStep",value:E(R.xStep)}),$e.push({key:"YStep",value:E(R.yStep)}),$e.push({key:"Resources",value:me+" 0 R"}),R.matrix&&$e.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),sr({data:R.stream,additionalKeyValues:$e,objectId:R.objectNumber}),he("endobj")},Oo=function(R){for(var X in R.objectNumber=vn(),he("<<"),R)switch(X){case"opacity":he("/ca "+D(R[X]));break;case"stroke-opacity":he("/CA "+D(R[X]))}he(">>"),he("endobj")},ua=function(R){$t(R.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var X in he("/Font <<"),mt)mt.hasOwnProperty(X)&&(f===!1||f===!0&&p.hasOwnProperty(X))&&he("/"+X+" "+mt[X].objectNumber+" 0 R");he(">>")}(),function(){if(Object.keys(Ht).length>0){for(var X in he("/Shading <<"),Ht)Ht.hasOwnProperty(X)&&Ht[X]instanceof ph&&Ht[X].objectNumber>=0&&he("/"+X+" "+Ht[X].objectNumber+" 0 R");Sn.publish("putShadingPatternDict"),he(">>")}}(),function(X){if(Object.keys(Ht).length>0){for(var me in he("/Pattern <<"),Ht)Ht.hasOwnProperty(me)&&Ht[me]instanceof h.TilingPattern&&Ht[me].objectNumber>=0&&Ht[me].objectNumber<X&&he("/"+me+" "+Ht[me].objectNumber+" 0 R");Sn.publish("putTilingPatternDict"),he(">>")}}(R.objectOid),function(){if(Object.keys(on).length>0){var X;for(X in he("/ExtGState <<"),on)on.hasOwnProperty(X)&&on[X].objectNumber>=0&&he("/"+X+" "+on[X].objectNumber+" 0 R");Sn.publish("putGStateDict"),he(">>")}}(),function(){for(var X in he("/XObject <<"),Nr)Nr.hasOwnProperty(X)&&Nr[X].objectNumber>=0&&he("/"+X+" "+Nr[X].objectNumber+" 0 R");Sn.publish("putXobjectDict"),he(">>")}(),he(">>"),he("endobj")},$c=function(R){Mt[R.fontName]=Mt[R.fontName]||{},Mt[R.fontName][R.fontStyle]=R.id},qs=function(R,X,me,Ne,$e){var rt={id:"F"+(Object.keys(mt).length+1).toString(10),postScriptName:R,fontName:X,fontStyle:me,encoding:Ne,isStandardFont:$e||!1,metadata:{}};return Sn.publish("addFont",{font:rt,instance:this}),mt[rt.id]=rt,$c(rt),rt.id},Ni=h.__private__.pdfEscape=h.pdfEscape=function(R,X){return function(me,Ne){var $e,rt,st,Kt,Zt,yn,xn,er,fr;if(st=(Ne=Ne||{}).sourceEncoding||"Unicode",Zt=Ne.outputEncoding,(Ne.autoencode||Zt)&&mt[vt].metadata&&mt[vt].metadata[st]&&mt[vt].metadata[st].encoding&&(Kt=mt[vt].metadata[st].encoding,!Zt&&mt[vt].encoding&&(Zt=mt[vt].encoding),!Zt&&Kt.codePages&&(Zt=Kt.codePages[0]),typeof Zt=="string"&&(Zt=Kt[Zt]),Zt)){for(xn=!1,yn=[],$e=0,rt=me.length;$e<rt;$e++)(er=Zt[me.charCodeAt($e)])?yn.push(String.fromCharCode(er)):yn.push(me[$e]),yn[$e].charCodeAt(0)>>8&&(xn=!0);me=yn.join("")}for($e=me.length;xn===void 0&&$e!==0;)me.charCodeAt($e-1)>>8&&(xn=!0),$e--;if(!xn)return me;for(yn=Ne.noBOM?[]:[254,255],$e=0,rt=me.length;$e<rt;$e++){if((fr=(er=me.charCodeAt($e))>>8)>>8)throw new Error("Character at position "+$e+" of string '"+me+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");yn.push(fr),yn.push(er-(fr<<8))}return String.fromCharCode.apply(void 0,yn)}(R,X).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},es=h.__private__.beginPage=function(R){we[++fn]=[],qt[fn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},Bc(fn),Me(we[G])},wl=function(R,X){var me,Ne,$e;switch(n=X||n,typeof R=="string"&&(me=y(R.toLowerCase()),Array.isArray(me)&&(Ne=me[0],$e=me[1])),Array.isArray(R)&&(Ne=R[0]*xt,$e=R[1]*xt),isNaN(Ne)&&(Ne=i[0],$e=i[1]),(Ne>14400||$e>14400)&&(Xr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ne=Math.min(14400,Ne),$e=Math.min(14400,$e)),i=[Ne,$e],n.substr(0,1)){case"l":$e>Ne&&(i=[$e,Ne]);break;case"p":Ne>$e&&(i=[$e,Ne])}es(i),Xi(tc),he(uo),dr!==0&&he(dr+" J"),Nu!==0&&he(Nu+" j"),Sn.publish("addPage",{pageNumber:fn})},Ks=function(R){R>0&&R<=fn&&(we.splice(R,1),qt.splice(R,1),fn--,G>fn&&(G=fn),this.setPage(G))},Bc=function(R){R>0&&R<=fn&&(G=R)},Sl=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return we.length-1},Vc=function(R,X,me){var Ne,$e=void 0;return me=me||{},R=R!==void 0?R:mt[vt].fontName,X=X!==void 0?X:mt[vt].fontStyle,Ne=R.toLowerCase(),Mt[Ne]!==void 0&&Mt[Ne][X]!==void 0?$e=Mt[Ne][X]:Mt[R]!==void 0&&Mt[R][X]!==void 0?$e=Mt[R][X]:me.disableWarning===!1&&Xr.warn("Unable to look up font label for font '"+R+"', '"+X+"'. Refer to getFontList() for available fonts."),$e||me.noFallback||($e=Mt.times[X])==null&&($e=Mt.times.normal),$e},Tn=h.__private__.putInfo=function(){var R=vn(),X=function(Ne){return Ne};for(var me in d!==null&&(X=yr.encryptor(R,0)),he("<<"),he("/Producer ("+Ni(X("jsPDF "+pn.version))+")"),at)at.hasOwnProperty(me)&&at[me]&&he("/"+me.substr(0,1).toUpperCase()+me.substr(1)+" ("+Ni(X(at[me]))+")");he("/CreationDate ("+Ni(X(Q))+")"),he(">>"),he("endobj")},Uc=h.__private__.putCatalog=function(R){var X=(R=R||{}).rootDictionaryObjId||bi;switch(vn(),he("<<"),he("/Type /Catalog"),he("/Pages "+X+" 0 R"),Ot||(Ot="fullwidth"),Ot){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var me=""+Ot;me.substr(me.length-1)==="%"&&(Ot=parseInt(Ot)/100),typeof Ot=="number"&&he("/OpenAction [3 0 R /XYZ null null "+D(Ot)+"]")}switch(Qt||(Qt="continuous"),Qt){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}Dt&&he("/PageMode /"+Dt),Sn.publish("putCatalog"),he(">>"),he("endobj")},Zr=h.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(ge+1)),he("/Root "+ge+" 0 R"),he("/Info "+(ge-1)+" 0 R"),d!==null&&he("/Encrypt "+yr.oid+" 0 R"),he("/ID [ <"+Y+"> <"+Y+"> ]"),he(">>")},_l=h.__private__.putHeader=function(){he("%PDF-"+m),he("%ºß¬à")},_u=h.__private__.putXRef=function(){var R="0000000000";he("xref"),he("0 "+(ge+1)),he("0000000000 65535 f ");for(var X=1;X<=ge;X++)typeof _e[X]=="function"?he((R+_e[X]()).slice(-10)+" 00000 n "):_e[X]!==void 0?he((R+_e[X]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},Jn=h.__private__.buildDocument=function(){var R;ge=0,fe=0,Ce=[],_e=[],be=[],bi=qn(),_n=qn(),Me(Ce),Sn.publish("buildDocument"),_l(),bs(),function(){Sn.publish("putAdditionalObjects");for(var me=0;me<be.length;me++){var Ne=be[me];$t(Ne.objId,!0),he(Ne.content),he("endobj")}Sn.publish("postPutAdditionalObjects")}(),R=[],function(){for(var me in mt)mt.hasOwnProperty(me)&&(f===!1||f===!0&&p.hasOwnProperty(me))&&Sa(mt[me])}(),function(){var me;for(me in on)on.hasOwnProperty(me)&&Oo(on[me])}(),function(){for(var me in Nr)Nr.hasOwnProperty(me)&&Do(Nr[me])}(),function(me){var Ne;for(Ne in Ht)Ht.hasOwnProperty(Ne)&&(Ht[Ne]instanceof ph?Io(Ht[Ne]):Ht[Ne]instanceof _m&&Er(Ht[Ne],me))}(R),Sn.publish("putResources"),R.forEach(ua),ua({resourcesOid:_n,objectOid:Number.MAX_SAFE_INTEGER}),Sn.publish("postPutResources"),d!==null&&(yr.oid=vn(),he("<<"),he("/Filter /Standard"),he("/V "+yr.v),he("/R "+yr.r),he("/U <"+yr.toHexString(yr.U)+">"),he("/O <"+yr.toHexString(yr.O)+">"),he("/P "+yr.P),he(">>"),he("endobj")),Tn(),Uc();var X=fe;return _u(),Zr(),he("startxref"),he(""+X),he("%%EOF"),Me(we[G]),Ce.join(`
`)},xs=h.__private__.getBlob=function(R){return new Blob([pt(R)],{type:"application/pdf"})},da=h.output=h.__private__.output=(Gt=function(R,X){switch(typeof(X=X||{})=="string"?X={filename:X}:X.filename=X.filename||"generated.pdf",R){case void 0:return Jn();case"save":h.save(X.filename);break;case"arraybuffer":return pt(Jn());case"blob":return xs(Jn());case"bloburi":case"bloburl":if(Pn.URL!==void 0&&typeof Pn.URL.createObjectURL=="function")return Pn.URL&&Pn.URL.createObjectURL(xs(Jn()))||void 0;Xr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var me="",Ne=Jn();try{me=B9(Ne)}catch{me=B9(unescape(encodeURIComponent(Ne)))}return"data:application/pdf;filename="+X.filename+";base64,"+me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pn)==="[object Window]"){var $e="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",rt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';X.pdfObjectUrl&&($e=X.pdfObjectUrl,rt="");var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+$e+'"'+rt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(X)+");<\/script></body></html>",Kt=Pn.open();return Kt!==null&&Kt.document.write(st),Kt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pn)==="[object Window]"){var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(X.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+X.filename+'" width="500px" height="400px" /></body></html>',yn=Pn.open();if(yn!==null){yn.document.write(Zt);var xn=this;yn.document.documentElement.querySelector("#pdfViewer").onload=function(){yn.document.title=X.filename,yn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(xn.output("bloburl"))}}return yn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var er='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",X)+'"></iframe></body></html>',fr=Pn.open();if(fr!==null&&(fr.document.write(er),fr.document.title=X.filename),fr||typeof safari>"u")return fr;break;case"datauri":case"dataurl":return Pn.document.location.href=this.output("datauristring",X);default:return null}},Gt.foo=function(){try{return Gt.apply(this,arguments)}catch(me){var R=me.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var X="Error in function "+R.split(`
`)[0].split("<")[0]+": "+me.message;if(!Pn.console)throw new Error(X);Pn.console.error(X,me),Pn.alert&&alert(X)}},Gt.foo.bar=Gt,Gt.foo),ws=function(R){return Array.isArray(Oi)===!0&&Oi.indexOf(R)>-1};switch(r){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=ws("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);xt=r}var yr=null;se(),q();var _a=h.__private__.getPageInfo=h.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:qt[R].objId,pageNumber:R,pageContext:qt[R]}},Mo=h.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var X in qt)if(qt[X].objId===R)break;return _a(X)},Jl=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:qt[G].objId,pageNumber:G,pageContext:qt[G]}};h.addPage=function(){return wl.apply(this,arguments),this},h.setPage=function(){return Bc.apply(this,arguments),Me.call(this,we[G]),this},h.insertPage=function(R){return this.addPage(),this.movePage(G,R),this},h.movePage=function(R,X){var me,Ne;if(R>X){me=we[R],Ne=qt[R];for(var $e=R;$e>X;$e--)we[$e]=we[$e-1],qt[$e]=qt[$e-1];we[X]=me,qt[X]=Ne,this.setPage(X)}else if(R<X){me=we[R],Ne=qt[R];for(var rt=R;rt<X;rt++)we[rt]=we[rt+1],qt[rt]=qt[rt+1];we[X]=me,qt[X]=Ne,this.setPage(X)}return this},h.deletePage=function(){return Ks.apply(this,arguments),this},h.__private__.text=h.text=function(R,X,me,Ne,$e){var rt,st,Kt,Zt,yn,xn,er,fr,Wr,br=(Ne=Ne||{}).scope||this;if(typeof R=="number"&&typeof X=="number"&&(typeof me=="string"||Array.isArray(me))){var Dr=me;me=X,X=R,R=Dr}if(arguments[3]instanceof Ie==0?(Kt=arguments[4],Zt=arguments[5],Br(er=arguments[3])==="object"&&er!==null||(typeof Kt=="string"&&(Zt=Kt,Kt=null),typeof er=="string"&&(Zt=er,er=null),typeof er=="number"&&(Kt=er,er=null),Ne={flags:er,angle:Kt,align:Zt})):(k("The transform parameter of text() with a Matrix value"),Wr=$e),isNaN(X)||isNaN(me)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return br;var Gr,Jr="",kr=typeof Ne.lineHeightFactor=="number"?Ne.lineHeightFactor:Lo,Qi=br.internal.scaleFactor;function Wc(Pe){return Pe=Pe.split("	").join(Array(Ne.TabLen||9).join(" ")),Ni(Pe,er)}function Qs(Pe){for(var je,ke=Pe.concat(),Oe=[],ze=ke.length;ze--;)typeof(je=ke.shift())=="string"?Oe.push(je):Array.isArray(Pe)&&(je.length===1||je[1]===void 0&&je[2]===void 0)?Oe.push(je[0]):Oe.push([je[0],je[1],je[2]]);return Oe}function w(Pe,je){var ke;if(typeof Pe=="string")ke=je(Pe)[0];else if(Array.isArray(Pe)){for(var Oe,ze,Ve=Pe.concat(),Qe=[],et=Ve.length;et--;)typeof(Oe=Ve.shift())=="string"?Qe.push(je(Oe)[0]):Array.isArray(Oe)&&typeof Oe[0]=="string"&&(ze=je(Oe[0],Oe[1],Oe[2]),Qe.push([ze[0],ze[1],ze[2]]));ke=Qe}return ke}var B=!1,W=!0;if(typeof R=="string")B=!0;else if(Array.isArray(R)){var ue=R.concat();st=[];for(var Be,Ye=ue.length;Ye--;)(typeof(Be=ue.shift())!="string"||Array.isArray(Be)&&typeof Be[0]!="string")&&(W=!1);B=W}if(B===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var Tt=Xe/br.internal.scaleFactor,tr=Tt*(kr-1);switch(Ne.baseline){case"bottom":me-=tr;break;case"top":me+=Tt-tr;break;case"hanging":me+=Tt-2*tr;break;case"middle":me+=Tt/2-tr}if((xn=Ne.maxWidth||0)>0&&(typeof R=="string"?R=br.splitTextToSize(R,xn):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(Pe,je){return Pe.concat(br.splitTextToSize(je,xn))},[]))),rt={text:R,x:X,y:me,options:Ne,mutex:{pdfEscape:Ni,activeFontKey:vt,fonts:mt,activeFontSize:Xe}},Sn.publish("preProcessText",rt),R=rt.text,Kt=(Ne=rt.options).angle,Wr instanceof Ie==0&&Kt&&typeof Kt=="number"){Kt*=Math.PI/180,Ne.rotationDirection===0&&(Kt=-Kt),A===S&&(Kt=-Kt);var ei=Math.cos(Kt),Bn=Math.sin(Kt);Wr=new Ie(ei,Bn,-Bn,ei,0,0)}else Kt&&Kt instanceof Ie&&(Wr=Kt);A!==S||Wr||(Wr=At),(yn=Ne.charSpace||jl)!==void 0&&(Jr+=E(L(yn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(fr=Ne.horizontalScale)!==void 0&&(Jr+=E(100*fr)+` Tz
`),Ne.lang;var Vn=-1,Lr=Ne.renderingMode!==void 0?Ne.renderingMode:Ne.stroke,ns=br.internal.getCurrentPageInfo().pageContext;switch(Lr){case 0:case!1:case"fill":Vn=0;break;case 1:case!0:case"stroke":Vn=1;break;case 2:case"fillThenStroke":Vn=2;break;case 3:case"invisible":Vn=3;break;case 4:case"fillAndAddForClipping":Vn=4;break;case 5:case"strokeAndAddPathForClipping":Vn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vn=6;break;case 7:case"addToPathForClipping":Vn=7}var ja=ns.usedRenderingMode!==void 0?ns.usedRenderingMode:-1;Vn!==-1?Jr+=Vn+` Tr
`:ja!==-1&&(Jr+=`0 Tr
`),Vn!==-1&&(ns.usedRenderingMode=Vn),Zt=Ne.align||"left";var fa,Vo=Xe*kr,Uf=br.internal.pageSize.getWidth(),Hf=mt[vt];yn=Ne.charSpace||jl,xn=Ne.maxWidth||0,er=Object.assign({autoencode:!0,noBOM:!0},Ne.flags);var Uo=[],rs=function(Pe){return br.getStringUnitWidth(Pe,{font:Hf,charSpace:yn,fontSize:Xe,doKerning:!1})*Xe/Qi};if(Object.prototype.toString.call(R)==="[object Array]"){var or;st=Qs(R),Zt!=="left"&&(fa=st.map(rs));var Ua,Zi=0;if(Zt==="right"){X-=fa[0],R=[],Ye=st.length;for(var sc=0;sc<Ye;sc++)sc===0?(Ua=Kr(X),or=Fo(me)):(Ua=L(Zi-fa[sc]),or=-Vo),R.push([st[sc],Ua,or]),Zi=fa[sc]}else if(Zt==="center"){X-=fa[0]/2,R=[],Ye=st.length;for(var Pl=0;Pl<Ye;Pl++)Pl===0?(Ua=Kr(X),or=Fo(me)):(Ua=L((Zi-fa[Pl])/2),or=-Vo),R.push([st[Pl],Ua,or]),Zi=fa[Pl]}else if(Zt==="left"){R=[],Ye=st.length;for(var wd=0;wd<Ye;wd++)R.push(st[wd])}else if(Zt==="justify"&&Hf.encoding==="Identity-H"){R=[],Ye=st.length,xn=xn!==0?xn:Uf;for(var fo=0,li=0;li<Ye;li++)if(or=li===0?Fo(me):-Vo,Ua=li===0?Kr(X):fo,li<Ye-1){var oc=L((xn-fa[li])/(st[li].split(" ").length-1)),Na=st[li].split(" ");R.push([Na[0]+" ",Ua,or]),fo=0;for(var Ho=1;Ho<Na.length;Ho++){var _=(rs(Na[Ho-1]+" "+Na[Ho])-rs(Na[Ho]))*Qi+oc;Ho==Na.length-1?R.push([Na[Ho],_,0]):R.push([Na[Ho]+" ",_,0]),fo-=_}}else R.push([st[li],Ua,or]);R.push(["",fo,0])}else{if(Zt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],Ye=st.length,xn=xn!==0?xn:Uf,li=0;li<Ye;li++){or=li===0?Fo(me):-Vo,Ua=li===0?Kr(X):0;var P=st[li].split(" ").length-1,z=P>0?(xn-fa[li])/P:0;li<Ye-1?Uo.push(E(L(z))):Uo.push(0),R.push([st[li],Ua,or])}}}(typeof Ne.R2L=="boolean"?Ne.R2L:ut)===!0&&(R=w(R,function(Pe,je,ke){return[Pe.split("").reverse().join(""),je,ke]})),rt={text:R,x:X,y:me,options:Ne,mutex:{pdfEscape:Ni,activeFontKey:vt,fonts:mt,activeFontSize:Xe}},Sn.publish("postProcessText",rt),R=rt.text,Gr=rt.mutex.isHex||!1;var H=mt[vt].encoding;H!=="WinAnsiEncoding"&&H!=="StandardEncoding"||(R=w(R,function(Pe,je,ke){return[Wc(Pe),je,ke]})),st=Qs(R),R=[];for(var K,ne,pe,Se=Array.isArray(st[0])?1:0,Ee="",Te=function(Pe,je,ke){var Oe="";return ke instanceof Ie?(ke=typeof Ne.angle=="number"?Ke(ke,new Ie(1,0,0,1,Pe,je)):Ke(new Ie(1,0,0,1,Pe,je),ke),A===S&&(ke=Ke(new Ie(1,0,0,-1,0,0),ke)),Oe=ke.join(" ")+` Tm
`):Oe=E(Pe)+" "+E(je)+` Td
`,Oe},Le=0;Le<st.length;Le++){switch(Ee="",Se){case 1:pe=(Gr?"<":"(")+st[Le][0]+(Gr?">":")"),K=parseFloat(st[Le][1]),ne=parseFloat(st[Le][2]);break;case 0:pe=(Gr?"<":"(")+st[Le]+(Gr?">":")"),K=Kr(X),ne=Fo(me)}Uo!==void 0&&Uo[Le]!==void 0&&(Ee=Uo[Le]+` Tw
`),Le===0?R.push(Ee+Te(K,ne,Wr)+pe):Se===0?R.push(Ee+pe):Se===1&&R.push(Ee+Te(K,ne,Wr)+pe)}R=Se===0?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var Ae=`BT
/`;return Ae+=vt+" "+Xe+` Tf
`,Ae+=E(Xe*kr)+` TL
`,Ae+=Ca+`
`,Ae+=Jr,Ae+=R,he(Ae+="ET"),p[vt]=!0,br};var ec=h.__private__.clip=h.clip=function(R){return he(R==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return ec("evenodd")},h.__private__.discardPath=h.discardPath=function(){return he("n"),this};var Yn=h.__private__.isValidStyle=function(R){var X=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(X=!0),X};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(R){return Yn(R)&&(u=R),this};var Gs=h.__private__.getStyle=h.getStyle=function(R){var X=u;switch(R){case"D":case"S":X="S";break;case"F":X="f";break;case"FD":case"DF":X="B";break;case"f":case"f*":case"B":case"B*":X=R}return X},Ro=h.close=function(){return he("h"),this};h.stroke=function(){return he("S"),this},h.fill=function(R){return Ss("f",R),this},h.fillEvenOdd=function(R){return Ss("f*",R),this},h.fillStroke=function(R){return Ss("B",R),this},h.fillStrokeEvenOdd=function(R){return Ss("B*",R),this};var Ss=function(R,X){Br(X)==="object"?Bf(X,R):he(R)},Gn=function(R){R===null||A===S&&R===void 0||(R=Gs(R),he(R))};function Au(R,X,me,Ne,$e){var rt=new _m(X||this.boundingBox,me||this.xStep,Ne||this.yStep,this.gState,$e||this.matrix);rt.stream=this.stream;var st=R+"$$"+this.cloneIndex+++"$$";return lt(st,rt),rt}var Bf=function(R,X){var me=gn[R.key],Ne=Ht[me];if(Ne instanceof ph)he("q"),he(Vf(X)),Ne.gState&&h.setGState(Ne.gState),he(R.matrix.toString()+" cm"),he("/"+me+" sh"),he("Q");else if(Ne instanceof _m){var $e=new Ie(1,0,0,-1,0,ts());R.matrix&&($e=$e.multiply(R.matrix||At),me=Au.call(Ne,R.key,R.boundingBox,R.xStep,R.yStep,$e).id),he("q"),he("/Pattern cs"),he("/"+me+" scn"),Ne.gState&&h.setGState(Ne.gState),he(X),he("Q")}},Vf=function(R){switch(R){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Gi=h.moveTo=function(R,X){return he(E(L(R))+" "+E(V(X))+" m"),this},_s=h.lineTo=function(R,X){return he(E(L(R))+" "+E(V(X))+" l"),this},Aa=h.curveTo=function(R,X,me,Ne,$e,rt){return he([E(L(R)),E(V(X)),E(L(me)),E(V(Ne)),E(L($e)),E(V(rt)),"c"].join(" ")),this};h.__private__.line=h.line=function(R,X,me,Ne,$e){if(isNaN(R)||isNaN(X)||isNaN(me)||isNaN(Ne)||!Yn($e))throw new Error("Invalid arguments passed to jsPDF.line");return A===b?this.lines([[me-R,Ne-X]],R,X,[1,1],$e||"S"):this.lines([[me-R,Ne-X]],R,X,[1,1]).stroke()},h.__private__.lines=h.lines=function(R,X,me,Ne,$e,rt){var st,Kt,Zt,yn,xn,er,fr,Wr,br,Dr,Gr,Jr;if(typeof R=="number"&&(Jr=me,me=X,X=R,R=Jr),Ne=Ne||[1,1],rt=rt||!1,isNaN(X)||isNaN(me)||!Array.isArray(R)||!Array.isArray(Ne)||!Yn($e)||typeof rt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Gi(X,me),st=Ne[0],Kt=Ne[1],yn=R.length,Dr=X,Gr=me,Zt=0;Zt<yn;Zt++)(xn=R[Zt]).length===2?(Dr=xn[0]*st+Dr,Gr=xn[1]*Kt+Gr,_s(Dr,Gr)):(er=xn[0]*st+Dr,fr=xn[1]*Kt+Gr,Wr=xn[2]*st+Dr,br=xn[3]*Kt+Gr,Dr=xn[4]*st+Dr,Gr=xn[5]*Kt+Gr,Aa(er,fr,Wr,br,Dr,Gr));return rt&&Ro(),Gn($e),this},h.path=function(R){for(var X=0;X<R.length;X++){var me=R[X],Ne=me.c;switch(me.op){case"m":Gi(Ne[0],Ne[1]);break;case"l":_s(Ne[0],Ne[1]);break;case"c":Aa.apply(this,Ne);break;case"h":Ro()}}return this},h.__private__.rect=h.rect=function(R,X,me,Ne,$e){if(isNaN(R)||isNaN(X)||isNaN(me)||isNaN(Ne)||!Yn($e))throw new Error("Invalid arguments passed to jsPDF.rect");return A===b&&(Ne=-Ne),he([E(L(R)),E(V(X)),E(L(me)),E(L(Ne)),"re"].join(" ")),Gn($e),this},h.__private__.triangle=h.triangle=function(R,X,me,Ne,$e,rt,st){if(isNaN(R)||isNaN(X)||isNaN(me)||isNaN(Ne)||isNaN($e)||isNaN(rt)||!Yn(st))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[me-R,Ne-X],[$e-me,rt-Ne],[R-$e,X-rt]],R,X,[1,1],st,!0),this},h.__private__.roundedRect=h.roundedRect=function(R,X,me,Ne,$e,rt,st){if(isNaN(R)||isNaN(X)||isNaN(me)||isNaN(Ne)||isNaN($e)||isNaN(rt)||!Yn(st))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Kt=4/3*(Math.SQRT2-1);return $e=Math.min($e,.5*me),rt=Math.min(rt,.5*Ne),this.lines([[me-2*$e,0],[$e*Kt,0,$e,rt-rt*Kt,$e,rt],[0,Ne-2*rt],[0,rt*Kt,-$e*Kt,rt,-$e,rt],[2*$e-me,0],[-$e*Kt,0,-$e,-rt*Kt,-$e,-rt],[0,2*rt-Ne],[0,-rt*Kt,$e*Kt,-rt,$e,-rt]],R+$e,X,[1,1],st,!0),this},h.__private__.ellipse=h.ellipse=function(R,X,me,Ne,$e){if(isNaN(R)||isNaN(X)||isNaN(me)||isNaN(Ne)||!Yn($e))throw new Error("Invalid arguments passed to jsPDF.ellipse");var rt=4/3*(Math.SQRT2-1)*me,st=4/3*(Math.SQRT2-1)*Ne;return Gi(R+me,X),Aa(R+me,X-st,R+rt,X-Ne,R,X-Ne),Aa(R-rt,X-Ne,R-me,X-st,R-me,X),Aa(R-me,X+st,R-rt,X+Ne,R,X+Ne),Aa(R+rt,X+Ne,R+me,X+st,R+me,X),Gn($e),this},h.__private__.circle=h.circle=function(R,X,me,Ne){if(isNaN(R)||isNaN(X)||isNaN(me)||!Yn(Ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,X,me,me,Ne)},h.setFont=function(R,X,me){return me&&(X=j(X,me)),vt=Vc(R,X,{disableWarning:!1}),this};var Yi=h.__private__.getFont=h.getFont=function(){return mt[Vc.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var R,X,me={};for(R in Mt)if(Mt.hasOwnProperty(R))for(X in me[R]=[],Mt[R])Mt[R].hasOwnProperty(X)&&me[R].push(X);return me},h.addFont=function(R,X,me,Ne,$e){var rt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&rt.indexOf(arguments[3])!==-1?$e=arguments[3]:arguments[3]&&rt.indexOf(arguments[3])==-1&&(me=j(me,Ne)),qs.call(this,R,X,me,$e=$e||"Identity-H")};var Lo,tc=t.lineWidth||.200025,Jt=h.__private__.getLineWidth=h.getLineWidth=function(){return tc},Xi=h.__private__.setLineWidth=h.setLineWidth=function(R){return tc=R,he(E(L(R))+" w"),this};h.__private__.setLineDash=pn.API.setLineDash=pn.API.setLineDashPattern=function(R,X){if(R=R||[],X=X||0,isNaN(X)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(me){return E(L(me))}).join(" "),X=E(L(X)),he("["+R+"] "+X+" d"),this};var nc=h.__private__.getLineHeight=h.getLineHeight=function(){return Xe*Lo};h.__private__.getLineHeight=h.getLineHeight=function(){return Xe*Lo};var rc=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(Lo=R),this},Cu=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Lo};rc(t.lineHeight);var Kr=h.__private__.getHorizontalCoordinate=function(R){return L(R)},Fo=h.__private__.getVerticalCoordinate=function(R){return A===S?R:qt[G].mediaBox.topRightY-qt[G].mediaBox.bottomLeftY-L(R)},As=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(R){return E(Kr(R))},Al=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(R){return E(Fo(R))},uo=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return gr(uo)},h.__private__.setStrokeColor=h.setDrawColor=function(R,X,me,Ne){return uo=vr({ch1:R,ch2:X,ch3:me,ch4:Ne,pdfColorType:"draw",precision:2}),he(uo),this};var Cl=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return gr(Cl)},h.__private__.setFillColor=h.setFillColor=function(R,X,me,Ne){return Cl=vr({ch1:R,ch2:X,ch3:me,ch4:Ne,pdfColorType:"fill",precision:2}),he(Cl),this};var Ca=t.textColor||"0 g",Cs=h.__private__.getTextColor=h.getTextColor=function(){return gr(Ca)};h.__private__.setTextColor=h.setTextColor=function(R,X,me,Ne){return Ca=vr({ch1:R,ch2:X,ch3:me,ch4:Ne,pdfColorType:"text",precision:3}),this};var jl=t.charSpace,ju=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(jl||0)};h.__private__.setCharSpace=h.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return jl=R,this};var dr=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(R){var X=h.CapJoinStyles[R];if(X===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return dr=X,he(X+" J"),this};var Nu=0;h.__private__.setLineJoin=h.setLineJoin=function(R){var X=h.CapJoinStyles[R];if(X===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nu=X,he(X+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(E(L(R))+" M"),this},h.GState=j5,h.setGState=function(R){(R=typeof R=="string"?on[wt[R]]:ic(null,R)).equals(Xn)||(he("/"+R.id+" gs"),Xn=R)};var ic=function(R,X){if(!R||!wt[R]){var me=!1;for(var Ne in on)if(on.hasOwnProperty(Ne)&&on[Ne].equals(X)){me=!0;break}if(me)X=on[Ne];else{var $e="GS"+(Object.keys(on).length+1).toString(10);on[$e]=X,X.id=$e}return R&&(wt[R]=X.id),Sn.publish("addGState",X),X}};h.addGState=function(R,X){return ic(R,X),this},h.saveGraphicsState=function(){return he("q"),_t.push({key:vt,size:Xe,color:Ca}),this},h.restoreGraphicsState=function(){he("Q");var R=_t.pop();return vt=R.key,Xe=R.size,Ca=R.color,Xn=null,this},h.setCurrentTransformationMatrix=function(R){return he(R.toString()+" cm"),this},h.comment=function(R){return he("#"+R),this};var Ys=function(R,X){var me=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return me},set:function(rt){isNaN(rt)||(me=parseFloat(rt))}});var Ne=X||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ne},set:function(rt){isNaN(rt)||(Ne=parseFloat(rt))}});var $e="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return $e},set:function(rt){$e=rt.toString()}}),this},zo=function(R,X,me,Ne){Ys.call(this,R,X),this.type="rect";var $e=me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return $e},set:function(st){isNaN(st)||($e=parseFloat(st))}});var rt=Ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return rt},set:function(st){isNaN(st)||(rt=parseFloat(st))}}),this},$o=function(){this.page=fn,this.currentPage=G,this.pages=we.slice(0),this.pagesContext=qt.slice(0),this.x=tt,this.y=zt,this.matrix=ht,this.width=js(G),this.height=Xs(G),this.outputDestination=He,this.id="",this.objectNumber=-1};$o.prototype.restore=function(){fn=this.page,G=this.currentPage,qt=this.pagesContext,we=this.pages,tt=this.x,zt=this.y,ht=this.matrix,ac(G,this.width),Va(G,this.height),He=this.outputDestination};var Nl=function(R,X,me,Ne,$e){Re.push(new $o),fn=G=0,we=[],tt=R,zt=X,ht=$e,es([me,Ne])};for(var El in h.beginFormObject=function(R,X,me,Ne,$e){return Nl(R,X,me,Ne,$e),this},h.endFormObject=function(R){return function(X){if(wa[X])Re.pop().restore();else{var me=new $o,Ne="Xo"+(Object.keys(Nr).length+1).toString(10);me.id=Ne,wa[X]=Ne,Nr[Ne]=me,Sn.publish("addFormObject",me),Re.pop().restore()}}(R),this},h.doFormObject=function(R,X){var me=Nr[wa[R]];return he("q"),he(X.toString()+" cm"),he("/"+me.id+" Do"),he("Q"),this},h.getFormObject=function(R){var X=Nr[wa[R]];return{x:X.x,y:X.y,width:X.width,height:X.height,matrix:X.matrix}},h.save=function(R,X){return R=R||"generated.pdf",(X=X||{}).returnPromise=X.returnPromise||!1,X.returnPromise===!1?(dh(xs(Jn()),R),typeof dh.unload=="function"&&Pn.setTimeout&&setTimeout(dh.unload,911),this):new Promise(function(me,Ne){try{var $e=dh(xs(Jn()),R);typeof dh.unload=="function"&&Pn.setTimeout&&setTimeout(dh.unload,911),me($e)}catch(rt){Ne(rt.message)}})},pn.API)pn.API.hasOwnProperty(El)&&(El==="events"&&pn.API.events.length?function(R,X){var me,Ne,$e;for($e=X.length-1;$e!==-1;$e--)me=X[$e][0],Ne=X[$e][1],R.subscribe.apply(R,[me].concat(typeof Ne=="function"?[Ne]:Ne))}(Sn,pn.API.events):h[El]=pn.API[El]);function js(R){return qt[R].mediaBox.topRightX-qt[R].mediaBox.bottomLeftX}function ac(R,X){qt[R].mediaBox.topRightX=X+qt[R].mediaBox.bottomLeftX}function Xs(R){return qt[R].mediaBox.topRightY-qt[R].mediaBox.bottomLeftY}function Va(R,X){qt[R].mediaBox.topRightY=X+qt[R].mediaBox.bottomLeftY}var kl=h.getPageWidth=function(R){return js(R=R||G)/xt},Bo=h.setPageWidth=function(R,X){ac(R,X*xt)},ts=h.getPageHeight=function(R){return Xs(R=R||G)/xt},Hc=h.setPageHeight=function(R,X){Va(R,X*xt)};return h.internal={pdfEscape:Ni,getStyle:Gs,getFont:Yi,getFontSize:ft,getCharSpace:ju,getTextColor:Cs,getLineHeight:nc,getLineHeightFactor:Cu,getLineWidth:Jt,write:We,getHorizontalCoordinate:Kr,getVerticalCoordinate:Fo,getCoordinateString:As,getVerticalCoordinateString:Al,collections:{},newObject:vn,newAdditionalObject:Kn,newObjectDeferred:qn,newObjectDeferredBegin:$t,getFilters:Qn,putStream:sr,events:Sn,scaleFactor:xt,pageSize:{getWidth:function(){return kl(G)},setWidth:function(R){Bo(G,R)},getHeight:function(){return ts(G)},setHeight:function(R){Hc(G,R)}},encryptionOptions:d,encryption:yr,getEncryptor:function(R){return d!==null?yr.encryptor(R,0):function(X){return X}},output:da,getNumberOfPages:Sl,pages:we,out:he,f2:D,f3:M,getPageInfo:_a,getPageInfoByObjId:Mo,getCurrentPageInfo:Jl,getPDFVersion:g,Point:Ys,Rectangle:zo,Matrix:Ie,hasHotfix:ws},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return kl(G)},set:function(R){Bo(G,R)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return ts(G)},set:function(R){Hc(G,R)},enumerable:!0,configurable:!0}),(function(R){for(var X=0,me=gt.length;X<me;X++){var Ne=qs.call(this,R[X][0],R[X][1],R[X][2],gt[X][3],!0);f===!1&&(p[Ne]=!0);var $e=R[X][0].split("-");$c({id:Ne,fontName:$e[0],fontStyle:$e[1]||""})}Sn.publish("addFonts",{fonts:mt,dictionary:Mt})}).call(h,gt),vt="F1",wl(i,n),Sn.publish("initialized"),h}Xp.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Xp.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Xp.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Xp.prototype.processOwnerPassword=function(t,e){return dP(uP(e).substr(0,5),t)},Xp.prototype.encryptor=function(t,e){var n=uP(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return dP(n,r)}},j5.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Br(t)!==Br(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},pn.API={events:[]},pn.version="3.0.3";var zi=pn.API,tI=1,Dp=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vp=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Rn=function(t){return t.toFixed(2)},Md=function(t){return t.toFixed(5)};zi.__acroform__={};var To=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},W9=function(t){return t*tI},Gc=function(t){var e=new SJ,n=an.internal.getHeight(t)||0,r=an.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Rn(r)),Number(Rn(n))],e},PGe=zi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},TGe=zi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},DGe=zi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},aa=zi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return DGe(t,e-1)},sa=zi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return PGe(t,e-1)},oa=zi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return TGe(t,e-1)},IGe=zi.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],a=t[1],s=t[2],o=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(i+s)||0,l.upperRight_Y=r(a)||0,[Number(Rn(l.lowerLeft_X)),Number(Rn(l.lowerLeft_Y)),Number(Rn(l.upperRight_X)),Number(Rn(l.upperRight_Y))]},OGe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=fP(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Rn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Gc(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},fP=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(D){return D.split(`
`)}):i.map(function(D){return[D]});var a=n,s=an.internal.getHeight(t)||0;s=s<0?-s:s;var o=an.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(D,M,L){if(D+1<i.length){var V=M+" "+i[D+1][0];return _1(V,t,L).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var u,d,f=_1("3",t,a).height,p=t.multiline?s-a:(s-f)/2,h=p+=2,m=0,g=0,v=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+_1(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var y="",b=0,S=0;S<i.length;S++)if(i.hasOwnProperty(S)){var A=!1;if(i[S].length!==1&&v!==i[S].length-1){if((f+2)*(b+2)+2>s)continue e;y+=i[S][v],A=!0,g=S,S--}else{y=(y+=i[S][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var C=parseInt(S),T=l(C,y,a),j=S>=i.length-1;if(T&&!j){y+=" ",v=0;continue}if(T||j){if(j)g=C;else if(t.multiline&&(f+2)*(b+2)+2>s)continue e}else{if(!t.multiline||(f+2)*(b+2)+2>s)continue e;g=C}}for(var E="",k=m;k<=g;k++){var O=i[k];if(t.multiline){if(k===g){E+=O[v]+" ",v=(v+1)%O.length;continue}if(k===m){E+=O[O.length-1]+" ";continue}}E+=O[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=_1(E,t,a).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;default:u=2}e+=Rn(u)+" "+Rn(h)+` Td
`,e+="("+Dp(E)+`) Tj
`,e+=-Rn(u)+` 0 Td
`,h=-(a+2),d=0,m=A?g:g+1,b++,y=""}break}return r.text=e,r.fontSize=a,r},_1=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},MGe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},RGe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},LGe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Fc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(MGe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");tI=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new _J,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&RGe(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var a=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var o=r[s],l=[],u=o.Rect;if(o.Rect&&(o.Rect=IGe(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=an.createDefaultAppearanceStream(o),Br(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=OGe(o);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var h=o.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var m=h[s];typeof m=="function"&&(m=m.call(i,o)),f+="/"+s+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(i,o)),f+="/"+s+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}a&&function(g,v){for(var y in g)if(g.hasOwnProperty(y)){var b=y,S=g[y];v.internal.newObjectDeferredBegin(S.objId,!0),Br(S)==="object"&&typeof S.putStream=="function"&&S.putStream(),delete g[b]}}(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},wJ=zi.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(s){return s};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),Br(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Dp(r(t[a].toString()))+")"):i+=t[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},pj=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Dp(r(t))+")"},ru=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ru.prototype.toString=function(){return this.objId+" 0 R"},ru.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ru.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:wJ(i,this.objId,this.scope)}):i instanceof ru?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var SJ=function(){ru.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};To(SJ,ru);var _J=function(){ru.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Dp(n(t))+")"}},set:function(n){t=n}})};To(_J,ru);var Fc=function t(){ru.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!aa(e,3)},set:function(y){y?this.F=sa(e,3):this.F=oa(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof N5)return;a="FieldObject"+t.FieldNum++}var y=function(b){return b};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Dp(y(a))+")"},set:function(y){a=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(y){a=y}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/tI:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof N5||this instanceof zh))return pj(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ka==0?pj(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof Ka==0?y.substr(0,1)==="("?Vp(y.substr(1,y.length-2)):Vp(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ka==1?Vp(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Ka==1?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ka==0?pj(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof Ka==0?y.substr(0,1)==="("?Vp(y.substr(1,y.length-2)):Vp(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ka==1?Vp(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Ka==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(y){m=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,1)},set:function(y){y?this.Ff=sa(this.Ff,1):this.Ff=oa(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,2)},set:function(y){y?this.Ff=sa(this.Ff,2):this.Ff=oa(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,3)},set:function(y){y?this.Ff=sa(this.Ff,3):this.Ff=oa(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;default:v=0}}})};To(Fc,ru);var $m=function(){Fc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return wJ(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(a,s,o){o||(o=1);for(var l,u=[];l=s.exec(a);)u.push(l[o]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,18)},set:function(n){n?this.Ff=sa(this.Ff,18):this.Ff=oa(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=sa(this.Ff,19):this.Ff=oa(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,20)},set:function(n){n?(this.Ff=sa(this.Ff,20),e.sort()):this.Ff=oa(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,22)},set:function(n){n?this.Ff=sa(this.Ff,22):this.Ff=oa(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,23)},set:function(n){n?this.Ff=sa(this.Ff,23):this.Ff=oa(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,27)},set:function(n){n?this.Ff=sa(this.Ff,27):this.Ff=oa(this.Ff,27)}}),this.hasAppearanceStream=!1};To($m,Fc);var Bm=function(){$m.call(this),this.fontName="helvetica",this.combo=!1};To(Bm,$m);var Vm=function(){Bm.call(this),this.combo=!0};To(Vm,Bm);var o2=function(){Vm.call(this),this.edit=!0};To(o2,Vm);var Ka=function(){Fc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,15)},set:function(n){n?this.Ff=sa(this.Ff,15):this.Ff=oa(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,16)},set:function(n){n?this.Ff=sa(this.Ff,16):this.Ff=oa(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,17)},set:function(n){n?this.Ff=sa(this.Ff,17):this.Ff=oa(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,26)},set:function(n){n?this.Ff=sa(this.Ff,26):this.Ff=oa(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Dp(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Br(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};To(Ka,Fc);var l2=function(){Ka.call(this),this.pushButton=!0};To(l2,Ka);var Um=function(){Ka.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};To(Um,Ka);var N5=function(){var t,e;Fc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),r)s.push("/"+a+" ("+Dp(i(r[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Br(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=an.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};To(N5,Fc),Um.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Um.prototype.createOption=function(t){var e=new N5;return e.Parent=this,e.optionName=t,this.Kids.push(e),FGe.call(this.scope,e),e};var c2=function(){Ka.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=an.CheckBox.createAppearanceStream()};To(c2,Ka);var zh=function(){Fc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,13)},set:function(e){e?this.Ff=sa(this.Ff,13):this.Ff=oa(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,21)},set:function(e){e?this.Ff=sa(this.Ff,21):this.Ff=oa(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,23)},set:function(e){e?this.Ff=sa(this.Ff,23):this.Ff=oa(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,24)},set:function(e){e?this.Ff=sa(this.Ff,24):this.Ff=oa(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,25)},set:function(e){e?this.Ff=sa(this.Ff,25):this.Ff=oa(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,26)},set:function(e){e?this.Ff=sa(this.Ff,26):this.Ff=oa(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};To(zh,Fc);var u2=function(){zh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!aa(this.Ff,14)},set:function(t){t?this.Ff=sa(this.Ff,14):this.Ff=oa(this.Ff,14)}}),this.password=!0};To(u2,zh);var an={CheckBox:{createAppearanceStream:function(){return{N:{On:an.CheckBox.YesNormal},D:{On:an.CheckBox.YesPushDown,Off:an.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Gc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=fP(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Rn(an.internal.getWidth(t))+" "+Rn(an.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Rn(a.fontSize)+" Tf "+i),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Gc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],a=an.internal.getHeight(t),s=an.internal.getWidth(t),o=fP(t,t.caption);return i.push("1 g"),i.push("0 0 "+Rn(s)+" "+Rn(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Rn(s-1)+" "+Rn(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Rn(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Gc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rn(an.internal.getWidth(t))+" "+Rn(an.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:an.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=an.RadioButton.Circle.YesNormal,e.D[t]=an.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Gc(t);e.scope=t.scope;var n=[],r=an.internal.getWidth(t)<=an.internal.getHeight(t)?an.internal.getWidth(t)/4:an.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=an.internal.Bezier_C,a=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Md(an.internal.getWidth(t)/2)+" "+Md(an.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Gc(t);e.scope=t.scope;var n=[],r=an.internal.getWidth(t)<=an.internal.getHeight(t)?an.internal.getWidth(t)/4:an.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*an.internal.Bezier_C).toFixed(5)),s=Number((r*an.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Md(an.internal.getWidth(t)/2)+" "+Md(an.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Md(an.internal.getWidth(t)/2)+" "+Md(an.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Gc(t);e.scope=t.scope;var n=[],r=an.internal.getWidth(t)<=an.internal.getHeight(t)?an.internal.getWidth(t)/4:an.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*an.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Md(an.internal.getWidth(t)/2)+" "+Md(an.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:an.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=an.RadioButton.Cross.YesNormal,e.D[t]=an.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Gc(t);e.scope=t.scope;var n=[],r=an.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Rn(an.internal.getWidth(t)-2)+" "+Rn(an.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Rn(r.x1.x)+" "+Rn(r.x1.y)+" m"),n.push(Rn(r.x2.x)+" "+Rn(r.x2.y)+" l"),n.push(Rn(r.x4.x)+" "+Rn(r.x4.y)+" m"),n.push(Rn(r.x3.x)+" "+Rn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Gc(t);e.scope=t.scope;var n=an.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Rn(an.internal.getWidth(t))+" "+Rn(an.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Rn(an.internal.getWidth(t)-2)+" "+Rn(an.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Rn(n.x1.x)+" "+Rn(n.x1.y)+" m"),r.push(Rn(n.x2.x)+" "+Rn(n.x2.y)+" l"),r.push(Rn(n.x4.x)+" "+Rn(n.x4.y)+" m"),r.push(Rn(n.x3.x)+" "+Rn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Gc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rn(an.internal.getWidth(t))+" "+Rn(an.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};an.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=an.internal.getWidth(t),n=an.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},an.internal.getWidth=function(t){var e=0;return Br(t)==="object"&&(e=W9(t.Rect[2])),e},an.internal.getHeight=function(t){var e=0;return Br(t)==="object"&&(e=W9(t.Rect[3])),e};var FGe=zi.addField=function(t){if(LGe(this,t),!(t instanceof Fc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};zi.AcroFormChoiceField=$m,zi.AcroFormListBox=Bm,zi.AcroFormComboBox=Vm,zi.AcroFormEditBox=o2,zi.AcroFormButton=Ka,zi.AcroFormPushButton=l2,zi.AcroFormRadioButton=Um,zi.AcroFormCheckBox=c2,zi.AcroFormTextField=zh,zi.AcroFormPasswordField=u2,zi.AcroFormAppearance=an,zi.AcroForm={ChoiceField:$m,ListBox:Bm,ComboBox:Vm,EditBox:o2,Button:Ka,PushButton:l2,RadioButton:Um,CheckBox:c2,TextField:zh,PasswordField:u2,Appearance:an},pn.AcroForm={ChoiceField:$m,ListBox:Bm,ComboBox:Vm,EditBox:o2,Button:Ka,PushButton:l2,RadioButton:Um,CheckBox:c2,TextField:zh,PasswordField:u2,Appearance:an};pn.AcroForm;function AJ(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(D,M){var L,V,Q,Y,J,q=n;if((M=M||n)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(T(D))for(J in r)for(Q=r[J],L=0;L<Q.length;L+=1){for(Y=!0,V=0;V<Q[L].length;V+=1)if(Q[L][V]!==void 0&&Q[L][V]!==D[V]){Y=!1;break}if(Y===!0){q=J;break}}else for(J in r)for(Q=r[J],L=0;L<Q.length;L+=1){for(Y=!0,V=0;V<Q[L].length;V+=1)if(Q[L][V]!==void 0&&Q[L][V]!==D.charCodeAt(V)){Y=!1;break}if(Y===!0){q=J;break}}return q===n&&M!==n&&(q=M),q},a=function D(M){for(var L=this.internal.write,V=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);M.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:M.width}),Y.push({key:"Height",value:M.height}),M.colorSpace===y.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(M.palette.length/3-1)+" "+("sMask"in M&&M.sMask!==void 0?M.objectId+2:M.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+M.colorSpace}),M.colorSpace===y.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:M.bitsPerComponent}),"decodeParameters"in M&&M.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+M.decodeParameters+">>"}),"transparency"in M&&Array.isArray(M.transparency)&&M.transparency.length>0){for(var J="",q=0,ee=M.transparency.length;q<ee;q++)J+=M.transparency[q]+" "+M.transparency[q]+" ";Y.push({key:"Mask",value:"["+J+"]"})}M.sMask!==void 0&&Y.push({key:"SMask",value:M.objectId+1+" 0 R"});var le=M.filter!==void 0?["/"+M.filter]:void 0;if(V({data:M.data,additionalKeyValues:Y,alreadyAppliedFilters:le,objectId:M.objectId}),L("endobj"),"sMask"in M&&M.sMask!==void 0){var se,$=(se=M.sMaskBitsPerComponent)!==null&&se!==void 0?se:M.bitsPerComponent,G={width:M.width,height:M.height,colorSpace:"DeviceGray",bitsPerComponent:$,data:M.sMask};"filter"in M&&(G.decodeParameters="/Predictor ".concat(M.predictor," /Colors 1 /BitsPerComponent ").concat($," /Columns ").concat(M.width),G.filter=M.filter),D.call(this,G)}if(M.colorSpace===y.INDEXED){var te=this.internal.newObject();V({data:E(new Uint8Array(M.palette)),objectId:te}),L("endobj")}},s=function(){var D=this.internal.collections[e+"images"];for(var M in D)a.call(this,D[M])},o=function(){var D,M=this.internal.collections[e+"images"],L=this.internal.write;for(var V in M)L("/I"+(D=M[V]).index,D.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var D=this.internal.collections[e+"images"];return l.call(this),D},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(D){return typeof t["process"+D.toUpperCase()]=="function"},p=function(D){return Br(D)==="object"&&D.nodeType===1},h=function(D,M){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var L=""+D.getAttribute("src");if(L.indexOf("data:image/")===0)return s2(unescape(L).split("base64,").pop());var V=t.loadFile(L,!0);if(V!==void 0)return V}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var Q;switch(M){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;default:Q="image/jpeg"}return s2(D.toDataURL(Q,1).split("base64,").pop())}},m=function(D){var M=this.internal.collections[e+"images"];if(M){for(var L in M)if(D===M[L].alias)return M[L]}},g=function(D,M,L){return D||M||(D=-96,M=-96),D<0&&(D=-1*L.width*72/D/this.internal.scaleFactor),M<0&&(M=-1*L.height*72/M/this.internal.scaleFactor),D===0&&(D=M*L.width/L.height),M===0&&(M=D*L.height/L.width),[D,M]},v=function(D,M,L,V,Q,Y){var J=g.call(this,L,V,Q),q=this.internal.getCoordinateString,ee=this.internal.getVerticalCoordinateString,le=u.call(this);if(L=J[0],V=J[1],le[Q.index]=Q,Y){Y*=Math.PI/180;var se=Math.cos(Y),$=Math.sin(Y),G=function(oe){return oe.toFixed(4)},te=[G(se),G($),G(-1*$),G(se),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,q(D),ee(M+V),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([q(L),"0","0",q(V),"0","0","cm"].join(" "))):this.internal.write([q(L),"0","0",q(V),q(D),ee(M+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},y=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=t.__addimage__.sHashCode=function(D){var M,L,V=0;if(typeof D=="string")for(L=D.length,M=0;M<L;M++)V=(V<<5)-V+D.charCodeAt(M),V|=0;else if(T(D))for(L=D.byteLength/2,M=0;M<L;M++)V=(V<<5)-V+D[M],V|=0;return V},A=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var M=!0;return D.length===0&&(M=!1),D.length%4!=0&&(M=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(M=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(M=!1),M},C=t.__addimage__.extractImageFromDataUrl=function(D){if(D==null||!(D=D.trim()).startsWith("data:"))return null;var M=D.indexOf(",");return M<0?null:D.substring(0,M).trim().endsWith("base64")?D.substring(M+1):null};t.__addimage__.isArrayBuffer=function(D){return D instanceof ArrayBuffer};var T=t.__addimage__.isArrayBufferView=function(D){return D instanceof Int8Array||D instanceof Uint8Array||D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array},j=t.__addimage__.binaryStringToUint8Array=function(D){for(var M=D.length,L=new Uint8Array(M),V=0;V<M;V++)L[V]=D.charCodeAt(V);return L},E=t.__addimage__.arrayBufferToBinaryString=function(D){for(var M="",L=T(D)?D:new Uint8Array(D),V=0;V<L.length;V+=8192)M+=String.fromCharCode.apply(null,L.subarray(V,V+8192));return M};t.addImage=function(){var D,M,L,V,Q,Y,J,q,ee;if(typeof arguments[1]=="number"?(M=n,L=arguments[1],V=arguments[2],Q=arguments[3],Y=arguments[4],J=arguments[5],q=arguments[6],ee=arguments[7]):(M=arguments[1],L=arguments[2],V=arguments[3],Q=arguments[4],Y=arguments[5],J=arguments[6],q=arguments[7],ee=arguments[8]),Br(D=arguments[0])==="object"&&!p(D)&&"imageData"in D){var le=D;D=le.imageData,M=le.format||M||n,L=le.x||L||0,V=le.y||V||0,Q=le.w||le.width||Q,Y=le.h||le.height||Y,J=le.alias||J,q=le.compression||q,ee=le.rotation||le.angle||ee}var se=this.internal.getFilters();if(q===void 0&&se.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(L)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var $=k.call(this,D,M,J,q);return v.call(this,L,V,Q,Y,$,ee),this};var k=function(D,M,L,V){var Q,Y,J;if(typeof D=="string"&&i(D)===n){D=unescape(D);var q=O(D,!1);(q!==""||(q=t.loadFile(D,!0))!==void 0)&&(D=q)}if(p(D)&&(D=h(D,M)),M=i(D,M),!f(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(((J=L)==null||J.length===0)&&(L=function(ee){return typeof ee=="string"||T(ee)?S(ee):T(ee.data)?S(ee.data):null}(D)),(Q=m.call(this,L))||(D instanceof Uint8Array||M==="RGBA"||(Y=D,D=j(D)),Q=this["process"+M.toUpperCase()](D,d.call(this),L,function(ee){return ee&&typeof ee=="string"&&(ee=ee.toUpperCase()),ee in t.image_compression?ee:b.NONE}(V),Y)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},O=t.__addimage__.convertBase64ToBinaryString=function(D,M){M=typeof M!="boolean"||M;var L,V="";if(typeof D=="string"){var Q;L=(Q=C(D))!==null&&Q!==void 0?Q:D;try{V=s2(L)}catch(Y){if(M)throw A(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};t.getImageProperties=function(D){var M,L,V="";if(p(D)&&(D=h(D)),typeof D=="string"&&i(D)===n&&((V=O(D,!1))===""&&(V=t.loadFile(D)||""),D=V),L=i(D),!f(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(D instanceof Uint8Array||(D=j(D)),!(M=this["process"+L.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return M.fileType=L,M}})(pn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};pn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((r=u[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){r=u[p];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),b=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+h(y(r.contents))+")",a+=" /Popup "+v.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+h(y(b))+") >>",g.content=a;var S=g.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+S,r.open&&(a+=" /Open true"),a+=" >>",v.content=a,this.internal.write(g.objId,"0 R",v.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+o(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var A=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(m(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var C=this.annotations._nameMap[r.options.name];r.options.pageNumber=C.page,r.options.top=C.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var T=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+T+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,a,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+a)},options:s,type:"link"})},t.textWithLink=function(n,r,i,a){var s,o,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(n,o).length;s=Math.ceil(u*d)}else o=l,s=u;return this.text(n,r,i,a),i+=.2*u,a.align==="center"&&(r-=l/2),a.align==="right"&&(r-=l),this.link(r,i-u,o,s,a),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(pn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},o=t.__arabicParser__.isArabicEndLetter=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(g){return s(g)&&i.indexOf(g.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(g){var v=0,y=n,b="",S=0;for(v=0;v<g.length;v+=1)y[g.charCodeAt(v)]!==void 0?(S++,typeof(y=y[g.charCodeAt(v)])=="number"&&(b+=String.fromCharCode(y),y=n,S=0),v===g.length-1&&(y=n,b+=g.charAt(v-(S-1)),v-=S-1,S=0)):(y=n,b+=g.charAt(v-S),v-=S,S=0);return b};t.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(g,v,y){return s(g)?a(g)===!1?-1:!u(g)||!s(v)&&!s(y)||!s(y)&&o(v)||o(g)&&!s(v)||o(g)&&l(v)||o(g)&&o(v)?0:d(g)&&s(v)&&!o(v)&&s(y)&&u(y)?3:o(g)||!s(y)?1:2:-1},h=function(g){var v=0,y=0,b=0,S="",A="",C="",T=(g=g||"").split("\\s+"),j=[];for(v=0;v<T.length;v+=1){for(j.push(""),y=0;y<T[v].length;y+=1)S=T[v][y],A=T[v][y-1],C=T[v][y+1],s(S)?(b=p(S,A,C),j[v]+=b!==-1?String.fromCharCode(e[S.charCodeAt(0)][b]):S):j[v]+=S;j[v]=f(j[v])}return j.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var g,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var b=0;for(y=[],b=0;b<v.length;b+=1)Array.isArray(v[b])?y.push([h(v[b][0]),v[b][1],v[b][2]]):y.push([h(v[b])]);g=y}else g=h(v);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};t.events.push(["preProcessText",m])}(pn.API),pn.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(pn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(g){m=g}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,m=0,g=0,v=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=u.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,A){return S.concat(v.splitTextToSize(A,y))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)h<(g=this.getStringUnitWidth(l[b],{font:f})*d)&&(h=g);return h!==0&&(m=l.length),{w:h/=p,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,h&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,f,p){if(r.call(this),!d)throw new Error("No data for PDF table.");var h,m,g,v,y=[],b=[],S=[],A={},C={},T=[],j=[],E=(p=p||{}).autoSize||!1,k=p.printHeaders!==!1,O=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,D=p.margins||Object.assign({width:this.getPageWidth()},e),M=typeof p.padding=="number"?p.padding:3,L=p.headerBackgroundColor||"#c8c8c8",V=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=M,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=V,this.setFontSize(O),f==null)b=y=Object.keys(d[0]),S=y.map(function(){return"left"});else if(Array.isArray(f)&&Br(f[0])==="object")for(y=f.map(function(le){return le.name}),b=f.map(function(le){return le.prompt||le.name||""}),S=f.map(function(le){return le.align||"left"}),h=0;h<f.length;h+=1)C[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(b=y=f,S=y.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<y.length;h+=1){for(A[v=y[h]]=d.map(function(le){return le[v]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(b[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=A[v],this.setFont(void 0,"normal"),g=0;g<m.length;g+=1)T.push(this.getTextDimensions(m[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);C[v]=Math.max.apply(null,T)+M+M,T=[]}if(k){var Q={};for(h=0;h<y.length;h+=1)Q[y[h]]={},Q[y[h]].text=b[h],Q[y[h]].align=S[h];var Y=o.call(this,Q,C);j=y.map(function(le){return new a(l,u,C[le],Y,Q[le].text,void 0,Q[le].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var J=f.reduce(function(le,se){return le[se.name]=se.align,le},{});for(h=0;h<d.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:d[h]},this);var q=o.call(this,d[h],C);for(g=0;g<y.length;g+=1){var ee=d[h][y[g]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:g,data:ee},this),s.call(this,new a(l,u,C[y[g]],q,ee,h+2,J[y[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(h){var m=l[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/p+d+d},this).reduce(function(h,m){return Math.max(h,m)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(m)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(pn.API);var CJ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jJ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],hP=AJ(jJ),NJ=[100,200,300,400,500,600,700,800,900],zGe=AJ(NJ);function mj(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return CJ[a=a||"normal"]?a:"normal"}(t.style),r=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(t.weight),i=function(a){return typeof hP[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function q9(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var $Ge={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},K9={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function G9(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Y9(t){return t.trimLeft()}function BGe(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function VGe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var A1,X9,Q9,Up,C1,Z9,J9,e$,gj=["times"];function t$(t,e,n,r,i){var a=4,s=r$;switch(i){case pn.API.image_compression.FAST:a=1,s=n$;break;case pn.API.image_compression.MEDIUM:a=6,s=i$;break;case pn.API.image_compression.SLOW:a=9,s=a$}t=function(l,u,d,f){for(var p,h=l.length/u,m=new Uint8Array(l.length+h),g=[UGe,n$,r$,i$,a$],v=0;v<h;v+=1){var y=v*u,b=l.subarray(y,y+u);if(f)m.set(f(b,d,p),y+v);else{for(var S=g.length,A=[],C=0;C<S;C+=1)A[C]=g[C](b,d,p);var T=WGe(A.concat());m.set(A[T],y+v)}p=b}return m}(t,e,Math.ceil(n*r/8),s);var o=sP(t,{level:a});return pn.API.__addimage__.arrayBufferToBinaryString(o)}function UGe(t){var e=Array.apply([],t);return e.unshift(0),e}function n$(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var a=t[i-e]||0;r[i+1]=t[i]-a+256&255}return r}function r$(t,e,n){var r=t.length,i=[];i[0]=2;for(var a=0;a<r;a+=1){var s=n&&n[a]||0;i[a+1]=t[a]-s+256&255}return i}function i$(t,e,n){var r=t.length,i=[];i[0]=3;for(var a=0;a<r;a+=1){var s=t[a-e]||0,o=n&&n[a]||0;i[a+1]=t[a]+256-(s+o>>>1)&255}return i}function a$(t,e,n){var r=t.length,i=[];i[0]=4;for(var a=0;a<r;a+=1){var s=HGe(t[a-e]||0,n&&n[a]||0,n&&n[a-e]||0);i[a+1]=t[a]-s+256&255}return i}function HGe(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),a=Math.abs(t+e-n-n);return r<=i&&r<=a?t:i<=a?e:n}function WGe(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function vj(t,e,n){var r=e*n,i=Math.floor(r/8),a=16-(r-8*i+n),s=(1<<n)-1;return EJ(t,i)>>a&s}function s$(t,e,n,r){var i=n*r,a=Math.floor(i/8),s=16-(i-8*a+r),o=(1<<r)-1,l=(e&o)<<s;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var p=f>>8&255;u.setUint8(d,p)}})(t,a,EJ(t,a)&~(o<<s)&65535|l)}function EJ(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function qGe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,s=1<<1+(7&i);t[e++],t[e++];var o=null,l=null;a&&(o=e,l=s,e+=3*s);var u=!0,d=[],f=0,p=null,h=0,m=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=t[e++];f=t[e++]|t[e++]<<8,p=t[e++],1&g||(p=null),h=g>>2&7,e++;break;case 254:for(;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,A=t[e++],C=A>>6&1,T=1<<1+(7&A),j=o,E=l,k=!1;A>>7&&(k=!0,j=e,E=T,e+=3*T);var O=e;for(e++;;){var D;if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}d.push({x:v,y,width:b,height:S,has_local_palette:k,palette_offset:j,palette_size:E,data_offset:O,data_length:e-O,transparent_index:p,interlaced:!!C,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(M){if(M<0||M>=d.length)throw new Error("Frame index out of range.");return d[M]},this.decodeAndBlitFrameBGRA=function(M,L){var V=this.frameInfo(M),Q=V.width*V.height,Y=new Uint8Array(Q);o$(t,V.data_offset,Y,Q);var J=V.palette_offset,q=V.transparent_index;q===null&&(q=256);var ee=V.width,le=n-ee,se=ee,$=4*(V.y*n+V.x),G=4*((V.y+V.height)*n+V.x),te=$,oe=4*le;V.interlaced===!0&&(oe+=4*n*7);for(var ge=8,_e=0,Ce=Y.length;_e<Ce;++_e){var fe=Y[_e];if(se===0&&(se=ee,(te+=oe)>=G&&(oe=4*le+4*n*(ge-1),te=$+(ee+le)*(ge<<1),ge>>=1)),fe===q)te+=4;else{var be=t[J+3*fe],we=t[J+3*fe+1],ie=t[J+3*fe+2];L[te++]=ie,L[te++]=we,L[te++]=be,L[te++]=255}--se}},this.decodeAndBlitFrameRGBA=function(M,L){var V=this.frameInfo(M),Q=V.width*V.height,Y=new Uint8Array(Q);o$(t,V.data_offset,Y,Q);var J=V.palette_offset,q=V.transparent_index;q===null&&(q=256);var ee=V.width,le=n-ee,se=ee,$=4*(V.y*n+V.x),G=4*((V.y+V.height)*n+V.x),te=$,oe=4*le;V.interlaced===!0&&(oe+=4*n*7);for(var ge=8,_e=0,Ce=Y.length;_e<Ce;++_e){var fe=Y[_e];if(se===0&&(se=ee,(te+=oe)>=G&&(oe=4*le+4*n*(ge-1),te=$+(ee+le)*(ge<<1),ge>>=1)),fe===q)te+=4;else{var be=t[J+3*fe],we=t[J+3*fe+1],ie=t[J+3*fe+2];L[te++]=be,L[te++]=we,L[te++]=ie,L[te++]=255}--se}}}function o$(t,e,n,r){for(var i=t[e++],a=1<<i,s=a+1,o=s+1,l=i+1,u=(1<<l)-1,d=0,f=0,p=0,h=t[e++],m=new Int32Array(4096),g=null;;){for(;d<16&&h!==0;)f|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<l)break;var v=f&u;if(f>>=l,d-=l,v!==a){if(v===s)break;for(var y=v<o?v:g,b=0,S=y;S>a;)S=m[S]>>8,++b;var A=S;if(p+b+(y!==v?1:0)>r)return void Xr.log("Warning, gif stream longer than expected.");n[p++]=A;var C=p+=b;for(y!==v&&(n[p++]=A),S=y;b--;)S=m[S],n[--C]=255&S,S>>=8;g!==null&&o<4096&&(m[o++]=g<<8|A,o>=u+1&&l<12&&(++l,u=u<<1|1)),g=v}else o=s+1,u=(1<<(l=i+1))-1,g=null}return p!==r&&Xr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function yj(t){var e,n,r,i,a,s=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),p=new Array(65535),h=new Array(64),m=new Array(64),g=[],v=0,y=7,b=new Array(64),S=new Array(64),A=new Array(64),C=new Array(256),T=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y($,G){for(var te=0,oe=0,ge=new Array,_e=1;_e<=16;_e++){for(var Ce=1;Ce<=$[_e];Ce++)ge[G[oe]]=[],ge[G[oe]][0]=te,ge[G[oe]][1]=_e,oe++,te++;te*=2}return ge}function J($){for(var G=$[0],te=$[1]-1;te>=0;)G&1<<te&&(v|=1<<y),te--,--y<0&&(v==255?(q(255),q(0)):q(v),y=7,v=0)}function q($){g.push($)}function ee($){q($>>8&255),q(255&$)}function le($,G,te,oe,ge){for(var _e,Ce=ge[0],fe=ge[240],be=function(Xe,Ot){var ft,ut,Dt,Yt,Qt,Ft,sn,at,vt,xt,tt=0;for(vt=0;vt<8;++vt){ft=Xe[tt],ut=Xe[tt+1],Dt=Xe[tt+2],Yt=Xe[tt+3],Qt=Xe[tt+4],Ft=Xe[tt+5],sn=Xe[tt+6];var zt=ft+(at=Xe[tt+7]),ht=ft-at,mt=ut+sn,Mt=ut-sn,_t=Dt+Ft,Ht=Dt-Ft,gn=Yt+Qt,on=Yt-Qt,wt=zt+gn,Xn=zt-gn,fn=mt+_t,qt=mt-_t;Xe[tt]=wt+fn,Xe[tt+4]=wt-fn;var Sn=.707106781*(qt+Xn);Xe[tt+2]=Xn+Sn,Xe[tt+6]=Xn-Sn;var Oi=.382683433*((wt=on+Ht)-(qt=Mt+ht)),Nr=.5411961*wt+Oi,wa=1.306562965*qt+Oi,Re=.707106781*(fn=Ht+Mt),Ie=ht+Re,Ke=ht-Re;Xe[tt+5]=Ke+Nr,Xe[tt+3]=Ke-Nr,Xe[tt+1]=Ie+wa,Xe[tt+7]=Ie-wa,tt+=8}for(tt=0,vt=0;vt<8;++vt){ft=Xe[tt],ut=Xe[tt+8],Dt=Xe[tt+16],Yt=Xe[tt+24],Qt=Xe[tt+32],Ft=Xe[tt+40],sn=Xe[tt+48];var At=ft+(at=Xe[tt+56]),lt=ft-at,Gt=ut+sn,vn=ut-sn,qn=Dt+Ft,$t=Dt-Ft,Kn=Yt+Qt,bi=Yt-Qt,_n=At+Kn,gr=At-Kn,vr=Gt+qn,Qn=Gt-qn;Xe[tt]=_n+vr,Xe[tt+32]=_n-vr;var sr=.707106781*(Qn+gr);Xe[tt+16]=gr+sr,Xe[tt+48]=gr-sr;var Rr=.382683433*((_n=bi+$t)-(Qn=vn+lt)),bs=.5411961*_n+Rr,Sa=1.306562965*Qn+Rr,Do=.707106781*(vr=$t+vn),Io=lt+Do,Er=lt-Do;Xe[tt+40]=Er+bs,Xe[tt+24]=Er-bs,Xe[tt+8]=Io+Sa,Xe[tt+56]=Io-Sa,tt++}for(vt=0;vt<64;++vt)xt=Xe[vt]*Ot[vt],h[vt]=xt>0?xt+.5|0:xt-.5|0;return h}($,G),we=0;we<64;++we)m[j[we]]=be[we];var ie=m[0]-te;te=m[0],ie==0?J(oe[0]):(J(oe[p[_e=32767+ie]]),J(f[_e]));for(var He=63;He>0&&m[He]==0;)He--;if(He==0)return J(Ce),te;for(var Me,he=1;he<=He;){for(var We=he;m[he]==0&&he<=He;)++he;var pt=he-We;if(pt>=16){Me=pt>>4;for(var gt=1;gt<=Me;++gt)J(fe);pt&=15}_e=32767+m[he],J(ge[(pt<<4)+p[_e]]),J(f[_e]),he++}return He!=63&&J(Ce),te}function se($){$=Math.min(Math.max($,1),100),a!=$&&(function(G){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],oe=0;oe<64;oe++){var ge=s((te[oe]*G+50)/100);ge=Math.min(Math.max(ge,1),255),o[j[oe]]=ge}for(var _e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ce=0;Ce<64;Ce++){var fe=s((_e[Ce]*G+50)/100);fe=Math.min(Math.max(fe,1),255),l[j[Ce]]=fe}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,ie=0;ie<8;ie++)for(var He=0;He<8;He++)u[we]=1/(o[j[we]]*be[ie]*be[He]*8),d[we]=1/(l[j[we]]*be[ie]*be[He]*8),we++}($<50?Math.floor(5e3/$):Math.floor(200-2*$)),a=$)}this.encode=function($,G){G&&se(G),g=new Array,v=0,y=7,ee(65496),ee(65504),ee(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),ee(1),ee(1),q(0),q(0),function(){ee(65499),ee(132),q(0);for(var ut=0;ut<64;ut++)q(o[ut]);q(1);for(var Dt=0;Dt<64;Dt++)q(l[Dt])}(),function(ut,Dt){ee(65472),ee(17),q(8),ee(Dt),ee(ut),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}($.width,$.height),function(){ee(65476),ee(418),q(0);for(var ut=0;ut<16;ut++)q(E[ut+1]);for(var Dt=0;Dt<=11;Dt++)q(k[Dt]);q(16);for(var Yt=0;Yt<16;Yt++)q(O[Yt+1]);for(var Qt=0;Qt<=161;Qt++)q(D[Qt]);q(1);for(var Ft=0;Ft<16;Ft++)q(M[Ft+1]);for(var sn=0;sn<=11;sn++)q(L[sn]);q(17);for(var at=0;at<16;at++)q(V[at+1]);for(var vt=0;vt<=161;vt++)q(Q[vt])}(),ee(65498),ee(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var te=0,oe=0,ge=0;v=0,y=7,this.encode.displayName="_encode_";for(var _e,Ce,fe,be,we,ie,He,Me,he,We=$.data,pt=$.width,gt=$.height,Xe=4*pt,Ot=0;Ot<gt;){for(_e=0;_e<Xe;){for(we=Xe*Ot+_e,He=-1,Me=0,he=0;he<64;he++)ie=we+(Me=he>>3)*Xe+(He=4*(7&he)),Ot+Me>=gt&&(ie-=Xe*(Ot+1+Me-gt)),_e+He>=Xe&&(ie-=_e+He-Xe+4),Ce=We[ie++],fe=We[ie++],be=We[ie++],b[he]=(T[Ce]+T[fe+256|0]+T[be+512|0]>>16)-128,S[he]=(T[Ce+768|0]+T[fe+1024|0]+T[be+1280|0]>>16)-128,A[he]=(T[Ce+1280|0]+T[fe+1536|0]+T[be+1792|0]>>16)-128;te=le(b,u,te,e,r),oe=le(S,d,oe,n,i),ge=le(A,d,ge,n,i),_e+=32}Ot+=8}if(y>=0){var ft=[];ft[1]=y+1,ft[0]=(1<<y+1)-1,J(ft)}return ee(65497),new Uint8Array(g)},t=t||50,function(){for(var $=String.fromCharCode,G=0;G<256;G++)C[G]=$(G)}(),e=Y(E,k),n=Y(M,L),r=Y(O,D),i=Y(V,Q),function(){for(var $=1,G=2,te=1;te<=15;te++){for(var oe=$;oe<G;oe++)p[32767+oe]=te,f[32767+oe]=[],f[32767+oe][1]=te,f[32767+oe][0]=oe;for(var ge=-(G-1);ge<=-$;ge++)p[32767+ge]=te,f[32767+ge]=[],f[32767+ge][1]=te,f[32767+ge][0]=G-1+ge;$<<=1,G<<=1}}(),function(){for(var $=0;$<256;$++)T[$]=19595*$,T[$+256|0]=38470*$,T[$+512|0]=7471*$+32768,T[$+768|0]=-11059*$,T[$+1024|0]=-21709*$,T[$+1280|0]=32768*$+8421375,T[$+1536|0]=-27439*$,T[$+1792|0]=-5329*$}(),se(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function hc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function l$(t){function e(k){if(!k)throw Error("assert :P")}function n(k,O,D){for(var M=0;4>M;M++)if(k[O+M]!=D.charCodeAt(M))return!0;return!1}function r(k,O,D,M,L){for(var V=0;V<L;V++)k[O+V]=D[M+V]}function i(k,O,D,M){for(var L=0;L<M;L++)k[O+L]=D}function a(k){return new Int32Array(k)}function s(k,O){for(var D=[],M=0;M<k;M++)D.push(new O);return D}function o(k,O){var D=[];return function M(L,V,Q){for(var Y=Q[V],J=0;J<Y&&(L.push(Q.length>V+1?[]:new O),!(Q.length<V+1));J++)M(L[J],V+1,Q)}(D,0,k),D}var l=function(){var k=this;function O(x,N){for(var F=1<<N-1>>>0;x&F;)F>>>=1;return F?(x&F-1)+F:x}function D(x,N,F,U,Z){e(!(U%F));do x[N+(U-=F)]=Z;while(0<U)}function M(x,N,F,U,Z){if(e(2328>=Z),512>=Z)var re=a(512);else if((re=a(Z))==null)return 0;return function(ae,ce,de,ve,De,Ge){var ye,Fe,Ue=ce,it=1<<de,qe=a(16),ct=a(16);for(e(De!=0),e(ve!=null),e(ae!=null),e(0<de),Fe=0;Fe<De;++Fe){if(15<ve[Fe])return 0;++qe[ve[Fe]]}if(qe[0]==De)return 0;for(ct[1]=0,ye=1;15>ye;++ye){if(qe[ye]>1<<ye)return 0;ct[ye+1]=ct[ye]+qe[ye]}for(Fe=0;Fe<De;++Fe)ye=ve[Fe],0<ve[Fe]&&(Ge[ct[ye]++]=Fe);if(ct[15]==1)return(ve=new L).g=0,ve.value=Ge[0],D(ae,Ue,1,it,ve),it;var dt,Nt=-1,St=it-1,hn=0,rn=1,Un=1,un=1<<de;for(Fe=0,ye=1,De=2;ye<=de;++ye,De<<=1){if(rn+=Un<<=1,0>(Un-=qe[ye]))return 0;for(;0<qe[ye];--qe[ye])(ve=new L).g=ye,ve.value=Ge[Fe++],D(ae,Ue+hn,De,un,ve),hn=O(hn,ye)}for(ye=de+1,De=2;15>=ye;++ye,De<<=1){if(rn+=Un<<=1,0>(Un-=qe[ye]))return 0;for(;0<qe[ye];--qe[ye]){if(ve=new L,(hn&St)!=Nt){for(Ue+=un,dt=1<<(Nt=ye)-de;15>Nt&&!(0>=(dt-=qe[Nt]));)++Nt,dt<<=1;it+=un=1<<(dt=Nt-de),ae[ce+(Nt=hn&St)].g=dt+de,ae[ce+Nt].value=Ue-ce-Nt}ve.g=ye-de,ve.value=Ge[Fe++],D(ae,Ue+(hn>>de),De,un,ve),hn=O(hn,ye)}}return rn!=2*ct[15]-1?0:it}(x,N,F,U,Z,re)}function L(){this.value=this.g=0}function V(){this.value=this.g=0}function Q(){this.G=s(5,L),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(rs,V)}function Y(x,N,F,U){e(x!=null),e(N!=null),e(2147483648>U),x.Ca=254,x.I=0,x.b=-8,x.Ka=0,x.oa=N,x.pa=F,x.Jd=N,x.Yc=F+U,x.Zc=4<=U?F+U-4+1:F,Ce(x)}function J(x,N){for(var F=0;0<N--;)F|=be(x,128)<<N;return F}function q(x,N){var F=J(x,N);return fe(x)?-F:F}function ee(x,N,F,U){var Z,re=0;for(e(x!=null),e(N!=null),e(4294967288>U),x.Sb=U,x.Ra=0,x.u=0,x.h=0,4<U&&(U=4),Z=0;Z<U;++Z)re+=N[F+Z]<<8*Z;x.Ra=re,x.bb=U,x.oa=N,x.pa=F}function le(x){for(;8<=x.u&&x.bb<x.Sb;)x.Ra>>>=8,x.Ra+=x.oa[x.pa+x.bb]<<Zi-8>>>0,++x.bb,x.u-=8;oe(x)&&(x.h=1,x.u=0)}function se(x,N){if(e(0<=N),!x.h&&N<=Ua){var F=te(x)&or[N];return x.u+=N,le(x),F}return x.h=1,x.u=0}function $(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(x){return x.Ra>>>(x.u&Zi-1)>>>0}function oe(x){return e(x.bb<=x.Sb),x.h||x.bb==x.Sb&&x.u>Zi}function ge(x,N){x.u=N,x.h=oe(x)}function _e(x){x.u>=sc&&(e(x.u>=sc),le(x))}function Ce(x){e(x!=null&&x.oa!=null),x.pa<x.Zc?(x.I=(x.oa[x.pa++]|x.I<<8)>>>0,x.b+=8):(e(x!=null&&x.oa!=null),x.pa<x.Yc?(x.b+=8,x.I=x.oa[x.pa++]|x.I<<8):x.Ka?x.b=0:(x.I<<=8,x.b+=8,x.Ka=1))}function fe(x){return J(x,1)}function be(x,N){var F=x.Ca;0>x.b&&Ce(x);var U=x.b,Z=F*N>>>8,re=(x.I>>>U>Z)+0;for(re?(F-=Z,x.I-=Z+1<<U>>>0):F=Z+1,U=F,Z=0;256<=U;)Z+=8,U>>=8;return U=7^Z+Pl[U],x.b-=U,x.Ca=(F<<U)-1,re}function we(x,N,F){x[N+0]=F>>24&255,x[N+1]=F>>16&255,x[N+2]=F>>8&255,x[N+3]=255&F}function ie(x,N){return x[N+0]|x[N+1]<<8}function He(x,N){return ie(x,N)|x[N+2]<<16}function Me(x,N){return ie(x,N)|ie(x,N+2)<<16}function he(x,N){var F=1<<N;return e(x!=null),e(0<N),x.X=a(F),x.X==null?0:(x.Mb=32-N,x.Xa=N,1)}function We(x,N){e(x!=null),e(N!=null),e(x.Xa==N.Xa),r(N.X,0,x.X,0,1<<N.Xa)}function pt(){this.X=[],this.Xa=this.Mb=0}function gt(x,N,F,U){e(F!=null),e(U!=null);var Z=F[0],re=U[0];return Z==0&&(Z=(x*re+N/2)/N),re==0&&(re=(N*Z+x/2)/x),0>=Z||0>=re?0:(F[0]=Z,U[0]=re,1)}function Xe(x,N){return x+(1<<N)-1>>>N}function Ot(x,N){return((4278255360&x)+(4278255360&N)>>>0&4278255360)+((16711935&x)+(16711935&N)>>>0&16711935)>>>0}function ft(x,N){k[N]=function(F,U,Z,re,ae,ce,de){var ve;for(ve=0;ve<ae;++ve){var De=k[x](ce[de+ve-1],Z,re+ve);ce[de+ve]=Ot(F[U+ve],De)}}}function ut(){this.ud=this.hd=this.jd=0}function Dt(x,N){return((4278124286&(x^N))>>>1)+(x&N)>>>0}function Yt(x){return 0<=x&&256>x?x:0>x?0:255<x?255:void 0}function Qt(x,N){return Yt(x+(x-N+.5>>1))}function Ft(x,N,F){return Math.abs(N-F)-Math.abs(x-F)}function sn(x,N,F,U,Z,re,ae){for(U=re[ae-1],F=0;F<Z;++F)re[ae+F]=U=Ot(x[N+F],U)}function at(x,N,F,U,Z){var re;for(re=0;re<F;++re){var ae=x[N+re],ce=ae>>8&255,de=16711935&(de=(de=16711935&ae)+((ce<<16)+ce));U[Z+re]=(4278255360&ae)+de>>>0}}function vt(x,N){N.jd=255&x,N.hd=x>>8&255,N.ud=x>>16&255}function xt(x,N,F,U,Z,re){var ae;for(ae=0;ae<U;++ae){var ce=N[F+ae],de=ce>>>8,ve=ce,De=255&(De=(De=ce>>>16)+((x.jd<<24>>24)*(de<<24>>24)>>>5));ve=255&(ve=(ve+=(x.hd<<24>>24)*(de<<24>>24)>>>5)+((x.ud<<24>>24)*(De<<24>>24)>>>5)),Z[re+ae]=(4278255360&ce)+(De<<16)+ve}}function tt(x,N,F,U,Z){k[N]=function(re,ae,ce,de,ve,De,Ge,ye,Fe){for(de=Ge;de<ye;++de)for(Ge=0;Ge<Fe;++Ge)ve[De++]=Z(ce[U(re[ae++])])},k[x]=function(re,ae,ce,de,ve,De,Ge){var ye=8>>re.b,Fe=re.Ea,Ue=re.K[0],it=re.w;if(8>ye)for(re=(1<<re.b)-1,it=(1<<ye)-1;ae<ce;++ae){var qe,ct=0;for(qe=0;qe<Fe;++qe)qe&re||(ct=U(de[ve++])),De[Ge++]=Z(Ue[ct&it]),ct>>=ye}else k["VP8LMapColor"+F](de,ve,Ue,it,De,Ge,ae,ce,Fe)}}function zt(x,N,F,U,Z){for(F=N+F;N<F;){var re=x[N++];U[Z++]=re>>16&255,U[Z++]=re>>8&255,U[Z++]=255&re}}function ht(x,N,F,U,Z){for(F=N+F;N<F;){var re=x[N++];U[Z++]=re>>16&255,U[Z++]=re>>8&255,U[Z++]=255&re,U[Z++]=re>>24&255}}function mt(x,N,F,U,Z){for(F=N+F;N<F;){var re=(ae=x[N++])>>16&240|ae>>12&15,ae=240&ae|ae>>28&15;U[Z++]=re,U[Z++]=ae}}function Mt(x,N,F,U,Z){for(F=N+F;N<F;){var re=(ae=x[N++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;U[Z++]=re,U[Z++]=ae}}function _t(x,N,F,U,Z){for(F=N+F;N<F;){var re=x[N++];U[Z++]=255&re,U[Z++]=re>>8&255,U[Z++]=re>>16&255}}function Ht(x,N,F,U,Z,re){if(re==0)for(F=N+F;N<F;)we(U,((re=x[N++])[0]>>24|re[1]>>8&65280|re[2]<<8&16711680|re[3]<<24)>>>0),Z+=32;else r(U,Z,x,N,F)}function gn(x,N){k[N][0]=k[x+"0"],k[N][1]=k[x+"1"],k[N][2]=k[x+"2"],k[N][3]=k[x+"3"],k[N][4]=k[x+"4"],k[N][5]=k[x+"5"],k[N][6]=k[x+"6"],k[N][7]=k[x+"7"],k[N][8]=k[x+"8"],k[N][9]=k[x+"9"],k[N][10]=k[x+"10"],k[N][11]=k[x+"11"],k[N][12]=k[x+"12"],k[N][13]=k[x+"13"],k[N][14]=k[x+"0"],k[N][15]=k[x+"0"]}function on(x){return x==D_||x==I_||x==sx||x==O_}function wt(){this.eb=[],this.size=this.A=this.fb=0}function Xn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function fn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new wt,this.f.kb=new Xn,this.sd=null}function qt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Sn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Oi(x){return alert("todo:WebPSamplerProcessPlane"),x.T}function Nr(x,N){var F=x.T,U=N.ba.f.RGBA,Z=U.eb,re=U.fb+x.ka*U.A,ae=Tl[N.ba.S],ce=x.y,de=x.O,ve=x.f,De=x.N,Ge=x.ea,ye=x.W,Fe=N.cc,Ue=N.dc,it=N.Mc,qe=N.Nc,ct=x.ka,dt=x.ka+x.T,Nt=x.U,St=Nt+1>>1;for(ct==0?ae(ce,de,null,null,ve,De,Ge,ye,ve,De,Ge,ye,Z,re,null,null,Nt):(ae(N.ec,N.fc,ce,de,Fe,Ue,it,qe,ve,De,Ge,ye,Z,re-U.A,Z,re,Nt),++F);ct+2<dt;ct+=2)Fe=ve,Ue=De,it=Ge,qe=ye,De+=x.Rc,ye+=x.Rc,re+=2*U.A,ae(ce,(de+=2*x.fa)-x.fa,ce,de,Fe,Ue,it,qe,ve,De,Ge,ye,Z,re-U.A,Z,re,Nt);return de+=x.fa,x.j+dt<x.o?(r(N.ec,N.fc,ce,de,Nt),r(N.cc,N.dc,ve,De,St),r(N.Mc,N.Nc,Ge,ye,St),F--):1&dt||ae(ce,de,null,null,ve,De,Ge,ye,ve,De,Ge,ye,Z,re+U.A,null,null,Nt),F}function wa(x,N,F){var U=x.F,Z=[x.J];if(U!=null){var re=x.U,ae=N.ba.S,ce=ae==ax||ae==sx;N=N.ba.f.RGBA;var de=[0],ve=x.ka;de[0]=x.T,x.Kb&&(ve==0?--de[0]:(--ve,Z[0]-=x.width),x.j+x.ka+x.T==x.o&&(de[0]=x.o-x.j-ve));var De=N.eb;ve=N.fb+ve*N.A,x=On(U,Z[0],x.width,re,de,De,ve+(ce?0:3),N.A),e(F==de),x&&on(ae)&&Lt(De,ve,ce,re,de,N.A)}return 0}function Re(x){var N=x.ma,F=N.ba.S,U=11>F,Z=F==rx||F==ix||F==ax||F==T_||F==12||on(F);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Uf(N.Oa,x,Z?11:12))return 0;if(Z&&on(F)&&Wc(),x.da)alert("todo:use_scaling");else{if(U){if(N.Ib=Oi,x.Kb){if(F=x.U+1>>1,N.memory=a(x.U+2*F),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+x.U,N.Mc=N.cc,N.Nc=N.dc+F,N.Ib=Nr,Wc()}}else alert("todo:EmitYUV");Z&&(N.Jb=wa,U&&kr())}if(U&&!dI){for(x=0;256>x;++x)fee[x]=89858*(x-128)+lx>>ox,mee[x]=-22014*(x-128)+lx,pee[x]=-45773*(x-128),hee[x]=113618*(x-128)+lx>>ox;for(x=_v;x<L_;++x)N=76283*(x-16)+lx>>ox,gee[x-_v]=Vn(N,255),vee[x-_v]=Vn(N+8>>4,15);dI=1}return 1}function Ie(x){var N=x.ma,F=x.U,U=x.T;return e(!(1&x.ka)),0>=F||0>=U?0:(F=N.Ib(x,N),N.Jb!=null&&N.Jb(x,N,F),N.Dc+=F,1)}function Ke(x){x.ma.memory=null}function At(x,N,F,U){return se(x,8)!=47?0:(N[0]=se(x,14)+1,F[0]=se(x,14)+1,U[0]=se(x,1),se(x,3)!=0?0:!x.h)}function lt(x,N){if(4>x)return x+1;var F=x-2>>1;return(2+(1&x)<<F)+se(N,F)+1}function Gt(x,N){return 120<N?N-120:1<=(F=((F=ZJ[N-1])>>4)*x+(8-(15&F)))?F:1;var F}function vn(x,N,F){var U=te(F),Z=x[N+=255&U].g-8;return 0<Z&&(ge(F,F.u+8),U=te(F),N+=x[N].value,N+=U&(1<<Z)-1),ge(F,F.u+x[N].g),x[N].value}function qn(x,N,F){return F.g+=x.g,F.value+=x.value<<N>>>0,e(8>=F.g),x.g}function $t(x,N,F){var U=x.xc;return e((N=U==0?0:x.vc[x.md*(F>>U)+(N>>U)])<x.Wb),x.Ya[N]}function Kn(x,N,F,U){var Z=x.ab,re=x.c*N,ae=x.C;N=ae+N;var ce=F,de=U;for(U=x.Ta,F=x.Ua;0<Z--;){var ve=x.gc[Z],De=ae,Ge=N,ye=ce,Fe=de,Ue=(de=U,ce=F,ve.Ea);switch(e(De<Ge),e(Ge<=ve.nc),ve.hc){case 2:li(ye,Fe,(Ge-De)*Ue,de,ce);break;case 0:var it=De,qe=Ge,ct=de,dt=ce,Nt=(un=ve).Ea;it==0&&(wd(ye,Fe,null,null,1,ct,dt),sn(ye,Fe+1,0,0,Nt-1,ct,dt+1),Fe+=Nt,dt+=Nt,++it);for(var St=1<<un.b,hn=St-1,rn=Xe(Nt,un.b),Un=un.K,un=un.w+(it>>un.b)*rn;it<qe;){var lr=Un,Pa=un,Hn=1;for(fo(ye,Fe,ct,dt-Nt,1,ct,dt);Hn<Nt;){var dn=(Hn&~hn)+St;dn>Nt&&(dn=Nt),(0,P[lr[Pa++]>>8&15])(ye,Fe+ +Hn,ct,dt+Hn-Nt,dn-Hn,ct,dt+Hn),Hn=dn}Fe+=Nt,dt+=Nt,++it&hn||(un+=rn)}Ge!=ve.nc&&r(de,ce-Ue,de,ce+(Ge-De-1)*Ue,Ue);break;case 1:for(Ue=ye,qe=Fe,Nt=(ye=ve.Ea)-(dt=ye&~(ct=(Fe=1<<ve.b)-1)),it=Xe(ye,ve.b),St=ve.K,ve=ve.w+(De>>ve.b)*it;De<Ge;){for(hn=St,rn=ve,Un=new ut,un=qe+dt,lr=qe+ye;qe<un;)vt(hn[rn++],Un),z(Un,Ue,qe,Fe,de,ce),qe+=Fe,ce+=Fe;qe<lr&&(vt(hn[rn++],Un),z(Un,Ue,qe,Nt,de,ce),qe+=Nt,ce+=Nt),++De&ct||(ve+=it)}break;case 3:if(ye==de&&Fe==ce&&0<ve.b){for(qe=de,ye=Ue=ce+(Ge-De)*Ue-(dt=(Ge-De)*Xe(ve.Ea,ve.b)),Fe=de,ct=ce,it=[],dt=(Nt=dt)-1;0<=dt;--dt)it[dt]=Fe[ct+dt];for(dt=Nt-1;0<=dt;--dt)qe[ye+dt]=it[dt];oc(ve,De,Ge,de,Ue,de,ce)}else oc(ve,De,Ge,ye,Fe,de,ce)}ce=U,de=F}de!=F&&r(U,F,ce,de,re)}function bi(x,N){var F=x.V,U=x.Ba+x.c*x.C,Z=N-x.C;if(e(N<=x.l.o),e(16>=Z),0<Z){var re=x.l,ae=x.Ta,ce=x.Ua,de=re.width;if(Kn(x,Z,F,U),Z=ce=[ce],e((F=x.C)<(U=N)),e(re.v<re.va),U>re.o&&(U=re.o),F<re.j){var ve=re.j-F;F=re.j,Z[0]+=ve*de}if(F>=U?F=0:(Z[0]+=4*re.v,re.ka=F-re.j,re.U=re.va-re.v,re.T=U-F,F=1),F){if(ce=ce[0],11>(F=x.ca).S){var De=F.f.RGBA,Ge=(U=F.S,Z=re.U,re=re.T,ve=De.eb,De.A),ye=re;for(De=De.fb+x.Ma*De.A;0<ye--;){var Fe=ae,Ue=ce,it=Z,qe=ve,ct=De;switch(U){case nx:H(Fe,Ue,it,qe,ct);break;case rx:K(Fe,Ue,it,qe,ct);break;case D_:K(Fe,Ue,it,qe,ct),Lt(qe,ct,0,it,1,0);break;case nI:Se(Fe,Ue,it,qe,ct);break;case ix:Ht(Fe,Ue,it,qe,ct,1);break;case I_:Ht(Fe,Ue,it,qe,ct,1),Lt(qe,ct,0,it,1,0);break;case ax:Ht(Fe,Ue,it,qe,ct,0);break;case sx:Ht(Fe,Ue,it,qe,ct,0),Lt(qe,ct,1,it,1,0);break;case T_:ne(Fe,Ue,it,qe,ct);break;case O_:ne(Fe,Ue,it,qe,ct),Ut(qe,ct,it,1,0);break;case rI:pe(Fe,Ue,it,qe,ct);break;default:e(0)}ce+=de,De+=Ge}x.Ma+=re}else alert("todo:EmitRescaledRowsYUVA");e(x.Ma<=F.height)}}x.C=N,e(x.C<=x.i)}function _n(x){var N;if(0<x.ua)return 0;for(N=0;N<x.Wb;++N){var F=x.Ya[N].G,U=x.Ya[N].H;if(0<F[1][U[1]+0].g||0<F[2][U[2]+0].g||0<F[3][U[3]+0].g)return 0}return 1}function gr(x,N,F,U,Z,re){if(x.Z!=0){var ae=x.qd,ce=x.rd;for(e(Ad[x.Z]!=null);N<F;++N)Ad[x.Z](ae,ce,U,Z,U,Z,re),ae=U,ce=Z,Z+=re;x.qd=ae,x.rd=ce}}function vr(x,N){var F=x.l.ma,U=F.Z==0||F.Z==1?x.l.j:x.C;if(U=x.C<U?U:x.C,e(N<=x.l.o),N>U){var Z=x.l.width,re=F.ca,ae=F.tb+Z*U,ce=x.V,de=x.Ba+x.c*U,ve=x.gc;e(x.ab==1),e(ve[0].hc==3),Ho(ve[0],U,N,ce,de,re,ae),gr(F,U,N,re,ae,Z)}x.C=x.Ma=N}function Qn(x,N,F,U,Z,re,ae){var ce=x.$/U,de=x.$%U,ve=x.m,De=x.s,Ge=F+x.$,ye=Ge;Z=F+U*Z;var Fe=F+U*re,Ue=280+De.ua,it=x.Pb?ce:16777216,qe=0<De.ua?De.Wa:null,ct=De.wc,dt=Ge<Fe?$t(De,de,ce):null;e(x.C<re),e(Fe<=Z);var Nt=!1;e:for(;;){for(;Nt||Ge<Fe;){var St=0;if(ce>=it){var hn=Ge-F;e((it=x).Pb),it.wd=it.m,it.xd=hn,0<it.s.ua&&We(it.s.Wa,it.s.vb),it=ce+eee}if(de&ct||(dt=$t(De,de,ce)),e(dt!=null),dt.Qb&&(N[Ge]=dt.qb,Nt=!0),!Nt)if(_e(ve),dt.jc){St=ve,hn=N;var rn=Ge,Un=dt.pd[te(St)&rs-1];e(dt.jc),256>Un.g?(ge(St,St.u+Un.g),hn[rn]=Un.value,St=0):(ge(St,St.u+Un.g-256),e(256<=Un.value),St=Un.value),St==0&&(Nt=!0)}else St=vn(dt.G[0],dt.H[0],ve);if(ve.h)break;if(Nt||256>St){if(!Nt)if(dt.nd)N[Ge]=(dt.qb|St<<8)>>>0;else{if(_e(ve),Nt=vn(dt.G[1],dt.H[1],ve),_e(ve),hn=vn(dt.G[2],dt.H[2],ve),rn=vn(dt.G[3],dt.H[3],ve),ve.h)break;N[Ge]=(rn<<24|Nt<<16|St<<8|hn)>>>0}if(Nt=!1,++Ge,++de>=U&&(de=0,++ce,ae!=null&&ce<=re&&!(ce%16)&&ae(x,ce),qe!=null))for(;ye<Ge;)St=N[ye++],qe.X[(506832829*St&4294967295)>>>qe.Mb]=St}else if(280>St){if(St=lt(St-256,ve),hn=vn(dt.G[4],dt.H[4],ve),_e(ve),hn=Gt(U,hn=lt(hn,ve)),ve.h)break;if(Ge-F<hn||Z-Ge<St)break e;for(rn=0;rn<St;++rn)N[Ge+rn]=N[Ge+rn-hn];for(Ge+=St,de+=St;de>=U;)de-=U,++ce,ae!=null&&ce<=re&&!(ce%16)&&ae(x,ce);if(e(Ge<=Z),de&ct&&(dt=$t(De,de,ce)),qe!=null)for(;ye<Ge;)St=N[ye++],qe.X[(506832829*St&4294967295)>>>qe.Mb]=St}else{if(!(St<Ue))break e;for(Nt=St-280,e(qe!=null);ye<Ge;)St=N[ye++],qe.X[(506832829*St&4294967295)>>>qe.Mb]=St;St=Ge,e(!(Nt>>>(hn=qe).Xa)),N[St]=hn.X[Nt],Nt=!0}Nt||e(ve.h==oe(ve))}if(x.Pb&&ve.h&&Ge<Z)e(x.m.h),x.a=5,x.m=x.wd,x.$=x.xd,0<x.s.ua&&We(x.s.vb,x.s.Wa);else{if(ve.h)break e;ae!=null&&ae(x,ce>re?re:ce),x.a=0,x.$=Ge-F}return 1}return x.a=3,0}function sr(x){e(x!=null),x.vc=null,x.yc=null,x.Ya=null;var N=x.Wa;N!=null&&(N.X=null),x.vb=null,e(x!=null)}function Rr(){var x=new Zt;return x==null?null:(x.a=0,x.xb=sI,gn("Predictor","VP8LPredictors"),gn("Predictor","VP8LPredictors_C"),gn("PredictorAdd","VP8LPredictorsAdd"),gn("PredictorAdd","VP8LPredictorsAdd_C"),li=at,z=xt,H=zt,K=ht,ne=mt,pe=Mt,Se=_t,k.VP8LMapColor32b=Na,k.VP8LMapColor8b=_,x)}function bs(x,N,F,U,Z){var re=1,ae=[x],ce=[N],de=U.m,ve=U.s,De=null,Ge=0;e:for(;;){if(F)for(;re&&se(de,1);){var ye=ae,Fe=ce,Ue=U,it=1,qe=Ue.m,ct=Ue.gc[Ue.ab],dt=se(qe,2);if(Ue.Oc&1<<dt)re=0;else{switch(Ue.Oc|=1<<dt,ct.hc=dt,ct.Ea=ye[0],ct.nc=Fe[0],ct.K=[null],++Ue.ab,e(4>=Ue.ab),dt){case 0:case 1:ct.b=se(qe,3)+2,it=bs(Xe(ct.Ea,ct.b),Xe(ct.nc,ct.b),0,Ue,ct.K),ct.K=ct.K[0];break;case 3:var Nt,St=se(qe,8)+1,hn=16<St?0:4<St?1:2<St?2:3;if(ye[0]=Xe(ct.Ea,hn),ct.b=hn,Nt=it=bs(St,1,0,Ue,ct.K)){var rn,Un=St,un=ct,lr=1<<(8>>un.b),Pa=a(lr);if(Pa==null)Nt=0;else{var Hn=un.K[0],dn=un.w;for(Pa[0]=un.K[0][0],rn=1;rn<1*Un;++rn)Pa[rn]=Ot(Hn[dn+rn],Pa[rn-1]);for(;rn<4*lr;++rn)Pa[rn]=0;un.K[0]=null,un.K[0]=Pa,Nt=1}}it=Nt;break;case 2:break;default:e(0)}re=it}}if(ae=ae[0],ce=ce[0],re&&se(de,1)&&!(re=1<=(Ge=se(de,4))&&11>=Ge)){U.a=3;break e}var Bt;if(Bt=re)t:{var ea,zn,hr,ui=U,is=ae,Zs=ce,Mi=Ge,Es=F,Js=ui.m,Ta=ui.s,xr=[null],Fr=1,Ri=0,zr=JJ[Mi];n:for(;;){if(Es&&se(Js,1)){var as=se(Js,3)+2,cc=Xe(is,as),ta=Xe(Zs,as),ho=cc*ta;if(!bs(cc,ta,0,ui,xr))break n;for(xr=xr[0],Ta.xc=as,ea=0;ea<ho;++ea){var Yr=xr[ea]>>8&65535;xr[ea]=Yr,Yr>=Fr&&(Fr=Yr+1)}}if(Js.h)break n;for(zn=0;5>zn;++zn){var Da=iI[zn];!zn&&0<Mi&&(Da+=1<<Mi),Ri<Da&&(Ri=Da)}var Wo=s(Fr*zr,L),eo=Fr,qo=s(eo,Q);if(qo==null)var Ko=null;else e(65536>=eo),Ko=qo;var po=a(Ri);if(Ko==null||po==null||Wo==null){ui.a=1;break n}var Go=Wo;for(ea=hr=0;ea<Fr;++ea){var ti=Ko[ea],Yo=ti.G,uc=ti.H,Wf=0,ku=1,ss=0;for(zn=0;5>zn;++zn){Da=iI[zn],Yo[zn]=Go,uc[zn]=hr,!zn&&0<Mi&&(Da+=1<<Mi);i:{var ux,F_=Da,dx=ui,Av=po,xee=Go,wee=hr,z_=0,Cd=dx.m,See=se(Cd,1);if(i(Av,0,0,F_),See){var _ee=se(Cd,1)+1,Aee=se(Cd,1),pI=se(Cd,Aee==0?1:8);Av[pI]=1,_ee==2&&(Av[pI=se(Cd,8)]=1);var fx=1}else{var mI=a(19),gI=se(Cd,4)+4;if(19<gI){dx.a=3;var hx=0;break i}for(ux=0;ux<gI;++ux)mI[QJ[ux]]=se(Cd,3);var $_=void 0,Cv=void 0,vI=dx,Cee=mI,px=F_,yI=Av,B_=0,jd=vI.m,bI=8,xI=s(128,L);r:for(;M(xI,0,7,Cee,19);){if(se(jd,1)){var jee=2+2*se(jd,3);if(($_=2+se(jd,jee))>px)break r}else $_=px;for(Cv=0;Cv<px&&$_--;){_e(jd);var wI=xI[0+(127&te(jd))];ge(jd,jd.u+wI.g);var Ip=wI.value;if(16>Ip)yI[Cv++]=Ip,Ip!=0&&(bI=Ip);else{var Nee=Ip==16,SI=Ip-16,Eee=YJ[SI],_I=se(jd,GJ[SI])+Eee;if(Cv+_I>px)break r;for(var kee=Nee?bI:0;0<_I--;)yI[Cv++]=kee}}B_=1;break r}B_||(vI.a=3),fx=B_}(fx=fx&&!Cd.h)&&(z_=M(xee,wee,8,Av,F_)),fx&&z_!=0?hx=z_:(dx.a=3,hx=0)}if(hx==0)break n;if(ku&&XJ[zn]==1&&(ku=Go[hr].g==0),Wf+=Go[hr].g,hr+=hx,3>=zn){var jv,V_=po[0];for(jv=1;jv<Da;++jv)po[jv]>V_&&(V_=po[jv]);ss+=V_}}if(ti.nd=ku,ti.Qb=0,ku&&(ti.qb=(Yo[3][uc[3]+0].value<<24|Yo[1][uc[1]+0].value<<16|Yo[2][uc[2]+0].value)>>>0,Wf==0&&256>Yo[0][uc[0]+0].value&&(ti.Qb=1,ti.qb+=Yo[0][uc[0]+0].value<<8)),ti.jc=!ti.Qb&&6>ss,ti.jc){var mx,Pu=ti;for(mx=0;mx<rs;++mx){var Nd=mx,Ed=Pu.pd[Nd],gx=Pu.G[0][Pu.H[0]+Nd];256<=gx.value?(Ed.g=gx.g+256,Ed.value=gx.value):(Ed.g=0,Ed.value=0,Nd>>=qn(gx,8,Ed),Nd>>=qn(Pu.G[1][Pu.H[1]+Nd],16,Ed),Nd>>=qn(Pu.G[2][Pu.H[2]+Nd],0,Ed),qn(Pu.G[3][Pu.H[3]+Nd],24,Ed))}}}Ta.vc=xr,Ta.Wb=Fr,Ta.Ya=Ko,Ta.yc=Wo,Bt=1;break t}Bt=0}if(!(re=Bt)){U.a=3;break e}if(0<Ge){if(ve.ua=1<<Ge,!he(ve.Wa,Ge)){U.a=1,re=0;break e}}else ve.ua=0;var U_=U,AI=ae,Pee=ce,H_=U_.s,W_=H_.xc;if(U_.c=AI,U_.i=Pee,H_.md=Xe(AI,W_),H_.wc=W_==0?-1:(1<<W_)-1,F){U.xb=oee;break e}if((De=a(ae*ce))==null){U.a=1,re=0;break e}re=(re=Qn(U,De,0,ae,ce,ce,null))&&!de.h;break e}return re?(Z!=null?Z[0]=De:(e(De==null),e(F)),U.$=0,F||sr(ve)):sr(ve),re}function Sa(x,N){var F=x.c*x.i,U=F+N+16*N;return e(x.c<=N),x.V=a(U),x.V==null?(x.Ta=null,x.Ua=0,x.a=1,0):(x.Ta=x.V,x.Ua=x.Ba+F+N,1)}function Do(x,N){var F=x.C,U=N-F,Z=x.V,re=x.Ba+x.c*F;for(e(N<=x.l.o);0<U;){var ae=16<U?16:U,ce=x.l.ma,de=x.l.width,ve=de*ae,De=ce.ca,Ge=ce.tb+de*F,ye=x.Ta,Fe=x.Ua;Kn(x,ae,Z,re),nr(ye,Fe,De,Ge,ve),gr(ce,F,F+ae,De,Ge,de),U-=ae,Z+=ae*x.c,F+=ae}e(F==N),x.C=x.Ma=N}function Io(){this.ub=this.yd=this.td=this.Rb=0}function Er(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Oo(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function ua(){this.Yb=function(){var x=[];return function N(F,U,Z){for(var re=Z[U],ae=0;ae<re&&(F.push(Z.length>U+1?[]:0),!(Z.length<U+1));ae++)N(F[ae],U+1,Z)}(x,0,[3,11]),x}()}function $c(){this.jb=a(3),this.Wc=o([4,8],ua),this.Xc=o([4,17],ua)}function qs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ni(){this.ld=this.La=this.dd=this.tc=0}function es(){this.Na=this.la=0}function wl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ks(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Bc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ni),this.Y=0,this.ya=Array(new Ks),this.aa=0,this.l=new Tn}function Sl(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Vc(){this.cb=this.a=0,this.sc="",this.m=new $,this.Od=new Io,this.Kc=new Er,this.ed=new qs,this.Qa=new Oo,this.Ic=this.$c=this.Aa=0,this.D=new Bc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,$),this.ia=0,this.pb=s(4,wl),this.Pa=new $c,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Sl),this.Hd=0,this.rb=Array(new es),this.sb=0,this.wa=Array(new Ni),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ks),this.L=this.aa=0,this.gd=o([4,2],Ni),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Tn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Uc(){var x=new Vc;return x!=null&&(x.a=0,x.sc="OK",x.cb=0,x.Xb=0,Sv||(Sv=Jn)),x}function Zr(x,N,F){return x.a==0&&(x.a=N,x.sc=F,x.cb=0),0}function _l(x,N,F){return 3<=F&&x[N+0]==157&&x[N+1]==1&&x[N+2]==42}function _u(x,N){if(x==null)return 0;if(x.a=0,x.sc="OK",N==null)return Zr(x,2,"null VP8Io passed to VP8GetHeaders()");var F=N.data,U=N.w,Z=N.ha;if(4>Z)return Zr(x,7,"Truncated header.");var re=F[U+0]|F[U+1]<<8|F[U+2]<<16,ae=x.Od;if(ae.Rb=!(1&re),ae.td=re>>1&7,ae.yd=re>>4&1,ae.ub=re>>5,3<ae.td)return Zr(x,3,"Incorrect keyframe parameters.");if(!ae.yd)return Zr(x,4,"Frame not displayable.");U+=3,Z-=3;var ce=x.Kc;if(ae.Rb){if(7>Z)return Zr(x,7,"cannot parse picture header");if(!_l(F,U,Z))return Zr(x,3,"Bad code word");ce.c=16383&(F[U+4]<<8|F[U+3]),ce.Td=F[U+4]>>6,ce.i=16383&(F[U+6]<<8|F[U+5]),ce.Ud=F[U+6]>>6,U+=7,Z-=7,x.za=ce.c+15>>4,x.Ub=ce.i+15>>4,N.width=ce.c,N.height=ce.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,i((re=x.Pa).jb,0,255,re.jb.length),e((re=x.Qa)!=null),re.Cb=0,re.Bb=0,re.Fb=1,i(re.Zb,0,0,re.Zb.length),i(re.Lb,0,0,re.Lb)}if(ae.ub>Z)return Zr(x,7,"bad partition length");Y(re=x.m,F,U,ae.ub),U+=ae.ub,Z-=ae.ub,ae.Rb&&(ce.Ld=fe(re),ce.Kd=fe(re)),ce=x.Qa;var de,ve=x.Pa;if(e(re!=null),e(ce!=null),ce.Cb=fe(re),ce.Cb){if(ce.Bb=fe(re),fe(re)){for(ce.Fb=fe(re),de=0;4>de;++de)ce.Zb[de]=fe(re)?q(re,7):0;for(de=0;4>de;++de)ce.Lb[de]=fe(re)?q(re,6):0}if(ce.Bb)for(de=0;3>de;++de)ve.jb[de]=fe(re)?J(re,8):255}else ce.Bb=0;if(re.Ka)return Zr(x,3,"cannot parse segment header");if((ce=x.ed).zd=fe(re),ce.Tb=J(re,6),ce.wb=J(re,3),ce.Pc=fe(re),ce.Pc&&fe(re)){for(ve=0;4>ve;++ve)fe(re)&&(ce.vd[ve]=q(re,6));for(ve=0;4>ve;++ve)fe(re)&&(ce.od[ve]=q(re,6))}if(x.L=ce.Tb==0?0:ce.zd?1:2,re.Ka)return Zr(x,3,"cannot parse filter header");var De=Z;if(Z=de=U,U=de+De,ce=De,x.Xb=(1<<J(x.m,2))-1,De<3*(ve=x.Xb))F=7;else{for(de+=3*ve,ce-=3*ve,De=0;De<ve;++De){var Ge=F[Z+0]|F[Z+1]<<8|F[Z+2]<<16;Ge>ce&&(Ge=ce),Y(x.Jc[+De],F,de,Ge),de+=Ge,ce-=Ge,Z+=3}Y(x.Jc[+ve],F,de,ce),F=de<U?0:5}if(F!=0)return Zr(x,F,"cannot parse partitions");for(F=J(de=x.m,7),Z=fe(de)?q(de,4):0,U=fe(de)?q(de,4):0,ce=fe(de)?q(de,4):0,ve=fe(de)?q(de,4):0,de=fe(de)?q(de,4):0,De=x.Qa,Ge=0;4>Ge;++Ge){if(De.Cb){var ye=De.Zb[Ge];De.Fb||(ye+=F)}else{if(0<Ge){x.pb[Ge]=x.pb[0];continue}ye=F}var Fe=x.pb[Ge];Fe.Sc[0]=M_[Vn(ye+Z,127)],Fe.Sc[1]=R_[Vn(ye+0,127)],Fe.Eb[0]=2*M_[Vn(ye+U,127)],Fe.Eb[1]=101581*R_[Vn(ye+ce,127)]>>16,8>Fe.Eb[1]&&(Fe.Eb[1]=8),Fe.Qc[0]=M_[Vn(ye+ve,117)],Fe.Qc[1]=R_[Vn(ye+de,127)],Fe.lc=ye+de}if(!ae.Rb)return Zr(x,4,"Not a key frame.");for(fe(re),ae=x.Pa,F=0;4>F;++F){for(Z=0;8>Z;++Z)for(U=0;3>U;++U)for(ce=0;11>ce;++ce)ve=be(re,aee[F][Z][U][ce])?J(re,8):ree[F][Z][U][ce],ae.Wc[F][Z].Yb[U][ce]=ve;for(Z=0;17>Z;++Z)ae.Xc[F][Z]=ae.Wc[F][see[Z]]}return x.kc=fe(re),x.kc&&(x.Bd=J(re,8)),x.cb=1}function Jn(x,N,F,U,Z,re,ae){var ce=N[Z].Yb[F];for(F=0;16>Z;++Z){if(!be(x,ce[F+0]))return Z;for(;!be(x,ce[F+1]);)if(ce=N[++Z].Yb[0],F=0,Z==16)return 16;var de=N[Z+1].Yb;if(be(x,ce[F+2])){var ve=x,De=0;if(be(ve,(ye=ce)[(Ge=F)+3]))if(be(ve,ye[Ge+6])){for(ce=0,Ge=2*(De=be(ve,ye[Ge+8]))+(ye=be(ve,ye[Ge+9+De])),De=0,ye=tee[Ge];ye[ce];++ce)De+=De+be(ve,ye[ce]);De+=3+(8<<Ge)}else be(ve,ye[Ge+7])?(De=7+2*be(ve,165),De+=be(ve,145)):De=5+be(ve,159);else De=be(ve,ye[Ge+4])?3+be(ve,ye[Ge+5]):2;ce=de[2]}else De=1,ce=de[1];de=ae+nee[Z],0>(ve=x).b&&Ce(ve);var Ge,ye=ve.b,Fe=(Ge=ve.Ca>>1)-(ve.I>>ye)>>31;--ve.b,ve.Ca+=Fe,ve.Ca|=1,ve.I-=(Ge+1&Fe)<<ye,re[de]=((De^Fe)-Fe)*U[(0<Z)+0]}return 16}function xs(x){var N=x.rb[x.sb-1];N.la=0,N.Na=0,i(x.zc,0,0,x.zc.length),x.ja=0}function da(x,N,F,U,Z){Z=x[N+F+32*U]+(Z>>3),x[N+F+32*U]=-256&Z?0>Z?0:255:Z}function ws(x,N,F,U,Z,re){da(x,N,0,F,U+Z),da(x,N,1,F,U+re),da(x,N,2,F,U-re),da(x,N,3,F,U-Z)}function yr(x){return(20091*x>>16)+x}function _a(x,N,F,U){var Z,re=0,ae=a(16);for(Z=0;4>Z;++Z){var ce=x[N+0]+x[N+8],de=x[N+0]-x[N+8],ve=(35468*x[N+4]>>16)-yr(x[N+12]),De=yr(x[N+4])+(35468*x[N+12]>>16);ae[re+0]=ce+De,ae[re+1]=de+ve,ae[re+2]=de-ve,ae[re+3]=ce-De,re+=4,N++}for(Z=re=0;4>Z;++Z)ce=(x=ae[re+0]+4)+ae[re+8],de=x-ae[re+8],ve=(35468*ae[re+4]>>16)-yr(ae[re+12]),da(F,U,0,0,ce+(De=yr(ae[re+4])+(35468*ae[re+12]>>16))),da(F,U,1,0,de+ve),da(F,U,2,0,de-ve),da(F,U,3,0,ce-De),re++,U+=32}function Mo(x,N,F,U){var Z=x[N+0]+4,re=35468*x[N+4]>>16,ae=yr(x[N+4]),ce=35468*x[N+1]>>16;ws(F,U,0,Z+ae,x=yr(x[N+1]),ce),ws(F,U,1,Z+re,x,ce),ws(F,U,2,Z-re,x,ce),ws(F,U,3,Z-ae,x,ce)}function Jl(x,N,F,U,Z){_a(x,N,F,U),Z&&_a(x,N+16,F,U+4)}function ec(x,N,F,U){Te(x,N+0,F,U,1),Te(x,N+32,F,U+128,1)}function Yn(x,N,F,U){var Z;for(x=x[N+0]+4,Z=0;4>Z;++Z)for(N=0;4>N;++N)da(F,U,N,Z,x)}function Gs(x,N,F,U){x[N+0]&&Pe(x,N+0,F,U),x[N+16]&&Pe(x,N+16,F,U+4),x[N+32]&&Pe(x,N+32,F,U+128),x[N+48]&&Pe(x,N+48,F,U+128+4)}function Ro(x,N,F,U){var Z,re=a(16);for(Z=0;4>Z;++Z){var ae=x[N+0+Z]+x[N+12+Z],ce=x[N+4+Z]+x[N+8+Z],de=x[N+4+Z]-x[N+8+Z],ve=x[N+0+Z]-x[N+12+Z];re[0+Z]=ae+ce,re[8+Z]=ae-ce,re[4+Z]=ve+de,re[12+Z]=ve-de}for(Z=0;4>Z;++Z)ae=(x=re[0+4*Z]+3)+re[3+4*Z],ce=re[1+4*Z]+re[2+4*Z],de=re[1+4*Z]-re[2+4*Z],ve=x-re[3+4*Z],F[U+0]=ae+ce>>3,F[U+16]=ve+de>>3,F[U+32]=ae-ce>>3,F[U+48]=ve-de>>3,U+=64}function Ss(x,N,F){var U,Z=N-32,re=Ji,ae=255-x[Z-1];for(U=0;U<F;++U){var ce,de=re,ve=ae+x[N-1];for(ce=0;ce<F;++ce)x[N+ce]=de[ve+x[Z+ce]];N+=32}}function Gn(x,N){Ss(x,N,4)}function Au(x,N){Ss(x,N,8)}function Bf(x,N){Ss(x,N,16)}function Vf(x,N){var F;for(F=0;16>F;++F)r(x,N+32*F,x,N-32,16)}function Gi(x,N){var F;for(F=16;0<F;--F)i(x,N,x[N-1],16),N+=32}function _s(x,N,F){var U;for(U=0;16>U;++U)i(N,F+32*U,x,16)}function Aa(x,N){var F,U=16;for(F=0;16>F;++F)U+=x[N-1+32*F]+x[N+F-32];_s(U>>5,x,N)}function Yi(x,N){var F,U=8;for(F=0;16>F;++F)U+=x[N-1+32*F];_s(U>>4,x,N)}function Lo(x,N){var F,U=8;for(F=0;16>F;++F)U+=x[N+F-32];_s(U>>4,x,N)}function tc(x,N){_s(128,x,N)}function Jt(x,N,F){return x+2*N+F+2>>2}function Xi(x,N){var F,U=N-32;for(U=new Uint8Array([Jt(x[U-1],x[U+0],x[U+1]),Jt(x[U+0],x[U+1],x[U+2]),Jt(x[U+1],x[U+2],x[U+3]),Jt(x[U+2],x[U+3],x[U+4])]),F=0;4>F;++F)r(x,N+32*F,U,0,U.length)}function nc(x,N){var F=x[N-1],U=x[N-1+32],Z=x[N-1+64],re=x[N-1+96];we(x,N+0,16843009*Jt(x[N-1-32],F,U)),we(x,N+32,16843009*Jt(F,U,Z)),we(x,N+64,16843009*Jt(U,Z,re)),we(x,N+96,16843009*Jt(Z,re,re))}function rc(x,N){var F,U=4;for(F=0;4>F;++F)U+=x[N+F-32]+x[N-1+32*F];for(U>>=3,F=0;4>F;++F)i(x,N+32*F,U,4)}function Cu(x,N){var F=x[N-1+0],U=x[N-1+32],Z=x[N-1+64],re=x[N-1-32],ae=x[N+0-32],ce=x[N+1-32],de=x[N+2-32],ve=x[N+3-32];x[N+0+96]=Jt(U,Z,x[N-1+96]),x[N+1+96]=x[N+0+64]=Jt(F,U,Z),x[N+2+96]=x[N+1+64]=x[N+0+32]=Jt(re,F,U),x[N+3+96]=x[N+2+64]=x[N+1+32]=x[N+0+0]=Jt(ae,re,F),x[N+3+64]=x[N+2+32]=x[N+1+0]=Jt(ce,ae,re),x[N+3+32]=x[N+2+0]=Jt(de,ce,ae),x[N+3+0]=Jt(ve,de,ce)}function Kr(x,N){var F=x[N+1-32],U=x[N+2-32],Z=x[N+3-32],re=x[N+4-32],ae=x[N+5-32],ce=x[N+6-32],de=x[N+7-32];x[N+0+0]=Jt(x[N+0-32],F,U),x[N+1+0]=x[N+0+32]=Jt(F,U,Z),x[N+2+0]=x[N+1+32]=x[N+0+64]=Jt(U,Z,re),x[N+3+0]=x[N+2+32]=x[N+1+64]=x[N+0+96]=Jt(Z,re,ae),x[N+3+32]=x[N+2+64]=x[N+1+96]=Jt(re,ae,ce),x[N+3+64]=x[N+2+96]=Jt(ae,ce,de),x[N+3+96]=Jt(ce,de,de)}function Fo(x,N){var F=x[N-1+0],U=x[N-1+32],Z=x[N-1+64],re=x[N-1-32],ae=x[N+0-32],ce=x[N+1-32],de=x[N+2-32],ve=x[N+3-32];x[N+0+0]=x[N+1+64]=re+ae+1>>1,x[N+1+0]=x[N+2+64]=ae+ce+1>>1,x[N+2+0]=x[N+3+64]=ce+de+1>>1,x[N+3+0]=de+ve+1>>1,x[N+0+96]=Jt(Z,U,F),x[N+0+64]=Jt(U,F,re),x[N+0+32]=x[N+1+96]=Jt(F,re,ae),x[N+1+32]=x[N+2+96]=Jt(re,ae,ce),x[N+2+32]=x[N+3+96]=Jt(ae,ce,de),x[N+3+32]=Jt(ce,de,ve)}function As(x,N){var F=x[N+0-32],U=x[N+1-32],Z=x[N+2-32],re=x[N+3-32],ae=x[N+4-32],ce=x[N+5-32],de=x[N+6-32],ve=x[N+7-32];x[N+0+0]=F+U+1>>1,x[N+1+0]=x[N+0+64]=U+Z+1>>1,x[N+2+0]=x[N+1+64]=Z+re+1>>1,x[N+3+0]=x[N+2+64]=re+ae+1>>1,x[N+0+32]=Jt(F,U,Z),x[N+1+32]=x[N+0+96]=Jt(U,Z,re),x[N+2+32]=x[N+1+96]=Jt(Z,re,ae),x[N+3+32]=x[N+2+96]=Jt(re,ae,ce),x[N+3+64]=Jt(ae,ce,de),x[N+3+96]=Jt(ce,de,ve)}function Al(x,N){var F=x[N-1+0],U=x[N-1+32],Z=x[N-1+64],re=x[N-1+96];x[N+0+0]=F+U+1>>1,x[N+2+0]=x[N+0+32]=U+Z+1>>1,x[N+2+32]=x[N+0+64]=Z+re+1>>1,x[N+1+0]=Jt(F,U,Z),x[N+3+0]=x[N+1+32]=Jt(U,Z,re),x[N+3+32]=x[N+1+64]=Jt(Z,re,re),x[N+3+64]=x[N+2+64]=x[N+0+96]=x[N+1+96]=x[N+2+96]=x[N+3+96]=re}function uo(x,N){var F=x[N-1+0],U=x[N-1+32],Z=x[N-1+64],re=x[N-1+96],ae=x[N-1-32],ce=x[N+0-32],de=x[N+1-32],ve=x[N+2-32];x[N+0+0]=x[N+2+32]=F+ae+1>>1,x[N+0+32]=x[N+2+64]=U+F+1>>1,x[N+0+64]=x[N+2+96]=Z+U+1>>1,x[N+0+96]=re+Z+1>>1,x[N+3+0]=Jt(ce,de,ve),x[N+2+0]=Jt(ae,ce,de),x[N+1+0]=x[N+3+32]=Jt(F,ae,ce),x[N+1+32]=x[N+3+64]=Jt(U,F,ae),x[N+1+64]=x[N+3+96]=Jt(Z,U,F),x[N+1+96]=Jt(re,Z,U)}function Cl(x,N){var F;for(F=0;8>F;++F)r(x,N+32*F,x,N-32,8)}function Ca(x,N){var F;for(F=0;8>F;++F)i(x,N,x[N-1],8),N+=32}function Cs(x,N,F){var U;for(U=0;8>U;++U)i(N,F+32*U,x,8)}function jl(x,N){var F,U=8;for(F=0;8>F;++F)U+=x[N+F-32]+x[N-1+32*F];Cs(U>>4,x,N)}function ju(x,N){var F,U=4;for(F=0;8>F;++F)U+=x[N+F-32];Cs(U>>3,x,N)}function dr(x,N){var F,U=4;for(F=0;8>F;++F)U+=x[N-1+32*F];Cs(U>>3,x,N)}function Nu(x,N){Cs(128,x,N)}function ic(x,N,F){var U=x[N-F],Z=x[N+0],re=3*(Z-U)+Sd[1020+x[N-2*F]-x[N+F]],ae=ha[112+(re+4>>3)];x[N-F]=Ji[255+U+ha[112+(re+3>>3)]],x[N+0]=Ji[255+Z-ae]}function Ys(x,N,F,U){var Z=x[N+0],re=x[N+F];return Ns[255+x[N-2*F]-x[N-F]]>U||Ns[255+re-Z]>U}function zo(x,N,F,U){return 4*Ns[255+x[N-F]-x[N+0]]+Ns[255+x[N-2*F]-x[N+F]]<=U}function $o(x,N,F,U,Z){var re=x[N-3*F],ae=x[N-2*F],ce=x[N-F],de=x[N+0],ve=x[N+F],De=x[N+2*F],Ge=x[N+3*F];return 4*Ns[255+ce-de]+Ns[255+ae-ve]>U?0:Ns[255+x[N-4*F]-re]<=Z&&Ns[255+re-ae]<=Z&&Ns[255+ae-ce]<=Z&&Ns[255+Ge-De]<=Z&&Ns[255+De-ve]<=Z&&Ns[255+ve-de]<=Z}function Nl(x,N,F,U){var Z=2*U+1;for(U=0;16>U;++U)zo(x,N+U,F,Z)&&ic(x,N+U,F)}function El(x,N,F,U){var Z=2*U+1;for(U=0;16>U;++U)zo(x,N+U*F,1,Z)&&ic(x,N+U*F,1)}function js(x,N,F,U){var Z;for(Z=3;0<Z;--Z)Nl(x,N+=4*F,F,U)}function ac(x,N,F,U){var Z;for(Z=3;0<Z;--Z)El(x,N+=4,F,U)}function Xs(x,N,F,U,Z,re,ae,ce){for(re=2*re+1;0<Z--;){if($o(x,N,F,re,ae))if(Ys(x,N,F,ce))ic(x,N,F);else{var de=x,ve=N,De=F,Ge=de[ve-2*De],ye=de[ve-De],Fe=de[ve+0],Ue=de[ve+De],it=de[ve+2*De],qe=27*(dt=Sd[1020+3*(Fe-ye)+Sd[1020+Ge-Ue]])+63>>7,ct=18*dt+63>>7,dt=9*dt+63>>7;de[ve-3*De]=Ji[255+de[ve-3*De]+dt],de[ve-2*De]=Ji[255+Ge+ct],de[ve-De]=Ji[255+ye+qe],de[ve+0]=Ji[255+Fe-qe],de[ve+De]=Ji[255+Ue-ct],de[ve+2*De]=Ji[255+it-dt]}N+=U}}function Va(x,N,F,U,Z,re,ae,ce){for(re=2*re+1;0<Z--;){if($o(x,N,F,re,ae))if(Ys(x,N,F,ce))ic(x,N,F);else{var de=x,ve=N,De=F,Ge=de[ve-De],ye=de[ve+0],Fe=de[ve+De],Ue=ha[112+(4+(it=3*(ye-Ge))>>3)],it=ha[112+(it+3>>3)],qe=Ue+1>>1;de[ve-2*De]=Ji[255+de[ve-2*De]+qe],de[ve-De]=Ji[255+Ge+it],de[ve+0]=Ji[255+ye-Ue],de[ve+De]=Ji[255+Fe-qe]}N+=U}}function kl(x,N,F,U,Z,re){Xs(x,N,F,1,16,U,Z,re)}function Bo(x,N,F,U,Z,re){Xs(x,N,1,F,16,U,Z,re)}function ts(x,N,F,U,Z,re){var ae;for(ae=3;0<ae;--ae)Va(x,N+=4*F,F,1,16,U,Z,re)}function Hc(x,N,F,U,Z,re){var ae;for(ae=3;0<ae;--ae)Va(x,N+=4,1,F,16,U,Z,re)}function R(x,N,F,U,Z,re,ae,ce){Xs(x,N,Z,1,8,re,ae,ce),Xs(F,U,Z,1,8,re,ae,ce)}function X(x,N,F,U,Z,re,ae,ce){Xs(x,N,1,Z,8,re,ae,ce),Xs(F,U,1,Z,8,re,ae,ce)}function me(x,N,F,U,Z,re,ae,ce){Va(x,N+4*Z,Z,1,8,re,ae,ce),Va(F,U+4*Z,Z,1,8,re,ae,ce)}function Ne(x,N,F,U,Z,re,ae,ce){Va(x,N+4,1,Z,8,re,ae,ce),Va(F,U+4,1,Z,8,re,ae,ce)}function $e(){this.ba=new fn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Sn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function st(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Kt(){this.ua=0,this.Wa=new pt,this.vb=new pt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new L}function Zt(){this.xb=this.a=0,this.l=new Tn,this.ca=new fn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Kt,this.ab=0,this.gc=s(4,st),this.Oc=0}function yn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Tn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xn(x,N,F,U,Z,re,ae){for(x=x==null?0:x[N+0],N=0;N<ae;++N)Z[re+N]=x+F[U+N]&255,x=Z[re+N]}function er(x,N,F,U,Z,re,ae){var ce;if(x==null)xn(null,null,F,U,Z,re,ae);else for(ce=0;ce<ae;++ce)Z[re+ce]=x[N+ce]+F[U+ce]&255}function fr(x,N,F,U,Z,re,ae){if(x==null)xn(null,null,F,U,Z,re,ae);else{var ce,de=x[N+0],ve=de,De=de;for(ce=0;ce<ae;++ce)ve=De+(de=x[N+ce])-ve,De=F[U+ce]+(-256&ve?0>ve?0:255:ve)&255,ve=de,Z[re+ce]=De}}function Wr(x,N,F,U){var Z=N.width,re=N.o;if(e(x!=null&&N!=null),0>F||0>=U||F+U>re)return null;if(!x.Cc){if(x.ga==null){var ae;if(x.ga=new yn,(ae=x.ga==null)||(ae=N.width*N.o,e(x.Gb.length==0),x.Gb=a(ae),x.Uc=0,x.Gb==null?ae=0:(x.mb=x.Gb,x.nb=x.Uc,x.rc=null,ae=1),ae=!ae),!ae){ae=x.ga;var ce=x.Fa,de=x.P,ve=x.qc,De=x.mb,Ge=x.nb,ye=de+1,Fe=ve-1,Ue=ae.l;if(e(ce!=null&&De!=null&&N!=null),Ad[0]=null,Ad[1]=xn,Ad[2]=er,Ad[3]=fr,ae.ca=De,ae.tb=Ge,ae.c=N.width,ae.i=N.height,e(0<ae.c&&0<ae.i),1>=ve)N=0;else if(ae.$a=3&ce[de+0],ae.Z=ce[de+0]>>2&3,ae.Lc=ce[de+0]>>4&3,de=ce[de+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||de)N=0;else if(Ue.put=Ie,Ue.ac=Re,Ue.bc=Ke,Ue.ma=ae,Ue.width=N.width,Ue.height=N.height,Ue.Da=N.Da,Ue.v=N.v,Ue.va=N.va,Ue.j=N.j,Ue.o=N.o,ae.$a)e:{e(ae.$a==1),N=Rr();t:for(;;){if(N==null){N=0;break e}if(e(ae!=null),ae.mc=N,N.c=ae.c,N.i=ae.i,N.l=ae.l,N.l.ma=ae,N.l.width=ae.c,N.l.height=ae.i,N.a=0,ee(N.m,ce,ye,Fe),!bs(ae.c,ae.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&_n(N.s)?(ae.ic=1,ce=N.c*N.i,N.Ta=null,N.Ua=0,N.V=a(ce),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(ae.ic=0,N=Sa(N,ae.c)),!N))break t;N=1;break e}ae.mc=null,N=0}else N=Fe>=ae.c*ae.i;ae=!N}if(ae)return null;x.ga.Lc!=1?x.Ga=0:U=re-F}e(x.ga!=null),e(F+U<=re);e:{if(N=(ce=x.ga).c,re=ce.l.o,ce.$a==0){if(ye=x.rc,Fe=x.Vc,Ue=x.Fa,de=x.P+1+F*N,ve=x.mb,De=x.nb+F*N,e(de<=x.P+x.qc),ce.Z!=0)for(e(Ad[ce.Z]!=null),ae=0;ae<U;++ae)Ad[ce.Z](ye,Fe,Ue,de,ve,De,N),ye=ve,Fe=De,De+=N,de+=N;else for(ae=0;ae<U;++ae)r(ve,De,Ue,de,N),ye=ve,Fe=De,De+=N,de+=N;x.rc=ye,x.Vc=Fe}else{if(e(ce.mc!=null),N=F+U,e((ae=ce.mc)!=null),e(N<=ae.i),ae.C>=N)N=1;else if(ce.ic||kr(),ce.ic){ce=ae.V,ye=ae.Ba,Fe=ae.c;var it=ae.i,qe=(Ue=1,de=ae.$/Fe,ve=ae.$%Fe,De=ae.m,Ge=ae.s,ae.$),ct=Fe*it,dt=Fe*N,Nt=Ge.wc,St=qe<dt?$t(Ge,ve,de):null;e(qe<=ct),e(N<=it),e(_n(Ge));t:for(;;){for(;!De.h&&qe<dt;){if(ve&Nt||(St=$t(Ge,ve,de)),e(St!=null),_e(De),256>(it=vn(St.G[0],St.H[0],De)))ce[ye+qe]=it,++qe,++ve>=Fe&&(ve=0,++de<=N&&!(de%16)&&vr(ae,de));else{if(!(280>it)){Ue=0;break t}it=lt(it-256,De);var hn,rn=vn(St.G[4],St.H[4],De);if(_e(De),!(qe>=(rn=Gt(Fe,rn=lt(rn,De)))&&ct-qe>=it)){Ue=0;break t}for(hn=0;hn<it;++hn)ce[ye+qe+hn]=ce[ye+qe+hn-rn];for(qe+=it,ve+=it;ve>=Fe;)ve-=Fe,++de<=N&&!(de%16)&&vr(ae,de);qe<dt&&ve&Nt&&(St=$t(Ge,ve,de))}e(De.h==oe(De))}vr(ae,de>N?N:de);break t}!Ue||De.h&&qe<ct?(Ue=0,ae.a=De.h?5:3):ae.$=qe,N=Ue}else N=Qn(ae,ae.V,ae.Ba,ae.c,ae.i,N,Do);if(!N){U=0;break e}}F+U>=re&&(x.Cc=1),U=1}if(!U)return null;if(x.Cc&&((U=x.ga)!=null&&(U.mc=null),x.ga=null,0<x.Ga))return alert("todo:WebPDequantizeLevels"),null}return x.nb+F*Z}function br(x,N,F,U,Z,re){for(;0<Z--;){var ae,ce=x,de=N+(F?1:0),ve=x,De=N+(F?0:3);for(ae=0;ae<U;++ae){var Ge=ve[De+4*ae];Ge!=255&&(Ge*=32897,ce[de+4*ae+0]=ce[de+4*ae+0]*Ge>>23,ce[de+4*ae+1]=ce[de+4*ae+1]*Ge>>23,ce[de+4*ae+2]=ce[de+4*ae+2]*Ge>>23)}N+=re}}function Dr(x,N,F,U,Z){for(;0<U--;){var re;for(re=0;re<F;++re){var ae=x[N+2*re+0],ce=15&(ve=x[N+2*re+1]),de=4369*ce,ve=(240&ve|ve>>4)*de>>16;x[N+2*re+0]=(240&ae|ae>>4)*de>>16&240|(15&ae|ae<<4)*de>>16>>4&15,x[N+2*re+1]=240&ve|ce}N+=Z}}function Gr(x,N,F,U,Z,re,ae,ce){var de,ve,De=255;for(ve=0;ve<Z;++ve){for(de=0;de<U;++de){var Ge=x[N+de];re[ae+4*de]=Ge,De&=Ge}N+=F,ae+=ce}return De!=255}function Jr(x,N,F,U,Z){var re;for(re=0;re<Z;++re)F[U+re]=x[N+re]>>8}function kr(){Lt=br,Ut=Dr,On=Gr,nr=Jr}function Qi(x,N,F){k[x]=function(U,Z,re,ae,ce,de,ve,De,Ge,ye,Fe,Ue,it,qe,ct,dt,Nt){var St,hn=Nt-1>>1,rn=ce[de+0]|ve[De+0]<<16,Un=Ge[ye+0]|Fe[Ue+0]<<16;e(U!=null);var un=3*rn+Un+131074>>2;for(N(U[Z+0],255&un,un>>16,it,qe),re!=null&&(un=3*Un+rn+131074>>2,N(re[ae+0],255&un,un>>16,ct,dt)),St=1;St<=hn;++St){var lr=ce[de+St]|ve[De+St]<<16,Pa=Ge[ye+St]|Fe[Ue+St]<<16,Hn=rn+lr+Un+Pa+524296,dn=Hn+2*(lr+Un)>>3;un=dn+rn>>1,rn=(Hn=Hn+2*(rn+Pa)>>3)+lr>>1,N(U[Z+2*St-1],255&un,un>>16,it,qe+(2*St-1)*F),N(U[Z+2*St-0],255&rn,rn>>16,it,qe+(2*St-0)*F),re!=null&&(un=Hn+Un>>1,rn=dn+Pa>>1,N(re[ae+2*St-1],255&un,un>>16,ct,dt+(2*St-1)*F),N(re[ae+2*St+0],255&rn,rn>>16,ct,dt+(2*St+0)*F)),rn=lr,Un=Pa}1&Nt||(un=3*rn+Un+131074>>2,N(U[Z+Nt-1],255&un,un>>16,it,qe+(Nt-1)*F),re!=null&&(un=3*Un+rn+131074>>2,N(re[ae+Nt-1],255&un,un>>16,ct,dt+(Nt-1)*F)))}}function Wc(){Tl[nx]=lee,Tl[rx]=oI,Tl[nI]=cee,Tl[ix]=lI,Tl[ax]=cI,Tl[T_]=uI,Tl[rI]=uee,Tl[D_]=oI,Tl[I_]=lI,Tl[sx]=cI,Tl[O_]=uI}function Qs(x){return x&-16384?0>x?0:255:x>>dee}function w(x,N){return Qs((19077*x>>8)+(26149*N>>8)-14234)}function B(x,N,F){return Qs((19077*x>>8)-(6419*N>>8)-(13320*F>>8)+8708)}function W(x,N){return Qs((19077*x>>8)+(33050*N>>8)-17685)}function ue(x,N,F,U,Z){U[Z+0]=w(x,F),U[Z+1]=B(x,N,F),U[Z+2]=W(x,N)}function Be(x,N,F,U,Z){U[Z+0]=W(x,N),U[Z+1]=B(x,N,F),U[Z+2]=w(x,F)}function Ye(x,N,F,U,Z){var re=B(x,N,F);N=re<<3&224|W(x,N)>>3,U[Z+0]=248&w(x,F)|re>>5,U[Z+1]=N}function Tt(x,N,F,U,Z){var re=240&W(x,N)|15;U[Z+0]=240&w(x,F)|B(x,N,F)>>4,U[Z+1]=re}function tr(x,N,F,U,Z){U[Z+0]=255,ue(x,N,F,U,Z+1)}function ei(x,N,F,U,Z){Be(x,N,F,U,Z),U[Z+3]=255}function Bn(x,N,F,U,Z){ue(x,N,F,U,Z),U[Z+3]=255}function Vn(x,N){return 0>x?0:x>N?N:x}function Lr(x,N,F){k[x]=function(U,Z,re,ae,ce,de,ve,De,Ge){for(var ye=De+(-2&Ge)*F;De!=ye;)N(U[Z+0],re[ae+0],ce[de+0],ve,De),N(U[Z+1],re[ae+0],ce[de+0],ve,De+F),Z+=2,++ae,++de,De+=2*F;1&Ge&&N(U[Z+0],re[ae+0],ce[de+0],ve,De)}}function ns(x,N,F){return F==0?x==0?N==0?6:5:N==0?4:0:F}function ja(x,N,F,U,Z){switch(x>>>30){case 3:Te(N,F,U,Z,0);break;case 2:Le(N,F,U,Z);break;case 1:Pe(N,F,U,Z)}}function fa(x,N){var F,U,Z=N.M,re=N.Nb,ae=x.oc,ce=x.pc+40,de=x.oc,ve=x.pc+584,De=x.oc,Ge=x.pc+600;for(F=0;16>F;++F)ae[ce+32*F-1]=129;for(F=0;8>F;++F)de[ve+32*F-1]=129,De[Ge+32*F-1]=129;for(0<Z?ae[ce-1-32]=de[ve-1-32]=De[Ge-1-32]=129:(i(ae,ce-32-1,127,21),i(de,ve-32-1,127,9),i(De,Ge-32-1,127,9)),U=0;U<x.za;++U){var ye=N.ya[N.aa+U];if(0<U){for(F=-1;16>F;++F)r(ae,ce+32*F-4,ae,ce+32*F+12,4);for(F=-1;8>F;++F)r(de,ve+32*F-4,de,ve+32*F+4,4),r(De,Ge+32*F-4,De,Ge+32*F+4,4)}var Fe=x.Gd,Ue=x.Hd+U,it=ye.ad,qe=ye.Hc;if(0<Z&&(r(ae,ce-32,Fe[Ue].y,0,16),r(de,ve-32,Fe[Ue].f,0,8),r(De,Ge-32,Fe[Ue].ea,0,8)),ye.Za){var ct=ae,dt=ce-32+16;for(0<Z&&(U>=x.za-1?i(ct,dt,Fe[Ue].y[15],4):r(ct,dt,Fe[Ue+1].y,0,4)),F=0;4>F;F++)ct[dt+128+F]=ct[dt+256+F]=ct[dt+384+F]=ct[dt+0+F];for(F=0;16>F;++F,qe<<=2)ct=ae,dt=ce+fI[F],lc[ye.Ob[F]](ct,dt),ja(qe,it,16*+F,ct,dt)}else if(ct=ns(U,Z,ye.Ob[0]),_d[ct](ae,ce),qe!=0)for(F=0;16>F;++F,qe<<=2)ja(qe,it,16*+F,ae,ce+fI[F]);for(F=ye.Gc,ct=ns(U,Z,ye.Dd),Eu[ct](de,ve),Eu[ct](De,Ge),qe=it,ct=de,dt=ve,255&(ye=0|F)&&(170&ye?Ae(qe,256,ct,dt):je(qe,256,ct,dt)),ye=De,qe=Ge,255&(F>>=8)&&(170&F?Ae(it,320,ye,qe):je(it,320,ye,qe)),Z<x.Ub-1&&(r(Fe[Ue].y,0,ae,ce+480,16),r(Fe[Ue].f,0,de,ve+224,8),r(Fe[Ue].ea,0,De,Ge+224,8)),F=8*re*x.B,Fe=x.sa,Ue=x.ta+16*U+16*re*x.R,it=x.qa,ye=x.ra+8*U+F,qe=x.Ha,ct=x.Ia+8*U+F,F=0;16>F;++F)r(Fe,Ue+F*x.R,ae,ce+32*F,16);for(F=0;8>F;++F)r(it,ye+F*x.B,de,ve+32*F,8),r(qe,ct+F*x.B,De,Ge+32*F,8)}}function Vo(x,N,F,U,Z,re,ae,ce,de){var ve=[0],De=[0],Ge=0,ye=de!=null?de.kd:0,Fe=de??new rt;if(x==null||12>F)return 7;Fe.data=x,Fe.w=N,Fe.ha=F,N=[N],F=[F],Fe.gb=[Fe.gb];e:{var Ue=N,it=F,qe=Fe.gb;if(e(x!=null),e(it!=null),e(qe!=null),qe[0]=0,12<=it[0]&&!n(x,Ue[0],"RIFF")){if(n(x,Ue[0]+8,"WEBP")){qe=3;break e}var ct=Me(x,Ue[0]+4);if(12>ct||4294967286<ct){qe=3;break e}if(ye&&ct>it[0]-8){qe=7;break e}qe[0]=ct,Ue[0]+=12,it[0]-=12}qe=0}if(qe!=0)return qe;for(ct=0<Fe.gb[0],F=F[0];;){e:{var dt=x;it=N,qe=F;var Nt=ve,St=De,hn=Ue=[0];if((un=Ge=[Ge])[0]=0,8>qe[0])qe=7;else{if(!n(dt,it[0],"VP8X")){if(Me(dt,it[0]+4)!=10){qe=3;break e}if(18>qe[0]){qe=7;break e}var rn=Me(dt,it[0]+8),Un=1+He(dt,it[0]+12);if(2147483648<=Un*(dt=1+He(dt,it[0]+15))){qe=3;break e}hn!=null&&(hn[0]=rn),Nt!=null&&(Nt[0]=Un),St!=null&&(St[0]=dt),it[0]+=18,qe[0]-=18,un[0]=1}qe=0}}if(Ge=Ge[0],Ue=Ue[0],qe!=0)return qe;if(it=!!(2&Ue),!ct&&Ge)return 3;if(re!=null&&(re[0]=!!(16&Ue)),ae!=null&&(ae[0]=it),ce!=null&&(ce[0]=0),ae=ve[0],Ue=De[0],Ge&&it&&de==null){qe=0;break}if(4>F){qe=7;break}if(ct&&Ge||!ct&&!Ge&&!n(x,N[0],"ALPH")){F=[F],Fe.na=[Fe.na],Fe.P=[Fe.P],Fe.Sa=[Fe.Sa];e:{rn=x,qe=N,ct=F;var un=Fe.gb;Nt=Fe.na,St=Fe.P,hn=Fe.Sa,Un=22,e(rn!=null),e(ct!=null),dt=qe[0];var lr=ct[0];for(e(Nt!=null),e(hn!=null),Nt[0]=null,St[0]=null,hn[0]=0;;){if(qe[0]=dt,ct[0]=lr,8>lr){qe=7;break e}var Pa=Me(rn,dt+4);if(4294967286<Pa){qe=3;break e}var Hn=8+Pa+1&-2;if(Un+=Hn,0<un&&Un>un){qe=3;break e}if(!n(rn,dt,"VP8 ")||!n(rn,dt,"VP8L")){qe=0;break e}if(lr[0]<Hn){qe=7;break e}n(rn,dt,"ALPH")||(Nt[0]=rn,St[0]=dt+8,hn[0]=Pa),dt+=Hn,lr-=Hn}}if(F=F[0],Fe.na=Fe.na[0],Fe.P=Fe.P[0],Fe.Sa=Fe.Sa[0],qe!=0)break}F=[F],Fe.Ja=[Fe.Ja],Fe.xa=[Fe.xa];e:if(un=x,qe=N,ct=F,Nt=Fe.gb[0],St=Fe.Ja,hn=Fe.xa,rn=qe[0],dt=!n(un,rn,"VP8 "),Un=!n(un,rn,"VP8L"),e(un!=null),e(ct!=null),e(St!=null),e(hn!=null),8>ct[0])qe=7;else{if(dt||Un){if(un=Me(un,rn+4),12<=Nt&&un>Nt-12){qe=3;break e}if(ye&&un>ct[0]-8){qe=7;break e}St[0]=un,qe[0]+=8,ct[0]-=8,hn[0]=Un}else hn[0]=5<=ct[0]&&un[rn+0]==47&&!(un[rn+4]>>5),St[0]=ct[0];qe=0}if(F=F[0],Fe.Ja=Fe.Ja[0],Fe.xa=Fe.xa[0],N=N[0],qe!=0)break;if(4294967286<Fe.Ja)return 3;if(ce==null||it||(ce[0]=Fe.xa?2:1),ae=[ae],Ue=[Ue],Fe.xa){if(5>F){qe=7;break}ce=ae,ye=Ue,it=re,x==null||5>F?x=0:5<=F&&x[N+0]==47&&!(x[N+4]>>5)?(ct=[0],un=[0],Nt=[0],ee(St=new G,x,N,F),At(St,ct,un,Nt)?(ce!=null&&(ce[0]=ct[0]),ye!=null&&(ye[0]=un[0]),it!=null&&(it[0]=Nt[0]),x=1):x=0):x=0}else{if(10>F){qe=7;break}ce=Ue,x==null||10>F||!_l(x,N+3,F-3)?x=0:(ye=x[N+0]|x[N+1]<<8|x[N+2]<<16,it=16383&(x[N+7]<<8|x[N+6]),x=16383&(x[N+9]<<8|x[N+8]),1&ye||3<(ye>>1&7)||!(ye>>4&1)||ye>>5>=Fe.Ja||!it||!x?x=0:(ae&&(ae[0]=it),ce&&(ce[0]=x),x=1))}if(!x||(ae=ae[0],Ue=Ue[0],Ge&&(ve[0]!=ae||De[0]!=Ue)))return 3;de!=null&&(de[0]=Fe,de.offset=N-de.w,e(4294967286>N-de.w),e(de.offset==de.ha-F));break}return qe==0||qe==7&&Ge&&de==null?(re!=null&&(re[0]|=Fe.na!=null&&0<Fe.na.length),U!=null&&(U[0]=ae),Z!=null&&(Z[0]=Ue),0):qe}function Uf(x,N,F){var U=N.width,Z=N.height,re=0,ae=0,ce=U,de=Z;if(N.Da=x!=null&&0<x.Da,N.Da&&(ce=x.cd,de=x.bd,re=x.v,ae=x.j,11>F||(re&=-2,ae&=-2),0>re||0>ae||0>=ce||0>=de||re+ce>U||ae+de>Z))return 0;if(N.v=re,N.j=ae,N.va=re+ce,N.o=ae+de,N.U=ce,N.T=de,N.da=x!=null&&0<x.da,N.da){if(!gt(ce,de,F=[x.ib],re=[x.hb]))return 0;N.ib=F[0],N.hb=re[0]}return N.ob=x!=null&&x.ob,N.Kb=x==null||!x.Sd,N.da&&(N.ob=N.ib<3*U/4&&N.hb<3*Z/4,N.Kb=0),1}function Hf(x){if(x==null)return 2;if(11>x.S){var N=x.f.RGBA;N.fb+=(x.height-1)*N.A,N.A=-N.A}else N=x.f.kb,x=x.height,N.O+=(x-1)*N.fa,N.fa=-N.fa,N.N+=(x-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(x-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(x-1)*N.lb,N.lb=-N.lb);return 0}function Uo(x,N,F,U){if(U==null||0>=x||0>=N)return 2;if(F!=null){if(F.Da){var Z=F.cd,re=F.bd,ae=-2&F.v,ce=-2&F.j;if(0>ae||0>ce||0>=Z||0>=re||ae+Z>x||ce+re>N)return 2;x=Z,N=re}if(F.da){if(!gt(x,N,Z=[F.ib],re=[F.hb]))return 2;x=Z[0],N=re[0]}}U.width=x,U.height=N;e:{var de=U.width,ve=U.height;if(x=U.S,0>=de||0>=ve||!(x>=nx&&13>x))x=2;else{if(0>=U.Rd&&U.sd==null){ae=re=Z=N=0;var De=(ce=de*hI[x])*ve;if(11>x||(re=(ve+1)/2*(N=(de+1)/2),x==12&&(ae=(Z=de)*ve)),(ve=a(De+2*re+ae))==null){x=1;break e}U.sd=ve,11>x?((de=U.f.RGBA).eb=ve,de.fb=0,de.A=ce,de.size=De):((de=U.f.kb).y=ve,de.O=0,de.fa=ce,de.Fd=De,de.f=ve,de.N=0+De,de.Ab=N,de.Cd=re,de.ea=ve,de.W=0+De+re,de.Db=N,de.Ed=re,x==12&&(de.F=ve,de.J=0+De+2*re),de.Tc=ae,de.lb=Z)}if(N=1,Z=U.S,re=U.width,ae=U.height,Z>=nx&&13>Z)if(11>Z)x=U.f.RGBA,N&=(ce=Math.abs(x.A))*(ae-1)+re<=x.size,N&=ce>=re*hI[Z],N&=x.eb!=null;else{x=U.f.kb,ce=(re+1)/2,De=(ae+1)/2,de=Math.abs(x.fa),ve=Math.abs(x.Ab);var Ge=Math.abs(x.Db),ye=Math.abs(x.lb),Fe=ye*(ae-1)+re;N&=de*(ae-1)+re<=x.Fd,N&=ve*(De-1)+ce<=x.Cd,N=(N&=Ge*(De-1)+ce<=x.Ed)&de>=re&ve>=ce&Ge>=ce,N&=x.y!=null,N&=x.f!=null,N&=x.ea!=null,Z==12&&(N&=ye>=re,N&=Fe<=x.Tc,N&=x.F!=null)}else N=0;x=N?0:2}}return x!=0||F!=null&&F.fd&&(x=Hf(U)),x}var rs=64,or=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ua=24,Zi=32,sc=8,Pl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ft("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(x){return x},k.Predictor2=function(x,N,F){return N[F+0]},k.Predictor3=function(x,N,F){return N[F+1]},k.Predictor4=function(x,N,F){return N[F-1]},k.Predictor5=function(x,N,F){return Dt(Dt(x,N[F+1]),N[F+0])},k.Predictor6=function(x,N,F){return Dt(x,N[F-1])},k.Predictor7=function(x,N,F){return Dt(x,N[F+0])},k.Predictor8=function(x,N,F){return Dt(N[F-1],N[F+0])},k.Predictor9=function(x,N,F){return Dt(N[F+0],N[F+1])},k.Predictor10=function(x,N,F){return Dt(Dt(x,N[F-1]),Dt(N[F+0],N[F+1]))},k.Predictor11=function(x,N,F){var U=N[F+0];return 0>=Ft(U>>24&255,x>>24&255,(N=N[F-1])>>24&255)+Ft(U>>16&255,x>>16&255,N>>16&255)+Ft(U>>8&255,x>>8&255,N>>8&255)+Ft(255&U,255&x,255&N)?U:x},k.Predictor12=function(x,N,F){var U=N[F+0];return(Yt((x>>24&255)+(U>>24&255)-((N=N[F-1])>>24&255))<<24|Yt((x>>16&255)+(U>>16&255)-(N>>16&255))<<16|Yt((x>>8&255)+(U>>8&255)-(N>>8&255))<<8|Yt((255&x)+(255&U)-(255&N)))>>>0},k.Predictor13=function(x,N,F){var U=N[F-1];return(Qt((x=Dt(x,N[F+0]))>>24&255,U>>24&255)<<24|Qt(x>>16&255,U>>16&255)<<16|Qt(x>>8&255,U>>8&255)<<8|Qt(255&x,255&U))>>>0};var wd=k.PredictorAdd0;k.PredictorAdd1=sn,ft("Predictor2","PredictorAdd2"),ft("Predictor3","PredictorAdd3"),ft("Predictor4","PredictorAdd4"),ft("Predictor5","PredictorAdd5"),ft("Predictor6","PredictorAdd6"),ft("Predictor7","PredictorAdd7"),ft("Predictor8","PredictorAdd8"),ft("Predictor9","PredictorAdd9"),ft("Predictor10","PredictorAdd10"),ft("Predictor11","PredictorAdd11"),ft("Predictor12","PredictorAdd12"),ft("Predictor13","PredictorAdd13");var fo=k.PredictorAdd2;tt("ColorIndexInverseTransform","MapARGB","32b",function(x){return x>>8&255},function(x){return x}),tt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(x){return x},function(x){return x>>8&255});var li,oc=k.ColorIndexInverseTransform,Na=k.MapARGB,Ho=k.VP8LColorIndexInverseTransformAlpha,_=k.MapAlpha,P=k.VP8LPredictorsAdd=[];P.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var z,H,K,ne,pe,Se,Ee,Te,Le,Ae,Pe,je,ke,Oe,ze,Ve,Qe,et,nt,Ct,Rt,Et,It,Vt,Lt,Ut,On,nr,kn=a(511),ci=a(2041),Nn=a(225),Ea=a(767),ka=0,Sd=ci,ha=Nn,Ji=Ea,Ns=kn,nx=0,rx=1,nI=2,ix=3,ax=4,T_=5,rI=6,D_=7,I_=8,sx=9,O_=10,GJ=[2,3,7],YJ=[3,3,11],iI=[280,256,256,256,40],XJ=[0,1,1,1,0],QJ=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ZJ=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],JJ=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],eee=8,M_=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],R_=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Sv=null,tee=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],nee=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],aI=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ree=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],iee=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],aee=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],see=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_d=[],lc=[],Eu=[],oee=1,sI=2,Ad=[],Tl=[];Qi("UpsampleRgbLinePair",ue,3),Qi("UpsampleBgrLinePair",Be,3),Qi("UpsampleRgbaLinePair",Bn,4),Qi("UpsampleBgraLinePair",ei,4),Qi("UpsampleArgbLinePair",tr,4),Qi("UpsampleRgba4444LinePair",Tt,2),Qi("UpsampleRgb565LinePair",Ye,2);var lee=k.UpsampleRgbLinePair,cee=k.UpsampleBgrLinePair,oI=k.UpsampleRgbaLinePair,lI=k.UpsampleBgraLinePair,cI=k.UpsampleArgbLinePair,uI=k.UpsampleRgba4444LinePair,uee=k.UpsampleRgb565LinePair,ox=16,lx=1<<ox-1,_v=-227,L_=482,dee=6,dI=0,fee=a(256),hee=a(256),pee=a(256),mee=a(256),gee=a(L_-_v),vee=a(L_-_v);Lr("YuvToRgbRow",ue,3),Lr("YuvToBgrRow",Be,3),Lr("YuvToRgbaRow",Bn,4),Lr("YuvToBgraRow",ei,4),Lr("YuvToArgbRow",tr,4),Lr("YuvToRgba4444Row",Tt,2),Lr("YuvToRgb565Row",Ye,2);var fI=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],cx=[0,2,8],yee=[8,7,6,4,4,2,2,2,1,1,1,1],bee=1;this.WebPDecodeRGBA=function(x,N,F,U,Z){var re=rx,ae=new $e,ce=new fn;ae.ba=ce,ce.S=re,ce.width=[ce.width],ce.height=[ce.height];var de=ce.width,ve=ce.height,De=new qt;if(De==null||x==null)var Ge=2;else e(De!=null),Ge=Vo(x,N,F,De.width,De.height,De.Pd,De.Qd,De.format,null);if(Ge!=0?de=0:(de!=null&&(de[0]=De.width[0]),ve!=null&&(ve[0]=De.height[0]),de=1),de){ce.width=ce.width[0],ce.height=ce.height[0],U!=null&&(U[0]=ce.width),Z!=null&&(Z[0]=ce.height);e:{if(U=new Tn,(Z=new rt).data=x,Z.w=N,Z.ha=F,Z.kd=1,N=[0],e(Z!=null),((x=Vo(Z.data,Z.w,Z.ha,null,null,null,N,null,Z))==0||x==7)&&N[0]&&(x=4),(N=x)==0){if(e(ae!=null),U.data=Z.data,U.w=Z.w+Z.offset,U.ha=Z.ha-Z.offset,U.put=Ie,U.ac=Re,U.bc=Ke,U.ma=ae,Z.xa){if((x=Rr())==null){ae=1;break e}if(function(ye,Fe){var Ue=[0],it=[0],qe=[0];t:for(;;){if(ye==null)return 0;if(Fe==null)return ye.a=2,0;if(ye.l=Fe,ye.a=0,ee(ye.m,Fe.data,Fe.w,Fe.ha),!At(ye.m,Ue,it,qe)){ye.a=3;break t}if(ye.xb=sI,Fe.width=Ue[0],Fe.height=it[0],!bs(Ue[0],it[0],1,ye,null))break t;return 1}return e(ye.a!=0),0}(x,U)){if(U=(N=Uo(U.width,U.height,ae.Oa,ae.ba))==0){t:{U=x;n:for(;;){if(U==null){U=0;break t}if(e(U.s.yc!=null),e(U.s.Ya!=null),e(0<U.s.Wb),e((F=U.l)!=null),e((Z=F.ma)!=null),U.xb!=0){if(U.ca=Z.ba,U.tb=Z.tb,e(U.ca!=null),!Uf(Z.Oa,F,ix)){U.a=2;break n}if(!Sa(U,F.width)||F.da)break n;if((F.da||on(U.ca.S))&&kr(),11>U.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),U.ca.f.kb.F!=null&&kr()),U.Pb&&0<U.s.ua&&U.s.vb.X==null&&!he(U.s.vb,U.s.Wa.Xa)){U.a=1;break n}U.xb=0}if(!Qn(U,U.V,U.Ba,U.c,U.i,F.o,bi))break n;Z.Dc=U.Ma,U=1;break t}e(U.a!=0),U=0}U=!U}U&&(N=x.a)}else N=x.a}else{if((x=new Uc)==null){ae=1;break e}if(x.Fa=Z.na,x.P=Z.P,x.qc=Z.Sa,_u(x,U)){if((N=Uo(U.width,U.height,ae.Oa,ae.ba))==0){if(x.Aa=0,F=ae.Oa,e((Z=x)!=null),F!=null){if(0<(de=0>(de=F.Md)?0:100<de?255:255*de/100)){for(ve=De=0;4>ve;++ve)12>(Ge=Z.pb[ve]).lc&&(Ge.ia=de*yee[0>Ge.lc?0:Ge.lc]>>3),De|=Ge.ia;De&&(alert("todo:VP8InitRandom"),Z.ia=1)}Z.Ga=F.Id,100<Z.Ga?Z.Ga=100:0>Z.Ga&&(Z.Ga=0)}(function(ye,Fe){if(ye==null)return 0;if(Fe==null)return Zr(ye,2,"NULL VP8Io parameter in VP8Decode().");if(!ye.cb&&!_u(ye,Fe))return 0;if(e(ye.cb),Fe.ac==null||Fe.ac(Fe)){Fe.ob&&(ye.L=0);var Ue=cx[ye.L];if(ye.L==2?(ye.yb=0,ye.zb=0):(ye.yb=Fe.v-Ue>>4,ye.zb=Fe.j-Ue>>4,0>ye.yb&&(ye.yb=0),0>ye.zb&&(ye.zb=0)),ye.Va=Fe.o+15+Ue>>4,ye.Hb=Fe.va+15+Ue>>4,ye.Hb>ye.za&&(ye.Hb=ye.za),ye.Va>ye.Ub&&(ye.Va=ye.Ub),0<ye.L){var it=ye.ed;for(Ue=0;4>Ue;++Ue){var qe;if(ye.Qa.Cb){var ct=ye.Qa.Lb[Ue];ye.Qa.Fb||(ct+=it.Tb)}else ct=it.Tb;for(qe=0;1>=qe;++qe){var dt=ye.gd[Ue][qe],Nt=ct;if(it.Pc&&(Nt+=it.vd[0],qe&&(Nt+=it.od[0])),0<(Nt=0>Nt?0:63<Nt?63:Nt)){var St=Nt;0<it.wb&&(St=4<it.wb?St>>2:St>>1)>9-it.wb&&(St=9-it.wb),1>St&&(St=1),dt.dd=St,dt.tc=2*Nt+St,dt.ld=40<=Nt?2:15<=Nt?1:0}else dt.tc=0;dt.La=qe}}}Ue=0}else Zr(ye,6,"Frame setup failed"),Ue=ye.a;if(Ue=Ue==0){if(Ue){ye.$c=0,0<ye.Aa||(ye.Ic=bee);t:{Ue=ye.Ic,it=4*(St=ye.za);var hn=32*St,rn=St+1,Un=0<ye.L?St*(0<ye.Aa?2:1):0,un=(ye.Aa==2?2:1)*St;if((dt=it+832+(qe=3*(16*Ue+cx[ye.L])/2*hn)+(ct=ye.Fa!=null&&0<ye.Fa.length?ye.Kc.c*ye.Kc.i:0))!=dt)Ue=0;else{if(dt>ye.Vb){if(ye.Vb=0,ye.Ec=a(dt),ye.Fc=0,ye.Ec==null){Ue=Zr(ye,1,"no memory during frame initialization.");break t}ye.Vb=dt}dt=ye.Ec,Nt=ye.Fc,ye.Ac=dt,ye.Bc=Nt,Nt+=it,ye.Gd=s(hn,Sl),ye.Hd=0,ye.rb=s(rn+1,es),ye.sb=1,ye.wa=Un?s(Un,Ni):null,ye.Y=0,ye.D.Nb=0,ye.D.wa=ye.wa,ye.D.Y=ye.Y,0<ye.Aa&&(ye.D.Y+=St),e(!0),ye.oc=dt,ye.pc=Nt,Nt+=832,ye.ya=s(un,Ks),ye.aa=0,ye.D.ya=ye.ya,ye.D.aa=ye.aa,ye.Aa==2&&(ye.D.aa+=St),ye.R=16*St,ye.B=8*St,St=(hn=cx[ye.L])*ye.R,hn=hn/2*ye.B,ye.sa=dt,ye.ta=Nt+St,ye.qa=ye.sa,ye.ra=ye.ta+16*Ue*ye.R+hn,ye.Ha=ye.qa,ye.Ia=ye.ra+8*Ue*ye.B+hn,ye.$c=0,Nt+=qe,ye.mb=ct?dt:null,ye.nb=ct?Nt:null,e(Nt+ct<=ye.Fc+ye.Vb),xs(ye),i(ye.Ac,ye.Bc,0,it),Ue=1}}if(Ue){if(Fe.ka=0,Fe.y=ye.sa,Fe.O=ye.ta,Fe.f=ye.qa,Fe.N=ye.ra,Fe.ea=ye.Ha,Fe.Vd=ye.Ia,Fe.fa=ye.R,Fe.Rc=ye.B,Fe.F=null,Fe.J=0,!ka){for(Ue=-255;255>=Ue;++Ue)kn[255+Ue]=0>Ue?-Ue:Ue;for(Ue=-1020;1020>=Ue;++Ue)ci[1020+Ue]=-128>Ue?-128:127<Ue?127:Ue;for(Ue=-112;112>=Ue;++Ue)Nn[112+Ue]=-16>Ue?-16:15<Ue?15:Ue;for(Ue=-255;510>=Ue;++Ue)Ea[255+Ue]=0>Ue?0:255<Ue?255:Ue;ka=1}Ee=Ro,Te=Jl,Ae=ec,Pe=Yn,je=Gs,Le=Mo,ke=kl,Oe=Bo,ze=R,Ve=X,Qe=ts,et=Hc,nt=me,Ct=Ne,Rt=Nl,Et=El,It=js,Vt=ac,lc[0]=rc,lc[1]=Gn,lc[2]=Xi,lc[3]=nc,lc[4]=Cu,lc[5]=Fo,lc[6]=Kr,lc[7]=As,lc[8]=uo,lc[9]=Al,_d[0]=Aa,_d[1]=Bf,_d[2]=Vf,_d[3]=Gi,_d[4]=Yi,_d[5]=Lo,_d[6]=tc,Eu[0]=jl,Eu[1]=Au,Eu[2]=Cl,Eu[3]=Ca,Eu[4]=dr,Eu[5]=ju,Eu[6]=Nu,Ue=1}else Ue=0}Ue&&(Ue=function(lr,Pa){for(lr.M=0;lr.M<lr.Va;++lr.M){var Hn,dn=lr.Jc[lr.M&lr.Xb],Bt=lr.m,ea=lr;for(Hn=0;Hn<ea.za;++Hn){var zn=Bt,hr=ea,ui=hr.Ac,is=hr.Bc+4*Hn,Zs=hr.zc,Mi=hr.ya[hr.aa+Hn];if(hr.Qa.Bb?Mi.$b=be(zn,hr.Pa.jb[0])?2+be(zn,hr.Pa.jb[2]):be(zn,hr.Pa.jb[1]):Mi.$b=0,hr.kc&&(Mi.Ad=be(zn,hr.Bd)),Mi.Za=!be(zn,145)+0,Mi.Za){var Es=Mi.Ob,Js=0;for(hr=0;4>hr;++hr){var Ta,xr=Zs[0+hr];for(Ta=0;4>Ta;++Ta){xr=iee[ui[is+Ta]][xr];for(var Fr=aI[be(zn,xr[0])];0<Fr;)Fr=aI[2*Fr+be(zn,xr[Fr])];xr=-Fr,ui[is+Ta]=xr}r(Es,Js,ui,is,4),Js+=4,Zs[0+hr]=xr}}else xr=be(zn,156)?be(zn,128)?1:3:be(zn,163)?2:0,Mi.Ob[0]=xr,i(ui,is,xr,4),i(Zs,0,xr,4);Mi.Dd=be(zn,142)?be(zn,114)?be(zn,183)?1:3:2:0}if(ea.m.Ka)return Zr(lr,7,"Premature end-of-partition0 encountered.");for(;lr.ja<lr.za;++lr.ja){if(ea=dn,zn=(Bt=lr).rb[Bt.sb-1],ui=Bt.rb[Bt.sb+Bt.ja],Hn=Bt.ya[Bt.aa+Bt.ja],is=Bt.kc?Hn.Ad:0)zn.la=ui.la=0,Hn.Za||(zn.Na=ui.Na=0),Hn.Hc=0,Hn.Gc=0,Hn.ia=0;else{var Ri,zr;if(zn=ui,ui=ea,is=Bt.Pa.Xc,Zs=Bt.ya[Bt.aa+Bt.ja],Mi=Bt.pb[Zs.$b],hr=Zs.ad,Es=0,Js=Bt.rb[Bt.sb-1],xr=Ta=0,i(hr,Es,0,384),Zs.Za)var as=0,cc=is[3];else{Fr=a(16);var ta=zn.Na+Js.Na;if(ta=Sv(ui,is[1],ta,Mi.Eb,0,Fr,0),zn.Na=Js.Na=(0<ta)+0,1<ta)Ee(Fr,0,hr,Es);else{var ho=Fr[0]+3>>3;for(Fr=0;256>Fr;Fr+=16)hr[Es+Fr]=ho}as=1,cc=is[0]}var Yr=15&zn.la,Da=15&Js.la;for(Fr=0;4>Fr;++Fr){var Wo=1&Da;for(ho=zr=0;4>ho;++ho)Yr=Yr>>1|(Wo=(ta=Sv(ui,cc,ta=Wo+(1&Yr),Mi.Sc,as,hr,Es))>as)<<7,zr=zr<<2|(3<ta?3:1<ta?2:hr[Es+0]!=0),Es+=16;Yr>>=4,Da=Da>>1|Wo<<7,Ta=(Ta<<8|zr)>>>0}for(cc=Yr,as=Da>>4,Ri=0;4>Ri;Ri+=2){for(zr=0,Yr=zn.la>>4+Ri,Da=Js.la>>4+Ri,Fr=0;2>Fr;++Fr){for(Wo=1&Da,ho=0;2>ho;++ho)ta=Wo+(1&Yr),Yr=Yr>>1|(Wo=0<(ta=Sv(ui,is[2],ta,Mi.Qc,0,hr,Es)))<<3,zr=zr<<2|(3<ta?3:1<ta?2:hr[Es+0]!=0),Es+=16;Yr>>=2,Da=Da>>1|Wo<<5}xr|=zr<<4*Ri,cc|=Yr<<4<<Ri,as|=(240&Da)<<Ri}zn.la=cc,Js.la=as,Zs.Hc=Ta,Zs.Gc=xr,Zs.ia=43690&xr?0:Mi.ia,is=!(Ta|xr)}if(0<Bt.L&&(Bt.wa[Bt.Y+Bt.ja]=Bt.gd[Hn.$b][Hn.Za],Bt.wa[Bt.Y+Bt.ja].La|=!is),ea.Ka)return Zr(lr,7,"Premature end-of-file encountered.")}if(xs(lr),Bt=Pa,ea=1,Hn=(dn=lr).D,zn=0<dn.L&&dn.M>=dn.zb&&dn.M<=dn.Va,dn.Aa==0)t:{if(Hn.M=dn.M,Hn.uc=zn,fa(dn,Hn),ea=1,Hn=(zr=dn.D).Nb,zn=(xr=cx[dn.L])*dn.R,ui=xr/2*dn.B,Fr=16*Hn*dn.R,ho=8*Hn*dn.B,is=dn.sa,Zs=dn.ta-zn+Fr,Mi=dn.qa,hr=dn.ra-ui+ho,Es=dn.Ha,Js=dn.Ia-ui+ho,Da=(Yr=zr.M)==0,Ta=Yr>=dn.Va-1,dn.Aa==2&&fa(dn,zr),zr.uc)for(Wo=(ta=dn).D.M,e(ta.D.uc),zr=ta.yb;zr<ta.Hb;++zr){as=zr,cc=Wo;var eo=(qo=(ss=ta).D).Nb;Ri=ss.R;var qo=qo.wa[qo.Y+as],Ko=ss.sa,po=ss.ta+16*eo*Ri+16*as,Go=qo.dd,ti=qo.tc;if(ti!=0)if(e(3<=ti),ss.L==1)0<as&&Et(Ko,po,Ri,ti+4),qo.La&&Vt(Ko,po,Ri,ti),0<cc&&Rt(Ko,po,Ri,ti+4),qo.La&&It(Ko,po,Ri,ti);else{var Yo=ss.B,uc=ss.qa,Wf=ss.ra+8*eo*Yo+8*as,ku=ss.Ha,ss=ss.Ia+8*eo*Yo+8*as;eo=qo.ld,0<as&&(Oe(Ko,po,Ri,ti+4,Go,eo),Ve(uc,Wf,ku,ss,Yo,ti+4,Go,eo)),qo.La&&(et(Ko,po,Ri,ti,Go,eo),Ct(uc,Wf,ku,ss,Yo,ti,Go,eo)),0<cc&&(ke(Ko,po,Ri,ti+4,Go,eo),ze(uc,Wf,ku,ss,Yo,ti+4,Go,eo)),qo.La&&(Qe(Ko,po,Ri,ti,Go,eo),nt(uc,Wf,ku,ss,Yo,ti,Go,eo))}}if(dn.ia&&alert("todo:DitherRow"),Bt.put!=null){if(zr=16*Yr,Yr=16*(Yr+1),Da?(Bt.y=dn.sa,Bt.O=dn.ta+Fr,Bt.f=dn.qa,Bt.N=dn.ra+ho,Bt.ea=dn.Ha,Bt.W=dn.Ia+ho):(zr-=xr,Bt.y=is,Bt.O=Zs,Bt.f=Mi,Bt.N=hr,Bt.ea=Es,Bt.W=Js),Ta||(Yr-=xr),Yr>Bt.o&&(Yr=Bt.o),Bt.F=null,Bt.J=null,dn.Fa!=null&&0<dn.Fa.length&&zr<Yr&&(Bt.J=Wr(dn,Bt,zr,Yr-zr),Bt.F=dn.mb,Bt.F==null&&Bt.F.length==0)){ea=Zr(dn,3,"Could not decode alpha data.");break t}zr<Bt.j&&(xr=Bt.j-zr,zr=Bt.j,e(!(1&xr)),Bt.O+=dn.R*xr,Bt.N+=dn.B*(xr>>1),Bt.W+=dn.B*(xr>>1),Bt.F!=null&&(Bt.J+=Bt.width*xr)),zr<Yr&&(Bt.O+=Bt.v,Bt.N+=Bt.v>>1,Bt.W+=Bt.v>>1,Bt.F!=null&&(Bt.J+=Bt.v),Bt.ka=zr-Bt.j,Bt.U=Bt.va-Bt.v,Bt.T=Yr-zr,ea=Bt.put(Bt))}Hn+1!=dn.Ic||Ta||(r(dn.sa,dn.ta-zn,is,Zs+16*dn.R,zn),r(dn.qa,dn.ra-ui,Mi,hr+8*dn.B,ui),r(dn.Ha,dn.Ia-ui,Es,Js+8*dn.B,ui))}if(!ea)return Zr(lr,6,"Output aborted.")}return 1}(ye,Fe)),Fe.bc!=null&&Fe.bc(Fe),Ue&=1}return Ue?(ye.cb=0,Ue):0})(x,U)||(N=x.a)}}else N=x.a}N==0&&ae.Oa!=null&&ae.Oa.fd&&(N=Hf(ae.ba))}ae=N}re=ae!=0?null:11>re?ce.f.RGBA.eb:ce.f.kb.y}else re=null;return re};var hI=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(k,O){for(var D="",M=0;M<4;M++)D+=String.fromCharCode(k[O++]);return D}function d(k,O){return k[O+0]|k[O+1]<<8}function f(k,O){return(k[O+0]|k[O+1]<<8|k[O+2]<<16)>>>0}function p(k,O){return(k[O+0]|k[O+1]<<8|k[O+2]<<16|k[O+3]<<24)>>>0}new l;var h=[0],m=[0],g=[],v=new l,y=t,b=function(k,O){var D={},M=0,L=!1,V=0,Q=0;if(D.frames=[],!function($,G){for(var te=0;te<4;te++)if($[G+te]!="RIFF".charCodeAt(te))return!0;return!1}(k,O)){for(p(k,O+=4),O+=8;O<k.length;){var Y=u(k,O),J=p(k,O+=4);O+=4;var q=J+(1&J);switch(Y){case"VP8 ":case"VP8L":D.frames[M]===void 0&&(D.frames[M]={}),(se=D.frames[M]).src_off=L?Q:O-8,se.src_size=V+J+8,M++,L&&(L=!1,V=0,Q=0);break;case"VP8X":(se=D.header={}).feature_flags=k[O];var ee=O+4;se.canvas_width=1+f(k,ee),ee+=3,se.canvas_height=1+f(k,ee),ee+=3;break;case"ALPH":L=!0,V=q+8,Q=O-8;break;case"ANIM":(se=D.header).bgcolor=p(k,O),ee=O+4,se.loop_count=d(k,ee),ee+=2;break;case"ANMF":var le,se;(se=D.frames[M]={}).offset_x=2*f(k,O),O+=3,se.offset_y=2*f(k,O),O+=3,se.width=1+f(k,O),O+=3,se.height=1+f(k,O),O+=3,se.duration=f(k,O),O+=3,le=k[O++],se.dispose=1&le,se.blend=le>>1&1}Y!="ANMF"&&(O+=q)}return D}}(y,0);b.response=y,b.rgbaoutput=!0,b.dataurl=!1;var S=b.header?b.header:null,A=b.frames?b.frames:null;if(S){S.loop_counter=S.loop_count,h=[S.canvas_height],m=[S.canvas_width];for(var C=0;C<A.length&&A[C].blend!=0;C++);}var T=A[0],j=v.WebPDecodeRGBA(y,T.src_off,T.src_size,m,h);T.rgba=j,T.imgwidth=m[0],T.imgheight=h[0];for(var E=0;E<m[0]*h[0]*4;E++)g[E]=j[E];return this.width=m,this.height=h,this.data=g,this}(function(t){var e,n,r,i,a,s,o,l,u,d=function($){return $=$||{},this.isStrokeTransparent=$.isStrokeTransparent||!1,this.strokeOpacity=$.strokeOpacity||1,this.strokeStyle=$.strokeStyle||"#000000",this.fillStyle=$.fillStyle||"#000000",this.isFillTransparent=$.isFillTransparent||!1,this.fillOpacity=$.fillOpacity||1,this.font=$.font||"10px sans-serif",this.textBaseline=$.textBaseline||"alphabetic",this.textAlign=$.textAlign||"left",this.lineWidth=$.lineWidth||1,this.lineJoin=$.lineJoin||"miter",this.lineCap=$.lineCap||"butt",this.path=$.path||[],this.transform=$.transform!==void 0?$.transform.clone():new l,this.globalCompositeOperation=$.globalCompositeOperation||"normal",this.globalAlpha=$.globalAlpha||1,this.clip_path=$.clip_path||[],this.currentPoint=$.currentPoint||new s,this.miterLimit=$.miterLimit||10,this.lastPoint=$.lastPoint||new s,this.lineDashOffset=$.lineDashOffset||0,this.lineDash=$.lineDash||[],this.margin=$.margin||[0,0,0,0],this.prevPageLastElemOffset=$.prevPageLastElemOffset||0,this.ignoreClearRect=typeof $.ignoreClearRect!="boolean"||$.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var f=function($){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=$;Object.defineProperty(this,"pdf",{get:function(){return G}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(Me){te=!!Me}});var oe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return oe},set:function(Me){oe=!!Me}});var ge=0;Object.defineProperty(this,"posX",{get:function(){return ge},set:function(Me){isNaN(Me)||(ge=Me)}});var _e=0;Object.defineProperty(this,"posY",{get:function(){return _e},set:function(Me){isNaN(Me)||(_e=Me)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Me){var he;typeof Me=="number"?he=[Me,Me,Me,Me]:((he=new Array(4))[0]=Me[0],he[1]=Me.length>=2?Me[1]:he[0],he[2]=Me.length>=3?Me[2]:he[0],he[3]=Me.length>=4?Me[3]:he[1]),u.margin=he}});var Ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ce},set:function(Me){Ce=Me}});var fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return fe},set:function(Me){fe=Me}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(Me){be=Me}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Me){Me instanceof d&&(u=Me)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Me){u.path=Me}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(Me){we=Me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Me){var he;he=p(Me),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Me){var he=p(Me);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Me){["butt","round","square"].indexOf(Me)!==-1&&(this.ctx.lineCap=Me,this.pdf.setLineCap(Me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Me){isNaN(Me)||(this.ctx.lineWidth=Me,this.pdf.setLineWidth(Me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Me){["bevel","round","miter"].indexOf(Me)!==-1&&(this.ctx.lineJoin=Me,this.pdf.setLineJoin(Me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Me){isNaN(Me)||(this.ctx.miterLimit=Me,this.pdf.setMiterLimit(Me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Me){this.ctx.textBaseline=Me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Me){["right","end","center","left","start"].indexOf(Me)!==-1&&(this.ctx.textAlign=Me)}});var ie=null,He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(Me){ie=null,He=Me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Me){var he;if(this.ctx.font=Me,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Me))!==null){var We=he[1];he[2];var pt=he[3],gt=he[4];he[5];var Xe=he[6],Ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(gt)[2];gt=Math.floor(Ot==="px"?parseFloat(gt)*this.pdf.internal.scaleFactor:Ot==="em"?parseFloat(gt)*this.pdf.getFontSize():parseFloat(gt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(gt);var ft=function(xt){var tt,zt,ht=[],mt=xt.trim();if(mt==="")return gj;if(mt in K9)return[K9[mt]];for(;mt!=="";){switch(zt=null,tt=(mt=Y9(mt)).charAt(0)){case'"':case"'":zt=BGe(mt.substring(1),tt);break;default:zt=VGe(mt)}if(zt===null||(ht.push(zt[0]),(mt=Y9(zt[1]))!==""&&mt.charAt(0)!==","))return gj;mt=mt.replace(/^,/,"")}return ht}(Xe);if(this.fontFaces){var ut=function(xt,tt){if(ie===null){var zt=function(ht){var mt=[];return Object.keys(ht).forEach(function(Mt){ht[Mt].forEach(function(_t){var Ht=null;switch(_t){case"bold":Ht={family:Mt,weight:"bold"};break;case"italic":Ht={family:Mt,style:"italic"};break;case"bolditalic":Ht={family:Mt,weight:"bold",style:"italic"};break;case"":case"normal":Ht={family:Mt}}Ht!==null&&(Ht.ref={name:Mt,style:_t},mt.push(Ht))})}),mt}(xt.getFontList());ie=function(ht){for(var mt={},Mt=0;Mt<ht.length;++Mt){var _t=mj(ht[Mt]),Ht=_t.family,gn=_t.stretch,on=_t.style,wt=_t.weight;mt[Ht]=mt[Ht]||{},mt[Ht][gn]=mt[Ht][gn]||{},mt[Ht][gn][on]=mt[Ht][gn][on]||{},mt[Ht][gn][on][wt]=_t}return mt}(zt.concat(tt))}return ie}(this.pdf,this.fontFaces),Dt=ft.map(function(xt){return{family:xt,stretch:"normal",weight:pt,style:We}}),Yt=function(xt,tt,zt){for(var ht=(zt=zt||{}).defaultFontFamily||"times",mt=Object.assign({},$Ge,zt.genericFontFamilies||{}),Mt=null,_t=null,Ht=0;Ht<tt.length;++Ht)if(mt[(Mt=mj(tt[Ht])).family]&&(Mt.family=mt[Mt.family]),xt.hasOwnProperty(Mt.family)){_t=xt[Mt.family];break}if(!(_t=_t||xt[ht]))throw new Error("Could not find a font-family for the rule '"+G9(Mt)+"' and default family '"+ht+"'.");if(_t=function(gn,on){if(on[gn])return on[gn];var wt=hP[gn],Xn=wt<=hP.normal?-1:1,fn=q9(on,jJ,wt,Xn);if(!fn)throw new Error("Could not find a matching font-stretch value for "+gn);return fn}(Mt.stretch,_t),_t=function(gn,on){if(on[gn])return on[gn];for(var wt=CJ[gn],Xn=0;Xn<wt.length;++Xn)if(on[wt[Xn]])return on[wt[Xn]];throw new Error("Could not find a matching font-style for "+gn)}(Mt.style,_t),!(_t=function(gn,on){if(on[gn])return on[gn];if(gn===400&&on[500])return on[500];if(gn===500&&on[400])return on[400];var wt=zGe[gn],Xn=q9(on,NJ,wt,gn<400?-1:1);if(!Xn)throw new Error("Could not find a matching font-weight for value "+gn);return Xn}(Mt.weight,_t)))throw new Error("Failed to resolve a font for the rule '"+G9(Mt)+"'.");return _t}(ut,Dt);this.pdf.setFont(Yt.ref.name,Yt.ref.style)}else{var Qt="";(pt==="bold"||parseInt(pt,10)>=700||We==="bold")&&(Qt="bold"),We==="italic"&&(Qt+="italic"),Qt.length===0&&(Qt="normal");for(var Ft="",sn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},at=0;at<ft.length;at++){if(this.pdf.internal.getFont(ft[at],Qt,{noFallback:!0,disableWarning:!0})!==void 0){Ft=ft[at];break}if(Qt==="bolditalic"&&this.pdf.internal.getFont(ft[at],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ft=ft[at],Qt="bold";else if(this.pdf.internal.getFont(ft[at],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ft=ft[at],Qt="normal";break}}if(Ft===""){for(var vt=0;vt<ft.length;vt++)if(sn[ft[vt]]){Ft=sn[ft[vt]];break}}Ft=Ft===""?"Times":Ft,this.pdf.setFont(Ft,Qt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Me){this.ctx.globalCompositeOperation=Me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Me){this.ctx.globalAlpha=Me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Me){this.ctx.lineDashOffset=Me,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Me){this.ctx.lineDash=Me,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Me){this.ctx.ignoreClearRect=!!Me}})};f.prototype.setLineDash=function($){this.lineDash=$},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){A.call(this,"fill",!1)},f.prototype.stroke=function(){A.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function($,G){if(isNaN($)||isNaN(G))throw Xr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new s($,G));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new s($,G)},f.prototype.closePath=function(){var $=new s(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&Br(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){$=new s(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s($.x,$.y)},f.prototype.lineTo=function($,G){if(isNaN($)||isNaN(G))throw Xr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new s($,G));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new s(te.x,te.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},f.prototype.quadraticCurveTo=function($,G,te,oe){if(isNaN(te)||isNaN(oe)||isNaN($)||isNaN(G))throw Xr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ge=this.ctx.transform.applyToPoint(new s(te,oe)),_e=this.ctx.transform.applyToPoint(new s($,G));this.path.push({type:"qct",x1:_e.x,y1:_e.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new s(ge.x,ge.y)},f.prototype.bezierCurveTo=function($,G,te,oe,ge,_e){if(isNaN(ge)||isNaN(_e)||isNaN($)||isNaN(G)||isNaN(te)||isNaN(oe))throw Xr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ce=this.ctx.transform.applyToPoint(new s(ge,_e)),fe=this.ctx.transform.applyToPoint(new s($,G)),be=this.ctx.transform.applyToPoint(new s(te,oe));this.path.push({type:"bct",x1:fe.x,y1:fe.y,x2:be.x,y2:be.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new s(Ce.x,Ce.y)},f.prototype.arc=function($,G,te,oe,ge,_e){if(isNaN($)||isNaN(G)||isNaN(te)||isNaN(oe)||isNaN(ge))throw Xr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_e=!!_e,!this.ctx.transform.isIdentity){var Ce=this.ctx.transform.applyToPoint(new s($,G));$=Ce.x,G=Ce.y;var fe=this.ctx.transform.applyToPoint(new s(0,te)),be=this.ctx.transform.applyToPoint(new s(0,0));te=Math.sqrt(Math.pow(fe.x-be.x,2)+Math.pow(fe.y-be.y,2))}Math.abs(ge-oe)>=2*Math.PI&&(oe=0,ge=2*Math.PI),this.path.push({type:"arc",x:$,y:G,radius:te,startAngle:oe,endAngle:ge,counterclockwise:_e})},f.prototype.arcTo=function($,G,te,oe,ge){throw new Error("arcTo not implemented.")},f.prototype.rect=function($,G,te,oe){if(isNaN($)||isNaN(G)||isNaN(te)||isNaN(oe))throw Xr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo($,G),this.lineTo($+te,G),this.lineTo($+te,G+oe),this.lineTo($,G+oe),this.lineTo($,G),this.lineTo($+te,G),this.lineTo($,G)},f.prototype.fillRect=function($,G,te,oe){if(isNaN($)||isNaN(G)||isNaN(te)||isNaN(oe))throw Xr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var ge={};this.lineCap!=="butt"&&(ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect($,G,te,oe),this.fill(),ge.hasOwnProperty("lineCap")&&(this.lineCap=ge.lineCap),ge.hasOwnProperty("lineJoin")&&(this.lineJoin=ge.lineJoin)}},f.prototype.strokeRect=function($,G,te,oe){if(isNaN($)||isNaN(G)||isNaN(te)||isNaN(oe))throw Xr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect($,G,te,oe),this.stroke())},f.prototype.clearRect=function($,G,te,oe){if(isNaN($)||isNaN(G)||isNaN(te)||isNaN(oe))throw Xr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect($,G,te,oe))},f.prototype.save=function($){$=typeof $!="boolean"||$;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),$){this.ctx.fontSize=this.pdf.internal.getFontSize();var oe=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=oe}},f.prototype.restore=function($){$=typeof $!="boolean"||$;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(G),$&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function($){var G,te,oe,ge;if($.isCanvasGradient===!0&&($=$.getColor()),!$)return{r:0,g:0,b:0,a:0,style:$};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test($))G=0,te=0,oe=0,ge=0;else{var _e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec($);if(_e!==null)G=parseInt(_e[1]),te=parseInt(_e[2]),oe=parseInt(_e[3]),ge=1;else if((_e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec($))!==null)G=parseInt(_e[1]),te=parseInt(_e[2]),oe=parseInt(_e[3]),ge=parseFloat(_e[4]);else{if(ge=1,typeof $=="string"&&$.charAt(0)!=="#"){var Ce=new yJ($);$=Ce.ok?Ce.toHex():"#000000"}$.length===4?(G=$.substring(1,2),G+=G,te=$.substring(2,3),te+=te,oe=$.substring(3,4),oe+=oe):(G=$.substring(1,3),te=$.substring(3,5),oe=$.substring(5,7)),G=parseInt(G,16),te=parseInt(te,16),oe=parseInt(oe,16)}}return{r:G,g:te,b:oe,a:ge,style:$}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function($,G,te,oe){if(isNaN(G)||isNaN(te)||typeof $!="string")throw Xr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(oe=isNaN(oe)?void 0:oe,!h.call(this)){var ge=q(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;M.call(this,{text:$,x:G,y:te,scale:_e,angle:ge,align:this.textAlign,maxWidth:oe})}},f.prototype.strokeText=function($,G,te,oe){if(isNaN(G)||isNaN(te)||typeof $!="string")throw Xr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){oe=isNaN(oe)?void 0:oe;var ge=q(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;M.call(this,{text:$,x:G,y:te,scale:_e,renderingMode:"stroke",angle:ge,align:this.textAlign,maxWidth:oe})}},f.prototype.measureText=function($){if(typeof $!="string")throw Xr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,te=this.pdf.internal.scaleFactor,oe=G.internal.getFontSize(),ge=G.getStringUnitWidth($)*oe/G.internal.scaleFactor;return new function(_e){var Ce=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this}({width:ge*=Math.round(96*te/72*1e4)/1e4})},f.prototype.scale=function($,G){if(isNaN($)||isNaN(G))throw Xr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new l($,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.rotate=function($){if(isNaN($))throw Xr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new l(Math.cos($),Math.sin($),-Math.sin($),Math.cos($),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.translate=function($,G){if(isNaN($)||isNaN(G))throw Xr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new l(1,0,0,1,$,G);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.transform=function($,G,te,oe,ge,_e){if(isNaN($)||isNaN(G)||isNaN(te)||isNaN(oe)||isNaN(ge)||isNaN(_e))throw Xr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ce=new l($,G,te,oe,ge,_e);this.ctx.transform=this.ctx.transform.multiply(Ce)},f.prototype.setTransform=function($,G,te,oe,ge,_e){$=isNaN($)?1:$,G=isNaN(G)?0:G,te=isNaN(te)?0:te,oe=isNaN(oe)?1:oe,ge=isNaN(ge)?0:ge,_e=isNaN(_e)?0:_e,this.ctx.transform=new l($,G,te,oe,ge,_e)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function($,G,te,oe,ge,_e,Ce,fe,be){var we=this.pdf.getImageProperties($),ie=1,He=1,Me=1,he=1;oe!==void 0&&fe!==void 0&&(Me=fe/oe,he=be/ge,ie=we.width/oe*fe/oe,He=we.height/ge*be/ge),_e===void 0&&(_e=G,Ce=te,G=0,te=0),oe!==void 0&&fe===void 0&&(fe=oe,be=ge),oe===void 0&&fe===void 0&&(fe=we.width,be=we.height);for(var We,pt=this.ctx.transform.decompose(),gt=q(pt.rotate.shx),Xe=new l,Ot=(Xe=(Xe=(Xe=Xe.multiply(pt.translate)).multiply(pt.skew)).multiply(pt.scale)).applyToRectangle(new o(_e-G*Me,Ce-te*he,oe*ie,ge*He)),ft=v.call(this,Ot),ut=[],Dt=0;Dt<ft.length;Dt+=1)ut.indexOf(ft[Dt])===-1&&ut.push(ft[Dt]);if(S(ut),this.autoPaging)for(var Yt=ut[0],Qt=ut[ut.length-1],Ft=Yt;Ft<Qt+1;Ft++){this.pdf.setPage(Ft);var sn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],at=Ft===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=Ft===1?0:vt+(Ft-2)*xt;if(this.ctx.clip_path.length!==0){var zt=this.path;We=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(We,this.posX+this.margin[3],-tt+at+this.ctx.prevPageLastElemOffset),C.call(this,"fill",!0),this.path=zt}var ht=JSON.parse(JSON.stringify(Ot));ht=b([ht],this.posX+this.margin[3],-tt+at+this.ctx.prevPageLastElemOffset)[0];var mt=(Ft>Yt||Ft<Qt)&&g.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],sn,xt,null).clip().discardPath()),this.pdf.addImage($,"JPEG",ht.x,ht.y,ht.w,ht.h,null,null,gt),mt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage($,"JPEG",Ot.x,Ot.y,Ot.w,Ot.h,null,null,gt)};var v=function($,G,te){var oe=[];G=G||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ge=this.posY+this.ctx.prevPageLastElemOffset;switch($.type){default:case"mt":case"lt":oe.push(Math.floor(($.y+ge)/te)+1);break;case"arc":oe.push(Math.floor(($.y+ge-$.radius)/te)+1),oe.push(Math.floor(($.y+ge+$.radius)/te)+1);break;case"qct":var _e=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x,$.y);oe.push(Math.floor((_e.y+ge)/te)+1),oe.push(Math.floor((_e.y+_e.h+ge)/te)+1);break;case"bct":var Ce=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x2,$.y2,$.x,$.y);oe.push(Math.floor((Ce.y+ge)/te)+1),oe.push(Math.floor((Ce.y+Ce.h+ge)/te)+1);break;case"rect":oe.push(Math.floor(($.y+ge)/te)+1),oe.push(Math.floor(($.y+$.h+ge)/te)+1)}for(var fe=0;fe<oe.length;fe+=1)for(;this.pdf.internal.getNumberOfPages()<oe[fe];)y.call(this);return oe},y=function(){var $=this.fillStyle,G=this.strokeStyle,te=this.font,oe=this.lineCap,ge=this.lineWidth,_e=this.lineJoin;this.pdf.addPage(),this.fillStyle=$,this.strokeStyle=G,this.font=te,this.lineCap=oe,this.lineWidth=ge,this.lineJoin=_e},b=function($,G,te){for(var oe=0;oe<$.length;oe++)switch($[oe].type){case"bct":$[oe].x2+=G,$[oe].y2+=te;case"qct":$[oe].x1+=G,$[oe].y1+=te;default:$[oe].x+=G,$[oe].y+=te}return $},S=function($){return $.sort(function(G,te){return G-te})},A=function($,G){for(var te,oe,ge=this.fillStyle,_e=this.strokeStyle,Ce=this.lineCap,fe=this.lineWidth,be=Math.abs(fe*this.ctx.transform.scaleX),we=this.lineJoin,ie=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),Me=[],he=0;he<He.length;he++)if(He[he].x!==void 0)for(var We=v.call(this,He[he]),pt=0;pt<We.length;pt+=1)Me.indexOf(We[pt])===-1&&Me.push(We[pt]);for(var gt=0;gt<Me.length;gt++)for(;this.pdf.internal.getNumberOfPages()<Me[gt];)y.call(this);if(S(Me),this.autoPaging)for(var Xe=Me[0],Ot=Me[Me.length-1],ft=Xe;ft<Ot+1;ft++){this.pdf.setPage(ft),this.fillStyle=ge,this.strokeStyle=_e,this.lineCap=Ce,this.lineWidth=be,this.lineJoin=we;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dt=ft===1?this.posY+this.margin[0]:this.margin[0],Yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ft=ft===1?0:Yt+(ft-2)*Qt;if(this.ctx.clip_path.length!==0){var sn=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(te,this.posX+this.margin[3],-Ft+Dt+this.ctx.prevPageLastElemOffset),C.call(this,$,!0),this.path=sn}if(oe=JSON.parse(JSON.stringify(ie)),this.path=b(oe,this.posX+this.margin[3],-Ft+Dt+this.ctx.prevPageLastElemOffset),G===!1||ft===0){var at=(ft>Xe||ft<Ot)&&g.call(this);at&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Qt,null).clip().discardPath()),C.call(this,$,G),at&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}else this.lineWidth=be,C.call(this,$,G),this.lineWidth=fe;this.path=ie},C=function($,G){if(($!=="stroke"||G||!m.call(this))&&($==="stroke"||G||!h.call(this))){for(var te,oe,ge=[],_e=this.path,Ce=0;Ce<_e.length;Ce++){var fe=_e[Ce];switch(fe.type){case"begin":ge.push({begin:!0});break;case"close":ge.push({close:!0});break;case"mt":ge.push({start:fe,deltas:[],abs:[]});break;case"lt":var be=ge.length;if(_e[Ce-1]&&!isNaN(_e[Ce-1].x)&&(te=[fe.x-_e[Ce-1].x,fe.y-_e[Ce-1].y],be>0)){for(;be>=0;be--)if(ge[be-1].close!==!0&&ge[be-1].begin!==!0){ge[be-1].deltas.push(te),ge[be-1].abs.push(fe);break}}break;case"bct":te=[fe.x1-_e[Ce-1].x,fe.y1-_e[Ce-1].y,fe.x2-_e[Ce-1].x,fe.y2-_e[Ce-1].y,fe.x-_e[Ce-1].x,fe.y-_e[Ce-1].y],ge[ge.length-1].deltas.push(te);break;case"qct":var we=_e[Ce-1].x+2/3*(fe.x1-_e[Ce-1].x),ie=_e[Ce-1].y+2/3*(fe.y1-_e[Ce-1].y),He=fe.x+2/3*(fe.x1-fe.x),Me=fe.y+2/3*(fe.y1-fe.y),he=fe.x,We=fe.y;te=[we-_e[Ce-1].x,ie-_e[Ce-1].y,He-_e[Ce-1].x,Me-_e[Ce-1].y,he-_e[Ce-1].x,We-_e[Ce-1].y],ge[ge.length-1].deltas.push(te);break;case"arc":ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(ge[ge.length-1].abs)&&ge[ge.length-1].abs.push(fe)}}oe=G?null:$==="stroke"?"stroke":"fill";for(var pt=!1,gt=0;gt<ge.length;gt++)if(ge[gt].arc)for(var Xe=ge[gt].abs,Ot=0;Ot<Xe.length;Ot++){var ft=Xe[Ot];ft.type==="arc"?E.call(this,ft.x,ft.y,ft.radius,ft.startAngle,ft.endAngle,ft.counterclockwise,void 0,G,!pt):L.call(this,ft.x,ft.y),pt=!0}else if(ge[gt].close===!0)this.pdf.internal.out("h"),pt=!1;else if(ge[gt].begin!==!0){var ut=ge[gt].start.x,Dt=ge[gt].start.y;V.call(this,ge[gt].deltas,ut,Dt),pt=!0}oe&&k.call(this,oe),G&&O.call(this)}},T=function($){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return $-te;case"top":return $+G-te;case"hanging":return $+G-2*te;case"middle":return $+G/2-te;default:return $}},j=function($){return $+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var $=function(){};return $.colorStops=[],$.addColorStop=function(G,te){this.colorStops.push([G,te])},$.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},$.isCanvasGradient=!0,$},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function($,G,te,oe,ge,_e,Ce,fe,be){for(var we=Y.call(this,te,oe,ge,_e),ie=0;ie<we.length;ie++){var He=we[ie];ie===0&&(be?D.call(this,He.x1+$,He.y1+G):L.call(this,He.x1+$,He.y1+G)),Q.call(this,$,G,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}fe?O.call(this):k.call(this,Ce)},k=function($){switch($){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},D=function($,G){this.pdf.internal.out(n($)+" "+r(G)+" m")},M=function($){var G;switch($.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var te=this.pdf.getTextDimensions($.text),oe=T.call(this,$.y),ge=j.call(this,oe)-te.h,_e=this.ctx.transform.applyToPoint(new s($.x,oe)),Ce=this.ctx.transform.decompose(),fe=new l;fe=(fe=(fe=fe.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale);for(var be,we,ie,He=this.ctx.transform.applyToRectangle(new o($.x,oe,te.w,te.h)),Me=fe.applyToRectangle(new o($.x,ge,te.w,te.h)),he=v.call(this,Me),We=[],pt=0;pt<he.length;pt+=1)We.indexOf(he[pt])===-1&&We.push(he[pt]);if(S(We),this.autoPaging)for(var gt=We[0],Xe=We[We.length-1],Ot=gt;Ot<Xe+1;Ot++){this.pdf.setPage(Ot);var ft=Ot===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[2],Yt=Dt-this.margin[0],Qt=this.pdf.internal.pageSize.width-this.margin[1],Ft=Qt-this.margin[3],sn=Ot===1?0:ut+(Ot-2)*Yt;if(this.ctx.clip_path.length!==0){var at=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(be,this.posX+this.margin[3],-1*sn+ft),C.call(this,"fill",!0),this.path=at}var vt=b([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-sn+ft+this.ctx.prevPageLastElemOffset)[0];$.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*$.scale),ie=this.lineWidth,this.lineWidth=ie*$.scale);var xt=this.autoPaging!=="text";if(xt||vt.y+vt.h<=Dt){if(xt||vt.y>=ft&&vt.x<=Qt){var tt=xt?$.text:this.pdf.splitTextToSize($.text,$.maxWidth||Qt-vt.x)[0],zt=b([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-sn+ft+this.ctx.prevPageLastElemOffset)[0],ht=xt&&(Ot>gt||Ot<Xe)&&g.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ft,Yt,null).clip().discardPath()),this.pdf.text(tt,zt.x,zt.y,{angle:$.angle,align:G,renderingMode:$.renderingMode}),ht&&this.pdf.restoreGraphicsState()}}else vt.y<Dt&&(this.ctx.prevPageLastElemOffset+=Dt-vt.y);$.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=ie)}else $.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*$.scale),ie=this.lineWidth,this.lineWidth=ie*$.scale),this.pdf.text($.text,_e.x+this.posX,_e.y+this.posY,{angle:$.angle,align:G,renderingMode:$.renderingMode,maxWidth:$.maxWidth}),$.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=ie)},L=function($,G,te,oe){te=te||0,oe=oe||0,this.pdf.internal.out(n($+te)+" "+r(G+oe)+" l")},V=function($,G,te){return this.pdf.lines($,G,te,null,null)},Q=function($,G,te,oe,ge,_e,Ce,fe){this.pdf.internal.out([e(i(te+$)),e(a(oe+G)),e(i(ge+$)),e(a(_e+G)),e(i(Ce+$)),e(a(fe+G)),"c"].join(" "))},Y=function($,G,te,oe){for(var ge=2*Math.PI,_e=Math.PI/2;G>te;)G-=ge;var Ce=Math.abs(te-G);Ce<ge&&oe&&(Ce=ge-Ce);for(var fe=[],be=oe?-1:1,we=G;Ce>1e-5;){var ie=we+be*Math.min(Ce,_e);fe.push(J.call(this,$,we,ie)),Ce-=Math.abs(ie-we),we=ie}return fe},J=function($,G,te){var oe=(te-G)/2,ge=$*Math.cos(oe),_e=$*Math.sin(oe),Ce=ge,fe=-_e,be=Ce*Ce+fe*fe,we=be+Ce*ge+fe*_e,ie=4/3*(Math.sqrt(2*be*we)-we)/(Ce*_e-fe*ge),He=Ce-ie*fe,Me=fe+ie*Ce,he=He,We=-Me,pt=oe+G,gt=Math.cos(pt),Xe=Math.sin(pt);return{x1:$*Math.cos(G),y1:$*Math.sin(G),x2:He*gt-Me*Xe,y2:He*Xe+Me*gt,x3:he*gt-We*Xe,y3:he*Xe+We*gt,x4:$*Math.cos(te),y4:$*Math.sin(te)}},q=function($){return 180*$/Math.PI},ee=function($,G,te,oe,ge,_e){var Ce=$+.5*(te-$),fe=G+.5*(oe-G),be=ge+.5*(te-ge),we=_e+.5*(oe-_e),ie=Math.min($,ge,Ce,be),He=Math.max($,ge,Ce,be),Me=Math.min(G,_e,fe,we),he=Math.max(G,_e,fe,we);return new o(ie,Me,He-ie,he-Me)},le=function($,G,te,oe,ge,_e,Ce,fe){var be,we,ie,He,Me,he,We,pt,gt,Xe,Ot,ft,ut,Dt,Yt=te-$,Qt=oe-G,Ft=ge-te,sn=_e-oe,at=Ce-ge,vt=fe-_e;for(we=0;we<41;we++)gt=(We=(ie=$+(be=we/40)*Yt)+be*((Me=te+be*Ft)-ie))+be*(Me+be*(ge+be*at-Me)-We),Xe=(pt=(He=G+be*Qt)+be*((he=oe+be*sn)-He))+be*(he+be*(_e+be*vt-he)-pt),we==0?(Ot=gt,ft=Xe,ut=gt,Dt=Xe):(Ot=Math.min(Ot,gt),ft=Math.min(ft,Xe),ut=Math.max(ut,gt),Dt=Math.max(Dt,Xe));return new o(Math.round(Ot),Math.round(ft),Math.round(ut-Ot),Math.round(Dt-ft))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var $,G,te=($=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:$,lineDashOffset:G}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(pn.API),function(t){var e=function(s){var o,l,u,d,f,p,h,m,g,v;for(l=[],u=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>u;u+=4)(f=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(v=f%85))/85)-(g=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,l.push(p+33,h+33,m+33,g+33,v+33)):l.push(122);return function(y,b){for(var S=b;S>0;S--)y.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var o,l,u,d,f,p=String,h="length",m=255,g="charCodeAt",v="slice",y="replace";for(s[v](-2),s=s[v](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),u=[],d=0,f=(s+=o="uuuuu"[v](s[h]%5||5))[h];f>d;d+=5)l=52200625*(s[g](d)-33)+614125*(s[g](d+1)-33)+7225*(s[g](d+2)-33)+85*(s[g](d+3)-33)+(s[g](d+4)-33),u.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(b,S){for(var A=S;A>0;A--)b.pop()}(u,o[h]),p.fromCharCode.apply(p,u)},r=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",u=0;u<s.length;u+=2)l+=String.fromCharCode("0x"+(s[u]+s[u+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return(o=sP(o)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(s,o){var l=0,u=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=a(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(pn.API),function(t){t.loadFile=function(e,n,r){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,u,d){var f=new XMLHttpRequest,p=0,h=function(m){var g=m.length,v=[],y=String.fromCharCode;for(p=0;p<g;p+=1)v.push(y(255&m.charCodeAt(p)));return v.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(i,a,s)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(pn.API),function(t){function e(){return(Pn.html2canvas?Promise.resolve(Pn.html2canvas):QC(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Pn.DOMPurify?Promise.resolve(Pn.DOMPurify):QC(()=>import("./purify.es-B6FQ9oRL.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=Br(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var u=document.createElement(o);for(var d in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[d]=l.style[d];return u},a=function o(l,u){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),f=l.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(o(f,u));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},s=function o(l){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),u);return(d=d.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(n).then(function(u){return this.set({src:i("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],g=m.src.find(function(v){return v.format==="truetype"});g&&u.addFont(g.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var u=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(u):u})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(o=o||pn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,u,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,u,d){return this.setProgress(o?this.progress.val+o:null,l||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,l){var u=this;return this.thenCore(o,l,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,f).then(function(p){return u.updateProgress(1),p})})},s.prototype.thenCore=function(o,l,u){u=u||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),l&&(l=l.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:s.convert(Object.assign({},d),Promise.prototype),p=u.call(f,o,l);return s.convert(p,d.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(u){l=l.thenCore(u)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,pn.getPageSize=function(o,l,u){if(Br(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,u=d.format||u}l=l||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var m,g=0,v=0;if(h.hasOwnProperty(p))g=h[p][1]/f,v=h[p][0]/f;else try{g=u[1],v=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",v>g&&(m=v,v=g,g=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>v&&(m=v,v=g,g=m)}return{width:v,height:g,unit:l,k:f,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(mj):null;var u=new s(l);return l.worker?u:u.from(o).doCallback()}}(pn.API),pn.API.addJS=function(t){return Q9=t,this.internal.events.subscribe("postPutResources",function(){A1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(A1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),X9=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Q9+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){A1!==void 0&&X9!==void 0&&this.internal.out("/Names <</JavaScript "+A1+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],o=r.exec(s);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var f=n.internal.newObject();d.push(f);var p=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<d.length;a++)n.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+h+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,a){var s={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var s=r.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(pn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,a,s,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(f){for(var p,h=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,g={width:0,height:0,numcomponents:1},v=4;v<m;v+=2){if(v+=h,e.indexOf(f.charCodeAt(v+1))!==-1){p=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),g={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:p,numcomponents:f.charCodeAt(v+9)};break}h=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return g}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}}(pn.API),pn.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,a=CGe(t,{checkCrc:!0}),s=a.width,o=a.height,l=a.channels,u=a.palette,d=a.depth;i=u&&l===1?function(E){for(var k=E.width,O=E.height,D=E.data,M=E.palette,L=E.depth,V=!1,Q=[],Y=[],J=void 0,q=!1,ee=0,le=0;le<M.length;le++){var se=t9(M[le],4),$=se[0],G=se[1],te=se[2],oe=se[3];Q.push($,G,te),oe!=null&&(oe===0?(ee++,Y.length<1&&Y.push(le)):oe<255&&(q=!0))}if(q||ee>1){V=!0,Y=void 0;var ge=k*O;J=new Uint8Array(ge);for(var _e=new DataView(D.buffer),Ce=0;Ce<ge;Ce++){var fe=vj(_e,Ce,L),be=t9(M[fe],4)[3];J[Ce]=be}}else ee===0&&(Y=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:V?8:void 0,colorBytes:D,alphaBytes:J,needSMask:V,palette:Q,mask:Y}}(a):l===2||l===4?function(E){for(var k=E.data,O=E.width,D=E.height,M=E.channels,L=E.depth,V=M===2?"DeviceGray":"DeviceRGB",Q=M-1,Y=O*D,J=Q,q=Y*J,ee=1*Y,le=Math.ceil(q*L/8),se=Math.ceil(ee*L/8),$=new Uint8Array(le),G=new Uint8Array(se),te=new DataView(k.buffer),oe=new DataView($.buffer),ge=new DataView(G.buffer),_e=!1,Ce=0;Ce<Y;Ce++){for(var fe=Ce*M,be=0;be<J;be++)s$(oe,vj(te,fe+be,L),Ce*J+be,L);var we=vj(te,fe+J,L);we<(1<<L)-1&&(_e=!0),s$(ge,we,1*Ce,L)}return{colorSpace:V,colorsPerPixel:Q,sMaskBitsPerComponent:_e?L:void 0,colorBytes:$,alphaBytes:G,needSMask:_e}}(a):function(E){var k=E.data,O=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:O,colorsPerPixel:O==="DeviceGray"?1:3,colorBytes:k instanceof Uint16Array?function(D){for(var M=D.length,L=new Uint8Array(2*M),V=new DataView(L.buffer,L.byteOffset,L.byteLength),Q=0;Q<M;Q++)V.setUint16(2*Q,D[Q],!1);return L}(k):k,needSMask:!1}}(a);var f,p,h,m=i,g=m.colorSpace,v=m.colorsPerPixel,y=m.sMaskBitsPerComponent,b=m.colorBytes,S=m.alphaBytes,A=m.needSMask,C=m.palette,T=m.mask,j=null;return r!==pn.API.image_compression.NONE&&typeof sP=="function"?(j=function(E){var k;switch(E){case pn.API.image_compression.FAST:k=11;break;case pn.API.image_compression.MEDIUM:k=13;break;case pn.API.image_compression.SLOW:k=14;break;default:k=12}return k}(r),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(j," /Colors ").concat(v," /BitsPerComponent ").concat(d," /Columns ").concat(s),t=t$(b,Math.ceil(s*v*d/8),v,d,r),A&&(h=t$(S,Math.ceil(s*y/8),1,y,r))):(f=void 0,p=void 0,t=b,A&&(h=S)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:n,data:t,index:e,filter:f,decodeParameters:p,transparency:T,palette:C,sMask:h,predictor:j,width:s,height:o,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:g}}},function(t){t.processGIF89A=function(e,n,r,i){var a=new qGe(e),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:s,height:o},d=new yj(100).encode(u,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(pn.API),hc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},hc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Xr.log("bit decode error:"+n)}},hc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}n!==0&&(this.pos+=4-n)}},hc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},hc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},hc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=u}this.pos+=t}},hc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&n)/n*255|0,u=(s>>11)/e*255|0,d=i*this.width*4+4*a;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},hc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},hc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=s}},hc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var a=new hc(e,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},u=new yj(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(pn.API),l$.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var a=new l$(e),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},u=new yj(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(pn.API),pn.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,l=0,u=0;u<i;u+=4){var d=r[u],f=r[u+1],p=r[u+2],h=r[u+3];a[o++]=d,a[o++]=f,a[o++]=p,s[l++]=h}var m=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:m,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},pn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Up=pn.API,C1=Up.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,p=0,h=t.length,m=0,g=o[0]||l,v=[];for(n=0;n<h;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?v.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/a)||0)/1e3):(p=f&&Br(u[r])==="object"&&!isNaN(parseInt(u[r][m],10))?u[r][m]/d:0,v.push((o[r]||g)/l+p)),m=r;return v},Z9=Up.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Up.processArabic&&(t=Up.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:C1.apply(this,arguments).reduce(function(a,s){return a+s},0)},J9=function(t,e,n,r){for(var i=[],a=0,s=t.length,o=0;a!==s&&o+e[a]<n;)o+=e[a],a++;i.push(t.slice(0,a));var l=a;for(o=0;a!==s;)o+e[a]>r&&(i.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&i.push(t.slice(l,a)),i},e$=function(t,e,n){n||(n={});var r,i,a,s,o,l,u,d=[],f=[d],p=n.textIndent||0,h=0,m=0,g=t.split(" "),v=C1.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),b=[];g.map(function(A){(A=A.split(/\s*\n/)).length>1?b=b.concat(A.map(function(C,T){return(T&&C.length?`
`:"")+C})):b.push(A[0])}),g=b,l=Z9.apply(this,[y,n])}for(a=0,s=g.length;a<s;a++){var S=0;if(r=g[a],l&&r[0]==`
`&&(r=r.substr(1),S=1),p+h+(m=(i=C1.apply(this,[r,n])).reduce(function(A,C){return A+C},0))>e||S){if(m>e){for(o=J9.apply(this,[r,i,e-(p+h),e]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);m=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(A,C){return A+C},0)}else d=[r];f.push(d),p=m+l,h=v}else d.push(r),p+=h+m,h=v}return u=l?function(A,C){return(C?y:"")+A.join(" ")}:function(A){return A.join(" ")},f.map(u)},Up.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var o,l,u=[];for(o=0,l=r.length;o<l;o++)u=u.concat(e$.apply(this,[r[o],s,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},a=0;a<16;a++)r[n[a]]=e[a],i[e[a]]=n[a];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var h,m,g,v,y=["{"];for(var b in p){if(h=p[b],isNaN(parseInt(b,10))?m="'"+b+"'":(b=parseInt(b,10),m=(m=s(b).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),v="-"):(g=s(h).slice(2),v=""),g=v+g.slice(0,-1)+i[g.slice(-1)];else{if(Br(h)!=="object")throw new Error("Don't know what to do with value type "+Br(h)+".");g=o(h)}y.push(m+g)}return y.push("}"),y.join("")},l=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,v,y={},b=1,S=y,A=[],C="",T="",j=p.length-1,E=1;E<j;E+=1)(v=p[E])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(v):v=="{"?(A.push([S,g]),S={},g=void 0):v=="}"?((m=A.pop())[0][m[1]]=S,g=void 0,S=m[0]):v=="-"?b=-1:g===void 0?r.hasOwnProperty(v)?(C+=r[v],g=parseInt(C,16)*b,b=1,C=""):C+=v:r.hasOwnProperty(v)?(T+=r[v],S[g]=parseInt(T,16)*b,b=1,g=void 0,T=""):T+=v;return y},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var h=p.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=d.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(pn.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=n.charCodeAt(a);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,a=n.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(s2(o)),s.metadata=t.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])}(pn),pn.API.addSvgAsImage=function(t,e,n,r,i,a,s,o){if(isNaN(e)||isNaN(n))throw Xr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Xr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Pn.canvg?Promise.resolve(Pn.canvg):QC(()=>import("./index.es-RU37HRx9.js"),[],import.meta.url)).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){f.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,s,o)})},pn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},pn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],u=0,d=0,f=0;function p(m,g){var v,y=!1;for(v=0;v<m.length;v+=1)m[v]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=o.length;for(f=0;f<h;f+=1)n[o[f]].value=n[o[f]].defaultValue,n[o[f]].explicitSet=!1}if(Br(t)==="object"){for(i in t)if(a=t[i],p(o,i)&&a!==void 0){if(n[i].type==="boolean"&&typeof a=="boolean")n[i].value=a;else if(n[i].type==="name"&&p(n[i].valueSet,a))n[i].value=a;else if(n[i].type==="integer"&&Number.isInteger(a))n[i].value=a;else if(n[i].type==="array"){for(u=0;u<a.length;u+=1)if(r=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(r=!1);r===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,g=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?g.push("/"+m+" /"+n[m].value):g.push("/"+m+" "+n[m].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+s.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+a+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(pn.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,s){for(var o,l=s.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,p=a.length;f<p;++f){if(o=s.metadata.characterToGlyph(a.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},r=function(a){var s,o,l,u,d,f,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,p=(o=Object.keys(a).sort(function(h,m){return h-m})).length;f<p;f++)s=o[f],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(u=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",m=0;m<p.length;m++)h+=String.fromCharCode(p[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),l("endobj");var v=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var y=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Qp(o.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var b=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Qp(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+t.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+v+" 0 R"),l("/BaseFont /"+Qp(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,p="",h=0;h<f.length;h++)p+=String.fromCharCode(f[h]);var m=u();d({data:p,addLength1:!0,objectId:m}),l("endobj");var g=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var v=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Qp(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Qp(o.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,o=a.text||"",l=a.x,u=a.y,d=a.options||{},f=a.mutex||{},p=f.pdfEscape,h=f.activeFontKey,m=f.fonts,g=h,v="",y=0,b="",S=m[g].encoding;if(m[g].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:f};for(b=o,g=h,Array.isArray(o)&&(b=o[0]),y=0;y<b.length;y+=1)m[g].metadata.hasOwnProperty("cmap")&&(s=m[g].metadata.cmap.unicode.codeMap[b[y].charCodeAt(0)]),s||b[y].charCodeAt(0)<256&&m[g].metadata.hasOwnProperty("Unicode")?v+=b[y]:v+="";var A="";return parseInt(g.slice(1))<14||S==="WinAnsiEncoding"?A=p(v,g).split("").map(function(C){return C.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(A=n(v,m[g])),f.isHex=!0,{text:A,x:l,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(a){var s=a.text||"",o=[],l={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?o.push([i(Object.assign({},l,{text:s[u][0]})).text,s[u][1],s[u][2]]):o.push(i(Object.assign({},l,{text:s[u]})).text);a.text=o}else a.text=i(Object.assign({},l,{text:s})).text}])}(pn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(pn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,a,s,o,l,u,d,f=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,S=0;this.__bidiEngine__={};var A=function(D){var M=D.charCodeAt(),L=M>>8,V=g[L];return V!==void 0?f[256*V+(255&M)]:L===252||L===253?"AL":y.test(L)?"L":L===8?"R":"N"},C=function(D){for(var M,L=0;L<D.length;L++){if((M=A(D.charAt(L)))==="L")return!1;if(M==="R")return!0}return!1},T=function(D,M,L,V){var Q,Y,J,q,ee=M[V];switch(ee){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"N":case"AN":break;case"EN":b&&(ee="AN");break;case"AL":b=!0,ee="R";break;case"WS":case"BN":ee="N";break;case"CS":V<1||V+1>=M.length||(Q=L[V-1])!=="EN"&&Q!=="AN"||(Y=M[V+1])!=="EN"&&Y!=="AN"?ee="N":b&&(Y="AN"),ee=Y===Q?Y:"N";break;case"ES":ee=(Q=V>0?L[V-1]:"B")==="EN"&&V+1<M.length&&M[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&L[V-1]==="EN"){ee="EN";break}if(b){ee="N";break}for(J=V+1,q=M.length;J<q&&M[J]==="ET";)J++;ee=J<q&&M[J]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(q=M.length,J=V+1;J<q&&M[J]==="NSM";)J++;if(J<q){var le=D[V],se=le>=1425&&le<=2303||le===64286;if(Q=M[J],se&&(Q==="R"||Q==="AL")){ee="R";break}}}ee=V<1||(Q=M[V-1])==="B"?"N":L[V-1];break;case"B":b=!1,i=!0,ee=S;break;case"S":a=!0,ee="N"}return ee},j=function(D,M,L){var V=D.split("");return L&&E(V,L,{hiLevel:S}),V.reverse(),M&&M.reverse(),V.join("")},E=function(D,M,L){var V,Q,Y,J,q,ee=-1,le=D.length,se=0,$=[],G=S?h:p,te=[];for(b=!1,i=!1,a=!1,Q=0;Q<le;Q++)te[Q]=A(D[Q]);for(Y=0;Y<le;Y++){if(q=se,$[Y]=T(D,te,$,Y),V=240&(se=G[q][m[$[Y]]]),se&=15,M[Y]=J=G[se][5],V>0)if(V===16){for(Q=ee;Q<Y;Q++)M[Q]=1;ee=-1}else ee=-1;if(G[se][6])ee===-1&&(ee=Y);else if(ee>-1){for(Q=ee;Q<Y;Q++)M[Q]=J;ee=-1}te[Y]==="B"&&(M[Y]=0),L.hiLevel|=J}a&&function(oe,ge,_e){for(var Ce=0;Ce<_e;Ce++)if(oe[Ce]==="S"){ge[Ce]=S;for(var fe=Ce-1;fe>=0&&oe[fe]==="WS";fe--)ge[fe]=S}}(te,M,le)},k=function(D,M,L,V,Q){if(!(Q.hiLevel<D)){if(D===1&&S===1&&!i)return M.reverse(),void(L&&L.reverse());for(var Y,J,q,ee,le=M.length,se=0;se<le;){if(V[se]>=D){for(q=se+1;q<le&&V[q]>=D;)q++;for(ee=se,J=q-1;ee<J;ee++,J--)Y=M[ee],M[ee]=M[J],M[J]=Y,L&&(Y=L[ee],L[ee]=L[J],L[J]=Y);se=q}se++}}},O=function(D,M,L){var V=D.split(""),Q={hiLevel:S};return L||(L=[]),E(V,L,Q),function(Y,J,q){if(q.hiLevel!==0&&d)for(var ee,le=0;le<Y.length;le++)J[le]===1&&(ee=v.indexOf(Y[le]))>=0&&(Y[le]=v[ee+1])}(V,L,Q),k(2,V,M,L,Q),k(1,V,M,L,Q),V.join("")};return this.__bidiEngine__.doBidiReorder=function(D,M,L){if(function(Q,Y){if(Y)for(var J=0;J<Q.length;J++)Y[J]=J;o===void 0&&(o=C(Q)),u===void 0&&(u=C(Q))}(D,M),s||!l||u)if(s&&l&&o^u)S=o?1:0,D=j(D,M,L);else if(!s&&l&&u)S=o?1:0,D=O(D,M,L),D=j(D,M);else if(!s||o||l||u){if(s&&!l&&o^u)D=j(D,M),o?(S=0,D=O(D,M,L)):(S=1,D=O(D,M,L),D=j(D,M));else if(s&&o&&!l&&u)S=1,D=O(D,M,L),D=j(D,M);else if(!s&&!l&&o^u){var V=d;o?(S=1,D=O(D,M,L),S=0,d=!1,D=O(D,M,L),d=V):(S=0,D=O(D,M,L),D=j(D,M),S=1,d=!1,D=O(D,M,L),d=V,D=j(D,M))}}else S=0,D=O(D,M,L);else S=o?1:0,D=O(D,M,L);return D},this.__bidiEngine__.setOptions=function(D){D&&(s=D.isInputVisual,l=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(s=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?s.push([n.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):s.push([n.doBidiReorder(i[o])]);r.text=s}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(pn),pn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Af(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new oYe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new KGe(this.contents),this.head=new YGe(this),this.name=new eYe(this),this.cmap=new kJ(this),this.toUnicode={},this.hhea=new XGe(this),this.maxp=new tYe(this),this.hmtx=new nYe(this),this.post=new ZGe(this),this.os2=new QGe(this),this.loca=new sYe(this),this.glyf=new rYe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,u;for(u=[],s=0,o=(l=this.bbox).length;s<o;s++)e=l[s],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,a,s,o;for(s=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)i=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return s*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var zc,Af=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,a,s,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*a+65536*s+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),KGe=function(){var t;function e(n){var r,i,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,a,s,o,l,u,d,f,p,h,m,g;for(g in h=Object.keys(n).length,l=Math.log(2),f=16*Math.floor(Math.log(h)/l),s=Math.floor(f/l),d=16*h-f,(i=new Af).writeInt(this.scalarType),i.writeShort(h),i.writeShort(f),i.writeShort(s),i.writeShort(d),a=16*h,u=i.pos+a,o=null,m=[],n)for(p=n[g],i.writeString(g),i.writeInt(t(p)),i.writeInt(u),i.writeInt(p.length),m=m.concat(p),g==="head"&&(o=u),u+=p.length;u%4;)m.push(0),u++;return i.write(m),r=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(r),i.data},t=function(n){var r,i,a,s;for(n=PJ.call(n);n.length%4;)n.push(0);for(a=new Af(n),i=0,r=0,s=n.length;r<s;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),GGe={}.hasOwnProperty,Su=function(t,e){for(var n in e)GGe.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};zc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var YGe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Su(t,zc),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Af).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),c$=function(){function t(e,n){var r,i,a,s,o,l,u,d,f,p,h,m,g,v,y,b,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(h=e.readUInt16(),p=h/2,e.pos+=6,a=function(){var A,C;for(C=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)C.push(e.readUInt16());return C}(),e.pos+=2,g=function(){var A,C;for(C=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)C.push(e.readUInt16());return C}(),u=function(){var A,C;for(C=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)C.push(e.readUInt16());return C}(),d=function(){var A,C;for(C=[],l=A=0;0<=p?A<p:A>p;l=0<=p?++A:--A)C.push(e.readUInt16());return C}(),i=(this.length-e.pos+this.offset)/2,o=function(){var A,C;for(C=[],l=A=0;0<=i?A<i:A>i;l=0<=i?++A:--A)C.push(e.readUInt16());return C}(),l=y=0,S=a.length;y<S;l=++y)for(v=a[l],r=b=m=g[l];m<=v?b<=v:b>=v;r=m<=v?++b:--b)d[l]===0?s=r+u[l]:(s=o[d[l]/2+(r-m)-(p-l)]||0)!==0&&(s+=u[l]),this.codeMap[r]=65535&s}e.pos=f}return t.encode=function(e,n){var r,i,a,s,o,l,u,d,f,p,h,m,g,v,y,b,S,A,C,T,j,E,k,O,D,M,L,V,Q,Y,J,q,ee,le,se,$,G,te,oe,ge,_e,Ce,fe,be,we,ie;switch(V=new Af,s=Object.keys(e).sort(function(He,Me){return He-Me}),n){case"macroman":for(g=0,v=function(){var He=[];for(m=0;m<256;++m)He.push(0);return He}(),b={0:0},a={},Q=0,ee=s.length;Q<ee;Q++)b[fe=e[i=s[Q]]]==null&&(b[fe]=++g),a[i]={old:e[i],new:b[e[i]]},v[i]=b[e[i]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(v),{charMap:a,subtable:V.data,maxGlyphID:g+1};case"unicode":for(M=[],f=[],S=0,b={},r={},y=u=null,Y=0,le=s.length;Y<le;Y++)b[C=e[i=s[Y]]]==null&&(b[C]=++S),r[i]={old:C,new:b[C]},o=b[C]-i,y!=null&&o===u||(y&&f.push(y),M.push(i),u=o),y=i;for(y&&f.push(y),f.push(65535),M.push(65535),O=2*(k=M.length),E=2*Math.pow(Math.log(k)/Math.LN2,2),p=Math.log(E/2)/Math.LN2,j=2*k-E,l=[],T=[],h=[],m=J=0,se=M.length;J<se;m=++J){if(D=M[m],d=f[m],D===65535){l.push(0),T.push(0);break}if(D-(L=r[D].new)>=32768)for(l.push(0),T.push(2*(h.length+k-m)),i=q=D;D<=d?q<=d:q>=d;i=D<=d?++q:--q)h.push(r[i].new);else l.push(L-D),T.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*k+2*h.length),V.writeUInt16(0),V.writeUInt16(O),V.writeUInt16(E),V.writeUInt16(p),V.writeUInt16(j),_e=0,$=f.length;_e<$;_e++)i=f[_e],V.writeUInt16(i);for(V.writeUInt16(0),Ce=0,G=M.length;Ce<G;Ce++)i=M[Ce],V.writeUInt16(i);for(be=0,te=l.length;be<te;be++)o=l[be],V.writeUInt16(o);for(we=0,oe=T.length;we<oe;we++)A=T[we],V.writeUInt16(A);for(ie=0,ge=h.length;ie<ge;ie++)g=h[ie],V.writeUInt16(g);return{charMap:r,subtable:V.data,maxGlyphID:S+1}}},t}(),kJ=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Su(t,zc),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new c$(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=c$.encode(e,n),(i=new Af).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),XGe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Su(t,zc),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),QGe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Su(t,zc),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),ZGe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Su(t,zc),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,o,l;for(l=[],a=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;a=0<=o?++s:--s)l.push(e.readUInt32());return l}).call(this)}},t}(),JGe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},eYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Su(t,zc),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,a,s,o,l,u,d,f,p;for(e.pos=this.offset,e.readShort(),n=e.readShort(),o=e.readShort(),r=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},a=d=0,f=r.length;d<f;a=++d)i=r[a],e.pos=i.offset,u=e.readString(i.length),s=new JGe(u,i),l[p=i.nameID]==null&&(l[p]=[]),l[i.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),tYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Su(t,zc),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),nYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Su(t,zc),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,a,s,o,l;for(e.pos=this.offset,this.metrics=[],n=0,o=this.file.hhea.numberOfMetrics;0<=o?n<o:n>o;n=0<=o?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,p;for(p=[],u=0,d=(f=this.metrics).length;u<d;u++)a=f[u],p.push(a.advance);return p}).call(this),r=this.widths[this.widths.length-1],l=[],n=s=0;0<=i?s<i:s>i;n=0<=i?++s:--s)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),PJ=[].slice,rYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Su(t,zc),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,a,s,o,l,u,d,f;return e in this.cache?this.cache[e]:(a=this.file.loca,n=this.file.contents,r=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,s=(o=new Af(n.read(i))).readShort(),u=o.readShort(),f=o.readShort(),l=o.readShort(),d=o.readShort(),this.cache[e]=s===-1?new aYe(o,u,f,l,d):new iYe(o,s,u,f,l,d),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,a,s,o,l;for(s=[],a=[],o=0,l=n.length;o<l;o++)i=e[n[o]],a.push(s.length),i&&(s=s.concat(i.encode(r)));return a.push(s.length),{table:s,offsets:a}},t}(),iYe=function(){function t(e,n,r,i,a,s){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),aYe=function(){function t(e,n,r,i,a){var s,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Af(PJ.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),sYe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Su(t,zc),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,s=0;s<r.length;++s)if(r[s]=i,a<n.length&&n[a]==s){++a,r[s]=i;var o=this.offsets[s],l=this.offsets[s+1]-o;l>0&&(i+=l)}for(var u=new Array(4*r.length),d=0;d<r.length;++d)u[4*d+3]=255&r[d],u[4*d+2]=(65280&r[d])>>8,u[4*d+1]=(16711680&r[d])>>16,u[4*d]=(4278190080&r[d])>>24;return u},t}(),oYe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,a;for(n in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,a,s,o,l;for(i={},s=0,o=e.length;s<o;s++)i[a=e[s]]=this.font.glyf.glyphFor(a);for(a in n=[],i)(r=i[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in l=this.glyphsFor(n))r=l[a],i[a]=r;return i},t.prototype.encode=function(e,n){var r,i,a,s,o,l,u,d,f,p,h,m,g,v,y;for(i in r=kJ.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),h={0:0},y=r.charMap)h[(l=y[i]).old]=l.new;for(m in p=r.maxGlyphID,s)m in h||(h[m]=p++);return d=function(b){var S,A;for(S in A={},b)A[b[S]]=S;return A}(h),f=Object.keys(d).sort(function(b,S){return b-S}),g=function(){var b,S,A;for(A=[],b=0,S=f.length;b<S;b++)o=f[b],A.push(d[o]);return A}(),a=this.font.glyf.encode(s,g,h),u=this.font.loca.encode(a.offsets,g),v={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},t}();pn.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,a,s;if(Array.isArray(n))return"["+function(){var o,l,u;for(u=[],o=0,l=n.length;o<l;o++)r=n[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in a=["<<"],n)s=n[i],a.push("/"+i+" "+e.convert(s));return a.push(">>"),a.join(`
`)}return""+n},e}();function TJ(t,e,n,r,i){r=r||{};var a=1.15,s=i.internal.scaleFactor,o=i.internal.getFontSize()/s,l=i.getLineHeightFactor?i.getLineHeightFactor():a,u=o*l,d=/\r\n|\r|\n/g,f="",p=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(f=typeof t=="string"?t.split(d):t,p=f.length||1),n+=o*(2-a),r.valign==="middle"?n-=p/2*u:r.valign==="bottom"&&(n-=p*u),r.halign==="center"||r.halign==="right"){var h=o;if(r.halign==="center"&&(h*=.5),f&&p>=1){for(var m=0;m<f.length;m++)i.text(f[m],e-i.getStringUnitWidth(f[m])*h,n),n+=u;return i}e-=i.getStringUnitWidth(t)*h}return r.halign==="justify"?i.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,e,n),i}var u$={},Hm=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:u$=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,i,a;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,l=s.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var d=t.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=t.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,i,a){return this.jsPDFDocument.rect(e,n,r,i,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return u$||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),pP=function(t,e){return pP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},pP(t,e)};function DJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");pP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var IJ=function(t){DJ(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function lYe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function cYe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function E5(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(a){return n.getTextWidth(a)}).reduce(function(a,s){return Math.max(a,s)},0);return i}function OJ(t,e,n,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:a});var s=MJ(i,!1);s&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,s)}function MJ(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function P_(t,e){var n,r,i,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function RJ(t,e){var n=P_(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function uYe(t,e,n,r,i){var a={},s=1.3333333333333333,o=bj(e,function(S){return i.getComputedStyle(S).backgroundColor});o!=null&&(a.fillColor=o);var l=bj(e,function(S){return i.getComputedStyle(S).color});l!=null&&(a.textColor=l);var u=fYe(r,n);u&&(a.cellPadding=u);var d="borderTopColor",f=s*n,p=r.borderTopWidth;if(r.borderBottomWidth===p&&r.borderRightWidth===p&&r.borderLeftWidth===p){var h=(parseFloat(p)||0)/f;h&&(a.lineWidth=h)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/f,right:(parseFloat(r.borderRightWidth)||0)/f,bottom:(parseFloat(r.borderBottomWidth)||0)/f,left:(parseFloat(r.borderLeftWidth)||0)/f},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var m=bj(e,function(S){return i.getComputedStyle(S)[d]});m!=null&&(a.lineColor=m);var g=["left","right","center","justify"];g.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),g=["middle","bottom","top"],g.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var v=parseInt(r.fontSize||"");isNaN(v)||(a.fontSize=v/s);var y=dYe(r);y&&(a.fontStyle=y);var b=(r.fontFamily||"").toLowerCase();return t.indexOf(b)!==-1&&(a.font=b),a}function dYe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function bj(t,e){var n=LJ(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function LJ(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:LJ(t.parentElement,e):n}function fYe(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=n.map(function(o){return parseInt(o||"0")/r}),s=P_(a,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function FJ(t,e,n,r,i){var a,s;r===void 0&&(r=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=n.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],f=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:f,foot:p};for(var h=0;h<o.rows.length;h++){var m=o.rows[h],g=(s=(a=m==null?void 0:m.parentElement)===null||a===void 0?void 0:a.tagName)===null||s===void 0?void 0:s.toLowerCase(),v=hYe(l,u,n,m,r,i);v&&(g==="thead"?d.push(v):g==="tfoot"?p.push(v):f.push(v))}return{head:d,body:f,foot:p}}function hYe(t,e,n,r,i,a){for(var s=new IJ(r),o=0;o<r.cells.length;o++){var l=r.cells[o],u=n.getComputedStyle(l);if(i||u.display!=="none"){var d=void 0;a&&(d=uYe(t,l,e,u,n)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:pYe(l)})}}var f=n.getComputedStyle(r);if(s.length>0&&(i||f.display!=="none"))return s}function pYe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function mYe(t,e,n){for(var r=0,i=[t,e,n];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function Ku(t,e,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function zJ(t,e){var n=new Hm(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();mYe(i,r,e);var a=Ku({},i,r,e),s;typeof window<"u"&&(s=window);var o=gYe(i,r,e),l=vYe(i,r,e),u=yYe(n,a),d=xYe(n,a,s);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function gYe(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],f=n[l];r.columnStyles=Ku({},u,d,f)}else{var p=[t,e,n],h=p.map(function(m){return m[l]||{}});r[l]=Ku({},h[0],h[1],h[2])}},a=0,s=Object.keys(r);a<s.length;a++){var o=s[a];i(o)}return r}function vYe(t,e,n){for(var r=[t,e,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,s=r;a<s.length;a++){var o=s[a];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function yYe(t,e){var n,r,i,a,s,o,l,u,d,f,p,h,m=P_(e.margin,40/t.scaleFactor()),g=(n=bYe(t,e.startY))!==null&&n!==void 0?n:m.top,v;e.showFoot===!0?v="everyPage":e.showFoot===!1?v="never":v=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var y;e.showHead===!0?y="everyPage":e.showHead===!1?y="never":y=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var b=(a=e.useCss)!==null&&a!==void 0?a:!1,S=e.theme||(b?"plain":"striped"),A=!!e.horizontalPageBreak,C=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:b,theme:S,startY:g,margin:m,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:A,horizontalPageBreakRepeat:C,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function bYe(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),a=!1;if(n&&n.startPageNumber){var s=n.startPageNumber+n.pageNumber-1;a=s===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function xYe(t,e,n){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(n){var o=FJ(t,e.html,n,s,e.useCss)||{};r=o.head||r,i=o.body||r,a=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||wYe(r,i,a);return{columns:l,head:r,body:i,foot:a}}function wYe(t,e,n){var r=t[0]||e[0]||n[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var s=1,o;Array.isArray(r)?o=r[parseInt(a)]:o=r[a],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var l=0;l<s;l++){var u=void 0;Array.isArray(r)?u=i.length:u=a+(l>0?"_".concat(l):"");var d={dataKey:u};i.push(d)}}),i}var mP=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),SYe=function(t){DJ(e,t);function e(n,r,i,a,s,o){var l=t.call(this,n,r,o)||this;return l.cell=i,l.row=a,l.column=s,l.section=a.section,l}return e}(mP),_Ye=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,i,a,s){for(var o=0,l=n;o<l.length;o++){var u=l[o],d=new SYe(e,this,r,i,a,s),f=u(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],f)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new mP(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new mP(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),$J=function(){function t(e,n,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof IJ&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=n.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(i,a){var s=r.cells[a.index];if(!s)return 0;var o=n.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),u=l+o;return u>i?u:i},0)},t}(),BJ=function(){function t(e,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*n,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=P_(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),AYe=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],s=a.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(n=Math.max(n,s.styles.cellWidth))}return n},t}();function CYe(t,e){jYe(t,e);var n=[],r=0;e.columns.forEach(function(a){var s=a.getMaxCustomCellWidth(e);s?a.width=s:(a.width=a.wrappedWidth,n.push(a)),r+=a.width});var i=e.getWidth(t.pageSize().width)-r;i&&(i=gP(n,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=gP(n,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),EYe(e),kYe(e,t),NYe(e)}function jYe(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,i=RJ(t,e);e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],u=a.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,a,l,null);var f=u.padding("horizontal");u.contentWidth=E5(u.text,u.styles,t)+f;var p=E5(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/n;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],u=a.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function gP(t,e,n){for(var r=e,i=t.reduce(function(h,m){return h+m.wrappedWidth},0),a=0;a<t.length;a++){var s=t[a],o=s.wrappedWidth/i,l=r*o,u=s.width+l,d=n(s),f=u<d?d:u;e-=f-s.width,s.width=f}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(h){return e<0?h.width>n(h):!0});p.length&&(e=gP(p,e,n))}return e}function NYe(t){for(var e={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var a=r[i],s=0,o=t.columns;s<o.length;s++){var l=o[s],u=e[l.index];if(n>1)n--,delete a.cells[l.index];else if(u)u.cell.height+=a.height,n=u.cell.colSpan,delete a.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var f=r.length-i,p=d.rowSpan>f?f:d.rowSpan;e[l.index]={cell:d,left:p,row:a}}}}}function EYe(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],i=null,a=0,s=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(s-=1,s>1&&t.columns[o+1])a+=l.width,delete r.cells[l.index];else if(i){var u=i;delete r.cells[l.index],i=null,u.width=l.width+a}else{var u=r.cells[l.index];if(!u)continue;if(s=u.colSpan,a=0,u.colSpan>1){i=u,a+=l.width;continue}u.width=l.width+a}}}function kYe(t,e){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var a=i[r],s=0,o=t.columns;s<o.length;s++){var l=o[s],u=a.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=d$(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=d$(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<p*u.rowSpan?n={height:p,count:u.rowSpan}:n&&n.count>0&&n.height>p&&(p=n.height),p>a.height&&(a.height=p)}}n.count--}}function d$(t,e,n,r,i){return t.map(function(a){return PYe(a,e,n,r,i)})}function PYe(t,e,n,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=E5(t,n,r))return t;for(;e<E5(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function VJ(t,e){var n=new Hm(t),r=TYe(e,n.scaleFactor()),i=new _Ye(e,r);return CYe(n,i),n.applyStyles(n.userStyles),i}function TYe(t,e){var n=t.content,r=IYe(n.columns);if(n.head.length===0){var i=f$(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=f$(r,"foot");i&&n.foot.push(i)}var a=t.settings.theme,s=t.styles;return{columns:r,head:xj("head",n.head,r,s,a,e),body:xj("body",n.body,r,s,a,e),foot:xj("foot",n.foot,r,s,a,e)}}function xj(t,e,n,r,i,a){var s={},o=e.map(function(l,u){for(var d=0,f={},p=0,h=0,m=0,g=n;m<g.length;m++){var v=g[m];if(s[v.index]==null||s[v.index].left===0)if(h===0){var y=void 0;Array.isArray(l)?y=l[v.index-p-d]:y=l[v.dataKey];var b={};typeof y=="object"&&!Array.isArray(y)&&(b=(y==null?void 0:y.styles)||{});var S=OYe(t,v,u,i,r,a,b),A=new BJ(y,S,t);f[v.dataKey]=A,f[v.index]=A,h=A.colSpan-1,s[v.index]={left:A.rowSpan-1,times:h}}else h--,p++;else s[v.index].left--,h=s[v.index].times,d++}return new $J(l,u,t,f)});return o}function f$(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var i=DYe(e,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function DYe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function IYe(t){return t.map(function(e,n){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:n:i=n,new AYe(i,e,n)})}function OYe(t,e,n,r,i,a,s){var o=cYe(r),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var u=Ku({},o.table,o[t],i.styles,l),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},f=t==="body"?d:{},p=t==="body"&&n%2===0?Ku({},o.alternateRow,i.alternateRowStyles):{},h=lYe(a),m=Ku({},h,u,p,f);return Ku(m,s)}function MYe(t,e,n){var r;n===void 0&&(n={});var i=RJ(t,e),a=new Map,s=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var h=e.columns.find(function(m){return m.dataKey===p||m.index===p});h&&!a.has(h.index)&&(a.set(h.index,!0),s.push(h.index),o.push(e.columns[h.index]),i-=h.wrappedWidth)});for(var u=!0,d=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(a.has(d)){d++;continue}var f=e.columns[d].wrappedWidth;if(u||i>=f)u=!1,s.push(d),o.push(e.columns[d]),i-=f;else break;d++}return{colIndexes:s,columns:o,lastIndex:d-1}}function RYe(t,e){for(var n=[],r=0;r<e.columns.length;r++){var i=MYe(t,e,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function UJ(t,e){var n=e.settings,r=n.startY,i=n.margin,a={x:i.left,y:r},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+i.bottom+s;if(n.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(p,h){return p+h.height},0);o+=u}var d=new Hm(t);(n.pageBreak==="always"||n.startY!=null&&o>d.pageSize().height)&&(WJ(d),a.y=i.top),e.callWillDrawPageHooks(d,a);var f=Ku({},a);e.startPageNumber=d.pageNumber(),n.horizontalPageBreak?LYe(d,e,f,a):(d.applyStyles(d.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(p){return fd(d,e,p,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(p,h){var m=h===e.body.length-1;k5(d,e,p,m,f,a,e.columns)}),d.applyStyles(d.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(p){return fd(d,e,p,a,e.columns)})),OJ(d,e,f,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function LYe(t,e,n,r){var i=RYe(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?H0(t,e,n,r,u.columns,!0):h$(t,e,r,u.columns),FYe(t,e,n,r,u.columns),wj(t,e,r,u.columns)});else for(var s=-1,o=i[0],l=function(){var u=s;if(o){t.applyStyles(t.userStyles);var d=o.columns;s>=0?H0(t,e,n,r,d,!0):h$(t,e,r,d),u=p$(t,e,s+1,r,d),wj(t,e,r,d)}var f=u-s;i.slice(1).forEach(function(p){t.applyStyles(t.userStyles),H0(t,e,n,r,p.columns,!0),p$(t,e,s+1,r,p.columns,f),wj(t,e,r,p.columns)}),s=u};s<e.body.length-1;)l()}function h$(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return fd(t,e,a,n,r)})}function FYe(t,e,n,r,i){t.applyStyles(t.userStyles),e.body.forEach(function(a,s){var o=s===e.body.length-1;k5(t,e,a,o,n,r,i)})}function p$(t,e,n,r,i,a){t.applyStyles(t.userStyles),a=a??e.body.length;var s=Math.min(n+a,e.body.length),o=-1;return e.body.slice(n,s).forEach(function(l,u){var d=n+u===e.body.length-1,f=HJ(t,e,d,r);l.canEntireRowFit(f,i)&&(fd(t,e,l,r,i),o=n+u)}),o}function wj(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return fd(t,e,a,n,r)})}function zYe(t,e,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function $Ye(t,e,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var a=0,s=0,o=n.columns;s<o.length;s++){var l=o[s],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new BJ(u.raw,u.styles,u.section);d=Ku(d,u),d.text=[];var f=zYe(u,e,r);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var p=r.scaleFactor(),h=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,h),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,h),d.contentHeight>a&&(a=d.contentHeight),i[l.index]=d}}var m=new $J(t.raw,-1,t.section,i,!0);m.height=a;for(var g=0,v=n.columns;g<v.length;g++){var l=v[g],d=m.cells[l.index];d&&(d.height=m.height);var u=t.cells[l.index];u&&(u.height=t.height)}return m}function BYe(t,e,n,r){var i=t.pageSize().height,a=r.settings.margin,s=a.top+a.bottom,o=i-s;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),u=l<n;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(r.columns),f=e.getMaxCellHeight(r.columns)>o;return f?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function k5(t,e,n,r,i,a,s){var o=HJ(t,e,r,a);if(n.canEntireRowFit(o,s))fd(t,e,n,a,s);else if(BYe(t,n,o,e)){var l=$Ye(n,o,e,t);fd(t,e,n,a,s),H0(t,e,i,a,s),k5(t,e,l,r,i,a,s)}else H0(t,e,i,a,s),k5(t,e,n,r,i,a,s)}function fd(t,e,n,r,i){r.x=e.settings.margin.left;for(var a=0,s=i;a<s.length;a++){var o=s[a],l=n.cells[o.index];if(!l){r.x+=o.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,n,o,r);if(u===!1){r.x+=o.width;continue}VYe(t,l,r);var d=l.getTextPos();TJ(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,o,r),r.x+=o.width}r.y+=n.height}function VYe(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=MJ(r.lineWidth,r.fillColor);i&&t.rect(e.x,n.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),UYe(t,e,n,r.lineWidth))}function UYe(t,e,n,r){var i,a,s,o;r.top&&(i=n.x,a=n.y,s=n.x+e.width,o=n.y,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,a,s,o)),r.bottom&&(i=n.x,a=n.y+e.height,s=n.x+e.width,o=n.y+e.height,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,a,s,o)),r.left&&(i=n.x,a=n.y,s=n.x,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,i,a,s,o)),r.right&&(i=n.x+e.width,a=n.y,s=n.x+e.width,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,i,a,s,o));function l(u,d,f,p,h){t.getDocument().setLineWidth(u),t.getDocument().line(d,f,p,h,"S")}}function HJ(t,e,n,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-i}function H0(t,e,n,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return fd(t,e,o,r,i)}),e.callEndPageHooks(t,r);var s=e.settings.margin;OJ(t,e,n,r),WJ(t),e.pageNumber++,r.x=s.left,r.y=s.top,n.y=s.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return fd(t,e,o,r,i)}),t.applyStyles(t.userStyles))}function WJ(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function HYe(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=zJ(this,r),a=VJ(this,i);return UJ(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,i){TJ(e,n,r,i,this)},t.API.autoTableSetDefaults=function(e){return Hm.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Hm.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Hm(this),a=FJ(i,e,window,n,!1),s=a.head,o=a.body,l=((r=s[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var Sj;function qJ(t,e){var n=zJ(t,e),r=VJ(t,n);UJ(t,r)}try{if(typeof window<"u"&&window){var m$=window,g$=m$.jsPDF||((Sj=m$.jspdf)===null||Sj===void 0?void 0:Sj.jsPDF);g$&&HYe(g$)}}catch(t){console.error("Could not apply autoTable plugin",t)}const v$=(t,e,n,r)=>(t.setFontSize(14),t.setFont("helvetica","bold"),t.text(e,14,r),qJ(t,{startY:r+6,head:[["Indicador (KPI)","Valor (Real)"]],body:n,theme:"striped",headStyles:{fillColor:[41,128,185]},styles:{fontSize:10}}),t.lastAutoTable.finalY+10),WYe=(t,e,n,r)=>{if(!n||!r){alert("No hay datos de analítica para exportar.");return}const i=new pn({orientation:"portrait",unit:"mm",format:"a4"});i.setFontSize(18),i.setFont("helvetica","bold"),i.text("Reporte Detallado de Simulación",105,20,{align:"center"}),i.setFontSize(12),i.setFont("helvetica","normal"),i.text(`Generado: ${new Date().toLocaleString()}`,105,26,{align:"center"});const a=[["Tasa Natalidad (Anual.)",`${Wt(n.tasaNatalidadReal,1)} %`],["Tasa Prolificidad",`${Wt(n.tasaProlificidadReal,1)} %`],["Tasa Reemplazo (Anual.)",`${Wt(n.tasaReemplazoReal,1)} %`],["Tasa Descarte (Anual.)",`${Wt(n.tasaDescarteReal,1)} %`],["% Mort. Crías (0-3m)",`${Wt(n.mortalidadCriasReal,1)} %`],["% Mort. Levante (Anual.)",`${Wt(n.mortalidadLevanteReal,1)} %`],["% Mort. Cabras (Anual.)",`${Wt(n.mortalidadCabrasReal,1)} %`],["% Elim. Crías M (0-3m)",`${Wt(n.tasaEliminacionCriasMReal,1)} %`]];let s=v$(i,"📊 KPIs de Dinámica del Rebaño",a,40);const o=[["Total Litros (Horizonte)",`${Wt(r.totalLitrosHorizonte)} L`],["Litros / Vientre / Año",`${Wt(r.litrosPorVientrePorAnio)} L/Vientre`],["Total Días-Lactancia",`${Wt(r.totalDiasLactancia)} Días`],["Litros / Día-Lactancia",`${Wt(r.litrosPorDiaLactancia,2)} L/Día`]];v$(i,"📈 KPIs de Eficiencia Lechera",o,s),i.addPage("a4","landscape"),i.setFontSize(18),i.setFont("helvetica","bold"),i.text("📋 Tabla Detallada de Flujos y Stock",14,20);const l=[[{content:"Periodo",rowSpan:2,styles:{halign:"center",valign:"middle"}},{content:"Población",colSpan:3,styles:{halign:"center"}},{content:"Producción",colSpan:3,styles:{halign:"center"}},{content:"Flujos: Entradas",colSpan:3,styles:{halign:"center"}},{content:"Flujos: Salidas (Muertes)",colSpan:4,styles:{halign:"center"}},{content:"Flujos: Salidas (Ventas)",colSpan:2,styles:{halign:"center"}},{content:"Flujos: Internos (Promociones H)",colSpan:4,styles:{halign:"center"}},{content:"Desglose Stock Final",colSpan:7,styles:{halign:"center"}}],["Inicio","Final","Cambio","Litros","Prom. Hembras","Ingresos Leche","Nacim. H","Nacim. M","Compras","Muertes C.H","Muertes C.M","Muertes Lev.","Muertes Adu.","Ventas C.M","Ventas Desc.","C→LT","LT→LM","LM→LTD","LTD→C","Fin C.H","Fin C.M","Fin LT","Fin LM","Fin LTD","Fin Cabras","Fin Padres"]],u=[];for(const d of t){const f=d.muertesLevanteTemprano+d.muertesLevanteMedio+d.muertesLevanteTardio,p=d.muertesCabras+d.muertesPadres;u.push([{content:d.periodLabel,styles:{fontStyle:"bold",fillColor:"#f0f0f0",textColor:"#000"}},Wt(d.startTotal),Wt(d.endTotal),Wt(d.netChange),Wt(d.litrosLeche,0),Wt(d.kpiProductivasCount,0),nP(d.ingresosTotales,"$",0),Wt(d.nacimientosH),Wt(d.nacimientosM),Wt(d.comprasVientres),Wt(d.muertesCriaH),Wt(d.muertesCriaM),Wt(f),Wt(p),Wt(d.ventasCabritos),Wt(d.ventasDescartes),Wt(d.promocionCriaH),Wt(d.promocionLevanteTemprano),Wt(d.promocionLevanteMedio),Wt(d.promocionLevanteTardio),Wt(d.endCriaH),Wt(d.endCriaM),Wt(d.endLevanteTemprano),Wt(d.endLevanteMedio),Wt(d.endLevanteTardio),Wt(d.endCabras),Wt(d.endPadres)]);const h=e.filter(m=>m.year===d.year);for(const m of h){const g=m.muertesLevanteTemprano+m.muertesLevanteMedio+m.muertesLevanteTardio,v=m.muertesCabras+m.muertesPadres;u.push([{content:`  ${m.periodLabel}`,styles:{fontStyle:"normal"}},Wt(m.startTotal),Wt(m.endTotal),Wt(m.netChange),Wt(m.litrosLeche,0),Wt(m.kpiProductivasCount,0),nP(m.ingresosTotales,"$",0),Wt(m.nacimientosH),Wt(m.nacimientosM),Wt(m.comprasVientres),Wt(m.muertesCriaH),Wt(m.muertesCriaM),Wt(g),Wt(v),Wt(m.ventasCabritos),Wt(m.ventasDescartes),Wt(m.promocionCriaH),Wt(m.promocionLevanteTemprano),Wt(m.promocionLevanteMedio),Wt(m.promocionLevanteTardio),Wt(m.endCriaH),Wt(m.endCriaM),Wt(m.endLevanteTemprano),Wt(m.endLevanteMedio),Wt(m.endLevanteTardio),Wt(m.endCabras),Wt(m.endPadres)])}}qJ(i,{startY:30,head:l,body:u,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:[255,255,255],fontSize:8,halign:"center",valign:"middle"},styles:{fontSize:8,cellPadding:1,overflow:"linebreak",halign:"right"},columnStyles:{0:{halign:"left",minCellWidth:25}},didDrawPage:d=>{i.setFontSize(10),i.text(`Página ${d.pageNumber}`,d.settings.margin.left,i.internal.pageSize.height-10)}}),i.save(`Reporte_Simulacion_GanaderoOS_${new Date().toISOString().split("T")[0]}.pdf`)},zs=({label:t,value:e,unit:n,icon:r,color:i="text-sky-500",tooltip:a})=>c.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-white/10 flex items-start gap-4",title:a,children:[c.jsx("div",{className:`p-2 rounded-lg bg-gray-700 ${i}`,children:c.jsx(r,{size:20})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider",title:a,children:t}),c.jsxs("p",{className:"text-xl font-bold text-white",children:[e," ",c.jsx("span",{className:"text-sm font-normal text-gray-300",children:n})]})]})]}),qYe=({options:t,value:e,onChange:n})=>c.jsx("div",{className:"flex rounded-lg bg-gray-900 border border-brand-border p-0.5",children:t.map(r=>c.jsx("button",{onClick:()=>n(r.value),className:`rounded-md px-3 py-1.5 text-sm font-medium transition-colors ${e===r.value?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:r.label},String(r.value)))}),KYe=({active:t,payload:e})=>{if(t&&e&&e.length){const n=e[0].payload,r=n.litrosLeche,i=n.hembrasProduccion,a=i>0?r/i/30.44:0;return c.jsxs("div",{className:"bg-gray-900/80 p-3 rounded-lg border border-white/10 shadow-lg backdrop-blur-md animate-fade-in",children:[c.jsx("p",{className:"text-sm font-bold text-white",children:n.periodLabel}),c.jsx("hr",{className:"border-white/10 my-1.5"}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex justify-between items-center gap-4",children:[c.jsx("span",{className:"text-xs text-sky-400",children:"Litros (Mes):"}),c.jsxs("span",{className:"text-xs font-mono text-white",children:[Wt(r,0)," L"]})]}),c.jsxs("div",{className:"flex justify-between items-center gap-4",children:[c.jsx("span",{className:"text-xs text-gray-300",children:"Animales:"}),c.jsx("span",{className:"text-xs font-mono text-white",children:Wt(i,0)})]}),c.jsxs("div",{className:"flex justify-between items-center gap-4",children:[c.jsx("span",{className:"text-xs text-gray-300",children:"Prom. (L/día):"}),c.jsxs("span",{className:"text-xs font-mono text-white",children:[a.toFixed(2)," L/día"]})]})]})]})}return null},GYe=({data:t,monthlyData:e})=>{const n=I.useMemo(()=>{if(!t||!e)return[];const r=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return e.filter(i=>i.year===t.year).map((i,a)=>({...i,name:r[a%12],Litros:Math.round(i.litrosLeche)}))},[t,e]);return t?c.jsx("div",{className:"h-64 w-full bg-gray-800/50 p-4 rounded-lg border border-white/10",children:c.jsx(ca,{width:"100%",height:"100%",children:c.jsxs(gl,{data:n,margin:{top:5,right:0,left:0,bottom:5},children:[c.jsx(Rf,{strokeDasharray:"3 3",strokeOpacity:.1}),c.jsx(Di,{dataKey:"name",stroke:"#9ca3af",fontSize:12}),c.jsx(Ki,{stroke:"#9ca3af",fontSize:12,allowDecimals:!1,tickFormatter:r=>Wt(r,0)}),c.jsx(Or,{cursor:{fill:"rgba(56, 189, 248, 0.1)"},content:c.jsx(KYe,{})}),c.jsx($a,{dataKey:"Litros",fill:"#0ea5e9",radius:[4,4,0,0]})," ",c.jsx(Wb,{y:t.avgMonthly,label:{value:`Prom: ${Wt(t.avgMonthly,0)} L`,position:"insideTopRight",fill:"#f3f4f6",fontSize:12},stroke:"#f3f4f6",strokeDasharray:"4 4",strokeOpacity:.8})]})})}):c.jsx("div",{className:"text-gray-500",children:"Selecciona un año."})},YYe=({data:t})=>{if(!t)return null;const e=t.cv;let n="text-green-500";return e>15&&(n="text-yellow-500"),e>40&&(n="text-red-500"),c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(zs,{label:"Coef. de Variación (CV)",value:e.toFixed(1),unit:"%",icon:Tb,color:n,tooltip:`Coeficiente de Variación (CV):
Mide la estabilidad de la producción.
< 15% = Muy Lineal
> 40% = Muy Estacional`}),c.jsx(zs,{label:"Promedio Mensual",value:Wt(t.avgMonthly,0),unit:"Litros",icon:md}),c.jsx(zs,{label:"Mes Pico",value:Wt(t.peakMonthValue,0),unit:`(${t.peakMonthLabel})`,icon:ba,color:"text-green-500"}),c.jsx(zs,{label:"Mes Valle",value:Wt(t.valleyMonthValue,0),unit:`(${t.valleyMonthLabel})`,icon:HN,color:"text-red-500"})]})},XYe=({data:t})=>t?c.jsxs(c.Fragment,{children:[c.jsx("h3",{className:"text-base font-semibold text-white mt-6 mb-3",children:"Eficiencia Lechera (Horizonte Total)"}),c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(zs,{label:"Total Litros (Horizonte)",value:Wt(t.totalLitrosHorizonte,0),unit:"Litros",icon:ev,color:"text-sky-500"}),c.jsx(zs,{label:"Litros / Vientre / Año",value:Wt(t.litrosPorVientrePorAnio,0),unit:"L/Vientre",icon:Gl,color:"text-sky-500"}),c.jsx(zs,{label:"Total Días-Lactancia",value:Wt(t.totalDiasLactancia,0),unit:"Días",icon:RH}),c.jsx(zs,{label:"Litros / Día-Lactancia",value:t.litrosPorDiaLactancia.toFixed(2),unit:"L/Día",icon:Ace})]})]}):null,QYe=({data:t})=>t?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-white mb-3",children:"Tasas de Dinámica (Promedio Anualizado)"}),c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(zs,{label:"Tasa Natalidad",value:t.tasaNatalidadReal.toFixed(1),unit:"%",icon:pu,color:"text-green-500",tooltip:"Nacimientos / (Vientres Prom. * Años) * 100"}),c.jsx(zs,{label:"Tasa Prolificidad",value:t.tasaProlificidadReal.toFixed(1),unit:"%",icon:Dce,color:"text-green-500",tooltip:"Nacimientos Totales / Partos Totales * 100"}),c.jsx(zs,{label:"Tasa Reemplazo",value:t.tasaReemplazoReal.toFixed(1),unit:"%",icon:mce,color:"text-green-500",tooltip:"Promociones (LTD -> Cabras) / (Cabras Prom. * Años) * 100"}),c.jsx(zs,{label:"Tasa Descarte",value:t.tasaDescarteReal.toFixed(1),unit:"%",icon:WN,color:"text-red-500",tooltip:"Ventas Descarte / (Cabras Prom. * Años) * 100"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-white mb-3",children:"Tasas de Bajas (Reales)"}),c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(zs,{label:"% Mort. Crías (0-3m)",value:t.mortalidadCriasReal.toFixed(1),unit:"%",icon:q1,color:"text-red-500",tooltip:"Muertes Crías / (Nacidos + Stock Inicial) * 100"}),c.jsx(zs,{label:"% Mort. Levante (Anual.)",value:t.mortalidadLevanteReal.toFixed(1),unit:"%",icon:q1,color:"text-red-500",tooltip:"Muertes Levante / (Levante Prom. * Años) * 100"}),c.jsx(zs,{label:"% Mort. Cabras (Anual.)",value:t.mortalidadCabrasReal.toFixed(1),unit:"%",icon:q1,color:"text-red-500",tooltip:"Muertes Cabras / (Cabras Prom. * Años) * 100"}),c.jsx(zs,{label:"% Elim. Crías M (0-3m)",value:t.tasaEliminacionCriasMReal.toFixed(1),unit:"%",icon:WN,color:"text-yellow-500",tooltip:"Ventas Crías M / (Nacidos M - Muertes M) * 100"})]})]})]}):null,ZYe=({annualData:t,semestralData:e})=>{const n=[{name:"Población",span:3},{name:"Producción",span:3},{name:"Flujos: Entradas",span:3},{name:"Flujos: Salidas (Muertes)",span:4},{name:"Flujos: Salidas (Ventas)",span:2},{name:"Flujos: Internos (Promociones H)",span:4},{name:"Desglose Stock Final",span:7}],r=[{key:"startTotal",label:"Inicio"},{key:"endTotal",label:"Final"},{key:"netChange",label:"Cambio"},{key:"litrosLeche",label:"Litros Totales",format:a=>Wt(a,0)},{key:"kpiProductivasCount",label:"Vientres (Final)",tooltip:"Vientres Productivos (>12m) al final del período."},{key:"ingresosLeche",label:"Ingresos Leche",format:a=>nP(a,"$",0)},{key:"nacimientosH",label:"Nacim. H"},{key:"nacimientosM",label:"Nacim. M"},{key:"comprasVientres",label:"Compras Vientres"},{key:"muertesCriaH",label:"Muertes Crías H"},{key:"muertesCriaM",label:"Muertes Crías M"},{key:"muertesLevante",label:"Muertes Levante (Total)"},{key:"muertesAdultas",label:"Muertes Adultas (Total)"},{key:"ventasCabritos",label:"Ventas Crías M"},{key:"ventasDescartes",label:"Ventas Descartes"},{key:"promocionCriaH",label:"Cría → LT"},{key:"promocionLevanteTemprano",label:"LT → LM"},{key:"promocionLevanteMedio",label:"LM → LTD"},{key:"promocionLevanteTardio",label:"LTD → Cabras"},{key:"endCriaH",label:"Final Cría H"},{key:"endCriaM",label:"Final Cría M"},{key:"endLevanteTemprano",label:"Final LT"},{key:"endLevanteMedio",label:"Final LM"},{key:"endLevanteTardio",label:"Final LTD"},{key:"endCabras",label:"Final Cabras"},{key:"endPadres",label:"Final Padres"}],i=(a,s=!1)=>{const o=a.muertesLevanteTemprano+a.muertesLevanteMedio+a.muertesLevanteTardio,l=a.muertesCabras+a.muertesPadres;return c.jsxs("tr",{className:s?"bg-gray-800/60":"bg-gray-700/50",children:[c.jsx("td",{className:`sticky left-0 z-10 p-2 text-sm whitespace-nowrap ${s?"bg-gray-800/60 pl-6":"bg-gray-700/50 font-semibold text-white"}`,children:a.periodLabel}),r.map(u=>{let d;u.key==="muertesLevante"?d=o:u.key==="muertesAdultas"?d=l:d=a[u.key]??0;const f=u.format||(p=>Wt(p,0));return c.jsx("td",{className:"p-2 text-sm text-right whitespace-nowrap text-gray-200 font-mono",title:u.tooltip,children:f(d)},u.key)})]},a.periodLabel)};return c.jsx("div",{className:"overflow-x-auto h-full",children:c.jsxs("table",{className:"min-w-full border-separate border-spacing-0",children:[c.jsxs("thead",{className:"sticky top-0 z-20",children:[c.jsxs("tr",{className:"bg-gray-900/80 backdrop-blur-lg",children:[c.jsx("th",{className:"sticky left-0 z-30 p-2 text-xs font-semibold text-left uppercase text-white bg-gray-900/80 backdrop-blur-lg",children:"Periodo"}),n.map((a,s)=>c.jsx("th",{colSpan:a.span,className:"p-2 text-xs font-semibold text-center uppercase text-white border-b border-l border-white/10",children:a.name},s))]}),c.jsxs("tr",{className:"bg-gray-900/80 backdrop-blur-lg",children:[c.jsx("th",{className:"sticky left-0 z-30 p-2 text-xs font-semibold text-left uppercase text-white bg-gray-900/80 backdrop-blur-lg"}),r.map(a=>c.jsx("th",{className:"p-2 text-xs font-semibold text-right uppercase text-gray-300 border-b border-l border-white/10 whitespace-nowrap",title:a.tooltip,children:a.label},a.key))]})]}),c.jsx("tbody",{className:"bg-gray-800",children:t.map(a=>{const s=e.filter(o=>o.year===a.year);return c.jsxs(xe.Fragment,{children:[i(a,!1),s.map(o=>i(o,!0))]},a.year)})})]})})},_j=({label:t,icon:e,isActive:n,onClick:r})=>c.jsxs("button",{onClick:r,className:`flex-1 flex flex-col items-center justify-center p-3 text-xs font-medium transition-colors border-b-2 ${n?"text-sky-500 border-sky-500":"text-gray-500 border-transparent hover:text-gray-300"}`,children:[c.jsx(e,{size:18,className:"mb-1"}),t]}),JYe=({isOpen:t,onClose:e,monthlyData:n,semestralData:r,annualData:i})=>{const[a,s]=I.useState("produccion"),{isLoading:o,milkLinearityKpis:l,herdEfficiencyKpis:u,herdDynamicsKpis:d}=vqe(n,i),[f,p]=I.useState(()=>{var y;return((y=i[0])==null?void 0:y.year)??new Date().getFullYear()}),h=I.useMemo(()=>i.map(y=>({label:`Año ${y.year}`,value:y.year})),[i]);xe.useEffect(()=>{i.length>0&&!i.find(y=>y.year===f)&&p(i[0].year)},[i,f]);const m=I.useMemo(()=>l.find(y=>y.year===f),[l,f]),g=()=>{if(o||!d||!u){alert("Los datos de analítica aún no están listos.");return}WYe(i,r,d,u)};if(!t)return null;const v=()=>{if(o)return c.jsx("div",{className:"p-10 text-center text-gray-400",children:"Calculando analíticas..."});switch(a){case"produccion":return c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-lg font-semibold text-white",children:"📈 Análisis de Linealidad de Leche"}),c.jsx(qYe,{options:h,value:f,onChange:y=>p(y)})]}),c.jsx(GYe,{data:m,monthlyData:n}),c.jsx(YYe,{data:m}),c.jsx(XYe,{data:u})]});case"dinamica":return c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold text-white",children:"📊 KPIs de Dinámica del Rebaño"}),c.jsx(QYe,{data:d})]});case"tabla":return c.jsx("div",{className:"w-full h-full overflow-hidden",children:c.jsx(ZYe,{annualData:i,semestralData:r})});default:return null}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",onClick:e,children:c.jsxs("div",{className:"relative flex flex-col w-full h-full max-w-4xl max-h-[90vh] bg-gray-900 border border-brand-border rounded-2xl shadow-2xl overflow-hidden",onClick:y=>y.stopPropagation(),children:[c.jsxs("header",{className:"relative flex items-center justify-between p-4 border-b border-brand-border flex-shrink-0 pr-24",children:[" ",c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"p-2 rounded-lg bg-sky-600/20 text-sky-400",children:c.jsx(lT,{size:20})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-base font-bold text-white",children:"Reporte Detallado de Simulación"}),c.jsx("p",{className:"text-xs text-gray-400",children:"Análisis de eficiencia y producción del rebaño"})]})]}),c.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1",children:[c.jsx("button",{onClick:g,disabled:o,title:"Exportar PDF",className:"p-2 text-gray-500 rounded-full transition-colors hover:bg-gray-800 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:c.jsx(Oce,{size:20})}),c.jsx("button",{onClick:e,title:"Cerrar",className:"p-2 text-gray-500 rounded-full transition-colors hover:bg-gray-800 hover:text-white",children:c.jsx(Xl,{size:20})})]})]}),c.jsxs("nav",{className:"flex items-stretch border-b border-brand-border flex-shrink-0",children:[c.jsx(_j,{label:"Producción de Leche",icon:OH,isActive:a==="produccion",onClick:()=>s("produccion")}),c.jsx(_j,{label:"Dinámica del Rebaño",icon:IH,isActive:a==="dinamica",onClick:()=>s("dinamica")}),c.jsx(_j,{label:"Tabla Detallada",icon:Gce,isActive:a==="tabla",onClick:()=>s("tabla")})]}),c.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-900/50",children:v()})]})})},Wn=t=>Math.round(t||0),eXe=({data:t})=>{const[e,n]=I.useState(!1),r=A=>(A||0).toFixed(1),i=Wn(t.startCabras)+Wn(t.startLevanteTardio),a=Wn(t.endCabras)+Wn(t.endLevanteTardio),s=Wn(t.startLevanteTemprano)+Wn(t.startLevanteMedio)+Wn(t.startCriaH),o=Wn(t.endLevanteTemprano)+Wn(t.endLevanteMedio)+Wn(t.endCriaH),l=i+s,u=a+o,d=a-i,f=i>0?d/i*100:0,p=d>=0,h=p?ba:HN,m=p?"text-green-500":"text-red-500",g=u-l,v=l>0?g/l*100:0,y=g>=0,b=y?ba:HN,S=y?"text-green-500":"text-red-500";return c.jsxs("div",{className:"w-full overflow-hidden rounded-xl border border-white/10 bg-gray-800/50 shadow-md backdrop-blur-lg",children:[c.jsx("button",{onClick:()=>n(!e),className:"w-full p-5 text-left focus:outline-none focus:ring-2 focus:ring-sky-500 rounded-t-xl",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("p",{className:"text-lg font-bold text-white",children:t.periodLabel}),c.jsxs("div",{className:"flex items-baseline gap-3",children:[c.jsx("p",{className:"text-4xl font-bold leading-none text-white",children:a}),c.jsxs("p",{className:"text-2xl font-medium text-gray-400",children:["(Inicio: ",i,")"]})]}),c.jsx("p",{className:"text-sm text-gray-400",children:"Vientres Productivos (Final vs. Inicial)"}),c.jsxs("p",{className:"text-sm text-gray-400 pt-1",children:["Hembras Totales: ",c.jsx("span",{className:"font-semibold text-white",children:u})," (Inicio: ",l,")"]})]}),c.jsxs("div",{className:"flex-1 text-right space-y-2",children:[c.jsxs("div",{className:`text-right ${m}`,children:[c.jsxs("div",{className:"flex items-center justify-end gap-1",children:[c.jsx(h,{size:"1.2em"}),c.jsxs("p",{className:"text-xl font-bold",children:[r(f),"%"]})]}),c.jsxs("p",{className:"text-lg font-medium",children:[p?"+":"",d," Vientres"]})]}),c.jsxs("div",{className:`text-right text-xs ${S} opacity-70`,children:[c.jsxs("div",{className:"flex items-center justify-end gap-1",children:[c.jsx(b,{size:"1em"}),c.jsxs("p",{className:"font-semibold",children:[r(v),"%"]})]}),c.jsxs("p",{className:"font-medium",children:[y?"+":"",g," Hembras Totales"]})]})]}),c.jsxs("div",{className:"ml-4 text-gray-500 pt-2",children:[" ",e?c.jsx(_ce,{size:20}):c.jsx(wy,{size:20})," "]})]})}),e&&c.jsx("div",{className:"border-t border-white/10 px-5 pb-5 pt-4 animate-fade-in",children:c.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[c.jsxs("div",{className:"space-y-0.5 md:pr-4 md:border-r md:border-white/10",children:[c.jsx("p",{className:"text-xs font-semibold uppercase text-gray-400 mb-2",children:"Desglose Final (Periodo)"}),c.jsxs("p",{className:"text-sm text-gray-200",children:[c.jsx("span",{className:"font-bold text-white",children:Wn(t.endCabras)})," Cabras (",">","18m)"]}),c.jsxs("p",{className:"text-sm text-gray-200",children:[c.jsx("span",{className:"font-bold text-white",children:Wn(t.endLevanteTardio)})," L. Tardío (12-18m)"]}),c.jsxs("p",{className:"text-sm text-gray-200",children:[c.jsx("span",{className:"font-bold text-white",children:Wn(t.endLevanteMedio)})," L. Medio (6-12m)"]}),c.jsxs("p",{className:"text-sm text-gray-200",children:[c.jsx("span",{className:"font-bold text-white",children:Wn(t.endLevanteTemprano)})," L. Temprano (3-6m)"]}),c.jsxs("p",{className:"text-sm text-gray-200",children:[c.jsx("span",{className:"font-bold text-white",children:Wn(t.endCriaH)})," Crías H (0-3m)"]}),c.jsxs("p",{className:"text-sm text-gray-200",children:[c.jsx("span",{className:"font-bold text-white",children:Wn(t.endCriaM)})," Crías M (0-3m)"]}),c.jsxs("p",{className:"text-sm text-gray-200",children:[c.jsx("span",{className:"font-bold text-white",children:Wn(t.endPadres)})," Padres (",">","12m)"]}),c.jsx("hr",{className:"my-1 border-white/10"}),c.jsxs("p",{className:"text-sm text-gray-100",children:[c.jsx("span",{className:"font-bold text-white",children:Wn(t.endTotal)})," Animales Totales (Final)"]})]}),c.jsxs("div",{className:"space-y-3 md:pr-4 md:border-r md:border-white/10",children:[c.jsx("p",{className:"text-xs font-semibold uppercase text-gray-400 mb-2",children:"Movimientos del Periodo"}),c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[c.jsx(hl,{size:14,className:"flex-shrink-0"}),c.jsxs("span",{className:"font-semibold",children:[Wn(t.nacimientosH+t.nacimientosM)," Nacimientos Totales"]})]}),c.jsxs("div",{className:"ml-6 text-xs text-gray-300",children:[c.jsxs("div",{children:[Wn(t.nacimientosH)," Hembras (0-3m)"]}),c.jsxs("div",{children:[Wn(t.nacimientosM)," Machos (0-3m)"]})]})]}),c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs("div",{className:"flex items-center gap-2 text-blue-400 text-sm",children:[c.jsx(IH,{size:14,className:"flex-shrink-0"}),c.jsx("span",{className:"font-semibold",children:"Promociones (Hembras)"})]}),c.jsxs("div",{className:"ml-6 text-xs text-gray-300",children:[c.jsxs("div",{children:[Wn(t.promocionCriaH)," Cría H → L. Temprano"]}),c.jsxs("div",{children:[Wn(t.promocionLevanteTemprano)," L. Temprano → L. Medio"]}),c.jsxs("div",{children:[Wn(t.promocionLevanteMedio)," L. Medio → L. Tardío"]}),c.jsxs("div",{children:[Wn(t.promocionLevanteTardio)," L. Tardío → Cabras"]})]})]}),c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[c.jsx(q1,{size:14,className:"flex-shrink-0"}),c.jsxs("span",{className:"font-semibold",children:[Wn(t.muertesTotales)," Muertes"]})]}),c.jsxs("div",{className:"ml-6 text-xs text-gray-300",children:[t.muertesCriaH>0&&c.jsxs("div",{children:[Wn(t.muertesCriaH)," Crías H (0-3m)"]}),t.muertesCriaM>0&&c.jsxs("div",{children:[Wn(t.muertesCriaM)," Crías M (0-3m)"]}),t.muertesLevanteTemprano>0&&c.jsxs("div",{children:[Wn(t.muertesLevanteTemprano)," L. Temprano (3-6m)"]}),t.muertesLevanteMedio>0&&c.jsxs("div",{children:[Wn(t.muertesLevanteMedio)," L. Medio (6-12m)"]}),t.muertesLevanteTardio>0&&c.jsxs("div",{children:[Wn(t.muertesLevanteTardio)," L. Tardío (12-18m)"]}),t.muertesCabras>0&&c.jsxs("div",{children:[Wn(t.muertesCabras)," Cabras (",">","18m)"]}),t.muertesPadres>0&&c.jsxs("div",{children:[Wn(t.muertesPadres)," Padres"]})]})]}),c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[c.jsx(WN,{size:14,className:"flex-shrink-0"}),c.jsxs("span",{className:"font-semibold",children:[Wn(t.ventasTotales)," Ventas (Elim./Descarte)"]})]}),c.jsxs("div",{className:"ml-6 text-xs text-gray-300",children:[t.ventasCabritos>0&&c.jsxs("div",{children:[Wn(t.ventasCabritos)," Crías M (Eliminación)"]}),t.ventasDescartes>0&&c.jsxs("div",{children:[Wn(t.ventasDescartes)," Cabras (Descarte)"]})]})]}),t.comprasTotales>0&&c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[c.jsx(Hce,{size:14,className:"flex-shrink-0"}),c.jsxs("span",{className:"font-semibold",children:[Wn(t.comprasTotales)," Compras"]})]}),c.jsxs("div",{className:"ml-6 text-xs text-gray-300",children:[t.comprasVientres>0&&c.jsxs("div",{children:[Wn(t.comprasVientres)," Vientres (12-18m)"]}),t.comprasPadres>0&&c.jsxs("div",{children:[Wn(t.comprasPadres)," Padres"]})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-semibold uppercase text-gray-400 mb-2",children:"Capacidad Productiva (Inicio → Fin)"}),c.jsxs("div",{className:"space-y-1 text-sm text-gray-300",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(MH,{size:12})," Vientres Productivos (",">","12m)"]}),c.jsxs("span",{className:"font-semibold text-white",children:[i," → ",a]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(G2,{size:12})," % Vientres Productivos (Final)"]}),c.jsxs("span",{className:"font-semibold text-white",children:[r(t.kpiProductivasPercent),"%"]})]}),c.jsx("hr",{className:"my-2 border-white/10"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(ba,{size:12})," Hembras en Crecimiento (","<","12m)"]}),c.jsxs("span",{className:"font-semibold text-white",children:[s," → ",o]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(G2,{size:12})," % Hembras en Crecimiento (Final)"]}),c.jsxs("span",{className:"font-semibold text-white",children:[r(t.kpiCrecimientoPercent),"%"]})]})]})]})]})})]})},y$=({options:t,value:e,onChange:n})=>c.jsxs("div",{className:"flex rounded-lg bg-gray-700 p-0.5",children:[" ",t.map(r=>c.jsxs("button",{onClick:()=>n(r.value),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${e===r.value?"bg-sky-600 text-white shadow-sm":"text-gray-300 hover:text-white"}`,children:[" ",r.label," "]},String(r.value)))," "]}),tXe=({active:t,payload:e})=>{if(t&&e&&e.length){const n=e[0].payload,r=e.reduce((i,a)=>i+a.value,0);return c.jsxs("div",{className:"bg-gray-900/80 p-3 rounded-lg border border-white/10 shadow-lg backdrop-blur-md animate-fade-in",children:[c.jsx("p",{className:"text-sm font-bold text-white",children:n.periodLabel}),c.jsxs("p",{className:"text-lg font-mono text-white",children:["Total Hembras: ",Wn(r)]}),c.jsx("hr",{className:"border-white/10 my-1.5"}),c.jsx("div",{className:"space-y-1",children:e.slice().reverse().map((i,a)=>c.jsxs("div",{className:"flex justify-between items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{style:{backgroundColor:i.color},className:"w-2.5 h-2.5 rounded-full"}),c.jsx("span",{className:"text-xs text-gray-300",children:i.name})]}),c.jsx("span",{className:"text-xs font-mono text-white",children:Wn(i.value)})]},a))})]})}return null},nXe=t=>t>=1e3?`${(t/1e3).toFixed(0)}k`:t.toString(),rXe=({data:t})=>{const e={cabras:"colorCabras",lTardio:"colorLTardio",lMedio:"colorLMedio",lTemprano:"colorLTemprano",criaH:"colorCriaH"},n={cabras:"#5856D6",lTardio:"#007AFF",lMedio:"#34C759",lTemprano:"#FF9500",criaH:"#FFCC00"},r=i=>{const a=t[i];return a&&(a.month===1||i===0)?`Año ${a.year}`:a&&a.month===7?"S2":""};return c.jsx("div",{className:"h-60 w-full rounded-xl bg-gray-800/50 p-4 border border-white/10",children:c.jsx(ca,{width:"100%",height:"100%",children:c.jsxs(m_,{data:t,margin:{top:5,right:10,left:-20,bottom:5},stackOffset:"none",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:e.cabras,x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:n.cabras,stopOpacity:.7}),c.jsx("stop",{offset:"95%",stopColor:n.cabras,stopOpacity:.1})]}),c.jsxs("linearGradient",{id:e.lTardio,x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:n.lTardio,stopOpacity:.7}),c.jsx("stop",{offset:"95%",stopColor:n.lTardio,stopOpacity:.1})]}),c.jsxs("linearGradient",{id:e.lMedio,x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:n.lMedio,stopOpacity:.7}),c.jsx("stop",{offset:"95%",stopColor:n.lMedio,stopOpacity:.1})]}),c.jsxs("linearGradient",{id:e.lTemprano,x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:n.lTemprano,stopOpacity:.7}),c.jsx("stop",{offset:"95%",stopColor:n.lTemprano,stopOpacity:.1})]}),c.jsxs("linearGradient",{id:e.criaH,x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:n.criaH,stopOpacity:.7}),c.jsx("stop",{offset:"95%",stopColor:n.criaH,stopOpacity:.1})]})]}),c.jsx(Rf,{strokeDasharray:"3 3",strokeOpacity:.1}),c.jsx(Di,{dataKey:"monthIndex",stroke:"#9ca3af",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:r,padding:{left:10,right:10}}),c.jsx(Ki,{stroke:"#9ca3af",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:nXe}),c.jsx(Or,{content:c.jsx(tXe,{})}),c.jsx(Us,{type:"monotone",dataKey:"endCabras",name:"Cabras (>18m)",stackId:"1",stroke:n.cabras,strokeWidth:2,fill:`url(#${e.cabras})`,activeDot:{r:6,stroke:"white",strokeWidth:2,fill:n.cabras}}),c.jsx(Us,{type:"monotone",dataKey:"endLevanteTardio",name:"L. Tardío (12-18m)",stackId:"1",stroke:n.lTardio,strokeWidth:2,fill:`url(#${e.lTardio})`,activeDot:{r:6,stroke:"white",strokeWidth:2,fill:n.lTardio}}),c.jsx(Us,{type:"monotone",dataKey:"endLevanteMedio",name:"L. Medio (6-12m)",stackId:"1",stroke:n.lMedio,strokeWidth:2,fill:`url(#${e.lMedio})`,activeDot:{r:6,stroke:"white",strokeWidth:2,fill:n.lMedio}}),c.jsx(Us,{type:"monotone",dataKey:"endLevanteTemprano",name:"L. Temprano (3-6m)",stackId:"1",stroke:n.lTemprano,strokeWidth:2,fill:`url(#${e.lTemprano})`,activeDot:{r:6,stroke:"white",strokeWidth:2,fill:n.lTemprano}}),c.jsx(Us,{type:"monotone",dataKey:"endCriaH",name:"Crías H (0-3m)",stackId:"1",stroke:n.criaH,strokeWidth:2,fill:`url(#${e.criaH})`,activeDot:{r:6,stroke:"white",strokeWidth:2,fill:n.criaH}})]})})})},b$=({simulationConfig:t,mode:e})=>{const[n,r]=I.useState(!1),[i,a]=I.useState(3),[s,o]=I.useState("Anual"),{annualData:l,semestralData:u,monthlyData:d}=mqe(t,i),f=s==="Anual"?l:u,p=[{label:"1 Año",value:1},{label:"3 Años",value:3},{label:"5 Años",value:5},{label:"10 Años",value:10}],h=[{label:"Anual",value:"Anual"},{label:"Semestral",value:"Semestral"}];return c.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8",children:[c.jsxs("div",{className:"flex flex-col items-stretch gap-6",children:[c.jsxs("h1",{className:"text-2xl font-bold text-white",children:[" Evolución del Rebaño ",c.jsxs("span",{className:"ml-3 font-normal text-gray-400",children:["(",e==="simulacion"?"Simulación":"Proyección Real",")"]})," "]}),c.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 md:flex-row",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-400",children:"Horizonte:"}),c.jsx(y$,{options:p,value:i,onChange:m=>a(m)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-400",children:"Vista:"}),c.jsx(y$,{options:h,value:s,onChange:m=>o(m)})]}),c.jsxs("button",{onClick:()=>r(!0),disabled:!l||l.length===0,className:"flex w-full items-center justify-center gap-2 rounded-lg bg-gray-700 px-3 py-1.5 text-sm font-medium text-sky-300 transition-colors hover:bg-gray-600 disabled:opacity-50 md:w-auto",children:[c.jsx(lT,{size:16}),"Reporte Detallado"]})]}),c.jsx(rXe,{data:d}),c.jsx("div",{className:"flex flex-col items-stretch gap-4",children:f.map(m=>{const g=s==="Anual"?`anno-${m.year}`:`sem-${m.semestreIndex}`;return c.jsx(eXe,{data:m},g)})})]}),c.jsx(JYe,{isOpen:n,onClose:()=>r(!1),monthlyData:d,semestralData:u,annualData:l})]})},Jf=({title:t,icon:e,children:n,defaultOpen:r=!1})=>{const[i,a]=I.useState(r);return c.jsxs("div",{className:"mb-4",children:[c.jsxs("button",{type:"button",onClick:()=>a(!i),className:"text-sm font-semibold text-zinc-400 uppercase tracking-wide flex items-center justify-between gap-2 mb-2 px-4 w-full",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[" ",c.jsx(e,{size:16})," ",t]}),c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-4 h-4 transition-transform ${i?"rotate-180":"rotate-0"}`,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})]}),i&&c.jsx("div",{className:"bg-brand-glass rounded-2xl border border-brand-border divide-y divide-brand-border overflow-hidden animate-fade-in",children:n})]})},Fi=xe.forwardRef(({label:t,unit:e,...n},r)=>c.jsxs("div",{className:"p-3 bg-ios-modal-bg flex justify-between items-center",children:[" ",c.jsx("label",{htmlFor:n.id||n.name,className:"text-white text-base",children:t})," ",c.jsxs("div",{className:"flex items-center gap-2",children:[" ",c.jsx("input",{ref:r,...n,className:"w-24 bg-zinc-700/80 rounded-lg p-2 text-white text-right font-mono text-base focus:outline-none focus:ring-2 focus:ring-brand-orange"})," ",e&&c.jsx("span",{className:"text-zinc-400 w-8 text-left",children:e})," "]})," "]})),j1=({label:t,name:e,value:n,onChange:r})=>{const i=["No Usar","Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],a=s=>{const o=parseInt(s.target.value,10);r(e,o===0?void 0:o)};return c.jsxs("div",{className:"p-3 bg-ios-modal-bg flex justify-between items-center",children:[" ",c.jsx("label",{htmlFor:e,className:"text-white text-base",children:t})," ",c.jsxs("select",{id:e,name:e,value:n??0,onChange:a,className:"w-28 bg-zinc-700/80 rounded-lg p-2 text-white text-base focus:outline-none focus:ring-2 focus:ring-brand-orange appearance-none text-center",children:[" ",i.map((s,o)=>c.jsx("option",{value:o,children:s},o))," "]})," "]})},iXe=({label:t,name:e,value:n,onChange:r,options:i})=>{const a=s=>{r(e,parseInt(s.target.value,10))};return c.jsxs("div",{className:"p-3 bg-ios-modal-bg flex justify-between items-center",children:[c.jsx("label",{htmlFor:e,className:"text-white text-base",children:t}),c.jsx("select",{id:e,name:e,value:n??"",onChange:a,className:"w-40 bg-zinc-700/80 rounded-lg p-2 text-white text-base focus:outline-none focus:ring-2 focus:ring-brand-orange appearance-none text-center",children:i.map(s=>c.jsx("option",{value:s.value,children:s.label},s.value))})]})},x$={initialCabras:0,initialLevanteTardio:0,initialLevanteMedio:0,initialLevanteTemprano:0,initialCriaH:0,initialCriaM:0,initialPadres:1,diasLactanciaObjetivo:305},aXe=({initialConfig:t,onSimulate:e})=>{const[n,r]=I.useState(()=>({...x$,...t||{}}));I.useEffect(()=>{t&&JSON.stringify(t)!==JSON.stringify(n)&&r({...x$,...t})},[t]),I.useEffect(()=>{const l=n.initialCabras??0,u=n.initialLevanteTemprano??0,d=n.initialLevanteMedio??0,f=n.initialLevanteTardio??0,p=n.initialPadres,h=l+f+d+u,m=Math.max(1,Math.ceil(h/30));(p===void 0||p!==m)&&r(g=>({...g,initialPadres:m}))},[n.initialCabras,n.initialLevanteTemprano,n.initialLevanteMedio,n.initialLevanteTardio,n.initialPadres]);const i=l=>{const{name:u,value:d,type:f}=l.target;let p=d;f==="number"&&(d===""?p=void 0:(p=parseFloat(d),isNaN(p)&&(p=void 0))),r(h=>({...h,[u]:p}))},a=(l,u)=>{r(d=>({...d,[l]:u}))},s=(l,u)=>{r(d=>({...d,[l]:u}))},o=l=>{if(l.preventDefault(),!n.mesInicioMonta1&&!n.mesInicioMonta2&&!n.mesInicioMonta3&&!n.mesInicioMonta4){alert("Debes seleccionar al menos un mes de inicio para la Temporada de Monta 1.");return}const u=n.litrosPromedioPorAnimal??0,d=n.litrosPicoPorAnimal??0;if(d>0&&d<=u){alert("Error: La Producción (Pico) debe ser mayor que la Producción (Promedio).");return}const f={initialCabras:n.initialCabras??0,initialLevanteTardio:n.initialLevanteTardio??0,initialLevanteMedio:n.initialLevanteMedio??0,initialLevanteTemprano:n.initialLevanteTemprano??0,initialCriaH:n.initialCriaH??0,initialCriaM:n.initialCriaM??0,initialPadres:n.initialPadres??1,comprasVientresAnual:n.comprasVientresAnual??0,mesInicioMonta1:n.mesInicioMonta1,mesInicioMonta2:n.mesInicioMonta2,mesInicioMonta3:n.mesInicioMonta3,mesInicioMonta4:n.mesInicioMonta4,duracionMontaDias:n.duracionMontaDias??45,diasGestacion:n.diasGestacion??150,litrosPromedioPorAnimal:n.litrosPromedioPorAnimal??1.8,litrosPicoPorAnimal:n.litrosPicoPorAnimal??(n.litrosPromedioPorAnimal??1.8)*1.4,diasLactanciaObjetivo:n.diasLactanciaObjetivo??305,porcentajePrenez:n.porcentajePrenez??85,porcentajeProlificidad:n.porcentajeProlificidad??120,mortalidadCrias:n.mortalidadCrias??5,mortalidadLevante:n.mortalidadLevante??3,mortalidadCabras:n.mortalidadCabras??3,tasaReemplazo:n.tasaReemplazo??20,eliminacionCabritos:n.eliminacionCabritos??100,precioLecheLitro:n.precioLecheLitro??.5,precioVentaCabritoKg:n.precioVentaCabritoKg??3,precioVentaDescarteAdulto:n.precioVentaDescarteAdulto??50,monedaSimbolo:n.monedaSimbolo??"$"};console.log("Ejecutando simulación con (configToSend V5.0):",f),e(f)};return c.jsxs("form",{onSubmit:o,className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in p-4 pb-32",children:[c.jsxs("header",{className:"text-center mb-6",children:[" ",c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Modo Simulación"})," ",c.jsx("p",{className:"text-lg text-zinc-400",children:"Define tus parámetros de partida"})," "]}),c.jsxs(Jf,{title:"Población Inicial",icon:pu,defaultOpen:!0,children:[c.jsx(Fi,{label:"Cabras (>18m)",type:"number",name:"initialCabras",value:n.initialCabras??"",onChange:i,min:"0",step:"1",unit:"N°"}),c.jsx(Fi,{label:"L. Tardío (12-18m)",type:"number",name:"initialLevanteTardio",value:n.initialLevanteTardio??"",onChange:i,min:"0",step:"1",unit:"N°"}),c.jsx(Fi,{label:"L. Medio (6-12m)",type:"number",name:"initialLevanteMedio",value:n.initialLevanteMedio??"",onChange:i,min:"0",step:"1",unit:"N°"}),c.jsx(Fi,{label:"L. Temprano (3-6m)",type:"number",name:"initialLevanteTemprano",value:n.initialLevanteTemprano??"",onChange:i,min:"0",step:"1",unit:"N°"}),c.jsx(Fi,{label:"Crías H (0-3m)",type:"number",name:"initialCriaH",value:n.initialCriaH??"",onChange:i,min:"0",step:"1",unit:"N°"}),c.jsx(Fi,{label:"Crías M (0-3m)",type:"number",name:"initialCriaM",value:n.initialCriaM??"",onChange:i,min:"0",step:"1",unit:"N°"}),c.jsx(Fi,{label:"Reproductores (>12m)",type:"number",name:"initialPadres",value:n.initialPadres??"",onChange:i,min:"1",step:"1",unit:"N°"}),c.jsx("p",{className:"text-xs text-zinc-500 px-3 py-2 text-center",children:"Nota: Reproductores calculados (1/30 hembras)."}),c.jsx(Fi,{label:"Compras Vientres/Año",type:"number",name:"comprasVientresAnual",value:n.comprasVientresAnual??"",onChange:i,min:"0",step:"1",unit:"N°"})]}),c.jsxs(Jf,{title:"Temporadas de Monta",icon:oo,defaultOpen:!0,children:[c.jsx(j1,{label:"Inicio Temporada 1",name:"mesInicioMonta1",value:n.mesInicioMonta1,onChange:a}),c.jsx(j1,{label:"Inicio Temporada 2",name:"mesInicioMonta2",value:n.mesInicioMonta2,onChange:a}),c.jsx(j1,{label:"Inicio Temporada 3",name:"mesInicioMonta3",value:n.mesInicioMonta3,onChange:a}),c.jsx(j1,{label:"Inicio Temporada 4",name:"mesInicioMonta4",value:n.mesInicioMonta4,onChange:a}),c.jsx(Fi,{label:"Duración Monta",type:"number",name:"duracionMontaDias",value:n.duracionMontaDias??"",onChange:i,min:"1",step:"1",unit:"días"})]}),c.jsx(Jf,{title:"Parámetros de Gestación",icon:TA,defaultOpen:!1,children:c.jsx(Fi,{label:"Días Gestación",type:"number",name:"diasGestacion",value:n.diasGestacion??"",onChange:i,min:"140",max:"160",step:"1",unit:"días"})}),c.jsxs(Jf,{title:"Manejo Productivo",icon:TA,defaultOpen:!1,children:[c.jsx(Fi,{label:"Producción Leche (Prom.)",type:"number",name:"litrosPromedioPorAnimal",value:n.litrosPromedioPorAnimal??"",onChange:i,min:"0",step:"0.1",unit:"L/día"}),c.jsx(Fi,{label:"Producción Leche (Pico)",type:"number",name:"litrosPicoPorAnimal",value:n.litrosPicoPorAnimal??"",onChange:i,min:"0",step:"0.1",unit:"L/día"}),c.jsx(iXe,{label:"Días de Lactancia",name:"diasLactanciaObjetivo",value:n.diasLactanciaObjetivo,onChange:s,options:[{label:"305 Días (10 Meses)",value:305},{label:"210 Días (7 Meses)",value:210}]})]}),c.jsxs(Jf,{title:"Índices Biológicos",icon:G2,defaultOpen:!0,children:[c.jsx(Fi,{label:"% de Preñez",type:"number",name:"porcentajePrenez",value:n.porcentajePrenez??"",onChange:i,min:"0",max:"100",step:"1",unit:"%"}),c.jsx(Fi,{label:"% Prolificidad",type:"number",name:"porcentajeProlificidad",value:n.porcentajeProlificidad??"",onChange:i,min:"0",step:"1",unit:"%"}),c.jsx(Fi,{label:"% Mortalidad Crías (0-3m)",type:"number",name:"mortalidadCrias",value:n.mortalidadCrias??"",onChange:i,min:"0",max:"100",step:"1",unit:"%"}),c.jsx(Fi,{label:"% Mortalidad Levante (3-18m)",type:"number",name:"mortalidadLevante",value:n.mortalidadLevante??"",onChange:i,min:"0",max:"100",step:"1",unit:"%"}),c.jsx(Fi,{label:"% Mortalidad Cabras (>18m)",type:"number",name:"mortalidadCabras",value:n.mortalidadCabras??"",onChange:i,min:"0",max:"100",step:"1",unit:"%"})]}),c.jsxs(Jf,{title:"Parámetros de Manejo",icon:TA,defaultOpen:!1,children:[c.jsx(Fi,{label:"% Reemplazo (Anual)",type:"number",name:"tasaReemplazo",value:n.tasaReemplazo??"",onChange:i,min:"0",max:"100",step:"1",unit:"%"}),c.jsx(Fi,{label:"% Eliminación Crías M (0-3m)",type:"number",name:"eliminacionCabritos",value:n.eliminacionCabritos??"",onChange:i,min:"0",max:"100",step:"1",unit:"%"})]}),c.jsxs(Jf,{title:"Parámetros Económicos",icon:pl,defaultOpen:!1,children:[c.jsx(Fi,{label:"Precio Venta Leche",type:"number",name:"precioLecheLitro",value:n.precioLecheLitro??"",onChange:i,min:"0",step:"0.01",unit:`${n.monedaSimbolo??"$"}/L`}),c.jsx(Fi,{label:"Precio Venta Cabrito",type:"number",name:"precioVentaCabritoKg",value:n.precioVentaCabritoKg??"",onChange:i,min:"0",step:"0.01",unit:`${n.monedaSimbolo??"$"}/Kg`}),c.jsx(Fi,{label:"Precio Venta Descarte",type:"number",name:"precioVentaDescarteAdulto",value:n.precioVentaDescarteAdulto??"",onChange:i,min:"0",step:"1",unit:n.monedaSimbolo??"$"})]}),c.jsx("div",{className:"fixed bottom-16 left-0 right-0 p-4 bg-brand-dark/80 backdrop-blur-lg border-t border-brand-border z-10",style:{paddingBottom:"calc(1rem + env(safe-area-inset-bottom))"},children:c.jsxs("button",{type:"submit",className:"w-full max-w-2xl mx-auto bg-brand-orange text-black font-bold py-4 rounded-xl text-lg flex items-center justify-center gap-2 hover:bg-orange-400 transition-colors",children:[" ",c.jsx(ba,{size:20})," Correr Simulación "]})})]})},KJ=()=>c.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#1C1C1E] animate-fade-in",children:[c.jsxs("div",{className:"relative flex items-center justify-center w-24 h-24",children:[c.jsx(Db,{className:"text-brand-orange w-12 h-12"}),c.jsx("div",{className:"absolute inset-0",children:c.jsx(UH,{className:"w-24 h-24 text-zinc-700 animate-spin-slow"})})]}),c.jsx("p",{className:"mt-4 text-lg font-medium text-zinc-400 tracking-wider",children:"Cargando datos..."})]}),N1={comprasVientresAnual:0,duracionMontaDias:45,diasGestacion:150,litrosPromedioPorAnimal:1.8,litrosPicoPorAnimal:2.6,diasLactanciaObjetivo:305,porcentajePrenez:90,porcentajeProlificidad:120,mortalidadCrias:5,mortalidadLevante:3,mortalidadCabras:3,tasaReemplazo:20,eliminacionCabritos:100,precioLecheLitro:.5,precioVentaCabritoKg:3,precioVentaDescarteAdulto:50,monedaSimbolo:"$"};function sXe({onSwitchModule:t}){const{syncStatus:e,appConfig:n,animals:r,isLoading:i}=Xt(),[a,s]=I.useState("setup"),[o,l]=I.useState(()=>{try{const v=localStorage.getItem("ganaderoOS_simConfig");if(v)return JSON.parse(v)}catch(v){console.error("Error al cargar simulación guardada de localStorage:",v),localStorage.removeItem("ganaderoOS_simConfig")}return null}),[u,d]=I.useState(null),f=I.useCallback(()=>{if(i||!r||r.length===0)return null;let v=0,y=0,b=0,S=0,A=0,C=0,T=0;r.filter(k=>k.status==="Activo"&&!k.isReference).forEach(k=>{const O=k.lifecycleStage;O==="Cabra Adulta"||O==="Cabra Multípara"||O==="Cabra Primípara"?v++:O==="Cabritona"?S++:O==="Cabrita"?A++:O==="Macho Cabrío"&&T++}),T=Math.max(1,T);const E={...N1,initialCabras:v,initialLevanteTardio:y,initialLevanteMedio:b,initialLevanteTemprano:S,initialCriaH:A,initialCriaM:C,initialPadres:T,...n||{},comprasVientresAnual:0};return E.monedaSimbolo=(n==null?void 0:n.monedaSimbolo)??N1.monedaSimbolo,console.log("Real config prepared (V3.12 - Defaults + Real Pop):",E),E},[r,i,n]);I.useEffect(()=>{if(a==="real-results"&&!u){const v=f();v&&d(v)}},[a,u,f]);const p=v=>{l(v),s("sim-results")},h=v=>{s(v)},m=[{view:"setup",label:"Setup",icon:cT},{view:"sim-results",label:"Simulación",icon:MH},{view:"real-results",label:"Real",icon:Za}],g={...N1,initialCabras:0,initialLevanteTardio:0,initialLevanteMedio:0,initialLevanteTemprano:0,initialCriaH:0,initialCriaM:0,initialPadres:1,...n||{}};return g.monedaSimbolo=(n==null?void 0:n.monedaSimbolo)??N1.monedaSimbolo,I.useEffect(()=>{try{o?localStorage.setItem("ganaderoOS_simConfig",JSON.stringify(o)):localStorage.removeItem("ganaderoOS_simConfig")}catch(v){console.error("Error al guardar simulación en localStorage:",v)}},[o]),c.jsxs("div",{className:"font-sans text-gray-200 min-h-screen animate-fade-in",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[a!=="setup"&&c.jsx("button",{onClick:()=>h("setup"),className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors flex-shrink-0","aria-label":"Volver a Configuración",children:c.jsx(ji,{size:24})}),c.jsx(ba,{className:`text-indigo-400 ${a==="setup"?"":"hidden sm:block"} flex-shrink-0`,size:28}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("h1",{className:"text-xl font-bold text-white leading-none truncate",children:"GanaderoOS"}),c.jsxs("p",{className:"text-xs text-zinc-400 leading-none truncate",children:["Evolución - ",a==="setup"?"Configurar Simulación":a==="sim-results"?"Resultados Simulación":"Proyección Real"]})]})]}),c.jsx("div",{className:"flex items-center gap-4 flex-shrink-0",children:c.jsx(yv,{status:e})})]})}),c.jsxs("main",{className:"pt-16 pb-16",children:[a==="setup"&&c.jsx(aXe,{initialConfig:o||u||g,onSimulate:p}),a==="sim-results"&&o&&c.jsx(b$,{simulationConfig:o,mode:"simulacion"},"sim-results"),a==="sim-results"&&!o&&c.jsx("div",{className:"text-center p-10 text-zinc-400",children:"Primero configura y corre una simulación."}),a==="real-results"&&u&&c.jsx(b$,{simulationConfig:u,mode:"real"},"real-results"),a==="real-results"&&!u&&i&&c.jsx(KJ,{}),a==="real-results"&&!u&&!i&&c.jsx("div",{className:"text-center p-10 text-zinc-400",children:"No hay suficientes datos reales."})]}),c.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-20 bg-black/50 backdrop-blur-xl border-t border-white/20 flex justify-around h-16",children:m.map(v=>{const y=v.view==="sim-results"&&!o||v.view==="real-results"&&!u,b=a===v.view;return c.jsxs("button",{onClick:()=>h(v.view),disabled:y,className:`relative flex flex-col items-center justify-center pt-3 pb-2 w-full transition-colors ${b?"text-indigo-400 font-semibold":"text-gray-500 hover:text-white"} ${y?"opacity-40 cursor-not-allowed":""}`,"aria-current":b?"page":void 0,children:[" ",c.jsx(v.icon,{className:"w-6 h-6"})," ",c.jsx("span",{className:"text-xs font-semibold mt-1",children:v.label})," "]},v.view)})}),c.jsx("div",{style:{position:"fixed",bottom:"calc(4rem + 1rem)",right:"1rem",zIndex:40},children:c.jsx(Qb,{onSwitchModule:t})})]})}function oXe(){const{currentUser:t,isLoading:e}=NH(),{isLoading:n}=Xt(),[r,i]=I.useState("rebano"),[a,s]=I.useState({page:null,sourceModule:void 0}),[o,l]=I.useState({lactokeeper:{name:"dashboard"}});I.useEffect(()=>{r!=="rebano"&&s({page:null,sourceModule:void 0})},[r]);const u=I.useCallback(p=>{i(p)},[]),d=I.useCallback((p,h)=>{s({page:p,sourceModule:h}),i("rebano")},[]),f=I.useCallback(p=>{l(h=>({...h,lactokeeper:p}))},[]);if(e||t&&n)return c.jsx(KJ,{});if(!t)return c.jsx(uue,{});switch(r){case"lactokeeper":return c.jsx(y9e,{initialPage:o.lactokeeper,onPageStateChange:f,navigateToRebano:d,onSwitchModule:u});case"kilos":return c.jsx(k9e,{navigateToRebano:d,onSwitchModule:u});case"salud":return c.jsx(uqe,{onSwitchModule:u});case"cents":return c.jsx(pqe,{onSwitchModule:u});case"evolucion":return c.jsx(sXe,{onSwitchModule:u});case"rebano":default:return c.jsx(Jze,{initialState:a,onSwitchModule:u})}}Aj.createRoot(document.getElementById("root")).render(c.jsx(xe.StrictMode,{children:c.jsx(tce,{children:c.jsx(uce,{children:c.jsx(oXe,{})})})}));export{Br as _,Zp as c,Mr as g};
